---
title: Projektowanie przy użyciu typów referencyjnych dopuszczających wartość null
description: Ten zaawansowany samouczek zawiera wprowadzenie do typów referencyjnych dopuszczających wartość null. Dowiesz się, w jaki sposób projekt zostanie zastosowany, gdy wartości odniesienia mogą mieć wartość null, i że kompilator wymusi, gdy nie mogą mieć wartości null.
ms.date: 02/19/2019
ms.custom: mvc
ms.openlocfilehash: 357ebd13ca4c610f1c65009621ee628a90c70b15
ms.sourcegitcommit: 6f28b709592503d27077b16fff2e2eacca569992
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/28/2019
ms.locfileid: "70105775"
---
# <a name="tutorial-migrate-existing-code-with-nullable-reference-types"></a><span data-ttu-id="1ca05-104">Samouczek: Migruj istniejący kod z typami referencyjnymi Nullable</span><span class="sxs-lookup"><span data-stu-id="1ca05-104">Tutorial: Migrate existing code with nullable reference types</span></span>

<span data-ttu-id="1ca05-105">C#8 wprowadza **typy odwołań do wartości null**, które uzupełniają typy odwołań w taki sam sposób, jak typy wartości null uzupełniają typy wartości.</span><span class="sxs-lookup"><span data-stu-id="1ca05-105">C# 8 introduces **nullable reference types**, which complement reference types the same way nullable value types complement value types.</span></span> <span data-ttu-id="1ca05-106">Należy zadeklarować zmienną jako **typ referencyjny dopuszczający wartość null** poprzez dołączenie `?` do typu.</span><span class="sxs-lookup"><span data-stu-id="1ca05-106">You declare a variable to be a **nullable reference type** by appending a `?` to the type.</span></span> <span data-ttu-id="1ca05-107">Na przykład `string?` reprezentuje wartość null `string`.</span><span class="sxs-lookup"><span data-stu-id="1ca05-107">For example, `string?` represents a nullable `string`.</span></span> <span data-ttu-id="1ca05-108">Możesz użyć tych nowych typów, aby dokładniej wyznaczać intencje projektowania: niektóre zmienne *muszą zawsze mieć wartość*, inne *mogą nie mieć wartości*.</span><span class="sxs-lookup"><span data-stu-id="1ca05-108">You can use these new types to more clearly express your design intent: some variables *must always have a value*, others *may be missing a value*.</span></span> <span data-ttu-id="1ca05-109">Wszystkie istniejące zmienne typu referencyjnego byłyby interpretowane jako typ referencyjny, który nie dopuszcza wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-109">Any existing variables of a reference type would be interpreted as a non-nullable reference type.</span></span> 

<span data-ttu-id="1ca05-110">W tym samouczku dowiesz się, jak:</span><span class="sxs-lookup"><span data-stu-id="1ca05-110">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
> - <span data-ttu-id="1ca05-111">Włącz sprawdzanie odwołań o wartości null podczas pracy z kodem.</span><span class="sxs-lookup"><span data-stu-id="1ca05-111">Enable null reference checks as you work with code.</span></span>
> - <span data-ttu-id="1ca05-112">Diagnozuj i popraw różne ostrzeżenia związane z wartościami null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-112">Diagnose and correct different warnings related to null values.</span></span>
> - <span data-ttu-id="1ca05-113">Zarządzaj interfejsem pomiędzy włączonymi do dopuszczania wartości null a niedozwolonymi kontekstami.</span><span class="sxs-lookup"><span data-stu-id="1ca05-113">Manage the interface between nullable enabled and nullable disabled contexts.</span></span>
> - <span data-ttu-id="1ca05-114">Kontrolowanie kontekstów adnotacji dopuszczających wartość null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-114">Control nullable annotation contexts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="1ca05-115">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="1ca05-115">Prerequisites</span></span>

<span data-ttu-id="1ca05-116">Musisz skonfigurować maszynę do uruchamiania programu .NET Core, w tym kompilatora C# 8,0 beta.</span><span class="sxs-lookup"><span data-stu-id="1ca05-116">You'll need to set up your machine to run .NET Core, including the C# 8.0 beta compiler.</span></span> <span data-ttu-id="1ca05-117">Kompilator C# 8-Beta jest dostępny w programie [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019)lub najnowszej [wersji zapoznawczej programu .NET Core 3,0](https://dotnet.microsoft.com/download/dotnet-core/3.0).</span><span class="sxs-lookup"><span data-stu-id="1ca05-117">The C# 8 beta compiler is available with [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=inline+link&utm_content=download+vs2019), or the latest [.NET Core 3.0 preview](https://dotnet.microsoft.com/download/dotnet-core/3.0).</span></span>

<span data-ttu-id="1ca05-118">W C# tym samouczku założono, że wiesz już, jak i .NET, w tym Visual Studio lub interfejs wiersza polecenia platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="1ca05-118">This tutorial assumes you're familiar with C# and .NET, including either Visual Studio or the .NET Core CLI.</span></span>

## <a name="explore-the-sample-application"></a><span data-ttu-id="1ca05-119">Eksplorowanie przykładowej aplikacji</span><span class="sxs-lookup"><span data-stu-id="1ca05-119">Explore the sample application</span></span>

<span data-ttu-id="1ca05-120">Przeprowadzona Przykładowa aplikacja jest aplikacją internetową czytnika kanału informacyjnego RSS.</span><span class="sxs-lookup"><span data-stu-id="1ca05-120">The sample application that you'll migrate is an RSS feed reader web app.</span></span> <span data-ttu-id="1ca05-121">Odczytuje z pojedynczego kanału informacyjnego RSS i wyświetla podsumowania dla najnowszych artykułów.</span><span class="sxs-lookup"><span data-stu-id="1ca05-121">It reads from a single RSS feed and displays summaries for the most recent articles.</span></span> <span data-ttu-id="1ca05-122">Aby odwiedzić witrynę, możesz kliknąć dowolny z tych artykułów.</span><span class="sxs-lookup"><span data-stu-id="1ca05-122">You can click on any of the articles to visit the site.</span></span> <span data-ttu-id="1ca05-123">Aplikacja jest stosunkowo nowa, ale została zapisywana przed udostępnieniem typów referencyjnych dopuszczających wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-123">The application is relatively new but was written before nullable reference types were available.</span></span> <span data-ttu-id="1ca05-124">Decyzje projektowe dotyczące zasad dotyczących dźwięku reprezentowane przez aplikację, ale nie korzystają z tej ważnej funkcji języka.</span><span class="sxs-lookup"><span data-stu-id="1ca05-124">The design decisions for the application represented sound principles, but don't take advantage of this important language feature.</span></span>

<span data-ttu-id="1ca05-125">Przykładowa aplikacja zawiera bibliotekę testów jednostkowych, która sprawdza poprawność głównych funkcji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1ca05-125">The sample application includes a unit test library that validates the major functionality of the app.</span></span> <span data-ttu-id="1ca05-126">Ten projekt ułatwi bezpieczne uaktualnienie, jeśli zmienisz dowolną implementację w oparciu o wygenerowane ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="1ca05-126">That project will make it easier to upgrade safely, if you change any of the implementation based on the warnings generated.</span></span> <span data-ttu-id="1ca05-127">Możesz pobrać kod początkowy z repozytorium usługi GitHub [/przykłady](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) .</span><span class="sxs-lookup"><span data-stu-id="1ca05-127">You can download the starter code from the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/start) GitHub repository.</span></span>

<span data-ttu-id="1ca05-128">Celem migrowania projektu powinna być skorzystanie z nowych funkcji języka, aby wyraźnie wyrażać intencję do wartości null zmiennych i zrobić to w taki sposób, aby kompilator nie generował ostrzeżeń w przypadku braku kontekstu adnotacji z dopuszczaniem wartości null i kontekst ostrzegawczy dopuszczający `enabled`wartość null jest ustawiony na wartość.</span><span class="sxs-lookup"><span data-stu-id="1ca05-128">Your goal migrating a project should be to leverage the new language features so that you clearly express your intent on the nullability of variables, and do so in such a way that the compiler doesn't generate warnings when you have the nullable annotation context and nullable warning context set to `enabled`.</span></span>

## <a name="upgrade-the-projects-to-c-8"></a><span data-ttu-id="1ca05-129">Uaktualnij projekty do C# 8</span><span class="sxs-lookup"><span data-stu-id="1ca05-129">Upgrade the projects to C# 8</span></span>

<span data-ttu-id="1ca05-130">Dobrym pierwszym krokiem jest określenie zakresu zadania migracji.</span><span class="sxs-lookup"><span data-stu-id="1ca05-130">A good first step is to determine the scope of the migration task.</span></span> <span data-ttu-id="1ca05-131">Zacznij od uaktualnienia projektu do C# 8,0 (lub nowszego).</span><span class="sxs-lookup"><span data-stu-id="1ca05-131">Start by upgrading the project to C# 8.0 (or newer).</span></span> <span data-ttu-id="1ca05-132">`LangVersion` Dodaj element do obu plików csproj dla projektu sieci Web i projektu testów jednostkowych:</span><span class="sxs-lookup"><span data-stu-id="1ca05-132">Add the `LangVersion` element to both csproj files for the web project and the unit test project:</span></span>

```xml
<LangVersion>8.0</LangVersion>
```

<span data-ttu-id="1ca05-133">Uaktualnienie wersji językowej powoduje C# wybranie 8,0, ale nie włączenie kontekstu adnotacji nullable ani kontekstu ostrzeżenia o wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-133">Upgrading the language version selects C# 8.0, but does not enable the nullable annotation context or the nullable warning context.</span></span> <span data-ttu-id="1ca05-134">Skompiluj ponownie projekt, aby upewnić się, że kompiluje się bez ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="1ca05-134">Rebuild the project to ensure that it builds without warnings.</span></span>

<span data-ttu-id="1ca05-135">Dobrym następnym krokiem jest włączenie kontekstu adnotacji nullable i zobacz, ile ostrzeżeń jest generowanych.</span><span class="sxs-lookup"><span data-stu-id="1ca05-135">A good next step is to turn on the nullable annotation context and see how many warnings are generated.</span></span> <span data-ttu-id="1ca05-136">Dodaj następujący element do obu plików csproj w rozwiązaniu bezpośrednio pod `LangVersion` elementem:</span><span class="sxs-lookup"><span data-stu-id="1ca05-136">Add the following element to both csproj files in the solution, directly under the `LangVersion` element:</span></span>

```xml
<Nullable>enable</Nullable>
```

> [!IMPORTANT]
> <span data-ttu-id="1ca05-137">Element miał wcześniej nazwę `NullableContextOptions`. `Nullable`</span><span class="sxs-lookup"><span data-stu-id="1ca05-137">The `Nullable` element was previously named `NullableContextOptions`.</span></span> <span data-ttu-id="1ca05-138">Zmiana nazwy jest dostarczana z programem Visual Studio 2019, 16,2-P1.</span><span class="sxs-lookup"><span data-stu-id="1ca05-138">The rename ships with Visual Studio 2019, 16.2-p1.</span></span> <span data-ttu-id="1ca05-139">Ta zmiana nie ma zestaw .NET Core SDK 3.0.100-preview5-011568.</span><span class="sxs-lookup"><span data-stu-id="1ca05-139">The .NET Core SDK 3.0.100-preview5-011568 does not have this change.</span></span> <span data-ttu-id="1ca05-140">Jeśli używasz interfejs wiersza polecenia platformy .NET Core, musisz użyć `NullableContextOptions` do momentu udostępnienia kolejnej wersji zapoznawczej.</span><span class="sxs-lookup"><span data-stu-id="1ca05-140">If you are using the .NET Core CLI, you'll need to use `NullableContextOptions` until the next preview is available.</span></span>

<span data-ttu-id="1ca05-141">Wykonaj kompilację testową i zwróć uwagę na listę ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="1ca05-141">Do a test build, and notice the warning list.</span></span> <span data-ttu-id="1ca05-142">W tej małej aplikacji kompilator generuje pięć ostrzeżeń, więc prawdopodobnie pozostawisz kontekst adnotacji z dopuszczaniem wartości null i Rozpocznij naprawianie ostrzeżeń dla całego projektu.</span><span class="sxs-lookup"><span data-stu-id="1ca05-142">In this small application, the compiler generates five warnings, so it's likely you'd leave the nullable annotation context enabled and start fixing warnings for the entire project.</span></span>

<span data-ttu-id="1ca05-143">Ta strategia działa tylko w przypadku mniejszych projektów.</span><span class="sxs-lookup"><span data-stu-id="1ca05-143">That strategy works only for smaller projects.</span></span> <span data-ttu-id="1ca05-144">W przypadku większych projektów liczba ostrzeżeń generowanych przez włączenie kontekstu adnotacji dopuszczających wartość null dla całej bazy kodu utrudnia systematyczne Rozwiązywanie ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="1ca05-144">For any larger projects, the number of warnings generated by enabling the nullable annotation context for the entire codebase makes it harder to fix the warnings systematically.</span></span> <span data-ttu-id="1ca05-145">W przypadku większych projektów przedsiębiorstwa często zajdzie potrzeba migracji jednego projektu jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="1ca05-145">For larger enterprise projects, you'll often want to migrate one project at a time.</span></span> <span data-ttu-id="1ca05-146">W każdym projekcie Przeprowadź migrację jednej klasy lub pliku jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="1ca05-146">In each project, migrate one class or file at a time.</span></span>

## <a name="warnings-help-discover-original-design-intent"></a><span data-ttu-id="1ca05-147">Ostrzeżenia ułatwiają odnajdywanie oryginalnego zamiaru projektu</span><span class="sxs-lookup"><span data-stu-id="1ca05-147">Warnings help discover original design intent</span></span>

<span data-ttu-id="1ca05-148">Istnieją dwie klasy, które generują wiele ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="1ca05-148">There are two classes that generate multiple warnings.</span></span> <span data-ttu-id="1ca05-149">Zacznij od `NewsStoryViewModel` klasy.</span><span class="sxs-lookup"><span data-stu-id="1ca05-149">Start with the `NewsStoryViewModel` class.</span></span> <span data-ttu-id="1ca05-150">`Nullable` Usuń element z obu plików csproj, aby ograniczyć zakres ostrzeżeń do sekcji kodu, z którym pracujesz.</span><span class="sxs-lookup"><span data-stu-id="1ca05-150">Remove the `Nullable` element from both csproj files so that you can limit the scope of warnings to the sections of code you're working with.</span></span> <span data-ttu-id="1ca05-151">Otwórz plik *NewsStoryViewModel.cs* i Dodaj następujące dyrektywy, aby włączyć kontekst adnotacji dopuszczający wartość null `NewsStoryViewModel` dla i przywrócić go po tej definicji klasy:</span><span class="sxs-lookup"><span data-stu-id="1ca05-151">Open the *NewsStoryViewModel.cs* file and add the following directives to enable the nullable annotation context for the `NewsStoryViewModel` and restore it following that class definition:</span></span>

```csharp
#nullable enable
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; }
    public string Uri { get; set; }
}
#nullable restore
```

<span data-ttu-id="1ca05-152">Te dwie dyrektywy pomagają skupić się na zadaniu migracji.</span><span class="sxs-lookup"><span data-stu-id="1ca05-152">These two directives help you focus your migration efforts.</span></span> <span data-ttu-id="1ca05-153">Ostrzeżenia dopuszczające wartość null są generowane dla obszaru kodu, nad którym pracujesz.</span><span class="sxs-lookup"><span data-stu-id="1ca05-153">The nullable warnings are generated for the area of code you're actively working on.</span></span> <span data-ttu-id="1ca05-154">Pozostawisz je do momentu, aż wszystko będzie gotowe do włączenia ostrzeżeń dla całego projektu.</span><span class="sxs-lookup"><span data-stu-id="1ca05-154">You'll leave them on until you're ready to turn on the warnings for the entire project.</span></span> <span data-ttu-id="1ca05-155">Należy użyć `restore` `disable` wartości zamiast, aby uniemożliwić przypadkowe wyłączenie tego kontekstu po włączeniu adnotacji dopuszczających wartości null dla całego projektu.</span><span class="sxs-lookup"><span data-stu-id="1ca05-155">You should use the `restore` rather than `disable` value so that you don't accidentally disable the context later when you've turned on nullable annotations for the entire project.</span></span> <span data-ttu-id="1ca05-156">Po włączeniu kontekstu adnotacji do wartości null dla całego projektu można usunąć wszystkie `#nullable` dyrektywy pragma z tego projektu.</span><span class="sxs-lookup"><span data-stu-id="1ca05-156">Once you've turned on the nullable annotation context for the entire project, you can remove all the `#nullable` pragmas from that project.</span></span>

<span data-ttu-id="1ca05-157">`NewsStoryViewModel` Klasa jest obiektem transferu danych (DTO), a dwie właściwości są ciągami odczytu/zapisu:</span><span class="sxs-lookup"><span data-stu-id="1ca05-157">The `NewsStoryViewModel` class is a data transfer object (DTO) and two of the properties are read/write strings:</span></span>

[!code-csharp[InitialViewModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#StarterViewModel)]

<span data-ttu-id="1ca05-158">Te dwie właściwości powodują `CS8618`, że właściwość "niedopuszczający wartości null" jest niezainicjowana ".</span><span class="sxs-lookup"><span data-stu-id="1ca05-158">These two properties cause `CS8618`, "Non-nullable property is uninitialized".</span></span> <span data-ttu-id="1ca05-159">Jest to wystarczająco jasne: obie `string` właściwości mają `null` wartość domyślną, gdy `NewsStoryViewModel` jest konstruowany.</span><span class="sxs-lookup"><span data-stu-id="1ca05-159">That's clear enough: both `string` properties have the default value of `null` when a `NewsStoryViewModel` is constructed.</span></span> <span data-ttu-id="1ca05-160">Ważne do odnalezienia to sposób `NewsStoryViewModel` konstruowania obiektów.</span><span class="sxs-lookup"><span data-stu-id="1ca05-160">What's important to discover is how `NewsStoryViewModel` objects are constructed.</span></span> <span data-ttu-id="1ca05-161">Na tej klasie nie można stwierdzić, czy `null` wartość jest częścią projektu lub czy te obiekty są ustawione na wartości inne niż null, gdy zostanie utworzony jeden.</span><span class="sxs-lookup"><span data-stu-id="1ca05-161">Looking at this class, you can't tell if the `null` value is part of the design, or if these objects are set to non-null values whenever one is created.</span></span> <span data-ttu-id="1ca05-162">Historie wiadomości są tworzone w `GetNews` metodzie `NewsService` klasy:</span><span class="sxs-lookup"><span data-stu-id="1ca05-162">The news stories are created in the `GetNews` method of the `NewsService` class:</span></span>

[!code-csharp[StarterCreateNewsItem](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#CreateNewsItem)]

<span data-ttu-id="1ca05-163">W poprzednim bloku kodu jest już w toku.</span><span class="sxs-lookup"><span data-stu-id="1ca05-163">There's quite a bit going on in the preceding block of code.</span></span> <span data-ttu-id="1ca05-164">Ta aplikacja używa pakietu [](https://automapper.org/) NuGet automapowania do konstruowania elementu wiadomości z `ISyndicationItem`.</span><span class="sxs-lookup"><span data-stu-id="1ca05-164">This application uses the [AutoMapper](https://automapper.org/) NuGet package to construct a news item from an `ISyndicationItem`.</span></span> <span data-ttu-id="1ca05-165">Wykryto, że są konstruowane elementy historii wiadomości i właściwości są ustawiane w jednej instrukcji.</span><span class="sxs-lookup"><span data-stu-id="1ca05-165">You've discovered that the news story items are constructed and the properties are set in that one statement.</span></span> <span data-ttu-id="1ca05-166">Oznacza to, że projekt `NewsStoryViewModel` wskazuje, że te właściwości nigdy nie powinny `null` mieć wartości.</span><span class="sxs-lookup"><span data-stu-id="1ca05-166">That means the design for the `NewsStoryViewModel` indicates that these properties should never have the `null` value.</span></span> <span data-ttu-id="1ca05-167">Te właściwości powinny mieć **niezerowe typy odwołań**.</span><span class="sxs-lookup"><span data-stu-id="1ca05-167">These properties should be **nonnullable reference types**.</span></span> <span data-ttu-id="1ca05-168">To najlepiej reprezentuje pierwotny cel projektowania.</span><span class="sxs-lookup"><span data-stu-id="1ca05-168">That best expresses the original design intent.</span></span> <span data-ttu-id="1ca05-169">W rzeczywistości wszystkie `NewsStoryViewModel` wystąpienia *są* poprawnie tworzone przy użyciu wartości innych niż null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-169">In fact, any `NewsStoryViewModel` *is* correctly instantiated with non-null values.</span></span> <span data-ttu-id="1ca05-170">Powoduje to, że następujący kod inicjujący ma prawidłową poprawkę:</span><span class="sxs-lookup"><span data-stu-id="1ca05-170">That makes the following initialization code a valid fix:</span></span>

```csharp
public class NewsStoryViewModel
{
    public DateTimeOffset Published { get; set; }
    public string Title { get; set; } = default!;
    public string Uri { get; set; } = default!;
}
```

<span data-ttu-id="1ca05-171">Przypisanie `Title` i `Uri` do`default`danegotypunie zmienia zachowania programu w czasie wykonywania. `string` `null`</span><span class="sxs-lookup"><span data-stu-id="1ca05-171">The assignment of `Title` and `Uri` to `default` which is `null` for the `string` type doesn't change the runtime behavior of the program.</span></span> <span data-ttu-id="1ca05-172">`NewsStoryViewModel` Jest nadal zbudowany z wartościami null, ale teraz kompilator nie zgłasza ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="1ca05-172">The `NewsStoryViewModel` is still constructed with null values, but now the compiler reports no warnings.</span></span> <span data-ttu-id="1ca05-173">**Operator łagodniejszej null**, `!` znak następujący po `default` wyrażeniu informuje kompilator, że poprzednie wyrażenie nie ma wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-173">The **null-forgiving operator**, the `!` character following the `default` expression tells the compiler that the preceding expression is not null.</span></span> <span data-ttu-id="1ca05-174">Ta technika może być celowa, gdy inne zmiany wymuszają znacznie większe zmiany w bazie kodu, ale w tej aplikacji istnieje stosunkowo szybkie i lepsze rozwiązanie: Utwórz niemodyfikowalny typ, `NewsStoryViewModel` w którym wszystkie właściwości są ustawione w konstruktorze.</span><span class="sxs-lookup"><span data-stu-id="1ca05-174">This technique may be expedient when other changes force much larger changes to a code base, but in this application there is a relatively quick and better solution: Make the `NewsStoryViewModel` an immutable type where all the properties are set in the constructor.</span></span> <span data-ttu-id="1ca05-175">Wprowadź następujące zmiany `NewsStoryViewModel`w:</span><span class="sxs-lookup"><span data-stu-id="1ca05-175">Make the following changes to the `NewsStoryViewModel`:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/ViewModels/NewsStoryViewModel.cs#FinishedViewModel)]

<span data-ttu-id="1ca05-176">Po wykonaniu tej czynności należy zaktualizować kod, który konfiguruje automapowanie, tak aby używał konstruktora zamiast ustawiania właściwości.</span><span class="sxs-lookup"><span data-stu-id="1ca05-176">Once that's done, you need to update the code that configures the AutoMapper so that it uses the constructor rather than setting properties.</span></span> <span data-ttu-id="1ca05-177">Otwórz `NewsService.cs` i Wyszukaj następujący kod w dolnej części pliku:</span><span class="sxs-lookup"><span data-stu-id="1ca05-177">Open `NewsService.cs` and look for the following code at the bottom of the file:</span></span>

[!code-csharp[StarterAutoMapper](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="1ca05-178">Ten kod mapuje właściwości `ISyndicationItem` obiektu `NewsStoryViewModel` na właściwości.</span><span class="sxs-lookup"><span data-stu-id="1ca05-178">That code maps properties of the `ISyndicationItem` object to the `NewsStoryViewModel` properties.</span></span> <span data-ttu-id="1ca05-179">Chcesz, aby automapowanie zapewniało mapowanie przy użyciu konstruktora.</span><span class="sxs-lookup"><span data-stu-id="1ca05-179">You want the AutoMapper to provide the mapping using a constructor instead.</span></span> <span data-ttu-id="1ca05-180">Zastąp powyższy kod następującym konfiguracją automapowania:</span><span class="sxs-lookup"><span data-stu-id="1ca05-180">Replace the above code with the following automapper configuration:</span></span>

[!code-csharp[FinishedViewModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ConfigureAutoMapper)]

<span data-ttu-id="1ca05-181">Zwróć uwagę, że ponieważ ta klasa jest mała i uważnie sprawdzona, należy włączyć `#nullable enable` dyrektywę powyżej tej deklaracji klasy.</span><span class="sxs-lookup"><span data-stu-id="1ca05-181">Notice that because this class is small, and you've examined carefully, you should turn on the `#nullable enable` directive above this class declaration.</span></span> <span data-ttu-id="1ca05-182">Zmiana w konstruktorze mogła spowodować uszkodzenie elementu, więc jest wartościowa do uruchamiania wszystkich testów i testowania aplikacji przed przechodzeniem.</span><span class="sxs-lookup"><span data-stu-id="1ca05-182">The change to the constructor could have broken something, so it's worthwhile to run all the tests and test the application before moving on.</span></span>

<span data-ttu-id="1ca05-183">Pierwszy zestaw zmian przedstawia sposób odnajdowania, gdy oryginalny projekt wskazał, że zmienne nie powinny być ustawiane na `null`.</span><span class="sxs-lookup"><span data-stu-id="1ca05-183">The first set of changes showed you how to discover when the original design indicated that variables shouldn't be set to `null`.</span></span> <span data-ttu-id="1ca05-184">Technika jest określana jako poprawna **przez konstrukcję**.</span><span class="sxs-lookup"><span data-stu-id="1ca05-184">The technique is referred to as **correct by construction**.</span></span> <span data-ttu-id="1ca05-185">Deklaruje, że obiekt i jego właściwości nie mogą `null` być, gdy jest konstruowany.</span><span class="sxs-lookup"><span data-stu-id="1ca05-185">You declare that an object and its properties cannot be `null` when it's constructed.</span></span> <span data-ttu-id="1ca05-186">Analiza przepływu kompilatora zapewnia gwarancję, że te właściwości nie są ustawione `null` na wartość po konstrukcji.</span><span class="sxs-lookup"><span data-stu-id="1ca05-186">The compiler's flow analysis provides assurance that those properties aren't set to `null` after construction.</span></span> <span data-ttu-id="1ca05-187">Należy zauważyć, że ten konstruktor jest wywoływany przez kod zewnętrzny, a ten kod **dopuszcza wartość null Oblivious**.</span><span class="sxs-lookup"><span data-stu-id="1ca05-187">Note that this constructor is called by external code, and that code is **nullable oblivious**.</span></span> <span data-ttu-id="1ca05-188">Nowa składnia nie zapewnia sprawdzania środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="1ca05-188">The new syntax doesn't provide runtime checking.</span></span> <span data-ttu-id="1ca05-189">Kod zewnętrzny może obejść analizę przepływu kompilatora.</span><span class="sxs-lookup"><span data-stu-id="1ca05-189">External code might circumvent the compiler's flow analysis.</span></span> 

<span data-ttu-id="1ca05-190">W innych przypadkach struktura klasy zawiera różne wskazówki dotyczące zamiaru.</span><span class="sxs-lookup"><span data-stu-id="1ca05-190">Other times, the structure of a class provides different clues to the intent.</span></span> <span data-ttu-id="1ca05-191">Otwórz plik *Error.cshtml.cs* w folderze *Pages* .</span><span class="sxs-lookup"><span data-stu-id="1ca05-191">Open the *Error.cshtml.cs* file in the *Pages* folder.</span></span> <span data-ttu-id="1ca05-192">`ErrorViewModel` Zawiera następujący kod:</span><span class="sxs-lookup"><span data-stu-id="1ca05-192">The `ErrorViewModel` contains the following code:</span></span>

[!code-csharp[StarterErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Error.cshtml.cs#StartErrorModel)]

<span data-ttu-id="1ca05-193">Dodaj dyrektywę przed deklaracją klasy `#nullable restore` i po niej. `#nullable enable`</span><span class="sxs-lookup"><span data-stu-id="1ca05-193">Add the `#nullable enable` directive before the class declaration, and a `#nullable restore` directive after it.</span></span> <span data-ttu-id="1ca05-194">Otrzymasz jedno ostrzeżenie, które `RequestId` nie zostało zainicjowane.</span><span class="sxs-lookup"><span data-stu-id="1ca05-194">You'll get one warning that `RequestId` is not initialized.</span></span> <span data-ttu-id="1ca05-195">Przeglądając klasę, należy zdecydować, że `RequestId` w niektórych przypadkach właściwość powinna mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-195">By looking at the class, you should decide that the `RequestId` property should be null in some cases.</span></span> <span data-ttu-id="1ca05-196">Istnienie `ShowRequestId` właściwości wskazuje, że brakujące wartości są możliwe.</span><span class="sxs-lookup"><span data-stu-id="1ca05-196">The existence of the `ShowRequestId` property indicates that missing values are possible.</span></span> <span data-ttu-id="1ca05-197">Ponieważ `null` jest prawidłowy, `?` Dodaj `string` do typu, aby wskazać, że `RequestId` właściwość jest *typem referencyjnym dopuszczającym wartość null*.</span><span class="sxs-lookup"><span data-stu-id="1ca05-197">Because `null` is valid, add the `?` on the `string` type to indicate the `RequestId` property is a *nullable reference type*.</span></span> <span data-ttu-id="1ca05-198">Ostatnia Klasa wygląda podobnie do poniższego przykładu:</span><span class="sxs-lookup"><span data-stu-id="1ca05-198">The final class looks like the following example:</span></span>

[!code-csharp[FinishedErrorModel](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Error.cshtml.cs#ErrorModel)]

<span data-ttu-id="1ca05-199">Sprawdź, czy są używane właściwości i czy na skojarzonej stronie właściwość jest sprawdzana pod kątem wartości null przed renderowaniem w znaczniku.</span><span class="sxs-lookup"><span data-stu-id="1ca05-199">Check for the uses of the property, and you see that in the associated page, the property is checked for null before rendering it in markup.</span></span> <span data-ttu-id="1ca05-200">Jest to bezpieczne użycie typu referencyjnego dopuszczającego wartość null, więc należy wykonać tę klasę.</span><span class="sxs-lookup"><span data-stu-id="1ca05-200">That's a safe use of a nullable reference type, so you're done with this class.</span></span>

## <a name="fixing-nulls-causes-change"></a><span data-ttu-id="1ca05-201">Naprawianie wartości null powoduje zmianę</span><span class="sxs-lookup"><span data-stu-id="1ca05-201">Fixing nulls causes change</span></span>

<span data-ttu-id="1ca05-202">Często poprawka jednego zestawu ostrzeżeń tworzy nowe ostrzeżenia w powiązanym kodzie.</span><span class="sxs-lookup"><span data-stu-id="1ca05-202">Frequently, the fix for one set of warnings creates new warnings in related code.</span></span> <span data-ttu-id="1ca05-203">Zobaczmy ostrzeżenia w akcji, rozwiązując `index.cshtml.cs` klasę.</span><span class="sxs-lookup"><span data-stu-id="1ca05-203">Let's see the warnings in action by fixing the `index.cshtml.cs` class.</span></span> <span data-ttu-id="1ca05-204">`index.cshtml.cs` Otwórz plik i zapoznaj się z kodem.</span><span class="sxs-lookup"><span data-stu-id="1ca05-204">Open the `index.cshtml.cs` file and examine the code.</span></span> <span data-ttu-id="1ca05-205">Ten plik zawiera kod związany ze stroną indeksu:</span><span class="sxs-lookup"><span data-stu-id="1ca05-205">This file contains the code behind for the index page:</span></span>

[!code-csharp[StarterIndexModel](~/samples/csharp/tutorials/nullable-reference-migration/start/SimpleFeedReader/Pages/Index.cshtml.cs#IndexModelStart)]

<span data-ttu-id="1ca05-206">`#nullable enable` Dodaj dyrektywę i zobaczysz dwa ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="1ca05-206">Add the `#nullable enable` directive and you'll see two warnings.</span></span> <span data-ttu-id="1ca05-207">Nie została zainicjowana `NewsItems` ani Właściwość,aniwłaściwość.`ErrorText`</span><span class="sxs-lookup"><span data-stu-id="1ca05-207">Neither the `ErrorText` property nor the `NewsItems` property is initialized.</span></span> <span data-ttu-id="1ca05-208">Badanie tej klasy doprowadziłoby do tego, że obie właściwości powinny mieć typ referencyjny dopuszczający wartości null: Oba mają prywatne metody ustawiające.</span><span class="sxs-lookup"><span data-stu-id="1ca05-208">An examination of this class would lead you to believe that both properties should be nullable reference types: Both have private setters.</span></span> <span data-ttu-id="1ca05-209">W `OnGet` metodzie jest przypisywany dokładnie jeden.</span><span class="sxs-lookup"><span data-stu-id="1ca05-209">Exactly one is assigned in the `OnGet` method.</span></span> <span data-ttu-id="1ca05-210">Przed wprowadzeniem zmian należy zapoznać się z użytkownikami obu właściwości.</span><span class="sxs-lookup"><span data-stu-id="1ca05-210">Before making changes, look at the consumers of both properties.</span></span> <span data-ttu-id="1ca05-211">Na samej `ErrorText` stronie jest sprawdzana pod kątem wartości null przed wygenerowaniem znaczników dla błędów.</span><span class="sxs-lookup"><span data-stu-id="1ca05-211">In the page itself, the `ErrorText` is checked against null before generating markup for any errors.</span></span> <span data-ttu-id="1ca05-212">Kolekcja jest sprawdzana pod `null`kątem i sprawdza, czy kolekcja zawiera elementy. `NewsItems`</span><span class="sxs-lookup"><span data-stu-id="1ca05-212">The `NewsItems` collection is checked against `null`, and checked to ensure the collection has items.</span></span> <span data-ttu-id="1ca05-213">Szybką poprawką byłoby najęcie obu właściwości typów referencyjnych dopuszczających wartość null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-213">A quick fix would be to make both properties nullable reference types.</span></span> <span data-ttu-id="1ca05-214">Lepszym rozwiązaniem jest udostępnienie kolekcji jako typu referencyjnego, który nie ma wartości null, i dodanie elementów do istniejącej kolekcji przy pobieraniu wiadomości.</span><span class="sxs-lookup"><span data-stu-id="1ca05-214">A better fix would be to make the collection a nonnullable reference type, and add items to the existing collection when retrieving news.</span></span> <span data-ttu-id="1ca05-215">Pierwsza poprawka to dodanie `?` `string` do typu dla `ErrorText`:</span><span class="sxs-lookup"><span data-stu-id="1ca05-215">The first fix is to add the `?` to the `string` type for the `ErrorText`:</span></span>

[!code-csharp[UpdateErrorText](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#UpdateErrorText)]

<span data-ttu-id="1ca05-216">Ta zmiana nie będzie miała wpływu na inny kod, ponieważ każdy dostęp `ErrorText` do właściwości został już chroniony przez kontrole o wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-216">That change won't ripple through other code, because any access to the `ErrorText` property was already guarded by null checks.</span></span> <span data-ttu-id="1ca05-217">Następnie zainicjuj `NewsItems` listę i Usuń metodę ustawiającą właściwość, ustawiając ją jako właściwość tylko do odczytu:</span><span class="sxs-lookup"><span data-stu-id="1ca05-217">Next, initialize the `NewsItems` list and remove the property setter, making it a readonly property:</span></span>

[!code-csharp[InitializeNewsItems](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#InitializeNewsItems)]

<span data-ttu-id="1ca05-218">Naprawiono ostrzeżenie, ale wprowadzono błąd.</span><span class="sxs-lookup"><span data-stu-id="1ca05-218">That fixed the warning but introduced an error.</span></span> <span data-ttu-id="1ca05-219">Lista jest teraz poprawna **przez konstrukcję**, ale kod, który ustawia listę w `OnGet` , musi zmienić się, aby pasował do nowego interfejsu API. `NewsItems`</span><span class="sxs-lookup"><span data-stu-id="1ca05-219">The `NewsItems` list is now **correct by construction**, but the code that sets the list in `OnGet` must change to match the new API.</span></span> <span data-ttu-id="1ca05-220">Zamiast przypisania, należy wywołać `AddRange` , aby dodać elementy wiadomości do istniejącej listy:</span><span class="sxs-lookup"><span data-stu-id="1ca05-220">Instead of an assignment, call `AddRange` to add the news items to the existing list:</span></span>

[!code-csharp[AddRange](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Pages/Index.cshtml.cs#AddRange)]

<span data-ttu-id="1ca05-221">Użycie `AddRange` zamiast przypisania oznacza `GetNews` , że metoda może `List`zwracać `IEnumerable` zamiast.</span><span class="sxs-lookup"><span data-stu-id="1ca05-221">Using `AddRange` instead of an assignment means that the `GetNews` method can return an `IEnumerable` instead of a `List`.</span></span> <span data-ttu-id="1ca05-222">Powoduje to zapisanie jednej alokacji.</span><span class="sxs-lookup"><span data-stu-id="1ca05-222">That saves one allocation.</span></span> <span data-ttu-id="1ca05-223">Zmień podpis metody i Usuń `ToList` wywołanie, jak pokazano w następującym przykładzie kodu:</span><span class="sxs-lookup"><span data-stu-id="1ca05-223">Change the signature of the method, and remove the `ToList` call, as shown in the following code sample:</span></span>

[!code-csharp[GetNews](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#GetNewsFinished)]

<span data-ttu-id="1ca05-224">Zmiana podpisu spowoduje również przerwanie jednego z testów.</span><span class="sxs-lookup"><span data-stu-id="1ca05-224">Changing the signature breaks one of tests as well.</span></span> <span data-ttu-id="1ca05-225">`NewsServiceTests.cs` Otwórz plik`Services` w folderze`SimpleFeedReader.Tests` projektu.</span><span class="sxs-lookup"><span data-stu-id="1ca05-225">Open the `NewsServiceTests.cs` file in the `Services` folder of the `SimpleFeedReader.Tests` project.</span></span> <span data-ttu-id="1ca05-226">Przejdź do `Returns_News_Stories_Given_Valid_Uri` testu i Zmień typ `result` zmiennej na `IEnumerable<NewsItem>`.</span><span class="sxs-lookup"><span data-stu-id="1ca05-226">Navigate to the `Returns_News_Stories_Given_Valid_Uri` test and change the type of the `result` variable to `IEnumerable<NewsItem>`.</span></span> <span data-ttu-id="1ca05-227">Zmiana typu oznacza, że `Count` właściwość nie jest już dostępna, więc `Count` Zastąp właściwość w `Assert` wywołaniu `Any()`:</span><span class="sxs-lookup"><span data-stu-id="1ca05-227">Changing the type means the `Count` property is no longer available, so replace the `Count` property in the `Assert` with a call to `Any()`:</span></span>

[!code-csharp[FixTests](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader.Tests/Services/NewsServiceTests.cs#FixTestSignature)]

<span data-ttu-id="1ca05-228">Należy również dodać `using System.Linq` instrukcję do początku pliku.</span><span class="sxs-lookup"><span data-stu-id="1ca05-228">You'll need to add a `using System.Linq` statement to the beginning of the file as well.</span></span>

<span data-ttu-id="1ca05-229">Ten zestaw zmian wyróżnia szczególną uwagę podczas aktualizowania kodu, który zawiera ogólne wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="1ca05-229">This set of changes highlights special consideration when updating code that includes generic instantiations.</span></span> <span data-ttu-id="1ca05-230">Zarówno lista, jak i elementy na liście typów niedopuszczających wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-230">Both the list and the elements in the list of non-nullable types.</span></span> <span data-ttu-id="1ca05-231">Oba typy mogą być dopuszczane do wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-231">Either or both could be nullable types.</span></span> <span data-ttu-id="1ca05-232">Dozwolone są wszystkie następujące deklaracje:</span><span class="sxs-lookup"><span data-stu-id="1ca05-232">All the following declarations are allowed:</span></span>

- <span data-ttu-id="1ca05-233">`List<NewsStoryViewModel>`: Lista niemająca wartości null dla modeli widoku nonullabled.</span><span class="sxs-lookup"><span data-stu-id="1ca05-233">`List<NewsStoryViewModel>`: nonnullable list of nonullable view models.</span></span>
- <span data-ttu-id="1ca05-234">`List<NewsStoryViewModel?>`: niemożliwa do null lista niedopuszczających modeli widoku.</span><span class="sxs-lookup"><span data-stu-id="1ca05-234">`List<NewsStoryViewModel?>`: nonnullable list of nullable view models.</span></span>
- <span data-ttu-id="1ca05-235">`List<NewsStoryViewModel>?`: Lista dopuszcza wartość null dla niezerowych modeli widoku.</span><span class="sxs-lookup"><span data-stu-id="1ca05-235">`List<NewsStoryViewModel>?`: nullable list of nonnullable view models.</span></span>
- <span data-ttu-id="1ca05-236">`List<NewsStoryViewModel?>?`: dopuszczająca wartość null dla modeli widoku dopuszczającego wartość null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-236">`List<NewsStoryViewModel?>?`: nullable list of nullable view models.</span></span>

## <a name="interfaces-with-external-code"></a><span data-ttu-id="1ca05-237">Interfejsy z kodem zewnętrznym</span><span class="sxs-lookup"><span data-stu-id="1ca05-237">Interfaces with external code</span></span>

<span data-ttu-id="1ca05-238">Wprowadzono zmiany w `NewsService` klasie, dlatego należy włączyć `#nullable enable` adnotację dla tej klasy.</span><span class="sxs-lookup"><span data-stu-id="1ca05-238">You've made changes to the `NewsService` class, so turn on the `#nullable enable` annotation for that class.</span></span> <span data-ttu-id="1ca05-239">Nie spowoduje to wygenerowania żadnych nowych ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="1ca05-239">This won't generate any new warnings.</span></span> <span data-ttu-id="1ca05-240">Jednak dokładne badanie klasy ułatwia zilustrowanie niektórych ograniczeń analizy przepływu kompilatora.</span><span class="sxs-lookup"><span data-stu-id="1ca05-240">However, careful examination of the class helps to illustrate some of the limitations of the compiler's flow analysis.</span></span> <span data-ttu-id="1ca05-241">Badanie konstruktora:</span><span class="sxs-lookup"><span data-stu-id="1ca05-241">Examine the constructor:</span></span>

[!code-csharp[ServiceConstructor](~/samples/csharp/tutorials/nullable-reference-migration/finished/SimpleFeedReader/Services/NewsService.cs#ServiceConstructor)]

<span data-ttu-id="1ca05-242">`IMapper` Parametr jest typu jako odwołanie, które nie ma wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-242">The `IMapper` parameter is typed as a nonnullable reference.</span></span> <span data-ttu-id="1ca05-243">Jest on wywoływany przez ASP.NET Core kod infrastruktury, więc kompilator nie wie, że `IMapper` nigdy nie będzie mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-243">It's called by ASP.NET Core infrastructure code, so the compiler doesn't really know that the `IMapper` will never be null.</span></span> <span data-ttu-id="1ca05-244">ASP.NET Core domyślny kontener iniekcji zależności (DI) zgłasza wyjątek, jeśli nie może rozpoznać wymaganej usługi, więc kod jest poprawny.</span><span class="sxs-lookup"><span data-stu-id="1ca05-244">The default ASP.NET Core dependency injection (DI) container throws an exception if it can't resolve a necessary service, so the code is correct.</span></span> <span data-ttu-id="1ca05-245">Kompilator nie może sprawdzić poprawności wszystkich wywołań publicznych interfejsów API, nawet jeśli kod jest kompilowany z włączonym kontekstem adnotacji dopuszczający wartość null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-245">The compiler can't validate all calls to your public APIs, even if your code is compiled with nullable annotation contexts enabled.</span></span> <span data-ttu-id="1ca05-246">Ponadto biblioteki mogą być używane przez projekty, które nie wybrały jeszcze użycia typów referencyjnych dopuszczających wartość null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-246">Furthermore, your libraries may be consumed by projects that have not yet opted into using nullable reference types.</span></span> <span data-ttu-id="1ca05-247">Sprawdź poprawność danych wejściowych do publicznych interfejsów API, mimo że zostały zadeklarowane jako typy niemające wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-247">Validate inputs to public APIs even though you've declared them as nonnullable types.</span></span>

## <a name="get-the-code"></a><span data-ttu-id="1ca05-248">Pobierz kod</span><span class="sxs-lookup"><span data-stu-id="1ca05-248">Get the code</span></span>

<span data-ttu-id="1ca05-249">Zostały naprawione ostrzeżenia, które zostały zidentyfikowane podczas wstępnego kompilowania testów, dlatego teraz można włączyć kontekst adnotacji dopuszczający wartości null dla obu projektów.</span><span class="sxs-lookup"><span data-stu-id="1ca05-249">You've fixed the warnings you identified in the initial test compile, so now you can turn on the nullable annotation context for both projects.</span></span> <span data-ttu-id="1ca05-250">Kompiluj ponownie projekty; Kompilator zgłasza Brak ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="1ca05-250">Rebuild the projects; the compiler reports no warnings.</span></span> <span data-ttu-id="1ca05-251">Możesz uzyskać kod dla gotowego projektu w repozytorium GitHub [/Samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished)</span><span class="sxs-lookup"><span data-stu-id="1ca05-251">You can get the code for the finished project in the [dotnet/samples](https://github.com/dotnet/samples/tree/master/csharp/tutorials/nullable-reference-migration/finished) GitHub repository.</span></span>

<span data-ttu-id="1ca05-252">Nowe funkcje, które obsługują typy odwołań dopuszczające wartość null, ułatwiają znajdowanie i rozwiązywanie potencjalnych `null` błędów w sposobie obsługi wartości w kodzie.</span><span class="sxs-lookup"><span data-stu-id="1ca05-252">The new features that support nullable reference types help you find and fix potential errors in how you handle `null` values in your code.</span></span> <span data-ttu-id="1ca05-253">Włączenie kontekstu adnotacji z dopuszczaniem wartości null pozwala na wyrażenie zamiaru projektu: niektóre zmienne nigdy nie powinny mieć wartości null, inne zmienne mogą zawierać wartości null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-253">Enabling the nullable annotation context allows you to express your design intent: some variables should never be null, other variables may contain null values.</span></span> <span data-ttu-id="1ca05-254">Te funkcje ułatwiają deklarowanie zamiaru projektowania.</span><span class="sxs-lookup"><span data-stu-id="1ca05-254">These features make it easier for you to declare your design intent.</span></span> <span data-ttu-id="1ca05-255">Podobnie, kontekst ostrzegawczy wartości null instruuje kompilator, aby wydawał ostrzeżenia w przypadku naruszenia tego celu.</span><span class="sxs-lookup"><span data-stu-id="1ca05-255">Similarly, the nullable warning context instructs the compiler to issue warnings when you have violated that intent.</span></span> <span data-ttu-id="1ca05-256">Te ostrzeżenia przeprowadzą Cię przez proces aktualizacji, które sprawiają, że kod będzie bardziej odporny `NullReferenceException` na błędy i mniej, co może zgłosić podczas wykonywania.</span><span class="sxs-lookup"><span data-stu-id="1ca05-256">Those warnings guide you to make updates that make your code more resilient and less likely to throw a `NullReferenceException` during execution.</span></span> <span data-ttu-id="1ca05-257">Można kontrolować zakres tych kontekstów, aby można było skupić się na lokalnych obszarach kodu do migracji, gdy pozostała baza kodu jest nienaruszona.</span><span class="sxs-lookup"><span data-stu-id="1ca05-257">You can control the scope of these contexts so that you can focus on local areas of code to migrate while the remaining codebase is untouched.</span></span> <span data-ttu-id="1ca05-258">W tym celu zadanie migracji jest częścią regularnej konserwacji klas.</span><span class="sxs-lookup"><span data-stu-id="1ca05-258">In practice, you can make this migration task a part of regular maintenance to your classes.</span></span> <span data-ttu-id="1ca05-259">W tym samouczku przedstawiono proces migrowania aplikacji w celu używania typów referencyjnych dopuszczających wartość null.</span><span class="sxs-lookup"><span data-stu-id="1ca05-259">This tutorial demonstrated the process to migrate an application to use nullable reference types.</span></span> <span data-ttu-id="1ca05-260">Możesz zapoznać się z większym rzeczywistym przykładem tego procesu, sprawdzając, czy element PR [Jan Skeet](https://github.com/jskeet) miał zostać uwzględniony w [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span><span class="sxs-lookup"><span data-stu-id="1ca05-260">You can explore a larger real-world example of this process by examining the PR [Jon Skeet](https://github.com/jskeet) made to incorporate nullable reference types into [NodaTime](https://github.com/nodatime/nodatime/pull/1240/commits).</span></span>
