---
title: Eksplorowanie zakresów danych przy użyciu indeksów i zakresów
description: Ten zaawansowany samouczek umożliwia Eksplorowanie danych przy użyciu indeksów i zakresów w celu zbadania ciągłego zakresu sekwencyjnego zestawu danych.
ms.date: 09/11/2020
ms.technology: csharp-fundamentals
ms.custom: mvc
ms.openlocfilehash: cf6c83484332ed517b2326b3fd9d7458f191227e
ms.sourcegitcommit: 0802ac583585110022beb6af8ea0b39188b77c43
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "90738869"
---
# <a name="indices-and-ranges"></a><span data-ttu-id="2e828-103">Indeksy i zakresy</span><span class="sxs-lookup"><span data-stu-id="2e828-103">Indices and ranges</span></span>

<span data-ttu-id="2e828-104">Zakresy i indeksy zapewniają zwięzłą składnię do uzyskiwania dostępu do pojedynczych elementów lub zakresów w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-104">Ranges and indices provide a succinct syntax for accessing single elements or ranges in a sequence.</span></span>

<span data-ttu-id="2e828-105">Z tego samouczka dowiesz się, jak wykonywać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="2e828-105">In this tutorial, you'll learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="2e828-106">Użyj składni dla zakresów w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-106">Use the syntax for ranges in a sequence.</span></span>
> - <span data-ttu-id="2e828-107">Poznaj decyzje projektowe dotyczące początku i końca każdej sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-107">Understand the design decisions for the start and end of each sequence.</span></span>
> - <span data-ttu-id="2e828-108">Poznaj scenariusze dla <xref:System.Index> typów i <xref:System.Range> .</span><span class="sxs-lookup"><span data-stu-id="2e828-108">Learn scenarios for the <xref:System.Index> and <xref:System.Range> types.</span></span>

## <a name="language-support-for-indices-and-ranges"></a><span data-ttu-id="2e828-109">Obsługa języków w przypadku indeksów i zakresów</span><span class="sxs-lookup"><span data-stu-id="2e828-109">Language support for indices and ranges</span></span>

<span data-ttu-id="2e828-110">Ten język obsługuje dwa nowe typy i dwa nowe operatory:</span><span class="sxs-lookup"><span data-stu-id="2e828-110">This language support relies on two new types and two new operators:</span></span>

- <span data-ttu-id="2e828-111"><xref:System.Index?displayProperty=nameWithType> reprezentuje indeks w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-111"><xref:System.Index?displayProperty=nameWithType> represents an index into a sequence.</span></span>
- <span data-ttu-id="2e828-112">Indeks od operatora końcowego `^` , który określa, że indeks jest względem końca sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-112">The index from end operator `^`, which specifies that an index is relative to the end of a sequence.</span></span>
- <span data-ttu-id="2e828-113"><xref:System.Range?displayProperty=nameWithType> reprezentuje Podzakres sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-113"><xref:System.Range?displayProperty=nameWithType> represents a sub range of a sequence.</span></span>
- <span data-ttu-id="2e828-114">Operator zakresu `..` , który określa początek i koniec zakresu jako jego operandy.</span><span class="sxs-lookup"><span data-stu-id="2e828-114">The range operator `..`, which specifies the start and end of a range as its operands.</span></span>

<span data-ttu-id="2e828-115">Zacznijmy od reguł dotyczących indeksów.</span><span class="sxs-lookup"><span data-stu-id="2e828-115">Let's start with the rules for indices.</span></span> <span data-ttu-id="2e828-116">Weź pod uwagę tablicę `sequence` .</span><span class="sxs-lookup"><span data-stu-id="2e828-116">Consider an array `sequence`.</span></span> <span data-ttu-id="2e828-117">`0`Indeks jest taki sam jak `sequence[0]` .</span><span class="sxs-lookup"><span data-stu-id="2e828-117">The `0` index is the same as `sequence[0]`.</span></span> <span data-ttu-id="2e828-118">`^0`Indeks jest taki sam jak `sequence[sequence.Length]` .</span><span class="sxs-lookup"><span data-stu-id="2e828-118">The `^0` index is the same as `sequence[sequence.Length]`.</span></span> <span data-ttu-id="2e828-119">Wyrażenie `sequence[^0]` generuje wyjątek, podobnie jak `sequence[sequence.Length]` .</span><span class="sxs-lookup"><span data-stu-id="2e828-119">The expression `sequence[^0]` does throw an exception, just as `sequence[sequence.Length]` does.</span></span> <span data-ttu-id="2e828-120">Dla dowolnej liczby `n` indeks jest taki `^n` sam jak `sequence[sequence.Length - n]` .</span><span class="sxs-lookup"><span data-stu-id="2e828-120">For any number `n`, the index `^n` is the same as `sequence[sequence.Length - n]`.</span></span>

```csharp
string[] words = new string[]
{
                // index from start    index from end
    "The",      // 0                   ^9
    "quick",    // 1                   ^8
    "brown",    // 2                   ^7
    "fox",      // 3                   ^6
    "jumped",   // 4                   ^5
    "over",     // 5                   ^4
    "the",      // 6                   ^3
    "lazy",     // 7                   ^2
    "dog"       // 8                   ^1
};              // 9 (or words.Length) ^0
```

<span data-ttu-id="2e828-121">Można pobrać ostatni wyraz z `^1` indeksem.</span><span class="sxs-lookup"><span data-stu-id="2e828-121">You can retrieve the last word with the `^1` index.</span></span> <span data-ttu-id="2e828-122">Dodaj następujący kod poniżej inicjalizacji:</span><span class="sxs-lookup"><span data-stu-id="2e828-122">Add the following code below the initialization:</span></span>

[!code-csharp[LastIndex](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_LastIndex)]

<span data-ttu-id="2e828-123">Zakres określa *początek* i *koniec* zakresu.</span><span class="sxs-lookup"><span data-stu-id="2e828-123">A range specifies the *start* and *end* of a range.</span></span> <span data-ttu-id="2e828-124">Zakresy są na wyłączność, co oznacza, że *koniec* nie znajduje się w zakresie.</span><span class="sxs-lookup"><span data-stu-id="2e828-124">Ranges are exclusive, meaning the *end* isn't included in the range.</span></span> <span data-ttu-id="2e828-125">Zakres `[0..^0]` reprezentuje cały zakres, tak jak `[0..sequence.Length]` reprezentuje cały zakres.</span><span class="sxs-lookup"><span data-stu-id="2e828-125">The range `[0..^0]` represents the entire range, just as `[0..sequence.Length]` represents the entire range.</span></span>

<span data-ttu-id="2e828-126">Poniższy kod tworzy Podzakres słowami "Quick", "brązowy" i "Fox".</span><span class="sxs-lookup"><span data-stu-id="2e828-126">The following code creates a subrange with the words "quick", "brown", and "fox".</span></span> <span data-ttu-id="2e828-127">Zawiera `words[1]` `words[3]` .</span><span class="sxs-lookup"><span data-stu-id="2e828-127">It includes `words[1]` through `words[3]`.</span></span> <span data-ttu-id="2e828-128">Element `words[4]` nie należy do zakresu.</span><span class="sxs-lookup"><span data-stu-id="2e828-128">The element `words[4]` isn't in the range.</span></span> <span data-ttu-id="2e828-129">Dodaj następujący kod do tej samej metody.</span><span class="sxs-lookup"><span data-stu-id="2e828-129">Add the following code to the same method.</span></span> <span data-ttu-id="2e828-130">Skopiuj i wklej go u dołu okna interaktywnego.</span><span class="sxs-lookup"><span data-stu-id="2e828-130">Copy and paste it at the bottom of the interactive window.</span></span>

[!code-csharp[Range](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_Range)]

<span data-ttu-id="2e828-131">Poniższy kod zwraca zakres z "z opóźnieniem" i "Dog".</span><span class="sxs-lookup"><span data-stu-id="2e828-131">The following code returns the range with "lazy" and "dog".</span></span> <span data-ttu-id="2e828-132">Obejmuje `words[^2]` i `words[^1]` .</span><span class="sxs-lookup"><span data-stu-id="2e828-132">It includes `words[^2]` and `words[^1]`.</span></span> <span data-ttu-id="2e828-133">Indeks końcowy `words[^0]` nie jest uwzględniony.</span><span class="sxs-lookup"><span data-stu-id="2e828-133">The end index `words[^0]` isn't included.</span></span> <span data-ttu-id="2e828-134">Dodaj również następujący kod:</span><span class="sxs-lookup"><span data-stu-id="2e828-134">Add the following code as well:</span></span>

[!code-csharp[LastRange](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_LastRange)]

<span data-ttu-id="2e828-135">W poniższych przykładach zostały utworzone zakresy, które są otwarte dla początku, końca lub obu:</span><span class="sxs-lookup"><span data-stu-id="2e828-135">The following examples create ranges that are open ended for the start, end, or both:</span></span>

[!code-csharp[PartialRange](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_PartialRanges)]

<span data-ttu-id="2e828-136">Można również zadeklarować zakresy lub indeksy jako zmienne.</span><span class="sxs-lookup"><span data-stu-id="2e828-136">You can also declare ranges or indices as variables.</span></span> <span data-ttu-id="2e828-137">Zmienna może być używana wewnątrz `[` `]` znaków i:</span><span class="sxs-lookup"><span data-stu-id="2e828-137">The variable can then be used inside the `[` and `]` characters:</span></span>

[!code-csharp[IndexRangeTypes](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_RangeIndexTypes)]

<span data-ttu-id="2e828-138">Poniższy przykład pokazuje wiele przyczyn tego wyboru.</span><span class="sxs-lookup"><span data-stu-id="2e828-138">The following sample shows many of the reasons for those choices.</span></span> <span data-ttu-id="2e828-139">Zmodyfikuj `x` , `y` i, `z` Aby wypróbować różne kombinacje.</span><span class="sxs-lookup"><span data-stu-id="2e828-139">Modify `x`, `y`, and `z` to try different combinations.</span></span> <span data-ttu-id="2e828-140">Podczas eksperymentowania Użyj wartości, gdzie `x` jest mniejsza niż `y` i `y` jest mniejsze niż `z` w przypadku prawidłowych kombinacji.</span><span class="sxs-lookup"><span data-stu-id="2e828-140">When you experiment, use values where `x` is less than `y`, and `y` is less than `z` for valid combinations.</span></span> <span data-ttu-id="2e828-141">Dodaj następujący kod w nowej metodzie.</span><span class="sxs-lookup"><span data-stu-id="2e828-141">Add the following code in a new method.</span></span> <span data-ttu-id="2e828-142">Wypróbuj różne kombinacje:</span><span class="sxs-lookup"><span data-stu-id="2e828-142">Try different combinations:</span></span>

[!code-csharp[SemanticsExamples](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_Semantics)]

## <a name="type-support-for-indices-and-ranges"></a><span data-ttu-id="2e828-143">Obsługa typów indeksów i zakresów</span><span class="sxs-lookup"><span data-stu-id="2e828-143">Type support for indices and ranges</span></span>

<span data-ttu-id="2e828-144">Indeksy i zakresy zapewniają jednoznaczne, zwięzłą składnię, aby uzyskać dostęp do pojedynczego elementu lub zakresu elementów w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-144">Indexes and ranges provide clear, concise syntax to access a single element or a range of elements in a sequence.</span></span> <span data-ttu-id="2e828-145">Wyrażenie indeksu zwykle zwraca typ elementów sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-145">An index expression typically returns the type of the elements of a sequence.</span></span> <span data-ttu-id="2e828-146">Wyrażenie zakresu zwykle zwraca ten sam typ sekwencji co sekwencja źródłowa.</span><span class="sxs-lookup"><span data-stu-id="2e828-146">A range expression typically returns the same sequence type as the source sequence.</span></span>

<span data-ttu-id="2e828-147">Każdy typ, który zapewnia [indeksator](../programming-guide/indexers/index.md) z <xref:System.Index> <xref:System.Range> parametrem lub jawnie obsługuje odpowiednio indeksy lub zakresy.</span><span class="sxs-lookup"><span data-stu-id="2e828-147">Any type that provides an [indexer](../programming-guide/indexers/index.md) with an <xref:System.Index> or <xref:System.Range> parameter explicitly supports indices or ranges respectively.</span></span> <span data-ttu-id="2e828-148">Indeksator, który przyjmuje jeden <xref:System.Range> parametr, może zwracać inny typ sekwencji, taki jak <xref:System.Span%601?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="2e828-148">An indexer that takes a single <xref:System.Range> parameter may return a different sequence type, such as <xref:System.Span%601?displayProperty=nameWithType>.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2e828-149">Wydajność kodu przy użyciu operatora Range zależy od typu operandu sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-149">The performance of code using the range operator depends on the type of the sequence operand.</span></span>
>
> <span data-ttu-id="2e828-150">Stopień złożoności operatora zakresu zależy od typu sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-150">The time complexity of the range operator depends on the sequence type.</span></span> <span data-ttu-id="2e828-151">Na przykład, jeśli sekwencja jest `string` lub tablicą, wynikiem jest kopia określonej sekcji danych wejściowych, więc złożoność czasu wynosi *O (n)* (gdzie N jest długością zakresu).</span><span class="sxs-lookup"><span data-stu-id="2e828-151">For example, if the sequence is a `string` or an array, then the result is a copy of the specified section of the input, so the time complexity is *O(N)* (where N is the length of the range).</span></span> <span data-ttu-id="2e828-152">Z drugiej strony, jeśli jest <xref:System.Span%601?displayProperty=nameWithType> lub a <xref:System.Memory%601?displayProperty=nameWithType> , wynik odwołuje się do tego samego magazynu zapasowego, co oznacza, że nie ma kopii, a operacja ma wartość *O (1)*.</span><span class="sxs-lookup"><span data-stu-id="2e828-152">On the other hand, if it's a <xref:System.Span%601?displayProperty=nameWithType> or a <xref:System.Memory%601?displayProperty=nameWithType>, the result references the same backing store, which means there is no copy and the operation is *O(1)*.</span></span>
>
> <span data-ttu-id="2e828-153">W uzupełnieniu do stopnia złożoności powoduje to dodatkowe alokacje i kopie, co wpływa na wydajność.</span><span class="sxs-lookup"><span data-stu-id="2e828-153">In addition to the time complexity, this causes extra allocations and copies, impacting performance.</span></span> <span data-ttu-id="2e828-154">W kodzie wrażliwym na wydajność Rozważ użycie `Span<T>` lub `Memory<T>` jako typ sekwencji, ponieważ operator zakresu nie przydzieli do nich.</span><span class="sxs-lookup"><span data-stu-id="2e828-154">In performance sensitive code, consider using `Span<T>` or `Memory<T>` as the sequence type, since the range operator does not allocate for them.</span></span>

<span data-ttu-id="2e828-155">Typ jest możliwy do **zliczenia** , jeśli ma właściwość o nazwie `Length` lub `Count` z dostępną metodę pobierającą i zwracanym typem `int` .</span><span class="sxs-lookup"><span data-stu-id="2e828-155">A type is **countable** if it has a property named `Length` or `Count` with an accessible getter and a return type of `int`.</span></span> <span data-ttu-id="2e828-156">Typ z liczbą, która nie obsługuje jawnie indeksów lub zakresów może zapewnić niejawną obsługę.</span><span class="sxs-lookup"><span data-stu-id="2e828-156">A countable type that doesn't explicitly support indices or ranges may provide an implicit support for them.</span></span> <span data-ttu-id="2e828-157">Aby uzyskać więcej informacji, zapoznaj się z sekcją obsługa niejawnych [indeksów](~/_csharplang/proposals/csharp-8.0/ranges.md#implicit-index-support) i [Obsługa niejawnego zakresu](~/_csharplang/proposals/csharp-8.0/ranges.md#implicit-range-support) w artykule [propozycja funkcji](~/_csharplang/proposals/csharp-8.0/ranges.md).</span><span class="sxs-lookup"><span data-stu-id="2e828-157">For more information, see the [Implicit Index support](~/_csharplang/proposals/csharp-8.0/ranges.md#implicit-index-support) and [Implicit Range support](~/_csharplang/proposals/csharp-8.0/ranges.md#implicit-range-support) sections of the [feature proposal note](~/_csharplang/proposals/csharp-8.0/ranges.md).</span></span> <span data-ttu-id="2e828-158">Zakresy korzystające z obsługi niejawnego zakresu zwracają ten sam typ sekwencji co sekwencja źródłowa.</span><span class="sxs-lookup"><span data-stu-id="2e828-158">Ranges using implicit range support return the same sequence type as the source sequence.</span></span>

<span data-ttu-id="2e828-159">Na przykład następujące typy .NET obsługują zarówno indeksy, jak i zakresy: <xref:System.String> , <xref:System.Span%601> , i <xref:System.ReadOnlySpan%601> .</span><span class="sxs-lookup"><span data-stu-id="2e828-159">For example, the following .NET types support both indices and ranges: <xref:System.String>, <xref:System.Span%601>, and <xref:System.ReadOnlySpan%601>.</span></span> <span data-ttu-id="2e828-160"><xref:System.Collections.Generic.List%601>Obsługuje indeksy, ale nie obsługuje zakresów.</span><span class="sxs-lookup"><span data-stu-id="2e828-160">The <xref:System.Collections.Generic.List%601> supports indices but doesn't support ranges.</span></span>

<span data-ttu-id="2e828-161"><xref:System.Array> ma więcej zachowań złożonych.</span><span class="sxs-lookup"><span data-stu-id="2e828-161"><xref:System.Array> has more nuanced behavior.</span></span> <span data-ttu-id="2e828-162">Pojedyncze tablice wymiarów obsługują zarówno indeksy, jak i zakresy.</span><span class="sxs-lookup"><span data-stu-id="2e828-162">Single dimension arrays support both indices and ranges.</span></span> <span data-ttu-id="2e828-163">Wielowymiarowe tablice nie są.</span><span class="sxs-lookup"><span data-stu-id="2e828-163">Multi-dimensional arrays don't.</span></span> <span data-ttu-id="2e828-164">Indeksator dla wielowymiarowej tablicy ma wiele parametrów, a nie jeden parametr.</span><span class="sxs-lookup"><span data-stu-id="2e828-164">The indexer for a multi-dimensional array has multiple parameters, not a single parameter.</span></span> <span data-ttu-id="2e828-165">Tablice nieregularne, nazywane również tablicą tablic, obsługują zarówno zakresy, jak i indeksatory.</span><span class="sxs-lookup"><span data-stu-id="2e828-165">Jagged arrays, also referred to as an array of arrays, support both ranges and indexers.</span></span> <span data-ttu-id="2e828-166">Poniższy przykład pokazuje, jak wykonać iterację prostokątnej podsekcji tablicy nieregularnej.</span><span class="sxs-lookup"><span data-stu-id="2e828-166">The following example shows how to iterate a rectangular subsection of a jagged array.</span></span> <span data-ttu-id="2e828-167">Iteruje sekcję w środku, wykluczając pierwsze i ostatnie trzy wiersze, a pierwsze i ostatnie dwie kolumny z każdego zaznaczonego wiersza:</span><span class="sxs-lookup"><span data-stu-id="2e828-167">It iterates the section in the center, excluding the first and last three rows, and the first and last two columns from each selected row:</span></span>

[!code-csharp[JaggedArrays](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_JaggedArrays)]

<span data-ttu-id="2e828-168">We wszystkich przypadkach operator zakresu <xref:System.Array> przydziela tablicę do przechowywania zwracanych elementów.</span><span class="sxs-lookup"><span data-stu-id="2e828-168">In all cases, the range operator for <xref:System.Array> allocates an array to store the elements returned.</span></span>

## <a name="scenarios-for-indices-and-ranges"></a><span data-ttu-id="2e828-169">Scenariusze dotyczące indeksów i zakresów</span><span class="sxs-lookup"><span data-stu-id="2e828-169">Scenarios for indices and ranges</span></span>

<span data-ttu-id="2e828-170">Jeśli chcesz analizować część większej sekwencji, często używasz zakresów i indeksów.</span><span class="sxs-lookup"><span data-stu-id="2e828-170">You'll often use ranges and indices when you want to analyze a portion of a larger sequence.</span></span> <span data-ttu-id="2e828-171">Nowa składnia jest przejrzysta w celu odczytu dokładnej części sekwencji.</span><span class="sxs-lookup"><span data-stu-id="2e828-171">The new syntax is clearer in reading exactly what portion of the sequence is involved.</span></span> <span data-ttu-id="2e828-172">Funkcja lokalna `MovingAverage` przyjmuje <xref:System.Range> jako argument.</span><span class="sxs-lookup"><span data-stu-id="2e828-172">The local function `MovingAverage` takes a <xref:System.Range> as its argument.</span></span> <span data-ttu-id="2e828-173">Następnie Metoda wylicza tylko ten zakres przy obliczaniu wartości minimalnej, maksymalnej i średniej.</span><span class="sxs-lookup"><span data-stu-id="2e828-173">The method then enumerates just that range when calculating the min, max, and average.</span></span> <span data-ttu-id="2e828-174">Wypróbuj następujący kod w projekcie:</span><span class="sxs-lookup"><span data-stu-id="2e828-174">Try the following code in your project:</span></span>

[!code-csharp[MovingAverages](~/samples/snippets/csharp/tutorials/RangesIndexes/IndicesAndRanges.cs#IndicesAndRanges_MovingAverage)]
