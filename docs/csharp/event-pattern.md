---
title: Standardowe wzorce zdarzeń platformy .NET
description: Więcej informacji na temat wzorce zdarzeń platformy .NET oraz jak utworzyć źródła zdarzeń w wersji standard i subskrybowanie i przetworzyć standardowych zdarzeń w kodzie.
ms.date: 06/20/2016
ms.assetid: 8a3133d6-4ef2-46f9-9c8d-a8ea8898e4c9
ms.openlocfilehash: 0b10c440f4d05533032aa94819ec879f6a1ca2a4
ms.sourcegitcommit: fb78d8abbdb87144a3872cf154930157090dd933
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/27/2018
ms.locfileid: "47399953"
---
# <a name="standard-net-event-patterns"></a><span data-ttu-id="d3e36-103">Standardowe wzorce zdarzeń platformy .NET</span><span class="sxs-lookup"><span data-stu-id="d3e36-103">Standard .NET event patterns</span></span>

[<span data-ttu-id="d3e36-104">Poprzednie</span><span class="sxs-lookup"><span data-stu-id="d3e36-104">Previous</span></span>](events-overview.md)

<span data-ttu-id="d3e36-105">Zdarzenia .NET zazwyczaj korzystają z kilku znanych wzorców.</span><span class="sxs-lookup"><span data-stu-id="d3e36-105">.NET events generally follow a few known patterns.</span></span> <span data-ttu-id="d3e36-106">Standaryzacji na tych wzorców oznacza, że deweloperzy mogą korzystać z wiedzy na temat tych standardowe wzorce, które mogą być stosowane do dowolnego programu zdarzenia platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="d3e36-106">Standardizing on these patterns means that developers can leverage knowledge of those standard patterns, which can be applied to any .NET event program.</span></span>

<span data-ttu-id="d3e36-107">Przejdźmy przez te standardowe wzorce, dzięki czemu będziesz mieć wiedzy umożliwiających tworzenie źródła zdarzeń w wersji standard i subskrybowanie i przetwarzanie standardowych zdarzeń w kodzie.</span><span class="sxs-lookup"><span data-stu-id="d3e36-107">Let's go through these standard patterns so you will have all the knowledge you need to create standard event sources, and subscribe and process standard events in your code.</span></span>

## <a name="event-delegate-signatures"></a><span data-ttu-id="d3e36-108">Podpisy delegata zdarzenia</span><span class="sxs-lookup"><span data-stu-id="d3e36-108">Event Delegate Signatures</span></span>

<span data-ttu-id="d3e36-109">Standardowa podpis delegata zdarzenia platformy .NET jest:</span><span class="sxs-lookup"><span data-stu-id="d3e36-109">The standard signature for a .NET event delegate is:</span></span>

```csharp
void OnEventRaised(object sender, EventArgs args);
```

<span data-ttu-id="d3e36-110">Typ zwracany jest typ void.</span><span class="sxs-lookup"><span data-stu-id="d3e36-110">The return type is void.</span></span> <span data-ttu-id="d3e36-111">Zdarzenia są oparte na delegatach i są obiekty delegowane multiemisji.</span><span class="sxs-lookup"><span data-stu-id="d3e36-111">Events are based on delegates and are multicast delegates.</span></span> <span data-ttu-id="d3e36-112">Dla dowolnego źródła zdarzeń, który obsługuje wielu subskrybentów.</span><span class="sxs-lookup"><span data-stu-id="d3e36-112">That supports multiple subscribers for any event source.</span></span> <span data-ttu-id="d3e36-113">Pojedynczą wartość zwracana z metody nie przeprowadzać skalowanie do wielu subskrybentów zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d3e36-113">The single return value from a method doesn't scale to multiple event subscribers.</span></span> <span data-ttu-id="d3e36-114">Które zwracają wartość jest adresem źródła zdarzeń po podnoszenie zdarzenia?</span><span class="sxs-lookup"><span data-stu-id="d3e36-114">Which return value does the event source see after raising an event?</span></span> <span data-ttu-id="d3e36-115">Później w tym artykule pokazano, jak utworzyć protokołów zdarzeń, które obsługują subskrybentów zdarzeń tych informacji raportu, aby źródło zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="d3e36-115">Later in this article you'll see how to create event protocols that support event subscribers that report information to the event source.</span></span>

<span data-ttu-id="d3e36-116">Lista argumentów zawiera dwa argumenty: nadawcy i argumenty zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d3e36-116">The argument list contains two arguments: the sender, and the event arguments.</span></span> <span data-ttu-id="d3e36-117">Typ czasu kompilacji `sender` jest `System.Object`, nawet jeśli wiesz, prawdopodobnie bardziej pochodnego typu, które zawsze są poprawne.</span><span class="sxs-lookup"><span data-stu-id="d3e36-117">The compile time type of `sender` is `System.Object`, even though you likely know a more derived type that would always be correct.</span></span> <span data-ttu-id="d3e36-118">Zgodnie z Konwencją, należy użyć `object`.</span><span class="sxs-lookup"><span data-stu-id="d3e36-118">By convention, use `object`.</span></span>

<span data-ttu-id="d3e36-119">Drugi argument zazwyczaj został typ, który jest tworzony na podstawie `System.EventArgs`.</span><span class="sxs-lookup"><span data-stu-id="d3e36-119">The second argument has typically been a type that is derived from `System.EventArgs`.</span></span> <span data-ttu-id="d3e36-120">(Znajduje się w [następnej sekcji](modern-events.md) , ta Konwencja przestaną być wymuszane.) Jeśli danego typu zdarzenia nie wymaga żadnych dodatkowych argumentów, nadal zapewni obu argumentów.</span><span class="sxs-lookup"><span data-stu-id="d3e36-120">(You'll see in the [next section](modern-events.md) that this convention is no longer enforced.) If your event type does not need any additional arguments, you will still provide both arguments.</span></span>
<span data-ttu-id="d3e36-121">Jest wartością specjalną `EventArgs.Empty` o konieczności użycia, aby wskazać, że zdarzenia nie zawiera żadnych dodatkowych informacji.</span><span class="sxs-lookup"><span data-stu-id="d3e36-121">There is a special value, `EventArgs.Empty` that you should use to denote that your event does not contain any additional information.</span></span>

<span data-ttu-id="d3e36-122">Utwórzmy klasę, która wyświetla listę plików w katalogu lub jego podkatalogach, które wzorca.</span><span class="sxs-lookup"><span data-stu-id="d3e36-122">Let's build a class that lists files in a directory, or any of its subdirectories that follow a pattern.</span></span> <span data-ttu-id="d3e36-123">Ten składnik wywołuje zdarzenie, dla każdego pliku wykrył, że pasuje do wzorca.</span><span class="sxs-lookup"><span data-stu-id="d3e36-123">This component raises an event for each file found that matches the pattern.</span></span>

<span data-ttu-id="d3e36-124">Przy użyciu modelu zdarzeń zapewnia kilka korzyści projektu.</span><span class="sxs-lookup"><span data-stu-id="d3e36-124">Using an event model provides some design advantages.</span></span> <span data-ttu-id="d3e36-125">Możesz utworzyć wiele odbiorników zdarzeń, które wykonują różne akcje, gdy zostanie znaleziony używanych plików.</span><span class="sxs-lookup"><span data-stu-id="d3e36-125">You can create multiple event listeners that perform different actions when a sought file is found.</span></span> <span data-ttu-id="d3e36-126">Łączenie różnych odbiorników można tworzyć bardziej niezawodne algorytmy.</span><span class="sxs-lookup"><span data-stu-id="d3e36-126">Combining the different listeners can create more robust algorithms.</span></span>

<span data-ttu-id="d3e36-127">Poniżej przedstawiono deklaracji argumentów zdarzenie początkowe służące do znajdowania używanych plików:</span><span class="sxs-lookup"><span data-stu-id="d3e36-127">Here is the initial event argument declaration for finding a sought file:</span></span> 

[!code-csharp[EventArgs](../../samples/csharp/events/Program.cs#EventArgsV1 "Define event arguments")]

<span data-ttu-id="d3e36-128">Mimo że ten typ wygląda typu małe, tylko dane, postępuj zgodnie z Konwencją i przywołać (`class`) typu.</span><span class="sxs-lookup"><span data-stu-id="d3e36-128">Even though this type looks like a small, data-only type, you should follow the convention and make it a reference (`class`) type.</span></span> <span data-ttu-id="d3e36-129">Oznacza to obiekt argument zostanie przekazany przez odwołanie, a wszelkie aktualizacje danych ma być wyświetlana przez wszystkich subskrybentów.</span><span class="sxs-lookup"><span data-stu-id="d3e36-129">That means the argument object will be passed by reference, and any updates to the data will be viewed by all subscribers.</span></span> <span data-ttu-id="d3e36-130">Pierwsza wersja jest obiektem niezmienne.</span><span class="sxs-lookup"><span data-stu-id="d3e36-130">The first version is an immutable object.</span></span> <span data-ttu-id="d3e36-131">Wolisz należy wprowadzić właściwości w swojej typ argumentu zdarzenia niezmiennego.</span><span class="sxs-lookup"><span data-stu-id="d3e36-131">You should prefer to make the properties in your event argument type immutable.</span></span> <span data-ttu-id="d3e36-132">W ten sposób jednego abonenta nie można zmienić wartości, zanim zobaczy innego subskrybenta, ich.</span><span class="sxs-lookup"><span data-stu-id="d3e36-132">That way, one subscriber cannot change the values before another subscriber sees them.</span></span> <span data-ttu-id="d3e36-133">(Istnieją wyjątki od tego, jak można zauważyć poniżej.)</span><span class="sxs-lookup"><span data-stu-id="d3e36-133">(There are exceptions to this, as you'll see below.)</span></span>  

<span data-ttu-id="d3e36-134">Następnie należy utworzyć deklaracja zdarzenia w klasie FileSearcher.</span><span class="sxs-lookup"><span data-stu-id="d3e36-134">Next, we need to create the event declaration in the FileSearcher class.</span></span> <span data-ttu-id="d3e36-135">Wykorzystując `EventHandler<T>` typ oznacza, że nie trzeba utworzyć kolejny definicji typu.</span><span class="sxs-lookup"><span data-stu-id="d3e36-135">Leveraging the `EventHandler<T>` type means that you don't need to create yet another type definition.</span></span> <span data-ttu-id="d3e36-136">Po prostu użyć ogólnego specjalizacji.</span><span class="sxs-lookup"><span data-stu-id="d3e36-136">You simply use a generic specialization.</span></span>

<span data-ttu-id="d3e36-137">Spróbujmy Wypełnij klasy FileSearcher do wyszukiwania plików, które pasują do wzorca i zgłoś zdarzenie prawidłowe, gdy dopasowanie jest odnalezione.</span><span class="sxs-lookup"><span data-stu-id="d3e36-137">Let's fill out the FileSearcher class to search for files that match a pattern, and raise the correct event when a match is discovered.</span></span>

[!code-csharp[FileSearxcher](../../samples/csharp/events/Program.cs#FileSearcherV1 "Create the initial file searcher")]

## <a name="defining-and-raising-field-like-events"></a><span data-ttu-id="d3e36-138">Definiowanie i wywoływanie zdarzenia podobne do pól</span><span class="sxs-lookup"><span data-stu-id="d3e36-138">Defining and Raising Field-Like Events</span></span>

<span data-ttu-id="d3e36-139">Najprostszym sposobem, aby dodać wydarzenie do klasy jest można zadeklarować tego zdarzenia jako pole publiczne, jak w poprzednim przykładzie:</span><span class="sxs-lookup"><span data-stu-id="d3e36-139">The simplest way to add an event to your class is to declare that event as a public field, as in the preceding example:</span></span>

[!code-csharp[DeclareEvent](../../samples/csharp/events/Program.cs#DeclareEvent "Declare the file found event")]

<span data-ttu-id="d3e36-140">To wygląda na to jest zadeklarowanie, publiczne pola, które wydają się być złym zwyczajem zorientowane obiektowo.</span><span class="sxs-lookup"><span data-stu-id="d3e36-140">This looks like it's declaring a public field, which would appear to be bad object-oriented practice.</span></span> <span data-ttu-id="d3e36-141">Chcesz chronić dostęp do danych za pomocą właściwości lub metody.</span><span class="sxs-lookup"><span data-stu-id="d3e36-141">You want to protect data access through properties, or methods.</span></span> <span data-ttu-id="d3e36-142">Chociaż to, że wygląd złym zwyczajem kod wygenerowany przez kompilator tworzenie otok, tak aby obiekty zdarzeń może zostać oceniony jedynie w bezpieczny sposób.</span><span class="sxs-lookup"><span data-stu-id="d3e36-142">While this make look like a bad practice, the code generated by the compiler does create wrappers so that the event objects can only be accessed in safe ways.</span></span> <span data-ttu-id="d3e36-143">Tylko operacje dostępne dla zdarzenia podobne do pól są Dodaj program obsługi:</span><span class="sxs-lookup"><span data-stu-id="d3e36-143">The only operations available on a field-like event are add handler:</span></span>

[!code-csharp[DeclareEventHandler](../../samples/csharp/events/Program.cs#DeclareEventHandler "Declare the file found event handler")]

<span data-ttu-id="d3e36-144">i Usuń procedurę obsługi:</span><span class="sxs-lookup"><span data-stu-id="d3e36-144">and remove handler:</span></span>

[!code-csharp[RemoveEventHandler](../../samples/csharp/events/Program.cs#RemoveHandler "Remove the event handler")]

<span data-ttu-id="d3e36-145">Zwróć uwagę, że zmienna lokalna dla programu obsługi.</span><span class="sxs-lookup"><span data-stu-id="d3e36-145">Note that there's a local variable for the handler.</span></span> <span data-ttu-id="d3e36-146">Jeśli używasz treść wyrażenia lambda, Usuń nie będzie działać poprawnie.</span><span class="sxs-lookup"><span data-stu-id="d3e36-146">If you used the body of the lambda, the remove would not work correctly.</span></span> <span data-ttu-id="d3e36-147">Może być inne wystąpienie delegata i dyskretnie nic nie rób.</span><span class="sxs-lookup"><span data-stu-id="d3e36-147">It would be a different instance of the delegate, and silently do nothing.</span></span>

<span data-ttu-id="d3e36-148">Kodu spoza klasy nie mogą wywoływać zdarzenia, nie można wykonać żadnych innych operacji.</span><span class="sxs-lookup"><span data-stu-id="d3e36-148">Code outside the class cannot raise the event, nor can it perform any other operations.</span></span>

## <a name="returning-values-from-event-subscribers"></a><span data-ttu-id="d3e36-149">Zwracanie wartości od subskrybentów zdarzeń</span><span class="sxs-lookup"><span data-stu-id="d3e36-149">Returning Values from Event Subscribers</span></span>

<span data-ttu-id="d3e36-150">Proste wersji działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="d3e36-150">Your simple version is working fine.</span></span> <span data-ttu-id="d3e36-151">Dodajmy kolejną funkcją: anulowania.</span><span class="sxs-lookup"><span data-stu-id="d3e36-151">Let's add another feature: Cancellation.</span></span>

<span data-ttu-id="d3e36-152">Po podniesieniu znalezionych zdarzeń odbiorników powinno być możliwe zatrzymać dalsze przetwarzanie, jeśli ten plik jest, że ostatni poszukiwania.</span><span class="sxs-lookup"><span data-stu-id="d3e36-152">When you raise the found event, listeners should be able to stop further processing, if this file is that last one sought.</span></span>

<span data-ttu-id="d3e36-153">Programy obsługi zdarzeń nie zwracają wartości, więc należy do komunikowania się, że w inny sposób.</span><span class="sxs-lookup"><span data-stu-id="d3e36-153">The event handlers do not return a value, so you need to communicate that in another way.</span></span> <span data-ttu-id="d3e36-154">Wzorzec standardowych zdarzeń używa obiektu EventArgs podczas dołączania pól, które zdarzenie subskrybenci mogą używać do komunikowania się Anuluj.</span><span class="sxs-lookup"><span data-stu-id="d3e36-154">The standard event pattern uses the EventArgs object to include fields that event subscribers can use to communicate cancel.</span></span>

<span data-ttu-id="d3e36-155">Istnieją dwa różne wzorce, które mogłyby zostać użyte, oparte na semantyce zamówienia, Anuluj.</span><span class="sxs-lookup"><span data-stu-id="d3e36-155">There are two different patterns that could be used, based on the semantics of the Cancel contract.</span></span> <span data-ttu-id="d3e36-156">W obu przypadkach dodasz pola logicznych do EventArguments wydarzeniu znaleziony plik.</span><span class="sxs-lookup"><span data-stu-id="d3e36-156">In both cases, you'll add a boolean field to the EventArguments for the found file event.</span></span> 

<span data-ttu-id="d3e36-157">Jednym ze wzorców pozwoliłoby każdy jeden subskrybent anulować operację.</span><span class="sxs-lookup"><span data-stu-id="d3e36-157">One pattern would allow any one subscriber to cancel the operation.</span></span>
<span data-ttu-id="d3e36-158">Dla tego wzoru nowego pola jest ustawiana na `false`.</span><span class="sxs-lookup"><span data-stu-id="d3e36-158">For this pattern, the new field is initialized to `false`.</span></span> <span data-ttu-id="d3e36-159">Każdy subskrybent będzie można go zmienić `true`.</span><span class="sxs-lookup"><span data-stu-id="d3e36-159">Any subscriber can change it to `true`.</span></span> <span data-ttu-id="d3e36-160">Po wszystkim subskrybentom przejrzane zgłoszone zdarzenie, składnik FileSearcher sprawdza, czy wartość logiczna i podejmuje działania.</span><span class="sxs-lookup"><span data-stu-id="d3e36-160">After all subscribers have seen the event raised, the FileSearcher component examines the boolean value and takes action.</span></span>

<span data-ttu-id="d3e36-161">Drugi wzorzec tylko czy anulować operację, jeśli wszyscy subskrybenci operacja została anulowana.</span><span class="sxs-lookup"><span data-stu-id="d3e36-161">The second pattern would only cancel the operation if all subscribers wanted the operation cancelled.</span></span> <span data-ttu-id="d3e36-162">W tym wzorcu nowe pole jest inicjowany do wskazania powinna anulować operację i każdy subskrybent może zmienić go, aby wskazać, że operacja powinna nadal pozostawać.</span><span class="sxs-lookup"><span data-stu-id="d3e36-162">In this pattern, the new field is initialized to indicate the operation should cancel, and any subscriber could change it to indicate the operation should continue.</span></span>
<span data-ttu-id="d3e36-163">Po wszystkim subskrybentom przejrzane zgłoszone zdarzenie, składnik FileSearcher sprawdza, czy atrybut typu wartość logiczna i podejmuje działania.</span><span class="sxs-lookup"><span data-stu-id="d3e36-163">After all subscribers have seen the event raised, the FileSearcher component examines the boolean and takes action.</span></span> <span data-ttu-id="d3e36-164">Istnieje jeden dodatkowy krok w tym wzorcu: składnik musi znać, jeśli zdarzenie przejrzane żadnych subskrybentów.</span><span class="sxs-lookup"><span data-stu-id="d3e36-164">There is one extra step in this pattern: the component needs to know if any subscribers have seen the event.</span></span> <span data-ttu-id="d3e36-165">W przypadku subskrybentów pola wskazuje Anuluj niepoprawnie.</span><span class="sxs-lookup"><span data-stu-id="d3e36-165">If there are no subscribers, the field would indicate a cancel incorrectly.</span></span>

<span data-ttu-id="d3e36-166">Teraz można zaimplementować pierwsza wersja dla tego przykładu.</span><span class="sxs-lookup"><span data-stu-id="d3e36-166">Let's implement the first version for this sample.</span></span> <span data-ttu-id="d3e36-167">Należy dodać pola logicznych o nazwie `CancelRequested` do `FileFoundArgs` typu:</span><span class="sxs-lookup"><span data-stu-id="d3e36-167">You need to add a boolean field named `CancelRequested` to the `FileFoundArgs` type:</span></span>

[!code-csharp[EventArgs](../../samples/csharp/events/Program.cs#EventArgs "Update event arguments")]

<span data-ttu-id="d3e36-168">Do tego nowego pola jest inicjowana automatycznie `false`, wartością domyślną dla polem, dzięki czemu nie anulujesz przypadkowo.</span><span class="sxs-lookup"><span data-stu-id="d3e36-168">This new Field is automatically initialized to `false`, the default value for a Boolean field, so you don't cancel accidentally.</span></span> <span data-ttu-id="d3e36-169">Jedyną inną zmianą do składnika jest do sprawdzania flagi po podnoszonego zdarzenia, aby zobaczyć, jeśli dowolny subskrybentów żądano anulowania:</span><span class="sxs-lookup"><span data-stu-id="d3e36-169">The only other change to the component is to check the flag after raising the event to see if any of the subscribers have requested a cancellation:</span></span>

```csharp
public void List(string directory, string searchPattern)
{
    foreach (var file in Directory.EnumerateFiles(directory, searchPattern))
    {
        var args = new FileFoundArgs(file);
        FileFound?.Invoke(this, args);
        if (args.CancelRequested)
            break;
    }
}
```

<span data-ttu-id="d3e36-170">Jedną z zalet tego wzorca jest, że nie jest istotną zmianę.</span><span class="sxs-lookup"><span data-stu-id="d3e36-170">One advantage of this pattern is that it isn't a breaking change.</span></span>
<span data-ttu-id="d3e36-171">Brak subskrybentów zażądał anulowania przed i nadal nie są one.</span><span class="sxs-lookup"><span data-stu-id="d3e36-171">None of the subscribers requested a cancellation before, and they still are not.</span></span> <span data-ttu-id="d3e36-172">Brak kodu subskrybenta wymaga aktualizacji, chyba że mają być obsługuje nowy protokół anulowania.</span><span class="sxs-lookup"><span data-stu-id="d3e36-172">None of the subscriber code needs updating unless they want to support the new cancel protocol.</span></span> <span data-ttu-id="d3e36-173">Jest bardzo luźno powiązana.</span><span class="sxs-lookup"><span data-stu-id="d3e36-173">It's very loosely coupled.</span></span>

<span data-ttu-id="d3e36-174">Zaktualizujmy subskrybenta, tak aby żądania anulowania, gdy znajdzie pierwszy plik wykonywalny:</span><span class="sxs-lookup"><span data-stu-id="d3e36-174">Let's update the subscriber so that it requests a cancellation once it finds the first executable:</span></span>

```csharp
EventHandler<FileFoundArgs> onFileFound = (sender, eventArgs) =>
{
    Console.WriteLine(eventArgs.FoundFile);
    eventArgs.CancelRequested = true;
};
```

## <a name="adding-another-event-declaration"></a><span data-ttu-id="d3e36-175">Dodawanie innego deklaracja zdarzenia</span><span class="sxs-lookup"><span data-stu-id="d3e36-175">Adding Another Event Declaration</span></span>

<span data-ttu-id="d3e36-176">Dodajmy jedną funkcję więcej i pokazują innych idiomy języka dla zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d3e36-176">Let's add one more feature, and demonstrate other language idioms for events.</span></span> <span data-ttu-id="d3e36-177">Dodajmy przeciążenia `Search()` metodę, która przechodzi przez wszystkie podkatalogi w poszukiwaniu plików.</span><span class="sxs-lookup"><span data-stu-id="d3e36-177">Let's add an overload of the `Search()` method that traverses all subdirectories in search of files.</span></span>

<span data-ttu-id="d3e36-178">To można pobrać jako długotrwałej operacji w katalogu z wielu katalogach podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="d3e36-178">This could get to be a lengthy operation in a directory with many sub-directories.</span></span> <span data-ttu-id="d3e36-179">Dodajmy zdarzenia, które pobiera zgłaszane w przypadku każdego nowego wyszukiwania w katalogu rozpoczyna się.</span><span class="sxs-lookup"><span data-stu-id="d3e36-179">Let's add an event that gets raised when each new directory search begins.</span></span> <span data-ttu-id="d3e36-180">Dzięki temu subskrybentów do śledzenia postępu i zaktualizować użytkownika dotyczące postępu.</span><span class="sxs-lookup"><span data-stu-id="d3e36-180">This enables subscribers to track progress, and update the user as to progress.</span></span> <span data-ttu-id="d3e36-181">Wszystkie przykłady, utworzonych przez siebie do tej pory były publiczne.</span><span class="sxs-lookup"><span data-stu-id="d3e36-181">All the samples you've created so far are public.</span></span> <span data-ttu-id="d3e36-182">Upewnijmy się, to zdarzenie wewnętrzne.</span><span class="sxs-lookup"><span data-stu-id="d3e36-182">Let's make this one an internal event.</span></span> <span data-ttu-id="d3e36-183">Oznacza to, że można również ustawić jako typy również używany dla wewnętrznych argumentów.</span><span class="sxs-lookup"><span data-stu-id="d3e36-183">That means you can also make the types used for the arguments internal as well.</span></span>

<span data-ttu-id="d3e36-184">Będziesz rozpoczyna się od utworzenia nowej klasy EventArgs pochodne raportowania nowy katalog i postępu.</span><span class="sxs-lookup"><span data-stu-id="d3e36-184">You'll start by creating the new EventArgs derived class for reporting the new directory and progress.</span></span> 

[!code-csharp[DirEventArgs](../../samples/csharp/events/Program.cs#SearchDirEventArgs "Define search directory event arguments")]

<span data-ttu-id="d3e36-185">Ponownie możesz wykonać zalecenia dotyczące typu odwołania niezmienne argumentów zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d3e36-185">Again, you can follow the recommendations to make an immutable reference type for the event arguments.</span></span>

<span data-ttu-id="d3e36-186">Następnie zdefiniuj zdarzenie.</span><span class="sxs-lookup"><span data-stu-id="d3e36-186">Next, define the event.</span></span> <span data-ttu-id="d3e36-187">Tym razem użyjesz różnej składni.</span><span class="sxs-lookup"><span data-stu-id="d3e36-187">This time, you'll use a different syntax.</span></span> <span data-ttu-id="d3e36-188">Oprócz używania składni pola, można jawnie Utwórz właściwości, za pomocą Dodaj i usuń programy obsługi.</span><span class="sxs-lookup"><span data-stu-id="d3e36-188">In addition to using the field syntax, you can explicitly create the property, with add and remove handlers.</span></span> <span data-ttu-id="d3e36-189">W tym przykładzie nie wymaga dodatkowego kodu w tych procedurach obsługi, ale ten pokazuje, jak należy je utworzyć.</span><span class="sxs-lookup"><span data-stu-id="d3e36-189">In this sample, you won't need extra code in those handlers, but this shows how you would create them.</span></span>

[!code-csharp[Declare event with add and remove handlers](../../samples/csharp/events/Program.cs#DeclareSearchEvent "Declare the event with add and remove handlers")]

<span data-ttu-id="d3e36-190">Na wiele sposobów kod, który możesz zapisu w tym miejscu duplikatów kodu, kompilator generuje definicje zdarzeń pola przedstawiono wcześniej.</span><span class="sxs-lookup"><span data-stu-id="d3e36-190">In many ways, the code you write here mirrors the code the compiler generates for the field event definitions you've seen earlier.</span></span> <span data-ttu-id="d3e36-191">Tworzenie zdarzenia za pomocą składni bardzo podobne do celów [właściwości](properties.md).</span><span class="sxs-lookup"><span data-stu-id="d3e36-191">You create the event using syntax very similar to that used for [properties](properties.md).</span></span> <span data-ttu-id="d3e36-192">Zwróć uwagę, że programy obsługi mają inne nazwy: `add` i `remove`.</span><span class="sxs-lookup"><span data-stu-id="d3e36-192">Notice that the handlers have different names: `add` and `remove`.</span></span> <span data-ttu-id="d3e36-193">Są one nazywane do subskrybowania zdarzenia lub anulować subskrypcję zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="d3e36-193">These are called to subscribe to the event, or unsubscribe from the event.</span></span> <span data-ttu-id="d3e36-194">Należy zauważyć, że również należy zadeklarować polem zapasowym prywatnych do przechowania zmiennej zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="d3e36-194">Notice that you also must declare a private backing field to store the event variable.</span></span> <span data-ttu-id="d3e36-195">Jest inicjowany do wartości null.</span><span class="sxs-lookup"><span data-stu-id="d3e36-195">It is initialized to null.</span></span>

<span data-ttu-id="d3e36-196">Następnie Dodajmy przeciążenia metody Search(), przechodzi przez podkatalogów, która wywołuje zdarzenia obu.</span><span class="sxs-lookup"><span data-stu-id="d3e36-196">Next, let's add the overload of the Search() method that traverses subdirectories and raises both events.</span></span> <span data-ttu-id="d3e36-197">Najprostszym sposobem, aby osiągnąć ten cel jest określenie, że wszystkie katalogi wyszukiwania za pomocą domyślnego argumentu:</span><span class="sxs-lookup"><span data-stu-id="d3e36-197">The easiest way to accomplish this is to use a default argument to specify that you want to search all directories:</span></span>

[!code-csharp[SearchImplementation](../../samples/csharp/events/Program.cs#FinalImplementation "Implementation to search directories")]

<span data-ttu-id="d3e36-198">W tym momencie można uruchomić aplikacji, wywołanie przeciążenia wszystkie podkatalogi wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="d3e36-198">At this point, you can run the application calling the overload for searching all sub-directories.</span></span> <span data-ttu-id="d3e36-199">Na nowym nie ma żadnych subskrybentów `ChangeDirectory` zdarzenia, ale przy użyciu `?.Invoke()` idiom gwarantuje, że to działa prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="d3e36-199">There are no subscribers on the new `ChangeDirectory` event, but using the `?.Invoke()` idiom ensures that this works correctly.</span></span>

 <span data-ttu-id="d3e36-200">Możemy dodać program obsługi do pisania wiersza, która przedstawia postęp w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="d3e36-200">Let's add a handler to write a line that shows the progress in the console window.</span></span> 

[!code-csharp[Search](../../samples/csharp/events/Program.cs#Search "Declare event handler")]

<span data-ttu-id="d3e36-201">Po zapoznaniu wzorców, które są wykonywane w całym ekosystemie platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="d3e36-201">You've seen patterns that are followed throughout the .NET ecosystem.</span></span>
<span data-ttu-id="d3e36-202">Dzięki informacjom o tych wzorców i Konwencji, napiszesz idiomatyczną C# i .NET szybko.</span><span class="sxs-lookup"><span data-stu-id="d3e36-202">By learning these patterns and conventions, you'll be writing idiomatic C# and .NET quickly.</span></span>

<span data-ttu-id="d3e36-203">Następnie zobaczysz niektóre zmiany w tych wzorców w najnowszej wersji programu .NET.</span><span class="sxs-lookup"><span data-stu-id="d3e36-203">Next, you'll see some changes in these patterns in the most recent release of .NET.</span></span>

[<span data-ttu-id="d3e36-204">Next</span><span class="sxs-lookup"><span data-stu-id="d3e36-204">Next</span></span>](modern-events.md)
