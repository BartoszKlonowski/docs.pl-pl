---
title: Koncepcje i model obiektów .NET Compiler Platform SDK
description: To omówienie zapewnia efektywność pracy z zestawem SDK kompilatora platformy .NET. Poznasz warstwy interfejsu API, typy główne i ogólny model obiektów.
ms.date: 07/13/2020
ms.custom: mvc
ms.openlocfilehash: a65d282dd3c58279bbfd635c0386d50ce3f30055
ms.sourcegitcommit: e7748001b1cee80ced691d8a76ca814c0b02dd9b
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/14/2020
ms.locfileid: "86374471"
---
# <a name="understand-the-net-compiler-platform-sdk-model"></a><span data-ttu-id="8da1c-104">Poznaj model zestawu SDK .NET Compiler Platform</span><span class="sxs-lookup"><span data-stu-id="8da1c-104">Understand the .NET Compiler Platform SDK model</span></span>

<span data-ttu-id="8da1c-105">Kompilator przetwarza kod napisany przy użyciu reguł strukturalnych, które często różnią się od sposobu, w jaki ludzie czytają i wiedzą kod.</span><span class="sxs-lookup"><span data-stu-id="8da1c-105">Compilers process the code you write following structured rules that often differ from the way humans read and understand code.</span></span> <span data-ttu-id="8da1c-106">Podstawowe informacje o modelu używanym przez kompilatory są niezbędne do poznania interfejsów API używanych podczas tworzenia narzędzi opartych na Roslyn.</span><span class="sxs-lookup"><span data-stu-id="8da1c-106">A basic understanding of the model used by compilers is essential to understanding the APIs you use when building Roslyn-based tools.</span></span>

## <a name="compiler-pipeline-functional-areas"></a><span data-ttu-id="8da1c-107">Obszary funkcjonalne potoku kompilatora</span><span class="sxs-lookup"><span data-stu-id="8da1c-107">Compiler pipeline functional areas</span></span>

<span data-ttu-id="8da1c-108">Zestaw .NET Compiler Platform SDK uwidacznia analizę kodu w języku C# i Visual Basic kompilatory jako konsumenta, dostarczając warstwę interfejsu API, która odzwierciedla tradycyjny potok kompilatora.</span><span class="sxs-lookup"><span data-stu-id="8da1c-108">The .NET Compiler Platform SDK exposes the C# and Visual Basic compilers' code analysis to you as a consumer by providing an API layer that mirrors a traditional compiler pipeline.</span></span>

![kroki kompilatora przetwarzające kod źródłowy do kodu obiektu](media/compiler-api-model/compiler-pipeline.png)

<span data-ttu-id="8da1c-110">Każda faza tego potoku jest osobnym składnikiem.</span><span class="sxs-lookup"><span data-stu-id="8da1c-110">Each phase of this pipeline is a separate component.</span></span> <span data-ttu-id="8da1c-111">Najpierw etap analizy tokenizes i analizuje tekst źródłowy do składni, która następuje po gramatyce języka.</span><span class="sxs-lookup"><span data-stu-id="8da1c-111">First, the parse phase tokenizes and parses source text into syntax that follows the language grammar.</span></span> <span data-ttu-id="8da1c-112">Druga faza deklaracji analizuje źródłowe i zaimportowane metadane do postaci nazwanych symboli.</span><span class="sxs-lookup"><span data-stu-id="8da1c-112">Second, the declaration phase analyzes source and imported metadata to form named symbols.</span></span> <span data-ttu-id="8da1c-113">Następnie faza powiązania dopasowuje identyfikatory w kodzie do symboli.</span><span class="sxs-lookup"><span data-stu-id="8da1c-113">Next, the bind phase matches identifiers in the code to symbols.</span></span> <span data-ttu-id="8da1c-114">Na koniec etap emisji emituje zestaw ze wszystkimi informacjami skompilowanymi przez kompilator.</span><span class="sxs-lookup"><span data-stu-id="8da1c-114">Finally, the emit phase emits an assembly with all the information built up by the compiler.</span></span>

![Interfejs API potoku kompilatora zapewnia dostęp do każdego kroku, który jest częścią potoku kompilatora](media/compiler-api-model/compiler-pipeline-api.png)

<span data-ttu-id="8da1c-116">Dla każdego z tych faz zestaw SDK .NET Compiler Platform uwidacznia model obiektów, który umożliwia dostęp do informacji w tej fazie.</span><span class="sxs-lookup"><span data-stu-id="8da1c-116">Corresponding to each of those phases, the .NET Compiler Platform SDK exposes an object model that allows access to the information at that phase.</span></span> <span data-ttu-id="8da1c-117">Etap analizy uwidacznia drzewo składni, ale faza deklaracji uwidacznia hierarchiczną tabelę symboli, faza powiązania ujawnia wynik analizy semantycznej kompilatora, a faza emisji jest interfejsem API, który tworzy kody bajtów IL.</span><span class="sxs-lookup"><span data-stu-id="8da1c-117">The parsing phase exposes a syntax tree, the declaration phase exposes a hierarchical symbol table, the binding phase exposes the result of the compiler's semantic analysis, and the emit phase is an API that produces IL byte codes.</span></span>

![usługi językowe dostępne z interfejsu API kompilatora na każdym etapie potoku kompilatora](media/compiler-api-model/compiler-pipeline-lang-svc.png)

<span data-ttu-id="8da1c-119">Każdy kompilator łączy te składniki razem z pojedynczym kompleksem.</span><span class="sxs-lookup"><span data-stu-id="8da1c-119">Each compiler combines these components together as a single end-to-end whole.</span></span>

<span data-ttu-id="8da1c-120">Te interfejsy API są takie same, jak w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8da1c-120">These APIs are the same ones used by Visual Studio.</span></span> <span data-ttu-id="8da1c-121">Na przykład funkcje tworzenia konspektu kodu i formatowania używają drzew składni, **Przeglądarka obiektów**i funkcji nawigacji, Użyj tabeli symboli, refaktoryzacji i **Przejdź do definicji** Użyj modelu semantycznego, a następnie **Edytuj i Kontynuuj** używa wszystkich tych elementów, w tym interfejsu API emisji.</span><span class="sxs-lookup"><span data-stu-id="8da1c-121">For instance, the code outlining and formatting features use the syntax trees, the **Object Browser**, and navigation features use the symbol table, refactorings and **Go to Definition** use the semantic model, and **Edit and Continue** uses all of these, including the Emit API.</span></span>

## <a name="api-layers"></a><span data-ttu-id="8da1c-122">Warstwy interfejsu API</span><span class="sxs-lookup"><span data-stu-id="8da1c-122">API layers</span></span>

<span data-ttu-id="8da1c-123">Zestaw SDK kompilatora .NET składa się z kilku warstw interfejsów API: interfejsów API kompilatora, interfejsów API diagnostyki, interfejsów API tworzenia skryptów i interfejsów API obszarów roboczych.</span><span class="sxs-lookup"><span data-stu-id="8da1c-123">The .NET compiler SDK consists of several layers of APIs: compiler APIs, diagnostic APIs, scripting APIs, and workspaces APIs.</span></span>

### <a name="compiler-apis"></a><span data-ttu-id="8da1c-124">Interfejsy API kompilatora</span><span class="sxs-lookup"><span data-stu-id="8da1c-124">Compiler APIs</span></span>

<span data-ttu-id="8da1c-125">Warstwa kompilatora zawiera modele obiektów, które odnoszą się do informacji uwidocznionych w każdej fazie potoku kompilatora, składni i semantyki.</span><span class="sxs-lookup"><span data-stu-id="8da1c-125">The compiler layer contains the object models that correspond to information exposed at each phase of the compiler pipeline, both syntactic and semantic.</span></span> <span data-ttu-id="8da1c-126">Warstwa kompilatora zawiera również niemodyfikowalną migawkę pojedynczego wywołania kompilatora, w tym odwołania do zestawów, opcje kompilatora i pliki kodu źródłowego.</span><span class="sxs-lookup"><span data-stu-id="8da1c-126">The compiler layer also contains an immutable snapshot of a single invocation of a compiler, including assembly references, compiler options, and source code files.</span></span> <span data-ttu-id="8da1c-127">Istnieją dwa różne interfejsy API, które reprezentują język C# i język Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="8da1c-127">There are two distinct APIs that represent the C# language and the Visual Basic language.</span></span> <span data-ttu-id="8da1c-128">Dwa interfejsy API są podobne do kształtu, ale są dostosowane do poszczególnych języków.</span><span class="sxs-lookup"><span data-stu-id="8da1c-128">The two APIs are similar in shape but tailored for high-fidelity to each individual language.</span></span> <span data-ttu-id="8da1c-129">Ta warstwa nie ma żadnych zależności w składnikach programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8da1c-129">This layer has no dependencies on Visual Studio components.</span></span>

### <a name="diagnostic-apis"></a><span data-ttu-id="8da1c-130">Diagnostyczne interfejsy API</span><span class="sxs-lookup"><span data-stu-id="8da1c-130">Diagnostic APIs</span></span>

<span data-ttu-id="8da1c-131">W ramach analizy kompilator może utworzyć zestaw danych diagnostycznych obejmujących wszystkie elementy składni, semantyki i błędy przypisania do różnych ostrzeżeń i diagnostyki informacyjnej.</span><span class="sxs-lookup"><span data-stu-id="8da1c-131">As part of its analysis the compiler may produce a set of diagnostics covering everything from syntax, semantic, and definite assignment errors to various warnings and informational diagnostics.</span></span> <span data-ttu-id="8da1c-132">Warstwa interfejsu API kompilatora udostępnia diagnostykę za pomocą rozszerzalnego interfejsu API, który umożliwia przełączenie analizatorów zdefiniowanych przez użytkownika do procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="8da1c-132">The Compiler API layer exposes diagnostics through an extensible API that allows user-defined analyzers to be plugged into the compilation process.</span></span> <span data-ttu-id="8da1c-133">Umożliwia ona wytwarzanie przez użytkownika diagnostyki, takich jak te, które są tworzone przez narzędzia takie jak StyleCop lub FxCop, do wygenerowania w ramach diagnostyki zdefiniowanej przez kompilator.</span><span class="sxs-lookup"><span data-stu-id="8da1c-133">It allows user-defined diagnostics, such as those produced by tools like StyleCop or FxCop, to be produced alongside compiler-defined diagnostics.</span></span> <span data-ttu-id="8da1c-134">Zapewnianie diagnostyki w ten sposób pozwala na integrację naturalnie z narzędziami, takimi jak MSBuild i Visual Studio, które są zależne od diagnostyki dla środowisk, takich jak zatrzymywanie kompilacji na podstawie zasad i wyświetlanie zygzaków na żywo w edytorze i sugerowanie poprawek w kodzie.</span><span class="sxs-lookup"><span data-stu-id="8da1c-134">Producing diagnostics in this way has the benefit of integrating naturally with tools such as MSBuild and Visual Studio, which depend on diagnostics for experiences such as halting a build based on policy and showing live squiggles in the editor and suggesting code fixes.</span></span>

### <a name="scripting-apis"></a><span data-ttu-id="8da1c-135">Interfejsy API obsługi skryptów</span><span class="sxs-lookup"><span data-stu-id="8da1c-135">Scripting APIs</span></span>

<span data-ttu-id="8da1c-136">Interfejsy API hostingu i skryptów są częścią warstwy kompilatora.</span><span class="sxs-lookup"><span data-stu-id="8da1c-136">Hosting and scripting APIs are part of the compiler layer.</span></span> <span data-ttu-id="8da1c-137">Można ich używać do wykonywania fragmentów kodu i gromadzenia kontekstu wykonywania środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="8da1c-137">You can use them for executing code snippets and accumulating a runtime execution context.</span></span>
<span data-ttu-id="8da1c-138">W języku C# Interactive REPL (pętla odczytu-Szacuj-Print) używa tych interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="8da1c-138">The C# interactive REPL (Read-Evaluate-Print Loop) uses these APIs.</span></span> <span data-ttu-id="8da1c-139">REPL umożliwia używanie języka C# w języku skryptowym, wykonywanie kodu w sposób interaktywny podczas pisania.</span><span class="sxs-lookup"><span data-stu-id="8da1c-139">The REPL enables you to use C# as a scripting language, executing the code interactively as you write it.</span></span>

### <a name="workspaces-apis"></a><span data-ttu-id="8da1c-140">Interfejsy API obszarów roboczych</span><span class="sxs-lookup"><span data-stu-id="8da1c-140">Workspaces APIs</span></span>

<span data-ttu-id="8da1c-141">Warstwa obszary robocze zawiera interfejs API obszaru roboczego, który jest punktem wyjścia do przeprowadzania analizy kodu i refaktoryzacji całego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="8da1c-141">The Workspaces layer contains the Workspace API, which is the starting point for doing code analysis and refactoring over entire solutions.</span></span> <span data-ttu-id="8da1c-142">Pomaga to w organizowaniu wszystkich informacji o projektach w rozwiązaniu w jednym modelu obiektów, co zapewnia bezpośredni dostęp do modeli obiektów warstwy kompilatora bez potrzeby analizowania plików, konfigurowania opcji i zarządzania zależnościami między projektami.</span><span class="sxs-lookup"><span data-stu-id="8da1c-142">It assists you in organizing all the information about the projects in a solution into a single object model, offering you direct access to the compiler layer object models without needing to parse files, configure options, or manage project-to-project dependencies.</span></span>

<span data-ttu-id="8da1c-143">Ponadto warstwa obszarów roboczych ma zestaw interfejsów API używanych podczas implementowania analizy kodu i narzędzi refaktoryzacji, które działają w środowisku hosta, takim jak środowisko IDE programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8da1c-143">In addition, the Workspaces layer surfaces a set of APIs used when implementing code analysis and refactoring tools that function within a host environment like the Visual Studio IDE.</span></span> <span data-ttu-id="8da1c-144">Przykłady obejmują interfejsy API Znajdź wszystkie odwołania, formatowanie i generowanie kodu.</span><span class="sxs-lookup"><span data-stu-id="8da1c-144">Examples include the Find All References, Formatting, and Code Generation APIs.</span></span>

<span data-ttu-id="8da1c-145">Ta warstwa nie ma żadnych zależności w składnikach programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8da1c-145">This layer has no dependencies on Visual Studio components.</span></span>
