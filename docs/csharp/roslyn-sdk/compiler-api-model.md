---
title: Pojęcia sdk platformy kompilatora .NET i model obiektu
description: Ten przegląd zapewnia tło, które należy skutecznie pracować z zestawem SDK kompilatora .NET. Dowiesz się warstwy interfejsu API, główne typy zaangażowanych i ogólny model obiektów.
ms.date: 10/10/2017
ms.custom: mvc
ms.openlocfilehash: e563260e21fb8807017db90ff63e30fec0415a48
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/14/2020
ms.locfileid: "79156964"
---
# <a name="understand-the-net-compiler-platform-sdk-model"></a><span data-ttu-id="cc2a5-104">Opis modelu sdk platformy kompilatora .NET</span><span class="sxs-lookup"><span data-stu-id="cc2a5-104">Understand the .NET Compiler Platform SDK model</span></span>

<span data-ttu-id="cc2a5-105">Kompilatory przetwarzają kod, który piszesz, zgodnie z regułami strukturalnymi, które często różnią się od sposobu, w jaki ludzie czytają i rozumieją kod.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-105">Compilers process the code you write following structured rules that often differ from the way humans read and understand code.</span></span> <span data-ttu-id="cc2a5-106">Podstawowa wiedza na temat modelu używanego przez kompilatory jest niezbędna do zrozumienia interfejsów API używanych podczas tworzenia narzędzi opartych na Roslyn.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-106">A basic understanding of the model used by compilers is essential to understanding the APIs you use when building Roslyn-based tools.</span></span>

## <a name="compiler-pipeline-functional-areas"></a><span data-ttu-id="cc2a5-107">Obszary funkcjonalne potoku kompilatora</span><span class="sxs-lookup"><span data-stu-id="cc2a5-107">Compiler pipeline functional areas</span></span>

<span data-ttu-id="cc2a5-108">Zestaw SDK platformy kompilatora .NET udostępnia analizę kodu kompilatora C# i Visual Basic jako konsumenta, udostępniając warstwę interfejsu API, która odzwierciedla tradycyjny potok kompilatora.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-108">The .NET Compiler Platform SDK exposes the C# and Visual Basic compilers' code analysis to you as a consumer by providing an API layer that mirrors a traditional compiler pipeline.</span></span>

![kroki przetwarzania kodu źródłowego potoku kompilatora do kodu obiektu](media/compiler-api-model/compiler-pipeline.png)

<span data-ttu-id="cc2a5-110">Każda faza tego potoku jest oddzielnym składnikiem.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-110">Each phase of this pipeline is a separate component.</span></span> <span data-ttu-id="cc2a5-111">Po pierwsze, analiza fazy tokenizes i analizuje tekst źródłowy do składni, która następuje gramatyki językowej.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-111">First, the parse phase tokenizes and parses source text into syntax that follows the language grammar.</span></span> <span data-ttu-id="cc2a5-112">Po drugie faza deklaracji analizuje źródło i importowane metadane w celu utworzenia nazwanych symboli.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-112">Second, the declaration phase analyzes source and imported metadata to form named symbols.</span></span> <span data-ttu-id="cc2a5-113">Następnie faza powiązania dopasowuje identyfikatory w kodzie do symboli.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-113">Next, the bind phase matches identifiers in the code to symbols.</span></span> <span data-ttu-id="cc2a5-114">Na koniec fazy emituj emituje zestaw ze wszystkimi informacjami utworzonymi przez kompilator.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-114">Finally, the emit phase emits an assembly with all the information built up by the compiler.</span></span>

![interfejs api potoku kompilatora zapewnia dostęp do każdego kroku, który jest częścią potoku kompilatora](media/compiler-api-model/compiler-pipeline-api.png)

<span data-ttu-id="cc2a5-116">Odpowiadająca każdej z tych faz zestaw SDK platformy kompilatora .NET udostępnia model obiektu, który umożliwia dostęp do informacji na tej fazie.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-116">Corresponding to each of those phases, the .NET Compiler Platform SDK exposes an object model that allows access to the information at that phase.</span></span> <span data-ttu-id="cc2a5-117">Faza analizy udostępnia drzewo składni, faza deklaracji udostępnia hierarchiczną tabelę symboli, faza wiązania udostępnia wynik analizy semantycznej kompilatora, a faza emitowania jest interfejsem API, który tworzy kody bajtów IL.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-117">The parsing phase exposes a syntax tree, the declaration phase exposes a hierarchical symbol table, the binding phase exposes the result of the compiler’s semantic analysis, and the emit phase is an API that produces IL byte codes.</span></span>

![usługi językowe dostępne z interfejsu api kompilatora na każdym etapie potoku kompilatora](media/compiler-api-model/compiler-pipeline-lang-svc.png)

<span data-ttu-id="cc2a5-119">Każdy kompilator łączy te składniki razem jako pojedynczą całość end-to-end.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-119">Each compiler combines these components together as a single end-to-end whole.</span></span>

<span data-ttu-id="cc2a5-120">Te interfejsy API są te same używane przez program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-120">These APIs are the same ones used by Visual Studio.</span></span> <span data-ttu-id="cc2a5-121">Na przykład funkcje konspektu i formatowania kodu używają drzew składni, przeglądarka obiektów i funkcje nawigacji używają tabeli symboli, refaktoryzacji i przejdź do definicji, a model semantyczny i Edit i Continue używają wszystkich tych elementów, w tym interfejsu API emitowania.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-121">For instance, the code outlining and formatting features use the syntax trees, the Object Browser and navigation features use the symbol table, refactorings and Go to Definition use the semantic model, and Edit and Continue uses all of these, including the Emit API.</span></span>

## <a name="api-layers"></a><span data-ttu-id="cc2a5-122">Warstwy interfejsu API</span><span class="sxs-lookup"><span data-stu-id="cc2a5-122">API layers</span></span>

<span data-ttu-id="cc2a5-123">Zestaw SDK kompilatora .NET składa się z dwóch głównych warstw interfejsów API: interfejsów API kompilatora i interfejsów API obszarów roboczych.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-123">The .NET compiler SDK consists of two main layers of APIs: compiler APIs and workspaces APIs.</span></span>

![warstwy interfejsu api reprezentowane przez potok kompilatora apis](media/compiler-api-model/api-layers.png)

### <a name="compiler-apis"></a><span data-ttu-id="cc2a5-125">Interfejsy API kompilatora</span><span class="sxs-lookup"><span data-stu-id="cc2a5-125">Compiler APIs</span></span>

<span data-ttu-id="cc2a5-126">Warstwa kompilatora zawiera modele obiektów, które odpowiadają informacji uwyponych w każdej fazie potoku kompilatora, zarówno składnii i semantyczne.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-126">The compiler layer contains the object models that correspond to information exposed at each phase of the compiler pipeline, both syntactic and semantic.</span></span> <span data-ttu-id="cc2a5-127">Warstwa kompilatora zawiera również niezmienną migawkę pojedynczego wywołania kompilatora, w tym odwołań do zestawu, opcji kompilatora i plików kodu źródłowego.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-127">The compiler layer also contains an immutable snapshot of a single invocation of a compiler, including assembly references, compiler options, and source code files.</span></span> <span data-ttu-id="cc2a5-128">Istnieją dwa różne interfejsy API, które reprezentują język Języka C# i języka Języka Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-128">There are two distinct APIs that represent the C# language and the Visual Basic language.</span></span> <span data-ttu-id="cc2a5-129">Te dwa interfejsy API mają podobny kształt, ale dostosowane do wysokiej wierności do każdego języka.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-129">These two APIs are similar in shape but tailored for high-fidelity to each individual language.</span></span> <span data-ttu-id="cc2a5-130">Ta warstwa nie ma zależności od składników programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-130">This layer has no dependencies on Visual Studio components.</span></span>

### <a name="diagnostic-apis"></a><span data-ttu-id="cc2a5-131">Interfejsy API diagnostyki</span><span class="sxs-lookup"><span data-stu-id="cc2a5-131">Diagnostic APIs</span></span>

<span data-ttu-id="cc2a5-132">W ramach analizy kompilator może wygenerować zestaw diagnostyki obejmujących wszystko, od składni, semantyczne i określone błędy przypisania do różnych ostrzeżeń i diagnostyki informacyjnej.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-132">As part of its analysis the compiler may produce a set of diagnostics covering everything from syntax, semantic, and definite assignment errors to various warnings and informational diagnostics.</span></span> <span data-ttu-id="cc2a5-133">Warstwa interfejsu API kompilatora udostępnia diagnostyki za pośrednictwem rozszerzalnego interfejsu API, który umożliwia analizatory zdefiniowane przez użytkownika, które mają być podłączone do procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-133">The Compiler API layer exposes diagnostics through an extensible API that allows user-defined analyzers to be plugged into the compilation process.</span></span> <span data-ttu-id="cc2a5-134">Umożliwia diagnostyki zdefiniowaneprzez użytkownika, takich jak te produkowane przez narzędzia, takie jak StyleCop lub FxCop, które mają być produkowane obok diagnostyki zdefiniowanej przez kompilator.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-134">It allows user-defined diagnostics, such as those produced by tools like StyleCop or FxCop, to be produced alongside compiler-defined diagnostics.</span></span> <span data-ttu-id="cc2a5-135">Tworzenie diagnostyki w ten sposób ma tę zaletę integracji naturalnie z narzędziami, takimi jak MSBuild i Visual Studio, które zależą od diagnostyki dla doświadczeń, takich jak zatrzymanie kompilacji opartej na zasadach i wyświetlanie squiggles na żywo w edytorze i sugerowanie kodu Poprawki.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-135">Producing diagnostics in this way has the benefit of integrating naturally with tools such as MSBuild and Visual Studio which depend on diagnostics for experiences such as halting a build based on policy and showing live squiggles in the editor and suggesting code fixes.</span></span>

### <a name="scripting-apis"></a><span data-ttu-id="cc2a5-136">Interfejsy API skryptów</span><span class="sxs-lookup"><span data-stu-id="cc2a5-136">Scripting APIs</span></span>

<span data-ttu-id="cc2a5-137">Interfejsy API hostingu i skryptów są częścią warstwy kompilatora.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-137">Hosting and scripting APIs are part of the compiler layer.</span></span> <span data-ttu-id="cc2a5-138">Można ich używać do wykonywania fragmentów kodu i gromadzenia kontekstu wykonywania w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-138">You can use them for executing code snippets and accumulating a runtime execution context.</span></span>
<span data-ttu-id="cc2a5-139">C# interaktywne REPL (Odczyt-Ocena-Print Loop) używa tych interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-139">The C# interactive REPL (Read-Evaluate-Print Loop) uses these APIs.</span></span> <span data-ttu-id="cc2a5-140">REPL umożliwia używanie języka C# jako języka skryptów, interakcyjnie wykonując kod podczas pisania.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-140">The REPL enables you to use C# as a scripting language, executing the code interactively as you write it.</span></span>

### <a name="workspaces-apis"></a><span data-ttu-id="cc2a5-141">Interfejsy API obszarów roboczych</span><span class="sxs-lookup"><span data-stu-id="cc2a5-141">Workspaces APIs</span></span>

<span data-ttu-id="cc2a5-142">Warstwa Obszary robocze zawiera interfejs API obszaru roboczego, który jest punktem wyjścia do analizy kodu i refaktoryzacji w całych rozwiązaniach.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-142">The Workspaces layer contains the Workspace API, which is the starting point for doing code analysis and refactoring over entire solutions.</span></span> <span data-ttu-id="cc2a5-143">Pomaga w organizowaniu wszystkich informacji o projektach w rozwiązaniu w model jednego obiektu, oferując bezpośredni dostęp do modeli obiektów warstwy kompilatora bez konieczności analizowania plików, konfigurowania opcji lub zarządzania zależnościami projektu do projektu .</span><span class="sxs-lookup"><span data-stu-id="cc2a5-143">It assists you in organizing all the information about the projects in a solution into single object model, offering you direct access to the compiler layer object models without needing to parse files, configure options, or manage project-to-project dependencies.</span></span>

<span data-ttu-id="cc2a5-144">Ponadto warstwy workspaces powierzchnizestaw interfejsów API używane podczas implementowania analizy kodu i refaktoryzacji narzędzi, które działają w środowisku hosta, takich jak Visual Studio IDE.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-144">In addition, the Workspaces layer surfaces a set of APIs used when implementing code analysis and refactoring tools that function within a host environment like the Visual Studio IDE.</span></span> <span data-ttu-id="cc2a5-145">Przykłady obejmują znajdź wszystkie odwołania, formatowanie i interfejsy API generowania kodu.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-145">Examples include the Find All References, Formatting, and Code Generation APIs.</span></span>

<span data-ttu-id="cc2a5-146">Ta warstwa nie ma zależności od składników programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="cc2a5-146">This layer has no dependencies on Visual Studio components.</span></span>
