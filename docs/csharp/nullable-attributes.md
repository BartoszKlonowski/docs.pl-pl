---
title: Uaktualnij interfejsy API z atrybutami, aby zdefiniować oczekiwania o wartości null
description: W tym artykule wyjaśniono motywacje i techniki umożliwiające dodawanie opisowych atrybutów do opisu stanu wartości null argumentów oraz zwracanie wartości z interfejsów API
ms.date: 07/31/2019
ms.openlocfilehash: 9a5eded385d5eac7a493a36876557cadf083afad
ms.sourcegitcommit: 8c6426a3d2adff5fbcbe1fed0f28eda718c15351
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/02/2019
ms.locfileid: "68733435"
---
# <a name="update-libraries-to-use-nullable-reference-types-and-communicate-nullable-rules-to-callers"></a><span data-ttu-id="b61ee-103">Aktualizowanie bibliotek do używania typów referencyjnych dopuszczających wartości null i przekazywanie reguł dopuszczających wartość null do wywoływania.</span><span class="sxs-lookup"><span data-stu-id="b61ee-103">Update libraries to use nullable reference types and communicate nullable rules to callers.</span></span>

<span data-ttu-id="b61ee-104">Dodanie [typów referencyjnych dopuszczających wartość null](nullable-references.md) oznacza, czy można zadeklarować, czy `null` wartość jest dozwolona, czy nieoczekiwana dla każdej zmiennej.</span><span class="sxs-lookup"><span data-stu-id="b61ee-104">The addition of [nullable reference types](nullable-references.md) means you can declare whether or not a `null` value is allowed or expected for every variable.</span></span> <span data-ttu-id="b61ee-105">Zapewnia to doskonałe środowisko podczas pisania kodu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-105">That provides a great experience as you write code.</span></span> <span data-ttu-id="b61ee-106">Są wyświetlane ostrzeżenia, jeśli zmienna niedopuszczający wartości null może być `null`ustawiona na wartość.</span><span class="sxs-lookup"><span data-stu-id="b61ee-106">You get warnings if a non-nullable variable might be set to `null`.</span></span> <span data-ttu-id="b61ee-107">Są wyświetlane ostrzeżenia, jeśli zmienna dopuszczająca wartość null nie jest sprawdzana przed usunięciem odwołania do niej.</span><span class="sxs-lookup"><span data-stu-id="b61ee-107">You get warnings if a nullable variable isn't null-checked before you dereference it.</span></span> <span data-ttu-id="b61ee-108">Aktualizowanie bibliotek może zająć trochę czasu, ale Payoffs.</span><span class="sxs-lookup"><span data-stu-id="b61ee-108">Updating your libraries can take time, but the payoffs are worth it.</span></span> <span data-ttu-id="b61ee-109">Więcej informacji udostępnianych kompilatorowi o tym, *kiedy* `null` wartość jest dozwolona lub zabroniona, użytkownicy otrzymają lepszych ostrzeżeń dotyczących interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-109">The more information you provide to the compiler about *when* a `null` value is allowed or prohibited, the better warnings users of your API will get.</span></span> <span data-ttu-id="b61ee-110">Zacznijmy od znanego przykładu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-110">Let's start with a familiar example.</span></span> <span data-ttu-id="b61ee-111">Wyobraź sobie, że biblioteka zawiera następujący interfejs API do pobrania ciągu zasobu:</span><span class="sxs-lookup"><span data-stu-id="b61ee-111">Imagine your library has the following API to retrieve a resource string:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="b61ee-112">Poprzedni przykład jest zgodny ze znajomym `Try*` wzorcem w programie .NET.</span><span class="sxs-lookup"><span data-stu-id="b61ee-112">The preceding example follows the familiar `Try*` pattern in .NET.</span></span> <span data-ttu-id="b61ee-113">Istnieją dwa argumenty odwołania dla tego interfejsu API: `key` `message` i parametru.</span><span class="sxs-lookup"><span data-stu-id="b61ee-113">There are two reference arguments for this API: the `key` and the `message` parameter.</span></span> <span data-ttu-id="b61ee-114">Ten interfejs API ma następujące reguły dotyczące wartości null tych argumentów:</span><span class="sxs-lookup"><span data-stu-id="b61ee-114">This API has the following rules relating to the nullness of these arguments:</span></span>

- <span data-ttu-id="b61ee-115">Obiekty wywołujące nie `null` powinny być przekazywane jako `key`argument dla elementu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-115">Callers shouldn't pass `null` as the argument for `key`.</span></span>
- <span data-ttu-id="b61ee-116">Obiekty wywołujące mogą przekazywać zmienną, której `null` wartość jest argumentem `message`dla.</span><span class="sxs-lookup"><span data-stu-id="b61ee-116">Callers can pass a variable whose value is `null` as the argument for `message`.</span></span>
- <span data-ttu-id="b61ee-117">Jeśli metoda zwraca `true`, wartość `message` nie jest równa null. `TryGetMessage`</span><span class="sxs-lookup"><span data-stu-id="b61ee-117">If the `TryGetMessage` method returns `true`, the value of `message` isn't null.</span></span> <span data-ttu-id="b61ee-118">Jeśli wartość zwracana jest `false,` `message` wartością parametru (i jego stan zerowy) ma wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-118">If the return value is `false,` the value of `message` (and its null state) is null.</span></span>

<span data-ttu-id="b61ee-119">Reguła dla `key` może być całkowicie wyrażona przez typ zmiennej: `key` powinien być typem referencyjnym, który nie dopuszcza wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-119">The rule for `key` can be completely expressed by the variable type: `key` should be a non-nullable reference type.</span></span> <span data-ttu-id="b61ee-120">`message` Parametr jest bardziej skomplikowany.</span><span class="sxs-lookup"><span data-stu-id="b61ee-120">The `message` parameter is more complex.</span></span> <span data-ttu-id="b61ee-121">Umożliwia `null` jako argument, ale gwarantuje, że w przypadku powodzenia ten `out` argument nie ma wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-121">It allows `null` as the argument, but guarantees that, on success, that `out` argument isn't null.</span></span> <span data-ttu-id="b61ee-122">W tych scenariuszach potrzebujesz bogatszego słownictwa do opisywania oczekiwań.</span><span class="sxs-lookup"><span data-stu-id="b61ee-122">For these scenarios, you need a richer vocabulary to describe the expectations.</span></span>

<span data-ttu-id="b61ee-123">Aktualizacja biblioteki dla odwołań do wartości null wymaga więcej niż `?` przestawianie niektórych zmiennych i nazw typów.</span><span class="sxs-lookup"><span data-stu-id="b61ee-123">Updating your library for nullable references requires more than sprinkling `?` on some of the variables and type names.</span></span> <span data-ttu-id="b61ee-124">Powyższy przykład pokazuje, że należy przejrzeć interfejsy API i uwzględnić oczekiwania dla każdego argumentu wejściowego.</span><span class="sxs-lookup"><span data-stu-id="b61ee-124">The preceding example shows that you need to examine your APIs and consider your expectations for each input argument.</span></span> <span data-ttu-id="b61ee-125">Należy wziąć pod uwagę gwarancje wartości zwracanej, `out` a `ref` także wszystkie lub argumenty dla zwracanej metody.</span><span class="sxs-lookup"><span data-stu-id="b61ee-125">Consider the guarantees for the return value, and any `out` or `ref` arguments upon the method's return.</span></span> <span data-ttu-id="b61ee-126">Następnie Przekaż te reguły do kompilatora, a kompilator dostarczy ostrzeżenia, gdy wywołujący nie przestrzegają tych reguł.</span><span class="sxs-lookup"><span data-stu-id="b61ee-126">Then communicate those rules to the compiler, and the compiler will provide warnings when callers don't abide by those rules.</span></span>

<span data-ttu-id="b61ee-127">To działanie jest czasochłonne.</span><span class="sxs-lookup"><span data-stu-id="b61ee-127">This work takes time.</span></span> <span data-ttu-id="b61ee-128">Zacznijmy od strategii, aby dowiedzieć się, jak Twoja biblioteka lub aplikacja doznała wartości null, a także zrównoważyć inne wymagania i elementy dostarczane.</span><span class="sxs-lookup"><span data-stu-id="b61ee-128">Let's start with strategies to make your library or application nullable-aware, while balancing other requirements and deliverables.</span></span> <span data-ttu-id="b61ee-129">Zobaczysz, jak zrównoważyć bieżące programowanie, włączając typy referencyjne dopuszczające wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-129">You'll see how to balance ongoing development enabling nullable reference types.</span></span> <span data-ttu-id="b61ee-130">Nauczysz się wyzwań dla definicji typów ogólnych.</span><span class="sxs-lookup"><span data-stu-id="b61ee-130">You'll learn challenges for generic type definitions.</span></span> <span data-ttu-id="b61ee-131">Dowiesz się, jak zastosować atrybuty do opisywania warunków wstępnych i postanowień dotyczących poszczególnych interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-131">You'll learn to apply attributes to describe pre- and post-conditions on individual APIs.</span></span>

## <a name="choose-a-nullable-strategy"></a><span data-ttu-id="b61ee-132">Wybierz strategię dopuszczającą wartość null</span><span class="sxs-lookup"><span data-stu-id="b61ee-132">Choose a nullable strategy</span></span>

<span data-ttu-id="b61ee-133">Pierwszy wybór polega na tym, czy typy odwołań dopuszczające wartość null mają być domyślnie włączone czy wyłączone.</span><span class="sxs-lookup"><span data-stu-id="b61ee-133">The first choice is whether nullable reference types should be on or off by default.</span></span> <span data-ttu-id="b61ee-134">Istnieją dwie strategie:</span><span class="sxs-lookup"><span data-stu-id="b61ee-134">You have two strategies:</span></span>

- <span data-ttu-id="b61ee-135">Włącz typy referencyjne dopuszczające wartość null dla całego projektu i wyłącz je w kodzie, który nie jest gotowy.</span><span class="sxs-lookup"><span data-stu-id="b61ee-135">Enable nullable reference types for the entire project, and disable it in code that's not ready.</span></span>
- <span data-ttu-id="b61ee-136">Włącz tylko typy referencyjne dopuszczające wartość null dla kodu, który jest oznaczony adnotacją dla typów referencyjnych dopuszczających wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-136">Only enable nullable reference types for code that's been annotated for nullable reference types.</span></span>

<span data-ttu-id="b61ee-137">Pierwsza strategia działa najlepiej, gdy dodajesz inne funkcje do biblioteki, gdy zaktualizujesz ją do typów referencyjnych dopuszczających wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-137">The first strategy works best when you're adding other features to the library as you update it for nullable reference types.</span></span> <span data-ttu-id="b61ee-138">Cały nowy projekt ma świadomość dopuszczający wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-138">All new development is nullable aware.</span></span> <span data-ttu-id="b61ee-139">Gdy aktualizujesz istniejący kod, włączasz typy odwołań do wartości null w tych klasach.</span><span class="sxs-lookup"><span data-stu-id="b61ee-139">As you update existing code, you enable nullable reference types in those classes.</span></span>

<span data-ttu-id="b61ee-140">Postępując zgodnie z pierwszą strategią, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="b61ee-140">Following this first strategy, you do the following:</span></span>

1. <span data-ttu-id="b61ee-141">Włącz Typy dopuszczające wartość null dla całego projektu przez `<Nullable>enable</Nullable>` dodanie elementu do plików *csproj* .</span><span class="sxs-lookup"><span data-stu-id="b61ee-141">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="b61ee-142">`#nullable disable` Dodaj pragmę do każdego pliku źródłowego w projekcie.</span><span class="sxs-lookup"><span data-stu-id="b61ee-142">Add the `#nullable disable` pragma to every source file in your project.</span></span> 
1. <span data-ttu-id="b61ee-143">Podczas pracy nad każdym plikiem Usuń pragmę i rozwiąż wszelkie ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="b61ee-143">As you work on each file, remove the pragma and address any warnings.</span></span>

<span data-ttu-id="b61ee-144">Ta pierwsza strategia ma więcej zadań z góry, aby dodać pragmę do każdego pliku.</span><span class="sxs-lookup"><span data-stu-id="b61ee-144">This first strategy has more up-front work to add the pragma to every file.</span></span> <span data-ttu-id="b61ee-145">Korzyść polega na tym, że każdy nowy plik kodu dodany do projektu będzie miał włączoną wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-145">The advantage is that every new code file added to the project will be nullable enabled.</span></span> <span data-ttu-id="b61ee-146">Każda nowa służbowa będzie mieć świadomość wartości null; należy zaktualizować tylko istniejący kod.</span><span class="sxs-lookup"><span data-stu-id="b61ee-146">Any new work will be nullable aware; only existing code must be updated.</span></span>

<span data-ttu-id="b61ee-147">Druga strategia działa lepiej, jeśli biblioteka jest ogólnie stabilna, a głównym celem rozwoju jest przyjęcie typów referencyjnych dopuszczających wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-147">The second strategy works better if the library is generally stable, and the main focus of the development is to adopt nullable reference types.</span></span> <span data-ttu-id="b61ee-148">W przypadku dodawania adnotacji do interfejsów API należy włączyć typy odwołań do wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-148">You turn on nullable reference types as you annotate APIs.</span></span> <span data-ttu-id="b61ee-149">Po zakończeniu włączać dla całego projektu typy referencyjne dopuszczające wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-149">When you've finished, you enable nullable reference types for the entire project.</span></span>

<span data-ttu-id="b61ee-150">Postępując zgodnie z tą drugą strategią, należy wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="b61ee-150">Following this second strategy you do the following:</span></span>

1. <span data-ttu-id="b61ee-151">`#nullable enable` Dodaj pragmę do pliku, dla którego chcesz wprowadzić wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-151">Add the `#nullable enable` pragma to the file you want to make nullable aware.</span></span>
1. <span data-ttu-id="b61ee-152">Rozwiązywanie wszelkich ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="b61ee-152">Address any warnings.</span></span>
1. <span data-ttu-id="b61ee-153">Wykonaj te dwa pierwsze kroki, dopóki cała biblioteka nie doznała wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-153">Continue these first two steps until you've made the entire library nullable aware.</span></span>
1. <span data-ttu-id="b61ee-154">Włącz Typy dopuszczające wartość null dla całego projektu przez `<Nullable>enable</Nullable>` dodanie elementu do plików *csproj* .</span><span class="sxs-lookup"><span data-stu-id="b61ee-154">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span> 
1. <span data-ttu-id="b61ee-155">`#nullable enable` Usuń dyrektywy pragma, ponieważ nie są już potrzebne.</span><span class="sxs-lookup"><span data-stu-id="b61ee-155">Remove the `#nullable enable` pragmas, as they're no longer needed.</span></span>

<span data-ttu-id="b61ee-156">Ta druga strategia ma mniej pracy z góry.</span><span class="sxs-lookup"><span data-stu-id="b61ee-156">This second strategy has less work up-front.</span></span> <span data-ttu-id="b61ee-157">Wadą jest to, że pierwsze zadanie podczas tworzenia nowego pliku to dodanie dyrektywy pragma i przekazanie jej do wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-157">The tradeoff is that the first task when you create a new file is to add the pragma and make it nullable aware.</span></span> <span data-ttu-id="b61ee-158">Jeśli wszyscy deweloperzy w zespole zapomnili, nowy kod jest teraz w zaległości prac, aby umożliwić sobie dopełnienie kodu do wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-158">If any developers on your team forget, that new code is now in the backlog of work to make all code nullable aware.</span></span>

<span data-ttu-id="b61ee-159">Które z tych strategii są wybierane, zależy od tego, jak dużo aktywnego programowania odbywa się w projekcie.</span><span class="sxs-lookup"><span data-stu-id="b61ee-159">Which of these strategies you pick depends on how much active development is taking place in your project.</span></span> <span data-ttu-id="b61ee-160">Im bardziej dojrzały i stabilny projekt, tym lepiej druga strategia.</span><span class="sxs-lookup"><span data-stu-id="b61ee-160">The more mature and stable your project, the better the second strategy.</span></span> <span data-ttu-id="b61ee-161">Im więcej funkcji jest opracowywanych, tym lepsza jest pierwsza strategia.</span><span class="sxs-lookup"><span data-stu-id="b61ee-161">The more features being developed, the better the first strategy.</span></span>

## <a name="should-nullable-warnings-introduce-breaking-changes"></a><span data-ttu-id="b61ee-162">Czy ostrzeżenia o wartościach null wprowadzają istotne zmiany?</span><span class="sxs-lookup"><span data-stu-id="b61ee-162">Should nullable warnings introduce breaking changes?</span></span>

<span data-ttu-id="b61ee-163">Przed włączeniem typów referencyjnych dopuszczających wartości null, zmienne są uznawane za *Oblivious dopuszczające wartość null*.</span><span class="sxs-lookup"><span data-stu-id="b61ee-163">Before you enable nullable reference types, variables are considered *nullable oblivious*.</span></span> <span data-ttu-id="b61ee-164">Po włączeniu typów referencyjnych dopuszczających wartości null wszystkie te zmienne *nie dopuszczają wartości null*.</span><span class="sxs-lookup"><span data-stu-id="b61ee-164">Once you enable nullable reference types, all those variables are *non-nullable*.</span></span> <span data-ttu-id="b61ee-165">Kompilator będzie wystawiał ostrzeżenia, jeśli te zmienne nie są zainicjowane do wartości innych niż null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-165">The compiler will issue warnings if those variables aren't initialized to non-null values.</span></span>

<span data-ttu-id="b61ee-166">Inne prawdopodobnie Źródło ostrzeżeń ma zwracane wartości, gdy wartość nie została zainicjowana.</span><span class="sxs-lookup"><span data-stu-id="b61ee-166">Another likely source of warnings is return values when the value hasn't been initialized.</span></span>

<span data-ttu-id="b61ee-167">Pierwszym krokiem w rozwiązywaniu ostrzeżeń kompilatora jest użycie `?` adnotacji dla parametrów i zwracanych typów, aby wskazać, kiedy argumenty lub wartości zwracane mogą mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-167">The first step in addressing the compiler warnings is to use `?` annotations on parameter and return types to indicate when arguments or return values may be null.</span></span> <span data-ttu-id="b61ee-168">Gdy zmienne odwołania nie mogą mieć wartości null, oryginalna deklaracja jest poprawna.</span><span class="sxs-lookup"><span data-stu-id="b61ee-168">When reference variables must not be null, the original declaration is correct.</span></span> <span data-ttu-id="b61ee-169">W takim przypadku cel nie tylko naprawi ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="b61ee-169">As you do this, your goal isn't just to fix warnings.</span></span> <span data-ttu-id="b61ee-170">Im bardziej istotny jest sposób, aby kompilator mógł zrozumieć zamiar dla potencjalnych wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-170">The more important goal is to make the compiler understand your intent for potential null values.</span></span> <span data-ttu-id="b61ee-171">Podczas badania ostrzeżeń możesz przejść do następnej głównej decyzji dotyczącej biblioteki.</span><span class="sxs-lookup"><span data-stu-id="b61ee-171">As you examine the warnings, you reach your next major decision for your library.</span></span> <span data-ttu-id="b61ee-172">Czy chcesz rozważyć modyfikowanie sygnatur interfejsów API, aby dokładniej komunikować swój projekt?</span><span class="sxs-lookup"><span data-stu-id="b61ee-172">Do you want to consider modifying API signatures to more clearly communicate your design intent?</span></span> <span data-ttu-id="b61ee-173">Lepszym podpisem interfejsu API `TryGetMessage` dla metody analizowanej wcześniej mogą być:</span><span class="sxs-lookup"><span data-stu-id="b61ee-173">A better API signature for the `TryGetMessage` method examined earlier could be:</span></span>


```csharp
string? TryGetMessage(string key);
```

<span data-ttu-id="b61ee-174">Wartość zwracana wskazuje powodzenie lub niepowodzenie i przenosi wartość w przypadku znalezienia wartości.</span><span class="sxs-lookup"><span data-stu-id="b61ee-174">The return value indicates success or failure, and carries the value if the value was found.</span></span> <span data-ttu-id="b61ee-175">W wielu przypadkach zmiana sygnatur interfejsów API może poprawić sposób, w jaki komunikują się wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-175">In many cases, changing API signatures can improve how they communicate null values.</span></span>

<span data-ttu-id="b61ee-176">Jednak w przypadku bibliotek publicznych lub bibliotek z dużymi bazami użytkowników można preferować nie wprowadzać żadnych zmian sygnatury interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-176">However, for public libraries, or libraries with large user bases, you may prefer not introducing any API signature changes.</span></span> <span data-ttu-id="b61ee-177">W tych przypadkach i innych wspólnych wzorców można zastosować atrybuty, aby dokładniej zdefiniować, kiedy może być `null`argument lub wartość zwracana.</span><span class="sxs-lookup"><span data-stu-id="b61ee-177">For those cases, and other common patterns, you can apply attributes to more clearly define when an argument or return value may be `null`.</span></span> <span data-ttu-id="b61ee-178">Bez względu na to, czy można zmienić powierzchnię interfejsu API, prawdopodobnie okaże się, że tylko adnotacje typu nie są `null` wystarczające do opisywania wartości argumentów lub zwracanych wartości.</span><span class="sxs-lookup"><span data-stu-id="b61ee-178">Whether or not you consider changing the surface of your API, you'll likely find that type annotations alone aren't sufficient for describing `null` values for arguments or return values.</span></span> <span data-ttu-id="b61ee-179">W tych przypadkach można zastosować atrybuty, aby dokładniej opisać interfejs API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-179">In those instances, you can apply attributes to more clearly describe an API.</span></span> 

## <a name="attributes-extend-type-annotations"></a><span data-ttu-id="b61ee-180">Atrybuty rozszerzonego typu</span><span class="sxs-lookup"><span data-stu-id="b61ee-180">Attributes extend type annotations</span></span>

<span data-ttu-id="b61ee-181">Dodano kilka atrybutów w celu wyrażenia dodatkowych informacji o stanie null zmiennych.</span><span class="sxs-lookup"><span data-stu-id="b61ee-181">Several attributes have been added to express additional information about the null state of variables.</span></span> <span data-ttu-id="b61ee-182">Wszystkie kod, który zapisano C# przed 8 wprowadzonymi typami odwołań dopuszczających wartości null, miał *wartość null Oblivious*.</span><span class="sxs-lookup"><span data-stu-id="b61ee-182">All code you wrote before C# 8 introduced nullable reference types was *null oblivious*.</span></span> <span data-ttu-id="b61ee-183">Oznacza to, że jakakolwiek zmienna typu referencyjnego może mieć wartość null, ale sprawdzanie wartości null nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="b61ee-183">That means any reference type variable may be null, but null checks aren't required.</span></span> <span data-ttu-id="b61ee-184">Gdy kod *dopuszcza wartość null*, te reguły zostaną zmienione.</span><span class="sxs-lookup"><span data-stu-id="b61ee-184">Once your code is *nullable aware*, those rules change.</span></span> <span data-ttu-id="b61ee-185">Typy odwołań nigdy nie powinny być `null` wartościami, a typy referencyjne dopuszczające wartość null `null` muszą zostać sprawdzone przed usunięciem odwołania.</span><span class="sxs-lookup"><span data-stu-id="b61ee-185">Reference types should never be the `null` value, and nullable reference types must be checked against `null` before being dereferenced.</span></span>

<span data-ttu-id="b61ee-186">Reguły interfejsów API mogą być `TryGetValue` bardziej skomplikowane, jak pokazano w scenariuszu interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-186">The rules for your APIs are likely more complicated, as you saw with the `TryGetValue` API scenario.</span></span> <span data-ttu-id="b61ee-187">Wiele interfejsów API ma bardziej złożone reguły dla sytuacji, gdy zmienne mogą być `null`lub niemożliwe.</span><span class="sxs-lookup"><span data-stu-id="b61ee-187">Many of your APIs have more complex rules for when variables can or can't be `null`.</span></span> <span data-ttu-id="b61ee-188">W takich przypadkach użyjesz jednego z następujących atrybutów, aby przedstawić te reguły:</span><span class="sxs-lookup"><span data-stu-id="b61ee-188">In these cases, you'll use one of the following attributes to express those rules:</span></span>

- <span data-ttu-id="b61ee-189">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Niedopuszczający wartości null argument wejściowy może mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-189">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="b61ee-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Argument wejściowy dopuszczający wartość null nigdy nie powinien mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-190">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="b61ee-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Wartość zwracana niedopuszczający wartości null może być zerowa.</span><span class="sxs-lookup"><span data-stu-id="b61ee-191">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="b61ee-192">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Wartość zwracana do wartości null nigdy nie będzie równa null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-192">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="b61ee-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Argument, który nie `out` dopuszcza `ref` wartości null lub, może mieć wartość null, gdy wartość zwracana spełnia warunek.</span><span class="sxs-lookup"><span data-stu-id="b61ee-193">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="b61ee-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Wartość dopuszczająca `out` wartość null lub `ref` argument nie może mieć wartości null, jeśli zwracaną wartością jest warunek.</span><span class="sxs-lookup"><span data-stu-id="b61ee-194">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="b61ee-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Wartość zwracana nie ma wartości null, jeśli argument wejściowy dla określonego parametru nie ma wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-195">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

<span data-ttu-id="b61ee-196">Powyższe opisy stanowią krótkie informacje o tym, co robi każdy atrybut.</span><span class="sxs-lookup"><span data-stu-id="b61ee-196">The preceding descriptions are a quick reference to what each attribute does.</span></span> <span data-ttu-id="b61ee-197">W poniższych sekcjach opisano zachowanie i ich znaczenie.</span><span class="sxs-lookup"><span data-stu-id="b61ee-197">Each following section describes the behavior and meaning more thoroughly.</span></span>

<span data-ttu-id="b61ee-198">Dodanie tych atrybutów zapewnia kompilatorowi więcej informacji na temat reguł dla interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-198">Adding these attributes gives the compiler more information about the rules for your API.</span></span> <span data-ttu-id="b61ee-199">Gdy Wywoływanie kodu jest kompilowane w kontekście włączonego wartości null, kompilator ostrzega wywoływania, gdy narusza te reguły.</span><span class="sxs-lookup"><span data-stu-id="b61ee-199">When calling code is compiled in a nullable enabled context, the compiler will warn callers when they violate those rules.</span></span> <span data-ttu-id="b61ee-200">Te atrybuty nie umożliwiają wykonywania dodatkowych operacji sprawdzania w implementacji.</span><span class="sxs-lookup"><span data-stu-id="b61ee-200">These attributes don't enable additional checks on your implementation.</span></span>

## <a name="specify-preconditions-allownull-and-disallownull"></a><span data-ttu-id="b61ee-201">Określ warunki wstępne: `AllowNull` i`DisallowNull`</span><span class="sxs-lookup"><span data-stu-id="b61ee-201">Specify preconditions: `AllowNull` and `DisallowNull`</span></span>

<span data-ttu-id="b61ee-202">Rozważ użycie właściwości do odczytu/zapisu, która `null` nigdy nie zwraca, ponieważ ma ona rozsądną wartość domyślną.</span><span class="sxs-lookup"><span data-stu-id="b61ee-202">Consider a read/write property that never returns `null` because it has a reasonable default value.</span></span> <span data-ttu-id="b61ee-203">Obiekty wywołujące `null` przejdą do zestawu metod dostępu podczas ustawiania tej wartości domyślnej.</span><span class="sxs-lookup"><span data-stu-id="b61ee-203">Callers pass `null` to the set accessor when setting it to that default value.</span></span> <span data-ttu-id="b61ee-204">Rozważmy na przykład system obsługi komunikatów, który prosi o podanie nazwy ekranu w pokoju rozmowy.</span><span class="sxs-lookup"><span data-stu-id="b61ee-204">For example, consider a messaging system that asks for a screen name in a chat room.</span></span> <span data-ttu-id="b61ee-205">Jeśli żaden nie jest podany, system generuje nazwę losową:</span><span class="sxs-lookup"><span data-stu-id="b61ee-205">If none is provided, the system generates a random name:</span></span>

```csharp
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName;
```

<span data-ttu-id="b61ee-206">Gdy kompilujesz poprzedni kod w kontekście dopuszczającym wartość null, wszystko jest bardzo precyzyjne.</span><span class="sxs-lookup"><span data-stu-id="b61ee-206">When you compile the preceding code in a nullable oblivious context, everything is fine.</span></span> <span data-ttu-id="b61ee-207">Po włączeniu typów referencyjnych dopuszczających wartość `ScreenName` null, właściwość ta będzie odwołaniem niedopuszczanym do wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-207">Once you enable nullable reference types, the `ScreenName` property becomes a non-nullable reference.</span></span> <span data-ttu-id="b61ee-208">Jest to poprawne dla `get` metody dostępu: nigdy nie zwraca. `null`</span><span class="sxs-lookup"><span data-stu-id="b61ee-208">That's correct for the `get` accessor: it never returns `null`.</span></span> <span data-ttu-id="b61ee-209">Obiekty wywołujące nie muszą sprawdzać zwracanej właściwości `null`dla elementu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-209">Callers don't need to check the returned property for `null`.</span></span> <span data-ttu-id="b61ee-210">Ale teraz ustawienie właściwości w celu `null` wygenerowania ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="b61ee-210">But now setting the property to `null` generates a warning.</span></span> <span data-ttu-id="b61ee-211">Aby kontynuować obsługę tego typu kodu, Dodaj <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> atrybut do właściwości, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="b61ee-211">In order to continue to support this type of code, you add the <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> attribute to the property, as shown in the following code:</span></span> 

```csharp
[AllowNull]
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName = GenerateRandomScreenName();
```

<span data-ttu-id="b61ee-212">Może być konieczne dodanie `using` <xref:System.Diagnostics.CodeAnalysis> dyrektywy do programu w celu użycia tego i innych atrybutów omówionych w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="b61ee-212">You may need to add a `using` directive for <xref:System.Diagnostics.CodeAnalysis> to use this and other attributes discussed in this article.</span></span> <span data-ttu-id="b61ee-213">Ten atrybut jest stosowany do właściwości, a nie do `set` metody dostępu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-213">The attribute is applied to the property, not the `set` accessor.</span></span> <span data-ttu-id="b61ee-214">Atrybut określa *warunki wstępne*i ma zastosowanie tylko do danych wejściowych. `AllowNull`</span><span class="sxs-lookup"><span data-stu-id="b61ee-214">The `AllowNull` attribute specifies *pre-conditions*, and only applies to inputs.</span></span> <span data-ttu-id="b61ee-215">`get` Metoda dostępu ma wartość zwracaną, ale nie ma argumentów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="b61ee-215">The `get` accessor has a return value, but no input arguments.</span></span> <span data-ttu-id="b61ee-216">W związku z tym `set` atrybutmazastosowanietylkodometodydostępu.`AllowNull`</span><span class="sxs-lookup"><span data-stu-id="b61ee-216">Therefore, the `AllowNull` attribute only applies to the `set` accessor.</span></span>

<span data-ttu-id="b61ee-217">W poprzednim przykładzie pokazano, co należy szukać podczas dodawania `AllowNull` atrybutu do argumentu:</span><span class="sxs-lookup"><span data-stu-id="b61ee-217">The preceding example demonstrates what to look for when adding the `AllowNull` attribute on an argument:</span></span>

1. <span data-ttu-id="b61ee-218">Ogólną umową dla tej zmiennej jest to, że nie `null`powinna ona być, więc potrzebujesz typu referencyjnego, który nie dopuszcza wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-218">The general contract for that variable is that it shouldn't be `null`, so you want a non-nullable reference type.</span></span>
1. <span data-ttu-id="b61ee-219">Istnieją scenariusze dla zmiennej `null`wejściowej, chociaż nie są one najczęstszym użyciem.</span><span class="sxs-lookup"><span data-stu-id="b61ee-219">There are scenarios for the input variable to be `null`, though they aren't the most common usage.</span></span>

<span data-ttu-id="b61ee-220">Najczęściej ten atrybut jest potrzebny dla właściwości, `in` `out`, i `ref` argumentów.</span><span class="sxs-lookup"><span data-stu-id="b61ee-220">Most often you'll need this attribute for properties, or `in`, `out`, and `ref` arguments.</span></span> <span data-ttu-id="b61ee-221">Ten `AllowNull` atrybut jest najlepszym wyborem, gdy zmienna jest zwykle inna niż null, ale musisz zezwolić `null` jako warunek wstępny.</span><span class="sxs-lookup"><span data-stu-id="b61ee-221">The `AllowNull` attribute is the best choice when a variable is typically non-null, but you need to allow `null` as a precondition.</span></span>

<span data-ttu-id="b61ee-222">Przeciwieństwo do użycia `DisallowNull`: Ten atrybut służy do określenia, że zmienna wejściowa typu dopuszczającego wartość null `null`nie powinna być.</span><span class="sxs-lookup"><span data-stu-id="b61ee-222">Contrast that with scenarios for using `DisallowNull`: You use this attribute to specify that an input variable of a nullable type shouldn't be `null`.</span></span> <span data-ttu-id="b61ee-223">Rozważmy właściwość, `null` gdzie jest wartością domyślną, ale klienci mogą ustawić ją tylko na wartość różną od null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-223">Consider a property where `null` is the default value, but clients can only set it to a non-null value.</span></span> <span data-ttu-id="b61ee-224">Rozważmy następujący kod:</span><span class="sxs-lookup"><span data-stu-id="b61ee-224">Consider the following code:</span></span>

```csharp
public string ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string _comment;
```

<span data-ttu-id="b61ee-225">Poprzedni kod jest najlepszym sposobem, aby wyrazić projekt, który `ReviewComment` może być `null`, ale nie może być ustawiony na `null`.</span><span class="sxs-lookup"><span data-stu-id="b61ee-225">The preceding code is the best way to express your design that the `ReviewComment` could be `null`, but can't be set to `null`.</span></span> <span data-ttu-id="b61ee-226">Gdy ten kod dopuszcza wartość null, można jawnie wyrazić takie koncepcje dla wywołujących przy użyciu <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>:</span><span class="sxs-lookup"><span data-stu-id="b61ee-226">Once this code is nullable aware, you can express this concept more clearly to callers using the <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>:</span></span>

```csharp
[DisallowNull] 
public string? ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string? _comment;
```

<span data-ttu-id="b61ee-227">W kontekście `ReviewComment` `null`dopuszczającym wartość null metodadostępumożezwrócićwartośćdomyślną.`get`</span><span class="sxs-lookup"><span data-stu-id="b61ee-227">In a nullable context, the `ReviewComment` `get` accessor could return the default value of `null`.</span></span> <span data-ttu-id="b61ee-228">Kompilator ostrzega o tym, że musi zostać sprawdzony przed dostępem.</span><span class="sxs-lookup"><span data-stu-id="b61ee-228">The compiler warns that it must be checked before access.</span></span> <span data-ttu-id="b61ee-229">Ponadto ostrzega wywołujących, że mimo że może się `null`to zdarzyć, obiekty wywołujące nie powinny jawnie ustawiać. `null`</span><span class="sxs-lookup"><span data-stu-id="b61ee-229">Furthermore, it warns callers that, even though it could be `null`, callers shouldn't explicitly set it to `null`.</span></span> <span data-ttu-id="b61ee-230">Atrybut określa również *warunek wstępny*, nie ma wpływu na `get` metodę dostępu. `DisallowNull`</span><span class="sxs-lookup"><span data-stu-id="b61ee-230">The `DisallowNull` attribute also specifies a *pre-condition*, it does not affect the `get` accessor.</span></span> <span data-ttu-id="b61ee-231">Należy wybrać, `DisallowNull` aby użyć atrybutu podczas przestrzegania następujących cech:</span><span class="sxs-lookup"><span data-stu-id="b61ee-231">You should choose to use the `DisallowNull` attribute when you observe these characteristics about:</span></span>

1. <span data-ttu-id="b61ee-232">Zmienna może być `null` w scenariuszach podstawowych, często podczas pierwszego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="b61ee-232">The variable could be `null` in core scenarios, often when first instantiated.</span></span>
1. <span data-ttu-id="b61ee-233">Zmienna nie powinna być jawnie ustawiona na `null`wartość.</span><span class="sxs-lookup"><span data-stu-id="b61ee-233">The variable shouldn't be explicitly set to `null`.</span></span>

<span data-ttu-id="b61ee-234">Te sytuacje często występują w kodzie, który pierwotnie miał *wartość null Oblivious*.</span><span class="sxs-lookup"><span data-stu-id="b61ee-234">These situations are common in code that was originally *null oblivious*.</span></span> <span data-ttu-id="b61ee-235">Może być to, że właściwości obiektu są ustawiane w dwóch odrębnych operacjach inicjalizacji.</span><span class="sxs-lookup"><span data-stu-id="b61ee-235">It may be that object properties are set in two distinct initialization operations.</span></span> <span data-ttu-id="b61ee-236">Niektóre właściwości mogą być ustawione tylko po zakończeniu pewnej asynchronicznej pracy.</span><span class="sxs-lookup"><span data-stu-id="b61ee-236">It may be that some properties are set only after some asynchronous work has completed.</span></span>

<span data-ttu-id="b61ee-237">Atrybuty `AllowNull` i`DisallowNull` umożliwiają określenie, że warunki wstępne dla zmiennych mogą nie pasować do adnotacji dopuszczających wartości null w tych zmiennych.</span><span class="sxs-lookup"><span data-stu-id="b61ee-237">The `AllowNull` and `DisallowNull` attributes enable you to specify that preconditions on variables may not match the nullable annotations on those variables.</span></span> <span data-ttu-id="b61ee-238">Zapewniają one więcej szczegółowych informacji o cechach interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-238">These provide more detail about the characteristics of your API.</span></span> <span data-ttu-id="b61ee-239">Te dodatkowe informacje ułatwiają wywoływanie interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b61ee-239">This additional information helps callers use your API correctly.</span></span> <span data-ttu-id="b61ee-240">Należy pamiętać o określeniu warunków wstępnych przy użyciu następujących atrybutów:</span><span class="sxs-lookup"><span data-stu-id="b61ee-240">Remember you specify preconditions using the following attributes:</span></span>

- <span data-ttu-id="b61ee-241">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Niedopuszczający wartości null argument wejściowy może mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-241">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="b61ee-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Argument wejściowy dopuszczający wartość null nigdy nie powinien mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-242">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>

## <a name="specify-post-conditions-maybenull-and-notnull"></a><span data-ttu-id="b61ee-243">Określ warunki końcowe: `MaybeNull` i`NotNull`</span><span class="sxs-lookup"><span data-stu-id="b61ee-243">Specify post-conditions: `MaybeNull` and `NotNull`</span></span>

<span data-ttu-id="b61ee-244">Załóżmy, że masz metodę o następującej sygnaturze:</span><span class="sxs-lookup"><span data-stu-id="b61ee-244">Suppose you have a method with the following signature:</span></span>

```csharp
public Customer FindCustomer(string lastName, string firstName)
```

<span data-ttu-id="b61ee-245">Prawdopodobnie Zapisano metodę podobną do tej, aby zwracała `null` się, gdy nie znaleziono nazwy.</span><span class="sxs-lookup"><span data-stu-id="b61ee-245">You've likely written a method like this to return `null` when the name sought wasn't found.</span></span> <span data-ttu-id="b61ee-246">`null` Jasno wskazuje, że rekord nie został znaleziony.</span><span class="sxs-lookup"><span data-stu-id="b61ee-246">The `null` clearly indicates that the record wasn't found.</span></span> <span data-ttu-id="b61ee-247">W tym przykładzie można zmienić typ zwracany z `Customer` na. `Customer?`</span><span class="sxs-lookup"><span data-stu-id="b61ee-247">In this example, you'd likely change the return type from `Customer` to `Customer?`.</span></span> <span data-ttu-id="b61ee-248">Deklarowanie wartości zwracanej jako typ referencyjny dopuszczający wartość null Określa zamiar tego interfejsu API jasno.</span><span class="sxs-lookup"><span data-stu-id="b61ee-248">Declaring the return value as a nullable reference type specifies the intent of this API clearly.</span></span> 

<span data-ttu-id="b61ee-249">Z przyczyn objętych [definicjami ogólnymi i wartością null](#generic-definitions-and-nullability) ta technika nie działa z metodami ogólnymi.</span><span class="sxs-lookup"><span data-stu-id="b61ee-249">For reasons covered under [Generic definitions and nullability](#generic-definitions-and-nullability) that technique does not work with generic methods.</span></span> <span data-ttu-id="b61ee-250">Może istnieć Metoda ogólna, która następuje po podobnym wzorcu:</span><span class="sxs-lookup"><span data-stu-id="b61ee-250">You may have a generic method that follows a similar pattern:</span></span>

```csharp
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="b61ee-251">Nie można określić, że wartość zwracana to `T?`.</span><span class="sxs-lookup"><span data-stu-id="b61ee-251">You can't specify that the return value is `T?`.</span></span> <span data-ttu-id="b61ee-252">Metoda zwraca `null` , gdy nie znaleziono szukanego elementu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-252">The method returns `null` when the sought item isn't found.</span></span> <span data-ttu-id="b61ee-253">Ponieważ nie można zadeklarować `T?` zwracanego typu, należy `MaybeNull` dodać adnotację do zwracanej metody:</span><span class="sxs-lookup"><span data-stu-id="b61ee-253">Since you can't declare a `T?` return type, you add the `MaybeNull` annotation to the method return:</span></span>

```csharp
[return: MaybeNull]
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="b61ee-254">Poprzedni kod informuje wywołujących, że kontrakt implikuje typ niedopuszczający wartości null, ale zwracana wartość *może* być równa null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-254">The preceding code informs callers that the contract implies a non-nullable type, but the return value *may* actually be null.</span></span>  <span data-ttu-id="b61ee-255">Użyj atrybutu, gdy interfejs API powinien być typu niedopuszczający wartości null, zazwyczaj parametru typu ogólnego, ale mogą występować wystąpienia, w `null` których zostałyby zwrócone. `MaybeNull`</span><span class="sxs-lookup"><span data-stu-id="b61ee-255">Use the `MaybeNull` attribute when your API should be a non-nullable type, typically a generic type parameter, but there may be instances where `null` would be returned.</span></span>

<span data-ttu-id="b61ee-256">Można również określić, że wartość zwracana lub `out` argument or `ref` nie mają wartości null, mimo że typ jest typem dopuszczającym wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-256">You can also specify that a return value or an `out` or `ref` argument isn't null even though the type is a nullable type.</span></span> <span data-ttu-id="b61ee-257">Rozważmy metodę, która zapewnia, że tablica jest wystarczająco duża, aby pomieścić liczbę elementów.</span><span class="sxs-lookup"><span data-stu-id="b61ee-257">Consider a method that ensures an array is large enough to hold a number of elements.</span></span> <span data-ttu-id="b61ee-258">Jeśli argument wejściowy nie ma pojemności, procedura przydzieli nową tablicę i skopiuje do niej wszystkie istniejące elementy.</span><span class="sxs-lookup"><span data-stu-id="b61ee-258">If the input argument doesn't have capacity, the routine would allocate a new array and copy all the existing elements into it.</span></span> <span data-ttu-id="b61ee-259">Jeśli argumentem wejściowym `null`jest, procedura przydzieli nowy magazyn.</span><span class="sxs-lookup"><span data-stu-id="b61ee-259">If the input argument is `null`, the routine would allocate new storage.</span></span> <span data-ttu-id="b61ee-260">W przypadku wystarczającej pojemności procedura nie wykonuje żadnych czynności:</span><span class="sxs-lookup"><span data-stu-id="b61ee-260">If there's sufficient capacity, the routine does nothing:</span></span>

```csharp
public void EnsureCapacity<T>(ref T[] storage, int size)
```

<span data-ttu-id="b61ee-261">Tę procedurę można wywołać w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="b61ee-261">You could call this routine as follows:</span></span>

```csharp
// messages has the default value (null) when EnsureCapacity is called:
EnsureCapacity<string>(ref messages, 10);
// messages is not null.
EnsureCapacity<string>(messages, 50);
```

<span data-ttu-id="b61ee-262">Po włączeniu typów odwołań o wartości null, należy upewnić się, że poprzedni kod kompiluje bez ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="b61ee-262">After enabling null reference types, you want to ensure that the preceding code compiles without warnings.</span></span> <span data-ttu-id="b61ee-263">Gdy metoda zwraca, `storage` argument ma gwarantowaną wartość nie równą null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-263">When the method returns, the `storage` argument is guaranteed to be not null.</span></span> <span data-ttu-id="b61ee-264">Jednak jest to możliwe do wywołania `EnsureCapacity` z odwołaniem o wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-264">However, it's acceptable to call `EnsureCapacity` with a null reference.</span></span> <span data-ttu-id="b61ee-265">Można wprowadzić `storage` typ referencyjny dopuszczający wartość null i `NotNull` dodać warunek post do deklaracji parametru:</span><span class="sxs-lookup"><span data-stu-id="b61ee-265">You can make `storage` a nullable reference type, and add the `NotNull` post-condition to the parameter declaration:</span></span>

```csharp
public void EnsureCapacity<T>([NotNull]ref T[]? storage, int size)
```

<span data-ttu-id="b61ee-266">Powyższy kod odzwierciedla istniejący kontrakt bardzo jasno: Obiekty wywołujące mogą przekazać zmienną o `null` wartości, ale wartość zwracana jest gwarantowana, aby nigdy nie była równa null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-266">The preceding code expresses the existing contract very clearly: Callers can pass a variable with the `null` value, but the return value is guaranteed to never be null.</span></span> <span data-ttu-id="b61ee-267">Ten `NotNull` atrybut jest najbardziej przydatny `ref` dla `out` argumentów i `null` , gdzie mogą być przekazane jako argument, ale ten argument jest gwarantowany, że nie ma wartości null, gdy metoda zwraca.</span><span class="sxs-lookup"><span data-stu-id="b61ee-267">The `NotNull` attribute is most useful for `ref` and `out` arguments where `null` may be passed as an argument, but that argument is guaranteed to be not null when the method returns.</span></span>

<span data-ttu-id="b61ee-268">Należy określić warunki końcowe bezwarunkowe, korzystając z następujących atrybutów:</span><span class="sxs-lookup"><span data-stu-id="b61ee-268">You specify unconditional postconditions using the following attributes:</span></span>

- <span data-ttu-id="b61ee-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Wartość zwracana niedopuszczający wartości null może być zerowa.</span><span class="sxs-lookup"><span data-stu-id="b61ee-269">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="b61ee-270">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Wartość zwracana do wartości null nigdy nie będzie równa null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-270">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>

## <a name="specify-conditional-post-conditions-notnullwhen-and-maybenullwhen"></a><span data-ttu-id="b61ee-271">Określ warunkowe warunki końcowe: `NotNullWhen` i`MaybeNullWhen`</span><span class="sxs-lookup"><span data-stu-id="b61ee-271">Specify conditional post-conditions: `NotNullWhen` and `MaybeNullWhen`</span></span>

<span data-ttu-id="b61ee-272">Najkorzystniej znasz `string` metodę <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b61ee-272">You're likely familiar with the `string` method <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span></span> <span data-ttu-id="b61ee-273">Ta metoda zwraca `true` , gdy argument nie ma wartości null i nie jest pustym ciągiem.</span><span class="sxs-lookup"><span data-stu-id="b61ee-273">This method returns `true` when the argument isn't null, and not the empty string.</span></span> <span data-ttu-id="b61ee-274">Jest to forma sprawdzenia wartości null: Obiekty wywołujące nie muszą mieć wartości null — Sprawdź argument, jeśli metoda `false`zwraca wartość.</span><span class="sxs-lookup"><span data-stu-id="b61ee-274">It is a form of null-check: Callers don't need to null-check the argument if the method returns `false`.</span></span> <span data-ttu-id="b61ee-275">Aby zapewnić metodę, taką jak ta, która dopuszcza wartość null, należy ustawić argument na typ dopuszczający wartość null `NotNullWhen` i dodać atrybut:</span><span class="sxs-lookup"><span data-stu-id="b61ee-275">To make a method like this nullable aware, you'd set the argument to a nullable type, and add the `NotNullWhen` attribute:</span></span>

```csharp
bool IsNullOrEmpty([NotNullWhen(false)]string? value);
```

<span data-ttu-id="b61ee-276">Informuje kompilator, że żaden kod, w którym nie jest `false` wymagana wartość zwracana, nie może mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-276">That informs the compiler that any code where the return value is `false` need not be null-checked.</span></span> <span data-ttu-id="b61ee-277">Dodanie atrybutu informuje analizę statyczną kompilatora, która `IsNullOrEmpty` wykonuje niezbędne sprawdzanie wartości null: gdy zwraca `false`, argument wejściowy nie `null`jest.</span><span class="sxs-lookup"><span data-stu-id="b61ee-277">The addition of the attribute informs the compiler's static analysis that `IsNullOrEmpty` performs the necessary null check: when it returns `false`, the input argument is not `null`.</span></span>

```csharp
string? userInput = GetUserInput();
if (!(string.IsNullOrEmpty(userInput))
{
   int messageLength = userInput.Length; // no null check needed.
}
// null check needed on userInput here.
```

<span data-ttu-id="b61ee-278"><xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> Metoda zostanie umieszczona w adnotacji, jak pokazano powyżej dla programu .NET Core 3,0.</span><span class="sxs-lookup"><span data-stu-id="b61ee-278">The <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> method will be annotated as shown above for .NET Core 3.0.</span></span> <span data-ttu-id="b61ee-279">W bazie kodu mogą znajdować się podobne metody, które sprawdzają stan obiektów dla wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-279">You may have similar methods in your codebase that check the state of objects for null values.</span></span> <span data-ttu-id="b61ee-280">Kompilator nie rozpoznaje niestandardowych metod sprawdzania wartości null i należy samodzielnie dodać adnotacje.</span><span class="sxs-lookup"><span data-stu-id="b61ee-280">The compiler won't recognize custom null check methods, and you'll need to add the annotations yourself.</span></span> <span data-ttu-id="b61ee-281">Po dodaniu atrybutu analiza statyczna kompilatora wie, kiedy sprawdzona zmienna ma wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-281">When you add the attribute, the compiler's static analysis knows when the tested variable has been null checked.</span></span>

<span data-ttu-id="b61ee-282">Innym zastosowaniem dla tych atrybutów jest `Try*` wzorzec.</span><span class="sxs-lookup"><span data-stu-id="b61ee-282">Another use for these attributes is the `Try*` pattern.</span></span> <span data-ttu-id="b61ee-283">Warunki końcowe dla `ref` i `out` zmienne są przekazywane przez wartość zwracaną.</span><span class="sxs-lookup"><span data-stu-id="b61ee-283">The postconditions for `ref` and `out` variables are communicated through the return value.</span></span> <span data-ttu-id="b61ee-284">Rozważmy tę metodę pokazaną wcześniej:</span><span class="sxs-lookup"><span data-stu-id="b61ee-284">Consider this method shown earlier:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="b61ee-285">Poprzednia metoda jest zgodna z typowym środowiskiem .NET idiom: `message` wartość zwracana wskazuje, czy została ustawiona na znalezioną wartość, czy nie zostanie znaleziony komunikat do wartości domyślnej.</span><span class="sxs-lookup"><span data-stu-id="b61ee-285">The preceding method follows a typical .NET idiom: the return value indicates if `message` was set to the found value or, if no message is found, to the default value.</span></span> <span data-ttu-id="b61ee-286">Jeśli metoda zwraca `true`, `message` wartość nie jest równa null; w przeciwnym razie metoda jest `message` ustawiana na wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-286">If the method returns `true`, the value of `message` isn't null; otherwise, the method sets `message` to null.</span></span>

<span data-ttu-id="b61ee-287">Można komunikować się z idiom przy użyciu `NotNullWhen` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-287">You can communicate that idiom using the `NotNullWhen` attribute.</span></span> <span data-ttu-id="b61ee-288">W przypadku aktualizowania sygnatury dla typów referencyjnych dopuszczających `message` wartość `string?` null wprowadź i Dodaj atrybut:</span><span class="sxs-lookup"><span data-stu-id="b61ee-288">When you update the signature for nullable reference types, make `message` a `string?` and add an attribute:</span></span>

```csharp
bool TryGetMessage(string key, [NotNullWhen(true)] out string? message)
```

<span data-ttu-id="b61ee-289">W poprzednim przykładzie wartość jest znana od `message` null, gdy `TryGetMessage` zwraca `true`.</span><span class="sxs-lookup"><span data-stu-id="b61ee-289">In the preceding example, the value of `message` is known to be not null when `TryGetMessage` returns `true`.</span></span> <span data-ttu-id="b61ee-290">Należy dodać adnotacje do podobnych metod w bazie kodu w taki sam sposób: argumenty mogą być `null`i nie mieć wartości null, gdy metoda zwraca. `true`</span><span class="sxs-lookup"><span data-stu-id="b61ee-290">You should annotate similar methods in your codebase in the same way: the arguments could be `null`, and are known to be not null when the method returns `true`.</span></span>

<span data-ttu-id="b61ee-291">Istnieje również jeden atrybut końcowy.</span><span class="sxs-lookup"><span data-stu-id="b61ee-291">There's one final attribute you may also need.</span></span> <span data-ttu-id="b61ee-292">Czasami stan null wartości zwracanej zależy od stanu zerowego co najmniej jednego argumentu wejściowego.</span><span class="sxs-lookup"><span data-stu-id="b61ee-292">Sometimes the null state of a return value depends on the null state of one or more input arguments.</span></span> <span data-ttu-id="b61ee-293">Metody te zwracają wartość różną od null, gdy nie `null`ma określonych argumentów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="b61ee-293">These methods will return a non-null value whenever certain input arguments aren't `null`.</span></span> <span data-ttu-id="b61ee-294">Aby poprawnie dodać adnotację do tych metod, należy `NotNullIfNotNull` użyć atrybutu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-294">To correctly annotate these methods, you use the `NotNullIfNotNull` attribute.</span></span> <span data-ttu-id="b61ee-295">Weź pod uwagę następującą metodę:</span><span class="sxs-lookup"><span data-stu-id="b61ee-295">Consider the following method:</span></span>

```csharp
string GetTopLevelDomainFromFullUrl(string url);
```

<span data-ttu-id="b61ee-296">Jeśli argument nie ma wartości null, dane wyjściowe `null`nie są. `url`</span><span class="sxs-lookup"><span data-stu-id="b61ee-296">If the `url` argument isn't null, the output isn't `null`.</span></span> <span data-ttu-id="b61ee-297">Po włączeniu odwołań do wartości null ten podpis działa prawidłowo, pod warunkiem, że interfejs API nigdy nie akceptuje danych wejściowych o wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-297">Once nullable references are enabled, that signature works correctly, provided your API never accepts a null input.</span></span> <span data-ttu-id="b61ee-298">Jeśli jednak dane wejściowe mogą mieć wartość null, wówczas wartość zwracana może być również wartością null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-298">However, if the input could be null, then return value could also be null.</span></span> <span data-ttu-id="b61ee-299">W związku z tym można zmienić sygnaturę na następujący kod:</span><span class="sxs-lookup"><span data-stu-id="b61ee-299">Therefore, you could change the signature to the following code:</span></span>

```csharp
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="b61ee-300">To również działa, ale często zmusza wywołujących do wdrożenia dodatkowych `null` kontroli.</span><span class="sxs-lookup"><span data-stu-id="b61ee-300">That also works, but will often force callers to implement extra `null` checks.</span></span> <span data-ttu-id="b61ee-301">Kontrakt jest, że wartość `null` zwracana będzie tylko wtedy, gdy argument `url` wejściowy to `null`.</span><span class="sxs-lookup"><span data-stu-id="b61ee-301">The contract is that the return value would be `null` only when the input argument `url` is `null`.</span></span> <span data-ttu-id="b61ee-302">Aby można było wyrazić ten kontrakt, należy dodać adnotację do tej metody, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="b61ee-302">To express that contract, you would annotate this method as shown in the following code:</span></span>

```csharp
[return: NotNullIfNotNull("url")]
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="b61ee-303">Zwracana wartość i argument mają adnotację ze `?` wskazaniem, że może to być. `null`</span><span class="sxs-lookup"><span data-stu-id="b61ee-303">The return value and the argument have both been annotated with the `?` indicating that either could be `null`.</span></span> <span data-ttu-id="b61ee-304">Ten atrybut dokładniej objaśnia, że wartość zwracana nie będzie zerowa, gdy `url` argument nie jest. `null`</span><span class="sxs-lookup"><span data-stu-id="b61ee-304">The attribute further clarifies that the return value won't be null when the `url` argument isn't `null`.</span></span>

<span data-ttu-id="b61ee-305">Należy określić warunkowe warunki końcowe przy użyciu następujących atrybutów:</span><span class="sxs-lookup"><span data-stu-id="b61ee-305">You specify conditional postconditions using these attributes:</span></span>

- <span data-ttu-id="b61ee-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Argument, który nie `out` dopuszcza `ref` wartości null lub, może mieć wartość null, gdy wartość zwracana spełnia warunek.</span><span class="sxs-lookup"><span data-stu-id="b61ee-306">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="b61ee-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Wartość dopuszczająca `out` wartość null lub `ref` argument nie może mieć wartości null, jeśli zwracaną wartością jest warunek.</span><span class="sxs-lookup"><span data-stu-id="b61ee-307">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="b61ee-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Wartość zwracana nie ma wartości null, jeśli argument wejściowy dla określonego parametru nie ma wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-308">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

## <a name="generic-definitions-and-nullability"></a><span data-ttu-id="b61ee-309">Definicje generyczne i wartości null</span><span class="sxs-lookup"><span data-stu-id="b61ee-309">Generic definitions and nullability</span></span>

<span data-ttu-id="b61ee-310">Poprawne powiadamianie o stanie null typów ogólnych i metod ogólnych wymaga szczególnej uwagi.</span><span class="sxs-lookup"><span data-stu-id="b61ee-310">Correctly communicating the null state of generic types and generic methods requires special care.</span></span> <span data-ttu-id="b61ee-311">Wynika to z faktu, że typ wartości null i typ referencyjny dopuszczający wartość null są zasadniczo różne.</span><span class="sxs-lookup"><span data-stu-id="b61ee-311">This stems from the fact that a nullable value type and a nullable reference type are fundamentally different.</span></span> <span data-ttu-id="b61ee-312">Jest `int?` synonimem `Nullable<int>`dla, `string?` w którym jest `string` atrybut dodany przez kompilator.</span><span class="sxs-lookup"><span data-stu-id="b61ee-312">An `int?` is a synonym for `Nullable<int>`, whereas `string?` is `string` with an attribute added by the compiler.</span></span> <span data-ttu-id="b61ee-313">Wynika to z tego, że kompilator nie może wygenerować poprawnego kodu `T?` dla programu bez znajomości `struct`if `T` `class` lub.</span><span class="sxs-lookup"><span data-stu-id="b61ee-313">The result is that the compiler can't generate correct code for `T?` without knowing if `T` is a `class` or a `struct`.</span></span> 

<span data-ttu-id="b61ee-314">Nie oznacza to, że nie można użyć typu dopuszczającego wartości null (typu wartości lub typu referencyjnego) jako argumentu typu dla zamkniętego typu ogólnego.</span><span class="sxs-lookup"><span data-stu-id="b61ee-314">This doesn't mean you can't use a nullable type (either value type or reference type) as the type argument for a closed generic type.</span></span> <span data-ttu-id="b61ee-315">Oba `List<string?>` i `List<int?>` sąprawidłowymi`List<T>`wystąpieniami.</span><span class="sxs-lookup"><span data-stu-id="b61ee-315">Both `List<string?>` and `List<int?>` are valid instantiations of `List<T>`.</span></span> 

<span data-ttu-id="b61ee-316">Oznacza to, że nie można użyć `T?` w deklaracji klasy generycznej ani metody bez ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="b61ee-316">What it does mean is that you can't use `T?` in a generic class or method declaration without constraints.</span></span> <span data-ttu-id="b61ee-317">Na przykład <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> nie zostanie zmieniony na Return `T?`.</span><span class="sxs-lookup"><span data-stu-id="b61ee-317">For example, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> won't be changed to return `T?`.</span></span> <span data-ttu-id="b61ee-318">Ograniczenie to można przezwyciężyć, dodając `struct` ograniczenie `class` or.</span><span class="sxs-lookup"><span data-stu-id="b61ee-318">You can overcome this limitation by adding either the `struct` or `class` constraint.</span></span> <span data-ttu-id="b61ee-319">W przypadku każdego z tych ograniczeń kompilator wie, jak generować kod dla obu `T` i. `T?`</span><span class="sxs-lookup"><span data-stu-id="b61ee-319">With either of those constraints, the compiler knows how to generate code for both `T` and `T?`.</span></span>

<span data-ttu-id="b61ee-320">Możesz chcieć ograniczyć typy używane dla argumentu typu ogólnego jako niedopuszczające wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-320">You may want to restrict the types used for a generic type argument to be non-nullable types.</span></span> <span data-ttu-id="b61ee-321">Można to zrobić, dodając `notnull` ograniczenie dla tego argumentu typu.</span><span class="sxs-lookup"><span data-stu-id="b61ee-321">You can do that by adding the `notnull` constraint on that type argument.</span></span> <span data-ttu-id="b61ee-322">Po zastosowaniu tego ograniczenia argument typu nie może być typem dopuszczającym wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-322">When that constraint is applied, the type argument must not be a nullable type.</span></span>

## <a name="conclusions"></a><span data-ttu-id="b61ee-323">Wnioski</span><span class="sxs-lookup"><span data-stu-id="b61ee-323">Conclusions</span></span>

<span data-ttu-id="b61ee-324">Dodanie typów referencyjnych dopuszczających wartość null zapewnia wstępne słownictwo do opisywania oczekiwań interfejsów API `null`dla zmiennych, które mogą być.</span><span class="sxs-lookup"><span data-stu-id="b61ee-324">Adding nullable reference types provides an initial vocabulary to describe your APIs expectations for variables that could be `null`.</span></span> <span data-ttu-id="b61ee-325">Dodatkowe atrybuty zapewniają bogatszy słownictwo do opisania stanu wartości null zmiennych jako warunków wstępnych i warunki końcowe.</span><span class="sxs-lookup"><span data-stu-id="b61ee-325">The additional attributes provide a richer vocabulary to describe the null state of variables as preconditions and postconditions.</span></span> <span data-ttu-id="b61ee-326">Te atrybuty bardziej wyraźnie opisują oczekiwania i zapewniają lepszy komfort używania interfejsów API przez deweloperów.</span><span class="sxs-lookup"><span data-stu-id="b61ee-326">These attributes more clearly describe your expectations and provide a better experience for the developers using your APIs.</span></span>

<span data-ttu-id="b61ee-327">Podczas aktualizowania bibliotek dla kontekstu dopuszczającego wartość null należy dodać te atrybuty, aby ułatwić użytkownikom interfejsów API poprawne użycie.</span><span class="sxs-lookup"><span data-stu-id="b61ee-327">As you update libraries for a nullable context, add these attributes to guide users of your APIs to the correct usage.</span></span> <span data-ttu-id="b61ee-328">Te atrybuty pomagają w pełni opisać stan null argumentów wejściowych i zwracanych wartości:</span><span class="sxs-lookup"><span data-stu-id="b61ee-328">These attributes help you fully describe the null-state of input arguments and return values:</span></span>

- <span data-ttu-id="b61ee-329">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Niedopuszczający wartości null argument wejściowy może mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-329">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="b61ee-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): Argument wejściowy dopuszczający wartość null nigdy nie powinien mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-330">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="b61ee-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Wartość zwracana niedopuszczający wartości null może być zerowa.</span><span class="sxs-lookup"><span data-stu-id="b61ee-331">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="b61ee-332">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): Wartość zwracana do wartości null nigdy nie będzie równa null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-332">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="b61ee-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Argument, który nie `out` dopuszcza `ref` wartości null lub, może mieć wartość null, gdy wartość zwracana spełnia warunek.</span><span class="sxs-lookup"><span data-stu-id="b61ee-333">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable `out` or `ref` argument may be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="b61ee-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Wartość dopuszczająca `out` wartość null lub `ref` argument nie może mieć wartości null, jeśli zwracaną wartością jest warunek.</span><span class="sxs-lookup"><span data-stu-id="b61ee-334">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable `out` or `ref` argument may not be null when the return value satisfies a condition.</span></span>
- <span data-ttu-id="b61ee-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Wartość zwracana nie ma wartości null, jeśli argument wejściowy dla określonego parametru nie ma wartości null.</span><span class="sxs-lookup"><span data-stu-id="b61ee-335">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>
