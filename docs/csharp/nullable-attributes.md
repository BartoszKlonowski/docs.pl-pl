---
title: Uaktualnianie interfejsów API dla typów odwołań z wartościami nullable z atrybutami definiuujającym oczekiwania dotyczące wartości null
description: Naucz się używać atrybutów opisowych AllowNull, DisallowNull, MaybeNull, NotNull i innych, aby w pełni opisać stan zerowy interfejsów API.
ms.technology: csharp-null-safety
ms.date: 07/31/2019
ms.openlocfilehash: ca04db800271b9b01b5b9f1482dd5a0db2cc1c35
ms.sourcegitcommit: 99b153b93bf94d0fecf7c7bcecb58ac424dfa47c
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/25/2020
ms.locfileid: "80249245"
---
# <a name="update-libraries-to-use-nullable-reference-types-and-communicate-nullable-rules-to-callers"></a><span data-ttu-id="9b6dc-103">Aktualizowanie bibliotek w celu używania typów odwołań z regułami zbędnymi wartościami null i przekazywanie reguł nullable wywołującym</span><span class="sxs-lookup"><span data-stu-id="9b6dc-103">Update libraries to use nullable reference types and communicate nullable rules to callers</span></span>

<span data-ttu-id="9b6dc-104">Dodanie [typów odwołań nullable](nullable-references.md) oznacza, że `null` można zadeklarować, czy wartość jest dozwolona lub oczekiwana dla każdej zmiennej.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-104">The addition of [nullable reference types](nullable-references.md) means you can declare whether or not a `null` value is allowed or expected for every variable.</span></span> <span data-ttu-id="9b6dc-105">Ponadto można zastosować liczbę atrybutów: `AllowNull` `DisallowNull`, `MaybeNull` `NotNull`, `NotNullWhen` `MaybeNullWhen`, `NotNullWhenNotNull` , , i całkowicie opisać null stany argumentów i zwracanych wartości.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-105">In addition, you can apply a number of attributes: `AllowNull`, `DisallowNull`, `MaybeNull`, `NotNull`, `NotNullWhen`, `MaybeNullWhen`, and `NotNullWhenNotNull` to completely describe the null states of argument and return values.</span></span> <span data-ttu-id="9b6dc-106">Zapewnia to wspaniałe doświadczenie podczas pisania kodu.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-106">That provides a great experience as you write code.</span></span> <span data-ttu-id="9b6dc-107">Otrzymasz ostrzeżenia, jeśli zmienna nienastępna null może być ustawiona na `null`.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-107">You get warnings if a non-nullable variable might be set to `null`.</span></span> <span data-ttu-id="9b6dc-108">Otrzymasz ostrzeżenia, jeśli zmienna nullable nie jest zaznaczona zerem przed wyłuskaniem go.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-108">You get warnings if a nullable variable isn't null-checked before you dereference it.</span></span> <span data-ttu-id="9b6dc-109">Aktualizowanie bibliotek może zająć trochę czasu, ale wypłaty są tego warte.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-109">Updating your libraries can take time, but the payoffs are worth it.</span></span> <span data-ttu-id="9b6dc-110">Im więcej informacji, które podasz `null` kompilatorowi o *tym, kiedy* wartość jest dozwolona lub zabroniona, otrzymają lepsze ostrzeżenia, które otrzymają użytkownicy interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-110">The more information you provide to the compiler about *when* a `null` value is allowed or prohibited, the better warnings users of your API will get.</span></span> <span data-ttu-id="9b6dc-111">Zacznijmy od znanego przykładu.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-111">Let's start with a familiar example.</span></span> <span data-ttu-id="9b6dc-112">Wyobraź sobie, że biblioteka ma następujący interfejs API do pobierania ciągu zasobu:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-112">Imagine your library has the following API to retrieve a resource string:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="9b6dc-113">W poprzednim przykładzie `Try*` następuje znane wzorzec w .NET.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-113">The preceding example follows the familiar `Try*` pattern in .NET.</span></span> <span data-ttu-id="9b6dc-114">Istnieją dwa argumenty odwołania dla `key` tego `message` interfejsu API: i parametr.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-114">There are two reference arguments for this API: the `key` and the `message` parameter.</span></span> <span data-ttu-id="9b6dc-115">Ten interfejs API ma następujące reguły odnoszące się do nieważności tych argumentów:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-115">This API has the following rules relating to the nullness of these arguments:</span></span>

- <span data-ttu-id="9b6dc-116">Dzwoniący nie powinni `null` przechodzić `key`jako argument dla .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-116">Callers shouldn't pass `null` as the argument for `key`.</span></span>
- <span data-ttu-id="9b6dc-117">Osoby dzwoniące mogą przekazać `null` zmienną, `message`której wartość jest argumentem dla .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-117">Callers can pass a variable whose value is `null` as the argument for `message`.</span></span>
- <span data-ttu-id="9b6dc-118">Jeśli `TryGetMessage` metoda `true`zwraca , `message` wartość nie jest null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-118">If the `TryGetMessage` method returns `true`, the value of `message` isn't null.</span></span> <span data-ttu-id="9b6dc-119">Jeśli zwracana `false,` wartość jest `message` wartością (a jej stan zerowy) jest null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-119">If the return value is `false,` the value of `message` (and its null state) is null.</span></span>

<span data-ttu-id="9b6dc-120">Reguła `key` dla może być całkowicie wyrażona `key` przez typ zmiennej: powinien być typem odwołania nienastępnego.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-120">The rule for `key` can be completely expressed by the variable type: `key` should be a non-nullable reference type.</span></span> <span data-ttu-id="9b6dc-121">Parametr `message` jest bardziej złożony.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-121">The `message` parameter is more complex.</span></span> <span data-ttu-id="9b6dc-122">Pozwala `null` jako argument, ale gwarantuje, że `out` na sukces, że argument nie jest null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-122">It allows `null` as the argument, but guarantees that, on success, that `out` argument isn't null.</span></span> <span data-ttu-id="9b6dc-123">W przypadku tych scenariuszy potrzebujesz bogatszego słownictwa, aby opisać oczekiwania.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-123">For these scenarios, you need a richer vocabulary to describe the expectations.</span></span>

<span data-ttu-id="9b6dc-124">Aktualizowanie biblioteki dla odwołań nullable wymaga `?` więcej niż posypywanie na niektóre zmienne i nazwy typów.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-124">Updating your library for nullable references requires more than sprinkling `?` on some of the variables and type names.</span></span> <span data-ttu-id="9b6dc-125">W poprzednim przykładzie pokazano, że należy zbadać interfejsy API i należy wziąć pod uwagę oczekiwania dla każdego argumentu wejściowego.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-125">The preceding example shows that you need to examine your APIs and consider your expectations for each input argument.</span></span> <span data-ttu-id="9b6dc-126">Należy wziąć pod uwagę gwarancje `out` dla `ref` wartości zwracanej i wszelkie lub argumenty po powrocie metody.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-126">Consider the guarantees for the return value, and any `out` or `ref` arguments upon the method's return.</span></span> <span data-ttu-id="9b6dc-127">Następnie komunikować te reguły do kompilatora, a kompilator zapewni ostrzeżenia, gdy wywołania nie są zgodne z tymi regułami.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-127">Then communicate those rules to the compiler, and the compiler will provide warnings when callers don't abide by those rules.</span></span>

<span data-ttu-id="9b6dc-128">Ta praca wymaga czasu.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-128">This work takes time.</span></span> <span data-ttu-id="9b6dc-129">Zacznijmy od strategii, aby biblioteka lub aplikacja nullable-aware, przy jednoczesnym równoważeniu innych wymagań i ujednolików.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-129">Let's start with strategies to make your library or application nullable-aware, while balancing other requirements and deliverables.</span></span> <span data-ttu-id="9b6dc-130">Zobaczysz, jak zrównoważyć bieżące gonie, umożliwiając typy odwołań powodujących wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-130">You'll see how to balance ongoing development enabling nullable reference types.</span></span> <span data-ttu-id="9b6dc-131">Poznasz wyzwania dotyczące definicji typów ogólnych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-131">You'll learn challenges for generic type definitions.</span></span> <span data-ttu-id="9b6dc-132">Nauczysz się stosować atrybuty do opisywania warunków wstępnych i postowych w poszczególnych interfejsach API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-132">You'll learn to apply attributes to describe pre- and post-conditions on individual APIs.</span></span>

## <a name="choose-a-strategy-for-nullable-reference-types"></a><span data-ttu-id="9b6dc-133">Wybieranie strategii dla typów odwołań z dopuszczaniem do wartości null</span><span class="sxs-lookup"><span data-stu-id="9b6dc-133">Choose a strategy for nullable reference types</span></span>

<span data-ttu-id="9b6dc-134">Pierwszym wyborem jest to, czy typy odwołań nullable powinny być domyślnie włączone lub wyłączone.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-134">The first choice is whether nullable reference types should be on or off by default.</span></span> <span data-ttu-id="9b6dc-135">Masz dwie strategie:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-135">You have two strategies:</span></span>

- <span data-ttu-id="9b6dc-136">Włącz typy odwołań nullable dla całego projektu i wyłącz go w kodzie, który nie jest gotowy.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-136">Enable nullable reference types for the entire project, and disable it in code that's not ready.</span></span>
- <span data-ttu-id="9b6dc-137">Włącz tylko typy odwołań z nullable dla kodu, który został o astowany dla typów odwołań zdatnymi do wartości null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-137">Only enable nullable reference types for code that's been annotated for nullable reference types.</span></span>

<span data-ttu-id="9b6dc-138">Pierwsza strategia działa najlepiej podczas dodawania innych funkcji do biblioteki podczas aktualizowania go dla typów odwołań, których można anulować.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-138">The first strategy works best when you're adding other features to the library as you update it for nullable reference types.</span></span> <span data-ttu-id="9b6dc-139">Wszystkie nowe rozwoju jest nullable świadomość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-139">All new development is nullable aware.</span></span> <span data-ttu-id="9b6dc-140">Podczas aktualizowania istniejącego kodu, można włączyć nullable typy odwołań w tych klasach.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-140">As you update existing code, you enable nullable reference types in those classes.</span></span>

<span data-ttu-id="9b6dc-141">Zgodnie z tą pierwszą strategią wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-141">Following this first strategy, you do the following:</span></span>

1. <span data-ttu-id="9b6dc-142">Włącz typy odwołań nullable dla `<Nullable>enable</Nullable>` całego projektu, dodając element do plików *csproj.*</span><span class="sxs-lookup"><span data-stu-id="9b6dc-142">Enable nullable reference types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span>
1. <span data-ttu-id="9b6dc-143">Dodaj `#nullable disable` pragmę do każdego pliku źródłowego w projekcie.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-143">Add the `#nullable disable` pragma to every source file in your project.</span></span>
1. <span data-ttu-id="9b6dc-144">Podczas pracy nad każdym plikiem usuń pragmę i zaaminuj wszelkie ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-144">As you work on each file, remove the pragma and address any warnings.</span></span>

<span data-ttu-id="9b6dc-145">Ta pierwsza strategia ma więcej pracy z góry, aby dodać pragmy do każdego pliku.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-145">This first strategy has more up-front work to add the pragma to every file.</span></span> <span data-ttu-id="9b6dc-146">Zaletą jest to, że każdy nowy plik kodu dodany do projektu będzie nullable włączone.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-146">The advantage is that every new code file added to the project will be nullable enabled.</span></span> <span data-ttu-id="9b6dc-147">Wszelkie nowe prace będą nieważne świadomość; tylko istniejący kod musi zostać zaktualizowany.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-147">Any new work will be nullable aware; only existing code must be updated.</span></span>

<span data-ttu-id="9b6dc-148">Druga strategia działa lepiej, jeśli biblioteka jest ogólnie stabilna, a głównym celem rozwoju jest przyjęcie typów odwołań do nullable.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-148">The second strategy works better if the library is generally stable, and the main focus of the development is to adopt nullable reference types.</span></span> <span data-ttu-id="9b6dc-149">Typy odwołań z których można wyłączyć z wartościami null, podczas dodawać adnotacje do interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-149">You turn on nullable reference types as you annotate APIs.</span></span> <span data-ttu-id="9b6dc-150">Po zakończeniu można włączyć typy odwołań nullable dla całego projektu.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-150">When you've finished, you enable nullable reference types for the entire project.</span></span>

<span data-ttu-id="9b6dc-151">Zgodnie z tą drugą strategią wykonujesz następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-151">Following this second strategy you do the following:</span></span>

1. <span data-ttu-id="9b6dc-152">Dodaj `#nullable enable` pragmę do pliku, który chcesz zgłosić do null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-152">Add the `#nullable enable` pragma to the file you want to make nullable aware.</span></span>
1. <span data-ttu-id="9b6dc-153">Usuń wszelkie ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-153">Address any warnings.</span></span>
1. <span data-ttu-id="9b6dc-154">Kontynuuj te dwa pierwsze kroki, dopóki nie dowiesz się, że cała biblioteka jest nieuprawniona.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-154">Continue these first two steps until you've made the entire library nullable aware.</span></span>
1. <span data-ttu-id="9b6dc-155">Włącz typy nullable dla całego `<Nullable>enable</Nullable>` projektu, dodając element do plików *csproj.*</span><span class="sxs-lookup"><span data-stu-id="9b6dc-155">Enable nullable types for the entire project by adding the `<Nullable>enable</Nullable>` element to your *csproj* files.</span></span>
1. <span data-ttu-id="9b6dc-156">Usuń `#nullable enable` pragmy, ponieważ nie są już potrzebne.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-156">Remove the `#nullable enable` pragmas, as they're no longer needed.</span></span>

<span data-ttu-id="9b6dc-157">Ta druga strategia ma mniej pracy z góry.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-157">This second strategy has less work up-front.</span></span> <span data-ttu-id="9b6dc-158">Kompromisem jest to, że pierwszym zadaniem podczas tworzenia nowego pliku jest dodanie pragmy i uczynienie go nullable aware.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-158">The tradeoff is that the first task when you create a new file is to add the pragma and make it nullable aware.</span></span> <span data-ttu-id="9b6dc-159">Jeśli deweloperzy w zespole zapomnieć, że nowy kod jest teraz w zaległości pracy, aby wszystkie kodu nullable świadomość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-159">If any developers on your team forget, that new code is now in the backlog of work to make all code nullable aware.</span></span>

<span data-ttu-id="9b6dc-160">Która z tych strategii zostanie wybrasza, zależy od tego, jak bardzo aktywny rozwój odbywa się w twoim projekcie.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-160">Which of these strategies you pick depends on how much active development is taking place in your project.</span></span> <span data-ttu-id="9b6dc-161">Im bardziej dojrzały i stabilny projekt, tym lepsza druga strategia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-161">The more mature and stable your project, the better the second strategy.</span></span> <span data-ttu-id="9b6dc-162">Im więcej funkcji jest opracowywanych, tym lepsza jest pierwsza strategia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-162">The more features being developed, the better the first strategy.</span></span>

## <a name="should-nullable-warnings-introduce-breaking-changes"></a><span data-ttu-id="9b6dc-163">Czy ostrzeżenia o unieważnianiu powinny powodować zmiany w przerwaniu?</span><span class="sxs-lookup"><span data-stu-id="9b6dc-163">Should nullable warnings introduce breaking changes?</span></span>

<span data-ttu-id="9b6dc-164">Przed włączeniem typów odwołań do wartości null, zmienne są uważane za *nullable oblivious*.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-164">Before you enable nullable reference types, variables are considered *nullable oblivious*.</span></span> <span data-ttu-id="9b6dc-165">Po włączeniu typów odwołań zable null, wszystkie te zmienne są *niemożna null .*</span><span class="sxs-lookup"><span data-stu-id="9b6dc-165">Once you enable nullable reference types, all those variables are *non-nullable*.</span></span> <span data-ttu-id="9b6dc-166">Kompilator wyda ostrzeżenia, jeśli te zmienne nie są inicjowane do wartości innych niż null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-166">The compiler will issue warnings if those variables aren't initialized to non-null values.</span></span>

<span data-ttu-id="9b6dc-167">Innym prawdopodobnym źródłem ostrzeżeń są zwracane wartości, gdy wartość nie została zainicjowana.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-167">Another likely source of warnings is return values when the value hasn't been initialized.</span></span>

<span data-ttu-id="9b6dc-168">Pierwszym krokiem w adresowaniu ostrzeżeń `?` kompilatora jest użycie adnotacji na typy parametrów i zwracać, aby wskazać, kiedy argumenty lub zwraca wartości mogą być null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-168">The first step in addressing the compiler warnings is to use `?` annotations on parameter and return types to indicate when arguments or return values may be null.</span></span> <span data-ttu-id="9b6dc-169">Gdy zmienne odwołania nie może być null, oryginalna deklaracja jest poprawna.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-169">When reference variables must not be null, the original declaration is correct.</span></span> <span data-ttu-id="9b6dc-170">Jak to zrobić, Twoim celem nie jest tylko naprawić ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-170">As you do this, your goal isn't just to fix warnings.</span></span> <span data-ttu-id="9b6dc-171">Ważniejszym celem jest, aby kompilator zrozumieć intencji dla potencjalnych wartości null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-171">The more important goal is to make the compiler understand your intent for potential null values.</span></span> <span data-ttu-id="9b6dc-172">Podczas badania ostrzeżeń, można osiągnąć następną ważną decyzję dla biblioteki.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-172">As you examine the warnings, you reach your next major decision for your library.</span></span> <span data-ttu-id="9b6dc-173">Czy chcesz rozważyć zmodyfikowanie podpisów interfejsu API, aby lepiej komunikować intencje projektu?</span><span class="sxs-lookup"><span data-stu-id="9b6dc-173">Do you want to consider modifying API signatures to more clearly communicate your design intent?</span></span> <span data-ttu-id="9b6dc-174">Lepszy podpis interfejsu `TryGetMessage` API dla metody badanej wcześniej może być:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-174">A better API signature for the `TryGetMessage` method examined earlier could be:</span></span>

```csharp
string? TryGetMessage(string key);
```

<span data-ttu-id="9b6dc-175">Zwracana wartość wskazuje sukces lub niepowodzenie i przenosi wartość, jeśli wartość została znaleziona.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-175">The return value indicates success or failure, and carries the value if the value was found.</span></span> <span data-ttu-id="9b6dc-176">W wielu przypadkach zmiana podpisów interfejsu API może poprawić sposób przekazywania wartości null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-176">In many cases, changing API signatures can improve how they communicate null values.</span></span>

<span data-ttu-id="9b6dc-177">Jednak w przypadku bibliotek publicznych lub bibliotek z dużymi bazami użytkowników może wolisz nie wprowadzać żadnych zmian podpisu interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-177">However, for public libraries, or libraries with large user bases, you may prefer not introducing any API signature changes.</span></span> <span data-ttu-id="9b6dc-178">W tych przypadkach i innych typowych wzorcach można zastosować atrybuty, aby jaśniej `null`zdefiniować, kiedy argument lub wartość zwracana może być .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-178">For those cases, and other common patterns, you can apply attributes to more clearly define when an argument or return value may be `null`.</span></span> <span data-ttu-id="9b6dc-179">Niezależnie od tego, czy rozważasz zmianę powierzchni interfejsu API, prawdopodobnie okaże się, że `null` same adnotacje typu nie są wystarczające do opisywania wartości argumentów lub zwracanych wartości.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-179">Whether or not you consider changing the surface of your API, you'll likely find that type annotations alone aren't sufficient for describing `null` values for arguments or return values.</span></span> <span data-ttu-id="9b6dc-180">W tych przypadkach można zastosować atrybuty, aby jaśniej opisać interfejs API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-180">In those instances, you can apply attributes to more clearly describe an API.</span></span>

## <a name="attributes-extend-type-annotations"></a><span data-ttu-id="9b6dc-181">Atrybuty rozszerzają adnotacje typów</span><span class="sxs-lookup"><span data-stu-id="9b6dc-181">Attributes extend type annotations</span></span>

<span data-ttu-id="9b6dc-182">Dodano kilka atrybutów, aby wyrazić dodatkowe informacje o stanie null zmiennych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-182">Several attributes have been added to express additional information about the null state of variables.</span></span> <span data-ttu-id="9b6dc-183">Cały kod, który napisałeś przed C# 8 wprowadzone nullable typy odwołań był *null oblivious*.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-183">All code you wrote before C# 8 introduced nullable reference types was *null oblivious*.</span></span> <span data-ttu-id="9b6dc-184">Oznacza to, że każda zmienna typu odwołania może mieć wartość null, ale nie są wymagane kontrole wartości null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-184">That means any reference type variable may be null, but null checks aren't required.</span></span> <span data-ttu-id="9b6dc-185">Gdy kod jest *nullable aware*, te reguły zmienić.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-185">Once your code is *nullable aware*, those rules change.</span></span> <span data-ttu-id="9b6dc-186">Typy odwołań `null` nigdy nie powinny być wartością, `null` a typy odwołań do wartości null muszą być sprawdzane przed odwołaniem.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-186">Reference types should never be the `null` value, and nullable reference types must be checked against `null` before being dereferenced.</span></span>

<span data-ttu-id="9b6dc-187">Reguły interfejsów API są prawdopodobnie bardziej skomplikowane, `TryGetValue` jak widać w scenariuszu interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-187">The rules for your APIs are likely more complicated, as you saw with the `TryGetValue` API scenario.</span></span> <span data-ttu-id="9b6dc-188">Wiele interfejsów API ma bardziej złożone reguły, gdy zmienne mogą lub nie mogą być `null`.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-188">Many of your APIs have more complex rules for when variables can or can't be `null`.</span></span> <span data-ttu-id="9b6dc-189">W takich przypadkach do wyrażenia tych reguł użyjesz jednego z następujących atrybutów:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-189">In these cases, you'll use one of the following attributes to express those rules:</span></span>

- <span data-ttu-id="9b6dc-190">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Argument wejściowy nienastępny do wartości null może mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-190">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="9b6dc-191">[NieuprawnionyNull:](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute)Nullable argument wejściowy nigdy nie powinien być null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-191">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="9b6dc-192">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Wartość zwracana bez wartości null może być wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-192">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="9b6dc-193">[NotNull:](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute)Nullable wartość zwracana nigdy nie będzie null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-193">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="9b6dc-194">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Argument wejściowy nienastępny do wartości `bool` null może mieć wartość null, gdy metoda zwraca określoną wartość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-194">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable input argument may be null when the method returns the specified `bool` value.</span></span>
- <span data-ttu-id="9b6dc-195">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Argument wejściowy do null nie będzie `bool` null, gdy metoda zwraca określoną wartość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-195">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable input argument will not be null when the method returns the specified `bool` value.</span></span>
- <span data-ttu-id="9b6dc-196">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Zwracana wartość nie jest zerowa, jeśli argument dla określonego parametru nie jest null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-196">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the argument for the specified parameter isn't null.</span></span>

<span data-ttu-id="9b6dc-197">Powyższe opisy są szybkie odwołanie do tego, co każdy atrybut nie.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-197">The preceding descriptions are a quick reference to what each attribute does.</span></span> <span data-ttu-id="9b6dc-198">W każdej poniższej sekcji opisano zachowanie i znaczenie dokładniej.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-198">Each following section describes the behavior and meaning more thoroughly.</span></span>

<span data-ttu-id="9b6dc-199">Dodanie tych atrybutów daje kompilatorowi więcej informacji na temat reguł dla interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-199">Adding these attributes gives the compiler more information about the rules for your API.</span></span> <span data-ttu-id="9b6dc-200">Podczas wywoływania kodu jest kompilowany w kontekście z obsługą nullable włączone, kompilator będzie ostrzegać wywoływaczy, gdy naruszają te reguły.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-200">When calling code is compiled in a nullable enabled context, the compiler will warn callers when they violate those rules.</span></span> <span data-ttu-id="9b6dc-201">Te atrybuty nie umożliwiają dodatkowych kontroli implementacji.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-201">These attributes don't enable additional checks on your implementation.</span></span>

## <a name="specify-preconditions-allownull-and-disallownull"></a><span data-ttu-id="9b6dc-202">Określ warunki wstępne: `AllowNull` i`DisallowNull`</span><span class="sxs-lookup"><span data-stu-id="9b6dc-202">Specify preconditions: `AllowNull` and `DisallowNull`</span></span>

<span data-ttu-id="9b6dc-203">Należy wziąć pod uwagę właściwość odczytu/zapisu, która nigdy nie zwraca, `null` ponieważ ma rozsądną wartość domyślną.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-203">Consider a read/write property that never returns `null` because it has a reasonable default value.</span></span> <span data-ttu-id="9b6dc-204">Wywołujący `null` przechodzą do zestawu akcesora podczas ustawiania go do tej wartości domyślnej.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-204">Callers pass `null` to the set accessor when setting it to that default value.</span></span> <span data-ttu-id="9b6dc-205">Rozważmy na przykład system obsługi wiadomości, który prosi o nazwę ekranu w pokoju rozmów.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-205">For example, consider a messaging system that asks for a screen name in a chat room.</span></span> <span data-ttu-id="9b6dc-206">Jeśli nie podano, system generuje losową nazwę:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-206">If none is provided, the system generates a random name:</span></span>

```csharp
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName;
```

<span data-ttu-id="9b6dc-207">Podczas kompilowania poprzedniego kodu w kontekście nullable nieświadomy, wszystko jest w porządku.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-207">When you compile the preceding code in a nullable oblivious context, everything is fine.</span></span> <span data-ttu-id="9b6dc-208">Po włączeniu typów odwołań `ScreenName` nullable, właściwość staje się odwołanie nie nullable.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-208">Once you enable nullable reference types, the `ScreenName` property becomes a non-nullable reference.</span></span> <span data-ttu-id="9b6dc-209">To jest poprawne `get` dla akcesora: nigdy nie zwraca `null`.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-209">That's correct for the `get` accessor: it never returns `null`.</span></span> <span data-ttu-id="9b6dc-210">Dzwoniący nie muszą sprawdzać zwracane `null`właściwość dla .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-210">Callers don't need to check the returned property for `null`.</span></span> <span data-ttu-id="9b6dc-211">Ale teraz ustawienie `null` właściwości, aby wygenerować ostrzeżenie.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-211">But now setting the property to `null` generates a warning.</span></span> <span data-ttu-id="9b6dc-212">Aby nadal obsługiwać ten typ kodu, <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> należy dodać atrybut do właściwości, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-212">In order to continue to support this type of code, you add the <xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute?displayProperty=nameWithType> attribute to the property, as shown in the following code:</span></span>

```csharp
[AllowNull]
public string ScreenName
{
   get => screenName;
   set => screenName = value ?? GenerateRandomScreenName();
}
private string screenName = GenerateRandomScreenName();
```

<span data-ttu-id="9b6dc-213">Może być konieczne `using` dodanie <xref:System.Diagnostics.CodeAnalysis> dyrektywy, aby użyć tego i innych atrybutów omówionych w tym artykule.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-213">You may need to add a `using` directive for <xref:System.Diagnostics.CodeAnalysis> to use this and other attributes discussed in this article.</span></span> <span data-ttu-id="9b6dc-214">Atrybut jest stosowany do właściwości, a `set` nie akcesora.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-214">The attribute is applied to the property, not the `set` accessor.</span></span> <span data-ttu-id="9b6dc-215">Atrybut `AllowNull` określa *warunki wstępne*i ma zastosowanie tylko do danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-215">The `AllowNull` attribute specifies *pre-conditions*, and only applies to inputs.</span></span> <span data-ttu-id="9b6dc-216">Akcesor `get` ma wartość zwracaną, ale nie ma argumentów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-216">The `get` accessor has a return value, but no input arguments.</span></span> <span data-ttu-id="9b6dc-217">W związku `AllowNull` z tym atrybut dotyczy `set` tylko akcesora.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-217">Therefore, the `AllowNull` attribute only applies to the `set` accessor.</span></span>

<span data-ttu-id="9b6dc-218">W poprzednim przykładzie pokazano, na co `AllowNull` zwrócić uwagę podczas dodawania atrybutu w argurze:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-218">The preceding example demonstrates what to look for when adding the `AllowNull` attribute on an argument:</span></span>

1. <span data-ttu-id="9b6dc-219">Ogólna umowa dla tej zmiennej jest, że nie powinno być `null`, więc chcesz typu odwołania nie nullable.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-219">The general contract for that variable is that it shouldn't be `null`, so you want a non-nullable reference type.</span></span>
1. <span data-ttu-id="9b6dc-220">Istnieją scenariusze dla zmiennej `null`wejściowej, które mają być, choć nie są one najczęściej użycia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-220">There are scenarios for the input variable to be `null`, though they aren't the most common usage.</span></span>

<span data-ttu-id="9b6dc-221">Najczęściej ten atrybut jest potrzebny dla właściwości `in`lub `out`, `ref` i argumentów.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-221">Most often you'll need this attribute for properties, or `in`, `out`, and `ref` arguments.</span></span> <span data-ttu-id="9b6dc-222">Atrybut `AllowNull` jest najlepszym wyborem, gdy zmienna jest zazwyczaj nie null, ale należy zezwolić `null` jako warunek wstępny.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-222">The `AllowNull` attribute is the best choice when a variable is typically non-null, but you need to allow `null` as a precondition.</span></span>

<span data-ttu-id="9b6dc-223">Kontrast, który ze `DisallowNull`scenariuszami użycia: Ten atrybut służy do określania, że zmienną `null`wejściową typu odwołania z dopuszczalną wartością null nie powinna być .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-223">Contrast that with scenarios for using `DisallowNull`: You use this attribute to specify that an input variable of a nullable reference type shouldn't be `null`.</span></span> <span data-ttu-id="9b6dc-224">Należy wziąć `null` pod uwagę właściwość, gdzie jest wartością domyślną, ale klienci mogą tylko ustawić ją na wartość nietrwałą.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-224">Consider a property where `null` is the default value, but clients can only set it to a non-null value.</span></span> <span data-ttu-id="9b6dc-225">Spójrzmy na poniższy kod:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-225">Consider the following code:</span></span>

```csharp
public string ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string _comment;
```

<span data-ttu-id="9b6dc-226">Powyższy kod jest najlepszym sposobem wyrażenia projektu, który `ReviewComment` może być, `null`ale `null`nie można ustawić na .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-226">The preceding code is the best way to express your design that the `ReviewComment` could be `null`, but can't be set to `null`.</span></span> <span data-ttu-id="9b6dc-227">Gdy ten kod jest nullable pamiętać, można wyrazić tę <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>koncepcję jaśniej do rozmówców za pomocą:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-227">Once this code is nullable aware, you can express this concept more clearly to callers using the <xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute?displayProperty=nameWithType>:</span></span>

```csharp
[DisallowNull]
public string? ReviewComment
{
    get => _comment;
    set => _comment = value ?? throw new ArgumentNullException(nameof(value), "Cannot set to null");
}
string? _comment;
```

<span data-ttu-id="9b6dc-228">W kontekście `ReviewComment` `get` możliwego do anulowania akcesor może zwrócić wartość domyślną `null`programu .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-228">In a nullable context, the `ReviewComment` `get` accessor could return the default value of `null`.</span></span> <span data-ttu-id="9b6dc-229">Kompilator ostrzega, że należy sprawdzić przed dostępem.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-229">The compiler warns that it must be checked before access.</span></span> <span data-ttu-id="9b6dc-230">Co więcej, ostrzega dzwoniących, że nawet `null`jeśli może to być , `null`dzwoniący nie powinni wyraźnie ustawić go na .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-230">Furthermore, it warns callers that, even though it could be `null`, callers shouldn't explicitly set it to `null`.</span></span> <span data-ttu-id="9b6dc-231">Atrybut `DisallowNull` określa również *warunek wstępny*, nie wpływa `get` na akcesor.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-231">The `DisallowNull` attribute also specifies a *pre-condition*, it does not affect the `get` accessor.</span></span> <span data-ttu-id="9b6dc-232">Należy użyć atrybutu, `DisallowNull` gdy obserwujesz następujące cechy dotyczące:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-232">You should choose to use the `DisallowNull` attribute when you observe these characteristics about:</span></span>

1. <span data-ttu-id="9b6dc-233">Zmienna może `null` znajdować się w podstawowych scenariuszach, często podczas pierwszego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-233">The variable could be `null` in core scenarios, often when first instantiated.</span></span>
1. <span data-ttu-id="9b6dc-234">Zmienna nie powinna być jawnie ustawiona na `null`.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-234">The variable shouldn't be explicitly set to `null`.</span></span>

<span data-ttu-id="9b6dc-235">Te sytuacje są powszechne w kodzie, który pierwotnie *null oblivious*.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-235">These situations are common in code that was originally *null oblivious*.</span></span> <span data-ttu-id="9b6dc-236">Może się okazać, że właściwości obiektu są ustawione w dwóch różnych operacji inicjowania.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-236">It may be that object properties are set in two distinct initialization operations.</span></span> <span data-ttu-id="9b6dc-237">Może się okazać, że niektóre właściwości są ustawiane tylko po zakończeniu niektórych prac asynchronicznych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-237">It may be that some properties are set only after some asynchronous work has completed.</span></span>

<span data-ttu-id="9b6dc-238">`AllowNull` Atrybuty `DisallowNull` i umożliwiają określenie, że warunki wstępne dla zmiennych mogą nie odpowiadać adnotacjami nullable dla tych zmiennych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-238">The `AllowNull` and `DisallowNull` attributes enable you to specify that preconditions on variables may not match the nullable annotations on those variables.</span></span> <span data-ttu-id="9b6dc-239">Zapewniają one więcej szczegółów na temat cech interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-239">These provide more detail about the characteristics of your API.</span></span> <span data-ttu-id="9b6dc-240">Te dodatkowe informacje pomagają wywołującym poprawnie używać interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-240">This additional information helps callers use your API correctly.</span></span> <span data-ttu-id="9b6dc-241">Pamiętaj, że określono warunki wstępne przy użyciu następujących atrybutów:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-241">Remember you specify preconditions using the following attributes:</span></span>

- <span data-ttu-id="9b6dc-242">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Argument wejściowy nienastępny do wartości null może mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-242">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="9b6dc-243">[NieuprawnionyNull:](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute)Nullable argument wejściowy nigdy nie powinien być null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-243">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>

## <a name="specify-post-conditions-maybenull-and-notnull"></a><span data-ttu-id="9b6dc-244">Określ warunki `MaybeNull` post: i`NotNull`</span><span class="sxs-lookup"><span data-stu-id="9b6dc-244">Specify post-conditions: `MaybeNull` and `NotNull`</span></span>

<span data-ttu-id="9b6dc-245">Załóżmy, że masz metodę z następującym podpisem:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-245">Suppose you have a method with the following signature:</span></span>

```csharp
public Customer FindCustomer(string lastName, string firstName)
```

<span data-ttu-id="9b6dc-246">Prawdopodobnie napisałeś taką metodę, aby `null` powrócić, gdy poszukiwana nazwa nie została znaleziona.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-246">You've likely written a method like this to return `null` when the name sought wasn't found.</span></span> <span data-ttu-id="9b6dc-247">Wyraźnie `null` wskazuje, że rekord nie został znaleziony.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-247">The `null` clearly indicates that the record wasn't found.</span></span> <span data-ttu-id="9b6dc-248">W tym przykładzie prawdopodobnie zmienisz typ `Customer` `Customer?`zwracany z na .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-248">In this example, you'd likely change the return type from `Customer` to `Customer?`.</span></span> <span data-ttu-id="9b6dc-249">Deklarowanie wartości zwracanej jako typu odwołania powodującego wartość null określa intencję tego interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-249">Declaring the return value as a nullable reference type specifies the intent of this API clearly.</span></span>

<span data-ttu-id="9b6dc-250">Z przyczyn objętych [definicjami rodzajowymi i niemożnością użycia](#generic-definitions-and-nullability) ta technika nie działa z metodami ogólnymi.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-250">For reasons covered under [Generic definitions and nullability](#generic-definitions-and-nullability) that technique does not work with generic methods.</span></span> <span data-ttu-id="9b6dc-251">Może być metoda rodzajowa, która następuje podobny wzorzec:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-251">You may have a generic method that follows a similar pattern:</span></span>

```csharp
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="9b6dc-252">Nie można określić, że `T?`zwracana jest wartość .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-252">You can't specify that the return value is `T?`.</span></span> <span data-ttu-id="9b6dc-253">Metoda zwraca, `null` gdy nie znaleziono poszukiwanego elementu.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-253">The method returns `null` when the sought item isn't found.</span></span> <span data-ttu-id="9b6dc-254">Ponieważ nie można zadeklarować typu zwracanego, `T?` należy dodać `MaybeNull` adnotację do zwracania metody:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-254">Since you can't declare a `T?` return type, you add the `MaybeNull` annotation to the method return:</span></span>

```csharp
[return: MaybeNull]
public T Find<T>(IEnumerable<T> sequence, Func<T, bool> match)
```

<span data-ttu-id="9b6dc-255">Powyższy kod informuje wywołujących, że umowa implikuje typ nienależyte do null, ale wartość *zwracana może* być rzeczywiście null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-255">The preceding code informs callers that the contract implies a non-nullable type, but the return value *may* actually be null.</span></span>  <span data-ttu-id="9b6dc-256">Użyj `MaybeNull` atrybutu, gdy interfejs API powinien być typem nienastępnym do wartości null, `null` zazwyczaj parametrem typu ogólnego, ale mogą występować wystąpienia, w których zostaną zwrócone.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-256">Use the `MaybeNull` attribute when your API should be a non-nullable type, typically a generic type parameter, but there may be instances where `null` would be returned.</span></span>

<span data-ttu-id="9b6dc-257">Można również określić, że `out` wartość `ref` zwracana lub argument lub nie jest null, nawet jeśli typ jest typem odwołania z dopuszczalną wartością null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-257">You can also specify that a return value or an `out` or `ref` argument isn't null even though the type is a nullable reference type.</span></span> <span data-ttu-id="9b6dc-258">Należy wziąć pod uwagę metodę, która zapewnia tablicy jest wystarczająco duży, aby pomieścić wiele elementów.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-258">Consider a method that ensures an array is large enough to hold a number of elements.</span></span> <span data-ttu-id="9b6dc-259">Jeśli argument wejściowy nie ma pojemności, procedura będzie przydzielić nową tablicę i skopiować wszystkie istniejące elementy do niego.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-259">If the input argument doesn't have capacity, the routine would allocate a new array and copy all the existing elements into it.</span></span> <span data-ttu-id="9b6dc-260">Jeśli argument input `null`jest , procedura będzie przydzielić nowy magazyn.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-260">If the input argument is `null`, the routine would allocate new storage.</span></span> <span data-ttu-id="9b6dc-261">Jeśli istnieje wystarczająca pojemność, procedura nie robi nic:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-261">If there's sufficient capacity, the routine does nothing:</span></span>

```csharp
public void EnsureCapacity<T>(ref T[] storage, int size)
```

<span data-ttu-id="9b6dc-262">Tę procedurę można wywołać w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-262">You could call this routine as follows:</span></span>

```csharp
// messages has the default value (null) when EnsureCapacity is called:
EnsureCapacity<string>(ref messages, 10);
// messages is not null.
EnsureCapacity<string>(messages, 50);
```

<span data-ttu-id="9b6dc-263">Po włączeniu typów odwołań null, chcesz upewnić się, że poprzedni kod kompiluje się bez ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-263">After enabling null reference types, you want to ensure that the preceding code compiles without warnings.</span></span> <span data-ttu-id="9b6dc-264">Gdy metoda zwraca, `storage` argument jest gwarantowane nie null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-264">When the method returns, the `storage` argument is guaranteed to be not null.</span></span> <span data-ttu-id="9b6dc-265">Jednak jest dopuszczalne, `EnsureCapacity` aby wywołać z odwołaniem null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-265">However, it's acceptable to call `EnsureCapacity` with a null reference.</span></span> <span data-ttu-id="9b6dc-266">Można wprowadzić `storage` typ odwołania z dopuszczalną `NotNull` wartością null i dodać warunek post do deklaracji parametrów:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-266">You can make `storage` a nullable reference type, and add the `NotNull` post-condition to the parameter declaration:</span></span>

```csharp
public void EnsureCapacity<T>([NotNull]ref T[]? storage, int size)
```

<span data-ttu-id="9b6dc-267">Powyższy kod wyraża istniejącą umowę bardzo wyraźnie: wywołujący mogą `null` przekazać zmienną z wartością, ale wartość zwracana jest gwarantowana, że nigdy nie będzie null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-267">The preceding code expresses the existing contract very clearly: Callers can pass a variable with the `null` value, but the return value is guaranteed to never be null.</span></span> <span data-ttu-id="9b6dc-268">Atrybut `NotNull` jest najbardziej przydatne `ref` `out` dla `null` i argumenty, gdzie mogą być przekazywane jako argument, ale ten argument jest gwarantowane nie jest null, gdy zwraca metodę.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-268">The `NotNull` attribute is most useful for `ref` and `out` arguments where `null` may be passed as an argument, but that argument is guaranteed to be not null when the method returns.</span></span>

<span data-ttu-id="9b6dc-269">Bezwarunkowe warunki postwarunkowe można określić przy użyciu następujących atrybutów:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-269">You specify unconditional postconditions using the following attributes:</span></span>

- <span data-ttu-id="9b6dc-270">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Wartość zwracana bez wartości null może być wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-270">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="9b6dc-271">[NotNull:](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute)Nullable wartość zwracana nigdy nie będzie null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-271">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>

## <a name="specify-conditional-post-conditions-notnullwhen-maybenullwhen-and-notnullifnotnull"></a><span data-ttu-id="9b6dc-272">Określ warunkowe warunki `NotNullWhen` `MaybeNullWhen`post:, , i`NotNullIfNotNull`</span><span class="sxs-lookup"><span data-stu-id="9b6dc-272">Specify conditional post-conditions: `NotNullWhen`, `MaybeNullWhen`, and `NotNullIfNotNull`</span></span>

<span data-ttu-id="9b6dc-273">Prawdopodobnie znasz `string` metodę <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-273">You're likely familiar with the `string` method <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType>.</span></span> <span data-ttu-id="9b6dc-274">Ta metoda `true` zwraca, gdy argument ma wartość null lub pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-274">This method returns `true` when the argument is null or an empty string.</span></span> <span data-ttu-id="9b6dc-275">Jest to forma sprawdzania wartości null: osoby dzwoniące nie muszą sprawdzać wartości `false`null, jeśli metoda zwraca .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-275">It's a form of null-check: Callers don't need to null-check the argument if the method returns `false`.</span></span> <span data-ttu-id="9b6dc-276">Aby metoda taka jak ta nullable świadomość, należy ustawić argument do typu `NotNullWhen` odwołania nullable i dodać atrybut:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-276">To make a method like this nullable aware, you'd set the argument to a nullable reference type, and add the `NotNullWhen` attribute:</span></span>

```csharp
bool IsNullOrEmpty([NotNullWhen(false)]string? value);
```

<span data-ttu-id="9b6dc-277">Informuje kompilator, że każdy kod, `false` w którym jest wartość zwracana, nie musi być sprawdzany z wartością null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-277">That informs the compiler that any code where the return value is `false` need not be null-checked.</span></span> <span data-ttu-id="9b6dc-278">Dodanie atrybutu informuje analizę statyczną kompilatora, `IsNullOrEmpty` która wykonuje niezbędne sprawdzanie wartości `false`null: po `null`powrocie argument input nie jest .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-278">The addition of the attribute informs the compiler's static analysis that `IsNullOrEmpty` performs the necessary null check: when it returns `false`, the input argument is not `null`.</span></span>

```csharp
string? userInput = GetUserInput();
if (!string.IsNullOrEmpty(userInput))
{
   int messageLength = userInput.Length; // no null check needed.
}
// null check needed on userInput here.
```

<span data-ttu-id="9b6dc-279">Metoda <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> zostanie oznaczona jako pokazano powyżej dla .NET Core 3.0.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-279">The <xref:System.String.IsNullOrEmpty(System.String)?DisplayProperty=nameWithType> method will be annotated as shown above for .NET Core 3.0.</span></span> <span data-ttu-id="9b6dc-280">Może mieć podobne metody w bazie kodu, które sprawdzają stan obiektów dla wartości null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-280">You may have similar methods in your codebase that check the state of objects for null values.</span></span> <span data-ttu-id="9b6dc-281">Kompilator nie rozpoznaje niestandardowych metod sprawdzania wartości null i musisz samodzielnie dodać adnotacje.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-281">The compiler won't recognize custom null check methods, and you'll need to add the annotations yourself.</span></span> <span data-ttu-id="9b6dc-282">Po dodaniu atrybutu, analiza statyczna kompilatora wie, kiedy testowana zmienna została sprawdzona wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-282">When you add the attribute, the compiler's static analysis knows when the tested variable has been null checked.</span></span>

<span data-ttu-id="9b6dc-283">Innym zastosowaniem `Try*` dla tych atrybutów jest wzorzec.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-283">Another use for these attributes is the `Try*` pattern.</span></span> <span data-ttu-id="9b6dc-284">Warunki powarunkowe `ref` `out` i zmienne są przekazywane za pośrednictwem wartości zwracanej.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-284">The postconditions for `ref` and `out` variables are communicated through the return value.</span></span> <span data-ttu-id="9b6dc-285">Należy wziąć pod uwagę tę metodę pokazano wcześniej:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-285">Consider this method shown earlier:</span></span>

```csharp
bool TryGetMessage(string key, out string message)
```

<span data-ttu-id="9b6dc-286">Poprzednia metoda jest zgodna z typowym idiomem `message` .NET: zwracana wartość wskazuje, czy została ustawiona na znalezioną wartość lub, jeśli nie zostanie znaleziony żaden komunikat, do wartości domyślnej.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-286">The preceding method follows a typical .NET idiom: the return value indicates if `message` was set to the found value or, if no message is found, to the default value.</span></span> <span data-ttu-id="9b6dc-287">Jeśli metoda `true`zwraca , `message` wartość nie jest null; w przeciwnym razie `message` metoda ustawia wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-287">If the method returns `true`, the value of `message` isn't null; otherwise, the method sets `message` to null.</span></span>

<span data-ttu-id="9b6dc-288">Można przekazać, że idiom przy użyciu atrybutu. `NotNullWhen`</span><span class="sxs-lookup"><span data-stu-id="9b6dc-288">You can communicate that idiom using the `NotNullWhen` attribute.</span></span> <span data-ttu-id="9b6dc-289">Podczas aktualizowania podpisu dla typów `message` odwołań, których można unieważnić, należy wykonać `string?` i dodać atrybut:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-289">When you update the signature for nullable reference types, make `message` a `string?` and add an attribute:</span></span>

```csharp
bool TryGetMessage(string key, [NotNullWhen(true)] out string? message)
```

<span data-ttu-id="9b6dc-290">W poprzednim przykładzie wartość `message` jest znana jako nie `TryGetMessage` `true`null podczas zwraca .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-290">In the preceding example, the value of `message` is known to be not null when `TryGetMessage` returns `true`.</span></span> <span data-ttu-id="9b6dc-291">Podobne metody w bazie kodu należy dodawać adnotacje w `null`taki sam sposób: argumenty mogą `true`być i są znane jako nie null, gdy metoda zwraca .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-291">You should annotate similar methods in your codebase in the same way: the arguments could be `null`, and are known to be not null when the method returns `true`.</span></span>

<span data-ttu-id="9b6dc-292">Istnieje jeden atrybut końcowy, który może być również potrzebny.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-292">There's one final attribute you may also need.</span></span> <span data-ttu-id="9b6dc-293">Czasami stan zerowy wartości zwracanej zależy od stanu zerowego jednego lub więcej argumentów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-293">Sometimes the null state of a return value depends on the null state of one or more input arguments.</span></span> <span data-ttu-id="9b6dc-294">Metody te zwracają wartość nie null, gdy pewne `null`argumenty wejściowe nie są .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-294">These methods will return a non-null value whenever certain input arguments aren't `null`.</span></span> <span data-ttu-id="9b6dc-295">Aby poprawnie dodawać adnotacje `NotNullIfNotNull` do tych metod, należy użyć atrybutu.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-295">To correctly annotate these methods, you use the `NotNullIfNotNull` attribute.</span></span> <span data-ttu-id="9b6dc-296">Należy wziąć pod uwagę następującą metodę:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-296">Consider the following method:</span></span>

```csharp
string GetTopLevelDomainFromFullUrl(string url);
```

<span data-ttu-id="9b6dc-297">Jeśli `url` argument nie jest null, dane `null`wyjściowe nie jest .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-297">If the `url` argument isn't null, the output isn't `null`.</span></span> <span data-ttu-id="9b6dc-298">Po włączeniu odwołań nullable, że podpis działa poprawnie, pod warunkiem, że interfejs API nigdy nie akceptuje null danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-298">Once nullable references are enabled, that signature works correctly, provided your API never accepts a null input.</span></span> <span data-ttu-id="9b6dc-299">Jednak jeśli dane wejściowe może być null, a następnie zwraca wartość może być również null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-299">However, if the input could be null, then return value could also be null.</span></span> <span data-ttu-id="9b6dc-300">W związku z tym można zmienić podpis na następujący kod:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-300">Therefore, you could change the signature to the following code:</span></span>

```csharp
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="9b6dc-301">To również działa, ale często zmusza `null` dzwoniących do wdrożenia dodatkowych kontroli.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-301">That also works, but will often force callers to implement extra `null` checks.</span></span> <span data-ttu-id="9b6dc-302">Umowa jest taka, że `null` wartość zwracana `url` będzie `null`tylko wtedy, gdy argument wejściowy jest .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-302">The contract is that the return value would be `null` only when the input argument `url` is `null`.</span></span> <span data-ttu-id="9b6dc-303">Aby wyrazić tę umowę, należy opisać tę metodę, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-303">To express that contract, you would annotate this method as shown in the following code:</span></span>

```csharp
[return: NotNullIfNotNull("url")]
string? GetTopLevelDomainFromFullUrl(string? url);
```

<span data-ttu-id="9b6dc-304">Wartość zwracana i argument zostały oś `?` tym adnotacje ze `null`wskazaniem, że albo może być .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-304">The return value and the argument have both been annotated with the `?` indicating that either could be `null`.</span></span> <span data-ttu-id="9b6dc-305">Atrybut dalej wyjaśnia, że wartość zwracana nie będzie `url` null, `null`gdy argument nie jest .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-305">The attribute further clarifies that the return value won't be null when the `url` argument isn't `null`.</span></span>

<span data-ttu-id="9b6dc-306">Warunkowe warunki postconditions przy użyciu tych atrybutów:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-306">You specify conditional postconditions using these attributes:</span></span>

- <span data-ttu-id="9b6dc-307">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Argument wejściowy nienastępny do wartości `bool` null może mieć wartość null, gdy metoda zwraca określoną wartość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-307">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable input argument may be null when the method returns the specified `bool` value.</span></span>
- <span data-ttu-id="9b6dc-308">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Argument wejściowy do null nie będzie `bool` null, gdy metoda zwraca określoną wartość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-308">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable input argument will not be null when the method returns the specified `bool` value.</span></span>
- <span data-ttu-id="9b6dc-309">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Zwracana wartość nie jest zerowa, jeśli argument wejściowy dla określonego parametru nie jest null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-309">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>

## <a name="generic-definitions-and-nullability"></a><span data-ttu-id="9b6dc-310">Definicje ogólne i możliwość niemożności</span><span class="sxs-lookup"><span data-stu-id="9b6dc-310">Generic definitions and nullability</span></span>

<span data-ttu-id="9b6dc-311">Prawidłowe komunikowanie stanu null typów ogólnych i metod ogólnych wymaga szczególnej ostrożności.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-311">Correctly communicating the null state of generic types and generic methods requires special care.</span></span> <span data-ttu-id="9b6dc-312">Wynika to z faktu, że typ wartości nullable i typ odwołania nullable są zasadniczo różne.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-312">This stems from the fact that a nullable value type and a nullable reference type are fundamentally different.</span></span> <span data-ttu-id="9b6dc-313">An `int?` jest synonimem `Nullable<int>`, `string?` mając `string` na uwadze, że jest z atrybutem dodanym przez kompilator.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-313">An `int?` is a synonym for `Nullable<int>`, whereas `string?` is `string` with an attribute added by the compiler.</span></span> <span data-ttu-id="9b6dc-314">Wynik jest, że kompilator nie może `T?` wygenerować poprawny kod bez wiedząc, czy `T` jest `class` lub . `struct`</span><span class="sxs-lookup"><span data-stu-id="9b6dc-314">The result is that the compiler can't generate correct code for `T?` without knowing if `T` is a `class` or a `struct`.</span></span>

<span data-ttu-id="9b6dc-315">Nie oznacza to, że nie można użyć typu nullable (typ wartości lub typ odwołania) jako argumentu typu dla zamkniętego typu ogólnego.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-315">This doesn't mean you can't use a nullable type (either value type or reference type) as the type argument for a closed generic type.</span></span> <span data-ttu-id="9b6dc-316">Oba `List<string?>` `List<int?>` i są prawidłowe `List<T>`wystąpienia .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-316">Both `List<string?>` and `List<int?>` are valid instantiations of `List<T>`.</span></span>

<span data-ttu-id="9b6dc-317">Oznacza to, że nie można `T?` używać w deklaracji klasy lub metody rodzajowej bez ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-317">What it does mean is that you can't use `T?` in a generic class or method declaration without constraints.</span></span> <span data-ttu-id="9b6dc-318">Na przykład <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> nie zostanie zmieniona, aby powrócić `T?`.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-318">For example, <xref:System.Linq.Enumerable.FirstOrDefault%60%601(System.Collections.Generic.IEnumerable%7B%60%600%7D)?displayProperty=nameWithType> won't be changed to return `T?`.</span></span> <span data-ttu-id="9b6dc-319">Można przezwyciężyć to ograniczenie, `struct` dodając `class` albo ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-319">You can overcome this limitation by adding either the `struct` or `class` constraint.</span></span> <span data-ttu-id="9b6dc-320">Z jednym z tych ograniczeń, kompilator wie, `T` jak `T?`wygenerować kod dla obu i .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-320">With either of those constraints, the compiler knows how to generate code for both `T` and `T?`.</span></span>

<span data-ttu-id="9b6dc-321">Można ograniczyć typy używane dla argumentu typu ogólnego, aby były typami nienastępulnymi wartością null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-321">You may want to restrict the types used for a generic type argument to be non-nullable types.</span></span> <span data-ttu-id="9b6dc-322">Można to zrobić, `notnull` dodając ograniczenie do tego argumentu typu.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-322">You can do that by adding the `notnull` constraint on that type argument.</span></span> <span data-ttu-id="9b6dc-323">Po zastosowaniu tego ograniczenia argument typu nie może być typem do null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-323">When that constraint is applied, the type argument must not be a nullable type.</span></span>

## <a name="conclusions"></a><span data-ttu-id="9b6dc-324">Wnioski</span><span class="sxs-lookup"><span data-stu-id="9b6dc-324">Conclusions</span></span>

<span data-ttu-id="9b6dc-325">Dodawanie typów odwołań do wartości nullable zapewnia początkowe słownictwo opisujące `null`oczekiwania interfejsów API dla zmiennych, które mogą być .</span><span class="sxs-lookup"><span data-stu-id="9b6dc-325">Adding nullable reference types provides an initial vocabulary to describe your APIs expectations for variables that could be `null`.</span></span> <span data-ttu-id="9b6dc-326">Dodatkowe atrybuty zapewniają bogatsze słownictwo do opisania stanu null zmiennych jako warunków wstępnych i postconditions.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-326">The additional attributes provide a richer vocabulary to describe the null state of variables as preconditions and postconditions.</span></span> <span data-ttu-id="9b6dc-327">Te atrybuty jaśniej opisują twoje oczekiwania i zapewniają lepsze środowisko dla deweloperów korzystających z interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-327">These attributes more clearly describe your expectations and provide a better experience for the developers using your APIs.</span></span>

<span data-ttu-id="9b6dc-328">Podczas aktualizowania bibliotek dla kontekstu możliwego do podenia, dodaj te atrybuty, aby poprowadzić użytkowników interfejsów API do prawidłowego użycia.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-328">As you update libraries for a nullable context, add these attributes to guide users of your APIs to the correct usage.</span></span> <span data-ttu-id="9b6dc-329">Te atrybuty pomagają w pełni opisać zerowy stan argumentów wejściowych i zwracać wartości:</span><span class="sxs-lookup"><span data-stu-id="9b6dc-329">These attributes help you fully describe the null-state of input arguments and return values:</span></span>

- <span data-ttu-id="9b6dc-330">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): Argument wejściowy nienastępny do wartości null może mieć wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-330">[AllowNull](xref:System.Diagnostics.CodeAnalysis.AllowNullAttribute): A non-nullable input argument may be null.</span></span>
- <span data-ttu-id="9b6dc-331">[NieuprawnionyNull:](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute)Nullable argument wejściowy nigdy nie powinien być null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-331">[DisallowNull](xref:System.Diagnostics.CodeAnalysis.DisallowNullAttribute): A nullable input argument should never be null.</span></span>
- <span data-ttu-id="9b6dc-332">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): Wartość zwracana bez wartości null może być wartość null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-332">[MaybeNull](xref:System.Diagnostics.CodeAnalysis.MaybeNullAttribute): A non-nullable return value may be null.</span></span>
- <span data-ttu-id="9b6dc-333">[NotNull:](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute)Nullable wartość zwracana nigdy nie będzie null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-333">[NotNull](xref:System.Diagnostics.CodeAnalysis.NotNullAttribute): A nullable return value will never be null.</span></span>
- <span data-ttu-id="9b6dc-334">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): Argument wejściowy nienastępny do wartości `bool` null może mieć wartość null, gdy metoda zwraca określoną wartość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-334">[MaybeNullWhen](xref:System.Diagnostics.CodeAnalysis.MaybeNullWhenAttribute): A non-nullable input argument may be null when the method returns the specified `bool` value.</span></span>
- <span data-ttu-id="9b6dc-335">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): Argument wejściowy do null nie będzie `bool` null, gdy metoda zwraca określoną wartość.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-335">[NotNullWhen](xref:System.Diagnostics.CodeAnalysis.NotNullWhenAttribute): A nullable input argument will not be null when the method returns the specified `bool` value.</span></span>
- <span data-ttu-id="9b6dc-336">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): Zwracana wartość nie jest zerowa, jeśli argument wejściowy dla określonego parametru nie jest null.</span><span class="sxs-lookup"><span data-stu-id="9b6dc-336">[NotNullIfNotNull](xref:System.Diagnostics.CodeAnalysis.NotNullIfNotNullAttribute): A return value isn't null if the input argument for the specified parameter isn't null.</span></span>
