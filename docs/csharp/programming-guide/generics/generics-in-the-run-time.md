---
title: Typy ogólne w czasie wykonywania (Przewodnik programowania w języku C#)
ms.date: 07/20/2015
helpviewer_keywords:
- generics [C#], at run time
ms.assetid: 119df7e6-9ceb-49df-af36-24f8f8c0747f
ms.openlocfilehash: e5eb0ed02b1462aa126e55d688f4166aa741353a
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/04/2018
ms.locfileid: "43513809"
---
# <a name="generics-in-the-run-time-c-programming-guide"></a><span data-ttu-id="a28d5-102">Typy ogólne w czasie wykonywania (Przewodnik programowania w języku C#)</span><span class="sxs-lookup"><span data-stu-id="a28d5-102">Generics in the Run Time (C# Programming Guide)</span></span>
<span data-ttu-id="a28d5-103">W przypadku typu ogólnego lub metody jest kompilowany na język Microsoft intermediate language (MSIL), zawiera metadane, które identyfikuje go jako parametrów typu.</span><span class="sxs-lookup"><span data-stu-id="a28d5-103">When a generic type or method is compiled into Microsoft intermediate language (MSIL), it contains metadata that identifies it as having type parameters.</span></span> <span data-ttu-id="a28d5-104">Jak kod w języku MSIL dla typu ogólnego jest używany różni się w oparciu czy parametr typu podana jest wartość typu lub typów referencyjnych.</span><span class="sxs-lookup"><span data-stu-id="a28d5-104">How the MSIL for a generic type is used differs based on whether the supplied type parameter is a value type or reference type.</span></span>  
  
 <span data-ttu-id="a28d5-105">W przypadku typu ogólnego, najpierw jest zbudowany z typem wartości jako parametr, środowisko uruchomieniowe tworzy wyspecjalizowane typu ogólnego z podany parametr lub parametry zastąpione w odpowiednich miejscach w kodzie MSIL.</span><span class="sxs-lookup"><span data-stu-id="a28d5-105">When a generic type is first constructed with a value type as a parameter, the runtime creates a specialized generic type with the supplied parameter or parameters substituted in the appropriate locations in the MSIL.</span></span> <span data-ttu-id="a28d5-106">Specjalne typy ogólne są tworzone jeden raz dla każdego typu unikatową wartość, która jest używana jako parametr.</span><span class="sxs-lookup"><span data-stu-id="a28d5-106">Specialized generic types are created one time for each unique value type that is used as a parameter.</span></span>  
  
 <span data-ttu-id="a28d5-107">Na przykład załóżmy, że kodu programu zadeklarowana stosu, który jest konstruowany liczb całkowitych:</span><span class="sxs-lookup"><span data-stu-id="a28d5-107">For example, suppose your program code declared a stack that is constructed of integers:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#42](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_1.cs)]  
  
 <span data-ttu-id="a28d5-108">W tym momencie środowisko wykonawcze zgłasza wersji specjalistycznej metody <xref:System.Collections.Generic.Stack%601> klasy, która ma całkowitą odpowiednio zastąpiony parametrem.</span><span class="sxs-lookup"><span data-stu-id="a28d5-108">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that has the integer substituted appropriately for its parameter.</span></span> <span data-ttu-id="a28d5-109">Teraz zawsze, gdy kod program używa stosu liczb całkowitych, wyspecjalizowany powtórnych czasu wykonywania wygenerowany <xref:System.Collections.Generic.Stack%601> klasy.</span><span class="sxs-lookup"><span data-stu-id="a28d5-109">Now, whenever your program code uses a stack of integers, the runtime reuses the generated specialized <xref:System.Collections.Generic.Stack%601> class.</span></span> <span data-ttu-id="a28d5-110">W poniższym przykładzie są tworzone dwa wystąpienia stosu liczb całkowitych i one współdzielić jedno wystąpienie `Stack<int>` kodu:</span><span class="sxs-lookup"><span data-stu-id="a28d5-110">In the following example, two instances of a stack of integers are created, and they share a single instance of the `Stack<int>` code:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#43](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_2.cs)]  
  
 <span data-ttu-id="a28d5-111">Jednak Załóżmy, że oznacza innego <xref:System.Collections.Generic.Stack%601> klasy przy użyciu innego typu wartości, takich jak `long` lub struktury zdefiniowany przez użytkownika jako jego parametr jest tworzony w innym punkcie w kodzie.</span><span class="sxs-lookup"><span data-stu-id="a28d5-111">However, suppose that another <xref:System.Collections.Generic.Stack%601> class with a different value type such as a `long` or a user-defined structure as its parameter is created at another point in your code.</span></span> <span data-ttu-id="a28d5-112">W rezultacie środowisko wykonawcze zgłasza inna wersja tego typu ogólnego i zastępuje `long` w odpowiednich miejscach w kodzie MSIL.</span><span class="sxs-lookup"><span data-stu-id="a28d5-112">As a result, the runtime generates another version of the generic type and substitutes a `long` in the appropriate locations in MSIL.</span></span> <span data-ttu-id="a28d5-113">Konwersje są już potrzebne, ponieważ każdy wyspecjalizowane klasy ogólnej natywnie zawiera typ wartości.</span><span class="sxs-lookup"><span data-stu-id="a28d5-113">Conversions are no longer necessary because each specialized generic class natively contains the value type.</span></span>  
  
 <span data-ttu-id="a28d5-114">Typy ogólne działa nieco inaczej dla typów odwołań.</span><span class="sxs-lookup"><span data-stu-id="a28d5-114">Generics work somewhat differently for reference types.</span></span> <span data-ttu-id="a28d5-115">Po raz pierwszy typ ogólny jest skonstruowany przy użyciu dowolnego typu odwołania, środowisko uruchomieniowe tworzy specjalne typu ogólnego z odwołania do obiektu podstawiane dla parametrów w MSIL.</span><span class="sxs-lookup"><span data-stu-id="a28d5-115">The first time a generic type is constructed with any reference type, the runtime creates a specialized generic type with object references substituted for the parameters in the MSIL.</span></span> <span data-ttu-id="a28d5-116">Następnie ilekroć dany skonstruowanego typu zostanie uruchomiony z typem referencyjnym, jako parametr, niezależnie od tego, jakiego typu, jest środowisko uruchomieniowe ponownie używa uprzednio utworzonej wersji specjalistycznej metody typu ogólnego.</span><span class="sxs-lookup"><span data-stu-id="a28d5-116">Then, every time that a constructed type is instantiated with a reference type as its parameter, regardless of what type it is, the runtime reuses the previously created specialized version of the generic type.</span></span> <span data-ttu-id="a28d5-117">Jest to możliwe, ponieważ wszystkie odwołania mają taki sam rozmiar.</span><span class="sxs-lookup"><span data-stu-id="a28d5-117">This is possible because all references are the same size.</span></span>  
  
 <span data-ttu-id="a28d5-118">Załóżmy, że masz dwa typy referencyjne `Customer` klasy i `Order` klasy, a także Załóżmy, że utworzony stos `Customer` typów:</span><span class="sxs-lookup"><span data-stu-id="a28d5-118">For example, suppose you had two reference types, a `Customer` class and an `Order` class, and also suppose that you created a stack of `Customer` types:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#47](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_3.cs)]  
  
 [!code-csharp[csProgGuideGenerics#44](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_4.cs)]  
  
 <span data-ttu-id="a28d5-119">W tym momencie środowisko wykonawcze zgłasza wersji specjalistycznej metody <xref:System.Collections.Generic.Stack%601> klasy, która przechowuje odwołania do obiektów, które są wypełniane później zamiast przechowywania danych.</span><span class="sxs-lookup"><span data-stu-id="a28d5-119">At this point, the runtime generates a specialized version of the <xref:System.Collections.Generic.Stack%601> class that stores object references that will be filled in later instead of storing data.</span></span> <span data-ttu-id="a28d5-120">Załóżmy, że następny wiersz kodu tworzy stosu innego typu odwołania, który nosi nazwę `Order`:</span><span class="sxs-lookup"><span data-stu-id="a28d5-120">Suppose the next line of code creates a stack of another reference type, which is named `Order`:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#45](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_5.cs)]  
  
 <span data-ttu-id="a28d5-121">W odróżnieniu od z typami wartości innego wyspecjalizowany wersję <xref:System.Collections.Generic.Stack%601> klasa nie jest tworzona dla `Order` typu.</span><span class="sxs-lookup"><span data-stu-id="a28d5-121">Unlike with value types, another specialized version of the <xref:System.Collections.Generic.Stack%601> class is not created for the `Order` type.</span></span> <span data-ttu-id="a28d5-122">Zamiast tego wystąpienia wersji specjalistycznej metody <xref:System.Collections.Generic.Stack%601> klasa jest tworzona i `orders` zmienna jest ustawiona na odwoływać się do niego.</span><span class="sxs-lookup"><span data-stu-id="a28d5-122">Instead, an instance of the specialized version of the <xref:System.Collections.Generic.Stack%601> class is created and the `orders` variable is set to reference it.</span></span> <span data-ttu-id="a28d5-123">Załóżmy, że następnie napotkał wiersz kodu, aby utworzyć stos `Customer` typu:</span><span class="sxs-lookup"><span data-stu-id="a28d5-123">Suppose that you then encountered a line of code to create a stack of a `Customer` type:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#46](../../../csharp/programming-guide/generics/codesnippet/CSharp/generics-in-the-run-time_6.cs)]  
  
 <span data-ttu-id="a28d5-124">Podobnie jak w przypadku użycia poprzedniej <xref:System.Collections.Generic.Stack%601> utworzone za pomocą klasy `Order` wpisz inną instancję wyspecjalizowane <xref:System.Collections.Generic.Stack%601> klasa jest tworzona.</span><span class="sxs-lookup"><span data-stu-id="a28d5-124">As with the previous use of the <xref:System.Collections.Generic.Stack%601> class created by using the `Order` type, another instance of the specialized <xref:System.Collections.Generic.Stack%601> class is created.</span></span> <span data-ttu-id="a28d5-125">Wskaźniki, które są w niej zawarte są ustawione na odwołanie to obszar pamięci rozmiar `Customer` typu.</span><span class="sxs-lookup"><span data-stu-id="a28d5-125">The pointers that are contained therein are set to reference an area of memory the size of a `Customer` type.</span></span> <span data-ttu-id="a28d5-126">Ponieważ liczba typów referencyjnych może się różnić w sposób bardzo popularny od kolejnych programu implementacji języka C#, typów ogólnych znacznie zmniejsza ilość kodu przez ograniczenie do jednej liczby klas wyspecjalizowanych utworzony przez kompilator dla klas ogólnych typów referencyjnych.</span><span class="sxs-lookup"><span data-stu-id="a28d5-126">Because the number of reference types can vary wildly from program to program, the C# implementation of generics greatly reduces the amount of code by reducing to one the number of specialized classes created by the compiler for generic classes of reference types.</span></span>  
  
 <span data-ttu-id="a28d5-127">Ponadto podczas tworzenia wystąpienia rodzajowego klasy C# za pomocą parametru wartości typu lub odwołanie do typu, odbicie można badać je w czasie wykonywania i można ustalić typu rzeczywistego i jego parametr typu.</span><span class="sxs-lookup"><span data-stu-id="a28d5-127">Moreover, when a generic C# class is instantiated by using a value type or reference type parameter, reflection can query it at runtime and both its actual type and its type parameter can be ascertained.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a28d5-128">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="a28d5-128">See Also</span></span>

- <xref:System.Collections.Generic>  
- [<span data-ttu-id="a28d5-129">Przewodnik programowania w języku C#</span><span class="sxs-lookup"><span data-stu-id="a28d5-129">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)  
- [<span data-ttu-id="a28d5-130">Wprowadzenie do typów ogólnych</span><span class="sxs-lookup"><span data-stu-id="a28d5-130">Introduction to Generics</span></span>](../../../csharp/programming-guide/generics/introduction-to-generics.md)  
- [<span data-ttu-id="a28d5-131">Typy ogólne</span><span class="sxs-lookup"><span data-stu-id="a28d5-131">Generics</span></span>](~/docs/standard/generics/index.md)
