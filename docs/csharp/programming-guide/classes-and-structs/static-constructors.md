---
title: Konstruktory statyczne C# — Przewodnik programowania
ms.date: 07/20/2015
helpviewer_keywords:
- static constructors [C#]
- constructors [C#], static
ms.assetid: 151ec95e-3c4d-4ed7-885d-95b7a3be2e7d
ms.openlocfilehash: 7b8171e75bbd27a1079f2c6cc1b7aef6400d7419
ms.sourcegitcommit: ed3f926b6cdd372037bbcc214dc8f08a70366390
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/16/2020
ms.locfileid: "76115765"
---
# <a name="static-constructors-c-programming-guide"></a><span data-ttu-id="8ce25-102">Konstruktory statyczne (Przewodnik programowania w języku C#)</span><span class="sxs-lookup"><span data-stu-id="8ce25-102">Static Constructors (C# Programming Guide)</span></span>
<span data-ttu-id="8ce25-103">Statyczny Konstruktor jest używany do inicjowania wszelkich danych [statycznych](../../language-reference/keywords/static.md) lub wykonywania określonej akcji, która musi zostać wykonana tylko raz.</span><span class="sxs-lookup"><span data-stu-id="8ce25-103">A static constructor is used to initialize any [static](../../language-reference/keywords/static.md) data, or to perform a particular action that needs to be performed once only.</span></span> <span data-ttu-id="8ce25-104">Jest wywoływana automatycznie przed utworzeniem pierwszego wystąpienia lub odwołaniem do jakiegokolwiek statycznego członka.</span><span class="sxs-lookup"><span data-stu-id="8ce25-104">It is called automatically before the first instance is created or any static members are referenced.</span></span>  
  
 [!code-csharp[csProgGuideObjects#14](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#14)]  
 
## <a name="remarks"></a><span data-ttu-id="8ce25-105">Uwagi</span><span class="sxs-lookup"><span data-stu-id="8ce25-105">Remarks</span></span>
<span data-ttu-id="8ce25-106">Konstruktory statyczne mają następujące właściwości:</span><span class="sxs-lookup"><span data-stu-id="8ce25-106">Static constructors have the following properties:</span></span>  
  
- <span data-ttu-id="8ce25-107">Konstruktor statyczny nie przyjmuje modyfikatorów dostępu ani nie ma parametrów.</span><span class="sxs-lookup"><span data-stu-id="8ce25-107">A static constructor does not take access modifiers or have parameters.</span></span>  

- <span data-ttu-id="8ce25-108">Klasa lub struktura może mieć tylko jeden Konstruktor statyczny.</span><span class="sxs-lookup"><span data-stu-id="8ce25-108">A class or struct can only have one static constructor.</span></span>

- <span data-ttu-id="8ce25-109">Konstruktory statyczne nie mogą być dziedziczone ani przeciążone.</span><span class="sxs-lookup"><span data-stu-id="8ce25-109">Static constructors cannot be inherited or overloaded.</span></span>

- <span data-ttu-id="8ce25-110">Statyczny Konstruktor nie może być wywoływany bezpośrednio i jest przeznaczony tylko do wywoływania przez środowisko uruchomieniowe języka wspólnego (CLR).</span><span class="sxs-lookup"><span data-stu-id="8ce25-110">A static constructor cannot be called directly and is only meant to be called by the common language runtime (CLR).</span></span> <span data-ttu-id="8ce25-111">Jest wywoływana automatycznie.</span><span class="sxs-lookup"><span data-stu-id="8ce25-111">It is invoked automatically.</span></span>

- <span data-ttu-id="8ce25-112">Użytkownik nie ma kontroli nad tym, kiedy Konstruktor statyczny jest wykonywany w programie.</span><span class="sxs-lookup"><span data-stu-id="8ce25-112">The user has no control on when the static constructor is executed in the program.</span></span>
  
- <span data-ttu-id="8ce25-113">Statyczny Konstruktor jest automatycznie wywoływany w celu zainicjowania [klasy](../../language-reference/keywords/class.md) przed utworzeniem pierwszego wystąpienia lub odwołania do jakichkolwiek statycznych elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="8ce25-113">A static constructor is called automatically to initialize the [class](../../language-reference/keywords/class.md) before the first instance is created or any static members are referenced.</span></span> <span data-ttu-id="8ce25-114">Statyczny Konstruktor zostanie uruchomiony przed konstruktorem wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="8ce25-114">A static constructor will run before an instance constructor.</span></span> <span data-ttu-id="8ce25-115">Statyczny Konstruktor typu jest wywoływany, gdy metoda statyczna przypisana do zdarzenia lub delegata jest wywoływana, a nie podczas przypisywania.</span><span class="sxs-lookup"><span data-stu-id="8ce25-115">A type's static constructor is called when a static method assigned to an event or a delegate is invoked and not when it is assigned.</span></span> <span data-ttu-id="8ce25-116">Jeśli inicjatory zmiennych pól statycznych są obecne w klasie konstruktora statycznego, zostaną one wykonane w kolejności tekstowej, w której pojawiają się w deklaracji klasy bezpośrednio przed wykonaniem konstruktora statycznego.</span><span class="sxs-lookup"><span data-stu-id="8ce25-116">If static field variable initializers are present in the class of the static constructor, they will be executed in the textual order in which they appear in the class declaration immediately prior to the execution of the static constructor.</span></span>

- <span data-ttu-id="8ce25-117">Jeśli nie postanowisz statycznego konstruktora do zainicjowania pól statycznych, wszystkie pola statyczne są inicjowane do ich wartości domyślnej, jak wymieniono w [domyślnych wartości C# typów](../../language-reference/builtin-types/default-values.md).</span><span class="sxs-lookup"><span data-stu-id="8ce25-117">If you don't provide a static constructor to initialize static fields, all static fields are initialized to their default value as listed in [Default values of C# types](../../language-reference/builtin-types/default-values.md).</span></span>
  
- <span data-ttu-id="8ce25-118">Jeśli Konstruktor statyczny zgłosi wyjątek, środowisko uruchomieniowe nie wywołaje go po raz drugi, a typ pozostanie niezainicjowany przez okres istnienia domeny aplikacji, w której uruchomiono program.</span><span class="sxs-lookup"><span data-stu-id="8ce25-118">If a static constructor throws an exception, the runtime will not invoke it a second time, and the type will remain uninitialized for the lifetime of the application domain in which your program is running.</span></span> <span data-ttu-id="8ce25-119">Najczęściej wyjątek <xref:System.TypeInitializationException> jest zgłaszany, gdy Konstruktor statyczny nie może utworzyć wystąpienia typu lub dla nieobsłużonego wyjątku w konstruktorze statycznym.</span><span class="sxs-lookup"><span data-stu-id="8ce25-119">Most commonly, a <xref:System.TypeInitializationException> exception is thrown when a static constructor is unable to instantiate a type or for an unhandled exception occurring within a static constructor.</span></span> <span data-ttu-id="8ce25-120">W przypadku niejawnych konstruktorów statycznych, które nie są jawnie zdefiniowane w kodzie źródłowym, rozwiązywanie problemów może wymagać inspekcji kodu języka pośredniego (IL).</span><span class="sxs-lookup"><span data-stu-id="8ce25-120">For implicit static constructors that are not explicitly defined in source code, troubleshooting may require inspection of the intermediate language (IL) code.</span></span>

- <span data-ttu-id="8ce25-121">Obecność konstruktora statycznego uniemożliwia dodanie atrybutu typu <xref:System.Reflection.TypeAttributes.BeforeFieldInit>.</span><span class="sxs-lookup"><span data-stu-id="8ce25-121">The presence of a static constructor prevents the addition of the <xref:System.Reflection.TypeAttributes.BeforeFieldInit> type attribute.</span></span> <span data-ttu-id="8ce25-122">To ogranicza optymalizację środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="8ce25-122">This limits runtime optimization.</span></span>

- <span data-ttu-id="8ce25-123">Pole zadeklarowane jako `static readonly` mogą być przypisywane tylko jako część swojej deklaracji lub w konstruktorze statycznym.</span><span class="sxs-lookup"><span data-stu-id="8ce25-123">A field declared as `static readonly` may only be assigned as part of its declaration or in a static constructor.</span></span> <span data-ttu-id="8ce25-124">Gdy jawny Konstruktor statyczny nie jest wymagany, zainicjuj pola statyczne w deklaracji, a nie za pomocą konstruktora statycznego w celu zapewnienia lepszej optymalizacji środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="8ce25-124">When an explicit static constructor is not required, initialize static fields at declaration, rather than through a static constructor for better runtime optimization.</span></span>

> [!Note]
> <span data-ttu-id="8ce25-125">Chociaż nie jest to bezpośrednio dostępne, obecność jawnego konstruktora statycznego powinna zostać udokumentowana w celu ułatwienia rozwiązywania problemów z wyjątkami inicjalizacji.</span><span class="sxs-lookup"><span data-stu-id="8ce25-125">Though not directly accessible, the presence of an explicit static constructor should be documented to assist with troubleshooting initialization exceptions.</span></span>

### <a name="usage"></a><span data-ttu-id="8ce25-126">Pomiar</span><span class="sxs-lookup"><span data-stu-id="8ce25-126">Usage</span></span>

- <span data-ttu-id="8ce25-127">Typowym zastosowaniem konstruktorów statycznych jest użycie pliku dziennika przez klasę, a Konstruktor jest używany do zapisu wpisów do tego pliku.</span><span class="sxs-lookup"><span data-stu-id="8ce25-127">A typical use of static constructors is when the class is using a log file and the constructor is used to write entries to this file.</span></span>  
- <span data-ttu-id="8ce25-128">Konstruktory statyczne są również przydatne podczas tworzenia klas otoki dla niezarządzanego kodu, gdy Konstruktor może wywołać metodę `LoadLibrary`.</span><span class="sxs-lookup"><span data-stu-id="8ce25-128">Static constructors are also useful when creating wrapper classes for unmanaged code, when the constructor can call the `LoadLibrary` method.</span></span>  

- <span data-ttu-id="8ce25-129">Konstruktory statyczne są również wygodnym miejscem do wymuszania sprawdzania w czasie wykonywania na parametrze typu, który nie może być sprawdzany w czasie kompilacji za pomocą ograniczeń (ograniczenia parametru typu).</span><span class="sxs-lookup"><span data-stu-id="8ce25-129">Static constructors are also a convenient place to enforce run-time checks on the type parameter that cannot be checked at compile time via constraints (Type parameter constraints).</span></span>

## <a name="example"></a><span data-ttu-id="8ce25-130">Przykład</span><span class="sxs-lookup"><span data-stu-id="8ce25-130">Example</span></span>
 <span data-ttu-id="8ce25-131">W tym przykładzie Klasa `Bus` ma statyczny Konstruktor.</span><span class="sxs-lookup"><span data-stu-id="8ce25-131">In this example, class `Bus` has a static constructor.</span></span> <span data-ttu-id="8ce25-132">Po utworzeniu pierwszego wystąpienia `Bus` (`bus1`), Konstruktor statyczny jest wywoływany w celu zainicjowania klasy.</span><span class="sxs-lookup"><span data-stu-id="8ce25-132">When the first instance of `Bus` is created (`bus1`), the static constructor is invoked to initialize the class.</span></span> <span data-ttu-id="8ce25-133">Przykładowe dane wyjściowe sprawdzają, czy statyczny Konstruktor działa tylko raz, nawet jeśli dwa wystąpienia `Bus` są tworzone i są uruchamiane przed uruchomieniem konstruktora wystąpień.</span><span class="sxs-lookup"><span data-stu-id="8ce25-133">The sample output verifies that the static constructor runs only one time, even though two instances of `Bus` are created, and that it runs before the instance constructor runs.</span></span>  
  
 [!code-csharp[csProgGuideObjects#15](~/samples/snippets/csharp/VS_Snippets_VBCSharp/csProgGuideObjects/CS/Objects.cs#15)]
 
## <a name="c-language-specification"></a><span data-ttu-id="8ce25-134">specyfikacja języka C#</span><span class="sxs-lookup"><span data-stu-id="8ce25-134">C# language specification</span></span>
<span data-ttu-id="8ce25-135">Aby uzyskać więcej informacji, zobacz sekcję " [konstruktory statyczne](~/_csharplang/spec/classes.md#static-constructors) " [ C# specyfikacji języka](~/_csharplang/spec/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="8ce25-135">For more information, see the [Static constructors](~/_csharplang/spec/classes.md#static-constructors) section of the [C# language specification](~/_csharplang/spec/introduction.md).</span></span>
  
## <a name="see-also"></a><span data-ttu-id="8ce25-136">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="8ce25-136">See also</span></span>

- [<span data-ttu-id="8ce25-137">Przewodnik programowania w języku C#</span><span class="sxs-lookup"><span data-stu-id="8ce25-137">C# Programming Guide</span></span>](../index.md)
- [<span data-ttu-id="8ce25-138">Klasy i struktury</span><span class="sxs-lookup"><span data-stu-id="8ce25-138">Classes and Structs</span></span>](./index.md)
- [<span data-ttu-id="8ce25-139">Konstruktory</span><span class="sxs-lookup"><span data-stu-id="8ce25-139">Constructors</span></span>](./constructors.md)
- [<span data-ttu-id="8ce25-140">Klasy statyczne i statyczne elementy członkowskie klas</span><span class="sxs-lookup"><span data-stu-id="8ce25-140">Static Classes and Static Class Members</span></span>](./static-classes-and-static-class-members.md)
- [<span data-ttu-id="8ce25-141">Finalizatory</span><span class="sxs-lookup"><span data-stu-id="8ce25-141">Finalizers</span></span>](./destructors.md)
- [<span data-ttu-id="8ce25-142">Wytyczne dotyczące projektowania konstruktora</span><span class="sxs-lookup"><span data-stu-id="8ce25-142">Constructor Design Guidelines</span></span>](../../../standard/design-guidelines/constructor.md#type-constructor-guidelines)
- [<span data-ttu-id="8ce25-143">Ostrzeżenie o zabezpieczeniach — CA2121: konstruktory statyczne powinny być prywatne</span><span class="sxs-lookup"><span data-stu-id="8ce25-143">Security Warning - CA2121: Static constructors should be private</span></span>](https://docs.microsoft.com/visualstudio/code-quality/ca2121-static-constructors-should-be-private)
