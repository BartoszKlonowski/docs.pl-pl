---
title: Składnia zapytania i metody w technologii LINQ (C#)
description: Dowiedz się więcej o składni zapytań i składni metod w LINQ. Obejmuje to standardowe metody rozszerzenia operatora zapytania i wyrażenia lambda.
ms.date: 07/20/2015
helpviewer_keywords:
- LINQ [C#], query syntax vs. method syntax
- queries [LINQ in C#], syntax comparisons
ms.assetid: eedd6dd9-fec2-428c-9581-5b8783810ded
ms.openlocfilehash: 14319c7ec17c3186bfbd11875ee0d4480de7e3ff
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/24/2020
ms.locfileid: "91157567"
---
# <a name="query-syntax-and-method-syntax-in-linq-c"></a><span data-ttu-id="3660e-104">Składnia zapytania i metody w technologii LINQ (C#)</span><span class="sxs-lookup"><span data-stu-id="3660e-104">Query Syntax and Method Syntax in LINQ (C#)</span></span>

<span data-ttu-id="3660e-105">Większość zapytań w dokumentacji języka wprowadzającego Integrated Query (LINQ) jest zapisywana przy użyciu składni zapytania deklaracyjnego LINQ.</span><span class="sxs-lookup"><span data-stu-id="3660e-105">Most queries in the introductory Language Integrated Query (LINQ) documentation are written by using the LINQ declarative query syntax.</span></span> <span data-ttu-id="3660e-106">Jednak Składnia zapytania musi być przetłumaczona na wywołania metody dla środowiska uruchomieniowego języka wspólnego (CLR) platformy .NET podczas kompilowania kodu.</span><span class="sxs-lookup"><span data-stu-id="3660e-106">However, the query syntax must be translated into method calls for the .NET common language runtime (CLR) when the code is compiled.</span></span> <span data-ttu-id="3660e-107">Te wywołania metody wywołują standardowe operatory zapytań, które mają nazwy takie jak `Where` , `Select` , `GroupBy` , `Join` , `Max` i `Average` .</span><span class="sxs-lookup"><span data-stu-id="3660e-107">These method calls invoke the standard query operators, which have names such as `Where`, `Select`, `GroupBy`, `Join`, `Max`, and `Average`.</span></span> <span data-ttu-id="3660e-108">Można wywołać je bezpośrednio przy użyciu składni metody zamiast składni zapytania.</span><span class="sxs-lookup"><span data-stu-id="3660e-108">You can call them directly by using method syntax instead of query syntax.</span></span>  
  
 <span data-ttu-id="3660e-109">Składnia zapytań i składnia metody są semantycznie takie same, ale wiele osób może łatwiej odczytywać składnię zapytań.</span><span class="sxs-lookup"><span data-stu-id="3660e-109">Query syntax and method syntax are semantically identical, but many people find query syntax simpler and easier to read.</span></span> <span data-ttu-id="3660e-110">Niektóre zapytania muszą być wyrażone jako wywołania metod.</span><span class="sxs-lookup"><span data-stu-id="3660e-110">Some queries must be expressed as method calls.</span></span> <span data-ttu-id="3660e-111">Na przykład należy użyć wywołania metody, aby wyrazić zapytanie, które pobiera liczbę elementów zgodnych z określonym warunkiem.</span><span class="sxs-lookup"><span data-stu-id="3660e-111">For example, you must use a method call to express a query that retrieves the number of elements that match a specified condition.</span></span> <span data-ttu-id="3660e-112">Należy również użyć wywołania metody dla zapytania pobierającego element, który ma wartość maksymalną w sekwencji źródłowej.</span><span class="sxs-lookup"><span data-stu-id="3660e-112">You also must use a method call for a query that retrieves the element that has the maximum value in a source sequence.</span></span> <span data-ttu-id="3660e-113">Dokumentacja referencyjna dla standardowych operatorów zapytań w <xref:System.Linq> przestrzeni nazw zwykle używa składni metody.</span><span class="sxs-lookup"><span data-stu-id="3660e-113">The reference documentation for the standard query operators in the <xref:System.Linq> namespace generally uses method syntax.</span></span> <span data-ttu-id="3660e-114">W związku z tym nawet gdy zaczynasz pisać zapytania LINQ, warto zapoznać się z sposobami używania składni metody w zapytaniach i w samych wyrażeniach zapytań.</span><span class="sxs-lookup"><span data-stu-id="3660e-114">Therefore, even when getting started writing LINQ queries, it is useful to be familiar with how to use method syntax in queries and in query expressions themselves.</span></span>  
  
## <a name="standard-query-operator-extension-methods"></a><span data-ttu-id="3660e-115">Metody rozszerzające standardowy operator zapytań</span><span class="sxs-lookup"><span data-stu-id="3660e-115">Standard Query Operator Extension Methods</span></span>  

 <span data-ttu-id="3660e-116">W poniższym przykładzie pokazano proste *wyrażenie zapytania* i semantycznie równoważne zapytanie zapisywane jako *zapytanie oparte na metodzie*.</span><span class="sxs-lookup"><span data-stu-id="3660e-116">The following example shows a simple *query expression* and the semantically equivalent query written as a *method-based query*.</span></span>  
  
 [!code-csharp[csLINQGettingStarted#22](~/samples/snippets/csharp/VS_Snippets_VBCSharp/CsLINQGettingStarted/CS/Class1.cs#22)]  
  
 <span data-ttu-id="3660e-117">Dane wyjściowe z dwóch przykładów są identyczne.</span><span class="sxs-lookup"><span data-stu-id="3660e-117">The output from the two examples is identical.</span></span> <span data-ttu-id="3660e-118">Można zobaczyć, że typ zmiennej zapytania jest taka sama w obu formach: <xref:System.Collections.Generic.IEnumerable%601> .</span><span class="sxs-lookup"><span data-stu-id="3660e-118">You can see that the type of the query variable is the same in both forms: <xref:System.Collections.Generic.IEnumerable%601>.</span></span>  
  
 <span data-ttu-id="3660e-119">Aby zrozumieć zapytanie oparte na metodzie, Przeanalizujmy ją dokładniej.</span><span class="sxs-lookup"><span data-stu-id="3660e-119">To understand the method-based query, let's examine it more closely.</span></span> <span data-ttu-id="3660e-120">Po prawej stronie wyrażenia Zauważ, że `where` klauzula jest teraz wyrażona jako metoda wystąpienia na `numbers` obiekcie, co oznacza, że odwołanie ma typ `IEnumerable<int>` .</span><span class="sxs-lookup"><span data-stu-id="3660e-120">On the right side of the expression, notice that the `where` clause is now expressed as an instance method on the `numbers` object, which as you will recall has a type of `IEnumerable<int>`.</span></span> <span data-ttu-id="3660e-121">Jeśli znasz <xref:System.Collections.Generic.IEnumerable%601> interfejs ogólny, wiesz, że nie ma `Where` metody.</span><span class="sxs-lookup"><span data-stu-id="3660e-121">If you are familiar with the generic <xref:System.Collections.Generic.IEnumerable%601> interface, you know that it does not have a `Where` method.</span></span> <span data-ttu-id="3660e-122">Jeśli jednak zostanie wywołana lista uzupełniania IntelliSense w środowisku IDE programu Visual Studio, zobaczysz nie tylko `Where` metodę, ale wiele innych metod, takich jak `Select` ,, `SelectMany` `Join` i `Orderby` .</span><span class="sxs-lookup"><span data-stu-id="3660e-122">However, if you invoke the IntelliSense completion list in the Visual Studio IDE, you will see not only a `Where` method, but many other methods such as `Select`, `SelectMany`, `Join`, and `Orderby`.</span></span> <span data-ttu-id="3660e-123">To są wszystkie standardowe operatory zapytań.</span><span class="sxs-lookup"><span data-stu-id="3660e-123">These are all the standard query operators.</span></span>  
  
 ![Zrzut ekranu przedstawiający wszystkie standardowe operatory zapytań w IntelliSense.](./media/query-syntax-and-method-syntax-in-linq/standard-query-operators.png)  
  
 <span data-ttu-id="3660e-125">Mimo że został on <xref:System.Collections.Generic.IEnumerable%601> ponownie zdefiniowany w celu uwzględnienia tych dodatkowych metod, w rzeczywistości nie jest to przypadek.</span><span class="sxs-lookup"><span data-stu-id="3660e-125">Although it looks as if <xref:System.Collections.Generic.IEnumerable%601> has been redefined to include these additional methods, in fact this is not the case.</span></span> <span data-ttu-id="3660e-126">Standardowe operatory zapytań są implementowane jako nowy rodzaj metody wywoływanie *metod rozszerzających*.</span><span class="sxs-lookup"><span data-stu-id="3660e-126">The standard query operators are implemented as a new kind of method called *extension methods*.</span></span> <span data-ttu-id="3660e-127">Metody rozszerzeń "rozszerzają" istniejący typ; mogą być wywoływane tak, jakby były metodami wystąpień w typie.</span><span class="sxs-lookup"><span data-stu-id="3660e-127">Extensions methods "extend" an existing type; they can be called as if they were instance methods on the type.</span></span> <span data-ttu-id="3660e-128">Standardowe operatory zapytań zwiększają się <xref:System.Collections.Generic.IEnumerable%601> i dlatego można pisać `numbers.Where(...)` .</span><span class="sxs-lookup"><span data-stu-id="3660e-128">The standard query operators extend <xref:System.Collections.Generic.IEnumerable%601> and that is why you can write `numbers.Where(...)`.</span></span>  
  
 <span data-ttu-id="3660e-129">Aby rozpocząć korzystanie z LINQ, wszystko, co naprawdę trzeba wiedzieć na temat metod rozszerzających, polega na tym, jak przenieść je do zakresu w aplikacji za pomocą odpowiednich `using` dyrektyw.</span><span class="sxs-lookup"><span data-stu-id="3660e-129">To get started using LINQ, all that you really have to know about extension methods is how to bring them into scope in your application by using the correct `using` directives.</span></span> <span data-ttu-id="3660e-130">Z punktu widzenia aplikacji Metoda rozszerzająca i zwykła metoda wystąpienia są takie same.</span><span class="sxs-lookup"><span data-stu-id="3660e-130">From your application's point of view, an extension method and a regular instance method are the same.</span></span>  
  
 <span data-ttu-id="3660e-131">Aby uzyskać więcej informacji na temat metod rozszerzających, zobacz [metody rozszerzenia](../../classes-and-structs/extension-methods.md).</span><span class="sxs-lookup"><span data-stu-id="3660e-131">For more information about extension methods, see [Extension Methods](../../classes-and-structs/extension-methods.md).</span></span> <span data-ttu-id="3660e-132">Aby uzyskać więcej informacji na temat standardowych operatorów zapytań, zobacz [standardowe operatory zapytań — Omówienie (C#)](./standard-query-operators-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3660e-132">For more information about standard query operators, see [Standard Query Operators Overview (C#)](./standard-query-operators-overview.md).</span></span> <span data-ttu-id="3660e-133">Niektórzy dostawcy LINQ, takie jak [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] i [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)] , implementują własne standardowe operatory zapytań i dodatkowe metody rozszerzające dla innych typów <xref:System.Collections.Generic.IEnumerable%601> .</span><span class="sxs-lookup"><span data-stu-id="3660e-133">Some LINQ providers, such as [!INCLUDE[vbtecdlinq](~/includes/vbtecdlinq-md.md)] and [!INCLUDE[sqltecxlinq](~/includes/sqltecxlinq-md.md)], implement their own standard query operators and additional extension methods for other types besides <xref:System.Collections.Generic.IEnumerable%601>.</span></span>  
  
## <a name="lambda-expressions"></a><span data-ttu-id="3660e-134">Wyrażenia lambda</span><span class="sxs-lookup"><span data-stu-id="3660e-134">Lambda Expressions</span></span>  

 <span data-ttu-id="3660e-135">W poprzednim przykładzie należy zauważyć, że wyrażenie warunkowe ( `num % 2 == 0` ) jest przekazywany jako argument w wierszu do `Where` metody: `Where(num => num % 2 == 0).` to wyrażenie wbudowane jest nazywane wyrażeniem lambda.</span><span class="sxs-lookup"><span data-stu-id="3660e-135">In the previous example, notice that the conditional expression (`num % 2 == 0`) is passed as an in-line argument to the `Where` method: `Where(num => num % 2 == 0).` This inline expression is called a lambda expression.</span></span> <span data-ttu-id="3660e-136">Jest to wygodny sposób pisania kodu, który w przeciwnym razie musi być napisany w bardziej skomplikowany sposób jako metoda anonimowa lub Delegat ogólny lub drzewo wyrażenia.</span><span class="sxs-lookup"><span data-stu-id="3660e-136">It is a convenient way to write code that would otherwise have to be written in more cumbersome form as an anonymous method or a generic delegate or an expression tree.</span></span> <span data-ttu-id="3660e-137">W języku C# `=>` jest operatorem lambda, który jest odczytywany jako "przechodzi do".</span><span class="sxs-lookup"><span data-stu-id="3660e-137">In C# `=>` is the lambda operator, which is read as "goes to".</span></span> <span data-ttu-id="3660e-138">Po `num` lewej stronie operatora jest zmienną wejściową, która odnosi się do `num` w wyrażeniu zapytania.</span><span class="sxs-lookup"><span data-stu-id="3660e-138">The `num` on the left of the operator is the input variable which corresponds to `num` in the query expression.</span></span> <span data-ttu-id="3660e-139">Kompilator może wywnioskować typ, `num` ponieważ wie, że `numbers` jest typem ogólnym <xref:System.Collections.Generic.IEnumerable%601> .</span><span class="sxs-lookup"><span data-stu-id="3660e-139">The compiler can infer the type of `num` because it knows that `numbers` is a generic <xref:System.Collections.Generic.IEnumerable%601> type.</span></span> <span data-ttu-id="3660e-140">Treść wyrażenia lambda jest taka sama jak wyrażenie w składni zapytania lub w dowolnym innym wyrażeniu lub instrukcji języka C#. może obejmować wywołania metod i inne złożone logiki.</span><span class="sxs-lookup"><span data-stu-id="3660e-140">The body of the lambda is just the same as the expression in query syntax or in any other C# expression or statement; it can include method calls and other complex logic.</span></span> <span data-ttu-id="3660e-141">"Zwracana wartość" jest tylko wynikiem wyrażenia.</span><span class="sxs-lookup"><span data-stu-id="3660e-141">The "return value" is just the expression result.</span></span>  
  
 <span data-ttu-id="3660e-142">Aby rozpocząć korzystanie z LINQ, nie musisz używać wyrażeń lambda w szerokim stopniu.</span><span class="sxs-lookup"><span data-stu-id="3660e-142">To get started using LINQ, you do not have to use lambdas extensively.</span></span> <span data-ttu-id="3660e-143">Jednak niektóre zapytania można wyrazić tylko w składni metody, a niektóre z nich wymagają wyrażenia lambda.</span><span class="sxs-lookup"><span data-stu-id="3660e-143">However, certain queries can only be expressed in method syntax and some of those require lambda expressions.</span></span> <span data-ttu-id="3660e-144">Po poznaniu się z wyrażeniami lambda można sprawdzić, czy są one zaawansowanym i elastycznym narzędziem w przyborniku LINQ.</span><span class="sxs-lookup"><span data-stu-id="3660e-144">After you become more familiar with lambdas, you will find that they are a powerful and flexible tool in your LINQ toolbox.</span></span> <span data-ttu-id="3660e-145">Aby uzyskać więcej informacji, zobacz [wyrażenia lambda](../../../language-reference/operators/lambda-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="3660e-145">For more information, see [Lambda Expressions](../../../language-reference/operators/lambda-expressions.md).</span></span>  
  
## <a name="composability-of-queries"></a><span data-ttu-id="3660e-146">Możliwości tworzenia zapytań</span><span class="sxs-lookup"><span data-stu-id="3660e-146">Composability of Queries</span></span>  

 <span data-ttu-id="3660e-147">W poprzednim przykładzie kodu należy zauważyć, że `OrderBy` Metoda jest wywoływana przy użyciu operatora kropki w wywołaniu `Where` .</span><span class="sxs-lookup"><span data-stu-id="3660e-147">In the previous code example, note that the `OrderBy` method is invoked by using the dot operator on the call to `Where`.</span></span> <span data-ttu-id="3660e-148">`Where` tworzy filtrowaną sekwencję, a następnie `Orderby` działa w tej sekwencji, sortując ją.</span><span class="sxs-lookup"><span data-stu-id="3660e-148">`Where` produces a filtered sequence, and then `Orderby` operates on that sequence by sorting it.</span></span> <span data-ttu-id="3660e-149">Ponieważ zapytania zwracają `IEnumerable` , należy je złożyć w składni metody przez łańcuch wywołań metod.</span><span class="sxs-lookup"><span data-stu-id="3660e-149">Because queries return an `IEnumerable`, you compose them in method syntax by chaining the method calls together.</span></span> <span data-ttu-id="3660e-150">Jest to działanie kompilatora w tle podczas pisania zapytań przy użyciu składni zapytania.</span><span class="sxs-lookup"><span data-stu-id="3660e-150">This is what the compiler does behind the scenes when you write queries by using query syntax.</span></span> <span data-ttu-id="3660e-151">A ponieważ zmienna zapytania nie przechowuje wyników zapytania, można je zmodyfikować lub użyć jako podstawy dla nowego zapytania w dowolnym momencie, nawet po jego wykonaniu.</span><span class="sxs-lookup"><span data-stu-id="3660e-151">And because a query variable does not store the results of the query, you can modify it or use it as the basis for a new query at any time, even after it has been executed.</span></span>  
