---
title: Używanie delegatów (Przewodnik programowania w języku C#)
ms.date: 07/20/2015
helpviewer_keywords:
- delegates [C#], how to use
ms.assetid: 99a2fc27-a32e-4a34-921c-e65497520eec
ms.openlocfilehash: 07bc0e38455335e068719137c349daf65f8fab6b
ms.sourcegitcommit: 3c1c3ba79895335ff3737934e39372555ca7d6d0
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/06/2018
ms.locfileid: "43860288"
---
# <a name="using-delegates-c-programming-guide"></a><span data-ttu-id="6b29a-102">Używanie delegatów (Przewodnik programowania w języku C#)</span><span class="sxs-lookup"><span data-stu-id="6b29a-102">Using Delegates (C# Programming Guide)</span></span>
<span data-ttu-id="6b29a-103">A [delegować](../../../csharp/language-reference/keywords/delegate.md) to typ, który hermetyzuje bezpiecznie metody, podobne do wskaźnika funkcji w C i C++.</span><span class="sxs-lookup"><span data-stu-id="6b29a-103">A [delegate](../../../csharp/language-reference/keywords/delegate.md) is a type that safely encapsulates a method, similar to a function pointer in C and C++.</span></span> <span data-ttu-id="6b29a-104">W przeciwieństwie do wskaźników funkcji języka C obiekty delegowane są zorientowane obiektowo, typu, bezpieczeństwa i bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="6b29a-104">Unlike C function pointers, delegates are object-oriented, type safe, and secure.</span></span> <span data-ttu-id="6b29a-105">Typ obiektu delegowanego jest definiowany przez nazwę obiektu delegowanego.</span><span class="sxs-lookup"><span data-stu-id="6b29a-105">The type of a delegate is defined by the name of the delegate.</span></span> <span data-ttu-id="6b29a-106">Poniższy przykład deklaruje delegat o nazwie `Del` który umożliwiająca Hermetyzowanie metody, która przyjmuje [ciąg](../../../csharp/language-reference/keywords/string.md) jako argument i zwraca [void](../../../csharp/language-reference/keywords/void.md):</span><span class="sxs-lookup"><span data-stu-id="6b29a-106">The following example declares a delegate named `Del` that can encapsulate a method that takes a [string](../../../csharp/language-reference/keywords/string.md) as an argument and returns [void](../../../csharp/language-reference/keywords/void.md):</span></span>  
  
 [!code-csharp[csProgGuideDelegates#21](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_1.cs)]  
  
 <span data-ttu-id="6b29a-107">Obiektu delegowanego jest zwykle tworzony przez realizacji nazwę metody delegata będzie zawijany lub za pomocą [metody anonimowej](../../../csharp/programming-guide/statements-expressions-operators/anonymous-methods.md).</span><span class="sxs-lookup"><span data-stu-id="6b29a-107">A delegate object is normally constructed by providing the name of the method the delegate will wrap, or with an [anonymous Method](../../../csharp/programming-guide/statements-expressions-operators/anonymous-methods.md).</span></span> <span data-ttu-id="6b29a-108">Po utworzeniu delegata wywołania metody delegata zostaną przekazane przez delegata do tej metody.</span><span class="sxs-lookup"><span data-stu-id="6b29a-108">Once a delegate is instantiated, a method call made to the delegate will be passed by the delegate to that method.</span></span> <span data-ttu-id="6b29a-109">Parametry przekazane do obiektu delegowanego przez obiekt wywołujący jest przekazywany do metody i zwracanej wartości, z metody jest zwracany do obiektu wywołującego przez delegata.</span><span class="sxs-lookup"><span data-stu-id="6b29a-109">The parameters passed to the delegate by the caller are passed to the method, and the return value, if any, from the method is returned to the caller by the delegate.</span></span> <span data-ttu-id="6b29a-110">Jest to nazywane wywoływania delegata.</span><span class="sxs-lookup"><span data-stu-id="6b29a-110">This is known as invoking the delegate.</span></span> <span data-ttu-id="6b29a-111">Może być wywoływany delegat wystąpień, tak jakby opakowana sama metoda.</span><span class="sxs-lookup"><span data-stu-id="6b29a-111">An instantiated delegate can be invoked as if it were the wrapped method itself.</span></span> <span data-ttu-id="6b29a-112">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="6b29a-112">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#22](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_2.cs)]  
  
 [!code-csharp[csProgGuideDelegates#23](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_3.cs)]  
  
 <span data-ttu-id="6b29a-113">Typy delegatów są uzyskiwane z <xref:System.Delegate> klasy w .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6b29a-113">Delegate types are derived from the <xref:System.Delegate> class in the .NET Framework.</span></span> <span data-ttu-id="6b29a-114">Typy delegatów są [zapieczętowanego](../../../csharp/language-reference/keywords/sealed.md)— nie mogą pochodzić z — i nie jest możliwe określenie niestandardowych klas z <xref:System.Delegate>.</span><span class="sxs-lookup"><span data-stu-id="6b29a-114">Delegate types are [sealed](../../../csharp/language-reference/keywords/sealed.md)—they cannot be derived from— and it is not possible to derive custom classes from <xref:System.Delegate>.</span></span> <span data-ttu-id="6b29a-115">Ponieważ wystąpień delegata jest obiektem, jego mogą być przekazany jako parametr lub przypisane do właściwości.</span><span class="sxs-lookup"><span data-stu-id="6b29a-115">Because the instantiated delegate is an object, it can be passed as a parameter, or assigned to a property.</span></span> <span data-ttu-id="6b29a-116">Dzięki temu metodę, aby zaakceptować delegata jako parametr, a następnie wywołaj delegat w późniejszym czasie.</span><span class="sxs-lookup"><span data-stu-id="6b29a-116">This allows a method to accept a delegate as a parameter, and call the delegate at some later time.</span></span> <span data-ttu-id="6b29a-117">Jest znany jako asynchroniczne wywołanie zwrotne, a metoda jest często powiadamiania obiekt wywołujący, po ukończeniu procesu długie.</span><span class="sxs-lookup"><span data-stu-id="6b29a-117">This is known as an asynchronous callback, and is a common method of notifying a caller when a long process has completed.</span></span> <span data-ttu-id="6b29a-118">Gdy obiekt delegowany jest używany w ten sposób, kod przy użyciu delegat nie musi żadnej wiedzy implementacji metody używane.</span><span class="sxs-lookup"><span data-stu-id="6b29a-118">When a delegate is used in this fashion, the code using the delegate does not need any knowledge of the implementation of the method being used.</span></span> <span data-ttu-id="6b29a-119">Funkcje są podobne do hermetyzacji, podane przez interfejsy.</span><span class="sxs-lookup"><span data-stu-id="6b29a-119">The functionality is similar to the encapsulation interfaces provide.</span></span>  
  
 <span data-ttu-id="6b29a-120">Innym typowym zastosowaniem wywołań zwrotnych jest definiowanie metody porównania niestandardowego i przekazanie delegata do metody sortowania.</span><span class="sxs-lookup"><span data-stu-id="6b29a-120">Another common use of callbacks is defining a custom comparison method and passing that delegate to a sort method.</span></span> <span data-ttu-id="6b29a-121">Umożliwia ona wywołującego kod, aby stać się częścią algorytmu sortowania.</span><span class="sxs-lookup"><span data-stu-id="6b29a-121">It allows the caller's code to become part of the sort algorithm.</span></span> <span data-ttu-id="6b29a-122">Poniższy przykład metody używa `Del` typu jako parametru:</span><span class="sxs-lookup"><span data-stu-id="6b29a-122">The following example method uses the `Del` type as a parameter:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#24](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_4.cs)]  
  
 <span data-ttu-id="6b29a-123">Możesz następnie przekazać delegata utworzone powyżej do tej metody:</span><span class="sxs-lookup"><span data-stu-id="6b29a-123">You can then pass the delegate created above to that method:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#25](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_5.cs)]  
  
 <span data-ttu-id="6b29a-124">i pojawić się następujące dane wyjściowe do konsoli:</span><span class="sxs-lookup"><span data-stu-id="6b29a-124">and receive the following output to the console:</span></span>  
  
 `The number is: 3`  
  
 <span data-ttu-id="6b29a-125">Używanie delegata jako klasą abstrakcyjną `MethodWithCallback` nie trzeba wywoływać bezpośrednio z konsoli — nie musi być zaprojektowane tak, za pomocą konsoli, należy pamiętać.</span><span class="sxs-lookup"><span data-stu-id="6b29a-125">Using the delegate as an abstraction, `MethodWithCallback` does not need to call the console directly—it does not have to be designed with a console in mind.</span></span> <span data-ttu-id="6b29a-126">Co `MethodWithCallback` jest to po prostu przygotowanie ciągu i przekaż parametry do innej metody.</span><span class="sxs-lookup"><span data-stu-id="6b29a-126">What `MethodWithCallback` does is simply prepare a string and pass the string to another method.</span></span> <span data-ttu-id="6b29a-127">Jest to szczególnie wydajne, ponieważ metoda delegowanego można użyć dowolnej liczbie parametrów.</span><span class="sxs-lookup"><span data-stu-id="6b29a-127">This is especially powerful since a delegated method can use any number of parameters.</span></span>  
  
 <span data-ttu-id="6b29a-128">Gdy obiekt delegowany jest konstruowany opakowywać metodą wystąpienia, delegat odwołuje się do wystąpienia i metody.</span><span class="sxs-lookup"><span data-stu-id="6b29a-128">When a delegate is constructed to wrap an instance method, the delegate references both the instance and the method.</span></span> <span data-ttu-id="6b29a-129">Delegat nie zna typu wystąpienia jako uzupełnienie metody, który otacza, więc tak długo, jak dla tego obiektu, który jest zgodny podpis delegata ma metodę delegata może odwoływać się do dowolnego typu obiektu.</span><span class="sxs-lookup"><span data-stu-id="6b29a-129">A delegate has no knowledge of the instance type aside from the method it wraps, so a delegate can refer to any type of object as long as there is a method on that object that matches the delegate signature.</span></span> <span data-ttu-id="6b29a-130">Gdy obiekt delegowany jest konstruowany opakowywać metodę statyczną, tylko odwołania metody.</span><span class="sxs-lookup"><span data-stu-id="6b29a-130">When a delegate is constructed to wrap a static method, it only references the method.</span></span> <span data-ttu-id="6b29a-131">Rozważ następujące deklaracje:</span><span class="sxs-lookup"><span data-stu-id="6b29a-131">Consider the following declarations:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#26](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_6.cs)]  
  
 <span data-ttu-id="6b29a-132">Wraz ze statycznej `DelegateMethod` przedstawionego wcześniej, mamy trzy metody, które może zostać zawinięty przy `Del` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="6b29a-132">Along with the static `DelegateMethod` shown previously, we now have three methods that can be wrapped by a `Del` instance.</span></span>  
  
 <span data-ttu-id="6b29a-133">Delegata można wywołać więcej niż jednej metody po wywołaniu.</span><span class="sxs-lookup"><span data-stu-id="6b29a-133">A delegate can call more than one method when invoked.</span></span> <span data-ttu-id="6b29a-134">Jest to określane jako multiemisji.</span><span class="sxs-lookup"><span data-stu-id="6b29a-134">This is referred to as multicasting.</span></span> <span data-ttu-id="6b29a-135">Aby dodać dodatkową metodę do listy pełnomocnika metod — listy wywołań — po prostu wymaga dodania dwóch delegatów za pomocą dodawania lub operatorów przypisania dodawania ("+" lub "+=").</span><span class="sxs-lookup"><span data-stu-id="6b29a-135">To add an extra method to the delegate's list of methods—the invocation list—simply requires adding two delegates using the addition or addition assignment operators ('+' or '+=').</span></span> <span data-ttu-id="6b29a-136">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="6b29a-136">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#27](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_7.cs)]  
  
 <span data-ttu-id="6b29a-137">W tym momencie `allMethodsDelegate` zawiera trzy metody na liście wywołania —`Method1`, `Method2`, i `DelegateMethod`.</span><span class="sxs-lookup"><span data-stu-id="6b29a-137">At this point `allMethodsDelegate` contains three methods in its invocation list—`Method1`, `Method2`, and `DelegateMethod`.</span></span> <span data-ttu-id="6b29a-138">Oryginalny trzech obiektów delegowanych `d1`, `d2`, i `d3`, pozostają niezmienione.</span><span class="sxs-lookup"><span data-stu-id="6b29a-138">The original three delegates, `d1`, `d2`, and `d3`, remain unchanged.</span></span> <span data-ttu-id="6b29a-139">Gdy `allMethodsDelegate` jest wywołana, wszystkie trzy metody są wywoływane w kolejności.</span><span class="sxs-lookup"><span data-stu-id="6b29a-139">When `allMethodsDelegate` is invoked, all three methods are called in order.</span></span> <span data-ttu-id="6b29a-140">Jeśli delegat używa parametrów w formie odwołań, odwołanie jest przekazywany sekwencyjnie do każdego z trzech metod z kolei, a wszelkie zmiany według jedną z metod są widoczne dla następnej metody.</span><span class="sxs-lookup"><span data-stu-id="6b29a-140">If the delegate uses reference parameters, the reference is passed sequentially to each of the three methods in turn, and any changes by one method are visible to the next method.</span></span> <span data-ttu-id="6b29a-141">Gdy dowolnej z metod zgłasza wyjątek, który nie jest wyłapywany wewnątrz metody, że wyjątek jest przekazywany do obiektu wywołującego delegat i żadne kolejne metody na liście wywołania są wywoływane.</span><span class="sxs-lookup"><span data-stu-id="6b29a-141">When any of the methods throws an exception that is not caught within the method, that exception is passed to the caller of the delegate and no subsequent methods in the invocation list are called.</span></span> <span data-ttu-id="6b29a-142">Jeśli pełnomocnik ma wartość zwracaną i/lub parametrów out, zwraca wartość zwracaną i parametry ostatniego metody wywoływane.</span><span class="sxs-lookup"><span data-stu-id="6b29a-142">If the delegate has a return value and/or out parameters, it returns the return value and parameters of the last method invoked.</span></span> <span data-ttu-id="6b29a-143">Aby usunąć metodę liście wywołania, należy użyć dekrementacji lub dekrementacja, operator przypisania ("-" lub "-=").</span><span class="sxs-lookup"><span data-stu-id="6b29a-143">To remove a method from the invocation list, use the decrement or decrement assignment operator ('-' or '-=').</span></span> <span data-ttu-id="6b29a-144">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="6b29a-144">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#28](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_8.cs)]  
  
 <span data-ttu-id="6b29a-145">Ponieważ typy delegatów są uzyskiwane z `System.Delegate`, można wywołać metody i właściwości zdefiniowane przez tę klasę w delegacie.</span><span class="sxs-lookup"><span data-stu-id="6b29a-145">Because delegate types are derived from `System.Delegate`, the methods and properties defined by that class can be called on the delegate.</span></span> <span data-ttu-id="6b29a-146">Na przykład aby znaleźć wiele metod w listy wywołań obiektu delegowanego, użytkownik może zapisać:</span><span class="sxs-lookup"><span data-stu-id="6b29a-146">For example, to find the number of methods in a delegate's invocation list, you may write:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#29](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_9.cs)]  
  
 <span data-ttu-id="6b29a-147">Delegaty z więcej niż jednej metody na liście wywołań pochodzi od <xref:System.MulticastDelegate>, który jest podklasą `System.Delegate`.</span><span class="sxs-lookup"><span data-stu-id="6b29a-147">Delegates with more than one method in their invocation list derive from <xref:System.MulticastDelegate>, which is a subclass of `System.Delegate`.</span></span> <span data-ttu-id="6b29a-148">Powyższy kod działa w obu przypadkach, ponieważ obsługuje obie klasy `GetInvocationList`.</span><span class="sxs-lookup"><span data-stu-id="6b29a-148">The above code works in either case because both classes support `GetInvocationList`.</span></span>  
  
 <span data-ttu-id="6b29a-149">Obiekty delegowane multiemisji są często używane w obsłudze zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="6b29a-149">Multicast delegates are used extensively in event handling.</span></span> <span data-ttu-id="6b29a-150">Obiekty źródła zdarzeń Wysyłaj powiadomienia o zdarzeniach do adresatów obiektów, które zostały zarejestrowane do otrzymywania tego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="6b29a-150">Event source objects send event notifications to recipient objects that have registered to receive that event.</span></span> <span data-ttu-id="6b29a-151">Zarejestrować zdarzenie, odbiorca tworzy metodę z myślą o obsłudze zdarzeń, a następnie tworzy delegata dla tej metody i przekazuje delegata do źródła zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="6b29a-151">To register for an event, the recipient creates a method designed to handle the event, then creates a delegate for that method and passes the delegate to the event source.</span></span> <span data-ttu-id="6b29a-152">Po wystąpieniu zdarzenia, źródło wywołuje delegata.</span><span class="sxs-lookup"><span data-stu-id="6b29a-152">The source calls the delegate when the event occurs.</span></span> <span data-ttu-id="6b29a-153">Delegat następnie wywołuje metodę na odbiorca, dostarczanie danych zdarzenia do obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="6b29a-153">The delegate then calls the event handling method on the recipient, delivering the event data.</span></span> <span data-ttu-id="6b29a-154">Typ delegata dla danego zdarzenia jest definiowany przez źródło zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="6b29a-154">The delegate type for a given event is defined by the event source.</span></span> <span data-ttu-id="6b29a-155">Aby uzyskać więcej informacji, zobacz [zdarzenia](../../../csharp/programming-guide/events/index.md).</span><span class="sxs-lookup"><span data-stu-id="6b29a-155">For more, see [Events](../../../csharp/programming-guide/events/index.md).</span></span>  
  
 <span data-ttu-id="6b29a-156">Porównywanie delegatów dwa różne typy przypisane w czasie kompilacji spowoduje błąd kompilacji.</span><span class="sxs-lookup"><span data-stu-id="6b29a-156">Comparing delegates of two different types assigned at compile-time will result in a compilation error.</span></span> <span data-ttu-id="6b29a-157">W przypadku wystąpień delegata statycznie typu `System.Delegate`, następnie wynik porównania jest dozwolone, ale będzie uruchamiany zwróci wartość false w czasie.</span><span class="sxs-lookup"><span data-stu-id="6b29a-157">If the delegate instances are statically of the type `System.Delegate`, then the comparison is allowed, but will return false at run time.</span></span> <span data-ttu-id="6b29a-158">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="6b29a-158">For example:</span></span>  
  
 [!code-csharp[csProgGuideDelegates#30](../../../csharp/programming-guide/delegates/codesnippet/CSharp/using-delegates_10.cs)]  
  
## <a name="see-also"></a><span data-ttu-id="6b29a-159">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="6b29a-159">See Also</span></span>

- [<span data-ttu-id="6b29a-160">Przewodnik programowania w języku C#</span><span class="sxs-lookup"><span data-stu-id="6b29a-160">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)
- [<span data-ttu-id="6b29a-161">Delegaci</span><span class="sxs-lookup"><span data-stu-id="6b29a-161">Delegates</span></span>](../../../csharp/programming-guide/delegates/index.md)
- [<span data-ttu-id="6b29a-162">Korzystanie z wariancji w delegatach</span><span class="sxs-lookup"><span data-stu-id="6b29a-162">Using Variance in Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/using-variance-in-delegates.md)
- [<span data-ttu-id="6b29a-163">Wariancje w delegatach</span><span class="sxs-lookup"><span data-stu-id="6b29a-163">Variance in Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/variance-in-delegates.md)
- [<span data-ttu-id="6b29a-164">Korzystanie z wariancji dla delegatów ogólnych Func i Action</span><span class="sxs-lookup"><span data-stu-id="6b29a-164">Using Variance for Func and Action Generic Delegates</span></span>](../../../csharp/programming-guide/concepts/covariance-contravariance/using-variance-for-func-and-action-generic-delegates.md)
- [<span data-ttu-id="6b29a-165">Zdarzenia</span><span class="sxs-lookup"><span data-stu-id="6b29a-165">Events</span></span>](../../../csharp/programming-guide/events/index.md)
