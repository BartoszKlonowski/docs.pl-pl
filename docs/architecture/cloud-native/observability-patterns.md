---
title: Wzorce wglądu
description: Wzorce zauważalne dla aplikacji natywnych w chmurze
ms.date: 02/05/2020
ms.openlocfilehash: a821235835b4553760b19887d500a29ca75e133e
ms.sourcegitcommit: 700ea803fb06c5ce98de017c7f76463ba33ff4a9
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 02/19/2020
ms.locfileid: "77448533"
---
# <a name="observability-patterns"></a><span data-ttu-id="69e47-103">Wzorce wglądu</span><span class="sxs-lookup"><span data-stu-id="69e47-103">Observability patterns</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="69e47-104">Podobnie jak wzorce zostały opracowane w celu pomocy w układzie kodu w aplikacjach, istnieją wzorce dla aplikacji operacyjnych w niezawodny sposób.</span><span class="sxs-lookup"><span data-stu-id="69e47-104">Just as patterns have been developed to aid in the layout of code in applications, there are patterns for operating applications in a reliable way.</span></span> <span data-ttu-id="69e47-105">Zakryto trzy przydatne wzorce w utrzymywaniu aplikacji: **Rejestrowanie**, **monitorowanie**i **alerty**.</span><span class="sxs-lookup"><span data-stu-id="69e47-105">Three useful patterns in maintaining applications have emerged: **logging**, **monitoring**, and **alerts**.</span></span>

## <a name="when-to-use-logging"></a><span data-ttu-id="69e47-106">Kiedy należy używać rejestrowania</span><span class="sxs-lookup"><span data-stu-id="69e47-106">When to use logging</span></span>

<span data-ttu-id="69e47-107">Bez względu na to, jak dokładnie jesteśmy, aplikacje niemal zawsze zachowują się w nieoczekiwany sposób w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="69e47-107">No matter how careful we are, applications almost always behave in unexpected ways in production.</span></span> <span data-ttu-id="69e47-108">Gdy użytkownicy zgłaszają problemy z aplikacją, niezwykle przydatna jest możliwość sprawdzenia, co się dzieje z aplikacją, gdy wystąpił problem.</span><span class="sxs-lookup"><span data-stu-id="69e47-108">When users report problems with an application, it's extremely useful to be able to see what was going on with the app when the problem occurred.</span></span> <span data-ttu-id="69e47-109">Jednym z najpopularniejszych i prawdziwych sposobów przechwytywania informacji na temat działania aplikacji, gdy jest uruchomiona, jest zapisanie przez aplikację co robi.</span><span class="sxs-lookup"><span data-stu-id="69e47-109">One of the most tried and true ways of capturing information about what an application is doing while it's running is to have the application write down what it's doing.</span></span> <span data-ttu-id="69e47-110">Ten proces jest nazywany rejestrowaniem.</span><span class="sxs-lookup"><span data-stu-id="69e47-110">This process is known as logging.</span></span> <span data-ttu-id="69e47-111">Wszelkie błędy czasu lub problemy występujące w środowisku produkcyjnym należy wykonać w celu odtworzenia warunków, w których wystąpiły awarie, w środowiskach nieprodukcyjnych.</span><span class="sxs-lookup"><span data-stu-id="69e47-111">Any time failures or problems occur in production, the goal should be to reproduce the conditions under which the failures occurred, in a non-production environment.</span></span> <span data-ttu-id="69e47-112">Jeśli dobre miejsce do zarejestrowania zawiera Przewodnik dla deweloperów, w celu duplikowania problemów w środowisku, które mogą być testowane i eksperymentować.</span><span class="sxs-lookup"><span data-stu-id="69e47-112">Having good logging in place provides a roadmap for developers to follow in order to duplicate problems in an environment that can be tested and experimented with.</span></span>

### <a name="challenges-when-logging-with-cloud-native-applications"></a><span data-ttu-id="69e47-113">Wyzwania podczas rejestrowania w aplikacjach natywnych w chmurze</span><span class="sxs-lookup"><span data-stu-id="69e47-113">Challenges when logging with cloud-native applications</span></span>

<span data-ttu-id="69e47-114">W tradycyjnych aplikacjach pliki dziennika są zwykle przechowywane na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="69e47-114">In traditional applications, log files are typically stored on the local machine.</span></span> <span data-ttu-id="69e47-115">W rzeczywistości w systemach operacyjnych działających w systemie UNIX istnieje struktura folderów zdefiniowana do przechowywania dzienników, zwykle w obszarze `/var/log`.</span><span class="sxs-lookup"><span data-stu-id="69e47-115">In fact, on Unix-like operating systems, there's a folder structure defined to hold any logs, typically under `/var/log`.</span></span>

<span data-ttu-id="69e47-116">![logowanie do pliku w aplikacji monolitycznej.](./media/single-monolith-logging.png)
**rysunek 7-1**.</span><span class="sxs-lookup"><span data-stu-id="69e47-116">![Logging to a file in a monolithic app.](./media/single-monolith-logging.png)
**Figure 7-1**.</span></span> <span data-ttu-id="69e47-117">Logowanie do pliku w aplikacji monolitycznej.</span><span class="sxs-lookup"><span data-stu-id="69e47-117">Logging to a file in a monolithic app.</span></span>

<span data-ttu-id="69e47-118">Użyteczność rejestrowania w pliku prostym na pojedynczym komputerze jest znacznie ograniczona w środowisku chmury.</span><span class="sxs-lookup"><span data-stu-id="69e47-118">The usefulness of logging to a flat file on a single machine is vastly reduced in a cloud environment.</span></span> <span data-ttu-id="69e47-119">Dzienniki wyprodukowania aplikacji mogą nie mieć dostępu do dysku lokalnego lub dysk lokalny może być wysoce przejściowy, ponieważ kontenery są rozwiązane na maszynach fizycznych.</span><span class="sxs-lookup"><span data-stu-id="69e47-119">Applications producing logs may not have access to the local disk or the local disk may be highly transient as containers are shuffled around physical machines.</span></span> <span data-ttu-id="69e47-120">Nawet proste skalowanie aplikacji monolitycznych w wielu węzłach może być trudne do zlokalizowania odpowiedniego pliku dziennika opartego na plikach.</span><span class="sxs-lookup"><span data-stu-id="69e47-120">Even simple scaling up of monolithic applications across multiple nodes can make it challenging to locate the appropriate file-based log file.</span></span>

<span data-ttu-id="69e47-121">![logowanie do plików w skalowanej aplikacji monolitycznej.](./media/multiple-node-monolith-logging.png)
**rysunek 7-2**.</span><span class="sxs-lookup"><span data-stu-id="69e47-121">![Logging to files in a scaled monolithic app.](./media/multiple-node-monolith-logging.png)
**Figure 7-2**.</span></span> <span data-ttu-id="69e47-122">Rejestrowanie w plikach w skalowanej aplikacji monolitycznej.</span><span class="sxs-lookup"><span data-stu-id="69e47-122">Logging to files in a scaled monolithic app.</span></span>

<span data-ttu-id="69e47-123">Aplikacje natywne w chmurze opracowane przy użyciu architektury mikrousług również stanowią pewne wyzwania dotyczące rejestratorów opartych na plikach.</span><span class="sxs-lookup"><span data-stu-id="69e47-123">Cloud-native applications developed using a microservices architecture also pose some challenges for file-based loggers.</span></span> <span data-ttu-id="69e47-124">Żądania użytkowników mogą teraz obejmować wiele usług, które są uruchamiane na różnych komputerach i mogą zawierać funkcje bezserwerowe bez dostępu do lokalnego systemu plików.</span><span class="sxs-lookup"><span data-stu-id="69e47-124">User requests may now span multiple services that are run on different machines and may include serverless functions with no access to a local file system at all.</span></span> <span data-ttu-id="69e47-125">Bardzo trudne jest skorelowanie dzienników od użytkownika lub sesji przez te wiele usług i maszyn.</span><span class="sxs-lookup"><span data-stu-id="69e47-125">It would be very challenging to correlate the logs from a user or a session across these many services and machines.</span></span>

<span data-ttu-id="69e47-126">![rejestrowanie w plikach lokalnych w aplikacji mikrousług.](./media/local-log-file-per-service.png)
**rysunek 7-3**.</span><span class="sxs-lookup"><span data-stu-id="69e47-126">![Logging to local files in a microservices app.](./media/local-log-file-per-service.png)
**Figure 7-3**.</span></span> <span data-ttu-id="69e47-127">Rejestrowanie w plikach lokalnych w aplikacji mikrousług.</span><span class="sxs-lookup"><span data-stu-id="69e47-127">Logging to local files in a microservices app.</span></span>

<span data-ttu-id="69e47-128">Na koniec liczba użytkowników w niektórych aplikacjach natywnych w chmurze jest wysoka.</span><span class="sxs-lookup"><span data-stu-id="69e47-128">Finally, the number of users in some cloud-native applications is high.</span></span> <span data-ttu-id="69e47-129">Załóżmy, że każdy użytkownik generuje setki wierszy komunikatów dziennika podczas logowania do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="69e47-129">Imagine that each user generates a hundred lines of log messages when they log into an application.</span></span> <span data-ttu-id="69e47-130">W izolacji, którą można zarządzać, ale należy pomnożyć, że ponad 100 000 użytkowników i ilość dzienników są wystarczająco duże, że specjalne narzędzia są wymagane do obsługi efektywnego korzystania z dzienników.</span><span class="sxs-lookup"><span data-stu-id="69e47-130">In isolation, that is manageable, but multiply that over 100,000 users and the volume of logs becomes large enough that specialized tools are needed to support effective use of the logs.</span></span>

### <a name="logging-in-cloud-native-applications"></a><span data-ttu-id="69e47-131">Logowanie w aplikacjach natywnych w chmurze</span><span class="sxs-lookup"><span data-stu-id="69e47-131">Logging in cloud-native applications</span></span>

<span data-ttu-id="69e47-132">Każdy język programowania zawiera narzędzia, które pozwalają na zapisywanie dzienników, a zazwyczaj obciążenie związane z zapisywaniem tych dzienników jest niskie.</span><span class="sxs-lookup"><span data-stu-id="69e47-132">Every programming language has tooling that permits writing logs, and typically the overhead for writing these logs is low.</span></span> <span data-ttu-id="69e47-133">Wiele bibliotek rejestrowania zapewnia rejestrowanie różnych rodzajów krytyczne, które mogą być dostrojone w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="69e47-133">Many of the logging libraries provide logging different kinds of criticalities, which can be tuned at run time.</span></span> <span data-ttu-id="69e47-134">Na przykład [Biblioteka Serilog](https://serilog.net/) jest popularną biblioteką rejestrowania strukturalnego dla platformy .NET, która zapewnia następujące poziomy rejestrowania:</span><span class="sxs-lookup"><span data-stu-id="69e47-134">For instance, the [Serilog library](https://serilog.net/) is a popular structured logging library for .NET that provides the following logging levels:</span></span>

* <span data-ttu-id="69e47-135">Pełny</span><span class="sxs-lookup"><span data-stu-id="69e47-135">Verbose</span></span>
* <span data-ttu-id="69e47-136">Debugowanie</span><span class="sxs-lookup"><span data-stu-id="69e47-136">Debug</span></span>
* <span data-ttu-id="69e47-137">Informacje</span><span class="sxs-lookup"><span data-stu-id="69e47-137">Information</span></span>
* <span data-ttu-id="69e47-138">Ostrzeżenie</span><span class="sxs-lookup"><span data-stu-id="69e47-138">Warning</span></span>
* <span data-ttu-id="69e47-139">Błąd</span><span class="sxs-lookup"><span data-stu-id="69e47-139">Error</span></span>
* <span data-ttu-id="69e47-140">Krytyczn</span><span class="sxs-lookup"><span data-stu-id="69e47-140">Fatal</span></span>

<span data-ttu-id="69e47-141">Te różne poziomy dziennika zapewniają stopień szczegółowości rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-141">These different log levels provide granularity in logging.</span></span> <span data-ttu-id="69e47-142">Gdy aplikacja działa prawidłowo w środowisku produkcyjnym, może być skonfigurowana do rejestrowania tylko ważnych komunikatów.</span><span class="sxs-lookup"><span data-stu-id="69e47-142">When the application is functioning properly in production, it may be configured to only log important messages.</span></span> <span data-ttu-id="69e47-143">Gdy aplikacja jest błędna, poziom dziennika można zwiększyć, aby zebrać więcej szczegółowych dzienników.</span><span class="sxs-lookup"><span data-stu-id="69e47-143">When the application is misbehaving, then the log level can be increased so more verbose logs are gathered.</span></span> <span data-ttu-id="69e47-144">Równoważy to wydajność w porównaniu z prostotą debugowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-144">This balances performance against ease of debugging.</span></span>

<span data-ttu-id="69e47-145">Wysoka wydajność narzędzi rejestrowania i tunability szczegółowości powinny zachęcić deweloperów do częstego rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-145">The high performance of logging tools and the tunability of verbosity should encourage developers to log frequently.</span></span> <span data-ttu-id="69e47-146">Wiele preferuje wzorzec rejestrowania wejścia i wyjścia każdej z tych metod.</span><span class="sxs-lookup"><span data-stu-id="69e47-146">Many favor a pattern of logging the entry and exit of each method.</span></span> <span data-ttu-id="69e47-147">Takie podejście może być zdrowe, jak zbyt obszerne, ale rzadko nie jest to konieczne, aby deweloperzy chcieli mniej logować się.</span><span class="sxs-lookup"><span data-stu-id="69e47-147">This approach may sound like overkill, but it's infrequent that developers will wish for less logging.</span></span> <span data-ttu-id="69e47-148">W rzeczywistości nie zdarza się przeprowadzać wdrożeń wyłącznie w celu dodania rejestrowania do problematycznej metody.</span><span class="sxs-lookup"><span data-stu-id="69e47-148">In fact, it's not uncommon to perform deployments for the sole purpose of adding logging around a problematic method.</span></span> <span data-ttu-id="69e47-149">Błąd po stronie zbyt dużej liczby dzienników i nie jest on zbyt mały.</span><span class="sxs-lookup"><span data-stu-id="69e47-149">Err on the side of too much logging and not on too little.</span></span> <span data-ttu-id="69e47-150">Niektóre narzędzia mogą służyć do automatycznego udostępniania tego rodzaju rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-150">Some tools can be used to automatically provide this kind of logging.</span></span>

<span data-ttu-id="69e47-151">Ze względu na wyzwania związane z korzystaniem z dzienników opartych na plikach w aplikacjach natywnych w chmurze, preferowane są scentralizowane dzienniki.</span><span class="sxs-lookup"><span data-stu-id="69e47-151">Because of the challenges associated with using file-based logs in cloud-native apps, centralized logs are preferred.</span></span> <span data-ttu-id="69e47-152">Dzienniki są zbierane przez aplikacje i wysyłane do centralnej aplikacji do rejestrowania, która indeksuje i przechowuje dzienniki.</span><span class="sxs-lookup"><span data-stu-id="69e47-152">Logs are collected by the applications and shipped to a central logging application which indexes and stores the logs.</span></span> <span data-ttu-id="69e47-153">Ta klasa systemu może codziennie przyjmować dziesiątki gigabajtów dzienników.</span><span class="sxs-lookup"><span data-stu-id="69e47-153">This class of system can ingest tens of gigabytes of logs every day.</span></span>

<span data-ttu-id="69e47-154">Podczas tworzenia rejestrowania obejmującego wiele usług warto również stosować standardowe rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="69e47-154">It's also helpful to follow some standard practices when building logging that spans many services.</span></span> <span data-ttu-id="69e47-155">Na przykład generowanie [identyfikatora korelacji](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) na początku interakcji o długim czasie, a następnie rejestrowanie go w każdym komunikacie związanym z tą interakcją ułatwia wyszukiwanie wszystkich powiązanych komunikatów.</span><span class="sxs-lookup"><span data-stu-id="69e47-155">For instance, generating a [correlation ID](https://blog.rapid7.com/2016/12/23/the-value-of-correlation-ids/) at the start of a lengthy interaction, and then logging it in each message that is related to that interaction, makes it easier to search for all related messages.</span></span> <span data-ttu-id="69e47-156">Jeden z nich musi znaleźć tylko jeden komunikat i wyodrębnić identyfikator korelacji, aby znaleźć wszystkie powiązane komunikaty.</span><span class="sxs-lookup"><span data-stu-id="69e47-156">One need only find a single message and extract the correlation ID to find all the related messages.</span></span> <span data-ttu-id="69e47-157">Innym przykładem jest upewnienie się, że format dziennika jest taki sam dla każdej usługi, niezależnie od używanej przez niego biblioteki języka lub rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-157">Another example is ensuring that the log format is the same for every service, whatever the language or logging library it uses.</span></span> <span data-ttu-id="69e47-158">Ta Standaryzacja ułatwia znacznie łatwiejsze odczytywanie dzienników.</span><span class="sxs-lookup"><span data-stu-id="69e47-158">This standardization makes reading logs much easier.</span></span> <span data-ttu-id="69e47-159">Rysunek 7-4 pokazuje, jak architektura mikrousług może korzystać z scentralizowanego rejestrowania w ramach przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="69e47-159">Figure 7-4 demonstrates how a microservices architecture can leverage centralized logging as part of its workflow.</span></span>

<span data-ttu-id="69e47-160">Dzienniki ![z różnych źródeł są pozyskiwane w scentralizowanym magazynie dzienników.](./media/centralized-logging.png)
**rysunek 7-4**.</span><span class="sxs-lookup"><span data-stu-id="69e47-160">![Logs from various sources are ingested into a centralized log store.](./media/centralized-logging.png)
**Figure 7-4**.</span></span> <span data-ttu-id="69e47-161">Dzienniki z różnych źródeł są pozyskiwane w scentralizowanym magazynie dzienników.</span><span class="sxs-lookup"><span data-stu-id="69e47-161">Logs from various sources are ingested into a centralized log store.</span></span>

## <a name="challenges-with-detecting-and-responding-to-potential-app-health-issues"></a><span data-ttu-id="69e47-162">Wyzwania dotyczące wykrywania potencjalnych problemów z kondycją aplikacji i reagowania na nie</span><span class="sxs-lookup"><span data-stu-id="69e47-162">Challenges with detecting and responding to potential app health issues</span></span>

<span data-ttu-id="69e47-163">Niektóre aplikacje nie są krytyczne.</span><span class="sxs-lookup"><span data-stu-id="69e47-163">Some applications aren't mission critical.</span></span> <span data-ttu-id="69e47-164">Może być używany tylko wewnętrznie i w przypadku wystąpienia problemu użytkownik może skontaktować się z zespołem odpowiedzialnym i można ponownie uruchomić aplikację.</span><span class="sxs-lookup"><span data-stu-id="69e47-164">Maybe they're only used internally, and when a problem occurs, the user can contact the team responsible and the application can be restarted.</span></span> <span data-ttu-id="69e47-165">Jednak klienci często mają wyższe oczekiwania dla aplikacji, których używają.</span><span class="sxs-lookup"><span data-stu-id="69e47-165">However, customers often have higher expectations for the applications they consume.</span></span> <span data-ttu-id="69e47-166">Należy wiedzieć, kiedy występują problemy z aplikacją *przed* użytkownikami lub przed powiadomieniem użytkownika.</span><span class="sxs-lookup"><span data-stu-id="69e47-166">You should know when problems occur with your application *before* users do, or before users notify you.</span></span> <span data-ttu-id="69e47-167">W przeciwnym razie pierwszy wiesz o problemie może być widoczny, gdy zauważysz, że Angry natłokiem ogłoszeń dotyczących mediów społecznościowych zakłócają swoją aplikację, a nawet organizację.</span><span class="sxs-lookup"><span data-stu-id="69e47-167">Otherwise, the first you know about a problem may be when you notice an angry deluge of social media posts deriding your application or even your organization.</span></span>

<span data-ttu-id="69e47-168">Niektóre scenariusze, które należy wziąć pod uwagę, obejmują:</span><span class="sxs-lookup"><span data-stu-id="69e47-168">Some scenarios you may need to consider include:</span></span>

- <span data-ttu-id="69e47-169">Jedna usługa w aplikacji utrzymuje awarie i ponowne uruchomienie, co powoduje sporadyczne spowolnienie odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="69e47-169">One service in your application keeps failing and restarting, resulting in intermittent slow responses.</span></span>
- <span data-ttu-id="69e47-170">W niektórych porach dnia czas odpowiedzi aplikacji jest powolny.</span><span class="sxs-lookup"><span data-stu-id="69e47-170">At some times of the day, your application's response time is slow.</span></span>
- <span data-ttu-id="69e47-171">Po zakończeniu ostatniego wdrożenia obciążenie bazy danych jest trzykrotnie.</span><span class="sxs-lookup"><span data-stu-id="69e47-171">After a recent deployment, load on the database has tripled.</span></span>

<span data-ttu-id="69e47-172">Wdrożone prawidłowo, monitorowanie może informować o warunkach, które będą prowadzić do problemów, dzięki czemu można rozwiązać podstawowe warunki, zanim spowodują one znaczący wpływ na użytkowników.</span><span class="sxs-lookup"><span data-stu-id="69e47-172">Implemented properly, monitoring can let you know about conditions that will lead to problems, letting you address underlying conditions before they result in any significant user impact.</span></span>

### <a name="monitoring-cloud-native-apps"></a><span data-ttu-id="69e47-173">Monitorowanie aplikacji natywnych w chmurze</span><span class="sxs-lookup"><span data-stu-id="69e47-173">Monitoring cloud-native apps</span></span>

<span data-ttu-id="69e47-174">Niektóre Scentralizowane systemy rejestrowania zajmują dodatkową rolę zbierania danych telemetrycznych poza czystymi dziennikami.</span><span class="sxs-lookup"><span data-stu-id="69e47-174">Some centralized logging systems take on an additional role of collecting telemetry outside of pure logs.</span></span> <span data-ttu-id="69e47-175">Mogą zbierać metryki, takie jak czas uruchamiania kwerendy bazy danych, średni czas odpowiedzi z serwera sieci Web, a nawet średnie obciążenie procesora CPU i wykorzystanie pamięci zgłoszone przez system operacyjny.</span><span class="sxs-lookup"><span data-stu-id="69e47-175">They can collect metrics, such as time to run a database query, average response time from a web server, and even CPU load averages and memory pressure as reported by the operating system.</span></span> <span data-ttu-id="69e47-176">W połączeniu z dziennikami te systemy mogą zapewnić całościowy wgląd w kondycję węzłów w systemie i aplikacji jako całości.</span><span class="sxs-lookup"><span data-stu-id="69e47-176">In conjunction with the logs, these systems can provide a holistic view of the health of nodes in the system and the application as a whole.</span></span>

<span data-ttu-id="69e47-177">Możliwości zbierania metryk narzędzi do monitorowania mogą być również wprowadzane ręcznie z poziomu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="69e47-177">The metric-gathering capabilities of the monitoring tools can also be fed manually from within the application.</span></span> <span data-ttu-id="69e47-178">Przepływy biznesowe, które mają szczególne znaczenie, takie jak nowi użytkownicy, którzy tworzą rejestrację lub zamówienia są umieszczane, mogą być instrumentami w taki sposób, że zwiększają one licznik w centralnym systemie monitorowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-178">Business flows that are of particular interest such as new users signing up or orders being placed, may be instrumented such that they increment a counter in the central monitoring system.</span></span> <span data-ttu-id="69e47-179">Powoduje to odblokowanie narzędzi monitorowania w celu nie tylko monitorowania kondycji aplikacji, ale jego kondycji.</span><span class="sxs-lookup"><span data-stu-id="69e47-179">This unlocks the monitoring tools to not only monitor the health of the application but the health of the business.</span></span>

<span data-ttu-id="69e47-180">Zapytania można budować w narzędziach agregacji dzienników, aby wyszukać pewne statystyki lub wzorce, które następnie można wyświetlić w formie graficznej na niestandardowych pulpitach nawigacyjnych.</span><span class="sxs-lookup"><span data-stu-id="69e47-180">Queries can be constructed in the log aggregation tools to look for certain statistics or patterns, which can then be displayed in graphical form, on custom dashboards.</span></span> <span data-ttu-id="69e47-181">Często zespoły będą inwestować w duże, zainstalowane na ścianie ekrany, które obracają dane statystyczne związane z aplikacją.</span><span class="sxs-lookup"><span data-stu-id="69e47-181">Frequently, teams will invest in large, wall-mounted displays that rotate through the statistics related to an application.</span></span> <span data-ttu-id="69e47-182">W ten sposób można łatwo zobaczyć problemy w miarę ich występowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-182">This way, it's simple to see the problems as they occur.</span></span>

<span data-ttu-id="69e47-183">Natywne narzędzia do monitorowania w chmurze zapewniają dane telemetryczne w czasie rzeczywistym i wgląd w aplikacje, niezależnie od tego, czy są to jednoprocesowe aplikacje monolityczne czy rozproszone architektury mikrousług.</span><span class="sxs-lookup"><span data-stu-id="69e47-183">Cloud-native monitoring tools provide real-time telemetry and insight into apps regardless of whether they're single-process monolithic applications or distributed microservice architectures.</span></span> <span data-ttu-id="69e47-184">Obejmują one narzędzia umożliwiające zbieranie danych z aplikacji, a także narzędzia do wykonywania zapytań i wyświetlania informacji o kondycji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="69e47-184">They include tools that allow collection of data from the app as well as tools for querying and displaying information about the app's health.</span></span>

## <a name="challenges-with-reacting-to-critical-problems-in-cloud-native-apps"></a><span data-ttu-id="69e47-185">Wyzwania dotyczące rozwiązywania problemów krytycznych w aplikacjach natywnych w chmurze</span><span class="sxs-lookup"><span data-stu-id="69e47-185">Challenges with reacting to critical problems in cloud-native apps</span></span>

<span data-ttu-id="69e47-186">Jeśli musisz reagować na problemy z aplikacją, potrzebujesz pewnego sposobu, aby ostrzec właściwy personel.</span><span class="sxs-lookup"><span data-stu-id="69e47-186">If you need to react to problems with your application, you need some way to alert the right personnel.</span></span> <span data-ttu-id="69e47-187">Jest to trzeci wzorzec przestrzegania natywnych aplikacji w chmurze i zależy od rejestrowania i monitorowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-187">This is the third cloud-native application observability pattern and depends on logging and monitoring.</span></span> <span data-ttu-id="69e47-188">Aplikacja musi mieć zarejestrowanie, aby umożliwić zdiagnozowanie problemów, a w niektórych przypadkach, aby uzyskać dostęp do narzędzi do monitorowania.</span><span class="sxs-lookup"><span data-stu-id="69e47-188">Your application needs to have logging in place to allow problems to be diagnosed, and in some cases to feed into monitoring tools.</span></span> <span data-ttu-id="69e47-189">Wymaga monitorowania do agregowania metryk aplikacji i danych dotyczących kondycji w jednym miejscu.</span><span class="sxs-lookup"><span data-stu-id="69e47-189">It needs monitoring to aggregate application metrics and health data in one place.</span></span> <span data-ttu-id="69e47-190">Po jego nawiązaniu można utworzyć reguły, które będą wyzwalać alerty, gdy pewne metryki wykraczają poza akceptowalne poziomy.</span><span class="sxs-lookup"><span data-stu-id="69e47-190">Once this has been established, rules can be created that will trigger alerts when certain metrics fall outside of acceptable levels.</span></span>

<span data-ttu-id="69e47-191">Ogólnie rzecz biorąc, alerty są przyłączone do monitorowania w taki sposób, że określone warunki wyzwalają odpowiednie alerty do powiadamiania członków zespołu o nagłych problemach.</span><span class="sxs-lookup"><span data-stu-id="69e47-191">Generally, alerts are layered on top of monitoring such that certain conditions trigger appropriate alerts to notify team members of urgent problems.</span></span> <span data-ttu-id="69e47-192">Niektóre scenariusze, które mogą wymagać alertów, obejmują:</span><span class="sxs-lookup"><span data-stu-id="69e47-192">Some scenarios that may require alerts include:</span></span>

- <span data-ttu-id="69e47-193">Jedna z usług aplikacji nie odpowiada po 1 minucie przestoju.</span><span class="sxs-lookup"><span data-stu-id="69e47-193">One of your application's services is not responding after 1 minute of downtime.</span></span>
- <span data-ttu-id="69e47-194">Aplikacja zwraca odpowiedzi HTTP zakończonych niepowodzeniem do ponad 1% żądań.</span><span class="sxs-lookup"><span data-stu-id="69e47-194">Your application is returning unsuccessful HTTP responses to more than 1% of requests.</span></span>
- <span data-ttu-id="69e47-195">Średni czas odpowiedzi aplikacji dla kluczowych punktów końcowych przekracza 2000 MS.</span><span class="sxs-lookup"><span data-stu-id="69e47-195">Your application's average response time for key endpoints exceeds 2000 ms.</span></span>

### <a name="alerts-in-cloud-native-apps"></a><span data-ttu-id="69e47-196">Alerty w aplikacjach natywnych w chmurze</span><span class="sxs-lookup"><span data-stu-id="69e47-196">Alerts in cloud-native apps</span></span>

<span data-ttu-id="69e47-197">Można nawiązać zapytania względem narzędzi monitorowania, aby wyszukać znane warunki niepowodzeń.</span><span class="sxs-lookup"><span data-stu-id="69e47-197">You can craft queries against the monitoring tools to look for known failure conditions.</span></span> <span data-ttu-id="69e47-198">Na przykład zapytania mogą przeszukiwać dzienniki przychodzące w poszukiwaniu wskazań kodu stanu HTTP 500, co wskazuje na problem na serwerze sieci Web.</span><span class="sxs-lookup"><span data-stu-id="69e47-198">For instance, queries could search through the incoming logs for indications of HTTP status code 500, which indicates a problem on a web server.</span></span> <span data-ttu-id="69e47-199">Po wykryciu jednego z tych elementów, wiadomość e-mail lub SMS może zostać wysłana do właściciela usługi pochodzącej, która może zacząć zbadać.</span><span class="sxs-lookup"><span data-stu-id="69e47-199">As soon as one of these is detected, then an e-mail or an SMS could be sent to the owner of the originating service who can begin to investigate.</span></span>

<span data-ttu-id="69e47-200">Zwykle jednak jeden błąd 500 jest zbyt mały, aby ustalić, czy wystąpił problem.</span><span class="sxs-lookup"><span data-stu-id="69e47-200">Typically, though, a single 500 error isn't enough to determine that a problem has occurred.</span></span> <span data-ttu-id="69e47-201">Może to oznaczać, że użytkownik niepoprawnie wpisano hasło lub wprowadził nieprawidłowe dane.</span><span class="sxs-lookup"><span data-stu-id="69e47-201">It could mean that a user mistyped their password or entered some malformed data.</span></span> <span data-ttu-id="69e47-202">Zapytania alertów można przystąpić do uruchamiania tylko wtedy, gdy zostanie wykryta większa niż średnia liczba błędów 500.</span><span class="sxs-lookup"><span data-stu-id="69e47-202">The alert queries can be crafted to only fire when a larger than average number of 500 errors are detected.</span></span>

<span data-ttu-id="69e47-203">Jednym z najbardziej szkodliwych wzorców alertów jest uruchomienie zbyt wielu alertów w celu zbadania ich przez człowieka.</span><span class="sxs-lookup"><span data-stu-id="69e47-203">One of the most damaging patterns in alerting is to fire too many alerts for humans to investigate.</span></span> <span data-ttu-id="69e47-204">Właściciele usług będą szybko stać się Desensitized na błędy, które zostały wcześniej zbadane i okazały się niegroźne.</span><span class="sxs-lookup"><span data-stu-id="69e47-204">Service owners will rapidly become desensitized to errors that they've previously investigated and found to be benign.</span></span> <span data-ttu-id="69e47-205">Następnie, gdy wystąpią prawdziwe błędy, zostaną utracone w hałasie setek fałszywych wartości dodatnich.</span><span class="sxs-lookup"><span data-stu-id="69e47-205">Then, when true errors occur, they'll be lost in the noise of hundreds of false positives.</span></span> <span data-ttu-id="69e47-206">Parable [Boy, kto Cried Wolf](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) jest często powiadamiany o elementach podrzędnych, aby ostrzec o tym bardzo niebezpieczeństwie.</span><span class="sxs-lookup"><span data-stu-id="69e47-206">The parable of the [Boy Who Cried Wolf](https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf) is frequently told to children to warn them of this very danger.</span></span> <span data-ttu-id="69e47-207">Ważne jest, aby upewnić się, że alerty, które są uruchamiane, są wskaźnikiem rzeczywistego problemu.</span><span class="sxs-lookup"><span data-stu-id="69e47-207">It's important to ensure that the alerts that do fire are indicative of a real problem.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="69e47-208">[Poprzednie](monitoring-health.md)
>[dalej](logging-with-elastic-stack.md)</span><span class="sxs-lookup"><span data-stu-id="69e47-208">[Previous](monitoring-health.md)
[Next](logging-with-elastic-stack.md)</span></span>
