---
title: gRPC
description: Dowiedz się więcej na temat gRPC, jego roli w aplikacjach natywnych w chmurze i różnice między komunikacją HTTP RESTful.
author: robvet
no-loc:
- Blazor
- Blazor WebAssembly
ms.date: 05/13/2020
ms.openlocfilehash: 4a0c88472d2b19efb2ff0f58395003b1b6409131
ms.sourcegitcommit: ef50c99928183a0bba75e07b9f22895cd4c480f8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/07/2020
ms.locfileid: "87914887"
---
# <a name="grpc"></a><span data-ttu-id="92cdb-103">gRPC</span><span class="sxs-lookup"><span data-stu-id="92cdb-103">gRPC</span></span>

<span data-ttu-id="92cdb-104">Do tej pory ta książka koncentruje się na komunikacji [opartej na protokole REST](https://docs.microsoft.com/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="92cdb-104">So far in this book, we've focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="92cdb-105">Wiemy, że reszta jest elastycznym stylem architektonicznym, który definiuje operacje oparte na CRUDniu w odniesieniu do zasobów jednostki.</span><span class="sxs-lookup"><span data-stu-id="92cdb-105">We've seen that REST is a flexible architectural style that defines CRUD-based operations against entity resources.</span></span> <span data-ttu-id="92cdb-106">Klienci współpracują z zasobami w protokole HTTP z modelem komunikacji żądania/odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="92cdb-106">Clients interact with resources across HTTP with a request/response communication model.</span></span> <span data-ttu-id="92cdb-107">Podczas gdy usługa REST jest szeroko zaimplementowana, nowsza Technologia komunikacji, gRPC, zyskała ogromne możliwości w całej społeczności natywnej w chmurze.</span><span class="sxs-lookup"><span data-stu-id="92cdb-107">While REST is widely implemented, a newer communication technology, gRPC, has gained tremendous momentum across the cloud-native community.</span></span>

## <a name="what-is-grpc"></a><span data-ttu-id="92cdb-108">Co to jest gRPC?</span><span class="sxs-lookup"><span data-stu-id="92cdb-108">What is gRPC?</span></span>

<span data-ttu-id="92cdb-109">gRPC to nowoczesne środowisko o wysokiej wydajności, które powoduje rozwój starego protokołu [zdalnego wywołania procedury (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) w wieku.</span><span class="sxs-lookup"><span data-stu-id="92cdb-109">gRPC is a modern, high-performance framework that evolves the age-old [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) protocol.</span></span> <span data-ttu-id="92cdb-110">Na poziomie aplikacji gRPC usprawnia obsługę komunikatów między klientami a usługami zaplecza.</span><span class="sxs-lookup"><span data-stu-id="92cdb-110">At the application level, gRPC streamlines messaging between clients and back-end services.</span></span> <span data-ttu-id="92cdb-111">Pochodzący z usługi Google, gRPC jest typu open source i częścią ekosystemu [macierzystego przetwarzania w chmurze (CNCF)](https://www.cncf.io/) w ramach ofert natywnych w chmurze.</span><span class="sxs-lookup"><span data-stu-id="92cdb-111">Originating from Google, gRPC is open source and part of the  [Cloud Native Computing Foundation (CNCF)](https://www.cncf.io/) ecosystem of cloud-native offerings.</span></span> <span data-ttu-id="92cdb-112">CNCF traktuje gRPC [projekt inkubacji](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span><span class="sxs-lookup"><span data-stu-id="92cdb-112">CNCF considers gRPC an [incubating project](https://github.com/cncf/toc/blob/master/process/graduation_criteria.adoc).</span></span> <span data-ttu-id="92cdb-113">Inkubacja oznacza, że użytkownicy końcowi korzystają z technologii w aplikacjach produkcyjnych, a projekt ma w dobrej kondycji liczbę współautorów.</span><span class="sxs-lookup"><span data-stu-id="92cdb-113">Incubating means end users are using the technology in production applications, and the project has a healthy number of contributors.</span></span>

<span data-ttu-id="92cdb-114">Typowa aplikacja kliencka gRPC będzie uwidaczniać lokalną funkcję w procesie, która implementuje operację biznesową.</span><span class="sxs-lookup"><span data-stu-id="92cdb-114">A typical gRPC client app will expose a local, in-process function that implements a business operation.</span></span> <span data-ttu-id="92cdb-115">W obszarze okładek ta funkcja lokalna wywołuje inną funkcję na komputerze zdalnym.</span><span class="sxs-lookup"><span data-stu-id="92cdb-115">Under the covers, that local function invokes another function on a remote machine.</span></span> <span data-ttu-id="92cdb-116">To, co wydaje się być wywołaniem lokalnym, stanowi przezroczyste wywołanie poza procesem do usługi zdalnej.</span><span class="sxs-lookup"><span data-stu-id="92cdb-116">What appears to be a local call essentially becomes a transparent out-of-process call to a remote service.</span></span> <span data-ttu-id="92cdb-117">Połączona z usługą RPC tworzy abstrakcyjną komunikację między komputerami, serializacji i wykonania w sieci.</span><span class="sxs-lookup"><span data-stu-id="92cdb-117">The RPC plumbing abstracts the point-to-point networking communication, serialization, and execution between computers.</span></span>

<span data-ttu-id="92cdb-118">W aplikacjach natywnych w chmurze deweloperzy często pracują w różnych językach programowania, strukturach i technologiach.</span><span class="sxs-lookup"><span data-stu-id="92cdb-118">In cloud-native applications, developers often work across programming languages, frameworks, and technologies.</span></span> <span data-ttu-id="92cdb-119">Takie *współdziałanie* komplikuje kontrakty dotyczące komunikatów i instalację wodociągową wymaganą do komunikacji między platformami.</span><span class="sxs-lookup"><span data-stu-id="92cdb-119">This *interoperability* complicates message contracts and the plumbing required for cross-platform communication.</span></span>  <span data-ttu-id="92cdb-120">gRPC zapewnia "jednorodną warstwę poziomą", która jest abstrakcyjna.</span><span class="sxs-lookup"><span data-stu-id="92cdb-120">gRPC provides a "uniform horizontal layer" that abstracts these concerns.</span></span> <span data-ttu-id="92cdb-121">Kod deweloperów w swojej natywnej platformie skupia się na funkcjonalności biznesowej, podczas gdy gRPC obsługuje komunikację wodociągową.</span><span class="sxs-lookup"><span data-stu-id="92cdb-121">Developers code in their native platform focused on business functionality, while gRPC handles communication plumbing.</span></span>

<span data-ttu-id="92cdb-122">gRPC oferuje kompleksową pomoc techniczną dla najpopularniejszych stosów programistycznych, w tym Java, JavaScript, C#, go, Swift i NodeJS.</span><span class="sxs-lookup"><span data-stu-id="92cdb-122">gRPC offers comprehensive support across most popular development stacks, including Java, JavaScript, C#, Go, Swift, and NodeJS.</span></span>

## <a name="grpc-benefits"></a><span data-ttu-id="92cdb-123">Korzyści z gRPC</span><span class="sxs-lookup"><span data-stu-id="92cdb-123">gRPC Benefits</span></span>

<span data-ttu-id="92cdb-124">gRPC używa protokołu HTTP/2 do protokołu transportowego.</span><span class="sxs-lookup"><span data-stu-id="92cdb-124">gRPC uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="92cdb-125">Chociaż zgodne z protokołem HTTP 1,1, usługa HTTP/2 oferuje wiele zaawansowanych możliwości:</span><span class="sxs-lookup"><span data-stu-id="92cdb-125">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="92cdb-126">Binarny protokół ramek do transportu danych — w przeciwieństwie do protokołu HTTP 1,1, który jest oparty na tekście.</span><span class="sxs-lookup"><span data-stu-id="92cdb-126">A binary framing protocol for data transport - unlike HTTP 1.1, which is text based.</span></span>
- <span data-ttu-id="92cdb-127">Obsługa multipleksowania do wysyłania wielu żądań równoległych za pośrednictwem tego samego połączenia — limity protokołu HTTP 1,1 w czasie przetwarzania do jednego komunikatu żądania/odpowiedzi jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="92cdb-127">Multiplexing support for sending multiple parallel requests over the same connection - HTTP 1.1 limits processing to one request/response message at a time.</span></span>
- <span data-ttu-id="92cdb-128">Dwukierunkowa komunikacja dwustronna służąca do jednoczesnego wysyłania zarówno żądań klientów, jak i odpowiedzi na serwer.</span><span class="sxs-lookup"><span data-stu-id="92cdb-128">Bidirectional full-duplex communication for sending both client requests and server responses simultaneously.</span></span>
- <span data-ttu-id="92cdb-129">Wbudowane przesyłanie strumieniowe i przekazywanie żądań i odpowiedzi na asynchroniczne strumienie dużych zestawów danych.</span><span class="sxs-lookup"><span data-stu-id="92cdb-129">Built-in streaming enabling requests and responses to asynchronously stream large data sets.</span></span>
- <span data-ttu-id="92cdb-130">Kompresja nagłówka, która zmniejsza użycie sieci.</span><span class="sxs-lookup"><span data-stu-id="92cdb-130">Header compression that reduces network usage.</span></span>

<span data-ttu-id="92cdb-131">gRPC jest lekki i wysoce wydajny.</span><span class="sxs-lookup"><span data-stu-id="92cdb-131">gRPC is lightweight and highly performant.</span></span> <span data-ttu-id="92cdb-132">Może to być nawet 8x szybciej niż Serializacja JSON z komunikatami 60-80% mniejszych.</span><span class="sxs-lookup"><span data-stu-id="92cdb-132">It can be up to 8x faster than JSON serialization with messages 60-80% smaller.</span></span> <span data-ttu-id="92cdb-133">W programie Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) sprzężeniem wydajność gRPC przekracza szybkość i wydajność wysoce zoptymalizowanych [powiązań NetTCP](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span><span class="sxs-lookup"><span data-stu-id="92cdb-133">In Microsoft [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance exceeds the speed and efficiency of the highly optimized [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="92cdb-134">W przeciwieństwie do NetTCP, który preferuje stos firmy Microsoft, gRPC jest dla wielu platform.</span><span class="sxs-lookup"><span data-stu-id="92cdb-134">Unlike NetTCP, which favors the Microsoft stack, gRPC is cross-platform.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="92cdb-135">Bufory protokołu</span><span class="sxs-lookup"><span data-stu-id="92cdb-135">Protocol Buffers</span></span>

<span data-ttu-id="92cdb-136">gRPC obejmuje technologię "open source" o nazwie [bufory protokołu](https://developers.google.com/protocol-buffers/docs/overview).</span><span class="sxs-lookup"><span data-stu-id="92cdb-136">gRPC embraces an open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview).</span></span> <span data-ttu-id="92cdb-137">Zapewniają wysoce wydajny i neutralny dla platformy format serializacji służący do serializowania komunikatów strukturalnych wysyłanych przez usługi.</span><span class="sxs-lookup"><span data-stu-id="92cdb-137">They provide a highly efficient and platform-neutral serialization format for serializing structured messages that services send to each other.</span></span> <span data-ttu-id="92cdb-138">Deweloperzy mogą definiować kontrakt usługi dla każdej mikrousługi przy użyciu języka definicji (IDL) dla wielu platform.</span><span class="sxs-lookup"><span data-stu-id="92cdb-138">Using a cross-platform Interface Definition Language (IDL), developers define a service contract for each microservice.</span></span> <span data-ttu-id="92cdb-139">Umowa zaimplementowana jako `.proto` plik tekstowy, opisuje metody, dane wejściowe i wyjściowe dla każdej usługi.</span><span class="sxs-lookup"><span data-stu-id="92cdb-139">The contract, implemented as a text-based `.proto` file, describes the methods, inputs, and outputs for each service.</span></span> <span data-ttu-id="92cdb-140">Ten sam plik kontraktu może służyć do gRPC klientów i usług opartych na różnych platformach deweloperskich.</span><span class="sxs-lookup"><span data-stu-id="92cdb-140">The same contract file can be used for gRPC clients and services built on different development platforms.</span></span>

<span data-ttu-id="92cdb-141">Przy użyciu pliku proto, kompilatora protobuf, `protoc` program generuje kod klienta i usługi dla platformy docelowej.</span><span class="sxs-lookup"><span data-stu-id="92cdb-141">Using the proto file, the Protobuf compiler, `protoc`, generates both client and service code for your target platform.</span></span> <span data-ttu-id="92cdb-142">Kod zawiera następujące składniki:</span><span class="sxs-lookup"><span data-stu-id="92cdb-142">The code includes the following components:</span></span>

- <span data-ttu-id="92cdb-143">Obiekty silnie wpisane, udostępnione przez klienta i usługę, które reprezentują operacje usługi i elementy danych dla wiadomości.</span><span class="sxs-lookup"><span data-stu-id="92cdb-143">Strongly typed objects, shared by the client and service, that represent the service operations and data elements for a message.</span></span>
- <span data-ttu-id="92cdb-144">Klasa bazowa o jednoznacznie określonym typie z wymaganą siecią wodociągową, którą zdalna usługa gRPC może dziedziczyć i zwiększać.</span><span class="sxs-lookup"><span data-stu-id="92cdb-144">A strongly typed base class with the required network plumbing that the remote gRPC service can inherit and extend.</span></span>
- <span data-ttu-id="92cdb-145">Procedura wejścia klienta, która zawiera wymagane instalacje wodociągowe do wywołania zdalnej usługi gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-145">A client stub that contains the required plumbing to invoke the remote gRPC service.</span></span>

<span data-ttu-id="92cdb-146">W czasie wykonywania każdy komunikat jest serializowany jako standardowa reprezentacja protobuf i wymieniany między klientem a usługą zdalną.</span><span class="sxs-lookup"><span data-stu-id="92cdb-146">At runtime, each message is serialized as a standard Protobuf representation and exchanged between the client and remote service.</span></span> <span data-ttu-id="92cdb-147">W przeciwieństwie do JSON lub XML, komunikaty protobuf są serializowane jako skompilowane bajty binarne.</span><span class="sxs-lookup"><span data-stu-id="92cdb-147">Unlike JSON or XML, Protobuf messages are serialized as compiled binary bytes.</span></span>

<span data-ttu-id="92cdb-148">Książka [gRPC dla deweloperów programu WCF](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/)dostępna w witrynie architektury firmy Microsoft zapewnia szczegółowe pokrycie GRPC i buforów protokołów.</span><span class="sxs-lookup"><span data-stu-id="92cdb-148">The book, [gRPC for WCF Developers](https://docs.microsoft.com/dotnet/architecture/grpc-for-wcf-developers/), available from the Microsoft Architecture site, provides in-depth coverage of gRPC and Protocol Buffers.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="92cdb-149">Obsługa gRPC w programie .NET</span><span class="sxs-lookup"><span data-stu-id="92cdb-149">gRPC support in .NET</span></span>

<span data-ttu-id="92cdb-150">gRPC jest zintegrowany z zestawem SDK platformy .NET Core 3,0 i nowszymi wersjami.</span><span class="sxs-lookup"><span data-stu-id="92cdb-150">gRPC is integrated into .NET Core 3.0 SDK and later.</span></span> <span data-ttu-id="92cdb-151">Obsługiwane są następujące narzędzia:</span><span class="sxs-lookup"><span data-stu-id="92cdb-151">The following tools support it:</span></span>

- <span data-ttu-id="92cdb-152">Program Visual Studio 2019, wersja 16,3 lub nowsza z zainstalowanym obciążeniem programowaniem w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="92cdb-152">Visual Studio 2019, version 16.3 or later, with the web development workload installed.</span></span>
- <span data-ttu-id="92cdb-153">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="92cdb-153">Visual Studio Code</span></span>
- <span data-ttu-id="92cdb-154">Interfejs wiersza polecenia dotnet</span><span class="sxs-lookup"><span data-stu-id="92cdb-154">the dotnet CLI</span></span>

<span data-ttu-id="92cdb-155">Zestaw SDK zawiera narzędzia dla routingu punktów końcowych, wbudowane IoC i rejestrowanie.</span><span class="sxs-lookup"><span data-stu-id="92cdb-155">The SDK includes tooling for endpoint routing, built-in IoC, and logging.</span></span> <span data-ttu-id="92cdb-156">Serwer sieci Web Kestrel "open source" obsługuje połączenia HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="92cdb-156">The open-source Kestrel web server supports HTTP/2 connections.</span></span> <span data-ttu-id="92cdb-157">Rysunek 4-20 pokazuje szablon programu Visual Studio 2019, który tworzy szkielet projektu szkieletu dla usługi gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-157">Figure 4-20 shows a Visual Studio 2019 template that scaffolds a skeleton project for a gRPC service.</span></span> <span data-ttu-id="92cdb-158">Zwróć uwagę na to, jak platforma .NET Core w pełni obsługuje systemy Windows, Linux i macOS.</span><span class="sxs-lookup"><span data-stu-id="92cdb-158">Note how .NET Core fully supports Windows, Linux, and macOS.</span></span>

![Obsługa gRPC w programie Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="92cdb-160">**Rysunek 4-20**.</span><span class="sxs-lookup"><span data-stu-id="92cdb-160">**Figure 4-20**.</span></span> <span data-ttu-id="92cdb-161">Obsługa gRPC w programie Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="92cdb-161">gRPC support in Visual Studio 2019</span></span>
  
<span data-ttu-id="92cdb-162">Rysunek 4-21 przedstawia usługi szkieletowej gRPC wygenerowanej na podstawie wbudowanej szkieletu zawartej w programie Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="92cdb-162">Figure 4-21 shows the skeleton gRPC service generated from the built-in scaffolding included in Visual Studio 2019.</span></span>  

![projekt gRPC w programie Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="92cdb-164">**Rysunek 4-21**.</span><span class="sxs-lookup"><span data-stu-id="92cdb-164">**Figure 4-21**.</span></span> <span data-ttu-id="92cdb-165">projekt gRPC w programie Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="92cdb-165">gRPC project in Visual Studio 2019</span></span>

<span data-ttu-id="92cdb-166">Na poprzedniej ilustracji Zanotuj plik opisu proto i kod usługi.</span><span class="sxs-lookup"><span data-stu-id="92cdb-166">In the previous figure, note the proto description file and service code.</span></span> <span data-ttu-id="92cdb-167">Jak zobaczysz szybko, program Visual Studio generuje dodatkową konfigurację zarówno dla klasy startowej, jak i bazowego pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="92cdb-167">As you'll see shortly, Visual Studio generates additional configuration in both the Startup class and underlying project file.</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="92cdb-168">gRPC użycie</span><span class="sxs-lookup"><span data-stu-id="92cdb-168">gRPC usage</span></span>

<span data-ttu-id="92cdb-169">Preferuj gRPC w następujących scenariuszach:</span><span class="sxs-lookup"><span data-stu-id="92cdb-169">Favor gRPC for the following scenarios:</span></span>

- <span data-ttu-id="92cdb-170">Synchroniczna komunikacja mikrousługi zaplecza do mikrousług w przypadku, gdy do dalszego przetwarzania jest wymagana natychmiastowa odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="92cdb-170">Synchronous backend microservice-to-microservice communication where an immediate response is required to continue processing.</span></span>
- <span data-ttu-id="92cdb-171">Środowiska Polyglot, które muszą obsługiwać mieszane platformy programistyczne.</span><span class="sxs-lookup"><span data-stu-id="92cdb-171">Polyglot environments that need to support mixed programming platforms.</span></span>
- <span data-ttu-id="92cdb-172">Niska opóźnienia i Wysoka przepływność komunikacji, w której wydajność jest krytyczna.</span><span class="sxs-lookup"><span data-stu-id="92cdb-172">Low latency and high throughput communication where performance is critical.</span></span>
- <span data-ttu-id="92cdb-173">Komunikacja między punktami w czasie rzeczywistym — gRPC może wypychanie wiadomości w czasie rzeczywistym bez sondowania i zapewnia doskonałą obsługę transmisji dwukierunkowej.</span><span class="sxs-lookup"><span data-stu-id="92cdb-173">Point-to-point real-time communication - gRPC can push messages in real time without polling and has excellent support for bi-directional streaming.</span></span>
- <span data-ttu-id="92cdb-174">Środowiska ograniczone do sieci — binarne komunikaty gRPC są zawsze mniejsze niż odpowiedni tekst tekstowy w formacie JSON.</span><span class="sxs-lookup"><span data-stu-id="92cdb-174">Network constrained environments – binary gRPC messages are always smaller than an equivalent text-based JSON message.</span></span>

<span data-ttu-id="92cdb-175">W tej chwili ten zapis gRPC jest używany głównie z usługami zaplecza.</span><span class="sxs-lookup"><span data-stu-id="92cdb-175">At the time, of this writing, gRPC is primarily used with backend services.</span></span> <span data-ttu-id="92cdb-176">Nowoczesne przeglądarki nie mogą zapewnić poziomu kontroli protokołu HTTP/2 wymaganego do obsługi klienta frontonu gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-176">Modern browsers can't provide the level of HTTP/2 control required to support a front-end gRPC client.</span></span> <span data-ttu-id="92cdb-177">Takie rozwiązanie jest obsługiwane przez program [gRPC-Web with .NET](https://devblogs.microsoft.com/aspnet/grpc-web-for-net-now-available/) , który umożliwia gRPC komunikację z aplikacjami opartymi na przeglądarce skompilowanymi przy użyciu języka JavaScript lub Blazor WebAssembly technologii.</span><span class="sxs-lookup"><span data-stu-id="92cdb-177">That said, there's support for [gRPC-Web with .NET](https://devblogs.microsoft.com/aspnet/grpc-web-for-net-now-available/) that enables gRPC communication from browser-based apps built with JavaScript or Blazor WebAssembly technologies.</span></span> <span data-ttu-id="92cdb-178">[gRPC-Web](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) ASP.NET Core umożliwia aplikacji gRPC do obsługi funkcji gRPC w aplikacjach przeglądarki:</span><span class="sxs-lookup"><span data-stu-id="92cdb-178">[gRPC-Web](https://github.com/grpc/grpc/blob/master/doc/PROTOCOL-WEB.md) enables an ASP.NET Core gRPC app to support gRPC features in browser apps:</span></span>

- <span data-ttu-id="92cdb-179">Jednoznacznie wpisane, generowane przez kod klientów</span><span class="sxs-lookup"><span data-stu-id="92cdb-179">Strongly typed, code-generated clients</span></span>
- <span data-ttu-id="92cdb-180">Kompaktowe komunikaty protobuf</span><span class="sxs-lookup"><span data-stu-id="92cdb-180">Compact Protobuf messages</span></span>
- <span data-ttu-id="92cdb-181">Przesyłanie strumieniowe serwera</span><span class="sxs-lookup"><span data-stu-id="92cdb-181">Server streaming</span></span>

## <a name="grpc-implementation"></a><span data-ttu-id="92cdb-182">Implementacja gRPC</span><span class="sxs-lookup"><span data-stu-id="92cdb-182">gRPC implementation</span></span>

<span data-ttu-id="92cdb-183">Architektura referencyjna mikrousług [eshop na kontenerach](https://github.com/dotnet-architecture/eShopOnContainers)od firmy Microsoft pokazuje, jak zaimplementować usługi gRPC Services w aplikacjach .NET Core.</span><span class="sxs-lookup"><span data-stu-id="92cdb-183">The microservice reference architecture, [eShop on Containers](https://github.com/dotnet-architecture/eShopOnContainers), from Microsoft, shows how to implement gRPC services in .NET Core applications.</span></span> <span data-ttu-id="92cdb-184">Rysunek 4-22 przedstawia architekturę zaplecza.</span><span class="sxs-lookup"><span data-stu-id="92cdb-184">Figure 4-22 presents the back-end architecture.</span></span>

![Architektura zaplecza dla eShop na kontenerach](./media/eshop-with-aggregators.png)

<span data-ttu-id="92cdb-186">**Rysunek 4-22**.</span><span class="sxs-lookup"><span data-stu-id="92cdb-186">**Figure 4-22**.</span></span> <span data-ttu-id="92cdb-187">Architektura zaplecza dla eShop na kontenerach</span><span class="sxs-lookup"><span data-stu-id="92cdb-187">Backend architecture for eShop on Containers</span></span>

<span data-ttu-id="92cdb-188">Na poprzedniej ilustracji należy zwrócić uwagę, w jaki sposób eShop jest wdrażany w ramach [wzorca dla frontonów](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) przez udostępnienie wielu bram interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="92cdb-188">In the previous figure, note how eShop embraces the [Backend for Frontends pattern](https://docs.microsoft.com/azure/architecture/patterns/backends-for-frontends) (BFF) by exposing multiple API gateways.</span></span> <span data-ttu-id="92cdb-189">Omawiamy wzorzec BFF we wcześniejszej części tego rozdziału.</span><span class="sxs-lookup"><span data-stu-id="92cdb-189">We discussed the BFF pattern earlier in this chapter.</span></span> <span data-ttu-id="92cdb-190">Zwróć szczególną uwagę na mikrousługę agregatora (szarą), która znajduje się między wielousługową bramą interfejsu API zakupów w sieci Web i mikrousługimi zakupów zaplecza.</span><span class="sxs-lookup"><span data-stu-id="92cdb-190">Pay close attention to the Aggregator microservice (in gray) that sits between the Web-Shopping API Gateway and backend Shopping microservices.</span></span> <span data-ttu-id="92cdb-191">Agregator odbiera pojedyncze żądanie od klienta, wysyła je do różnych mikrousług, agreguje wyniki i odsyła je do żądającego klienta.</span><span class="sxs-lookup"><span data-stu-id="92cdb-191">The Aggregator receives a single request from a client, dispatches it to various microservices, aggregates the results, and sends them back to the requesting client.</span></span> <span data-ttu-id="92cdb-192">Takie operacje zwykle wymagają komunikacji synchronicznej jako do wygenerowania natychmiastowej odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="92cdb-192">Such operations typically require synchronous communication as to produce an immediate response.</span></span> <span data-ttu-id="92cdb-193">W eShop, wywołania zaplecza z agregatora są wykonywane przy użyciu gRPC, jak pokazano na rysunku 4-23.</span><span class="sxs-lookup"><span data-stu-id="92cdb-193">In eShop, backend calls from the Aggregator are performed using gRPC as shown in Figure 4-23.</span></span>

![gRPC w eShop w kontenerach](./media/grpc-implementation.png)

<span data-ttu-id="92cdb-195">**Rysunek 4-23**.</span><span class="sxs-lookup"><span data-stu-id="92cdb-195">**Figure 4-23**.</span></span> <span data-ttu-id="92cdb-196">gRPC w eShop w kontenerach</span><span class="sxs-lookup"><span data-stu-id="92cdb-196">gRPC in eShop on Containers</span></span>

<span data-ttu-id="92cdb-197">Komunikacja gRPC wymaga zarówno składnika klienta, jak i serwera.</span><span class="sxs-lookup"><span data-stu-id="92cdb-197">gRPC communication requires both client and server components.</span></span> <span data-ttu-id="92cdb-198">Na poprzedniej ilustracji należy zwrócić uwagę na to, jak agregator zakupów implementuje klienta gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-198">In the previous figure, note how the Shopping Aggregator implements a gRPC client.</span></span> <span data-ttu-id="92cdb-199">Klient dokonuje synchronicznych wywołań gRPC (czerwony) do mikrousług zaplecza, z których każdy implementuje serwer gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-199">The client makes synchronous gRPC calls (in red) to backend microservices, each of which implement a gRPC server.</span></span> <span data-ttu-id="92cdb-200">Zarówno klient, jak i serwer wykorzystują wbudowaną gRPCą instalację z zestaw .NET Core SDK.</span><span class="sxs-lookup"><span data-stu-id="92cdb-200">Both the client and server take advantage of the built-in gRPC plumbing from the .NET Core SDK.</span></span> <span data-ttu-id="92cdb-201">Klasy *pośredniczące* po stronie klienta zapewniają instalację do wywoływania zdalnych wywołań gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-201">Client-side *stubs* provide the plumbing to invoke remote gRPC calls.</span></span> <span data-ttu-id="92cdb-202">Składniki po stronie serwera zapewniają gRPCą, że niestandardowe klasy usług mogą dziedziczyć i zużywać.</span><span class="sxs-lookup"><span data-stu-id="92cdb-202">Server-side components provide gRPC plumbing that custom service classes can inherit and consume.</span></span>

<span data-ttu-id="92cdb-203">Mikrousługi, które uwidaczniają interfejs API RESTful i komunikację gRPC, wymagają wielu punktów końcowych do zarządzania ruchem.</span><span class="sxs-lookup"><span data-stu-id="92cdb-203">Microservices that expose both a RESTful API and gRPC communication require multiple endpoints to manage traffic.</span></span> <span data-ttu-id="92cdb-204">Należy otworzyć punkt końcowy, który nasłuchuje ruchu HTTP dla wywołań RESTful i drugi dla wywołań gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-204">You would open an endpoint that listens for HTTP traffic for the RESTful calls and another for gRPC calls.</span></span> <span data-ttu-id="92cdb-205">Punkt końcowy gRPC musi być skonfigurowany dla protokołu HTTP/2, który jest wymagany do komunikacji gRPC.</span><span class="sxs-lookup"><span data-stu-id="92cdb-205">The gRPC endpoint must be configured for the HTTP/2 protocol that is required for gRPC communication.</span></span>

<span data-ttu-id="92cdb-206">Staramy się oddzielić mikrousługi z wzorcem komunikacji asynchronicznej, ponieważ niektóre operacje wymagają bezpośrednich wywołań.</span><span class="sxs-lookup"><span data-stu-id="92cdb-206">While we strive to decouple microservices with asynchronous communication patterns, some operations require direct calls.</span></span> <span data-ttu-id="92cdb-207">gRPC powinien być głównym wyborem do bezpośredniej komunikacji synchronicznej między mikrousługami.</span><span class="sxs-lookup"><span data-stu-id="92cdb-207">gRPC should be the primary choice for direct synchronous communication between microservices.</span></span> <span data-ttu-id="92cdb-208">Jej protokół komunikacyjny o wysokiej wydajności oparty na protokole HTTP/2 i bufory protokołu sprawiają, że jest idealnym wyborem.</span><span class="sxs-lookup"><span data-stu-id="92cdb-208">Its high-performance communication protocol, based on HTTP/2 and protocol buffers, make it a perfect choice.</span></span>

## <a name="looking-ahead"></a><span data-ttu-id="92cdb-209">Spojrzenie na przyszłość</span><span class="sxs-lookup"><span data-stu-id="92cdb-209">Looking ahead</span></span>

<span data-ttu-id="92cdb-210">Patrząc na przyszłość, gRPC będzie nadal uzyskać trakcję dla systemów natywnych w chmurze.</span><span class="sxs-lookup"><span data-stu-id="92cdb-210">Looking ahead, gRPC will continue to gain traction for cloud-native systems.</span></span> <span data-ttu-id="92cdb-211">Zalety wydajności i łatwość programowania są atrakcyjne.</span><span class="sxs-lookup"><span data-stu-id="92cdb-211">The performance benefits and ease of development are compelling.</span></span> <span data-ttu-id="92cdb-212">Jednakże reszta będzie prawdopodobnie przez długi czas.</span><span class="sxs-lookup"><span data-stu-id="92cdb-212">However, REST will likely be around for a long time.</span></span> <span data-ttu-id="92cdb-213">Program Excel IT dla publicznie uwidocznionych interfejsów API i ze względu na zgodność z poprzednimi wersjami.</span><span class="sxs-lookup"><span data-stu-id="92cdb-213">It excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="92cdb-214">[Poprzedni](service-to-service-communication.md) 
> [Dalej](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="92cdb-214">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
