---
title: Korzystanie z kontenerów i orkiestratorów
description: Korzystanie z kontenerów platformy Docker i koordynatorów Kubernetes na platformie Azure
ms.date: 05/13/2020
ms.openlocfilehash: 5d0b7f41caecb3422a4416514de2fdd54e94539a
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/19/2020
ms.locfileid: "83613918"
---
# <a name="leveraging-containers-and-orchestrators"></a><span data-ttu-id="b3f96-103">Korzystanie z kontenerów i orkiestratorów</span><span class="sxs-lookup"><span data-stu-id="b3f96-103">Leveraging containers and orchestrators</span></span>

<span data-ttu-id="b3f96-104">Kontenery i Koordynatory zostały zaprojektowane w celu rozwiązywania problemów typowych dla podejścia do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="b3f96-104">Containers and orchestrators are designed to solve problems common to monolithic deployment approaches.</span></span>

## <a name="challenges-with-monolithic-deployments"></a><span data-ttu-id="b3f96-105">Wyzwania z niemonolitycznymi wdrożeniami</span><span class="sxs-lookup"><span data-stu-id="b3f96-105">Challenges with monolithic deployments</span></span>

<span data-ttu-id="b3f96-106">Tradycyjnie większość aplikacji wdrożono jako pojedynczą jednostkę.</span><span class="sxs-lookup"><span data-stu-id="b3f96-106">Traditionally, most applications have been deployed as a single unit.</span></span> <span data-ttu-id="b3f96-107">Takie aplikacje są określane jako monolitu.</span><span class="sxs-lookup"><span data-stu-id="b3f96-107">Such applications are referred to as a monolith.</span></span> <span data-ttu-id="b3f96-108">To ogólne podejście do wdrażania aplikacji jako pojedyncze jednostki nawet wtedy, gdy składają się z wielu modułów lub zestawów, jest znana jako architektura monolityczna, jak pokazano na rysunku 3-1.</span><span class="sxs-lookup"><span data-stu-id="b3f96-108">This general approach of deploying applications as single units even if they're composed of multiple modules or assemblies is known as monolithic architecture, as shown in Figure 3-1.</span></span>

![Architektura monolityczna.](./media/monolithic-design.png)

<span data-ttu-id="b3f96-110">**Rysunek 3-1**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-110">**Figure 3-1**.</span></span> <span data-ttu-id="b3f96-111">Architektura monolityczna.</span><span class="sxs-lookup"><span data-stu-id="b3f96-111">Monolithic architecture.</span></span>

<span data-ttu-id="b3f96-112">Chociaż mają zalety prostoty, monolityczne architektury mają kilka wyzwań:</span><span class="sxs-lookup"><span data-stu-id="b3f96-112">Although they have the benefit of simplicity, monolithic architectures face a number of challenges:</span></span>

### <a name="deployment"></a><span data-ttu-id="b3f96-113">Wdrożenie</span><span class="sxs-lookup"><span data-stu-id="b3f96-113">Deployment</span></span>

<span data-ttu-id="b3f96-114">Aplikacje monolityczne wymagają pełnego wdrożenia całej aplikacji, nawet jeśli została wprowadzona tylko niewielka zmiana.</span><span class="sxs-lookup"><span data-stu-id="b3f96-114">Monolithic applications require a full deployment of the entire application, even if only a small change has been made.</span></span> <span data-ttu-id="b3f96-115">Pełne wdrożenia mogą być kosztowne i podatne na błędy.</span><span class="sxs-lookup"><span data-stu-id="b3f96-115">Full deployments can be expensive and error prone.</span></span> <span data-ttu-id="b3f96-116">Ponadto wymagają ponownego uruchomienia aplikacji, która tymczasowo ma wpływ na niedostępność.</span><span class="sxs-lookup"><span data-stu-id="b3f96-116">Additionally, they require a restart of the application, which temporarily impacts unavailability.</span></span>

### <a name="scaling"></a><span data-ttu-id="b3f96-117">Skalowanie</span><span class="sxs-lookup"><span data-stu-id="b3f96-117">Scaling</span></span>

<span data-ttu-id="b3f96-118">Aplikacja monolityczna jest hostowana całkowicie w jednym wystąpieniu maszyny, co często wymaga sprzętu wysokiej klasy.</span><span class="sxs-lookup"><span data-stu-id="b3f96-118">A monolithic application is hosted entirely on a single machine instance, often requiring high-capability hardware.</span></span> <span data-ttu-id="b3f96-119">Jeśli jakakolwiek część monolitu wymaga skalowania, należy wdrożyć inną kopię całej aplikacji na innej maszynie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-119">If any part of the monolith requires scaling, another copy of the entire application must be deployed to another machine.</span></span> <span data-ttu-id="b3f96-120">Za pomocą monolitu nie można skalować składników aplikacji pojedynczo — wszystko to wszystko lub nic nie rób.</span><span class="sxs-lookup"><span data-stu-id="b3f96-120">With a monolith, you can't scale application components individually - it's all or nothing.</span></span> <span data-ttu-id="b3f96-121">Skalowanie składników, które nie wymagają skalowania, skutkuje niewydajnem i kosztownym użyciem zasobów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-121">Scaling components that don't require scaling results in inefficient and costly resource usage.</span></span>

### <a name="environment"></a><span data-ttu-id="b3f96-122">Środowisko</span><span class="sxs-lookup"><span data-stu-id="b3f96-122">Environment</span></span>

<span data-ttu-id="b3f96-123">Aplikacje monolityczne są zwykle wdrażane w środowisku hostingu ze wstępnie zainstalowanymi zależnościami systemu operacyjnego, środowiska uruchomieniowego i biblioteki.</span><span class="sxs-lookup"><span data-stu-id="b3f96-123">Monolithic applications are typically deployed to a hosting environment with a pre-installed operating system, runtime, and library dependencies.</span></span> <span data-ttu-id="b3f96-124">To środowisko może nie pasować do tego, na którym aplikacja została opracowana lub przetestowana.</span><span class="sxs-lookup"><span data-stu-id="b3f96-124">This environment may not match that upon which the application was developed or tested.</span></span> <span data-ttu-id="b3f96-125">Niespójności między środowiskami aplikacji są typowym źródłem problemów związanych z wdrożeniami monolitycznymi.</span><span class="sxs-lookup"><span data-stu-id="b3f96-125">Inconsistencies across application environments are a common source of problems for monolithic deployments.</span></span>

### <a name="coupling"></a><span data-ttu-id="b3f96-126">-</span><span class="sxs-lookup"><span data-stu-id="b3f96-126">Coupling</span></span>

<span data-ttu-id="b3f96-127">Aplikacja monolityczna prawdopodobnie będzie mieć wysokie sprzężenia w ramach jego składników funkcjonalnych.</span><span class="sxs-lookup"><span data-stu-id="b3f96-127">A monolithic application is likely to experience high coupling across its functional components.</span></span> <span data-ttu-id="b3f96-128">Bez stałych granic, zmiany systemu często powodują niezamierzone i kosztowne skutki uboczne.</span><span class="sxs-lookup"><span data-stu-id="b3f96-128">Without hard boundaries, system changes often result in unintended and costly side effects.</span></span> <span data-ttu-id="b3f96-129">Nowe funkcje/poprawki stają się trudne, czasochłonne i kosztowne do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="b3f96-129">New features/fixes become tricky, time-consuming, and expensive to implement.</span></span> <span data-ttu-id="b3f96-130">Aktualizacje wymagają obszernego testowania.</span><span class="sxs-lookup"><span data-stu-id="b3f96-130">Updates require extensive testing.</span></span> <span data-ttu-id="b3f96-131">Sprzęganie sprawia również trudne do refaktoryzacji składniki lub zamianę na alternatywne implementacje.</span><span class="sxs-lookup"><span data-stu-id="b3f96-131">Coupling also makes it difficult to refactor components or swap in alternative implementations.</span></span> <span data-ttu-id="b3f96-132">Nawet w przypadku skonstruowania z ścisłym oddzieleniem problemów architektura erozji jest ustawiana w postaci, w jakiej baza kodu monolitycznego pogorszy się bez zakończenia "specjalnych przypadków".</span><span class="sxs-lookup"><span data-stu-id="b3f96-132">Even when constructed with a strict separation of concerns, architectural erosion sets in as the monolithic code base deteriorates with never-ending "special cases."</span></span>

### <a name="platform-lock-in"></a><span data-ttu-id="b3f96-133">Blokada platformy</span><span class="sxs-lookup"><span data-stu-id="b3f96-133">Platform lock-in</span></span>

<span data-ttu-id="b3f96-134">Aplikacja monolityczna jest zbudowana przy użyciu jednego stosu technologii.</span><span class="sxs-lookup"><span data-stu-id="b3f96-134">A monolithic application is constructed with a single technology stack.</span></span> <span data-ttu-id="b3f96-135">Zapewniając jednolitość, to zobowiązanie może stać się barierą dla innowacji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-135">While offering uniformity, this commitment can become a barrier to innovation.</span></span> <span data-ttu-id="b3f96-136">Nowe funkcje i składniki zostaną skompilowane przy użyciu bieżącego stosu aplikacji — nawet wtedy, gdy bardziej nowoczesne technologie mogą być lepszym wyborem.</span><span class="sxs-lookup"><span data-stu-id="b3f96-136">New features and components will be built using the application's current stack - even when more modern technologies may be a better choice.</span></span> <span data-ttu-id="b3f96-137">Dłuższe ryzyko polega na tym, że stos technologii staje się nieaktualny i przestarzały.</span><span class="sxs-lookup"><span data-stu-id="b3f96-137">A longer-term risk is your technology stack becoming outdated and obsolete.</span></span> <span data-ttu-id="b3f96-138">Ponowne tworzenie architektury całej aplikacji do nowej, bardziej nowoczesnej platformy jest najtańsze i ryzykowne.</span><span class="sxs-lookup"><span data-stu-id="b3f96-138">Rearchitecting an entire application to a new, more modern platform is at best expensive and risky.</span></span>

## <a name="what-are-the-benefits-of-containers-and-orchestrators"></a><span data-ttu-id="b3f96-139">Jakie są korzyści z kontenerów i koordynatorów?</span><span class="sxs-lookup"><span data-stu-id="b3f96-139">What are the benefits of containers and orchestrators?</span></span>

<span data-ttu-id="b3f96-140">Wprowadziliśmy kontenery w rozdziale 1.</span><span class="sxs-lookup"><span data-stu-id="b3f96-140">We introduced containers in Chapter 1.</span></span> <span data-ttu-id="b3f96-141">Wyróżniono sposób, w jaki usługa Cloud Native Computing Foundation (CNCF) ma rangę kontenerach jako pierwszy krok w swojej [natywnej mapie w chmurze](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) — wskazówki dla przedsiębiorstw, które rozpoczynają podróż w chmurze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-141">We highlighted how the Cloud Native Computing Foundation (CNCF) ranks containerization as the first step in their [Cloud-Native Trail Map](https://raw.githubusercontent.com/cncf/trailmap/master/CNCF_TrailMap_latest.png) - guidance for enterprises beginning their cloud-native journey.</span></span> <span data-ttu-id="b3f96-142">W tej sekcji omówiono zalety kontenerów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-142">In this section, we discuss the benefits of containers.</span></span>

<span data-ttu-id="b3f96-143">Docker to najpopularniejsza Platforma zarządzania kontenerami.</span><span class="sxs-lookup"><span data-stu-id="b3f96-143">Docker is the most popular container management platform.</span></span> <span data-ttu-id="b3f96-144">Współpracuje z kontenerami w systemie Linux lub Windows.</span><span class="sxs-lookup"><span data-stu-id="b3f96-144">It works with containers on both Linux or Windows.</span></span> <span data-ttu-id="b3f96-145">Kontenery zapewniają oddzielne, ale odwielone środowiska aplikacji, które działają w taki sam sposób w dowolnym systemie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-145">Containers provide separate but reproducible application environments that run the same way on any system.</span></span> <span data-ttu-id="b3f96-146">Ten aspekt sprawia, że są one idealne do tworzenia i hostowania usług natywnych w chmurze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-146">This aspect makes them perfect for developing and hosting cloud-native services.</span></span> <span data-ttu-id="b3f96-147">Kontenery są od siebie odizolowane.</span><span class="sxs-lookup"><span data-stu-id="b3f96-147">Containers are isolated from one another.</span></span> <span data-ttu-id="b3f96-148">Dwa kontenery na tym samym sprzęcie hosta mogą mieć różne wersje oprogramowania bez powodowania konfliktów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-148">Two containers on the same host hardware can have different versions of software, without causing conflicts.</span></span>

<span data-ttu-id="b3f96-149">Kontenery są definiowane przez proste pliki tekstowe, które stają się artefaktami projektu i są sprawdzane w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="b3f96-149">Containers are defined by simple text-based files that become project artifacts and are checked into source control.</span></span> <span data-ttu-id="b3f96-150">Gdy pełne serwery i maszyny wirtualne wymagają ręcznej pracy w celu aktualizacji, kontenery są łatwo kontrolowane pod kątem wersji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-150">While full servers and virtual machines require manual effort to update, containers are easily version-controlled.</span></span> <span data-ttu-id="b3f96-151">Aplikacje skompilowane do uruchamiania w kontenerach można opracowywać, testować i wdrażać za pomocą zautomatyzowanych narzędzi w ramach potoku kompilacji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-151">Apps built to run in containers can be developed, tested, and deployed using automated tools as part of a build pipeline.</span></span>

<span data-ttu-id="b3f96-152">Kontenery są niezmienne.</span><span class="sxs-lookup"><span data-stu-id="b3f96-152">Containers are immutable.</span></span> <span data-ttu-id="b3f96-153">Po zdefiniowaniu kontenera można go ponownie utworzyć i uruchomić w ten sam sposób.</span><span class="sxs-lookup"><span data-stu-id="b3f96-153">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="b3f96-154">Ta niezmienności nadają się do projektowania opartego na składnikach.</span><span class="sxs-lookup"><span data-stu-id="b3f96-154">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="b3f96-155">Jeśli niektóre części aplikacji są rozmieszczone inaczej niż inne, dlaczego należy ponownie wdrożyć całą aplikację, gdy wystarczy wdrożyć części, które ulegają zmianie najczęściej?</span><span class="sxs-lookup"><span data-stu-id="b3f96-155">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="b3f96-156">Różne funkcje i zagadnienia dotyczące krzyżowego nacięcia aplikacji można podzielić na oddzielne jednostki.</span><span class="sxs-lookup"><span data-stu-id="b3f96-156">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="b3f96-157">Rysunek 3-2 pokazuje, jak aplikacja monolityczna może korzystać z kontenerów i mikrousług przez delegowanie niektórych funkcji lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-157">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="b3f96-158">Pozostałe funkcje w samej aplikacji również zostały zakontenerne.</span><span class="sxs-lookup"><span data-stu-id="b3f96-158">The remaining functionality in the app itself has also been containerized.</span></span>

<span data-ttu-id="b3f96-159">Kontenery są niezmienne.</span><span class="sxs-lookup"><span data-stu-id="b3f96-159">Containers are immutable.</span></span> <span data-ttu-id="b3f96-160">Po zdefiniowaniu kontenera można go ponownie utworzyć i uruchomić w ten sam sposób.</span><span class="sxs-lookup"><span data-stu-id="b3f96-160">Once you define a container, you can recreate and run it exactly the same way.</span></span> <span data-ttu-id="b3f96-161">Ta niezmienności nadają się do projektowania opartego na składnikach.</span><span class="sxs-lookup"><span data-stu-id="b3f96-161">This immutability lends itself to component-based design.</span></span> <span data-ttu-id="b3f96-162">Jeśli niektóre części aplikacji są rozmieszczone inaczej niż inne, dlaczego należy ponownie wdrożyć całą aplikację, gdy wystarczy wdrożyć części, które ulegają zmianie najczęściej?</span><span class="sxs-lookup"><span data-stu-id="b3f96-162">If some parts of an application evolve differently than others, why redeploy the entire app when you can just deploy the parts that change most frequently?</span></span> <span data-ttu-id="b3f96-163">Różne funkcje i zagadnienia dotyczące krzyżowego nacięcia aplikacji można podzielić na oddzielne jednostki.</span><span class="sxs-lookup"><span data-stu-id="b3f96-163">Different features and cross-cutting concerns of an app can be broken up into separate units.</span></span> <span data-ttu-id="b3f96-164">Rysunek 3-2 pokazuje, jak aplikacja monolityczna może korzystać z kontenerów i mikrousług przez delegowanie niektórych funkcji lub funkcji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-164">Figure 3-2 shows how a monolithic app can take advantage of containers and microservices by delegating certain features or functionality.</span></span> <span data-ttu-id="b3f96-165">Pozostałe funkcje w samej aplikacji również zostały zakontenerne.</span><span class="sxs-lookup"><span data-stu-id="b3f96-165">The remaining functionality in the app itself has also been containerized.</span></span>

![Rozdzielenie aplikacji monolitycznej na korzystanie z mikrousług w zapleczu.](./media/cloud-native-design.png)

<span data-ttu-id="b3f96-167">**Rysunek 3-2**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-167">**Figure 3-2**.</span></span> <span data-ttu-id="b3f96-168">Tworzenie aplikacji monolitycznej w celu wdrażania mikrousług.</span><span class="sxs-lookup"><span data-stu-id="b3f96-168">Decomposing a monolithic app to embrace microservices.</span></span>

<span data-ttu-id="b3f96-169">Każda usługa w chmurze została skompilowana i wdrożona w osobnym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-169">Each cloud-native service is built and deployed in a separate container.</span></span> <span data-ttu-id="b3f96-170">Każda z nich może być aktualizowana w razie konieczności.</span><span class="sxs-lookup"><span data-stu-id="b3f96-170">Each can update as needed.</span></span> <span data-ttu-id="b3f96-171">Poszczególne usługi mogą być hostowane na węzłach mających zasoby odpowiednie dla każdej usługi.</span><span class="sxs-lookup"><span data-stu-id="b3f96-171">Individual services can be hosted on nodes with resources appropriate to each service.</span></span> <span data-ttu-id="b3f96-172">Środowisko, w którym działa każda usługa, jest niezmienne, współużytkowane przez środowisko deweloperskie, testowe i produkcyjne oraz w łatwy sposób.</span><span class="sxs-lookup"><span data-stu-id="b3f96-172">The environment each service runs in is immutable, shared across dev, test, and production environments, and easily versioned.</span></span> <span data-ttu-id="b3f96-173">Sprzęganie różnych obszarów aplikacji występuje jawnie jako wywołania lub komunikaty między usługami, a nie zależności czasu kompilacji w ramach monolitu.</span><span class="sxs-lookup"><span data-stu-id="b3f96-173">Coupling between different areas of the application occurs explicitly as calls or messages between services, not compile-time dependencies within the monolith.</span></span> <span data-ttu-id="b3f96-174">Możesz również wybrać technologię, która najlepiej spełnia daną możliwość, bez konieczności wprowadzania zmian w pozostałej części aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-174">You can also choose the technology that best suites a given capability without requiring changes to the rest of the app.</span></span>

<span data-ttu-id="b3f96-175">Usługi kontenerowe wymagają zautomatyzowanego zarządzania.</span><span class="sxs-lookup"><span data-stu-id="b3f96-175">Containerized services require automated management.</span></span> <span data-ttu-id="b3f96-176">Nie byłoby możliwe ręczne administrowanie dużym zestawem niezależnie wdrożonych kontenerów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-176">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="b3f96-177">Rozważmy na przykład następujące zadania:</span><span class="sxs-lookup"><span data-stu-id="b3f96-177">For example, consider the following tasks:</span></span>

- <span data-ttu-id="b3f96-178">Jak będą obsługiwane wystąpienia kontenerów w klastrze wielu maszyn?</span><span class="sxs-lookup"><span data-stu-id="b3f96-178">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="b3f96-179">Po wdrożeniu, w jaki sposób kontenery będą odnajdywane i komunikować się ze sobą?</span><span class="sxs-lookup"><span data-stu-id="b3f96-179">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="b3f96-180">Jak można skalować kontenery w poziomie lub na żądanie?</span><span class="sxs-lookup"><span data-stu-id="b3f96-180">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="b3f96-181">Jak monitorować kondycję każdego kontenera?</span><span class="sxs-lookup"><span data-stu-id="b3f96-181">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="b3f96-182">Jak chronić kontener przed awariami sprzętu i oprogramowania?</span><span class="sxs-lookup"><span data-stu-id="b3f96-182">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="b3f96-183">Jak należy uaktualnić kontenery dla działającej aplikacji bez przestoju?</span><span class="sxs-lookup"><span data-stu-id="b3f96-183">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="b3f96-184">Koordynatory kontenerów i automatyzują te i inne zagadnienia.</span><span class="sxs-lookup"><span data-stu-id="b3f96-184">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="b3f96-185">W natywnym systemie ekonomicznym w chmurze Kubernetes stał się de facto koordynatorem kontenerów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-185">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="b3f96-186">Jest to platforma "open source" zarządzana przez natywną platformę obliczeniową w chmurze (CNCF).</span><span class="sxs-lookup"><span data-stu-id="b3f96-186">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="b3f96-187">Kubernetes automatyzuje wdrażanie, skalowanie i problemy operacyjne obciążeń kontenerów w ramach klastra maszynowego.</span><span class="sxs-lookup"><span data-stu-id="b3f96-187">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="b3f96-188">Jednak Instalowanie Kubernetes i zarządzanie nim jest wielowątkowy bardzo złożone.</span><span class="sxs-lookup"><span data-stu-id="b3f96-188">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="b3f96-189">Znacznie lepszym rozwiązaniem jest wykorzystanie Kubernetes jako usługi zarządzanej od dostawcy chmury.</span><span class="sxs-lookup"><span data-stu-id="b3f96-189">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="b3f96-190">Usługa Azure Cloud oferuje w pełni zarządzaną platformę Kubernetes uprawnioną do [usługi Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="b3f96-190">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="b3f96-191">AKS abstrakcje złożoności i obciążenia operacyjnego związane z zarządzaniem Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-191">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="b3f96-192">Korzystasz z Kubernetes jako usługi w chmurze; Firma Microsoft ponosi odpowiedzialność za zarządzanie i obsługę.</span><span class="sxs-lookup"><span data-stu-id="b3f96-192">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="b3f96-193">AKS także ścisłą integrację z innymi usługami platformy Azure i narzędziami deweloperskimi.</span><span class="sxs-lookup"><span data-stu-id="b3f96-193">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="b3f96-194">AKS jest technologią opartą na klastrze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-194">AKS is a cluster-based technology.</span></span> <span data-ttu-id="b3f96-195">Pula federacyjnych maszyn wirtualnych lub węzłów jest wdrażana w chmurze platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b3f96-195">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="b3f96-196">Razem tworzą one środowisko o wysokiej dostępności lub klaster.</span><span class="sxs-lookup"><span data-stu-id="b3f96-196">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="b3f96-197">Klaster jest wyświetlany jako bezproblemową, pojedynczą jednostkę w aplikacji natywnej w chmurze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-197">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="b3f96-198">W obszarze okapu AKS wdraża usługi kontenerów w tych węzłach zgodnie ze wstępnie zdefiniowaną strategią, która równomiernie dystrybuuje obciążenie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-198">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

<span data-ttu-id="b3f96-199">Usługi kontenerowe wymagają zautomatyzowanego zarządzania.</span><span class="sxs-lookup"><span data-stu-id="b3f96-199">Containerized services require automated management.</span></span> <span data-ttu-id="b3f96-200">Nie byłoby możliwe ręczne administrowanie dużym zestawem niezależnie wdrożonych kontenerów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-200">It wouldn't be feasible to manually administer a large set of independently deployed containers.</span></span> <span data-ttu-id="b3f96-201">Rozważmy na przykład następujące zadania:</span><span class="sxs-lookup"><span data-stu-id="b3f96-201">For example, consider the following tasks:</span></span>

- <span data-ttu-id="b3f96-202">Jak będą obsługiwane wystąpienia kontenerów w klastrze wielu maszyn?</span><span class="sxs-lookup"><span data-stu-id="b3f96-202">How will container instances be provisioned across a cluster of many machines?</span></span>
- <span data-ttu-id="b3f96-203">Po wdrożeniu, w jaki sposób kontenery będą odnajdywane i komunikować się ze sobą?</span><span class="sxs-lookup"><span data-stu-id="b3f96-203">Once deployed, how will containers discover and communicate with each other?</span></span>
- <span data-ttu-id="b3f96-204">Jak można skalować kontenery w poziomie lub na żądanie?</span><span class="sxs-lookup"><span data-stu-id="b3f96-204">How can containers scale in or out on-demand?</span></span>
- <span data-ttu-id="b3f96-205">Jak monitorować kondycję każdego kontenera?</span><span class="sxs-lookup"><span data-stu-id="b3f96-205">How do you monitor the health of each container?</span></span>
- <span data-ttu-id="b3f96-206">Jak chronić kontener przed awariami sprzętu i oprogramowania?</span><span class="sxs-lookup"><span data-stu-id="b3f96-206">How do you protect a container against hardware and software failures?</span></span>
- <span data-ttu-id="b3f96-207">Jak należy uaktualnić kontenery dla działającej aplikacji bez przestoju?</span><span class="sxs-lookup"><span data-stu-id="b3f96-207">How do upgrade containers for a live application with zero downtime?</span></span>

<span data-ttu-id="b3f96-208">Koordynatory kontenerów i automatyzują te i inne zagadnienia.</span><span class="sxs-lookup"><span data-stu-id="b3f96-208">Container orchestrators address and automate these and other concerns.</span></span>

<span data-ttu-id="b3f96-209">W natywnym systemie ekonomicznym w chmurze Kubernetes stał się de facto koordynatorem kontenerów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-209">In the cloud-native eco-system, Kubernetes has become the de facto container orchestrator.</span></span> <span data-ttu-id="b3f96-210">Jest to platforma "open source" zarządzana przez natywną platformę obliczeniową w chmurze (CNCF).</span><span class="sxs-lookup"><span data-stu-id="b3f96-210">It's an open-source platform managed by the Cloud Native Computing Foundation (CNCF).</span></span> <span data-ttu-id="b3f96-211">Kubernetes automatyzuje wdrażanie, skalowanie i problemy operacyjne obciążeń kontenerów w ramach klastra maszynowego.</span><span class="sxs-lookup"><span data-stu-id="b3f96-211">Kubernetes automates the deployment, scaling, and operational concerns of containerized workloads across a machine cluster.</span></span> <span data-ttu-id="b3f96-212">Jednak Instalowanie Kubernetes i zarządzanie nim jest wielowątkowy bardzo złożone.</span><span class="sxs-lookup"><span data-stu-id="b3f96-212">However, installing and managing Kubernetes is notoriously complex.</span></span>

<span data-ttu-id="b3f96-213">Znacznie lepszym rozwiązaniem jest wykorzystanie Kubernetes jako usługi zarządzanej od dostawcy chmury.</span><span class="sxs-lookup"><span data-stu-id="b3f96-213">A much better approach is to leverage Kubernetes as a managed service from a cloud vendor.</span></span> <span data-ttu-id="b3f96-214">Usługa Azure Cloud oferuje w pełni zarządzaną platformę Kubernetes uprawnioną do [usługi Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span><span class="sxs-lookup"><span data-stu-id="b3f96-214">The Azure cloud features a fully managed Kubernetes platform entitled [Azure Kubernetes Service (AKS)](https://azure.microsoft.com/services/kubernetes-service/).</span></span> <span data-ttu-id="b3f96-215">AKS abstrakcje złożoności i obciążenia operacyjnego związane z zarządzaniem Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-215">AKS abstracts the complexity and operational overhead of managing Kubernetes.</span></span> <span data-ttu-id="b3f96-216">Korzystasz z Kubernetes jako usługi w chmurze; Firma Microsoft ponosi odpowiedzialność za zarządzanie i obsługę.</span><span class="sxs-lookup"><span data-stu-id="b3f96-216">You consume Kubernetes as a cloud service; Microsoft takes responsibility for managing and supporting it.</span></span> <span data-ttu-id="b3f96-217">AKS także ścisłą integrację z innymi usługami platformy Azure i narzędziami deweloperskimi.</span><span class="sxs-lookup"><span data-stu-id="b3f96-217">AKS also tightly integrates with other Azure services and dev tools.</span></span>

<span data-ttu-id="b3f96-218">AKS jest technologią opartą na klastrze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-218">AKS is a cluster-based technology.</span></span> <span data-ttu-id="b3f96-219">Pula federacyjnych maszyn wirtualnych lub węzłów jest wdrażana w chmurze platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b3f96-219">A pool of federated virtual machines, or nodes, is deployed to the Azure cloud.</span></span> <span data-ttu-id="b3f96-220">Razem tworzą one środowisko o wysokiej dostępności lub klaster.</span><span class="sxs-lookup"><span data-stu-id="b3f96-220">Together they form a highly available environment, or cluster.</span></span> <span data-ttu-id="b3f96-221">Klaster jest wyświetlany jako bezproblemową, pojedynczą jednostkę w aplikacji natywnej w chmurze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-221">The cluster appears as a seamless, single entity to your cloud-native application.</span></span> <span data-ttu-id="b3f96-222">W obszarze okapu AKS wdraża usługi kontenerów w tych węzłach zgodnie ze wstępnie zdefiniowaną strategią, która równomiernie dystrybuuje obciążenie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-222">Under the hood, AKS deploys your containerized services across these nodes following a predefined strategy that evenly distributes the load.</span></span>

## <a name="what-are-the-scaling-benefits"></a><span data-ttu-id="b3f96-223">Jakie są korzyści z skalowania?</span><span class="sxs-lookup"><span data-stu-id="b3f96-223">What are the scaling benefits?</span></span>

<span data-ttu-id="b3f96-224">Usługi oparte na kontenerach mogą korzystać z zalet skalowania zapewnianych przez narzędzia Orchestration, takie jak Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-224">Services built on containers can leverage scaling benefits provided by orchestration tools like Kubernetes.</span></span> <span data-ttu-id="b3f96-225">Za pomocą kontenerów projektowych są znane tylko informacje o sobie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-225">By design containers only know about themselves.</span></span> <span data-ttu-id="b3f96-226">Jeśli masz wiele kontenerów, które muszą współdziałać, należy je zorganizować na wyższym poziomie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-226">Once you have multiple containers that need to work together, you should organize them at a higher level.</span></span> <span data-ttu-id="b3f96-227">Organizowanie dużej liczby kontenerów i ich współużytkowanych zależności, takich jak konfiguracja sieci, polega na tym, że narzędzia aranżacji są dostępne w celu zapisania tego dnia.</span><span class="sxs-lookup"><span data-stu-id="b3f96-227">Organizing large numbers of containers and their shared dependencies, such as network configuration, is where orchestration tools come in to save the day!</span></span> <span data-ttu-id="b3f96-228">Kubernetes tworzy warstwę abstrakcji za pośrednictwem grup kontenerów i organizuje je do *zasobników*.</span><span class="sxs-lookup"><span data-stu-id="b3f96-228">Kubernetes creates an abstraction layer over groups of containers and organizes them into *pods*.</span></span> <span data-ttu-id="b3f96-229">W przypadku maszyn roboczych, które są nazywane *węzłami*, są uruchamiane.</span><span class="sxs-lookup"><span data-stu-id="b3f96-229">Pods run on worker machines referred to as *nodes*.</span></span> <span data-ttu-id="b3f96-230">Ta zorganizowana struktura jest określana jako *klaster*.</span><span class="sxs-lookup"><span data-stu-id="b3f96-230">This organized structure is referred to as a *cluster*.</span></span> <span data-ttu-id="b3f96-231">Rysunek 3-3 przedstawia różne składniki klastra Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-231">Figure 3-3 shows the different components of a Kubernetes cluster.</span></span>

<span data-ttu-id="b3f96-232">![Składniki klastra Kubernetes. ](./media/kubernetes-cluster-components.png)
 **Rysunek 3-3**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-232">![Kubernetes cluster components.](./media/kubernetes-cluster-components.png)
**Figure 3-3**.</span></span> <span data-ttu-id="b3f96-233">Składniki klastra Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-233">Kubernetes cluster components.</span></span>

<span data-ttu-id="b3f96-234">Skalowanie obciążeń kontenerów jest kluczową funkcją koordynatorów kontenerów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-234">Scaling containerized workloads is a key feature of container orchestrators.</span></span> <span data-ttu-id="b3f96-235">AKS obsługuje automatyczne skalowanie w dwóch wymiarach: wystąpienia kontenerów i węzły obliczeniowe.</span><span class="sxs-lookup"><span data-stu-id="b3f96-235">AKS supports automatic scaling across two dimensions: Container instances and compute nodes.</span></span> <span data-ttu-id="b3f96-236">Wspólnie zapewniają AKS możliwość szybkiego i efektywnego reagowania na popyt na żądanie i dodawania dodatkowych zasobów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-236">Together they give AKS the ability to quickly and efficiently respond to spikes in demand and add additional resources.</span></span> <span data-ttu-id="b3f96-237">Omawiamy skalowanie w AKS w dalszej części tego rozdziału.</span><span class="sxs-lookup"><span data-stu-id="b3f96-237">We discuss scaling in AKS later in this chapter.</span></span>

### <a name="declarative-versus-imperative"></a><span data-ttu-id="b3f96-238">Deklaratywne i bezwzględne</span><span class="sxs-lookup"><span data-stu-id="b3f96-238">Declarative versus imperative</span></span>

<span data-ttu-id="b3f96-239">Kubernetes obsługuje zarówno deklaratywną, jak i bezwzględną konfigurację.</span><span class="sxs-lookup"><span data-stu-id="b3f96-239">Kubernetes supports both declarative and imperative configuration.</span></span> <span data-ttu-id="b3f96-240">Bezwzględne podejście polega na uruchamianiu różnych poleceń, które informują Kubernetes o tym, co należy zrobić w każdym kroku.</span><span class="sxs-lookup"><span data-stu-id="b3f96-240">The imperative approach involves running various commands that tell Kubernetes what to do each step of the way.</span></span> <span data-ttu-id="b3f96-241">Uruchom ten obraz.</span><span class="sxs-lookup"><span data-stu-id="b3f96-241">Run this image.</span></span> <span data-ttu-id="b3f96-242">Usuń ten temat.</span><span class="sxs-lookup"><span data-stu-id="b3f96-242">Delete this pod.</span></span> <span data-ttu-id="b3f96-243">Uwidocznić ten port.</span><span class="sxs-lookup"><span data-stu-id="b3f96-243">Expose this port.</span></span> <span data-ttu-id="b3f96-244">Z podejściem deklaratywnym tworzysz plik konfiguracji o nazwie Manifest, aby opisać, co chcesz zrobić, zamiast tego, co należy zrobić.</span><span class="sxs-lookup"><span data-stu-id="b3f96-244">With the declarative approach, you create a configuration file, called a manifest, to describe what you want instead of what to do.</span></span> <span data-ttu-id="b3f96-245">Kubernetes odczytuje manifest i przekształca żądany stan końcowy do rzeczywistego stanu końcowego.</span><span class="sxs-lookup"><span data-stu-id="b3f96-245">Kubernetes reads the manifest and transforms your desired end state into actual end state.</span></span>

<span data-ttu-id="b3f96-246">Bezwzględne polecenia są doskonałe do uczenia się i interaktywnego eksperymentowania.</span><span class="sxs-lookup"><span data-stu-id="b3f96-246">Imperative commands are great for learning and interactive experimentation.</span></span> <span data-ttu-id="b3f96-247">Należy jednak pamiętać o deklaratywnym utworzeniu plików manifestu Kubernetes, aby wdrożyć infrastrukturę jako podejście kodu, zapewniając niezawodne i powtarzalne wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="b3f96-247">However, you'll want to declaratively create Kubernetes manifest files to embrace an infrastructure as code approach, providing for reliable and repeatable deployments.</span></span> <span data-ttu-id="b3f96-248">Plik manifestu jest artefaktem projektu i jest używany w potoku CI/CD do automatyzowania wdrożeń Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-248">The manifest file becomes a project artifact and is used in your CI/CD pipeline for automating Kubernetes deployments.</span></span>

<span data-ttu-id="b3f96-249">Jeśli klaster został już skonfigurowany za pomocą bezwzględnych poleceń, można wyeksportować deklaratywny manifest za pomocą `kubectl get svc SERVICENAME -o yaml > service.yaml` .</span><span class="sxs-lookup"><span data-stu-id="b3f96-249">If you've already configured your cluster using imperative commands, you can export a declarative manifest by using `kubectl get svc SERVICENAME -o yaml > service.yaml`.</span></span> <span data-ttu-id="b3f96-250">To polecenie generuje manifest podobny do przedstawionego poniżej:</span><span class="sxs-lookup"><span data-stu-id="b3f96-250">This command produces a manifest similar to one shown below:</span></span>

```yaml
apiVersion: v1
kind: Service
metadata:
  creationTimestamp: "2019-09-13T13:58:47Z"
  labels:
    component: apiserver
    provider: kubernetes
  name: kubernetes
  namespace: default
  resourceVersion: "153"
  selfLink: /api/v1/namespaces/default/services/kubernetes
  uid: 9b1fac62-d62e-11e9-8968-00155d38010d
spec:
  clusterIP: 10.96.0.1
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 6443
  sessionAffinity: None
  type: ClusterIP
status:
  loadBalancer: {}
```

<span data-ttu-id="b3f96-251">W przypadku korzystania z konfiguracji deklaracyjnej można wyświetlić podgląd zmian, które zostaną wprowadzone przed ich zatwierdzeniem za pomocą `kubectl diff -f FOLDERNAME` folderu, w którym znajdują się pliki konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-251">When using declarative configuration, you can preview the changes that will be made before committing them by using `kubectl diff -f FOLDERNAME` against the folder where your configuration files are located.</span></span> <span data-ttu-id="b3f96-252">Po upewnieniu się, że chcesz zastosować zmiany, uruchom polecenie `kubectl apply -f FOLDERNAME` .</span><span class="sxs-lookup"><span data-stu-id="b3f96-252">Once you're sure you want to apply the changes, run `kubectl apply -f FOLDERNAME`.</span></span> <span data-ttu-id="b3f96-253">Dodaj `-R` , aby rekursywnie przetworzyć hierarchię folderów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-253">Add `-R` to recursively process a folder hierarchy.</span></span>

<span data-ttu-id="b3f96-254">Można również użyć konfiguracji deklaratywnej z innymi funkcjami Kubernetes, jednym z nich, które są wdrażane.</span><span class="sxs-lookup"><span data-stu-id="b3f96-254">You can also use declarative configuration with other Kubernetes features, one of which being deployments.</span></span> <span data-ttu-id="b3f96-255">Wdrożenia deklaratywne ułatwiają Zarządzanie wersjami, aktualizacjami i skalowaniem.</span><span class="sxs-lookup"><span data-stu-id="b3f96-255">Declarative deployments help manage releases, updates, and scaling.</span></span> <span data-ttu-id="b3f96-256">Poinstruują Kubernetes Deployment Controller o sposobie wdrażania nowych zmian, skalowania w poziomie lub wycofywania do poprzedniej poprawki.</span><span class="sxs-lookup"><span data-stu-id="b3f96-256">They instruct the Kubernetes deployment controller on how to deploy new changes, scale out load, or roll back to a previous revision.</span></span> <span data-ttu-id="b3f96-257">Jeśli klaster jest niestabilny, wdrożenie deklaracyjne automatycznie zwróci klaster z powrotem do żądanego stanu.</span><span class="sxs-lookup"><span data-stu-id="b3f96-257">If a cluster is unstable, a declarative deployment will automatically return the cluster back to a desired state.</span></span> <span data-ttu-id="b3f96-258">Jeśli na przykład węzeł ma awaria, mechanizm wdrażania ponownie wdroży zastąpienie w celu osiągnięcia żądanego stanu</span><span class="sxs-lookup"><span data-stu-id="b3f96-258">For example, if a node should crash, the deployment mechanism will redeploy a replacement to achieve your desired state</span></span>

<span data-ttu-id="b3f96-259">Użycie konfiguracji deklaracyjnej pozwala na prezentowanie infrastruktury jako kodu, który można zaewidencjonować i wersji obok kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-259">Using declarative configuration allows infrastructure to be represented as code that can be checked in and versioned alongside the application code.</span></span> <span data-ttu-id="b3f96-260">Zapewnia ulepszoną kontrolę zmian i lepszą obsługę ciągłego wdrażania przy użyciu potoku kompilowania i wdrażania.</span><span class="sxs-lookup"><span data-stu-id="b3f96-260">It provides improved change control and better support for continuous deployment using a build and deploy pipeline.</span></span>

## <a name="what-scenarios-are-ideal-for-containers-and-orchestrators"></a><span data-ttu-id="b3f96-261">Jakie scenariusze doskonale sprawdzają się w przypadku kontenerów i koordynatorów?</span><span class="sxs-lookup"><span data-stu-id="b3f96-261">What scenarios are ideal for containers and orchestrators?</span></span>

<span data-ttu-id="b3f96-262">Poniższe scenariusze doskonale nadają się do korzystania z kontenerów i Orchestrator.</span><span class="sxs-lookup"><span data-stu-id="b3f96-262">The following scenarios are ideal for using containers and orchestrators.</span></span>

### <a name="applications-requiring-high-uptime-and-scalability"></a><span data-ttu-id="b3f96-263">Aplikacje wymagające dużego czasu przestoju i skalowalności</span><span class="sxs-lookup"><span data-stu-id="b3f96-263">Applications requiring high uptime and scalability</span></span>

<span data-ttu-id="b3f96-264">Pojedyncze aplikacje, które mają duże przestoje i wymagania dotyczące skalowalności, są idealnymi kandydatami do obsługi architektur natywnych w chmurze przy użyciu mikrousług, kontenerów i Orchestrator.</span><span class="sxs-lookup"><span data-stu-id="b3f96-264">Individual applications that have high uptime and scalability requirements are ideal candidates for cloud-native architectures using microservices, containers, and orchestrators.</span></span> <span data-ttu-id="b3f96-265">Mogą one być opracowywane w kontenerach, testowane w środowiskach z wersjami i wdrażane w środowisku produkcyjnym bez przestojów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-265">They can be developed in containers, tested across versioned environments, and deployed into production with zero downtime.</span></span> <span data-ttu-id="b3f96-266">Użycie klastrów Kubernetes gwarantuje, że aplikacje mogą również skalować na żądanie i automatycznie odzyskiwać z awarii węzłów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-266">The use of Kubernetes clusters ensures such apps can also scale on demand and recover automatically from node failures.</span></span>

### <a name="large-numbers-of-applications"></a><span data-ttu-id="b3f96-267">Duża liczba aplikacji</span><span class="sxs-lookup"><span data-stu-id="b3f96-267">Large numbers of applications</span></span>

<span data-ttu-id="b3f96-268">Organizacje, które wdrażają i utrzymują dużą liczbę aplikacji, korzystają z kontenerów i koordynatorów.</span><span class="sxs-lookup"><span data-stu-id="b3f96-268">Organizations that deploy and maintain large numbers of applications benefit from containers and orchestrators.</span></span> <span data-ttu-id="b3f96-269">Przede wszystkim nakłady pracy związane z konfigurowaniem środowisk kontenerów i klastrów Kubernetes jest kosztem stałym.</span><span class="sxs-lookup"><span data-stu-id="b3f96-269">The up front effort of setting up containerized environments and Kubernetes clusters is primarily a fixed cost.</span></span> <span data-ttu-id="b3f96-270">Wdrażanie, konserwowanie i aktualizowanie poszczególnych aplikacji ma koszt, który różni się w zależności od liczby aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-270">Deploying, maintaining, and updating individual applications has a cost that varies with the number of applications.</span></span> <span data-ttu-id="b3f96-271">W przypadku niewielkiej liczby aplikacji złożoność utrzymywania aplikacji niestandardowych ręcznie przekracza koszt wdrożenia rozwiązania przy użyciu kontenerów i Orchestrator.</span><span class="sxs-lookup"><span data-stu-id="b3f96-271">Beyond a small number of applications, the complexity of maintaining custom applications manually exceeds the cost of implementing a solution using containers and orchestrators.</span></span>

## <a name="when-should-you-avoid-using-containers-and-orchestrators"></a><span data-ttu-id="b3f96-272">Kiedy należy unikać używania kontenerów i koordynatorów?</span><span class="sxs-lookup"><span data-stu-id="b3f96-272">When should you avoid using containers and orchestrators?</span></span>

<span data-ttu-id="b3f96-273">Jeśli nie możesz skompilować aplikacji przy użyciu zasad aplikacji 12-składnikowych, rozważ uniknięcie kontenerów i Orchestrator.</span><span class="sxs-lookup"><span data-stu-id="b3f96-273">If you're unable to build your application following the Twelve-Factor App principles, you should consider avoiding containers and orchestrators.</span></span> <span data-ttu-id="b3f96-274">W takich przypadkach należy wziąć pod uwagę platformę hostingu opartą na maszynach wirtualnych lub kilka systemów hybrydowych.</span><span class="sxs-lookup"><span data-stu-id="b3f96-274">In these cases, consider a VM-based hosting platform, or possibly some hybrid system.</span></span> <span data-ttu-id="b3f96-275">Dzięki niej można zawsze wyłączać niektóre elementy funkcjonalności do oddzielnych kontenerów lub nawet funkcji bezserwerowych.</span><span class="sxs-lookup"><span data-stu-id="b3f96-275">With it, you can always spin off certain pieces of functionality into separate containers or even serverless functions.</span></span>

## <a name="development-resources"></a><span data-ttu-id="b3f96-276">Zasoby programistyczne</span><span class="sxs-lookup"><span data-stu-id="b3f96-276">Development resources</span></span>

<span data-ttu-id="b3f96-277">Ta sekcja zawiera krótką listę zasobów programistycznych, które mogą pomóc rozpocząć korzystanie z kontenerów i Orchestrator dla następnej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-277">This section shows a short list of development resources that may help you get started using containers and orchestrators for your next application.</span></span> <span data-ttu-id="b3f96-278">Jeśli szukasz wskazówek dotyczących projektowania aplikacji architektury mikrousług natywnych dla chmury, przeczytaj pomocnika tej książki, [mikrousługi platformy .NET: architektura dla kontenerów aplikacji .NET](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span><span class="sxs-lookup"><span data-stu-id="b3f96-278">If you're looking for guidance on how to design your cloud-native microservices architecture app, read this book's companion, [.NET Microservices: Architecture for Containerized .NET Applications](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook).</span></span>

### <a name="local-kubernetes-development"></a><span data-ttu-id="b3f96-279">Lokalne programowanie Kubernetes</span><span class="sxs-lookup"><span data-stu-id="b3f96-279">Local Kubernetes Development</span></span>

<span data-ttu-id="b3f96-280">Wdrożenia Kubernetes zapewniają znakomitą wartość w środowiskach produkcyjnych, ale mogą być również uruchamiane lokalnie na komputerze deweloperskim.</span><span class="sxs-lookup"><span data-stu-id="b3f96-280">Kubernetes deployments provide great value in production environments, but can also run locally on your development machine.</span></span> <span data-ttu-id="b3f96-281">Mimo że użytkownik może pracować na pojedynczych mikrousługach niezależnie, może się okazać, że będzie konieczne lokalne uruchomienie całego systemu — podobnie jak zostanie ono uruchomione po wdrożeniu w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="b3f96-281">While you may work on individual microservices independently, there may be times when you'll need to run the entire system locally - just as it will run when deployed to production.</span></span> <span data-ttu-id="b3f96-282">Istnieje kilka narzędzi, które mogą pomóc: Minikube i Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="b3f96-282">There are several tools that can help: Minikube and Docker Desktop.</span></span> <span data-ttu-id="b3f96-283">Program Visual Studio udostępnia także narzędzia do programowania platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="b3f96-283">Visual Studio also provides tooling for Docker development.</span></span>

### <a name="minikube"></a><span data-ttu-id="b3f96-284">Minikube</span><span class="sxs-lookup"><span data-stu-id="b3f96-284">Minikube</span></span>

<span data-ttu-id="b3f96-285">Co to jest Minikube?</span><span class="sxs-lookup"><span data-stu-id="b3f96-285">What is Minikube?</span></span> <span data-ttu-id="b3f96-286">W projekcie Minikube jest wyświetlany komunikat "Minikube implementuje lokalny klaster Kubernetes w systemach macOS, Linux i Windows".</span><span class="sxs-lookup"><span data-stu-id="b3f96-286">The Minikube project says "Minikube implements a local Kubernetes cluster on macOS, Linux, and Windows."</span></span> <span data-ttu-id="b3f96-287">Głównym celem jest "to najlepsze narzędzie do tworzenia lokalnych aplikacji Kubernetes oraz do obsługi wszystkich funkcji Kubernetes."</span><span class="sxs-lookup"><span data-stu-id="b3f96-287">Its primary goals are "to be the best tool for local Kubernetes application development and to support all Kubernetes features that fit."</span></span> <span data-ttu-id="b3f96-288">Instalowanie Minikube jest oddzielone od platformy Docker, ale Minikube obsługuje inne funkcje hypervisor niż obsługuje program Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="b3f96-288">Installing Minikube is separate from Docker, but Minikube supports different hypervisors than Docker Desktop supports.</span></span> <span data-ttu-id="b3f96-289">Następujące funkcje Kubernetes są obecnie obsługiwane przez Minikube:</span><span class="sxs-lookup"><span data-stu-id="b3f96-289">The following Kubernetes features are currently supported by Minikube:</span></span>

- <span data-ttu-id="b3f96-290">DNS</span><span class="sxs-lookup"><span data-stu-id="b3f96-290">DNS</span></span>
- <span data-ttu-id="b3f96-291">NodePorts</span><span class="sxs-lookup"><span data-stu-id="b3f96-291">NodePorts</span></span>
- <span data-ttu-id="b3f96-292">ConfigMaps i wpisy tajne</span><span class="sxs-lookup"><span data-stu-id="b3f96-292">ConfigMaps and secrets</span></span>
- <span data-ttu-id="b3f96-293">Pulpity nawigacyjne</span><span class="sxs-lookup"><span data-stu-id="b3f96-293">Dashboards</span></span>
- <span data-ttu-id="b3f96-294">Środowiska uruchomieniowe kontenera: Docker, RKT, CRI-O, i kontener</span><span class="sxs-lookup"><span data-stu-id="b3f96-294">Container runtimes: Docker, rkt, CRI-O, and containerd</span></span>
- <span data-ttu-id="b3f96-295">Włączanie interfejsu sieciowego kontenera (CNI)</span><span class="sxs-lookup"><span data-stu-id="b3f96-295">Enabling Container Network Interface (CNI)</span></span>
- <span data-ttu-id="b3f96-296">Ruch przychodzący</span><span class="sxs-lookup"><span data-stu-id="b3f96-296">Ingress</span></span>

<span data-ttu-id="b3f96-297">Po zainstalowaniu Minikube można szybko rozpocząć korzystanie z niego, uruchamiając `minikube start` polecenie, które pobiera obraz i uruchamia lokalny klaster Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-297">After installing Minikube, you can quickly start using it by running the `minikube start` command, which downloads an image and start the local Kubernetes cluster.</span></span> <span data-ttu-id="b3f96-298">Po uruchomieniu klastra możesz korzystać z niego przy użyciu standardowych `kubectl` poleceń Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-298">Once the cluster is started, you interact with it using the standard Kubernetes `kubectl` commands.</span></span>

### <a name="docker-desktop"></a><span data-ttu-id="b3f96-299">Pulpit Docker</span><span class="sxs-lookup"><span data-stu-id="b3f96-299">Docker Desktop</span></span>

<span data-ttu-id="b3f96-300">Możesz również korzystać z usługi Kubernetes bezpośrednio z poziomu pulpitu Docker w systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="b3f96-300">You can also work with Kubernetes directly from Docker Desktop on Windows.</span></span> <span data-ttu-id="b3f96-301">Jest to jedyna opcja, jeśli używasz kontenerów systemu Windows i jest to doskonały wybór dla kontenerów innych niż Windows.</span><span class="sxs-lookup"><span data-stu-id="b3f96-301">It is your only option if you're using Windows Containers, and is a great choice for non-Windows containers as well.</span></span> <span data-ttu-id="b3f96-302">Rysunek 3-4 pokazuje, jak włączyć obsługę lokalnego Kubernetes podczas uruchamiania programu Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="b3f96-302">Figure 3-4 shows how to enable local Kubernetes support when running Docker Desktop.</span></span>

![Konfigurowanie Kubernetes w programie Docker Desktop](./media/docker-desktop-kubernetes.png)

<span data-ttu-id="b3f96-304">**Rysunek 3-4**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-304">**Figure 3-4**.</span></span> <span data-ttu-id="b3f96-305">Konfigurowanie Kubernetes w programie Docker Desktop.</span><span class="sxs-lookup"><span data-stu-id="b3f96-305">Configuring Kubernetes in Docker Desktop.</span></span>

<span data-ttu-id="b3f96-306">Docker Desktop to najpopularniejsze narzędzie do konfigurowania i uruchamiania lokalnych aplikacji w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-306">Docker Desktop is the most popular tool for configuring and running containerized apps locally.</span></span> <span data-ttu-id="b3f96-307">Podczas pracy z programem Docker Desktop można opracowywać lokalnie na dokładnie tym samym zestawie obrazów kontenerów platformy Docker, które będą wdrażane w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="b3f96-307">When you work with Docker Desktop, you can develop locally against the exact same set of Docker container images that you'll deploy to production.</span></span> <span data-ttu-id="b3f96-308">Program Docker Desktop został zaprojektowany na potrzeby lokalnego kompilowania, testowania i dostarczania aplikacji w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-308">Docker Desktop is designed to "build, test, and ship" containerized apps locally.</span></span> <span data-ttu-id="b3f96-309">Obsługuje zarówno kontenery systemu Linux, jak i Windows.</span><span class="sxs-lookup"><span data-stu-id="b3f96-309">It supports both Linux and Windows containers.</span></span> <span data-ttu-id="b3f96-310">Po wypchnięciu obrazów do rejestru obrazów, takich jak Azure Container Registry lub Hub Docker, AKS może ściągnąć i wdrożyć je w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="b3f96-310">Once you push your images to an image registry, like Azure Container Registry or Docker Hub, AKS can pull and deploy them to production.</span></span>

### <a name="visual-studio-docker-tooling"></a><span data-ttu-id="b3f96-311">Narzędzia platformy Docker programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b3f96-311">Visual Studio Docker Tooling</span></span>

<span data-ttu-id="b3f96-312">Program Visual Studio obsługuje programowanie platformy Docker dla aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="b3f96-312">Visual Studio supports Docker development for web-based applications.</span></span> <span data-ttu-id="b3f96-313">Podczas tworzenia nowej aplikacji ASP.NET Core można skonfigurować ją z obsługą platformy Docker, jak pokazano na rysunku 3-5.</span><span class="sxs-lookup"><span data-stu-id="b3f96-313">When you create a new ASP.NET Core application, you have an option to configure it with Docker support, as shown in Figure 3-5.</span></span>

![Program Visual Studio umożliwia obsługę platformy Docker](./media/visual-studio-enable-docker-support.png)

<span data-ttu-id="b3f96-315">**Rysunek 3-5**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-315">**Figure 3-5**.</span></span> <span data-ttu-id="b3f96-316">Program Visual Studio umożliwia obsługę platformy Docker</span><span class="sxs-lookup"><span data-stu-id="b3f96-316">Visual Studio Enable Docker Support</span></span>

<span data-ttu-id="b3f96-317">Gdy ta opcja jest zaznaczona, projekt jest tworzony przy użyciu elementu `Dockerfile` w jego katalogu głównym, który może służyć do kompilowania i hostowania aplikacji w kontenerze platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="b3f96-317">When this option is selected, the project is created with a `Dockerfile` in its root, which can be used to build and host the app in a Docker container.</span></span> <span data-ttu-id="b3f96-318">Przykład pliku dockerfile przedstawiono na rysunku 3 -6. git</span><span class="sxs-lookup"><span data-stu-id="b3f96-318">An example Dockerfile is shown in Figure 3-6.git</span></span>

```docker
FROM mcr.microsoft.com/dotnet/core/aspnet:3.1-buster-slim AS base
WORKDIR /app
EXPOSE 80
EXPOSE 443

FROM mcr.microsoft.com/dotnet/core/sdk:3.1-buster AS build
WORKDIR /src
COPY ["eShopWeb/eShopWeb.csproj", "eShopWeb/"]
RUN dotnet restore "eShopWeb/eShopWeb.csproj"
COPY . .
WORKDIR "/src/eShopWeb"
RUN dotnet build "eShopWeb.csproj" -c Release -o /app/build

FROM build AS publish
RUN dotnet publish "eShopWeb.csproj" -c Release -o /app/publish

FROM base AS final
WORKDIR /app
COPY --from=publish /app/publish .
ENTRYPOINT ["dotnet", "eShopWeb.dll"]
```

<span data-ttu-id="b3f96-319">**Rysunek 3-6**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-319">**Figure 3-6**.</span></span> <span data-ttu-id="b3f96-320">Program Visual Studio wygenerował pliku dockerfile</span><span class="sxs-lookup"><span data-stu-id="b3f96-320">Visual Studio generated Dockerfile</span></span>

<span data-ttu-id="b3f96-321">Domyślne zachowanie podczas uruchamiania aplikacji jest skonfigurowane do korzystania z platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="b3f96-321">The default behavior when the app runs is configured to use Docker as well.</span></span> <span data-ttu-id="b3f96-322">Na rysunku 3-7 przedstawiono różne opcje uruchamiania dostępne w nowym projekcie ASP.NET Core utworzonym za pomocą dodanej obsługi platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="b3f96-322">Figure 3-7 shows the different run options available from a new ASP.NET Core project created with Docker support added.</span></span>

![Opcje uruchamiania programu Visual Studio Docker](./media/visual-studio-docker-run-options.png)

<span data-ttu-id="b3f96-324">**Rysunek 3-7**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-324">**Figure 3-7**.</span></span> <span data-ttu-id="b3f96-325">Opcje uruchamiania programu Visual Studio Docker</span><span class="sxs-lookup"><span data-stu-id="b3f96-325">Visual Studio Docker Run Options</span></span>

<span data-ttu-id="b3f96-326">Poza programowaniem lokalnym [Azure dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) zapewnia wygodny sposób pracy wielu programistów z własnymi konfiguracjami Kubernetes na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b3f96-326">In addition to local development, [Azure Dev Spaces](https://docs.microsoft.com/azure/dev-spaces/) provides a convenient way for multiple developers to work with their own Kubernetes configurations within Azure.</span></span> <span data-ttu-id="b3f96-327">Jak widać na rysunku 3-7, można również uruchomić aplikację w Azure Dev Spaces.</span><span class="sxs-lookup"><span data-stu-id="b3f96-327">As you can see in Figure 3-7, you can also run the application in Azure Dev Spaces.</span></span>

<span data-ttu-id="b3f96-328">Ponadto w dowolnym momencie można dodać obsługę platformy Docker do istniejącej aplikacji ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="b3f96-328">Also, at any time you can add Docker support to an existing ASP.NET Core application.</span></span> <span data-ttu-id="b3f96-329">W programie Visual Studio Eksplorator rozwiązań kliknij prawym przyciskiem myszy projekt i **Dodaj**  >  **obsługę platformy Docker**, jak pokazano na rysunku 3-8.</span><span class="sxs-lookup"><span data-stu-id="b3f96-329">From the Visual Studio Solution Explorer, right click on the project and **Add** > **Docker Support**, as shown in Figure 3-8.</span></span>

![Dodawanie obsługi platformy Docker w programie Visual Studio](./media/visual-studio-add-docker-support.png)

<span data-ttu-id="b3f96-331">**Rysunek 3-8**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-331">**Figure 3-8**.</span></span> <span data-ttu-id="b3f96-332">Dodawanie obsługi platformy Docker do programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b3f96-332">Adding Docker support to Visual Studio</span></span>

<span data-ttu-id="b3f96-333">Możesz również dodać obsługę aranżacji kontenera, jak pokazano na rysunku 3-8.</span><span class="sxs-lookup"><span data-stu-id="b3f96-333">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="b3f96-334">Domyślnie w programie Orchestrator są stosowane Kubernetes i Helm.</span><span class="sxs-lookup"><span data-stu-id="b3f96-334">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="b3f96-335">Po wybraniu programu Orchestrator `azds.yaml` plik zostanie dodany do katalogu głównego projektu i `charts` zostanie dodany folder zawierający wykresy Helm używane do konfigurowania i wdrażania aplikacji w Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-335">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="b3f96-336">Rysunek 3-9 pokazuje pliki wyników w nowym projekcie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-336">Figure 3-9 shows the resulting files in a new project.</span></span>

<span data-ttu-id="b3f96-337">Możesz również dodać obsługę aranżacji kontenera, jak pokazano na rysunku 3-8.</span><span class="sxs-lookup"><span data-stu-id="b3f96-337">You can also add Container Orchestration Support, also shown in Figure 3-8.</span></span> <span data-ttu-id="b3f96-338">Domyślnie w programie Orchestrator są stosowane Kubernetes i Helm.</span><span class="sxs-lookup"><span data-stu-id="b3f96-338">By default, the orchestrator uses Kubernetes and Helm.</span></span> <span data-ttu-id="b3f96-339">Po wybraniu programu Orchestrator `azds.yaml` plik zostanie dodany do katalogu głównego projektu i `charts` zostanie dodany folder zawierający wykresy Helm używane do konfigurowania i wdrażania aplikacji w Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b3f96-339">Once you've chosen the orchestrator, a `azds.yaml` file is added to the project root and a `charts` folder is added containing the Helm charts used to configure and deploy the application to Kubernetes.</span></span> <span data-ttu-id="b3f96-340">Rysunek 3-9 pokazuje pliki wyników w nowym projekcie.</span><span class="sxs-lookup"><span data-stu-id="b3f96-340">Figure 3-9 shows the resulting files in a new project.</span></span>

![Obsługa programu Visual Studio Add Orchestrator](./media/visual-studio-add-orchestrator-support.png)

<span data-ttu-id="b3f96-342">**Rysunek 3-9**.</span><span class="sxs-lookup"><span data-stu-id="b3f96-342">**Figure 3-9**.</span></span> <span data-ttu-id="b3f96-343">Dodawanie obsługi aranżacji do programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b3f96-343">Adding orchestration support to Visual Studio</span></span>

### <a name="visual-studio-code-docker-tooling"></a><span data-ttu-id="b3f96-344">Visual Studio Code narzędzia platformy Docker</span><span class="sxs-lookup"><span data-stu-id="b3f96-344">Visual Studio Code Docker Tooling</span></span>

<span data-ttu-id="b3f96-345">Istnieje wiele rozszerzeń dostępnych dla Visual Studio Code obsługujących programowanie platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="b3f96-345">There are a number of extensions available for Visual Studio Code that support Docker development.</span></span>

<span data-ttu-id="b3f96-346">Firma Microsoft udostępnia [platformę Docker dla Visual Studio Code rozszerzenia](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span><span class="sxs-lookup"><span data-stu-id="b3f96-346">Microsoft provides the [Docker for Visual Studio Code extension](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker).</span></span> <span data-ttu-id="b3f96-347">To rozszerzenie upraszcza proces dodawania obsługi kontenera do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b3f96-347">This extension simplifies the process of adding container support to applications.</span></span> <span data-ttu-id="b3f96-348">Szkieletuje wymagane pliki, tworzy obrazy platformy Docker i umożliwia debugowanie aplikacji w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="b3f96-348">It scaffolds required files, builds Docker images, and enables you to debug your app inside a container.</span></span> <span data-ttu-id="b3f96-349">Rozszerzenie zawiera program Visual Explorer, który ułatwia podejmowanie działań na kontenerach i obrazach, takich jak uruchamianie, zatrzymywanie, inspekcja, usuwanie i nie tylko.</span><span class="sxs-lookup"><span data-stu-id="b3f96-349">The extension features a visual explorer that makes it easy to take actions on containers and images such as start, stop, inspect, remove, and more.</span></span> <span data-ttu-id="b3f96-350">Rozszerzenie obsługuje również Docker Compose umożliwiające zarządzanie wieloma uruchomionymi kontenerami jako pojedynczą jednostką.</span><span class="sxs-lookup"><span data-stu-id="b3f96-350">The extension also supports Docker Compose enabling you to manage multiple running containers as a single unit.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="b3f96-351">[Poprzedni](scale-applications.md) 
> [Dalej](leverage-serverless-functions.md)</span><span class="sxs-lookup"><span data-stu-id="b3f96-351">[Previous](scale-applications.md)
[Next](leverage-serverless-functions.md)</span></span>
