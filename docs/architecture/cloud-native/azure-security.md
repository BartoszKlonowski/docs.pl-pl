---
title: Zabezpieczenia platformy Azure dla aplikacji natywnych dla chmury
description: Projektowanie aplikacji platformy .NET natywnych dla chmury na platformie Azure | Aplikacje natywne usługi Azure Security for Cloud
ms.date: 06/30/2019
ms.openlocfilehash: 13b5ad7a883a83014913fa0a6a020610c28c524f
ms.sourcegitcommit: e3cbf26d67f7e9286c7108a2752804050762d02d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/09/2020
ms.locfileid: "80989145"
---
# <a name="azure-security-for-cloud-native-apps"></a><span data-ttu-id="b2b4f-103">Zabezpieczenia platformy Azure dla aplikacji natywnych dla chmury</span><span class="sxs-lookup"><span data-stu-id="b2b4f-103">Azure security for cloud-native apps</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="b2b4f-104">Aplikacje natywne dla chmury mogą być łatwiejsze i trudniejsze do zabezpieczenia niż tradycyjne aplikacje.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-104">Cloud-native applications can be both easier and more difficult to secure than traditional applications.</span></span> <span data-ttu-id="b2b4f-105">Na minus, trzeba zabezpieczyć więcej mniejszych aplikacji i poświęcić więcej energii, aby zbudować infrastrukturę zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-105">On the downside, you need to secure more smaller applications and dedicate more energy to build out the security infrastructure.</span></span> <span data-ttu-id="b2b4f-106">Niejednorodny charakter języków programowania i stylów w większości wdrożeń usług oznacza również, że należy zwrócić większą uwagę na biuletyny zabezpieczeń od wielu różnych dostawców.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-106">The heterogeneous nature of programming languages and styles in most service deployments also means you need to pay more attention to security bulletins from many different providers.</span></span>

<span data-ttu-id="b2b4f-107">Z drugiej strony mniejsze usługi, z których każda ma własny magazyn danych, ograniczają zakres ataku.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-107">On the flip side, smaller services, each with their own data store, limit the scope of an attack.</span></span> <span data-ttu-id="b2b4f-108">Jeśli osoba atakująca naruszy jeden system, prawdopodobnie osobie atakującej trudniej jest przejść do innego systemu niż w aplikacji monolitycznej.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-108">If an attacker compromises one system, it's probably more difficult for the attacker to make the jump to another system than it is in a monolithic application.</span></span> <span data-ttu-id="b2b4f-109">Granice procesu są silne granice.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-109">Process boundaries are strong boundaries.</span></span> <span data-ttu-id="b2b4f-110">Ponadto jeśli kopia zapasowa bazy danych wycieka, uszkodzenie jest bardziej ograniczone, ponieważ ta baza danych zawiera tylko podzbiór danych i jest mało prawdopodobne, aby zawierała dane osobowe.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-110">Also, if a database backup leaks, then the damage is more limited, as that database contains only a subset of data and is unlikely to contain personal data.</span></span>

## <a name="threat-modeling"></a><span data-ttu-id="b2b4f-111">Threat Modeling</span><span class="sxs-lookup"><span data-stu-id="b2b4f-111">Threat modeling</span></span>

<span data-ttu-id="b2b4f-112">Bez względu na to, czy korzyści przewyższają wady aplikacji natywnych dla chmury, należy przestrzegać tego samego holistycznego sposobu myślenia o bezpieczeństwie.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-112">No matter if the advantages outweigh the disadvantages of cloud-native applications, the same holistic security mindset must be followed.</span></span> <span data-ttu-id="b2b4f-113">Bezpieczeństwo i bezpieczne myślenie muszą być częścią każdego kroku historii rozwoju i operacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-113">Security and secure thinking must be part of every step of the development and operations story.</span></span> <span data-ttu-id="b2b4f-114">Podczas planowania aplikacji zadawaj pytania, takie jak:</span><span class="sxs-lookup"><span data-stu-id="b2b4f-114">When planning an application ask questions like:</span></span>

- <span data-ttu-id="b2b4f-115">Jaki byłby wpływ utraty tych danych?</span><span class="sxs-lookup"><span data-stu-id="b2b4f-115">What would be the impact of this data being lost?</span></span>
- <span data-ttu-id="b2b4f-116">Jak możemy ograniczyć szkody spowodowane złymi danymi wstrzykniętymi do tej usługi?</span><span class="sxs-lookup"><span data-stu-id="b2b4f-116">How can we limit the damage from bad data being injected into this service?</span></span>
- <span data-ttu-id="b2b4f-117">Kto powinien mieć dostęp do tych danych?</span><span class="sxs-lookup"><span data-stu-id="b2b4f-117">Who should have access to this data?</span></span>
- <span data-ttu-id="b2b4f-118">Czy istnieją zasady inspekcji dotyczące procesu opracowywania i wydawania?</span><span class="sxs-lookup"><span data-stu-id="b2b4f-118">Are there auditing policies in place around the development and release process?</span></span>

<span data-ttu-id="b2b4f-119">Wszystkie te pytania są częścią procesu zwanego [modelowania zagrożeń](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool).</span><span class="sxs-lookup"><span data-stu-id="b2b4f-119">All these questions are part of a process called [threat modeling](https://docs.microsoft.com/azure/security/azure-security-threat-modeling-tool).</span></span> <span data-ttu-id="b2b4f-120">Proces ten próbuje odpowiedzieć na pytanie, jakie zagrożenia są dla systemu, jak prawdopodobne są zagrożenia i potencjalne szkody z nich.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-120">This process tries to answer the question of what threats there are to the system, how likely the threats are, and the potential damage from them.</span></span>

<span data-ttu-id="b2b4f-121">Po ustaleniu listy zagrożeń należy zdecydować, czy warto je ograniczyć.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-121">Once the list of threats has been established, you need to decide whether they're worth mitigating.</span></span> <span data-ttu-id="b2b4f-122">Czasami zagrożenie jest tak mało prawdopodobne i kosztowne, aby zaplanować, że nie warto wydawać na to energii.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-122">Sometimes a threat is so unlikely and expensive to plan for that it isn't worth spending energy on it.</span></span> <span data-ttu-id="b2b4f-123">Na przykład niektóre aktora na poziomie stanu może wstrzyknąć zmiany w projekcie procesu, który jest używany przez miliony urządzeń.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-123">For instance, some state level actor could inject changes into the design of a process that is used by millions of devices.</span></span> <span data-ttu-id="b2b4f-124">Teraz, zamiast uruchamiania pewnego fragmentu kodu w [Pierścieniu 3,](https://en.wikipedia.org/wiki/Protection_ring)ten kod jest uruchamiany w Pierścieniu 0.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-124">Now, instead of running a certain piece of code in [Ring 3](https://en.wikipedia.org/wiki/Protection_ring), that code is run in Ring 0.</span></span> <span data-ttu-id="b2b4f-125">Umożliwia to wykorzystać, który można pominąć hypervisor i uruchomić kod ataku na komputerach z systemem gołym stanie metalowym, umożliwiając ataki na wszystkich maszynach wirtualnych, które są uruchomione na tym sprzęcie.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-125">This allows an exploit that can bypass the hypervisor and run the attack code on the bare metal machines, allowing attacks on all the virtual machines that are running on that hardware.</span></span>

<span data-ttu-id="b2b4f-126">Zmienione procesory są trudne do wykrycia bez mikroskopu i zaawansowanej wiedzy na temat projektu krzemu tego procesora.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-126">The altered processors are difficult to detect without a microscope and advanced knowledge of the on silicon design of that processor.</span></span> <span data-ttu-id="b2b4f-127">Ten scenariusz jest mało prawdopodobne i kosztowne w celu złagodzenia, więc prawdopodobnie żaden model zagrożenia nie zaleca tworzenia ochrony przed exploitami dla niego.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-127">This scenario is unlikely to happen and expensive to mitigate, so probably no threat model would recommend building exploit protection for it.</span></span>

<span data-ttu-id="b2b4f-128">Bardziej prawdopodobne zagrożenia, takie jak `Id` kontroli przerwanego dostępu, `Id=2` `Id=3` umożliwiające zwiększenie ataków (zastępując w adresie URL) lub iniekcji SQL, są bardziej atrakcyjne do tworzenia zabezpieczeń przed.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-128">More likely threats, such as broken access controls permitting `Id` incrementing attacks (replacing `Id=2` with `Id=3` in the URL) or SQL injection, are more attractive to build protections against.</span></span> <span data-ttu-id="b2b4f-129">Środki zaradcze dla tych zagrożeń są dość rozsądne, aby zbudować i zapobiec kłopotliwym lukom w zabezpieczeniach, które rozmazują reputację firmy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-129">The mitigations for these threats are quite reasonable to build and prevent embarrassing security holes that smear the company's reputation.</span></span>

## <a name="principle-of-least-privilege"></a><span data-ttu-id="b2b4f-130">Zasada najmniejszego przywileju</span><span class="sxs-lookup"><span data-stu-id="b2b4f-130">Principle of least privilege</span></span>

<span data-ttu-id="b2b4f-131">Jednym z pomysłów założycieli w zakresie bezpieczeństwa komputerowego jest Zasada najmniejszych przywilejów (POLP).</span><span class="sxs-lookup"><span data-stu-id="b2b4f-131">One of the founding ideas in computer security is the Principle of Least Privilege (POLP).</span></span> <span data-ttu-id="b2b4f-132">Jest to w rzeczywistości fundamentalny pomysł w większości każdej formy bezpieczeństwa, czy to cyfrowego, czy fizycznego.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-132">It's actually a foundational idea in most any form of security be it digital or physical.</span></span> <span data-ttu-id="b2b4f-133">Krótko mówiąc, zasada jest taka, że każdy użytkownik lub proces powinien mieć najmniejszą liczbę praw możliwych do wykonania swojego zadania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-133">In short, the principle is that any user or process should have the smallest number of rights possible to execute its task.</span></span>

<span data-ttu-id="b2b4f-134">Na przykład pomyśl o kasjerach w banku: dostęp do sejfu jest niezbyt częstym działaniem.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-134">As an example, think of the tellers at a bank: accessing the safe is an uncommon activity.</span></span> <span data-ttu-id="b2b4f-135">Tak więc przeciętny kasjer nie może samodzielnie otworzyć sejfu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-135">So, the average teller can't open the safe themselves.</span></span> <span data-ttu-id="b2b4f-136">Aby uzyskać dostęp, muszą eskalować swoje żądanie za pośrednictwem menedżera banku, który przeprowadza dodatkowe kontrole bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-136">To gain access, they need to escalate their request through a bank manager, who performs additional security checks.</span></span>

<span data-ttu-id="b2b4f-137">W systemie komputerowym fantastycznym przykładem są prawa użytkownika łączącego się z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-137">In a computer system, a fantastic example is the rights of a user connecting to a database.</span></span> <span data-ttu-id="b2b4f-138">W wielu przypadkach istnieje jedno konto użytkownika używane zarówno do tworzenia struktury bazy danych, jak i uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-138">In many cases, there's a single user account used to both build the database structure and run the application.</span></span> <span data-ttu-id="b2b4f-139">Z wyjątkiem przypadków w skrajnych przypadkach konto z uruchomieniem aplikacji nie wymaga możliwości aktualizowania informacji o schemacie.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-139">Except in extreme cases, the account running the application doesn't need the ability to update schema information.</span></span> <span data-ttu-id="b2b4f-140">Powinno istnieć kilka kont, które zapewniają różne poziomy uprawnień.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-140">There should be several accounts that provide different levels of privilege.</span></span> <span data-ttu-id="b2b4f-141">Aplikacja powinna używać tylko poziomu uprawnień, który udziela dostępu do odczytu i zapisu do danych w tabelach.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-141">The application should only use the permission level that grants read and write access to the data in the tables.</span></span> <span data-ttu-id="b2b4f-142">Ten rodzaj ochrony wyeliminowałby ataki, które miały na celu upuszczenie tabel bazy danych lub wprowadzenie złośliwych wyzwalaczy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-142">This kind of protection would eliminate attacks that aimed to drop database tables or introduce malicious triggers.</span></span>

<span data-ttu-id="b2b4f-143">Prawie każda część tworzenia aplikacji natywnej dla chmury może korzystać z zapamiętywania zasady najmniejszych uprawnień.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-143">Almost every part of building a cloud-native application can benefit from remembering the principle of least privilege.</span></span> <span data-ttu-id="b2b4f-144">Można go znaleźć w grze podczas konfigurowania zapór, grup zabezpieczeń sieci, ról i zakresów w kontroli dostępu opartej na rolach (RBAC).</span><span class="sxs-lookup"><span data-stu-id="b2b4f-144">You can find it at play when setting up firewalls, network security groups, roles, and scopes in Role-based access control (RBAC).</span></span>

## <a name="penetration-testing"></a><span data-ttu-id="b2b4f-145">Testy penetracyjne</span><span class="sxs-lookup"><span data-stu-id="b2b4f-145">Penetration testing</span></span>

<span data-ttu-id="b2b4f-146">W miarę jak aplikacje stają się coraz bardziej skomplikowane, liczba wektorów ataku wzrasta w zastraszającym tempie.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-146">As applications become more complicated the number of attack vectors increases at an alarming rate.</span></span> <span data-ttu-id="b2b4f-147">Modelowanie zagrożeń jest wadliwe, ponieważ zwykle jest wykonywane przez te same osoby budujące system.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-147">Threat modeling is flawed in that it tends to be executed by the same people building the system.</span></span> <span data-ttu-id="b2b4f-148">W ten sam sposób, że wielu deweloperów ma problemy z przewidywaniem interakcji użytkowników, a następnie budować bezużyteczne interfejsy użytkownika, większość deweloperów ma trudności z widzeniem każdego wektora ataku.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-148">In the same way that many developers have trouble envisioning user interactions and then build unusable user interfaces, most developers have difficulty seeing every attack vector.</span></span> <span data-ttu-id="b2b4f-149">Jest również możliwe, że deweloperzy budujący system nie są dobrze zorientowani w metodologii ataku i przegapić coś kluczowego.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-149">It's also possible that the developers building the system aren't well versed in attack methodologies and miss something crucial.</span></span>

<span data-ttu-id="b2b4f-150">Testy penetracyjne lub "testowanie pióra" polega na sprowadzeniu podmiotów zewnętrznych do próby ataku na system.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-150">Penetration testing or "pen testing" involves bringing in external actors to attempt to attack the system.</span></span> <span data-ttu-id="b2b4f-151">Te osoby atakujące mogą być zewnętrzną firmą konsultingową lub innymi deweloperami z dobrą wiedzą o bezpieczeństwie z innej części firmy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-151">These attackers may be an external consulting company or other developers with good security knowledge from another part of the business.</span></span> <span data-ttu-id="b2b4f-152">Otrzymują carte blanche, aby spróbować obalić system.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-152">They're given carte blanche to attempt to subvert the system.</span></span> <span data-ttu-id="b2b4f-153">Często znajdują one rozległe luki w zabezpieczeniach, które należy załatać.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-153">Frequently, they'll find extensive security holes that need to be patched.</span></span> <span data-ttu-id="b2b4f-154">Czasami wektor ataku będzie czymś zupełnie nieoczekiwanym, jak wykorzystanie ataku phishingowego na ceo.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-154">Sometimes the attack vector will be something totally unexpected like exploiting a phishing attack against the CEO.</span></span>

<span data-ttu-id="b2b4f-155">Sama platforma Azure nieustannie atakuje [zespół hakerów w firmie Microsoft.](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/)</span><span class="sxs-lookup"><span data-stu-id="b2b4f-155">Azure itself is constantly undergoing attacks from a [team of hackers inside Microsoft](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span> <span data-ttu-id="b2b4f-156">Przez lata jako pierwsi znaleźli dziesiątki potencjalnie katastrofalnych wektorów ataku, zamykając je, zanim będą mogły zostać wykorzystane na zewnątrz.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-156">Over the years, they've been the first to find dozens of potentially catastrophic attack vectors, closing them before they can be exploited externally.</span></span> <span data-ttu-id="b2b4f-157">Im bardziej kuszący cel, tym większe prawdopodobieństwo, że wieczne podmioty będą próbowały go wykorzystać, a na świecie jest kilka celów bardziej kuszących niż platforma Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-157">The more tempting a target, the more likely that eternal actors will attempt to exploit it and there are a few targets in the world more tempting than Azure.</span></span>

## <a name="monitoring"></a><span data-ttu-id="b2b4f-158">Monitorowanie</span><span class="sxs-lookup"><span data-stu-id="b2b4f-158">Monitoring</span></span>

<span data-ttu-id="b2b4f-159">Jeśli osoba atakująca próbuje przeniknąć do aplikacji, powinno być pewne ostrzeżenie.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-159">Should an attacker attempt to penetrate an application, there should be some warning of it.</span></span> <span data-ttu-id="b2b4f-160">Często ataki można zauważyć, badając dzienniki z usług.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-160">Frequently, attacks can be spotted by examining the logs from services.</span></span> <span data-ttu-id="b2b4f-161">Ataki pozostawiają znaki ostrzegawcze, które można dostrzec, zanim się powiedzą.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-161">Attacks leave telltale signs that can be spotted before they succeed.</span></span> <span data-ttu-id="b2b4f-162">Na przykład osoba atakująca próbująca odgadnąć hasło spowoduje wiele żądań do systemu logowania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-162">For instance, an attacker attempting to guess a password will make many requests to a login system.</span></span> <span data-ttu-id="b2b4f-163">Monitorowanie wokół systemu logowania można wykryć dziwne wzorce, które są niezgodne z typowym wzorcem dostępu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-163">Monitoring around the login system can detect weird patterns that are out of line with the typical access pattern.</span></span> <span data-ttu-id="b2b4f-164">To monitorowanie można przekształcić w alert, który z kolei może ostrzegać osobę operacji, aby aktywować jakiś mechanizm zaradczy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-164">This monitoring can be turned into an alert that can, in turn, alert an operations person to activate some sort of countermeasure.</span></span> <span data-ttu-id="b2b4f-165">Bardzo dojrzały system monitorowania może nawet podjąć działania w oparciu o te odchylenia proaktywnie dodając reguły do blokowania żądań lub ograniczania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-165">A highly mature monitoring system might even take action based on these deviations proactively adding rules to block requests or throttle responses.</span></span>

## <a name="securing-the-build"></a><span data-ttu-id="b2b4f-166">Zabezpieczanie kompilacji</span><span class="sxs-lookup"><span data-stu-id="b2b4f-166">Securing the build</span></span>

<span data-ttu-id="b2b4f-167">Jednym z miejsc, gdzie bezpieczeństwo jest często pomijane jest wokół procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-167">One place where security is often overlooked is around the build process.</span></span> <span data-ttu-id="b2b4f-168">Nie tylko należy uruchomić kontroli zabezpieczeń kompilacji, takich jak skanowanie w poszukiwaniu niezabezpieczonych kodu lub poświadczeń zaewidencjonowanych, ale sama kompilacja powinna być bezpieczna.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-168">Not only should the build run security checks, such as scanning for insecure code or checked-in credentials, but the build itself should be secure.</span></span> <span data-ttu-id="b2b4f-169">Jeśli serwer kompilacji zostanie naruszony, zapewnia fantastyczny wektor do wprowadzenia dowolnego kodu do produktu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-169">If the build server is compromised, then it provides a fantastic vector for introducing arbitrary code into the product.</span></span>

<span data-ttu-id="b2b4f-170">Wyobraź sobie, że osoba atakująca chce ukraść hasła osób logujących się do aplikacji internetowej.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-170">Imagine that an attacker is looking to steal the passwords of people signing into a web application.</span></span> <span data-ttu-id="b2b4f-171">Mogą wprowadzić krok kompilacji, który modyfikuje wyewidencjonowany kod, aby dublować wszelkie żądania logowania na innym serwerze.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-171">They could introduce a build step that modifies the checked-out code to mirror any login request to another server.</span></span> <span data-ttu-id="b2b4f-172">Następnym razem kod przechodzi przez kompilacji, jest po cichu aktualizowane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-172">The next time code goes through the build, it's silently updated.</span></span> <span data-ttu-id="b2b4f-173">Skanowanie luki w zabezpieczeniach kodu źródłowego nie spowoduje jej wyładania, ponieważ jest uruchamiane przed kompilacją.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-173">The source code vulnerability scanning won't catch this as it runs before the build.</span></span> <span data-ttu-id="b2b4f-174">Podobnie nikt nie złapie go w przeglądzie kodu, ponieważ kroki kompilacji na żywo na serwerze kompilacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-174">Equally, nobody will catch it in a code review because the build steps live on the build server.</span></span> <span data-ttu-id="b2b4f-175">Wykorzystany kod trafi do produkcji, gdzie może zbierać hasła.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-175">The exploited code will go to production where it can harvest passwords.</span></span> <span data-ttu-id="b2b4f-176">Prawdopodobnie nie ma żadnego dziennika inspekcji zmian w procesie kompilacji lub przynajmniej nikt nie monitoruje inspekcji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-176">Probably there's no audit log of the build process changes, or at least nobody monitoring the audit.</span></span>

<span data-ttu-id="b2b4f-177">Jest to doskonały przykład pozornie niskiej wartości docelowej, która może być użyta do włamania do systemu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-177">This is a perfect example of a seemingly low value target that can be used to break into the system.</span></span> <span data-ttu-id="b2b4f-178">Gdy osoba atakująca naruszy obwód systemu, może rozpocząć pracę nad znalezieniem sposobów podniesienia swoich uprawnień do tego stopnia, że może wyrządzić prawdziwą szkodę w dowolnym miejscu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-178">Once an attacker breaches the perimeter of the system, they can start working on finding ways to elevate their permissions to the point that they can cause real harm anywhere they like.</span></span>

## <a name="building-secure-code"></a><span data-ttu-id="b2b4f-179">Tworzenie bezpiecznego kodu</span><span class="sxs-lookup"><span data-stu-id="b2b4f-179">Building secure code</span></span>

<span data-ttu-id="b2b4f-180">.NET Framework jest już dość bezpieczną strukturą.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-180">.NET Framework is already a quite secure framework.</span></span> <span data-ttu-id="b2b4f-181">Unika niektórych pułapek niezarządzanego kodu, takich jak chodzenie poza końcami tablic.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-181">It avoids some of the pitfalls of unmanaged code, such as walking off the ends of arrays.</span></span> <span data-ttu-id="b2b4f-182">Aktywnie wykonuje się prace nad naprawą luk w zabezpieczeniach w miarę ich odkrywania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-182">Work is actively done to fix security holes as they're discovered.</span></span> <span data-ttu-id="b2b4f-183">Istnieje nawet [program nagród za błędy,](https://www.microsoft.com/msrc/bounty) który płaci naukowcom za znalezienie problemów w ramach i zgłosić je zamiast je wykorzystywać.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-183">There's even a [bug bounty program](https://www.microsoft.com/msrc/bounty) that pays researchers to find issues in the framework and report them instead of exploiting them.</span></span>

<span data-ttu-id="b2b4f-184">Istnieje wiele sposobów, aby kod platformy .NET był bezpieczniejszy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-184">There are many ways to make .NET code more secure.</span></span> <span data-ttu-id="b2b4f-185">Następujące wytyczne, takie jak [bezpieczne kodowania wskazówki dla .NET](https://docs.microsoft.com/dotnet/standard/security/secure-coding-guidelines) artykuł jest rozsądnym krokiem do podjęcia, aby upewnić się, że kod jest bezpieczny od podstaw.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-185">Following guidelines such as the [Secure coding guidelines for .NET](https://docs.microsoft.com/dotnet/standard/security/secure-coding-guidelines) article is a reasonable step to take to ensure that the code is secure from the ground up.</span></span> <span data-ttu-id="b2b4f-186">[OWASP top 10](https://owasp.org/www-project-top-ten/) jest inny nieoceniony przewodnik do tworzenia bezpiecznego kodu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-186">The [OWASP top 10](https://owasp.org/www-project-top-ten/) is another invaluable guide to build secure code.</span></span>

<span data-ttu-id="b2b4f-187">Proces kompilacji jest dobrym miejscem do umieszczenia narzędzi skanujących do wykrywania problemów w kodzie źródłowym, zanim dojdą do produkcji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-187">The build process is a good place to put scanning tools to detect problems in source code before they make it into production.</span></span> <span data-ttu-id="b2b4f-188">Większość każdego projektu ma zależności od niektórych innych pakietów.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-188">Most every project has dependencies on some other packages.</span></span> <span data-ttu-id="b2b4f-189">Narzędzie, które można skanować w poszukiwaniu przestarzałych pakietów, spowoduje problemy w nocnej kompilacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-189">A tool that can scan for outdated packages will catch problems in a nightly build.</span></span> <span data-ttu-id="b2b4f-190">Nawet podczas tworzenia obrazów platformy Docker warto sprawdzić i upewnić się, że obraz podstawowy nie ma znanych luk w zabezpieczeniach.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-190">Even when building Docker images, it's useful to check and make sure that the base image doesn't have known vulnerabilities.</span></span> <span data-ttu-id="b2b4f-191">Inną rzeczą do sprawdzenia jest to, że nikt nie przypadkowo zaewidencjonował poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-191">Another thing to check is that nobody has accidentally checked in credentials.</span></span>

## <a name="built-in-security"></a><span data-ttu-id="b2b4f-192">Wbudowane zabezpieczenia</span><span class="sxs-lookup"><span data-stu-id="b2b4f-192">Built-in security</span></span>

<span data-ttu-id="b2b4f-193">Platforma Azure została zaprojektowana w celu zrównoważenia użyteczności i zabezpieczeń dla większości użytkowników.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-193">Azure is designed to balance usability and security for the majority of users.</span></span> <span data-ttu-id="b2b4f-194">Różni użytkownicy będą mieli różne wymagania dotyczące zabezpieczeń, więc muszą dostosować swoje podejście do zabezpieczeń w chmurze.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-194">Different users are going to have different security requirements, so they need to fine-tune their approach to cloud security.</span></span> <span data-ttu-id="b2b4f-195">Firma Microsoft publikuje wiele informacji o zabezpieczeniach w [Centrum zaufania](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="b2b4f-195">Microsoft publishes a great deal of security information in the [Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span> <span data-ttu-id="b2b4f-196">Ten zasób powinien być pierwszym przystankiem dla tych specjalistów zainteresowanych zrozumieniem, jak działają wbudowane technologie łagodzenia ataków.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-196">This resource should be the first stop for those professionals interested in understanding how the built-in attack mitigation technologies work.</span></span>

<span data-ttu-id="b2b4f-197">W witrynie Azure [portal, Usługa Azure Advisor](https://azure.microsoft.com/services/advisor/) to system, który stale skanuje środowisko i wydaje zalecenia.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-197">Within the Azure portal, the [Azure Advisor](https://azure.microsoft.com/services/advisor/) is a system that is constantly scanning an environment and making recommendations.</span></span> <span data-ttu-id="b2b4f-198">Niektóre z tych zaleceń są przeznaczone do oszczędzania pieniędzy użytkowników, ale inne są przeznaczone do identyfikowania potencjalnie niezabezpieczonych konfiguracji, takich jak posiadanie kontenera magazynu otwartego na świat i nie chronionego przez sieć wirtualną.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-198">Some of these recommendations are designed to save users money, but others are designed to identify potentially insecure configurations, such as having a storage container open to the world and not protected by a Virtual Network.</span></span>

## <a name="azure-network-infrastructure"></a><span data-ttu-id="b2b4f-199">Infrastruktura sieci platformy Azure</span><span class="sxs-lookup"><span data-stu-id="b2b4f-199">Azure network infrastructure</span></span>

<span data-ttu-id="b2b4f-200">W lokalnym środowisku wdrażania duża ilość energii jest przeznaczona na tworzenie sieci.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-200">In an on-premises deployment environment, a great deal of energy is dedicated to setting up networking.</span></span> <span data-ttu-id="b2b4f-201">Konfigurowanie routerów, przełączników i taka jest skomplikowana praca.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-201">Setting up routers, switches, and the such is complicated work.</span></span> <span data-ttu-id="b2b4f-202">Sieci umożliwiają niektórym zasobom rozmawianie z innymi zasobami i w niektórych przypadkach uniemożliwiają dostęp.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-202">Networks allow certain resources to talk to other resources and prevent access in some cases.</span></span> <span data-ttu-id="b2b4f-203">Częstą regułą sieci jest ograniczenie dostępu do środowiska produkcyjnego ze środowiska deweloperskiego na off szansa, że pół rozwinięty fragment kodu działa na opak i usuwa pokos danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-203">A frequent network rule is to restrict access to the production environment from the development environment on the off chance that a half-developed piece of code runs awry and deletes a swath of data.</span></span>

<span data-ttu-id="b2b4f-204">Po wyjęciu z pudełka większość zasobów platformy PaaS Azure ma tylko najbardziej podstawową i permisywną konfigurację sieci.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-204">Out of the box, most PaaS Azure resources have only the most basic and permissive networking setup.</span></span> <span data-ttu-id="b2b4f-205">Na przykład każdy w Internecie może uzyskać dostęp do usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-205">For instance, anybody on the Internet can access an app service.</span></span> <span data-ttu-id="b2b4f-206">Nowe wystąpienia programu SQL Server zazwyczaj są ograniczone, dzięki czemu zewnętrzne strony nie mogą uzyskać do nich dostępu, ale zakresy adresów IP używane przez samą platformę Azure są dozwolone za pośrednictwem.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-206">New SQL Server instances typically come restricted, so that external parties can't access them, but the IP address ranges used by Azure itself are permitted through.</span></span> <span data-ttu-id="b2b4f-207">Tak, podczas gdy serwer SQL jest chroniony przed zagrożeniami zewnętrznymi, osoba atakująca musi tylko skonfigurować przyczółek platformy Azure, z którego może uruchamiać ataki na wszystkie wystąpienia SQL na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-207">So, while the SQL server is protected from external threats, an attacker only needs to set up an Azure bridgehead from where they can launch attacks against all SQL instances on Azure.</span></span>

<span data-ttu-id="b2b4f-208">Na szczęście większość zasobów platformy Azure można umieścić w sieci wirtualnej platformy Azure, która umożliwia lepszą kontrolę dostępu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-208">Fortunately, most Azure resources can be placed into an Azure Virtual Network that allows finer grained access control.</span></span> <span data-ttu-id="b2b4f-209">Podobnie jak w przypadku sieci lokalnych, które ustanawiają sieci prywatne, które są chronione przed całym światem, sieci wirtualne są wyspami prywatnych adresów IP, które znajdują się w sieci platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-209">Similar to the way that on-premises networks establish private networks that are protected from the wider world, virtual networks are islands of private IP addresses that are located within the Azure network.</span></span>

<span data-ttu-id="b2b4f-210">![Rysunek 10-1 Sieć](./media/virtual-network.png)
wirtualna na**rysunku 10-1**platformy Azure .</span><span class="sxs-lookup"><span data-stu-id="b2b4f-210">![Figure 10-1 A virtual network in Azure](./media/virtual-network.png)
**Figure 10-1**.</span></span> <span data-ttu-id="b2b4f-211">Sieć wirtualna na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-211">A virtual network in Azure.</span></span>

<span data-ttu-id="b2b4f-212">W ten sam sposób, w jaki sieci lokalne mają zaporę regulującą dostęp do sieci, można ustanowić podobną zaporę na granicy sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-212">In the same way that on-premises networks have a firewall governing access to the network, you can establish a similar firewall at the boundary of the virtual network.</span></span> <span data-ttu-id="b2b4f-213">Domyślnie wszystkie zasoby w sieci wirtualnej mogą nadal rozmawiać z Internetem.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-213">By default, all the resources on a virtual network can still talk to the Internet.</span></span> <span data-ttu-id="b2b4f-214">To tylko połączenia przychodzące, które wymagają jakiejś formy jawnego wyjątku zapory.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-214">It's only incoming connections that require some form of explicit firewall exception.</span></span>

<span data-ttu-id="b2b4f-215">Po ustanowieniu sieci zasoby wewnętrzne, takie jak konta magazynu, można skonfigurować tak, aby zezwalały tylko na dostęp przez zasoby, które są również w sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-215">With the network established, internal resources like storage accounts can be set up to only allow for access by resources that are also on the Virtual Network.</span></span> <span data-ttu-id="b2b4f-216">Ta zapora zapewnia dodatkowy poziom zabezpieczeń, gdyby klucze tego konta magazynu zostały ujawnione, osoby atakujące nie będą mogły połączyć się z nią w celu wykorzystania wyciekanych kluczy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-216">This firewall provides an extra level of security, should the keys for that storage account be leaked, attackers wouldn't be able to connect to it to exploit the leaked keys.</span></span> <span data-ttu-id="b2b4f-217">Jest to kolejny przykład zasady najmniejszego przywileju.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-217">This is another example of the principle of least privilege.</span></span>

<span data-ttu-id="b2b4f-218">Węzły w klastrze platformy Azure Kubernetes mogą uczestniczyć w sieci wirtualnej, podobnie jak inne zasoby, które są bardziej natywne dla platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-218">The nodes in an Azure Kubernetes cluster can participate in a virtual network just like other resources that are more native to Azure.</span></span> <span data-ttu-id="b2b4f-219">Ta funkcja nosi nazwę [interfejsu azure container networking.](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md)</span><span class="sxs-lookup"><span data-stu-id="b2b4f-219">This functionality is called [Azure Container Networking Interface](https://github.com/Azure/azure-container-networking/blob/master/docs/cni.md).</span></span> <span data-ttu-id="b2b4f-220">W efekcie przydziela podsieć w sieci wirtualnej, na której są przydzielane maszyny wirtualne i obrazy kontenerów.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-220">In effect, it allocates a subnet within the virtual network on which virtual machines and container images are allocated.</span></span>

<span data-ttu-id="b2b4f-221">Kontynuując ścieżkę ilustrowania zasady najmniejszych uprawnień, nie każdy zasób w sieci wirtualnej musi rozmawiać z każdym innym zasobem.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-221">Continuing down the path of illustrating the principle of least privilege, not every resource within a Virtual Network needs to talk to every other resource.</span></span> <span data-ttu-id="b2b4f-222">Na przykład w aplikacji, która zapewnia internetowy interfejs API za pośrednictwem konta magazynu i bazy danych SQL, jest mało prawdopodobne, że baza danych i konto magazynu muszą ze sobą rozmawiać.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-222">For instance, in an application that provides a web API over a storage account and a SQL database, it's unlikely that the database and the storage account need to talk to one another.</span></span> <span data-ttu-id="b2b4f-223">Wszelkie udostępnianie danych między nimi będzie przejść za pośrednictwem aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-223">Any data sharing between them would go through the web application.</span></span> <span data-ttu-id="b2b4f-224">Tak więc [sieciowej grupy zabezpieczeń (NSG)](https://docs.microsoft.com/azure/virtual-network/security-overview) może służyć do odmowy ruchu między tymi dwiema usługami.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-224">So, a [network security group (NSG)](https://docs.microsoft.com/azure/virtual-network/security-overview) could be used to deny traffic between the two services.</span></span>

<span data-ttu-id="b2b4f-225">Zasady odmawiania komunikacji między zasobami może być irytujące do zaimplementowania, zwłaszcza pochodzących z tła przy użyciu platformy Azure bez ograniczeń ruchu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-225">A policy of denying communication between resources can be annoying to implement, especially coming from a background of using Azure without traffic restrictions.</span></span> <span data-ttu-id="b2b4f-226">W niektórych innych chmurach pojęcie grup zabezpieczeń sieci jest znacznie bardziej rozpowszechnione.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-226">On some other clouds, the concept of network security groups is much more prevalent.</span></span> <span data-ttu-id="b2b4f-227">Na przykład domyślną zasadą w udziale AWS jest to, że zasoby nie mogą komunikować się między sobą, dopóki nie są włączone przez reguły w sieciowej grupie sieciowej.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-227">For instance, the default policy on AWS is that resources can't communicate among themselves until enabled by rules in an NSG.</span></span> <span data-ttu-id="b2b4f-228">Podczas gdy wolniej, aby to rozwinąć, bardziej restrykcyjne środowisko zapewnia bezpieczniejsze domyślne.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-228">While slower to develop this, more restrictive environment provides a more secure default.</span></span> <span data-ttu-id="b2b4f-229">Korzystanie z odpowiednich praktyk DevOps, zwłaszcza przy użyciu [usługi Azure Resource Manager lub Terraform](infrastructure-as-code.md) do zarządzania uprawnieniami może ułatwić kontrolowanie reguł.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-229">Making use of proper DevOps practices, especially using [Azure Resource Manager or Terraform](infrastructure-as-code.md) to manage permissions can make controlling the rules easier.</span></span>

<span data-ttu-id="b2b4f-230">Sieci wirtualne mogą być również przydatne podczas konfigurowania komunikacji między zasobami lokalnymi i chmurowymi.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-230">Virtual Networks can also be useful when setting up communication between on-premises and cloud resources.</span></span> <span data-ttu-id="b2b4f-231">Wirtualna sieć prywatna może służyć do bezproblemowego łączenia dwóch sieci razem.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-231">A virtual private network can be used to seamlessly attach the two networks together.</span></span> <span data-ttu-id="b2b4f-232">Umożliwia to uruchamianie sieci wirtualnej bez jakiejkolwiek bramy dla scenariuszy, w których wszyscy użytkownicy są na miejscu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-232">This allows running a virtual network without any sort of gateway for scenarios where all the users are on-site.</span></span> <span data-ttu-id="b2b4f-233">Istnieje wiele technologii, które mogą być wykorzystane do ustanowienia tej sieci.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-233">There are a number of technologies that can be used to establish this network.</span></span> <span data-ttu-id="b2b4f-234">Najprostszym jest użycie [sieci VPN lokacji,](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#s2smulti) która może być ustanowiona między wieloma routerami a platformą Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-234">The simplest is to use a [site-to-site VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#s2smulti) that can be established between many routers and Azure.</span></span> <span data-ttu-id="b2b4f-235">Ruch jest szyfrowany i tunelowany przez Internet przy takim samym koszcie na bajt, jak każdy inny ruch.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-235">Traffic is encrypted and tunneled over the Internet at the same cost per byte as any other traffic.</span></span> <span data-ttu-id="b2b4f-236">W scenariuszach, w których pożądane jest zwiększenie przepustowości lub więcej zabezpieczeń, platforma Azure oferuje usługę o nazwie [Express Route,](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#ExpressRoute) która używa prywatnego obwodu między siecią lokalną a platformą Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-236">For scenarios where more bandwidth or more security is desirable, Azure offers a service called [Express Route](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways?toc=%2fazure%2fvirtual-network%2ftoc.json#ExpressRoute) that uses a private circuit between an on-premises network and Azure.</span></span> <span data-ttu-id="b2b4f-237">Jest to bardziej kosztowne i trudne do ustalenia, ale także bezpieczniejsze.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-237">It's more costly and difficult to establish but also more secure.</span></span>

## <a name="role-based-access-control-for-restricting-access-to-azure-resources"></a><span data-ttu-id="b2b4f-238">Kontrola dostępu oparta na rolach w celu ograniczenia dostępu do zasobów platformy Azure</span><span class="sxs-lookup"><span data-stu-id="b2b4f-238">Role-based access control for restricting access to Azure resources</span></span>

<span data-ttu-id="b2b4f-239">RBAC to system, który zapewnia tożsamość aplikacji uruchomionych na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-239">RBAC is a system that provides an identity to applications running in Azure.</span></span> <span data-ttu-id="b2b4f-240">Aplikacje mogą uzyskiwać dostęp do zasobów przy użyciu tej tożsamości zamiast lub oprócz używania kluczy lub haseł.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-240">Applications can access resources using this identity instead of or in addition to using keys or passwords.</span></span>

## <a name="security-principals"></a><span data-ttu-id="b2b4f-241">Podmioty zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="b2b4f-241">Security Principals</span></span>

<span data-ttu-id="b2b4f-242">Pierwszy składnik w RBAC jest podmiotem zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-242">The first component in RBAC is a security principal.</span></span> <span data-ttu-id="b2b4f-243">Podmiot zabezpieczeń może być użytkownikiem, grupą, jednostką usługi lub tożsamością zarządzaną.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-243">A security principal can be a user, group, service principal, or managed identity.</span></span>

<span data-ttu-id="b2b4f-244">![Rysunek 10-2 Różne rodzaje](./media/rbac-security-principal.png)
zabezpieczeń**Rysunek 10-2**.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-244">![Figure 10-2 Different types of security principals](./media/rbac-security-principal.png)
**Figure 10-2**.</span></span> <span data-ttu-id="b2b4f-245">Różne typy podmiotów zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-245">Different types of security principals.</span></span>

- <span data-ttu-id="b2b4f-246">Użytkownik — każdy użytkownik, który ma konto w usłudze Azure Active Directory jest użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-246">User - Any user who has an account in Azure Active Directory is a user.</span></span>
- <span data-ttu-id="b2b4f-247">Grupa — kolekcja użytkowników z usługi Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-247">Group - A collection of users from Azure Active Directory.</span></span> <span data-ttu-id="b2b4f-248">Jako członek grupy użytkownik wciela się w role tej grupy oprócz własnej.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-248">As a member of a group, a user takes on the roles of that group in addition to their own.</span></span>
- <span data-ttu-id="b2b4f-249">Podmiot usługi — tożsamość zabezpieczeń, w ramach której są uruchamiane usługi lub aplikacje.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-249">Service principal - A security identity under which services or applications run.</span></span>
- <span data-ttu-id="b2b4f-250">Tożsamość zarządzana — tożsamość usługi Azure Active Directory zarządzana przez platformę Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-250">Managed identity - An Azure Active Directory identity managed by Azure.</span></span> <span data-ttu-id="b2b4f-251">Tożsamości zarządzane są zazwyczaj używane podczas tworzenia aplikacji w chmurze, które zarządzają poświadczeniami do uwierzytelniania w usługach platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-251">Managed identities are typically used when developing cloud applications that manage the credentials for authenticating to Azure services.</span></span>

<span data-ttu-id="b2b4f-252">Podmiot zabezpieczeń można zastosować do większości dowolnego zasobu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-252">The security principal can be applied to most any resource.</span></span> <span data-ttu-id="b2b4f-253">Oznacza to, że można przypisać podmiot zabezpieczeń do kontenera uruchomionego w usłudze Azure Kubernetes, umożliwiając mu dostęp do wpisów tajnych przechowywanych w magazynie kluczy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-253">This means that it's possible to assign a security principal to a container running within Azure Kubernetes, allowing it to access secrets stored in Key Vault.</span></span> <span data-ttu-id="b2b4f-254">Funkcja platformy Azure może mieć uprawnienia umożliwiające jej rozmawiać z wystąpieniem usługi Active Directory, aby sprawdzić poprawność JWT dla użytkownika wywołującego.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-254">An Azure Function could take on a permission allowing it to talk to an Active Directory instance to validate a JWT for a calling user.</span></span> <span data-ttu-id="b2b4f-255">Gdy usługi są włączone z jednostką usługi, ich uprawnienia mogą być zarządzane szczegółowo przy użyciu ról i zakresów.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-255">Once services are enabled with a service principal, their permissions can be managed granularly using roles and scopes.</span></span>

## <a name="roles"></a><span data-ttu-id="b2b4f-256">Role</span><span class="sxs-lookup"><span data-stu-id="b2b4f-256">Roles</span></span>

<span data-ttu-id="b2b4f-257">Podmiot zabezpieczeń może przyjąć wiele ról lub, używając bardziej sartorial analogii, nosić wiele kapeluszy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-257">A security principal can take on many roles or, using a more sartorial analogy, wear many hats.</span></span> <span data-ttu-id="b2b4f-258">Każda rola definiuje serię uprawnień, takich jak "Odczyt wiadomości z punktu końcowego usługi Azure Service Bus".</span><span class="sxs-lookup"><span data-stu-id="b2b4f-258">Each role defines a series of permissions such as "Read messages from Azure Service Bus endpoint".</span></span> <span data-ttu-id="b2b4f-259">Skuteczny zestaw uprawnień podmiotu zabezpieczeń to kombinacja wszystkich uprawnień przypisanych do wszystkich ról, które ma podmiot zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-259">The effective permission set of a security principal is the combination of all the permissions assigned to all the roles that security principal has.</span></span> <span data-ttu-id="b2b4f-260">Platforma Azure ma dużą liczbę wbudowanych ról, a użytkownicy mogą definiować własne role.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-260">Azure has a large number of built-in roles and users can define their own roles.</span></span>

<span data-ttu-id="b2b4f-261">![Rysunek 10-3 definicje](./media/rbac-role-definition.png)
roli RBAC**Rysunek 10-3**.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-261">![Figure 10-3 RBAC role definitions](./media/rbac-role-definition.png)
**Figure 10-3**.</span></span> <span data-ttu-id="b2b4f-262">Definicje ról RBAC.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-262">RBAC role definitions.</span></span>

<span data-ttu-id="b2b4f-263">Wbudowane w platformę Azure są również szereg ról wysokiego poziomu, takich jak właściciel, współautor, czytnik i administrator konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-263">Built into Azure are also a number of high-level roles such as Owner, Contributor, Reader, and User Account Administrator.</span></span> <span data-ttu-id="b2b4f-264">Dzięki roli Właściciel podmiot zabezpieczeń może uzyskiwać dostęp do wszystkich zasobów i przypisywać uprawnienia innym osobom.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-264">With the Owner role, a security principal can access all resources and assign permissions to others.</span></span> <span data-ttu-id="b2b4f-265">Współautor ma ten sam poziom dostępu do wszystkich zasobów, ale nie może przypisać uprawnień.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-265">A contributor has the same level of access to all resources but they can't assign permissions.</span></span> <span data-ttu-id="b2b4f-266">Czytnik może wyświetlać tylko istniejące zasoby platformy Azure, a administrator konta użytkownika może zarządzać dostępem do zasobów platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-266">A Reader can only view existing Azure resources and a User Account Administrator can manage access to Azure resources.</span></span>

<span data-ttu-id="b2b4f-267">Bardziej szczegółowe wbudowane role, takie jak [dns zone contributor](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#dns-zone-contributor) mają prawa ograniczone do jednej usługi.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-267">More granular built-in roles such as [DNS Zone Contributor](https://docs.microsoft.com/azure/role-based-access-control/built-in-roles#dns-zone-contributor) have rights limited to a single service.</span></span> <span data-ttu-id="b2b4f-268">Podmioty zabezpieczeń mogą przyjąć dowolną liczbę ról.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-268">Security principals can take on any number of roles.</span></span>

## <a name="scopes"></a><span data-ttu-id="b2b4f-269">Zakresy</span><span class="sxs-lookup"><span data-stu-id="b2b4f-269">Scopes</span></span>

<span data-ttu-id="b2b4f-270">Role można zastosować do ograniczonego zestawu zasobów na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-270">Roles can be applied to a restricted set of resources within Azure.</span></span> <span data-ttu-id="b2b4f-271">Na przykład stosując zakres do poprzedniego przykładu odczytu z kolejki usługi Service Bus, można zawęzić `blah.servicebus.windows.net/queue1`uprawnienia do pojedynczej kolejki: "Odczyt wiadomości z punktu końcowego usługi Azure Service Bus"</span><span class="sxs-lookup"><span data-stu-id="b2b4f-271">For instance, applying scope to the previous example of reading from a Service Bus queue, you can narrow the permission to a single queue: "Read messages from Azure Service Bus endpoint `blah.servicebus.windows.net/queue1`"</span></span>

<span data-ttu-id="b2b4f-272">Zakres może być tak wąski, jak pojedynczy zasób lub może być stosowany do całej grupy zasobów, subskrypcji, a nawet grupy zarządzania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-272">The scope can be as narrow as a single resource or it can be applied to an entire resource group, subscription, or even management group.</span></span>

<span data-ttu-id="b2b4f-273">Podczas testowania, jeśli podmiot zabezpieczeń ma pewne uprawnienia, kombinacja roli i zakresu są brane pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-273">When testing if a security principal has a certain permission, the combination of role and scope are taken into account.</span></span> <span data-ttu-id="b2b4f-274">Ta kombinacja zapewnia potężny mechanizm autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-274">This combination provides a powerful authorization mechanism.</span></span>

## <a name="deny"></a><span data-ttu-id="b2b4f-275">Zablokuj</span><span class="sxs-lookup"><span data-stu-id="b2b4f-275">Deny</span></span>

<span data-ttu-id="b2b4f-276">Wcześniej tylko reguły "zezwalaj" były dozwolone dla RBAC.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-276">Previously, only "allow" rules were permitted for RBAC.</span></span> <span data-ttu-id="b2b4f-277">To zachowanie sprawiło, że niektóre zakresy skomplikowane do kompilacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-277">This behavior made some scopes complicated to build.</span></span> <span data-ttu-id="b2b4f-278">Na przykład zezwalając podmiotowi zabezpieczeń na dostęp do wszystkich kont magazynu z wyjątkiem jednego wymaganego udzielenia jawnego uprawnienia do potencjalnie nieskończonej listy kont magazynu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-278">For instance, allowing a security principal access to all storage accounts except one required granting explicit permission to a potentially endless list of storage accounts.</span></span> <span data-ttu-id="b2b4f-279">Za każdym razem, gdy utworzono nowe konto magazynu, musiałoby ono zostać dodane do tej listy kont.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-279">Every time a new storage account was created, it would have to be added to this list of accounts.</span></span> <span data-ttu-id="b2b4f-280">To dodatkowe koszty zarządzania, które z pewnością nie było pożądane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-280">This added management overhead that certainly wasn't desirable.</span></span>

<span data-ttu-id="b2b4f-281">Reguły odmowy mają pierwszeństwo przed regułami zezwalania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-281">Deny rules take precedence over allow rules.</span></span> <span data-ttu-id="b2b4f-282">Teraz reprezentujący ten sam zakres "zezwalaj na wszystko oprócz jednego" może być reprezentowany jako dwie reguły "zezwalaj wszystkim" i "odmów tego konkretnego".</span><span class="sxs-lookup"><span data-stu-id="b2b4f-282">Now representing the same "allow all but one" scope could be represented as two rules "allow all" and "deny this one specific one".</span></span> <span data-ttu-id="b2b4f-283">Odmów reguł nie tylko ułatwiaj zarządzanie, ale zezwalaj na zasoby, które są bardzo bezpieczne, odmawiając dostępu wszystkim.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-283">Deny rules not only ease management but allow for resources that are extra secure by denying access to everybody.</span></span>

## <a name="checking-access"></a><span data-ttu-id="b2b4f-284">Sprawdzanie dostępu</span><span class="sxs-lookup"><span data-stu-id="b2b4f-284">Checking access</span></span>

<span data-ttu-id="b2b4f-285">Jak można sobie wyobrazić, posiadanie dużej liczby ról i zakresów może sprawić, że znalezienie skutecznego uprawnienia jednostki usługi jest dość trudne.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-285">As you can imagine, having a large number of roles and scopes can make figuring out the effective permission of a service principal quite difficult.</span></span> <span data-ttu-id="b2b4f-286">Palowanie zaprzeczyć zasady na szczycie tego, służy tylko do zwiększenia złożoności.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-286">Piling deny rules on top of that, only serves to increase the complexity.</span></span> <span data-ttu-id="b2b4f-287">Na szczęście istnieje kalkulator uprawnień, który może wyświetlać skuteczne uprawnienia dla dowolnego podmiotu usługi.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-287">Fortunately, there's a permissions calculator that can show the effective permissions for any service principal.</span></span> <span data-ttu-id="b2b4f-288">Zazwyczaj znajduje się w zakładce IAM w portalu, jak pokazano na rysunku 10-3.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-288">It's typically found under the IAM tab in the portal, as shown in Figure 10-3.</span></span>

<span data-ttu-id="b2b4f-289">![Rysunek 10-4 Kalkulator uprawnień](./media/check-rbac.png)
dla usługi aplikacji**Rysunek 10-4**.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-289">![Figure 10-4 Permission calculator for an app service](./media/check-rbac.png)
**Figure 10-4**.</span></span> <span data-ttu-id="b2b4f-290">Kalkulator uprawnień dla usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-290">Permission calculator for an app service.</span></span>

## <a name="securing-secrets"></a><span data-ttu-id="b2b4f-291">Zabezpieczanie wpisów tajnych</span><span class="sxs-lookup"><span data-stu-id="b2b4f-291">Securing secrets</span></span>

<span data-ttu-id="b2b4f-292">Hasła i certyfikaty są częstym wektorem ataku dla atakujących.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-292">Passwords and certificates are a common attack vector for attackers.</span></span> <span data-ttu-id="b2b4f-293">Sprzęt do łamania haseł może zrobić brutalny atak i spróbować odgadnąć miliardy haseł na sekundę.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-293">Password-cracking hardware can do a  brute-force attack and try to guess billions of passwords per second.</span></span> <span data-ttu-id="b2b4f-294">Dlatego ważne jest, aby hasła używane do uzyskiwania dostępu do zasobów były silne, z dużą różnorodnością znaków.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-294">So it's important that the passwords that are used to access resources are strong, with a large variety of characters.</span></span> <span data-ttu-id="b2b4f-295">Te hasła są dokładnie tego rodzaju haseł, które są prawie niemożliwe do zapamiętania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-295">These passwords are exactly the kind of passwords that are near impossible to remember.</span></span> <span data-ttu-id="b2b4f-296">Na szczęście hasła na platformie Azure w rzeczywistości nie muszą być znane przez żadnego człowieka.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-296">Fortunately, the passwords in Azure don't actually need to be known by any human.</span></span>

<span data-ttu-id="b2b4f-297">Wielu [ekspertów w dziedzinie](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) bezpieczeństwa sugeruje, że najlepszym rozwiązaniem jest używanie menedżera haseł do przechowywania własnych haseł.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-297">Many security [experts suggest](https://www.troyhunt.com/password-managers-dont-have-to-be-perfect-they-just-have-to-be-better-than-not-having-one/) that using a password manager to keep your own passwords is the best approach.</span></span> <span data-ttu-id="b2b4f-298">Podczas gdy centralizuje hasła w jednej lokalizacji, pozwala również na używanie bardzo złożonych haseł i zapewnia, że są unikatowe dla każdego konta.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-298">While it centralizes your passwords in one location, it also allows using highly complex passwords and ensuring they're unique for each account.</span></span> <span data-ttu-id="b2b4f-299">Ten sam system istnieje w ramach platformy Azure: centralny magazyn wpisów tajnych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-299">The same system exists within Azure: a central store for secrets.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="b2b4f-300">W usłudze Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="b2b4f-300">Azure Key Vault</span></span>

<span data-ttu-id="b2b4f-301">Usługa Azure Key Vault zapewnia scentralizowaną lokalizację do przechowywania haseł do takich rzeczy, jak bazy danych, klucze interfejsu API i certyfikaty.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-301">Azure Key Vault provides a centralized location to store passwords for things such as databases, API keys, and certificates.</span></span> <span data-ttu-id="b2b4f-302">Gdy tajny zostanie wprowadzony do Skarbca, nigdy więcej nie zostanie pokazany, a polecenia do wyodrębnienia i wyświetlenia są celowo skomplikowane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-302">Once a secret is entered into the Vault, it's never shown again and the commands to extract and view it are purposefully complicated.</span></span> <span data-ttu-id="b2b4f-303">Informacje w sejfie są chronione za pomocą szyfrowania programowego lub zatwierdzonych przez FIPS 140-2 Hardware Security Modules.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-303">The information in the safe is protected using either software encryption or FIPS 140-2 Level 2 validated Hardware Security Modules.</span></span>

<span data-ttu-id="b2b4f-304">Dostęp do magazynu kluczy jest zapewniany za pośrednictwem rbaców, co oznacza, że nie tylko każdy użytkownik może uzyskać dostęp do informacji w przechowalni.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-304">Access to the key vault is provided through RBACs, meaning that not just any user can access the information in the vault.</span></span> <span data-ttu-id="b2b4f-305">Powiedzmy, że aplikacja sieci web chce uzyskać dostęp do ciągu połączenia bazy danych przechowywanego w usłudze Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-305">Say a web application wishes to access the database connection string stored in Azure Key Vault.</span></span> <span data-ttu-id="b2b4f-306">Aby uzyskać dostęp, aplikacje muszą działać przy użyciu jednostki usługi.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-306">To gain access, applications need to run using a service principal.</span></span> <span data-ttu-id="b2b4f-307">W ramach tej zakładanej roli mogą odczytywać sekrety z sejfu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-307">Under this assumed role, they can read the secrets from the safe.</span></span> <span data-ttu-id="b2b4f-308">Istnieje wiele różnych ustawień zabezpieczeń, które mogą dodatkowo ograniczyć dostęp aplikacji do magazynu, dzięki czemu nie można zaktualizować wpisów tajnych, ale tylko je odczytać.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-308">There are a number of different security settings that can further limit the access that an application has to the vault, so that it can't update secrets but only read them.</span></span>

<span data-ttu-id="b2b4f-309">Dostęp do magazynu kluczy można monitorować, aby upewnić się, że tylko oczekiwane aplikacje uzyskują dostęp do magazynu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-309">Access to the key vault can be monitored to ensure that only the expected applications are accessing the vault.</span></span> <span data-ttu-id="b2b4f-310">Dzienniki można zintegrować z powrotem do usługi Azure Monitor, odblokowując możliwość konfigurowania alertów, gdy wystąpią nieoczekiwane warunki.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-310">The logs can be integrated back into Azure Monitor, unlocking the ability to set up alerts when unexpected conditions are encountered.</span></span>

## <a name="kubernetes"></a><span data-ttu-id="b2b4f-311">Kubernetes</span><span class="sxs-lookup"><span data-stu-id="b2b4f-311">Kubernetes</span></span>

<span data-ttu-id="b2b4f-312">W usłudze Kubernetes istnieje podobna usługa do utrzymywania małych tajnych informacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-312">Within Kubernetes, there's a similar service for maintaining small pieces of secret information.</span></span> <span data-ttu-id="b2b4f-313">Wpisy tajne kubernetes można `kubectl` ustawić za pomocą typowego pliku wykonywalnego.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-313">Kubernetes Secrets can be set via the typical `kubectl` executable.</span></span>

<span data-ttu-id="b2b4f-314">Tworzenie klucza tajnego jest tak proste, jak znalezienie wersji base64 wartości, które mają być przechowywane:</span><span class="sxs-lookup"><span data-stu-id="b2b4f-314">Creating a secret is as simple as finding the base64 version of the values to be stored:</span></span>

```console
echo -n 'admin' | base64
YWRtaW4=
echo -n '1f2d1e2e67df' | base64
MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="b2b4f-315">Następnie dodanie go do `secret.yml` pliku wpisów tajnych o nazwie na przykład, który wygląda podobnie do następującego przykładu:</span><span class="sxs-lookup"><span data-stu-id="b2b4f-315">Then adding it to a secrets file named `secret.yml` for example that looks similar to the following example:</span></span>

```yml
apiVersion: v1
kind: Secret
metadata:
  name: mysecret
type: Opaque
data:
  username: YWRtaW4=
  password: MWYyZDFlMmU2N2Rm
```

<span data-ttu-id="b2b4f-316">Na koniec ten plik można załadować do kubernetes, uruchamiając następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="b2b4f-316">Finally, this file can be loaded into Kubernetes by running the following command:</span></span>

```console
kubectl apply -f ./secret.yaml
```

<span data-ttu-id="b2b4f-317">Te wpisy tajne mogą być następnie montowane w woluminach lub narażone na procesy kontenera za pośrednictwem zmiennych środowiskowych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-317">These secrets can then be mounted into volumes or exposed to container processes through environment variables.</span></span> <span data-ttu-id="b2b4f-318">[Podejście aplikacji dwunastocelię](https://12factor.net/) do tworzenia aplikacji sugeruje użycie najniższego wspólnego mianownika do przesyłania ustawień do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-318">The [Twelve-factor app](https://12factor.net/) approach to building applications suggests using the lowest common denominator to transmit settings to an application.</span></span> <span data-ttu-id="b2b4f-319">Zmienne środowiskowe są najniższym wspólnym mianownikiem, ponieważ są obsługiwane bez względu na system operacyjny lub aplikację.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-319">Environment variables are the lowest common denominator, because they're supported no matter the operating system or application.</span></span>

<span data-ttu-id="b2b4f-320">Alternatywą dla korzystania z wbudowanych wpisów tajnych kubernetes jest dostęp do wpisów tajnych w usłudze Azure Key Vault z poziomu usługi Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-320">An alternative to use the built-in Kubernetes secrets is to access the secrets in Azure Key Vault from within Kubernetes.</span></span> <span data-ttu-id="b2b4f-321">Najprostszym sposobem, aby to zrobić, jest przypisanie roli RBAC do kontenera, który chce załadować wpisy tajne.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-321">The simplest way to do this is to assign an RBAC role to the container looking to load secrets.</span></span> <span data-ttu-id="b2b4f-322">Aplikacja może następnie użyć interfejsów API usługi Azure Key Vault, aby uzyskać dostęp do wpisów tajnych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-322">The application can then use the Azure Key Vault APIs to access the secrets.</span></span> <span data-ttu-id="b2b4f-323">Jednak takie podejście wymaga modyfikacji kodu i nie jest zgodne ze wzorcem przy użyciu zmiennych środowiskowych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-323">However, this approach requires modifications to the code and doesn't follow the pattern of using environment variables.</span></span> <span data-ttu-id="b2b4f-324">Zamiast tego można wstrzyknąć wartości do kontenera za pomocą [wtryskiwacza usługi Azure Key Vault.](https://mrdevops.io/introducing-azure-key-vault-to-kubernetes-931f82364354)</span><span class="sxs-lookup"><span data-stu-id="b2b4f-324">Instead, it's possible to inject values into a container through the use of the [Azure Key Vault Injector](https://mrdevops.io/introducing-azure-key-vault-to-kubernetes-931f82364354).</span></span> <span data-ttu-id="b2b4f-325">Takie podejście jest rzeczywiście bardziej bezpieczne niż przy użyciu wpisów tajnych Kubernetes bezpośrednio, ponieważ mogą one być dostępne dla użytkowników w klastrze.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-325">This approach is actually more secure than using the Kubernetes secrets directly, as they can be accessed by users on the cluster.</span></span>

## <a name="encryption-in-transit-and-at-rest"></a><span data-ttu-id="b2b4f-326">Szyfrowanie podczas przesyłania i odpoczynku</span><span class="sxs-lookup"><span data-stu-id="b2b4f-326">Encryption in transit and at rest</span></span>

<span data-ttu-id="b2b4f-327">Zapewnienie bezpieczeństwa danych jest ważne, niezależnie od tego, czy są dostępne na dysku, czy między różnymi usługami.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-327">Keeping data safe is important whether it's on disk or transiting between various different services.</span></span> <span data-ttu-id="b2b4f-328">Najskuteczniejszym sposobem na nieszczelnienie danych jest zaszyfrowanie ich do formatu, który nie może być łatwo odczytany przez innych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-328">The most effective way to keep data from leaking is to encrypt it into a format that can't be easily read by others.</span></span> <span data-ttu-id="b2b4f-329">Platforma Azure obsługuje szeroką gamę opcji szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-329">Azure supports a wide range of encryption options.</span></span>

### <a name="in-transit"></a><span data-ttu-id="b2b4f-330">Przesyłanie</span><span class="sxs-lookup"><span data-stu-id="b2b4f-330">In transit</span></span>

<span data-ttu-id="b2b4f-331">Istnieje kilka sposobów szyfrowania ruchu w sieci na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-331">There are several ways to encrypt traffic on the network in Azure.</span></span> <span data-ttu-id="b2b4f-332">Dostęp do usług platformy Azure jest zazwyczaj wykonywane za pomocą połączeń, które używają zabezpieczeń warstwy transportu (TLS).</span><span class="sxs-lookup"><span data-stu-id="b2b4f-332">The access to Azure services is typically done over connections that use Transport Layer Security (TLS).</span></span> <span data-ttu-id="b2b4f-333">Na przykład wszystkie połączenia z interfejsami API platformy Azure wymagają połączeń TLS.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-333">For instance, all the connections to the Azure APIs require TLS connections.</span></span> <span data-ttu-id="b2b4f-334">Podobnie połączenia z punktami końcowymi w magazynie platformy Azure mogą być ograniczone do pracy tylko za pomocą połączeń szyfrowanych TLS.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-334">Equally, connections to endpoints in Azure storage can be restricted to work only over TLS encrypted connections.</span></span>

<span data-ttu-id="b2b4f-335">Protokół TLS jest skomplikowanym protokołem i po prostu wiedząc, że połączenie używa TLS nie jest wystarczające do zapewnienia bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-335">TLS is a complicated protocol and simply knowing that the connection is using TLS isn't sufficient to ensure security.</span></span> <span data-ttu-id="b2b4f-336">Na przykład TLS 1.0 jest chronicznie niebezpieczny, a TLS 1.1 nie jest dużo lepszy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-336">For instance, TLS 1.0 is chronically insecure, and TLS 1.1 isn't much better.</span></span> <span data-ttu-id="b2b4f-337">Nawet w wersjach protokołu TLS istnieją różne ustawienia, które mogą ułatwić odszyfrowanie połączeń.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-337">Even within the versions of TLS, there are various settings that can make the connections easier to decrypt.</span></span> <span data-ttu-id="b2b4f-338">Najlepszym sposobem działania jest sprawdzenie i sprawdzenie, czy połączenie z serwerem używa aktualnych i dobrze skonfigurowanych protokołów.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-338">The best course of action is to check and see if the server connection is using up-to-date and well configured protocols.</span></span>

<span data-ttu-id="b2b4f-339">Ten test może być wykonany przez usługę zewnętrzną, taką jak test serwera SSL laboratoriów SSL laboratoriów.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-339">This check can be done by an external service such as SSL labs' SSL Server Test.</span></span> <span data-ttu-id="b2b4f-340">Test uruchamiany względem punktu końcowego typowej platformy Azure, w tym przypadku punktu końcowego magistrali usług, daje prawie doskonały wynik A.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-340">A test run against a typical Azure endpoint, in this case a service bus endpoint, yields a near perfect score of A.</span></span>

<span data-ttu-id="b2b4f-341">Nawet usługi, takie jak bazy danych SQL platformy Azure, używają szyfrowania TLS do ukrywania danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-341">Even services like Azure SQL databases use TLS encryption to keep data hidden.</span></span> <span data-ttu-id="b2b4f-342">Interesującą częścią szyfrowania przesyłanych danych przy użyciu protokołu TLS jest to, że nawet microsoft nie jest w stanie nasłuchiwać połączenia między komputerami z systemem TLS.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-342">The interesting part about encrypting the data in transit using TLS is that it isn't possible, even for Microsoft, to listen in on the connection between computers running TLS.</span></span> <span data-ttu-id="b2b4f-343">Powinno to zapewnić komfort zainteresowanych firm, że ich dane mogą być zagrożone przez firmę Microsoft właściwego lub nawet podmiotu państwowego z więcej zasobów niż standardowy atakujący.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-343">This should provide comfort for companies concerned that their data may be at risk from Microsoft proper or even a state actor with more resources than the standard attacker.</span></span>

<span data-ttu-id="b2b4f-344">![Rysunek 10-5 SSL labs raport pokazujący wynik A dla punktu końcowego usługi Service Bus. ](./media/ssl-report.png)
 **Rysunek 10-5**.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-344">![Figure 10-5 SSL labs report showing a score of A for a Service Bus endpoint.](./media/ssl-report.png)
**Figure 10-5**.</span></span> <span data-ttu-id="b2b4f-345">Raporty laboratoriów SSL pokazujące wynik A dla punktu końcowego usługi Service Bus.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-345">SSL labs report showing a score of A for a Service Bus endpoint.</span></span>

<span data-ttu-id="b2b4f-346">Chociaż ten poziom szyfrowania nie będzie wystarczający przez cały czas, powinno to wzbudzić pewność, że połączenia TLS platformy Azure są dość bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-346">While this level of encryption isn't going to be sufficient for all time, it should inspire confidence that Azure TLS connections are quite secure.</span></span> <span data-ttu-id="b2b4f-347">Platforma Azure będzie nadal rozwijać swoje standardy zabezpieczeń w miarę poprawy szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-347">Azure will continue to evolve its security standards as encryption improves.</span></span> <span data-ttu-id="b2b4f-348">Miło jest wiedzieć, że ktoś obserwuje standardy zabezpieczeń i aktualizuje platformę Azure w miarę ich ulepszania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-348">It's nice to know that there's somebody watching the security standards and updating Azure as they improve.</span></span>

### <a name="at-rest"></a><span data-ttu-id="b2b4f-349">Magazynowanie</span><span class="sxs-lookup"><span data-stu-id="b2b4f-349">At rest</span></span>

<span data-ttu-id="b2b4f-350">W każdej aplikacji istnieje wiele miejsc, w których dane spoczywają na dysku.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-350">In any application, there are a number of places where data rests on disk.</span></span> <span data-ttu-id="b2b4f-351">Sam kod aplikacji jest ładowany z niektórych mechanizmów magazynowania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-351">The application code itself is loaded from some storage mechanism.</span></span> <span data-ttu-id="b2b4f-352">Większość aplikacji korzysta również z pewnego rodzaju bazy danych, takich jak SQL Server, Cosmos DB, a nawet niezwykle efektywnego cenowo magazynu tabel.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-352">Most applications also use some kind of database such as SQL Server, Cosmos DB, or even the amazingly price-efficient Table Storage.</span></span> <span data-ttu-id="b2b4f-353">Wszystkie te bazy danych używają mocno zaszyfrowanego magazynu, aby upewnić się, że nikt inny niż aplikacje z odpowiednimi uprawnieniami może odczytać dane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-353">These databases all use heavily encrypted storage to ensure that nobody other than the applications with proper permissions can read your data.</span></span> <span data-ttu-id="b2b4f-354">Nawet operatorzy systemu nie mogą odczytać zaszyfrowanych danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-354">Even the system operators can't read data that has been encrypted.</span></span> <span data-ttu-id="b2b4f-355">Dzięki czemu klienci mogą pozostać pewni, że ich tajne informacje pozostają tajne.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-355">So customers can remain confident their secret information remains secret.</span></span>

### <a name="storage"></a><span data-ttu-id="b2b4f-356">Magazyn</span><span class="sxs-lookup"><span data-stu-id="b2b4f-356">Storage</span></span>

<span data-ttu-id="b2b4f-357">Podstawą dużej części platformy Azure jest aparat usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-357">The underpinning of much of Azure is the Azure Storage engine.</span></span> <span data-ttu-id="b2b4f-358">Dyski maszyn wirtualnych są instalowane na górze usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-358">Virtual machine disks are mounted on top of Azure Storage.</span></span> <span data-ttu-id="b2b4f-359">Usługi Azure Kubernetes są uruchamiane na maszynach wirtualnych, które same są hostowane w usłudze Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-359">Azure Kubernetes Services run on virtual machines that, themselves, are hosted on Azure Storage.</span></span> <span data-ttu-id="b2b4f-360">Nawet bezserwerowych technologii, takich jak usługi Azure Functions Apps i wystąpienia kontenerów platformy Azure, zabraknie dysku, który jest częścią usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-360">Even serverless technologies, such as Azure Functions Apps and Azure Container Instances, run out of disk that is part of Azure Storage.</span></span>

<span data-ttu-id="b2b4f-361">Jeśli usługa Azure Storage jest dobrze zaszyfrowana, zapewnia podstawę dla większości innych, które również mają być szyfrowane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-361">If Azure Storage is well encrypted, then it provides for a foundation for most everything else to also be encrypted.</span></span> <span data-ttu-id="b2b4f-362">Usługa Azure Storage [jest szyfrowana](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) za pomocą [256-bitowego systemu AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard)zgodnego ze standardem [FIPS 140-2.](https://en.wikipedia.org/wiki/FIPS_140)</span><span class="sxs-lookup"><span data-stu-id="b2b4f-362">Azure Storage [is encrypted](https://docs.microsoft.com/azure/storage/common/storage-service-encryption) with [FIPS 140-2](https://en.wikipedia.org/wiki/FIPS_140) compliant [256-bit AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard).</span></span> <span data-ttu-id="b2b4f-363">Jest to dobrze postrzegana technologia szyfrowania, która była przedmiotem szeroko zakrojonej kontroli akademickiej w ciągu ostatnich 20 lat.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-363">This is a well-regarded encryption technology having been the subject of extensive academic scrutiny over the last 20 or so years.</span></span> <span data-ttu-id="b2b4f-364">Obecnie nie ma znanego praktycznego ataku, który pozwoliłby komuś bez znajomości klucza odczytywać dane zaszyfrowane przez AES.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-364">At present, there's no known practical attack that would allow someone without knowledge of the key to read data encrypted by AES.</span></span>

<span data-ttu-id="b2b4f-365">Domyślnie klucze używane do szyfrowania usługi Azure Storage są zarządzane przez firmę Microsoft.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-365">By default, the keys used for encrypting Azure Storage are managed by Microsoft.</span></span> <span data-ttu-id="b2b4f-366">Istnieją rozbudowane zabezpieczenia w celu zapewnienia, aby zapobiec złośliwemu dostępowi do tych kluczy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-366">There are extensive protections in place to ensure to prevent malicious access to these keys.</span></span> <span data-ttu-id="b2b4f-367">Jednak użytkownicy z określonymi wymaganiami szyfrowania mogą również [zapewnić własne klucze magazynu,](https://docs.microsoft.com/azure/storage/common/storage-encryption-keys-powershell) które są zarządzane w usłudze Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-367">However, users with particular encryption requirements can also [provide their own storage keys](https://docs.microsoft.com/azure/storage/common/storage-encryption-keys-powershell) that are managed in Azure Key Vault.</span></span> <span data-ttu-id="b2b4f-368">Klucze te można odwołać w dowolnym momencie, co skutecznie uczynić zawartość konta Magazynu przy użyciu ich niedostępne.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-368">These keys can be revoked at any time, which would effectively render the contents of the Storage account using them inaccessible.</span></span>

<span data-ttu-id="b2b4f-369">Maszyny wirtualne używają zaszyfrowanego magazynu, ale możliwe jest zapewnienie innej warstwy szyfrowania przy użyciu technologii, takich jak Funkcja BitLocker w systemie Windows lub DM-Crypt w systemie Linux.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-369">Virtual machines use encrypted storage, but it's possible to provide another layer of encryption by using technologies like BitLocker on Windows or DM-Crypt on Linux.</span></span> <span data-ttu-id="b2b4f-370">Technologie te oznaczają, że nawet jeśli obraz dysku wyciekł z pamięci masowej, jego odczytanie pozostanie prawie niemożliwe.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-370">These technologies mean that even if the disk image was leaked off of storage, it would remain near impossible to read it.</span></span>

### <a name="azure-sql"></a><span data-ttu-id="b2b4f-371">Azure SQL</span><span class="sxs-lookup"><span data-stu-id="b2b4f-371">Azure SQL</span></span>

<span data-ttu-id="b2b4f-372">Bazy danych hostowane w usłudze Azure SQL używają technologii o nazwie [Transparent Data Encryption (TDE),](/sql/relational-databases/security/encryption/transparent-data-encryption) aby zapewnić, że dane pozostają zaszyfrowane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-372">Databases hosted on Azure SQL use a technology called [Transparent Data Encryption (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) to ensure data remains encrypted.</span></span> <span data-ttu-id="b2b4f-373">Jest domyślnie włączona we wszystkich nowo utworzonych bazach danych SQL, ale musi być włączona ręcznie dla starszych baz danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-373">It's enabled by default on all newly created SQL databases, but must be enabled manually for legacy databases.</span></span> <span data-ttu-id="b2b4f-374">TDE wykonuje szyfrowanie w czasie rzeczywistym i odszyfrowywanie nie tylko bazy danych, ale także kopii zapasowych i dzienników transakcji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-374">TDE executes real-time encryption and decryption of not just the database, but also the backups and transaction logs.</span></span>

<span data-ttu-id="b2b4f-375">Parametry szyfrowania są `master` przechowywane w bazie danych i podczas uruchamiania są odczytywane do pamięci dla pozostałych operacji.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-375">The encryption parameters are stored in the `master` database and, on startup, are read into memory for the remaining operations.</span></span> <span data-ttu-id="b2b4f-376">Oznacza to, `master` że baza danych musi pozostać niezaszyfrowana.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-376">This means that the `master` database must remain unencrypted.</span></span> <span data-ttu-id="b2b4f-377">Rzeczywisty klucz jest zarządzany przez firmę Microsoft.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-377">The actual key is managed by Microsoft.</span></span> <span data-ttu-id="b2b4f-378">Jednak użytkownicy z wymagających wymagań zabezpieczeń może zapewnić własny klucz w usłudze Key Vault w taki sam sposób, jak to zrobić dla usługi Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-378">However, users with exacting security requirements may provide their own key in Key Vault in much the same way as is done for Azure Storage.</span></span> <span data-ttu-id="b2b4f-379">Magazyn kluczy zapewnia takie usługi, jak obracanie kluczy i odwoływanie.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-379">The Key Vault provides for such services as key rotation and revocation.</span></span>

<span data-ttu-id="b2b4f-380">"Przezroczysta" część TDS wynika z faktu, że nie ma zmian klienta potrzebnych do korzystania z zaszyfrowanej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-380">The "Transparent" part of TDS comes from the fact that there aren't client changes needed to use an encrypted database.</span></span> <span data-ttu-id="b2b4f-381">Takie podejście zapewnia dobre zabezpieczenia, wyciek hasła bazy danych wystarczy, aby użytkownicy mogli odszyfrować dane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-381">While this approach provides for good security, leaking the database password is enough for users to be able to decrypt the data.</span></span> <span data-ttu-id="b2b4f-382">Istnieje inne podejście, które szyfruje poszczególne kolumny lub tabele w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-382">There's another approach that encrypts individual columns or tables in a database.</span></span> <span data-ttu-id="b2b4f-383">[Zawsze zaszyfrowane](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) zapewnia, że w żadnym momencie zaszyfrowane dane są wyświetlane w postaci zwykłego tekstu wewnątrz bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-383">[Always Encrypted](https://docs.microsoft.com/azure/sql-database/sql-database-always-encrypted-azure-key-vault) ensures that at no point the encrypted data appears in plain text inside the database.</span></span>

<span data-ttu-id="b2b4f-384">Konfigurowanie tej warstwy szyfrowania wymaga uruchomienia za pomocą kreatora w programie SQL Server Management Studio, aby wybrać rodzaj szyfrowania i miejsce przechowywania skojarzonych kluczy w ucho w magazynie kluczy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-384">Setting up this tier of encryption requires running through a wizard in SQL Server Management Studio to select the sort of encryption and where in Key Vault to store the associated keys.</span></span>

<span data-ttu-id="b2b4f-385">![Rysunek 10-6 Wybieranie kolumn w tabeli do](./media/always-encrypted.png)
zaszyfrowania przy użyciu zawsze zaszyfrowanego**rysunku 10-6**.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-385">![Figure 10-6 Selecting columns in a table to be encrypted using Always Encrypted](./media/always-encrypted.png)
**Figure 10-6**.</span></span> <span data-ttu-id="b2b4f-386">Wybieranie kolumn w tabeli, które mają być szyfrowane przy użyciu opcji Zawsze zaszyfrowane.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-386">Selecting columns in a table to be encrypted using Always Encrypted.</span></span>

<span data-ttu-id="b2b4f-387">Aplikacje klienckie, które odczytują informacje z tych zaszyfrowanych kolumn, muszą wprowadzać specjalne dodatki do odczytu zaszyfrowanych danych.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-387">Client applications that read information from these encrypted columns need to make special allowances to read encrypted data.</span></span> <span data-ttu-id="b2b4f-388">Parametry połączenia muszą zostać `Column Encryption Setting=Enabled` zaktualizowane, a poświadczenia klienta muszą być pobierane z magazynu kluczy.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-388">Connection strings need to be updated with `Column Encryption Setting=Enabled` and client credentials must be retrieved from the Key Vault.</span></span> <span data-ttu-id="b2b4f-389">Klient programu SQL Server musi być następnie zagruntowany kluczami szyfrowania kolumny.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-389">The SQL Server client must then be primed with the column encryption keys.</span></span> <span data-ttu-id="b2b4f-390">Po wykonaniu tej czynności pozostałe akcje używają standardowych interfejsów do klienta SQL.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-390">Once that is done, the remaining actions use the standard interfaces to SQL Client.</span></span> <span data-ttu-id="b2b4f-391">Oznacza to, że narzędzia takie jak Dapper i Entity Framework, które są zbudowane na kliencie SQL, będą nadal działać bez zmian.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-391">That is, tools like Dapper and Entity Framework, which are built on top of SQL Client, will continue to work without changes.</span></span> <span data-ttu-id="b2b4f-392">Zawsze zaszyfrowane może nie być jeszcze dostępne dla każdego sterownika programu SQL Server w każdym języku.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-392">Always Encrypted may not yet be available for every SQL Server driver on every language.</span></span>

<span data-ttu-id="b2b4f-393">Połączenie TDE i Always Encrypted, które mogą być używane z kluczami specyficznymi dla klienta, zapewnia obsługę nawet najbardziej wymagających wymagań szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-393">The combination of TDE and Always Encrypted, both of which can be used with client-specific keys, ensures that even the most exacting encryption requirements are supported.</span></span>

### <a name="cosmos-db"></a><span data-ttu-id="b2b4f-394">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="b2b4f-394">Cosmos DB</span></span>

<span data-ttu-id="b2b4f-395">Usługa Cosmos DB to najnowsza baza danych dostarczona przez firmę Microsoft na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-395">Cosmos DB is the newest database provided by Microsoft in Azure.</span></span> <span data-ttu-id="b2b4f-396">Został zbudowany od podstaw z myślą o bezpieczeństwie i kryptografii.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-396">It has been built from the ground up with security and cryptography in mind.</span></span> <span data-ttu-id="b2b4f-397">Szyfrowanie AES-256bit jest standardem dla wszystkich baz danych usługi Cosmos DB i nie można go wyłączyć.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-397">AES-256bit encryption is standard for all Cosmos DB databases and can't be disabled.</span></span> <span data-ttu-id="b2b4f-398">W połączeniu z tls 1.2 wymagania dotyczące komunikacji, całe rozwiązanie pamięci masowej jest szyfrowany.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-398">Coupled with the TLS 1.2 requirement for communication, the entire storage solution is encrypted.</span></span>

<span data-ttu-id="b2b4f-399">![Rysunek 10-7 Przepływ szyfrowania danych](./media/cosmos-encryption.png)
w usłudze Cosmos DB**Rysunek 10-7**.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-399">![Figure 10-7 The flow of data encryption within Cosmos DB](./media/cosmos-encryption.png)
**Figure 10-7**.</span></span> <span data-ttu-id="b2b4f-400">Przepływ szyfrowania danych w usłudze Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-400">The flow of data encryption within Cosmos DB.</span></span>

<span data-ttu-id="b2b4f-401">Chociaż usługa Cosmos DB nie zapewnia dostarczania kluczy szyfrowania klienta, zespół wykonał znaczną pracę, aby upewnić się, że bez tego jest zgodny z PCI-DSS.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-401">While Cosmos DB doesn't provide for supplying customer encryption keys, there has been significant work done by the team to ensure it remains PCI-DSS compliant without that.</span></span> <span data-ttu-id="b2b4f-402">Usługa Cosmos DB również nie obsługuje żadnego rodzaju szyfrowania pojedynczej kolumny podobne do zawsze zaszyfrowane sql azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-402">Cosmos DB also doesn't support any sort of single column encryption similar to Azure SQL's Always Encrypted yet.</span></span>

## <a name="keeping-secure"></a><span data-ttu-id="b2b4f-403">Dbanie o bezpieczeństwo</span><span class="sxs-lookup"><span data-stu-id="b2b4f-403">Keeping secure</span></span>

<span data-ttu-id="b2b4f-404">Platforma Azure ma wszystkie narzędzia niezbędne do wydania wysoce bezpiecznego produktu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-404">Azure has all the tools necessary to release a highly secure product.</span></span> <span data-ttu-id="b2b4f-405">Jednak łańcuch jest tak silny, jak jego najsłabsze ogniwo.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-405">However, a chain is only as strong as its weakest link.</span></span> <span data-ttu-id="b2b4f-406">Jeśli aplikacje wdrożone na platformie Azure nie są opracowywane przy zastosowaniu odpowiedniego sposobu myślenia o zabezpieczeniach i dobrych inspekcji zabezpieczeń, stają się słabym ogniwem w łańcuchu.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-406">If the applications deployed on top of Azure aren't developed with a proper security mindset and good security audits, then they become the weak link in the chain.</span></span> <span data-ttu-id="b2b4f-407">Istnieje wiele dużych narzędzi analizy statycznej, bibliotek szyfrowania i praktyk zabezpieczeń, które mogą służyć do zapewnienia, że oprogramowanie zainstalowane na platformie Azure jest tak bezpieczne, jak sama platforma Azure.</span><span class="sxs-lookup"><span data-stu-id="b2b4f-407">There are many great static analysis tools, encryption libraries, and security practices that can be used to ensure that the software installed on Azure is as secure as Azure itself.</span></span> <span data-ttu-id="b2b4f-408">Przykłady obejmują [narzędzia analizy statycznej,](https://www.whitesourcesoftware.com/) [biblioteki szyfrowania](https://www.libressl.org/)i [praktyki zabezpieczeń.](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/)</span><span class="sxs-lookup"><span data-stu-id="b2b4f-408">Examples include [static analysis tools](https://www.whitesourcesoftware.com/), [encryption libraries](https://www.libressl.org/), and [security practices](https://azure.microsoft.com/resources/videos/red-vs-blue-internal-security-penetration-testing-of-microsoft-azure/).</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="b2b4f-409">[Poprzedni](security.md)
>[następny](devops.md)</span><span class="sxs-lookup"><span data-stu-id="b2b4f-409">[Previous](security.md)
[Next](devops.md)</span></span>
