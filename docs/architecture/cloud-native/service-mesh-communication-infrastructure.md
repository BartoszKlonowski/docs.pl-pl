---
title: Infrastruktura komunikacji z siatką usług
description: Dowiedz się więcej na temat sposobu, w jaki technologie sieci w chmurze upraszczają natywną komunikację mikrousług
author: robvet
ms.date: 09/10/2019
ms.openlocfilehash: a9192bf9f5827d05b2453c796c72e11782f9f911
ms.sourcegitcommit: 559259da2738a7b33a46c0130e51d336091c2097
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/22/2019
ms.locfileid: "72771027"
---
# <a name="service-mesh-communication-infrastructure"></a><span data-ttu-id="07afb-103">Infrastruktura komunikacji z siatką usług</span><span class="sxs-lookup"><span data-stu-id="07afb-103">Service Mesh communication infrastructure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="07afb-104">W tym rozdziale zbadamy wyzwania komunikacji mikrousług.</span><span class="sxs-lookup"><span data-stu-id="07afb-104">Throughout this chapter, we've explored the challenges of microservice communication.</span></span> <span data-ttu-id="07afb-105">Firma Microsoft stwierdziła, że zespoły programistyczne muszą być wrażliwe na to, jak usługi zaplecza komunikują się ze sobą.</span><span class="sxs-lookup"><span data-stu-id="07afb-105">We said that development teams need to be sensitive to how back-end services communicate with each other.</span></span> <span data-ttu-id="07afb-106">W idealnym przypadku mniejsza komunikacja między usługami jest lepsza.</span><span class="sxs-lookup"><span data-stu-id="07afb-106">Ideally, the less inter-service communication, the better.</span></span> <span data-ttu-id="07afb-107">Jednak unikanie nie zawsze jest możliwe, ponieważ usługi zaplecza często korzystają ze sobą, aby zakończyć operacje.</span><span class="sxs-lookup"><span data-stu-id="07afb-107">However, avoidance isn't always possible as back-end services often rely on one another to complete operations.</span></span>

<span data-ttu-id="07afb-108">Zbadamy różne podejścia do implementacji synchronicznej komunikacji HTTP i asynchronicznej obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="07afb-108">We explored different approaches for implementing synchronous HTTP communication and asynchronous messaging.</span></span> <span data-ttu-id="07afb-109">W każdym z tych przypadków deweloper jest w trakcie implementowania kodu komunikacji.</span><span class="sxs-lookup"><span data-stu-id="07afb-109">In each of the cases, the developer is burdened with implementing communication code.</span></span> <span data-ttu-id="07afb-110">Kod komunikacji jest skomplikowany i intensywnie korzystający z czasu.</span><span class="sxs-lookup"><span data-stu-id="07afb-110">Communication code is complex and time intensive.</span></span> <span data-ttu-id="07afb-111">Nieprawidłowe decyzje mogą prowadzić do znaczących problemów z wydajnością.</span><span class="sxs-lookup"><span data-stu-id="07afb-111">Incorrect decisions can lead to significant performance issues.</span></span>

<span data-ttu-id="07afb-112">Bardziej nowoczesne podejście do centrów komunikacji mikrousług obejmujące nową i szybko rozwijający się *technologię.*</span><span class="sxs-lookup"><span data-stu-id="07afb-112">A more modern approach to microservice communication centers around a new and rapidly evolving technology entitled *Service Mesh*.</span></span> <span data-ttu-id="07afb-113">[Siatka usługi](https://www.nginx.com/blog/what-is-a-service-mesh/) jest konfigurowalną warstwą infrastruktury z wbudowanymi funkcjami do obsługi komunikacji między usługami, odporności i wielu zagadnień związanych z wycinaniem.</span><span class="sxs-lookup"><span data-stu-id="07afb-113">A [service mesh](https://www.nginx.com/blog/what-is-a-service-mesh/) is a configurable infrastructure layer with built-in capabilities to handle service-to-service communication, resiliency, and many cross-cutting concerns.</span></span> <span data-ttu-id="07afb-114">Przenosi odpowiedzialność za te kwestie dotyczące mikrousług i warstwy sieci usługi.</span><span class="sxs-lookup"><span data-stu-id="07afb-114">It moves the responsibility for these concerns out of the microservices and into service mesh layer.</span></span> <span data-ttu-id="07afb-115">Komunikacja jest wyodrębniana z mikrousług.</span><span class="sxs-lookup"><span data-stu-id="07afb-115">Communication is abstracted away from your microservices.</span></span>

<span data-ttu-id="07afb-116">Kluczowym elementem siatki usługi jest serwer proxy.</span><span class="sxs-lookup"><span data-stu-id="07afb-116">A key component of a service mesh is a proxy.</span></span> <span data-ttu-id="07afb-117">W aplikacji natywnej w chmurze wystąpienie serwera proxy jest zazwyczaj współpracujące z każdą mikrousługą.</span><span class="sxs-lookup"><span data-stu-id="07afb-117">In a cloud-native application, an instance of a proxy is typically colocated with each microservice.</span></span> <span data-ttu-id="07afb-118">Gdy są one wykonywane w oddzielnych procesach, te dwa są ściśle powiązane i mają ten sam cykl życia.</span><span class="sxs-lookup"><span data-stu-id="07afb-118">While they execute in separate processes, the two are closely linked and share the same lifecycle.</span></span> <span data-ttu-id="07afb-119">Ten wzorzec, znany jako [wzorzec przyczepki](https://docs.microsoft.com/azure/architecture/patterns/sidecar), jest przedstawiony na rysunku 4-23.</span><span class="sxs-lookup"><span data-stu-id="07afb-119">This pattern, known as the [Sidecar pattern](https://docs.microsoft.com/azure/architecture/patterns/sidecar), and is shown in Figure 4-23.</span></span>

![Siatka usług z samochodem bocznym](./media/service-mesh-with-side-car.png)

<span data-ttu-id="07afb-121">**Rysunek 4-23**.</span><span class="sxs-lookup"><span data-stu-id="07afb-121">**Figure 4-23**.</span></span> <span data-ttu-id="07afb-122">Siatka usług z samochodem bocznym</span><span class="sxs-lookup"><span data-stu-id="07afb-122">Service mesh with a side car</span></span>

<span data-ttu-id="07afb-123">Zwróć uwagę na powyższym rysunku, w jaki sposób komunikaty są przechwytywane przez serwer proxy, który jest uruchamiany razem z każdą mikrousługą.</span><span class="sxs-lookup"><span data-stu-id="07afb-123">Note in the previous figure how messages are intercepted by a proxy that runs alongside each microservice.</span></span> <span data-ttu-id="07afb-124">Każdy serwer proxy można skonfigurować przy użyciu reguł ruchu specyficznych dla mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="07afb-124">Each proxy can be configured with traffic rules specific to the microservice.</span></span> <span data-ttu-id="07afb-125">Umożliwia ona zrozumienie komunikatów i pozwala na ich kierowanie w ramach usług i na zewnątrz.</span><span class="sxs-lookup"><span data-stu-id="07afb-125">It understands messages and can route them across your services and the outside world.</span></span>

<span data-ttu-id="07afb-126">Wraz z zarządzaniem komunikacją między usługami usługa ta umożliwia obsługę odnajdywania usług i równoważenia obciążenia.</span><span class="sxs-lookup"><span data-stu-id="07afb-126">Along with managing service-to-service communication, the Service Mesh provides support for service discovery and load balancing.</span></span>

<span data-ttu-id="07afb-127">Po skonfigurowaniu usługi siatka jest wysoce funkcjonalna.</span><span class="sxs-lookup"><span data-stu-id="07afb-127">Once configured, a service mesh is highly functional.</span></span> <span data-ttu-id="07afb-128">Siatka pobiera odpowiednią pulę wystąpień z punktu końcowego odnajdowania usług.</span><span class="sxs-lookup"><span data-stu-id="07afb-128">The mesh retrieves a corresponding pool of instances from a service discovery endpoint.</span></span> <span data-ttu-id="07afb-129">Wysyła żądanie do określonego wystąpienia usługi, rejestrując czas oczekiwania i typ odpowiedzi wyniku.</span><span class="sxs-lookup"><span data-stu-id="07afb-129">It sends a request to a specific service instance, recording the latency and response type of the result.</span></span> <span data-ttu-id="07afb-130">Wybiera wystąpienie najlepiej zwracające szybką odpowiedź na podstawie różnych czynników, w tym zaobserwowanych opóźnień dla ostatnich żądań.</span><span class="sxs-lookup"><span data-stu-id="07afb-130">It chooses the instance most likely to return a fast response based on different factors, including the observed latency for recent requests.</span></span>

<span data-ttu-id="07afb-131">Siatka usług zarządza problemami dotyczącymi ruchu, komunikacji i sieci na poziomie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="07afb-131">A service mesh manages traffic, communication, and networking concerns at the application level.</span></span> <span data-ttu-id="07afb-132">Rozpoznaje komunikaty i żądania.</span><span class="sxs-lookup"><span data-stu-id="07afb-132">It understands messages and requests.</span></span> <span data-ttu-id="07afb-133">Siatka usługi zazwyczaj integruje się z koordynatorem kontenerów.</span><span class="sxs-lookup"><span data-stu-id="07afb-133">A service mesh typically integrates with a container orchestrator.</span></span> <span data-ttu-id="07afb-134">Kubernetes obsługuje rozszerzalną architekturę, w której można dodać siatkę usług.</span><span class="sxs-lookup"><span data-stu-id="07afb-134">Kubernetes supports an extensible architecture in which a service mesh can be added.</span></span>

<span data-ttu-id="07afb-135">W rozdziale 6 szczegółowe się z technologiami siatki usług, w tym w dyskusjach dotyczących architektury i dostępnych implementacjach typu "open source".</span><span class="sxs-lookup"><span data-stu-id="07afb-135">In chapter 6, we deep-dive into Service Mesh technologies including a discussion on its architecture and available open-source implementations.</span></span>

## <a name="summary"></a><span data-ttu-id="07afb-136">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="07afb-136">Summary</span></span>

<span data-ttu-id="07afb-137">W tym rozdziale omówiono wzorce komunikacji natywnej w chmurze.</span><span class="sxs-lookup"><span data-stu-id="07afb-137">In this chapter, we discussed cloud-native communication patterns.</span></span> <span data-ttu-id="07afb-138">Rozpoczęto badanie, jak klienci frontonu komunikują się z mikrousługami zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07afb-138">We started by examining how front-end clients communicate with back-end microservices.</span></span> <span data-ttu-id="07afb-139">Dzięki temu będziemy mówić o platformach usługi API Gateway i komunikacji w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="07afb-139">Along the way, we talked about API Gateway platforms and real-time communication.</span></span> <span data-ttu-id="07afb-140">Następnie przeglądamy, jak mikrousługi komunikują się z innymi usługami zaplecza.</span><span class="sxs-lookup"><span data-stu-id="07afb-140">We then looked at how microservices communicate with other back-end services.</span></span> <span data-ttu-id="07afb-141">Oglądamy synchroniczną komunikację HTTP i asynchroniczną obsługę komunikatów między usługami.</span><span class="sxs-lookup"><span data-stu-id="07afb-141">We looked at both synchronous HTTP communication and asynchronous messaging across services.</span></span> <span data-ttu-id="07afb-142">Firma Microsoft pogRPCa, nadchodząca technologia w świecie macierzystym w chmurze.</span><span class="sxs-lookup"><span data-stu-id="07afb-142">We covered gRPC, an upcoming technology in the cloud-native world.</span></span> <span data-ttu-id="07afb-143">Wreszcie wprowadziliśmy nową i błyskawicznie rozwijający się technologię, która może usprawnić komunikację mikrousług.</span><span class="sxs-lookup"><span data-stu-id="07afb-143">Finally, we introduced a new and rapidly evolving technology entitled Service Mesh that can streamline microservice communication.</span></span>

<span data-ttu-id="07afb-144">Szczególny nacisk na zarządzane usługi platformy Azure, które mogą pomóc w zaimplementowaniu komunikacji w systemach natywnych w chmurze:</span><span class="sxs-lookup"><span data-stu-id="07afb-144">Special emphasis was on managed Azure services that can help implement communication in cloud-native systems:</span></span>

- [<span data-ttu-id="07afb-145">Application Gateway platformy Azure</span><span class="sxs-lookup"><span data-stu-id="07afb-145">Azure Application Gateway</span></span>](https://docs.microsoft.com/azure/application-gateway/overview)
- [<span data-ttu-id="07afb-146">API Management platformy Azure</span><span class="sxs-lookup"><span data-stu-id="07afb-146">Azure API Management</span></span>](https://azure.microsoft.com/services/api-management/)
- [<span data-ttu-id="07afb-147">Usługa Azure SignalR Service</span><span class="sxs-lookup"><span data-stu-id="07afb-147">Azure SignalR Service</span></span>](https://azure.microsoft.com/services/signalr-service/)
- [<span data-ttu-id="07afb-148">Kolejki usługi Azure Storage</span><span class="sxs-lookup"><span data-stu-id="07afb-148">Azure Storage Queues</span></span>](https://docs.microsoft.com/azure/storage/queues/storage-queues-introduction)
- [<span data-ttu-id="07afb-149">Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="07afb-149">Azure Service Bus</span></span>](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview)
- [<span data-ttu-id="07afb-150">Azure Event Grid</span><span class="sxs-lookup"><span data-stu-id="07afb-150">Azure Event Grid</span></span>](https://docs.microsoft.com/azure/event-grid/overview)
- [<span data-ttu-id="07afb-151">Azure Event Hub</span><span class="sxs-lookup"><span data-stu-id="07afb-151">Azure Event Hub</span></span>](https://azure.microsoft.com/services/event-hubs/)

<span data-ttu-id="07afb-152">Następnie następnym przejdziemy do danych rozproszonych w systemach natywnych w chmurze oraz korzyści i wyzwania.</span><span class="sxs-lookup"><span data-stu-id="07afb-152">We next move to distributed data in cloud-native systems and the benefits and challenges that it presents.</span></span>

### <a name="references"></a><span data-ttu-id="07afb-153">Odwołania</span><span class="sxs-lookup"><span data-stu-id="07afb-153">References</span></span>

- [<span data-ttu-id="07afb-154">Mikrousługi platformy .NET: architektura dla kontenerów aplikacji .NET</span><span class="sxs-lookup"><span data-stu-id="07afb-154">.NET Microservices: Architecture for Containerized .NET applications</span></span>](https://dotnet.microsoft.com/download/thank-you/microservices-architecture-ebook)

- [<span data-ttu-id="07afb-155">Projektowanie komunikacji międzyusługowej dla mikrousług</span><span class="sxs-lookup"><span data-stu-id="07afb-155">Designing Interservice Communication for Microservices</span></span>](https://docs.microsoft.com/azure/architecture/microservices/design/interservice-communication)

- [<span data-ttu-id="07afb-156">Usługa Azure Signal Service — w pełni zarządzana usługa umożliwiająca dodawanie funkcji w czasie rzeczywistym</span><span class="sxs-lookup"><span data-stu-id="07afb-156">Azure SignalR Service, a fully managed service to add real-time functionality</span></span>](https://azure.microsoft.com/blog/azure-signalr-service-a-fully-managed-service-to-add-real-time-functionality/)

- [<span data-ttu-id="07afb-157">Kontroler usługi transferu danych w usłudze Azure API Gateway</span><span class="sxs-lookup"><span data-stu-id="07afb-157">Azure API Gateway Ingress Controller</span></span>](https://azure.github.io/application-gateway-kubernetes-ingress/)

- [<span data-ttu-id="07afb-158">Informacje o ruchu przychodzącego w usłudze Azure Kubernetes Service (AKS)</span><span class="sxs-lookup"><span data-stu-id="07afb-158">About Ingress in Azure Kubernetes Service (AKS)</span></span>](https://vincentlauzon.com/2018/10/10/about-ingress-in-azure-kubernetes-service-aks/)

- [<span data-ttu-id="07afb-159">Praktyczne gRPC</span><span class="sxs-lookup"><span data-stu-id="07afb-159">Practical gRPC</span></span>](https://www.worldcat.org/title/practical-grpc/oclc/1042342319)

- [<span data-ttu-id="07afb-160">Dokumentacja gRPC</span><span class="sxs-lookup"><span data-stu-id="07afb-160">gRPC Documentation</span></span>](https://grpc.io/docs/guides/)

- <span data-ttu-id="07afb-161">[gRPC for WCF Developers](https://bing.com) [Mark gRPC Book]</span><span class="sxs-lookup"><span data-stu-id="07afb-161">[gRPC for WCF Developers](https://bing.com) [Mark's gRPC book]</span></span>

- [<span data-ttu-id="07afb-162">Porównanie usług gRPC z interfejsami API protokołu HTTP</span><span class="sxs-lookup"><span data-stu-id="07afb-162">Comparing gRPC Services with HTTP APIs</span></span>](https://docs.microsoft.com/aspnet/core/grpc/comparison?view=aspnetcore-3.0)

>[!div class="step-by-step"]
><span data-ttu-id="07afb-163">[Poprzedni](rest-grpc.md)
>[Następny](distributed-data.md)</span><span class="sxs-lookup"><span data-stu-id="07afb-163">[Previous](rest-grpc.md)
[Next](distributed-data.md)</span></span>
