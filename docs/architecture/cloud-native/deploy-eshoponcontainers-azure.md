---
title: Wdrażanie aplikacji eShopOnContainers na platformie Azure
description: Wdrażanie aplikacji eShopOnContainers przy użyciu usługi Azure Kubernetes Service, Helm i DevSpaces.
ms.date: 04/20/2020
ms.openlocfilehash: a3eacedac946cb25cf3cced305d7921e29f0d204
ms.sourcegitcommit: 957c49696eaf048c284ef8f9f8ffeb562357ad95
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/07/2020
ms.locfileid: "82895586"
---
# <a name="deploying-eshoponcontainers-to-azure"></a><span data-ttu-id="d9bdc-103">Wdrażanie aplikacji eShopOnContainers na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="d9bdc-103">Deploying eShopOnContainers to Azure</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="d9bdc-104">Aplikację eShopOnContainers można wdrożyć na różnych platformach platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-104">The eShopOnContainers application can be deployed to a variety of Azure platforms.</span></span> <span data-ttu-id="d9bdc-105">Zalecanym rozwiązaniem jest wdrożenie aplikacji w usłudze Azure Kubernetes Services (AKS).</span><span class="sxs-lookup"><span data-stu-id="d9bdc-105">The recommended approach is to deploy the application to Azure Kubernetes Services (AKS).</span></span> <span data-ttu-id="d9bdc-106">Helm, narzędzie wdrażania Kubernetes, jest dostępne w celu ograniczenia złożoności wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-106">Helm, a Kubernetes deployment tool, is available to reduce deployment complexity.</span></span> <span data-ttu-id="d9bdc-107">Opcjonalnie deweloperzy mogą wdrożyć Azure Dev Spaces dla Kubernetes, aby usprawnić proces tworzenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-107">Optionally, developers may implement Azure Dev Spaces for Kubernetes to streamline their development process.</span></span>

## <a name="azure-kubernetes-service"></a><span data-ttu-id="d9bdc-108">Azure Kubernetes Service</span><span class="sxs-lookup"><span data-stu-id="d9bdc-108">Azure Kubernetes Service</span></span>

<span data-ttu-id="d9bdc-109">Aby hostować eShop w AKS, pierwszym krokiem jest utworzenie klastra AKS.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-109">To host eShop in AKS, the first step is to create an AKS cluster.</span></span> <span data-ttu-id="d9bdc-110">W tym celu można użyć Azure Portal, który przeprowadzi Cię przez wymagane kroki.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-110">To do so, you might use the Azure portal, which will walk you through the required steps.</span></span> <span data-ttu-id="d9bdc-111">Możesz również utworzyć klaster z poziomu interfejsu wiersza polecenia platformy Azure, pamiętając o włączeniu Access Control opartego na rolach (RBAC) i routingu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-111">You could also create a cluster from the Azure CLI, taking care to enable Role-Based Access Control (RBAC) and application routing.</span></span> <span data-ttu-id="d9bdc-112">Dokumentacja eShopOnContainers ' zawiera szczegółowe instrukcje dotyczące tworzenia własnego klastra AKS.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-112">The eShopOnContainers' documentation details the steps for creating your own AKS cluster.</span></span> <span data-ttu-id="d9bdc-113">Po utworzeniu można uzyskać dostęp do klastra i zarządzać nim z poziomu pulpitu nawigacyjnego Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-113">Once created, you can access and manage the cluster from the Kubernetes dashboard.</span></span>

<span data-ttu-id="d9bdc-114">Teraz można wdrożyć aplikację eShop w klastrze za pomocą Helm Ier.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-114">You can now deploy the eShop application to the cluster leveraging Helm and Tiller.</span></span>

## <a name="deploying-to-azure-kubernetes-service-using-helm"></a><span data-ttu-id="d9bdc-115">Wdrażanie w usłudze Azure Kubernetes za pomocą usługi Helm</span><span class="sxs-lookup"><span data-stu-id="d9bdc-115">Deploying to Azure Kubernetes Service using Helm</span></span>

<span data-ttu-id="d9bdc-116">Helm to narzędzie Menedżera pakietów aplikacji, które działa bezpośrednio z Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-116">Helm is an application package manager tool that works directly with Kubernetes.</span></span> <span data-ttu-id="d9bdc-117">Ułatwia ona Definiowanie, Instalowanie i Uaktualnianie aplikacji Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-117">It helps you define, install, and upgrade Kubernetes applications.</span></span> <span data-ttu-id="d9bdc-118">Chociaż proste aplikacje można wdrażać w usłudze AKS przy użyciu niestandardowych skryptów interfejsu wiersza polecenia lub prostych plików wdrożenia, złożone aplikacje mogą zawierać wiele obiektów Kubernetes i korzystać z Helm.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-118">While simple apps can be deployed to AKS with custom CLI scripts or simple deployment files, complex apps can contain many Kubernetes objects and benefit from Helm.</span></span>

<span data-ttu-id="d9bdc-119">Przy użyciu Helm aplikacje obejmują pliki konfiguracyjne oparte na tekście, nazywane wykresymi Helm, które deklaratywnie opisują aplikację i konfigurację w pakietach Helm.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-119">Using Helm, applications include text-based configuration files, called Helm charts, which declaratively describe the application and configuration in Helm packages.</span></span> <span data-ttu-id="d9bdc-120">Wykresy używają standardowych plików YAML-sformatowana do opisywania powiązanego zestawu zasobów Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-120">Charts use standard YAML-formatted files to describe a related set of Kubernetes resources.</span></span> <span data-ttu-id="d9bdc-121">Są one w wersji wraz z opisywanym przez siebie kodem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-121">They're versioned alongside the application code they describe.</span></span> <span data-ttu-id="d9bdc-122">Helm wykresy z prostego do złożonego, w zależności od wymagań instalacji opisywanej przez nie.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-122">Helm Charts range from simple to complex depending on the requirements of the installation they describe.</span></span>

<span data-ttu-id="d9bdc-123">Helm składa się z narzędzia wiersza polecenia klienta, które korzysta z wykresów Helm i uruchamia polecenia do składnika serwera o nazwie.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-123">Helm is composed of a command-line client tool, which consumes helm charts and launches commands to a server component named, Tiller.</span></span> <span data-ttu-id="d9bdc-124">Do programu komunikuje się za pomocą interfejsu API Kubernetes w celu zapewnienia prawidłowej obsługi obciążeń kontenerów.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-124">Tiller communicates with the Kubernetes API to ensure the correct provisioning of your containerized workloads.</span></span> <span data-ttu-id="d9bdc-125">Helm jest obsługiwany przez natywną podstawę obliczeniową w chmurze.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-125">Helm is maintained by the Cloud-native Computing Foundation.</span></span>

<span data-ttu-id="d9bdc-126">Następujący plik YAML przedstawia szablon Helm:</span><span class="sxs-lookup"><span data-stu-id="d9bdc-126">The following yaml file presents a Helm template:</span></span>

```yaml
apiVersion: v1
kind: Service
metadata:
  name: {{ .Values.app.svc.marketing }}
  labels:
    app: {{ template "marketing-api.name" . }}
    chart: {{ template "marketing-api.chart" . }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app: {{ template "marketing-api.name" . }}
    release: {{ .Release.Name }}
```

<span data-ttu-id="d9bdc-127">Należy zauważyć, jak szablon opisuje dynamiczny zestaw par klucz/wartość.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-127">Note how the template describes a dynamic set of key/value pairs.</span></span> <span data-ttu-id="d9bdc-128">Po wywołaniu szablonu wartości ujęte w nawiasy klamrowe są pobierane z innych plików konfiguracji opartych na YAML.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-128">When the template is invoked, values that enclosed in curly braces are pulled in from other yaml-based configuration files.</span></span>

<span data-ttu-id="d9bdc-129">Wykresy eShopOnContainers Helm można znaleźć w folderze/k8s/Helm</span><span class="sxs-lookup"><span data-stu-id="d9bdc-129">You'll find the eShopOnContainers helm charts in the /k8s/helm folder.</span></span> <span data-ttu-id="d9bdc-130">Rysunek 2-6 pokazuje, w jaki sposób różne składniki aplikacji są zorganizowane w strukturę folderów używaną przez Helm do definiowania wdrożeń i zarządzania nimi.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-130">Figure 2-6 shows how the different components of the application are organized into a folder structure used by helm to define and managed deployments.</span></span>

<span data-ttu-id="d9bdc-131">![Rysunek architektury](./media/eshoponcontainers-helm-folder.png)
eShopOnContainers**2-6**.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-131">![eShopOnContainers Architecture](./media/eshoponcontainers-helm-folder.png)
**Figure 2-6**.</span></span> <span data-ttu-id="d9bdc-132">Folder eShopOnContainers Helm.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-132">The eShopOnContainers helm folder.</span></span>

<span data-ttu-id="d9bdc-133">Każdy indywidualny składnik jest instalowany przy `helm install` użyciu polecenia.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-133">Each individual component is installed using a `helm install` command.</span></span> <span data-ttu-id="d9bdc-134">eShop zawiera skrypt "Deploy All", który powoduje pętlę i instaluje składniki przy użyciu odpowiednich wykresów Helm.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-134">eShop includes a "deploy all" script that loops through and installs the components using their respective helm charts.</span></span> <span data-ttu-id="d9bdc-135">Wynikiem jest powtarzalny proces, wersja z aplikacją w kontroli źródła, którą każdy członek zespołu może wdrożyć w klastrze AKS z jednowierszowym poleceniem skryptu.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-135">The result is a repeatable process, versioned with the application in source control, that anyone on the team can deploy to an AKS cluster with a one-line script command.</span></span>

> <span data-ttu-id="d9bdc-136">Należy zauważyć, że wersja 3 Helm oficjalnie eliminuje konieczność użycia składnika serwera programu do obsługi.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-136">Note that version 3 of Helm officially removes the need for the Tiller server component.</span></span> <span data-ttu-id="d9bdc-137">Więcej informacji na temat tego rozszerzenia można znaleźć [tutaj](https://medium.com/better-programming/why-is-tiller-missing-in-helm-3-2347c446714).</span><span class="sxs-lookup"><span data-stu-id="d9bdc-137">More information on this enhancement can be found [here](https://medium.com/better-programming/why-is-tiller-missing-in-helm-3-2347c446714).</span></span>

## <a name="azure-dev-spaces"></a><span data-ttu-id="d9bdc-138">Azure Dev Spaces</span><span class="sxs-lookup"><span data-stu-id="d9bdc-138">Azure Dev Spaces</span></span>

<span data-ttu-id="d9bdc-139">Aplikacje natywne w chmurze mogą szybko rozwijać duże i złożone, co wymaga znaczących zasobów obliczeniowych.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-139">Cloud-native applications can quickly grow large and complex, requiring significant compute resources to run.</span></span> <span data-ttu-id="d9bdc-140">W tych scenariuszach cała aplikacja nie może być hostowana na maszynie deweloperskiej (szczególnie w przypadku laptopu).</span><span class="sxs-lookup"><span data-stu-id="d9bdc-140">In these scenarios, the entire application can't be hosted on a development machine (especially a laptop).</span></span> <span data-ttu-id="d9bdc-141">Azure Dev Spaces zaprojektowano w celu rozwiązania tego problemu przy użyciu AKS.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-141">Azure Dev Spaces is designed to address this problem using AKS.</span></span> <span data-ttu-id="d9bdc-142">Pozwala to deweloperom na współdziałanie z lokalną wersją swoich usług przy jednoczesnym obsługiwaniu reszty aplikacji w klastrze projektowym AKS.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-142">It enables developers to work with a local version of their services while hosting the rest of the application in an AKS development cluster.</span></span>

<span data-ttu-id="d9bdc-143">Deweloperzy mogą korzystać z działającego wystąpienia (Programowanie) w klastrze AKS zawierającym całą zaprojektowaną aplikację.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-143">Developers share a running (development) instance in an AKS cluster that contains the entire containerized application.</span></span> <span data-ttu-id="d9bdc-144">Ale korzystają z miejsc osobistych skonfigurowanych na ich maszynach do lokalnego tworzenia usług.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-144">But they use personal spaces set up on their machine to locally develop their services.</span></span> <span data-ttu-id="d9bdc-145">Gdy wszystko będzie gotowe, testuje od końca do końca w klastrze AKS — bez replikowania zależności.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-145">When ready, they test from end-to-end in the AKS cluster - without replicating dependencies.</span></span> <span data-ttu-id="d9bdc-146">Azure Dev Spaces Scala kod z komputera lokalnego z usługami w AKS.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-146">Azure Dev Spaces merges code from the local machine with services in AKS.</span></span> <span data-ttu-id="d9bdc-147">Członkowie zespołu mogą zobaczyć, jak ich zmiany będą zachowywać się w rzeczywistym środowisku AKS.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-147">Team members can see how their changes will behave in a real AKS environment.</span></span> <span data-ttu-id="d9bdc-148">Deweloperzy mogą szybko iterować i debugować kod bezpośrednio w Kubernetes za pomocą programu Visual Studio 2017 lub Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-148">Developers can rapidly iterate and debug code directly in Kubernetes using Visual Studio 2017 or Visual Studio Code.</span></span>

<span data-ttu-id="d9bdc-149">Na rysunku 2-7 można zobaczyć, że Susie dewelopera wdrożono zaktualizowaną wersję mikrousługi programu Bikes do jej obszaru dev.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-149">In Figure 2-7, you can see that Developer Susie has deployed an updated version of the Bikes microservice into her dev space.</span></span> <span data-ttu-id="d9bdc-150">Następnie można testować zmiany przy użyciu niestandardowego adresu URL rozpoczynającego się od nazwy miejsca (susie.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="d9bdc-150">She's then able to test her changes using a custom URL starting with the name of her space (susie.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="d9bdc-151">![Rysunek architektury](./media/azure-devspaces-one.png)
eShopOnContainers**2-7**.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-151">![eShopOnContainers Architecture](./media/azure-devspaces-one.png)
**Figure 2-7**.</span></span> <span data-ttu-id="d9bdc-152">Susie dewelopera wdraża własną wersję mikrousługi programu Bikes i testuje ją.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-152">Developer Susie deploys her own version of the Bikes microservice and tests it.</span></span>

<span data-ttu-id="d9bdc-153">W tym samym czasie Developer Jan dostosowuje mikrousługę rezerwacji i wymaga przetestowania zmian.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-153">At the same time, developer John is customizing the Reservations microservice and needs to test his changes.</span></span> <span data-ttu-id="d9bdc-154">Wdraża zmiany w swoim własnym obszarze deweloperskim bez konfliktu ze zmianami Susie, jak pokazano na rysunku 2-8.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-154">He deploys his changes to his own dev space without conflicting with Susie's changes as shown in Figure 2-8.</span></span> <span data-ttu-id="d9bdc-155">Jan następnie testuje swoje zmiany przy użyciu własnego adresu URL, który jest poprzedzony nazwą swojego miejsca (john.s.dev.myapp.eus.azds.io).</span><span class="sxs-lookup"><span data-stu-id="d9bdc-155">John then tests his changes using his own URL that is prefixed with the name of his space (john.s.dev.myapp.eus.azds.io).</span></span>

<span data-ttu-id="d9bdc-156">![Rysunek architektury](./media/azure-devspaces-two.png)
eShopOnContainers**2-8**.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-156">![eShopOnContainers Architecture](./media/azure-devspaces-two.png)
**Figure 2-8**.</span></span> <span data-ttu-id="d9bdc-157">Deweloperzy nie wdrażają własnej wersji mikrousługi rezerwacji i testują ją bez konfliktu z innymi deweloperami.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-157">Developer John deploys his own version of the Reservations microservice and tests it without conflicting with other developers.</span></span>

<span data-ttu-id="d9bdc-158">Za pomocą Azure Dev Spaces zespoły mogą współpracować bezpośrednio z usługą AKS, niezależnie od zmieniania, wdrażania i testowania zmian.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-158">Using Azure Dev Spaces, teams can work directly with AKS while independently changing, deploying, and testing their changes.</span></span> <span data-ttu-id="d9bdc-159">Takie podejście zmniejsza potrzebę korzystania z oddzielnych dedykowanych środowisk hostowanych, ponieważ każdy deweloper efektywnie ma własne środowisko AKS.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-159">This approach reduces the need for separate dedicated hosted environments since every developer effectively has their own AKS environment.</span></span> <span data-ttu-id="d9bdc-160">Deweloperzy mogą korzystać z Azure Dev Spaces przy użyciu interfejsu wiersza polecenia lub uruchamiać aplikacje do Azure Dev Spaces bezpośrednio z programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-160">Developers can work with Azure Dev Spaces using its CLI or launch their application to Azure Dev Spaces directly from Visual Studio.</span></span> [<span data-ttu-id="d9bdc-161">Dowiedz się więcej o tym, jak działa Azure Dev Spaces i czy jest skonfigurowane.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-161">Learn more about how Azure Dev Spaces works and is configured.</span></span>](https://docs.microsoft.com/azure/dev-spaces/how-dev-spaces-works)

## <a name="azure-functions-and-logic-apps-serverless"></a><span data-ttu-id="d9bdc-162">Azure Functions i Logic Apps (bezserwerowo)</span><span class="sxs-lookup"><span data-stu-id="d9bdc-162">Azure Functions and Logic Apps (Serverless)</span></span>

<span data-ttu-id="d9bdc-163">Przykład eShopOnContainers obejmuje obsługę śledzenia kampanii marketingowych online.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-163">The eShopOnContainers sample includes support for tracking online marketing campaigns.</span></span> <span data-ttu-id="d9bdc-164">Funkcja platformy Azure służy do śledzenia szczegółów kampanii marketingowej dla danego identyfikatora kampanii.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-164">An Azure Function is used to track marketing campaign details for a given campaign ID.</span></span> <span data-ttu-id="d9bdc-165">Zamiast tworzyć pełną mikrousługi, pojedyncza funkcja platformy Azure jest prostsza i wystarczająca.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-165">Rather than creating a full microservice, a single Azure Function is simpler and sufficient.</span></span> <span data-ttu-id="d9bdc-166">Azure Functions mieć prosty model kompilacji i wdrażania, szczególnie gdy jest skonfigurowany do uruchamiania w Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-166">Azure Functions have a simple build and deployment model, especially when configured to run in Kubernetes.</span></span> <span data-ttu-id="d9bdc-167">Wdrażanie funkcji jest skryptem przy użyciu szablonów Azure Resource Manager (ARM) i interfejsu wiersza polecenia platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-167">Deploying the function is scripted using Azure Resource Manager (ARM) templates and the Azure CLI.</span></span> <span data-ttu-id="d9bdc-168">Ta usługa kampanii nie jest połączona z klientem i wywołuje pojedynczą operację, co sprawia, że jest to doskonały kandydat do Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-168">This campaign service isn't customer-facing and invokes a single operation, making it a great candidate for Azure Functions.</span></span> <span data-ttu-id="d9bdc-169">Funkcja wymaga minimalnej konfiguracji, w tym danych parametrów połączenia bazy danych i podstawowych ustawień identyfikatora URI obrazu.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-169">The function requires minimal configuration, including a database connection string data and image base URI settings.</span></span> <span data-ttu-id="d9bdc-170">Azure Functions można skonfigurować w Azure Portal.</span><span class="sxs-lookup"><span data-stu-id="d9bdc-170">You configure Azure Functions in the Azure portal.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d9bdc-171">[Poprzedni](map-eshoponcontainers-azure-services.md)
>[Następny](centralized-configuration.md)</span><span class="sxs-lookup"><span data-stu-id="d9bdc-171">[Previous](map-eshoponcontainers-azure-services.md)
[Next](centralized-configuration.md)</span></span>
