---
title: Buforowanie w aplikacji natywnej w chmurze
description: Dowiedz się więcej na temat strategii buforowania w aplikacji natywnej w chmurze.
author: robvet
ms.date: 01/22/2020
ms.openlocfilehash: 2da61a01fc53233d1934df813fcba3b91a495c43
ms.sourcegitcommit: 13e79efdbd589cad6b1de634f5d6b1262b12ab01
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/28/2020
ms.locfileid: "76794969"
---
# <a name="caching-in-a-cloud-native-app"></a><span data-ttu-id="c1585-103">Buforowanie w aplikacji natywnej w chmurze</span><span class="sxs-lookup"><span data-stu-id="c1585-103">Caching in a cloud-native app</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="c1585-104">Zalety buforowania są zrozumiałe.</span><span class="sxs-lookup"><span data-stu-id="c1585-104">The benefits of caching are well understood.</span></span> <span data-ttu-id="c1585-105">Technika działa przez tymczasowe kopiowanie często używanych danych z magazynu danych zaplecza do *szybkiego magazynu* , który znajduje się bliżej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c1585-105">The technique works by temporarily copying frequently accessed data from a backend data store to *fast storage* that's located closer to the application.</span></span> <span data-ttu-id="c1585-106">Buforowanie jest często implementowane, gdzie...</span><span class="sxs-lookup"><span data-stu-id="c1585-106">Caching is often implemented where...</span></span>

- <span data-ttu-id="c1585-107">Dane pozostają względnie statyczne.</span><span class="sxs-lookup"><span data-stu-id="c1585-107">Data remains relatively static.</span></span>
- <span data-ttu-id="c1585-108">Dostęp do danych jest powolny, szczególnie w porównaniu z szybkością pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="c1585-108">Data access is slow, especially compared to the speed of the cache.</span></span>
- <span data-ttu-id="c1585-109">Dane są uzależnione od wysokiego poziomu rywalizacji.</span><span class="sxs-lookup"><span data-stu-id="c1585-109">Data is subject to high levels of contention.</span></span>

## <a name="why"></a><span data-ttu-id="c1585-110">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="c1585-110">Why?</span></span>

<span data-ttu-id="c1585-111">Zgodnie z opisem w [wytycznych dotyczących buforowania firmy Microsoft](https://docs.microsoft.com/azure/architecture/best-practices/caching)buforowanie może zwiększyć wydajność, skalowalność i dostępność dla poszczególnych mikrousług i całego systemu.</span><span class="sxs-lookup"><span data-stu-id="c1585-111">As discussed in the [Microsoft caching guidance](https://docs.microsoft.com/azure/architecture/best-practices/caching), caching can increase performance, scalability, and availability for individual microservices and the system as a whole.</span></span> <span data-ttu-id="c1585-112">Zmniejsza to opóźnienia i rywalizację o obsługę dużych ilości współbieżnych żądań do magazynu danych.</span><span class="sxs-lookup"><span data-stu-id="c1585-112">It reduces the latency and contention of handling large volumes of concurrent requests to a data store.</span></span> <span data-ttu-id="c1585-113">W miarę jak ilość danych i liczba użytkowników zwiększają się, tym większe korzyści z buforowania.</span><span class="sxs-lookup"><span data-stu-id="c1585-113">As data volume and the number of users increase, the greater the benefits of caching become.</span></span>

<span data-ttu-id="c1585-114">Buforowanie jest najbardziej efektywne, gdy klient wielokrotnie odczytuje dane, które są niezmienne lub rzadko ulegają zmianom.</span><span class="sxs-lookup"><span data-stu-id="c1585-114">Caching is most effective when a client repeatedly reads data that is immutable or that changes infrequently.</span></span> <span data-ttu-id="c1585-115">Przykłady zawierają informacje referencyjne, takie jak informacje o produkcie i cenach lub udostępnione zasoby statyczne, które są kosztowne do skonstruowania.</span><span class="sxs-lookup"><span data-stu-id="c1585-115">Examples include reference information such as product and pricing information, or shared static resources that are costly to construct.</span></span>

<span data-ttu-id="c1585-116">Chociaż mikrousługi powinny być bezstanowe, rozproszona pamięć podręczna może obsługiwać współbieżny dostęp do danych stanu sesji, gdy jest to absolutnie wymagane.</span><span class="sxs-lookup"><span data-stu-id="c1585-116">While microservices should be stateless, a distributed cache can support concurrent access to session state data when absolutely required.</span></span>

<span data-ttu-id="c1585-117">Należy również rozważyć buforowanie, aby uniknąć powtarzających się obliczeń.</span><span class="sxs-lookup"><span data-stu-id="c1585-117">Also consider caching to avoid repetitive computations.</span></span> <span data-ttu-id="c1585-118">Jeśli operacja przekształca dane lub wykonuje skomplikowane obliczenia, Buforuj wynik dla kolejnych żądań.</span><span class="sxs-lookup"><span data-stu-id="c1585-118">If an operation transforms data or performs a complicated calculation, cache the result for subsequent requests.</span></span>

## <a name="caching-architecture"></a><span data-ttu-id="c1585-119">Architektura buforowania</span><span class="sxs-lookup"><span data-stu-id="c1585-119">Caching architecture</span></span>

<span data-ttu-id="c1585-120">Natywne aplikacje w chmurze zwykle implementują rozproszoną architekturę pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="c1585-120">Cloud native applications typically implement a distributed caching architecture.</span></span> <span data-ttu-id="c1585-121">Pamięć podręczna jest hostowana jako usługa do [tworzenia kopii zapasowych](./definition.md#backing-services)oparta na chmurze, oddzielona od mikrousług.</span><span class="sxs-lookup"><span data-stu-id="c1585-121">The cache is hosted as a cloud-based [backing service](./definition.md#backing-services), separate from the microservices.</span></span> <span data-ttu-id="c1585-122">Na rysunku 5-20 przedstawiono architekturę.</span><span class="sxs-lookup"><span data-stu-id="c1585-122">Figure 5-20 shows the architecture.</span></span>

![Buforowanie w natywnej aplikacji w chmurze](media/caching-in-a-cloud-native-app.png)

<span data-ttu-id="c1585-124">**Rysunek 5-19**: buforowanie w natywnej aplikacji w chmurze</span><span class="sxs-lookup"><span data-stu-id="c1585-124">**Figure 5-19**: Caching in a cloud native app</span></span>

<span data-ttu-id="c1585-125">Na poprzedniej ilustracji należy zauważyć, jak pamięć podręczna jest niezależna i współdzielona przez mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="c1585-125">In the previous figure, note how the cache is independent of and shared by the microservices.</span></span> <span data-ttu-id="c1585-126">W tym scenariuszu pamięć podręczna jest wywoływana przez [bramę interfejsu API](./front-end-communication.md).</span><span class="sxs-lookup"><span data-stu-id="c1585-126">In this scenario, the cache is invoked by the [API Gateway](./front-end-communication.md).</span></span> <span data-ttu-id="c1585-127">Jak opisano w rozdziale 4, Brama służy jako fronton dla wszystkich żądań przychodzących.</span><span class="sxs-lookup"><span data-stu-id="c1585-127">As discussed in chapter 4, the gateway serves as a front end for all incoming requests.</span></span> <span data-ttu-id="c1585-128">Rozproszonej pamięci podręcznej zwiększa czas odpowiedzi systemu przez zwrócenie danych w pamięci podręcznej, jeśli to możliwe.</span><span class="sxs-lookup"><span data-stu-id="c1585-128">The distributed cache increases system responsiveness by returning cached data whenever possible.</span></span> <span data-ttu-id="c1585-129">Ponadto oddzielenie pamięci podręcznej od usług pozwala na niezależne skalowanie w górę lub w poziomie w celu spełnienia zwiększonych wymagań w zakresie ruchu.</span><span class="sxs-lookup"><span data-stu-id="c1585-129">Additionally, separating the cache from the services allows the cache to scale up or out independently to meet increased traffic demands.</span></span>

<span data-ttu-id="c1585-130">Rysunek przedstawia wspólny wzorzec buforowania znany jako wzorzec z odkładaniem do [pamięci podręcznej](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span><span class="sxs-lookup"><span data-stu-id="c1585-130">The figure presents a common caching pattern known as the [cache-aside pattern](https://docs.microsoft.com/azure/architecture/patterns/cache-aside).</span></span> <span data-ttu-id="c1585-131">W przypadku żądania przychodzącego należy najpierw wykonać zapytanie do pamięci podręcznej (krok \#1) w celu uzyskania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="c1585-131">For an incoming request, you first query the cache (step \#1) for a response.</span></span> <span data-ttu-id="c1585-132">Jeśli ta wartość zostanie znaleziona, dane są zwracane natychmiast.</span><span class="sxs-lookup"><span data-stu-id="c1585-132">If found, the data is returned immediately.</span></span> <span data-ttu-id="c1585-133">Jeśli dane nie znajdują się w pamięci podręcznej (nazywanej [chybień pamięci podręcznej](https://www.techopedia.com/definition/6308/cache-miss)), są pobierane z lokalnej bazy danych w usłudze podrzędnej (krok \#2).</span><span class="sxs-lookup"><span data-stu-id="c1585-133">If the data doesn't exist in the cache (known as a [cache miss](https://www.techopedia.com/definition/6308/cache-miss)), it's retrieved from a local database in a downstream service (step \#2).</span></span> <span data-ttu-id="c1585-134">Następnie jest on zapisywana w pamięci podręcznej w celu przyszłego żądania (krok \#3) i zwracany do obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="c1585-134">It's then written to the cache for future requests (step \#3), and returned to the caller.</span></span> <span data-ttu-id="c1585-135">Należy zwrócić uwagę na okresowe wykluczanie danych w pamięci podręcznej tak, aby system pozostały czasowo i spójny.</span><span class="sxs-lookup"><span data-stu-id="c1585-135">Care must be taken to periodically evict cached data so that the system remains timely and consistent.</span></span>

<span data-ttu-id="c1585-136">W miarę zwiększania współużytkowanej pamięci podręcznej może okazać się korzystne, aby mieć możliwość partycjonowania danych w wielu węzłach.</span><span class="sxs-lookup"><span data-stu-id="c1585-136">As a shared cache grows, it might prove beneficial to partition its data across multiple nodes.</span></span> <span data-ttu-id="c1585-137">Takie działanie może pomóc zminimalizować rywalizację i zwiększyć skalowalność.</span><span class="sxs-lookup"><span data-stu-id="c1585-137">Doing so can help minimize contention and improve scalability.</span></span> <span data-ttu-id="c1585-138">Wiele usług buforowania obsługuje możliwość dynamicznego dodawania i usuwania węzłów oraz ponownego równoważenia danych w różnych partycjach.</span><span class="sxs-lookup"><span data-stu-id="c1585-138">Many Caching services support the ability to dynamically add and remove nodes and rebalance data across partitions.</span></span> <span data-ttu-id="c1585-139">Takie podejście zwykle obejmuje klastrowanie.</span><span class="sxs-lookup"><span data-stu-id="c1585-139">This approach typically involves clustering.</span></span> <span data-ttu-id="c1585-140">Klastrowanie udostępnia kolekcję węzłów federacyjnych jako bezproblemową, pojedynczą pamięć podręczną.</span><span class="sxs-lookup"><span data-stu-id="c1585-140">Clustering exposes a collection of federated nodes as a seamless, single cache.</span></span> <span data-ttu-id="c1585-141">Wewnętrznie dane są jednak dystrybuowane między węzłami w ramach wstępnie zdefiniowanej strategii dystrybucji, która równoważy obciążenie.</span><span class="sxs-lookup"><span data-stu-id="c1585-141">Internally, however, the data is dispersed across the nodes following a predefined distribution strategy that balances the load evenly.</span></span>

## <a name="azure-cache-for-redis"></a><span data-ttu-id="c1585-142">Azure Cache for Redis</span><span class="sxs-lookup"><span data-stu-id="c1585-142">Azure Cache for Redis</span></span>

<span data-ttu-id="c1585-143">[Pamięć podręczna systemu Azure dla usługi Redis](https://azure.microsoft.com/services/cache/) to bezpieczna usługa do buforowania danych i przesyłania komunikatów, która jest w pełni zarządzana przez firmę Microsoft.</span><span class="sxs-lookup"><span data-stu-id="c1585-143">[Azure Cache for Redis](https://azure.microsoft.com/services/cache/) is a secure data caching and messaging broker service, fully managed by Microsoft.</span></span> <span data-ttu-id="c1585-144">Używana jako oferta platformy jako usługi (PaaS), zapewnia wysoką przepływność i dostęp do danych o małym opóźnieniu.</span><span class="sxs-lookup"><span data-stu-id="c1585-144">Consumed as a Platform as a Service (PaaS) offering, it provides high throughput and low-latency access to data.</span></span> <span data-ttu-id="c1585-145">Usługa jest dostępna dla każdej aplikacji w ramach platformy Azure lub poza nią.</span><span class="sxs-lookup"><span data-stu-id="c1585-145">The service is accessible to any application within or outside of Azure.</span></span>

<span data-ttu-id="c1585-146">Usługa Azure cache for Redis zarządza dostępem do serwerów Redis Open Source hostowanych w centrach danych platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="c1585-146">The Azure Cache for Redis service manages access to open-source Redis servers hosted across Azure data centers.</span></span> <span data-ttu-id="c1585-147">Usługa działa jako fasada zapewniająca zarządzanie, kontrolę dostępu i bezpieczeństwo.</span><span class="sxs-lookup"><span data-stu-id="c1585-147">The service acts as a facade providing management, access control, and security.</span></span> <span data-ttu-id="c1585-148">Usługa natywnie obsługuje bogaty zestaw struktur danych, w tym ciągów, skrótów, list i zestawów.</span><span class="sxs-lookup"><span data-stu-id="c1585-148">The service natively supports a rich set of data structures, including strings, hashes, lists, and sets.</span></span> <span data-ttu-id="c1585-149">Jeśli aplikacja korzysta już z Redis, będzie działała tak, jakby była usługą Azure cache for Redis.</span><span class="sxs-lookup"><span data-stu-id="c1585-149">If your application already uses Redis, it will work as-is with Azure Cache for Redis.</span></span>

<span data-ttu-id="c1585-150">Pamięć podręczna systemu Azure dla Redis jest większa niż prosta pamięć podręczna.</span><span class="sxs-lookup"><span data-stu-id="c1585-150">Azure Cache for Redis is more than a simple cache server.</span></span> <span data-ttu-id="c1585-151">Dział IT może obsługiwać różne scenariusze rozszerzające architekturę mikrousług:</span><span class="sxs-lookup"><span data-stu-id="c1585-151">It can support a number of scenarios to enhance a microservices architecture:</span></span>

- <span data-ttu-id="c1585-152">Magazyn danych w pamięci</span><span class="sxs-lookup"><span data-stu-id="c1585-152">An in-memory data store</span></span>
- <span data-ttu-id="c1585-153">Dystrybuowana nierelacyjna baza danych</span><span class="sxs-lookup"><span data-stu-id="c1585-153">A distributed non-relational database</span></span>
- <span data-ttu-id="c1585-154">Broker komunikatów</span><span class="sxs-lookup"><span data-stu-id="c1585-154">A message broker</span></span>
- <span data-ttu-id="c1585-155">Serwer konfiguracji lub odnajdywania</span><span class="sxs-lookup"><span data-stu-id="c1585-155">A configuration or discovery server</span></span>
  
<span data-ttu-id="c1585-156">W przypadku zaawansowanych scenariuszy kopia danych w pamięci podręcznej może być [utrwalona na dysku](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span><span class="sxs-lookup"><span data-stu-id="c1585-156">For advanced scenarios, a copy of the cached data can be [persisted to disk](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-how-to-premium-persistence).</span></span> <span data-ttu-id="c1585-157">Jeśli zdarzenie katastrofalne wyłącza zarówno podstawową, jak i pamięć podręczną repliki, pamięć podręczną jest tworzona z najnowszej migawki.</span><span class="sxs-lookup"><span data-stu-id="c1585-157">If a catastrophic event disables both the primary and replica caches, the cache is reconstructed from the most recent snapshot.</span></span>

<span data-ttu-id="c1585-158">Azure Redis Cache jest dostępny w wielu wstępnie zdefiniowanych konfiguracjach i warstwach cenowych.</span><span class="sxs-lookup"><span data-stu-id="c1585-158">Azure Redis Cache is available across a number of predefined configurations and pricing tiers.</span></span>  <span data-ttu-id="c1585-159">[Warstwa Premium](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) oferuje wiele funkcji na poziomie przedsiębiorstwa, takich jak klastrowanie, trwałość danych, replikacja geograficzna i izolacja sieci wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="c1585-159">The [Premium tier](https://docs.microsoft.com/azure/azure-cache-for-redis/cache-premium-tier-intro) features many enterprise-level features such as clustering, data persistence, geo-replication, and virtual-network isolation.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="c1585-160">[Poprzedni](relational-vs-nosql-data.md)
>[Następny](elastic-search-in-azure.md)</span><span class="sxs-lookup"><span data-stu-id="c1585-160">[Previous](relational-vs-nosql-data.md)
[Next](elastic-search-in-azure.md)</span></span>
