---
title: Konfiguracja scentralizowana
description: Centralna konfiguracja przy użyciu Azure Key Vault może ułatwić zarządzanie aplikacjami natywnymi w chmurze.
ms.date: 06/30/2019
ms.openlocfilehash: f4f495591550abccf2c64ef24cbe7620b039d8ca
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/23/2019
ms.locfileid: "71183519"
---
# <a name="centralized-configuration"></a><span data-ttu-id="2bc29-103">Konfiguracja scentralizowana</span><span class="sxs-lookup"><span data-stu-id="2bc29-103">Centralized configuration</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="2bc29-104">Aplikacje natywne w chmurze obejmują wiele innych działających usług niż tradycyjne aplikacje monolityczne o pojedynczej instancji.</span><span class="sxs-lookup"><span data-stu-id="2bc29-104">Cloud-native applications involve many more running services than traditional single-instance monolithic apps.</span></span> <span data-ttu-id="2bc29-105">Zarządzanie ustawieniami konfiguracji dla dziesiątek usług zależnych może być trudne, co oznacza, że scentralizowane magazyny konfiguracji są często zaimplementowane dla aplikacji rozproszonych.</span><span class="sxs-lookup"><span data-stu-id="2bc29-105">Managing configuration settings for dozens of interdependent services can be challenging, which is why centralized configuration stores are often implemented for distributed applications.</span></span>

<span data-ttu-id="2bc29-106">Zgodnie z opisem w [rozdziale 1](introduction.md)rekomendacje dotyczące aplikacji 12-Factor wymagają ścisłego rozdzielenia kodu i konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="2bc29-106">As discussed in [Chapter 1](introduction.md), the Twelve-Factor App recommendations require strict separation between code and configuration.</span></span> <span data-ttu-id="2bc29-107">Oznacza to, że przechowywanie ustawień konfiguracji jako stałych lub wartości literałów w kodzie jest naruszeniem.</span><span class="sxs-lookup"><span data-stu-id="2bc29-107">This means storing configuration settings as constants or literal values in code is a violation.</span></span> <span data-ttu-id="2bc29-108">To zalecenie istnieje, ponieważ ten sam kod powinien być używany w wielu środowiskach, takich jak programowanie, testowanie, przygotowanie i produkcja.</span><span class="sxs-lookup"><span data-stu-id="2bc29-108">This recommendation exists because the same code should be used across multiple environments, including development, testing, staging, and production.</span></span> <span data-ttu-id="2bc29-109">Jednak wartości konfiguracyjne mogą się różnić w zależności od tego środowiska.</span><span class="sxs-lookup"><span data-stu-id="2bc29-109">However, configuration values are likely to vary between each of these environments.</span></span> <span data-ttu-id="2bc29-110">Dlatego wartości konfiguracyjne powinny być przechowywane w samym środowisku lub środowisko powinno przechowywać poświadczenia w scentralizowanym magazynie konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="2bc29-110">So, configuration values should be stored in the environment itself, or the environment should store the credentials to a centralized configuration store.</span></span>

<span data-ttu-id="2bc29-111">Aplikacja eShopOnContainers obejmuje lokalne pliki ustawień aplikacji z każdą mikrousługą.</span><span class="sxs-lookup"><span data-stu-id="2bc29-111">The eShopOnContainers application includes local application settings files with each microservice.</span></span> <span data-ttu-id="2bc29-112">Te pliki są sprawdzane w kontroli źródła, ale nie zawierają wpisów tajnych produkcji, takich jak parametry połączenia lub klucze interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="2bc29-112">These files are checked into source control but don't include production secrets such as connection strings or API keys.</span></span> <span data-ttu-id="2bc29-113">W środowisku produkcyjnym poszczególne ustawienia mogą zostać zastąpione zmiennymi środowiskowymi dla poszczególnych usług.</span><span class="sxs-lookup"><span data-stu-id="2bc29-113">In production, individual settings may be overwritten with per-service environment variables.</span></span> <span data-ttu-id="2bc29-114">Jest to typowa procedura dla hostowanych aplikacji, ale nie zapewnia centralnego magazynu konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="2bc29-114">This is a common practice for hosted applications, but doesn't provide a central configuration store.</span></span> <span data-ttu-id="2bc29-115">Aby zapewnić obsługę scentralizowanego zarządzania ustawieniami konfiguracji, każda mikrousługa zawiera ustawienie umożliwiające przełączenie między użyciem ustawień lokalnych lub Azure Key Vault ustawień.</span><span class="sxs-lookup"><span data-stu-id="2bc29-115">To support centralized management of configuration settings, each microservice includes a setting to toggle between its use of local settings or Azure Key Vault settings.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="2bc29-116">W usłudze Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="2bc29-116">Azure Key Vault</span></span>

<span data-ttu-id="2bc29-117">Azure Key Vault zapewnia bezpieczny magazyn tokenów, haseł, certyfikatów, kluczy interfejsu API i innych poufnych wpisów tajnych.</span><span class="sxs-lookup"><span data-stu-id="2bc29-117">Azure Key Vault provides secure storage of tokens, passwords, certificates, API keys, and other sensitive secrets.</span></span> <span data-ttu-id="2bc29-118">Dostęp do Key Vault wymaga właściwego uwierzytelniania i autoryzacji wywołującego, co w przypadku mikrousług eShopOnContainers oznacza użycie kombinacji ClientId/ClientSecret.</span><span class="sxs-lookup"><span data-stu-id="2bc29-118">Access to Key Vault requires proper caller authentication and authorization, which in the case of the eShopOnContainers microservices means the use of a ClientId/ClientSecret combination.</span></span> <span data-ttu-id="2bc29-119">Nie sprawdzaj tych poświadczeń w kontroli źródła, ale zamiast tego ustaw je w środowisku aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2bc29-119">Don't check in these credentials into source control, but instead set in the application's environment.</span></span> <span data-ttu-id="2bc29-120">Bezpośredni dostęp do Key Vault z AKS można osiągnąć przy użyciu [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span><span class="sxs-lookup"><span data-stu-id="2bc29-120">Direct access to Key Vault from AKS can be achieved using [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span></span>

<span data-ttu-id="2bc29-121">W przypadku scentralizowanej konfiguracji ustawienia, które mają zastosowanie do całej aplikacji, takie jak scentralizowany punkt końcowy rejestrowania, mogą być ustawiane raz i używane przez każdą część aplikacji rozproszonej.</span><span class="sxs-lookup"><span data-stu-id="2bc29-121">With centralized configuration, settings that apply to the entire application, such as the centralized logging endpoint, can be set once and used by every part of the distributed application.</span></span> <span data-ttu-id="2bc29-122">Chociaż mikrousługi powinny być niezależne od siebie, zazwyczaj nadal są niektóre współużytkowane zależności, których szczegóły konfiguracji mogą korzystać z scentralizowanego magazynu konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="2bc29-122">Although microservices should be independent of one another, there will typically still be some shared dependencies whose configuration details can benefit from a centralized configuration store.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2bc29-123">[Poprzedni](deploy-eshoponcontainers-azure.md)
>[Następny](scale-applications.md)</span><span class="sxs-lookup"><span data-stu-id="2bc29-123">[Previous](deploy-eshoponcontainers-azure.md)
[Next](scale-applications.md)</span></span> <!-- Next Chapter -->
