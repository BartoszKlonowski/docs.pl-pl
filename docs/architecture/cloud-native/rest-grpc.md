---
title: REST i gRPC
description: Dowiedz się więcej na temat gRPC, jego roli w aplikacjach natywnych w chmurze i jak różni się od protokołu HTTP REST
author: robvet
ms.date: 09/08/2019
ms.openlocfilehash: 4c829407d494a3529d1fb9953cd3f56f73e90636
ms.sourcegitcommit: 5f236cd78cf09593c8945a7d753e0850e96a0b80
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/07/2020
ms.locfileid: "75711639"
---
# <a name="rest-and-grpc"></a><span data-ttu-id="74ebe-103">REST i gRPC</span><span class="sxs-lookup"><span data-stu-id="74ebe-103">REST and gRPC</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="74ebe-104">Do tej pory ta książka koncentruje się na komunikacji [opartej na protokole REST](https://docs.microsoft.com/azure/architecture/best-practices/api-design) .</span><span class="sxs-lookup"><span data-stu-id="74ebe-104">So far in this book, we’ve focused on [REST-based](https://docs.microsoft.com/azure/architecture/best-practices/api-design) communication.</span></span> <span data-ttu-id="74ebe-105">REST to styl architektury, który promuje współdziałanie między rozproszonymi systemami komputerowymi.</span><span class="sxs-lookup"><span data-stu-id="74ebe-105">REST is an architectural style that promotes interoperability between distributed computer systems.</span></span> <span data-ttu-id="74ebe-106">Używa modelu żądania/odpowiedzi, gdzie każda odpowiedź z serwera jest żądaniem od klienta.</span><span class="sxs-lookup"><span data-stu-id="74ebe-106">It uses a request/response model where every response from the server is to a request from the client.</span></span> <span data-ttu-id="74ebe-107">Chociaż jest to bardzo popularne, nie jest to idealne rozwiązanie dla każdego problemu.</span><span class="sxs-lookup"><span data-stu-id="74ebe-107">While widely popular, REST isn't a perfect fit for every problem.</span></span> <span data-ttu-id="74ebe-108">Nowsza Technologia komunikacji, zatytułowana gRPC, umożliwia szybkie uzyskanie popularności i przekazanie jej do świata w chmurze.</span><span class="sxs-lookup"><span data-stu-id="74ebe-108">A newer communication technology, entitled gRPC, is rapidly gaining popularity and making its way into the cloud-native world.</span></span>

## <a name="grpc"></a><span data-ttu-id="74ebe-109">gRPC</span><span class="sxs-lookup"><span data-stu-id="74ebe-109">gRPC</span></span>

<span data-ttu-id="74ebe-110">gRPC to komunikacja "open source", która pochodzi od firmy Google.</span><span class="sxs-lookup"><span data-stu-id="74ebe-110">gRPC is an open-source communication that originates from Google.</span></span> <span data-ttu-id="74ebe-111">Jest on oparty na modelu [zdalnego wywołania procedury (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) , popularnym w ramach przetwarzania rozproszonego.</span><span class="sxs-lookup"><span data-stu-id="74ebe-111">It's built upon the [remote procedure call (RPC)](https://en.wikipedia.org/wiki/Remote_procedure_call) model, popular in distributed computing.</span></span> <span data-ttu-id="74ebe-112">Zgodnie z tym modelem, lokalny program kliencki uwidacznia metodę w procesie, aby wykonać operację.</span><span class="sxs-lookup"><span data-stu-id="74ebe-112">Following this model, a local client program exposes an in-process method to execute an operation.</span></span> <span data-ttu-id="74ebe-113">W tle to wywołanie jest wywoływane na mikrousługach pozaprocesowych w sieci rozproszonej.</span><span class="sxs-lookup"><span data-stu-id="74ebe-113">Behind the scenes, that call is invoked on an out-of-process microservice across a distributed network.</span></span> <span data-ttu-id="74ebe-114">Deweloper koduje operację jako wywołanie procedury lokalnej.</span><span class="sxs-lookup"><span data-stu-id="74ebe-114">The developer codes the operation as a local procedure call.</span></span> <span data-ttu-id="74ebe-115">Bazowa platforma umożliwia podwyższenie poziomu komunikacji sieciowej, serializacji i wykonania w sieci punkt-punkt.</span><span class="sxs-lookup"><span data-stu-id="74ebe-115">The underlying platform abstracts the point-to-point networking communication, serialization, and execution.</span></span>

<span data-ttu-id="74ebe-116">gRPC to nowoczesne środowisko RPC, które jest lekkie i wysoce wydajne.</span><span class="sxs-lookup"><span data-stu-id="74ebe-116">gRPC is a modern RPC framework that is lightweight and highly performant.</span></span> <span data-ttu-id="74ebe-117">Protokół transportowy używa protokołu HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="74ebe-117">It uses HTTP/2 for its transport protocol.</span></span> <span data-ttu-id="74ebe-118">Chociaż zgodne z protokołem HTTP 1,1, usługa HTTP/2 oferuje wiele zaawansowanych możliwości:</span><span class="sxs-lookup"><span data-stu-id="74ebe-118">While compatible with HTTP 1.1, HTTP/2 features many advanced capabilities:</span></span>

- <span data-ttu-id="74ebe-119">Gdy HTTP 1,1 wysyła dane jako zwykły tekst, HTTP/2 jest protokołem binarnym.</span><span class="sxs-lookup"><span data-stu-id="74ebe-119">While HTTP 1.1 sends data as clear text, HTTP/2 is a binary protocol.</span></span> <span data-ttu-id="74ebe-120">Umożliwia ona szybsze analizowanie danych przy użyciu mniejszej ilości pamięci, zmniejsza opóźnienie sieci dzięki powiązanym ulepszeniom, a także wydajniej zarządza zasobami sieci.</span><span class="sxs-lookup"><span data-stu-id="74ebe-120">It parses data faster using less memory, reduces network latency with the related improvements to speed, and manages network resources more efficiently.</span></span>
- <span data-ttu-id="74ebe-121">Mimo że protokół HTTP 1,1 jest ograniczony do przetwarzania jednego żądania/odpowiedzi rundy w czasie, protokół HTTP/2 obsługuje multipleksowanie lub wiele żądań równoległych w ramach tego samego połączenia.</span><span class="sxs-lookup"><span data-stu-id="74ebe-121">While HTTP 1.1 is limited to processing one round-trip request/response at a time, HTTP/2 supports multiplexing, or multiple parallel requests over the same connection.</span></span>
- <span data-ttu-id="74ebe-122">Protokół HTTP/2 obsługuje komunikację w trybie pełnego dupleksu lub dwukierunkowego, w którym zarówno klient, jak i serwer mogą komunikować się w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="74ebe-122">HTTP/2 supports full-duplex, or bidirectional communication, where both client and server can communicate at the same time.</span></span> <span data-ttu-id="74ebe-123">Klient może przekazywać dane żądania w tym samym czasie, gdy serwer wysyła dane odpowiedzi z powrotem.</span><span class="sxs-lookup"><span data-stu-id="74ebe-123">The client can be uploading request data at the same time the server is sending back response data.</span></span>
- <span data-ttu-id="74ebe-124">Transmisja strumieniowa jest wbudowana w protokół HTTP/2, co oznacza, że oba żądania i odpowiedzi mogą asynchronicznie przesyłać strumieniowo duże zestawy danych.</span><span class="sxs-lookup"><span data-stu-id="74ebe-124">Streaming is built into HTTP/2 meaning that both requests and responses can asynchronously stream large data sets.</span></span>
- <span data-ttu-id="74ebe-125">Łączenie gRPC i HTTP/2 powoduje znaczne zwiększenie wydajności.</span><span class="sxs-lookup"><span data-stu-id="74ebe-125">Combining gRPC and HTTP/2, performance dramatically increases.</span></span> <span data-ttu-id="74ebe-126">W [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) sprzężeniem wydajność gRPC jest zgodna i przekracza szybkość i wydajność [powiązań NetTCP](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span><span class="sxs-lookup"><span data-stu-id="74ebe-126">In [Windows Communication Foundation (WCF)](https://docs.microsoft.com/dotnet/framework/wcf/whats-wcf) parlance, gRPC performance meets and exceeds the speed and efficiency of [NetTCP bindings](https://docs.microsoft.com/dotnet/api/system.servicemodel.nettcpbinding?view=netframework-4.8).</span></span> <span data-ttu-id="74ebe-127">Jednak w przeciwieństwie do NetTCP, gRPC nie jest ograniczone do języków firmy Microsoft, C# takich jak lub Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="74ebe-127">However, unlike NetTCP, gRPC isn't constrained to Microsoft languages such as C# or Visual Basic.</span></span>

<span data-ttu-id="74ebe-128">gRPC jest obsługiwany na większości popularnych platform, w tym Java C#,, golang i NodeJS.</span><span class="sxs-lookup"><span data-stu-id="74ebe-128">gRPC is supported across most popular platforms, including Java, C#, Golang, and NodeJS.</span></span>

## <a name="protocol-buffers"></a><span data-ttu-id="74ebe-129">Bufory protokołu</span><span class="sxs-lookup"><span data-stu-id="74ebe-129">Protocol Buffers</span></span>

<span data-ttu-id="74ebe-130">gRPC obejmuje inną technologię "open source" o nazwie [bufory protokołu](https://developers.google.com/protocol-buffers/docs/overview) lub komunikaty protobuf do wysyłania i odbierania danych.</span><span class="sxs-lookup"><span data-stu-id="74ebe-130">gRPC embraces another open-source technology called [Protocol Buffers](https://developers.google.com/protocol-buffers/docs/overview) or Protobuf messages to send and receive data.</span></span> <span data-ttu-id="74ebe-131">Podobnie jak w przypadku [kontraktu danych programu WCF](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), protobuf deserializacji dane strukturalne dla systemów do odczytu i zapisu.</span><span class="sxs-lookup"><span data-stu-id="74ebe-131">Similar to a [WCF Data Contract](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/using-data-contracts), Protobuf serializes structured data for systems to read and write.</span></span> <span data-ttu-id="74ebe-132">Zmniejsza to obciążenie, które można odczytać przez człowieka, np. XML lub JSON.</span><span class="sxs-lookup"><span data-stu-id="74ebe-132">It reduces the overhead that human-readable formats like XML or JSON incur.</span></span>

<span data-ttu-id="74ebe-133">Wiele technik serializacji obiektów odzwierciedla strukturę obiektów danych w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="74ebe-133">Many object serialization techniques reflect across the structure of data objects at run-time.</span></span> <span data-ttu-id="74ebe-134">Protobuf wymaga zdefiniowania struktury z góry w języku niezależny od Language (Language buffering Protocol).</span><span class="sxs-lookup"><span data-stu-id="74ebe-134">Protobuf requires you to define the structure up front with a platform-agnostic language (Protocol Buffer Language).</span></span> <span data-ttu-id="74ebe-135">Każda definicja jest przechowywana w pliku ". proto".</span><span class="sxs-lookup"><span data-stu-id="74ebe-135">Each definition is stored in a ".proto" file.</span></span> <span data-ttu-id="74ebe-136">Następnie przy użyciu kompilatora protobuf "Proton" generowany jest kod klienta i serwera dla dowolnej z obsługiwanych platform.</span><span class="sxs-lookup"><span data-stu-id="74ebe-136">Then using Protobuf compiler, "Proton," you generate client and server code for any of the supported platforms.</span></span> <span data-ttu-id="74ebe-137">Wygenerowany kod jest zoptymalizowany pod kątem szybkiego serializacji/deserializacji danych.</span><span class="sxs-lookup"><span data-stu-id="74ebe-137">The generated code is optimized for fast serialization/deserialization of data.</span></span> <span data-ttu-id="74ebe-138">W środowisku uruchomieniowym każdy komunikat jest opakowany w kontrakt usługi o jednoznacznie określonym typie i serializowany w standardowej reprezentacji protobuf.</span><span class="sxs-lookup"><span data-stu-id="74ebe-138">At runtime, each message is wrapped in the strongly-typed service contract and serialized in a standard Protobuf representation.</span></span>

## <a name="grpc-support-in-net"></a><span data-ttu-id="74ebe-139">Obsługa gRPC w programie .NET</span><span class="sxs-lookup"><span data-stu-id="74ebe-139">gRPC support in .NET</span></span>

<span data-ttu-id="74ebe-140">Microsoft .NET Core Framework 3,0 zawiera narzędzia i natywną obsługę gRPC.</span><span class="sxs-lookup"><span data-stu-id="74ebe-140">The Microsoft .NET Core framework 3.0 includes tooling and native support for gRPC.</span></span> <span data-ttu-id="74ebe-141">Rysunek 4-20 pokazuje szablon programu Visual Studio 2019, który tworzy szkielet projektu szkieletu gRPC dla usługi gRPC.</span><span class="sxs-lookup"><span data-stu-id="74ebe-141">Figure 4-20 shows the Visual Studio 2019 template that scaffolds a gRPC skeleton project for a gRPC service.</span></span> <span data-ttu-id="74ebe-142">Zwróć uwagę, jak platforma .NET Core obsługuje platformy Windows, Linux i macOS.</span><span class="sxs-lookup"><span data-stu-id="74ebe-142">Note how .NET Core supports the Windows, Linux, and macOS platforms.</span></span>

![Obsługa gRPC w programie Visual Studio 2019](./media/visual-studio-2019-grpc-template.png)

<span data-ttu-id="74ebe-144">**Rysunek 4-20**.</span><span class="sxs-lookup"><span data-stu-id="74ebe-144">**Figure 4-20**.</span></span> <span data-ttu-id="74ebe-145">Obsługa gRPC w programie Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="74ebe-145">gRPC support in Visual Studio 2019</span></span>

<span data-ttu-id="74ebe-146">Program .NET Core 3,0 bezproblemowo integruje gRPC z platformą, w tym Routing punktów końcowych, wbudowaną obsługę IoC i rejestrowanie.</span><span class="sxs-lookup"><span data-stu-id="74ebe-146">.NET Core 3.0 seamlessly integrates gRPC into its framework, including endpoint routing, built-in IoC support, and logging.</span></span> <span data-ttu-id="74ebe-147">Serwer sieci Web Kestrel "open source" w pełni obsługuje połączenia HTTP/2.</span><span class="sxs-lookup"><span data-stu-id="74ebe-147">The open-source Kestrel web server fully supports HTTP/2 connections.</span></span>

<span data-ttu-id="74ebe-148">Rysunek 4-21 przedstawia strukturę usługi gRPC w programie Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="74ebe-148">Figure 4-21 shows structure of a gRPC service in Visual Studio 2019.</span></span> <span data-ttu-id="74ebe-149">Zwróć uwagę, jak struktura folderów zawiera foldery dla plików PROTO i kodu usługi.</span><span class="sxs-lookup"><span data-stu-id="74ebe-149">Note how the folder structure includes folders for the proto files and service code.</span></span>

![projekt gRPC w programie Visual Studio 2019](./media/grpc-project.png  )

<span data-ttu-id="74ebe-151">**Rysunek 4-21**.</span><span class="sxs-lookup"><span data-stu-id="74ebe-151">**Figure 4-21**.</span></span> <span data-ttu-id="74ebe-152">projekt gRPC w programie Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="74ebe-152">gRPC project in Visual Studio 2019</span></span>

## <a name="grpc-usage"></a><span data-ttu-id="74ebe-153">gRPC użycie</span><span class="sxs-lookup"><span data-stu-id="74ebe-153">gRPC Usage</span></span>

<span data-ttu-id="74ebe-154">gRPC są odpowiednie dla następujących scenariuszy:</span><span class="sxs-lookup"><span data-stu-id="74ebe-154">gRPC is well suited for the following scenarios:</span></span>

- <span data-ttu-id="74ebe-155">Niska opóźnienia i komunikacja o dużej przepływności.</span><span class="sxs-lookup"><span data-stu-id="74ebe-155">Low latency and high throughput communication.</span></span> <span data-ttu-id="74ebe-156">gRPC doskonale nadaje się do lekkich mikrousług, w których wydajność jest krytyczna.</span><span class="sxs-lookup"><span data-stu-id="74ebe-156">gRPC is great for lightweight microservices where efficiency is critical.</span></span>
- <span data-ttu-id="74ebe-157">Komunikacja punkt-punkt w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="74ebe-157">Point-to-point real-time communication.</span></span> <span data-ttu-id="74ebe-158">gRPC ma doskonałą obsługę przesyłania strumieniowego dwukierunkowego.</span><span class="sxs-lookup"><span data-stu-id="74ebe-158">gRPC has excellent support for bi-directional streaming.</span></span> <span data-ttu-id="74ebe-159">usługi gRPC umożliwiają wypychanie komunikatów w czasie rzeczywistym bez sondowania.</span><span class="sxs-lookup"><span data-stu-id="74ebe-159">gRPC services can push messages in real time without polling.</span></span>
- <span data-ttu-id="74ebe-160">Środowiska Polyglot — narzędzia gRPC obsługują większość popularnych języków programistycznych, co sprawia, że jest to dobry wybór w środowiskach wielojęzycznych.</span><span class="sxs-lookup"><span data-stu-id="74ebe-160">Polyglot environments – gRPC tooling supports most popular development languages, making it a good choice for multi-language environments.</span></span>
- <span data-ttu-id="74ebe-161">Środowiska ograniczone przez sieć — komunikaty gRPC są serializowane z protobuf, formatem uproszczonego komunikatu.</span><span class="sxs-lookup"><span data-stu-id="74ebe-161">Network constrained environments – gRPC messages are serialized with Protobuf, a lightweight message format.</span></span> <span data-ttu-id="74ebe-162">Komunikat gRPC jest zawsze krótszy niż odpowiedni komunikat JSON.</span><span class="sxs-lookup"><span data-stu-id="74ebe-162">A gRPC message is always smaller than an equivalent JSON message.</span></span>

<span data-ttu-id="74ebe-163">W momencie pisania tej książki większość przeglądarek ma ograniczoną obsługę gRPC.</span><span class="sxs-lookup"><span data-stu-id="74ebe-163">At the time of writing of this book, most browsers have limited support for gRPC.</span></span> <span data-ttu-id="74ebe-164">gRPC intensywnie używa funkcji protokołu HTTP/2 i żadna przeglądarka nie zapewnia poziomu kontroli wymaganego w przypadku żądań sieci Web do obsługi klienta gRPC.</span><span class="sxs-lookup"><span data-stu-id="74ebe-164">gRPC heavily uses HTTP/2 features and no browser provides the level of control required over web requests to support a gRPC client.</span></span> <span data-ttu-id="74ebe-165">gRPC jest zazwyczaj używany do komunikacji wewnętrznej mikrousługi z mikrousługą.</span><span class="sxs-lookup"><span data-stu-id="74ebe-165">gRPC is typically used for internal microservice to microservice communication.</span></span> <span data-ttu-id="74ebe-166">Rysunek 4-22 pokazuje prosty, ale typowy wzorzec użycia.</span><span class="sxs-lookup"><span data-stu-id="74ebe-166">Figure 4-22 shows a simple, but common usage pattern.</span></span>

![Wzorce użycia gRPC](./media/grpc-usage.png)

<span data-ttu-id="74ebe-168">**Rysunek 4-22**.</span><span class="sxs-lookup"><span data-stu-id="74ebe-168">**Figure 4-22**.</span></span> <span data-ttu-id="74ebe-169">wzorce użycia gRPC</span><span class="sxs-lookup"><span data-stu-id="74ebe-169">gRPC usage patterns</span></span>

<span data-ttu-id="74ebe-170">Zwróć uwagę na powyższym rysunku, w jaki sposób wywoływany jest ruch frontonu przy użyciu protokołu HTTP, a wewnętrzna mikrousługa do mikrousług używa gRPC.</span><span class="sxs-lookup"><span data-stu-id="74ebe-170">Note in the previous figure how front-end traffic is invoked with HTTP while back-end microservice to microservice uses gRPC.</span></span>

<span data-ttu-id="74ebe-171">Patrząc na przyszłość, gRPC może odgrywać główną rolę w dethroning dominacji dla systemów natywnych w chmurze.</span><span class="sxs-lookup"><span data-stu-id="74ebe-171">Looking ahead, gRPC could play a major role in dethroning the dominance of REST for cloud-native systems.</span></span> <span data-ttu-id="74ebe-172">Zalety wydajności i łatwość programowania są zbyt dobre.</span><span class="sxs-lookup"><span data-stu-id="74ebe-172">The performance benefits and ease of development are too good to pass up.</span></span> <span data-ttu-id="74ebe-173">Jednak nie należy wprowadzać żadnych błędu, reszta będzie nadal przez długi czas.</span><span class="sxs-lookup"><span data-stu-id="74ebe-173">However, make no mistake, REST will still be around for a long time.</span></span> <span data-ttu-id="74ebe-174">Nadal są dostępne publicznie udostępniane interfejsy API i ze względu na zgodność z poprzednimi wersjami.</span><span class="sxs-lookup"><span data-stu-id="74ebe-174">It still excels for publicly exposed APIs and for backward compatibility reasons.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="74ebe-175">[Poprzedni](service-to-service-communication.md)
>[Następny](service-mesh-communication-infrastructure.md)</span><span class="sxs-lookup"><span data-stu-id="74ebe-175">[Previous](service-to-service-communication.md)
[Next](service-mesh-communication-infrastructure.md)</span></span>
