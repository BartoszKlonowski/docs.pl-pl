---
title: gRPC Streaming Services a powtórzone pola — gRPC dla deweloperów WCF
description: Porównywanie powtarzających się pól z usługami przesyłania strumieniowego jako metody przekazywania kolekcji danych za pomocą gRPC.
author: markrendle
ms.date: 09/02/2019
ms.openlocfilehash: 7dc3c8f5bf2efc304da7d50661ba47db500e67a0
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/23/2019
ms.locfileid: "71184072"
---
# <a name="grpc-streaming-services-versus-repeated-fields"></a><span data-ttu-id="332e4-103">gRPC Streaming Services a powtórzone pola</span><span class="sxs-lookup"><span data-stu-id="332e4-103">gRPC streaming services versus repeated fields</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="332e4-104">usługi gRPC zapewniają dwa sposoby zwracania zestawów danych lub listy obiektów.</span><span class="sxs-lookup"><span data-stu-id="332e4-104">gRPC services provide two ways of returning datasets, or lists of objects.</span></span> <span data-ttu-id="332e4-105">Specyfikacja Message buffers używa `repeated` słowa kluczowego do deklarowania list lub tablic komunikatów w innym komunikacie.</span><span class="sxs-lookup"><span data-stu-id="332e4-105">The Protocol Buffers message specification uses the `repeated` keyword for declaring lists or arrays of messages within another message.</span></span> <span data-ttu-id="332e4-106">Specyfikacja usługi gRPC używa `stream` słowa kluczowego do deklarowania długotrwałego, trwałego połączenia, za pośrednictwem którego są wysyłane wiele komunikatów, i może być przetwarzane pojedynczo.</span><span class="sxs-lookup"><span data-stu-id="332e4-106">The gRPC service specification uses the `stream` keyword to declare a long-running persistent connection over which multiple messages are sent, and can be processed, individually.</span></span> <span data-ttu-id="332e4-107">Ta `stream` funkcja może być również używana do długotrwałych danych czasowych, takich jak powiadomienia lub komunikaty dziennika, ale ten rozdział będzie rozważał użycie do zwrócenia jednego zestawu danych.</span><span class="sxs-lookup"><span data-stu-id="332e4-107">The `stream` feature can also be used for long-running temporal data such as notifications or log messages, but this chapter will consider its use for returning a single dataset.</span></span>

<span data-ttu-id="332e4-108">Którego należy użyć, zależy od różnych czynników, takich jak całkowity rozmiar zestawu danych, czas potrzebny do utworzenia zestawu danych na końcu klienta lub serwera oraz czy konsument zestawu danych może zacząć od razu po udostępnieniu pierwszego elementu lub potrzebuje kompletnego zestawu danych, aby wykonać wszelkie użyteczne.</span><span class="sxs-lookup"><span data-stu-id="332e4-108">Which you should use depends on various factors, such as the overall size of the dataset, the time it took to create the dataset at either the client or server end, and whether the consumer of the dataset can start acting on it as soon as the first item is available, or needs the complete dataset to do anything useful.</span></span>

## <a name="when-to-use-repeated-fields"></a><span data-ttu-id="332e4-109">Kiedy używać `repeated` pól</span><span class="sxs-lookup"><span data-stu-id="332e4-109">When to use `repeated` fields</span></span>

<span data-ttu-id="332e4-110">Dla dowolnego zestawu danych, który jest ograniczony do rozmiaru i który może zostać wygenerowany w całości w krótkim czasie — powiedzmy, poniżej jednej sekundy — należy użyć `repeated` pola w zwykłym komunikacie protobuf.</span><span class="sxs-lookup"><span data-stu-id="332e4-110">For any dataset that is constrained in size and that can be generated in its entirety in a short time—say, under one second—you should use a `repeated` field in a regular Protobuf message.</span></span> <span data-ttu-id="332e4-111">Na przykład w systemie handlu elektronicznego, aby utworzyć listę elementów w ramach zamówienia, prawdopodobnie szybko i lista nie będzie bardzo duża.</span><span class="sxs-lookup"><span data-stu-id="332e4-111">For example, in an e-commerce system, to build a list of items within an order is probably quick and the list won't be very large.</span></span> <span data-ttu-id="332e4-112">Zwracanie pojedynczej wiadomości z `repeated` polem jest rzędem krótszym niż użycie a i jest `stream` mniejsze niż obciążenie sieci.</span><span class="sxs-lookup"><span data-stu-id="332e4-112">Returning a single message with a `repeated` field is an order of magnitude faster than using a `stream` and incurs less network overhead.</span></span>

<span data-ttu-id="332e4-113">Jeśli klient potrzebuje wszystkich danych przed rozpoczęciem przetwarzania, a zestaw danych jest wystarczająco mały, aby utworzyć w pamięci, należy rozważyć użycie `repeated` pola, nawet jeśli rzeczywiste Tworzenie zestawu danych w pamięci na serwerze jest wolniejsze.</span><span class="sxs-lookup"><span data-stu-id="332e4-113">If the client needs all the data before starting to process it and the dataset is small enough to construct in memory, then consider using a `repeated` field even if the actual creation of the dataset in memory on the server is slower.</span></span>

## <a name="when-to-use-stream-methods"></a><span data-ttu-id="332e4-114">Kiedy należy używać `stream` metod</span><span class="sxs-lookup"><span data-stu-id="332e4-114">When to use `stream` methods</span></span>

<span data-ttu-id="332e4-115">Zestawy danych, w których obiekty komunikatów są potencjalnie bardzo duże, są najlepiej przesłane przy użyciu żądań przesyłania strumieniowego lub odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="332e4-115">Datasets where the message objects are potentially very large are best transferred using streaming requests or responses.</span></span> <span data-ttu-id="332e4-116">Bardziej wydajne jest konstruowanie dużego obiektu w pamięci, zapisanie go w sieci, a następnie zwolnienie zasobów.</span><span class="sxs-lookup"><span data-stu-id="332e4-116">It's more efficient to construct a large object in memory, write it to the network and then free up the resources.</span></span> <span data-ttu-id="332e4-117">Takie podejście poprawi skalowalność usługi.</span><span class="sxs-lookup"><span data-stu-id="332e4-117">This approach will improve the scalability of your service.</span></span>

<span data-ttu-id="332e4-118">Podobnie zestawy danych o nieograniczonej wielkości powinny być wysyłane za pośrednictwem strumieni, aby uniknąć wyczerpania pamięci podczas konstruowania ich.</span><span class="sxs-lookup"><span data-stu-id="332e4-118">Similarly, datasets of unconstrained size should be sent over streams to avoid running out of memory while constructing them.</span></span>

<span data-ttu-id="332e4-119">W przypadku zestawów danych, w których poszczególne elementy mogą być przetwarzane oddzielnie przez konsumenta, należy rozważyć użycie strumienia, jeśli oznacza to, że ten postęp może być wskazany użytkownikowi końcowemu.</span><span class="sxs-lookup"><span data-stu-id="332e4-119">For datasets where each individual item can be processed separately by the consumer, you should consider using a stream if it means that progress can be indicated to the end user.</span></span> <span data-ttu-id="332e4-120">Może to poprawić pozorny czas odpowiedzi aplikacji, chociaż powinna być zrównoważona względem ogólnej wydajności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="332e4-120">This could improve the apparent responsiveness of an application, although this should be balanced against the overall performance of the application.</span></span>

<span data-ttu-id="332e4-121">Innym scenariuszem, w którym strumienie mogą być przydatne, jest to, że komunikat jest przetwarzany przez wiele usług.</span><span class="sxs-lookup"><span data-stu-id="332e4-121">Another scenario where streams can be useful is where a message is being processed across multiple services.</span></span> <span data-ttu-id="332e4-122">Jeśli każda usługa w łańcuchu zwraca strumień, usługa terminala (czyli Ostatnia z nich w łańcuchu) może rozpocząć Zwracanie komunikatów, które mogą być przetwarzane i przekazywać z powrotem do pierwotnego obiektu żądającego, co może spowodować zwrócenie strumienia lub agregowanie daje w wyniku pojedynczy komunikat odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="332e4-122">If each service in a chain returns a stream, then the terminal service (that is, the last one in the chain) can start returning messages that can be processed and passed back along the chain to the original requestor, which can either return a stream or aggregate the results into a single response message.</span></span> <span data-ttu-id="332e4-123">Takie podejście pozwala sobie dobrze na wzorce, takie jak mapa/zmniejszenie.</span><span class="sxs-lookup"><span data-stu-id="332e4-123">This approach lends itself well to patterns like Map/Reduce.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="332e4-124">[Poprzedni](migrate-duplex-services.md)
>[Następny](client-libraries.md)</span><span class="sxs-lookup"><span data-stu-id="332e4-124">[Previous](migrate-duplex-services.md)
[Next](client-libraries.md)</span></span>
