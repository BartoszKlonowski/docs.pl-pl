---
title: Migrowanie nowoczesnych aplikacji klasycznych
description: Wszystko, czego potrzebujesz, aby poznać proces migracji nowoczesnych aplikacji klasycznych.
ms.date: 05/12/2020
ms.openlocfilehash: a015b266dc5c36fcef38dad04b9f4f048ee5906a
ms.sourcegitcommit: b16c00371ea06398859ecd157defc81301c9070f
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/05/2020
ms.locfileid: "84446918"
---
# <a name="migrating-modern-desktop-applications"></a><span data-ttu-id="f5c04-103">Migrowanie nowoczesnych aplikacji klasycznych</span><span class="sxs-lookup"><span data-stu-id="f5c04-103">Migrating Modern Desktop applications</span></span>

<span data-ttu-id="f5c04-104">W tym rozdziale poznasz najczęstsze problemy i wyzwania, które można wykorzystać podczas migrowania istniejącej aplikacji z .NET Framework do platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-104">In this chapter, we're exploring the most common issues and challenges you can face when migrating an existing application from .NET Framework to .NET Core.</span></span>

<span data-ttu-id="f5c04-105">Złożona aplikacja klasyczna nie działa w izolacji i wymaga pewnego rodzaju interakcji z podsystemami, które mogą znajdować się na komputerze lokalnym lub na serwerze zdalnym.</span><span class="sxs-lookup"><span data-stu-id="f5c04-105">A complex desktop application doesn't work in isolation and needs some kind of interaction with subsystems that may reside on the local machine or on a remote server.</span></span> <span data-ttu-id="f5c04-106">Prawdopodobnie będzie potrzebny pewien rodzaj bazy danych do łączenia się jako trwałość magazynu lokalnego lub zdalnego.</span><span class="sxs-lookup"><span data-stu-id="f5c04-106">It will probably need some kind of database to connect as a persistence storage either locally or remotely.</span></span> <span data-ttu-id="f5c04-107">Dzięki wykorzystaniu architektur internetowych i opartych na usługach często aplikacja jest połączona z niektórymi powiązanymi usługami na serwerze zdalnym lub w chmurze.</span><span class="sxs-lookup"><span data-stu-id="f5c04-107">With the raise of Internet and service-oriented architectures, it's common to have your application connected to some sort of service residing on a remote server or in the cloud.</span></span> <span data-ttu-id="f5c04-108">Może być konieczne uzyskanie dostępu do systemu plików komputera w celu zaimplementowania niektórych funkcji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-108">You may need to access the machine file system to implement some functionality.</span></span> <span data-ttu-id="f5c04-109">Alternatywnie, może być używana funkcja, która znajduje się wewnątrz obiektu COM poza aplikacją, co jest typowym scenariuszem, jeśli na przykład integrujesz zestawy pakietu Office w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-109">Alternatively, maybe you're using a piece of functionality that resides inside a COM object outside your application, which is a common scenario if, for example, you're integrating Office assemblies in your app.</span></span>

<span data-ttu-id="f5c04-110">Oprócz tego istnieją różnice w powierzchni interfejsu API, które są udostępniane przez .NET Framework i .NET Core, a niektóre funkcje, które są dostępne w .NET Framework nie są dostępne w programie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-110">Besides, there are differences in the API surface that is exposed by .NET Framework and .NET Core, and some features that are available on .NET Framework aren't available on .NET Core.</span></span> <span data-ttu-id="f5c04-111">W związku z tym ważne jest, aby znać i wziąć pod uwagę podczas planowania migracji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-111">So, it's important for you to know and take them into account when planning a migration.</span></span>

## <a name="configuration-files"></a><span data-ttu-id="f5c04-112">Pliki konfiguracji</span><span class="sxs-lookup"><span data-stu-id="f5c04-112">Configuration files</span></span>

<span data-ttu-id="f5c04-113">Pliki konfiguracji oferują możliwość przechowywania zestawów właściwości, które są odczytywane w czasie wykonywania i wpływają na zachowanie naszych aplikacji, takich jak lokalizowanie bazy danych lub ile razy wykonać pętlę.</span><span class="sxs-lookup"><span data-stu-id="f5c04-113">Configuration files offer the possibility to store sets of properties that are read at run time and affect the behavior of our apps, such as where to locate a database or how many times to execute a loop.</span></span> <span data-ttu-id="f5c04-114">Estetyki tej techniki polega na modyfikacji niektórych aspektów aplikacji bez konieczności firmy Recode i ponownego kompilowania.</span><span class="sxs-lookup"><span data-stu-id="f5c04-114">The beauty of this technique is that you can modify some aspects of the application without the need to recode and recompile.</span></span> <span data-ttu-id="f5c04-115">Jest to przydatne, gdy na przykład ten sam kod aplikacji jest uruchamiany w środowisku programistycznym z określonym zestawem wartości konfiguracyjnych i w produkcji z inną.</span><span class="sxs-lookup"><span data-stu-id="f5c04-115">This comes in handy when, for example, the same app code runs on a development environment with a certain set of configuration values and in production with a different one.</span></span>

### <a name="configuration-on-net-framework"></a><span data-ttu-id="f5c04-116">Konfiguracja na .NET Framework</span><span class="sxs-lookup"><span data-stu-id="f5c04-116">Configuration on .NET Framework</span></span>

<span data-ttu-id="f5c04-117">Jeśli masz działającą .NET Frameworkową aplikację klasyczną, prawdopodobnie masz dostęp do pliku *App. config* za pośrednictwem <xref:System.Configuration.AppSettingsSection> klasy z `System.Configuration` przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="f5c04-117">If you have a working .NET Framework desktop application, chances are you have an *app.config* file accessed through the <xref:System.Configuration.AppSettingsSection> class from the `System.Configuration` namespace.</span></span>

<span data-ttu-id="f5c04-118">W ramach infrastruktury .NET Framework istnieje hierarchia plików konfiguracji, które dziedziczą właściwości z obiektów nadrzędnych.</span><span class="sxs-lookup"><span data-stu-id="f5c04-118">Within the .NET Framework infrastructure, there's a hierarchy of configuration files that inherit properties from its parents.</span></span> <span data-ttu-id="f5c04-119">Można znaleźć plik *Machine. config* , który definiuje wiele właściwości i sekcji konfiguracyjnych, które mogą być używane lub zastępowane w dowolnym pliku konfiguracji podrzędnej.</span><span class="sxs-lookup"><span data-stu-id="f5c04-119">You can find a *machine.config* file that defines many properties and configuration sections that can be used or overridden in any descendant configuration file.</span></span>

### <a name="configuration-on-net-core"></a><span data-ttu-id="f5c04-120">Konfiguracja w programie .NET Core</span><span class="sxs-lookup"><span data-stu-id="f5c04-120">Configuration on .NET Core</span></span>

<span data-ttu-id="f5c04-121">W świecie .NET Core nie ma pliku *Machine. config* .</span><span class="sxs-lookup"><span data-stu-id="f5c04-121">In the .NET Core world, there's no *machine.config* file.</span></span> <span data-ttu-id="f5c04-122">Mimo że można nadal używać starej <xref:System.Configuration> przestrzeni nazw, można rozważyć przełączenie do nowoczesnej <xref:Microsoft.Extensions.Configuration> , która oferuje dobrą liczbę ulepszeń.</span><span class="sxs-lookup"><span data-stu-id="f5c04-122">And even though you can continue to use the old fashioned <xref:System.Configuration> namespace, you may consider switching to the modern <xref:Microsoft.Extensions.Configuration>, which offers a good number of enhancements.</span></span>

<span data-ttu-id="f5c04-123">Interfejs API konfiguracji obsługuje koncepcję dostawcy konfiguracji, który definiuje źródło danych do użycia w celu załadowania konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-123">The configuration API supports the concept of configuration provider, which defines the data source to be used to load the configuration.</span></span> <span data-ttu-id="f5c04-124">Istnieją różne rodzaje wbudowanych dostawców, takie jak:</span><span class="sxs-lookup"><span data-stu-id="f5c04-124">There are different kinds of built-in providers, such as:</span></span>

- <span data-ttu-id="f5c04-125">Obiekty w pamięci .NET</span><span class="sxs-lookup"><span data-stu-id="f5c04-125">In-memory .NET objects</span></span>
- <span data-ttu-id="f5c04-126">Pliki INI</span><span class="sxs-lookup"><span data-stu-id="f5c04-126">INI files</span></span>
- <span data-ttu-id="f5c04-127">Pliki JSON</span><span class="sxs-lookup"><span data-stu-id="f5c04-127">JSON files</span></span>
- <span data-ttu-id="f5c04-128">Pliki XML</span><span class="sxs-lookup"><span data-stu-id="f5c04-128">XML files</span></span>
- <span data-ttu-id="f5c04-129">Argumenty wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="f5c04-129">Command-line arguments</span></span>
- <span data-ttu-id="f5c04-130">Zmienne środowiskowe</span><span class="sxs-lookup"><span data-stu-id="f5c04-130">Environment variables</span></span>
- <span data-ttu-id="f5c04-131">Zaszyfrowany magazyn użytkowników</span><span class="sxs-lookup"><span data-stu-id="f5c04-131">Encrypted user store</span></span>

 <span data-ttu-id="f5c04-132">Możesz też utworzyć własne.</span><span class="sxs-lookup"><span data-stu-id="f5c04-132">Or you can build your own.</span></span>

<span data-ttu-id="f5c04-133">Nowa konfiguracja umożliwia listę par nazwa-wartość, które mogą być pogrupowane w hierarchię wielopoziomową.</span><span class="sxs-lookup"><span data-stu-id="f5c04-133">The new configuration allows a list of name-value pairs that can be grouped into a multi-level hierarchy.</span></span> <span data-ttu-id="f5c04-134">Wszystkie przechowywane wartości są mapowane na ciąg i wbudowana obsługa powiązań, która umożliwia deserializacja ustawień w niestandardowym, starym obiekcie CLR (POCO).</span><span class="sxs-lookup"><span data-stu-id="f5c04-134">Any stored value maps to a string, and there's built-in binding support that allows you to deserialize settings into a custom plain old CLR object (POCO) object.</span></span>

<span data-ttu-id="f5c04-135"><xref:Microsoft.Extensions.Configuration.ConfigurationBuilder>Obiekt umożliwia dodanie tylu dostawców konfiguracji, które mogą być potrzebne dla aplikacji, przy użyciu reguły pierwszeństwa do rozwiązywania preferencji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-135">The <xref:Microsoft.Extensions.Configuration.ConfigurationBuilder> object lets you add as many configuration providers you may need for your application, using a precedence rule to resolve preference.</span></span> <span data-ttu-id="f5c04-136">W związku z tym ostatni dostawca dodany w kodzie zastąpi pozostałe.</span><span class="sxs-lookup"><span data-stu-id="f5c04-136">So, the last provider you add in your code will override the others.</span></span> <span data-ttu-id="f5c04-137">Jest to świetna funkcja zarządzania różnymi środowiskami do wykonania, ponieważ można definiować różne konfiguracje dla środowisk programistycznych, testowych i produkcyjnych oraz zarządzać nimi w ramach jednej funkcji w kodzie.</span><span class="sxs-lookup"><span data-stu-id="f5c04-137">This is a great feature for managing different environments for execution since you can define different configurations for development, testing and production environments, and manage them on a single function inside your code.</span></span>

### <a name="migrating-configuration-files"></a><span data-ttu-id="f5c04-138">Migrowanie plików konfiguracji</span><span class="sxs-lookup"><span data-stu-id="f5c04-138">Migrating Configuration files</span></span>

<span data-ttu-id="f5c04-139">Można nadal korzystać z istniejącego pliku XML App. config.</span><span class="sxs-lookup"><span data-stu-id="f5c04-139">You can continue to use your existing app.config XML file.</span></span> <span data-ttu-id="f5c04-140">Można jednak skorzystać z tej możliwości, aby przeprowadzić migrację konfiguracji w celu skorzystania z kilku ulepszeń programu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-140">However, you could take this opportunity to migrate your configuration to benefit from the several enhancements made on .NET Core.</span></span>

<span data-ttu-id="f5c04-141">Aby przeprowadzić migrację ze starego pliku *App. config* do nowej konfiguracji, należy wybrać format XML i format JSON.</span><span class="sxs-lookup"><span data-stu-id="f5c04-141">To migrate from an old-style *app.config* to a new configuration file, you should choose between an XML format and a JSON format.</span></span>

<span data-ttu-id="f5c04-142">Jeśli wybierzesz opcję XML, konwersja jest prosta.</span><span class="sxs-lookup"><span data-stu-id="f5c04-142">If you choose XML, the conversion is straightforward.</span></span> <span data-ttu-id="f5c04-143">Ponieważ zawartość jest taka sama, po prostu zmień nazwę pliku *App. config* na plik z rozszerzeniem XML.</span><span class="sxs-lookup"><span data-stu-id="f5c04-143">Since the content is the same, just rename the *app.config* file to a file with XML extension.</span></span> <span data-ttu-id="f5c04-144">Następnie Zmień kod, który odwołuje się do AppSettings, aby użyć `ConfigurationBuilder` klasy.</span><span class="sxs-lookup"><span data-stu-id="f5c04-144">Then, change the code that references AppSettings to use the `ConfigurationBuilder` class.</span></span> <span data-ttu-id="f5c04-145">Ta zmiana powinna być łatwa.</span><span class="sxs-lookup"><span data-stu-id="f5c04-145">This change should be easy.</span></span>

<span data-ttu-id="f5c04-146">Jeśli chcesz użyć formatu JSON i nie chcesz migrować ręcznie, istnieje narzędzie o nazwie [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) dostępne na platformie .NET Core, które może skonwertować plik *App. config* do pliku konfiguracji JSON.</span><span class="sxs-lookup"><span data-stu-id="f5c04-146">If you want to use a JSON format and you don't want to migrate by hand, there's a tool called [dotnet-config2json](https://www.nuget.org/packages/dotnet-config2json/) available on .NET Core that can convert an *app.config* file to a JSON configuration file.</span></span>

<span data-ttu-id="f5c04-147">W przypadku korzystania z sekcji konfiguracyjnych, które zostały zdefiniowane w pliku *Machine. config* , mogą występować również problemy.</span><span class="sxs-lookup"><span data-stu-id="f5c04-147">You may also come across some issues when using configuration sections that were defined in the *machine.config* file.</span></span> <span data-ttu-id="f5c04-148">Rozważmy na przykład następującą konfigurację:</span><span class="sxs-lookup"><span data-stu-id="f5c04-148">For example, consider the following configuration:</span></span>

```xml
<configuration>
    <system.diagnostics>
        <switches>
            <add name="General" value="4" />
        </switches>
        <trace autoflush="true" indentsize="2">
            <listeners>
                <add name="myListener"
                     type="System.Diagnostics.TextWriterTraceListener,
                           System, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
                     initializeData="MyListener.log"
                     traceOutputOptions="ProcessId, LogicalOperationStack, Timestamp, ThreadId, Callstack, DateTime" />
            </listeners>
        </trace>
    </system.diagnostics>
</configuration>
```

<span data-ttu-id="f5c04-149">Jeśli ta konfiguracja zostanie pobrana do programu .NET Core, zostanie wyświetlony wyjątek:</span><span class="sxs-lookup"><span data-stu-id="f5c04-149">If you take this configuration to a .NET Core, you'll get an exception:</span></span>

<span data-ttu-id="f5c04-150">Nierozpoznana sekcja konfiguracji system. Diagnostics</span><span class="sxs-lookup"><span data-stu-id="f5c04-150">Unrecognized configuration section system.diagnostics</span></span>

<span data-ttu-id="f5c04-151">Ten wyjątek występuje, ponieważ ta sekcja i zestaw odpowiedzialny za obsługę tej sekcji został zdefiniowany w pliku *Machine. config* , który już nie istnieje.</span><span class="sxs-lookup"><span data-stu-id="f5c04-151">This exception occurs because that section and the assembly responsible for handling that section was defined in the *machine.config* file, which now doesn't exist.</span></span>

<span data-ttu-id="f5c04-152">Aby łatwo rozwiązać ten problem, można skopiować definicję sekcji ze starego pliku *Machine. config* do nowej konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="f5c04-152">To easily fix the issue, you can copy the section definition from your old *machine.config* to your new configuration file:</span></span>

```xml
<configSections>
    <section name="system.diagnostics"
             type="System.Diagnostics.SystemDiagnosticsSection,
                   System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
</configSections>
```

## <a name="accessing-databases"></a><span data-ttu-id="f5c04-153">Uzyskiwanie dostępu do baz danych</span><span class="sxs-lookup"><span data-stu-id="f5c04-153">Accessing databases</span></span>

<span data-ttu-id="f5c04-154">Prawie każda aplikacja klasyczna wymaga pewnego rodzaju bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f5c04-154">Almost every desktop application needs some kind of database.</span></span> <span data-ttu-id="f5c04-155">W przypadku komputerów stacjonarnych często można znaleźć architektury klient-serwer z bezpośrednim połączeniem między aplikacją klasyczną a aparatem bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f5c04-155">For desktop, it's common to find client-server architectures with a direct connection between the desktop app and the database engine.</span></span> <span data-ttu-id="f5c04-156">Te bazy danych mogą być lokalne lub zdalne w zależności od potrzeb udostępniania informacji między różnymi użytkownikami.</span><span class="sxs-lookup"><span data-stu-id="f5c04-156">These databases can be local or remote depending on the need to share information between different users.</span></span>

<span data-ttu-id="f5c04-157">Z punktu widzenia kodu istniały wiele technologii i struktur, które umożliwiają deweloperom łączenie się z bazą danych, wykonywanie zapytań i aktualizowanie ich.</span><span class="sxs-lookup"><span data-stu-id="f5c04-157">From the code perspective, there have been many technologies and frameworks to give the developer the possibility to connect, query, and update a database.</span></span>

<span data-ttu-id="f5c04-158">Najczęstszymi przykładami bazy danych, które można znaleźć w przypadku aplikacji klasycznych systemu Windows, są Microsoft Access i Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="f5c04-158">The most common examples of database you can find when talking about Windows Desktop application are Microsoft Access and Microsoft SQL Server.</span></span> <span data-ttu-id="f5c04-159">Jeśli masz ponad 20 lat programowania doświadczenia dla pulpitu, nazwy takie jak ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ i Entity Framework będą wyglądały na dźwięk.</span><span class="sxs-lookup"><span data-stu-id="f5c04-159">If you have more than 20 years of experience programming for the desktop, names like ODBC, OLEDB, RDO, ADO, ADO.NET, LINQ, and Entity Framework will sound familiar.</span></span>

### <a name="odbc"></a><span data-ttu-id="f5c04-160">ODBC</span><span class="sxs-lookup"><span data-stu-id="f5c04-160">ODBC</span></span>

<span data-ttu-id="f5c04-161">Można nadal korzystać z ODBC na platformie .NET Core, ponieważ firma Microsoft udostępnia `System.Data.Odbc` bibliotekę zgodną z .NET Standard 2,0.</span><span class="sxs-lookup"><span data-stu-id="f5c04-161">You can continue to use ODBC on .NET Core since Microsoft is providing the `System.Data.Odbc` library compatible with .NET Standard 2.0.</span></span>

### <a name="ole-db"></a><span data-ttu-id="f5c04-162">OLE DB</span><span class="sxs-lookup"><span data-stu-id="f5c04-162">OLE DB</span></span>

<span data-ttu-id="f5c04-163">[OLE DB](https://docs.microsoft.com/previous-versions/windows/desktop/ms722784(v=vs.85))   był doskonałym sposobem na dostęp do różnych źródeł danych w jednolity sposób.</span><span class="sxs-lookup"><span data-stu-id="f5c04-163">[OLE DB](https://docs.microsoft.com/previous-versions/windows/desktop/ms722784(v=vs.85)) has been a great way to access various data sources in a uniform manner.</span></span> <span data-ttu-id="f5c04-164">Jednak była oparta na modelu COM, który jest technologią tylko dla systemu Windows i dlatego nie jest najlepszym rozwiązaniem dla technologii międzyplatformowych, takich jak .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-164">But it was based on COM, which is a Windows-only technology, and as such wasn't the best fit for a cross-platform technology such as .NET Core.</span></span> <span data-ttu-id="f5c04-165">Jest on również nieobsługiwany w SQL Server wersji 2014 i nowszych.</span><span class="sxs-lookup"><span data-stu-id="f5c04-165">It's also unsupported in SQL Server versions 2014 and later.</span></span> <span data-ttu-id="f5c04-166">Z tego powodu OLE DB nie będą obsługiwane przez platformę .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-166">For those reasons, OLE DB won't be supported by .NET Core.</span></span>

### <a name="adonet"></a><span data-ttu-id="f5c04-167">ADO.NET</span><span class="sxs-lookup"><span data-stu-id="f5c04-167">ADO.NET</span></span>

<span data-ttu-id="f5c04-168">Nadal możesz używać ADO.NET z istniejącego kodu Desktop na platformie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-168">You can still use ADO.NET from your existing desktop code on .NET Core.</span></span> <span data-ttu-id="f5c04-169">Wystarczy tylko zaktualizować niektóre pakiety NuGet.</span><span class="sxs-lookup"><span data-stu-id="f5c04-169">You just need to update some NuGet packages.</span></span>

### <a name="ef-core-vs-ef6"></a><span data-ttu-id="f5c04-170">EF Core a EF6</span><span class="sxs-lookup"><span data-stu-id="f5c04-170">EF Core vs. EF6</span></span>

<span data-ttu-id="f5c04-171">Istnieją dwie obecnie obsługiwane wersje programu Entity Framework (EF), Entity Framework 6 (EF6) i EF Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-171">There are two currently supported versions of Entity Framework (EF), Entity Framework 6 (EF6) and EF Core.</span></span>

<span data-ttu-id="f5c04-172">Najnowsza technologia wydana jako część świata .NET Framework jest Entity Framework, a 6,4 to Najnowsza wersja.</span><span class="sxs-lookup"><span data-stu-id="f5c04-172">The latest technology released as part of the .NET Framework world is Entity Framework, with 6.4 being the latest version.</span></span> <span data-ttu-id="f5c04-173">Po uruchomieniu platformy .NET Core firma Microsoft wywołała również nowy stos dostępu do danych na podstawie Entity Framework i o nazwie Entity Framework Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-173">With the launch of .NET Core, Microsoft also released a new data access stack based on Entity Framework and called Entity Framework Core.</span></span>

<span data-ttu-id="f5c04-174">Można użyć EF 6,4 i EF Core zarówno z .NET Framework, jak i .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-174">You can use EF 6.4 and EF Core from both .NET Framework and .NET Core.</span></span> <span data-ttu-id="f5c04-175">Jakie są, jakie są sterowniki decyzyjne, aby ułatwić podjęcie decyzji między tymi elementami?</span><span class="sxs-lookup"><span data-stu-id="f5c04-175">So, what are the decision drivers to help to decide between the two?</span></span>

<span data-ttu-id="f5c04-176">Dr 6,3 to pierwsza wersja EF6, która może być uruchamiana na platformie .NET Core i pracy na wielu platformach.</span><span class="sxs-lookup"><span data-stu-id="f5c04-176">EF 6.3 is the first version of EF6 that can run on .NET Core and work cross-platform.</span></span> <span data-ttu-id="f5c04-177">W rzeczywistości głównym celem tej wersji jest ułatwienie migracji istniejących aplikacji, które korzystają z EF6 do platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-177">In fact, the main goal of this release was to make it easier to migrate existing applications that use EF6 to .NET Core.</span></span>

<span data-ttu-id="f5c04-178">EF Core zaprojektowano w celu udostępnienia środowiska deweloperskiego podobnego do EF6.</span><span class="sxs-lookup"><span data-stu-id="f5c04-178">EF Core was designed to provide a developer experience similar to EF6.</span></span> <span data-ttu-id="f5c04-179">Większość interfejsów API najwyższego poziomu pozostaje taka sama, więc EF Core będą znane deweloperom, którzy korzystali z EF6.</span><span class="sxs-lookup"><span data-stu-id="f5c04-179">Most of the top-level APIs remain the same, so EF Core will feel familiar to developers who have used EF6.</span></span>

<span data-ttu-id="f5c04-180">Chociaż są zgodne, istnieją różnice w implementacji, które należy sprawdzić przed podjęciem decyzji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-180">Although compatible, there are differences on the implementation you should check before making a decision.</span></span>
<span data-ttu-id="f5c04-181">Aby uzyskać więcej informacji, zobacz [Compare EF Core & Ef6](/ef/efcore-and-ef6/).</span><span class="sxs-lookup"><span data-stu-id="f5c04-181">For more information, see [Compare EF Core & EF6](/ef/efcore-and-ef6/).</span></span>

<span data-ttu-id="f5c04-182">Zaleca się użycie EF Core, jeśli:</span><span class="sxs-lookup"><span data-stu-id="f5c04-182">The recommendation is to use EF Core if:</span></span>

* <span data-ttu-id="f5c04-183">Aplikacja wymaga możliwości platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-183">The app needs the capabilities of .NET Core.</span></span>
* <span data-ttu-id="f5c04-184">EF Core obsługuje wszystkie funkcje wymagane przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="f5c04-184">EF Core supports all of the features that the app requires.</span></span>

<span data-ttu-id="f5c04-185">Rozważ użycie EF6, jeśli są spełnione oba z następujących warunków:</span><span class="sxs-lookup"><span data-stu-id="f5c04-185">Consider using EF6 if both of the following conditions are true:</span></span>

* <span data-ttu-id="f5c04-186">Aplikacja będzie działać w systemie Windows i .NET Framework 4,0 lub nowszej.</span><span class="sxs-lookup"><span data-stu-id="f5c04-186">The app will run on Windows and .NET Framework 4.0 or later.</span></span>
* <span data-ttu-id="f5c04-187">EF6 obsługuje wszystkie funkcje wymagane przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="f5c04-187">EF6 supports all of the features that the app requires.</span></span>

### <a name="relational-databases"></a><span data-ttu-id="f5c04-188">Relacyjne bazy danych</span><span class="sxs-lookup"><span data-stu-id="f5c04-188">Relational databases</span></span>

#### <a name="sql-server"></a><span data-ttu-id="f5c04-189">SQL Server</span><span class="sxs-lookup"><span data-stu-id="f5c04-189">SQL Server</span></span>

<span data-ttu-id="f5c04-190">SQL Server była jedną z baz danych, które można wybrać w przypadku tworzenia aplikacji dla komputerów stacjonarnych kilka lat temu.</span><span class="sxs-lookup"><span data-stu-id="f5c04-190">SQL Server has been one of the databases of choice if you were developing for the desktop some years ago.</span></span> <span data-ttu-id="f5c04-191">Korzystając z programu <xref:System.Data.SqlClient> w .NET Framework, można uzyskać dostęp do wersji SQL Server, które hermetyzują protokoły specyficzne dla bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f5c04-191">With the use of <xref:System.Data.SqlClient> in .NET Framework, you could access versions of SQL Server, which encapsulates database-specific protocols.</span></span>

<span data-ttu-id="f5c04-192">W programie .NET Core można znaleźć nową `SqlClient` klasę, w pełni zgodną z tą, która istnieje w .NET Framework, ale znajdującą się w <xref:Microsoft.Data.SqlClient> bibliotece.</span><span class="sxs-lookup"><span data-stu-id="f5c04-192">In .NET Core, you can find a new `SqlClient` class, fully compatible with the one existing in the .NET Framework but located in the <xref:Microsoft.Data.SqlClient> library.</span></span> <span data-ttu-id="f5c04-193">Wystarczy dodać odwołanie do pakietu NuGet [Microsoft. Data. SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) i wprowadzić zmiany nazw dla przestrzeni nazw, a wszystko powinno działać zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="f5c04-193">You just have to add a reference to the [Microsoft.Data.SqlClient](https://www.nuget.org/packages/Microsoft.Data.SqlClient/) NuGet package and do some renaming for the namespaces and everything should work as expected.</span></span>

#### <a name="microsoft-access"></a><span data-ttu-id="f5c04-194">Microsoft Access</span><span class="sxs-lookup"><span data-stu-id="f5c04-194">Microsoft Access</span></span>

<span data-ttu-id="f5c04-195">Program Microsoft Access został użyty przez lata w przypadku, gdy zaawansowane i bardziej skalowalne SQL Server nie były jeszcze wymagały.</span><span class="sxs-lookup"><span data-stu-id="f5c04-195">Microsoft Access has been used for years when the sophisticated and more scalable SQL Server wasn't needed.</span></span> <span data-ttu-id="f5c04-196">Nadal możesz połączyć się z programem Microsoft Access przy użyciu <xref:System.Data.Odbc> biblioteki.</span><span class="sxs-lookup"><span data-stu-id="f5c04-196">You can still connect to Microsoft Access using the <xref:System.Data.Odbc> library.</span></span>

## <a name="consuming-services"></a><span data-ttu-id="f5c04-197">Korzystanie z usług</span><span class="sxs-lookup"><span data-stu-id="f5c04-197">Consuming services</span></span>

<span data-ttu-id="f5c04-198">W przypadku podniesienia architektury zorientowanej na usługę aplikacje klasyczne zaczęły rozwijać się z modelu klient-serwer do podejścia trójwymiarowego.</span><span class="sxs-lookup"><span data-stu-id="f5c04-198">With the raise of service-oriented architectures, desktop applications began to evolve from a client-server model to the three-layer approach.</span></span> <span data-ttu-id="f5c04-199">W podejściu klient-serwer jest nawiązywane bezpośrednie połączenie z bazą danych z klienta utrzymującego logikę biznesową zwykle wewnątrz pojedynczego pliku EXE.</span><span class="sxs-lookup"><span data-stu-id="f5c04-199">In the client-server approach, a direct database connection is established from the client holding the business logic usually inside a single EXE file.</span></span> <span data-ttu-id="f5c04-200">Z drugiej strony podejście do warstwy pośredniej, która implementuje logikę biznesową i dostęp do bazy danych, pozwala na lepsze zabezpieczenia, skalowalność i ponowne wykorzystywanie.</span><span class="sxs-lookup"><span data-stu-id="f5c04-200">On the other hand, the three-layer approach establishes an intermediate service layer implementing business logic and database access allowing for better security, scalability, and reusability.</span></span> <span data-ttu-id="f5c04-201">Zamiast bezpośrednio pracować z zestawami danych, podejście warstwy opiera się na zestawie usług implementujących kontrakty i typy obiektów jako sposób implementacji transferu danych.</span><span class="sxs-lookup"><span data-stu-id="f5c04-201">Instead of working directly with datasets of data, the layer approach relies in a set of services implementing contracts and types objects as a way to implement data transfer.</span></span>

<span data-ttu-id="f5c04-202">Jeśli masz aplikację klasyczną przy użyciu usługi WCF i chcesz przeprowadzić migrację do platformy .NET Core, weź pod uwagę pewne zagadnienia.</span><span class="sxs-lookup"><span data-stu-id="f5c04-202">If you have a desktop application using a WCF service and you want to migrate it to .NET Core, there are some things to consider.</span></span>

<span data-ttu-id="f5c04-203">Pierwszym krokiem jest rozwiązanie konfiguracji w celu uzyskania dostępu do usługi.</span><span class="sxs-lookup"><span data-stu-id="f5c04-203">The first thing is how to resolve the configuration to access the service.</span></span> <span data-ttu-id="f5c04-204">Ponieważ konfiguracja różni się od platformy .NET Core, musisz wprowadzić pewne aktualizacje w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-204">Because the configuration is different on .NET Core, you'll need to make some updates in your configuration file.</span></span>

<span data-ttu-id="f5c04-205">Po drugie należy ponownie wygenerować klienta usługi przy użyciu nowych narzędzi dostępnych w programie Visual Studio 2019.</span><span class="sxs-lookup"><span data-stu-id="f5c04-205">Second, you'll need to regenerate the service client with the new tools present on Visual Studio 2019.</span></span> <span data-ttu-id="f5c04-206">W tym kroku należy rozważyć aktywację generacji operacji synchronicznych, aby klient był zgodny z istniejącym kodem.</span><span class="sxs-lookup"><span data-stu-id="f5c04-206">In this step, you must consider activating the generation of the synchronous operations to make the client compatible with your existing code.</span></span>

<span data-ttu-id="f5c04-207">Po zakończeniu migracji, jeśli okaże się, że istnieją biblioteki, których nie ma w oprogramowaniu .NET Core, można dodać odwołanie do pakietu NuGet [Microsoft. Windows. Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) i sprawdzić, czy brakuje w nim funkcji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-207">After the migration, if you find that there are libraries you need that aren't present on .NET Core, you can add a reference to the [Microsoft.Windows.Compatibility](https://www.nuget.org/packages/Microsoft.Windows.Compatibility) NuGet package and see if the missing functions are there.</span></span>

<span data-ttu-id="f5c04-208">Jeśli używasz <xref:System.Net.WebRequest> klasy do wykonywania wywołań usługi sieci Web, możesz znaleźć pewne różnice w oprogramowaniu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-208">If you're using the <xref:System.Net.WebRequest> class to perform web service calls, you may find some differences on .NET Core.</span></span> <span data-ttu-id="f5c04-209">Zaleca się użycie zamiast tego systemu .NET. http. HttpClient.</span><span class="sxs-lookup"><span data-stu-id="f5c04-209">The recommendation is to use the System.Net.Http.HttpClient instead.</span></span>

## <a name="consuming-a-com-object"></a><span data-ttu-id="f5c04-210">Zużywanie obiektu COM</span><span class="sxs-lookup"><span data-stu-id="f5c04-210">Consuming a COM Object</span></span>

<span data-ttu-id="f5c04-211">Obecnie nie ma możliwości dodania odwołania do obiektu COM z programu Visual Studio 2019 do użycia z platformą .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-211">Currently, there's no way to add a reference to a COM object from Visual Studio 2019 to use with .NET Core.</span></span> <span data-ttu-id="f5c04-212">Dlatego trzeba ręcznie zmodyfikować plik projektu.</span><span class="sxs-lookup"><span data-stu-id="f5c04-212">So, you have to manually modify the project file.</span></span>

<span data-ttu-id="f5c04-213">Wstaw `COMReference` strukturę wewnątrz pliku projektu, jak w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="f5c04-213">Insert a `COMReference` structure inside the project file like in the following example:</span></span>

```xml
<ItemGroup>
    <COMReference Include="MSHTML">
        <Guid>{3050F1C5-98B5-11CF-BB82-00AA00BDCE0B}\</Guid>
        <VersionMajor>4</VersionMajor>
        <VersionMinor>0</VersionMinor>
        <Lcid>0</Lcid>
        <WrapperTool>primary</WrapperTool>
        <Isolated>false</Isolated>
    </COMReference>
</ItemGroup>
```

## <a name="more-things-to-consider"></a><span data-ttu-id="f5c04-214">Więcej rzeczy do rozważenia</span><span class="sxs-lookup"><span data-stu-id="f5c04-214">More things to consider</span></span>

<span data-ttu-id="f5c04-215">Niektóre technologie dostępne dla bibliotek .NET Framework nie są dostępne dla platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-215">Several technologies available to .NET Framework libraries aren't available for .NET Core.</span></span> <span data-ttu-id="f5c04-216">Jeśli Twój kod opiera się na niektórych z tych technologii, weź pod uwagę alternatywne podejścia opisane w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-216">If your code relies on some of these technologies, consider the alternative approaches outlined in this section.</span></span>

<span data-ttu-id="f5c04-217">[Pakiet zgodności systemu Windows](../../core/porting/windows-compat-pack.md) zapewnia dostęp do interfejsów API, które były wcześniej dostępne tylko dla .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="f5c04-217">The [Windows Compatibility Pack](../../core/porting/windows-compat-pack.md) provides access to APIs that were previously available only for .NET Framework.</span></span> <span data-ttu-id="f5c04-218">Może być używany w projektach .NET Core i .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="f5c04-218">It can be used on .NET Core and .NET Standard projects.</span></span>

<span data-ttu-id="f5c04-219">Więcej informacji na temat zgodności interfejsu API można znaleźć w dokumentacji dotyczącej istotnych zmian i przestarzałych/starszych interfejsów API w systemie <https://docs.microsoft.com/dotnet/core/compatibility/fx-core> .</span><span class="sxs-lookup"><span data-stu-id="f5c04-219">For more information on API compatibility, you can find documentation about breaking changes and deprecated/legacy APIs at <https://docs.microsoft.com/dotnet/core/compatibility/fx-core>.</span></span>

### <a name="appdomains"></a><span data-ttu-id="f5c04-220">Domen aplikacji</span><span class="sxs-lookup"><span data-stu-id="f5c04-220">AppDomains</span></span>

<span data-ttu-id="f5c04-221">Domeny aplikacji (AppDomains) izolują aplikacje od siebie.</span><span class="sxs-lookup"><span data-stu-id="f5c04-221">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="f5c04-222">Domeny aplikacji wymagają obsługi środowiska uruchomieniowego i są kosztowne.</span><span class="sxs-lookup"><span data-stu-id="f5c04-222">AppDomains require runtime support and are expensive.</span></span> <span data-ttu-id="f5c04-223">Tworzenie dodatkowych domen aplikacji nie jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="f5c04-223">Creating additional app domains isn't supported.</span></span> <span data-ttu-id="f5c04-224">W przypadku izolacji kodu zaleca się oddzielne procesy lub używanie kontenerów jako alternatywy.</span><span class="sxs-lookup"><span data-stu-id="f5c04-224">For code isolation, we recommend separate processes or using containers as an alternative.</span></span> <span data-ttu-id="f5c04-225">W przypadku dynamicznego ładowania zestawów zalecamy nową  <xref:System.Runtime.Loader.AssemblyLoadContext> klasę.</span><span class="sxs-lookup"><span data-stu-id="f5c04-225">For the dynamic loading of assemblies, we recommend the new <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="f5c04-226">Aby ułatwić migrację kodu z .NET Framework, środowisko .NET Core uwidacznia część powierzchni interfejsu API domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f5c04-226">To make code migration from .NET Framework easier, .NET Core exposes some of the AppDomain API surface.</span></span> <span data-ttu-id="f5c04-227">Niektóre z interfejsów API działają normalnie (na przykład  <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType> ), niektórzy członkowie nie wykonują żadnych operacji (na przykład  <xref:System.AppDomain.SetCachePath%2A> ), a niektóre z nich zgłaszają <xref:System.PlatformNotSupportedException> (na przykład  <xref:System.AppDomain.CreateDomain%2A> ).</span><span class="sxs-lookup"><span data-stu-id="f5c04-227">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span>

### <a name="remoting"></a><span data-ttu-id="f5c04-228">Komunikacji zdalnej</span><span class="sxs-lookup"><span data-stu-id="f5c04-228">Remoting</span></span>

<span data-ttu-id="f5c04-229">Komunikacja zdalna platformy .NET została użyta na potrzeby komunikacji między domenami, która nie jest już obsługiwana.</span><span class="sxs-lookup"><span data-stu-id="f5c04-229">.NET Remoting was used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="f5c04-230">Ponadto komunikacja zdalna wymaga obsługi środowiska uruchomieniowego, co jest kosztowne do utrzymania.</span><span class="sxs-lookup"><span data-stu-id="f5c04-230">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="f5c04-231">Z tego względu komunikacja zdalna .NET nie jest obsługiwana w programie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-231">For these reasons, .NET Remoting isn't supported on .NET Core.</span></span>

<span data-ttu-id="f5c04-232">W przypadku komunikacji między procesami należy wziąć pod uwagę mechanizmy komunikacji między procesami (IPC) jako alternatywę dla usług zdalnych, takich jak <xref:System.IO.Pipes?displayProperty=nameWithType> lub <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> klasy.</span><span class="sxs-lookup"><span data-stu-id="f5c04-232">For communication across processes, you should consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes?displayProperty=nameWithType> or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="f5c04-233">Na wielu maszynach Użyj rozwiązania sieciowego jako alternatywy.</span><span class="sxs-lookup"><span data-stu-id="f5c04-233">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="f5c04-234">Najlepiej używać protokołu zwykłego tekstu o niskim obciążeniu, takiego jak HTTP.</span><span class="sxs-lookup"><span data-stu-id="f5c04-234">Preferably, use a low-overhead plaintext protocol, such as HTTP.</span></span> <span data-ttu-id="f5c04-235">Serwer sieci Web Kestrel, serwer sieci Web używany przez ASP.NET Core, jest opcją w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="f5c04-235">The Kestrel web server, the web server used by ASP.NET Core, is an option here.</span></span>

### <a name="code-access-security-cas"></a><span data-ttu-id="f5c04-236">Zabezpieczenia dostępu kodu (CAS)</span><span class="sxs-lookup"><span data-stu-id="f5c04-236">Code Access Security (CAS)</span></span>

<span data-ttu-id="f5c04-237">W przypadku korzystania z trybu piaskownicy, który polega na środowisku uruchomieniowym lub środowisku, aby ograniczyć zasoby, których zarządzana aplikacja lub biblioteka jest uruchomiona, nie jest obsługiwane w programie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="f5c04-237">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, isn't supported on .NET Core.</span></span>

<span data-ttu-id="f5c04-238">Aby uruchamiać procesy z minimalnym zestawem uprawnień, należy używać granic zabezpieczeń zapewnianych przez system operacyjny, takich jak wirtualizacja, kontenery lub konta użytkowników.</span><span class="sxs-lookup"><span data-stu-id="f5c04-238">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the minimum set of privileges.</span></span>

### <a name="security-transparency"></a><span data-ttu-id="f5c04-239">Przejrzystość zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="f5c04-239">Security Transparency</span></span>

<span data-ttu-id="f5c04-240">Podobnie jak w przypadku urzędów certyfikacji, przezroczystość zabezpieczeń oddziela kod w trybie piaskownicy od krytycznego kodu zabezpieczeń w sposób deklaratywny, ale nie jest już obsługiwany jako granica zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="f5c04-240">Similar to CAS, Security Transparency separates sandboxed code from security critical code in a declarative fashion but is no longer supported as a security boundary.</span></span>

<span data-ttu-id="f5c04-241">Aby uruchamiać procesy z najmniej zestawem uprawnień, należy używać granic zabezpieczeń zapewnianych przez system operacyjny, takich jak wirtualizacja, kontenery lub konta użytkowników.</span><span class="sxs-lookup"><span data-stu-id="f5c04-241">Use security boundaries that are provided by the operating system, such as virtualization, containers, or user accounts for running processes with the least set of privileges.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="f5c04-242">[Poprzedni](whats-new-dotnet-core.md ) 
> [Dalej](windows-migration.md)</span><span class="sxs-lookup"><span data-stu-id="f5c04-242">[Previous](whats-new-dotnet-core.md )
[Next](windows-migration.md)</span></span>
