---
title: Umieszczanie aplikacji monolitycznych w kontenerze
description: Konteneryzowanie aplikacji monolitycznych, mimo że nie uotrzymasz wszystkich korzyści z architektury mikrousług, ma ważne korzyści wdrożenia, które mogą być dostarczane od razu.
ms.date: 01/30/2020
ms.openlocfilehash: 0e6f7504a91d2b1a89193471746168fc34f50956
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/14/2020
ms.locfileid: "77503288"
---
# <a name="containerizing-monolithic-applications"></a><span data-ttu-id="3c0f6-103">Umieszczanie aplikacji monolitycznych w kontenerze</span><span class="sxs-lookup"><span data-stu-id="3c0f6-103">Containerizing monolithic applications</span></span>

<span data-ttu-id="3c0f6-104">Można utworzyć jedną, monolitycznie wdrożonej aplikacji sieci web lub usługi sieci web i wdrożyć go jako kontenera.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-104">You might want to build a single, monolithically deployed web application or service and deploy it as a container.</span></span> <span data-ttu-id="3c0f6-105">Sama aplikacja może nie być wewnętrznie monolityczna, ale skonstruowana jako kilka bibliotek, komponentów, a nawet warstw (warstwa aplikacji, warstwa domeny, warstwa dostępu do danych itp.).</span><span class="sxs-lookup"><span data-stu-id="3c0f6-105">The application itself might not be internally monolithic, but structured as several libraries, components, or even layers (application layer, domain layer, data-access layer, etc.).</span></span> <span data-ttu-id="3c0f6-106">Zewnętrznie jednak jest to pojedynczy kontener — pojedynczy proces, pojedyncza aplikacja sieci web lub pojedyncza usługa.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-106">Externally, however, it's a single container—a single process, a single web application, or a single service.</span></span>

<span data-ttu-id="3c0f6-107">Aby zarządzać tym modelem, należy wdrożyć pojedynczy kontener do reprezentowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="3c0f6-108">Aby zwiększyć pojemność, można skalować w sposób skalowany, to znaczy po prostu dodać więcej kopii z modułem równoważenia obciążenia z przodu.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-108">To increase capacity, you scale out, that is, just add more copies with a load balancer in front.</span></span> <span data-ttu-id="3c0f6-109">Prostota pochodzi z zarządzania jednym wdrożeniem w jednym kontenerze lub maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-109">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![Diagram przedstawiający składniki aplikacji konteneryzowanej monolityczną konteneryzowaną.](./media/containerize-monolithic-applications/monolithic-containerized-application.png)

<span data-ttu-id="3c0f6-111">**Rysunek 4-1**.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-111">**Figure 4-1**.</span></span> <span data-ttu-id="3c0f6-112">Przykład architektury konteneryzowanej aplikacji monolitycznej</span><span class="sxs-lookup"><span data-stu-id="3c0f6-112">Example of the architecture of a containerized monolithic application</span></span>

<span data-ttu-id="3c0f6-113">W każdym kontenerze można uwzględnić wiele składników, bibliotek lub warstw wewnętrznych, jak pokazano na rysunku 4-1.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-113">You can include multiple components, libraries, or internal layers in each container, as illustrated in Figure 4-1.</span></span> <span data-ttu-id="3c0f6-114">Monolityczne konteneryzowane aplikacji ma większość swoich funkcji w jednym kontenerze, z wewnętrznych warstw lub bibliotek i skalowane przez klonowanie kontenera na wielu serwerach/maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-114">A monolithic containerized application has most of its functionality within a single container, with internal layers or libraries, and scales out by cloning the container on multiple servers/VMs.</span></span> <span data-ttu-id="3c0f6-115">Jednak ten monolityczny wzorzec może być w konflikcie z zasadą kontenera "kontener robi jedną rzecz i robi to w jednym procesie", ale może być ok w niektórych przypadkach.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-115">However, this monolithic pattern might conflict with the container principle "a container does one thing, and does it in one process", but might be ok for some cases.</span></span>

<span data-ttu-id="3c0f6-116">Wadą tego podejścia staje się oczywiste, jeśli aplikacja rośnie, wymagając go do skalowania.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-116">The downside of this approach becomes evident if the application grows, requiring it to scale.</span></span> <span data-ttu-id="3c0f6-117">Jeśli cała aplikacja może skalować, to naprawdę nie jest problemem.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-117">If the entire application can scale, it isn't really a problem.</span></span> <span data-ttu-id="3c0f6-118">Jednak w większości przypadków tylko kilka części aplikacji są punkty ssania, które wymagają skalowania, podczas gdy inne składniki są używane mniej.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-118">However, in most cases, just a few parts of the application are the choke points that requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="3c0f6-119">Na przykład w typowej aplikacji e-commerce prawdopodobnie trzeba skalować podsystem informacji o produkcie, ponieważ znacznie więcej klientów przegląda produkty niż je kupuje.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-119">For example, in a typical e-commerce application, you likely need to scale the product information subsystem, because many more customers browse products than purchase them.</span></span> <span data-ttu-id="3c0f6-120">Więcej klientów korzysta z koszyka niż z potoku płatności.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-120">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="3c0f6-121">Mniej klientów dodaje komentarze lub przegląda historię zakupów.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-121">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="3c0f6-122">I może mieć tylko garstkę pracowników, którzy muszą zarządzać treścii i kampanii marketingowych.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-122">And you might have only a handful of employees that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="3c0f6-123">Jeśli skalowanie monolitycznego projektu, cały kod dla tych różnych zadań jest wdrażany wiele razy i skalowane w tym samym gatunku.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-123">If you scale the monolithic design, all the code for these different tasks is deployed multiple times and scaled at the same grade.</span></span>

<span data-ttu-id="3c0f6-124">Istnieje wiele sposobów skalowania duplikacji poziomej aplikacji, dzielenia różnych obszarów aplikacji i dzielenia na partycje podobnych pojęć biznesowych lub danych.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-124">There are multiple ways to scale an application-horizontal duplication, splitting different areas of the application, and partitioning similar business concepts or data.</span></span> <span data-ttu-id="3c0f6-125">Jednak oprócz problemu skalowania wszystkich składników zmiany w jednym składniku wymagają pełnego ponownego testowania całej aplikacji i pełnego ponownego wdrożenia wszystkich wystąpień.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-125">But, in addition to the problem of scaling all components, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="3c0f6-126">Jednak monolityczne podejście jest wspólne, ponieważ rozwój aplikacji jest początkowo łatwiejsze niż dla metod mikrousług.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-126">However, the monolithic approach is common, because the development of the application is initially easier than for microservices approaches.</span></span> <span data-ttu-id="3c0f6-127">W ten sposób wiele organizacji rozwija się przy użyciu tego podejścia architektonicznego.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-127">Thus, many organizations develop using this architectural approach.</span></span> <span data-ttu-id="3c0f6-128">Podczas gdy niektóre organizacje miały wystarczająco dobre wyniki, inne osiągają limity.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-128">While some organizations have had good enough results, others are hitting limits.</span></span> <span data-ttu-id="3c0f6-129">Wiele organizacji zaprojektowało swoje aplikacje przy użyciu tego modelu, ponieważ narzędzia i infrastruktura zbyt trudne do tworzenia architektur zorientowanych na usługi (SOA) lat temu, a oni nie widzą potrzeby, dopóki aplikacja wzrosła.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-129">Many organizations designed their applications using this model because tools and infrastructure made it too difficult to build service-oriented architectures (SOA) years ago, and they did not see the need-until the application grew.</span></span>

<span data-ttu-id="3c0f6-130">Z punktu widzenia infrastruktury każdy serwer może uruchamiać wiele aplikacji w obrębie tego samego hosta i mieć akceptowalny stosunek wydajności w użyciu zasobów, jak pokazano na rysunku 4-2.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-130">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in resources usage, as shown in Figure 4-2.</span></span>

![Diagram przedstawiający jeden host z wieloma aplikacjami w kontenerach.](./media/containerize-monolithic-applications/host-multiple-apps-containers.png)

<span data-ttu-id="3c0f6-132">**Rysunek 4-2**.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-132">**Figure 4-2**.</span></span> <span data-ttu-id="3c0f6-133">Monolityczne podejście: Host z uruchomionymi wieloma aplikacjami, każda aplikacja działa jako kontener</span><span class="sxs-lookup"><span data-stu-id="3c0f6-133">Monolithic approach: Host running multiple apps, each app running as a container</span></span>

<span data-ttu-id="3c0f6-134">Monolityczne aplikacje na platformie Microsoft Azure można wdrożyć przy użyciu dedykowanych maszyn wirtualnych dla każdego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-134">Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.</span></span> <span data-ttu-id="3c0f6-135">Ponadto przy użyciu [zestawów skalowania maszyn wirtualnych platformy Azure,](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/)można łatwo skalować maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-135">Additionally, using [Azure virtual machine scale sets](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="3c0f6-136">[Usługa Azure App Service](https://azure.microsoft.com/services/app-service/) może również uruchamiać aplikacje monolityczne i łatwo skalować wystąpienia bez konieczności zarządzania maszynami wirtualnymi.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-136">[Azure App Service](https://azure.microsoft.com/services/app-service/) can also run monolithic applications and easily scale instances without requiring you to manage the VMs.</span></span> <span data-ttu-id="3c0f6-137">Od 2016 r. usługi Azure App Services mogą również uruchamiać pojedyncze wystąpienia kontenerów platformy Docker, co upraszcza wdrażanie.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-137">Since 2016, Azure App Services can run single instances of Docker containers as well, simplifying deployment.</span></span>

<span data-ttu-id="3c0f6-138">Jako środowisko kontroli jakości lub ograniczone środowisko produkcyjne można wdrożyć wiele maszyn wirtualnych hosta platformy Docker i zrównoważyć je przy użyciu balansu platformy Azure, jak pokazano na rysunku 4-3.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-138">As a QA environment or a limited production environment, you can deploy multiple Docker host VMs and balance them using the Azure balancer, as shown in Figure 4-3.</span></span> <span data-ttu-id="3c0f6-139">Dzięki temu można zarządzać skalowanie z podejściem gruboziarniste, ponieważ cała aplikacja znajduje się w jednym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-139">This lets you manage scaling with a coarse-grain approach, because the whole application lives within a single container.</span></span>

![Diagram przedstawiający kilka hostów z monolitycznymi kontenerami aplikacji.](./media/containerize-monolithic-applications/docker-infrastructure-monolithic-application.png)

<span data-ttu-id="3c0f6-141">**Rysunek 4-3**.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-141">**Figure 4-3**.</span></span> <span data-ttu-id="3c0f6-142">Przykład wielu hostów skalowania w górę aplikacji pojedynczego kontenera</span><span class="sxs-lookup"><span data-stu-id="3c0f6-142">Example of multiple hosts scaling up a single container application</span></span>

<span data-ttu-id="3c0f6-143">Wdrażanie na różnych hostach można zarządzać za pomocą tradycyjnych technik wdrażania.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-143">Deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="3c0f6-144">Hostami platformy Docker można `docker run` `docker-compose` zarządzać za pomocą poleceń, takich jak lub wykonywanych ręcznie, lub za pomocą automatyzacji, takich jak potoki ciągłego dostarczania (CD).</span><span class="sxs-lookup"><span data-stu-id="3c0f6-144">Docker hosts can be managed with commands like `docker run` or `docker-compose` performed manually, or through automation such as continuous delivery (CD) pipelines.</span></span>

## <a name="deploying-a-monolithic-application-as-a-container"></a><span data-ttu-id="3c0f6-145">Wdrażanie aplikacji monolitycznych jako kontenera</span><span class="sxs-lookup"><span data-stu-id="3c0f6-145">Deploying a monolithic application as a container</span></span>

<span data-ttu-id="3c0f6-146">Istnieją korzyści z używania kontenerów do zarządzania wdrożeniami aplikacji monolitycznych.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-146">There are benefits to using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="3c0f6-147">Skalowanie wystąpień kontenera jest znacznie szybsze i łatwiejsze niż wdrażanie dodatkowych maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-147">Scaling container instances is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="3c0f6-148">Nawet jeśli używasz zestawów skalowania maszyn wirtualnych, maszyny wirtualne zajmują trochę czasu, aby rozpocząć.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-148">Even if you use virtual machine scale sets, VMs take time to start.</span></span> <span data-ttu-id="3c0f6-149">Po wdrożeniu jako wystąpienia tradycyjnych aplikacji zamiast kontenerów, konfiguracja aplikacji jest zarządzana jako część maszyny Wirtualnej, która nie jest idealna.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-149">When deployed as traditional application instances instead of containers, the configuration of the application is managed as part of the VM, which isn't ideal.</span></span>

<span data-ttu-id="3c0f6-150">Wdrażanie aktualizacji jako obrazów platformy Docker jest znacznie szybsze i wydajne w sieci.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-150">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="3c0f6-151">Obrazy platformy Docker zazwyczaj rozpoczynają się w ciągu kilku sekund, co przyspiesza wdrażanie.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-151">Docker images typically start in seconds, which speeds rollouts.</span></span> <span data-ttu-id="3c0f6-152">Niszczanie wystąpienia obrazu platformy Docker `docker stop` jest tak proste, jak wydawanie polecenia i zazwyczaj kończy się w mniej niż sekundę.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-152">Tearing down a Docker image instance is as easy as issuing a `docker stop` command, and typically completes in less than a second.</span></span>

<span data-ttu-id="3c0f6-153">Ponieważ kontenery są niezmienne zgodnie z projektem, nigdy nie musisz się martwić o uszkodzone maszyny wirtualne.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-153">Because containers are immutable by design, you never need to worry about corrupted VMs.</span></span> <span data-ttu-id="3c0f6-154">Z drugiej strony skrypty aktualizacji maszyny Wirtualnej mogą zapomnieć o uwzględnieniu określonej konfiguracji lub pliku pozostawionego na dysku.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-154">In contrast, update scripts for a VM might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="3c0f6-155">Podczas gdy monolityczne aplikacje mogą korzystać z platformy Docker, dotykamy tylko korzyści.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-155">While monolithic applications can benefit from Docker, we're touching only on the benefits.</span></span> <span data-ttu-id="3c0f6-156">Dodatkowe korzyści z zarządzania kontenerami pochodzą z wdrażania z koordynatorami kontenerów, które zarządzają różnymi wystąpieniami i cyklem życia każdego wystąpienia kontenera.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-156">Additional benefits of managing containers come from deploying with container orchestrators, which manage the various instances and lifecycle of each container instance.</span></span> <span data-ttu-id="3c0f6-157">Podział monolityczne aplikacji na podsystemy, które mogą być skalowane, opracowywane i wdrażane indywidualnie jest punktem wejścia do sfery mikrousług.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-157">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a><span data-ttu-id="3c0f6-158">Publikowanie aplikacji opartej na jednym kontenerze w usłudze Azure App Service</span><span class="sxs-lookup"><span data-stu-id="3c0f6-158">Publishing a single-container-based application to Azure App Service</span></span>

<span data-ttu-id="3c0f6-159">Niezależnie od tego, czy chcesz uzyskać weryfikację kontenera wdrożonego na platformie Azure, czy gdy aplikacja jest po prostu aplikacją z jednym kontenerem, usługa Azure App Service zapewnia świetny sposób na zapewnienie skalowalnych usług opartych na jednym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-159">Whether you want to get validation of a container deployed to Azure or when an application is simply a single-container application, Azure App Service provides a great way to provide scalable single-container-based services.</span></span> <span data-ttu-id="3c0f6-160">Korzystanie z usługi Azure App Service jest proste.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-160">Using Azure App Service is simple.</span></span> <span data-ttu-id="3c0f6-161">Zapewnia doskonałą integrację z Git, aby ułatwić zabrać kod, skompilować go w programie Visual Studio i wdrożyć go bezpośrednio na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-161">It provides great integration with Git to make it easy to take your code, build it in Visual Studio, and deploy it directly to Azure.</span></span>

![Zrzut ekranu przedstawiający okno dialogowe Tworzenie usługi aplikacji z rejestrem kontenerów.](./media/containerize-monolithic-applications/publish-azure-app-service-container.png)

<span data-ttu-id="3c0f6-163">**Rysunek 4-4**.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-163">**Figure 4-4**.</span></span> <span data-ttu-id="3c0f6-164">Publikowanie aplikacji z jednym kontenerem w usłudze Azure App Service z programu Visual Studio 2019</span><span class="sxs-lookup"><span data-stu-id="3c0f6-164">Publishing a single-container application to Azure App Service from Visual Studio 2019</span></span>

<span data-ttu-id="3c0f6-165">Bez platformy Docker, jeśli potrzebujesz innych funkcji, struktur lub zależności, które nie są obsługiwane w usłudze Azure App Service, trzeba było poczekać, aż zespół platformy Azure zaktualizował te zależności w usłudze App Service.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-165">Without Docker, if you needed other capabilities, frameworks, or dependencies that aren't supported in Azure App Service, you had to wait until the Azure team updated those dependencies in App Service.</span></span> <span data-ttu-id="3c0f6-166">Albo trzeba było przełączyć się do innych usług, takich jak usługi w chmurze azure lub maszyn wirtualnych, gdzie miał eś dalszą kontrolę i można zainstalować wymagany składnik lub framework dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-166">Or you had to switch to other services like Azure Cloud Services or VMs, where you had further control and you could install a required component or framework for your application.</span></span>

<span data-ttu-id="3c0f6-167">Obsługa kontenerów w programie Visual Studio 2017 i nowszych zapewnia możliwość uwzględnienia dowolnych elementów w środowisku aplikacji, jak pokazano na rysunku 4–4.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-167">Container support in Visual Studio 2017 and later gives you the ability to include whatever you want in your application environment, as shown in Figure 4-4.</span></span> <span data-ttu-id="3c0f6-168">Ponieważ używasz go w kontenerze, jeśli dodasz zależność do aplikacji, można dołączyć zależność w obrazie dockerfile lub docker.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-168">Since you're running it in a container, if you add a dependency to your application, you can include the dependency in your Dockerfile or Docker image.</span></span>

<span data-ttu-id="3c0f6-169">Jak pokazano również na rysunku 4-4, przepływ publikowania wypycha obraz przez rejestr kontenerów.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-169">As also shown in Figure 4-4, the publish flow pushes an image through a container registry.</span></span> <span data-ttu-id="3c0f6-170">Może to być rejestr kontenerów platformy Azure (rejestr w pobliżu wdrożeń na platformie Azure i zabezpieczony przez grupy i konta usługi Azure Active Directory) lub dowolny inny rejestr platformy Docker, taki jak Centrum docker lub rejestr lokalny.</span><span class="sxs-lookup"><span data-stu-id="3c0f6-170">This can be the Azure Container Registry (a registry close to your deployments in Azure and secured by Azure Active Directory groups and accounts), or any other Docker registry, like Docker Hub or an on-premises registry.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="3c0f6-171">[Poprzedni](index.md)
>[następny](docker-application-state-data.md)</span><span class="sxs-lookup"><span data-stu-id="3c0f6-171">[Previous](index.md)
[Next](docker-application-state-data.md)</span></span>
