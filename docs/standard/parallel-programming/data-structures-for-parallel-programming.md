---
title: Struktury danych dla Programowania równoległego
ms.date: 03/30/2017
helpviewer_keywords:
- data structures, multi-threading
ms.assetid: bdc82f2f-4754-45a1-a81e-fe2e9c30cef9
ms.openlocfilehash: 4e0214afe4dba7f838f420907374f1472d6d3911
ms.sourcegitcommit: d8020797a6657d0fbbdff362b80300815f682f94
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/24/2020
ms.locfileid: "95699017"
---
# <a name="data-structures-for-parallel-programming"></a><span data-ttu-id="3bd63-102">Struktury danych dla Programowania równoległego</span><span class="sxs-lookup"><span data-stu-id="3bd63-102">Data Structures for Parallel Programming</span></span>

<span data-ttu-id="3bd63-103">Platforma .NET udostępnia kilka typów, które są przydatne w programowaniu równoległym, w tym zestaw klas kolekcji współbieżnych, uproszczonych synchronizacji i typów dla inicjowania z opóźnieniem.</span><span class="sxs-lookup"><span data-stu-id="3bd63-103">.NET provides several types that are useful in parallel programming, including a set of concurrent collection classes, lightweight synchronization primitives, and types for lazy initialization.</span></span> <span data-ttu-id="3bd63-104">Można używać tych typów z dowolnym kodem aplikacji wielowątkowych, w tym biblioteką równoległą zadań i PLINQ.</span><span class="sxs-lookup"><span data-stu-id="3bd63-104">You can use these types with any multithreaded application code, including the Task Parallel Library and PLINQ.</span></span>  
  
## <a name="concurrent-collection-classes"></a><span data-ttu-id="3bd63-105">Klasy kolekcji współbieżnych</span><span class="sxs-lookup"><span data-stu-id="3bd63-105">Concurrent Collection Classes</span></span>  

 <span data-ttu-id="3bd63-106">Klasy kolekcji w <xref:System.Collections.Concurrent?displayProperty=nameWithType> przestrzeni nazw zapewniają bezpieczne wątkowo operacje dodawania i usuwania, które nie pozwalają na zablokowanie, gdy jest to możliwe, oraz użycie blokowania szczegółowego, w którym blokady są wymagane.</span><span class="sxs-lookup"><span data-stu-id="3bd63-106">The collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace provide thread-safe add and remove operations that avoid locks wherever possible and use fine-grained locking where locks are necessary.</span></span> <span data-ttu-id="3bd63-107">Klasa kolekcji współbieżnej nie wymaga, aby kod użytkownika mógł korzystać z blokad podczas uzyskiwania dostępu do elementów.</span><span class="sxs-lookup"><span data-stu-id="3bd63-107">A concurrent collection class does not require user code to take any locks when it accesses items.</span></span> <span data-ttu-id="3bd63-108">Klasy kolekcji współbieżnych mogą znacząco poprawić wydajność nad typami, takimi jak <xref:System.Collections.ArrayList?displayProperty=nameWithType> i <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (z blokowaniem zaimplementowanym przez użytkownika) w scenariuszach, w których wiele wątków dodaje i usuwa elementy z kolekcji.</span><span class="sxs-lookup"><span data-stu-id="3bd63-108">The concurrent collection classes can significantly improve performance over types such as <xref:System.Collections.ArrayList?displayProperty=nameWithType> and <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> (with user-implemented locking) in scenarios where multiple threads add and remove items from a collection.</span></span>  
  
 <span data-ttu-id="3bd63-109">Poniższa tabela zawiera listę klas kolekcji współbieżnych:</span><span class="sxs-lookup"><span data-stu-id="3bd63-109">The following table lists the concurrent collection classes:</span></span>  
  
|<span data-ttu-id="3bd63-110">Typ</span><span class="sxs-lookup"><span data-stu-id="3bd63-110">Type</span></span>|<span data-ttu-id="3bd63-111">Opis</span><span class="sxs-lookup"><span data-stu-id="3bd63-111">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Collections.Concurrent.BlockingCollection%601?displayProperty=nameWithType>|<span data-ttu-id="3bd63-112">Oferuje funkcje blokowania i ograniczania dla kolekcji bezpiecznych wątków, które implementują <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="3bd63-112">Provides blocking and bounding capabilities for thread-safe collections that implement <xref:System.Collections.Concurrent.IProducerConsumerCollection%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="3bd63-113">Wątki producentów blokują, jeśli nie są dostępne żadne gniazda, lub jeśli kolekcja jest pełna.</span><span class="sxs-lookup"><span data-stu-id="3bd63-113">Producer threads block if no slots are available or if the collection is full.</span></span> <span data-ttu-id="3bd63-114">Wątki odbiorcy blokują, jeśli kolekcja jest pusta.</span><span class="sxs-lookup"><span data-stu-id="3bd63-114">Consumer threads block if the collection is empty.</span></span> <span data-ttu-id="3bd63-115">Ten typ obsługuje również dostęp bez blokowania dla odbiorców i producentów.</span><span class="sxs-lookup"><span data-stu-id="3bd63-115">This type also supports non-blocking access by consumers and producers.</span></span> <span data-ttu-id="3bd63-116"><xref:System.Collections.Concurrent.BlockingCollection%601> może służyć jako klasa bazowa lub magazyn zapasowy w celu zapewnienia blokowania i ograniczania dla dowolnej klasy kolekcji, która obsługuje <xref:System.Collections.Generic.IEnumerable%601> .</span><span class="sxs-lookup"><span data-stu-id="3bd63-116"><xref:System.Collections.Concurrent.BlockingCollection%601> can be used as a base class or backing store to provide blocking and bounding for any collection class that supports <xref:System.Collections.Generic.IEnumerable%601>.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentBag%601?displayProperty=nameWithType>|<span data-ttu-id="3bd63-117">Implementacja bezpiecznego zbioru wątków, która udostępnia skalowalne operacje dodawania i pobierania.</span><span class="sxs-lookup"><span data-stu-id="3bd63-117">A thread-safe bag implementation that provides scalable add and get operations.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentDictionary%602?displayProperty=nameWithType>|<span data-ttu-id="3bd63-118">Typ słownika współbieżne i skalowalne.</span><span class="sxs-lookup"><span data-stu-id="3bd63-118">A concurrent and scalable dictionary type.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentQueue%601?displayProperty=nameWithType>|<span data-ttu-id="3bd63-119">Współbieżna i skalowalna Kolejka FIFO.</span><span class="sxs-lookup"><span data-stu-id="3bd63-119">A concurrent and scalable FIFO queue.</span></span>|  
|<xref:System.Collections.Concurrent.ConcurrentStack%601?displayProperty=nameWithType>|<span data-ttu-id="3bd63-120">Współbieżny i skalowalny stos LIFO.</span><span class="sxs-lookup"><span data-stu-id="3bd63-120">A concurrent and scalable LIFO stack.</span></span>|  
  
 <span data-ttu-id="3bd63-121">Aby uzyskać więcej informacji, zobacz [kolekcje bezpieczne dla wątków](../collections/thread-safe/index.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-121">For more information, see [Thread-Safe Collections](../collections/thread-safe/index.md).</span></span>  
  
## <a name="synchronization-primitives"></a><span data-ttu-id="3bd63-122">Elementy pierwotne synchronizacji</span><span class="sxs-lookup"><span data-stu-id="3bd63-122">Synchronization Primitives</span></span>  

 <span data-ttu-id="3bd63-123">Elementy pierwotne synchronizacji w <xref:System.Threading?displayProperty=nameWithType> przestrzeni nazw umożliwiają precyzyjne i szybsze osiąganie wydajności dzięki unikaniu kosztownych mechanizmów blokowania znalezionych w starszym kodzie wielowątkowości.</span><span class="sxs-lookup"><span data-stu-id="3bd63-123">The synchronization primitives in the <xref:System.Threading?displayProperty=nameWithType> namespace enable fine-grained concurrency and faster performance by avoiding expensive locking mechanisms found in legacy multithreading code.</span></span>
  
 <span data-ttu-id="3bd63-124">W poniższej tabeli wymieniono typy synchronizacji:</span><span class="sxs-lookup"><span data-stu-id="3bd63-124">The following table lists the synchronization types:</span></span>  
  
|<span data-ttu-id="3bd63-125">Typ</span><span class="sxs-lookup"><span data-stu-id="3bd63-125">Type</span></span>|<span data-ttu-id="3bd63-126">Opis</span><span class="sxs-lookup"><span data-stu-id="3bd63-126">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Threading.Barrier?displayProperty=nameWithType>|<span data-ttu-id="3bd63-127">Umożliwia wielu wątkom równoczesne współpracujenie z algorytmem, dostarczając punkt, w którym każde zadanie może sygnalizować jego przybycie, a następnie zablokować do momentu otrzymania niektórych lub wszystkich zadań.</span><span class="sxs-lookup"><span data-stu-id="3bd63-127">Enables multiple threads to work on an algorithm in parallel by providing a point at which each task can signal its arrival and then block until some or all tasks have arrived.</span></span> <span data-ttu-id="3bd63-128">Aby uzyskać więcej informacji, zobacz [bariera](../threading/barrier.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-128">For more information, see [Barrier](../threading/barrier.md).</span></span>|  
|<xref:System.Threading.CountdownEvent?displayProperty=nameWithType>|<span data-ttu-id="3bd63-129">Upraszcza scenariusze tworzenia rozwidlenia i sprzężeń, zapewniając łatwy termin.</span><span class="sxs-lookup"><span data-stu-id="3bd63-129">Simplifies fork and join scenarios by providing an easy rendezvous mechanism.</span></span> <span data-ttu-id="3bd63-130">Aby uzyskać więcej informacji, zobacz [CountdownEvent](../threading/countdownevent.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-130">For more information, see [CountdownEvent](../threading/countdownevent.md).</span></span>|  
|<xref:System.Threading.ManualResetEventSlim?displayProperty=nameWithType>|<span data-ttu-id="3bd63-131">Typ pierwotny synchronizacji podobny do <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType> .</span><span class="sxs-lookup"><span data-stu-id="3bd63-131">A synchronization primitive similar to <xref:System.Threading.ManualResetEvent?displayProperty=nameWithType>.</span></span> <span data-ttu-id="3bd63-132"><xref:System.Threading.ManualResetEventSlim> jest jaśniejszy, ale może być używany tylko w przypadku komunikacji wewnątrz procesu.</span><span class="sxs-lookup"><span data-stu-id="3bd63-132"><xref:System.Threading.ManualResetEventSlim> is lighter-weight but can only be used for intra-process communication.</span></span>|  
|<xref:System.Threading.SemaphoreSlim?displayProperty=nameWithType>|<span data-ttu-id="3bd63-133">Pierwotna synchronizacja, która ogranicza liczbę wątków, które mogą jednocześnie uzyskiwać dostęp do zasobu lub puli zasobów.</span><span class="sxs-lookup"><span data-stu-id="3bd63-133">A synchronization primitive that limits the number of threads that can concurrently access a resource or a pool of resources.</span></span> <span data-ttu-id="3bd63-134">Aby uzyskać więcej informacji, zobacz [Semafor i SemaphoreSlim](../threading/semaphore-and-semaphoreslim.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-134">For more information, see [Semaphore and SemaphoreSlim](../threading/semaphore-and-semaphoreslim.md).</span></span>|  
|<xref:System.Threading.SpinLock?displayProperty=nameWithType>|<span data-ttu-id="3bd63-135">Element pierwotny blokady wykluczeń, który powoduje, że wątek, który próbuje uzyskać blokadę, czeka w pętli lub *obracał* przez pewien czas przed uzyskaniem jego Quantum.</span><span class="sxs-lookup"><span data-stu-id="3bd63-135">A mutual exclusion lock primitive that causes the thread that is trying to acquire the lock to wait in a loop, or *spin*, for a period of time before yielding its quantum.</span></span> <span data-ttu-id="3bd63-136">W scenariuszach, w których oczekiwanie na zakończenie blokady jest krótkie, <xref:System.Threading.SpinLock> oferuje lepszą wydajność niż inne formy blokowania.</span><span class="sxs-lookup"><span data-stu-id="3bd63-136">In scenarios where the wait for the lock is expected to be short, <xref:System.Threading.SpinLock> offers better performance than other forms of locking.</span></span> <span data-ttu-id="3bd63-137">Aby uzyskać więcej informacji, zobacz [struktury spinlock](../threading/spinlock.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-137">For more information, see [SpinLock](../threading/spinlock.md).</span></span>|  
|<xref:System.Threading.SpinWait?displayProperty=nameWithType>|<span data-ttu-id="3bd63-138">Mały, lekki typ, który pozostanie w określonym czasie i ostatecznie umieści wątek w stanie oczekiwania w przypadku przekroczenia liczby obrotów.</span><span class="sxs-lookup"><span data-stu-id="3bd63-138">A small, lightweight type that will spin for a specified time and eventually put the thread into a wait state if the spin count is exceeded.</span></span>  <span data-ttu-id="3bd63-139">Aby uzyskać więcej informacji, zobacz [metody SpinWait](../threading/spinwait.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-139">For more information, see [SpinWait](../threading/spinwait.md).</span></span>|  
  
 <span data-ttu-id="3bd63-140">Aby uzyskać więcej informacji, zobacz:</span><span class="sxs-lookup"><span data-stu-id="3bd63-140">For more information, see:</span></span>  
  
- [<span data-ttu-id="3bd63-141">Instrukcje: korzystanie z struktury spinlock do synchronizacji Low-Level</span><span class="sxs-lookup"><span data-stu-id="3bd63-141">How to: Use SpinLock for Low-Level Synchronization</span></span>](../threading/how-to-use-spinlock-for-low-level-synchronization.md)  
  
- <span data-ttu-id="3bd63-142">[Instrukcje: synchronizowanie operacji współbieżnych z barierą](../threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-142">[How to: Synchronize Concurrent Operations with a Barrier](../threading/how-to-synchronize-concurrent-operations-with-a-barrier.md).</span></span>  
  
## <a name="lazy-initialization-classes"></a><span data-ttu-id="3bd63-143">Klasy inicjacji z opóźnieniem</span><span class="sxs-lookup"><span data-stu-id="3bd63-143">Lazy Initialization Classes</span></span>  

 <span data-ttu-id="3bd63-144">Po zainicjowaniu z opóźnieniem pamięć dla obiektu nie jest przypisana do momentu, gdy jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="3bd63-144">With lazy initialization, the memory for an object is not allocated until it is needed.</span></span> <span data-ttu-id="3bd63-145">Inicjalizacja z opóźnieniem może zwiększyć wydajność dzięki rozproszeniu alokacji obiektów równomiernie przez okres istnienia programu.</span><span class="sxs-lookup"><span data-stu-id="3bd63-145">Lazy initialization can improve performance by spreading object allocations evenly across the lifetime of a program.</span></span> <span data-ttu-id="3bd63-146">Możesz włączyć inicjalizację z opóźnieniem dla dowolnego typu niestandardowego, zawijając typ <xref:System.Lazy%601> .</span><span class="sxs-lookup"><span data-stu-id="3bd63-146">You can enable lazy initialization for any custom type by wrapping the type <xref:System.Lazy%601>.</span></span>  
  
 <span data-ttu-id="3bd63-147">Poniższa tabela zawiera listę typów inicjalizacji z opóźnieniem:</span><span class="sxs-lookup"><span data-stu-id="3bd63-147">The following table lists the lazy initialization types:</span></span>  
  
|<span data-ttu-id="3bd63-148">Typ</span><span class="sxs-lookup"><span data-stu-id="3bd63-148">Type</span></span>|<span data-ttu-id="3bd63-149">Opis</span><span class="sxs-lookup"><span data-stu-id="3bd63-149">Description</span></span>|  
|----------|-----------------|  
|<xref:System.Lazy%601?displayProperty=nameWithType>|<span data-ttu-id="3bd63-150">Zapewnia uproszczone, bezpieczne inicjalizacje wątków.</span><span class="sxs-lookup"><span data-stu-id="3bd63-150">Provides lightweight, thread-safe lazy-initialization.</span></span>|  
|<xref:System.Threading.ThreadLocal%601?displayProperty=nameWithType>|<span data-ttu-id="3bd63-151">Zapewnia wartość zainicjowaną przez opóźnieniem w odniesieniu do wątku, przy czym każdy wątek opóźnieniem wywołanie funkcji inicjującej.</span><span class="sxs-lookup"><span data-stu-id="3bd63-151">Provides a lazily-initialized value on a per-thread basis, with each thread lazily-invoking the initialization function.</span></span>|  
|<xref:System.Threading.LazyInitializer?displayProperty=nameWithType>|<span data-ttu-id="3bd63-152">Zawiera metody statyczne, które nie wymagają przydzielenia dedykowanego wystąpienia inicjującego.</span><span class="sxs-lookup"><span data-stu-id="3bd63-152">Provides static methods that avoid the need to allocate a dedicated, lazy-initialization instance.</span></span> <span data-ttu-id="3bd63-153">Zamiast tego używają odwołań, aby upewnić się, że obiekty docelowe zostały zainicjowane w miarę uzyskiwania do nich dostępu.</span><span class="sxs-lookup"><span data-stu-id="3bd63-153">Instead, they use references to ensure targets have been initialized as they are accessed.</span></span>|  
  
 <span data-ttu-id="3bd63-154">Aby uzyskać więcej informacji, zobacz [Inicjalizacja z opóźnieniem](../../framework/performance/lazy-initialization.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-154">For more information, see [Lazy Initialization](../../framework/performance/lazy-initialization.md).</span></span>  
  
## <a name="aggregate-exceptions"></a><span data-ttu-id="3bd63-155">Wyjątki agregujące</span><span class="sxs-lookup"><span data-stu-id="3bd63-155">Aggregate Exceptions</span></span>  

 <span data-ttu-id="3bd63-156"><xref:System.AggregateException?displayProperty=nameWithType>Typ może służyć do przechwytywania wielu wyjątków, które są zgłaszane współbieżnie w oddzielnych wątkach i zwracają je do wątku przyłączania jako pojedynczy wyjątek.</span><span class="sxs-lookup"><span data-stu-id="3bd63-156">The <xref:System.AggregateException?displayProperty=nameWithType> type can be used to capture multiple exceptions that are thrown concurrently on separate threads, and return them to the joining thread as a single exception.</span></span> <span data-ttu-id="3bd63-157">W <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> tym celu typy i PLINQ są używane <xref:System.AggregateException> w szerokim zakresie.</span><span class="sxs-lookup"><span data-stu-id="3bd63-157">The <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> types and PLINQ use <xref:System.AggregateException> extensively for this purpose.</span></span> <span data-ttu-id="3bd63-158">Aby uzyskać więcej informacji, zobacz [Obsługa wyjątków](exception-handling-task-parallel-library.md) i [instrukcje: obsługa wyjątków w zapytaniu PLINQ](how-to-handle-exceptions-in-a-plinq-query.md).</span><span class="sxs-lookup"><span data-stu-id="3bd63-158">For more information, see [Exception Handling](exception-handling-task-parallel-library.md) and [How to: Handle Exceptions in a PLINQ Query](how-to-handle-exceptions-in-a-plinq-query.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3bd63-159">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="3bd63-159">See also</span></span>

- <xref:System.Collections.Concurrent?displayProperty=nameWithType>
- <xref:System.Threading?displayProperty=nameWithType>
- [<span data-ttu-id="3bd63-160">Programowanie równoległe</span><span class="sxs-lookup"><span data-stu-id="3bd63-160">Parallel Programming</span></span>](index.md)
