---
title: "Wskazówki: Tworzenie potoku przepływu danych"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- dataflow pipelines, creating with TPL
- Task Parallel Library, dataflows
- TPL dataflow library, creating dataflow pipeline
ms.assetid: 69308f82-aa22-4ac5-833d-e748533b58e8
caps.latest.revision: "11"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 6cc65464248ec27c4bda4934408a9bafc823a80c
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/23/2017
---
# <a name="walkthrough-creating-a-dataflow-pipeline"></a><span data-ttu-id="6719e-102">Wskazówki: Tworzenie potoku przepływu danych</span><span class="sxs-lookup"><span data-stu-id="6719e-102">Walkthrough: Creating a Dataflow Pipeline</span></span>
<span data-ttu-id="6719e-103">Chociaż można używać <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, i <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> metod do odbierania wiadomości z źródło bloków, możesz również nawiązać bloki komunikatów formularza *potoku przepływu danych*.</span><span class="sxs-lookup"><span data-stu-id="6719e-103">Although you can use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Receive%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Dataflow.DataflowBlock.ReceiveAsync%2A?displayProperty=nameWithType>, and <xref:System.Threading.Tasks.Dataflow.DataflowBlock.TryReceive%2A?displayProperty=nameWithType> methods to receive messages from source blocks, you can also connect message blocks to form a *dataflow pipeline*.</span></span> <span data-ttu-id="6719e-104">Potoku przepływu danych jest szeregu składników, lub *bloków przepływu danych*, z których każdy wykonuje określone zadanie, która wspiera większy cel.</span><span class="sxs-lookup"><span data-stu-id="6719e-104">A dataflow pipeline is a series of components, or *dataflow blocks*, each of which performs a specific task that contributes to a larger goal.</span></span> <span data-ttu-id="6719e-105">Każdy blok przepływu danych w potoku przepływu danych wykonuje pracę po otrzymaniu komunikatu od innego bloku przepływu danych.</span><span class="sxs-lookup"><span data-stu-id="6719e-105">Every dataflow block in a dataflow pipeline performs work when it receives a message from another dataflow block.</span></span> <span data-ttu-id="6719e-106">Odpowiednio do tego zestawu dla jest wiersz samochodów produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="6719e-106">An analogy to this is an assembly line for automobile manufacturing.</span></span> <span data-ttu-id="6719e-107">Każdy vehicle przechodzi przez wiersz zestawu, jednej stacji składana ramki, kolejny instaluje aparat i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="6719e-107">As each vehicle passes through the assembly line, one station assembles the frame, the next one installs the engine, and so on.</span></span> <span data-ttu-id="6719e-108">Ponieważ wiersza zestawu umożliwia wielu pojazdów odbywać się w tym samym czasie, zapewnia lepszą przepustowość niż zebrania pojazdów kompletnych jednym naraz.</span><span class="sxs-lookup"><span data-stu-id="6719e-108">Because an assembly line enables multiple vehicles to be assembled at the same time, it provides better throughput than assembling complete vehicles one at a time.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="6719e-109">Biblioteka przepływu danych tpl (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> przestrzeni nazw) nie jest rozpowszechniana z [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span><span class="sxs-lookup"><span data-stu-id="6719e-109">The TPL Dataflow Library (<xref:System.Threading.Tasks.Dataflow?displayProperty=nameWithType> namespace) is not distributed with the [!INCLUDE[net_v45](../../../includes/net-v45-md.md)].</span></span> <span data-ttu-id="6719e-110">Aby zainstalować <xref:System.Threading.Tasks.Dataflow> przestrzeni nazw, otwórz projekt w [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], wybierz **Zarządzaj pakietami NuGet** z menu projektu i wyszukaj w trybie online `Microsoft.Tpl.Dataflow` pakietu.</span><span class="sxs-lookup"><span data-stu-id="6719e-110">To install the <xref:System.Threading.Tasks.Dataflow> namespace, open your project in [!INCLUDE[vs_dev11_long](../../../includes/vs-dev11-long-md.md)], choose **Manage NuGet Packages** from the Project menu, and search online for the `Microsoft.Tpl.Dataflow` package.</span></span>  
  
 <span data-ttu-id="6719e-111">W tym dokumencie przedstawiono potoku przepływu danych, który pobiera książkę *Iliad Homer* z witryny sieci Web i wyszukiwania tekstu do dopasowania poszczególnych wyrazów z wyrazów tego wstecznego pierwsze słowo znaków.</span><span class="sxs-lookup"><span data-stu-id="6719e-111">This document demonstrates a dataflow pipeline that downloads the book *The Iliad of Homer* from a website and searches the text to match individual words with words that reverse the first word's characters.</span></span> <span data-ttu-id="6719e-112">Tworzenie potoku przepływu danych, w tym dokumencie obejmuje następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="6719e-112">The formation of the dataflow pipeline in this document consists of the following steps:</span></span>  
  
1.  <span data-ttu-id="6719e-113">Utwórz bloków przepływu danych, które uczestniczą w potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-113">Create the dataflow blocks that participate in the pipeline.</span></span>  
  
2.  <span data-ttu-id="6719e-114">Każdy blok przepływu danych nawiązać połączenia z kolejnego bloku w potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-114">Connect each dataflow block to the next block in the pipeline.</span></span> <span data-ttu-id="6719e-115">Każdy blok odbiera jako dane wejściowe dane wyjściowe poprzedniego bloku w potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-115">Each block receives as input the output of the previous block in the pipeline.</span></span>  
  
3.  <span data-ttu-id="6719e-116">Dla każdego bloku przepływu danych należy utworzyć zadania kontynuacji, która ustawia kolejnego bloku stanu ukończenia po ukończeniu poprzedniego bloku.</span><span class="sxs-lookup"><span data-stu-id="6719e-116">For each dataflow block, create a continuation task that sets the next block to the completed state after the previous block finishes.</span></span>  
  
4.  <span data-ttu-id="6719e-117">Dane do head potoku POST.</span><span class="sxs-lookup"><span data-stu-id="6719e-117">Post data to the head of the pipeline.</span></span>  
  
5.  <span data-ttu-id="6719e-118">Head potoku należy oznaczyć jako ukończone.</span><span class="sxs-lookup"><span data-stu-id="6719e-118">Mark the head of the pipeline as completed.</span></span>  
  
6.  <span data-ttu-id="6719e-119">Poczekaj, aż potoku do ukończenia pracy.</span><span class="sxs-lookup"><span data-stu-id="6719e-119">Wait for the pipeline to complete all work.</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="6719e-120">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="6719e-120">Prerequisites</span></span>  
 <span data-ttu-id="6719e-121">Odczyt [przepływu danych](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) przed skorzystaniem z tego przewodnika.</span><span class="sxs-lookup"><span data-stu-id="6719e-121">Read [Dataflow](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md) before you start this walkthrough.</span></span>  
  
## <a name="creating-a-console-application"></a><span data-ttu-id="6719e-122">Tworzenie aplikacji konsoli</span><span class="sxs-lookup"><span data-stu-id="6719e-122">Creating a Console Application</span></span>  
 <span data-ttu-id="6719e-123">W [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], Utwórz [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] lub [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] projekt aplikacji konsoli.</span><span class="sxs-lookup"><span data-stu-id="6719e-123">In [!INCLUDE[vsprvs](../../../includes/vsprvs-md.md)], create a [!INCLUDE[csprcs](../../../includes/csprcs-md.md)] or [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)] Console Application project.</span></span> <span data-ttu-id="6719e-124">Dodaj odwołanie do System.Threading.Tasks.Dataflow.dll.</span><span class="sxs-lookup"><span data-stu-id="6719e-124">Add a reference to System.Threading.Tasks.Dataflow.dll.</span></span>  
  
 <span data-ttu-id="6719e-125">Można również utworzyć plik i nadaj mu nazwę `ReverseWords.cs` (`ReverseWords.vb` dla [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), a następnie uruchom następujące polecenie w oknie Wiersz polecenia programu Visual Studio, aby skompilować projekt.</span><span class="sxs-lookup"><span data-stu-id="6719e-125">Alternatively, create a file and name it `ReverseWords.cs` (`ReverseWords.vb` for [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]), and then run the following command in a Visual Studio Command Prompt window to compile the project.</span></span>  
  
 [!INCLUDE[csprcs](../../../includes/csprcs-md.md)]  
  
 <span data-ttu-id="6719e-126">**CSC.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span><span class="sxs-lookup"><span data-stu-id="6719e-126">**csc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.cs**</span></span>  
  
 [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]  
  
 <span data-ttu-id="6719e-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span><span class="sxs-lookup"><span data-stu-id="6719e-127">**vbc.exe /r:System.Threading.Tasks.Dataflow.dll ReverseWords.vb**</span></span>  
  
 <span data-ttu-id="6719e-128">Dodaj następujący kod do projektu do tworzenia aplikacji w warstwie podstawowa.</span><span class="sxs-lookup"><span data-stu-id="6719e-128">Add the following code to your project to create the basic application.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#2](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#2)]
 [!code-vb[TPLDataflow_Palindromes#2](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#2)]  
  
## <a name="creating-the-dataflow-blocks"></a><span data-ttu-id="6719e-129">Tworzenie bloków przepływu danych</span><span class="sxs-lookup"><span data-stu-id="6719e-129">Creating the Dataflow Blocks</span></span>  
 <span data-ttu-id="6719e-130">Dodaj następujący kod do `Main` metodę w celu utworzenia bloków przepływu danych, które uczestniczą w potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-130">Add the following code to the `Main` method to create the dataflow blocks that participate in the pipeline.</span></span> <span data-ttu-id="6719e-131">Tabela poniżej zawiera podsumowanie roli dla każdego elementu członkowskiego potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-131">The table that follows summarizes the role of each member of the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#3](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#3)]
 [!code-vb[TPLDataflow_Palindromes#3](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#3)]  
  
|<span data-ttu-id="6719e-132">Element członkowski</span><span class="sxs-lookup"><span data-stu-id="6719e-132">Member</span></span>|<span data-ttu-id="6719e-133">Typ</span><span class="sxs-lookup"><span data-stu-id="6719e-133">Type</span></span>|<span data-ttu-id="6719e-134">Opis</span><span class="sxs-lookup"><span data-stu-id="6719e-134">Description</span></span>|  
|------------|----------|-----------------|  
|`downloadString`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="6719e-135">Pobiera tekst książki z sieci Web.</span><span class="sxs-lookup"><span data-stu-id="6719e-135">Downloads the book text from the Web.</span></span>|  
|`createWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="6719e-136">Dzieli tekst książki na tablicę słów.</span><span class="sxs-lookup"><span data-stu-id="6719e-136">Separates the book text into an array of words.</span></span>|  
|`filterWordList`|<xref:System.Threading.Tasks.Dataflow.TransformBlock%602>|<span data-ttu-id="6719e-137">Usuwa krótkich wyrazów w wyrazie tablicy, zamówienia wynikowy słowa alfabetycznie i Usuń duplikaty.</span><span class="sxs-lookup"><span data-stu-id="6719e-137">Removes short words from the word array, orders the resulting words alphabetically, and remove duplicates.</span></span>|  
|`findReversedWords`|<xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602>|<span data-ttu-id="6719e-138">Znajduje wszystkie słowa w kolekcji tablicy filtrowane word którego wstecznego występuje także w tablicy programu word.</span><span class="sxs-lookup"><span data-stu-id="6719e-138">Finds all words in the filtered word array collection whose reverse also occurs in the word array.</span></span>|  
|`printReversedWords`|<xref:System.Threading.Tasks.Dataflow.ActionBlock%601>|<span data-ttu-id="6719e-139">Wyświetla słów i odpowiednie wyrazów odwrotna do konsoli.</span><span class="sxs-lookup"><span data-stu-id="6719e-139">Displays words and the corresponding reverse words to the console.</span></span>|  
  
 <span data-ttu-id="6719e-140">Mimo że można połączyć wiele czynności ułożonych w potoku przepływu danych w tym przykładzie w jednym kroku, w przykładzie zilustrowano pojęcie tworzenie wielu niezależnych przepływu danych zadania do wykonania zadania większy.</span><span class="sxs-lookup"><span data-stu-id="6719e-140">Although you could combine multiple steps in the dataflow pipeline in this example into one step, the example illustrates the concept of composing multiple independent dataflow tasks to perform a larger task.</span></span> <span data-ttu-id="6719e-141">W przykładzie użyto <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> umożliwiające każdy element członkowski potoku wykonać operację na jej danych wejściowych i wysyłać wyniki do następnego kroku w potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-141">The example uses <xref:System.Threading.Tasks.Dataflow.TransformBlock%602> to enable each member of the pipeline to perform an operation on its input data and send the results to the next step in the pipeline.</span></span> <span data-ttu-id="6719e-142">`findReversedWords` Element członkowski potoku jest <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> obiektu, ponieważ generuje wiele niezależnych wyjść dla każdego danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="6719e-142">The `findReversedWords` member of the pipeline is a <xref:System.Threading.Tasks.Dataflow.TransformManyBlock%602> object because it produces multiple independent outputs for each input.</span></span> <span data-ttu-id="6719e-143">Tail potoku, `printReversedWords`, jest <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> obiektu, ponieważ wykonuje akcję na jego dane wejściowe i dać wynik.</span><span class="sxs-lookup"><span data-stu-id="6719e-143">The tail of the pipeline, `printReversedWords`, is a <xref:System.Threading.Tasks.Dataflow.ActionBlock%601> object because it performs an action on its input, and does not produce a result.</span></span>  
  
## <a name="forming-the-pipeline"></a><span data-ttu-id="6719e-144">Tworzenie potoku</span><span class="sxs-lookup"><span data-stu-id="6719e-144">Forming the Pipeline</span></span>  
 <span data-ttu-id="6719e-145">Dodaj następujący kod, aby połączyć każdy blok do kolejnego bloku w potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-145">Add the following code to connect each block to the next block in the pipeline.</span></span>  
  
 <span data-ttu-id="6719e-146">Podczas wywoływania <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> metody nawiązywania połączenia z docelowym bloku przepływu danych, bloku przepływu danych źródła bloku przepływu danych źródła propaguje danych blok docelowy wraz ze wzrostem dostępności danych.</span><span class="sxs-lookup"><span data-stu-id="6719e-146">When you call the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method to connect a source dataflow block to a target dataflow block, the source dataflow block propagates data to the target block as data becomes available.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#4](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#4)]
 [!code-vb[TPLDataflow_Palindromes#4](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#4)]  
  
## <a name="creating-the-completion-tasks"></a><span data-ttu-id="6719e-147">Tworzenie zadań zakończenia</span><span class="sxs-lookup"><span data-stu-id="6719e-147">Creating the Completion Tasks</span></span>  
 <span data-ttu-id="6719e-148">Dodaj następujący kod, aby włączyć każdego bloku przepływu danych umożliwić wykonywanie akcji końcowego po przetwarza wszystkie dane.</span><span class="sxs-lookup"><span data-stu-id="6719e-148">Add the following code to enable each dataflow block to perform a final action after it processes all data.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#5](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#5)]
 [!code-vb[TPLDataflow_Palindromes#5](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#5)]  
  
 <span data-ttu-id="6719e-149">Propagacja uzupełniania za pośrednictwem potoku, każde zadanie ukończenia ustawia kolejnego bloku przepływu danych stanu ukończenia.</span><span class="sxs-lookup"><span data-stu-id="6719e-149">To propagate completion through the pipeline, each completion task sets the next dataflow block to the completed state.</span></span> <span data-ttu-id="6719e-150">Na przykład gdy head potoku stanu ukończenia go przetwarza komunikaty buforowanego pozostałych i następnie uruchamia zadanie jego zakończenia, który określa drugi element członkowski potoku do stanu ukończenia.</span><span class="sxs-lookup"><span data-stu-id="6719e-150">For example, when the head of the pipeline is set to the completed state, it processes any remaining buffered messages and then runs its completion task, which sets the second member of the pipeline to the completed state.</span></span> <span data-ttu-id="6719e-151">Drugi element członkowski potoku z kolei przetwarza wszystkie pozostałe komunikaty buforowanego i następnie uruchamia zadanie jego zakończenia, który ustawia trzeci element członkowski potoku do stanu ukończenia.</span><span class="sxs-lookup"><span data-stu-id="6719e-151">The second member of the pipeline in turn processes any remaining buffered messages and then runs its completion task, which sets the third member of the pipeline to the completed state.</span></span> <span data-ttu-id="6719e-152">Ten proces jest kontynuowany do momentu zakończenia wszystkich elementów członkowskich w potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-152">This process continues until all members of the pipeline finish.</span></span> <span data-ttu-id="6719e-153">W tym przykładzie użyto `delegate` — słowo kluczowe (`Function` w [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) do definiowania zadań kontynuacji.</span><span class="sxs-lookup"><span data-stu-id="6719e-153">This example uses the `delegate` keyword (`Function` in [!INCLUDE[vbprvb](../../../includes/vbprvb-md.md)]) to define the continuation tasks.</span></span>  
  
## <a name="posting-data-to-the-pipeline"></a><span data-ttu-id="6719e-154">Przesyłanie danych do potoku</span><span class="sxs-lookup"><span data-stu-id="6719e-154">Posting Data to the Pipeline</span></span>  
 <span data-ttu-id="6719e-155">Dodaj następujący kod do publikowania adresu URL książki *Iliad Homer* nagłówek potoku przepływu danych.</span><span class="sxs-lookup"><span data-stu-id="6719e-155">Add the following code to post the URL of the book *The Iliad of Homer* to the head of the dataflow pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#6](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#6)]
 [!code-vb[TPLDataflow_Palindromes#6](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#6)]  
  
 <span data-ttu-id="6719e-156">W tym przykładzie użyto <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> synchronicznie wysyłać dane do head potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-156">This example uses <xref:System.Threading.Tasks.Dataflow.DataflowBlock.Post%2A?displayProperty=nameWithType> to synchronously send data to the head of the pipeline.</span></span> <span data-ttu-id="6719e-157">Użyj <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> metody muszą asynchronicznie wysyłania danych do węzła przepływu danych.</span><span class="sxs-lookup"><span data-stu-id="6719e-157">Use the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.SendAsync%2A?displayProperty=nameWithType> method when you must asynchronously send data to a dataflow node.</span></span>  
  
## <a name="completing-pipeline-activity"></a><span data-ttu-id="6719e-158">Kończenie działania potoku</span><span class="sxs-lookup"><span data-stu-id="6719e-158">Completing Pipeline Activity</span></span>  
 <span data-ttu-id="6719e-159">Dodaj następujący kod, aby oznaczyć head potoku jako ukończone.</span><span class="sxs-lookup"><span data-stu-id="6719e-159">Add the following code to mark the head of the pipeline as completed.</span></span> <span data-ttu-id="6719e-160">Head potoku uruchamia jego zadania kontynuacji po przetwarza wszystkie buforowane wiadomości.</span><span class="sxs-lookup"><span data-stu-id="6719e-160">The head of the pipeline runs its continuation task after it processes all buffered messages.</span></span> <span data-ttu-id="6719e-161">To zadanie kontynuacji propaguje stanu ukończenia za pośrednictwem potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-161">This continuation task propagates the completed state through the pipeline.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#7](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#7)]
 [!code-vb[TPLDataflow_Palindromes#7](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#7)]  
  
 <span data-ttu-id="6719e-162">W tym przykładzie wysyła jednego adresu URL za pośrednictwem potoku przepływu danych do przetworzenia.</span><span class="sxs-lookup"><span data-stu-id="6719e-162">This example sends one URL through the dataflow pipeline to be processed.</span></span> <span data-ttu-id="6719e-163">W przypadku wysłania więcej niż jedno wejście za pośrednictwem potoku, należy wywołać <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> metody po przesłaniu wszystkie dane wejściowe.</span><span class="sxs-lookup"><span data-stu-id="6719e-163">If you send more than one input through a pipeline, call the <xref:System.Threading.Tasks.Dataflow.IDataflowBlock.Complete%2A?displayProperty=nameWithType> method after you submit all the input.</span></span> <span data-ttu-id="6719e-164">Ten krok można pominąć, jeśli aplikacja nie ma dobrze zdefiniowanego punktu jaką danych nie jest już dostępny lub aplikacja nie ma czekać na zakończenie procesu.</span><span class="sxs-lookup"><span data-stu-id="6719e-164">You can omit this step if your application has no well-defined point at which data is no longer available or the application does not have to wait for the pipeline to finish.</span></span>  
  
## <a name="waiting-for-the-pipeline-to-finish"></a><span data-ttu-id="6719e-165">Oczekiwanie na zakończenie procesu</span><span class="sxs-lookup"><span data-stu-id="6719e-165">Waiting for the Pipeline to Finish</span></span>  
 <span data-ttu-id="6719e-166">Dodaj następujący kod, aby czekać na zakończenie procesu.</span><span class="sxs-lookup"><span data-stu-id="6719e-166">Add the following code to wait for the pipeline to finish.</span></span> <span data-ttu-id="6719e-167">Ponieważ w tym przykładzie użyto zadań kontynuacji propagację uzupełniania za pośrednictwem potoku, ogólną zakończeniu operacji po zakończeniu tail potoku.</span><span class="sxs-lookup"><span data-stu-id="6719e-167">Because this example uses continuation tasks to propagate completion through the pipeline, the overall operation is finished when the tail of the pipeline finishes.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#8](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#8)]
 [!code-vb[TPLDataflow_Palindromes#8](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#8)]  
  
 <span data-ttu-id="6719e-168">Możesz poczekać na zakończenie przepływu danych z dowolnego wątku lub wiele wątków jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="6719e-168">You can wait for dataflow completion from any thread or from multiple threads at the same time.</span></span>  
  
## <a name="the-complete-example"></a><span data-ttu-id="6719e-169">Kompletny przykład</span><span class="sxs-lookup"><span data-stu-id="6719e-169">The Complete Example</span></span>  
 <span data-ttu-id="6719e-170">Poniższy przykład przedstawia kompletny kod dla tego przewodnika.</span><span class="sxs-lookup"><span data-stu-id="6719e-170">The following example shows the complete code for this walkthrough.</span></span>  
  
 [!code-csharp[TPLDataflow_Palindromes#1](../../../samples/snippets/csharp/VS_Snippets_Misc/tpldataflow_palindromes/cs/dataflowpalindromes.cs#1)]
 [!code-vb[TPLDataflow_Palindromes#1](../../../samples/snippets/visualbasic/VS_Snippets_Misc/tpldataflow_palindromes/vb/dataflowpalindromes.vb#1)]  
  
## <a name="next-steps"></a><span data-ttu-id="6719e-171">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="6719e-171">Next Steps</span></span>  
 <span data-ttu-id="6719e-172">W tym przykładzie wysyła jeden adres URL do przetworzenia za pośrednictwem potoku przepływu danych.</span><span class="sxs-lookup"><span data-stu-id="6719e-172">This example sends one URL to process through the dataflow pipeline.</span></span> <span data-ttu-id="6719e-173">Po wysłaniu więcej niż jedną wartość wejściowa za pośrednictwem potoku można wprowadzać formularza równoległości do aplikacji, która jest podobny jak części może przenieść przez fabrykę samochodów.</span><span class="sxs-lookup"><span data-stu-id="6719e-173">If you send more than one input value through a pipeline, you can introduce a form of parallelism into your application that resembles how parts might move through an automobile factory.</span></span> <span data-ttu-id="6719e-174">Podczas pierwszego elementu członkowskiego potoku wysyła jego wynik do drugiego elementu członkowskiego, może przetwarzać innego elementu równolegle, jak drugi element członkowski przetwarza pierwszego wyniku.</span><span class="sxs-lookup"><span data-stu-id="6719e-174">When the first member of the pipeline sends its result to the second member, it can process another item in parallel as the second member processes the first result.</span></span>  
  
 <span data-ttu-id="6719e-175">Równoległość, który jest realizowane za pośrednictwem potoki przepływu danych jest nazywany *coarse-grained równoległości* ponieważ zazwyczaj składa się z mniej, bardziej złożone zadania.</span><span class="sxs-lookup"><span data-stu-id="6719e-175">The parallelism that is achieved by using dataflow pipelines is known as *coarse-grained parallelism* because it typically consists of fewer, larger tasks.</span></span> <span data-ttu-id="6719e-176">Można również użyć bardziej *szczegółowych równoległości* mniejsze, wykonywania short zadań w potoku przepływu danych.</span><span class="sxs-lookup"><span data-stu-id="6719e-176">You can also use a more *fine-grained parallelism* of smaller, short-running tasks in a dataflow pipeline.</span></span> <span data-ttu-id="6719e-177">W tym przykładzie `findReversedWords` używa elementu członkowskiego potoku <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> metody w celu przetworzenia wielu elementów na liście zadań równolegle.</span><span class="sxs-lookup"><span data-stu-id="6719e-177">In this example, the `findReversedWords` member of the pipeline uses the <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> method to process multiple items in the work list in parallel.</span></span> <span data-ttu-id="6719e-178">Stosowanie szczegółowych równoległości w potoku coarse-grained może zwiększyć ogólną przepustowość.</span><span class="sxs-lookup"><span data-stu-id="6719e-178">The use of fine-grained parallelism in a coarse-grained pipeline can improve overall throughput.</span></span>  
  
 <span data-ttu-id="6719e-179">Możesz również nawiązać połączenie bloku przepływu danych źródła wiele bloków docelowej do utworzenia *przepływu danych sieci*.</span><span class="sxs-lookup"><span data-stu-id="6719e-179">You can also connect a source dataflow block to multiple target blocks to create a *dataflow network*.</span></span> <span data-ttu-id="6719e-180">Przeciążone wersja <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> ma metodę <xref:System.Predicate%601> obiektu, który definiuje, czy blok docelowy akceptuje każdy komunikat na podstawie jego wartości.</span><span class="sxs-lookup"><span data-stu-id="6719e-180">The overloaded version of the <xref:System.Threading.Tasks.Dataflow.DataflowBlock.LinkTo%2A> method takes a <xref:System.Predicate%601> object that defines whether the target block accepts each message based on its value.</span></span> <span data-ttu-id="6719e-181">Większość przepływu danych bloku typy, które pełnić rolę źródła oferują komunikaty, aby wszystkie bloki docelowym, w kolejności, w jakiej były one połączone, dopóki jeden bloków akceptuje tej wiadomości.</span><span class="sxs-lookup"><span data-stu-id="6719e-181">Most dataflow block types that act as sources offer messages to all connected target blocks, in the order in which they were connected, until one of the blocks accepts that message.</span></span> <span data-ttu-id="6719e-182">Za pomocą tego mechanizmu filtrowania, można utworzyć systemów bloków przepływu danych połączonych bezpośrednie niektórych danych za pośrednictwem jednej ścieżki i innych danych za pomocą innej ścieżki.</span><span class="sxs-lookup"><span data-stu-id="6719e-182">By using this filtering mechanism, you can create systems of connected dataflow blocks that direct certain data through one path and other data through another path.</span></span> <span data-ttu-id="6719e-183">Na przykład, który używa filtrowania, aby utworzyć sieć przepływu danych, zobacz [wskazówki: Korzystanie z przepływu danych w aplikacji formularzy systemu Windows](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span><span class="sxs-lookup"><span data-stu-id="6719e-183">For an example that uses filtering to create a dataflow network, see [Walkthrough: Using Dataflow in a Windows Forms Application](../../../docs/standard/parallel-programming/walkthrough-using-dataflow-in-a-windows-forms-application.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6719e-184">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="6719e-184">See Also</span></span>  
 [<span data-ttu-id="6719e-185">Przepływ danych</span><span class="sxs-lookup"><span data-stu-id="6719e-185">Dataflow</span></span>](../../../docs/standard/parallel-programming/dataflow-task-parallel-library.md)
