---
title: Dla wielu platform przeznaczonych dla bibliotek platformy .NET
description: Zalecenia dotyczące najlepszych rozwiązań do tworzenia bibliotek .NET między platformami.
author: jamesnk
ms.author: mairaw
ms.date: 10/02/2018
ms.openlocfilehash: 6bd310f2e4b7a9bd7bb550ed9c7da9ebabdf64ba
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "61947027"
---
# <a name="cross-platform-targeting"></a><span data-ttu-id="4f180-103">Obsługiwane rozwiązania międzyplatformowe</span><span class="sxs-lookup"><span data-stu-id="4f180-103">Cross-platform targeting</span></span>

<span data-ttu-id="4f180-104">Nowoczesne .NET obsługuje wiele systemów operacyjnych i urządzeń.</span><span class="sxs-lookup"><span data-stu-id="4f180-104">Modern .NET supports multiple operating systems and devices.</span></span> <span data-ttu-id="4f180-105">Ważne jest dla platformy .NET bibliotek typu open source do obsługi tak wielu programistów, jak to możliwe, czy jest tworzone w witrynie sieci Web platformy ASP.NET hostowanej na platformie Azure lub gra .NET na platformie Unity.</span><span class="sxs-lookup"><span data-stu-id="4f180-105">It's important for .NET open-source libraries to support as many developers as possible, whether they're building an ASP.NET website hosted in Azure, or a .NET game in Unity.</span></span>

## <a name="net-standard"></a><span data-ttu-id="4f180-106">.NET Standard</span><span class="sxs-lookup"><span data-stu-id="4f180-106">.NET Standard</span></span>

<span data-ttu-id="4f180-107">.NET standard jest najlepszym sposobem dodania obsługi wielu platform w bibliotece platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="4f180-107">.NET Standard is the best way to add cross-platform support to a .NET library.</span></span> <span data-ttu-id="4f180-108">[.NET standard](../net-standard.md) to specyfikacja interfejsów API platformy .NET, które są dostępne na wszystkich implementacji .NET.</span><span class="sxs-lookup"><span data-stu-id="4f180-108">[.NET Standard](../net-standard.md) is a specification of .NET APIs that are available on all .NET implementations.</span></span> <span data-ttu-id="4f180-109">Przeznaczonych dla platformy .NET Standard umożliwia tworzenie godnych bibliotek, które są ograniczone do użycia interfejsów API, które znajdują się w danej wersji programu .NET Standard, co oznacza, że jest użyteczne przez wszystkie platformy, które implementują tę wersję .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="4f180-109">Targeting .NET Standard lets you produce libraries that are constrained to use APIs that are in a given version of .NET Standard, which means it's usable by all platforms that implement that version of the .NET Standard.</span></span>

<span data-ttu-id="4f180-110">![.NET Standard](./media/cross-platform-targeting/platforms-netstandard.png ".NET Standard")</span><span class="sxs-lookup"><span data-stu-id="4f180-110">![.NET Standard](./media/cross-platform-targeting/platforms-netstandard.png ".NET Standard")</span></span>

<span data-ttu-id="4f180-111">Przeznaczonych dla platformy .NET Standard i pomyślnie Kompilowanie projektu, nie gwarantuje, że biblioteka zostanie pomyślnie uruchomiona na wszystkich platformach:</span><span class="sxs-lookup"><span data-stu-id="4f180-111">Targeting .NET Standard, and successfully compiling your project, doesn't guarantee the library will run successfully on all platforms:</span></span>

1. <span data-ttu-id="4f180-112">Interfejsy API specyficzne dla platformy zakończy się niepowodzeniem na innych platformach.</span><span class="sxs-lookup"><span data-stu-id="4f180-112">Platform-specific APIs will fail on other platforms.</span></span> <span data-ttu-id="4f180-113">Na przykład <xref:Microsoft.Win32.Registry?displayProperty=nameWithType> będą się powieść po Windows i generują <xref:System.PlatformNotSupportedException> stosowania w dowolnym systemie operacyjnym.</span><span class="sxs-lookup"><span data-stu-id="4f180-113">For example, <xref:Microsoft.Win32.Registry?displayProperty=nameWithType> will succeed on Windows and throw <xref:System.PlatformNotSupportedException> when used on any other OS.</span></span>
2. <span data-ttu-id="4f180-114">Interfejsy API mogą zachowywać się inaczej.</span><span class="sxs-lookup"><span data-stu-id="4f180-114">APIs can behave differently.</span></span> <span data-ttu-id="4f180-115">Na przykład za odbicia interfejsów API jest mają różną charakterystykę wydajności w aplikacji używane kompilację ahead of time w systemie iOS lub platformy uniwersalnej systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="4f180-115">For example, reflection APIs have different performance characteristics when an application uses ahead-of-time compilation on iOS or UWP.</span></span>

> [!TIP]
> <span data-ttu-id="4f180-116">Zespół .NET [oferuje analizatora Roslyn](../analyzers/api-analyzer.md) Państwu pomóc odkryć potencjalne problemy.</span><span class="sxs-lookup"><span data-stu-id="4f180-116">The .NET team [offers a Roslyn analyzer](../analyzers/api-analyzer.md) to help you discover possible issues.</span></span>

<span data-ttu-id="4f180-117">**CZY ✔️** rozpoczynać się tym `netstandard2.0` docelowej.</span><span class="sxs-lookup"><span data-stu-id="4f180-117">**✔️ DO** start with including a `netstandard2.0` target.</span></span>

> <span data-ttu-id="4f180-118">Najbardziej ogólnego przeznaczenia biblioteki nie powinni interfejsów API poza .NET Standard 2.0.</span><span class="sxs-lookup"><span data-stu-id="4f180-118">Most general-purpose libraries should not need APIs outside of .NET Standard 2.0.</span></span> <span data-ttu-id="4f180-119">.NET standard 2.0 jest obsługiwane przez wszystkie nowoczesne platformy i jest to zalecany sposób obsługi wielu platform w jeden element docelowy.</span><span class="sxs-lookup"><span data-stu-id="4f180-119">.NET Standard 2.0 is supported by all modern platforms and is the recommended way to support multiple platforms with one target.</span></span>

<span data-ttu-id="4f180-120">**Należy UNIKAĆ ❌** tym `netstandard1.x` docelowej.</span><span class="sxs-lookup"><span data-stu-id="4f180-120">**❌ AVOID** including a `netstandard1.x` target.</span></span>

> <span data-ttu-id="4f180-121">.NET standard 1.x jest rozpowszechniany jako szczegółowego zestawu pakietów NuGet, tworzy wykres zależności duży pakiet, co skutkuje deweloperów pobierania partii pakietów podczas kompilacji.</span><span class="sxs-lookup"><span data-stu-id="4f180-121">.NET Standard 1.x is distributed as a granular set of NuGet packages, which creates a large package dependency graph and results in developers downloading a lot of packages when building.</span></span> <span data-ttu-id="4f180-122">Nowoczesnych platform .NET, w tym .NET Framework 4.6.1, platformy uniwersalnej systemu Windows i Xamarin, wszystkie obsługują .NET Standard 2.0.</span><span class="sxs-lookup"><span data-stu-id="4f180-122">Modern .NET platforms, including .NET Framework 4.6.1, UWP and Xamarin, all support .NET Standard 2.0.</span></span> <span data-ttu-id="4f180-123">Powinien dotyczyć tylko .NET Standard 1.x, jeśli jest wymagana do starszych platformą docelową.</span><span class="sxs-lookup"><span data-stu-id="4f180-123">You should only target .NET Standard 1.x if you specifically need to target an older platform.</span></span>

<span data-ttu-id="4f180-124">**CZY ✔️** obejmują `netstandard2.0` docelowe w razie potrzeby `netstandard1.x` docelowej.</span><span class="sxs-lookup"><span data-stu-id="4f180-124">**✔️ DO** include a `netstandard2.0` target if you require a `netstandard1.x` target.</span></span>

> <span data-ttu-id="4f180-125">Wszystkie platformy .NET Standard 2.0 obsługi użyje `netstandard2.0` docelową i korzyści z posiadania wykres mniejszych pakietów, gdy starszych platformach będą nadal działać i wrócić korzystania z `netstandard1.x` docelowej.</span><span class="sxs-lookup"><span data-stu-id="4f180-125">All platforms supporting .NET Standard 2.0 will use the `netstandard2.0` target and benefit from having a smaller package graph while older platforms will still work and fall back to using the `netstandard1.x` target.</span></span>

<span data-ttu-id="4f180-126">**❌ NIE** obejmują .NET Standard docelowy, jeśli biblioteka opiera się na modelu specyficznego dla platformy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4f180-126">**❌ DO NOT** include a .NET Standard target if the library relies on a platform-specific app model.</span></span>

> <span data-ttu-id="4f180-127">Na przykład biblioteki zestawu narzędzi kontrolek platformy uniwersalnej systemu Windows jest zależny od modelu aplikacji, która jest dostępna tylko na platformy uniwersalnej systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="4f180-127">For example, a UWP control toolkit library depends on an app model that is only available on UWP.</span></span> <span data-ttu-id="4f180-128">Specyficzne dla modelu aplikacji interfejsów API nie będą dostępne w programie .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="4f180-128">App model specific APIs will not be available in .NET Standard.</span></span>

## <a name="multi-targeting"></a><span data-ttu-id="4f180-129">Wielowersyjność kodu</span><span class="sxs-lookup"><span data-stu-id="4f180-129">Multi-targeting</span></span>

<span data-ttu-id="4f180-130">Czasami zachodzi potrzeba dostęp do interfejsów API specyficznych dla framework z bibliotek.</span><span class="sxs-lookup"><span data-stu-id="4f180-130">Sometimes you need to access framework-specific APIs from your libraries.</span></span> <span data-ttu-id="4f180-131">Najlepszym sposobem wywoływania interfejsów API specyficznych dla framework używa wielowersyjność kodu, który kompiluje projekt dla wielu [platform docelowych .NET](../frameworks.md) , a nie tylko jednego.</span><span class="sxs-lookup"><span data-stu-id="4f180-131">The best way to call framework-specific APIs is using multi-targeting, which builds your project for many [.NET target frameworks](../frameworks.md) rather than for just one.</span></span>

<span data-ttu-id="4f180-132">Można włączyć osłony dla klientów z konieczności tworzenia dla poszczególnych platform, należy dążyć mieć .NET Standard danych wyjściowych, a także co najmniej jeden właściwa dla struktury danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="4f180-132">To shield your consumers from having to build for individual frameworks, you should strive to have a .NET Standard output plus one or more framework-specific outputs.</span></span> <span data-ttu-id="4f180-133">Przy użyciu wielowersyjności kodu wszystkie zestawy są spakowane w jednym pakiecie NuGet.</span><span class="sxs-lookup"><span data-stu-id="4f180-133">With multi-targeting, all assemblies are packaged inside a single NuGet package.</span></span> <span data-ttu-id="4f180-134">Konsumenci następnie tworzyć odwołania do tego samego pakietu i NuGet wybierze odpowiednią implementacji.</span><span class="sxs-lookup"><span data-stu-id="4f180-134">Consumers can then reference the same package and NuGet will pick the appropriate implementation.</span></span> <span data-ttu-id="4f180-135">Biblioteki .NET Standard służy jako rezerwowej biblioteki, który jest używany wszędzie, z wyjątkiem przypadków, gdy pakiet NuGet oferuje wykonania określonej platformy.</span><span class="sxs-lookup"><span data-stu-id="4f180-135">Your .NET Standard library serves as the fallback library that is used everywhere, except for the cases where your NuGet package offers a framework-specific implementation.</span></span> <span data-ttu-id="4f180-136">Wielowersyjność kodu pozwala użyć kompilacji warunkowej w kodzie i wywoływać interfejsy API specyficzne dla framework.</span><span class="sxs-lookup"><span data-stu-id="4f180-136">Multi-targeting allows you to use conditional compilation in your code and call framework-specific APIs.</span></span>

<span data-ttu-id="4f180-137">![Pakiet NuGet za pomocą wielu zestawów](./media/cross-platform-targeting/nuget-package-multiple-assemblies.png "pakietu NuGet wraz z wielu zestawów")</span><span class="sxs-lookup"><span data-stu-id="4f180-137">![NuGet package with multiple assemblies](./media/cross-platform-targeting/nuget-package-multiple-assemblies.png "NuGet package with multiple assemblies")</span></span>

<span data-ttu-id="4f180-138">**ROZWAŻ ✔️** obsługiwane implementacje platformy .NET, oprócz .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="4f180-138">**✔️ CONSIDER** targeting .NET implementations in addition to .NET Standard.</span></span>

> <span data-ttu-id="4f180-139">Obsługiwane implementacje platformy .NET umożliwia wywoływanie interfejsów API specyficznych dla platformy, które znajdują się poza .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="4f180-139">Targeting .NET implementations allows you to call platform-specific APIs that are outside of .NET Standard.</span></span>
>
> <span data-ttu-id="4f180-140">Gdy to zrobisz, nie porzucić pomocy technicznej dla platformy .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="4f180-140">Do not drop support for .NET Standard when you do this.</span></span> <span data-ttu-id="4f180-141">Zamiast tego należy zgłaszać z wdrożenia i oferuje możliwości interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="4f180-141">Instead, throw from the implementation and offer capability APIs.</span></span> <span data-ttu-id="4f180-142">W ten sposób biblioteki mogą być używane w dowolnym miejscu i obsługuje środowisko uruchomieniowe światła w górę funkcji.</span><span class="sxs-lookup"><span data-stu-id="4f180-142">This way, your library can be used anywhere and supports runtime light-up of features.</span></span>

<span data-ttu-id="4f180-143">**Należy UNIKAĆ ❌** wielowersyjnością kodu — a także przeznaczonych dla platformy .NET Standard, jeśli kod źródłowy jest taka sama dla wszystkich obiektów docelowych.</span><span class="sxs-lookup"><span data-stu-id="4f180-143">**❌ AVOID** multi-targeting as well as targeting .NET Standard, if your source code is the same for all targets.</span></span>

> <span data-ttu-id="4f180-144">Zestaw .NET Standard automatycznie będą używane przez NuGet.</span><span class="sxs-lookup"><span data-stu-id="4f180-144">The .NET Standard assembly will automatically be used by NuGet.</span></span> <span data-ttu-id="4f180-145">Przeznaczone dla poszczególnych implementacji .NET zwiększa `*.nupkg` rozmiar bez żadnych korzyści.</span><span class="sxs-lookup"><span data-stu-id="4f180-145">Targeting individual .NET implementations increases the `*.nupkg` size for no benefit.</span></span>

<span data-ttu-id="4f180-146">**✔️ ROZWAŻ** Dodawanie elementu docelowego dla `net461` po użytkownik oferowane `netstandard2.0` docelowej.</span><span class="sxs-lookup"><span data-stu-id="4f180-146">**✔️ CONSIDER** adding a target for `net461` when you're offering a `netstandard2.0` target.</span></span> 

> <span data-ttu-id="4f180-147">Przy użyciu platformy .NET Standard 2.0 z .NET Framework ma kilka problemów, które zostały rozwiązane w programie .NET Framework 4.7.2.</span><span class="sxs-lookup"><span data-stu-id="4f180-147">Using .NET Standard 2.0 from .NET Framework has some issues that were addressed in .NET Framework 4.7.2.</span></span> <span data-ttu-id="4f180-148">Możesz poprawić środowisko dla deweloperów, którzy nadal korzystają z platformy .NET Framework 4.6.1 — 4.7.1, oferując im plik binarny, który jest przeznaczony dla platformy .NET Framework 4.6.1.</span><span class="sxs-lookup"><span data-stu-id="4f180-148">You can improve the experience for developers that are still on .NET Framework 4.6.1 - 4.7.1 by offering them a binary that is built for .NET Framework 4.6.1.</span></span>

<span data-ttu-id="4f180-149">**CZY ✔️** dystrybucji przy użyciu pakietu NuGet biblioteki.</span><span class="sxs-lookup"><span data-stu-id="4f180-149">**✔️ DO** distribute your library using a NuGet package.</span></span>

> <span data-ttu-id="4f180-150">NuGet zaznaczy najlepsze docelowego dla deweloperów i zabezpieczyć je konieczności wyboru odpowiedniej implementacji.</span><span class="sxs-lookup"><span data-stu-id="4f180-150">NuGet will select the best target for the developer and shield them having to pick the appropriate implementation.</span></span>

<span data-ttu-id="4f180-151">**CZY ✔️** przy użyciu pliku projektu `TargetFrameworks` właściwość równoczesną wielowersyjnością kodu.</span><span class="sxs-lookup"><span data-stu-id="4f180-151">**✔️ DO** use a project file's `TargetFrameworks` property when multi-targeting.</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <!-- This project will output netstandard2.0 and net461 assemblies -->
    <TargetFrameworks>netstandard2.0;net461</TargetFrameworks>
  </PropertyGroup>
</Project>
```

<span data-ttu-id="4f180-152">**ROZWAŻ ✔️** przy użyciu [MSBuild.Sdk.Extras](https://github.com/onovotny/MSBuildSdkExtras) równoczesną wielowersyjnością kodu platformy uniwersalnej systemu Windows i Xamarin jak znacząco upraszcza pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="4f180-152">**✔️ CONSIDER** using [MSBuild.Sdk.Extras](https://github.com/onovotny/MSBuildSdkExtras) when multi-targeting for UWP and Xamarin as it greatly simplifies your project file.</span></span>

## <a name="older-targets"></a><span data-ttu-id="4f180-153">Starsze elementów docelowych</span><span class="sxs-lookup"><span data-stu-id="4f180-153">Older targets</span></span>

<span data-ttu-id="4f180-154">.NET wspomaga określania wartości docelowej wersji systemu .NET Framework, które są długie poza pomocy technicznej, a także platformy, które są już powszechnie używane.</span><span class="sxs-lookup"><span data-stu-id="4f180-154">.NET supports targeting versions of the .NET Framework that are long out of support as well as platforms that are no longer commonly used.</span></span> <span data-ttu-id="4f180-155">Brak wartości w trakcie wprowadzania pracy biblioteki na jak wiele elementów docelowych jak to możliwe, konieczności obejść Brak interfejsów API można dodać znaczne obciążenie.</span><span class="sxs-lookup"><span data-stu-id="4f180-155">While there's value in making your library work on as many targets as possible, having to work around missing APIs can add significant overhead.</span></span> <span data-ttu-id="4f180-156">My uważamy pewność, że platform nie są już warte docelowych, biorąc pod uwagę ich zasięgu i ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="4f180-156">We believe certain frameworks are no longer worth targeting, considering their reach and limitations.</span></span>

<span data-ttu-id="4f180-157">**❌ NIE** obejmują docelowej biblioteki klas przenośnych (PCL).</span><span class="sxs-lookup"><span data-stu-id="4f180-157">**❌ DO NOT** include a Portable Class Library (PCL) target.</span></span> <span data-ttu-id="4f180-158">Na przykład `portable-net45+win8+wpa81+wp8`.</span><span class="sxs-lookup"><span data-stu-id="4f180-158">For example, `portable-net45+win8+wpa81+wp8`.</span></span>

> <span data-ttu-id="4f180-159">.NET standard jest nowoczesny sposób obsługi bibliotek programu .NET dla wielu platform i zastępuje PCLs.</span><span class="sxs-lookup"><span data-stu-id="4f180-159">.NET Standard is the modern way to support cross-platform .NET libraries and replaces PCLs.</span></span>

<span data-ttu-id="4f180-160">**❌ NIE** obejmują elementy docelowe dla platform .NET, które nie są już obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="4f180-160">**❌ DO NOT** include targets for .NET platforms that are no longer supported.</span></span> <span data-ttu-id="4f180-161">Na przykład `SL4`, `WP`.</span><span class="sxs-lookup"><span data-stu-id="4f180-161">For example, `SL4`, `WP`.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="4f180-162">[Poprzednie](get-started.md)
>[dalej](strong-naming.md)</span><span class="sxs-lookup"><span data-stu-id="4f180-162">[Previous](get-started.md)
[Next](strong-naming.md)</span></span>
