---
title: Używanie wątków i wątkowości
ms.date: 08/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- threading [.NET Framework], about threading
- managed threading
ms.assetid: 9b5ec2cd-121b-4d49-b075-222cf26f2344
ms.openlocfilehash: 14159ff9a6ca39108aec14b0ad46004e95fa3cf2
ms.sourcegitcommit: 961ec21c22d2f1d55c9cc8a7edf2ade1d1fd92e3
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/02/2020
ms.locfileid: "80588432"
---
# <a name="using-threads-and-threading"></a><span data-ttu-id="b68f1-102">Używanie wątków i wątkowości</span><span class="sxs-lookup"><span data-stu-id="b68f1-102">Using threads and threading</span></span>

<span data-ttu-id="b68f1-103">Za pomocą platformy .NET można pisać aplikacje, które wykonują wiele operacji w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="b68f1-103">With .NET, you can write applications that perform multiple operations at the same time.</span></span> <span data-ttu-id="b68f1-104">Operacje z potencjałem wstrzymywania innych operacji można wykonać na oddzielnych wątkach, proces znany jako *wielowątkowe* lub *wolne wątki*.</span><span class="sxs-lookup"><span data-stu-id="b68f1-104">Operations with the potential of holding up other operations can execute on separate threads, a process known as *multithreading* or *free threading*.</span></span>  
  
<span data-ttu-id="b68f1-105">Aplikacje korzystające z wielowątkowych funkcji są bardziej responsywne na dane wejściowe użytkownika, ponieważ interfejs użytkownika pozostaje aktywny, ponieważ zadania wymagające dużej ilości procesora są wykonywane w oddzielnych wątkach.</span><span class="sxs-lookup"><span data-stu-id="b68f1-105">Applications that use multithreading are more responsive to user input because the user interface stays active as processor-intensive tasks execute on separate threads.</span></span> <span data-ttu-id="b68f1-106">Wielowątkowość jest również przydatna podczas tworzenia aplikacji skalowalnych, ponieważ można dodawać wątki w miarę zwiększania obciążenia.</span><span class="sxs-lookup"><span data-stu-id="b68f1-106">Multithreading is also useful when you create scalable applications, because you can add threads as the workload increases.</span></span>

> [!NOTE]
> <span data-ttu-id="b68f1-107">Jeśli potrzebujesz większej kontroli nad zachowaniem wątków aplikacji, możesz samodzielnie zarządzać wątkami.</span><span class="sxs-lookup"><span data-stu-id="b68f1-107">If you need more control over the behavior of the application's threads, you can manage the threads yourself.</span></span> <span data-ttu-id="b68f1-108">Jednak począwszy od .NET Framework 4, programowanie <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> wielowątkowe <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> jest znacznie uproszczone z klasami [i, Parallel LINQ (PLINQ),](../parallel-programming/introduction-to-plinq.md)nowymi klasami równoczesnych kolekcji w obszarze <xref:System.Collections.Concurrent?displayProperty=nameWithType> nazw i nowym modelem programowania, który jest oparty na koncepcji zadań, a nie wątków.</span><span class="sxs-lookup"><span data-stu-id="b68f1-108">However, starting with the .NET Framework 4, multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> classes, [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md), new concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and a new programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="b68f1-109">Aby uzyskać więcej informacji, zobacz [Programowanie równoległe](../parallel-programming/index.md) i [biblioteka równoległa zadań (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="b68f1-109">For more information, see [Parallel Programming](../parallel-programming/index.md) and [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md).</span></span>

## <a name="how-to-create-and-start-a-new-thread"></a><span data-ttu-id="b68f1-110">Jak: Tworzenie i uruchamianie nowego wątku</span><span class="sxs-lookup"><span data-stu-id="b68f1-110">How to: Create and start a new thread</span></span>

<span data-ttu-id="b68f1-111">Utworzyć nowy wątek, tworząc nowe <xref:System.Threading.Thread?displayProperty=nameWithType> wystąpienie klasy i podając nazwę metody, którą chcesz wykonać w nowym wątku do konstruktora.</span><span class="sxs-lookup"><span data-stu-id="b68f1-111">You create a new thread by creating a new instance of the <xref:System.Threading.Thread?displayProperty=nameWithType> class and providing the name of the method that you want to execute on a new thread to the constructor.</span></span> <span data-ttu-id="b68f1-112">Aby rozpocząć utworzony wątek, należy wywołać <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> metodę.</span><span class="sxs-lookup"><span data-stu-id="b68f1-112">To start a created thread, call the <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b68f1-113">Aby uzyskać więcej informacji i przykładów, zobacz [Tworzenie wątków i przekazywanie danych w czasie rozpoczęcia](creating-threads-and-passing-data-at-start-time.md) artykułu i odwołania <xref:System.Threading.Thread> interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b68f1-113">For more information and examples, see the [Creating threads and passing data at start time](creating-threads-and-passing-data-at-start-time.md) article and the <xref:System.Threading.Thread> API reference.</span></span>

## <a name="how-to-stop-a-thread"></a><span data-ttu-id="b68f1-114">Jak: Zatrzymaj wątek</span><span class="sxs-lookup"><span data-stu-id="b68f1-114">How to: Stop a thread</span></span>

<span data-ttu-id="b68f1-115">Aby zakończyć wykonywanie wątku, <xref:System.Threading.CancellationToken?displayProperty=nameWithType>należy użyć pliku .</span><span class="sxs-lookup"><span data-stu-id="b68f1-115">To terminate the execution of a thread, use the <xref:System.Threading.CancellationToken?displayProperty=nameWithType>.</span></span> <span data-ttu-id="b68f1-116">Zapewnia ujednolicony sposób, aby zatrzymać wątki wspólnie.</span><span class="sxs-lookup"><span data-stu-id="b68f1-116">It provides a unified way to stop threads cooperatively.</span></span> <span data-ttu-id="b68f1-117">Aby uzyskać więcej informacji, zobacz [Anulowanie w wątkach zarządzanych](cancellation-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="b68f1-117">For more information, see [Cancellation in managed threads](cancellation-in-managed-threads.md).</span></span>

<span data-ttu-id="b68f1-118">Czasami nie jest możliwe, aby zatrzymać wątku wspólnie, ponieważ uruchamia kod innej firmy nie przeznaczony do anulowania współpracy.</span><span class="sxs-lookup"><span data-stu-id="b68f1-118">Sometimes it is not possible to stop a thread cooperatively, because it runs third-party code not designed for cooperative cancellation.</span></span> <span data-ttu-id="b68f1-119">W takim przypadku można zakończyć jego wykonanie przymusowo.</span><span class="sxs-lookup"><span data-stu-id="b68f1-119">In this case, you might want to terminate its execution forcibly.</span></span> <span data-ttu-id="b68f1-120">Aby zakończyć wykonywanie wątku na przymusowo, w .NET <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> Framework można użyć metody.</span><span class="sxs-lookup"><span data-stu-id="b68f1-120">To terminate the execution of a thread forcibly, in .NET Framework you can use the <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b68f1-121">Ta metoda podnosi <xref:System.Threading.ThreadAbortException> na wątku, na którym jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="b68f1-121">That method raises a <xref:System.Threading.ThreadAbortException> on the thread on which it's invoked.</span></span> <span data-ttu-id="b68f1-122">Aby uzyskać więcej informacji, zobacz [Niszczenie wątków](destroying-threads.md).</span><span class="sxs-lookup"><span data-stu-id="b68f1-122">For more information, see [Destroying threads](destroying-threads.md).</span></span> <span data-ttu-id="b68f1-123">Metoda <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> nie jest obsługiwana w .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b68f1-123">The <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method is not supported in .NET Core.</span></span> <span data-ttu-id="b68f1-124">Jeśli chcesz zakończyć wykonywanie kodu innej firmy na przymusowo w .NET Core, uruchom <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType>go w oddzielnym procesie i użyj .</span><span class="sxs-lookup"><span data-stu-id="b68f1-124">If you need to terminate the execution of third-party code forcibly in .NET Core, run it in the separate process and use <xref:System.Diagnostics.Process.Kill%2A?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="b68f1-125">Nie <xref:System.Threading.CancellationToken?displayProperty=nameWithType> jest dostępna przed .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="b68f1-125">The <xref:System.Threading.CancellationToken?displayProperty=nameWithType> is not available before .NET Framework 4.</span></span> <span data-ttu-id="b68f1-126">Aby zatrzymać wątek w starszych wersjach programu .NET Framework, należy zaimplementować anulowanie współpracy ręcznie przy użyciu technik synchronizacji wątków.</span><span class="sxs-lookup"><span data-stu-id="b68f1-126">To stop a thread in older .NET Framework versions, you should implement the cooperative cancellation manually using the thread synchronization techniques.</span></span> <span data-ttu-id="b68f1-127">Na przykład można utworzyć pole `shouldStop` logiczne lotne i użyć go do żądania kodu wykonywanego przez wątek, aby zatrzymać.</span><span class="sxs-lookup"><span data-stu-id="b68f1-127">For example, you can create the volatile boolean field `shouldStop` and use it to request the code executed by the thread to stop.</span></span> <span data-ttu-id="b68f1-128">Aby uzyskać więcej [volatile](../../csharp/language-reference/keywords/volatile.md) informacji, zobacz <xref:System.Threading.Volatile?displayProperty=nameWithType>volatile w języku C# Reference i .</span><span class="sxs-lookup"><span data-stu-id="b68f1-128">For more information, see [volatile](../../csharp/language-reference/keywords/volatile.md) in C# Reference and <xref:System.Threading.Volatile?displayProperty=nameWithType>.</span></span>

<span data-ttu-id="b68f1-129">Użyj <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> metody, aby wątek wywołujący czekać na zakończenie wątku jest zatrzymany.</span><span class="sxs-lookup"><span data-stu-id="b68f1-129">Use the <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> method to make the calling thread wait for the termination of the thread being stopped.</span></span>

## <a name="how-to-pause-or-interrupt-a-thread"></a><span data-ttu-id="b68f1-130">Jak: Wstrzymanie lub przerwanie wątku</span><span class="sxs-lookup"><span data-stu-id="b68f1-130">How to: Pause or interrupt a thread</span></span>

<span data-ttu-id="b68f1-131">Metoda służy <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> do wstrzymania bieżącego wątku przez określony czas.</span><span class="sxs-lookup"><span data-stu-id="b68f1-131">You use the <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> method to pause the current thread for a specified amount of time.</span></span> <span data-ttu-id="b68f1-132">Zablokowany wątek można przerwać, wywołując <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> metodę.</span><span class="sxs-lookup"><span data-stu-id="b68f1-132">You can interrupt a blocked thread by calling the <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b68f1-133">Aby uzyskać więcej informacji, zobacz [Wstrzymywanie i przerywanie wątków](pausing-and-resuming-threads.md).</span><span class="sxs-lookup"><span data-stu-id="b68f1-133">For more information, see [Pausing and interrupting threads](pausing-and-resuming-threads.md).</span></span>

## <a name="thread-properties"></a><span data-ttu-id="b68f1-134">Właściwości gwintu</span><span class="sxs-lookup"><span data-stu-id="b68f1-134">Thread properties</span></span>

<span data-ttu-id="b68f1-135">W poniższej tabeli <xref:System.Threading.Thread> przedstawiono niektóre właściwości:</span><span class="sxs-lookup"><span data-stu-id="b68f1-135">The following table presents some of the <xref:System.Threading.Thread> properties:</span></span>  
  
|<span data-ttu-id="b68f1-136">Właściwość</span><span class="sxs-lookup"><span data-stu-id="b68f1-136">Property</span></span>|<span data-ttu-id="b68f1-137">Opis</span><span class="sxs-lookup"><span data-stu-id="b68f1-137">Description</span></span>|  
|--------------|-----------|  
|<xref:System.Threading.Thread.IsAlive%2A>|<span data-ttu-id="b68f1-138">Zwraca, `true` jeśli wątek został uruchomiony i nie został jeszcze zakończony normalnie lub przerwany.</span><span class="sxs-lookup"><span data-stu-id="b68f1-138">Returns `true` if a thread has been started and has not yet terminated normally or aborted.</span></span>|  
|<xref:System.Threading.Thread.IsBackground%2A>|<span data-ttu-id="b68f1-139">Pobiera lub ustawia wartość logiczną, która wskazuje, jeśli wątek jest wątku tła.</span><span class="sxs-lookup"><span data-stu-id="b68f1-139">Gets or sets a Boolean that indicates if a thread is a background thread.</span></span> <span data-ttu-id="b68f1-140">Wątki tła są jak wątki pierwszego planu, ale wątek tła nie uniemożliwia zatrzymywania procesu.</span><span class="sxs-lookup"><span data-stu-id="b68f1-140">Background threads are like foreground threads, but a background thread doesn't prevent a process from stopping.</span></span> <span data-ttu-id="b68f1-141">Po zatrzymaniu wszystkich wątków pierwszego planu, które należą do procesu, środowisko <xref:System.Threading.Thread.Abort%2A> uruchomieniowe języka wspólnego kończy proces, wywołując metodę w wątkach w tle, które są nadal żywe.</span><span class="sxs-lookup"><span data-stu-id="b68f1-141">Once all foreground threads that belong to a process have stopped, the common language runtime ends the process by calling the <xref:System.Threading.Thread.Abort%2A> method on background threads that are still alive.</span></span> <span data-ttu-id="b68f1-142">Aby uzyskać więcej informacji, zobacz [Wątki pierwszego planu i wątki w tle](foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="b68f1-142">For more information, see [Foreground and Background Threads](foreground-and-background-threads.md).</span></span>|  
|<xref:System.Threading.Thread.Name%2A>|<span data-ttu-id="b68f1-143">Pobiera lub ustawia nazwę wątku.</span><span class="sxs-lookup"><span data-stu-id="b68f1-143">Gets or sets the name of a thread.</span></span> <span data-ttu-id="b68f1-144">Najczęściej używane do odnajdowania poszczególnych wątków podczas debugowania.</span><span class="sxs-lookup"><span data-stu-id="b68f1-144">Most frequently used to discover individual threads when you debug.</span></span>|  
|<xref:System.Threading.Thread.Priority%2A>|<span data-ttu-id="b68f1-145">Pobiera lub <xref:System.Threading.ThreadPriority> ustawia wartość, która jest używana przez system operacyjny do ustalania priorytetów planowania wątków.</span><span class="sxs-lookup"><span data-stu-id="b68f1-145">Gets or sets a <xref:System.Threading.ThreadPriority> value that is used by the operating system to prioritize thread scheduling.</span></span> <span data-ttu-id="b68f1-146">Aby uzyskać więcej informacji, zobacz <xref:System.Threading.ThreadPriority> [Planowanie wątków](scheduling-threads.md) i odwołanie.</span><span class="sxs-lookup"><span data-stu-id="b68f1-146">For more information, see [Scheduling threads](scheduling-threads.md) and the <xref:System.Threading.ThreadPriority> reference.</span></span>|  
|<xref:System.Threading.Thread.ThreadState%2A>|<span data-ttu-id="b68f1-147">Pobiera <xref:System.Threading.ThreadState> wartość zawierającą bieżące stany wątku.</span><span class="sxs-lookup"><span data-stu-id="b68f1-147">Gets a <xref:System.Threading.ThreadState> value containing the current states of a thread.</span></span>|  

## <a name="see-also"></a><span data-ttu-id="b68f1-148">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="b68f1-148">See also</span></span>

- <xref:System.Threading.Thread?displayProperty=nameWithType>
- [<span data-ttu-id="b68f1-149">Wątki i wątkowość</span><span class="sxs-lookup"><span data-stu-id="b68f1-149">Threads and Threading</span></span>](threads-and-threading.md)
- [<span data-ttu-id="b68f1-150">Programowanie równoległe</span><span class="sxs-lookup"><span data-stu-id="b68f1-150">Parallel Programming</span></span>](../parallel-programming/index.md)
