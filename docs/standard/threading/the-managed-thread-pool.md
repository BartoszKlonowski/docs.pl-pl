---
title: Zarządzana pula wątków
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- thread pooling [.NET Framework]
- thread pools [.NET Framework]
- threading [.NET Framework], thread pool
- threading [.NET Framework], pooling
ms.assetid: 2be05b06-a42e-4c9d-a739-96c21d673927
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 3894229ff5561e50d42a36f576a89ee7bf01c067
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
---
# <a name="the-managed-thread-pool"></a><span data-ttu-id="b988b-102">Zarządzana pula wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-102">The Managed Thread Pool</span></span>
<span data-ttu-id="b988b-103"><xref:System.Threading.ThreadPool> Klasa udostępnia aplikacji dla puli wątków roboczych, które są zarządzane przez system, umożliwiając skoncentrować się na zadania aplikacji, a nie wątku zarządzania.</span><span class="sxs-lookup"><span data-stu-id="b988b-103">The <xref:System.Threading.ThreadPool> class provides your application with a pool of worker threads that are managed by the system, allowing you to concentrate on application tasks rather than thread management.</span></span> <span data-ttu-id="b988b-104">Jeśli masz krótkie zadania, które wymagają przetwarzania w tle zarządzana Pula wątków to prosty sposób korzystać z wielu wątków.</span><span class="sxs-lookup"><span data-stu-id="b988b-104">If you have short tasks that require background processing, the managed thread pool is an easy way to take advantage of multiple threads.</span></span> <span data-ttu-id="b988b-105">Na przykład, począwszy od [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] można utworzyć <xref:System.Threading.Tasks.Task> i <xref:System.Threading.Tasks.Task%601> obiekty, do których wykonywania zadań asynchronicznych w wątku puli wątków.</span><span class="sxs-lookup"><span data-stu-id="b988b-105">For example, beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)] you can create <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> objects, which perform asynchronous tasks on thread pool threads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b988b-106">Począwszy od [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], znacznie zwiększona przepływność puli wątków trzy kluczowe, które zostały zidentyfikowane jako wąskich gardeł w poprzednich wersjach [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]: Kolejkowanie zadań, wysyłki wątków z puli wątków i podczas wysyłania operacji We/Wy wątki ukończenia.</span><span class="sxs-lookup"><span data-stu-id="b988b-106">Starting with the [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], the throughput of the thread pool is significantly improved in three key areas that were identified as bottlenecks in previous releases of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)]: queuing tasks, dispatching thread pool threads, and dispatching I/O completion threads.</span></span> <span data-ttu-id="b988b-107">Aby używać tej funkcji, należy docelowy aplikacji [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="b988b-107">To use this functionality, your application should target the [!INCLUDE[net_v35_long](../../../includes/net-v35-long-md.md)] or later.</span></span>  
  
 <span data-ttu-id="b988b-108">Zadania w tle wchodzących w interakcję z interfejsem użytkownika, .NET Framework w wersji 2.0 zawiera także <xref:System.ComponentModel.BackgroundWorker> klasy, która komunikuje się za pomocą zdarzenia wywoływane w wątku interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b988b-108">For background tasks that interact with the user interface, the .NET Framework version 2.0 also provides the <xref:System.ComponentModel.BackgroundWorker> class, which communicates using events raised on the user interface thread.</span></span>  
  
 <span data-ttu-id="b988b-109">.NET Framework używa wątków z puli wątków dla wielu celów, w tym asynchroniczne zakończenia We/Wy, wywołania zwrotne czasomierza, w zarejestrowany oczekiwania operacji, wywołań metod asynchronicznych przy użyciu delegatów, i <xref:System.Net> połączeń gniazda.</span><span class="sxs-lookup"><span data-stu-id="b988b-109">The .NET Framework uses thread pool threads for many purposes, including asynchronous I/O completion, timer callbacks, registered wait operations, asynchronous method calls using delegates, and <xref:System.Net> socket connections.</span></span>  
  
## <a name="when-not-to-use-thread-pool-threads"></a><span data-ttu-id="b988b-110">Kiedy nie należy używać wątków z puli wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-110">When Not to Use Thread Pool Threads</span></span>  
 <span data-ttu-id="b988b-111">Istnieje kilka scenariuszy, w których jest odpowiednie do tworzenia i zarządzania własnych wątków zamiast wątków z puli wątków:</span><span class="sxs-lookup"><span data-stu-id="b988b-111">There are several scenarios in which it is appropriate to create and manage your own threads instead of using thread pool threads:</span></span>  
  
-   <span data-ttu-id="b988b-112">Wymagane jest wątku pierwszego planu.</span><span class="sxs-lookup"><span data-stu-id="b988b-112">You require a foreground thread.</span></span>  
  
-   <span data-ttu-id="b988b-113">Wymagane jest wątku określonego priorytetem.</span><span class="sxs-lookup"><span data-stu-id="b988b-113">You require a thread to have a particular priority.</span></span>  
  
-   <span data-ttu-id="b988b-114">Masz zadań, które powodują wątków, które mają być blokowane przez dłuższy czas.</span><span class="sxs-lookup"><span data-stu-id="b988b-114">You have tasks that cause the thread to block for long periods of time.</span></span> <span data-ttu-id="b988b-115">Pula wątków ma maksymalną liczbę wątków, więc duża liczba zablokowanych wątków z puli wątków może uniemożliwić uruchomienie zadania.</span><span class="sxs-lookup"><span data-stu-id="b988b-115">The thread pool has a maximum number of threads, so a large number of blocked thread pool threads might prevent tasks from starting.</span></span>  
  
-   <span data-ttu-id="b988b-116">Należy umieścić wątków w jednowątkowym apartamencie.</span><span class="sxs-lookup"><span data-stu-id="b988b-116">You need to place threads into a single-threaded apartment.</span></span> <span data-ttu-id="b988b-117">Wszystkie <xref:System.Threading.ThreadPool> wątki są wielowątkowe apartamentu.</span><span class="sxs-lookup"><span data-stu-id="b988b-117">All <xref:System.Threading.ThreadPool> threads are in the multithreaded apartment.</span></span>  
  
-   <span data-ttu-id="b988b-118">Należy mieć skojarzony z wątkiem stabilna tożsamość lub przeznaczyć wątku zadania.</span><span class="sxs-lookup"><span data-stu-id="b988b-118">You need to have a stable identity associated with the thread, or to dedicate a thread to a task.</span></span>  
  
## <a name="thread-pool-characteristics"></a><span data-ttu-id="b988b-119">Właściwości puli wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-119">Thread Pool Characteristics</span></span>  
 <span data-ttu-id="b988b-120">Wątków z puli wątków są wątki w tle.</span><span class="sxs-lookup"><span data-stu-id="b988b-120">Thread pool threads are background threads.</span></span> <span data-ttu-id="b988b-121">Zobacz [pierwszego planu i tła wątki](../../../docs/standard/threading/foreground-and-background-threads.md).</span><span class="sxs-lookup"><span data-stu-id="b988b-121">See [Foreground and Background Threads](../../../docs/standard/threading/foreground-and-background-threads.md).</span></span> <span data-ttu-id="b988b-122">Każdy wątek używa domyślny rozmiar stosu, działa w domyślny priorytet i znajduje się w apartamencie wielowątkowych.</span><span class="sxs-lookup"><span data-stu-id="b988b-122">Each thread uses the default stack size, runs at the default priority, and is in the multithreaded apartment.</span></span>  
  
 <span data-ttu-id="b988b-123">Brak puli tylko jeden wątek na proces.</span><span class="sxs-lookup"><span data-stu-id="b988b-123">There is only one thread pool per process.</span></span>  
  
### <a name="exceptions-in-thread-pool-threads"></a><span data-ttu-id="b988b-124">Wyjątki w wątku puli wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-124">Exceptions in Thread Pool Threads</span></span>  
 <span data-ttu-id="b988b-125">Nieobsługiwane wyjątki w wątku puli wątków zakończenie procesu.</span><span class="sxs-lookup"><span data-stu-id="b988b-125">Unhandled exceptions on thread pool threads terminate the process.</span></span> <span data-ttu-id="b988b-126">Istnieją trzy wyjątki od tej reguły:</span><span class="sxs-lookup"><span data-stu-id="b988b-126">There are three exceptions to this rule:</span></span>  
  
-   <span data-ttu-id="b988b-127">A <xref:System.Threading.ThreadAbortException> jest zgłaszany w wątku puli wątków, ponieważ <xref:System.Threading.Thread.Abort%2A> została wywołana.</span><span class="sxs-lookup"><span data-stu-id="b988b-127">A <xref:System.Threading.ThreadAbortException> is thrown in a thread pool thread, because <xref:System.Threading.Thread.Abort%2A> was called.</span></span>  
  
-   <span data-ttu-id="b988b-128"><xref:System.AppDomainUnloadedException> Jest zgłaszany w wątku puli wątków, ponieważ Trwa zwalnianie domen aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b988b-128">An <xref:System.AppDomainUnloadedException> is thrown in a thread pool thread, because the application domain is being unloaded.</span></span>  
  
-   <span data-ttu-id="b988b-129">Środowisko uruchomieniowe języka wspólnego lub procesu hosta kończy wątku.</span><span class="sxs-lookup"><span data-stu-id="b988b-129">The common language runtime or a host process terminates the thread.</span></span>  
  
 <span data-ttu-id="b988b-130">Aby uzyskać więcej informacji, zobacz [wyjątki w zarządzanych wątkach](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="b988b-130">For more information, see [Exceptions in Managed Threads](../../../docs/standard/threading/exceptions-in-managed-threads.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b988b-131">W wersji systemu .NET Framework 1.0 i 1.1 środowisko uruchomieniowe języka wspólnego dyskretnie traps nieobsługiwanych wyjątków w wątku puli wątków.</span><span class="sxs-lookup"><span data-stu-id="b988b-131">In the .NET Framework versions 1.0 and 1.1, the common language runtime silently traps unhandled exceptions in thread pool threads.</span></span> <span data-ttu-id="b988b-132">Może to doprowadzić do uszkodzenia aplikacji i może spowodować zawieszenie, aplikacje, które mogą być bardzo trudne do debugowania.</span><span class="sxs-lookup"><span data-stu-id="b988b-132">This might corrupt application state and eventually cause applications to hang, which might be very difficult to debug.</span></span>  
  
### <a name="maximum-number-of-thread-pool-threads"></a><span data-ttu-id="b988b-133">Maksymalna liczba wątków z puli wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-133">Maximum Number of Thread Pool Threads</span></span>  
 <span data-ttu-id="b988b-134">Liczba operacji, które mogą być umieszczone w kolejce do puli wątków jest ograniczona tylko przez ilość dostępnej pamięci; jednak puli wątków ogranicza liczbę wątków, które mogą być jednocześnie aktywne w procesie.</span><span class="sxs-lookup"><span data-stu-id="b988b-134">The number of operations that can be queued to the thread pool is limited only by available memory; however, the thread pool limits the number of threads that can be active in the process simultaneously.</span></span> <span data-ttu-id="b988b-135">Począwszy od [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], domyślny rozmiar puli wątków procesu zależy od wielu czynników, takich jak rozmiar wirtualnej przestrzeni adresowej.</span><span class="sxs-lookup"><span data-stu-id="b988b-135">Beginning with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], the default size of the thread pool for a process depends on several factors, such as the size of the virtual address space.</span></span> <span data-ttu-id="b988b-136">Proces może wywołać <xref:System.Threading.ThreadPool.GetMaxThreads%2A> metodę, aby określić liczbę wątków.</span><span class="sxs-lookup"><span data-stu-id="b988b-136">A process can call the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> method to determine the number of threads.</span></span>  
  
 <span data-ttu-id="b988b-137">Maksymalna liczba wątków można kontrolować przy użyciu <xref:System.Threading.ThreadPool.GetMaxThreads%2A> i <xref:System.Threading.ThreadPool.SetMaxThreads%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="b988b-137">You can control the maximum number of threads by using the <xref:System.Threading.ThreadPool.GetMaxThreads%2A> and <xref:System.Threading.ThreadPool.SetMaxThreads%2A> methods.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b988b-138">W wersji systemu .NET Framework 1.0 i 1.1 rozmiar puli wątków nie można ustawić z kodu zarządzanego.</span><span class="sxs-lookup"><span data-stu-id="b988b-138">In the .NET Framework versions 1.0 and 1.1, the size of the thread pool cannot be set from managed code.</span></span> <span data-ttu-id="b988b-139">Kod, który obsługuje środowisko uruchomieniowe języka wspólnego można ustawić przy użyciu rozmiaru `CorSetMaxThreads`zdefiniowanej w mscoree.h.</span><span class="sxs-lookup"><span data-stu-id="b988b-139">Code that hosts the common language runtime can set the size using `CorSetMaxThreads`, defined in mscoree.h.</span></span>  
  
### <a name="thread-pool-minimums"></a><span data-ttu-id="b988b-140">Minimów puli wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-140">Thread Pool Minimums</span></span>  
 <span data-ttu-id="b988b-141">Puli wątków zapewnia nowy wątków roboczych lub wątków zakończenia We/Wy na żądanie, dopóki nie osiągnie określony co najmniej dla każdej kategorii.</span><span class="sxs-lookup"><span data-stu-id="b988b-141">The thread pool provides new worker threads or I/O completion threads on demand until it reaches a specified minimum for each category.</span></span> <span data-ttu-id="b988b-142">Można użyć <xref:System.Threading.ThreadPool.GetMinThreads%2A> metodę, aby uzyskać te wartości minimalnej.</span><span class="sxs-lookup"><span data-stu-id="b988b-142">You can use the <xref:System.Threading.ThreadPool.GetMinThreads%2A> method to obtain these minimum values.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b988b-143">Jeśli żądanie jest niska, rzeczywista liczba wątków z puli wątków można spadnie poniżej wartości minimalnej.</span><span class="sxs-lookup"><span data-stu-id="b988b-143">When demand is low, the actual number of thread pool threads can fall below the minimum values.</span></span>  
  
 <span data-ttu-id="b988b-144">Po osiągnięciu minimum puli wątków można utworzyć dodatkowe wątki lub zaczekaj na zakończenie niektórych zadań.</span><span class="sxs-lookup"><span data-stu-id="b988b-144">When a minimum is reached, the thread pool can create additional threads or wait until some tasks complete.</span></span> <span data-ttu-id="b988b-145">Począwszy od [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], pulą wątków tworzy i niszczy wątków roboczych w celu zoptymalizowania przepustowości, która jest zdefiniowana jako liczba zadań, kończące się na jednostkę czasu.</span><span class="sxs-lookup"><span data-stu-id="b988b-145">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the thread pool creates and destroys worker threads in order to optimize throughput, which is defined as the number of tasks that complete per unit of time.</span></span> <span data-ttu-id="b988b-146">Zbyt mało wątków może nie mieć optymalne wykorzystanie dostępnych zasobów, natomiast zbyt wiele wątków można zwiększyć rywalizacji.</span><span class="sxs-lookup"><span data-stu-id="b988b-146">Too few threads might not make optimal use of available resources, whereas too many threads could increase resource contention.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="b988b-147">Można użyć <xref:System.Threading.ThreadPool.SetMinThreads%2A> metodę, aby zwiększyć minimalna liczba wątków bezczynności.</span><span class="sxs-lookup"><span data-stu-id="b988b-147">You can use the <xref:System.Threading.ThreadPool.SetMinThreads%2A> method to increase the minimum number of idle threads.</span></span> <span data-ttu-id="b988b-148">Jednak niepotrzebnie zwiększenie tych wartości może spowodować problemy z wydajnością.</span><span class="sxs-lookup"><span data-stu-id="b988b-148">However, unnecessarily increasing these values can cause performance problems.</span></span> <span data-ttu-id="b988b-149">Jeśli zbyt wiele zadań jest uruchomiona w tym samym czasie, wszystkie z nich wydaje się powoli.</span><span class="sxs-lookup"><span data-stu-id="b988b-149">If too many tasks start at the same time, all of them might appear to be slow.</span></span> <span data-ttu-id="b988b-150">W większości przypadków puli wątków będą działać lepiej z własną algorytmu alokacji wątków.</span><span class="sxs-lookup"><span data-stu-id="b988b-150">In most cases the thread pool will perform better with its own algorithm for allocating threads.</span></span>  
  
## <a name="skipping-security-checks"></a><span data-ttu-id="b988b-151">Pomijanie sprawdzania zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="b988b-151">Skipping Security Checks</span></span>  
 <span data-ttu-id="b988b-152">Udostępnia również puli wątków <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType> i <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="b988b-152">The thread pool also provides the <xref:System.Threading.ThreadPool.UnsafeQueueUserWorkItem%2A?displayProperty=nameWithType> and <xref:System.Threading.ThreadPool.UnsafeRegisterWaitForSingleObject%2A?displayProperty=nameWithType> methods.</span></span> <span data-ttu-id="b988b-153">Użyj tych metod, tylko wtedy, gdy masz pewność, że stos wywołującego nie ma znaczenia kontroli zabezpieczeń wykonywane podczas wykonywania zadań w kolejce.</span><span class="sxs-lookup"><span data-stu-id="b988b-153">Use these methods only when you are certain that the caller's stack is irrelevant to any security checks performed during the execution of the queued task.</span></span> <span data-ttu-id="b988b-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> i <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> zarówno przechwytywania wywołującego stosu, w którym jest scalany stosu wątku puli wątków, po rozpoczęciu wątku do wykonania zadania.</span><span class="sxs-lookup"><span data-stu-id="b988b-154"><xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> and <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> both capture the caller's stack, which is merged into the stack of the thread pool thread when the thread begins to execute a task.</span></span> <span data-ttu-id="b988b-155">Jeśli wymagana jest kontrola zabezpieczeń, cały stos musi być zaznaczone.</span><span class="sxs-lookup"><span data-stu-id="b988b-155">If a security check is required, the entire stack must be checked.</span></span> <span data-ttu-id="b988b-156">Chociaż kontroli bezpieczeństwa, ma także na wydajność.</span><span class="sxs-lookup"><span data-stu-id="b988b-156">Although the check provides safety, it also has a performance cost.</span></span>  
  
## <a name="using-the-thread-pool"></a><span data-ttu-id="b988b-157">Przy użyciu puli wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-157">Using the Thread Pool</span></span>  
 <span data-ttu-id="b988b-158">Począwszy od [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], najłatwiejszym sposobem na korzystanie z puli wątków jest użycie [zadań biblioteki równoległych (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span><span class="sxs-lookup"><span data-stu-id="b988b-158">Beginning with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], the easiest way to use the thread pool is to use the [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md).</span></span> <span data-ttu-id="b988b-159">Domyślnie równoległych biblioteki typów, takich jak <xref:System.Threading.Tasks.Task> i <xref:System.Threading.Tasks.Task%601> umożliwia uruchamianie zadań wątków z puli wątków.</span><span class="sxs-lookup"><span data-stu-id="b988b-159">By default, parallel library types like <xref:System.Threading.Tasks.Task> and <xref:System.Threading.Tasks.Task%601> use thread pool threads to run tasks.</span></span> <span data-ttu-id="b988b-160">Umożliwia także puli wątków wywołując <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> z kodu zarządzanego (lub `CorQueueUserWorkItem` z kodem niezarządzanym) i przekazywanie <xref:System.Threading.WaitCallback> delegata reprezentującego metodę, która wykonuje zadanie.</span><span class="sxs-lookup"><span data-stu-id="b988b-160">You can also use the thread pool by calling <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> from managed code (or `CorQueueUserWorkItem` from unmanaged code) and passing a <xref:System.Threading.WaitCallback> delegate representing the method that performs the task.</span></span> <span data-ttu-id="b988b-161">Innym sposobem użycia puli wątków jest do kolejki elementów pracy, które są powiązane z operacją oczekiwania przy użyciu <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> — metoda i przekazywanie <xref:System.Threading.WaitHandle> , gdy sygnalizowane lub gdy został przekroczony, wywołuje metodę reprezentowany przez <xref:System.Threading.WaitOrTimerCallback> delegowanie.</span><span class="sxs-lookup"><span data-stu-id="b988b-161">Another way to use the thread pool is to queue work items that are related to a wait operation by using the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method and passing a <xref:System.Threading.WaitHandle> that, when signaled or when timed out, calls the method represented by the <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span> <span data-ttu-id="b988b-162">Wątków z puli wątków są używane do wywołania metody wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="b988b-162">Thread pool threads are used to invoke callback methods.</span></span>  
  
## <a name="threadpool-examples"></a><span data-ttu-id="b988b-163">Przykłady puli wątków</span><span class="sxs-lookup"><span data-stu-id="b988b-163">ThreadPool Examples</span></span>  
 <span data-ttu-id="b988b-164">Przykłady kodu w tej sekcji prezentacja puli wątków za pomocą <xref:System.Threading.Tasks.Task> klasy, <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> metody i <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="b988b-164">The code examples in this section demonstrate the thread pool by using the <xref:System.Threading.Tasks.Task> class, the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A?displayProperty=nameWithType> method, and the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A?displayProperty=nameWithType> method.</span></span>  
  
-   [<span data-ttu-id="b988b-165">Wykonywanie zadania asynchronicznego z Biblioteka zadań równoległych</span><span class="sxs-lookup"><span data-stu-id="b988b-165">Executing Asynchronous Tasks with the Task Parallel Library</span></span>](#TaskParallelLibrary)  
  
-   [<span data-ttu-id="b988b-166">Wykonywanie kodu asynchronicznie z QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="b988b-166">Executing Code Asynchronously with QueueUserWorkItem</span></span>](#ExecuteCodeWithQUWI)  
  
-   [<span data-ttu-id="b988b-167">Dostarczająca dane zadania dla QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="b988b-167">Supplying Task Data for QueueUserWorkItem</span></span>](#TaskDataForQUWI)  
  
-   [<span data-ttu-id="b988b-168">Przy użyciu funkcji RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="b988b-168">Using RegisterWaitForSingleObject</span></span>](#RegisterWaitForSingleObject)  
  
<a name="TaskParallelLibrary"></a>   
### <a name="executing-asynchronous-tasks-with-the-task-parallel-library"></a><span data-ttu-id="b988b-169">Wykonywanie zadania asynchronicznego z Biblioteka zadań równoległych</span><span class="sxs-lookup"><span data-stu-id="b988b-169">Executing Asynchronous Tasks with the Task Parallel Library</span></span>  
 <span data-ttu-id="b988b-170">Poniższy przykład przedstawia sposób tworzenia i używania <xref:System.Threading.Tasks.Task> obiektu przez wywołanie metody <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="b988b-170">The following example shows how to create and use a <xref:System.Threading.Tasks.Task> object by calling the <xref:System.Threading.Tasks.TaskFactory.StartNew%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="b988b-171">Na przykład, który używa <xref:System.Threading.Tasks.Task%601> klasy zwracanie wartości z zadanie asynchroniczne, zobacz [porady: zwracanie wartości z zadania](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span><span class="sxs-lookup"><span data-stu-id="b988b-171">For an example that uses the <xref:System.Threading.Tasks.Task%601> class to return a value from an asynchronous task, see [How to: Return a Value from a Task](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md).</span></span>  
  
 [!code-csharp[System.Threading.Tasks.Task#01](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.threading.tasks.task/cs/startnew.cs#01)]
 [!code-vb[System.Threading.Tasks.Task#01](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.threading.tasks.task/vb/startnew.vb#01)]  
  
<a name="ExecuteCodeWithQUWI"></a>   
### <a name="executing-code-asynchronously-with-queueuserworkitem"></a><span data-ttu-id="b988b-172">Wykonywanie kodu asynchronicznie z QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="b988b-172">Executing Code Asynchronously with QueueUserWorkItem</span></span>  
 <span data-ttu-id="b988b-173">Poniższy przykład tworzy kolejki bardzo proste zadania, reprezentowany przez `ThreadProc` — metoda, za pomocą <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="b988b-173">The following example queues a very simple task, represented by the `ThreadProc` method, using the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#1](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source1.cpp#1)]
 [!code-csharp[Conceptual.ThreadPool#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source1.cs#1)]
 [!code-vb[Conceptual.ThreadPool#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source1.vb#1)]  
  
<a name="TaskDataForQUWI"></a>   
### <a name="supplying-task-data-for-queueuserworkitem"></a><span data-ttu-id="b988b-174">Dostarczająca dane zadania dla QueueUserWorkItem</span><span class="sxs-lookup"><span data-stu-id="b988b-174">Supplying Task Data for QueueUserWorkItem</span></span>  
 <span data-ttu-id="b988b-175">Poniższy przykład kodu wykorzystuje <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> metodę w kolejce zadania i dostarczają dane do zadania.</span><span class="sxs-lookup"><span data-stu-id="b988b-175">The following code example uses the <xref:System.Threading.ThreadPool.QueueUserWorkItem%2A> method to queue a task and supply the data for the task.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#2](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source2.cpp#2)]
 [!code-csharp[Conceptual.ThreadPool#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source2.cs#2)]
 [!code-vb[Conceptual.ThreadPool#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source2.vb#2)]  
  
<a name="RegisterWaitForSingleObject"></a>   
### <a name="using-registerwaitforsingleobject"></a><span data-ttu-id="b988b-176">Przy użyciu funkcji RegisterWaitForSingleObject</span><span class="sxs-lookup"><span data-stu-id="b988b-176">Using RegisterWaitForSingleObject</span></span>  
 <span data-ttu-id="b988b-177">W poniższym przykładzie pokazano kilka wątków funkcji.</span><span class="sxs-lookup"><span data-stu-id="b988b-177">The following example demonstrates several threading features.</span></span>  
  
-   <span data-ttu-id="b988b-178">Usługi kolejkowania wiadomości zadań do wykonania przez <xref:System.Threading.ThreadPool> wątków, z <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="b988b-178">Queuing a task for execution by <xref:System.Threading.ThreadPool> threads, with the <xref:System.Threading.ThreadPool.RegisterWaitForSingleObject%2A> method.</span></span>  
  
-   <span data-ttu-id="b988b-179">Sygnalizowanie zadań do wykonania, z <xref:System.Threading.AutoResetEvent>.</span><span class="sxs-lookup"><span data-stu-id="b988b-179">Signaling a task to execute, with <xref:System.Threading.AutoResetEvent>.</span></span> <span data-ttu-id="b988b-180">Zobacz [EventWaitHandle, autoresetevent —, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span><span class="sxs-lookup"><span data-stu-id="b988b-180">See [EventWaitHandle, AutoResetEvent, CountdownEvent, ManualResetEvent](../../../docs/standard/threading/eventwaithandle-autoresetevent-countdownevent-manualresetevent.md).</span></span>  
  
-   <span data-ttu-id="b988b-181">Obsługa zarówno limity czasu i sygnały z <xref:System.Threading.WaitOrTimerCallback> delegowanie.</span><span class="sxs-lookup"><span data-stu-id="b988b-181">Handling both time-outs and signals with a <xref:System.Threading.WaitOrTimerCallback> delegate.</span></span>  
  
-   <span data-ttu-id="b988b-182">Anulowanie zadania w kolejce z <xref:System.Threading.RegisteredWaitHandle>.</span><span class="sxs-lookup"><span data-stu-id="b988b-182">Canceling a queued task with <xref:System.Threading.RegisteredWaitHandle>.</span></span>  
  
 [!code-cpp[Conceptual.ThreadPool#3](../../../samples/snippets/cpp/VS_Snippets_CLR/conceptual.threadpool/cpp/source3.cpp#3)]
 [!code-csharp[Conceptual.ThreadPool#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.threadpool/cs/source3.cs#3)]
 [!code-vb[Conceptual.ThreadPool#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.threadpool/vb/source3.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="b988b-183">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="b988b-183">See Also</span></span>  
 <xref:System.Threading.ThreadPool>  
 <xref:System.Threading.Tasks.Task>  
 <xref:System.Threading.Tasks.Task%601>  
 [<span data-ttu-id="b988b-184">Biblioteka zadań równoległych (TPL)</span><span class="sxs-lookup"><span data-stu-id="b988b-184">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="b988b-185">Biblioteka zadań równoległych (TPL)</span><span class="sxs-lookup"><span data-stu-id="b988b-185">Task Parallel Library (TPL)</span></span>](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md)  
 [<span data-ttu-id="b988b-186">Instrukcje: zwracanie wartości z zadania</span><span class="sxs-lookup"><span data-stu-id="b988b-186">How to: Return a Value from a Task</span></span>](../../../docs/standard/parallel-programming/how-to-return-a-value-from-a-task.md)  
 [<span data-ttu-id="b988b-187">Wątkowość obiektów i funkcji</span><span class="sxs-lookup"><span data-stu-id="b988b-187">Threading Objects and Features</span></span>](../../../docs/standard/threading/threading-objects-and-features.md)  
 [<span data-ttu-id="b988b-188">Wątki i wątkowość</span><span class="sxs-lookup"><span data-stu-id="b988b-188">Threads and Threading</span></span>](../../../docs/standard/threading/threads-and-threading.md)  
 [<span data-ttu-id="b988b-189">Asynchroniczne operacje We/Wy pliku</span><span class="sxs-lookup"><span data-stu-id="b988b-189">Asynchronous File I/O</span></span>](../../../docs/standard/io/asynchronous-file-i-o.md)  
 [<span data-ttu-id="b988b-190">Czasomierze</span><span class="sxs-lookup"><span data-stu-id="b988b-190">Timers</span></span>](../../../docs/standard/threading/timers.md)
