---
title: Wątki i wątkowość
description: Informacje o wątkach, takich jak procesy & wątki, kiedy używać wielu wątków, &, jak używać wielowątkowości, aby zwiększyć czas odpowiedzi lub przepływność na platformie .NET.
ms.date: 11/08/2018
ms.technology: dotnet-standard
helpviewer_keywords:
- multiple threads
- threading [.NET]
- threading [.NET], multiple threads
ms.assetid: 5baac3aa-e603-4fa6-9f89-0f2c1084e6b1
ms.openlocfilehash: b332db80069e18d3b52cd03eef4995eaad3fda7b
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/09/2020
ms.locfileid: "84583404"
---
# <a name="threads-and-threading"></a><span data-ttu-id="6e99b-103">Wątki i wątkowość</span><span class="sxs-lookup"><span data-stu-id="6e99b-103">Threads and threading</span></span>

<span data-ttu-id="6e99b-104">Wielowątkowość pozwala zwiększyć czas odpowiedzi aplikacji i, jeśli aplikacja działa w wieloprocesorowym lub wielordzeniowym systemie, zwiększyć przepływność.</span><span class="sxs-lookup"><span data-stu-id="6e99b-104">Multithreading allows you to increase the responsiveness of your application and, if your application runs on a multiprocessor or multi-core system, increase its throughput.</span></span>

## <a name="processes-and-threads"></a><span data-ttu-id="6e99b-105">Procesy i wątki</span><span class="sxs-lookup"><span data-stu-id="6e99b-105">Processes and threads</span></span>

<span data-ttu-id="6e99b-106">*Proces* to program wykonujący.</span><span class="sxs-lookup"><span data-stu-id="6e99b-106">A *process* is an executing program.</span></span> <span data-ttu-id="6e99b-107">System operacyjny używa procesów do rozdzielania wykonywanych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="6e99b-107">An operating system uses processes to separate the applications that are being executed.</span></span> <span data-ttu-id="6e99b-108">*Wątek* jest jednostką podstawową, do której system operacyjny przydziela czas procesora.</span><span class="sxs-lookup"><span data-stu-id="6e99b-108">A *thread* is the basic unit to which an operating system allocates processor time.</span></span> <span data-ttu-id="6e99b-109">Każdy wątek ma [priorytet planowania](scheduling-threads.md) i utrzymuje zestaw struktur, których system używa do zapisywania kontekstu wątku, gdy wykonywanie wątku jest wstrzymane.</span><span class="sxs-lookup"><span data-stu-id="6e99b-109">Each thread has a [scheduling priority](scheduling-threads.md) and maintains a set of structures the system uses to save the thread context when the thread's execution is paused.</span></span> <span data-ttu-id="6e99b-110">Kontekst wątku zawiera wszystkie informacje niezbędne do bezproblemowego wznowienia wykonywania wątku, w tym zestaw rejestrów i stosów procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="6e99b-110">The thread context includes all the information the thread needs to seamlessly resume execution, including the thread's set of CPU registers and stack.</span></span> <span data-ttu-id="6e99b-111">W kontekście procesu można uruchomić wiele wątków.</span><span class="sxs-lookup"><span data-stu-id="6e99b-111">Multiple threads can run in the context of a process.</span></span> <span data-ttu-id="6e99b-112">Wszystkie wątki procesu współdzielą swoją wirtualną przestrzeń adresową.</span><span class="sxs-lookup"><span data-stu-id="6e99b-112">All threads of a process share its virtual address space.</span></span> <span data-ttu-id="6e99b-113">Wątek może wykonać dowolną część kodu programu, w tym części, które są aktualnie wykonywane przez inny wątek.</span><span class="sxs-lookup"><span data-stu-id="6e99b-113">A thread can execute any part of the program code, including parts currently being executed by another thread.</span></span>

> [!NOTE]
> <span data-ttu-id="6e99b-114">.NET Framework zapewnia sposób izolowania aplikacji w ramach procesu przy użyciu *domen aplikacji*.</span><span class="sxs-lookup"><span data-stu-id="6e99b-114">The .NET Framework provides a way to isolate applications within a process with the use of *application domains*.</span></span> <span data-ttu-id="6e99b-115">(Domeny aplikacji nie są dostępne na platformie .NET Core). Aby uzyskać więcej informacji, zobacz sekcję [domeny aplikacji i wątki](../../framework/app-domains/application-domains.md#application-domains-and-threads) w artykule [domeny aplikacji](../../framework/app-domains/application-domains.md) .</span><span class="sxs-lookup"><span data-stu-id="6e99b-115">(Application domains are not available on .NET Core.) For more information, see the [Application domains and threads](../../framework/app-domains/application-domains.md#application-domains-and-threads) section of the [Application domains](../../framework/app-domains/application-domains.md) article.</span></span>

<span data-ttu-id="6e99b-116">Domyślnie program .NET jest uruchamiany z pojedynczym wątkiem, często nazywanym wątkiem *podstawowym* .</span><span class="sxs-lookup"><span data-stu-id="6e99b-116">By default, a .NET program is started with a single thread, often called the *primary* thread.</span></span> <span data-ttu-id="6e99b-117">Można jednak utworzyć dodatkowe wątki do wykonywania kodu równolegle lub współbieżnie przy użyciu wątku głównego.</span><span class="sxs-lookup"><span data-stu-id="6e99b-117">However, it can create additional threads to execute code in parallel or concurrently with the primary thread.</span></span> <span data-ttu-id="6e99b-118">Te wątki są często nazywane wątkami *roboczymi* .</span><span class="sxs-lookup"><span data-stu-id="6e99b-118">These threads are often called *worker* threads.</span></span>

## <a name="when-to-use-multiple-threads"></a><span data-ttu-id="6e99b-119">Kiedy używać wielu wątków</span><span class="sxs-lookup"><span data-stu-id="6e99b-119">When to use multiple threads</span></span>

<span data-ttu-id="6e99b-120">Używasz wielu wątków, aby zwiększyć czas odpowiedzi aplikacji i wykorzystać wieloprocesorowy lub wielordzeniowy system w celu zwiększenia przepływności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="6e99b-120">You use multiple threads to increase the responsiveness of your application and to take advantage of a multiprocessor or multi-core system to increase the application's throughput.</span></span>

<span data-ttu-id="6e99b-121">Rozważ użycie aplikacji klasycznej, w której wątek główny jest odpowiedzialny za elementy interfejsu użytkownika i reaguje na działania użytkownika.</span><span class="sxs-lookup"><span data-stu-id="6e99b-121">Consider a desktop application, in which the primary thread is responsible for user interface elements and responds to user actions.</span></span> <span data-ttu-id="6e99b-122">Wątki robocze umożliwiają wykonywanie czasochłonnych operacji, które w przeciwnym razie zajmują wątek podstawowy i sprawiają, że interfejs użytkownika nie odpowiada.</span><span class="sxs-lookup"><span data-stu-id="6e99b-122">Use worker threads to perform time-consuming operations that, otherwise, would occupy the primary thread and make the user interface non-responsive.</span></span> <span data-ttu-id="6e99b-123">Można również użyć dedykowanego wątku do komunikacji sieciowej lub urządzenia, aby zwiększyć wydajność przychodzących komunikatów lub zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="6e99b-123">You can also use a dedicated thread for network or device communication to be more responsive to incoming messages or events.</span></span>

<span data-ttu-id="6e99b-124">Jeśli program wykonuje operacje, które mogą być wykonywane równolegle, łączny czas wykonywania można zmniejszyć, wykonując te operacje w oddzielnych wątkach i uruchamiając program w wieloprocesorowym lub wielordzeniowym systemie.</span><span class="sxs-lookup"><span data-stu-id="6e99b-124">If your program performs operations that can be done in parallel, the total execution time can be decreased by performing those operations in separate threads and running the program on a multiprocessor or multi-core system.</span></span> <span data-ttu-id="6e99b-125">W takim systemie użycie wielowątkowości może zwiększyć przepływność oraz zwiększyć czas odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="6e99b-125">On such a system, use of multithreading might increase throughput along with the increased responsiveness.</span></span>

## <a name="how-to-use-multithreading-in-net"></a><span data-ttu-id="6e99b-126">Jak używać wielowątkowości w programie .NET</span><span class="sxs-lookup"><span data-stu-id="6e99b-126">How to use multithreading in .NET</span></span>

<span data-ttu-id="6e99b-127">Począwszy od .NET Framework 4, zalecanym sposobem użycia wielowątkowości jest użycie [biblioteki zadań równoległych (TPL)](../parallel-programming/task-parallel-library-tpl.md) i [równoległego LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md).</span><span class="sxs-lookup"><span data-stu-id="6e99b-127">Starting with the .NET Framework 4, the recommended way to utilize multithreading is to use [Task Parallel Library (TPL)](../parallel-programming/task-parallel-library-tpl.md) and [Parallel LINQ (PLINQ)](../parallel-programming/introduction-to-plinq.md).</span></span> <span data-ttu-id="6e99b-128">Aby uzyskać więcej informacji, zobacz [programowanie równoległe](../parallel-programming/index.md).</span><span class="sxs-lookup"><span data-stu-id="6e99b-128">For more information, see [Parallel programming](../parallel-programming/index.md).</span></span>

<span data-ttu-id="6e99b-129">Zarówno TPL, jak i PLINQ są zależne od <xref:System.Threading.ThreadPool> wątków.</span><span class="sxs-lookup"><span data-stu-id="6e99b-129">Both TPL and PLINQ rely on the <xref:System.Threading.ThreadPool> threads.</span></span> <span data-ttu-id="6e99b-130"><xref:System.Threading.ThreadPool?displayProperty=nameWithType>Klasa udostępnia aplikację .NET z pulą wątków roboczych.</span><span class="sxs-lookup"><span data-stu-id="6e99b-130">The <xref:System.Threading.ThreadPool?displayProperty=nameWithType> class provides a .NET application with a pool of worker threads.</span></span> <span data-ttu-id="6e99b-131">Można również użyć wątków puli wątków.</span><span class="sxs-lookup"><span data-stu-id="6e99b-131">You can also use thread pool threads.</span></span> <span data-ttu-id="6e99b-132">Aby uzyskać więcej informacji, zobacz [Zarządzana pula wątków](the-managed-thread-pool.md).</span><span class="sxs-lookup"><span data-stu-id="6e99b-132">For more information, see [The managed thread pool](the-managed-thread-pool.md).</span></span>

<span data-ttu-id="6e99b-133">Na koniec można użyć <xref:System.Threading.Thread?displayProperty=nameWithType> klasy, która reprezentuje wątek zarządzany.</span><span class="sxs-lookup"><span data-stu-id="6e99b-133">At last, you can use the <xref:System.Threading.Thread?displayProperty=nameWithType> class that represents a managed thread.</span></span> <span data-ttu-id="6e99b-134">Aby uzyskać więcej informacji, zobacz [Korzystanie z wątków i wątkowości](using-threads-and-threading.md).</span><span class="sxs-lookup"><span data-stu-id="6e99b-134">For more information, see [Using threads and threading](using-threads-and-threading.md).</span></span>

<span data-ttu-id="6e99b-135">Wiele wątków może potrzebować dostępu do zasobu udostępnionego.</span><span class="sxs-lookup"><span data-stu-id="6e99b-135">Multiple threads might need to access a shared resource.</span></span> <span data-ttu-id="6e99b-136">Aby zachować zasób w stanie nieuszkodzonym i uniknąć sytuacji wyścigu, należy zsynchronizować z nim dostęp do wątku.</span><span class="sxs-lookup"><span data-stu-id="6e99b-136">To keep the resource in a uncorrupted state and avoid race conditions, you must synchronize the thread access to it.</span></span> <span data-ttu-id="6e99b-137">Możesz również skoordynować interakcję wielu wątków.</span><span class="sxs-lookup"><span data-stu-id="6e99b-137">You also might want to coordinate the interaction of multiple threads.</span></span> <span data-ttu-id="6e99b-138">Platforma .NET udostępnia szereg typów, których można użyć do synchronizowania dostępu do zasobu udostępnionego lub współdziałania wątku współrzędnych.</span><span class="sxs-lookup"><span data-stu-id="6e99b-138">.NET provides a range of types that you can use to synchronize access to a shared resource or coordinate thread interaction.</span></span> <span data-ttu-id="6e99b-139">Aby uzyskać więcej informacji, zobacz [Omówienie elementów pierwotnych synchronizacji](overview-of-synchronization-primitives.md).</span><span class="sxs-lookup"><span data-stu-id="6e99b-139">For more information, see [Overview of synchronization primitives](overview-of-synchronization-primitives.md).</span></span>

<span data-ttu-id="6e99b-140">Obsługa wyjątków w wątkach.</span><span class="sxs-lookup"><span data-stu-id="6e99b-140">Do handle exceptions in threads.</span></span> <span data-ttu-id="6e99b-141">Nieobsłużone wyjątki w wątkach zwykle przerywają proces.</span><span class="sxs-lookup"><span data-stu-id="6e99b-141">Unhandled exceptions in threads generally terminate the process.</span></span> <span data-ttu-id="6e99b-142">Aby uzyskać więcej informacji, zobacz [wyjątki w zarządzanych wątkach](exceptions-in-managed-threads.md).</span><span class="sxs-lookup"><span data-stu-id="6e99b-142">For more information, see [Exceptions in managed threads](exceptions-in-managed-threads.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="6e99b-143">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="6e99b-143">See also</span></span>

- [<span data-ttu-id="6e99b-144">Wątkowość obiektów i funkcji</span><span class="sxs-lookup"><span data-stu-id="6e99b-144">Threading objects and features</span></span>](threading-objects-and-features.md)
- [<span data-ttu-id="6e99b-145">Zarządzane wątki z najlepszymi rozwiązaniami</span><span class="sxs-lookup"><span data-stu-id="6e99b-145">Managed threading best practices</span></span>](managed-threading-best-practices.md)
- [<span data-ttu-id="6e99b-146">Równoległe przetwarzanie, współbieżność i programowanie asynchroniczne w programie .NET</span><span class="sxs-lookup"><span data-stu-id="6e99b-146">Parallel Processing, Concurrency, and Async Programming in .NET</span></span>](../parallel-processing-and-concurrency.md)
- [<span data-ttu-id="6e99b-147">Informacje o procesach i wątkach</span><span class="sxs-lookup"><span data-stu-id="6e99b-147">About Processes and Threads</span></span>](/windows/desktop/procthread/about-processes-and-threads)
