---
title: Wstrzymywanie i przerywanie wątków
description: Dowiedz się, jak wstrzymywać & wątki przerwań w programie .NET. Dowiedz się, jak używać metod, takich jak Thread. Sleep & Thread. Interrupt, & wyjątkach, takich jak ThreadInterruptedException —.
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- interrupting threads
- threading [.NET], pausing
- pausing threads
ms.assetid: 9fce4859-a19d-4506-b082-7dd0792688ca
ms.openlocfilehash: 07fe374acb3d2a3de3a1b51861feb5f8551ecc2e
ms.sourcegitcommit: 7588b1f16b7608bc6833c05f91ae670c22ef56f8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/02/2020
ms.locfileid: "93188968"
---
# <a name="pausing-and-interrupting-threads"></a><span data-ttu-id="15380-104">Wstrzymywanie i przerywanie wątków</span><span class="sxs-lookup"><span data-stu-id="15380-104">Pausing and interrupting threads</span></span>

<span data-ttu-id="15380-105">Najczęstszym sposobem synchronizacji działań wątków jest zablokowanie i wydawanie wątków oraz zablokowanie obiektów lub regionów kodu.</span><span class="sxs-lookup"><span data-stu-id="15380-105">The most common ways to synchronize the activities of threads are to block and release threads, or to lock objects or regions of code.</span></span> <span data-ttu-id="15380-106">Aby uzyskać więcej informacji na temat tych mechanizmów blokowania i blokowania, zobacz [Omówienie elementów pierwotnych synchronizacji](overview-of-synchronization-primitives.md).</span><span class="sxs-lookup"><span data-stu-id="15380-106">For more information on these locking and blocking mechanisms, see [Overview of Synchronization Primitives](overview-of-synchronization-primitives.md).</span></span>  
  
 <span data-ttu-id="15380-107">Możesz również mieć wątki umieszczają się w stanie uśpienia.</span><span class="sxs-lookup"><span data-stu-id="15380-107">You can also have threads put themselves to sleep.</span></span> <span data-ttu-id="15380-108">Gdy wątki są zablokowane lub uśpione, można użyć, <xref:System.Threading.ThreadInterruptedException> Aby przerwać ich Stany oczekiwania.</span><span class="sxs-lookup"><span data-stu-id="15380-108">When threads are blocked or sleeping, you can use a <xref:System.Threading.ThreadInterruptedException> to break them out of their wait states.</span></span>  
  
## <a name="the-threadsleep-method"></a><span data-ttu-id="15380-109">Wątek. Sleep — metoda</span><span class="sxs-lookup"><span data-stu-id="15380-109">The Thread.Sleep method</span></span>

 <span data-ttu-id="15380-110">Wywołanie <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> metody powoduje natychmiastowe zablokowanie bieżącego wątku przez liczbę milisekund lub przedział czasu przekazywany do metody, a następnie zwraca resztę z wycinka czasu do innego wątku.</span><span class="sxs-lookup"><span data-stu-id="15380-110">Calling the <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> method causes the current thread to immediately block for the number of milliseconds or the time interval you pass to the method, and yields the remainder of its time slice to another thread.</span></span> <span data-ttu-id="15380-111">Po upływie tego czasu wątek uśpiony wznowi wykonywanie.</span><span class="sxs-lookup"><span data-stu-id="15380-111">Once that interval elapses, the sleeping thread resumes execution.</span></span>  
  
 <span data-ttu-id="15380-112">Jeden wątek nie może wywołać <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> w innym wątku.</span><span class="sxs-lookup"><span data-stu-id="15380-112">One thread cannot call <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> on another thread.</span></span>  <span data-ttu-id="15380-113"><xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> to metoda statyczna, która zawsze powoduje, że bieżący wątek jest w stanie uśpienia.</span><span class="sxs-lookup"><span data-stu-id="15380-113"><xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> is a static method that always causes the current thread to sleep.</span></span>  
  
 <span data-ttu-id="15380-114">Wywoływanie <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> wartości powoduje, <xref:System.Threading.Timeout.Infinite?displayProperty=nameWithType> że wątek jest uśpiony, dopóki nie zostanie przerwany przez inny wątek, który wywołuje  <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> metodę w wątku uśpionym lub dopóki nie zostanie zakończone przez wywołanie <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="15380-114">Calling <xref:System.Threading.Thread.Sleep%2A?displayProperty=nameWithType> with a value of <xref:System.Threading.Timeout.Infinite?displayProperty=nameWithType> causes a thread to sleep until it is interrupted by another thread that calls the  <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> method on the sleeping thread, or until it is terminated by a call to its <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> method.</span></span>  <span data-ttu-id="15380-115">Poniższy przykład ilustruje obie metody przerywania uśpienia wątku.</span><span class="sxs-lookup"><span data-stu-id="15380-115">The following example illustrates both methods of interrupting a sleeping thread.</span></span>  
  
 [!code-csharp[Conceptual.Threading.Resuming#1](../../../samples/snippets/csharp/VS_Snippets_CLR/Conceptual.Threading.Resuming/cs/Sleep1.cs#1)]
 [!code-vb[Conceptual.Threading.Resuming#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/Conceptual.Threading.Resuming/vb/Sleep1.vb#1)]  
  
## <a name="interrupting-threads"></a><span data-ttu-id="15380-116">Przerywanie wątków</span><span class="sxs-lookup"><span data-stu-id="15380-116">Interrupting threads</span></span>

 <span data-ttu-id="15380-117">Możesz przerwać wątek oczekujący przez wywołanie <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> metody w zablokowanym wątku w celu wygenerowania elementu <xref:System.Threading.ThreadInterruptedException> , który przerwie wątek poza wywołaniem blokującym.</span><span class="sxs-lookup"><span data-stu-id="15380-117">You can interrupt a waiting thread by calling the <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> method on the blocked thread to throw a <xref:System.Threading.ThreadInterruptedException>, which breaks the thread out of the blocking call.</span></span> <span data-ttu-id="15380-118">Wątek powinien przechwycić <xref:System.Threading.ThreadInterruptedException> i wykonać wszelkie odpowiednie działania, aby kontynuować pracę.</span><span class="sxs-lookup"><span data-stu-id="15380-118">The thread should catch the <xref:System.Threading.ThreadInterruptedException> and do whatever is appropriate to continue working.</span></span> <span data-ttu-id="15380-119">Jeśli wątek ignoruje wyjątek, środowisko uruchomieniowe przechwytuje wyjątek i zatrzyma wątek.</span><span class="sxs-lookup"><span data-stu-id="15380-119">If the thread ignores the exception, the runtime catches the exception and stops the thread.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="15380-120">Jeśli wątek docelowy nie jest blokowany, gdy <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> jest wywoływana, wątek nie zostanie przerwany do momentu jego zablokowania.</span><span class="sxs-lookup"><span data-stu-id="15380-120">If the target thread is not blocked when <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> is called, the thread is not interrupted until it blocks.</span></span> <span data-ttu-id="15380-121">Jeśli wątek nigdy nie jest blokowany, może zakończyć się bez przerywania działania.</span><span class="sxs-lookup"><span data-stu-id="15380-121">If the thread never blocks, it could complete without ever being interrupted.</span></span>  
  
 <span data-ttu-id="15380-122">Jeśli oczekiwane jest odczekanie zarządzane, <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> a następnie <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> natychmiast Wznów wątek.</span><span class="sxs-lookup"><span data-stu-id="15380-122">If a wait is a managed wait, then <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> and <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> both wake the thread immediately.</span></span> <span data-ttu-id="15380-123">Jeśli oczekiwanie jest niezarządzanym oczekiwaniem (na przykład wywołaniem platformy w funkcji [WaitForSingleObject](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject) Win32) ani nie <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> może przejąć kontroli nad wątkiem do momentu, aż zwróci lub wywoła kod zarządzany.</span><span class="sxs-lookup"><span data-stu-id="15380-123">If a wait is an unmanaged wait (for example, a platform invoke call to the Win32 [WaitForSingleObject](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject) function), neither <xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> nor <xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> can take control of the thread until it returns to or calls into managed code.</span></span> <span data-ttu-id="15380-124">W kodzie zarządzanym zachowanie jest następujące:</span><span class="sxs-lookup"><span data-stu-id="15380-124">In managed code, the behavior is as follows:</span></span>  
  
- <span data-ttu-id="15380-125"><xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> wznawia wątek z dowolnego oczekiwania, który może znajdować się w wątku docelowym i powoduje jego wygenerowanie <xref:System.Threading.ThreadInterruptedException> .</span><span class="sxs-lookup"><span data-stu-id="15380-125"><xref:System.Threading.Thread.Interrupt%2A?displayProperty=nameWithType> wakes a thread out of any wait it might be in and causes a <xref:System.Threading.ThreadInterruptedException> to be thrown in the destination thread.</span></span>  
  
- <span data-ttu-id="15380-126"><xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> wznawia wątek z dowolnego oczekiwania, który może znajdować się w <xref:System.Threading.ThreadAbortException> wątku.</span><span class="sxs-lookup"><span data-stu-id="15380-126"><xref:System.Threading.Thread.Abort%2A?displayProperty=nameWithType> wakes a thread out of any wait it might be in and causes a <xref:System.Threading.ThreadAbortException> to be thrown on the thread.</span></span> <span data-ttu-id="15380-127">Aby uzyskać szczegółowe informacje, zobacz [niszczenie wątków](destroying-threads.md).</span><span class="sxs-lookup"><span data-stu-id="15380-127">For details, see [Destroying Threads](destroying-threads.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="15380-128">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="15380-128">See also</span></span>

- <xref:System.Threading.Thread>
- <xref:System.Threading.ThreadInterruptedException>
- <xref:System.Threading.ThreadAbortException>
- [<span data-ttu-id="15380-129">Wątkowość</span><span class="sxs-lookup"><span data-stu-id="15380-129">Threading</span></span>](index.md)
- [<span data-ttu-id="15380-130">Używanie wątków i wątkowości</span><span class="sxs-lookup"><span data-stu-id="15380-130">Using Threads and Threading</span></span>](using-threads-and-threading.md)
- [<span data-ttu-id="15380-131">Przegląd elementów podstawowych synchronizacji</span><span class="sxs-lookup"><span data-stu-id="15380-131">Overview of Synchronization Primitives</span></span>](overview-of-synchronization-primitives.md)
