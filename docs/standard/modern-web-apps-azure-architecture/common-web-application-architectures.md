---
title: Typowe architekturach aplikacji sieci web
description: Projektowania nowoczesnych aplikacji sieci web platformy ASP.NET Core i Microsoft Azure | Typowe architekturach aplikacji sieci web
author: ardalis
ms.author: wiwagn
ms.date: 10/06/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 911935379fd126ccbafe825a6ce4049c2e9b5cde
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/18/2018
---
# <a name="common-web-application-architectures"></a><span data-ttu-id="f85e8-103">Typowe architekturach aplikacji sieci Web</span><span class="sxs-lookup"><span data-stu-id="f85e8-103">Common Web Application Architectures</span></span>

> <span data-ttu-id="f85e8-104">"Jeśli uważasz, że architektura dobrej jest kosztowna, spróbuj zły architektury".</span><span class="sxs-lookup"><span data-stu-id="f85e8-104">"If you think good architecture is expensive, try bad architecture."</span></span>  
> <span data-ttu-id="f85e8-105">_-Brianowi Środkowa i Joseph Yoder_</span><span class="sxs-lookup"><span data-stu-id="f85e8-105">_- Brian Foote and Joseph Yoder_</span></span>

## <a name="summary"></a><span data-ttu-id="f85e8-106">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="f85e8-106">Summary</span></span>

<span data-ttu-id="f85e8-107">Najbardziej tradycyjne aplikacje .NET są wdrażane jako sztuk odpowiadający plik wykonywalny lub aplikacja sieci web jednej wewnątrz jednej appdomain usług IIS.</span><span class="sxs-lookup"><span data-stu-id="f85e8-107">Most traditional .NET applications are deployed as single units corresponding to an executable or a single web application running within a single IIS appdomain.</span></span> <span data-ttu-id="f85e8-108">To jest najprostszym modelem wdrożenia i bardzo dobrze służy wiele aplikacji wewnętrznych i mniejszych publicznego.</span><span class="sxs-lookup"><span data-stu-id="f85e8-108">This is the simplest deployment model and serves many internal and smaller public applications very well.</span></span> <span data-ttu-id="f85e8-109">Jednak najbardziej nieuproszczony aplikacji biznesowych nawet podana tego pojedynczą jednostkę wdrożenia, korzystać z niektórych separacji logicznej do kilku warstw.</span><span class="sxs-lookup"><span data-stu-id="f85e8-109">However, even given this single unit of deployment, most non-trivial business applications benefit from some logical separation into several layers.</span></span>

## <a name="what-is-a-monolithic-application"></a><span data-ttu-id="f85e8-110">Co to jest wbudowanymi aplikacji?</span><span class="sxs-lookup"><span data-stu-id="f85e8-110">What is a monolithic application?</span></span>

<span data-ttu-id="f85e8-111">Wbudowanymi aplikacji to taki, który jest całkowicie niezależne pod względem jego zachowania.</span><span class="sxs-lookup"><span data-stu-id="f85e8-111">A monolithic application is one that is entirely self-contained, in terms of its behavior.</span></span> <span data-ttu-id="f85e8-112">Może współpracować z innymi magazynami usług lub danych w trakcie wykonywania operacji, ale podstawowe jego działania jest uruchamiany w ramach własnym procesie i całej aplikacji jest zwykle wdrażane jako pojedyncza jednostka.</span><span class="sxs-lookup"><span data-stu-id="f85e8-112">It may interact with other services or data stores in the course of performing its operations, but the core of its behavior runs within its own process and the entire application is typically deployed as a single unit.</span></span> <span data-ttu-id="f85e8-113">Jeśli takiej aplikacji musi skalowanie w poziomie, zwykle całej aplikacji jest zduplikowany w wielu serwerów lub maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-113">If such an application needs to scale horizontally, typically the entire application is duplicated across multiple servers or virtual machines.</span></span>

## <a name="all-in-one-applications"></a><span data-ttu-id="f85e8-114">Aplikacje w jednym</span><span class="sxs-lookup"><span data-stu-id="f85e8-114">All-in-One applications</span></span>

<span data-ttu-id="f85e8-115">Najmniejsza liczba projektów dla architektury aplikacji jest jednym.</span><span class="sxs-lookup"><span data-stu-id="f85e8-115">The smallest possible number of projects for an application architecture is one.</span></span> <span data-ttu-id="f85e8-116">W ramach tej architektury całą logikę aplikacji jest zawarty w jednym projekcie skompilowany w jednym zestawie i wdrożony jako pojedyncza jednostka.</span><span class="sxs-lookup"><span data-stu-id="f85e8-116">In this architecture, the entire logic of the application is contained in a single project, compiled to a single assembly, and deployed as a single unit.</span></span>

<span data-ttu-id="f85e8-117">Nowy projekt platformy ASP.NET Core, czy utworzono w programie Visual Studio lub z wiersza polecenia, rozpoczyna się jako proste monolityczna "wszystkie w jednym".</span><span class="sxs-lookup"><span data-stu-id="f85e8-117">A new ASP.NET Core project, whether created in Visual Studio or from the command line, starts out as a simple "all-in-one" monolith.</span></span> <span data-ttu-id="f85e8-118">Zawiera wszystkie zachowania aplikacji, w tym logika dostępu do prezentacji, biznesowych i danych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-118">It contains all of the behavior of the application, including presentation, business, and data access logic.</span></span> <span data-ttu-id="f85e8-119">Struktura pliku aplikacji pojedynczych projektów przedstawiono na rysunku 5-1.</span><span class="sxs-lookup"><span data-stu-id="f85e8-119">Figure 5-1 shows the file structure of a single-project app.</span></span>

<span data-ttu-id="f85e8-120">**Rysunek 5-1.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-120">**Figure 5-1.**</span></span> <span data-ttu-id="f85e8-121">Jeden projekt aplikacji platformy ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="f85e8-121">A single project ASP.NET Core app</span></span>

![](./media/image5-1.png)

<span data-ttu-id="f85e8-122">W przypadku pojedynczego projektu separacji odbywa się przy użyciu folderów.</span><span class="sxs-lookup"><span data-stu-id="f85e8-122">In a single project scenario, separation of concerns is achieved through the use of folders.</span></span> <span data-ttu-id="f85e8-123">Szablon domyślny zawiera osobne foldery dla obowiązki wzorzec MVC modele, widoki i kontrolery, a także dodatkowe foldery dla danych i usług.</span><span class="sxs-lookup"><span data-stu-id="f85e8-123">The default template includes separate folders for MVC pattern responsibilities of Models, Views, and Controllers, as well as additional folders for Data and Services.</span></span> <span data-ttu-id="f85e8-124">W tym przypadku prezentacji szczegóły powinny być ograniczone największego możliwego do folderu widoki i szczegóły implementacji danych dostęp powinien być ograniczony do klasy znajdującej się w folderze z danymi.</span><span class="sxs-lookup"><span data-stu-id="f85e8-124">In this arrangement, presentation details should be limited as much as possible to the Views folder, and data access implementation details should be limited to classes kept in the Data folder.</span></span> <span data-ttu-id="f85e8-125">Logika biznesowa powinien znajdować się w usługach i klas w ramach folderu modeli.</span><span class="sxs-lookup"><span data-stu-id="f85e8-125">Business logic should reside in services and classes within the Models folder.</span></span>

<span data-ttu-id="f85e8-126">Mimo że jest to prosty, rozwiązanie wbudowanymi pojedynczych projektów ma niektóre wady.</span><span class="sxs-lookup"><span data-stu-id="f85e8-126">Although simple, the single-project monolithic solution has some disadvantages.</span></span> <span data-ttu-id="f85e8-127">Wraz z rozwojem rozmiar i złożoność projektu, liczbę plików i folderów będzie również powiększania.</span><span class="sxs-lookup"><span data-stu-id="f85e8-127">As the project's size and complexity grows, the number of files and folders will continue to grow as well.</span></span> <span data-ttu-id="f85e8-128">Dotyczy interfejsu użytkownika (modele, widoki, kontrolery) znajdują się w wielu folderów, które nie są grupowane razem alfabetycznie.</span><span class="sxs-lookup"><span data-stu-id="f85e8-128">UI concerns (models, views, controllers) reside in multiple folders, which are not grouped together alphabetically.</span></span> <span data-ttu-id="f85e8-129">Ten problem tylko pobiera pogarsza się wraz z po dodaniu dodatkowych konstrukcje poziomu interfejsu użytkownika, takie jak filtry lub ModelBinders, w swoich własnych folderów.</span><span class="sxs-lookup"><span data-stu-id="f85e8-129">This issue only gets worse when additional UI-level constructs, such as Filters or ModelBinders, are added in their own folders.</span></span> <span data-ttu-id="f85e8-130">Reguły biznesowe są rozproszone między folderami modeli i usług, i nie ma żadnych jednoznacznie zidentyfikować, którego klas w foldery, które powinny są zależne od które.</span><span class="sxs-lookup"><span data-stu-id="f85e8-130">Business logic is scattered between the Models and Services folders, and there is no clear indication of which classes in which folders should depend on which others.</span></span> <span data-ttu-id="f85e8-131">Ten brak organizacji na poziomie projektu często prowadzi do [kod postaci spaghetti](http://deviq.com/spaghetti-code/).</span><span class="sxs-lookup"><span data-stu-id="f85e8-131">This lack of organization at the project level frequently leads to [spaghetti code](http://deviq.com/spaghetti-code/).</span></span>

<span data-ttu-id="f85e8-132">W celu rozwiązania tych problemów, aplikacje często rozwijać do rozwiązań dotyczących wielu projektów, gdzie każdy projekt jest uznawany za znajdują się w szczególności *warstwy* aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-132">In order to address these issues, applications often evolve into multi-project solutions, where each project is considered to reside in a particular *layer* of the application.</span></span>

## <a name="what-are-layers"></a><span data-ttu-id="f85e8-133">Co to są warstwy?</span><span class="sxs-lookup"><span data-stu-id="f85e8-133">What are layers?</span></span>

<span data-ttu-id="f85e8-134">Wzrostem aplikacji złożonością jednym ze sposobów zarządzać tym złożoności ma podzielić aplikacji zgodnie z jego obowiązki lub problemy.</span><span class="sxs-lookup"><span data-stu-id="f85e8-134">As applications grow in complexity, one way to manage that complexity is to break the application up according to its responsibilities or concerns.</span></span> <span data-ttu-id="f85e8-135">Następuje rozdzielenie zasady problemy i zabezpieczyć rosnącym codebase organizacji, dzięki czemu deweloperzy mogą łatwiej znaleźć którym zaimplementowano niektórych funkcji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-135">This follows the separation of concerns principle, and can help keep a growing codebase organized so that developers can easily find where certain functionality is implemented.</span></span> <span data-ttu-id="f85e8-136">Warstwowa architektura oferuje wiele zalet poza tylko kod organizacji, mimo że.</span><span class="sxs-lookup"><span data-stu-id="f85e8-136">Layered architecture offers a number of advantages beyond just code organization, though.</span></span>

<span data-ttu-id="f85e8-137">Poprzez organizowanie kodu do warstwy, często używane funkcje niższego poziomu mogą być ponownie używane w całej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-137">By organizing code into layers, common low-level functionality can be reused throughout the application.</span></span> <span data-ttu-id="f85e8-138">Ta ponownemu jest korzystne, ponieważ oznacza to, że trzeba napisać mniejsza ilość kodu i umożliwia aplikacji normalizacji w pojedynczej implementacji, zgodnie z zasadą suchej.</span><span class="sxs-lookup"><span data-stu-id="f85e8-138">This reuse is beneficial because it means less code needs to be written and because it can allow the application to standardize on a single implementation, following the DRY principle.</span></span>

<span data-ttu-id="f85e8-139">Z architekturą warstwowych aplikacje można wymuszać ograniczenia, na których warstwy może komunikować się z innych warstw.</span><span class="sxs-lookup"><span data-stu-id="f85e8-139">With a layered architecture, applications can enforce restrictions on which layers can communicate with other layers.</span></span> <span data-ttu-id="f85e8-140">Pozwala to osiągnąć hermetyzacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-140">This helps to achieve encapsulation.</span></span> <span data-ttu-id="f85e8-141">Podczas zmiany warstwy lub zastąpione, powinny mieć wpływ na tylko warstwy, które współpracują z nim.</span><span class="sxs-lookup"><span data-stu-id="f85e8-141">When a layer is changed or replaced, only those layers that work with it should be impacted.</span></span> <span data-ttu-id="f85e8-142">Poprzez ograniczenie, które warstwy zależą od, na których można zminimalizować innych warstw wpływ zmian, aby pojedynczej zmiany bez wpływu na całej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-142">By limiting which layers depend on which other layers, the impact of changes can be mitigated so that a single change doesn't impact the entire application.</span></span>

<span data-ttu-id="f85e8-143">Warstwy (i encapsulation) ułatwiają znacznie Zastąp funkcjonalności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-143">Layers (and encapsulation) make it much easier to replace functionality within the application.</span></span> <span data-ttu-id="f85e8-144">Na przykład aplikacja trwałości początkowo użyć własną bazę danych programu SQL Server, ale później można użyć strategii opartej na chmurze trwałości lub jeden za interfejsu API sieci web.</span><span class="sxs-lookup"><span data-stu-id="f85e8-144">For example, an application might initially use its own SQL Server database for persistence, but later could choose to use a cloud-based persistence strategy, or one behind a web API.</span></span> <span data-ttu-id="f85e8-145">Jeśli aplikacja ma prawidłowo hermetyzowany jej implementacja trwałości w ramach logicznego warstwy, tej warstwy określonego programu SQL Server może zostać zastąpiona nową wykonania tego samego interfejsu publicznego.</span><span class="sxs-lookup"><span data-stu-id="f85e8-145">If the application has properly encapsulated its persistence implementation within a logical layer, that SQL Server specific layer could be replaced by a new one implementing the same public interface.</span></span>

<span data-ttu-id="f85e8-146">Oprócz możliwości wymienić implementacji w odpowiedzi na przyszłe zmiany wymagań dotyczących warstwy aplikacji może również ułatwić wymienić implementacje do celów testowych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-146">In addition to the potential of swapping out implementations in response to future changes in requirements, application layers can also make it easier to swap out implementations for testing purposes.</span></span> <span data-ttu-id="f85e8-147">Nie trzeba napisać testy, które pracują z warstwy danych rzeczywistych lub interfejsu użytkownika aplikacji, tych warstw może zastąpione w czasie testu fałszywych implementacje, które zapewniają znane odpowiedzi na żądania.</span><span class="sxs-lookup"><span data-stu-id="f85e8-147">Instead of having to write tests that operate against the real data layer or UI layer of the application, these layers can be replaced at test time with fake implementations that provide known responses to requests.</span></span> <span data-ttu-id="f85e8-148">To zwykle sprawia, że testy znacznie łatwiejsze do zapisu i znacznie szybsze uruchamianie w porównaniu do uruchomienia testów ponownie rzeczywistych infrastruktury aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-148">This typically makes tests much easier to write and much faster to run when compared to running tests again the application's real infrastructure.</span></span>

<span data-ttu-id="f85e8-149">Logiczne Tworzenie warstw to technika typowe dla poprawy organizacji kodu w aplikacjach dla przedsiębiorstw oprogramowania, a istnieje kilka sposobów, w których kodu można organizować w warstwy.</span><span class="sxs-lookup"><span data-stu-id="f85e8-149">Logical layering is a common technique for improving the organization of code in enterprise software applications, and there are several ways in which code can be organized into layers.</span></span>

> [!NOTE]
> <span data-ttu-id="f85e8-150">*Warstwy* reprezentują separacji logicznej w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-150">*Layers* represent logical separation within the application.</span></span> <span data-ttu-id="f85e8-151">W przypadku, gdy logiki aplikacji jest fizycznie rozproszone na oddzielnych serwerach lub procesy, te cele oddzielne fizyczne wdrożenia są określane jako *warstw*.</span><span class="sxs-lookup"><span data-stu-id="f85e8-151">In the event that application logic is physically distributed to separate servers or processes, these separate physical deployment targets are referred to as *tiers*.</span></span> <span data-ttu-id="f85e8-152">Jest to możliwe i dość często, aby korzystać z aplikacji N warstwy, która została wdrożona w pojedynczej warstwie.</span><span class="sxs-lookup"><span data-stu-id="f85e8-152">It's possible, and quite common, to have an N-Layer application that is deployed to a single tier.</span></span>

## <a name="traditional-n-layer-architecture-applications"></a><span data-ttu-id="f85e8-153">Tradycyjne aplikacje architektury "N warstwy"</span><span class="sxs-lookup"><span data-stu-id="f85e8-153">Traditional "N-Layer" architecture applications</span></span>

<span data-ttu-id="f85e8-154">Najbardziej typowe organizacji aplikacji logiki do warstwy go pokazano na rysunku 5-2.</span><span class="sxs-lookup"><span data-stu-id="f85e8-154">The most common organization of application logic into layers it shown in Figure 5-2.</span></span>

<span data-ttu-id="f85e8-155">**Rysunek 5-2.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-155">**Figure 5-2.**</span></span> <span data-ttu-id="f85e8-156">Typowa aplikacja warstwy.</span><span class="sxs-lookup"><span data-stu-id="f85e8-156">Typical application layers.</span></span>

![](./media/image5-2.png)

<span data-ttu-id="f85e8-157">Te warstwy interfejsu użytkownika, są często skrót logiki warstwy Biznesowej (warstwy logiki biznesowej) i warstwy DAL (Warstwa dostępu do danych).</span><span class="sxs-lookup"><span data-stu-id="f85e8-157">These layers are frequently abbreviated as UI, BLL (Business Logic Layer), and DAL (Data Access Layer).</span></span> <span data-ttu-id="f85e8-158">Przy użyciu tej architektury, użytkownikom wysyłanie żądań za pośrednictwem warstwy interfejsu użytkownika, która współdziała tylko z logiki warstwy Biznesowej.</span><span class="sxs-lookup"><span data-stu-id="f85e8-158">Using this architecture, users make requests through the UI layer, which interacts only with the BLL.</span></span> <span data-ttu-id="f85e8-159">Logiki warstwy Biznesowej, z kolei może wywołać warstwy DAL dla żądań dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-159">The BLL, in turn, can call the DAL for data access requests.</span></span> <span data-ttu-id="f85e8-160">Warstwy interfejsu użytkownika, nie należy wprowadzać żadnych żądań z warstwą dal bezpośrednio, ani powinien interakcję z trwałości bezpośrednio w inny sposób.</span><span class="sxs-lookup"><span data-stu-id="f85e8-160">The UI layer should not make any requests to the DAL directly, nor should it interact with persistence directly through other means.</span></span> <span data-ttu-id="f85e8-161">Podobnie logiki warstwy Biznesowej powinien komunikować się tylko z trwałości za pośrednictwem warstwy DAL.</span><span class="sxs-lookup"><span data-stu-id="f85e8-161">Likewise, the BLL should only interact with persistence by going through the DAL.</span></span> <span data-ttu-id="f85e8-162">Dzięki temu każda warstwa ma własną odpowiedzialność dobrze znane.</span><span class="sxs-lookup"><span data-stu-id="f85e8-162">In this way, each layer has its own well-known responsibility.</span></span>

<span data-ttu-id="f85e8-163">Jeden wadą tego rozwiązania tradycyjnych Tworzenie warstw jest uruchamianie zależności kompilacji od góry do dołu.</span><span class="sxs-lookup"><span data-stu-id="f85e8-163">One disadvantage of this traditional layering approach is that compile-time dependencies run from the top to the bottom.</span></span> <span data-ttu-id="f85e8-164">Oznacza to, że warstwy interfejsu użytkownika zależy od logiki warstwy Biznesowej, która jest zależna od warstwy DAL.</span><span class="sxs-lookup"><span data-stu-id="f85e8-164">That is, the UI layer depends on the BLL, which depends on the DAL.</span></span> <span data-ttu-id="f85e8-165">Oznacza to, że logiki warstwy Biznesowej, zawierający zwykle najważniejszych logikę w aplikacji, ma zależnych na szczegóły implementacji dostępu do danych (i często na istnienie bazy danych).</span><span class="sxs-lookup"><span data-stu-id="f85e8-165">This means that the BLL, which usually holds the most important logic in the application, is dependent on data access implementation details (and often on the existence of a database).</span></span> <span data-ttu-id="f85e8-166">Testowanie logiki biznesowej w takich architektura często jest trudne i wymaga testowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-166">Testing business logic in such an architecture is often difficult, requiring a test database.</span></span> <span data-ttu-id="f85e8-167">Zasada odwracanie zależności może służyć do rozwiązania tego problemu, zobaczysz w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-167">The dependency inversion principle can be used to address this issue, as you'll see in the next section.</span></span>

<span data-ttu-id="f85e8-168">Rysunek 5-3 pokazano, dzielenie aplikacji na trzy projekty odpowiedzialność (lub layer).</span><span class="sxs-lookup"><span data-stu-id="f85e8-168">Figure 5-3 shows an example solution, breaking the application into three projects by responsibility (or layer).</span></span>

<span data-ttu-id="f85e8-169">**Rysunek 5-3.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-169">**Figure 5-3.**</span></span> <span data-ttu-id="f85e8-170">Prostą aplikację wbudowanymi z trzy projekty.</span><span class="sxs-lookup"><span data-stu-id="f85e8-170">A simple monolithic application with three projects.</span></span>

![](./media/image5-3.png)

<span data-ttu-id="f85e8-171">Mimo że ta aplikacja używa kilku projektów na potrzeby organizacyjne, nadal jest wdrożona jako pojedyncza jednostka i klientów będzie korzystać z niego jako aplikacji sieci web jednej.</span><span class="sxs-lookup"><span data-stu-id="f85e8-171">Although this application uses several projects for organizational purposes, it is still deployed as a single unit and its clients will interact with it as a single web app.</span></span> <span data-ttu-id="f85e8-172">Dzięki temu proces wdrażania bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="f85e8-172">This allows for very simple deployment process.</span></span> <span data-ttu-id="f85e8-173">Rysunek 5-4 przedstawia sposób takich aplikacji może być hostowany przy użyciu systemu Windows Azure.</span><span class="sxs-lookup"><span data-stu-id="f85e8-173">Figure 5-4 shows how such an app might be hosted using Windows Azure.</span></span>

![](./media/image5-4.png)

<span data-ttu-id="f85e8-174">**Rysunek 5-4.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-174">**Figure 5-4.**</span></span> <span data-ttu-id="f85e8-175">Proste wdrożenie aplikacji sieci Web Azure</span><span class="sxs-lookup"><span data-stu-id="f85e8-175">Simple deployment of Azure Web App</span></span>

<span data-ttu-id="f85e8-176">Jak aplikacja wymaga powiększania, bardziej złożone i niezawodne rozwiązania wdrożenia może być wymagane.</span><span class="sxs-lookup"><span data-stu-id="f85e8-176">As application needs grow, more complex and robust deployment solutions may be required.</span></span> <span data-ttu-id="f85e8-177">Rysunek 5-5 przedstawiono przykład bardziej złożonych plan wdrożenia, który obsługuje dodatkowe funkcje.</span><span class="sxs-lookup"><span data-stu-id="f85e8-177">Figure 5-5 shows an example of a more complex deployment plan that supports additional capabilities.</span></span>

![](./media/image5-5.png)

<span data-ttu-id="f85e8-178">**Rysunek 5-5.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-178">**Figure 5-5.**</span></span> <span data-ttu-id="f85e8-179">Wdrażanie aplikacji sieci web w usłudze Azure App Service</span><span class="sxs-lookup"><span data-stu-id="f85e8-179">Deploying a web app to an Azure App Service</span></span>

<span data-ttu-id="f85e8-180">Wewnętrznie tego projektu organizacji do wielu projektów opartych na odpowiedzialność zwiększa łatwość konserwacji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-180">Internally, this project's organization into multiple projects based on responsibility improves the maintainability of the application.</span></span>

<span data-ttu-id="f85e8-181">Ta jednostka można skalować w górę lub w poziomie przeprowadzać oparte na chmurze skalowalności na żądanie.</span><span class="sxs-lookup"><span data-stu-id="f85e8-181">This unit can be scaled up or out to take advantage of cloud-based on-demand scalability.</span></span> <span data-ttu-id="f85e8-182">Skalowanie w oznacza dodanie dodatkowych procesora CPU, pamięci, miejsca na dysku lub innych zasobów na serwery hosting aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-182">Scaling up means adding additional CPU, memory, disk space, or other resources to the server(s) hosting your app.</span></span> <span data-ttu-id="f85e8-183">Skalowanie w poziomie oznacza, że dodawanie dodatkowe wystąpienia takich serwerów, czy są to serwerów fizycznych lub maszynach wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-183">Scaling out means adding additional instances of such servers, whether these are physical servers or virtual machines.</span></span> <span data-ttu-id="f85e8-184">Kiedy aplikacja znajduje się w wielu wystąpieniach, usługi równoważenia obciążenia jest używana do przypisywania żądania wystąpień poszczególnych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-184">When your app is hosted across multiple instances, a load balancer is used to assign requests to individual app instances.</span></span>

<span data-ttu-id="f85e8-185">Najprostsza metoda skalowanie aplikacji sieci web na platformie Azure jest konfigurowanie skalowania ręcznie w planie usługi aplikacji w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-185">The simplest approach to scaling a web application in Azure is to configure scaling manually in the application's App Service Plan.</span></span> <span data-ttu-id="f85e8-186">Rysunek 5 i 6-Pokaż ekran odpowiednie pulpitu nawigacyjnego platformy Azure do skonfigurowania służy liczbę wystąpień aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-186">Figure 5-6 show the appropriate Azure dashboard screen to configure how many instances are serving an app.</span></span>

![](./media/image5-6.png)

<span data-ttu-id="f85e8-187">**Rysunek 5-6.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-187">**Figure 5-6.**</span></span> <span data-ttu-id="f85e8-188">Plan usługi App Service skalowanie na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="f85e8-188">App Service Plan scaling in Azure.</span></span>

## <a name="clean-architecture"></a><span data-ttu-id="f85e8-189">Architektura czyste</span><span class="sxs-lookup"><span data-stu-id="f85e8-189">Clean architecture</span></span>

<span data-ttu-id="f85e8-190">Zwykle aplikacje, które postępuj zgodnie z zasadą odwracanie zależności, a także zasady Domain-Driven projektu (DDD) na podobną architekturę.</span><span class="sxs-lookup"><span data-stu-id="f85e8-190">Applications that follow the Dependency Inversion Principle as well as Domain-Driven Design (DDD) principles tend to arrive at a similar architecture.</span></span> <span data-ttu-id="f85e8-191">Taka architektura został przekazany przez wiele nazw latach.</span><span class="sxs-lookup"><span data-stu-id="f85e8-191">This architecture has gone by many names over the years.</span></span> <span data-ttu-id="f85e8-192">Jeden z imiona jest gniazdo sześciokątne architektury, następuje portów i karty.</span><span class="sxs-lookup"><span data-stu-id="f85e8-192">One of the first names was Hexagonal Architecture, followed by Ports-and-Adapters.</span></span> <span data-ttu-id="f85e8-193">Niedawno, jest ono cytowane jako [architektura przenikanie](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) lub [czystej architektury](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span><span class="sxs-lookup"><span data-stu-id="f85e8-193">More recently, it's been cited as the [Onion Architecture](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/) or [Clean Architecture](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html).</span></span> <span data-ttu-id="f85e8-194">Jest to nazwa ostatniego czystą architektury, która jest używana jako podstawa dla opisu architektury w Książka elektroniczna.</span><span class="sxs-lookup"><span data-stu-id="f85e8-194">It is this last name, Clean Architecture, that is used as the basis for describing the architecture in this e-book.</span></span>

> [!NOTE]
> <span data-ttu-id="f85e8-195">Określenie czystej architektury może odnosić się do aplikacji, które są tworzone przy użyciu zasad DDD, jak również do tych, które nie zostały skompilowane przy użyciu DDD.</span><span class="sxs-lookup"><span data-stu-id="f85e8-195">The term Clean Architecture can be applied to applications that are built using DDD Principles as well as to those that are not built using DDD.</span></span> <span data-ttu-id="f85e8-196">W przypadku pierwszej, ta kombinacja może określane jako "Czystej architektury DDD".</span><span class="sxs-lookup"><span data-stu-id="f85e8-196">In the case of the former, this combination may be referred to as "Clean DDD Architecture".</span></span>

<span data-ttu-id="f85e8-197">Architektura czystą umieszcza modelu logiki i aplikacji biznesowych w Centrum aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-197">Clean architecture puts the business logic and application model at the center of the application.</span></span> <span data-ttu-id="f85e8-198">Zamiast logiki biznesowej, które są zależne od dostęp do danych lub inne problemy infrastruktury jest odwrócony tej zależności: szczegóły infrastruktury i implementacji są zależne od podstawowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-198">Instead of having business logic depend on data access or other infrastructure concerns, this dependency is inverted: infrastructure and implementation details depend on the Application Core.</span></span> <span data-ttu-id="f85e8-199">Jest to osiągane przez zdefiniowanie abstrakcje lub interfejsów w podstawowej aplikacji, które następnie są implementowane przez typy zdefiniowane w warstwie infrastrukturze.</span><span class="sxs-lookup"><span data-stu-id="f85e8-199">This is achieved by defining abstractions, or interfaces, in the Application Core, which are then implemented by types defined in the Infrastructure layer.</span></span> <span data-ttu-id="f85e8-200">Typowy sposób przedstawiania tej architektury jest szereg koncentrycznych, podobnie jak przenikanie.</span><span class="sxs-lookup"><span data-stu-id="f85e8-200">A common way of visualizing this architecture is to use a series of concentric circles, similar to an onion.</span></span> <span data-ttu-id="f85e8-201">Rysunek 5 X przedstawiono przykład tego stylu reprezentacja architektury.</span><span class="sxs-lookup"><span data-stu-id="f85e8-201">Figure 5-X shows an example of this style of architectural representation.</span></span>

![](./media/image5-7.png)

<span data-ttu-id="f85e8-202">**Rysunek 5-7.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-202">**Figure 5-7.**</span></span> <span data-ttu-id="f85e8-203">Czystej architektury; przenikanie widoku</span><span class="sxs-lookup"><span data-stu-id="f85e8-203">Clean Architecture; onion view</span></span>

<span data-ttu-id="f85e8-204">Na tym diagramie zależności przepływać kierunku najbardziej okręgu.</span><span class="sxs-lookup"><span data-stu-id="f85e8-204">In this diagram, dependencies flow toward the innermost circle.</span></span> <span data-ttu-id="f85e8-205">W związku z tym widać, że podstawowe aplikacji (przyjmująca nazwy z jego położenie fundament ten diagram) nie ma żadnych zależności na inne warstwy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-205">Thus, you can see that the Application Core (which takes its name from its position at the core of this diagram) has no dependencies on other application layers.</span></span> <span data-ttu-id="f85e8-206">W bardzo center są jednostek i interfejsów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-206">At the very center are the application's entities and interfaces.</span></span> <span data-ttu-id="f85e8-207">Tylko poza, ale nadal w podstawowej aplikacji są domeny usług, które zwykle implementować interfejsów zdefiniowane w wewnętrznym okręgu.</span><span class="sxs-lookup"><span data-stu-id="f85e8-207">Just outside, but still in the Application Core, are domain services, which typically implement interfaces defined in the inner circle.</span></span> <span data-ttu-id="f85e8-208">Poza rdzeniem aplikacji zarówno w interfejsie użytkownika, jak i warstwy infrastruktury zależą od Core aplikacji, ale nie na siebie (niekoniecznie).</span><span class="sxs-lookup"><span data-stu-id="f85e8-208">Outside of the Application Core, both the User Interface and the Infrastructure layers depend on the Application Core, but not on one another (necessarily).</span></span>

<span data-ttu-id="f85e8-209">Rysunek 5 X zawiera bardziej tradycyjnej diagramu warstwy w poziomie, który lepiej odzwierciedla zależność między interfejsu użytkownika i innych warstw.</span><span class="sxs-lookup"><span data-stu-id="f85e8-209">Figure 5-X shows a more traditional horizontal layer diagram that better reflects the dependency between the UI and other layers.</span></span>

![](./media/image5-8.png)

<span data-ttu-id="f85e8-210">**Rysunek 5 – 8.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-210">**Figure 5-8.**</span></span> <span data-ttu-id="f85e8-211">Czystej architektury; Widok warstwy w poziomie</span><span class="sxs-lookup"><span data-stu-id="f85e8-211">Clean Architecture; horizontal layer view</span></span>

<span data-ttu-id="f85e8-212">Należy pamiętać, że stałe strzałki reprezentują zależności kompilacji podczas przerywaną strzałką reprezentuje zależność tylko do środowiska wykonawczego.</span><span class="sxs-lookup"><span data-stu-id="f85e8-212">Note that the solid arrows represent compile-time dependencies, while the dashed arrow represents a runtime-only dependency.</span></span> <span data-ttu-id="f85e8-213">Używanie czystej architektury, warstwy interfejsu użytkownika działa z interfejsami zdefiniowane w podstawowej aplikacji w czasie kompilacji, a w idealnym przypadku należy znać typów wdrożenia zdefiniowano w warstwie infrastrukturze.</span><span class="sxs-lookup"><span data-stu-id="f85e8-213">Using the clean architecture, the UI layer works with interfaces defined in the Application Core at compile time, and ideally should not have any knowledge of the implementation types defined in the Infrastructure layer.</span></span> <span data-ttu-id="f85e8-214">W czasie wykonywania jednak te typy wdrożenia będzie wymagane dla aplikacji, które można wykonać, więc muszą być obecne i przewodowej do interfejsów podstawowych aplikacji za pomocą iniekcji zależności.</span><span class="sxs-lookup"><span data-stu-id="f85e8-214">At runtime, however, these implementation types will be required for the app to execute, so they will need to be present and wired up to the Application Core interfaces via dependency injection.</span></span>

<span data-ttu-id="f85e8-215">Rysunek 5 – 9 przedstawiono bardziej szczegółowe architektury aplikacji platformy ASP.NET Core podczas tworzenia następujących te zalecenia.</span><span class="sxs-lookup"><span data-stu-id="f85e8-215">Figure 5-9 shows a more detailed view of an ASP.NET Core application's architecture when built following these recommendations.</span></span>

![Architektura Core ASPNET](./media/image5-9.png)

<span data-ttu-id="f85e8-217">**Rysunek 5 – 9.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-217">**Figure 5-9.**</span></span> <span data-ttu-id="f85e8-218">Diagram architektury platformy ASP.NET Core następującego czystej architektury.</span><span class="sxs-lookup"><span data-stu-id="f85e8-218">ASP.NET Core architecture diagram following Clean Architecture.</span></span>

<span data-ttu-id="f85e8-219">Ponieważ Core aplikacji nie są zależne od infrastruktury, jest bardzo proste do pisania testów jednostkowych automatycznych dla tej warstwy.</span><span class="sxs-lookup"><span data-stu-id="f85e8-219">Because the Application Core doesn't depend on Infrastructure, it is very easy to write automated unit tests for this layer.</span></span> <span data-ttu-id="f85e8-220">Rysunki 5 – 10 i 5 11 pokazać, jak testy mieści się w tej architekturze.</span><span class="sxs-lookup"><span data-stu-id="f85e8-220">Figures 5-10 and 5-11 show how tests fit into this architecture.</span></span>

![UnitTestCore](./media/image5-10.png)

<span data-ttu-id="f85e8-222">**Rysunek 5-10.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-222">**Figure 5-10.**</span></span> <span data-ttu-id="f85e8-223">Jednostka testowania podstawowej aplikacji w izolacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-223">Unit testing Application Core in isolation.</span></span>

![IntegrationTests](./media/image5-11.png)

<span data-ttu-id="f85e8-225">**Rysunek 5-11.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-225">**Figure 5-11.**</span></span> <span data-ttu-id="f85e8-226">Testowanie integracji, implementacje infrastruktury z zależnościami zewnętrznymi.</span><span class="sxs-lookup"><span data-stu-id="f85e8-226">Integration testing Infrastructure implementations with external dependencies.</span></span>

<span data-ttu-id="f85e8-227">Ponieważ warstwy interfejsu użytkownika nie ma żadnych zależności bezpośrednich dla typów zdefiniowanych w projekcie infrastruktury, również jest bardzo proste wymiany implementacji, albo w celu ułatwienia testowania lub w odpowiedzi na zmieniające się wymagania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-227">Since the UI layer doesn't have any direct dependency on types defined in the Infrastructure project, it is likewise very easy to swap out implementations, either to facilitate testing or in response to changing application requirements.</span></span> <span data-ttu-id="f85e8-228">Wbudowane korzystanie z platformy ASP.NET Core i pomoc techniczna dla iniekcji zależności sprawia, że tej architektury najbardziej stosownego sposobu struktury nieuproszczony wbudowanymi aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="f85e8-228">ASP.NET Core's built-in use of and support for dependency injection makes this architecture the most appropriate way to structure non-trivial monolithic applications.</span></span>

<span data-ttu-id="f85e8-229">Dla aplikacji wbudowanymi projektów aplikacji Core, infrastruktury i interfejs użytkownika są wszystkie Uruchom jako pojedynczej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-229">For monolithic applications the Application Core, Infrastructure, and User Interface projects are all run as a single application.</span></span> <span data-ttu-id="f85e8-230">Architektura środowiska uruchomieniowego może wyglądać podobnie jak rysunek 5 – 12.</span><span class="sxs-lookup"><span data-stu-id="f85e8-230">The runtime application architecture might look something like Figure 5-12.</span></span>

![Architektura Core ASPNET 2](./media/image5-12.png)

<span data-ttu-id="f85e8-232">**Rysunek 5 – 12.**</span><span class="sxs-lookup"><span data-stu-id="f85e8-232">**Figure 5-12.**</span></span> <span data-ttu-id="f85e8-233">Architektura środowiska uruchomieniowego przykładowej aplikacji platformy ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="f85e8-233">A sample ASP.NET Core app's runtime architecture.</span></span>

### <a name="organizing-code-in-clean-architecture"></a><span data-ttu-id="f85e8-234">Organizowanie kodu w czystej architektury</span><span class="sxs-lookup"><span data-stu-id="f85e8-234">Organizing Code in Clean Architecture</span></span>

<span data-ttu-id="f85e8-235">W rozwiązaniu czystej architektury każdy projekt ma wyczyść obowiązki.</span><span class="sxs-lookup"><span data-stu-id="f85e8-235">In a Clean Architecture solution, each project has clear responsibilities.</span></span> <span data-ttu-id="f85e8-236">Tak niektóre typy będą należeć w każdym projekcie i często znajdują się foldery odpowiadający tych typów w projekcie odpowiednich.</span><span class="sxs-lookup"><span data-stu-id="f85e8-236">As such, certain types will belong in each project and you'll frequently find folders corresponding to these types in the appropriate project.</span></span>

<span data-ttu-id="f85e8-237">Podstawowe aplikacji przechowuje modelu biznesowej, w tym jednostki, usług i interfejsów.</span><span class="sxs-lookup"><span data-stu-id="f85e8-237">The Application Core holds the business model, which includes entities, services, and interfaces.</span></span> <span data-ttu-id="f85e8-238">Te interfejsy zawierają obiektów abstrakcyjnych odpowiadających operacje, które będą wykonywane przy użyciu infrastruktury, takich jak dostęp do danych, dostępu do systemu plików, połączeń sieciowych, itp. Czasami usług lub interfejsów zdefiniowanych w tej warstwie będzie konieczna współpraca z innego niż jednostka typów, które mają nie zależne od infrastruktury i interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f85e8-238">These interfaces include abstractions for operations that will be performed using Infrastructure, such as data access, file system access, network calls, etc. Sometimes services or interfaces defined at this layer will need to work with non-entity types that have no dependencies on UI or Infrastructure.</span></span> <span data-ttu-id="f85e8-239">Te można zdefiniować jako proste przenieść obiekty danych (DTOs).</span><span class="sxs-lookup"><span data-stu-id="f85e8-239">These can be defined as simple Data Transfer Objects (DTOs).</span></span>

> ### <a name="application-core-types"></a><span data-ttu-id="f85e8-240">Typy podstawowe aplikacji</span><span class="sxs-lookup"><span data-stu-id="f85e8-240">Application Core Types</span></span>
> -   <span data-ttu-id="f85e8-241">Jednostek (business modelu klasy, które są zachowywane)</span><span class="sxs-lookup"><span data-stu-id="f85e8-241">Entities (business model classes that are persisted)</span></span>
> -   <span data-ttu-id="f85e8-242">Interfejsy</span><span class="sxs-lookup"><span data-stu-id="f85e8-242">Interfaces</span></span>
> -   <span data-ttu-id="f85e8-243">Usługi</span><span class="sxs-lookup"><span data-stu-id="f85e8-243">Services</span></span>
> -   <span data-ttu-id="f85e8-244">DTOs</span><span class="sxs-lookup"><span data-stu-id="f85e8-244">DTOs</span></span>

<span data-ttu-id="f85e8-245">Projekt infrastruktury zazwyczaj uwzględnia implementacje dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-245">The Infrastructure project will typically include data access implementations.</span></span> <span data-ttu-id="f85e8-246">W typowej aplikacji sieci web platformy ASP.NET Core to obejmować Entity Framework DbContext, wszelkie migracje Core EF, które zostały zdefiniowane i klasy implementacji dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-246">In a typical ASP.NET Core web application, this will include the Entity Framework DbContext, any EF Core Migrations that have been defined, and data access implementation classes.</span></span> <span data-ttu-id="f85e8-247">Jest najczęściej abstrakcji kod implementacji dostępu do danych za pośrednictwem [wzorca projektowego repozytorium](http://deviq.com/repository-pattern/).</span><span class="sxs-lookup"><span data-stu-id="f85e8-247">The most common way to abstract data access implementation code is through the use of the [Repository design pattern](http://deviq.com/repository-pattern/).</span></span>

<span data-ttu-id="f85e8-248">Oprócz implementacji dostępu do danych projektu infrastruktury powinien zawierać implementacje usług, które musi współdziałać z zastrzeżenia co do infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="f85e8-248">In addition to data access implementations, the Infrastructure project should contain implementations of services that must interact with infrastructure concerns.</span></span> <span data-ttu-id="f85e8-249">Te usługi powinny implementować interfejsów zdefiniowanych w podstawowej aplikacji, a więc infrastruktury powinny mieć odwołanie do projektu aplikacji Core.</span><span class="sxs-lookup"><span data-stu-id="f85e8-249">These services should implement interfaces defined in the Application Core, and so Infrastructure should have a reference to the Application Core project.</span></span>

> ### <a name="infrastructure-types"></a><span data-ttu-id="f85e8-250">Typy infrastruktury</span><span class="sxs-lookup"><span data-stu-id="f85e8-250">Infrastructure Types</span></span>
> -   <span data-ttu-id="f85e8-251">Typy podstawowe EF (DbContext, migracje)</span><span class="sxs-lookup"><span data-stu-id="f85e8-251">EF Core types (DbContext, Migrations)</span></span>
> -   <span data-ttu-id="f85e8-252">Typy wdrożenia (repozytoria) dostępu do danych</span><span class="sxs-lookup"><span data-stu-id="f85e8-252">Data access implementation types (Repositories)</span></span>
> -   <span data-ttu-id="f85e8-253">Usługi specyficzne dla infrastruktury (FileLogger, SmtpNotifier itp.)</span><span class="sxs-lookup"><span data-stu-id="f85e8-253">Infrastructure-specific services (FileLogger, SmtpNotifier, etc.)</span></span>

<span data-ttu-id="f85e8-254">Warstwę interfejsu użytkownika w aplikacji platformy ASP.NET Core MVC będzie punkt wejścia dla aplikacji, a musi być projekt platformy ASP.NET Core MVC.</span><span class="sxs-lookup"><span data-stu-id="f85e8-254">The user interface layer in an ASP.NET Core MVC application will be the entry point for the application, and will be an ASP.NET Core MVC project.</span></span> <span data-ttu-id="f85e8-255">Ten projekt powinien odwołania do projektu aplikacji rdzeni i jego typów powinien Praca z infrastruktury wyłącznie za pośrednictwem interfejsów zdefiniowanych w aplikacji Core.</span><span class="sxs-lookup"><span data-stu-id="f85e8-255">This project should reference the Application Core project, and its types should interact with infrastructure strictly through interfaces defined in Application Core.</span></span> <span data-ttu-id="f85e8-256">Nie bezpośrednie tworzenie wystąpienia elementu (lub statyczne wywołania) powinno być dozwolone typy warstwę infrastruktury warstwy interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="f85e8-256">No direct instantiation of (or static calls to) Infrastructure layer types should be permitted in the UI layer.</span></span>

> ### <a name="ui-layer-types"></a><span data-ttu-id="f85e8-257">Typy warstwy interfejsu użytkownika</span><span class="sxs-lookup"><span data-stu-id="f85e8-257">UI Layer Types</span></span>
> -   <span data-ttu-id="f85e8-258">Kontrolery</span><span class="sxs-lookup"><span data-stu-id="f85e8-258">Controllers</span></span>
> -   <span data-ttu-id="f85e8-259">Filtry</span><span class="sxs-lookup"><span data-stu-id="f85e8-259">Filters</span></span>
> -   <span data-ttu-id="f85e8-260">Widoki</span><span class="sxs-lookup"><span data-stu-id="f85e8-260">Views</span></span>
> -   <span data-ttu-id="f85e8-261">ViewModels</span><span class="sxs-lookup"><span data-stu-id="f85e8-261">ViewModels</span></span>
> -   <span data-ttu-id="f85e8-262">Uruchamianie</span><span class="sxs-lookup"><span data-stu-id="f85e8-262">Startup</span></span>

<span data-ttu-id="f85e8-263">Klasa początkowa jest odpowiedzialny za konfigurowanie aplikacji i okablowania typów implementacji interfejsów, dzięki czemu iniekcji zależności do poprawnego działania w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="f85e8-263">The Startup class is responsible for configuring the application, and for wiring up implementation types to interfaces, allowing dependency injection to work properly at run time.</span></span>

> [!NOTE]
> <span data-ttu-id="f85e8-264">Aby okablować się iniekcji zależności w ConfigureServices w pliku Startup.cs projektu interfejsu użytkownika, projekt może być konieczne odwołania do projektu infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="f85e8-264">In order to wire up dependency injection in ConfigureServices in the Startup.cs file of the UI project, the project may need to reference the Infrastructure project.</span></span> <span data-ttu-id="f85e8-265">Ta zależność mogą zostać usunięte, najłatwiej przy użyciu niestandardowych kontenera Podpisane.</span><span class="sxs-lookup"><span data-stu-id="f85e8-265">This dependency can be eliminated, most easily by using a custom DI container.</span></span> <span data-ttu-id="f85e8-266">Na potrzeby tego przykładu najprostsza metoda jest umożliwienie projekt interfejsu użytkownika do odwołania do projektu infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="f85e8-266">For the purposes of this sample, the simplest approach is to allow the UI project to reference the Infrastructure project.</span></span>

## <a name="monolithic-applications-and-containers"></a><span data-ttu-id="f85e8-267">Wbudowanymi aplikacjami i kontenerów</span><span class="sxs-lookup"><span data-stu-id="f85e8-267">Monolithic Applications and Containers</span></span> 

<span data-ttu-id="f85e8-268">Można utworzyć jedno- i wbudowanymi wdrożenia aplikacji sieci Web lub usługi i wdróż je jako kontener.</span><span class="sxs-lookup"><span data-stu-id="f85e8-268">You can build a single and monolithic-deployment based Web Application or Service and deploy it as a container.</span></span> <span data-ttu-id="f85e8-269">W aplikacji może nie być wbudowanymi, ale organizowane w kilku bibliotek, składniki lub warstwy.</span><span class="sxs-lookup"><span data-stu-id="f85e8-269">Within the application, it might not be monolithic but organized into several libraries, components or layers.</span></span> <span data-ttu-id="f85e8-270">Zewnętrznie jest jeden kontener jednego procesu, aplikacji sieci web jednej lub pojedynczą usługę.</span><span class="sxs-lookup"><span data-stu-id="f85e8-270">Externally it is a single container like a single process, single web application or single service.</span></span>

<span data-ttu-id="f85e8-271">Aby zarządzać tego modelu, możesz wdrożyć jeden kontener do reprezentowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f85e8-271">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="f85e8-272">Aby skalować, wystarczy dodać dodatkowe kopie z modułem równoważenia obciążenia z przodu.</span><span class="sxs-lookup"><span data-stu-id="f85e8-272">To scale, just add additional copies with a load balancer in front.</span></span> <span data-ttu-id="f85e8-273">Łatwość pochodzi z zarządzania pojedynczego wdrożenia w jeden kontener lub maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="f85e8-273">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![](./media/image5-13.png)

<span data-ttu-id="f85e8-274">Jak pokazano na rysunku 5 X może zawierać wiele składników/biblioteki lub wewnętrzny warstw w ramach każdego kontenera.</span><span class="sxs-lookup"><span data-stu-id="f85e8-274">You can include multiple components/libraries or internal layers within each container, as illustrated in Figure 5-X.</span></span> <span data-ttu-id="f85e8-275">Jednak po podmiot zabezpieczeń kontenera *"kontener nie rzecz i jest w jednym procesie*", wbudowanymi wzorzec może być konflikt.</span><span class="sxs-lookup"><span data-stu-id="f85e8-275">But, following the container principal of *"a container does one thing, and does it in one process*", the monolithic pattern might be a conflict.</span></span>

<span data-ttu-id="f85e8-276">Wadą interfejsu tego podejścia jest dostarczany, jeśli/podczas rozwoju aplikacji wymaganiem go do skalowania.</span><span class="sxs-lookup"><span data-stu-id="f85e8-276">The downside of this approach comes if/when the application grows, requiring it to scale.</span></span> <span data-ttu-id="f85e8-277">W przypadku zmiany skali całej aplikacji nie jest naprawdę problem.</span><span class="sxs-lookup"><span data-stu-id="f85e8-277">If the entire application scaled, it's not really a problem.</span></span> <span data-ttu-id="f85e8-278">Jednak w większości przypadków kilka części aplikacji są punkty urządzenie rozruchowe wymagające skalowania, podczas gdy inne składniki są używane mniejsze.</span><span class="sxs-lookup"><span data-stu-id="f85e8-278">However, in most cases, a few parts of the application are the choke points requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="f85e8-279">W przykładzie typowe handlu elektronicznego; prawdopodobnie potrzebnych do skalowania jest składnikiem informacji produktu.</span><span class="sxs-lookup"><span data-stu-id="f85e8-279">Using the typical eCommerce example; what you likely need to scale is the product information component.</span></span> <span data-ttu-id="f85e8-280">Wielu klientów więcej Przeglądanie produktów, niż ich zakupu.</span><span class="sxs-lookup"><span data-stu-id="f85e8-280">Many more customers browse products than purchase them.</span></span> <span data-ttu-id="f85e8-281">Więcej klientów użyj koszyka niż używanie potoku płatności.</span><span class="sxs-lookup"><span data-stu-id="f85e8-281">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="f85e8-282">Mniejszą liczbę klientów Dodawanie komentarzy i wyświetlanie ich historii zakupów.</span><span class="sxs-lookup"><span data-stu-id="f85e8-282">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="f85e8-283">I prawdopodobnie masz tylko grupy pracowników w pojedynczym regionie, które są potrzebne do zarządzania zawartością i kampanii marketingowych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-283">And you likely only have a handful of employees, in a single region, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="f85e8-284">Przez skalowanie wbudowanymi projektu, całego kodu jest wdrażany wiele razy.</span><span class="sxs-lookup"><span data-stu-id="f85e8-284">By scaling the monolithic design, all the code is deployed multiple times.</span></span>

<span data-ttu-id="f85e8-285">Oprócz skali problem, wszystkie zmiany pojedynczego składnika wymagają pełne ponowne całej aplikacji i pełne ponowne wdrożenie wszystkich wystąpień.</span><span class="sxs-lookup"><span data-stu-id="f85e8-285">In addition to the scale everything problem, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="f85e8-286">W wielu organizacjach są programowania z użyciem tej architektury rozwiązania i wbudowanymi podejście jest.</span><span class="sxs-lookup"><span data-stu-id="f85e8-286">The monolithic approach is common, and many organizations are developing with this architectural approach.</span></span> <span data-ttu-id="f85e8-287">Wiele występują dobre za mało wyników, podczas gdy inne czy osiągnięto limity.</span><span class="sxs-lookup"><span data-stu-id="f85e8-287">Many are having good enough results, while others are hitting limits.</span></span> <span data-ttu-id="f85e8-288">Wiele zaprojektowane swoich aplikacji, w tym modelu ponieważ infrastruktura i narzędzia było zbyt trudne do kompilacji na usługach architektury (SOA) i dopóki aplikacja zwiększył nie zobaczy konieczność —.</span><span class="sxs-lookup"><span data-stu-id="f85e8-288">Many designed their applications in this model, because the tools and infrastructure were too difficult to build service oriented architectures (SOA), and they didn't see the need - until the app grew.</span></span> <span data-ttu-id="f85e8-289">Jeśli okaże się, że jest naciśnięcie limity wbudowanymi podejścia podzielenie aplikacji, aby umożliwić lepsze wykorzystanie kontenerów i mikrousług może być następnego kroku logiczne.</span><span class="sxs-lookup"><span data-stu-id="f85e8-289">If you find you're hitting the limits of the monolithic approach, breaking the app up to enable it to better leverage containers and microservices may be the next logical step.</span></span>

![](./media/image5-14.png)

<span data-ttu-id="f85e8-290">Wdrażanie aplikacji wbudowanymi na platformie Microsoft Azure można osiągnąć za pomocą dedykowanych maszyn wirtualnych dla poszczególnych wystąpień.</span><span class="sxs-lookup"><span data-stu-id="f85e8-290">Deploying monolithic applications in Microsoft Azure can be achieved using dedicated VMs for each instance.</span></span> <span data-ttu-id="f85e8-291">Przy użyciu [zestawy skalowania maszyny Wirtualnej Azure](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), można łatwo skalować maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-291">Using [Azure VM Scale Sets](https://docs.microsoft.com/azure/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="f85e8-292">[Usługa Azure App Service](https://azure.microsoft.com/services/app-service/) można uruchamiać aplikacje wbudowanymi i łatwego skalowania wystąpienia bez konieczności zarządzania maszynami wirtualnymi.</span><span class="sxs-lookup"><span data-stu-id="f85e8-292">[Azure App Services](https://azure.microsoft.com/services/app-service/) can run monolithic applications and easily scale instances without having to manage the VMs.</span></span> <span data-ttu-id="f85e8-293">Usługa Azure App Service można uruchomić pojedynczego wystąpienia Docker kontenerów, jak również uprościć wdrażanie.</span><span class="sxs-lookup"><span data-stu-id="f85e8-293">Azure App Services can run single instances of Docker containers as well, simplifying the deployment.</span></span> <span data-ttu-id="f85e8-294">Przy użyciu rozwiązania Docker, można wdrożyć jeden maszynę Wirtualną jako hosta Docker i uruchomić wiele wystąpień.</span><span class="sxs-lookup"><span data-stu-id="f85e8-294">Using Docker, you can deploy a single VM as a Docker host, and run multiple instances.</span></span> <span data-ttu-id="f85e8-295">Przy użyciu równoważenia Azure, jak pokazano w rysunek 5-14, można zarządzać skalowania.</span><span class="sxs-lookup"><span data-stu-id="f85e8-295">Using the Azure balancer, as shown in the Figure 5-14, you can manage scaling.</span></span>

<span data-ttu-id="f85e8-296">Wdrożenia na różnych hostach można zarządzać za pomocą techniki tradycyjnego wdrażania.</span><span class="sxs-lookup"><span data-stu-id="f85e8-296">The deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="f85e8-297">Hostach Docker można zarządzać za pomocą poleceń, takich jak **docker Uruchom** wykonać ręcznie lub za pomocą automatyzacji, takie jak potoków ciągłego dostarczania (CD).</span><span class="sxs-lookup"><span data-stu-id="f85e8-297">The Docker hosts can be managed with commands like **docker run** performed manually, or through automation such as Continuous Delivery (CD) pipelines.</span></span>

### <a name="monolithic-application-deployed-as-a-container"></a><span data-ttu-id="f85e8-298">Wbudowanymi aplikacji wdrożonych jako kontener</span><span class="sxs-lookup"><span data-stu-id="f85e8-298">Monolithic application deployed as a container</span></span>

<span data-ttu-id="f85e8-299">Istnieją korzyści kontenery Zarządzaj wdrożeniami aplikacji wbudowanymi.</span><span class="sxs-lookup"><span data-stu-id="f85e8-299">There are benefits of using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="f85e8-300">Skalowanie wystąpienia kontenery jest znacznie szybsze i łatwiejsze niż wdrażanie dodatkowych maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="f85e8-300">Scaling the instances of containers is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="f85e8-301">Nawet w przypadku używania zestawy skalowania maszyny Wirtualnej do skalowania maszyn wirtualnych, ich trwać do wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="f85e8-301">Even when using VM Scale Sets to scale VMs, they take time to instance.</span></span> <span data-ttu-id="f85e8-302">Po wdrożeniu jako wystąpienia aplikacji Konfiguracja aplikacji jest zarządzana w ramach maszyny wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="f85e8-302">When deployed as app instances, the configuration of the app is managed as part of the VM.</span></span>

<span data-ttu-id="f85e8-303">Wdrażanie aktualizacji, jak obrazy usługi Docker jest znacznie szybsze i wydajność sieci.</span><span class="sxs-lookup"><span data-stu-id="f85e8-303">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="f85e8-304">Obrazy usługi docker zazwyczaj rozpoczyna się w sekundach, przyspieszania wdrożeniach.</span><span class="sxs-lookup"><span data-stu-id="f85e8-304">Docker Images typically start in seconds, speeding rollouts.</span></span> <span data-ttu-id="f85e8-305">Przerwanie w dół wystąpienia Docker jest tak proste, jak wystawianie **docker stop** polecenia zwykle kończonych w mniej niż 1 sekunda.</span><span class="sxs-lookup"><span data-stu-id="f85e8-305">Tearing down a Docker instance is as easy as issuing a **docker stop** command, typically completing in less than a second.</span></span>

<span data-ttu-id="f85e8-306">Jak kontenery są z założenia niezmienne zgodnie z projektem, nigdy nie musisz martwić uszkodzony maszyn wirtualnych, natomiast skryptów aktualizacji może zapomnij konta dla niektórych określonej konfiguracji lub w lewo pliku na dysku.</span><span class="sxs-lookup"><span data-stu-id="f85e8-306">As containers are inherently immutable by design, you never need to worry about corrupted VMs, whereas update scripts might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="f85e8-307">Wbudowanymi aplikacje mogą korzystać z Docker podzielenie wbudowanymi aplikacji w systemach sub, które mogą być skalowane, opracowany i wdrażane pojedynczo może być punktem wejścia do obszaru z mikrousług.</span><span class="sxs-lookup"><span data-stu-id="f85e8-307">While monolithic apps can benefit from Docker, breaking up the monolithic application into sub systems which can be scaled, developed and deployed individually may be your entry point into the realm of microservices.</span></span>

> ### <a name="references--common-web-architectures"></a><span data-ttu-id="f85e8-308">Odwołania — typowe architektury sieci Web</span><span class="sxs-lookup"><span data-stu-id="f85e8-308">References – Common Web Architectures</span></span>
> - <span data-ttu-id="f85e8-309">**Architektura czyste**</span><span class="sxs-lookup"><span data-stu-id="f85e8-309">**The Clean Architecture**</span></span>  
> <https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html>
> - <span data-ttu-id="f85e8-310">**Architektura przenikanie**</span><span class="sxs-lookup"><span data-stu-id="f85e8-310">**The Onion Architecture**</span></span>  
> <http://jeffreypalermo.com/blog/the-onion-architecture-part-1/>
> - <span data-ttu-id="f85e8-311">**Wzorzec repozytorium**</span><span class="sxs-lookup"><span data-stu-id="f85e8-311">**The Repository Pattern**</span></span>  
> <http://deviq.com/repository-pattern/>
> - <span data-ttu-id="f85e8-312">**Przykładowe rozwiązanie czystej architektury**</span><span class="sxs-lookup"><span data-stu-id="f85e8-312">**Clean Architecture Solution Sample**</span></span>  
> <https://github.com/ardalis/cleanarchitecture>
> - <span data-ttu-id="f85e8-313">**Zaprojektowanie Mikrousług e-book** <http://aka.ms/MicroservicesEbook></span><span class="sxs-lookup"><span data-stu-id="f85e8-313">**Architecting Microservices e-book** <http://aka.ms/MicroservicesEbook></span></span>

>[!div class="step-by-step"]
<span data-ttu-id="f85e8-314">[Poprzednie] (architektury principles.md) [dalej] (typowe klienta-po stronie web-technologies.md)</span><span class="sxs-lookup"><span data-stu-id="f85e8-314">[Previous] (architectural-principles.md) [Next] (common-client-side-web-technologies.md)</span></span>
