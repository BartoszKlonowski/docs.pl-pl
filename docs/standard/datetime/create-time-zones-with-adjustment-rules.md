---
title: 'Instrukcje: Tworzenie stref czasowych przy użyciu reguł korygowania'
ms.date: 04/10/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- time zones [.NET Framework], creating
- time zones [.NET Framework], and adjustment rules
- adjustment rule [.NET Framework]
ms.assetid: c52ef192-13a9-435f-8015-3b12eae8c47c
ms.openlocfilehash: 4ef3d93746c5688dc15fc7e45d9be054dcfba4c8
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/30/2019
ms.locfileid: "73132552"
---
# <a name="how-to-create-time-zones-with-adjustment-rules"></a><span data-ttu-id="fe307-102">Instrukcje: Tworzenie stref czasowych przy użyciu reguł korygowania</span><span class="sxs-lookup"><span data-stu-id="fe307-102">How to: Create time zones with adjustment rules</span></span>

<span data-ttu-id="fe307-103">Precyzyjne informacje o strefie czasowej, które są wymagane przez aplikację, mogą nie być obecne w określonym systemie z kilku powodów:</span><span class="sxs-lookup"><span data-stu-id="fe307-103">The precise time zone information that is required by an application may not be present on a particular system for several reasons:</span></span>

- <span data-ttu-id="fe307-104">Strefa czasowa nigdy nie została zdefiniowana w rejestrze systemu lokalnego.</span><span class="sxs-lookup"><span data-stu-id="fe307-104">The time zone has never been defined in the local system's registry.</span></span>

- <span data-ttu-id="fe307-105">Dane dotyczące strefy czasowej zostały zmodyfikowane lub usunięte z rejestru.</span><span class="sxs-lookup"><span data-stu-id="fe307-105">Data about the time zone has been modified or removed from the registry.</span></span>

- <span data-ttu-id="fe307-106">Strefa czasowa nie ma dokładnych informacji na temat korekt stref czasowych w danym okresie historycznym.</span><span class="sxs-lookup"><span data-stu-id="fe307-106">The time zone does not have accurate information about time zone adjustments for a particular historic period.</span></span>

<span data-ttu-id="fe307-107">W takich przypadkach można wywołać metodę <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A>, aby zdefiniować strefę czasową wymaganą przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="fe307-107">In these cases, you can call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method to define the time zone required by your application.</span></span> <span data-ttu-id="fe307-108">Można użyć przeciążenia tej metody, aby utworzyć strefę czasową z lub bez reguł korekty.</span><span class="sxs-lookup"><span data-stu-id="fe307-108">You can use the overloads of this method to create a time zone with or without adjustment rules.</span></span> <span data-ttu-id="fe307-109">Jeśli strefa czasowa obsługuje czas letni, można zdefiniować korekty przy użyciu stałych lub przestawnych reguł korekty.</span><span class="sxs-lookup"><span data-stu-id="fe307-109">If the time zone supports daylight saving time, you can define adjustments with either fixed or floating adjustment rules.</span></span> <span data-ttu-id="fe307-110">(W przypadku definicji tych warunków Zobacz sekcję "terminologia strefy czasowej" w temacie [Omówienie strefy czasowej](../../../docs/standard/datetime/time-zone-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="fe307-110">(For definitions of these terms, see the "Time Zone Terminology" section in [Time zone overview](../../../docs/standard/datetime/time-zone-overview.md).)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fe307-111">Niestandardowe strefy czasowe utworzone przez wywołanie metody <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> nie są dodawane do rejestru.</span><span class="sxs-lookup"><span data-stu-id="fe307-111">Custom time zones created by calling the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method are not added to the registry.</span></span> <span data-ttu-id="fe307-112">Zamiast tego można uzyskać do nich dostęp tylko za pomocą odwołania do obiektu zwróconego przez wywołanie metody <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A>.</span><span class="sxs-lookup"><span data-stu-id="fe307-112">Instead, they can be accessed only through the object reference returned by the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method call.</span></span>

<span data-ttu-id="fe307-113">W tym temacie pokazano, jak utworzyć strefę czasową z regułami korekty.</span><span class="sxs-lookup"><span data-stu-id="fe307-113">This topic shows how to create a time zone with adjustment rules.</span></span> <span data-ttu-id="fe307-114">Aby utworzyć strefę czasową, która nie obsługuje zasad korekty czasu letniego, zobacz [How to: Create czas Zones bez reguł korekty](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span><span class="sxs-lookup"><span data-stu-id="fe307-114">To create a time zone that does not support daylight saving time adjustment rules, see [How to: Create Time Zones Without Adjustment Rules](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span></span>

### <a name="to-create-a-time-zone-with-floating-adjustment-rules"></a><span data-ttu-id="fe307-115">Aby utworzyć strefę czasową przy użyciu zmiennoprzecinkowych reguł dopasowania</span><span class="sxs-lookup"><span data-stu-id="fe307-115">To create a time zone with floating adjustment rules</span></span>

1. <span data-ttu-id="fe307-116">Dla każdej korekty (czyli dla każdego przejścia z powrotem do czasu standardowego w określonym przedziale czasu) wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="fe307-116">For each adjustment (that is, for each transition away from and back to standard time over a particular time interval), do the following:</span></span>

    1. <span data-ttu-id="fe307-117">Zdefiniuj początkowy czas przejścia dla korekty strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-117">Define the starting transition time for the time zone adjustment.</span></span>

       <span data-ttu-id="fe307-118">Należy wywołać metodę <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> i przekazać ją do <xref:System.DateTime> wartości, która definiuje czas przejścia, wartość całkowitą, która definiuje miesiąc przejścia, wartość całkowitą, która definiuje tydzień, w którym następuje przejście, oraz wartość <xref:System.DayOfWeek>, która definiuje dzień tygodnia, w którym następuje przejście.</span><span class="sxs-lookup"><span data-stu-id="fe307-118">You must call the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method and pass it a <xref:System.DateTime> value that defines the time of the transition, an integer value that defines the month of the transition, an integer value that defines the week on which the transition occurs, and a <xref:System.DayOfWeek> value that defines the day of the week on which the transition occurs.</span></span> <span data-ttu-id="fe307-119">To wywołanie metody tworzy wystąpienie obiektu <xref:System.TimeZoneInfo.TransitionTime>.</span><span class="sxs-lookup"><span data-stu-id="fe307-119">This method call instantiates a <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    2. <span data-ttu-id="fe307-120">Zdefiniuj końcowy czas przejścia dla korekty strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-120">Define the ending transition time for the time zone adjustment.</span></span> <span data-ttu-id="fe307-121">Wymaga to innego wywołania metody <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="fe307-121">This requires another call to the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="fe307-122">To wywołanie metody tworzy wystąpienie drugiego <xref:System.TimeZoneInfo.TransitionTime> obiektu.</span><span class="sxs-lookup"><span data-stu-id="fe307-122">This method call instantiates a second <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    3. <span data-ttu-id="fe307-123">Wywołaj metodę <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> i przekaż jej datę początkową i końcową korekty, obiekt <xref:System.TimeSpan>, który definiuje czas w przejściu i dwa <xref:System.TimeZoneInfo.TransitionTime> obiekty, które definiują, kiedy wystąpią przejścia do i z czasu letniego.</span><span class="sxs-lookup"><span data-stu-id="fe307-123">Call the <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> method and pass it the effective start and end dates of the adjustment, a <xref:System.TimeSpan> object that defines the amount of time in the transition, and the two <xref:System.TimeZoneInfo.TransitionTime> objects that define when the transitions to and from daylight saving time occur.</span></span> <span data-ttu-id="fe307-124">To wywołanie metody tworzy wystąpienie obiektu <xref:System.TimeZoneInfo.AdjustmentRule>.</span><span class="sxs-lookup"><span data-stu-id="fe307-124">This method call instantiates a <xref:System.TimeZoneInfo.AdjustmentRule> object.</span></span>

    4. <span data-ttu-id="fe307-125">Przypisz obiekt <xref:System.TimeZoneInfo.AdjustmentRule> do tablicy obiektów <xref:System.TimeZoneInfo.AdjustmentRule>.</span><span class="sxs-lookup"><span data-stu-id="fe307-125">Assign the <xref:System.TimeZoneInfo.AdjustmentRule> object to an array of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span>

2. <span data-ttu-id="fe307-126">Zdefiniuj nazwę wyświetlaną strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-126">Define the time zone's display name.</span></span> <span data-ttu-id="fe307-127">Nazwa wyświetlana jest zgodna z formatem standardowym, w którym przesunięcie strefy czasowej od skoordynowanego czasu uniwersalnego (UTC) jest ujęte w nawiasy i następuje przez ciąg identyfikujący strefę czasową, co najmniej jeden z miast w strefie czasowej lub jeden lub więcej Cou ntries lub regiony w strefie czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-127">The display name follows a fairly standard format in which the time zone's offset from Coordinated Universal Time (UTC) is enclosed in parentheses and is followed by a string that identifies the time zone, one or more of the cities in the time zone, or one or more of the countries or regions in the time zone.</span></span>

3. <span data-ttu-id="fe307-128">Zdefiniuj nazwę czasu standardowego strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-128">Define the name of the time zone's standard time.</span></span> <span data-ttu-id="fe307-129">Zazwyczaj ten ciąg jest również używany jako identyfikator strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-129">Typically, this string is also used as the time zone's identifier.</span></span>

4. <span data-ttu-id="fe307-130">Zdefiniuj nazwę czasu letniego strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-130">Define the name of the time zone's daylight time.</span></span>

5. <span data-ttu-id="fe307-131">Jeśli chcesz użyć innego identyfikatora niż nazwa standardowa strefy czasowej, zdefiniuj identyfikator strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-131">If you want to use a different identifier than the time zone's standard name, define the time zone identifier.</span></span>

6. <span data-ttu-id="fe307-132">Utwórz wystąpienie <xref:System.TimeSpan> obiektu, który definiuje przesunięcie strefy czasowej z czasu UTC.</span><span class="sxs-lookup"><span data-stu-id="fe307-132">Instantiate a <xref:System.TimeSpan> object that defines the time zone's offset from UTC.</span></span> <span data-ttu-id="fe307-133">Strefy czasowe, które są późniejsze niż UTC, są przesunięte pozytywnie.</span><span class="sxs-lookup"><span data-stu-id="fe307-133">Time zones with times that are later than UTC have a positive offset.</span></span> <span data-ttu-id="fe307-134">Strefy czasowe o porach wcześniejszym niż UTC mają ujemne przesunięcie.</span><span class="sxs-lookup"><span data-stu-id="fe307-134">Time zones with times that are earlier than UTC have a negative offset.</span></span>

7. <span data-ttu-id="fe307-135">Wywołaj metodę <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType>, aby utworzyć wystąpienie nowej strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-135">Call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method to instantiate the new time zone.</span></span>

## <a name="example"></a><span data-ttu-id="fe307-136">Przykład</span><span class="sxs-lookup"><span data-stu-id="fe307-136">Example</span></span>

<span data-ttu-id="fe307-137">W poniższym przykładzie zdefiniowano centralną strefę czasową dla Stany Zjednoczone, która zawiera reguły dostosowawcze dla różnych przedziałów czasu od 1918 do obecne.</span><span class="sxs-lookup"><span data-stu-id="fe307-137">The following example defines a Central Standard Time zone for the United States that includes adjustment rules for a variety of time intervals from 1918 to the present.</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#5)]
[!code-vb[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#5)]

<span data-ttu-id="fe307-138">Strefa czasowa utworzona w tym przykładzie ma wiele reguł korekty.</span><span class="sxs-lookup"><span data-stu-id="fe307-138">The time zone created in this example has multiple adjustment rules.</span></span> <span data-ttu-id="fe307-139">Należy zwrócić uwagę, aby upewnić się, że obowiązujące daty rozpoczęcia i zakończenia dowolnych reguł korekty nie nakładają się na daty innej reguły korekty.</span><span class="sxs-lookup"><span data-stu-id="fe307-139">Care must be taken to ensure that the effective start and end dates of any adjustment rule do not overlap with the dates of another adjustment rule.</span></span> <span data-ttu-id="fe307-140">Jeśli wystąpi nakładanie się, zostanie zgłoszony <xref:System.InvalidTimeZoneException>.</span><span class="sxs-lookup"><span data-stu-id="fe307-140">If there is an overlap, an <xref:System.InvalidTimeZoneException> is thrown.</span></span>

<span data-ttu-id="fe307-141">W przypadku reguł dopasowań zmiennoprzecinkowych wartość 5 jest przesyłana do `week` parametru metody <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A>, aby wskazać, że przejście następuje w ostatnim tygodniu danego miesiąca.</span><span class="sxs-lookup"><span data-stu-id="fe307-141">For floating adjustment rules, the value 5 is passed to the `week` parameter of the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method to indicate that the transition occurs on the last week of a particular month.</span></span>

<span data-ttu-id="fe307-142">W przypadku tworzenia tablicy <xref:System.TimeZoneInfo.AdjustmentRule> obiektów do użycia w wywołaniu metody <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> kod może inicjować tablicę do rozmiaru wymaganego przez liczbę korekt do utworzenia dla strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="fe307-142">In creating the array of <xref:System.TimeZoneInfo.AdjustmentRule> objects to use in the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method call, the code could initialize the array to the size required by the number of adjustments to be created for the time zone.</span></span> <span data-ttu-id="fe307-143">Zamiast tego, ten kod wywołuje metodę <xref:System.Collections.Generic.List%601.Add%2A>, aby dodać każdą regułę korekty do ogólnej <xref:System.Collections.Generic.List%601> kolekcji obiektów <xref:System.TimeZoneInfo.AdjustmentRule>.</span><span class="sxs-lookup"><span data-stu-id="fe307-143">Instead, this code example calls the <xref:System.Collections.Generic.List%601.Add%2A> method to add each adjustment rule to a generic <xref:System.Collections.Generic.List%601> collection of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span> <span data-ttu-id="fe307-144">Następnie kod wywołuje metodę <xref:System.Collections.Generic.List%601.CopyTo%2A>, aby skopiować elementy członkowskie tej kolekcji do tablicy.</span><span class="sxs-lookup"><span data-stu-id="fe307-144">The code then calls the <xref:System.Collections.Generic.List%601.CopyTo%2A> method to copy the members of this collection to the array.</span></span>

<span data-ttu-id="fe307-145">W przykładzie zastosowano również metodę <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A>, aby zdefiniować stałe korekty daty.</span><span class="sxs-lookup"><span data-stu-id="fe307-145">The example also uses the <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> method to define fixed-date adjustments.</span></span> <span data-ttu-id="fe307-146">Jest to podobne do wywołania metody <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A>, z tą różnicą, że wymaga tylko czasu, miesiąca i dnia parametrów przejścia.</span><span class="sxs-lookup"><span data-stu-id="fe307-146">This is similar to calling the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method, except that it requires only the time, month, and day of the transition parameters.</span></span>

<span data-ttu-id="fe307-147">Przykład może być testowany przy użyciu kodu, takiego jak:</span><span class="sxs-lookup"><span data-stu-id="fe307-147">The example can be tested using code such as the following:</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#7)]
[!code-vb[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#7)]

## <a name="compiling-the-code"></a><span data-ttu-id="fe307-148">Kompilowanie kodu</span><span class="sxs-lookup"><span data-stu-id="fe307-148">Compiling the code</span></span>

<span data-ttu-id="fe307-149">Ten przykład wymaga:</span><span class="sxs-lookup"><span data-stu-id="fe307-149">This example requires:</span></span>

- <span data-ttu-id="fe307-150">Że importowane są następujące przestrzenie nazw:</span><span class="sxs-lookup"><span data-stu-id="fe307-150">That the following namespaces be imported:</span></span>

  [!code-csharp[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#6)]
  [!code-vb[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#6)]

## <a name="see-also"></a><span data-ttu-id="fe307-151">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="fe307-151">See also</span></span>

- [<span data-ttu-id="fe307-152">Daty, godziny i strefy czasowe</span><span class="sxs-lookup"><span data-stu-id="fe307-152">Dates, times, and time zones</span></span>](../../../docs/standard/datetime/index.md)
- [<span data-ttu-id="fe307-153">Strefy czasowe — omówienie</span><span class="sxs-lookup"><span data-stu-id="fe307-153">Time zone overview</span></span>](../../../docs/standard/datetime/time-zone-overview.md)
- [<span data-ttu-id="fe307-154">Instrukcje: Tworzenie stref czasowych bez reguł korygowania</span><span class="sxs-lookup"><span data-stu-id="fe307-154">How to: Create time zones without adjustment rules</span></span>](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md)
