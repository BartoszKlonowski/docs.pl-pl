---
title: 'Porady: tworzenie stref czasowych przy użyciu reguł korygowania'
ms.date: 04/10/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- time zones [.NET Framework], creating
- time zones [.NET Framework], and adjustment rules
- adjustment rule [.NET Framework]
ms.assetid: c52ef192-13a9-435f-8015-3b12eae8c47c
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 80a5c04f7807638a4a8b114828083835f348ac08
ms.sourcegitcommit: c7f3e2e9d6ead6cc3acd0d66b10a251d0c66e59d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/08/2018
ms.locfileid: "44191472"
---
# <a name="how-to-create-time-zones-with-adjustment-rules"></a><span data-ttu-id="0ee6c-102">Porady: tworzenie stref czasowych przy użyciu reguł korygowania</span><span class="sxs-lookup"><span data-stu-id="0ee6c-102">How to: Create time zones with adjustment rules</span></span>

<span data-ttu-id="0ee6c-103">Wymagane przez aplikację informacje o strefie czasowej dokładne mogą nie występować w określonym systemie z kilku powodów:</span><span class="sxs-lookup"><span data-stu-id="0ee6c-103">The precise time zone information that is required by an application may not be present on a particular system for several reasons:</span></span>

* <span data-ttu-id="0ee6c-104">Strefa czasowa nigdy nie został zdefiniowany w rejestrze systemu lokalnego.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-104">The time zone has never been defined in the local system's registry.</span></span>

* <span data-ttu-id="0ee6c-105">Dane dotyczące strefy czasowej został zmodyfikowany lub usunięty z rejestru.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-105">Data about the time zone has been modified or removed from the registry.</span></span>

* <span data-ttu-id="0ee6c-106">Strefa czasowa nie ma dokładnych informacji na temat dostosowania strefę czasową dla określonego okresu historycznych.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-106">The time zone does not have accurate information about time zone adjustments for a particular historic period.</span></span>

<span data-ttu-id="0ee6c-107">W takich przypadkach można wywołać <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> metodę, aby zdefiniować strefę czasową, wymagane przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-107">In these cases, you can call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method to define the time zone required by your application.</span></span> <span data-ttu-id="0ee6c-108">Przeciążenia tej metody można użyć do tworzenia strefy czasowej z lub bez reguł korygowania.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-108">You can use the overloads of this method to create a time zone with or without adjustment rules.</span></span> <span data-ttu-id="0ee6c-109">Jeśli strefa czasowa obsługuje czasu letniego, można zdefiniować dostosowania przy użyciu obu reguł korygowania fixed lub zmiennoprzecinkową.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-109">If the time zone supports daylight saving time, you can define adjustments with either fixed or floating adjustment rules.</span></span> <span data-ttu-id="0ee6c-110">(Dla definicji tych terminów, zobacz sekcję "Strefa czasowa terminologii" w [strefy czasowe — omówienie](../../../docs/standard/datetime/time-zone-overview.md).)</span><span class="sxs-lookup"><span data-stu-id="0ee6c-110">(For definitions of these terms, see the "Time Zone Terminology" section in [Time zone overview](../../../docs/standard/datetime/time-zone-overview.md).)</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0ee6c-111">Niestandardowe stref czasowych utworzonych przez wywoływanie <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> metody nie są dodawane do rejestru.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-111">Custom time zones created by calling the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method are not added to the registry.</span></span> <span data-ttu-id="0ee6c-112">Zamiast tego są one dostępne tylko za pośrednictwem zwracane przez odwołanie do obiektu <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> wywołania metody.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-112">Instead, they can be accessed only through the object reference returned by the <xref:System.TimeZoneInfo.CreateCustomTimeZone%2A> method call.</span></span>

<span data-ttu-id="0ee6c-113">W tym temacie przedstawiono sposób tworzenia strefy czasowej przy użyciu reguł korygowania.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-113">This topic shows how to create a time zone with adjustment rules.</span></span> <span data-ttu-id="0ee6c-114">Aby utworzyć strefę czasową, która nie obsługuje reguł dopasowania czasu letniego, zobacz [porady: tworzenie stref czasowych bez reguł korygowania](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span><span class="sxs-lookup"><span data-stu-id="0ee6c-114">To create a time zone that does not support daylight saving time adjustment rules, see [How to: Create Time Zones Without Adjustment Rules](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md).</span></span>

### <a name="to-create-a-time-zone-with-floating-adjustment-rules"></a><span data-ttu-id="0ee6c-115">Aby utworzyć strefę czasową ze swobodnym reguł korygowania</span><span class="sxs-lookup"><span data-stu-id="0ee6c-115">To create a time zone with floating adjustment rules</span></span>

1. <span data-ttu-id="0ee6c-116">Dla każdego dopasowania (która jest dla każdego przejścia od z powrotem do czasu standardowego w przedziałach czasu określonego) wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="0ee6c-116">For each adjustment (that is, for each transition away from and back to standard time over a particular time interval), do the following:</span></span>

    1. <span data-ttu-id="0ee6c-117">Zdefiniuj godzinę rozpoczęcia przejścia dopasowania stref czasowych.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-117">Define the starting transition time for the time zone adjustment.</span></span>

       <span data-ttu-id="0ee6c-118">Należy wywołać <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> metody i przekazać go <xref:System.DateTime> wartość, która definiuje czas przejścia, wartość całkowitą, która definiuje miesiąca przejścia, wartość całkowitą, która definiuje tygodnia, w którym następuje przejście, i <xref:System.DayOfWeek> wartość, która określa dzień tygodnia, w którym następuje przejście.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-118">You must call the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method and pass it a <xref:System.DateTime> value that defines the time of the transition, an integer value that defines the month of the transition, an integer value that defines the week on which the transition occurs, and a <xref:System.DayOfWeek> value that defines the day of the week on which the transition occurs.</span></span> <span data-ttu-id="0ee6c-119">Tworzy wywołanie tej metody <xref:System.TimeZoneInfo.TransitionTime> obiektu.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-119">This method call instantiates a <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    2. <span data-ttu-id="0ee6c-120">Zdefiniuj godzinę zakończenia przejścia dopasowania stref czasowych.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-120">Define the ending transition time for the time zone adjustment.</span></span> <span data-ttu-id="0ee6c-121">Wymaga to innym wywołaniu <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-121">This requires another call to the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="0ee6c-122">Drugie wystąpienie wywołanie tej metody <xref:System.TimeZoneInfo.TransitionTime> obiektu.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-122">This method call instantiates a second <xref:System.TimeZoneInfo.TransitionTime> object.</span></span>

    3. <span data-ttu-id="0ee6c-123">Wywołaj <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> metody i przekazać go od daty rozpoczęcia i zakończenia korekty, <xref:System.TimeSpan> obiektu, który określa ilość czasu w przejścia i dwa <xref:System.TimeZoneInfo.TransitionTime> obiekty, które określają, kiedy przejścia do i z letniego czas wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-123">Call the <xref:System.TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule%2A> method and pass it the effective start and end dates of the adjustment, a <xref:System.TimeSpan> object that defines the amount of time in the transition, and the two <xref:System.TimeZoneInfo.TransitionTime> objects that define when the transitions to and from daylight saving time occur.</span></span> <span data-ttu-id="0ee6c-124">Tworzy wywołanie tej metody <xref:System.TimeZoneInfo.AdjustmentRule> obiektu.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-124">This method call instantiates a <xref:System.TimeZoneInfo.AdjustmentRule> object.</span></span>

    4. <span data-ttu-id="0ee6c-125">Przypisz <xref:System.TimeZoneInfo.AdjustmentRule> obiekt jako tablicę <xref:System.TimeZoneInfo.AdjustmentRule> obiektów.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-125">Assign the <xref:System.TimeZoneInfo.AdjustmentRule> object to an array of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span>

2. <span data-ttu-id="0ee6c-126">Zdefiniuj nazwę wyświetlaną strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-126">Define the time zone's display name.</span></span> <span data-ttu-id="0ee6c-127">Nazwa wyświetlana następuje stosunkowo standardowego formatu, w którym przesunięcie strefy czasowej z uniwersalnego czasu koordynowanego (UTC) jest ujęty w nawiasy i następuje ciąg, który rozpoznaje strefę czasową, jeden lub więcej miast w strefie czasowej lub jeden lub kilka Rada zapisy lub regiony w strefie czasowej.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-127">The display name follows a fairly standard format in which the time zone's offset from Coordinated Universal Time (UTC) is enclosed in parentheses and is followed by a string that identifies the time zone, one or more of the cities in the time zone, or one or more of the countries or regions in the time zone.</span></span>

3. <span data-ttu-id="0ee6c-128">Zdefiniuj nazwę strefy czasowej (czas standardowy).</span><span class="sxs-lookup"><span data-stu-id="0ee6c-128">Define the name of the time zone's standard time.</span></span> <span data-ttu-id="0ee6c-129">Zazwyczaj ten ciąg jest również używane jako identyfikator strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-129">Typically, this string is also used as the time zone's identifier.</span></span>

4. <span data-ttu-id="0ee6c-130">Zdefiniuj nazwę strefy czasowej (czas letni).</span><span class="sxs-lookup"><span data-stu-id="0ee6c-130">Define the name of the time zone's daylight time.</span></span>

5. <span data-ttu-id="0ee6c-131">Jeśli chcesz użyć innego identyfikatora niż nazwa standardowa strefy czasowej, należy zdefiniować identyfikator strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-131">If you want to use a different identifier than the time zone's standard name, define the time zone identifier.</span></span>

6. <span data-ttu-id="0ee6c-132">Utwórz wystąpienie <xref:System.TimeSpan> obiekt, który definiuje przesunięcie strefy czasowej względem czasu UTC.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-132">Instantiate a <xref:System.TimeSpan> object that defines the time zone's offset from UTC.</span></span> <span data-ttu-id="0ee6c-133">Strefy czasowe z czasem, które są nowsze niż UTC mają przesunięcie dodatnią.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-133">Time zones with times that are later than UTC have a positive offset.</span></span> <span data-ttu-id="0ee6c-134">Strefy czasowe z czasem, które są starsze niż UTC mają ujemne przesunięcie.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-134">Time zones with times that are earlier than UTC have a negative offset.</span></span>

7. <span data-ttu-id="0ee6c-135">Wywołaj <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> metodę, aby utworzyć wystąpienie nowej strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-135">Call the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method to instantiate the new time zone.</span></span>

## <a name="example"></a><span data-ttu-id="0ee6c-136">Przykład</span><span class="sxs-lookup"><span data-stu-id="0ee6c-136">Example</span></span>

<span data-ttu-id="0ee6c-137">W poniższym przykładzie zdefiniowano centralnej standardowa strefy czasowej dla Stanów Zjednoczonych, obejmującą reguł korygowania dla różnych interwałów z 1918 bieżącej.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-137">The following example defines a Central Standard Time zone for the United States that includes adjustment rules for a variety of time intervals from 1918 to the present.</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#5)]
[!code-vb[System.TimeZone2.CreateTimeZone#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#5)]

<span data-ttu-id="0ee6c-138">Strefa czasowa, utworzone w tym przykładzie zawiera wiele reguł dopasowania.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-138">The time zone created in this example has multiple adjustment rules.</span></span> <span data-ttu-id="0ee6c-139">Należy uważać, aby upewnić się, że od daty rozpoczęcia i zakończenia dowolnej reguły dopasowania nie pokrywają się z datami inną regułę dopasowania.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-139">Care must be taken to ensure that the effective start and end dates of any adjustment rule do not overlap with the dates of another adjustment rule.</span></span> <span data-ttu-id="0ee6c-140">Jeśli występuje nakładanie się <xref:System.InvalidTimeZoneException> zgłaszany.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-140">If there is an overlap, an <xref:System.InvalidTimeZoneException> is thrown.</span></span>

<span data-ttu-id="0ee6c-141">Dla liczb zmiennoprzecinkowych reguł korygowania, wartość 5 jest przekazywany do `week` parametru <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> metodę w celu wskazania, że następuje przejście na ostatni tydzień miesiąca określonego.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-141">For floating adjustment rules, the value 5 is passed to the `week` parameter of the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method to indicate that the transition occurs on the last week of a particular month.</span></span>

<span data-ttu-id="0ee6c-142">Podczas tworzenia macierzy <xref:System.TimeZoneInfo.AdjustmentRule> obiekty do użycia w <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> wywołania metody, kod może zainicjować tablicy do rozmiaru wymaganego przez liczbę dostosowań ma zostać utworzony dla strefy czasowej.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-142">In creating the array of <xref:System.TimeZoneInfo.AdjustmentRule> objects to use in the <xref:System.TimeZoneInfo.CreateCustomTimeZone%28System.String%2CSystem.TimeSpan%2CSystem.String%2CSystem.String%2CSystem.String%2CSystem.TimeZoneInfo.AdjustmentRule%5B%5D%29?displayProperty=nameWithType> method call, the code could initialize the array to the size required by the number of adjustments to be created for the time zone.</span></span> <span data-ttu-id="0ee6c-143">Zamiast tego wywołuje w tym przykładzie kodu <xref:System.Collections.Generic.List%601.Add%2A> metodę, aby dodać każdą regułę dopasowania do ogólnego <xref:System.Collections.Generic.List%601> zbiór <xref:System.TimeZoneInfo.AdjustmentRule> obiektów.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-143">Instead, this code example calls the <xref:System.Collections.Generic.List%601.Add%2A> method to add each adjustment rule to a generic <xref:System.Collections.Generic.List%601> collection of <xref:System.TimeZoneInfo.AdjustmentRule> objects.</span></span> <span data-ttu-id="0ee6c-144">Następnie wywołuje kod <xref:System.Collections.Generic.List%601.CopyTo%2A> metoda kopiowania członków tej kolekcji do tablicy.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-144">The code then calls the <xref:System.Collections.Generic.List%601.CopyTo%2A> method to copy the members of this collection to the array.</span></span>

<span data-ttu-id="0ee6c-145">W przykładzie użyto również <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> metodę, aby zdefiniować ustalona data korekty.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-145">The example also uses the <xref:System.TimeZoneInfo.TransitionTime.CreateFixedDateRule%2A> method to define fixed-date adjustments.</span></span> <span data-ttu-id="0ee6c-146">Jest to podobne do wywoływania <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> metody, z wyjątkiem wymagane przez dział it tylko czasu, miesiąc i dzień parametry przejścia.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-146">This is similar to calling the <xref:System.TimeZoneInfo.TransitionTime.CreateFloatingDateRule%2A> method, except that it requires only the time, month, and day of the transition parameters.</span></span>

<span data-ttu-id="0ee6c-147">Przykład można przetestować przy użyciu kodu, takie jak następujące:</span><span class="sxs-lookup"><span data-stu-id="0ee6c-147">The example can be tested using code such as the following:</span></span>

[!code-csharp[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#7)]
[!code-vb[System.TimeZone2.CreateTimeZone#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#7)]

## <a name="compiling-the-code"></a><span data-ttu-id="0ee6c-148">Kompilowanie kodu</span><span class="sxs-lookup"><span data-stu-id="0ee6c-148">Compiling the code</span></span>

<span data-ttu-id="0ee6c-149">Ten przykład wymaga:</span><span class="sxs-lookup"><span data-stu-id="0ee6c-149">This example requires:</span></span>

* <span data-ttu-id="0ee6c-150">Odwołania do System.Core.dll dodania do projektu.</span><span class="sxs-lookup"><span data-stu-id="0ee6c-150">That a reference to System.Core.dll be added to the project.</span></span>

* <span data-ttu-id="0ee6c-151">Czy następujących przestrzeni nazw można zaimportować:</span><span class="sxs-lookup"><span data-stu-id="0ee6c-151">That the following namespaces be imported:</span></span>

  [!code-csharp[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/csharp/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/cs/System.TimeZone2.CreateTimeZone.cs#6)]
  [!code-vb[System.TimeZone2.CreateTimeZone#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR_System/system.TimeZone2.CreateTimeZone/vb/System.TimeZone2.CreateTimeZone.vb#6)]

## <a name="see-also"></a><span data-ttu-id="0ee6c-152">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="0ee6c-152">See also</span></span>

* [<span data-ttu-id="0ee6c-153">Daty, godziny i strefy czasowe</span><span class="sxs-lookup"><span data-stu-id="0ee6c-153">Dates, times, and time zones</span></span>](../../../docs/standard/datetime/index.md)
* [<span data-ttu-id="0ee6c-154">Strefy czasowe — omówienie</span><span class="sxs-lookup"><span data-stu-id="0ee6c-154">Time zone overview</span></span>](../../../docs/standard/datetime/time-zone-overview.md)
* [<span data-ttu-id="0ee6c-155">Instrukcje: Tworzenie stref czasowych bez reguł korygowania</span><span class="sxs-lookup"><span data-stu-id="0ee6c-155">How to: Create time zones without adjustment rules</span></span>](../../../docs/standard/datetime/create-time-zones-without-adjustment-rules.md)
