---
title: Obsługa częściowych niepowodzeń
description: Dowiedz się, jak bezpiecznie obsługiwać błędy częściowe. Mikrousługi może nie być w pełni funkcjonalny, ale nadal może być możliwość wykonywania niektórych użytecznej pracy.
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/16/2018
ms.openlocfilehash: 16b6237f79d6b4bc2bc9152ba6eb023ffbd3899f
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "61977681"
---
# <a name="handle-partial-failure"></a><span data-ttu-id="5842f-104">Obsługa częściowych niepowodzeń</span><span class="sxs-lookup"><span data-stu-id="5842f-104">Handle partial failure</span></span>

<span data-ttu-id="5842f-105">W systemach rozproszonych, takich jak aplikacje oparte na mikrousługach istnieje ryzyko wszechobecnym częściowych niepowodzeń.</span><span class="sxs-lookup"><span data-stu-id="5842f-105">In distributed systems like microservices-based applications, there's an ever-present risk of partial failure.</span></span> <span data-ttu-id="5842f-106">Na przykład jeden mikrousług/kontener może zakończyć się niepowodzeniem lub mogą nie być dostępne odpowiedzi przez krótki czas lub pojedynczej maszyny Wirtualnej lub serwer może ulec awarii.</span><span class="sxs-lookup"><span data-stu-id="5842f-106">For instance, a single microservice/container can fail or might not be available to respond for a short time, or a single VM or server can crash.</span></span> <span data-ttu-id="5842f-107">Ponieważ klientów i usług są oddzielne procesy, usługa nie może być przygotowane w sposób terminowy do żądania klienta.</span><span class="sxs-lookup"><span data-stu-id="5842f-107">Since clients and services are separate processes, a service might not be able to respond in a timely way to a client’s request.</span></span> <span data-ttu-id="5842f-108">Usługa może być przeciążona i działa prawidłowo, bardzo wolno do żądania lub po prostu nie mogą być niedostępne przez krótki czas ze względu na problemy z siecią.</span><span class="sxs-lookup"><span data-stu-id="5842f-108">The service might be overloaded and responding very slowly to requests or might simply not be accessible for a short time because of network issues.</span></span>

<span data-ttu-id="5842f-109">Na przykład należy wziąć pod uwagę strona szczegółów zamówienia, w ramach aplikacji eShopOnContainers przykładowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5842f-109">For example, consider the Order details page from the eShopOnContainers sample application.</span></span> <span data-ttu-id="5842f-110">Jeśli szeregowania mikrousługa odpowiada po użytkownik próbuje przesłać zamówienie, implementacja procesu klienta (aplikacja sieci web MVC) — na przykład, jeśli kod klienta była używana synchroniczne zdalnych wywołań procedury bez limitu czasu — na czas nieokreślony mogłyby spowodować zablokowanie wątków Oczekiwanie na odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="5842f-110">If the ordering microservice is unresponsive when the user tries to submit an order, a bad implementation of the client process (the MVC web application)—for example, if the client code were to use synchronous RPCs with no timeout—would block threads indefinitely waiting for a response.</span></span> <span data-ttu-id="5842f-111">Oprócz tworzenia płynność pracy, co nie odpowiada oczekiwania zużywa lub blokuje wątek i wątki są bardzo przydatne w aplikacjach o wysokim stopniu skalowalności.</span><span class="sxs-lookup"><span data-stu-id="5842f-111">Besides creating a bad user experience, every unresponsive wait consumes or blocks a thread, and threads are extremely valuable in highly scalable applications.</span></span> <span data-ttu-id="5842f-112">W przypadku wielu zablokowane wątki po pewnym czasie poza wątki można uruchomić środowiska uruchomieniowego aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5842f-112">If there are many blocked threads, eventually the application’s runtime can run out of threads.</span></span> <span data-ttu-id="5842f-113">W takim przypadku aplikacja może stać się globalnie nie odpowiada, a nie tylko częściowo nie odpowiada, jak pokazano w rysunek 8-1.</span><span class="sxs-lookup"><span data-stu-id="5842f-113">In that case, the application can become globally unresponsive instead of just partially unresponsive, as shown in Figure 8-1.</span></span>

![Diagram przedstawiający poprzednim akapicie](./media/image1.png)

<span data-ttu-id="5842f-115">**Rysunek 8-1**.</span><span class="sxs-lookup"><span data-stu-id="5842f-115">**Figure 8-1**.</span></span> <span data-ttu-id="5842f-116">Błędy częściowe ze względu na zależności, które mają wpływ na dostępność wątku usługi</span><span class="sxs-lookup"><span data-stu-id="5842f-116">Partial failures because of dependencies that impact service thread availability</span></span>

<span data-ttu-id="5842f-117">W przypadku dużej aplikacji opartych na mikrousługach wszelkie częściowych niepowodzeń można uzupełnić informacje, zwłaszcza, jeśli większość interakcji wewnętrznego mikrousług opiera się na synchroniczne wywołania HTTP (co jest uznawane za wzorzec niezalecane).</span><span class="sxs-lookup"><span data-stu-id="5842f-117">In a large microservices-based application, any partial failure can be amplified, especially if most of the internal microservices interaction is based on synchronous HTTP calls (which is considered an anti-pattern).</span></span> <span data-ttu-id="5842f-118">Pomyśl o systemie, który odbiera milionów wywołań przychodzących na dzień.</span><span class="sxs-lookup"><span data-stu-id="5842f-118">Think about a system that receives millions of incoming calls per day.</span></span> <span data-ttu-id="5842f-119">Jeśli system ma nieprawidłowy projekt, który jest oparty na długie łańcuchy synchroniczne wywołania HTTP, tych wywołań przychodzących może spowodować wiele więcej milionów wywołania (Załóżmy, że współczynnik 1:4) do dziesiątek wewnętrznego mikrousług jako zależności synchroniczne wychodzące.</span><span class="sxs-lookup"><span data-stu-id="5842f-119">If your system has a bad design that's based on long chains of synchronous HTTP calls, these incoming calls might result in many more millions of outgoing calls (let’s suppose a ratio of 1:4) to dozens of internal microservices as synchronous dependencies.</span></span> <span data-ttu-id="5842f-120">Ta sytuacja jest wyświetlany w na rysunku 8-2 szczególnie zależności \#3.</span><span class="sxs-lookup"><span data-stu-id="5842f-120">This situation is shown in Figure 8-2, especially dependency \#3.</span></span>

![Nieprawidłowy projekt mikrousługi aplikacji sieci web, która jest zależna od łańcucha zależności w innych mikrousług](./media/image2.png)

<span data-ttu-id="5842f-122">**Rysunek 8-2**.</span><span class="sxs-lookup"><span data-stu-id="5842f-122">**Figure 8-2**.</span></span> <span data-ttu-id="5842f-123">Wpływ projektu niepoprawne, oferujący funkcje długie łańcuchy żądań HTTP</span><span class="sxs-lookup"><span data-stu-id="5842f-123">The impact of having an incorrect design featuring long chains of HTTP requests</span></span>

<span data-ttu-id="5842f-124">Sporadyczne niepowodzenia jest gwarantowane w systemie rozproszone i oparte na chmurze, nawet jeśli zależności, co sama ma doskonałej dostępności.</span><span class="sxs-lookup"><span data-stu-id="5842f-124">Intermittent failure is guaranteed in a distributed and cloud-based system, even if every dependency itself has excellent availability.</span></span> <span data-ttu-id="5842f-125">Jest fakt, które należy wziąć pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="5842f-125">It's a fact you need to consider.</span></span>

<span data-ttu-id="5842f-126">Jeśli nie projektować i implementować techniki, aby zapewnić odporność na uszkodzenia, nawet niewielkie przestoje można większy.</span><span class="sxs-lookup"><span data-stu-id="5842f-126">If you do not design and implement techniques to ensure fault tolerance, even small downtimes can be amplified.</span></span> <span data-ttu-id="5842f-127">Na przykład 50 zależności za pomocą dostępność przez 99,99% dostępności w rezultacie kilka godzin przestojów miesiąc ze względu na to wpływ.</span><span class="sxs-lookup"><span data-stu-id="5842f-127">As an example, 50 dependencies each with 99.99% of availability would result in several hours of downtime each month because of this ripple effect.</span></span> <span data-ttu-id="5842f-128">Jeśli zależność mikrousług nie powiodło się podczas obsługi dużej liczby żądań, błędów można szybko saturate wszystkie wątki żądania dostępne w poszczególnych usług i awarię całej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5842f-128">When a microservice dependency fails while handling a high volume of requests, that failure can quickly saturate all available request threads in each service and crash the whole application.</span></span>

![Błędy częściowe może poważnie uzupełnić informacje łańcuchowych zależnościami](./media/image3.png)

<span data-ttu-id="5842f-130">**Rysunek 8-3**.</span><span class="sxs-lookup"><span data-stu-id="5842f-130">**Figure 8-3**.</span></span> <span data-ttu-id="5842f-131">Częściowe niepowodzenie rozszerzone o mikrousług długie łańcuchy synchroniczne wywołania HTTP</span><span class="sxs-lookup"><span data-stu-id="5842f-131">Partial failure amplified by microservices with long chains of synchronous HTTP calls</span></span>

<span data-ttu-id="5842f-132">Aby zminimalizować ten problem, w sekcji [integracji asynchroniczne mikrousług wymusić autonomię w mikrousługach](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy), ten przewodnik zaleca używać komunikacji asynchronicznej w całym wewnętrznego mikrousług.</span><span class="sxs-lookup"><span data-stu-id="5842f-132">To minimize this problem, in the section [Asynchronous microservice integration enforce microservice’s autonomy](../architect-microservice-container-applications/communication-in-microservice-architecture.md#asynchronous-microservice-integration-enforces-microservices-autonomy), this guide encourages you to use asynchronous communication across the internal microservices.</span></span>

<span data-ttu-id="5842f-133">Ponadto jest istotne, projektowania aplikacji mikrousług i klienta, do obsługi częściowych niepowodzeń — czyli do kompilowania aplikacji mikrousług odporne na błędy i klienta.</span><span class="sxs-lookup"><span data-stu-id="5842f-133">In addition, it's essential that you design your microservices and client applications to handle partial failures—that is, to build resilient microservices and client applications.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="5842f-134">[Poprzednie](index.md)
>[dalej](partial-failure-strategies.md)</span><span class="sxs-lookup"><span data-stu-id="5842f-134">[Previous](index.md)
[Next](partial-failure-strategies.md)</span></span>