---
title: Wdrażanie pojedynczego kontenera na podstawie aplikacji sieci Web programu .NET Core w systemie Linux lub Windows hostami Nano Server
description: Architektura Mikrousług .NET konteneryzowanych aplikacji .NET | Wdrażanie pojedynczego kontenera na podstawie aplikacji sieci Web programu .NET Core w systemie Linux lub Windows hostami Nano Server
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 06/27/2018
ms.openlocfilehash: 56c41a51cddeca6c74b09710f9536195a6a88904
ms.sourcegitcommit: 4c158beee818c408d45a9609bfc06f209a523e22
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/03/2018
ms.locfileid: "37404502"
---
# <a name="deploying-single-container-based-net-core-web-applications-on-linux-or-windows-nano-server-hosts"></a><span data-ttu-id="e388a-103">Wdrażanie aplikacji sieci Web opartych na kontenerach pojedynczego .NET Core hosty z systemem Linux lub Windows Nano Server</span><span class="sxs-lookup"><span data-stu-id="e388a-103">Deploying Single-Container-Based .NET Core Web Applications on Linux or Windows Nano Server Hosts</span></span>

<span data-ttu-id="e388a-104">_Korzystaj z kontenerów platformy Docker, monolitycznych wdrożenia aplikacji sieci web, prostsze. Zwiększa to ciągłej integracji i ciągłego wdrażania potoków i pomaga osiągnąć sukces wdrażania do produkcji. Nie ma więcej "działa w mojej maszynie, dlaczego nie działa w środowisku produkcyjnym?"_</span><span class="sxs-lookup"><span data-stu-id="e388a-104">_You can use Docker containers for monolithic deployment of simpler web applications. This improves continuous integration and continuous deployment pipelines and helps achieve deployment-to-production success. No more “It works in my machine, why does it not work in production?”_</span></span>

<span data-ttu-id="e388a-105">Architektura mikrousług ma wiele zalet, ale te korzyści pochodzą kosztem wzrostu złożoności.</span><span class="sxs-lookup"><span data-stu-id="e388a-105">A microservices-based architecture has many benefits, but those benefits come at a cost of increased complexity.</span></span> <span data-ttu-id="e388a-106">W niektórych przypadkach koszty przeważają korzyści i aplikacji monolitycznych wdrożenia, działających w kontenerach jednego lub kilku jest lepszym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="e388a-106">In some cases, the costs outweigh the benefits and a monolithic deployment application running in one or a few containers is a better option.</span></span>

<span data-ttu-id="e388a-107">Aplikacji monolitycznej może nie być w prosty sposób decomposable na mikrousługi dobrze rozdzielone.</span><span class="sxs-lookup"><span data-stu-id="e388a-107">A monolithic application might not be easily decomposable into well-separated microservices.</span></span> <span data-ttu-id="e388a-108">Wiesz, że takich mikrousług powinny być dzielone przez funkcję: powinno działają niezależnie od siebie, aby zapewnić lepszą odporność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e388a-108">You've learned that these microservices should be partitioned by function: they should work independently of each other to provide a more resilient application.</span></span> <span data-ttu-id="e388a-109">Jeśli nie można dostarczyć wycinki funkcji aplikacji, oddzielając tylko zwiększa złożoność.</span><span class="sxs-lookup"><span data-stu-id="e388a-109">If you can't deliver feature slices of the application, separating it only adds complexity.</span></span>

<span data-ttu-id="e388a-110">Aplikacja nie może jeszcze wymagać niezależne przeskalowywanie się funkcje.</span><span class="sxs-lookup"><span data-stu-id="e388a-110">An application might not yet need to scale features independently.</span></span> <span data-ttu-id="e388a-111">Załóżmy, że we wczesnych etapach `eShopOnContainers` odwoływać się do aplikacji, ruch nie uzasadnienie, oddzielając funkcje na różne mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="e388a-111">Let’s suppose that in the early stages of the `eShopOnContainers` reference application, the traffic didn't justify separating features into different microservices.</span></span> <span data-ttu-id="e388a-112">Ruch był wystarczająco mała, zazwyczaj Dodawanie zasobów do jednej usługi przeznaczone dodawania zasobów do wszystkich usług.</span><span class="sxs-lookup"><span data-stu-id="e388a-112">Traffic was small enough that adding resources to one service typically meant adding resources to all services.</span></span> <span data-ttu-id="e388a-113">Dodatkowej pracy do rozdzielania aplikacji na osobne usługi udostępniane minimalny korzyści.</span><span class="sxs-lookup"><span data-stu-id="e388a-113">The additional work to separate the application into discrete services provided minimal benefit.</span></span>

<span data-ttu-id="e388a-114">Ponadto na wczesnym etapie tworzenia aplikacji możesz nie mieć dalsze których naturalnych funkcjonalności.</span><span class="sxs-lookup"><span data-stu-id="e388a-114">Also, early in the development of an application you might not have a clear idea where the natural functional boundaries are.</span></span> <span data-ttu-id="e388a-115">Podczas opracowywania minimalne produktu możliwego do użycia fizyczne rozdzielenie może nie jeszcze związane.</span><span class="sxs-lookup"><span data-stu-id="e388a-115">As you develop a minimum viable product, the natural separation might not yet have emerged.</span></span>

<span data-ttu-id="e388a-116">Niektóre z tych warunków, mogą być tymczasowe.</span><span class="sxs-lookup"><span data-stu-id="e388a-116">Some of these conditions might be temporary.</span></span> <span data-ttu-id="e388a-117">Może rozpocząć od utworzenia aplikacji monolitycznej, a później oddzielić niektórymi funkcjami, które zostaną wdrożone i wdrażane jako mikrousług.</span><span class="sxs-lookup"><span data-stu-id="e388a-117">You might start by creating a monolithic application, and later separate some features to be developed and deployed as microservices.</span></span> <span data-ttu-id="e388a-118">Inne warunki mogą być niezbędne do przestrzeni problem aplikacji, co oznacza, że aplikacja może nigdy nie można podzielić na wiele mikrousług.</span><span class="sxs-lookup"><span data-stu-id="e388a-118">Other conditions might be essential to the application’s problem space, meaning that the application might never be broken into multiple microservices.</span></span>

<span data-ttu-id="e388a-119">Oddzielenie aplikacji w wielu procesach dyskretnych wprowadza również obciążenie.</span><span class="sxs-lookup"><span data-stu-id="e388a-119">Separating an application into many discrete processes also introduces overhead.</span></span> <span data-ttu-id="e388a-120">Istnieje więcej złożoności w podziale funkcji w różnych procesach.</span><span class="sxs-lookup"><span data-stu-id="e388a-120">There's more complexity in separating features into different processes.</span></span> <span data-ttu-id="e388a-121">Protokoły komunikacyjne są coraz bardziej złożone.</span><span class="sxs-lookup"><span data-stu-id="e388a-121">The communication protocols become more complex.</span></span> <span data-ttu-id="e388a-122">Zamiast wywołania metody należy użyć komunikacji asynchronicznej między usługami.</span><span class="sxs-lookup"><span data-stu-id="e388a-122">Instead of method calls, you must use asynchronous communications between services.</span></span> <span data-ttu-id="e388a-123">Po przeniesieniu do architektury mikrousług, musisz dodać wiele bloków konstrukcyjnych zaimplementowane w wersji mikrousług `eShopOnContainers` aplikacji: Obsługa magistrali zdarzeń, odporności komunikat i ponownych prób i spójności ostatecznej.</span><span class="sxs-lookup"><span data-stu-id="e388a-123">As you move to a microservices architecture, you need to add many of the building blocks implemented in the microservices version of the `eShopOnContainers` application: event bus handling, message resiliency and retries, eventual consistency, and more.</span></span>

<span data-ttu-id="e388a-124">Nieco bardzo uproszczony w ramach aplikacji eShopOnContainers (o nazwie [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) i zawarte w tym samym repozytorium GitHub) jest uruchamiana jako monolityczny aplikacji MVC.</span><span class="sxs-lookup"><span data-stu-id="e388a-124">A much-simplified version of eShopOnContainers (named [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) and included in the same GitHub repository) runs as a monolithic MVC application.</span></span> <span data-ttu-id="e388a-125">Zgodnie z opisem, istnieją korzyści oferowane przez ten uzasadnienie wyboru tych elementów.</span><span class="sxs-lookup"><span data-stu-id="e388a-125">As described, there are advantages offered by that design choice.</span></span> <span data-ttu-id="e388a-126">Można pobrać źródła dla tej aplikacji z witryny GitHub i uruchomić go lokalnie.</span><span class="sxs-lookup"><span data-stu-id="e388a-126">You can download the source for this application from GitHub and run it locally.</span></span> <span data-ttu-id="e388a-127">Nawet tej aplikacji monolitycznej korzysta z wdrażana w środowisku kontenera.</span><span class="sxs-lookup"><span data-stu-id="e388a-127">Even this monolithic application benefits from being deployed in a container environment.</span></span>

<span data-ttu-id="e388a-128">Do jednego wdrażania konteneryzowanych oznacza, że każde wystąpienie aplikacji działa w tym samym środowisku.</span><span class="sxs-lookup"><span data-stu-id="e388a-128">For one, the containerized deployment means that every instance of the application runs in the same environment.</span></span> <span data-ttu-id="e388a-129">Dotyczy to również Środowisko deweloperskie, gdzie odbywać się wcześnie środowisk testowych i programistycznych.</span><span class="sxs-lookup"><span data-stu-id="e388a-129">This includes the developer environment where early testing and development take place.</span></span> <span data-ttu-id="e388a-130">Zespół opracowujący można uruchomić aplikację w środowisku konteneryzowanych, który odpowiada środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e388a-130">The development team can run the application in a containerized environment that matches the production environment.</span></span>

<span data-ttu-id="e388a-131">Ponadto konteneryzowanych aplikacji skalowanie przy niskich kosztach.</span><span class="sxs-lookup"><span data-stu-id="e388a-131">Also, containerized applications scale out at lower cost.</span></span> <span data-ttu-id="e388a-132">Jak wcześniej, środowisko kontenerów umożliwia udostępnianie niż tradycyjnych środowisk maszyny Wirtualnej większą zasobów.</span><span class="sxs-lookup"><span data-stu-id="e388a-132">As you saw earlier, the container environment enables greater resource sharing than traditional VM environments.</span></span>

<span data-ttu-id="e388a-133">Na koniec konteneryzowania aplikacji powoduje oddzielenie logiki biznesowej i storage server.</span><span class="sxs-lookup"><span data-stu-id="e388a-133">Finally, containerizing the application forces a separation between the business logic and the storage server.</span></span> <span data-ttu-id="e388a-134">Ponieważ aplikacja jest skalowana w poziomie, różnych kontenerów zostanie wszystkie polegają na średni jednego magazynu fizycznego.</span><span class="sxs-lookup"><span data-stu-id="e388a-134">As the application scales out, the various containers will all rely on a single physical storage medium.</span></span> <span data-ttu-id="e388a-135">Ten magazyn zwykle są wysokiej dostępności serwera z systemem bazy danych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e388a-135">This storage would typically be a high-availability server running a SQL Server database.</span></span>

## <a name="application-tour"></a><span data-ttu-id="e388a-136">Samouczek aplikacji</span><span class="sxs-lookup"><span data-stu-id="e388a-136">Application tour</span></span>

<span data-ttu-id="e388a-137">[EShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) aplikacji reprezentuje część aplikacji ramach aplikacji eShopOnContainers, uruchomione jako aplikacji monolitycznej — oparte na programie ASP.NET Core MVC aplikacji uruchomionej na platformie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e388a-137">The [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) application represents some of the eShopOnContainers application running as a monolithic application — an ASP.NET Core MVC-based application running on .NET Core.</span></span> <span data-ttu-id="e388a-138">Zapewnia przede wszystkim katalogu przeglądania zgodnie z opisem we wcześniejszych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="e388a-138">It mainly provides the catalog browsing capabilities as described in earlier sections.</span></span>

<span data-ttu-id="e388a-139">Aplikacja korzysta z bazy danych programu SQL Server do przechowywania katalogu.</span><span class="sxs-lookup"><span data-stu-id="e388a-139">The application uses a SQL Server database for the catalog storage.</span></span> <span data-ttu-id="e388a-140">W przypadku wdrożeń opartych na kontenerach ta aplikacja monolityczna dostęp tego samego magazynu danych jako aplikacji opartych na mikrousługach.</span><span class="sxs-lookup"><span data-stu-id="e388a-140">In container-based deployments, this monolithic application can access the same data store as the microservices-based application.</span></span> <span data-ttu-id="e388a-141">Aplikacja jest skonfigurowana do uruchamiania programu SQL Server w kontenerze obok aplikacji monolitycznej.</span><span class="sxs-lookup"><span data-stu-id="e388a-141">The application is configured to run SQL Server in a container alongside the monolithic application.</span></span> <span data-ttu-id="e388a-142">W środowisku produkcyjnym programu SQL Server może działać na komputerze o wysokiej dostępności, poza hosta platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="e388a-142">In a production environment, SQL Server would run on a high-availability machine, outside of the Docker host.</span></span> <span data-ttu-id="e388a-143">Dla wygody w środowisku deweloperskim lub testowym zalecane jest uruchomienie programu SQL Server we własnym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="e388a-143">For convenience, in a development or test environment, running SQL Server in its own container is recommended.</span></span>

<span data-ttu-id="e388a-144">Funkcja początkowej tylko zestaw umożliwia przeglądanie katalogu.</span><span class="sxs-lookup"><span data-stu-id="e388a-144">The initial feature set only enables browsing the catalog.</span></span> <span data-ttu-id="e388a-145">Aktualizacje umożliwiłby pełny zestaw funkcji konteneryzowanych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e388a-145">Updates would enable the full feature set of the containerized application.</span></span> <span data-ttu-id="e388a-146">A bardziej zaawansowane Architektura aplikacji monolitycznych w sieci web jest opisana w [rozwiązania architektury aplikacji sieci Web ASP.NET](https://aka.ms/webappebook) e booka i powiązane [eShopOnWeb przykładowej aplikacji](http://aka.ms/WebAppArchitecture).</span><span class="sxs-lookup"><span data-stu-id="e388a-146">A more advanced monolithic web application architecture is described in the [ASP.NET Web Application architecture practices](https://aka.ms/webappebook) e-book and related [eShopOnWeb sample application](http://aka.ms/WebAppArchitecture).</span></span>

## <a name="docker-support"></a><span data-ttu-id="e388a-147">Obsługę platformy docker</span><span class="sxs-lookup"><span data-stu-id="e388a-147">Docker support</span></span>

<span data-ttu-id="e388a-148">Projekt eShopOnWeb działa na platformie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="e388a-148">The eShopOnWeb project runs on .NET Core.</span></span> <span data-ttu-id="e388a-149">Oznacza to, że może działać w kontenerach opartych na systemie Linux albo systemem Windows.</span><span class="sxs-lookup"><span data-stu-id="e388a-149">That means it can run in either Linux-based or Windows-based containers.</span></span> <span data-ttu-id="e388a-150">Należy pamiętać, wdrożenie platformy Docker, chcesz używać tego samego typu hosta dla programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e388a-150">Note that for Docker deployment, you want to use the same host type for SQL Server.</span></span> <span data-ttu-id="e388a-151">Kontenery opartych na systemie Linux Zezwalaj na mniejszych rozmiarów i są preferowane.</span><span class="sxs-lookup"><span data-stu-id="e388a-151">Linux-based containers allow a smaller footprint and are preferred.</span></span>

<span data-ttu-id="e388a-152">Visual Studio zawiera szablon projektu, który dodaje obsługę platformy Docker do rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="e388a-152">Visual Studio provides a project template that adds support for Docker to a solution.</span></span> <span data-ttu-id="e388a-153">Kliknij prawym przyciskiem myszy projekt, kliknij przycisk **Dodaj** następuje **obsługę platformy Docker**.</span><span class="sxs-lookup"><span data-stu-id="e388a-153">You right-click the project, click **Add** followed by **Docker Support**.</span></span> <span data-ttu-id="e388a-154">Szablon dodaje plik Dockerfile do swojego projektu i nową **narzędzia docker compose** projektu, który zawiera moduł uruchamiający *docker-compose.yml* pliku.</span><span class="sxs-lookup"><span data-stu-id="e388a-154">The template adds a Dockerfile to your project, and a new **docker-compose** project that provides a starter *docker-compose.yml* file.</span></span> <span data-ttu-id="e388a-155">Ten krok ma jeszcze nie zostały otwarte w projekcie eShopOnWeb pobierane z usługi GitHub.</span><span class="sxs-lookup"><span data-stu-id="e388a-155">This step has already been done in the eShopOnWeb project downloaded from GitHub.</span></span> <span data-ttu-id="e388a-156">Widać, że rozwiązanie zawiera **eShopOnWeb** projektu i **narzędzia docker compose** projektu, jak pokazano w rysunek 6-1.</span><span class="sxs-lookup"><span data-stu-id="e388a-156">You can see that the solution contains the **eShopOnWeb** project and the **docker-compose** project as shown in Figure 6-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="e388a-157">**Rysunek 6-1**.</span><span class="sxs-lookup"><span data-stu-id="e388a-157">**Figure 6-1**.</span></span> <span data-ttu-id="e388a-158">**Narzędzia docker compose** projektu w aplikacji sieci web jednym kontenerze</span><span class="sxs-lookup"><span data-stu-id="e388a-158">The **docker-compose** project in a single-container web application</span></span>

<span data-ttu-id="e388a-159">Te pliki są standardowe docker-compose pliki zgodne z jakimkolwiek projektem platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="e388a-159">These files are standard docker-compose files, consistent with any Docker project.</span></span> <span data-ttu-id="e388a-160">Można je za pomocą programu Visual Studio lub z wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="e388a-160">You can use them with Visual Studio or from the command line.</span></span> <span data-ttu-id="e388a-161">Ta aplikacja działa na platformie .NET Core i używa kontenerów systemu Linux.</span><span class="sxs-lookup"><span data-stu-id="e388a-161">This application runs on .NET Core and uses Linux containers.</span></span> <span data-ttu-id="e388a-162">Tak użytkownik może również kodu, kompilacji i ją uruchomić na komputerze Mac lub na maszynie z systemem Linux.</span><span class="sxs-lookup"><span data-stu-id="e388a-162">So, you can also code, build, and run it on a Mac or on a Linux machine.</span></span>

<span data-ttu-id="e388a-163">*Docker-compose.yml* plik zawiera informacje o jakie obrazy do tworzenia i jakie kontenery do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="e388a-163">The *docker-compose.yml* file contains information about what images to build and what containers to launch.</span></span> <span data-ttu-id="e388a-164">Szablony określają sposób tworzenia `eshopweb` obrazów i uruchamiaj kontenery aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e388a-164">The templates specify how to build the `eshopweb` image and launch the application’s containers.</span></span> <span data-ttu-id="e388a-165">Należy dodać zależności w programie SQL Server przy tym obrazu (na przykład `mssql-server-linux`), a usługą sql.data obrazu platformy Docker skompilować i uruchomić tego kontenera.</span><span class="sxs-lookup"><span data-stu-id="e388a-165">You need to add the dependency on SQL Server by including an image for it (for example, `mssql-server-linux`), and a service for the sql.data image for Docker to build and launch that container.</span></span> <span data-ttu-id="e388a-166">Te ustawienia zostały pokazane w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="e388a-166">These settings are shown in the following example:</span></span>

```yml
version: '2'

services:
  eshopweb:
    image: eshop/web
    build:
    context: ./eShopWeb
    dockerfile: Dockerfile
    depends_on:
      - sql.data

  sql.data:
    image: microsoft/mssql-server-linux
```

<span data-ttu-id="e388a-167">`depends_on` Dyrektywy informuje platformy Docker, że obraz eShopWeb zależy od obrazu sql.data.</span><span class="sxs-lookup"><span data-stu-id="e388a-167">The `depends_on` directive tells Docker that the eShopWeb image depends on the sql.data image.</span></span> <span data-ttu-id="e388a-168">Poniższe wiersze `depends_on` znajdują się instrukcje, aby skompilować obraz oznaczony `sql.data` przy użyciu `microsoft/mssql-server-linux` obrazu.</span><span class="sxs-lookup"><span data-stu-id="e388a-168">The lines below `depends_on` are the instructions to build an image tagged `sql.data` using the `microsoft/mssql-server-linux` image.</span></span>

<span data-ttu-id="e388a-169">**Narzędzia docker compose** projektu zawiera inne pliki docker-compose pod głównym *docker-compose.yml* węzeł, aby zapewnić wizualne wskazanie, że te pliki są ze sobą powiązane.</span><span class="sxs-lookup"><span data-stu-id="e388a-169">The **docker-compose** project displays the other docker-compose files under the main *docker-compose.yml* node to provide a visual indication that these files are related.</span></span> <span data-ttu-id="e388a-170">*Docker-compose-override.yml* plik zawiera ustawienia dla obu usług, takich jak parametry połączenia i inne ustawienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e388a-170">The *docker-compose-override.yml* file contains settings for both services, such as connection strings and other application settings.</span></span>

<span data-ttu-id="e388a-171">W poniższym przykładzie przedstawiono *docker compose.vs.debug.yml* pliku, który zawiera ustawienia używane do debugowania w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e388a-171">The following example shows the *docker-compose.vs.debug.yml* file, which contains settings used for debugging in Visual Studio.</span></span> <span data-ttu-id="e388a-172">W tym pliku obrazu eshopweb ma tag dev dołączone do niego.</span><span class="sxs-lookup"><span data-stu-id="e388a-172">In that file, the eshopweb image has the dev tag appended to it.</span></span> <span data-ttu-id="e388a-173">Czy pomaga oddzielić debugowania z obrazów w wersji, tak, aby informacje o debugowaniu nie przypadkowo wdrożono w środowisku produkcyjnym:</span><span class="sxs-lookup"><span data-stu-id="e388a-173">That helps separate debug from release images so that you don't accidentally deploy the debug information to a production environment:</span></span>

```yml
version: '2'

services:
  eshopweb:
    image: eshop/web:dev
    build:
    args:
    source: ${DOCKER_BUILD_SOURCE}
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
    volumes:
      - ./eShopWeb:/app
      - ~/.nuget/packages:/root/.nuget/packages:ro
      - ~/clrdbg:/clrdbg:ro
    entrypoint: tail -f /dev/null
    labels:
      - "com.microsoft.visualstudio.targetoperatingsystem=linux"
```

<span data-ttu-id="e388a-174">Ostatni plik, dodawane jest *docker-compose.ci.build.yml*.</span><span class="sxs-lookup"><span data-stu-id="e388a-174">The last file added is *docker-compose.ci.build.yml*.</span></span> <span data-ttu-id="e388a-175">Ten plik, będzie używany z wiersza polecenia do tworzenia projektów z serwera ciągłej integracji.</span><span class="sxs-lookup"><span data-stu-id="e388a-175">This file would be used from the command line to build the project from a CI server.</span></span> <span data-ttu-id="e388a-176">Ten plik compose uruchamia kontener platformy Docker, która tworzy obrazy potrzebne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e388a-176">This compose file starts a Docker container that builds the images needed for your application.</span></span> <span data-ttu-id="e388a-177">W poniższym przykładzie pokazano zawartość *docker-compose.ci.build.yml* pliku:</span><span class="sxs-lookup"><span data-stu-id="e388a-177">The following example shows the contents of the *docker-compose.ci.build.yml* file:</span></span>

```yml
version: '2'

services:
  ci-build:
    image: microsoft/aspnetcore-build:latest
    volumes:
      - .:/src
    working_dir: /src
  command: /bin/bash -c "dotnet restore ./eShopWeb.sln && dotnet publish  ./eShopWeb.sln -c Release -o ./obj/Docker/publish"
```

> [!NOTE]
> <span data-ttu-id="e388a-178">Począwszy od programu .NET Core SDK 2.0, [dotnet restore](../../../core/tools/dotnet-restore.md) polecenie jest wykonywane automatycznie po [publikowania dotnet](../../../core/tools/dotnet-publish.md) jest wykonywany.</span><span class="sxs-lookup"><span data-stu-id="e388a-178">Starting with .NET Core SDK 2.0, the [dotnet restore](../../../core/tools/dotnet-restore.md) command executes automatically when [dotnet publish](../../../core/tools/dotnet-publish.md) is executed.</span></span>

<span data-ttu-id="e388a-179">Należy zauważyć, że obraz jest obrazem kompilacji platformy ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="e388a-179">Notice that the image is an ASP.NET Core build image.</span></span> <span data-ttu-id="e388a-180">Ten obraz zawiera narzędzia zestawu SDK i kompilacji, aby skompilować aplikację i utworzyć wymagane obrazy.</span><span class="sxs-lookup"><span data-stu-id="e388a-180">That image includes the SDK and build tools to build your application and create the required images.</span></span> <span data-ttu-id="e388a-181">Uruchamianie **narzędzia docker compose** projektu przy użyciu tego pliku uruchamia kontener kompilacji z obrazu, a następnie tworzy obraz swojej aplikacji, w tym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="e388a-181">Running the **docker-compose** project using this file starts the build container from the image, then builds your application’s image in that container.</span></span> <span data-ttu-id="e388a-182">Możesz określić, że *docker-compose* pliku jako część wiersza polecenia, aby skompilować aplikację w kontenerze platformy Docker, a następnie uruchom go.</span><span class="sxs-lookup"><span data-stu-id="e388a-182">You specify that *docker-compose* file as part of the command line to build your application in a Docker container, then launch it.</span></span>

<span data-ttu-id="e388a-183">W programie Visual Studio, można uruchomić aplikację w kontenerach platformy Docker, wybierając **docker-compose** projekt jako projekt startowy, a następnie naciskając klawisze Ctrl + F5 (F5, aby debugować), jak w przypadku innych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e388a-183">In Visual Studio, you can run your application in Docker containers by selecting the **docker-compose** project as the startup project, and then pressing Ctrl+F5 (F5 to debug), as you can with any other application.</span></span> <span data-ttu-id="e388a-184">Po uruchomieniu **narzędzia docker compose** projektu Visual Studio będzie działać **narzędzia docker compose** przy użyciu *docker-compose.yml* pliku  *docker-compose.override.yml* plików i z platformy docker — compose.vs.\* plików.</span><span class="sxs-lookup"><span data-stu-id="e388a-184">When you start the **docker-compose** project, Visual Studio runs **docker-compose** using the *docker-compose.yml* file, the *docker-compose.override.yml* file, and one of the docker-compose.vs.\* files.</span></span> <span data-ttu-id="e388a-185">Po rozpoczęciu aplikacji Visual Studio otworzy w przeglądarce dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="e388a-185">Once the application has started, Visual Studio launches the browser for you.</span></span>

<span data-ttu-id="e388a-186">Jeśli uruchamianie aplikacji w debugerze programu Visual Studio dołącza do uruchomionej aplikacji na platformie Docker.</span><span class="sxs-lookup"><span data-stu-id="e388a-186">If you launch the application in the debugger, Visual Studio attaches to the running application in Docker.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="e388a-187">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="e388a-187">Troubleshooting</span></span>

<span data-ttu-id="e388a-188">W tej sekcji opisano kilka kwestii, które mogą wystąpić podczas uruchamiania kontenerów lokalnie, a także sugeruje kilka poprawek.</span><span class="sxs-lookup"><span data-stu-id="e388a-188">This section describes a few issues that might arise when your run containers locally and suggests some fixes.</span></span>

### <a name="stop-docker-containers"></a><span data-ttu-id="e388a-189">Zatrzymaj kontenerów platformy Docker</span><span class="sxs-lookup"><span data-stu-id="e388a-189">Stop Docker containers</span></span>

<span data-ttu-id="e388a-190">Po uruchomieniu konteneryzowanych aplikacji, kontenerów w dalszym ciągu działać po zatrzymaniu debugowania.</span><span class="sxs-lookup"><span data-stu-id="e388a-190">After you launch the containerized application, the containers continue to run, even after you have stopped debugging.</span></span> <span data-ttu-id="e388a-191">Możesz uruchomić `docker ps` polecenie w wierszu polecenia, aby zobaczyć, kontenery, które są uruchomione.</span><span class="sxs-lookup"><span data-stu-id="e388a-191">You can run the `docker ps` command from the command line to see which containers are running.</span></span> <span data-ttu-id="e388a-192">`docker stop` Polecenie zatrzymuje działający kontener, jak pokazano w rysunek 6-2.</span><span class="sxs-lookup"><span data-stu-id="e388a-192">The `docker stop` command stops a running container, as shown in Figure 6-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="e388a-193">**Rysunek 6-2**.</span><span class="sxs-lookup"><span data-stu-id="e388a-193">**Figure 6-2**.</span></span> <span data-ttu-id="e388a-194">Wyświetlanie listy i zatrzymywanie kontenerów przy użyciu platformy docker ps i interfejsu wiersza polecenia platformy docker stop</span><span class="sxs-lookup"><span data-stu-id="e388a-194">Listing and stopping containers with the docker ps and docker stop CLI commands</span></span>

<span data-ttu-id="e388a-195">Może być konieczne zatrzymanie procesów podczas przełączania między różne konfiguracje.</span><span class="sxs-lookup"><span data-stu-id="e388a-195">You might need to stop running processes when you switch between different configurations.</span></span> <span data-ttu-id="e388a-196">W przeciwnym razie kontenera, w którym działa aplikacja sieci web jest używany port dla swojej aplikacji (5106 w tym przykładzie).</span><span class="sxs-lookup"><span data-stu-id="e388a-196">Otherwise, the container that is running the web application is using the port for your application (5106 in this example).</span></span>

### <a name="add-docker-to-your-projects"></a><span data-ttu-id="e388a-197">Dodaj platformy Docker do swoich projektów</span><span class="sxs-lookup"><span data-stu-id="e388a-197">Add Docker to your projects</span></span>

<span data-ttu-id="e388a-198">Kreator, który dodaje obsługę platformy Docker komunikuje się z uruchomionego procesu platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="e388a-198">The wizard that adds Docker support communicates with the running Docker process.</span></span> <span data-ttu-id="e388a-199">Jeśli platformy Docker nie jest uruchomiona, po uruchomieniu kreatora, Kreator nie będzie działać poprawnie.</span><span class="sxs-lookup"><span data-stu-id="e388a-199">If Docker isn't running when you start the wizard, the wizard won't run correctly.</span></span> <span data-ttu-id="e388a-200">Kreator sprawdza, czy bieżący wybór kontenera można dodać poprawną obsługę platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="e388a-200">The wizard examines your current container choice to add the correct Docker support.</span></span> <span data-ttu-id="e388a-201">Aby dodać obsługę kontenerów Windows, należy uruchomić kreatora, masz uruchomiony za pomocą kontenerów Windows skonfigurowane platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="e388a-201">To add support for Windows Containers, run the wizard while you have Docker running with Windows Containers configured.</span></span> <span data-ttu-id="e388a-202">Aby dodać obsługę kontenerów systemu Linux, uruchom kreatora, kiedy masz platformy Docker z kontenerów systemu Linux skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="e388a-202">To add support for Linux containers, run the wizard while you have Docker running with Linux containers configured.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="e388a-203">[Poprzednie](../docker-application-development-process/docker-app-development-workflow.md)
[dalej](../containerize-net-framework-applications/index.md)</span><span class="sxs-lookup"><span data-stu-id="e388a-203">[Previous](../docker-application-development-process/docker-app-development-workflow.md)
[Next](../containerize-net-framework-applications/index.md)</span></span>
