---
title: "Wdrażanie jeden kontener na podstawie aplikacji sieci Web .NET Core hosty z systemem Linux lub Windows Nano Server"
description: "Architektura Mikrousług .NET dla aplikacji .NET konteneryzowanych | Wdrażanie jeden kontener na podstawie aplikacji sieci Web .NET Core hosty z systemem Linux lub Windows Nano Server"
keywords: "Docker, Mikrousług, ASP.NET, kontenera"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: f85b3db6b4ca6d22c4b855c8b96051c1c31350a6
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/23/2017
---
# <a name="deploying-single-container-based-net-core-web-applications-on-linux-or-windows-nano-server-hosts"></a><span data-ttu-id="715b0-104">Wdrażanie aplikacji sieci Web hosty z systemem Linux lub Windows Nano Server jeden kontener na podstawie .NET Core</span><span class="sxs-lookup"><span data-stu-id="715b0-104">Deploying Single-Container-Based .NET Core Web Applications on Linux or Windows Nano Server Hosts</span></span>

<span data-ttu-id="715b0-105">*Kontenery Docker można użyć wdrożenia wbudowanymi prostsze aplikacji sieci web. Zwiększa to ciągłej integracji i ciągłe wdrażanie potoków i pomaga osiągnąć sukces wdrożenia do produkcji. Brak "działa w komputerze, dlaczego nie działa w środowisku produkcyjnym?"*</span><span class="sxs-lookup"><span data-stu-id="715b0-105">*You can use Docker containers for monolithic deployment of simpler web applications. This improves continuous integration and continuous deployment pipelines and helps achieve deployment-to-production success. No more “It works in my machine, why does not work in production?”*</span></span>

<span data-ttu-id="715b0-106">Architektura mikrousług ma wiele korzyści, ale pochodzą te korzyści kosztem zwiększenia złożoności.</span><span class="sxs-lookup"><span data-stu-id="715b0-106">A microservices-based architecture has many benefits, but those benefits come at a cost of increased complexity.</span></span> <span data-ttu-id="715b0-107">W niektórych przypadkach koszty przeważają korzyści i będzie można lepiej obsłużone z aplikacją wbudowanymi wdrożenia uruchomiona w kontenerze jednego lub kilku kontenerów.</span><span class="sxs-lookup"><span data-stu-id="715b0-107">In some cases, the costs outweigh the benefits, and you will be better served with a monolithic deployment application running in a single container or in just a few containers.</span></span> 

<span data-ttu-id="715b0-108">Wbudowanymi aplikacji nie może być łatwo decomposable w dobrze rozdzielonych mikrousług.</span><span class="sxs-lookup"><span data-stu-id="715b0-108">A monolithic application might not be easily decomposable into well-separated microservices.</span></span> <span data-ttu-id="715b0-109">Wiesz już, że powinno być partycjonowane przez funkcję: mikrousług powinny działać niezależnie od siebie, aby zapewnić bardziej elastyczne aplikacji.</span><span class="sxs-lookup"><span data-stu-id="715b0-109">You have learned that these should be partitioned by function: microservices should work independently of each other to provide a more resilient application.</span></span> <span data-ttu-id="715b0-110">Nie można dostarczyć wycinków funkcji aplikacji, tylko on oddzielenie dodaje złożoności.</span><span class="sxs-lookup"><span data-stu-id="715b0-110">If you cannot deliver feature slices of the application, separating it only adds complexity.</span></span>

<span data-ttu-id="715b0-111">Aplikacja może jeszcze nie można skalować niezależnie funkcji.</span><span class="sxs-lookup"><span data-stu-id="715b0-111">An application might not yet need to scale features independently.</span></span> <span data-ttu-id="715b0-112">Załóżmy, że na początku życia aplikacji odwołanie eShopOnContainers ruch nie uzasadnia rozdzielić funkcje różnych mikrousług.</span><span class="sxs-lookup"><span data-stu-id="715b0-112">Let’s suppose that early in the life of our eShopOnContainers reference application, the traffic did not justify separating features into different microservices.</span></span> <span data-ttu-id="715b0-113">Ruch jest duże, dodawanie zasobów do jednej usługi zazwyczaj przeznaczone Dodawanie zasobów do wszystkich usług.</span><span class="sxs-lookup"><span data-stu-id="715b0-113">Traffic was small enough that adding resources to one service typically meant adding resources to all services.</span></span> <span data-ttu-id="715b0-114">Dodatkowe czynności w celu rozdzielenia aplikacji do usług odrębny podać asysta minimalne.</span><span class="sxs-lookup"><span data-stu-id="715b0-114">The additional work to separate the application into discrete services provided minimal benefit.</span></span>

<span data-ttu-id="715b0-115">Ponadto na początku tworzenia aplikacji możesz utracić dalsze skutkującej naturalne granice funkcjonalności.</span><span class="sxs-lookup"><span data-stu-id="715b0-115">Also, early in the development of an application you might not have a clear idea where the natural functional boundaries are.</span></span> <span data-ttu-id="715b0-116">Podczas opracowywania minimalna produktu działało fizyczne rozdzielenie może nie jeszcze związane.</span><span class="sxs-lookup"><span data-stu-id="715b0-116">As you develop a minimum viable product, the natural separation might not yet have emerged.</span></span>

<span data-ttu-id="715b0-117">Niektóre z tych warunków mogą być tymczasowe.</span><span class="sxs-lookup"><span data-stu-id="715b0-117">Some of these conditions might be temporary.</span></span> <span data-ttu-id="715b0-118">Może być Rozpocznij od utworzenia wbudowanymi aplikacji, a później rozdzielić niektóre funkcje, które mają być opracowane i wdrożony jako mikrousług.</span><span class="sxs-lookup"><span data-stu-id="715b0-118">You might start by creating a monolithic application, and later separate some features to be developed and deployed as microservices.</span></span> <span data-ttu-id="715b0-119">Inne warunki mogą być niezbędne do przestrzeni problem aplikacji, co oznacza, że aplikacja może nigdy nie można podzielić na wiele mikrousług.</span><span class="sxs-lookup"><span data-stu-id="715b0-119">Other conditions might be essential to the application’s problem space, meaning that the application might never be broken into multiple microservices.</span></span>

<span data-ttu-id="715b0-120">Oddzielanie aplikacji do wielu procesów odrębny wprowadza również koszty.</span><span class="sxs-lookup"><span data-stu-id="715b0-120">Separating an application into many discrete processes also introduces overhead.</span></span> <span data-ttu-id="715b0-121">Jest bardziej złożona rozdzielić funkcje różnych procesów.</span><span class="sxs-lookup"><span data-stu-id="715b0-121">There is more complexity in separating features into different processes.</span></span> <span data-ttu-id="715b0-122">Protokoły komunikacji staną się bardziej złożonych.</span><span class="sxs-lookup"><span data-stu-id="715b0-122">The communication protocols become more complex.</span></span> <span data-ttu-id="715b0-123">Zamiast wywołania metody należy użyć komunikacji między usługami.</span><span class="sxs-lookup"><span data-stu-id="715b0-123">Instead of method calls, you must use asynchronous communications between services.</span></span> <span data-ttu-id="715b0-124">W przypadku przejścia do architektury mikrousług, musisz dodać wiele bloków konstrukcyjnych w wersji mikrousług aplikacji eShopOnContainers: Obsługa magistrali zdarzeń, komunikatu odporności i ponownych prób i spójność ostateczna.</span><span class="sxs-lookup"><span data-stu-id="715b0-124">As you move to a microservices architecture, you need to add many of the building blocks implemented in the microservices version of the eShopOnContainers application: event bus handling, message resiliency and retries, eventual consistency, and more.</span></span>

<span data-ttu-id="715b0-125">Uproszczone bardzo wersji eShopOnContainers (o nazwie [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) i zawarte w tym samym repozytorium GitHub) działają jako wbudowanymi aplikacji MVC i jak tylko opisane, istnieją korzyści wynikających z tego wyboru projektu.</span><span class="sxs-lookup"><span data-stu-id="715b0-125">A much-simplified version of eShopOnContainers (named [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) and included in the same GitHub repo) runs as a monolithic MVC application, and as just described, there are advantages offered by that design choice.</span></span> <span data-ttu-id="715b0-126">Można pobrać źródła dla tej aplikacji z usługi GitHub i uruchom lokalnie.</span><span class="sxs-lookup"><span data-stu-id="715b0-126">You can download the source for this application from GitHub and run it locally.</span></span> <span data-ttu-id="715b0-127">Nawet wbudowanymi aplikacja korzysta z wdrożenia w środowisku kontenera.</span><span class="sxs-lookup"><span data-stu-id="715b0-127">Even this monolithic application benefits from being deployed in a container environment.</span></span>

<span data-ttu-id="715b0-128">Dla jednego wdrażania konteneryzowanych oznacza, że każde wystąpienie aplikacji jest uruchamiany w tym samym środowisku.</span><span class="sxs-lookup"><span data-stu-id="715b0-128">For one, the containerized deployment means that every instance of the application runs in the same environment.</span></span> <span data-ttu-id="715b0-129">Dotyczy to również środowiska deweloperskiego, w którym odbywa się wcześniej testowania i rozwoju.</span><span class="sxs-lookup"><span data-stu-id="715b0-129">This includes the developer environment where early testing and development take place.</span></span> <span data-ttu-id="715b0-130">Zespół deweloperów można uruchomić aplikację w środowisku konteneryzowanych pasującą do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="715b0-130">The development team can run the application in a containerized environment that matches the production environment.</span></span>

<span data-ttu-id="715b0-131">Ponadto konteneryzowanych aplikacji skalowania w poziomie na niższe koszty.</span><span class="sxs-lookup"><span data-stu-id="715b0-131">In addition, containerized applications scale out at lower cost.</span></span> <span data-ttu-id="715b0-132">Jak przedstawiono wcześniej, środowiska kontenera umożliwia udostępnianie niż tradycyjnych środowisk maszyny Wirtualnej większą zasobów.</span><span class="sxs-lookup"><span data-stu-id="715b0-132">As you saw earlier, the container environment enables greater resource sharing than traditional VM environments.</span></span>

<span data-ttu-id="715b0-133">Na koniec containerizing aplikacja wymusza oddzielenie logiki biznesowej i storage server.</span><span class="sxs-lookup"><span data-stu-id="715b0-133">Finally, containerizing the application forces a separation between the business logic and the storage server.</span></span> <span data-ttu-id="715b0-134">Jak aplikacja skaluje się, wiele kontenerów będzie wszystkie używana na nośniku jednego magazynu fizycznego.</span><span class="sxs-lookup"><span data-stu-id="715b0-134">As the application scales out, the multiple containers will all rely on a single physical storage medium.</span></span> <span data-ttu-id="715b0-135">Zazwyczaj powinien to być serwerem wysokiej dostępności bazy danych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="715b0-135">This would typically be a high-availability server running a SQL Server database.</span></span>

## <a name="application-tour"></a><span data-ttu-id="715b0-136">Samouczek aplikacji</span><span class="sxs-lookup"><span data-stu-id="715b0-136">Application tour</span></span>

<span data-ttu-id="715b0-137">[EShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) aplikacji reprezentuje część aplikacji eShopOnContainers uruchomiona jako aplikacja wbudowanymi — aplikacji ASP.NET MVC rdzeni na podstawie uruchomionej na .NET Core.</span><span class="sxs-lookup"><span data-stu-id="715b0-137">The [eShopWeb](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/Web/WebMonolithic) application represents some of the eShopOnContainers application running as a monolithic application—an ASP.NET Core MVC based application running on .NET Core.</span></span> <span data-ttu-id="715b0-138">Zapewnia on głównie katalogu Przeglądanie możliwości, które firma Microsoft opisano we wcześniejszych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="715b0-138">It mainly provides the catalog browsing capabilities that we described in earlier sections.</span></span>

<span data-ttu-id="715b0-139">Aplikacja używa bazy danych programu SQL Server do przechowywania katalogu.</span><span class="sxs-lookup"><span data-stu-id="715b0-139">The application uses a SQL Server database for the catalog storage.</span></span> <span data-ttu-id="715b0-140">W przypadku wdrożeń na podstawie kontenera ta wbudowanymi dostęp aplikacji tego samego magazynu danych jako aplikacji opartej na mikrousług.</span><span class="sxs-lookup"><span data-stu-id="715b0-140">In container-based deployments, this monolithic application can access the same data store as the microservices-based application.</span></span> <span data-ttu-id="715b0-141">Aplikacja jest skonfigurowana do uruchamiania programu SQL Server w kontenerze równolegle z wbudowanymi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="715b0-141">The application is configured to run SQL Server in a container alongside the monolithic application.</span></span> <span data-ttu-id="715b0-142">W środowisku produkcyjnym programu SQL Server może działać na maszynie wysokiej dostępności, poza hostów Docker.</span><span class="sxs-lookup"><span data-stu-id="715b0-142">In a production environment, SQL Server would run on a high-availability machine, outside of the Docker host.</span></span> <span data-ttu-id="715b0-143">Dla wygody w środowisku deweloperów lub testowym zaleca się programem SQL Server w jego własnej kontenera.</span><span class="sxs-lookup"><span data-stu-id="715b0-143">For convenience in a dev or test environment, we recommend running SQL Server in its own container.</span></span>

<span data-ttu-id="715b0-144">Funkcja początkowej ustawiona tylko umożliwia przeglądanie katalogu.</span><span class="sxs-lookup"><span data-stu-id="715b0-144">The initial feature set only enables browsing the catalog.</span></span> <span data-ttu-id="715b0-145">Aktualizacje umożliwiłyby pełny zestaw funkcji konteneryzowanych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="715b0-145">Updates would enable the full feature set of the containerized application.</span></span> <span data-ttu-id="715b0-146">A bardziej zaawansowane Architektura aplikacji sieci web wbudowanymi jest opisany w [aplikacji sieci Web ASP.NET architektura rozwiązań](https://aka.ms/webappebook) Książka elektroniczna i pokrewnych [eShopOnWeb przykładowej aplikacji](http://aka.ms/WebAppArchitecture), mimo że w takim przypadku nie działa na kontenery Docker ponieważ w tym scenariuszu skupiono się na projektowanie zwykłych witryn sieci web z platformy ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="715b0-146">A more advanced monolithic web application architecture is described in the [ASP.NET Web Application architecture practices](https://aka.ms/webappebook) e-book and related [eShopOnWeb sample application](http://aka.ms/WebAppArchitecture), although in that case it is not running on Docker containers because that scenario focuses on plain web development with ASP.NET Core.</span></span>

<span data-ttu-id="715b0-147">Jednak uproszczonej wersji dostępnej w eShopOnContainers (eShopWeb) uruchamia się w kontenerze Docker.</span><span class="sxs-lookup"><span data-stu-id="715b0-147">However, the simplified version available in eShopOnContainers (eShopWeb) runs in a Docker container.</span></span>

## <a name="docker-support"></a><span data-ttu-id="715b0-148">Obsługa docker</span><span class="sxs-lookup"><span data-stu-id="715b0-148">Docker support</span></span>

<span data-ttu-id="715b0-149">Projekt eShopOnWeb działa na .NET Core.</span><span class="sxs-lookup"><span data-stu-id="715b0-149">The eShopOnWeb project runs on .NET Core.</span></span> <span data-ttu-id="715b0-150">W związku z tym można go uruchomić w kontenerach opartych na systemie Linux albo systemem Windows.</span><span class="sxs-lookup"><span data-stu-id="715b0-150">Therefore, it can run in either Linux-based or Windows-based containers.</span></span> <span data-ttu-id="715b0-151">Uwaga dla wdrożenia Docker chcesz używać tego samego typu hosta dla programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="715b0-151">Note that for Docker deployment, you want to use the same host type for SQL Server.</span></span> <span data-ttu-id="715b0-152">Kontenery opartych na systemie Linux Zezwalaj na mniejsze zużycie i są preferowane.</span><span class="sxs-lookup"><span data-stu-id="715b0-152">Linux-based containers allow a smaller footprint and are preferred.</span></span>

<span data-ttu-id="715b0-153">Program Visual Studio udostępnia szablon projektu, który dodaje obsługę Docker do rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="715b0-153">Visual Studio provides a project template that adds support for Docker to a solution.</span></span> <span data-ttu-id="715b0-154">Kliknij prawym przyciskiem myszy projekt, kliknij przycisk **Dodaj** następuje **Obsługa Docker**.</span><span class="sxs-lookup"><span data-stu-id="715b0-154">You right-click the project, click **Add** followed by **Docker Support**.</span></span> <span data-ttu-id="715b0-155">Szablon dodaje plik Dockerfile do projektu, a nowy **rozwiązania docker compose** projektu, który zawiera plik docker-compose.yml początkowego.</span><span class="sxs-lookup"><span data-stu-id="715b0-155">The template adds a Dockerfile to your project, and a new **docker-compose** project that provides a starter docker-compose.yml file.</span></span> <span data-ttu-id="715b0-156">W tym kroku została już wykonana w projekcie eShopOnWeb pobrać z witryny GitHub.</span><span class="sxs-lookup"><span data-stu-id="715b0-156">This step has already been done in the eShopOnWeb project downloaded from GitHub.</span></span> <span data-ttu-id="715b0-157">Zobaczysz, że rozwiązanie zawiera **eShopOnWeb** projektu i **rozwiązania docker compose** projektu, jak pokazano w rysunek 6-1.</span><span class="sxs-lookup"><span data-stu-id="715b0-157">You will see that the solution contains the **eShopOnWeb** project and the **docker-compose** project as shown in Figure 6-1.</span></span>

![](./media/image1.png)

<span data-ttu-id="715b0-158">**Rysunek 6-1**.</span><span class="sxs-lookup"><span data-stu-id="715b0-158">**Figure 6-1**.</span></span> <span data-ttu-id="715b0-159">**Rozwiązania docker compose** projektu w aplikacji sieci web jednym kontenera</span><span class="sxs-lookup"><span data-stu-id="715b0-159">The **docker-compose** project in a single-container web application</span></span>

<span data-ttu-id="715b0-160">Te pliki są standard docker — pliki zgodne z żadnym projekcie rozwiązania Docker compose.</span><span class="sxs-lookup"><span data-stu-id="715b0-160">These files are standard docker-compose files, consistent with any Docker project.</span></span> <span data-ttu-id="715b0-161">Można używać ich z programem Visual Studio lub z wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="715b0-161">You can use them with Visual Studio or from the command line.</span></span> <span data-ttu-id="715b0-162">Ta aplikacja .NET Core, korzysta kontenery systemu Linux, również kodu, tworzenia i uruchamiania na komputerze Mac lub na komputerze z systemem Linux.</span><span class="sxs-lookup"><span data-stu-id="715b0-162">This application runs on .NET Core and uses Linux containers, so you can also code, build, and run on a Mac or on a Linux machine.</span></span>

<span data-ttu-id="715b0-163">Plik docker-compose.yml zawiera informacje o jakie obrazy do tworzenia i jakie kontenerów do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="715b0-163">The docker-compose.yml file contains information about what images to build and what containers to launch.</span></span> <span data-ttu-id="715b0-164">Szablony określ w jaki sposób utworzyć obraz eshopweb i uruchamianie kontenerów aplikacji.</span><span class="sxs-lookup"><span data-stu-id="715b0-164">The templates specify how to build the eshopweb image and launch the application’s containers.</span></span> <span data-ttu-id="715b0-165">Konieczne jest dodanie zależności w programie SQL Server w tym obrazie (na przykład mssql serwera linux), a usługą obrazu sql.data Docker skompilować i uruchomić tego kontenera.</span><span class="sxs-lookup"><span data-stu-id="715b0-165">You need to add the dependency on SQL Server by including an image for it (for example, mssql-server-linux), and a service for the sql.data image for Docker to build and launch that container.</span></span> <span data-ttu-id="715b0-166">W poniższym przykładzie przedstawiono te ustawienia:</span><span class="sxs-lookup"><span data-stu-id="715b0-166">These settings are shown in the following example:</span></span>

```yml
version: '2'

services:
  eshopweb:
    image: eshop/web
    build:
    context: ./eShopWeb
    dockerfile: Dockerfile
    depends_on:
      - sql.data

  sql.data:
    image: microsoft/mssql-server-linux
```

<span data-ttu-id="715b0-167">Zależy od\_w dyrektywie informuje Docker że obrazu eShopWeb zależy od sql.data obrazu.</span><span class="sxs-lookup"><span data-stu-id="715b0-167">The depends\_on directive tells Docker that the eShopWeb image depends on the sql.data image.</span></span> <span data-ttu-id="715b0-168">Poniższe wiersze, które są z instrukcjami, aby utworzyć obraz oznakowane sql.data przy użyciu obrazu microsoft/mssql-server-linux.</span><span class="sxs-lookup"><span data-stu-id="715b0-168">Lines below that are the instructions to build an image tagged sql.data using the microsoft/mssql-server-linux image.</span></span>

<span data-ttu-id="715b0-169">**Rozwiązania docker compose** projektu zawiera inne pliki docker-compose w węźle głównym docker-compose.yml do wskazywania stanu dotyczące tych plików.</span><span class="sxs-lookup"><span data-stu-id="715b0-169">The **docker-compose** project displays the other docker-compose files under the main docker-compose.yml node to provide a visual indication that these files are related.</span></span> <span data-ttu-id="715b0-170">Plik docker tworzą override.yml zawiera ustawienia dla obu usług, takich jak parametry połączenia i inne ustawienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="715b0-170">The docker-compose-override.yml file contains settings for both services, such as connection strings and other application settings.</span></span>

<span data-ttu-id="715b0-171">W poniższym przykładzie przedstawiono plik docker-compose.vs.debug.yml, który zawiera ustawienia używane na potrzeby debugowania w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="715b0-171">The following example shows the docker-compose.vs.debug.yml file, which contains settings used for debugging in Visual Studio.</span></span> <span data-ttu-id="715b0-172">W tym pliku obrazu eshopweb ma tag deweloperów, dołączone do niego.</span><span class="sxs-lookup"><span data-stu-id="715b0-172">In that file, the eshopweb image has the dev tag appended to it.</span></span> <span data-ttu-id="715b0-173">Czy pomaga oddzielić debugowania z wersji obrazów, aby nie przypadkowo wdrażać informacje debugowania w środowisku produkcyjnym:</span><span class="sxs-lookup"><span data-stu-id="715b0-173">That helps separate debug from release images so that you do not accidentally deploy the debug information to a production environment:</span></span>

```yml
version: '2'
  
services:
  eshopweb:
    image: eshop/web:dev
    build:
    args:
    source: ${DOCKER_BUILD_SOURCE}
    environment:
      - DOTNET_USE_POLLING_FILE_WATCHER=1
    volumes:
      - ./eShopWeb:/app
      - ~/.nuget/packages:/root/.nuget/packages:ro
      - ~/clrdbg:/clrdbg:ro
    entrypoint: tail -f /dev/null
    labels:
      - "com.microsoft.visualstudio.targetoperatingsystem=linux"
```

<span data-ttu-id="715b0-174">Ostatni plik dodany jest docker compose.ci.build.yml.</span><span class="sxs-lookup"><span data-stu-id="715b0-174">The last file added is docker-compose.ci.build.yml.</span></span> <span data-ttu-id="715b0-175">Czy można użyć w wierszu polecenia do tworzenia projektów z serwera konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="715b0-175">This would be used from the command line to build the project from a CI server.</span></span> <span data-ttu-id="715b0-176">Ten plik Redaguj uruchamia kontener Docker, który tworzy obrazy wymagane dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="715b0-176">This compose file starts a Docker container that builds the images needed for your application.</span></span> <span data-ttu-id="715b0-177">W poniższym przykładzie przedstawiono zawartość pliku docker compose.ci.build.yml.</span><span class="sxs-lookup"><span data-stu-id="715b0-177">The following example shows the contents of the docker-compose.ci.build.yml file.</span></span>

```yml
version: '2'
  
services:
  ci-build:
    image: microsoft/aspnetcore-build:latest
    volumes:
      - .:/src
    working_dir: /src
  command: /bin/bash -c "dotnet restore ./eShopWeb.sln && dotnet publish  ./eShopWeb.sln -c Release -o ./obj/Docker/publish"
```

<span data-ttu-id="715b0-178">**Uwaga**: począwszy od programu .NET Core 2.0 polecenia restore dotnet wykonywane automatycznie, gdy publikowanie dotnet jest wykonywana.</span><span class="sxs-lookup"><span data-stu-id="715b0-178">**Note**: Starting with .NET Core 2.0, the dotnet restore command executes automatically when dotnet publish is executed.</span></span>

<span data-ttu-id="715b0-179">Należy zauważyć, że obraz jest obrazem kompilacji platformy ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="715b0-179">Notice that the image is an ASP.NET Core build image.</span></span> <span data-ttu-id="715b0-180">Ten obraz zawiera zestawu SDK i kompilacji narzędzia do tworzenia aplikacji i utworzyć wymagane obrazy.</span><span class="sxs-lookup"><span data-stu-id="715b0-180">That image includes the SDK and build tools to build your application and create the required images.</span></span> <span data-ttu-id="715b0-181">Uruchomiona **rozwiązania docker compose** projektu przy użyciu tego pliku kontenera kompilacji jest uruchamiany z obrazu, a następnie tworzy obraz aplikacji, w tym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="715b0-181">Running the **docker-compose** project using this file starts the build container from the image, then builds your application’s image in that container.</span></span> <span data-ttu-id="715b0-182">Określ ten docker-utworzenie pliku jako część wiersza polecenia, aby skompilować aplikację w kontenerze Docker, a następnie uruchomić go.</span><span class="sxs-lookup"><span data-stu-id="715b0-182">You specify that docker-compose file as part of the command line to build your application in a Docker container, then launch it.</span></span>

<span data-ttu-id="715b0-183">W programie Visual Studio, wybierając można uruchomić aplikacji w kontenerach Docker **docker-tworzą** projekt jako projekt startowy, a następnie nacisnąć klawisze Ctrl + F5 (F5, aby debugować), jak w przypadku innych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="715b0-183">In Visual Studio, you can run your application in Docker containers by selecting the **docker-compose** project as the startup project, and then pressing Ctrl+F5 (F5 to debug), as you can with any other application.</span></span> <span data-ttu-id="715b0-184">Po rozpoczęciu **rozwiązania docker compose** projektu, działanie programu Visual Studio **rozwiązania docker compose** przy użyciu plik docker-compose.yml, plik docker-compose.override.yml i jedną docker compose.vs.\* pliki.</span><span class="sxs-lookup"><span data-stu-id="715b0-184">When you start the **docker-compose** project, Visual Studio runs **docker-compose** using the docker-compose.yml file, the docker-compose.override.yml file, and one of the docker-compose.vs.\* files.</span></span> <span data-ttu-id="715b0-185">Po uruchomieniu aplikacji, Visual Studio spowoduje uruchomienie przeglądarki dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="715b0-185">Once the application has started, Visual Studio launches the browser for you.</span></span>

<span data-ttu-id="715b0-186">Jeśli uruchamianie aplikacji w debugerze programu Visual Studio będzie Dołącz do uruchomionej aplikacji w Docker.</span><span class="sxs-lookup"><span data-stu-id="715b0-186">If you launch the application in the debugger, Visual Studio will attach to the running application in Docker.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="715b0-187">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="715b0-187">Troubleshooting</span></span>

<span data-ttu-id="715b0-188">W tej sekcji opisano kilka problemów, które mogą wystąpić podczas wykonywania kontenery lokalnie, a także sugeruje niektóre poprawki.</span><span class="sxs-lookup"><span data-stu-id="715b0-188">This section describes a few issues that might arise when your run containers locally and suggests some fixes.</span></span>

### <a name="stopping-docker-containers"></a><span data-ttu-id="715b0-189">Zatrzymywanie kontenery Docker</span><span class="sxs-lookup"><span data-stu-id="715b0-189">Stopping Docker containers</span></span> 

<span data-ttu-id="715b0-190">Po uruchomieniu aplikacji konteneryzowanych kontenery w dalszym ciągu działać po zatrzymaniu debugowania.</span><span class="sxs-lookup"><span data-stu-id="715b0-190">After you launch the containerized application, the containers continue to run, even after you have stopped debugging.</span></span> <span data-ttu-id="715b0-191">Polecenie ps docker można uruchomić z wiersza polecenia, aby wyświetlić kontenery, które są uruchomione.</span><span class="sxs-lookup"><span data-stu-id="715b0-191">You can run the docker ps command from the command line to see which containers are running.</span></span> <span data-ttu-id="715b0-192">Polecenie zatrzymania docker Zatrzymuje uruchomione kontenera, jak pokazano na rysunku 6-2.</span><span class="sxs-lookup"><span data-stu-id="715b0-192">The docker stop command stops a running container, as shown in Figure 6-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="715b0-193">**Rysunek 6-2**.</span><span class="sxs-lookup"><span data-stu-id="715b0-193">**Figure 6-2**.</span></span> <span data-ttu-id="715b0-194">Wyświetlanie i zatrzymywanie kontenery docker ps i docker zatrzymać polecenia interfejsu wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="715b0-194">Listing and stopping containers with the docker ps and docker stop CLI commands</span></span>

<span data-ttu-id="715b0-195">Konieczne może być Zatrzymaj uruchomione procesy, podczas przełączania się między różne konfiguracje.</span><span class="sxs-lookup"><span data-stu-id="715b0-195">You might need to stop running processes when you switch between different configurations.</span></span> <span data-ttu-id="715b0-196">W przeciwnym razie kontenera, w którym działa aplikacja sieci web używającej portu dla aplikacji (5106 w tym przykładzie).</span><span class="sxs-lookup"><span data-stu-id="715b0-196">Otherwise, the container that is running the web application is using the port for your application (5106 in this example).</span></span>

### <a name="adding-docker-to-your-projects"></a><span data-ttu-id="715b0-197">Dodawanie do projektów platformy Docker</span><span class="sxs-lookup"><span data-stu-id="715b0-197">Adding Docker to your projects</span></span>

<span data-ttu-id="715b0-198">Kreator dodaje obsługę Docker komunikuje się z uruchomionym procesem Docker.</span><span class="sxs-lookup"><span data-stu-id="715b0-198">The wizard that adds Docker support communicates with the running Docker process.</span></span> <span data-ttu-id="715b0-199">Kreator nie będzie działać poprawnie Docker nie jest uruchomiony podczas uruchamiania kreatora.</span><span class="sxs-lookup"><span data-stu-id="715b0-199">The wizard will not run correctly if Docker is not running when you start the wizard.</span></span> <span data-ttu-id="715b0-200">Ponadto Kreator sprawdza, czy bieżący wybór kontenera dodać poprawną obsługę Docker.</span><span class="sxs-lookup"><span data-stu-id="715b0-200">In addition, the wizard examines your current container choice to add the correct Docker support.</span></span> <span data-ttu-id="715b0-201">Aby dodać obsługę kontenery systemu Windows, należy uruchomić kreatora, gdy masz Docker z kontenerów systemu Windows skonfigurowane.</span><span class="sxs-lookup"><span data-stu-id="715b0-201">If you want to add support for Windows Containers, you need to run the wizard while you have Docker running with Windows Containers configured.</span></span> <span data-ttu-id="715b0-202">Jeśli chcesz dodać obsługę systemu Linux kontenerów, uruchom kreatora podczas Docker z kontenerów Linux skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="715b0-202">If you want to add support for Linux containers, run the wizard while you have Docker running with Linux containers configured.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="715b0-203">[Poprzednie] (.. / docker-application-development-process/docker-app-development-workflow.md) [dalej] (.. /containerize-NET-Framework-Applications/index.MD)</span><span class="sxs-lookup"><span data-stu-id="715b0-203">[Previous] (../docker-application-development-process/docker-app-development-workflow.md) [Next] (../containerize-net-framework-applications/index.md)</span></span>
