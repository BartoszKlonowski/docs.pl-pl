---
title: "Implementowanie oparty na zdarzeniach komunikacji między mikrousług (zdarzeń integracji)"
description: "Architektura Mikrousług .NET dla aplikacji .NET konteneryzowanych | Implementowanie oparty na zdarzeniach komunikacji między mikrousług (zdarzeń integracji)"
keywords: Docker, Microservices, ASP.NET, Container
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 12/11/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 50ab0be6b92304eee4bc46643c867ee2827fc805
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/19/2018
---
# <a name="implementing-event-based-communication-between-microservices-integration-events"></a><span data-ttu-id="fa032-104">Implementowanie oparty na zdarzeniach komunikacji między mikrousług (zdarzeń integracji)</span><span class="sxs-lookup"><span data-stu-id="fa032-104">Implementing event-based communication between microservices (integration events)</span></span>

<span data-ttu-id="fa032-105">Jak opisano wcześniej, gdy użytkownik korzysta z komunikacji oparty na zdarzeniach, mikrousługi publikuje zdarzenia zauważalne najważniejsza, takie jak kiedy aktualizuje jednostki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="fa032-105">As described earlier, when you use event-based communication, a microservice publishes an event when something notable happens, such as when it updates a business entity.</span></span> <span data-ttu-id="fa032-106">Inne mikrousług subskrybować tych zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="fa032-106">Other microservices subscribe to those events.</span></span> <span data-ttu-id="fa032-107">Po mikrousługi odbiera zdarzenia, go zaktualizować własną jednostki biznesowe, które może prowadzić do zdarzeń publikowana.</span><span class="sxs-lookup"><span data-stu-id="fa032-107">When a microservice receives an event, it can update its own business entities, which might lead to more events being published.</span></span> <span data-ttu-id="fa032-108">Ten system publikowania/subskrypcji zwykle odbywa się przy użyciu implementacji magistrali zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="fa032-108">This publish/subscribe system is usually performed by using an implementation of an event bus.</span></span> <span data-ttu-id="fa032-109">Magistrala zdarzeń mogą służyć jako interfejs przy użyciu interfejsu API potrzebne umożliwia subskrybowanie i anulowanie subskrypcji zdarzeń i publikowanie zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="fa032-109">The event bus can be designed as an interface with the API needed to subscribe and unsubscribe to events and to publish events.</span></span> <span data-ttu-id="fa032-110">Może mieć także co najmniej jeden implementacje oparte na wszelkie komunikacji między procesami lub obsługi wiadomości, takie jak kolejki wiadomości lub obsługującego komunikacji asynchronicznej i modelu publikowania/subskrypcji usługi service bus.</span><span class="sxs-lookup"><span data-stu-id="fa032-110">It can also have one or more implementations based on any inter-process or messaging communication, such as a messaging queue or a service bus that supports asynchronous communication and a publish/subscribe model.</span></span>

<span data-ttu-id="fa032-111">Służy zdarzenia do zaimplementowania transakcje biznesowe, które obejmują wiele usług zapewniający spójność ostateczna między tymi usługami.</span><span class="sxs-lookup"><span data-stu-id="fa032-111">You can use events to implement business transactions that span multiple services, which gives you eventual consistency between those services.</span></span> <span data-ttu-id="fa032-112">Po pewnym czasie spójne transakcji składa się z szeregu rozproszonej akcji.</span><span class="sxs-lookup"><span data-stu-id="fa032-112">An eventually consistent transaction consists of a series of distributed actions.</span></span> <span data-ttu-id="fa032-113">W każdej akcji mikrousługi aktualizuje jednostek biznesowych i publikuje zdarzenie, które wyzwala następnej akcji.</span><span class="sxs-lookup"><span data-stu-id="fa032-113">At each action, the microservice updates a business entity and publishes an event that triggers the next action.</span></span>

![](./media/image19.PNG)

<span data-ttu-id="fa032-114">**Rysunek 8-18**.</span><span class="sxs-lookup"><span data-stu-id="fa032-114">**Figure 8-18**.</span></span> <span data-ttu-id="fa032-115">Sterowane zdarzeniami komunikacji oparte na magistrali zdarzeń</span><span class="sxs-lookup"><span data-stu-id="fa032-115">Event-driven communication based on an event bus</span></span>

<span data-ttu-id="fa032-116">W tej sekcji opisano, jak można wdrożyć ten typ komunikacji z platformą .NET przy użyciu interfejsem magistrali zdarzeń rodzajowych, jak pokazano w rysunek 8-18.</span><span class="sxs-lookup"><span data-stu-id="fa032-116">This section describes how you can implement this type of communication with .NET by using a generic event bus interface, as shown in Figure 8-18.</span></span> <span data-ttu-id="fa032-117">Istnieje wiele potencjalnych implementacji, każdy przy użyciu różnych technologii lub infrastruktury, takich jak RabbitMQ, Azure Service Bus lub innych firm typu open source lub komercyjnego usługi service bus.</span><span class="sxs-lookup"><span data-stu-id="fa032-117">There are multiple potential implementations, each using a different technology or infrastructure such as RabbitMQ, Azure Service Bus, or any other third-party open source or commercial service bus.</span></span>

## <a name="using-message-brokers-and-services-buses-for-production-systems"></a><span data-ttu-id="fa032-118">Za pomocą magistrali usług i brokerzy komunikat dla systemów produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="fa032-118">Using message brokers and services buses for production systems</span></span>

<span data-ttu-id="fa032-119">Jak wspomniano w sekcji architektury, są dostępne z wielu technologii obsługi komunikatów dla implementacji magistrali sieci zdarzenia abstrakcyjnego.</span><span class="sxs-lookup"><span data-stu-id="fa032-119">As noted in the architecture section, you can choose from multiple messaging technologies for implementing your abstract event bus.</span></span> <span data-ttu-id="fa032-120">Ale technologie te są na różnych poziomach.</span><span class="sxs-lookup"><span data-stu-id="fa032-120">But these technologies are at different levels.</span></span> <span data-ttu-id="fa032-121">Na przykład RabbitMQ, transportu brokera obsługi komunikatów, jest na poziomie niższym niż komercyjnych produkty, takie jak usługi Azure Service Bus, NServiceBus, MassTransit lub Brighter.</span><span class="sxs-lookup"><span data-stu-id="fa032-121">For instance, RabbitMQ, a messaging broker transport, is at a lower level than commercial products like Azure Service Bus, NServiceBus, MassTransit, or Brighter.</span></span> <span data-ttu-id="fa032-122">Większość tych produktów może pracować na górze RabbitMQ lub usługi Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fa032-122">Most of these products can work on top of either RabbitMQ or Azure Service Bus.</span></span> <span data-ttu-id="fa032-123">Wybór produktu zależy od tego, jak wiele funkcji i skalowalność ile out-of--box potrzebne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="fa032-123">Your choice of product depends on how many features and how much out-of-the-box scalability you need for your application.</span></span>

<span data-ttu-id="fa032-124">Wykonywania tylko zdarzenia magistrali z koncepcji dla swojego środowiska programowania, jak próbki eShopOnContainers prostych implementacji u góry RabbitMQ uruchomione jako kontener może być wystarczającej ilości.</span><span class="sxs-lookup"><span data-stu-id="fa032-124">For implementing just an event bus proof-of-concept for your development environment, as in the eShopOnContainers sample, a simple implementation on top of RabbitMQ running as a container might be enough.</span></span> <span data-ttu-id="fa032-125">Nawet w przypadku krytycznym i systemów produkcyjnych, które wymagają wysokiej skalowalności, można ocenić i używania usługi Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="fa032-125">But for mission-critical and production systems that need high scalability, you might want to evaluate and use Azure Service Bus.</span></span>

<span data-ttu-id="fa032-126">Jeśli wymagają wysokiego poziomu obiektów abstrakcyjnych i bardziej rozbudowane funkcje, takie jak [Sagas](https://docs.particular.net/nservicebus/sagas/) dla procesów długotrwałe, które należy rozproszonej programowanie magistrali łatwiejsze, inne usługi handlowych i open source, takie jak NServiceBus, MassTransit, i Brighter są warto oceny.</span><span class="sxs-lookup"><span data-stu-id="fa032-126">If you require high-level abstractions and richer features like [Sagas](https://docs.particular.net/nservicebus/sagas/) for long-running processes that make distributed development easier, other commercial and open-source service buses like NServiceBus, MassTransit, and Brighter are worth evaluating.</span></span> <span data-ttu-id="fa032-127">W takim przypadku obiektów abstrakcyjnych i interfejs API do używania zazwyczaj będzie bezpośrednio te udostępniane przez te magistrali wysokiego poziomu usługi, zamiast własnych obiektów abstrakcyjnych (takich jak [abstrakcje magistrali zdarzenie proste w eShopOnContainers](https://github.com/dotnet-architecture/eShopOnContainers/blob/dev/src/BuildingBlocks/EventBus/EventBus/Abstractions/IEventBus.cs)).</span><span class="sxs-lookup"><span data-stu-id="fa032-127">In this case, the abstractions and API to use would usually be directly the ones provided by those high-level service buses instead of your own abstractions (like the [simple event bus abstractions provided at eShopOnContainers](https://github.com/dotnet-architecture/eShopOnContainers/blob/dev/src/BuildingBlocks/EventBus/EventBus/Abstractions/IEventBus.cs)).</span></span> <span data-ttu-id="fa032-128">Dla tej sprawy badania [rozwidlone eShopOnContainers przy użyciu NServiceBus](http://go.particular.net/eShopOnContainers) (dodatkowe pochodnej przykład implementowane przez konkretnego oprogramowania)</span><span class="sxs-lookup"><span data-stu-id="fa032-128">For that matter, you can research the [forked eShopOnContainers using NServiceBus](http://go.particular.net/eShopOnContainers) (additional derived sample implemented by Particular Software)</span></span>

<span data-ttu-id="fa032-129">Oczywiście można zawsze tworzenie własnych funkcji magistrali usług na niższym poziomie technologii, takich jak RabbitMQ i Docker, ale pracy wymaganej do "reinvent koła" może być zbyt kosztowne stosowania niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="fa032-129">Of course, you could always build your own service bus features on top of lower-level technologies like RabbitMQ and Docker, but the work needed to “reinvent the wheel” might be too costly for a custom enterprise application.</span></span>

## <a name="integration-events"></a><span data-ttu-id="fa032-130">Zdarzenia integracji</span><span class="sxs-lookup"><span data-stu-id="fa032-130">Integration events</span></span>

<span data-ttu-id="fa032-131">Integracja zdarzenia są używane do pobierania stanu domeny synchronizację wielu mikrousług lub systemami zewnętrznymi.</span><span class="sxs-lookup"><span data-stu-id="fa032-131">Integration events are used for bringing domain state in sync across multiple microservices or external systems.</span></span> <span data-ttu-id="fa032-132">Jest to realizowane przez publikowanie zdarzeń integracji poza mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="fa032-132">This is done by publishing integration events outside the microservice.</span></span> <span data-ttu-id="fa032-133">Gdy zdarzenie zostanie opublikowany do wielu mikrousług odbiornika (na tyle mikrousług jako subskrybuje zdarzenia integracji), program obsługi zdarzeń odpowiednie w każdym mikrousługi odbiornika obsługuje zdarzenie.</span><span class="sxs-lookup"><span data-stu-id="fa032-133">When an event is published to multiple receiver microservices (to as many microservices as are subscribed to the integration event), the appropriate event handler in each receiver microservice handles the event.</span></span>

<span data-ttu-id="fa032-134">Zdarzenie integracji jest zasadniczo klasy używane do przechowywania danych, jak w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="fa032-134">An integration event is basically a data-holding class, as in the following example:</span></span>

```csharp
public class ProductPriceChangedIntegrationEvent : IntegrationEvent
{
    public int ProductId { get; private set; }
    public decimal NewPrice { get; private set; }
    public decimal OldPrice { get; private set; }

    public ProductPriceChangedIntegrationEvent(int productId, decimal newPrice,
        decimal oldPrice)
    {
        ProductId = productId;
        NewPrice = newPrice;
        OldPrice = oldPrice;
    }
}
```

<span data-ttu-id="fa032-135">Zdarzenia integracji można zdefiniować na poziomie aplikacji z każdym mikrousługi, są one całkowicie niezależna od innych mikrousług w sposób można porównywać jak ViewModels są definiowane w serwera i klienta.</span><span class="sxs-lookup"><span data-stu-id="fa032-135">The integration events can be defined at the application level of each microservice, so they are decoupled from other microservices, in a way comparable to how ViewModels are defined in the server and client.</span></span> <span data-ttu-id="fa032-136">Co nie jest zalecane jest udostępnianie wspólnej biblioteki zdarzeń integracji między wieloma mikrousług; operacją może być sprzężenia tych mikrousług z biblioteki pojedyncze zdarzenie definicji danych.</span><span class="sxs-lookup"><span data-stu-id="fa032-136">What is not recommended is sharing a common integration events library across multiple microservices; doing that would be coupling those microservices with a single event definition data library.</span></span> <span data-ttu-id="fa032-137">Czy chcesz to zrobić na takie same powodów, dla których nie chcesz udostępniać wspólnego modelu domeny między wieloma mikrousług: mikrousług musi być całkowicie autonomicznego.</span><span class="sxs-lookup"><span data-stu-id="fa032-137">You do not want to do that for the same reasons that you do not want to share a common domain model across multiple microservices: microservices must be completely autonomous.</span></span>

<span data-ttu-id="fa032-138">Istnieje tylko kilka rodzajów bibliotek, które powinny współużytkować między mikrousług.</span><span class="sxs-lookup"><span data-stu-id="fa032-138">There are only a few kinds of libraries you should share across microservices.</span></span> <span data-ttu-id="fa032-139">Jeden z nich jest bibliotek, które są blokami końcowego aplikacji, takie jak [interfejs API klienta magistrali zdarzeń](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/BuildingBlocks/EventBus)w eShopOnContainers.</span><span class="sxs-lookup"><span data-stu-id="fa032-139">One is libraries that are final application blocks, like the [Event Bus client API](https://github.com/dotnet-architecture/eShopOnContainers/tree/master/src/BuildingBlocks/EventBus), as in eShopOnContainers.</span></span> <span data-ttu-id="fa032-140">Inny jest bibliotek wchodzących w skład narzędzi, które również zostaną udostępnione jako części NuGet, takich jak serializatorów JSON.</span><span class="sxs-lookup"><span data-stu-id="fa032-140">Another is libraries that constitute tools that could also be shared as NuGet components, like JSON serializers.</span></span>

## <a name="the-event-bus"></a><span data-ttu-id="fa032-141">Magistrala zdarzeń</span><span class="sxs-lookup"><span data-stu-id="fa032-141">The event bus</span></span>

<span data-ttu-id="fa032-142">Magistrala zdarzeń umożliwia publikowania/subskrybowania — styl komunikacji między mikrousług bez konieczności składniki jawnie mieć świadomość, jak pokazano w rysunek 8-19.</span><span class="sxs-lookup"><span data-stu-id="fa032-142">An event bus allows publish/subscribe-style communication between microservices without requiring the components to explicitly be aware of each other, as shown in Figure 8-19.</span></span>

![](./media/image20.png)

<span data-ttu-id="fa032-143">**Rysunek 8-19**.</span><span class="sxs-lookup"><span data-stu-id="fa032-143">**Figure 8-19**.</span></span> <span data-ttu-id="fa032-144">Podstawy z magistralą zdarzeń publikowania/subskrypcji</span><span class="sxs-lookup"><span data-stu-id="fa032-144">Publish/subscribe basics with an event bus</span></span>

<span data-ttu-id="fa032-145">Magistrala zdarzenia jest powiązany z wzorzec obserwatora i opublikuj-subskrypcji wzorzec.</span><span class="sxs-lookup"><span data-stu-id="fa032-145">The event bus is related to the Observer pattern and the publish-subscribe pattern.</span></span>

### <a name="observer-pattern"></a><span data-ttu-id="fa032-146">Wzorzec obserwatora</span><span class="sxs-lookup"><span data-stu-id="fa032-146">Observer pattern</span></span>

<span data-ttu-id="fa032-147">W [wzorzec obserwatora](https://en.wikipedia.org/wiki/Observer_pattern), obiektu podstawowego (nazywane według) powiadamia innych zainteresowanych obiektów (znany jako obserwatorzy) istotnych informacji (zdarzeń).</span><span class="sxs-lookup"><span data-stu-id="fa032-147">In the [Observer pattern](https://en.wikipedia.org/wiki/Observer_pattern), your primary object (known as the Observable) notifies other interested objects (known as Observers) with relevant information (events).</span></span>

### <a name="publish-subscribe-pubsub-pattern"></a><span data-ttu-id="fa032-148">Wzorzec publikowania / subskrypcji (Pub/Sub)</span><span class="sxs-lookup"><span data-stu-id="fa032-148">Publish-subscribe (Pub/Sub) pattern</span></span> 

<span data-ttu-id="fa032-149">Celem [wzorzec Pub/Sub](https://msdn.microsoft.com/library/ff649664.aspx) jest taka sama jak wzorzec obserwatora: chcesz powiadomić inne usługi, gdy określone zdarzenia została wykonana.</span><span class="sxs-lookup"><span data-stu-id="fa032-149">The purpose of the [Pub/Sub pattern](https://msdn.microsoft.com/library/ff649664.aspx) is the same as the Observer pattern: you want to notify other services when certain events take place.</span></span> <span data-ttu-id="fa032-150">Występuje istotną różnicą między wzorce obserwatora i Pub/Sub.</span><span class="sxs-lookup"><span data-stu-id="fa032-150">But there is an important difference between the Observer and Pub/Sub patterns.</span></span> <span data-ttu-id="fa032-151">We wzorcu obserwatora emisji jest wykonywane bezpośrednio z według do obserwatorów, dzięki czemu "znane" siebie nawzajem.</span><span class="sxs-lookup"><span data-stu-id="fa032-151">In the observer pattern, the broadcast is performed directly from the observable to the observers, so they “know” each other.</span></span> <span data-ttu-id="fa032-152">Podczas korzystania z wzorca Pub/Sub, występuje trzeci składnik o nazwie broker lub komunikatów brokera lub zdarzenia magistrali, znaną wydawcy i subskrybenta.</span><span class="sxs-lookup"><span data-stu-id="fa032-152">But when using a Pub/Sub pattern, there is a third component, called broker or message broker or event bus, which is known by both the publisher and subscriber.</span></span> <span data-ttu-id="fa032-153">W związku z tym podczas używania wzorca Pub/Sub wydawcy i subskrybentów są dokładnie całkowicie niezależna dzięki użyciu brokera magistrali lub komunikat zdarzenia opisane powyżej.</span><span class="sxs-lookup"><span data-stu-id="fa032-153">Therefore, when using the Pub/Sub pattern the publisher and the subscribers are precisely decoupled thanks to the mentioned event bus or message broker.</span></span>

### <a name="the-middleman-or-event-bus"></a><span data-ttu-id="fa032-154">Magistrala pośredników lub zdarzenia</span><span class="sxs-lookup"><span data-stu-id="fa032-154">The middleman or event bus</span></span> 

<span data-ttu-id="fa032-155">Jak uzyskać anonimowość między wydawcy i subskrybenta?</span><span class="sxs-lookup"><span data-stu-id="fa032-155">How do you achieve anonymity between publisher and subscriber?</span></span> <span data-ttu-id="fa032-156">Łatwo jest let pośredników zajmie się całej komunikacji.</span><span class="sxs-lookup"><span data-stu-id="fa032-156">An easy way is let a middleman take care of all the communication.</span></span> <span data-ttu-id="fa032-157">Magistrali zdarzeń jest jedną z takich pośredników.</span><span class="sxs-lookup"><span data-stu-id="fa032-157">An event bus is one such middleman.</span></span>

<span data-ttu-id="fa032-158">Magistrala zdarzeń zazwyczaj składa się z dwóch części:</span><span class="sxs-lookup"><span data-stu-id="fa032-158">An event bus is typically composed of two parts:</span></span>

-   <span data-ttu-id="fa032-159">Abstrakcja lub interfejs.</span><span class="sxs-lookup"><span data-stu-id="fa032-159">The abstraction or interface.</span></span>

-   <span data-ttu-id="fa032-160">Co najmniej jeden implementacji.</span><span class="sxs-lookup"><span data-stu-id="fa032-160">One or more implementations.</span></span>

<span data-ttu-id="fa032-161">W rysunek 8-19 widać sposób, z punktu widzenia aplikacji, magistrali zdarzeń ma więcej niż kanał Pub/Sub.</span><span class="sxs-lookup"><span data-stu-id="fa032-161">In Figure 8-19 you can see how, from an application point of view, the event bus is nothing more than a Pub/Sub channel.</span></span> <span data-ttu-id="fa032-162">Sposób wykonania tej komunikacji asynchronicznej może się różnić.</span><span class="sxs-lookup"><span data-stu-id="fa032-162">The way you implement this asynchronous communication can vary.</span></span> <span data-ttu-id="fa032-163">Dzięki czemu można wymienić między nimi, w zależności od wymagań środowiska (na przykład produkcyjnym i środowisk deweloperskich) może mieć wiele implementacji.</span><span class="sxs-lookup"><span data-stu-id="fa032-163">It can have multiple implementations so that you can swap between them, depending on the environment requirements (for example, production versus development environments).</span></span>

<span data-ttu-id="fa032-164">W rysunek 8-20 wyświetlane abstrakcję magistrali zdarzenia o wiele implementacji oparte na infrastrukturze technologii, takich jak RabbitMQ, usługi Azure Service Bus lub innych zdarzeń/komunikatów brokera komunikatów.</span><span class="sxs-lookup"><span data-stu-id="fa032-164">In Figure 8-20 you can see an abstraction of an event bus with multiple implementations based on infrastructure messaging technologies like RabbitMQ, Azure Service Bus, or other event/message broker.</span></span> 

![](./media/image21.png)

<span data-ttu-id="fa032-165">**Rysunek 8 - 20.**</span><span class="sxs-lookup"><span data-stu-id="fa032-165">**Figure 8- 20.**</span></span> <span data-ttu-id="fa032-166">Wiele implementacji magistrali zdarzeń</span><span class="sxs-lookup"><span data-stu-id="fa032-166">Multiple implementations of an event bus</span></span>

<span data-ttu-id="fa032-167">Jednak i jak wspomniano wcześniej za pomocą własnych obiektów abstrakcyjnych (interfejsu zdarzenia magistrali) jest prawidłowa, tylko wtedy, gdy potrzebujesz funkcji magistrali podstawowego zdarzenia obsługiwane przez użytkownika obiekty abstrakcyjne.</span><span class="sxs-lookup"><span data-stu-id="fa032-167">However, and as mentioned previously, using your own abstractions (the event bus interface) is good only if you need basic event bus features supported by your abstractions.</span></span> <span data-ttu-id="fa032-168">Jeśli potrzebujesz bardziej rozbudowane funkcje magistrali usług, prawdopodobnie należy używać interfejsu API i abstrakcje pochodzącymi z preferowanych komercyjnych usługi service bus zamiast własnych obiektów abstrakcyjnych.</span><span class="sxs-lookup"><span data-stu-id="fa032-168">If you need richer service bus features, you should probably use the API and abstractions provided by your preferred commercial service bus instead of your own abstractions.</span></span> 

### <a name="defining-an-event-bus-interface"></a><span data-ttu-id="fa032-169">Definiowanie interfejsu magistrali zdarzeń</span><span class="sxs-lookup"><span data-stu-id="fa032-169">Defining an event bus interface</span></span>

<span data-ttu-id="fa032-170">Zacznijmy możliwe implementacji dla celów eksploracji i niektóre kod implementacji interfejsu zdarzenia magistrali.</span><span class="sxs-lookup"><span data-stu-id="fa032-170">Let’s start with some implementation code for the event bus interface and possible implementations for exploration purposes.</span></span> <span data-ttu-id="fa032-171">Interfejs powinna być rodzajowa i proste, jak interfejsu.</span><span class="sxs-lookup"><span data-stu-id="fa032-171">The interface should be generic and straightforward, as in the following interface.</span></span>

```csharp
public interface IEventBus
{
    void Publish(IntegrationEvent @event);

    void Subscribe<T, TH>()
        where T : IntegrationEvent
        where TH : IIntegrationEventHandler<T>;

    void SubscribeDynamic<TH>(string eventName)
        where TH : IDynamicIntegrationEventHandler;

    void UnsubscribeDynamic<TH>(string eventName)
        where TH : IDynamicIntegrationEventHandler;

    void Unsubscribe<T, TH>()
        where TH : IIntegrationEventHandler<T>
        where T : IntegrationEvent;
}
```

<span data-ttu-id="fa032-172">`Publish` Metoda jest prosta.</span><span class="sxs-lookup"><span data-stu-id="fa032-172">The `Publish` method is straightforward.</span></span> <span data-ttu-id="fa032-173">Magistrala zdarzeń będzie emisji zdarzeń integracji przekazanego do dowolnego mikrousługi lub nawet aplikacji zewnętrznych, subskrybowane dla tego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="fa032-173">The event bus will broadcast the integration event passed to it to any microservice, or even an external application, subscribed to that event.</span></span> <span data-ttu-id="fa032-174">Ta metoda jest używana przez mikrousługi, która publikuje zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="fa032-174">This method is used by the microservice that is publishing the event.</span></span>

<span data-ttu-id="fa032-175">`Subscribe` Metody (może mieć wielu implementacji w zależności od argumentów) są używane przez mikrousług, który chcesz otrzymywać zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="fa032-175">The `Subscribe` methods (you can have several implementations depending on the arguments) are used by the microservices that want to receive events.</span></span> <span data-ttu-id="fa032-176">Ta metoda ma dwa argumenty.</span><span class="sxs-lookup"><span data-stu-id="fa032-176">This method has two arguments.</span></span> <span data-ttu-id="fa032-177">Pierwsza to zdarzenie integracji subskrybować (`IntegrationEvent`).</span><span class="sxs-lookup"><span data-stu-id="fa032-177">The first is the integration event to subscribe to (`IntegrationEvent`).</span></span> <span data-ttu-id="fa032-178">Drugi argument jest integracja zdarzenia obsługi (lub metoda wywołania zwrotnego), o nazwie `IIntegrationEventHandler<T>`, która zostanie wykonana po mikrousługi odbiornik pobiera ten komunikat o zdarzeniu integracji.</span><span class="sxs-lookup"><span data-stu-id="fa032-178">The second argument is the integration event handler (or callback method), named `IIntegrationEventHandler<T>`, to be executed when the receiver microservice gets that integration event message.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="fa032-179">[Previous] (database-server-container.md) [Next] (rabbitmq-event-bus-development-test-environment.md)</span><span class="sxs-lookup"><span data-stu-id="fa032-179">[Previous] (database-server-container.md) [Next] (rabbitmq-event-bus-development-test-environment.md)</span></span>
