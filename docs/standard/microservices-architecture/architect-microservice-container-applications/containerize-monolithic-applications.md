---
title: Konteneryzowania aplikacji monolitycznych
description: Umieszczania aplikacji monolitycznych w kontenerze, ale nie od razu korzystać z architektury mikrousług, ma wdrożenia ważne korzyści, które mogą być natychmiast dostarczane.
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/20/2018
ms.openlocfilehash: d1de4c4beb8c60aa543e5c71243d93b83fe52072
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/10/2018
ms.locfileid: "53130910"
---
# <a name="containerizing-monolithic-applications"></a><span data-ttu-id="d8e99-103">Konteneryzowania aplikacji monolitycznych</span><span class="sxs-lookup"><span data-stu-id="d8e99-103">Containerizing monolithic applications</span></span>

<span data-ttu-id="d8e99-104">Możesz chcieć utworzyć pojedynczą, monolithically wdrożonej w sieci web aplikacji lub usługi i wdrożyć go jako kontener.</span><span class="sxs-lookup"><span data-stu-id="d8e99-104">You might want to build a single, monolithically deployed web application or service and deploy it as a container.</span></span> <span data-ttu-id="d8e99-105">Sama aplikacja nie może być wewnętrznie monolityczne, ale mają strukturę jako kilka bibliotek, składników lub nawet warstwy (warstwa aplikacji, warstwa domeny, Warstwa dostępu do danych itp.).</span><span class="sxs-lookup"><span data-stu-id="d8e99-105">The application itself might not be internally monolithic, but structured as several libraries, components, or even layers (application layer, domain layer, data-access layer, etc.).</span></span> <span data-ttu-id="d8e99-106">Zewnętrznie, jest jednak jeden kontener — jeden proces, aplikacji sieci web jednej lub jednej usługi.</span><span class="sxs-lookup"><span data-stu-id="d8e99-106">Externally, however, it's a single container—a single process, a single web application, or a single service.</span></span>

<span data-ttu-id="d8e99-107">Aby zarządzać tym modelu, możesz wdrożyć jeden kontener, do reprezentowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e99-107">To manage this model, you deploy a single container to represent the application.</span></span> <span data-ttu-id="d8e99-108">Aby zwiększyć pojemność, możesz skalować w poziomie, oznacza to, wystarczy dodać większej liczby kopii z modułem równoważenia obciążenia z przodu.</span><span class="sxs-lookup"><span data-stu-id="d8e99-108">To increase capacity, you scale out, that is, just add more copies with a load balancer in front.</span></span> <span data-ttu-id="d8e99-109">Prostotę pochodzi z zarządzania pojedyncze wdrożenie w ramach jednego kontenera lub maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="d8e99-109">The simplicity comes from managing a single deployment in a single container or VM.</span></span>

![Konteneryzowanych aplikacji monolitycznej ma większości jej funkcji w obrębie jednego kontenera, za pomocą wewnętrznego warstwy lub bibliotek, i można skalować w poziomie przez Sklonowanie kontener na wielu serwerach lub maszynach wirtualnych](./media/image1.png)

<span data-ttu-id="d8e99-111">**Rysunek 4-1**.</span><span class="sxs-lookup"><span data-stu-id="d8e99-111">**Figure 4-1**.</span></span> <span data-ttu-id="d8e99-112">Przykład architektura konteneryzowanych aplikacji monolitycznej</span><span class="sxs-lookup"><span data-stu-id="d8e99-112">Example of the architecture of a containerized monolithic application</span></span>

<span data-ttu-id="d8e99-113">Wiele składników, bibliotek lub wewnętrzny warstwy może zawierać w każdego kontenera zgodnie z opisami w rysunek 4-1.</span><span class="sxs-lookup"><span data-stu-id="d8e99-113">You can include multiple components, libraries, or internal layers in each container, as illustrated in Figure 4-1.</span></span> <span data-ttu-id="d8e99-114">Jednak ten wzorzec monolityczne może powodować konflikt z zasadą kontenera "kontener jest jedną z rzeczy i zrobi to w jednym procesie", ale może być ok w niektórych przypadkach.</span><span class="sxs-lookup"><span data-stu-id="d8e99-114">However, this monolithic pattern might conflict with the container principle "a container does one thing, and does it in one process", but might be ok for some cases.</span></span>

<span data-ttu-id="d8e99-115">Wadą tego podejścia staje się oczywiste, gdy aplikacja powiększa się w wymaganiem go do skalowania.</span><span class="sxs-lookup"><span data-stu-id="d8e99-115">The downside of this approach becomes evident if the application grows, requiring it to scale.</span></span> <span data-ttu-id="d8e99-116">Jeśli można skalować w całej aplikacji, tak naprawdę nie problem.</span><span class="sxs-lookup"><span data-stu-id="d8e99-116">If the entire application can scale, it isn't really a problem.</span></span> <span data-ttu-id="d8e99-117">Jednak w większości przypadków kilka części aplikacji są punkty urządzenie rozruchowe, że wymagających skalowania, podczas gdy inne składniki są używane mniejsze.</span><span class="sxs-lookup"><span data-stu-id="d8e99-117">However, in most cases, just a few parts of the application are the choke points that requiring scaling, while other components are used less.</span></span>

<span data-ttu-id="d8e99-118">Na przykład w aplikacji typowe handlu elektronicznego, prawdopodobnie musisz skalować podsystemu informacji produktu, ponieważ wiele większej liczby klientów, przeglądanie produktów niż je zakupić.</span><span class="sxs-lookup"><span data-stu-id="d8e99-118">For example, in a typical e-commerce application, you likely need to scale the product information subsystem, because many more customers browse products than purchase them.</span></span> <span data-ttu-id="d8e99-119">Większej liczby klientów użyj koszyka, niż korzystanie z potoku płatności.</span><span class="sxs-lookup"><span data-stu-id="d8e99-119">More customers use their basket than use the payment pipeline.</span></span> <span data-ttu-id="d8e99-120">Dodaj komentarze lub mniejszej liczby klientów, w którym zostanie wyświetlanie ich historii zakupów.</span><span class="sxs-lookup"><span data-stu-id="d8e99-120">Fewer customers add comments or view their purchase history.</span></span> <span data-ttu-id="d8e99-121">I może mieć tylko niewielki podzbiór pracowników, którzy muszą zarządzać zawartość i kampanii marketingowych.</span><span class="sxs-lookup"><span data-stu-id="d8e99-121">And you might have only a handful of employees, that need to manage the content and marketing campaigns.</span></span> <span data-ttu-id="d8e99-122">Skala monolityczny projekt cały kod dla tych różnych zadań jest wdrożona wiele razy i skalowane w tej samej klasy korporacyjnej.</span><span class="sxs-lookup"><span data-stu-id="d8e99-122">If you scale the monolithic design, all the code for these different tasks is deployed multiple times and scaled at the same grade.</span></span>

<span data-ttu-id="d8e99-123">Istnieje wiele sposobów skalowania duplikatów aplikacji w poziomie, dzielenie różnych obszarów aplikacji i partycjonowania podobne koncepcji biznesowych lub danych.</span><span class="sxs-lookup"><span data-stu-id="d8e99-123">There are multiple ways to scale an application-horizontal duplication, splitting different areas of the application, and partitioning similar business concepts or data.</span></span> <span data-ttu-id="d8e99-124">Jednak oprócz problem skalowania wszystkie składniki zmiany pojedynczego składnika wymagają pełne ponowne przetestowanie całej aplikacji i pełne ponowne wdrożenie wszystkich wystąpień.</span><span class="sxs-lookup"><span data-stu-id="d8e99-124">But, in addition to the problem of scaling all components, changes to a single component require complete retesting of the entire application, and a complete redeployment of all the instances.</span></span>

<span data-ttu-id="d8e99-125">Podejścia monolitycznego jest jednak typowy, ponieważ rozwoju aplikacji jest początkowo łatwiejsze niż w przypadku metod mikrousług.</span><span class="sxs-lookup"><span data-stu-id="d8e99-125">However, the monolithic approach is common, because the development of the application is initially easier than for microservices approaches.</span></span> <span data-ttu-id="d8e99-126">W związku z tym w wielu organizacjach programować przy użyciu tego podejścia architektury.</span><span class="sxs-lookup"><span data-stu-id="d8e99-126">Thus, many organizations develop using this architectural approach.</span></span> <span data-ttu-id="d8e99-127">Chociaż w niektórych organizacjach mieli dobra wystarczająco dużo wyników innych osiągnięcia limitów.</span><span class="sxs-lookup"><span data-stu-id="d8e99-127">While some organizations have had good enough results, others are hitting limits.</span></span> <span data-ttu-id="d8e99-128">W wielu organizacjach zaprojektowane swoich aplikacji przy użyciu tego modelu, ponieważ infrastruktura i narzędzia wprowadzone zbyt trudne do tworzenia architektury zorientowanej na usługi (SOA) lat temu, a nie została uwzględniona potrzeby — do momentu zwiększył aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e99-128">Many organizations designed their applications using this model because tools and infrastructure made it too difficult to build service-oriented architectures (SOA) years ago, and they did not see the need-until the application grew.</span></span>

<span data-ttu-id="d8e99-129">Z perspektywy infrastruktury każdy serwer można uruchomić wiele aplikacji, w tym samym hoście i mieć zaakceptowania wskaźnik wydajności użycia zasobów, jak pokazano w rysunek 4-2.</span><span class="sxs-lookup"><span data-stu-id="d8e99-129">From an infrastructure perspective, each server can run many applications within the same host and have an acceptable ratio of efficiency in resources usage, as shown in Figure 4-2.</span></span>

![Kilka aplikacji monolitycznej, każdy z nich w kontenerze oddzielnym, można uruchomić hosta.](./media/image2.png)

<span data-ttu-id="d8e99-131">**Rysunek 4-2**.</span><span class="sxs-lookup"><span data-stu-id="d8e99-131">**Figure 4-2**.</span></span> <span data-ttu-id="d8e99-132">Podejścia monolitycznego: Na hoście uruchomiono wiele aplikacji, każda aplikacja uruchomionego jako kontener</span><span class="sxs-lookup"><span data-stu-id="d8e99-132">Monolithic approach: Host running multiple apps, each app running as a container</span></span>

<span data-ttu-id="d8e99-133">Aplikacje monolityczne na platformie Microsoft Azure można wdrożyć przy użyciu dedykowanych maszyn wirtualnych dla poszczególnych wystąpień.</span><span class="sxs-lookup"><span data-stu-id="d8e99-133">Monolithic applications in Microsoft Azure can be deployed using dedicated VMs for each instance.</span></span> <span data-ttu-id="d8e99-134">Ponadto za pomocą [zestawów skalowania maszyn wirtualnych platformy Azure](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/), można łatwo skalować maszyny wirtualne.</span><span class="sxs-lookup"><span data-stu-id="d8e99-134">Additionally, using [Azure virtual machine scale sets](https://azure.microsoft.com/documentation/services/virtual-machine-scale-sets/), you can easily scale the VMs.</span></span> <span data-ttu-id="d8e99-135">[Usługa Azure App Service](https://azure.microsoft.com/services/app-service/) można również uruchamiać aplikacje monolityczne i łatwe skalowanie wystąpień bez konieczności zarządzania maszynami wirtualnymi.</span><span class="sxs-lookup"><span data-stu-id="d8e99-135">[Azure App Service](https://azure.microsoft.com/services/app-service/) can also run monolithic applications and easily scale instances without requiring you to manage the VMs.</span></span> <span data-ttu-id="d8e99-136">Od 2016 r. usługi Azure App Services można uruchomić jednego wystąpienia kontenerów platformy Docker, jak również uproszczenia procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="d8e99-136">Since 2016, Azure App Services can run single instances of Docker containers as well, simplifying deployment.</span></span>

<span data-ttu-id="d8e99-137">Jako środowisko pytań i odpowiedzi lub ograniczonym środowisku produkcyjnym możesz wdrożyć hosta platformy Docker wielu maszyn wirtualnych i zrównoważenia je przy użyciu równoważenia platformy Azure, jak pokazano w rysunek 4-3.</span><span class="sxs-lookup"><span data-stu-id="d8e99-137">As a QA environment or a limited production environment, you can deploy multiple Docker host VMs and balance them using the Azure balancer, as shown in Figure 4-3.</span></span> <span data-ttu-id="d8e99-138">Pozwoli to zarządzać skalowania dzięki podejściu zgrubnym ziarna, ponieważ cała aplikacja znajduje się w jednym kontenerze.</span><span class="sxs-lookup"><span data-stu-id="d8e99-138">This lets you manage scaling with a coarse-grain approach, because the whole application lives within a single container.</span></span>

![Kilka hostów, każdy z nich uruchamiania kontenera za pomocą aplikacji monolitycznej.](./media/image3.png)

<span data-ttu-id="d8e99-140">**Rysunek 4-3**.</span><span class="sxs-lookup"><span data-stu-id="d8e99-140">**Figure 4-3**.</span></span> <span data-ttu-id="d8e99-141">Przykład wielu hostach, skalowanie w górę aplikacji jeden kontener</span><span class="sxs-lookup"><span data-stu-id="d8e99-141">Example of multiple hosts scaling up a single container application</span></span>

<span data-ttu-id="d8e99-142">Wdrożenia na różnych hostach można zarządzać za pomocą techniki wdrażania tradycyjnych.</span><span class="sxs-lookup"><span data-stu-id="d8e99-142">Deployment to the various hosts can be managed with traditional deployment techniques.</span></span> <span data-ttu-id="d8e99-143">Hostów platformy docker można zarządzać za pomocą poleceń, takich jak `docker run` lub `docker-compose` wykonać ręcznie lub za pomocą automatyzacji, takie jak potoki ciągłe dostarczanie (CD).</span><span class="sxs-lookup"><span data-stu-id="d8e99-143">Docker hosts can be managed with commands like `docker run` or `docker-compose` performed manually, or through automation such as continuous delivery (CD) pipelines.</span></span>

## <a name="deploying-a-monolithic-application-as-a-container"></a><span data-ttu-id="d8e99-144">Wdrażanie aplikacji monolitycznej jako kontener</span><span class="sxs-lookup"><span data-stu-id="d8e99-144">Deploying a monolithic application as a container</span></span>

<span data-ttu-id="d8e99-145">Istnieją korzyści, aby zarządzać wdrożeniami aplikacji monolitycznej przy użyciu kontenerów.</span><span class="sxs-lookup"><span data-stu-id="d8e99-145">There are benefits to using containers to manage monolithic application deployments.</span></span> <span data-ttu-id="d8e99-146">Skalowanie wystąpienia kontenera jest znacznie szybsze i prostsze wdrażania dodatkowych maszyn wirtualnych.</span><span class="sxs-lookup"><span data-stu-id="d8e99-146">Scaling container instances is far faster and easier than deploying additional VMs.</span></span> <span data-ttu-id="d8e99-147">Nawet w przypadku używania zestawów skalowania maszyn wirtualnych, maszyny wirtualnej może potrwać godzinę, aby rozpocząć.</span><span class="sxs-lookup"><span data-stu-id="d8e99-147">Even if you use virtual machine scale sets, VMs take time to start.</span></span> <span data-ttu-id="d8e99-148">Po wdrożeniu jako wystąpienia tradycyjnych aplikacji zamiast kontenerów, konfigurację aplikacji odbywa się w ramach maszyny wirtualnej nie jest najlepszym rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="d8e99-148">When deployed as traditional application instances instead of containers, the configuration of the application is managed as part of the VM, which isn't ideal.</span></span>

<span data-ttu-id="d8e99-149">Wdrażanie aktualizacji zgodnie z obrazów platformy Docker jest znacznie szybszy i wydajność sieci.</span><span class="sxs-lookup"><span data-stu-id="d8e99-149">Deploying updates as Docker images is far faster and network efficient.</span></span> <span data-ttu-id="d8e99-150">Obrazy platformy docker zazwyczaj rozpoczyna się w ciągu kilku sekund, co przyspiesza wprowadzanie.</span><span class="sxs-lookup"><span data-stu-id="d8e99-150">Docker images typically start in seconds, which speeds rollouts.</span></span> <span data-ttu-id="d8e99-151">Zniszczenia wystąpienia obrazu platformy Docker jest równie proste jak wystawianie `docker stop` poleceń i zazwyczaj kończy się w ciągu niecałej sekundy.</span><span class="sxs-lookup"><span data-stu-id="d8e99-151">Tearing down a Docker image instance is as easy as issuing a `docker stop` command, and typically completes in less than a second.</span></span>

<span data-ttu-id="d8e99-152">Ponieważ kontenery są niezmienne zgodnie z projektem, nigdy nie musisz się martwić o maszynach wirtualnych w uszkodzona.</span><span class="sxs-lookup"><span data-stu-id="d8e99-152">Because containers are immutable by design, you never need to worry about corrupted VMs.</span></span> <span data-ttu-id="d8e99-153">Z kolei skryptów aktualizacji dla maszyny Wirtualnej może być zapomnij konto niektóre konkretnej konfiguracji lub plik pozostanie na dysku.</span><span class="sxs-lookup"><span data-stu-id="d8e99-153">In contrast, update scripts for a VM might forget to account for some specific configuration or file left on disk.</span></span>

<span data-ttu-id="d8e99-154">Gdy monolitycznych aplikacji mogą korzystać z platformy Docker, firma Microsoft jest dotknięcie tylko na korzyści.</span><span class="sxs-lookup"><span data-stu-id="d8e99-154">While monolithic applications can benefit from Docker, we're touching only on the benefits.</span></span> <span data-ttu-id="d8e99-155">Dodatkowe zalety zarządzania kontenerami pochodzą z wdrażania przy użyciu koordynatorów kontenerów, które zarządzają różnych wystąpień i cyklu życia każdego wystąpienia kontenera.</span><span class="sxs-lookup"><span data-stu-id="d8e99-155">Additional benefits of managing containers come from deploying with container orchestrators, which manage the various instances and lifecycle of each container instance.</span></span> <span data-ttu-id="d8e99-156">Podzielenie aplikacji monolitycznej na podsystemy, które można skalować, opracowane i wdrażane indywidualnie jest punktem wejścia do obszaru mikrousług.</span><span class="sxs-lookup"><span data-stu-id="d8e99-156">Breaking up the monolithic application into subsystems that can be scaled, developed, and deployed individually is your entry point into the realm of microservices.</span></span>

## <a name="publishing-a-single-container-based-application-to-azure-app-service"></a><span data-ttu-id="d8e99-157">Publikowanie aplikacji opartych na kontenerach pojedynczej usłudze Azure App Service</span><span class="sxs-lookup"><span data-stu-id="d8e99-157">Publishing a single-container-based application to Azure App Service</span></span>

<span data-ttu-id="d8e99-158">Czy chcesz pobrać weryfikacji kontenera wdrażane na platformie Azure lub gdy aplikacja jest po prostu aplikacji jednego kontenera usługi Azure App Service zapewnia dobry sposób na dostarczenie skalowalnych usług opartych na kontenerach pojedynczej.</span><span class="sxs-lookup"><span data-stu-id="d8e99-158">Whether you want to get validation of a container deployed to Azure or when an application is simply a single-container application, Azure App Service provides a great way to provide scalable single-container-based services.</span></span> <span data-ttu-id="d8e99-159">Za pomocą usługi Azure App Service jest proste.</span><span class="sxs-lookup"><span data-stu-id="d8e99-159">Using Azure App Service is simple.</span></span> <span data-ttu-id="d8e99-160">Zapewnia ona doskonałą integrację za pomocą narzędzia Git, aby ułatwić zająć kodu, skompiluj go w programie Visual Studio i wdróż je bezpośrednio na platformie Azure.</span><span class="sxs-lookup"><span data-stu-id="d8e99-160">It provides great integration with Git to make it easy to take your code, build it in Visual Studio, and deploy it directly to Azure.</span></span>

![Kreator publikowania aplikacji jeden kontener w usłudze Azure App Service w programie Visual Studio](./media/image4.png)

<span data-ttu-id="d8e99-162">**Rysunek 4-4**.</span><span class="sxs-lookup"><span data-stu-id="d8e99-162">**Figure 4-4**.</span></span> <span data-ttu-id="d8e99-163">Publikowanie aplikacji pojedynczego kontenera w usłudze Azure App Service z programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d8e99-163">Publishing a single-container application to Azure App Service from Visual Studio</span></span>

<span data-ttu-id="d8e99-164">Bez platformy Docker Jeśli to konieczne, inne możliwości, struktury lub zależności, które nie są obsługiwane w usłudze Azure App Service, trzeba było poczekaj, aż zespół platformy Azure, zaktualizować tych zależności w usłudze App Service.</span><span class="sxs-lookup"><span data-stu-id="d8e99-164">Without Docker, if you needed other capabilities, frameworks, or dependencies that aren't supported in Azure App Service, you had to wait until the Azure team updated those dependencies in App Service.</span></span> <span data-ttu-id="d8e99-165">Czy przełączyć się do innych usług, takich jak Azure Service Fabric, Azure Cloud Services lub nawet maszyn wirtualnych, gdzie trzeba było dalsze kontroli i może zainstalować wymaganego składnika lub framework dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e99-165">Or you had to switch to other services like Azure Service Fabric, Azure Cloud Services, or even VMs, where you had further control and you could install a required component or framework for your application.</span></span>

<span data-ttu-id="d8e99-166">Obsługa kontenerów w programie Visual Studio 2017 zapewnia możliwość zawierać dowolne w danym środowisku aplikacji, jak pokazano na rysunku 4-4.</span><span class="sxs-lookup"><span data-stu-id="d8e99-166">Container support in Visual Studio 2017 gives you the ability to include whatever you want in your application environment, as shown in Figure 4-4.</span></span> <span data-ttu-id="d8e99-167">Ponieważ używasz go w kontenerze, jeśli Dodawanie zależności do aplikacji, może zawierać zależności w pliku Dockerfile lub rozwiązania Docker obrazie.</span><span class="sxs-lookup"><span data-stu-id="d8e99-167">Since you're running it in a container, if you add a dependency to your application, you can include the dependency in your Dockerfile or Docker image.</span></span>

<span data-ttu-id="d8e99-168">Również przedstawione w rysunek 4-4 przepływ publikowania wypycha obraz do rejestru kontenerów.</span><span class="sxs-lookup"><span data-stu-id="d8e99-168">As also shown in Figure 4-4, the publish flow pushes an image through a container registry.</span></span> <span data-ttu-id="d8e99-169">Może to być usługa Azure Container Registry (rejestr najbliżej Twoich wdrożeń na platformie Azure i chronione przez usługę Azure Active Directory, grupy i konta) oraz wszelkich innych rejestru platformy Docker, takich jak usługi Docker Hub lub rejestru w środowisku lokalnym.</span><span class="sxs-lookup"><span data-stu-id="d8e99-169">This can be the Azure Container Registry (a registry close to your deployments in Azure and secured by Azure Active Directory groups and accounts), or any other Docker registry, like Docker Hub or an on-premises registry.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d8e99-170">[Poprzednie](index.md)
>[dalej](docker-application-state-data.md)</span><span class="sxs-lookup"><span data-stu-id="d8e99-170">[Previous](index.md)
[Next](docker-application-state-data.md)</span></span>