---
title: Identyfikowanie ograniczeń modelu domeny dla poszczególnych mikrousług
description: Zapoznaj się z essence partycjonowania dużych aplikacji na mikrousługi do osiągnięcia architektury dźwięku.
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/20/2018
ms.openlocfilehash: 9142c5abbbd3839caac377876ba54258cdf916b4
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/10/2018
ms.locfileid: "53152503"
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a><span data-ttu-id="66d28-103">Identyfikowanie ograniczeń modelu domeny dla poszczególnych mikrousług</span><span class="sxs-lookup"><span data-stu-id="66d28-103">Identify domain-model boundaries for each microservice</span></span>

<span data-ttu-id="66d28-104">Mimo, że należy zwykle kierunku małych mikrousług, jeśli jest to możliwe, aby uzyskać dostęp do najbardziej szczegółowego separacji jest to możliwe, nie jest celem identyfikowanie ograniczeń modelu i rozmiar dla poszczególnych mikrousług.</span><span class="sxs-lookup"><span data-stu-id="66d28-104">The goal when identifying model boundaries and size for each microservice isn't to get to the most granular separation possible, although you should tend toward small microservices if possible.</span></span> <span data-ttu-id="66d28-105">Zamiast tego celem powinno być, aby uzyskać dostęp do najbardziej istotnych oddzielenie kierować swojej wiedzy specjalistycznej.</span><span class="sxs-lookup"><span data-stu-id="66d28-105">Instead, your goal should be to get to the most meaningful separation guided by your domain knowledge.</span></span> <span data-ttu-id="66d28-106">Szczególnym nie ma rozmiar, ale zamiast tego możliwości biznesowych.</span><span class="sxs-lookup"><span data-stu-id="66d28-106">The emphasis isn't on the size, but instead on business capabilities.</span></span> <span data-ttu-id="66d28-107">Ponadto w przypadku zwykłego spójności potrzebne dla obszaru aplikacji oparte na dużą liczbę zależności wskazująca potrzebę pojedynczych mikrousług za.</span><span class="sxs-lookup"><span data-stu-id="66d28-107">In addition, if there's clear cohesion needed for a certain area of the application based on a high number of dependencies, that indicates the need for a single microservice, too.</span></span> <span data-ttu-id="66d28-108">Spójności jest do identyfikowania sposobu Rozdziel lub mikrousług razem w grupy.</span><span class="sxs-lookup"><span data-stu-id="66d28-108">Cohesion is a way to identify how to break apart or group together microservices.</span></span> <span data-ttu-id="66d28-109">Ostatecznie Chociaż możesz uzyskać więcej informacji o domenie, powinno się zaadaptować rozmiar Twojej mikrousług iteracyjne.</span><span class="sxs-lookup"><span data-stu-id="66d28-109">Ultimately, while you gain more knowledge about the domain, you should adapt the size of your microservice, iteratively.</span></span> <span data-ttu-id="66d28-110">Znajdowanie wielkości nie jest procesem jednorazowej.</span><span class="sxs-lookup"><span data-stu-id="66d28-110">Finding the right size isn't a one-shot process.</span></span>

<span data-ttu-id="66d28-111">[Newmana](https://samnewman.io/), rozpoznawanym promoter mikrousług i autora książki [tworzenie Mikrousług](https://samnewman.io/books/building_microservices/), wyróżnia się, że należy projektować mikrousługi na podstawie ograniczonego kontekstu (BC) wzorca (część opartego na domenach projektu), jak wprowadzone wcześniej.</span><span class="sxs-lookup"><span data-stu-id="66d28-111">[Sam Newman](https://samnewman.io/), a recognized promoter of microservices and author of the book [Building Microservices](https://samnewman.io/books/building_microservices/), highlights that you should design your microservices based on the Bounded Context (BC) pattern (part of domain-driven design), as introduced earlier.</span></span> <span data-ttu-id="66d28-112">Czasami BC może składać się z kilku usług fizycznych, ale nie odwrotnie.</span><span class="sxs-lookup"><span data-stu-id="66d28-112">Sometimes, a BC could be composed of several physical services, but not vice versa.</span></span>

<span data-ttu-id="66d28-113">Model domeny przy użyciu jednostek z konkretnej domeny ma zastosowanie w konkretnych BC lub mikrousług.</span><span class="sxs-lookup"><span data-stu-id="66d28-113">A domain model with specific domain entities applies within a concrete BC or microservice.</span></span> <span data-ttu-id="66d28-114">BC rozgranicza stosowania modelu domeny, a członkowie zespołu deweloperów zapewnia, czytelne i udostępnione znajomości co muszą być spójne i jakie mogą być tworzone niezależnie.</span><span class="sxs-lookup"><span data-stu-id="66d28-114">A BC delimits the applicability of a domain model and gives developer team members a clear and shared understanding of what must be cohesive and what can be developed independently.</span></span> <span data-ttu-id="66d28-115">Są to te same cele mikrousług.</span><span class="sxs-lookup"><span data-stu-id="66d28-115">These are the same goals for microservices.</span></span>

<span data-ttu-id="66d28-116">Inne narzędzie, które informują uzasadnienie wyboru tych elementów jest [prawo Conway'a](https://en.wikipedia.org/wiki/Conway%27s_law), które stwierdza, że aplikacja będzie odzwierciedlać granice społecznościowych organizacji, który go.</span><span class="sxs-lookup"><span data-stu-id="66d28-116">Another tool that informs your design choice is [Conway's law](https://en.wikipedia.org/wiki/Conway%27s_law), which states that an application will reflect the social boundaries of the organization that produced it.</span></span> <span data-ttu-id="66d28-117">Jednak czasami przeciwieństwo obowiązuje — organizacja w firmie, jest tworzona przez oprogramowanie.</span><span class="sxs-lookup"><span data-stu-id="66d28-117">But sometimes the opposite is true -the company's organization is formed by the software.</span></span> <span data-ttu-id="66d28-118">Konieczne może być wycofać prawo Conway'a i tworzenie granic w sposób firmy, które mają być organizowane leaning kierunku konsultacji procesów biznesowych.</span><span class="sxs-lookup"><span data-stu-id="66d28-118">You might need to reverse Conway's law and build the boundaries the way you want the company to be organized, leaning toward business process consulting.</span></span>

<span data-ttu-id="66d28-119">Aby zidentyfikować ograniczone konteksty, możesz użyć wzorzec DDD, o nazwie [mapowanie kontekstu wzorzec](https://www.infoq.com/articles/ddd-contextmapping).</span><span class="sxs-lookup"><span data-stu-id="66d28-119">To identify bounded contexts, you can use a DDD pattern called the [Context Mapping pattern](https://www.infoq.com/articles/ddd-contextmapping).</span></span> <span data-ttu-id="66d28-120">Kontekst mapowania należy zidentyfikować różnych kontekstach w aplikacji i ich granice.</span><span class="sxs-lookup"><span data-stu-id="66d28-120">With Context Mapping, you identify the various contexts in the application and their boundaries.</span></span> <span data-ttu-id="66d28-121">Jest to często mają inny kontekst i granic dla każdego podsystemu mały, na przykład.</span><span class="sxs-lookup"><span data-stu-id="66d28-121">It's common to have a different context and boundary for each small subsystem, for instance.</span></span> <span data-ttu-id="66d28-122">Mapa kontekstu jest sposób definiowania i jawne te granice między domenami.</span><span class="sxs-lookup"><span data-stu-id="66d28-122">The Context Map is a way to define and make explicit those boundaries between domains.</span></span> <span data-ttu-id="66d28-123">BC to autonomiczne i zawiera szczegółowe informacje z jednej domeny — szczegóły, takie jak jednostki domeny — i definiuje umów integracji z innych usług łączności biznesowej.</span><span class="sxs-lookup"><span data-stu-id="66d28-123">A BC is autonomous and includes the details of a single domain -details like the domain entities- and defines integration contracts with other BCs.</span></span> <span data-ttu-id="66d28-124">Jest to podobne do definicji mikrousługi: To autonomiczne, implementuje niektórych możliwości domeny i przekazuje interfejsów.</span><span class="sxs-lookup"><span data-stu-id="66d28-124">This is similar to the definition of a microservice: it's autonomous, it implements certain domain capability, and it must provide interfaces.</span></span> <span data-ttu-id="66d28-125">Jest to, dlaczego kontekst mapowania i wzorzec ograniczony kontekst są dobre podejścia do identyfikowania granice modelu domeny mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="66d28-125">This is why Context Mapping and the Bounded Context pattern are good approaches for identifying the domain model boundaries of your microservices.</span></span>

<span data-ttu-id="66d28-126">Podczas projektowania dużych aplikacji, zobaczysz, jak fragmentacji swój model domeny — eksperta domeny z domeny katalogu będzie nazwa jednostki inaczej w katalogu i spisu domeny niż domena wysyłki, ekspertów, na przykład.</span><span class="sxs-lookup"><span data-stu-id="66d28-126">When designing a large application, you'll see how its domain model can be fragmented - a domain expert from the catalog domain will name entities differently in the catalog and inventory domains than a shipping domain expert, for instance.</span></span> <span data-ttu-id="66d28-127">Lub może być innego rozmiaru i liczby atrybutów jednostki domeny użytkownika, podczas pracy z CRM ekspertów, kto chce przechowywać szczegóły każdego zdarzenia o kliencie niż dla szeregowania eksperta domeny, który potrzebuje tylko częściowe dane dotyczące klienta.</span><span class="sxs-lookup"><span data-stu-id="66d28-127">Or the user domain entity might be different in size and number of attributes when dealing with a CRM expert who wants to store every detail about the customer than for an ordering domain expert who just needs partial data about the customer.</span></span> <span data-ttu-id="66d28-128">Jest to bardzo trudne do odróżniania wszystkie terminy domeny we wszystkich domenach, które są związane z dużych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66d28-128">It's very hard to disambiguate all domain terms across all the domains related to a large application.</span></span> <span data-ttu-id="66d28-129">Ale najbardziej ważne jest, że nie powinna próbować ujednolicenie warunki.</span><span class="sxs-lookup"><span data-stu-id="66d28-129">But the most important thing is that you shouldn't try to unify the terms.</span></span> <span data-ttu-id="66d28-130">Zamiast tego należy zaakceptować różnice i złożonością zawartym w każdej domenie.</span><span class="sxs-lookup"><span data-stu-id="66d28-130">Instead, accept the differences and richness provided by each domain.</span></span> <span data-ttu-id="66d28-131">Jeśli zostanie podjęta próba zostały ujednolicony bazy danych dla całej aplikacji, próby ujednoliconego słownictwa będzie niewygodna i nie będzie dźwięk w prawo do dowolnego z wielu eksperci domeny.</span><span class="sxs-lookup"><span data-stu-id="66d28-131">If you try to have a unified database for the whole application, attempts at a unified vocabulary will be awkward and won't sound right to any of the multiple domain experts.</span></span> <span data-ttu-id="66d28-132">W związku z tym usług łączności biznesowej (zaimplementowane jako mikrousługi) pomoże Ci aby wyjaśnić, którym może korzystać z niektórych terminów domeny i gdzie należy podzielić system i utworzyć dodatkowe usług łączności biznesowej z różnymi domenami.</span><span class="sxs-lookup"><span data-stu-id="66d28-132">Therefore, BCs (implemented as microservices) will help you to clarify where you can use certain domain terms and where you'll need to split the system and create additional BCs with different domains.</span></span>

<span data-ttu-id="66d28-133">Będziesz wiedzieć, że masz prawo granic i rozmiarów każdego BC i modelu domeny, jeśli masz kilka silne relacje między modeli domeny i wykonaj w nie zawsze konieczne do scalenia informacji z różnych modeli domeny, podczas wykonywania operacji w typowej aplikacji .</span><span class="sxs-lookup"><span data-stu-id="66d28-133">You'll know that you got the right boundaries and sizes of each BC and domain model if you have few strong relationships between domain models, and you do not usually need to merge information from multiple domain models when performing typical application operations.</span></span>

<span data-ttu-id="66d28-134">Może być najlepszą odpowiedź na pytanie, jak duże powinny być modelu domeny dla poszczególnych mikrousług jest następująca: powinien mieć BC autonomicznych, jak izolowane, jak to możliwe, która pozwala na pracę bez konieczności stale przechodzenia do innych kontekstach, (inne modele w mikrousługach).</span><span class="sxs-lookup"><span data-stu-id="66d28-134">Perhaps the best answer to the question of how large a domain model for each microservice should be is the following: it should have an autonomous BC, as isolated as possible, that enables you to work without having to constantly switch to other contexts (other microservice's models).</span></span> <span data-ttu-id="66d28-135">Na rysunku 4-10, możesz zobaczyć jak wiele mikrousług (wiele usług łączności biznesowej) każdego ma swoje własne modelu i sposób ich jednostek można zdefiniować, w zależności od określonych wymagań dla każdej z domen określonych w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="66d28-135">In Figure 4-10, you can see how multiple microservices (multiple BCs) each has their own model and how their entities can be defined, depending on the specific requirements for each of the identified domains in your application.</span></span>

![Jednostki w kilku modelu granic (ograniczone konteksty), gdzie tej samej jednostki, jest wyświetlany jako "Użytkownicy", "Kupujący", "Podatników" i "Klienci" w zależności od ograniczony kontekst](./media/image10.png)

<span data-ttu-id="66d28-137">**Rysunek 4 – 10**.</span><span class="sxs-lookup"><span data-stu-id="66d28-137">**Figure 4-10**.</span></span> <span data-ttu-id="66d28-138">Identyfikowanie jednostek i granice modelu mikrousług</span><span class="sxs-lookup"><span data-stu-id="66d28-138">Identifying entities and microservice model boundaries</span></span>

<span data-ttu-id="66d28-139">Rysunek 4 – 10 przedstawia przykładowy scenariusz związane z systemu zarządzania konferencjami online.</span><span class="sxs-lookup"><span data-stu-id="66d28-139">Figure 4-10 illustrates a sample scenario related to an online conference management system.</span></span> <span data-ttu-id="66d28-140">Zidentyfikowaliśmy kilka usług łączności biznesowej, które można zaimplementować jako mikrousługi, na podstawie domen, zdefiniowane przez ekspertów z konkretnych dziedzin dla Ciebie.</span><span class="sxs-lookup"><span data-stu-id="66d28-140">You've identified several BCs that could be implemented as microservices, based on domains that domain experts defined for you.</span></span> <span data-ttu-id="66d28-141">Jak widać, że istnieją jednostek, które znajdują się tylko w modelu pojedynczych mikrousług, takich jak płatności w mikrousługach płatności.</span><span class="sxs-lookup"><span data-stu-id="66d28-141">As you can see, there are entities that are present just in a single microservice model, like Payments in the Payment microservice.</span></span> <span data-ttu-id="66d28-142">Te będą łatwe do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="66d28-142">Those will be easy to implement.</span></span>

<span data-ttu-id="66d28-143">Jednak może również być jednostek, które dysponują innego kształtu, ale udostępnianie tej samej tożsamości w wielu modeli domeny z wielu mikrousług.</span><span class="sxs-lookup"><span data-stu-id="66d28-143">However, you might also have entities that have a different shape but share the same identity across the multiple domain models from the multiple microservices.</span></span> <span data-ttu-id="66d28-144">Na przykład jednostka użytkownika jest identyfikowane w mikrousługach zarządzania konferencjami.</span><span class="sxs-lookup"><span data-stu-id="66d28-144">For example, the User entity is identified in the Conferences Management microservice.</span></span> <span data-ttu-id="66d28-145">Tego samego użytkownika z tą samą tożsamością jest jeden o nazwie kupujący w mikrousługach porządkowanie, co najmniej jeden o nazwie płatnika w mikrousługach płatności, a nawet jednego o nazwie klienta mikrousług działem obsługi klienta.</span><span class="sxs-lookup"><span data-stu-id="66d28-145">That same user, with the same identity, is the one named Buyers in the Ordering microservice, or the one named Payer in the Payment microservice, and even the one named Customer in the Customer Service microservice.</span></span> <span data-ttu-id="66d28-146">Jest to spowodowane w zależności od [wszechobecne języka](https://martinfowler.com/bliki/UbiquitousLanguage.html) , korzysta z każdego eksperta domeny, użytkownik może mieć różne perspektywy, nawet w przypadku różnych atrybutów.</span><span class="sxs-lookup"><span data-stu-id="66d28-146">This is because, depending on the [ubiquitous language](https://martinfowler.com/bliki/UbiquitousLanguage.html) that each domain expert is using, a user might have a different perspective even with different attributes.</span></span> <span data-ttu-id="66d28-147">Jednostka użytkownika w modelu mikrousług, o nazwie zarządzania konferencjami może być najbardziej jego atrybuty danych osobowych.</span><span class="sxs-lookup"><span data-stu-id="66d28-147">The user entity in the microservice model named Conferences Management might have most of its personal data attributes.</span></span> <span data-ttu-id="66d28-148">Jednak że tego samego użytkownika w kształcie płatnika w mikrousługach płatności lub w kształcie klienta w mikrousługach działem obsługi klienta nie może być konieczne taką listą atrybutów.</span><span class="sxs-lookup"><span data-stu-id="66d28-148">However, that same user in the shape of Payer in the microservice Payment or in the shape of Customer in the microservice Customer Service might not need the same list of attributes.</span></span>

<span data-ttu-id="66d28-149">Podejście podobne zilustrowano w rysunek 4 – 11.</span><span class="sxs-lookup"><span data-stu-id="66d28-149">A similar approach is illustrated in Figure 4-11.</span></span>

![Podczas podzielenie modelu tradycyjnym danych między ograniczone konteksty, możesz mieć różnych obiektów, które mają taką samą tożsamość (kupujący jest również użytkownikiem) z różnymi atrybutami w poszczególnych kontekstach.](./media/image11.png)

<span data-ttu-id="66d28-151">**Rysunek 4 – 11**.</span><span class="sxs-lookup"><span data-stu-id="66d28-151">**Figure 4-11**.</span></span> <span data-ttu-id="66d28-152">Podzielenie modeli tradycyjnych danych wielu modeli domeny</span><span class="sxs-lookup"><span data-stu-id="66d28-152">Decomposing traditional data models into multiple domain models</span></span>

<span data-ttu-id="66d28-153">Zobaczysz, jak użytkownik znajduje się w modelu mikrousług zarządzania konferencjami jako jednostki użytkownika i również znajduje się w formularzu jednostki nabywcy w mikrousługach ceny, za pomocą alternatywnej atrybutów lub szczegółowe informacje o użytkowniku, gdy jest ona rzeczywiście kupujący.</span><span class="sxs-lookup"><span data-stu-id="66d28-153">You can see how the user is present in the Conferences Management microservice model as the User entity and is also present in the form of the Buyer entity in the Pricing microservice, with alternate attributes or details about the user when it's actually a buyer.</span></span> <span data-ttu-id="66d28-154">Każda mikrousługa lub BC nie może być konieczne wszystkie dane powiązane z jednostką użytkownika, po prostu część, w zależności od problemu do rozwiązania lub w kontekście.</span><span class="sxs-lookup"><span data-stu-id="66d28-154">Each microservice or BC might not need all the data related to a User entity, just part of it, depending on the problem to solve or the context.</span></span> <span data-ttu-id="66d28-155">Na przykład w modelu mikrousług cen, nie trzeba adres lub nazwę użytkownika, po prostu identyfikator (jako tożsamość) i stan, który będzie miało wpływ na rabaty, gdy ceny stanowisk na kupujący.</span><span class="sxs-lookup"><span data-stu-id="66d28-155">For instance, in the Pricing microservice model, you do not need the address or the name of the user, just the ID (as identity) and Status, which will have an impact on discounts when pricing the seats per buyer.</span></span>

<span data-ttu-id="66d28-156">Jednostki stanowisko ma taką samą nazwę, ale różnych atrybutów w każdym modelu domeny.</span><span class="sxs-lookup"><span data-stu-id="66d28-156">The Seat entity has the same name but different attributes in each domain model.</span></span> <span data-ttu-id="66d28-157">Jednak stanowisko udostępnia tożsamości, w oparciu o takim samym Identyfikatorem, jak to się dzieje z użytkowników i kupujący.</span><span class="sxs-lookup"><span data-stu-id="66d28-157">However, Seat shares identity based on the same ID, as happens with User and Buyer.</span></span>

<span data-ttu-id="66d28-158">Zasadniczo jest udostępniony koncepcji użytkownika, który znajduje się w wielu usług (domeny), których udostępnianie tożsamości danego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="66d28-158">Basically, there's a shared concept of a user that exists in multiple services (domains), which all share the identity of that user.</span></span> <span data-ttu-id="66d28-159">Ale w każdym modelu domeny może być dodatkowym lub innym szczegóły jednostki użytkownika.</span><span class="sxs-lookup"><span data-stu-id="66d28-159">But in each domain model there might be additional or different details about the user entity.</span></span> <span data-ttu-id="66d28-160">W związku z tym musi istnieć sposób mapowania jednostki użytkownika z jednej domeny (mikrousług) do innego.</span><span class="sxs-lookup"><span data-stu-id="66d28-160">Therefore, there needs to be a way to map a user entity from one domain (microservice) to another.</span></span>

<span data-ttu-id="66d28-161">Istnieje wiele korzyści związanych z nie udostępnianie tej samej jednostki użytkownika z taką samą liczbę atrybutów między domenami.</span><span class="sxs-lookup"><span data-stu-id="66d28-161">There are several benefits to not sharing the same user entity with the same number of attributes across domains.</span></span> <span data-ttu-id="66d28-162">Jedną z zalet jest zmniejszenie duplikatów, tak aby mikrousług modele nie masz żadnych danych, która nie ma potrzeby.</span><span class="sxs-lookup"><span data-stu-id="66d28-162">One benefit is to reduce duplication, so that microservice models do not have any data that they do not need.</span></span> <span data-ttu-id="66d28-163">Kolejną korzyścią występują wzorca mikrousług, który jest właścicielem określonego typu danych na jednostkę, aby aktualizacje i zapytania dla tego typu danych, które są sterowane tylko przez tego mikrousług.</span><span class="sxs-lookup"><span data-stu-id="66d28-163">Another benefit is having a master microservice that owns a certain type of data per entity so that updates and queries for that type of data are driven only by that microservice.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="66d28-164">[Poprzednie](distributed-data-management.md)
>[dalej](direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="66d28-164">[Previous](distributed-data-management.md)
[Next](direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span></span>