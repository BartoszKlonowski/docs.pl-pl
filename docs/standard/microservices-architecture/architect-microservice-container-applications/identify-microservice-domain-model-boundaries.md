---
title: Identyfikowanie granice modelu domeny dla każdego mikrousługi
description: Architektura Mikrousług .NET dla aplikacji .NET konteneryzowanych | Identyfikowanie granice modelu domeny dla każdego mikrousługi
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.openlocfilehash: b11d2838539b8ddbe21bcfcb77845a10e466c760
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
ms.locfileid: "33578120"
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a><span data-ttu-id="abb02-103">Zidentyfikuj granice modelu domeny dla każdego mikrousługi</span><span class="sxs-lookup"><span data-stu-id="abb02-103">Identify domain-model boundaries for each microservice</span></span>

<span data-ttu-id="abb02-104">Celem podczas identyfikowania granice modelu i rozmiaru dla każdego mikrousługi jest nie uzyskać dostęp do najbardziej szczegółowego separacji to możliwe, chociaż należy zwykle kierunku małych mikrousług Jeśli to możliwe.</span><span class="sxs-lookup"><span data-stu-id="abb02-104">The goal when identifying model boundaries and size for each microservice is not to get to the most granular separation possible, although you should tend toward small microservices if possible.</span></span> <span data-ttu-id="abb02-105">Zamiast tego celem powinno być na uzyskanie dostępu do najbardziej znaczący separacji, kierując się swoją wiedzą domeny.</span><span class="sxs-lookup"><span data-stu-id="abb02-105">Instead, your goal should be to get to the most meaningful separation guided by your domain knowledge.</span></span> <span data-ttu-id="abb02-106">Nacisk nie znajduje się na rozmiar, ale zamiast tego na możliwości biznesowe.</span><span class="sxs-lookup"><span data-stu-id="abb02-106">The emphasis is not on the size, but instead on business capabilities.</span></span> <span data-ttu-id="abb02-107">Ponadto w przypadku zwykłego spójności wymagane dla niektórych części aplikacji oparte na dużą liczbę zależności, wskazujący potrzebę pojedynczego mikrousługi, zbyt.</span><span class="sxs-lookup"><span data-stu-id="abb02-107">In addition, if there is clear cohesion needed for a certain area of the application based on a high number of dependencies, that indicates the need for a single microservice, too.</span></span> <span data-ttu-id="abb02-108">Spójności jest do identyfikowania sposobu Rozdziel lub mikrousług razem z grupy.</span><span class="sxs-lookup"><span data-stu-id="abb02-108">Cohesion is a way to identify how to break apart or group together microservices.</span></span> <span data-ttu-id="abb02-109">Ostatecznie podczas gdy możesz uzyskać więcej informacji na temat domeny, powinno się zaadaptować rozmiar Twojej mikrousługi wielokrotnie powtarzane.</span><span class="sxs-lookup"><span data-stu-id="abb02-109">Ultimately, while you gain more knowledge about the domain, you should adapt the size of your microservice, iteratively.</span></span> <span data-ttu-id="abb02-110">Znajdowanie właściwego rozmiaru nie jest procesem jednorazowej.</span><span class="sxs-lookup"><span data-stu-id="abb02-110">Finding the right size is not a one-shot process.</span></span>

<span data-ttu-id="abb02-111">[Sam Newman](https://samnewman.io/), rozpoznawanym promotor mikrousług oraz autora książki [Mikrousług budynku](https://samnewman.io/books/building_microservices/), wyróżnia się, że należy projektować Twojej mikrousług wzorca kontekstu ograniczone (BC) (część z oparte na domenie projekt), jak wprowadzone wcześniej.</span><span class="sxs-lookup"><span data-stu-id="abb02-111">[Sam Newman](https://samnewman.io/), a recognized promoter of microservices and author of the book [Building Microservices](https://samnewman.io/books/building_microservices/), highlights that you should design your microservices based on the Bounded Context (BC) pattern (part of domain-driven design), as introduced earlier.</span></span> <span data-ttu-id="abb02-112">Czasami BC może składać się z kilku usług fizycznej, ale nie odwrotnie.</span><span class="sxs-lookup"><span data-stu-id="abb02-112">Sometimes, a BC could be composed of several physical services, but not vice versa.</span></span>

<span data-ttu-id="abb02-113">Model domeny z określonej domeny jednostek ma zastosowanie w konkretnych BC lub mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="abb02-113">A domain model with specific domain entities applies within a concrete BC or microservice.</span></span> <span data-ttu-id="abb02-114">BC rozgranicza stosowania modelu domeny i deweloperów zapewnia przejrzyste i udostępnionych zrozumienia co musi być spójna i jakie mogą być opracowane niezależnie członków zespołu.</span><span class="sxs-lookup"><span data-stu-id="abb02-114">A BC delimits the applicability of a domain model and gives developer team members a clear and shared understanding of what must be cohesive and what can be developed independently.</span></span> <span data-ttu-id="abb02-115">Są to te same cele dla mikrousług.</span><span class="sxs-lookup"><span data-stu-id="abb02-115">These are the same goals for microservices.</span></span>

<span data-ttu-id="abb02-116">Innego narzędzia, które informują wybór projektu jest [Conway w prawo](https://en.wikipedia.org/wiki/Conway%27s_law), które stwierdza, że aplikacja będzie odzwierciedlać społecznościowych granic organizacji, który go utworzył.</span><span class="sxs-lookup"><span data-stu-id="abb02-116">Another tool that informs your design choice is [Conway’s law](https://en.wikipedia.org/wiki/Conway%27s_law), which states that an application will reflect the social boundaries of the organization that produced it.</span></span> <span data-ttu-id="abb02-117">Czasami przeciwieństwem ma wartość true, ale — organizacji firmy jest tworzony przez oprogramowanie.</span><span class="sxs-lookup"><span data-stu-id="abb02-117">But sometimes the opposite is true—the company’s organization is formed by the software.</span></span> <span data-ttu-id="abb02-118">Aby wycofać Conway w prawo i tworzenie granic sposobu, w firmie, aby uporządkowane, może być konieczne leaning kierunku konsultacji procesów biznesowych.</span><span class="sxs-lookup"><span data-stu-id="abb02-118">You might need to reverse Conway’s law and build the boundaries the way you want the company to be organized, leaning toward business process consulting.</span></span>

<span data-ttu-id="abb02-119">Aby zidentyfikować ograniczonego kontekstów, jest wzorzec DDD, który może służyć do to [mapowania kontekście wzorca](https://www.infoq.com/articles/ddd-contextmapping).</span><span class="sxs-lookup"><span data-stu-id="abb02-119">In order to identify bounded contexts, a DDD pattern that can be used for this is the [Context Mapping pattern](https://www.infoq.com/articles/ddd-contextmapping).</span></span> <span data-ttu-id="abb02-120">Z kontekstu mapowania należy zidentyfikować różnych kontekstów w aplikacji i ich granic.</span><span class="sxs-lookup"><span data-stu-id="abb02-120">With Context Mapping, you identify the various contexts in the application and their boundaries.</span></span> <span data-ttu-id="abb02-121">Jest to często mają różne kontekstu i granic dla każdego podsystemu mały, na przykład.</span><span class="sxs-lookup"><span data-stu-id="abb02-121">It is common to have a different context and boundary for each small subsystem, for instance.</span></span> <span data-ttu-id="abb02-122">Mapa kontekstu jest sposób definiowania i dokonać jawnej tych granic między domenami.</span><span class="sxs-lookup"><span data-stu-id="abb02-122">The Context Map is a way to define and make explicit those boundaries between domains.</span></span> <span data-ttu-id="abb02-123">BC jest serwer autonomiczny i zawiera szczegóły pojedynczej domeny — szczegółowe informacje, takie jak jednostek domeny — i definiuje integracji umowy z innych usług łączności biznesowej.</span><span class="sxs-lookup"><span data-stu-id="abb02-123">A BC is autonomous and includes the details of a single domain—details like the domain entities—and defines integration contracts with other BCs.</span></span> <span data-ttu-id="abb02-124">Jest to podobne do definicji mikrousługi: jest serwer autonomiczny, implementuje niektórych możliwości domeny i przekazuje interfejsów.</span><span class="sxs-lookup"><span data-stu-id="abb02-124">This is similar to the definition of a microservice: it is autonomous, it implements certain domain capability, and it must provide interfaces.</span></span> <span data-ttu-id="abb02-125">Jest to, dlaczego mapowania kontekstu i wzorzec ograniczone kontekstu są dobrym podejścia do identyfikacji użytkownika mikrousług granice modelu domeny.</span><span class="sxs-lookup"><span data-stu-id="abb02-125">This is why Context Mapping and the Bounded Context pattern are good approaches for identifying the domain model boundaries of your microservices.</span></span>

<span data-ttu-id="abb02-126">Podczas projektowania dużej aplikacji, zobaczysz, jak jego model domeny może pofragmentowany — ekspert domeny w domenie katalogu zostanie nazwy jednostek inaczej w domenie katalogu i spisu od ekspertów, domeny wysyłania dla wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="abb02-126">When designing a large application, you will see how its domain model can be fragmented — a domain expert from the catalog domain will name entities differently in the catalog and inventory domains than a shipping domain expert, for instance.</span></span> <span data-ttu-id="abb02-127">Lub jednostką domeny użytkownika może różnić się rozmiarem i liczby atrybutów podczas pracy nad CRM ekspertów, kto chce przechowywać co szczegółowych informacji dotyczących klientów niż dla porządkowania ekspert domeny, który wymaga tylko częściowe dane dotyczące klienta.</span><span class="sxs-lookup"><span data-stu-id="abb02-127">Or the user domain entity might be different in size and number of attributes when dealing with a CRM expert who wants to store every detail about the customer than for an ordering domain expert who just needs partial data about the customer.</span></span> <span data-ttu-id="abb02-128">Jest bardzo trudne do odróżniania wszystkie warunki domeny we wszystkich domenach, które są powiązane z dużej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="abb02-128">It is very hard to disambiguate all domain terms across all the domains related to a large application.</span></span> <span data-ttu-id="abb02-129">Jednak najbardziej ważne jest, że użytkownik nie należy próbować ujednolicenie postanowienia; Zamiast tego należy zaakceptować różnice i siłę pochodzącymi z każdej domeny.</span><span class="sxs-lookup"><span data-stu-id="abb02-129">But the most important thing is that you should not try to unify the terms; instead, accept the differences and richness provided by each domain.</span></span> <span data-ttu-id="abb02-130">Jeśli spróbujesz ujednoliconego bazy danych dla całej aplikacji prób ujednoliconego słownictwa będzie nieodpowiednich i nie dźwięk w prawo do dowolnego z wieloma ekspertami domeny.</span><span class="sxs-lookup"><span data-stu-id="abb02-130">If you try to have a unified database for the whole application, attempts at a unified vocabulary will be awkward and will not sound right to any of the multiple domain experts.</span></span> <span data-ttu-id="abb02-131">W związku z tym usług łączności biznesowej (zaimplementowane jako mikrousług) pomoże Ci wyjaśnienie, których można użyć określonych warunków domeny i gdzie należy podzielić systemu i utworzyć dodatkowe usług łączności biznesowej z innej domeny.</span><span class="sxs-lookup"><span data-stu-id="abb02-131">Therefore, BCs (implemented as microservices) will help you to clarify where you can use certain domain terms and where you will need to split the system and create additional BCs with different domains.</span></span>

<span data-ttu-id="abb02-132">Oznacza to, że masz prawa granic i rozmiary każdego BC i modelu domeny jeśli masz kilka silne relacje między modelami domeny i wykonaniu nie zawsze muszą być scalone informacje z wielu modeli domeny podczas wykonywania Typowa aplikacja operacje.</span><span class="sxs-lookup"><span data-stu-id="abb02-132">You will know that you got the right boundaries and sizes of each BC and domain model if you have few strong relationships between domain models, and you do not usually need to merge information from multiple domain models when performing typical application operations.</span></span>

<span data-ttu-id="abb02-133">Prawdopodobnie najlepsze odpowiedź na pytanie, jak duże powinny być modelu domeny dla każdego mikrousługi są następujące: powinien mieć BC autonomicznych, jak izolowanym, jak to możliwe, który umożliwia pracę bez konieczności przełączania stale do innych kontekstach (inne modele mikrousługi firmy).</span><span class="sxs-lookup"><span data-stu-id="abb02-133">Perhaps the best answer to the question of how big a domain model for each microservice should be is the following: it should have an autonomous BC, as isolated as possible, that enables you to work without having to constantly switch to other contexts (other microservice’s models).</span></span> <span data-ttu-id="abb02-134">Rysunek 4-10 można zobaczyć jak wiele mikrousług (wiele usług łączności biznesowej) każdego mają własne modelu i sposób ich jednostek można zdefiniować, w zależności od określone wymagania dotyczące każdej z domen zidentyfikowanych w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="abb02-134">In Figure 4-10 you can see how multiple microservices (multiple BCs) each have their own model and how their entities can be defined, depending on the specific requirements for each of the identified domains in your application.</span></span>

![](./media/image10.png)

<span data-ttu-id="abb02-135">**Rysunek 4-10**.</span><span class="sxs-lookup"><span data-stu-id="abb02-135">**Figure 4-10**.</span></span> <span data-ttu-id="abb02-136">Identyfikowanie jednostek i granice modelu mikrousługi</span><span class="sxs-lookup"><span data-stu-id="abb02-136">Identifying entities and microservice model boundaries</span></span>

<span data-ttu-id="abb02-137">Rysunek 4-10 przedstawiono przykładowy scenariusz związane z system zarządzania konferencji w trybie online.</span><span class="sxs-lookup"><span data-stu-id="abb02-137">Figure 4-10 illustrates a sample scenario related to an online conference management system.</span></span> <span data-ttu-id="abb02-138">Zidentyfikowano kilka usług łączności biznesowej, które można implementować jako mikrousług, na podstawie domen, które ekspertów domeny zdefiniowane dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abb02-138">You have identified several BCs that could be implemented as microservices, based on domains that domain experts defined for you.</span></span> <span data-ttu-id="abb02-139">Jak widać, istnieją jednostki, które znajdują się tylko w modelu pojedynczego mikrousługi, takich jak płatności w mikrousługi płatności.</span><span class="sxs-lookup"><span data-stu-id="abb02-139">As you can see, there are entities that are present just in a single microservice model, like Payments in the Payment microservice.</span></span> <span data-ttu-id="abb02-140">Te będą łatwa do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="abb02-140">Those will be easy to implement.</span></span>

<span data-ttu-id="abb02-141">Jednak może być również jednostek, które mają różne kształtu, ale być współużytkowane przez wiele modeli domeny z wielu mikrousług tej samej tożsamości.</span><span class="sxs-lookup"><span data-stu-id="abb02-141">However, you might also have entities that have a different shape but share the same identity across the multiple domain models from the multiple microservices.</span></span> <span data-ttu-id="abb02-142">Na przykład jednostki użytkownika zostanie zidentyfikowana w mikrousługi konferencji zarządzania.</span><span class="sxs-lookup"><span data-stu-id="abb02-142">For example, the User entity is identified in the Conferences Management microservice.</span></span> <span data-ttu-id="abb02-143">Tego samego użytkownika o tej samej tożsamości jest elementem o nazwie kupujący w mikrousługi porządkowanie lub elementem o nazwie płatnika w mikrousługi płatności, a nawet jednego o nazwie klienta mikrousługi obsługi klienta.</span><span class="sxs-lookup"><span data-stu-id="abb02-143">That same user, with the same identity, is the one named Buyers in the Ordering microservice, or the one named Payer in the Payment microservice, and even the one named Customer in the Customer Service microservice.</span></span> <span data-ttu-id="abb02-144">Wynika to z faktu, w zależności od [powszechny języka](https://martinfowler.com/bliki/UbiquitousLanguage.html) czy używa ekspert każdej domeny, użytkownik może mieć inną perspektywę nawet z różnymi atrybutami.</span><span class="sxs-lookup"><span data-stu-id="abb02-144">This is because, depending on the [ubiquitous language](https://martinfowler.com/bliki/UbiquitousLanguage.html) that each domain expert is using, a user might have a different perspective even with different attributes.</span></span> <span data-ttu-id="abb02-145">Jednostki użytkownika w modelu mikrousługi o nazwie konferencji zarządzania może być najbardziej jego atrybuty danych osobowych.</span><span class="sxs-lookup"><span data-stu-id="abb02-145">The user entity in the microservice model named Conferences Management might have most of its personal data attributes.</span></span> <span data-ttu-id="abb02-146">Jednak tego samego użytkownika w kształcie płatnika mikrousługi płatności lub kształt odbiorcy mikrousługi obsługi klienta nie może być konieczne tę samą listę atrybutów.</span><span class="sxs-lookup"><span data-stu-id="abb02-146">However, that same user in the shape of Payer in the microservice Payment or in the shape of Customer in the microservice Customer Service might not need the same list of attributes.</span></span>

<span data-ttu-id="abb02-147">Podejście podobne przedstawiono w rysunek 4-11.</span><span class="sxs-lookup"><span data-stu-id="abb02-147">A similar approach is illustrated in Figure 4-11.</span></span>

![](./media/image11.png)

<span data-ttu-id="abb02-148">**Rysunek 4-11**.</span><span class="sxs-lookup"><span data-stu-id="abb02-148">**Figure 4-11**.</span></span> <span data-ttu-id="abb02-149">Decomposing modeli tradycyjnych danych do wielu modeli domeny</span><span class="sxs-lookup"><span data-stu-id="abb02-149">Decomposing traditional data models into multiple domain models</span></span>

<span data-ttu-id="abb02-150">Widać, jak użytkownik znajduje się w modelu mikrousługi zarządzania konferencji jako jednostki użytkownika i występuje również w postaci obiektu nabywców mikrousługi cennik, alternatywne atrybuty lub szczegóły użytkownika, gdy jest rzeczywiście kupujący.</span><span class="sxs-lookup"><span data-stu-id="abb02-150">You can see how the user is present in the Conferences Management microservice model as the User entity and is also present in the form of the Buyer entity in the Pricing microservice, with alternate attributes or details about the user when it is actually a buyer.</span></span> <span data-ttu-id="abb02-151">Każdy mikrousługi lub BC nie może być konieczne wszystkie dane związane z jednostki użytkownika, tylko część, w zależności od problem do rozwiązania lub kontekście.</span><span class="sxs-lookup"><span data-stu-id="abb02-151">Each microservice or BC might not need all the data related to a User entity, just part of it, depending on the problem to solve or the context.</span></span> <span data-ttu-id="abb02-152">Na przykład w modelu mikrousługi cennik, nie trzeba adres lub identyfikator użytkownika, wystarczy identyfikator (jako tożsamość) i stan, który będzie mieć wpływ na rabaty, gdy cennik miejsc na nabywców.</span><span class="sxs-lookup"><span data-stu-id="abb02-152">For instance, in the Pricing microservice model, you do not need the address or the ID of the user, just ID (as identity) and Status, which will have an impact on discounts when pricing the seats per buyer.</span></span>

<span data-ttu-id="abb02-153">Jednostka stanowisko ma taką samą nazwę, ale różnych atrybutów w każdym modelu domeny.</span><span class="sxs-lookup"><span data-stu-id="abb02-153">The Seat entity has the same name but different attributes in each domain model.</span></span> <span data-ttu-id="abb02-154">Jednak stanowisko udostępnia tożsamości oparte na tym samym identyfikatorze jak się dzieje z użytkownika i nabywców.</span><span class="sxs-lookup"><span data-stu-id="abb02-154">However, Seat shares identity based on the same ID, as happens with User and Buyer.</span></span>

<span data-ttu-id="abb02-155">Zasadniczo jest udostępniony koncepcji użytkownika, który istnieje w wielu usług (w domenach), których udostępnianie tożsamości danego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abb02-155">Basically, there is a shared concept of a user that exists in multiple services (domains), which all share the identity of that user.</span></span> <span data-ttu-id="abb02-156">Jednak w każdym modelu domeny może być dodatkowych lub innych szczegółów dotyczących jednostki użytkownika.</span><span class="sxs-lookup"><span data-stu-id="abb02-156">But in each domain model there might be additional or different details about the user entity.</span></span> <span data-ttu-id="abb02-157">W związku z tym musi istnieć mapują jednostki użytkownika z jednej domeny (mikrousługi) do innego.</span><span class="sxs-lookup"><span data-stu-id="abb02-157">Therefore, there needs to be a way to map a user entity from one domain (microservice) to another.</span></span>

<span data-ttu-id="abb02-158">Istnieje wiele zalet nie współużytkowanie tej samej jednostki użytkownika z taką samą liczbę atrybutów między domenami.</span><span class="sxs-lookup"><span data-stu-id="abb02-158">There are several benefits to not sharing the same user entity with the same number of attributes across domains.</span></span> <span data-ttu-id="abb02-159">Korzyścią jest ograniczenie duplikatów, dzięki czemu modele mikrousługi nie mają żadnych danych, która nie ma potrzeby.</span><span class="sxs-lookup"><span data-stu-id="abb02-159">One benefit is to reduce duplication, so that microservice models do not have any data that they do not need.</span></span> <span data-ttu-id="abb02-160">Kolejna korzyść związana występują mikrousługi wzorca, który jest właścicielem określonego typu danych na jednostkę tak, aby aktualizacje i zapytania dla tego typu danych pojawiają się tylko przy tym mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="abb02-160">Another benefit is having a master microservice that owns a certain type of data per entity so that updates and queries for that type of data are driven only by that microservice.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="abb02-161">[Poprzednie] (distributed-data-management.md) [dalej] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span><span class="sxs-lookup"><span data-stu-id="abb02-161">[Previous] (distributed-data-management.md) [Next] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)</span></span>
