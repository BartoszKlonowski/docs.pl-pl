---
title: Mikrousługi tworzenie, rozwijanie i przechowywanie wersji interfejsów API i kontraktów "
description: Tworzenie mikrousług interfejsów API i kontrakty, uwzględniając rozwój i przechowywanie wersji, ponieważ ulegnie zmianie.
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/20/2018
ms.openlocfilehash: 5d3e031217159a695b67f67859b8cf412a4419c2
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/10/2018
ms.locfileid: "53152542"
---
# <a name="creating-evolving-and-versioning-microservice-apis-and-contracts"></a><span data-ttu-id="24b8c-103">Mikrousługi tworzenie, rozwijanie i przechowywanie wersji interfejsów API i kontraktów "</span><span class="sxs-lookup"><span data-stu-id="24b8c-103">Creating, evolving, and versioning microservice APIs and contracts</span></span>

<span data-ttu-id="24b8c-104">Mikrousługi interfejsu API jest Umowa między usługą i swoich klientów.</span><span class="sxs-lookup"><span data-stu-id="24b8c-104">A microservice API is a contract between the service and its clients.</span></span> <span data-ttu-id="24b8c-105">Będzie można rozwijać mikrousługi niezależnie, tylko wtedy, gdy nie przerywaj, jej kontrakt interfejsu API, dlatego jest tak ważny kontrakt.</span><span class="sxs-lookup"><span data-stu-id="24b8c-105">You'll be able to evolve a microservice independently only if you do not break its API contract, which is why the contract is so important.</span></span> <span data-ttu-id="24b8c-106">W przypadku zmiany umowy, wpłynie to na aplikację kliencką lub bramy interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="24b8c-106">If you change the contract, it will impact your client applications or your API Gateway.</span></span>

<span data-ttu-id="24b8c-107">Zależy od rodzaju definicji interfejsu API, używasz protokołu.</span><span class="sxs-lookup"><span data-stu-id="24b8c-107">The nature of the API definition depends on which protocol you're using.</span></span> <span data-ttu-id="24b8c-108">Na przykład jeśli używasz komunikatów (takich jak [AMQP](https://www.amqp.org/)), interfejs API składa się z typów wiadomości.</span><span class="sxs-lookup"><span data-stu-id="24b8c-108">For instance, if you're using messaging (like [AMQP](https://www.amqp.org/)), the API consists of the message types.</span></span> <span data-ttu-id="24b8c-109">Jeśli używasz protokołu HTTP i usług RESTful, interfejs API składa się z adresów URL i formatów żądania i odpowiedzi w formacie JSON.</span><span class="sxs-lookup"><span data-stu-id="24b8c-109">If you're using HTTP and RESTful services, the API consists of the URLs and the request and response JSON formats.</span></span>

<span data-ttu-id="24b8c-110">Jednak nawet jeśli jesteś przydatnego o początkowej umowy, interfejs API usługi należy zmieniać wraz z upływem czasu.</span><span class="sxs-lookup"><span data-stu-id="24b8c-110">However, even if you're thoughtful about your initial contract, a service API will need to change over time.</span></span> <span data-ttu-id="24b8c-111">Kiedy tak się stanie, i zwłaszcza, jeśli Twój interfejs API jest publiczny interfejs API używane przez wiele aplikacji klienckich — zwykle nie może wymusić wszystkich klientów, aby uaktualnić do swojej nowej kontrakt interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="24b8c-111">When that happens—and especially if your API is a public API consumed by multiple client applications — you typically can't force all clients to upgrade to your new API contract.</span></span> <span data-ttu-id="24b8c-112">Zazwyczaj należy stopniowo wdrażanie nowych wersji usługi w taki sposób, aby jednocześnie jest uruchomionych zarówno stare i nowe wersje kontraktu usługi.</span><span class="sxs-lookup"><span data-stu-id="24b8c-112">You usually need to incrementally deploy new versions of a service in a way that both old and new versions of a service contract are running simultaneously.</span></span> <span data-ttu-id="24b8c-113">W związku z tym ważne jest zapewnienie strategię dla usługi przechowywanie wersji usługi.</span><span class="sxs-lookup"><span data-stu-id="24b8c-113">Therefore, it's important to have a strategy for your service versioning.</span></span>

<span data-ttu-id="24b8c-114">Podczas zmiany interfejsu API są małe, np. Jeśli dodać atrybuty lub parametrów z interfejsem API, klientów korzystających z interfejsu API starszych należy przełączyć i pracować z nową wersję usługi.</span><span class="sxs-lookup"><span data-stu-id="24b8c-114">When the API changes are small, like if you add attributes or parameters to your API, clients that use an older API should switch and work with the new version of the service.</span></span> <span data-ttu-id="24b8c-115">Można podać wartości domyślne dla brakujących atrybutów, które są wymagane, a klienci mogą być w stanie ignoruje wszelkie atrybuty dodatkowe odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="24b8c-115">You might be able to provide default values for any missing attributes that are required, and the clients might be able to ignore any extra response attributes.</span></span>

<span data-ttu-id="24b8c-116">Jednak czasami musisz wprowadzić zmiany głównej lub niezgodne przez interfejs API usługi.</span><span class="sxs-lookup"><span data-stu-id="24b8c-116">However, sometimes you need to make major and incompatible changes to a service API.</span></span> <span data-ttu-id="24b8c-117">Ponieważ nie można wymusić klienta aplikacji lub usług, aby natychmiast przeprowadzić uaktualnienie do nowej wersji, usługa musi obsługiwać starsze wersje interfejsu API przez pewien.</span><span class="sxs-lookup"><span data-stu-id="24b8c-117">Because you might not be able to force client applications or services to upgrade immediately to the new version, a service must support older versions of the API for some period.</span></span> <span data-ttu-id="24b8c-118">Jeśli używasz mechanizm oparty na protokole HTTP, takich jak REST jedno z podejść jest osadzenie numer wersji interfejsu API, w adresie URL lub w nagłówku HTTP.</span><span class="sxs-lookup"><span data-stu-id="24b8c-118">If you're using an HTTP-based mechanism such as REST, one approach is to embed the API version number in the URL or into an HTTP header.</span></span> <span data-ttu-id="24b8c-119">Następnie możesz zdecydować, czy między Implementowanie obie wersje usługi jednocześnie w ramach tego samego wystąpienia usługi lub wdrażanie różnych wystąpień, że każda obsługuje wersję interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="24b8c-119">Then you can decide between implementing both versions of the service simultaneously within the same service instance, or deploying different instances that each handle a version of the API.</span></span> <span data-ttu-id="24b8c-120">To dobra metoda dla tego [wzorzec mediatora](https://en.wikipedia.org/wiki/Mediator_pattern) (na przykład [MediatR biblioteki](https://github.com/jbogard/MediatR)) do oddzielenia wersje inną implementację do obsługi niezależnie od.</span><span class="sxs-lookup"><span data-stu-id="24b8c-120">A good approach for this is the [Mediator pattern](https://en.wikipedia.org/wiki/Mediator_pattern) (for example, [MediatR library](https://github.com/jbogard/MediatR)) to decouple the different implementation versions into independent handlers.</span></span>

<span data-ttu-id="24b8c-121">Na koniec, jeśli użytkownik korzysta z architektury REST [Hipermediach](https://www.infoq.com/articles/mark-baker-hypermedia) jest najlepsze rozwiązanie w zakresie przechowywania wersji usługi, dzięki czemu evolvable interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="24b8c-121">Finally, if you're using a REST architecture, [Hypermedia](https://www.infoq.com/articles/mark-baker-hypermedia) is the best solution for versioning your services and allowing evolvable APIs.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="24b8c-122">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="24b8c-122">Additional resources</span></span>

- <span data-ttu-id="24b8c-123">**Scott Hanselman. Przechowywanie wersji internetowy interfejs API RESTful platformy ASP.NET Core łatwe** \\</span><span class="sxs-lookup"><span data-stu-id="24b8c-123">**Scott Hanselman. ASP.NET Core RESTful Web API versioning made easy** \\</span></span>
  [*https://www.hanselman.com/blog/ASPNETCoreRESTfulWebAPIVersioningMadeEasy.aspx*](https://www.hanselman.com/blog/ASPNETCoreRESTfulWebAPIVersioningMadeEasy.aspx)

- <span data-ttu-id="24b8c-124">**Przechowywanie wersji internetowego interfejsu API RESTful** \\</span><span class="sxs-lookup"><span data-stu-id="24b8c-124">**Versioning a RESTful web API** \\</span></span>
  [*https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api*](https://docs.microsoft.com/azure/architecture/best-practices/api-design#versioning-a-restful-web-api)

- <span data-ttu-id="24b8c-125">**Roy Fielding. Przechowywanie wersji, Hipermediach i REST** \\</span><span class="sxs-lookup"><span data-stu-id="24b8c-125">**Roy Fielding. Versioning, Hypermedia, and REST** \\</span></span>
  [*https://www.infoq.com/articles/roy-fielding-on-versioning*](https://www.infoq.com/articles/roy-fielding-on-versioning)

>[!div class="step-by-step"]
><span data-ttu-id="24b8c-126">[Poprzednie](asynchronous-message-based-communication.md)
>[dalej](microservices-addressability-service-registry.md)</span><span class="sxs-lookup"><span data-stu-id="24b8c-126">[Previous](asynchronous-message-based-communication.md)
[Next](microservices-addressability-service-registry.md)</span></span>