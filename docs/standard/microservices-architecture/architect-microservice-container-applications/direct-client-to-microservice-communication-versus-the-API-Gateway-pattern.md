---
title: Bezpośrednia komunikacja klient mikrousługi i wzorzec bramy interfejsu API
description: Architektura Mikrousług .NET dla aplikacji .NET konteneryzowanych | Bezpośrednia komunikacja klient mikrousługi i wzorzec bramy interfejsu API
keywords: Docker, Mikrousług, ASP.NET, kontenera, bramy interfejsu API
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/18/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: fa3f4bb97cf942ee7698b1efa1dcd09b3f2ca571
ms.sourcegitcommit: 2e8acae16ae802f2d6d04e3ce0a6dbf04e476513
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/18/2018
---
# <a name="direct-client-to-microservice-communication-versus-the-api-gateway-pattern"></a><span data-ttu-id="b51f5-104">Bezpośrednia komunikacja klient mikrousługi i wzorzec bramy interfejsu API</span><span class="sxs-lookup"><span data-stu-id="b51f5-104">Direct client-to-microservice communication versus the API Gateway pattern</span></span>

<span data-ttu-id="b51f5-105">W architekturze mikrousług każdego mikrousługi udostępnia zestaw (zwykle) fine‑grained punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="b51f5-105">In a microservices architecture, each microservice exposes a set of (typically) fine‑grained endpoints.</span></span> <span data-ttu-id="b51f5-106">Ten fakt może wpływać na komunikacji client‑to‑microservice, zgodnie z objaśnieniem w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="b51f5-106">This fact can impact the client‑to‑microservice communication, as explained in this section.</span></span>

## <a name="direct-client-to-microservice-communication"></a><span data-ttu-id="b51f5-107">Bezpośrednia komunikacja klient mikrousługi</span><span class="sxs-lookup"><span data-stu-id="b51f5-107">Direct client-to-microservice communication</span></span>

<span data-ttu-id="b51f5-108">Jest możliwe podejście do użycia z architektury bezpośrednia komunikacja klient mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="b51f5-108">A possible approach is to use a direct client-to-microservice communication architecture.</span></span> <span data-ttu-id="b51f5-109">W tym podejście aplikacji klienckiej mogą wysyłać żądania bezpośrednio do niektórych mikrousług, jak pokazano na rysunku 4-12.</span><span class="sxs-lookup"><span data-stu-id="b51f5-109">In this approach, a client app can make requests directly to some of the microservices, as shown in Figure 4-12.</span></span>

![](./media/image12.png)

<span data-ttu-id="b51f5-110">**Rysunek 4-12**.</span><span class="sxs-lookup"><span data-stu-id="b51f5-110">**Figure 4-12**.</span></span> <span data-ttu-id="b51f5-111">Przy użyciu architektury bezpośrednia komunikacja klient mikrousługi</span><span class="sxs-lookup"><span data-stu-id="b51f5-111">Using a direct client-to-microservice communication architecture</span></span>

<span data-ttu-id="b51f5-112">W tej metody.</span><span class="sxs-lookup"><span data-stu-id="b51f5-112">In this approach.</span></span> <span data-ttu-id="b51f5-113">Każdy mikrousługi ma publiczny punkt końcowy, niekiedy z różnych portów TCP dla każdego mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="b51f5-113">each microservice has a public endpoint, sometimes with a different TCP port for each microservice.</span></span> <span data-ttu-id="b51f5-114">Przykładowy adres URL dla określonej usługi może być następujący adres URL na platformie Azure:</span><span class="sxs-lookup"><span data-stu-id="b51f5-114">An example of a URL for a particular service could be the following URL in Azure:</span></span>

<http://eshoponcontainers.westus.cloudapp.azure.com:88/>

<span data-ttu-id="b51f5-115">W środowisku produkcyjnym, oparty na klastrze, mapującej adres URL do modułu równoważenia obciążenia używanych w klastrze, który z kolei rozdzielaj żądania między mikrousług.</span><span class="sxs-lookup"><span data-stu-id="b51f5-115">In a production environment based on a cluster, that URL would map to the load balancer used in the cluster, which in turn distributes the requests across the microservices.</span></span> <span data-ttu-id="b51f5-116">W środowiskach produkcyjnych, może mieć aplikacji dostarczania kontrolera (ADC) jak [brama aplikacji w usłudze Azure](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) Twojego mikrousług od Internetu.</span><span class="sxs-lookup"><span data-stu-id="b51f5-116">In production environments, you could have an Application Delivery Controller (ADC) like [Azure Application Gateway](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) between your microservices and the Internet.</span></span> <span data-ttu-id="b51f5-117">To dodatkowe przezroczyste warstwy, która nie przeprowadza równoważenia obciążenia tylko zabezpiecza oferując kończenia żądań SSL z usługami.</span><span class="sxs-lookup"><span data-stu-id="b51f5-117">This acts as a transparent tier that not only performs load balancing, but secures your services by offering SSL termination.</span></span> <span data-ttu-id="b51f5-118">Zwiększa to obciążenia hosty dzięki przeniesieniu kończenia żądań SSL użycie Procesora CPU i inne routingu obowiązków na bramie aplikacji Azure.</span><span class="sxs-lookup"><span data-stu-id="b51f5-118">This improves the load of your hosts by offloading CPU-intensive SSL termination and other routing duties to the Azure Application Gateway.</span></span> <span data-ttu-id="b51f5-119">W każdym przypadku modułu równoważenia obciążenia i ADC są niewidoczne z aplikacji logicznych architektura punktu widzenia.</span><span class="sxs-lookup"><span data-stu-id="b51f5-119">In any case, a load balancer and ADC are transparent from a logical application architecture point of view.</span></span>

<span data-ttu-id="b51f5-120">Architektura bezpośrednia komunikacja klient mikrousługi może to być dobry małych aplikacji opartej na mikrousługi, szczególnie w przypadku aplikacji klienckiej aplikacji sieci web po stronie serwera, takie jak aplikacja ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="b51f5-120">A direct client-to-microservice communication architecture could be good enough for a small microservice-based application, especially if the client app is a server-side web application like an ASP.NET MVC app.</span></span> <span data-ttu-id="b51f5-121">Jednak podczas kompilowania dużych i złożonych aplikacji opartych na mikrousługi (na przykład podczas obsługi wielu rodzajów mikrousługi), a szczególnie w przypadku aplikacji klienta zdalnego aplikacji mobilnych lub aplikacji sieci web SPA tego podejścia skierowany kilka problemów.</span><span class="sxs-lookup"><span data-stu-id="b51f5-121">However, when you build large and complex microservice-based applications (for example, when handling dozens of microservice types), and especially when the client apps are remote mobile apps or SPA web applications, that approach faces a few issues.</span></span>

<span data-ttu-id="b51f5-122">Podczas tworzenia dużej aplikacji oparte na mikrousług, należy wziąć pod uwagę następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="b51f5-122">Consider the following questions when developing a large application based on microservices:</span></span>

-   <span data-ttu-id="b51f5-123">*Jak aplikacje klienckie zminimalizować liczbę żądań do wewnętrznej bazy danych i zmniejszyć chatty komunikacji wielu mikrousług?*</span><span class="sxs-lookup"><span data-stu-id="b51f5-123">*How can client apps minimize the number of requests to the backend and reduce chatty communication to multiple microservices?*</span></span>

<span data-ttu-id="b51f5-124">Interakcji z wieloma mikrousług do tworzenia jednym ekranie interfejsu użytkownika zwiększa liczbę dwukierunkowe przesyłanie danych do Internetu.</span><span class="sxs-lookup"><span data-stu-id="b51f5-124">Interacting with multiple microservices to build a single UI screen increases the number of roundtrips across the Internet.</span></span> <span data-ttu-id="b51f5-125">Zwiększa to opóźnienie i złożoność po stronie interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b51f5-125">This increases latency and complexity on the UI side.</span></span> <span data-ttu-id="b51f5-126">W idealnym przypadku odpowiedzi wydajnie agregowania po stronie serwera — zmniejsza to opóźnienia, ponieważ wiele rodzajów danych wróć równolegle i niektóre interfejsu użytkownika można wyświetlić danych, jak jest gotowy.</span><span class="sxs-lookup"><span data-stu-id="b51f5-126">Ideally, responses should be efficiently aggregated in the server side—this reduces latency, since multiple pieces of data come back in parallel and some UI can show data as soon as it is ready.</span></span>

-   <span data-ttu-id="b51f5-127">*Jak można obsługiwać kompleksowymi problemów, takich jak autoryzacja, przekształcenia danych i wysyła żądanie dynamiczne?*</span><span class="sxs-lookup"><span data-stu-id="b51f5-127">*How can you handle cross-cutting concerns such as authorization, data transformations, and dynamic request dispatching?*</span></span>

<span data-ttu-id="b51f5-128">Implementacja zabezpieczeń oraz kompleksowymi problemy, np. zabezpieczeń i uwierzytelniania w każdym mikrousługi może wymagać znaczących nakład pracy.</span><span class="sxs-lookup"><span data-stu-id="b51f5-128">Implementing security and cross-cutting concerns like security and authorization on every microservice can require significant development effort.</span></span> <span data-ttu-id="b51f5-129">Możliwe rozwiązania jest tych usług w ramach hostów Docker lub wewnątrz klastra, aby ograniczyć bezpośredni dostęp do nich z zewnątrz i do zaimplementowania tych problemów kompleksowymi w centralnym miejscu, podobnie jak bramy usługi interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b51f5-129">A possible approach is to have those services within the Docker host or internal cluster, in order to restrict direct access to them from the outside, and to implement those cross-cutting concerns in a centralized place, like an API Gateway.</span></span>

-   <span data-ttu-id="b51f5-130">*Jak aplikacje klienckie mogą komunikować się z usług, które używają protokołów innych niż przyjazne Internet?*</span><span class="sxs-lookup"><span data-stu-id="b51f5-130">*How can client apps communicate with services that use non-Internet-friendly protocols?*</span></span>

<span data-ttu-id="b51f5-131">Protokoły używane po stronie serwera (na przykład protokołu AMQP lub protokołów binarnych) zwykle nie są obsługiwane w aplikacjach klienckich.</span><span class="sxs-lookup"><span data-stu-id="b51f5-131">Protocols used on the server side (like AMQP or binary protocols) are usually not supported in client apps.</span></span> <span data-ttu-id="b51f5-132">W związku z tym żądania musi być wykonywane za pośrednictwem protokołów, takich jak HTTP/HTTPS i później translacji na innych protokołów.</span><span class="sxs-lookup"><span data-stu-id="b51f5-132">Therefore, requests must be performed through protocols like HTTP/HTTPS and translated to the other protocols afterwards.</span></span> <span data-ttu-id="b51f5-133">A *man-in--middle* może pomóc w takiej sytuacji.</span><span class="sxs-lookup"><span data-stu-id="b51f5-133">A *man-in-the-middle* approach can help in this situation.</span></span>

-   <span data-ttu-id="b51f5-134">*Jak można kształtu fasad, szczególnie wprowadzone dla aplikacji mobilnych*</span><span class="sxs-lookup"><span data-stu-id="b51f5-134">*How can you shape a façade especially made for mobile apps?*</span></span>

<span data-ttu-id="b51f5-135">Interfejs API z wielu mikrousług może nie dobrze zaprojektowanej na potrzeby aplikacji innego klienta.</span><span class="sxs-lookup"><span data-stu-id="b51f5-135">The API of multiple microservices might not be well designed for the needs of different client applications.</span></span> <span data-ttu-id="b51f5-136">Na przykład na potrzeby aplikacji mobilnej może różnić się od potrzeb aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="b51f5-136">For instance, the needs of a mobile app might be different than the needs of a web app.</span></span> <span data-ttu-id="b51f5-137">Dla aplikacji mobilnych konieczne może być jeszcze bardziej zoptymalizować tak, aby dane odpowiedzi może być skuteczniejsza.</span><span class="sxs-lookup"><span data-stu-id="b51f5-137">For mobile apps, you might need to optimize even further so that data responses can be more efficient.</span></span> <span data-ttu-id="b51f5-138">Może to zrobić przez agregowanie danych z wielu mikrousług i zwracanie jednego zestawu danych, a czasami wyeliminowanie żadnych danych w odpowiedzi, które nie są wymagane przez aplikację mobilną.</span><span class="sxs-lookup"><span data-stu-id="b51f5-138">You might do this by aggregating data from multiple microservices and returning a single set of data, and sometimes eliminating any data in the response that is not needed by the mobile app.</span></span> <span data-ttu-id="b51f5-139">I oczywiście można kompresować dane.</span><span class="sxs-lookup"><span data-stu-id="b51f5-139">And, of course, you might compress that data.</span></span> <span data-ttu-id="b51f5-140">Ponownie fasad lub interfejsu API Between aplikacji mobilnej i mikrousług mogą być użyteczne dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="b51f5-140">Again, a façade or API in between the mobile app and the microservices can be convenient for this scenario.</span></span>

## <a name="using-an-api-gateway"></a><span data-ttu-id="b51f5-141">Przy użyciu bramy interfejsu API</span><span class="sxs-lookup"><span data-stu-id="b51f5-141">Using an API Gateway</span></span>

<span data-ttu-id="b51f5-142">Podczas projektowania i tworzenie dużych lub złożonych mikrousługi aplikacji z wielu klientów aplikacji może być dobrym sposobem należy wziąć pod uwagę [bramy interfejsu API](https://microservices.io/patterns/apigateway.html).</span><span class="sxs-lookup"><span data-stu-id="b51f5-142">When you design and build large or complex microservice-based applications with multiple client apps, a good approach to consider can be an [API Gateway](https://microservices.io/patterns/apigateway.html).</span></span> <span data-ttu-id="b51f5-143">Jest to usługa, która zapewnia jeden punkt wejścia dla niektórych grup mikrousług.</span><span class="sxs-lookup"><span data-stu-id="b51f5-143">This is a service that provides a single entry point for certain groups of microservices.</span></span> <span data-ttu-id="b51f5-144">Jest on podobny do [wzorzec fasady](https://en.wikipedia.org/wiki/Facade_pattern) od object‑oriented projektu, ale w takim przypadku jest częścią systemu rozproszonego.</span><span class="sxs-lookup"><span data-stu-id="b51f5-144">It is similar to the [Facade pattern](https://en.wikipedia.org/wiki/Facade_pattern) from object‑oriented design, but in this case, it is part of a distributed system.</span></span> <span data-ttu-id="b51f5-145">Wzorzec bramy interfejsu API jest również nazywany "wewnętrzna frontonu" [(BFF)](https://samnewman.io/patterns/architectural/bff/) ponieważ skompiluj go podczas planowania na potrzeby aplikacji klienckiej.</span><span class="sxs-lookup"><span data-stu-id="b51f5-145">The API Gateway pattern is also sometimes known as the “backend for frontend” [(BFF)](https://samnewman.io/patterns/architectural/bff/) because you build it while thinking about the needs of the client app.</span></span>

<span data-ttu-id="b51f5-146">Rysunek 4-13 przedstawiono, jak brama niestandardowego interfejsu API można umieścić w architektura mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="b51f5-146">Figure 4-13 shows how a custom API Gateway can fit into a microservice-based architecture.</span></span>
<span data-ttu-id="b51f5-147">Ważne jest, aby wyróżnić który na tym diagramie, jak można przy użyciu jednej usługi interfejsu API bramy niestandardowych skierowane w wielu i aplikacjach innego klienta.</span><span class="sxs-lookup"><span data-stu-id="b51f5-147">It is important to highlight that in that diagram, you would be using a single custom API Gateway service facing multiple and different client apps.</span></span> <span data-ttu-id="b51f5-148">Fakt można poważne zagrożenie, ponieważ usługi bramy interfejsu API zostanie powiększania i zmieniających się na podstawie wielu różne wymagania z aplikacji klienta.</span><span class="sxs-lookup"><span data-stu-id="b51f5-148">That fact can be an important risk because your API Gateway service will be growing and evolving based on many different requirements from the client apps.</span></span> <span data-ttu-id="b51f5-149">Po pewnym czasie będzie przeglądarek z powodu tych różnych potrzeb i efektywnie może być bardzo podobna do wbudowanymi aplikacji lub usługi wbudowanymi.</span><span class="sxs-lookup"><span data-stu-id="b51f5-149">Eventually, it will be bloated because of those different needs and effectively it could be pretty similar to a monolithic application or monolithic service.</span></span> <span data-ttu-id="b51f5-150">To jest znacznie zalecane jest podzielenie bramy interfejsu API w wielu usługach lub wielu mniejszych interfejsu API bram, po jednym dla każdego typu obudowie dla wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="b51f5-150">That is why it is very much recommended to split the API Gateway in multiple services or multiple smaller API Gateways, one per form-factor type, for instance.</span></span>

![](./media/image13.png)

<span data-ttu-id="b51f5-151">**Rysunek 4-13**.</span><span class="sxs-lookup"><span data-stu-id="b51f5-151">**Figure 4-13**.</span></span> <span data-ttu-id="b51f5-152">Przy użyciu bramy interfejsu API zaimplementowano ją jako niestandardowe usługi interfejsu API sieci Web</span><span class="sxs-lookup"><span data-stu-id="b51f5-152">Using an API Gateway implemented as a custom Web API service</span></span>

<span data-ttu-id="b51f5-153">W tym przykładzie brama interfejsu API będzie można zaimplementować jako niestandardowego interfejsu API sieci Web usługi uruchomione jako kontener.</span><span class="sxs-lookup"><span data-stu-id="b51f5-153">In this example, the API Gateway would be implemented as a custom Web API service running as a container.</span></span>

<span data-ttu-id="b51f5-154">Jak wspomniano, należy zaimplementować kilka bram interfejsu API, dzięki czemu mają różne fasad na potrzeby każdej aplikacji klienta.</span><span class="sxs-lookup"><span data-stu-id="b51f5-154">As mentioned, you should implement several API Gateways so that you can have a different façade for the needs of each client app.</span></span> <span data-ttu-id="b51f5-155">Każdej bramy interfejsu API zapewniają innego interfejsu API dostosowane do każdej aplikacji klienta, prawdopodobnie nawet na podstawie współczynnika formularza klienta przez wdrażania kodu określonych kart, które na dole wywołuje wiele wewnętrznych mikrousług.</span><span class="sxs-lookup"><span data-stu-id="b51f5-155">Each API Gateway can provide a different API tailored for each client app, possibly even based on the client form factor by implementing specific adapter code which underneath calls multiple internal microservices.</span></span>

<span data-ttu-id="b51f5-156">Ponieważ brama niestandardowego interfejsu API jest zazwyczaj agregatora danych, musisz należy zachować ostrożność z nim.</span><span class="sxs-lookup"><span data-stu-id="b51f5-156">Since a custom API Gateway is usually a data aggregator, you need to be careful with it.</span></span> <span data-ttu-id="b51f5-157">Zwykle nie jest dobrym pomysłem jest mieć pojedynczy bramy interfejsu API agregowanie wszystkich mikrousług wewnętrznych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b51f5-157">Usually it isn't a good idea to have a single API Gateway aggregating all the internal microservices of your application.</span></span> <span data-ttu-id="b51f5-158">Jeśli tak, działa jako wbudowanymi agregator lub orchestrator i narusza Autonomia mikrousługi przez wszystkie mikrousług sprzężenia.</span><span class="sxs-lookup"><span data-stu-id="b51f5-158">If it does, it acts as a monolithic aggregator or orchestrator and violates microservice autonomy by coupling all the microservices.</span></span> <span data-ttu-id="b51f5-159">W związku z tym bram interfejsu API powinno rozdzielony na podstawie granice biznesowych i nie act jako agregatora dla całej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b51f5-159">Therefore, the API Gateways should be segregated based on business boundaries and not act as an aggregator for the whole application.</span></span>

<span data-ttu-id="b51f5-160">Czasami szczegółowego bramy interfejsu API można również mieć mikrousługi samodzielnie, a nawet mieć domeny lub nazwy firmy i powiązane dane.</span><span class="sxs-lookup"><span data-stu-id="b51f5-160">Sometimes a granular API Gateway can also be a microservice by itself, and even have a domain or business name and related data.</span></span> <span data-ttu-id="b51f5-161">O granice bramy interfejsu API ustawieniem firmy lub domeny pomogą uzyskać lepsze projektu.</span><span class="sxs-lookup"><span data-stu-id="b51f5-161">Having the API Gateway’s boundaries dictated by the business or domain will help you to get a better design.</span></span>

<span data-ttu-id="b51f5-162">Może być szczególnie przydatna w przypadku bardziej zaawansowanych aplikacji złożonych interfejsu użytkownika oparte na mikrousług, szczegółowości w warstwie bramy interfejsu API, ponieważ pojęcie szczegółowych bramy interfejsu API jest podobny do interfejsu użytkownika usługi kompozycji.</span><span class="sxs-lookup"><span data-stu-id="b51f5-162">Granularity in the API Gateway tier can be especially useful for more advanced composite UI applications based on microservices, because the concept of a fine-grained API Gateway is similar to a UI composition service.</span></span> <span data-ttu-id="b51f5-163">Omówiono to później w [Tworzenie złożonego interfejsu użytkownika oparte na mikrousług](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span><span class="sxs-lookup"><span data-stu-id="b51f5-163">We discuss this later in the [Creating composite UI based on microservices](#creating-composite-ui-based-on-microservices-including-visual-ui-shape-and-layout-generated-by-multiple-microservices).</span></span>

<span data-ttu-id="b51f5-164">W związku z tym dla wielu aplikacji i dużych średniego, przy użyciu niestandardowej bramy interfejsu API jest zwykle dobry podejście, ale nie jako pojedynczy agregatora wbudowanymi lub unikatowy centralnej bramy niestandardowego interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b51f5-164">Therefore, for many medium- and large-size applications, using a custom-built API Gateway is usually a good approach, but not as a single monolithic aggregator or unique central custom API Gateway.</span></span>

<span data-ttu-id="b51f5-165">Innym rozwiązaniem jest użycie produktu, takich jak [Azure API Management](https://azure.microsoft.com/services/api-management/) jak pokazano w rysunek 4-14.</span><span class="sxs-lookup"><span data-stu-id="b51f5-165">Another approach is to use a product like [Azure API Management](https://azure.microsoft.com/services/api-management/) as shown in Figure 4-14.</span></span> <span data-ttu-id="b51f5-166">Takie podejście, nie tylko rozwiązuje potrzeb bramy interfejsu API, ale zawiera funkcje, takie jak zbieranie szczegółowych informacji z swoje interfejsy API.</span><span class="sxs-lookup"><span data-stu-id="b51f5-166">This approach not only solves your API Gateway needs, but provides features like gathering insights from your APIs.</span></span> <span data-ttu-id="b51f5-167">Jeśli korzystasz z interfejsu API rozwiązania do zarządzania, bramę interfejsu API jest tylko składnik w tym pełnego rozwiązania do zarządzania interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b51f5-167">If you are using an API management solution, an API Gateway is only a component within that full API management solution.</span></span>

![](./media/image14.png)

<span data-ttu-id="b51f5-168">**Rysunek 4-14**.</span><span class="sxs-lookup"><span data-stu-id="b51f5-168">**Figure 4-14**.</span></span> <span data-ttu-id="b51f5-169">Za pomocą usługi Azure API Management bramy interfejsu API</span><span class="sxs-lookup"><span data-stu-id="b51f5-169">Using Azure API Management for your API Gateway</span></span>

<span data-ttu-id="b51f5-170">W takim przypadku przy użyciu produktu, takich jak Azure API Management, fakt, że może być pojedyncza brama interfejsu API nie jest więc ryzykowne ponieważ tego rodzaju bram interfejsu API są "grubsza", co oznacza, że nie implementują niestandardowego kodu C#, który można przekształcenia wbudowanymi składnik.</span><span class="sxs-lookup"><span data-stu-id="b51f5-170">In this case, when using a product like Azure API Management, the fact that you might have a single API Gateway is not so risky because these kinds of API Gateways are "thinner", meaning that you don't implement custom C# code that could evolve towards a monolithic component.</span></span> 

<span data-ttu-id="b51f5-171">Ten typ produktu więcej działa jak zwrotny serwer proxy dla komunikacji wejściowych, można gdzie także filtrować interfejsy API z wewnętrznego mikrousług oraz dotyczą autoryzacji opublikowanych interfejsów API w tej warstwie pojedynczego.</span><span class="sxs-lookup"><span data-stu-id="b51f5-171">This type of product acts more like a reverse proxy for ingress communication, where you can also filter the APIs from the internal microservices plus apply authorization to the published APIs in this single tier.</span></span>

<span data-ttu-id="b51f5-172">Dostępne z pomocy systemu zarządzanie interfejsami API szczegółowych danych zawierają opis sposobu używania swoje interfejsy API i jak są wykonywane.</span><span class="sxs-lookup"><span data-stu-id="b51f5-172">The insights available from an API Management system help you get an understanding of how your APIs are being used and how they are performing.</span></span> <span data-ttu-id="b51f5-173">Robią to, co pozwala wyświetlać niemal analiz w czasie rzeczywistym raporty oraz identyfikowanie trendów, które mogą mieć wpływ na firmy.</span><span class="sxs-lookup"><span data-stu-id="b51f5-173">They do this by letting you view near real-time analytics reports and identifying trends that might impact your business.</span></span> <span data-ttu-id="b51f5-174">Ponadto można mieć dzienniki o działaniu żądania i odpowiedzi w celu dalszej analizy online i offline.</span><span class="sxs-lookup"><span data-stu-id="b51f5-174">Plus, you can have logs about request and response activity for further online and offline analysis.</span></span>

<span data-ttu-id="b51f5-175">Z usługą Azure API Management można zabezpieczyć swoje interfejsy API przy użyciu klucza, token i filtrowanie IP.</span><span class="sxs-lookup"><span data-stu-id="b51f5-175">With Azure API Management, you can secure your APIs using a key, a token, and IP filtering.</span></span> <span data-ttu-id="b51f5-176">Te funkcje umożliwiają wymuszanie przydziały elastyczne i szczegółowych i limity szybkości, zmodyfikować kształt i zachowanie swoje interfejsy API przy użyciu zasad i poprawić wydajność z buforowania odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="b51f5-176">These features let you enforce flexible and fine-grained quotas and rate limits, modify the shape and behavior of your APIs using policies, and improve performance with response caching.</span></span>

<span data-ttu-id="b51f5-177">W tym przewodniku i odwołanie przykładowej aplikacji (eShopOnContainers) aby skupić się na zwykły kontenery bez użycia PaaS produktów, takich jak zarządzanie interfejsami API Azure możemy są ograniczanie architektury konteneryzowanych architektura prostszy i utworzone przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b51f5-177">In this guide and the reference sample application (eShopOnContainers), we are limiting the architecture to a simpler and custom-made containerized architecture in order to focus on plain containers without using PaaS products like Azure API Management.</span></span> <span data-ttu-id="b51f5-178">Jednak duża mikrousługi aplikacji wdrażanych w Microsoft Azure, firma Microsoft zachęca do przeglądu i wdrożyć usługę Azure API Management jako podstawa dla bram sieci interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="b51f5-178">But for large microservice-based applications that are deployed into Microsoft Azure, we encourage you to review and adopt Azure API Management as the base for your API Gateways.</span></span>

## <a name="drawbacks-of-the-api-gateway-pattern"></a><span data-ttu-id="b51f5-179">Wady wzorca bramy interfejsu API</span><span class="sxs-lookup"><span data-stu-id="b51f5-179">Drawbacks of the API Gateway pattern</span></span>

-   <span data-ttu-id="b51f5-180">Najważniejsze wadą jest to, że podczas implementowania interfejsu API bramy są sprzężenia warstwa z wewnętrznego mikrousług.</span><span class="sxs-lookup"><span data-stu-id="b51f5-180">The most important drawback is that when you implement an API Gateway, you are coupling that tier with the internal microservices.</span></span> <span data-ttu-id="b51f5-181">Sprzężenia w następujący sposób może powodować poważne problemy dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b51f5-181">Coupling like this might introduce serious difficulties for your application.</span></span> <span data-ttu-id="b51f5-182">Vaster Clemens architektów w zespół usługi Azure Service Bus odwołuje się do tego potencjalne problemy jako "nowe ESB" w jego "[obsługi wiadomości i Mikrousług](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" sesji na GOTO 2016.</span><span class="sxs-lookup"><span data-stu-id="b51f5-182">Clemens Vaster, architect at the Azure Service Bus team, refers to this potential difficulty as “the new ESB” in his "[Messaging and Microservices](https://www.youtube.com/watch?v=rXi5CLjIQ9k)" session at GOTO 2016.</span></span>

-   <span data-ttu-id="b51f5-183">Przy użyciu mikrousług interfejsu API bramy tworzy dodatkowe możliwości pojedynczego punktu awarii.</span><span class="sxs-lookup"><span data-stu-id="b51f5-183">Using a microservices API Gateway creates an additional possible single point of failure.</span></span>

-   <span data-ttu-id="b51f5-184">Brama usługi interfejsu API można wprowadzać czas odpowiedzi zwiększona z powodu wywołania dodatkowe sieci.</span><span class="sxs-lookup"><span data-stu-id="b51f5-184">An API Gateway can introduce increased response time due to the additional network call.</span></span> <span data-ttu-id="b51f5-185">To wywołanie dodatkowe ma zazwyczaj mniej wpływ niż o kliencie interfejs, który jest zbyt chatty bezpośrednio wywołać wewnętrzny mikrousług.</span><span class="sxs-lookup"><span data-stu-id="b51f5-185">However, this extra call usually has less impact than having a client interface that is too chatty directly calling the internal microservices.</span></span>

-   <span data-ttu-id="b51f5-186">Brama interfejsu API nie skalować w poziomie prawidłowo, może być wąskiego gardła.</span><span class="sxs-lookup"><span data-stu-id="b51f5-186">If not scaled out properly, the API Gateway can become a bottleneck.</span></span>

-   <span data-ttu-id="b51f5-187">Bramy usługi interfejsu API wymaga programowanie dodatkowych kosztów i konserwacji w przyszłości, jeśli zawiera on niestandardowej logiki i agregacja danych.</span><span class="sxs-lookup"><span data-stu-id="b51f5-187">An API Gateway requires additional development cost and future maintenance if it includes custom logic and data aggregation.</span></span> <span data-ttu-id="b51f5-188">Deweloperzy muszą aktualizuje bramy interfejsu API w celu ekspozycji punktów końcowych każdego mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="b51f5-188">Developers must update the API Gateway in order to expose each microservice’s endpoints.</span></span> <span data-ttu-id="b51f5-189">Ponadto zmiany implementacji w wewnętrznej mikrousług może spowodować zmiany kodu na poziomie interfejsu API bramy.</span><span class="sxs-lookup"><span data-stu-id="b51f5-189">Moreover, implementation changes in the internal microservices might cause code changes at the API Gateway level.</span></span> <span data-ttu-id="b51f5-190">Jednak jeśli bramy interfejsu API jest po prostu stosowania zabezpieczeń, rejestrowanie i przechowywanie wersji (w przypadku korzystania z usługi Azure API Management), ten koszt dodatkowe programowanie może nie mieć zastosowania.</span><span class="sxs-lookup"><span data-stu-id="b51f5-190">However, if the API Gateway is just applying security, logging, and versioning (as when using Azure API Management), this additional development cost might not apply.</span></span>

-   <span data-ttu-id="b51f5-191">Jeśli brama interfejsu API opracowanego przez jeden zespół, może być wąskie gardło rozwoju.</span><span class="sxs-lookup"><span data-stu-id="b51f5-191">If the API Gateway is developed by a single team, there can be a development bottleneck.</span></span> <span data-ttu-id="b51f5-192">Jest to kolejny powód, dlaczego lepszym rozwiązaniem jest kilka dopasowanymi grzywną interfejsu API bram, które odpowiadają na potrzeby innego klienta.</span><span class="sxs-lookup"><span data-stu-id="b51f5-192">This is another reason why a better approach is to have several fined-grained API Gateways that respond to different client needs.</span></span> <span data-ttu-id="b51f5-193">Brama interfejsu API można również segregowanie wewnętrznie do wielu obszarów i warstwy, które należą do różnych zespołów pracuje wewnętrzny mikrousług.</span><span class="sxs-lookup"><span data-stu-id="b51f5-193">You could also segregate the API Gateway internally into multiple areas or layers that are owned by the different teams working on the internal microservices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b51f5-194">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="b51f5-194">Additional resources</span></span>

-   <span data-ttu-id="b51f5-195">**Lesiak Charlesa. Wzorzec: Interfejs API bramy / wewnętrznej bazy danych dla frontonu**
    [*https://microservices.io/patterns/apigateway.html*](https://microservices.io/patterns/apigateway.html)</span><span class="sxs-lookup"><span data-stu-id="b51f5-195">**Charles Richardson. Pattern: API Gateway / Backend for Front-End**
[*https://microservices.io/patterns/apigateway.html*](https://microservices.io/patterns/apigateway.html)</span></span>

-   <span data-ttu-id="b51f5-196">**Zarządzanie interfejsami API Azure**
    [*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span><span class="sxs-lookup"><span data-stu-id="b51f5-196">**Azure API Management**
[*https://azure.microsoft.com/services/api-management/*](https://azure.microsoft.com/services/api-management/)</span></span>

-   <span data-ttu-id="b51f5-197">**Udi Dahan. Kompozycja zorientowane na usługę**\\</span><span class="sxs-lookup"><span data-stu-id="b51f5-197">**Udi Dahan. Service Oriented Composition**\\</span></span>
    [*http://udidahan.com/2014/07/30/service-oriented-composition-with-video/*](http://udidahan.com/2014/07/30/service-oriented-composition-with-video/)

-   <span data-ttu-id="b51f5-198">**Clemens Vasters. Wiadomości i Mikrousług na GOTO 2016** (klip wideo) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span><span class="sxs-lookup"><span data-stu-id="b51f5-198">**Clemens Vasters. Messaging and Microservices at GOTO 2016** (video) [*https://www.youtube.com/watch?v=rXi5CLjIQ9k*](https://www.youtube.com/watch?v=rXi5CLjIQ9k)</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="b51f5-199">[Poprzednie] (zidentyfikować mikrousługi domeny — model-boundaries.md) [dalej] (komunikacji w — mikrousługi architecture.md)</span><span class="sxs-lookup"><span data-stu-id="b51f5-199">[Previous] (identify-microservice-domain-model-boundaries.md) [Next] (communication-in-microservice-architecture.md)</span></span>
