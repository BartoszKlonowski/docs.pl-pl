---
title: "Kroki w przepływie pracy DevOps zewnętrzne pętli dla aplikacji Docker"
description: "Cykl życia aplikacji konteneryzowanych Docker z platformy firmy Microsoft i narzędzia"
keywords: "Docker, Mikrousług, ASP.NET, kontenera"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: fe51fc4b5026d17f0f9b93e7fd0dedde93ef4a3c
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/23/2017
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="55918-104">Kroki w przepływie pracy DevOps zewnętrzne pętli dla aplikacji Docker</span><span class="sxs-lookup"><span data-stu-id="55918-104">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="55918-105">Rysunek 5-1 przedstawia kroki składającej się z przepływu pracy zewnętrznego pętli DevOps sceny end-to-end.</span><span class="sxs-lookup"><span data-stu-id="55918-105">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="55918-106">Rysunek 5-1: DevOps zewnętrzne pętli przepływ pracy Docker aplikacji z narzędzi firmy Microsoft</span><span class="sxs-lookup"><span data-stu-id="55918-106">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="55918-107">Teraz Przeanalizujmy każdy z tych kroków większej liczby szczegółów.</span><span class="sxs-lookup"><span data-stu-id="55918-107">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="55918-108">Krok 1: Wewnętrzny pętli Programowanie w przepływie pracy</span><span class="sxs-lookup"><span data-stu-id="55918-108">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="55918-109">Ten krok jest szczegółowo omówiono w rozdziale 4, ale recap, w tym miejscu jest gdzie rozpoczyna zewnętrzne pętli, moment, jaką dewelopera wypychanie kodu do systemu zarządzania kontroli źródła (np. Git), inicjowanie CI potoku akcje.</span><span class="sxs-lookup"><span data-stu-id="55918-109">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-visual-studio-team-services-and-git"></a><span data-ttu-id="55918-110">Krok 2: Integracji kontroli kodu źródłowego i zarządzanie za pomocą programu Visual Studio Team Services i Git</span><span class="sxs-lookup"><span data-stu-id="55918-110">Step 2: Source-Code Control integration and management with Visual Studio Team Services and Git</span></span>

<span data-ttu-id="55918-111">W tym kroku musisz mieć systemu kontroli wersji, aby zebrać jednolity całego kodu pochodzącego z różnych deweloperów w zespole.</span><span class="sxs-lookup"><span data-stu-id="55918-111">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="55918-112">Mimo że kontroli kodu źródłowego (SCC) i kod źródłowy zarządzania mogą wydawać się drugie — charakter cykl do większość deweloperów, podczas tworzenia aplikacji Docker życia DevOps, jest bardzo istotne, aby podkreślić, czy należy przesłać nie obrazy usługi Docker z aplikacją bezpośrednio do globalnego Docker rejestru (na przykład rejestru kontenera platformy Azure lub Centrum Docker) z komputera dewelopera.</span><span class="sxs-lookup"><span data-stu-id="55918-112">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="55918-113">Przeciwnie obrazy usługi Docker są zwalniane i wdrożone w środowisku produkcyjnym należy utworzyć wyłącznie na kod źródłowy, który jest integrowana w tym globalnych kompilacji lub potoku CI oparte na repozytorium kodu źródłowego (np. Git).</span><span class="sxs-lookup"><span data-stu-id="55918-113">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="55918-114">Lokalne obrazy generowane przez deweloperów, same powinna być używana tylko przez deweloperów, podczas testowania w ich własnych maszyn.</span><span class="sxs-lookup"><span data-stu-id="55918-114">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="55918-115">Jest to, dlaczego jest bardzo istotne, aby aktywować z kodu SCC potoku DevOps.</span><span class="sxs-lookup"><span data-stu-id="55918-115">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="55918-116">Visual Studio Team Services i Team Foundation Server obsługuje Git i kontroli wersji Team Foundation.</span><span class="sxs-lookup"><span data-stu-id="55918-116">Visual Studio Team Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="55918-117">Można wybrać między nimi i użyć jej do środowiska Microsoft end-to-end.</span><span class="sxs-lookup"><span data-stu-id="55918-117">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="55918-118">Jednak możesz również zarządzać kodu w repozytoria zewnętrznych (na przykład GitHub, repozytoria Git lokalnymi lub Podwersją) i nadal mieć możliwość nawiązania połączenia i uzyskać jako punktu wyjścia planowaną DevOps CI kod.</span><span class="sxs-lookup"><span data-stu-id="55918-118">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-visual-studio-team-services-and-docker"></a><span data-ttu-id="55918-119">Krok 3: Kompilacji, CI, integracji i przetestowania z programu Visual Studio Team Services i platformy Docker</span><span class="sxs-lookup"><span data-stu-id="55918-119">Step 3: Build, CI, Integrate, and Test with Visual Studio Team Services and Docker</span></span>

<span data-ttu-id="55918-120">CI pojawiło się jako standardowe rozwiązanie dla nowoczesnych oprogramowania testowania i dostarczania.</span><span class="sxs-lookup"><span data-stu-id="55918-120">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="55918-121">Rozwiązanie Docker przechowuje wyraźnej separacji między zespołami i.</span><span class="sxs-lookup"><span data-stu-id="55918-121">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="55918-122">Immutability obrazów Docker zapewnia powtarzalne wdrożenia między co został opracowany, przetestowane za pośrednictwem elementu konfiguracji i uruchomić w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="55918-122">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="55918-123">Aparatem platformy docker wdrożonego na komputery przenośne developer i infrastruktury testowego sprawia, że kontenery przenośny w środowiskach.</span><span class="sxs-lookup"><span data-stu-id="55918-123">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="55918-124">W tym momencie po korzystasz z systemu kontroli wersji z prawidłowego kodu przesłane należy *usługi kompilacji* Pobieranie kodu i uruchom testy i globalnych kompilacji.</span><span class="sxs-lookup"><span data-stu-id="55918-124">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="55918-125">Wewnętrzny przepływu pracy dla tego kroku (elementu konfiguracji, kompilacji, test) jest informacje do budowy potoku CI składające się z repozytorium kodu (Git, itp.), serwer kompilacji (Visual Studio Team Services), aparatem platformy Docker i rejestru Docker.</span><span class="sxs-lookup"><span data-stu-id="55918-125">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Visual Studio Team Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="55918-126">Służy Visual Studio Team Services jako podstawy do tworzenia aplikacji i ustawienie potoku elementu konfiguracji sieci i publikowania wbudowanych "artefakty" do "repozytorium artefaktów,", który znajduje się w następnym kroku.</span><span class="sxs-lookup"><span data-stu-id="55918-126">You can use Visual Studio Team Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="55918-127">W przypadku używania Docker dla wdrożenia "końcowego artefaktów" do wdrożenia są obrazy usługi Docker z aplikacji lub usług osadzone w nich.</span><span class="sxs-lookup"><span data-stu-id="55918-127">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="55918-128">Te obrazy są naciśnięty, czy opublikowane *rejestru Docker* (prywatne repozytorium takich jak te mogą mieć w rejestrze kontenera platformy Azure, lub publiczny podobny rejestrze Centrum Docker, który jest powszechnie używany do oficjalnego obrazy podstawowe).</span><span class="sxs-lookup"><span data-stu-id="55918-128">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="55918-129">Poniżej przedstawiono podstawowe pojęcia: potoku elementu konfiguracji będzie kopać poza przez zatwierdzeń do repozytorium SCC, takich jak Git.</span><span class="sxs-lookup"><span data-stu-id="55918-129">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="55918-130">Zatwierdzanie spowoduje Visual Studio Team Services, aby uruchomić zadanie kompilacji w kontenerze Docker i, po pomyślnym ukończeniu zadania, wypychanie obrazu Docker rejestru Docker, jak pokazano na rysunku 5-2.</span><span class="sxs-lookup"><span data-stu-id="55918-130">The commit will cause Visual Studio Team Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="55918-131">Rysunek 5-2: kroki związane z elementu konfiguracji</span><span class="sxs-lookup"><span data-stu-id="55918-131">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="55918-132">Poniżej przedstawiono podstawowe czynności przepływu pracy CI Docker i Visual Studio Team Services:</span><span class="sxs-lookup"><span data-stu-id="55918-132">Here are the basic CI workflow steps with Docker and Visual Studio Team Services:</span></span>

1.  <span data-ttu-id="55918-133">Deweloper wypychanie zatwierdzenia do repozytorium SCC (Git/Visual Studio Team Services, GitHub itp.).</span><span class="sxs-lookup"><span data-stu-id="55918-133">The developer pushes a commit to an SCC repository (Git/Visual Studio Team Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="55918-134">Jeśli używasz programu Visual Studio Team Services lub Git, CI jest wbudowany, która oznacza, że jest tak proste, jak zaznaczenie pola wyboru w programie Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="55918-134">If you're using Visual Studio Team Services or Git, CI is built in, which means that it is as simple as selecting a check box in Visual Studio Team Services.</span></span> <span data-ttu-id="55918-135">Jeśli używasz zewnętrznego SCC (na przykład GitHub), *webhook* będzie powiadamiać Visual Studio Team Services aktualizacji lub Wypychanie do Git/GitHub.</span><span class="sxs-lookup"><span data-stu-id="55918-135">If you're using an external SCC (like GitHub), a *webhook* will notify Visual Studio Team Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="55918-136">Visual Studio Team Services pobiera SCC repozytorium, w tym plik DockerFile opisujące obrazu, a także kod aplikacji i testowania.</span><span class="sxs-lookup"><span data-stu-id="55918-136">Visual Studio Team Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="55918-137">Visual Studio Team Services tworzy obraz Docker i etykiet go przy użyciu numeru kompilacji.</span><span class="sxs-lookup"><span data-stu-id="55918-137">Visual Studio Team Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="55918-138">Visual Studio Team Services tworzy kontener Docker w udostępnione hostów Docker i uruchamia odpowiednie testy.</span><span class="sxs-lookup"><span data-stu-id="55918-138">Visual Studio Team Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="55918-139">Jeśli testy zakończą się powodzeniem, obraz jest najpierw relabeled łatwy do rozpoznania nazwy, aby wiedzieli, "specjalne kompilacja" (takich jak "/ 1.0.0" lub inne etykiety), a następnie przesunięta w do rejestru Docker (Centrum Docker rejestru kontenera platformy Azure, DTR, itp.)</span><span class="sxs-lookup"><span data-stu-id="55918-139">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-visual-studio-team-services-and-the-docker-extension-for-visual-studio-team-services"></a><span data-ttu-id="55918-140">Wdrażanie potoku elementu konfiguracji z programu Visual Studio Team Services i rozszerzenia Docker dla Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="55918-140">Implementing the CI pipeline with Visual Studio Team Services and the Docker extension for Visual Studio Team Services</span></span>

<span data-ttu-id="55918-141">[Rozszerzenia programu Visual Studio Team Services Docker](https://aka.ms/vstsdockerextension) dodaje do potoku sieci CI, z którym mogą kompilacji obrazy usługi Docker, wypychana obrazy usługi Docker na uwierzytelniony rejestru Docker, uruchom obrazy usługi Docker lub uruchomić inne operacje oferowane przez zadanie Interfejs wiersza polecenia docker.</span><span class="sxs-lookup"><span data-stu-id="55918-141">The [Visual Studio Team Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="55918-142">Dodano również rozwiązania Docker Compose zadanie, które służy do kompilacji, powiadomień wypychanych i uruchamianie aplikacji platformy Docker multicontainer lub uruchomić inne operacje oferowane przez rozwiązania Docker Compose interfejsu wiersza polecenia, jak pokazano na rysunku 5-3.</span><span class="sxs-lookup"><span data-stu-id="55918-142">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="55918-143">Rysunek 5-3 potoku Docker CI w Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="55918-143">Figure 5-3: The Docker CI pipeline in Visual Studio Team Services</span></span>

<span data-ttu-id="55918-144">Dla hostów Docker i kontener lub rejestrów obrazu rozszerzenia Docker można używać punktów końcowych usługi.</span><span class="sxs-lookup"><span data-stu-id="55918-144">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="55918-145">Domyślnie zadania za pomocą lokalnego hosta Docker, jeśli jest dostępna, (obecnie wymaga niestandardowych agenta programu Visual Studio Team Services); w przeciwnym razie wymagają one, musisz zapewnić połączenie hostów Docker.</span><span class="sxs-lookup"><span data-stu-id="55918-145">The tasks default to using a local Docker host if available (this currently requires a custom Visual Studio Team Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="55918-146">Akcje, które są zależne od uwierzytelnianego z rejestru Docker, takich jak wypychanie obrazu, wymagają podania Docker rejestru połączenia.</span><span class="sxs-lookup"><span data-stu-id="55918-146">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="55918-147">Rozszerzenia programu Visual Studio Team Services Docker na koncie usługi Visual Studio Team Services instalowane są następujące składniki:</span><span class="sxs-lookup"><span data-stu-id="55918-147">The Visual Studio Team Services Docker extension installs the following components in your Visual Studio Team Services account:</span></span>

-   <span data-ttu-id="55918-148">Punkt końcowy usługi w celu nawiązania połączenia z rejestrem Docker</span><span class="sxs-lookup"><span data-stu-id="55918-148">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="55918-149">Punkt końcowy usługi do nawiązywania połączenia z hostem kontenera Docker</span><span class="sxs-lookup"><span data-stu-id="55918-149">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="55918-150">Zadanie Docker wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="55918-150">A Docker task to do the following:</span></span>

-   <span data-ttu-id="55918-151">Tworzenie obrazu</span><span class="sxs-lookup"><span data-stu-id="55918-151">Build an image</span></span>

-   <span data-ttu-id="55918-152">Wypychanie obrazu lub repozytorium do rejestru</span><span class="sxs-lookup"><span data-stu-id="55918-152">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="55918-153">Uruchom obrazu w kontenerze</span><span class="sxs-lookup"><span data-stu-id="55918-153">Run an image in a container</span></span>

-   <span data-ttu-id="55918-154">Uruchom polecenie Docker</span><span class="sxs-lookup"><span data-stu-id="55918-154">Run a Docker command</span></span>

-   <span data-ttu-id="55918-155">Aby uruchomić polecenie rozwiązania Docker Compose zadania rozwiązania Docker Compose</span><span class="sxs-lookup"><span data-stu-id="55918-155">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="55918-156">Z tych zadań programu Visual Studio Team Services kompilacji Linux Docker Host/wirtualna zainicjowane na platformie Azure i preferowanych rejestru Docker (rejestru kontenera platformy Azure, Centrum Docker, prywatne DTR Docker lub innych rejestru Docker) można utworzyć potoku sieci Docker CI w bardzo spójny sposób.</span><span class="sxs-lookup"><span data-stu-id="55918-156">With these Visual Studio Team Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="55918-157">***Wymagania:***</span><span class="sxs-lookup"><span data-stu-id="55918-157">***Requirements:***</span></span>

-   <span data-ttu-id="55918-158">Visual Studio Team Services, lub w przypadku instalacji lokalnej, Team Foundation Server 2015 Update 3 lub nowszym.</span><span class="sxs-lookup"><span data-stu-id="55918-158">Visual Studio Team Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="55918-159">Agent programu Visual Studio Team Services zawiera dane binarne Docker.</span><span class="sxs-lookup"><span data-stu-id="55918-159">A Visual Studio Team Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="55918-160">W prosty sposób utworzyć jeden z nich jest do używania Docker do uruchamiania kontener na podstawie obrazu Docker agenta programu Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="55918-160">An easy way to create one of these is to use Docker to run a container based on the Visual Studio Team Services agent Docker image.</span></span>

<span data-ttu-id="55918-161">**Więcej informacji o** aby przeczytać więcej informacji na temat łączenia Visual Studio Team Services Docker CI potoku i aby wyświetlić wskazówki, odwiedź następującą witrynę:</span><span class="sxs-lookup"><span data-stu-id="55918-161">**More info** To read more about assembling a Visual Studio Team Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="55918-162">Uruchomiony agent programu Visual Studio Team Services jako kontener Docker: [https://hub.docker.com/r/ \ vsts-microsoft-agent /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="55918-162">Running a Visual Studio Team Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="55918-163">Rozszerzenia programu VSTS Docker: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="55918-163">VSTS Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="55918-164">Tworzenie obrazów .NET Core Linux Docker za pomocą programu Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="55918-164">Building .NET Core Linux Docker images with Visual Studio Team Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="55918-165">Tworzenie opartych na systemie Linux Visual Studio Team usługą tworzenia komputera z obsługą Docker: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="55918-165">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="55918-166">Integrowanie, testowanie i weryfikowanie multicontainer aplikacji Docker</span><span class="sxs-lookup"><span data-stu-id="55918-166">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="55918-167">Zazwyczaj większość aplikacji Docker składają się z wielu kontenerów niż jeden kontener.</span><span class="sxs-lookup"><span data-stu-id="55918-167">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="55918-168">Dobrym przykładem jest ukierunkowane mikrousług aplikacji, dla którego trzeba jednego kontenera na mikrousługi.</span><span class="sxs-lookup"><span data-stu-id="55918-168">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="55918-169">Jednak nawet bez ściśle mikrousług wzorce podejście, jest bardzo prawdopodobne, że aplikacja Docker może składać się z wielu kontenerów lub usług.</span><span class="sxs-lookup"><span data-stu-id="55918-169">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="55918-170">Dlatego po utworzeniu kontenery aplikacji w potoku elementu konfiguracji, należy również wdrażania, integracji i przetestować aplikację jako całość, biorąc pod uwagę jego kontenery w ramach integracji hosta Docker lub nawet w klastrze testu, do której są kontenerów rozproszone.</span><span class="sxs-lookup"><span data-stu-id="55918-170">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="55918-171">Jeśli używasz jednego hosta, można użyć polecenia Docker, takie jak docker-Napisz do tworzenia i wdrażania powiązane kontenerów do testowania i sprawdzania, czy środowisko Docker na jednej maszynie wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="55918-171">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="55918-172">Jednak jeśli pracujesz z klastra programu orchestrator, takich jak DC/OS, Kubernetes lub Docker Swarm, należy wdrożyć kontenerów za pośrednictwem programu orchestrator, w zależności od sieci klastra/harmonogramu lub inny mechanizm.</span><span class="sxs-lookup"><span data-stu-id="55918-172">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="55918-173">Poniżej przedstawiono kilka typów testów, które można uruchomić dla kontenerów Docker:</span><span class="sxs-lookup"><span data-stu-id="55918-173">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="55918-174">Testy jednostkowe dla kontenerów Docker</span><span class="sxs-lookup"><span data-stu-id="55918-174">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="55918-175">Testowanie grup aplikacji połączonych ze sobą i mikrousług</span><span class="sxs-lookup"><span data-stu-id="55918-175">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="55918-176">Testowanie w produkcji i "element canary" wersjach</span><span class="sxs-lookup"><span data-stu-id="55918-176">Test in production and "canary" releases</span></span>

<span data-ttu-id="55918-177">Istotne jest, czy podczas uruchamiania, integracja i testy funkcjonalne, należy uruchomić te testy z poza kontenerów.</span><span class="sxs-lookup"><span data-stu-id="55918-177">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="55918-178">Testy nie musi zdefiniowany i uruchamiane w ramach kontenerów, które są wdrażane, ponieważ kontenery są oparte na obrazach statycznych, które powinny być dokładnie takie same jak te, które wdrażania w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="55918-178">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="55918-179">Jest bardzo możliwe podczas testowania bardziej zaawansowanych scenariuszy, takich jak testowanie kilku klastrów (test, klastrem, przemieszczania klastra i klastra produkcyjnego) opublikować obrazów w rejestrze, aby przetestować w różnych klastrach.</span><span class="sxs-lookup"><span data-stu-id="55918-179">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="55918-180">Wypchnąć obrazu Docker niestandardową aplikację do globalnego rejestru Docker</span><span class="sxs-lookup"><span data-stu-id="55918-180">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="55918-181">Po Docker obrazy zostały sprawdzone i zatwierdzone, należy je oznaczać i publikowanie ich do rejestru Docker.</span><span class="sxs-lookup"><span data-stu-id="55918-181">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="55918-182">Rejestr Docker jest krytycznego Docker cyklu życia aplikacji, ponieważ jest centralne miejsce przechowywania niestandardowych testu (alias "specjalne obrazy") do wdrożenia w odpowiedzi na pytania i środowiska produkcyjne.</span><span class="sxs-lookup"><span data-stu-id="55918-182">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="55918-183">Podobnie jak kod aplikacji przechowywanych w repozytorium SCC (Git itp.) jest "źródłem prawdy", "źródłem prawdy" binary aplikacji lub usługi bits do wdrożenia do środowiska odpowiedzi na pytania lub produkcji jest rejestru Docker.</span><span class="sxs-lookup"><span data-stu-id="55918-183">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="55918-184">Zazwyczaj warto mieć repozytoriami prywatne dla obrazów niestandardowych w prywatnym repozytorium w rejestrze kontenera platformy Azure lub w rejestrze lokalnym jak Docker zaufane rejestru albo w rejestrze chmura publiczna z ograniczonym dostępem (np. Centrum docker), mimo że w tym ostatnim przypadku, jeśli kod nie jest typu open source, muszą ufać dostawcy zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="55918-184">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="55918-185">W obu przypadkach metoda, za pomocą którego można to zrobić jest bardzo podobne i ostatecznie oparte na polecenia docker wypychania, jak pokazano na rysunku 5-4.</span><span class="sxs-lookup"><span data-stu-id="55918-185">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="55918-186">Rysunek 5-4: publikowanie niestandardowych obrazów w rejestrze Docker</span><span class="sxs-lookup"><span data-stu-id="55918-186">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="55918-187">Istnieje wiele ofert z rejestrów Docker od dostawców chmury, takich jak rejestru kontenera platformy Azure, Amazon Web Services kontenera rejestru, rejestru kontenera Google, nabrzeża rejestru i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="55918-187">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="55918-188">Przy użyciu rozszerzenia programu Visual Studio Team Services Docker, możesz wypchnąć utworzenie zestawu obrazów usługi zdefiniowanych przez plik docker-compose.yml, z użyciem wielu tagów, uwierzytelnionym rejestrze Docker (na przykład rejestr kontenera Azure), jak pokazano na rysunku 5-5.</span><span class="sxs-lookup"><span data-stu-id="55918-188">Using the Visual Studio Team Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="55918-189">Rysunek 5-5: przy użyciu programu Visual Studio Team Services do publikowania niestandardowych obrazów w rejestrze Docker</span><span class="sxs-lookup"><span data-stu-id="55918-189">Figure 5-5: Using Visual Studio Team Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="55918-190">**Więcej informacji o** Aby dowiedzieć się więcej o rozszerzeniu Docker dla programu Visual Studio Team Services, przejdź do <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="55918-190">**More info** To read more about the Docker extension for Visual Studio Team Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="55918-191">Aby dowiedzieć się więcej na temat rejestru kontenera platformy Azure, przejdź do <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="55918-191">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="55918-192">Krok 4: CD, wdrażanie</span><span class="sxs-lookup"><span data-stu-id="55918-192">Step 4: CD, Deploy</span></span>

<span data-ttu-id="55918-193">Immutability obrazów Docker zapewnia powtarzalne wdrożenia o co został opracowany, przetestowane za pośrednictwem elementu konfiguracji i uruchomić w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="55918-193">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="55918-194">Po utworzeniu obrazów Docker aplikacji, które są publikowane w rejestrze Docker (prywatny czy publiczny), można je wdrożyć w kilku środowiskach, w których mogą występować (środowiska produkcyjnego, pytań i odpowiedzi, przemieszczania, itp.) z dysku CD planowaną przy użyciu programu Visual Studio Team Services zadania potoku lub Visual Studio Team Services Release Management.</span><span class="sxs-lookup"><span data-stu-id="55918-194">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Visual Studio Team Services pipeline tasks or Visual Studio Team Services Release Management.</span></span>

<span data-ttu-id="55918-195">Jednak w tym momencie to zależy od rodzaju Docker aplikacji jest wdrażany.</span><span class="sxs-lookup"><span data-stu-id="55918-195">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="55918-196">Wdrażanie prostej aplikacji (z kompozycji i wdrożenia punktu widzenia) jak wbudowanymi aplikacji składającej się z kilku kontenery lub usług i wdrożone na kilku serwerach lub maszyn wirtualnych jest bardzo różnią się od bardziej złożonych aplikacji, takich jak wdrażanie mikrousług aplikację z możliwościami informatycznych.</span><span class="sxs-lookup"><span data-stu-id="55918-196">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="55918-197">W poniższych sekcjach opisano te dwa scenariusze.</span><span class="sxs-lookup"><span data-stu-id="55918-197">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="55918-198">Wdrażanie składane Docker aplikacjom wiele środowisk Docker</span><span class="sxs-lookup"><span data-stu-id="55918-198">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="55918-199">Oto pierwszy w scenariuszu mniej złożone: Wdrażanie prostego hostów Docker (maszyn wirtualnych i serwery) w środowisku jednego lub wiele środowisk (pytań i odpowiedzi, tymczasowych i produkcyjnych).</span><span class="sxs-lookup"><span data-stu-id="55918-199">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="55918-200">W tym scenariuszu wewnętrznie planowaną CD można użyć docker-tworzą (z zadań wdrożenia programu Visual Studio Team Services) do wdrażania aplikacji Docker z zestawem powiązanych kontenery lub usług, zgodnie z opisami w rysunek 5 – 6.</span><span class="sxs-lookup"><span data-stu-id="55918-200">In this scenario, internally your CD pipeline can use docker-compose (from your Visual Studio Team Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="55918-201">Rysunek 5-6: Wdrażanie kontenerów aplikacji proste rejestru środowisk hostów Docker</span><span class="sxs-lookup"><span data-stu-id="55918-201">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="55918-202">Rysunek 5-7 przedstawia, jak łączyć z elementu konfiguracji kompilacji w środowiskach, w odpowiedzi na pytania i testowanie za pomocą programu Visual Studio Team Services, klikając rozwiązania Docker Compose w oknie dialogowym Dodaj zadanie.</span><span class="sxs-lookup"><span data-stu-id="55918-202">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Visual Studio Team Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="55918-203">Jednak podczas wdrażania środowisk przemieszczania i produkcji, należy zwykle użyje funkcji zarządzania zleceniami obsługi wielu środowiskach (takich jak pytań i odpowiedzi, tymczasowych i produkcyjnych).</span><span class="sxs-lookup"><span data-stu-id="55918-203">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="55918-204">Jeśli wdrażasz do pojedynczego hostów Docker jest przy użyciu programu Visual Studio Team Services "Rozwiązania Docker Compose" zadania (który wywołuje docker-tworzą się polecenie kulisy).</span><span class="sxs-lookup"><span data-stu-id="55918-204">If you're deploying to single Docker hosts, it is using the Visual Studio Team Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="55918-205">Jeśli wdrażasz do usługi kontenera platformy Azure, używa zadania wdrażania Docker, jak wyjaśniono w poniższej sekcji.</span><span class="sxs-lookup"><span data-stu-id="55918-205">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="55918-206">Rysunek 5-7: Dodawanie rozwiązania Docker Compose zadania w potoku Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="55918-206">Figure 5-7: Adding a Docker Compose task in a Visual Studio Team Services pipeline</span></span>

<span data-ttu-id="55918-207">Po utworzeniu zlecenia w programie Visual Studio Team Services ma zestaw wejściowy artefaktów.</span><span class="sxs-lookup"><span data-stu-id="55918-207">When you create a release in Visual Studio Team Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="55918-208">Są one przeznaczone za niezmienialny w okresie istnienia wersji w wielu środowiskach.</span><span class="sxs-lookup"><span data-stu-id="55918-208">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="55918-209">Podczas wprowadzania kontenery wejściowych artefaktów zidentyfikować obrazów w rejestrze do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="55918-209">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="55918-210">W zależności od tego, jak te są identyfikowane ich nie ma gwarancji pozostają takie same, w okresie obowiązywania wersji najbardziej oczywisty przypadek jest odwołanie "myimage:latest" z pliku docker-compose.</span><span class="sxs-lookup"><span data-stu-id="55918-210">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="55918-211">Rozszerzenie Docker dla Visual Studio Team Services zapewnia który możliwość generowania artefaktów kompilacji, zawierające obrazu rejestru skróty służące który dotrą do unikatowego identyfikowania ten sam obraz binarny.</span><span class="sxs-lookup"><span data-stu-id="55918-211">The Docker extension for Visual Studio Team Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="55918-212">Są to, co naprawdę chcesz użyć jako dane wejściowe dla wersji.</span><span class="sxs-lookup"><span data-stu-id="55918-212">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-visual-studio-team-services-release-management"></a><span data-ttu-id="55918-213">Zarządzanie wersjach środowiska Docker za pomocą programu Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="55918-213">Managing releases to Docker environments by using Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="55918-214">Za pośrednictwem rozszerzenia programu Visual Studio Team Services, można utworzyć nowy obraz, opublikowania go w rejestrze Docker, uruchom go na hostach z systemem Linux lub Windows i polecenia takie jak docker-Napisz do wdrożenia wielu kontenerów jako całej aplikacji przez element wizualny Możliwości zespołu usługi Release Management Studio przeznaczony dla wielu środowiskach, jak pokazano na rysunku 5-8.</span><span class="sxs-lookup"><span data-stu-id="55918-214">Through the Visual Studio Team Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Visual Studio Team Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="55918-215">Rysunek 5 – 8: Konfigurowanie programu Visual Studio Team Services rozwiązania Docker Compose zadań z programu Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="55918-215">Figure 5-8: Configuring Visual Studio Team Services Docker Compose tasks from Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="55918-216">Jednak należy pamiętać, że scenariusza wyświetlana w rysunek 5 – 6 i wdrożone w rysunek 5 – 8 jest bardzo proste (jest wdrażana do prostych Docker hosty i maszyny wirtualne i będą istnieć jeden kontener lub wystąpienia na obraz) i prawdopodobnie powinna być używana tylko w przypadku sc deweloperskich lub testowania enarios.</span><span class="sxs-lookup"><span data-stu-id="55918-216">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="55918-217">W większości przypadków produkcji przedsiębiorstwa, należy mieć wysokiej dostępności (HA) i łatwe w zarządzaniu skalowalność Równoważenie obciążenia w wielu węzłów, serwerów i maszyn wirtualnych, a także "inteligentnego praca awaryjna" tak że jeśli serwer lub węzeł ulegnie awarii, jego usług i kontenery zostaną przeniesione do innego serwera hosta lub maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="55918-217">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="55918-218">W takim przypadku należy bardziej zaawansowanych technologii, takich jak klastry kontenera, orchestrators i transfery danych.</span><span class="sxs-lookup"><span data-stu-id="55918-218">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="55918-219">W związku z tym sposób, aby wdrożyć te klastry jest dokładnie za pomocą zaawansowanych scenariuszy szczegółowo w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="55918-219">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="55918-220">Wdrażanie złożonych aplikacji Docker do klastrów Docker (DC/OS, Kubernetes i Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="55918-220">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="55918-221">Rodzaj aplikacji rozproszonych wymaga zasoby obliczeniowe, które również są rozkładane.</span><span class="sxs-lookup"><span data-stu-id="55918-221">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="55918-222">Aby mieć możliwości skalowania produkcji, musisz mieć klaster możliwości, które zapewniają wysoką skalowalność i wysokiej dostępności na podstawie puli zasobów.</span><span class="sxs-lookup"><span data-stu-id="55918-222">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="55918-223">Można wdrożyć kontenery ręcznie do tych klastrów za pomocą narzędzia interfejsu wiersza polecenia, takich jak Docker Swarm (podobnie jak przy użyciu [tworzenia usługi docker](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) lub interfejsu użytkownika sieci web takich jak [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) dla DC/OS klastrów, ale powinien który zarezerwować tylko do celów testowych terminową wdrożenia lub do celów zarządzania, takich jak skalowania w poziomie lub celów monitorowania.</span><span class="sxs-lookup"><span data-stu-id="55918-223">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="55918-224">Z punktu widzenia CD i Visual Studio Team Services w szczególności można uruchomić zadania wdrażania specjalnie wykonane z środowiska Visual Studio Team Services Release Management, które zostaną wdrożone konteneryzowanych aplikacji rozproszonej klastrów w Usługa kontenera, jak pokazano w rysunek 5 – 9.</span><span class="sxs-lookup"><span data-stu-id="55918-224">From a CD point of view, and Visual Studio Team Services specifically, you can run specially made deployment tasks from your Visual Studio Team Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="55918-225">Rysunek 5 – 9: Wdrażanie aplikacji rozproszonej do usługi kontenera</span><span class="sxs-lookup"><span data-stu-id="55918-225">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="55918-226">Początkowo wdrażając do niektórych klastrów lub orchestrators tradycyjnie używasz skrypty wdrażania i mechanizmów na każdym orchestrator (to znaczy Mesosphere DC/OS lub Kubernetes ma mechanizmów wdrażania innego niż Docker i Docker Swarm) zamiast prostszy i łatwy w użyciu rozwiązania docker-compose narzędzia na podstawie pliku definicji docker-compose.yml.</span><span class="sxs-lookup"><span data-stu-id="55918-226">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="55918-227">Jednak dzięki użyciu Microsoft Visual Studio Team Services Docker wdrażanie zadań wyświetlane w rysunek 5 – 10 teraz również można wdrożyć DC/OS przez tylko przy użyciu znanych docker-compose.yml pliku, ponieważ Microsoft przeprowadza "Translacja" (z sieci Plik docker-compose.yml w innych formatach wymagane przez DC/OS).</span><span class="sxs-lookup"><span data-stu-id="55918-227">However, thanks to the Microsoft Visual Studio Team Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="55918-228">Rysunek 5-10: Dodawanie zadanie wdrażania Docker do Twojego środowiska RM</span><span class="sxs-lookup"><span data-stu-id="55918-228">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="55918-229">Rysunek 5-11 pokazano, jak można edytować zadanie wdrażania Docker i określić typ docelowy (Azure kontenera DC/OS usługi, w tym przypadku), plik rozwiązania Docker Compose i połączenia Docker rejestru (na przykład rejestru kontenera platformy Azure lub Centrum Docker).</span><span class="sxs-lookup"><span data-stu-id="55918-229">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="55918-230">Jest to, gdy zadanie pobierze gotowe do użycia niestandardowego obrazy usługi Docker wdrażanych jako kontenery w klastrze DC/OS.</span><span class="sxs-lookup"><span data-stu-id="55918-230">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="55918-231">Rysunek 5-11: Wdróż Docker zadań definicji wdrażania do usługi kontenera platformy Azure DC/OS</span><span class="sxs-lookup"><span data-stu-id="55918-231">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="55918-232">**Więcej informacji o** Aby dowiedzieć się więcej o potok dysku CD wraz z Visual Studio Team Services i Docker, odwiedź następującą witrynę:</span><span class="sxs-lookup"><span data-stu-id="55918-232">**More info** To read more about the CD pipeline with Visual Studio Team Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="55918-233">Visual Studio Team Services rozszerzenia Docker i usługi kontenera platformy Azure: [https://aka.ms/ \ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="55918-233">Visual Studio Team Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="55918-234">Usługa kontenera platformy Azure: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="55918-234">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="55918-235">Mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="55918-235">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="55918-236">Krok 5: Uruchom i zarządzanie nimi</span><span class="sxs-lookup"><span data-stu-id="55918-236">Step 5: Run and manage</span></span>

<span data-ttu-id="55918-237">Dlatego uruchamiania aplikacji i zarządzanie nimi w środowisku produkcyjnym enterprise poziom głównych podmiotu w i samego siebie oraz ze względu na typ operacji i działa na tym poziomie (operacji IT) oraz duże zakres ten obszar osób, firma Microsoft ma poświęcony całą obok rozdział wyjaśniający go.</span><span class="sxs-lookup"><span data-stu-id="55918-237">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="55918-238">Krok 6: Monitorowanie i diagnozowanie</span><span class="sxs-lookup"><span data-stu-id="55918-238">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="55918-239">W tym temacie jest uwzględniane w rozdziale dalej jako część zadania, które wykonuje operacje IT w systemach produkcyjnych. jednak ważne jest wyróżnić szczegółowych danych uzyskanych w tym kroku źródła musi danych do zespół deweloperów, dzięki czemu aplikacja stale zwiększona.</span><span class="sxs-lookup"><span data-stu-id="55918-239">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="55918-240">Z tego punktu widzenia jest również częścią DevOps, mimo że operacji i zadań są zazwyczaj wykonywane przez IT.</span><span class="sxs-lookup"><span data-stu-id="55918-240">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="55918-241">Tylko w przypadku monitorowania i diagnostyki 100 procent w obszarze DevOps są procesy monitorowania i analizy wykonywane przez zespół deweloperów dla środowisk testowych lub w wersji beta.</span><span class="sxs-lookup"><span data-stu-id="55918-241">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="55918-242">Jest to realizowane przez wykonywania testów obciążenia lub po prostu beta lub środowiskach pytań i odpowiedzi, na którym próbujesz nowe wersje beta testerów monitorowania.</span><span class="sxs-lookup"><span data-stu-id="55918-242">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="55918-243">[Poprzednie] (index.md) [dalej] (.. /Run-Manage-Monitor-docker-environments/index.MD)</span><span class="sxs-lookup"><span data-stu-id="55918-243">[Previous] (index.md) [Next] (../run-manage-monitor-docker-environments/index.md)</span></span>
