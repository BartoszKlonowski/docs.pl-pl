---
title: Kroki w przepływie pracy DevOps zewnętrznej pętli dla aplikacji platformy Docker
description: Cykl życia aplikacji konteneryzowanych platformy Docker przy użyciu platformy firmy Microsoft i narzędzi
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/10/2018
ms.openlocfilehash: 37dd5481da571be56f134a5e142b7ba46427d7d8
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/10/2018
ms.locfileid: "53143652"
---
# <a name="steps-in-the-outer-loop-devops-workflow-for-a-docker-application"></a><span data-ttu-id="d0c5d-103">Kroki w przepływie pracy DevOps zewnętrznej pętli dla aplikacji platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-103">Steps in the outer-loop DevOps workflow for a Docker application</span></span>

<span data-ttu-id="d0c5d-104">Rysunek 5-1 przedstawiono kroki przepływu pracy DevOps zewnętrzna pętla wchodzących w skład sceny end-to-end.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-104">Figure 5-1 presents an end-to-end depiction of the steps comprising the DevOps outer-loop workflow.</span></span>

![](./media/image1.png)

<span data-ttu-id="d0c5d-105">Rysunek 5-1. Przepływ pracy zewnętrzna pętla DevOps dla aplikacji platformy Docker przy użyciu narzędzi firmy Microsoft</span><span class="sxs-lookup"><span data-stu-id="d0c5d-105">Figure 5-1: DevOps outer-loop workflow for Docker applications with Microsoft tools</span></span>

<span data-ttu-id="d0c5d-106">Teraz Przeanalizujmy każdy z tych kroków, które bardziej szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-106">Now, let's examine each of these steps in greater detail.</span></span>

## <a name="step-1-inner-loop-development-workflow"></a><span data-ttu-id="d0c5d-107">Krok 1: Przepływ pracy wewnętrznej pętli tworzenia kodu</span><span class="sxs-lookup"><span data-stu-id="d0c5d-107">Step 1: Inner-loop development workflow</span></span>

<span data-ttu-id="d0c5d-108">Ten krok jest omówiona szczegółowo w rozdziale 4, ale aby podsumowanie, Oto gdzie zewnętrzna pętla rozpoczyna się, moment, w którym Deweloper wypycha kodu do systemu zarządzania kontrolą źródła (takich jak Git), inicjowanie działania potoku ciągłej integracji.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-108">This step is explained in detail in Chapter 4, but, to recap, here is where the outer-loop begins, the moment at which a developer pushes code to the source control management system (like Git) initiating CI pipeline actions.</span></span>

## <a name="step-2-source-code-control-integration-and-management-with-azure-devops-services-and-git"></a><span data-ttu-id="d0c5d-109">Krok 2: Integracja kontroli kodu źródłowego i zarządzanie za pomocą usługi Azure DevOps Services i Git</span><span class="sxs-lookup"><span data-stu-id="d0c5d-109">Step 2: Source-Code Control integration and management with Azure DevOps Services and Git</span></span>

<span data-ttu-id="d0c5d-110">W tym kroku musisz mieć systemu kontroli wersji, aby zebrać jednolity całego kodu pochodzących z różnych deweloperów w zespole.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-110">At this step, you need to have a version-control system to gather a consolidated version of all the code coming from the different developers in the team.</span></span>

<span data-ttu-id="d0c5d-111">Mimo, że kontrola kodu źródłowego (SCC) i kod źródłowy zarządzania mogą wydawać się charakter sekundy, przechodzić do większości deweloperów, podczas tworzenia aplikacji platformy Docker w życiu metodyki DevOps, warto podkreślić, że nie musisz przesłać obrazów platformy Docker z aplikacją bezpośrednio do globalnego rejestru platformy Docker (np. usługi Azure Container Registry lub Docker Hub) z komputera dewelopera.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-111">Even though source-code control (SCC) and source-code management might seem second-nature to most developers, when creating Docker applications in a DevOps life cycle, it is critical to emphasize that you must not submit the Docker images with the application directly to the global Docker Registry (like Azure Container Registry or Docker Hub) from the developer's machine.</span></span> <span data-ttu-id="d0c5d-112">Przeciwnie obrazy platformy Docker, które są zwalniane i wdrażane do środowisk produkcyjnych należy utworzyć wyłącznie na kod źródłowy, który jest integrowany w ramach globalnego kompilacji lub potoku ciągłej integracji, oparte na repozytorium kodu źródłowego (takich jak Git).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-112">On the contrary, the Docker images to be released and deployed to production environments must be created solely on the source code that is being integrated in your global build or CI pipeline based on your source-code repository (like Git).</span></span>

<span data-ttu-id="d0c5d-113">Obrazów lokalnych generowane przez deweloperów, samodzielnie powinny być używane tylko przez deweloperów, podczas testowania w ramach ich własnych maszyn.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-113">The local images generated by the developers themselves should be used just by the developers when testing within their own machines.</span></span> <span data-ttu-id="d0c5d-114">Jest to, dlaczego warto mieć z potokiem metodyki DevOps, aktywowana z poziomu kodu SCC.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-114">This is why it is critical to have the DevOps pipeline activated from the SCC code.</span></span>

<span data-ttu-id="d0c5d-115">Usługa Azure DevOps usług i Team Foundation Server obsługuje Git i kontroli wersji serwera Team Foundation.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-115">Azure DevOps Services and Team Foundation Server support Git and Team Foundation Version Control.</span></span> <span data-ttu-id="d0c5d-116">Można wybrać między nimi i użyć jej do środowiska Microsoft end-to-end.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-116">You can choose between them and use it for an end-to-end Microsoft experience.</span></span> <span data-ttu-id="d0c5d-117">Można jednak również mogą zarządzać kodu w repozytoriach zewnętrznych (takich jak GitHub, lokalne repozytoria Git i Subversion) i nadal mieć możliwość nawiązania połączenia i pobrania kodu jako punktu wyjścia dla potoku ciągłej integracji metodyki DevOps.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-117">However, you also can manage your code in external repositories (like GitHub, on-premises Git repositories, or Subversion) and still be able to connect to it and get the code as the starting point for your DevOps CI pipeline.</span></span>

## <a name="step-3-build-ci-integrate-and-test-with-azure-devops-services-and-docker"></a><span data-ttu-id="d0c5d-118">Krok 3: Tworzenie elementu konfiguracji, integracja i testowanie na platformie Azure DevOps usług i platformą Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-118">Step 3: Build, CI, Integrate, and Test with Azure DevOps Services and Docker</span></span>

<span data-ttu-id="d0c5d-119">Ciągła Integracja została uznana zawiera standardowe rozwiązanie dla nowoczesnych oprogramowania testowania i dostarczania.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-119">CI has emerged as a standard for modern software testing and delivery.</span></span> <span data-ttu-id="d0c5d-120">Rozwiązanie Docker przechowuje separacji między zespołami deweloperów i operacyjne.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-120">The Docker solution maintains a clear separation of concerns between the development and operations teams.</span></span> <span data-ttu-id="d0c5d-121">Niezmienność obrazów platformy Docker zapewnia powtarzalne wdrożenia między co został opracowany, przetestowane za pośrednictwem ciągłej integracji i uruchomić w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-121">The immutability of Docker images ensures a repeatable deployment between what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="d0c5d-122">Aparat platformy docker wdrożony na komputery przenośne dla deweloperów i infrastrukturę testowania sprawia, że kontenery przenośny między środowiskami.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-122">Docker Engine deployed across the developer laptops and test infrastructure makes the containers portable across environments.</span></span>

<span data-ttu-id="d0c5d-123">W tym momencie po system kontroli wersji przy użyciu prawidłowego kodu przesłane, potrzebujesz *Tworzenie usługi* przejmą kod i uruchom testy i globalne kompilacji.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-123">At this point, after you have a version-control system with the correct code submitted, you need a *build service* to pick up the code and run the global build and tests.</span></span>

<span data-ttu-id="d0c5d-124">Wewnętrzny przepływu pracy dla tego kroku (ciągłej integracji, kompilacja, testowanie) jest informacje do budowy potoku ciągłej integracji, składający się z repozytorium kodu (Git itp.), serwer kompilacji (usługom DevOps platformy Azure), aparat platformy Docker i rejestr platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-124">The internal workflow for this step (CI, build, test) is about the construction of a CI pipeline consisting of your code repository (Git, etc.), your build server (Azure DevOps Services), Docker Engine, and a Docker Registry.</span></span>

<span data-ttu-id="d0c5d-125">Umożliwia usługom DevOps platformy Azure jako podstawa do tworzenia aplikacji, a potok ciągłej integracji i publikowania "artefaktów kompilacji" "repozytorium artefaktów,", która została wyjaśniona w następnym kroku.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-125">You can use Azure DevOps Services as the foundation for building your applications and setting your CI pipeline, and for publishing the built "artifacts" to an "artifacts repository," which is explained in the next step.</span></span>

<span data-ttu-id="d0c5d-126">W przypadku używania platformy Docker dla wdrożenia "końcowe artefakty" do wdrożenia są obrazy platformy Docker do aplikacji lub usługi z osadzone wewnątrz nich.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-126">When using Docker for the deployment, the "final artifacts" to be deployed are Docker images with your application or services embedded within them.</span></span> <span data-ttu-id="d0c5d-127">Te obrazy są wypychane lub opublikowane na *rejestru platformy Docker* (prywatne repozytorium, takich jak te mogą mieć w usłudze Azure Container Registry, lub publiczny podobny rejestru koncentratora platformy Docker, która jest powszechnie używana oficjalne obrazy podstawowej).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-127">Those images are pushed or published to a *Docker Registry* (a private repository like the ones you can have in Azure Container Registry, or a public one like Docker Hub Registry, which is commonly used for official base images).</span></span>

<span data-ttu-id="d0c5d-128">Poniżej przedstawiono podstawowe pojęcia: Potok ciągłej integracji będą się wyłączone przez zatwierdzenia do repozytorium SCC, takich jak Git.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-128">Here is the basic concept: The CI pipeline will be kicked-off by a commit to an SCC repository like Git.</span></span> <span data-ttu-id="d0c5d-129">Zatwierdzenie spowoduje, że usługom DevOps platformy Azure Uruchom zadanie kompilacji w kontenerze platformy Docker, i po pomyślnym zakończeniu tego zadania, Wypchnij obraz platformy Docker do rejestru platformy Docker, jak pokazano w rysunek 5-2.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-129">The commit will cause Azure DevOps Services to run a build job within a Docker container and, upon successful completion of that job, push a Docker image to the Docker Registry, as illustrated in Figure 5-2.</span></span>

![](./media/image2.png)

<span data-ttu-id="d0c5d-130">Rysunek 5-2: Kroki wykonywane w elemencie konfiguracji</span><span class="sxs-lookup"><span data-stu-id="d0c5d-130">Figure 5-2: The steps involved in CI</span></span>

<span data-ttu-id="d0c5d-131">Poniżej przedstawiono podstawowe kroki przepływu pracy ciągłej integracji z platformami Docker i usługom DevOps platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="d0c5d-131">Here are the basic CI workflow steps with Docker and Azure DevOps Services:</span></span>

1.  <span data-ttu-id="d0c5d-132">Deweloper wypycha zatwierdzenie do repozytorium SCC (Git/usług platformy Azure DevOps, GitHub itp.).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-132">The developer pushes a commit to an SCC repository (Git/Azure DevOps Services, GitHub, etc.).</span></span>

2.  <span data-ttu-id="d0c5d-133">Jeśli używasz usługi Azure DevOps Services lub program Git, ciągła Integracja jest wbudowany, co oznacza, że jest tak proste, jak zaznaczenie pola wyboru w usługom DevOps platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-133">If you're using Azure DevOps Services or Git, CI is built in, which means that it is as simple as selecting a check box in Azure DevOps Services.</span></span> <span data-ttu-id="d0c5d-134">Jeśli używasz zewnętrznego SCC (na przykład GitHub) *elementu webhook* będzie Powiadom usługom DevOps platformy Azure, aktualizacji lub Wypychanie do usługi Git/GitHub.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-134">If you're using an external SCC (like GitHub), a *webhook* will notify Azure DevOps Services of the update or push to Git/GitHub.</span></span>

3.  <span data-ttu-id="d0c5d-135">Usługi Azure DevOps ściąga SCC repozytorium, w tym pliku DockerFile, zawierająca opis obrazu, a także kod aplikacji i testów.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-135">Azure DevOps Services pulls the SCC repository, including the DockerFile describing the image as well as the application and test code.</span></span>

4.  <span data-ttu-id="d0c5d-136">Usługi Azure DevOps tworzy obraz platformy Docker i etykiet go numerem kompilacji.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-136">Azure DevOps Services builds a Docker image and labels it with a build number.</span></span>

5.  <span data-ttu-id="d0c5d-137">Usługi Azure DevOps tworzy kontener platformy Docker w ramach elastycznie hosta platformy Docker i uruchamia odpowiednie testy.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-137">Azure DevOps Services instantiates the Docker container within the provisioned Docker Host, and runs the appropriate tests.</span></span>

6.  <span data-ttu-id="d0c5d-138">Jeśli testy zakończą się powodzeniem, obraz jest najpierw relabeled na nazwę opisową, dzięki czemu będzie wiadomo, że jest "kompilacja specjalne" (np. "/ 1.0.0" lub inne etykiety), a następnie wypchnięto do rejestru platformy Docker (Docker Hub, Azure Container Registry, DTR itp.)</span><span class="sxs-lookup"><span data-stu-id="d0c5d-138">If the tests are successful, the image is first relabeled to a meaningful name so that you know it is a "blessed build" (like "/1.0.0" or any other label), and then pushed up to your Docker Registry (Docker Hub, Azure Container Registry, DTR, etc.)</span></span>

### <a name="implementing-the-ci-pipeline-with-azure-devops-services-and-the-docker-extension-for-azure-devops-services"></a><span data-ttu-id="d0c5d-139">Wdrażania potoku ciągłej integracji, dzięki usługom DevOps platformy Azure oraz rozszerzenie Docker dla usługi DevOps platformy Azure</span><span class="sxs-lookup"><span data-stu-id="d0c5d-139">Implementing the CI pipeline with Azure DevOps Services and the Docker extension for Azure DevOps Services</span></span>

<span data-ttu-id="d0c5d-140">[Rozszerzenie Azure DevOps usług Docker](https://aka.ms/vstsdockerextension) dodaje zadania do potoku ciągłej integracji za pomocą którego można utworzyć obrazy platformy Docker, Wypchnij obrazy aparatu Docker do uwierzytelnionego rejestru platformy Docker, uruchamianie obrazów platformy Docker lub uruchamiania innych operacji oferowane przez platformy Docker INTERFEJS WIERSZA POLECENIA.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-140">The [Azure DevOps Services Docker extension](https://aka.ms/vstsdockerextension) adds a task to your CI pipeline with which you can build Docker images, push Docker images to an authenticated Docker registry, run Docker images, or run other operations offered by the Docker CLI.</span></span> <span data-ttu-id="d0c5d-141">Dodaje zadanie narzędzia Docker Compose, używanej do kompilacji, wypychania i uruchom z wieloma kontenerami w celu aplikacji platformy Docker lub uruchomić inne operacje oferowane przez Docker Compose interfejsu wiersza polecenia, jak pokazano w rysunek 5-3.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-141">It also adds a Docker Compose task that you can use to build, push, and run multicontainer Docker applications, or run other operations offered by the Docker Compose CLI, as shown in Figure 5-3.</span></span>

![](./media/image3.png)

<span data-ttu-id="d0c5d-142">Rysunek 5-3: Potok ciągłej integracji platformy Docker w usługom DevOps platformy Azure</span><span class="sxs-lookup"><span data-stu-id="d0c5d-142">Figure 5-3: The Docker CI pipeline in Azure DevOps Services</span></span>

<span data-ttu-id="d0c5d-143">Rozszerzenia platformy Docker można użyć punktów końcowych usługi dla hostów platformy Docker i kontenerów lub rejestry obrazów.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-143">The Docker extension can use service endpoints for Docker hosts and for container or image registries.</span></span> <span data-ttu-id="d0c5d-144">Domyślnie zadania i używa lokalnego hosta platformy Docker, jeśli jest dostępny, (obecnie wymaga niestandardowych agenta usługom DevOps platformy Azure); w przeciwnym razie wymagają one, że podajesz połączenia hosta platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-144">The tasks default to using a local Docker host if available (this currently requires a custom Azure DevOps Services agent); otherwise, they require that you provide a Docker host connection.</span></span> <span data-ttu-id="d0c5d-145">Akcje, które są zależne od uwierzytelniane za pomocą rejestru platformy Docker, takich jak wypychanie obrazu wymaga zapewnienia Docker registry połączenia.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-145">Actions that depend on being authenticated with a Docker registry, such as pushing an image, require that you provide a Docker registry connection.</span></span>

<span data-ttu-id="d0c5d-146">Rozszerzenie Azure DevOps usług Docker instaluje następujące składniki na Twoim koncie usługi DevOps platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="d0c5d-146">The Azure DevOps Services Docker extension installs the following components in your Azure DevOps Services account:</span></span>

-   <span data-ttu-id="d0c5d-147">Punkt końcowy usługi do łączenia się z rejestrem platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-147">A service endpoint for connecting to a Docker registry</span></span>

-   <span data-ttu-id="d0c5d-148">Punkt końcowy usługi do łączenia się z hosta kontenera platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-148">A service endpoint for connecting to a Docker Container Host</span></span>

-   <span data-ttu-id="d0c5d-149">Zadanie platformy Docker, aby wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="d0c5d-149">A Docker task to do the following:</span></span>

-   <span data-ttu-id="d0c5d-150">Zbuduj obraz</span><span class="sxs-lookup"><span data-stu-id="d0c5d-150">Build an image</span></span>

-   <span data-ttu-id="d0c5d-151">Wypchnij obraz lub repozytorium do rejestru</span><span class="sxs-lookup"><span data-stu-id="d0c5d-151">Push an image or a repository to a registry</span></span>

-   <span data-ttu-id="d0c5d-152">Uruchamianie obrazu w kontenerze</span><span class="sxs-lookup"><span data-stu-id="d0c5d-152">Run an image in a container</span></span>

-   <span data-ttu-id="d0c5d-153">Uruchom polecenie Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-153">Run a Docker command</span></span>

-   <span data-ttu-id="d0c5d-154">Zadaniem narzędzia Docker Compose, aby uruchamiać polecenia narzędzia Docker Compose</span><span class="sxs-lookup"><span data-stu-id="d0c5d-154">A Docker Compose task to run a Docker Compose command</span></span>

<span data-ttu-id="d0c5d-155">Te zadania usługom DevOps platformy Azure kompilacji hosta platformy Docker systemu Linux i maszyn wirtualnych aprowizowane na platformie Azure i preferowanych rejestru platformy Docker (usługi Azure Container Registry, Docker Hub, prywatne DTR platformy Docker lub dowolnego rejestru platformy Docker) można utworzyć potok ciągłej integracji platformy Docker w bardzo spójny sposób.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-155">With these Azure DevOps Services tasks, a build Linux-Docker Host/VM provisioned in Azure and your preferred Docker registry (Azure Container Registry, Docker Hub, private Docker DTR, or any other Docker registry) you can assemble your Docker CI pipeline in a very consistent way.</span></span>

<span data-ttu-id="d0c5d-156">***Wymagania:***</span><span class="sxs-lookup"><span data-stu-id="d0c5d-156">***Requirements:***</span></span>

-   <span data-ttu-id="d0c5d-157">Usługi DevOps platformy Azure lub w przypadku instalacji lokalnej, Team Foundation Server 2015 Update 3 lub nowszej.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-157">Azure DevOps Services, or for on-premises installations, Team Foundation Server 2015 Update 3 or later.</span></span>

-   <span data-ttu-id="d0c5d-158">Agenta usługi DevOps platformy Azure, który ma pliki binarne platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-158">An Azure DevOps Services agent that has the Docker binaries.</span></span>

<span data-ttu-id="d0c5d-159">Jest łatwy sposób utworzyć jeden z nich korzystać z aparatu Docker w celu uruchomienia kontenera na podstawie obrazu platformy Docker agenta usługom DevOps platformy Azure.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-159">An easy way to create one of these is to use Docker to run a container based on the Azure DevOps Services agent Docker image.</span></span>

<span data-ttu-id="d0c5d-160">**Więcej informacji o** aby przeczytać więcej informacji na temat złożenia CI Docker usługi Azure DevOps potoku i aby wyświetlić przewodniki, odwiedź następującą witrynę:</span><span class="sxs-lookup"><span data-stu-id="d0c5d-160">**More info** To read more about assembling a Azure DevOps Services Docker CI pipeline and to view walkthroughs, visit the following sites:</span></span>

<span data-ttu-id="d0c5d-161">Uruchamianie agenta usługom DevOps platformy Azure jako kontener platformy Docker: [  https://hub.docker.com/r/\ /vsts-agent usług microsoft /](https://hub.docker.com/r/microsoft/vsts-agent/)</span><span class="sxs-lookup"><span data-stu-id="d0c5d-161">Running an Azure DevOps Services agent as a Docker container: [https://hub.docker.com/r/\ microsoft/vsts-agent/](https://hub.docker.com/r/microsoft/vsts-agent/)</span></span>

<span data-ttu-id="d0c5d-162">Rozszerzenie metodyki DevOps platformy Docker z usług platformy Azure: <https://aka.ms/vstsdockerextension></span><span class="sxs-lookup"><span data-stu-id="d0c5d-162">Azure DevOps Services Docker extension: <https://aka.ms/vstsdockerextension></span></span>

<span data-ttu-id="d0c5d-163">Tworzenie obrazów Docker systemu Linux w programie .NET Core dzięki usługom DevOps platformy Azure: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span><span class="sxs-lookup"><span data-stu-id="d0c5d-163">Building .NET Core Linux Docker images with Azure DevOps Services: <https://blogs.msdn.microsoft.com/stevelasker/2016/06/13/building-net-core-linux-docker-images-with-visual-studio-team-services/></span></span>

<span data-ttu-id="d0c5d-164">Kompilowanie maszyny kompilacji opartej na systemie Linux Visual Studio Team Service z obsługą platformy Docker: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span><span class="sxs-lookup"><span data-stu-id="d0c5d-164">Building a Linux-based Visual Studio Team Service build machine with Docker support: <http://donovanbrown.com/post/2016/06/03/Building-a-Linux-Based-Visual-Studio-Team-Service-Build-Machine-with-Docker-Support></span></span>

### <a name="integrate-test-and-validate-multicontainer-docker-applications"></a><span data-ttu-id="d0c5d-165">Integracja, testowanie i Walidacja wieloma kontenerami w celu aplikacji platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-165">Integrate, test, and validate multicontainer Docker applications</span></span>

<span data-ttu-id="d0c5d-166">Zazwyczaj większość aplikacji platformy Docker składają się z wielu kontenerów, a nie jeden kontener.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-166">Typically, most Docker applications are composed of multiple containers rather than a single container.</span></span> <span data-ttu-id="d0c5d-167">Dobrym przykładem jest zorientowanych na mikrousługi aplikacji, dla którego trzeba jednego kontenera na mikrousługach.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-167">A good example is a microservices-oriented application for which you would have one container per microservice.</span></span> <span data-ttu-id="d0c5d-168">Ale nawet bez wyłącznie następujące wzorce podejście mikrousług, jest bardzo prawdopodobne, że aplikacja platformy Docker będzie składać się z wielu kontenerów i usług.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-168">But, even without strictly following the microservices approach patterns, it is very probable that your Docker application would be composed of multiple containers or services.</span></span>

<span data-ttu-id="d0c5d-169">W związku z tym po utworzeniu kontenerów aplikacji w potoku ciągłej integracji, trzeba będzie również wdrażać, integrowanie i testowanie aplikacji jako całości ze wszystkimi jego kontenerów w ramach integracji hosta platformy Docker lub nawet do klastra testowego, w jakim są usługi kontenerów rozproszone.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-169">Therefore, after building the application containers in the CI pipeline, you also need to deploy, integrate, and test the application as a whole with all of its containers within an integration Docker host or even into a test cluster to which your containers are distributed.</span></span>

<span data-ttu-id="d0c5d-170">Jeśli używasz jednego hosta, możesz użyć poleceń Docker, takich jak platforma docker-compose, aby skompilować i wdrożyć powiązane kontenerów na potrzeby testowania i sprawdzania, czy środowisko platformy Docker w pojedynczej maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-170">If you're using a single host, you can use Docker commands such as docker-compose to build and deploy related containers to test and validate the Docker environment in a single VM.</span></span> <span data-ttu-id="d0c5d-171">Jednak jeśli pracujesz z klastrem usługi orchestrator, np. DC/OS, Kubernetes lub Docker Swarm, zajdzie potrzeba wdrożenia kontenerów przy użyciu innego mechanizmu lub programu orchestrator, w zależności od wybranego klastra/harmonogramu.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-171">But, if you are working with an orchestrator cluster like DC/OS, Kubernetes, or Docker Swarm, you need to deploy your containers through a different mechanism or orchestrator, depending on your selected cluster/scheduler.</span></span>

<span data-ttu-id="d0c5d-172">Poniżej przedstawiono kilka rodzajów testów, które mogą być uruchamiane względem kontenerów platformy Docker:</span><span class="sxs-lookup"><span data-stu-id="d0c5d-172">Following are several types of tests that you can run against Docker containers:</span></span>

-   <span data-ttu-id="d0c5d-173">Testy jednostkowe dla kontenerów Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-173">Unit tests for Docker containers</span></span>

-   <span data-ttu-id="d0c5d-174">Testowanie grup aplikacji połączonych ze sobą lub mikrousług</span><span class="sxs-lookup"><span data-stu-id="d0c5d-174">Testing groups of interrelated applications or microservices</span></span>

-   <span data-ttu-id="d0c5d-175">Testowanie w produkcji i "kanarkiem" wersji</span><span class="sxs-lookup"><span data-stu-id="d0c5d-175">Test in production and "canary" releases</span></span>

<span data-ttu-id="d0c5d-176">Istotną kwestią jest to, że podczas uruchamiania, integracji i testów funkcjonalnych, należy uruchomić te testy z poza kontenerów.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-176">The important point is that when running integration and functional tests, you must run those tests from outside of the containers.</span></span> <span data-ttu-id="d0c5d-177">Testy, nie należy zdefiniowane i uruchamiane w ramach kontenerów, które są wdrażane, ponieważ kontenery są oparte na obrazy statyczne, które powinny być dokładnie tak, jak te, które będą wdrażane w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-177">Tests must not be defined and run within the containers that you are deploying, because the containers are based on static images that should be exactly like those that you will be deploying into production.</span></span>

<span data-ttu-id="d0c5d-178">Jest to bardzo możliwe opcja podczas testowania bardziej zaawansowanych scenariuszy, takich jak testowanie wielu klastrów (testowanie, klastra, klaster przemieszczania i w warunkach produkcyjnych klastra) opublikować obrazów do rejestru, aby przetestować w różnych klastrach.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-178">A very feasible option when testing more advanced scenarios like testing several clusters (test cluster, staging cluster, and production cluster) is to publish the images to a registry to test in various clusters.</span></span>

### <a name="push-the-custom-application-docker-image-into-your-global-docker-registry"></a><span data-ttu-id="d0c5d-179">Wypychanie obrazu platformy Docker niestandardowych aplikacji do globalnego rejestr platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-179">Push the custom application Docker image into your global Docker Registry</span></span>

<span data-ttu-id="d0c5d-180">Po obrazów platformy Docker zostały przetestowane i zweryfikowane, należy je oznaczać i opublikuj je do rejestru platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-180">After the Docker images have been tested and validated, you'll want to tag and publish them to your Docker registry.</span></span> <span data-ttu-id="d0c5d-181">Rejestr platformy Docker jest krytycznego w cyklu życia aplikacji platformy Docker, ponieważ to centralne miejsce, w którym są przechowywane niestandardowe testu (zwane również "specjalne obrazy") do wdrożenia w odpowiedzi na pytania i wdrożeń produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-181">The Docker registry is a critical piece in the Docker application life cycle because it is the central place where you store your custom test (aka "blessed images") to be deployed into QA and production environments.</span></span>

<span data-ttu-id="d0c5d-182">Podobnie jak kod aplikacji, przechowywane w repozytorium SCC (Git itp.) jest "źródło prawdziwych informacji", rejestr platformy Docker jest "źródłem prawdziwych" binarnych aplikacji lub usługi bits do wdrożenia środowiska QA lub produkcja.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-182">Similar to how the application code stored in your SCC repository (Git, etc.) is your "source of truth," the Docker registry is your "source of truth" for your binary application or bits to be deployed to the QA or production environments.</span></span>

<span data-ttu-id="d0c5d-183">Zazwyczaj warto mieć prywatnych repozytoriów dla obrazów niestandardowych w prywatnym repozytorium w usłudze Azure Container Registry lub rejestru lokalnych, takich jak Docker Trusted Registry lub rejestru chmury publicznej z ograniczonym dostępem (np. Usługi docker Hub), chociaż w tym ostatnim przypadku, jeśli kod nie jest typu open source, muszą ufać zabezpieczeń dostawcy.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-183">Typically, you might want to have your private repositories for your custom images either in a private repository in Azure Container Registry or in an on-premises registry like Docker Trusted Registry, or in a public-cloud registry with restricted access (like Docker Hub), although in this last case if your code is not open source, you must trust the vendor's security.</span></span> <span data-ttu-id="d0c5d-184">W obu przypadkach metoda, za pomocą którego można to zrobić jest bardzo podobne i ostatecznie zależnie od polecenia wypychania platformy docker, jak pokazano na rysunku 5-4.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-184">Either way, the method by which you do this is pretty similar and ultimately based on the docker push command, as depicted in Figure 5-4.</span></span>

![](./media/image4.png)

<span data-ttu-id="d0c5d-185">Rysunek 5-4: Publikowanie niestandardowych obrazów do rejestru platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-185">Figure 5-4: Publishing custom images to Docker Registry</span></span>

<span data-ttu-id="d0c5d-186">Istnieje wiele ofert z rejestrów platformy Docker z dostawców chmury, takich jak usługa Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, rejestr nabrzeża i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-186">There are multiple offerings of Docker registries from cloud vendors like Azure Container Registry, Amazon Web Services Container Registry, Google Container Registry, Quay Registry, and so on.</span></span>

<span data-ttu-id="d0c5d-187">Korzystanie z rozszerzenia Azure DevOps usługi Docker, możesz wypchnąć zestaw obrazów usługi zdefiniowane w pliku docker-compose.yml przy użyciu wielu tagów do uwierzytelnionego rejestru platformy Docker (np. usługi Azure Container Registry), jak pokazano na rysunku 5-5.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-187">Using the Azure DevOps Services Docker extension, you can push a set of service images defined by a docker-compose.yml file, with multiple tags, to an authenticated Docker registry (like Azure Container Registry), as shown in Figure 5-5.</span></span>

![](./media/image5.png)

<span data-ttu-id="d0c5d-188">Rysunek 5-5: Publikowanie niestandardowych obrazów do rejestru platformy Docker przy użyciu usługi DevOps platformy Azure</span><span class="sxs-lookup"><span data-stu-id="d0c5d-188">Figure 5-5: Using Azure DevOps Services to publishing custom images to a Docker Registry</span></span>

<span data-ttu-id="d0c5d-189">**Więcej informacji o** Aby dowiedzieć się więcej o rozszerzeniu Docker dla usługi DevOps platformy Azure, przejdź do <https://aka.ms/vstsdockerextension>.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-189">**More info** To read more about the Docker extension for Azure DevOps Services, go to <https://aka.ms/vstsdockerextension>.</span></span> <span data-ttu-id="d0c5d-190">Aby dowiedzieć się więcej na temat usługi Azure Container Registry, przejdź do <https://aka.ms/azurecontainerregistry>.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-190">To learn more about Azure Container Registry, go to <https://aka.ms/azurecontainerregistry>.</span></span>

## <a name="step-4-cd-deploy"></a><span data-ttu-id="d0c5d-191">Krok 4: Ciągłe wdrażanie, wdrażanie</span><span class="sxs-lookup"><span data-stu-id="d0c5d-191">Step 4: CD, Deploy</span></span>

<span data-ttu-id="d0c5d-192">Niezmienność obrazów platformy Docker zapewnia powtarzalne wdrożenia za pomocą co został opracowany, przetestowane za pośrednictwem ciągłej integracji i uruchomić w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-192">The immutability of Docker images ensures a repeatable deployment with what's developed, tested through CI, and run in production.</span></span> <span data-ttu-id="d0c5d-193">Po utworzeniu aplikacji obrazów platformy Docker, opublikowane w rejestrze Docker (prywatnej lub publicznej), można wdrożyć je do kilku środowiskach, które mogą wystąpić (produkcyjne, QA, przemieszczania, itp.) z potok ciągłego wdrażania za pomocą usługi DevOps platformy Azure zadania potoku lub usługi Azure DevOps usługi Release Management.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-193">After you have the application Docker images published in your Docker registry (either private or public), you can deploy them to the several environments that you might have (production, QA, staging, etc.) from your CD pipeline by using Azure DevOps Services pipeline tasks or Azure DevOps Services Release Management.</span></span>

<span data-ttu-id="d0c5d-194">Jednak na tym etapie zależy ona wdrażanie jakiego rodzaju aplikację platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-194">However, at this point it depends on what kind of Docker application you are deploying.</span></span> <span data-ttu-id="d0c5d-195">Wdrażanie prostej aplikacji (z tworzenia i wdrażania punktu widzenia) takich jak monolitycznych aplikacji wchodzących w skład kilku kontenerów lub usług i wdrożone na kilku serwerach lub maszynach wirtualnych jest bardzo różnią się od wdrażanie bardziej złożonych aplikacji, takich jak zorientowanych na mikrousługi aplikacji z możliwościami w hiperskali.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-195">Deploying a simple application (from a composition and deployment point of view) like a monolithic application comprising a few containers or services and deployed to a few servers or VMs is very different from deploying a more complex application like a microservices-oriented application with hyperscale capabilities.</span></span> <span data-ttu-id="d0c5d-196">W poniższych sekcjach opisano te dwa scenariusze.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-196">These two scenarios are explained in the following sections.</span></span>

### <a name="deploying-composed-docker-applications-to-multiple-docker-environments"></a><span data-ttu-id="d0c5d-197">Wdrażanie składa się z aplikacji platformy Docker w wielu środowiskach platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-197">Deploying composed Docker applications to multiple Docker environments</span></span>

<span data-ttu-id="d0c5d-198">Przyjrzyjmy się pierwsze u scenariusz mniej złożone: Wdrażanie prostego hostów platformy Docker (maszyn wirtualnych lub serwerach) w ramach jednego środowiska lub do wielu środowisk (kontroli jakości, środowisk przejściowych i produkcyjnych).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-198">Let's look first at the less-complex scenario: deploying to simple Docker hosts (VMs or servers) in a single environment or multiple environments (QA, staging, and production).</span></span> <span data-ttu-id="d0c5d-199">W tym scenariuszu wewnętrznie potok ciągłego Dostarczania można używać platformy docker-compose (z zadań wdrożenia usługom DevOps platformy Azure) do wdrożenia przy użyciu jego powiązany zestaw aplikacji platformy Docker, kontenery lub usługi, tak jak przedstawiono to w rysunek 5 – 6.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-199">In this scenario, internally your CD pipeline can use docker-compose (from your Azure DevOps Services deployment tasks) to deploy the Docker applications with its related set of containers or services, as illustrated in Figure 5-6.</span></span>

![](./media/image6.png)

<span data-ttu-id="d0c5d-200">Rysunek 5 – 6: Wdrażanie aplikacji kontenerów do prostych rejestru środowiska hosta platformy Docker</span><span class="sxs-lookup"><span data-stu-id="d0c5d-200">Figure 5-6: Deploying application containers to simple Docker host environments registry</span></span>

<span data-ttu-id="d0c5d-201">Rysunek 5 – 7 pokazuje, jak połączyć kompilacji ciągłej integracji do odpowiedzi na pytania/testowym za pośrednictwem usługi DevOps platformy Azure, klikając pozycję Narzędzia Docker Compose w oknie dialogowym Dodaj zadanie.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-201">Figure 5-7 highlights how you can connect your build CI to QA/test environments via Azure DevOps Services by clicking Docker Compose in the Add Task dialog box.</span></span> <span data-ttu-id="d0c5d-202">Jednak w przypadku wdrażania w środowiskach przejściowych lub produkcyjnych, zazwyczaj używasz funkcji Release Management, obsługa wielu środowisk (takich jak pytań i odpowiedzi, środowisk przejściowych i produkcyjnych).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-202">However, when deploying to staging or production environments, you would usually use Release Management features handling multiple environments (like QA, staging, and production).</span></span> <span data-ttu-id="d0c5d-203">Jeśli wdrażasz do pojedynczego hostów platformy Docker, jest za pomocą usługi Azure DevOps "Narzędzia Docker Compose" zadanie (który wywołuje platformy docker-compose się polecenia kulisy).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-203">If you're deploying to single Docker hosts, it is using the Azure DevOps Services "Docker Compose" task (which is invoking the docker-compose up command under the hood).</span></span> <span data-ttu-id="d0c5d-204">Jeśli wdrażasz do usługi Azure Container Service używa zadania wdrażania platformy Docker, jak wyjaśniono w poniższej sekcji.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-204">If you're deploying to Azure Container Service, it uses the Docker Deployment task, as explained in the section that follows.</span></span>

![](./media/image7.png)

<span data-ttu-id="d0c5d-205">Rysunek 5 – 7: Dodawanie zadania narzędzia Docker Compose w potoku usługom DevOps platformy Azure</span><span class="sxs-lookup"><span data-stu-id="d0c5d-205">Figure 5-7: Adding a Docker Compose task in a Azure DevOps Services pipeline</span></span>

<span data-ttu-id="d0c5d-206">Po utworzeniu wydania w usługom DevOps platformy Azure ma zbiór wejściowy artefaktów.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-206">When you create a release in Azure DevOps Services, it takes a set of input artifacts.</span></span> <span data-ttu-id="d0c5d-207">Te powinny być niezmienialny w okresie istnienia wersji w wielu środowiskach.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-207">These are intended to be immutable throughout the lifetime of the release across multiple environments.</span></span> <span data-ttu-id="d0c5d-208">Po wprowadzeniu kontenerów, danych wejściowych artefaktów zidentyfikować obrazów w rejestrze, aby wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-208">When you introduce containers, the input artifacts identify images in a registry to deploy.</span></span> <span data-ttu-id="d0c5d-209">W zależności od tego, jak są one zidentyfikowane mają nie gwarancję, że pozostają takie same, w okresie obowiązywania wersji najbardziej oczywisty przypadek, że gdy odwołujesz się z plikiem docker-compose "myimage:latest".</span><span class="sxs-lookup"><span data-stu-id="d0c5d-209">Depending on how these are identified, they are not guaranteed to remain the same throughout the duration of the release, the most obvious case being when you reference "myimage:latest" from a docker-compose file.</span></span>

<span data-ttu-id="d0c5d-210">Rozszerzenia platformy Docker dla usługi Azure DevOps Services wyświetla skróty służące możliwość generowania artefaktów kompilacji, które zawiera obrazu określonego rejestru, które gwarantują do unikatowej identyfikacji tego samego obrazu binarnego.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-210">The Docker extension for Azure DevOps Services gives you the ability to generate build artifacts that contain specific registry image digests that are guaranteed to uniquely identify the same image binary.</span></span> <span data-ttu-id="d0c5d-211">Są to, co naprawdę chcesz użyć jako dane wejściowe do wydania.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-211">These are what you really want to use as input to a release.</span></span>

### <a name="managing-releases-to-docker-environments-by-using-azure-devops-services-release-management"></a><span data-ttu-id="d0c5d-212">Zarządzanie wersjami w środowiskach platformy Docker przy użyciu usługi Azure DevOps usługi Release Management</span><span class="sxs-lookup"><span data-stu-id="d0c5d-212">Managing releases to Docker environments by using Azure DevOps Services Release Management</span></span>

<span data-ttu-id="d0c5d-213">Za pośrednictwem rozszerzeń usługom DevOps platformy Azure, można utworzyć nowy obraz, opublikuj go do rejestru platformy Docker, uruchom go na hostach z systemem Linux lub Windows i użyj poleceń, takich jak platforma docker-compose w celu wdrożenia wielu kontenerów jako całej aplikacji, wspomaga DevOps platformy Azure Możliwości zarządzania wydaniami przeznaczonych dla wielu środowisk usług, jak pokazano w rysunek 5 – 8.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-213">Through the Azure DevOps Services extensions, you can build a new image, publish it to a Docker registry, run it on Linux or Windows hosts, and use commands such as docker-compose to deploy multiple containers as an entire application, all through the Azure DevOps Services Release Management capabilities intended for multiple environments, as shown in Figure 5-8.</span></span>

![](./media/image8.png)

<span data-ttu-id="d0c5d-214">Rysunek 5 – 8: Konfigurowanie usługi Azure DevOps usług narzędzia Docker Compose zadań przy użyciu usługi Azure DevOps usługi Release Management</span><span class="sxs-lookup"><span data-stu-id="d0c5d-214">Figure 5-8: Configuring Azure DevOps Services Docker Compose tasks from Azure DevOps Services Release Management</span></span>

<span data-ttu-id="d0c5d-215">Jednak pamiętać, że scenariusz pokazano w rysunek 5 i 6- i wdrażane w rysunek 5 – 8 jest zbyt skomplikowany (jest wdrożenie prostego hostów platformy Docker i maszynom wirtualnym i będzie jeden kontener i wystąpienie na obrazie) i prawdopodobnie należy używać tylko w przypadku projektowania lub testowania sc enarios.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-215">However, keep in mind that the scenario shown in Figure 5-6 and implemented in Figure 5-8 is pretty basic (it is deploying to simple Docker hosts and VMs, and there will be a single container or instance per image) and probably should be used only for development or test scenarios.</span></span> <span data-ttu-id="d0c5d-216">W większości scenariuszy produkcyjnych przedsiębiorstwa, chcesz mieć wysokiej dostępności (HA) i łatwy w zarządzaniu skalowalność, przez równoważenie obciążenia między wiele węzłów, serwerów i maszyn wirtualnych, a także "inteligentne przejścia w tryb failover" tak, jeśli serwer lub węzła nie powiedzie się, usługach i kontenery zostanie przeniesiony do innego serwera hosta lub maszyny Wirtualnej.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-216">In most enterprise production scenarios, you would want to have High Availability (HA) and easy-to-manage scalability by load balancing across multiple nodes, servers, and VMs, plus "intelligent failovers" so that if a server or node fails, its services and containers will be moved to another host server or VM.</span></span> <span data-ttu-id="d0c5d-217">W takim przypadku potrzebujesz bardziej zaawansowanych technologii, takich jak klastry kontenerów, koordynatorów i transfery danych.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-217">In that case, you need more advanced technologies like container clusters, orchestrators, and schedulers.</span></span> <span data-ttu-id="d0c5d-218">W związku z tym sposób wdrażania tych klastrach jest dokładnie za pomocą zaawansowanych scenariuszy, które wyjaśniono w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-218">Thus, the way to deploy to those clusters is precisely through the advanced scenarios explained in the next section.</span></span>

### <a name="deploying-complex-docker-applications-to-docker-clusters-dcos-kubernetes-and-docker-swarm"></a><span data-ttu-id="d0c5d-219">Wdrażanie złożonych aplikacji platformy Docker z klastrami platformy Docker (DC/OS, Kubernetes i Docker Swarm)</span><span class="sxs-lookup"><span data-stu-id="d0c5d-219">Deploying complex Docker applications to Docker clusters (DC/OS, Kubernetes, and Docker Swarm)</span></span>

<span data-ttu-id="d0c5d-220">Rodzaj aplikacji rozproszonych wymaga zasobów obliczeniowych, które są rozpowszechniane.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-220">The nature of distributed applications requires compute resources that are also distributed.</span></span> <span data-ttu-id="d0c5d-221">Zapewnienie możliwości skalowania w środowisku produkcyjnym, musisz mieć, klastrowanie możliwości, które zapewniają wysoką skalowalność i wysokiej dostępności na podstawie puli zasobów.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-221">To have production-scale capabilities, you need to have clustering capabilities that provide high scalability and HA based on pooled resources.</span></span>

<span data-ttu-id="d0c5d-222">Można wdrożyć kontenery ręcznie do tych klastrów za pomocą narzędzia interfejsu wiersza polecenia, takie jak Docker Swarm (takimi jak wymaganie użycia [tworzenia usługi docker](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) lub internetowego interfejsu użytkownika takich jak [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) dla platformy DC/OS klastrów, ale należy Zarezerwuj, tylko do celów testowych terminową wdrożenia lub do celów zarządzania, takie jak skalowanie w poziomie lub celów monitorowania.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-222">You could deploy containers manually to those clusters from a CLI tool such as Docker Swarm (like using [docker service create](https://docs.docker.com/engine/swarm/swarm-tutorial/deploy-service/)) or a web UI such as [Mesosphere Marathon](https://mesosphere.github.io/marathon/docs/marathon-ui.html) for DC/OS clusters, but you should reserve that only for punctual deployment testing or for management purposes like scaling-out or monitoring purposes.</span></span>

<span data-ttu-id="d0c5d-223">Z punktu widzenia ciągłego Dostarczania i usługom DevOps platformy Azure w w szczególności można uruchomić zadania związane z wdrażaniem specjalnie wykonane z środowiska usługi Azure DevOps usługi Release Management, które zostaną wdrożone w klastrach rozproszonych w kontenerze aplikacji konteneryzowanych Usługi, jak pokazano w rysunek 5-9.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-223">From a CD point of view, and Azure DevOps Services specifically, you can run specially made deployment tasks from your Azure DevOps Services Release Management environments which will deploy your containerized applications to distributed clusters in Container Service, as illustrated in Figure 5-9.</span></span>

![](./media/image9.png)

<span data-ttu-id="d0c5d-224">Rysunek 5-9: Wdrażanie aplikacji rozproszonych w usłudze Container Service</span><span class="sxs-lookup"><span data-stu-id="d0c5d-224">Figure 5-9: Deploying distributed applications to Container Service</span></span>

<span data-ttu-id="d0c5d-225">Początkowo podczas wdrażania aplikacji na niektórych klastrów lub koordynatorów, tradycyjnie używasz skryptów wdrażania i mechanizmy na poszczególnych koordynatorów (czyli Mesosphere DC/OS lub Kubernetes, które mają mechanizmy innego wdrożenia niż platformy Docker i platformy Docker Swarm) zamiast prostszy i łatwy w użyciu narzędzia docker-compose narzędzia na podstawie pliku definicji docker-compose.yml.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-225">Initially, when deploying to certain clusters or orchestrators, you would traditionally use specific deployment scripts and mechanisms per each orchestrator (that is, Mesosphere DC/OS or Kubernetes have different deployment mechanisms than Docker and Docker Swarm) instead of the simpler and easy-to-use docker-compose tool based on the docker-compose.yml definition file.</span></span> <span data-ttu-id="d0c5d-226">Jednak dzięki zadanie wdrażania platformy Docker usług do programu Microsoft Azure DevOps pokazano na rysunku 5-10 teraz również można wdrożyć rozwiązania DC/OS za pomocą pliku docker-compose.yml znanych po prostu, ponieważ Microsoft przeprowadza "Translacja" (z usługi Plik docker-compose.yml w innych formatach, wymagane przez platformy DC/OS).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-226">However, thanks to the Microsoft Azure DevOps Services Docker Deploy task, shown in Figure 5-10, you now also can deploy to DC/OS by just using your familiar docker-compose.yml file because Microsoft performs that "translation" for you (from your docker-compose.yml file to other formats needed by DC/OS).</span></span>

![](./media/image10.png)

<span data-ttu-id="d0c5d-227">Rysunek 5 – 10: Dodawanie zadania wdrażania platformy Docker do swojego menedżera zasobów w środowisku</span><span class="sxs-lookup"><span data-stu-id="d0c5d-227">Figure 5-10: Adding the Docker Deploy task to your Environment RM</span></span>

<span data-ttu-id="d0c5d-228">Rysunek 5 – 11 pokazano, jak można edytować zadania wdrażania platformy Docker i określić typ docelowy (Azure Container Service DC/OS, w tym przypadku), plik Docker Compose i połączenie rejestru platformy Docker (np. usługi Azure Container Registry lub Docker Hub).</span><span class="sxs-lookup"><span data-stu-id="d0c5d-228">Figure 5-11 demonstrates how you can edit the Docker Deploy task and specify the Target Type (Azure Container Service DC/OS, in this case), your Docker Compose File, and the Docker Registry connection (like Azure Container Registry or Docker Hub).</span></span> <span data-ttu-id="d0c5d-229">Jest to, gdy zadanie pobiera gotowych do użycia niestandardowe obrazy usługi Docker do wdrożenia jako kontenery w klastrze DC/OS.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-229">This is where the task will retrieve your ready-to-use custom Docker images to be deployed as containers in the DC/OS cluster.</span></span>

![](./media/image11.png)

<span data-ttu-id="d0c5d-230">Rysunek 5 – 11: Docker Wdróż zadań definicji wdrażania do Azure Container Service DC/OS</span><span class="sxs-lookup"><span data-stu-id="d0c5d-230">Figure 5-11: Docker Deploy task definition deploying to Azure Container Service DC/OS</span></span>

<span data-ttu-id="d0c5d-231">**Więcej informacji o** Aby dowiedzieć się więcej o potok ciągłego wdrażania za pomocą usługi DevOps platformy Azure i Docker, odwiedź następującą witrynę:</span><span class="sxs-lookup"><span data-stu-id="d0c5d-231">**More info** To read more about the CD pipeline with Azure DevOps Services and Docker, visit the following sites:</span></span>

<span data-ttu-id="d0c5d-232">Rozszerzenie usługom DevOps platformy Azure dla platformy Docker i Azure Container Service: [ https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span><span class="sxs-lookup"><span data-stu-id="d0c5d-232">Azure DevOps Services extension for Docker and Azure Container Service: [https://aka.ms/\ vstsdockerextension](https://aka.ms/vstsdockerextension)</span></span>

<span data-ttu-id="d0c5d-233">Usługa Azure Container Service: <https://aka.ms/azurecontainerservice></span><span class="sxs-lookup"><span data-stu-id="d0c5d-233">Azure Container Service: <https://aka.ms/azurecontainerservice></span></span>

<span data-ttu-id="d0c5d-234">System mesosphere DC/OS: <https://mesosphere.com/product/></span><span class="sxs-lookup"><span data-stu-id="d0c5d-234">Mesosphere DC/OS: <https://mesosphere.com/product/></span></span>

## <a name="step-5-run-and-manage"></a><span data-ttu-id="d0c5d-235">Krok 5: Uruchamianie i zarządzanie</span><span class="sxs-lookup"><span data-stu-id="d0c5d-235">Step 5: Run and manage</span></span>

<span data-ttu-id="d0c5d-236">Ponieważ uruchamianie aplikacji i zarządzanie nimi w środowisku produkcyjnym przedsiębiorstwa poziom jest główne tematu w i samego siebie oraz ze względu na rodzaj operacji, i ludzie przy pracy na tym samym poziomie (operacje IT) oraz duży zakres tego obszaru, firma Microsoft ma poświęcona całą obok rozdziału w celu objaśniające go.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-236">Because running and managing applications at enterprise-production level is a major subject in and of itself, and due to the type of operations and people working at that level (IT operations) as well as the large scope of this area, we have devoted the entire next chapter to explaining it.</span></span>

## <a name="step-6-monitor-and-diagnose"></a><span data-ttu-id="d0c5d-237">Krok 6: Monitorowanie i diagnozowanie</span><span class="sxs-lookup"><span data-stu-id="d0c5d-237">Step 6: Monitor and diagnose</span></span>

<span data-ttu-id="d0c5d-238">W tym temacie również jest objęte w następnym rozdziale zadań wykonywanych przez dział operacji IT w systemach produkcyjnych. jednak ważne jest wyróżnić szczegółowe dane uzyskane w tym kroku źródła musi danych do zespołu programistycznego, tak, aby stale zwiększona aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-238">This topic also is covered in the next chapter as part of the tasks that IT operations performs in production systems; however, is important to highlight that the insights obtained in this step must feed back to the development team so that the application is constantly improved.</span></span> <span data-ttu-id="d0c5d-239">Z tego punktu widzenia, jest również częścią metodyki DevOps, chociaż zadania oraz operacje są zazwyczaj wykonywane przez IT.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-239">From that point of view, it is also part of DevOps, although the tasks and operations are usually performed by IT.</span></span>

<span data-ttu-id="d0c5d-240">Tylko w przypadku monitorowania i diagnostyki 100 procent, w obszarze metodyki DevOps są procesy monitorowania i analizy, wykonywane przez zespół programistyczny dla środowisk testowych lub wersji beta.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-240">Only when monitoring and diagnostics are 100 percent within the realm of DevOps are the monitoring processes and analytics performed by the development team against testing or beta environments.</span></span> <span data-ttu-id="d0c5d-241">Jest to realizowane przez wykonywanie testów obciążenia lub po prostu monitorowania w wersji beta lub odpowiedzi na pytania środowisk, w którym próbujesz się nowe wersje testerów wersji beta.</span><span class="sxs-lookup"><span data-stu-id="d0c5d-241">This is done either by performing load testing or simply by monitoring beta or QA environments, where beta testers are trying the new versions.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d0c5d-242">[Poprzednie](index.md)
>[dalej](../run-manage-monitor-docker-environments/index.md)</span><span class="sxs-lookup"><span data-stu-id="d0c5d-242">[Previous](index.md)
[Next](../run-manage-monitor-docker-environments/index.md)</span></span>