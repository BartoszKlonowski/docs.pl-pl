---
title: Stan i dane w aplikacjach platformy Docker
description: Cykl życia aplikacji konteneryzowanych platformy Docker przy użyciu platformy firmy Microsoft i narzędzi
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 09/22/2017
ms.openlocfilehash: 78db191bdec4c25c11728d819d89eaaaff4bd7da
ms.sourcegitcommit: ad99773e5e45068ce03b99518008397e1299e0d1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/22/2018
ms.locfileid: "46586049"
---
# <a name="state-and-data-in-docker-applications"></a><span data-ttu-id="03f30-103">Stan i dane w aplikacjach platformy Docker</span><span class="sxs-lookup"><span data-stu-id="03f30-103">State and data in Docker applications</span></span>

<span data-ttu-id="03f30-104">Podstawowy kontenerów jest niezmienności.</span><span class="sxs-lookup"><span data-stu-id="03f30-104">A primitive of containers is immutability.</span></span> <span data-ttu-id="03f30-105">W porównaniu do maszyny Wirtualnej, kontenery nie znikają jako typowych wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="03f30-105">When compared to a VM, containers don't disappear as a common occurrence.</span></span> <span data-ttu-id="03f30-106">Maszyna wirtualna może się nie powieść w różnych formach martwy procesów, przeciążone procesora CPU lub dysk zapełniony lub nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="03f30-106">A VM might fail in various forms from dead processes, overloaded CPU, or a full or failed disk.</span></span> <span data-ttu-id="03f30-107">Jeszcze oczekujemy, że maszyna wirtualna była dostępna, i RAID dyski są powszechne, aby mieć pewność, że błędy dysku przechowywania danych.</span><span class="sxs-lookup"><span data-stu-id="03f30-107">Yet, we expect the VM to be available and RAID drives are commonplace to assure drive failures maintain data.</span></span>

<span data-ttu-id="03f30-108">Jednak kontenery są uznawane za wystąpień procesów.</span><span class="sxs-lookup"><span data-stu-id="03f30-108">However, containers are thought to be instances of processes.</span></span> <span data-ttu-id="03f30-109">Proces nie zachowują stan trwały.</span><span class="sxs-lookup"><span data-stu-id="03f30-109">A process doesn't maintain durable state.</span></span> <span data-ttu-id="03f30-110">Mimo że kontener może zapisywać jej magazynu lokalnego, przy założeniu, że to wystąpienie będzie wokół przez czas nieokreślony byłaby równoważna przy założeniu, że pamięć jedną kopię będą trwałe.</span><span class="sxs-lookup"><span data-stu-id="03f30-110">Even though a container can write to its local storage, assuming that that instance will be around indefinitely would be equivalent to assuming a single-copy memory will be durable.</span></span> <span data-ttu-id="03f30-111">Należy przyjąć, że kontenery, takich jak procesy, są duplikowane zabite, lub gdy jest zarządzana z koordynatorem kontenera, może być przeniesiony.</span><span class="sxs-lookup"><span data-stu-id="03f30-111">You should assume that containers, like processes, are duplicated, killed, or, when managed with a container orchestrator, they might be moved.</span></span>

<span data-ttu-id="03f30-112">Platforma docker korzysta funkcje znane jako *nakładki system plików* do zaimplementowania procesu kopii przy zapisie, który przechowuje dowolne zaktualizowane informacje do głównego systemu plików kontenera, w porównaniu do oryginalnego obrazu, na którym bazuje.</span><span class="sxs-lookup"><span data-stu-id="03f30-112">Docker uses a feature known as an *overlay file system* to implement a copy-on-write process that stores any updated information to the root file system of a container, compared to the original image on which it is based.</span></span> <span data-ttu-id="03f30-113">Te zmiany zostaną utracone, jeśli kontener są usuwane z systemu.</span><span class="sxs-lookup"><span data-stu-id="03f30-113">These changes are lost if the container is subsequently deleted from the system.</span></span> <span data-ttu-id="03f30-114">Kontener, w związku z tym, nie ma Magazyn trwały domyślnie.</span><span class="sxs-lookup"><span data-stu-id="03f30-114">A container, therefore, does not have persistent storage by default.</span></span> <span data-ttu-id="03f30-115">Chociaż istnieje możliwość zapisania stanu kontenera, projektowanie systemu obejścia tego problemu będzie konflikt z zasadą architekturę kontener.</span><span class="sxs-lookup"><span data-stu-id="03f30-115">Although it's possible to save the state of a container, designing a system around this would be in conflict with the principle of container architecture.</span></span>

<span data-ttu-id="03f30-116">Aby zarządzać trwałości danych w aplikacji platformy Docker, dostępne są typowe rozwiązania:</span><span class="sxs-lookup"><span data-stu-id="03f30-116">To manage persistent data in Docker applications, there are common solutions:</span></span>

-   <span data-ttu-id="03f30-117">[**Woluminy danych**](https://docs.docker.com/engine/tutorials/dockervolumes/) tych instalacji na hoście, jak wspomniano tylko.</span><span class="sxs-lookup"><span data-stu-id="03f30-117">[**Data volumes**](https://docs.docker.com/engine/tutorials/dockervolumes/) These mount to the host, as just noted.</span></span>

-   <span data-ttu-id="03f30-118">[**Kontenery woluminów danych**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) w kontenerach, za pomocą zewnętrznego kontenera, które mogą przechodzić te zapewnienia udostępnionego magazynu.</span><span class="sxs-lookup"><span data-stu-id="03f30-118">[**Data volume containers**](https://docs.docker.com/engine/tutorials/dockervolumes/#/creating-and-mounting-a-data-volume-container) These provide shared storage across containers, using an external container that can cycle.</span></span>

-   <span data-ttu-id="03f30-119">[**Wolumin wtyczek**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) instalacji tych woluminów w lokalizacjach zdalnych, zapewniając długoterminowe trwałości.</span><span class="sxs-lookup"><span data-stu-id="03f30-119">[**Volume Plugins**](https://docs.docker.com/engine/tutorials/dockervolumes/#/mount-a-shared-storage-volume-as-a-data-volume) These mount volumes to remote locations, providing long-term persistence.</span></span>

-   <span data-ttu-id="03f30-120">**Zdalnych źródeł danych** przykłady obejmują bazy danych SQL i inny niż SQL lub usług, takich jak pamięci podręcznej Redis w pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="03f30-120">**Remote data sources** Examples include SQL and NO-SQL databases or cache services like Redis.</span></span>

-   <span data-ttu-id="03f30-121">[**Usługa Azure Storage**](https://docs.microsoft.com/azure/storage/) zapewnia geograficznie dystrybucyjnego platformy jako magazyn usługa (PaaS), dzięki kontenerów jako długoterminowe trwałości.</span><span class="sxs-lookup"><span data-stu-id="03f30-121">[**Azure Storage**](https://docs.microsoft.com/azure/storage/) This provides geo distributable platform as a service (PaaS) storage, providing the best of containers as long-term persistence.</span></span>

<span data-ttu-id="03f30-122">Woluminy danych zostały specjalnie oznaczone katalogów w co najmniej jeden kontener, które obchodzą [złożenia System plików](https://docs.docker.com/glossary/?term=Union%20file%20system).</span><span class="sxs-lookup"><span data-stu-id="03f30-122">Data volumes are specially designated directories within one or more containers that bypass the [Union File System](https://docs.docker.com/glossary/?term=Union%20file%20system).</span></span> <span data-ttu-id="03f30-123">Woluminy danych są przeznaczone do przechowywania danych, niezależnie od cyklu życia kontenera.</span><span class="sxs-lookup"><span data-stu-id="03f30-123">Data volumes are designed to maintain data, independent of the container's life cycle.</span></span> <span data-ttu-id="03f30-124">Platformy docker w związku z tym nigdy nie spowoduje automatyczne usunięcie woluminów po usunięcie kontenera ani zostanie "zbieranie pamięci" woluminów, które nie są już używane przez kontener.</span><span class="sxs-lookup"><span data-stu-id="03f30-124">Docker therefore never automatically deletes volumes when you remove a container, nor will it "garbage collect" volumes that are no longer referenced by a container.</span></span> <span data-ttu-id="03f30-125">System operacyjny hosta można przeglądać i edytować dane w dowolny wolumin za darmo, który jest po prostu kolejny powód, aby oszczędnie korzystać woluminów danych.</span><span class="sxs-lookup"><span data-stu-id="03f30-125">The host operating system can browse and edit the data in any volume freely, which is just another reason to use data volumes sparingly.</span></span>

<span data-ttu-id="03f30-126">A [kontenera woluminów danych](https://docs.docker.com/glossary/?term=volume) jest ulepszeniem regularnych danych woluminów.</span><span class="sxs-lookup"><span data-stu-id="03f30-126">A [data volume container](https://docs.docker.com/glossary/?term=volume) is an improvement over regular data volumes.</span></span> <span data-ttu-id="03f30-127">Jest nieaktywni kontener, który ma co najmniej jeden wolumin danych utworzone w nim (zgodnie z wcześniejszym opisem).</span><span class="sxs-lookup"><span data-stu-id="03f30-127">It is essentially a dormant container that has one or more data volumes created within it (as described earlier).</span></span> <span data-ttu-id="03f30-128">Kontener woluminów danych zapewnia dostęp do kontenerów z punktem instalacji centralnej.</span><span class="sxs-lookup"><span data-stu-id="03f30-128">The data volume container provides access to containers from a central mount point.</span></span> <span data-ttu-id="03f30-129">Zaletą tej metody dostępu jest, że przenosi jego lokalizacji oryginalnych danych, Tworzenie kontenera danych punkt instalacji logiczne.</span><span class="sxs-lookup"><span data-stu-id="03f30-129">The benefit of this method of access is that it abstracts the location of the original data, making the data container a logical mount point.</span></span> <span data-ttu-id="03f30-130">Umożliwia także kontenery "aplikacja" uzyskiwania dostępu do kontenera woluminów danych może być tworzone i niszczone, zachowując dane trwałego w kontenerze dedykowanych.</span><span class="sxs-lookup"><span data-stu-id="03f30-130">It also allows "application" containers accessing the data container volumes to be created and destroyed while keeping the data persistent in a dedicated container.</span></span>

<span data-ttu-id="03f30-131">Rysunek 4-5 zawiera, można umieścić w pamięci masowej z kontenerów, samodzielnie, ale w obrębie hosta maszyny Wirtualnej i server fizycznymi granicami regularne woluminy platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="03f30-131">Figure 4-5 shows that regular Docker volumes can be placed on storage out of the containers themselves but within the host server/VM physical boundaries.</span></span> <span data-ttu-id="03f30-132">*Docker woluminy nie mają możliwość używania woluminu z jednego hosta serwera/maszyn wirtualnych do innego*.</span><span class="sxs-lookup"><span data-stu-id="03f30-132">*Docker volumes don't have the ability to use a volume from one host server/VM to another*.</span></span>

![](./media/image5.png)

<span data-ttu-id="03f30-133">Rysunek 4-5: woluminów danych i zewnętrznych źródeł danych dla kontenerów aplikacji/kontenerów</span><span class="sxs-lookup"><span data-stu-id="03f30-133">Figure 4-5: Data volumes and external data sources for containers apps/containers</span></span>

<span data-ttu-id="03f30-134">Z powodu braku możliwości zarządzania danymi udostępniane między kontenerów, które są uruchamiane na osobnych hostach fizycznych, zalecane jest, aby używać woluminów dla danych biznesowych, chyba że hosta platformy Docker jest stałą hostów/maszyn wirtualnych, ponieważ podczas korzystania z kontenerów platformy Docker programu orchestrator oczekiwane są kontenery do przeniesienia od jednej do innego hosta, w zależności od optymalizacje wykonywane przez klaster.</span><span class="sxs-lookup"><span data-stu-id="03f30-134">Due to the inability to manage data shared between containers that run on separate physical hosts, it is recommended that you not use volumes for business data unless the Docker host is a fixed host/VM, because when using Docker containers in an orchestrator, containers are expected to be moved from one to another host, depending on the optimizations to be performed by the cluster.</span></span>

<span data-ttu-id="03f30-135">W związku z tym woluminy regularnych danych są dobre mechanizm do pracy z plików śledzenia, pliki danych czasowych lub podobne pojęcia, które nie mają wpływu na spójność danych biznesowych lub gdy kontenerów zostaną przeniesione na wielu hostach.</span><span class="sxs-lookup"><span data-stu-id="03f30-135">Therefore, regular data volumes are a good mechanism to work with trace files, temporal files, or any similar concept that won't affect the business data consistency if or when your containers are moved across multiple hosts.</span></span>

<span data-ttu-id="03f30-136">[Dodatki plug-in woluminu](https://docs.docker.com/engine/extend/plugins_volume/) przekazywania danych na wszystkich hostach w klastrze.</span><span class="sxs-lookup"><span data-stu-id="03f30-136">[Volume plug-ins](https://docs.docker.com/engine/extend/plugins_volume/) provide data across all hosts in a cluster.</span></span> <span data-ttu-id="03f30-137">Mimo że nie wszystkie wtyczki woluminu są tworzone w równym stopniu, dodatki plug-in woluminu zwykle zapewniają zewnętrznych trwałego niezawodny magazyn z niezmienne kontenerów.</span><span class="sxs-lookup"><span data-stu-id="03f30-137">Although not all volume plug-ins are created equally, volume plug-ins typically provide externalized persistent reliable storage from the immutable containers.</span></span>

<span data-ttu-id="03f30-138">Zdalnych źródeł danych i pamięci podręczne, takich jak bazy danych SQL Database, DocumentDB lub zdalnego pamięci podręcznej, takich jak Redis będzie taki sam, jak projektowanie bez kontenerów.</span><span class="sxs-lookup"><span data-stu-id="03f30-138">Remote data sources and caches like SQL Database, DocumentDB, or a remote cache like Redis would be the same as developing without containers.</span></span> <span data-ttu-id="03f30-139">Jest to jedna z preferowanych i sprawdzone, sposoby przechowywania danych aplikacji biznesowych.</span><span class="sxs-lookup"><span data-stu-id="03f30-139">This is one of the preferred, and proven, ways to store business application data.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="03f30-140">[Poprzednie](monolithic-applications.md)
[dalej](soa-applications.md)</span><span class="sxs-lookup"><span data-stu-id="03f30-140">[Previous](monolithic-applications.md)
[Next](soa-applications.md)</span></span>
