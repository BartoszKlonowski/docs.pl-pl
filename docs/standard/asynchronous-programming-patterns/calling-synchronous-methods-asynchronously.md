---
title: "Wywołanie metod synchronicznych w sposób asynchroniczny"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- asynchronous programming, delegates
- asynchronous delegates
- AsyncWaitHandle property
- callback methods
- calling synchronous methods in asynchronous manner
- WaitHandle class, code examples
- asynchronous programming, status polling
- polling asynchronous operation status
- delegates [.NET Framework], asynchronous
- synchronous calling in asynchronous manner
- waiting for asynchronous calls
- status information [.NET Framework], asynchronous operations
ms.assetid: 41972034-92ed-450a-9664-ab93fcc6f1fb
caps.latest.revision: "24"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: e7e6f402d9423a8ae1ee464499f1b794785c2b06
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/23/2017
---
# <a name="calling-synchronous-methods-asynchronously"></a><span data-ttu-id="0a7c8-102">Wywołanie metod synchronicznych w sposób asynchroniczny</span><span class="sxs-lookup"><span data-stu-id="0a7c8-102">Calling Synchronous Methods Asynchronously</span></span>
<span data-ttu-id="0a7c8-103">.NET Framework umożliwia asynchroniczne wywoływanie dowolnej metody.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-103">The .NET Framework enables you to call any method asynchronously.</span></span> <span data-ttu-id="0a7c8-104">W tym celu należy zdefiniować delegata o tej samej sygnaturze jako metodę, która ma zostać wywołana; środowisko uruchomieniowe języka wspólnego automatycznie definiuje `BeginInvoke` i `EndInvoke` metody dla tego obiektu delegowanego z odpowiednim podpisem.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-104">To do this you define a delegate with the same signature as the method you want to call; the common language runtime automatically defines `BeginInvoke` and `EndInvoke` methods for this delegate, with the appropriate signatures.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0a7c8-105">Wywołuje delegata asynchroniczne, w szczególności `BeginInvoke` i `EndInvoke` metody, nie są obsługiwane w programie .NET Compact Framework.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-105">Asynchronous delegate calls, specifically the `BeginInvoke` and `EndInvoke` methods, are not supported in the .NET Compact Framework.</span></span>  
  
 <span data-ttu-id="0a7c8-106">`BeginInvoke` Metoda inicjuje wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-106">The `BeginInvoke` method initiates the asynchronous call.</span></span> <span data-ttu-id="0a7c8-107">Ma takie same parametry jako metodę, która ma być wykonana asynchronicznie, a także dwóch dodatkowych parametrów opcjonalnych.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-107">It has the same parameters as the method that you want to execute asynchronously, plus two additional optional parameters.</span></span> <span data-ttu-id="0a7c8-108">Pierwszym parametrem jest <xref:System.AsyncCallback> delegata, który odwołuje się do metody do wywołania po zakończeniu wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-108">The first parameter is an <xref:System.AsyncCallback> delegate that references a method to be called when the asynchronous call completes.</span></span> <span data-ttu-id="0a7c8-109">Drugi parametr jest zdefiniowane przez użytkownika obiekt, który przekazuje informacje do metody wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-109">The second parameter is a user-defined object that passes information into the callback method.</span></span> <span data-ttu-id="0a7c8-110">`BeginInvoke`Zwraca natychmiast i bez oczekiwania dla wywołania asynchronicznego zakończyć.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-110">`BeginInvoke` returns immediately and does not wait for the asynchronous call to complete.</span></span> <span data-ttu-id="0a7c8-111">`BeginInvoke`Zwraca <xref:System.IAsyncResult>, które mogą służyć do monitorowania postępu wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-111">`BeginInvoke` returns an <xref:System.IAsyncResult>, which can be used to monitor the progress of the asynchronous call.</span></span>  
  
 <span data-ttu-id="0a7c8-112">`EndInvoke` Metoda pobiera wyniki wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-112">The `EndInvoke` method retrieves the results of the asynchronous call.</span></span> <span data-ttu-id="0a7c8-113">Może ona zostać wywołana dowolnym momencie po `BeginInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-113">It can be called any time after `BeginInvoke`.</span></span> <span data-ttu-id="0a7c8-114">Jeśli nie wykonano wywołanie asynchroniczne, `EndInvoke` blokuje wątek wywołujący, dopóki nie ukończy.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-114">If the asynchronous call has not completed, `EndInvoke` blocks the calling thread until it completes.</span></span> <span data-ttu-id="0a7c8-115">Parametry `EndInvoke` obejmują `out` i `ref` parametrów (`<Out>` `ByRef` i `ByRef` w języku Visual Basic) metody, która ma być wykonana asynchronicznie, wraz z <xref:System.IAsyncResult> zwrócony przez `BeginInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-115">The parameters of `EndInvoke` include the `out` and `ref` parameters (`<Out>` `ByRef` and `ByRef` in Visual Basic) of the method that you want to execute asynchronously, plus the <xref:System.IAsyncResult> returned by `BeginInvoke`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0a7c8-116">Funkcja IntelliSense w [!INCLUDE[vsprvslong](../../../includes/vsprvslong-md.md)] Wyświetla parametry `BeginInvoke` i `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-116">The IntelliSense feature in [!INCLUDE[vsprvslong](../../../includes/vsprvslong-md.md)] displays the parameters of `BeginInvoke` and `EndInvoke`.</span></span> <span data-ttu-id="0a7c8-117">Jeśli nie używasz programu Visual Studio lub podobnego narzędzia lub jeśli używasz C# z [!INCLUDE[vsprvslong](../../../includes/vsprvslong-md.md)], zobacz [asynchronicznego programowania modelu (APM)](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md) opis parametrów zdefiniowanych dla tych metod.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-117">If you are not using Visual Studio or a similar tool, or if you are using C# with [!INCLUDE[vsprvslong](../../../includes/vsprvslong-md.md)], see [Asynchronous Programming Model (APM)](../../../docs/standard/asynchronous-programming-patterns/asynchronous-programming-model-apm.md) for a description of the parameters defined for these methods.</span></span>  
  
 <span data-ttu-id="0a7c8-118">Przykłady kodu, w tym temacie pokazują cztery typowe sposoby korzystania `BeginInvoke` i `EndInvoke` w celu wykonywania wywołań asynchronicznych.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-118">The code examples in this topic demonstrate four common ways to use `BeginInvoke` and `EndInvoke` to make asynchronous calls.</span></span> <span data-ttu-id="0a7c8-119">Po wywołaniu `BeginInvoke` można wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="0a7c8-119">After calling `BeginInvoke` you can do the following:</span></span>  
  
-   <span data-ttu-id="0a7c8-120">Czy niektóre pracy, jak i wywoływać `EndInvoke` blok do momentu ukończenia wywołania.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-120">Do some work and then call `EndInvoke` to block until the call completes.</span></span>  
  
-   <span data-ttu-id="0a7c8-121">Uzyskaj <xref:System.Threading.WaitHandle> przy użyciu <xref:System.IAsyncResult.AsyncWaitHandle%2A?displayProperty=nameWithType> właściwości, należy zastosować jego <xref:System.Threading.WaitHandle.WaitOne%2A> sposób wykonywania bloku do <xref:System.Threading.WaitHandle> zostanie zasygnalizowane, a następnie wywołać `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-121">Obtain a <xref:System.Threading.WaitHandle> using the <xref:System.IAsyncResult.AsyncWaitHandle%2A?displayProperty=nameWithType> property, use its <xref:System.Threading.WaitHandle.WaitOne%2A> method to block execution until the <xref:System.Threading.WaitHandle> is signaled, and then call `EndInvoke`.</span></span>  
  
-   <span data-ttu-id="0a7c8-122">Sondowania <xref:System.IAsyncResult> zwrócony przez `BeginInvoke` do określania, kiedy asynchroniczne wywołanie zostało ukończone, a następnie wywołać `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-122">Poll the <xref:System.IAsyncResult> returned by `BeginInvoke` to determine when the asynchronous call has completed, and then call `EndInvoke`.</span></span>  
  
-   <span data-ttu-id="0a7c8-123">Przekazywanie obiektu delegate metody wywołania zwrotnego do `BeginInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-123">Pass a delegate for a callback method to `BeginInvoke`.</span></span> <span data-ttu-id="0a7c8-124">Metoda jest wykonywana na <xref:System.Threading.ThreadPool> wątku po zakończeniu wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-124">The method is executed on a <xref:System.Threading.ThreadPool> thread when the asynchronous call completes.</span></span> <span data-ttu-id="0a7c8-125">Wywołania metody wywołania zwrotnego `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-125">The callback method calls `EndInvoke`.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0a7c8-126">Niezależnie od tego, które technika, należy wywołać zawsze `EndInvoke` do ukończenia wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-126">No matter which technique you use, always call `EndInvoke` to complete your asynchronous call.</span></span>  
  
## <a name="defining-the-test-method-and-asynchronous-delegate"></a><span data-ttu-id="0a7c8-127">Definiowanie metody testowej i asynchroniczne delegata</span><span class="sxs-lookup"><span data-stu-id="0a7c8-127">Defining the Test Method and Asynchronous Delegate</span></span>  
 <span data-ttu-id="0a7c8-128">Przykłady kodu, które należy wykonać pokazują różnych sposobów wywołanie tej samej metody długotrwałe `TestMethod`, asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-128">The code examples that follow demonstrate various ways of calling the same long-running method, `TestMethod`, asynchronously.</span></span> <span data-ttu-id="0a7c8-129">`TestMethod` Metoda wyświetla komunikat konsoli do wyświetlenia rozpoczął przetwarzanie, sen przez kilka sekund, a następnie kończy.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-129">The `TestMethod` method displays a console message to show that it has begun processing, sleeps for a few seconds, and then ends.</span></span> <span data-ttu-id="0a7c8-130">`TestMethod`ma `out` parametr, aby zademonstrować sposób takie parametry zostaną dodane do sygnatur `BeginInvoke` i `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-130">`TestMethod` has an `out` parameter to demonstrate the way such parameters are added to the signatures of `BeginInvoke` and `EndInvoke`.</span></span> <span data-ttu-id="0a7c8-131">Może obsłużyć `ref` parametry podobnie.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-131">You can handle `ref` parameters similarly.</span></span>  
  
 <span data-ttu-id="0a7c8-132">Poniższy przykładowy kod przedstawia definicję `TestMethod` i delegata o nazwie `AsyncMethodCaller` można wywołać `TestMethod` asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-132">The following code example shows the definition of `TestMethod` and the delegate named `AsyncMethodCaller` that can be used to call `TestMethod` asynchronously.</span></span> <span data-ttu-id="0a7c8-133">Aby skompilować przykłady kodu, musi zawierać definicje `TestMethod` i `AsyncMethodCaller` delegowanie.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-133">To compile the code examples, you must include the definitions for `TestMethod` and the `AsyncMethodCaller` delegate.</span></span>  
  
 [!code-cpp[AsyncDelegateExamples#1](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/TestMethod.cpp#1)]
 [!code-csharp[AsyncDelegateExamples#1](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/TestMethod.cs#1)]
 [!code-vb[AsyncDelegateExamples#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/TestMethod.vb#1)]  
  
## <a name="waiting-for-an-asynchronous-call-with-endinvoke"></a><span data-ttu-id="0a7c8-134">Trwa oczekiwanie na wywołanie asynchroniczne z EndInvoke</span><span class="sxs-lookup"><span data-stu-id="0a7c8-134">Waiting for an Asynchronous Call with EndInvoke</span></span>  
 <span data-ttu-id="0a7c8-135">Najprostszym sposobem wykonania metody asynchroniczne jest uruchomienie wykonania metody przez wywołanie metody delegata `BeginInvoke` metody, niektóre pracy w głównym wątku, a następnie wywołać delegata `EndInvoke` metody.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-135">The simplest way to execute a method asynchronously is to start executing the method by calling the delegate's `BeginInvoke` method, do some work on the main thread, and then call the delegate's `EndInvoke` method.</span></span> <span data-ttu-id="0a7c8-136">`EndInvoke`może spowodować zablokowanie wątek wywołujący, ponieważ nie zwraca do momentu ukończenia wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-136">`EndInvoke` might block the calling thread because it does not return until the asynchronous call completes.</span></span> <span data-ttu-id="0a7c8-137">Jest to dobra metoda do użycia z operacjami pliku lub sieci.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-137">This is a good technique to use with file or network operations.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0a7c8-138">Ponieważ `EndInvoke` może zablokować, nigdy nie należy go wywoływać z wątków, które Usługa interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-138">Because `EndInvoke` might block, you should never call it from threads that service the user interface.</span></span>  
  
 [!code-cpp[AsyncDelegateExamples#2](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/EndInvoke.cpp#2)]
 [!code-csharp[AsyncDelegateExamples#2](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/EndInvoke.cs#2)]
 [!code-vb[AsyncDelegateExamples#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/EndInvoke.vb#2)]  
  
## <a name="waiting-for-an-asynchronous-call-with-waithandle"></a><span data-ttu-id="0a7c8-139">Trwa oczekiwanie na wywołanie asynchroniczne z WaitHandle</span><span class="sxs-lookup"><span data-stu-id="0a7c8-139">Waiting for an Asynchronous Call with WaitHandle</span></span>  
 <span data-ttu-id="0a7c8-140">Możesz uzyskać <xref:System.Threading.WaitHandle> za pomocą <xref:System.IAsyncResult.AsyncWaitHandle%2A> właściwość <xref:System.IAsyncResult> zwrócony przez `BeginInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-140">You can obtain a <xref:System.Threading.WaitHandle> by using the <xref:System.IAsyncResult.AsyncWaitHandle%2A> property of the <xref:System.IAsyncResult> returned by `BeginInvoke`.</span></span> <span data-ttu-id="0a7c8-141"><xref:System.Threading.WaitHandle> Jest sygnalizowane po zakończeniu wywołania asynchronicznego i poczekaj na jego, wywołując <xref:System.Threading.WaitHandle.WaitOne%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-141">The <xref:System.Threading.WaitHandle> is signaled when the asynchronous call completes, and you can wait for it by calling the <xref:System.Threading.WaitHandle.WaitOne%2A> method.</span></span>  
  
 <span data-ttu-id="0a7c8-142">Jeśli używasz <xref:System.Threading.WaitHandle>, można wykonywać dodatkowe przetwarzanie przed lub po zakończeniu wywołania asynchronicznego, ale przed wywołaniem `EndInvoke` można pobrać wyników.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-142">If you use a <xref:System.Threading.WaitHandle>, you can perform additional processing before or after the asynchronous call completes, but before calling `EndInvoke` to retrieve the results.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0a7c8-143">Dojście oczekiwania nie jest automatycznie zamknięte podczas wywoływania `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-143">The wait handle is not closed automatically when you call `EndInvoke`.</span></span> <span data-ttu-id="0a7c8-144">Jeśli musisz zwolnić wszystkie odwołania do dojścia oczekiwania, zasoby systemowe są zwalniane podczas odzyskiwania pamięci Zwraca dojście oczekiwania.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-144">If you release all references to the wait handle, system resources are freed when garbage collection reclaims the wait handle.</span></span> <span data-ttu-id="0a7c8-145">Można zwolnić zasobów systemowych, jak najszybciej po zakończeniu korzystania dojście oczekiwania, usunięcia ich przez wywołanie metody <xref:System.Threading.WaitHandle.Close%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-145">To free the system resources as soon as you are finished using the wait handle, dispose of it by calling the <xref:System.Threading.WaitHandle.Close%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="0a7c8-146">Wyrzucanie elementów bezużytecznych działa wydajniej, gdy obiekty możliwe do rozporządzania są jawnie zlikwidowany.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-146">Garbage collection works more efficiently when disposable objects are explicitly disposed.</span></span>  
  
 [!code-cpp[AsyncDelegateExamples#3](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/waithandle.cpp#3)]
 [!code-csharp[AsyncDelegateExamples#3](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/waithandle.cs#3)]
 [!code-vb[AsyncDelegateExamples#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/WaitHandle.vb#3)]  
  
## <a name="polling-for-asynchronous-call-completion"></a><span data-ttu-id="0a7c8-147">Sondowanie ukończenia wywołania asynchronicznego</span><span class="sxs-lookup"><span data-stu-id="0a7c8-147">Polling for Asynchronous Call Completion</span></span>  
 <span data-ttu-id="0a7c8-148">Można użyć <xref:System.IAsyncResult.IsCompleted%2A> właściwość <xref:System.IAsyncResult> zwrócony przez `BeginInvoke` do odnajdywania, po zakończeniu wykonywania wywołania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-148">You can use the <xref:System.IAsyncResult.IsCompleted%2A> property of the <xref:System.IAsyncResult> returned by `BeginInvoke` to discover when the asynchronous call completes.</span></span> <span data-ttu-id="0a7c8-149">Można to zrobić, gdy co wywołanie asynchroniczne z wątku interfejsu użytkownika z usług.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-149">You might do this when making the asynchronous call from a thread that services the user interface.</span></span> <span data-ttu-id="0a7c8-150">Sondowanie w celu ukończenia umożliwia wątek wywołujący kontynuować wykonywanie podczas wywołania asynchronicznego wykonuje na <xref:System.Threading.ThreadPool> wątku.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-150">Polling for completion allows the calling thread to continue executing while the asynchronous call executes on a <xref:System.Threading.ThreadPool> thread.</span></span>  
  
 [!code-cpp[AsyncDelegateExamples#4](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/polling.cpp#4)]
 [!code-csharp[AsyncDelegateExamples#4](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/polling.cs#4)]
 [!code-vb[AsyncDelegateExamples#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/polling.vb#4)]  
  
## <a name="executing-a-callback-method-when-an-asynchronous-call-completes"></a><span data-ttu-id="0a7c8-151">Wykonywanie metody wywołania zwrotnego, po zakończeniu wywołanie asynchroniczne</span><span class="sxs-lookup"><span data-stu-id="0a7c8-151">Executing a Callback Method When an Asynchronous Call Completes</span></span>  
 <span data-ttu-id="0a7c8-152">Jeśli wątek, który inicjuje asynchroniczne wywołanie muszą być wątku, który przetwarza wyniki, można wykonać metody wywołania zwrotnego, po zakończeniu wywołania.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-152">If the thread that initiates the asynchronous call does not need to be the thread that processes the results, you can execute a callback method when the call completes.</span></span> <span data-ttu-id="0a7c8-153">Metoda wywołania zwrotnego jest wykonywana na <xref:System.Threading.ThreadPool> wątku.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-153">The callback method is executed on a <xref:System.Threading.ThreadPool> thread.</span></span>  
  
 <span data-ttu-id="0a7c8-154">Aby użyć metody wywołania zwrotnego, należy podać `BeginInvoke` <xref:System.AsyncCallback> delegata, który reprezentuje metodę wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-154">To use a callback method, you must pass `BeginInvoke` an <xref:System.AsyncCallback> delegate that represents the callback method.</span></span> <span data-ttu-id="0a7c8-155">Można również przekazać obiekt, który zawiera informacje używane przez metodę wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-155">You can also pass an object that contains information to be used by the callback method.</span></span> <span data-ttu-id="0a7c8-156">W przypadku metody wywołania zwrotnego można rzutować <xref:System.IAsyncResult>, tylko parametr metody wywołania zwrotnego, która jest do <xref:System.Runtime.Remoting.Messaging.AsyncResult> obiektu.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-156">In the callback method, you can cast the <xref:System.IAsyncResult>, which is the only parameter of the callback method, to an <xref:System.Runtime.Remoting.Messaging.AsyncResult> object.</span></span> <span data-ttu-id="0a7c8-157">Następnie można użyć <xref:System.Runtime.Remoting.Messaging.AsyncResult.AsyncDelegate%2A?displayProperty=nameWithType> właściwości do pobrania delegata, który został użyty do zainicjować połączenie, dzięki czemu można wywołać `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-157">You can then use the <xref:System.Runtime.Remoting.Messaging.AsyncResult.AsyncDelegate%2A?displayProperty=nameWithType> property to get the delegate that was used to initiate the call so that you can call `EndInvoke`.</span></span>  
  
 <span data-ttu-id="0a7c8-158">Uwagi dotyczące na przykład:</span><span class="sxs-lookup"><span data-stu-id="0a7c8-158">Notes on the example:</span></span>  
  
-   <span data-ttu-id="0a7c8-159">`threadId` Parametr `TestMethod` jest `out` parametr ([`<Out>` `ByRef` w języku Visual Basic), więc jego wartość wejściowa nie jest nigdy używane przez `TestMethod`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-159">The `threadId` parameter of `TestMethod` is an `out` parameter ([`<Out>` `ByRef` in Visual Basic), so its input value is never used by `TestMethod`.</span></span> <span data-ttu-id="0a7c8-160">Fikcyjny zmienna jest przekazywana do `BeginInvoke` wywołania.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-160">A dummy variable is passed to the `BeginInvoke` call.</span></span> <span data-ttu-id="0a7c8-161">Jeśli `threadId` zostały parametru `ref` parametr (`ByRef` w języku Visual Basic), zmienna musi być polem poziomie klasy tak, aby go mogą być przekazywane zarówno do `BeginInvoke` i `EndInvoke`.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-161">If the `threadId` parameter were a `ref` parameter (`ByRef` in Visual Basic), the variable would have to be a class-level field so that it could be passed to both `BeginInvoke` and `EndInvoke`.</span></span>  
  
-   <span data-ttu-id="0a7c8-162">Informacje o stanie, który jest przekazywany do `BeginInvoke` jest ciągiem formatu, który używa metody wywołania zwrotnego do sformatowania komunikatu wyjściowego.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-162">The state information that is passed to `BeginInvoke` is a format string, which the callback method uses to format an output message.</span></span> <span data-ttu-id="0a7c8-163">Ponieważ jest przekazywany jako typ <xref:System.Object>, informacje o stanie musi być rzutowane na jego odpowiedniego typu, zanim będzie można użyć.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-163">Because it is passed as type <xref:System.Object>, the state information must be cast to its proper type before it can be used.</span></span>  
  
-   <span data-ttu-id="0a7c8-164">Wywołanie zwrotne jest podejmowana <xref:System.Threading.ThreadPool> wątku.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-164">The callback is made on a <xref:System.Threading.ThreadPool> thread.</span></span> <span data-ttu-id="0a7c8-165"><xref:System.Threading.ThreadPool>wątki są wątki w tle, które nie jest przechowywana aplikacja była uruchomiona, gdy kończy się wątku głównego, dzięki czemu mają wątku głównego przykładu w stan uśpienia wystarczająco długi dla wywołania zwrotnego zakończyć.</span><span class="sxs-lookup"><span data-stu-id="0a7c8-165"><xref:System.Threading.ThreadPool> threads are background threads, which do not keep the application running if the main thread ends, so the main thread of the example has to sleep long enough for the callback to finish.</span></span>  
  
 [!code-cpp[AsyncDelegateExamples#5](../../../samples/snippets/cpp/VS_Snippets_CLR/AsyncDelegateExamples/cpp/callback.cpp#5)]
 [!code-csharp[AsyncDelegateExamples#5](../../../samples/snippets/csharp/VS_Snippets_CLR/AsyncDelegateExamples/CS/callback.cs#5)]
 [!code-vb[AsyncDelegateExamples#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/AsyncDelegateExamples/VB/callback.vb#5)]  
  
## <a name="see-also"></a><span data-ttu-id="0a7c8-166">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0a7c8-166">See Also</span></span>  
 <xref:System.Delegate>  
 [<span data-ttu-id="0a7c8-167">Asynchroniczny wzorzec oparty na zdarzeniach (EAP)</span><span class="sxs-lookup"><span data-stu-id="0a7c8-167">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)
