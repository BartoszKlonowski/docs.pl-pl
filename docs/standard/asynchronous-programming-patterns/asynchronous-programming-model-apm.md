---
title: Model programowania asynchronicznego (APM)
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- ending asynchronous operations
- starting asynchronous operations
- beginning asynchronous operations
- asynchronous programming, ending operations
- asynchronous programming
- stopping asynchronous operations
- asynchronous programming, beginning operations
ms.assetid: c9b3501e-6bc6-40f9-8efd-4b6d9e39ccf0
caps.latest.revision: "13"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: b31383f8972ecf345366f90460d88b6be21eab99
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/21/2017
---
# <a name="asynchronous-programming-model-apm"></a><span data-ttu-id="c7bcd-102">Model programowania asynchronicznego (APM)</span><span class="sxs-lookup"><span data-stu-id="c7bcd-102">Asynchronous Programming Model (APM)</span></span>
<span data-ttu-id="c7bcd-103">Operacja asynchroniczna, która używa <xref:System.IAsyncResult> wzorca projektowego jest zaimplementowany jako dwie metody o nazwie **rozpocząć** *OperationName* i **zakończenia**  *OperationName* rozpocząć i zakończyć operację asynchroniczną *OperationName* odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-103">An asynchronous operation that uses the <xref:System.IAsyncResult> design pattern is implemented as two methods named **Begin** *OperationName* and **End** *OperationName* that begin and end the asynchronous operation *OperationName* respectively.</span></span> <span data-ttu-id="c7bcd-104">Na przykład <xref:System.IO.FileStream> klasa udostępnia <xref:System.IO.FileStream.BeginRead%2A> i <xref:System.IO.FileStream.EndRead%2A> metody do asynchronicznego odczytywania bajtów z pliku.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-104">For example, the <xref:System.IO.FileStream> class provides the <xref:System.IO.FileStream.BeginRead%2A> and <xref:System.IO.FileStream.EndRead%2A> methods to asynchronously read bytes from a file.</span></span> <span data-ttu-id="c7bcd-105">Te metody wdrożenia to wersja asynchroniczna elementu <xref:System.IO.FileStream.Read%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-105">These methods implement the asynchronous version of the <xref:System.IO.FileStream.Read%2A> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c7bcd-106">Począwszy od programu .NET Framework 4, biblioteka zadań równoległych zapewnia nowy model programowania asynchronicznego i równolegle.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-106">Starting with the .NET Framework 4, the Task Parallel Library provides a new model for asynchronous and parallel programming.</span></span> <span data-ttu-id="c7bcd-107">Aby uzyskać więcej informacji, zobacz [zadań biblioteki równoległych (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) i [opartego na zadaniach asynchronicznej wzorca (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).</span><span class="sxs-lookup"><span data-stu-id="c7bcd-107">For more information, see [Task Parallel Library (TPL)](../../../docs/standard/parallel-programming/task-parallel-library-tpl.md) and [Task-based Asynchronous Pattern (TAP)](../../../docs/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap.md)).</span></span>  
  
 <span data-ttu-id="c7bcd-108">Po wywołaniu **rozpocząć** *OperationName*, aplikacja może kontynuować wykonywania instrukcji w wątku wywołującym, gdy operacja asynchroniczna odbywa się w innym wątku.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-108">After calling **Begin** *OperationName*, an application can continue executing instructions on the calling thread while the asynchronous operation takes place on a different thread.</span></span> <span data-ttu-id="c7bcd-109">Dla każdego wywołania **rozpocząć** *OperationName*, również powinny wywoływać aplikacji **zakończenia** *OperationName* można pobrać wyników Operacja.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-109">For each call to **Begin** *OperationName*, the application should also call **End** *OperationName* to get the results of the operation.</span></span>  
  
## <a name="beginning-an-asynchronous-operation"></a><span data-ttu-id="c7bcd-110">Rozpoczyna operację asynchroniczną</span><span class="sxs-lookup"><span data-stu-id="c7bcd-110">Beginning an Asynchronous Operation</span></span>  
 <span data-ttu-id="c7bcd-111">**Rozpocząć** *OperationName* metoda rozpoczyna operację asynchroniczną *OperationName* i zwraca obiekt, który implementuje <xref:System.IAsyncResult> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-111">The **Begin** *OperationName* method begins asynchronous operation *OperationName* and returns an object that implements the <xref:System.IAsyncResult> interface.</span></span> <span data-ttu-id="c7bcd-112"><xref:System.IAsyncResult>obiekty przechowywane informacje o operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-112"><xref:System.IAsyncResult> objects store information about an asynchronous operation.</span></span> <span data-ttu-id="c7bcd-113">W poniższej tabeli przedstawiono informacje o operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-113">The following table shows information about an asynchronous operation.</span></span>  
  
|<span data-ttu-id="c7bcd-114">Element członkowski</span><span class="sxs-lookup"><span data-stu-id="c7bcd-114">Member</span></span>|<span data-ttu-id="c7bcd-115">Opis</span><span class="sxs-lookup"><span data-stu-id="c7bcd-115">Description</span></span>|  
|------------|-----------------|  
|<xref:System.IAsyncResult.AsyncState%2A>|<span data-ttu-id="c7bcd-116">Opcjonalne obiekt specyficzne dla aplikacji, który zawiera informacje o operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-116">An optional application-specific object that contains information about the asynchronous operation.</span></span>|  
|<xref:System.IAsyncResult.AsyncWaitHandle%2A>|<span data-ttu-id="c7bcd-117">A <xref:System.Threading.WaitHandle> można zablokować wykonywanie aplikacji przed zakończeniem operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-117">A <xref:System.Threading.WaitHandle> that can be used to block application execution until the asynchronous operation completes.</span></span>|  
|<xref:System.IAsyncResult.CompletedSynchronously%2A>|<span data-ttu-id="c7bcd-118">Wartość, która wskazuje, czy asynchroniczne operacja została wykonana w wątku używane do wywoływania **rozpocząć** *OperationName* zamiast kończenie na osobnym <xref:System.Threading.ThreadPool> wątku.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-118">A value that indicates whether the asynchronous operation completed on the thread used to call **Begin** *OperationName* instead of completing on a separate <xref:System.Threading.ThreadPool> thread.</span></span>|  
|<xref:System.IAsyncResult.IsCompleted%2A>|<span data-ttu-id="c7bcd-119">Wartość, która wskazuje, czy operacja asynchroniczna została ukończona.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-119">A value that indicates whether the asynchronous operation has completed.</span></span>|  
  
 <span data-ttu-id="c7bcd-120">A **rozpocząć** *OperationName* metoda przyjmuje żadnych parametrów zadeklarowany w podpisie synchroniczną wersję metody, które są przekazywane przez wartości lub według odwołania.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-120">A **Begin** *OperationName* method takes any parameters declared in the signature of the synchronous version of the method that are passed by value or by reference.</span></span> <span data-ttu-id="c7bcd-121">Dowolne parametry wyjściowe nie są częścią **rozpocząć** *OperationName* podpis metody.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-121">Any out parameters are not part of the **Begin** *OperationName* method signature.</span></span> <span data-ttu-id="c7bcd-122">**Rozpocząć** *OperationName* podpis metody zawiera również dwie dodatkowe parametry.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-122">The **Begin** *OperationName* method signature also includes two additional parameters.</span></span> <span data-ttu-id="c7bcd-123">Określa pierwszy <xref:System.AsyncCallback> delegata, który odwołuje się do metody, która jest wywoływana po zakończeniu operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-123">The first of these defines an <xref:System.AsyncCallback> delegate that references a method that is called when the asynchronous operation completes.</span></span> <span data-ttu-id="c7bcd-124">Można określić obiektu wywołującego `null` (`Nothing` w języku Visual Basic) Jeśli chcesz metody wywoływane po zakończeniu operacji.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-124">The caller can specify `null` (`Nothing` in Visual Basic) if it does not want a method invoked when the operation completes.</span></span> <span data-ttu-id="c7bcd-125">Drugi dodatkowy parametr jest obiektem zdefiniowane przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-125">The second additional parameter is a user-defined object.</span></span> <span data-ttu-id="c7bcd-126">Ten obiekt może służyć do przekazywania informacji o stanie specyficzne dla aplikacji do metody wywoływane po zakończeniu operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-126">This object can be used to pass application-specific state information to the method invoked when the asynchronous operation completes.</span></span> <span data-ttu-id="c7bcd-127">Jeśli **rozpocząć** *OperationName* metoda przyjmuje dodatkowych parametrów specyficzne dla operacji, takich jak tablica bajtów do przechowywania Bajty odczytane z pliku, <xref:System.AsyncCallback> i obiektu stanu aplikacji są przez ostatnie Parametry w **rozpocząć** *OperationName* podpis metody.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-127">If a **Begin** *OperationName* method takes additional operation-specific parameters, such as a byte array to store bytes read from a file, the <xref:System.AsyncCallback> and application state object are the last parameters in the **Begin** *OperationName* method signature.</span></span>  
  
 <span data-ttu-id="c7bcd-128">**Rozpocznij** *OperationName* natychmiast zwraca sterowania do wywołania wątku.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-128">**Begin** *OperationName* returns control to the calling thread immediately.</span></span> <span data-ttu-id="c7bcd-129">Jeśli **rozpocząć** *OperationName* metoda zgłasza wyjątków, wyjątki są zgłaszane przed uruchomieniem operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-129">If the **Begin** *OperationName* method throws exceptions, the exceptions are thrown before the asynchronous operation is started.</span></span> <span data-ttu-id="c7bcd-130">Jeśli **rozpocząć** *OperationName* metoda zgłasza wyjątki, nie jest wywoływana metoda wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-130">If the **Begin** *OperationName* method throws exceptions, the callback method is not invoked.</span></span>  
  
## <a name="ending-an-asynchronous-operation"></a><span data-ttu-id="c7bcd-131">Kończenie operacji asynchronicznej</span><span class="sxs-lookup"><span data-stu-id="c7bcd-131">Ending an Asynchronous Operation</span></span>  
 <span data-ttu-id="c7bcd-132">**Zakończenia** *OperationName* metoda kończy operację asynchroniczną *OperationName*.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-132">The **End** *OperationName* method ends asynchronous operation *OperationName*.</span></span> <span data-ttu-id="c7bcd-133">Wartość zwracana **zakończenia** *OperationName* metody jest ten sam typ zwracany przez partnera synchroniczne i jest specyficzna dla operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-133">The return value of the **End** *OperationName* method is the same type returned by its synchronous counterpart and is specific to the asynchronous operation.</span></span> <span data-ttu-id="c7bcd-134">Na przykład <xref:System.IO.FileStream.EndRead%2A> metoda zwraca liczbę bajtów odczytanych z <xref:System.IO.FileStream> i <xref:System.Net.Dns.EndGetHostByName%2A> metoda zwraca <xref:System.Net.IPHostEntry> obiekt, który zawiera informacje o komputerze hosta.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-134">For example, the <xref:System.IO.FileStream.EndRead%2A> method returns the number of bytes read from a <xref:System.IO.FileStream> and the <xref:System.Net.Dns.EndGetHostByName%2A> method returns an <xref:System.Net.IPHostEntry> object that contains information about a host computer.</span></span> <span data-ttu-id="c7bcd-135">**Zakończenia** *OperationName* metoda przyjmuje żadnego lub parametry ref zadeklarowany w podpisie synchroniczną wersję metody.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-135">The **End** *OperationName* method takes any out or ref parameters declared in the signature of the synchronous version of the method.</span></span> <span data-ttu-id="c7bcd-136">Oprócz parametry z metoda synchroniczna **zakończenia** *OperationName* zawiera również metody <xref:System.IAsyncResult> parametru.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-136">In addition to the parameters from the synchronous method, the **End** *OperationName* method also includes an <xref:System.IAsyncResult> parameter.</span></span> <span data-ttu-id="c7bcd-137">Obiekty wywołujące należy przekazać wystąpienia zwrócony przez odpowiedniego wywołania **rozpocząć** *OperationName*.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-137">Callers must pass the instance returned by the corresponding call to **Begin** *OperationName*.</span></span>  
  
 <span data-ttu-id="c7bcd-138">Jeśli operacja asynchroniczna reprezentowany przez <xref:System.IAsyncResult> obiektu nie zostało ukończone, kiedy **zakończenia** *OperationName* jest nazywany **zakończenia**  *OperationName* blokuje wątek wywołujący, aż do zakończenia operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-138">If the asynchronous operation represented by the <xref:System.IAsyncResult> object has not completed when **End** *OperationName* is called, **End** *OperationName* blocks the calling thread until the asynchronous operation is complete.</span></span> <span data-ttu-id="c7bcd-139">Wyjątki generowane przez operację asynchroniczną są generowane z **zakończenia** *OperationName* metody.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-139">Exceptions thrown by the asynchronous operation are thrown from the **End** *OperationName* method.</span></span> <span data-ttu-id="c7bcd-140">Efekt wywołania metody **zakończenia** *OperationName* metody wiele razy z tym samym <xref:System.IAsyncResult> nie jest zdefiniowany.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-140">The effect of calling the **End** *OperationName* method multiple times with the same <xref:System.IAsyncResult> is not defined.</span></span> <span data-ttu-id="c7bcd-141">Podobnie wywołanie **zakończenia** *OperationName* metody z <xref:System.IAsyncResult> nie został zwrócony przez Begin powiązane, metoda również nie zdefiniowano.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-141">Likewise, calling the **End** *OperationName* method with an <xref:System.IAsyncResult> that was not returned by the related Begin method is also not defined.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c7bcd-142">W obu Niezdefiniowany scenariuszy implementacji należy wziąć pod uwagę zgłaszanie <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-142">For either of the undefined scenarios, implementers should consider throwing <xref:System.InvalidOperationException>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="c7bcd-143">Implementacje tego wzorca projektowego powiadomić wywołującego, który zakończył operację asynchroniczną, ustawiając <xref:System.IAsyncResult.IsCompleted%2A> na wartość true, wywołanie metody asynchroniczne wywołanie zwrotne (jeśli został określony) i sygnalizowania <xref:System.IAsyncResult.AsyncWaitHandle%2A>.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-143">Implementers of this design pattern should notify the caller that the asynchronous operation completed by setting <xref:System.IAsyncResult.IsCompleted%2A> to true, calling the asynchronous callback method (if one was specified) and signaling the <xref:System.IAsyncResult.AsyncWaitHandle%2A>.</span></span>  
  
 <span data-ttu-id="c7bcd-144">Deweloperzy aplikacji ma kilka decyzji projektowych do uzyskiwania dostępu do wyników operacji asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-144">Application developers have several design choices for accessing the results of the asynchronous operation.</span></span> <span data-ttu-id="c7bcd-145">Poprawny wybór zależy od tego, czy aplikacja ma instrukcje, które mogą być wykonywane podczas operacji.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-145">The correct choice depends on whether the application has instructions that can execute while the operation completes.</span></span> <span data-ttu-id="c7bcd-146">Jeśli aplikacja nie może wykonać żadnych dodatkowych działań, dopóki nie odbierze wyniki operacji asynchronicznej, aplikacja musi zablokować dopóki wyniki są dostępne.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-146">If an application cannot perform any additional work until it receives the results of the asynchronous operation, the application must block until the results are available.</span></span> <span data-ttu-id="c7bcd-147">Aby zablokować dopiero po zakończeniu operacji asynchronicznej, można użyć jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="c7bcd-147">To block until an asynchronous operation completes, you can use one of the following approaches:</span></span>  
  
-   <span data-ttu-id="c7bcd-148">Wywołanie **zakończenia** *OperationName* z wątku głównego aplikacji, blokowanie wykonania aplikacji do operacji jest pełny.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-148">Call **End** *OperationName* from the application’s main thread, blocking application execution until the operation is complete.</span></span> <span data-ttu-id="c7bcd-149">Na przykład, która ilustruje tej metody, zobacz [blokowanie wykonywania aplikacji poprzez zakończenie operacji asynchronicznej](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md).</span><span class="sxs-lookup"><span data-stu-id="c7bcd-149">For an example that illustrates this technique, see [Blocking Application Execution by Ending an Async Operation](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-by-ending-an-async-operation.md).</span></span>  
  
-   <span data-ttu-id="c7bcd-150">Użyj <xref:System.IAsyncResult.AsyncWaitHandle%2A> do wykonywania aplikacji bloku dopiero po zakończeniu jednego lub więcej operacji.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-150">Use the <xref:System.IAsyncResult.AsyncWaitHandle%2A> to block application execution until one or more operations are complete.</span></span> <span data-ttu-id="c7bcd-151">Na przykład, która ilustruje tej metody, zobacz [blokowania aplikacji wykonywania za pomocą właściwości AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md).</span><span class="sxs-lookup"><span data-stu-id="c7bcd-151">For an example that illustrates this technique, see [Blocking Application Execution Using an AsyncWaitHandle](../../../docs/standard/asynchronous-programming-patterns/blocking-application-execution-using-an-asyncwaithandle.md).</span></span>  
  
 <span data-ttu-id="c7bcd-152">Aplikacje, które nie mają być blokowane podczas operacji asynchronicznej można użyć jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="c7bcd-152">Applications that do not need to block while the asynchronous operation completes can use one of the following approaches:</span></span>  
  
-   <span data-ttu-id="c7bcd-153">Sondowania stanu ukończenia operacji sprawdzając <xref:System.IAsyncResult.IsCompleted%2A> właściwość okresowo i wywoływania **zakończenia** *OperationName* po zakończeniu operacji.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-153">Poll for operation completion status by checking the <xref:System.IAsyncResult.IsCompleted%2A> property periodically and calling **End** *OperationName* when the operation is complete.</span></span> <span data-ttu-id="c7bcd-154">Na przykład, która ilustruje tej metody, zobacz [sondowanie stanu operacji asynchronicznej](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md).</span><span class="sxs-lookup"><span data-stu-id="c7bcd-154">For an example that illustrates this technique, see [Polling for the Status of an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/polling-for-the-status-of-an-asynchronous-operation.md).</span></span>  
  
-   <span data-ttu-id="c7bcd-155">Użyj <xref:System.AsyncCallback> pełnomocnika, aby określić metodę do wywołania po zakończeniu operacji.</span><span class="sxs-lookup"><span data-stu-id="c7bcd-155">Use an <xref:System.AsyncCallback> delegate to specify a method to be invoked when the operation is complete.</span></span> <span data-ttu-id="c7bcd-156">Na przykład, która ilustruje tej metody, zobacz [używanie delegata AsyncCallback do kończenia operacji asynchronicznej](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md).</span><span class="sxs-lookup"><span data-stu-id="c7bcd-156">For an example that illustrates this technique, see [Using an AsyncCallback Delegate to End an Asynchronous Operation](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-to-end-an-asynchronous-operation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c7bcd-157">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="c7bcd-157">See Also</span></span>  
 [<span data-ttu-id="c7bcd-158">Asynchroniczny wzorzec oparty na zdarzeniach (EAP)</span><span class="sxs-lookup"><span data-stu-id="c7bcd-158">Event-based Asynchronous Pattern (EAP)</span></span>](../../../docs/standard/asynchronous-programming-patterns/event-based-asynchronous-pattern-eap.md)  
 [<span data-ttu-id="c7bcd-159">Wywołanie metod synchronicznych w sposób asynchroniczny</span><span class="sxs-lookup"><span data-stu-id="c7bcd-159">Calling Synchronous Methods Asynchronously</span></span>](../../../docs/standard/asynchronous-programming-patterns/calling-synchronous-methods-asynchronously.md)  
 [<span data-ttu-id="c7bcd-160">Przy użyciu delegata AsyncCallback i obiektu stanu</span><span class="sxs-lookup"><span data-stu-id="c7bcd-160">Using an AsyncCallback Delegate and State Object</span></span>](../../../docs/standard/asynchronous-programming-patterns/using-an-asynccallback-delegate-and-state-object.md)
