---
title: Wzorzec projektowy obserwatora
description: Dowiedz się więcej na temat wzorca projektowego obserwatora w programie .NET. Ten wzorzec umożliwia subskrybentowi zarejestrowanie się w usłudze i otrzymywanie powiadomień od dostawcy.
ms.date: 03/30/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- IObserver(Of T) interface
- IObservable<T> interface
- IObserver<T> interface
- IObservable(Of T) interface
- observer design pattern [.NET Framework]
ms.assetid: 3680171f-f522-453c-aa4a-54f755a78f88
ms.openlocfilehash: 4edcd2645b28095f4bd18f4918b9afa5c893bd39
ms.sourcegitcommit: 7137e12f54c4e83a94ae43ec320f8cf59c1772ea
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/10/2020
ms.locfileid: "84662735"
---
# <a name="observer-design-pattern"></a><span data-ttu-id="18752-104">Wzorzec projektowy obserwatora</span><span class="sxs-lookup"><span data-stu-id="18752-104">Observer Design Pattern</span></span>

<span data-ttu-id="18752-105">Wzorzec projektowy obserwatora umożliwia subskrybentowi zarejestrowanie się w usłudze i otrzymywanie powiadomień od dostawcy.</span><span class="sxs-lookup"><span data-stu-id="18752-105">The observer design pattern enables a subscriber to register with and receive notifications from a provider.</span></span> <span data-ttu-id="18752-106">Jest to odpowiednie dla każdego scenariusza wymagającego powiadomień wypychanych.</span><span class="sxs-lookup"><span data-stu-id="18752-106">It is suitable for any scenario that requires push-based notification.</span></span> <span data-ttu-id="18752-107">Wzorzec definiuje *dostawcę* (znanego również jako *temat* lub *zauważalny*) i zero, jeden lub więcej *obserwatorów*.</span><span class="sxs-lookup"><span data-stu-id="18752-107">The pattern defines a *provider* (also known as a *subject* or an *observable*) and zero, one, or more *observers*.</span></span> <span data-ttu-id="18752-108">Obserwatorzy rejestrują się u dostawcy i za każdym razem, gdy występuje wstępnie zdefiniowany warunek, zdarzenie lub zmiana stanu, dostawca automatycznie powiadamia o wszystkich Obserwatorach, wywołując jedną z metod.</span><span class="sxs-lookup"><span data-stu-id="18752-108">Observers register with the provider, and whenever a predefined condition, event, or state change occurs, the provider automatically notifies all observers by calling one of their methods.</span></span> <span data-ttu-id="18752-109">W przypadku tego wywołania metody dostawca może również podać informacje o bieżącym stanie dla obserwatorów.</span><span class="sxs-lookup"><span data-stu-id="18752-109">In this method call, the provider can also provide current state information to observers.</span></span> <span data-ttu-id="18752-110">W .NET Framework Wzorzec projektowy obserwatora jest stosowany przez implementację rodzajowego <xref:System.IObservable%601?displayProperty=nameWithType> i <xref:System.IObserver%601?displayProperty=nameWithType> interfejsów.</span><span class="sxs-lookup"><span data-stu-id="18752-110">In the .NET Framework, the observer design pattern is applied by implementing the generic <xref:System.IObservable%601?displayProperty=nameWithType> and <xref:System.IObserver%601?displayProperty=nameWithType> interfaces.</span></span> <span data-ttu-id="18752-111">Parametr typu ogólnego reprezentuje typ, który zawiera informacje o powiadomieniach.</span><span class="sxs-lookup"><span data-stu-id="18752-111">The generic type parameter represents the type that provides notification information.</span></span>

## <a name="applying-the-pattern"></a><span data-ttu-id="18752-112">Stosowanie wzorca</span><span class="sxs-lookup"><span data-stu-id="18752-112">Applying the Pattern</span></span>

<span data-ttu-id="18752-113">Wzorzec projektowy obserwatora jest odpowiedni dla rozproszonych powiadomień opartych na wypychaniu, ponieważ obsługuje czyste rozdzielenie między dwoma różnymi składnikami lub warstwami aplikacji, takimi jak warstwa źródła danych (logika biznesowa) i warstwa interfejsu użytkownika (Display).</span><span class="sxs-lookup"><span data-stu-id="18752-113">The observer design pattern is suitable for distributed push-based notifications, because it supports a clean separation between two different components or application layers, such as a data source (business logic) layer and a user interface (display) layer.</span></span> <span data-ttu-id="18752-114">Wzorzec może być implementowany za każdym razem, gdy dostawca używa wywołań zwrotnych w celu dostarczenia klientom bieżących informacji.</span><span class="sxs-lookup"><span data-stu-id="18752-114">The pattern can be implemented whenever a provider uses callbacks to supply its clients with current information.</span></span>

<span data-ttu-id="18752-115">Implementacja wzorca wymaga podania następujących danych:</span><span class="sxs-lookup"><span data-stu-id="18752-115">Implementing the pattern requires that you provide the following:</span></span>

- <span data-ttu-id="18752-116">Dostawca lub podmiot, który jest obiektem, który wysyła powiadomienia do obserwatorów.</span><span class="sxs-lookup"><span data-stu-id="18752-116">A provider or subject, which is the object that sends notifications to observers.</span></span> <span data-ttu-id="18752-117">Dostawca jest klasą lub strukturą implementującą <xref:System.IObservable%601> interfejs.</span><span class="sxs-lookup"><span data-stu-id="18752-117">A provider is a class or structure that implements the <xref:System.IObservable%601> interface.</span></span> <span data-ttu-id="18752-118">Dostawca musi zaimplementować pojedynczą metodę, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType> która jest wywoływana przez obserwatorów, którzy chcą otrzymywać powiadomienia od dostawcy.</span><span class="sxs-lookup"><span data-stu-id="18752-118">The provider must implement a single method, <xref:System.IObservable%601.Subscribe%2A?displayProperty=nameWithType>, which is called by observers that wish to receive notifications from the provider.</span></span>

- <span data-ttu-id="18752-119">Obserwator, który jest obiektem, który odbiera powiadomienia od dostawcy.</span><span class="sxs-lookup"><span data-stu-id="18752-119">An observer, which is an object that receives notifications from a provider.</span></span> <span data-ttu-id="18752-120">Obserwator jest klasą lub strukturą, która implementuje <xref:System.IObserver%601> interfejs.</span><span class="sxs-lookup"><span data-stu-id="18752-120">An observer is a class or structure that implements the <xref:System.IObserver%601> interface.</span></span> <span data-ttu-id="18752-121">Obserwator musi zaimplementować trzy metody, z których wszystkie są wywoływane przez dostawcę:</span><span class="sxs-lookup"><span data-stu-id="18752-121">The observer must implement three methods, all of which are called by the provider:</span></span>

  - <span data-ttu-id="18752-122"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, która udostępnia obserwatorowi nowe lub bieżące informacje.</span><span class="sxs-lookup"><span data-stu-id="18752-122"><xref:System.IObserver%601.OnNext%2A?displayProperty=nameWithType>, which supplies the observer with new or current information.</span></span>

  - <span data-ttu-id="18752-123"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, który informuje obserwatora o wystąpieniu błędu.</span><span class="sxs-lookup"><span data-stu-id="18752-123"><xref:System.IObserver%601.OnError%2A?displayProperty=nameWithType>, which informs the observer that an error has occurred.</span></span>

  - <span data-ttu-id="18752-124"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, co oznacza, że dostawca zakończył wysyłanie powiadomień.</span><span class="sxs-lookup"><span data-stu-id="18752-124"><xref:System.IObserver%601.OnCompleted%2A?displayProperty=nameWithType>, which indicates that the provider has finished sending notifications.</span></span>

- <span data-ttu-id="18752-125">Mechanizm, który umożliwia dostawcy śledzić obserwatorów.</span><span class="sxs-lookup"><span data-stu-id="18752-125">A mechanism that allows the provider to keep track of observers.</span></span> <span data-ttu-id="18752-126">Zazwyczaj Dostawca używa obiektu kontenera, takiego jak <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> obiekt, do przechowywania odwołań do <xref:System.IObserver%601> implementacji subskrybowanych do powiadomień.</span><span class="sxs-lookup"><span data-stu-id="18752-126">Typically, the provider uses a container object, such as a <xref:System.Collections.Generic.List%601?displayProperty=nameWithType> object, to hold references to the <xref:System.IObserver%601> implementations that have subscribed to notifications.</span></span> <span data-ttu-id="18752-127">Użycie w tym celu kontenera magazynu pozwala dostawcy obsłużyć zero do nieograniczonej liczby obserwatorów.</span><span class="sxs-lookup"><span data-stu-id="18752-127">Using a storage container for this purpose enables the provider to handle zero to an unlimited number of observers.</span></span> <span data-ttu-id="18752-128">Kolejność, w której obserwatorzy otrzymują powiadomienia, nie jest zdefiniowana; Dostawca jest bezpłatny, aby określić kolejność przy użyciu dowolnej metody.</span><span class="sxs-lookup"><span data-stu-id="18752-128">The order in which observers receive notifications is not defined; the provider is free to use any method to determine the order.</span></span>

- <span data-ttu-id="18752-129"><xref:System.IDisposable>Implementacja, która umożliwia dostawcy usuwanie obserwatorów po zakończeniu powiadamiania.</span><span class="sxs-lookup"><span data-stu-id="18752-129">An <xref:System.IDisposable> implementation that enables the provider to remove observers when notification is complete.</span></span> <span data-ttu-id="18752-130">Obserwatorzy otrzymują odwołanie do <xref:System.IDisposable> implementacji z <xref:System.IObservable%601.Subscribe%2A> metody, więc mogą również wywołać <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> metodę, aby anulować subskrypcję, zanim dostawca zakończył wysyłanie powiadomień.</span><span class="sxs-lookup"><span data-stu-id="18752-130">Observers receive a reference to the <xref:System.IDisposable> implementation from the <xref:System.IObservable%601.Subscribe%2A> method, so they can also call the <xref:System.IDisposable.Dispose%2A?displayProperty=nameWithType> method to unsubscribe before the provider has finished sending notifications.</span></span>

- <span data-ttu-id="18752-131">Obiekt, który zawiera dane wysyłane przez dostawcę do obserwatorów.</span><span class="sxs-lookup"><span data-stu-id="18752-131">An object that contains the data that the provider sends to its observers.</span></span> <span data-ttu-id="18752-132">Typ tego obiektu odpowiada parametrowi typu ogólnego <xref:System.IObservable%601> <xref:System.IObserver%601> interfejsów i.</span><span class="sxs-lookup"><span data-stu-id="18752-132">The type of this object corresponds to the generic type parameter of the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="18752-133">Chociaż ten obiekt może być taki sam jak <xref:System.IObservable%601> implementacja, najczęściej jest to oddzielny typ.</span><span class="sxs-lookup"><span data-stu-id="18752-133">Although this object can be the same as the <xref:System.IObservable%601> implementation, most commonly it is a separate type.</span></span>

> [!NOTE]
> <span data-ttu-id="18752-134">Oprócz wdrożenia wzorca projektowego obserwatora, warto zapoznać się z bibliotekami utworzonymi przy użyciu <xref:System.IObservable%601> <xref:System.IObserver%601> interfejsów i.</span><span class="sxs-lookup"><span data-stu-id="18752-134">In addition to implementing the observer design pattern, you may be interested in exploring libraries that are built using the <xref:System.IObservable%601> and <xref:System.IObserver%601> interfaces.</span></span> <span data-ttu-id="18752-135">Na przykład [reaktywne rozszerzenia dla platformy .NET (RX)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) składają się z zestawu metod rozszerzających i operatorów standardowej sekwencji LINQ do obsługi programowania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="18752-135">For example, [Reactive Extensions for .NET (Rx)](https://docs.microsoft.com/previous-versions/dotnet/reactive-extensions/hh242985(v=vs.103)) consist of a set of extension methods and LINQ standard sequence operators to support asynchronous programming.</span></span>

## <a name="implementing-the-pattern"></a><span data-ttu-id="18752-136">Implementowanie wzorca</span><span class="sxs-lookup"><span data-stu-id="18752-136">Implementing the Pattern</span></span>

<span data-ttu-id="18752-137">W poniższym przykładzie zastosowano Wzorzec projektowy obserwatora do zaimplementowania systemu informacji o zaroście bagażu lotniska.</span><span class="sxs-lookup"><span data-stu-id="18752-137">The following example uses the observer design pattern to implement an airport baggage claim information system.</span></span> <span data-ttu-id="18752-138">`BaggageInfo`Klasa zawiera informacje na temat przybycia lotów i karuzeli, w przypadku których bagaż z każdego lotu jest dostępny do odbioru.</span><span class="sxs-lookup"><span data-stu-id="18752-138">A `BaggageInfo` class provides information about arriving flights and the carousels where baggage from each flight is available for pickup.</span></span> <span data-ttu-id="18752-139">Pokazano to w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="18752-139">It is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#1)]
[!code-vb[Conceptual.ObserverDesignPattern#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#1)]

<span data-ttu-id="18752-140">`BaggageHandler`Klasa jest odpowiedzialna za otrzymywanie informacji na temat docierających lotów i bagażów roszczeń.</span><span class="sxs-lookup"><span data-stu-id="18752-140">A `BaggageHandler` class is responsible for receiving information about arriving flights and baggage claim carousels.</span></span> <span data-ttu-id="18752-141">Wewnętrznie obsługuje dwie kolekcje:</span><span class="sxs-lookup"><span data-stu-id="18752-141">Internally, it maintains two collections:</span></span>

- <span data-ttu-id="18752-142">`observers`— Kolekcja klientów, którzy będą otrzymywać zaktualizowane informacje.</span><span class="sxs-lookup"><span data-stu-id="18752-142">`observers` - A collection of clients that will receive updated information.</span></span>

- <span data-ttu-id="18752-143">`flights`-Kolekcja lotów i przypisane do nich karuzeli.</span><span class="sxs-lookup"><span data-stu-id="18752-143">`flights` - A collection of flights and their assigned carousels.</span></span>

<span data-ttu-id="18752-144">Obie kolekcje są reprezentowane przez <xref:System.Collections.Generic.List%601> obiekty ogólne, które są tworzone w `BaggageHandler` konstruktorze klasy.</span><span class="sxs-lookup"><span data-stu-id="18752-144">Both collections are represented by generic <xref:System.Collections.Generic.List%601> objects that are instantiated in the `BaggageHandler` class constructor.</span></span> <span data-ttu-id="18752-145">Kod źródłowy `BaggageHandler` klasy jest przedstawiony w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="18752-145">The source code for the `BaggageHandler` class is shown in the following example.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#2)]
[!code-vb[Conceptual.ObserverDesignPattern#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#2)]

<span data-ttu-id="18752-146">Klienci, którzy chcą otrzymywać zaktualizowane informacje, wywołują `BaggageHandler.Subscribe` metodę.</span><span class="sxs-lookup"><span data-stu-id="18752-146">Clients that wish to receive updated information call the `BaggageHandler.Subscribe` method.</span></span> <span data-ttu-id="18752-147">Jeśli klient nie zasubskrybował wcześniej powiadomień, <xref:System.IObserver%601> do kolekcji zostanie dodany odwołanie do implementacji klienta `observers` .</span><span class="sxs-lookup"><span data-stu-id="18752-147">If the client has not previously subscribed to notifications, a reference to the client's <xref:System.IObserver%601> implementation is added to the `observers` collection.</span></span>

<span data-ttu-id="18752-148">`BaggageHandler.BaggageStatus`Można wywołać przeciążoną metodę, aby wskazać, że bagaż z lotu jest zwalniany lub nie jest już zwolniony.</span><span class="sxs-lookup"><span data-stu-id="18752-148">The overloaded `BaggageHandler.BaggageStatus` method can be called to indicate that baggage from a flight either is being unloaded or is no longer being unloaded.</span></span> <span data-ttu-id="18752-149">W pierwszym przypadku metoda jest przenoszona jako numer lotu, Port lotniczy, z którego pochodzi lot, oraz karuzela, w której jest zwalniany bagaż.</span><span class="sxs-lookup"><span data-stu-id="18752-149">In the first case, the method is passed a flight number, the airport from which the flight originated, and the carousel where baggage is being unloaded.</span></span> <span data-ttu-id="18752-150">W drugim przypadku metoda jest przenoszona tylko do numeru lotu.</span><span class="sxs-lookup"><span data-stu-id="18752-150">In the second case, the method is passed only a flight number.</span></span> <span data-ttu-id="18752-151">W przypadku odciążania bagażu Metoda sprawdza, czy `BaggageInfo` informacje przekazane do metody istnieją w `flights` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="18752-151">For baggage that is being unloaded, the method checks whether the `BaggageInfo` information passed to the method exists in the `flights` collection.</span></span> <span data-ttu-id="18752-152">Jeśli tak nie jest, Metoda dodaje informacje i wywołuje każdą metodę obserwatora `OnNext` .</span><span class="sxs-lookup"><span data-stu-id="18752-152">If it does not, the method adds the information and calls each observer's `OnNext` method.</span></span> <span data-ttu-id="18752-153">W przypadku lotów, których bagaż nie jest już zwolniony, Metoda sprawdza, czy informacje o tym locie są przechowywane w `flights` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="18752-153">For flights whose baggage is no longer being unloaded, the method checks whether information on that flight is stored in the `flights` collection.</span></span> <span data-ttu-id="18752-154">Jeśli tak jest, metoda wywołuje każdą metodę obserwatora `OnNext` i usuwa `BaggageInfo` obiekt z `flights` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="18752-154">If it is, the method calls each observer's `OnNext` method and removes the `BaggageInfo` object from the `flights` collection.</span></span>

<span data-ttu-id="18752-155">Gdy upłynął czas użytkowania ostatniego lotu dnia i jego bagaż został przetworzony, `BaggageHandler.LastBaggageClaimed` wywoływana jest metoda.</span><span class="sxs-lookup"><span data-stu-id="18752-155">When the last flight of the day has landed and its baggage has been processed, the `BaggageHandler.LastBaggageClaimed` method is called.</span></span> <span data-ttu-id="18752-156">Ta metoda wywołuje każdą metodę obserwatora `OnCompleted` , aby wskazać, że wszystkie powiadomienia zostały ukończone, a następnie czyści `observers` kolekcję.</span><span class="sxs-lookup"><span data-stu-id="18752-156">This method calls each observer's `OnCompleted` method to indicate that all notifications have completed, and then clears the `observers` collection.</span></span>

<span data-ttu-id="18752-157"><xref:System.IObservable%601.Subscribe%2A>Metoda dostawcy zwraca <xref:System.IDisposable> implementację, która umożliwia obserwatorom zaprzestanie otrzymywania powiadomień przed <xref:System.IObserver%601.OnCompleted%2A> wywołaniem metody.</span><span class="sxs-lookup"><span data-stu-id="18752-157">The provider's <xref:System.IObservable%601.Subscribe%2A> method returns an <xref:System.IDisposable> implementation that enables observers to stop receiving notifications before the <xref:System.IObserver%601.OnCompleted%2A> method is called.</span></span> <span data-ttu-id="18752-158">Kod źródłowy dla tej `Unsubscriber(Of BaggageInfo)` klasy jest przedstawiony w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="18752-158">The source code for this `Unsubscriber(Of BaggageInfo)` class is shown in the following example.</span></span> <span data-ttu-id="18752-159">Gdy Klasa jest tworzona w `BaggageHandler.Subscribe` metodzie, zostaje przeniesiona odwołanie do `observers` kolekcji i odwołanie do obserwatora, który jest dodawany do kolekcji.</span><span class="sxs-lookup"><span data-stu-id="18752-159">When the class is instantiated in the `BaggageHandler.Subscribe` method, it is passed a reference to the `observers` collection and a reference to the observer that is added to the collection.</span></span> <span data-ttu-id="18752-160">Te odwołania są przypisywane do zmiennych lokalnych.</span><span class="sxs-lookup"><span data-stu-id="18752-160">These references are assigned to local variables.</span></span> <span data-ttu-id="18752-161">Gdy `Dispose` wywoływana jest metoda obiektu, sprawdza, czy obserwator nadal istnieje w `observers` kolekcji i, jeśli tak, usuwa obserwatora.</span><span class="sxs-lookup"><span data-stu-id="18752-161">When the object's `Dispose` method is called, it checks whether the observer still exists in the `observers` collection, and, if it does, removes the observer.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/provider.cs#3)]
[!code-vb[Conceptual.ObserverDesignPattern#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/provider.vb#3)]

<span data-ttu-id="18752-162">W poniższym przykładzie przedstawiono <xref:System.IObserver%601> implementację o nazwie `ArrivalsMonitor` , która jest klasą bazową, która wyświetla informacje o poświadczeniu o bagażu.</span><span class="sxs-lookup"><span data-stu-id="18752-162">The following example provides an <xref:System.IObserver%601> implementation named `ArrivalsMonitor`, which is a base class that displays baggage claim information.</span></span> <span data-ttu-id="18752-163">Informacje są wyświetlane alfabetycznie według nazwy miejscowości źródłowej.</span><span class="sxs-lookup"><span data-stu-id="18752-163">The information is displayed alphabetically, by the name of the originating city.</span></span> <span data-ttu-id="18752-164">Metody `ArrivalsMonitor` są oznaczone jako `overridable` (w Visual Basic) lub `virtual` (w języku C#), więc można je przesłaniać przez klasę pochodną.</span><span class="sxs-lookup"><span data-stu-id="18752-164">The methods of `ArrivalsMonitor` are marked as `overridable` (in Visual Basic) or `virtual` (in C#), so they can all be overridden by a derived class.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/observer.cs#4)]
[!code-vb[Conceptual.ObserverDesignPattern#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/observer.vb#4)]

<span data-ttu-id="18752-165">`ArrivalsMonitor`Klasa zawiera `Subscribe` `Unsubscribe` metody i.</span><span class="sxs-lookup"><span data-stu-id="18752-165">The `ArrivalsMonitor` class includes the `Subscribe` and `Unsubscribe` methods.</span></span> <span data-ttu-id="18752-166">`Subscribe`Metoda umożliwia klasie zapisywanie <xref:System.IDisposable> implementacji zwróconej przez wywołanie do <xref:System.IObservable%601.Subscribe%2A> zmiennej prywatnej.</span><span class="sxs-lookup"><span data-stu-id="18752-166">The `Subscribe` method enables the class to save the <xref:System.IDisposable> implementation returned by the call to <xref:System.IObservable%601.Subscribe%2A> to a private variable.</span></span> <span data-ttu-id="18752-167">`Unsubscribe`Metoda umożliwia klasy anulowanie subskrypcji powiadomień przez wywołanie <xref:System.IDisposable.Dispose%2A> implementacji dostawcy.</span><span class="sxs-lookup"><span data-stu-id="18752-167">The `Unsubscribe` method enables the class to unsubscribe from notifications by calling the provider's <xref:System.IDisposable.Dispose%2A> implementation.</span></span> <span data-ttu-id="18752-168">`ArrivalsMonitor`zawiera również implementacje <xref:System.IObserver%601.OnNext%2A> metod, <xref:System.IObserver%601.OnError%2A> , i <xref:System.IObserver%601.OnCompleted%2A> .</span><span class="sxs-lookup"><span data-stu-id="18752-168">`ArrivalsMonitor` also provides implementations of the <xref:System.IObserver%601.OnNext%2A>, <xref:System.IObserver%601.OnError%2A>, and <xref:System.IObserver%601.OnCompleted%2A> methods.</span></span> <span data-ttu-id="18752-169">Tylko <xref:System.IObserver%601.OnNext%2A> implementacja zawiera znaczną ilość kodu.</span><span class="sxs-lookup"><span data-stu-id="18752-169">Only the <xref:System.IObserver%601.OnNext%2A> implementation contains a significant amount of code.</span></span> <span data-ttu-id="18752-170">Metoda działa z prywatnym, posortowanym obiektem ogólnym, <xref:System.Collections.Generic.List%601> który utrzymuje informacje o portach lotniczych pochodzenia dla docierających lotów i karuzeli, na których jest dostępny bagaż.</span><span class="sxs-lookup"><span data-stu-id="18752-170">The method works with a private, sorted, generic <xref:System.Collections.Generic.List%601> object that maintains information about the airports of origin for arriving flights and the carousels on which their baggage is available.</span></span> <span data-ttu-id="18752-171">Jeśli `BaggageHandler` Klasa zgłasza nowe nadejście lotu, <xref:System.IObserver%601.OnNext%2A> Implementacja metody dodaje informacje o tym locie do listy.</span><span class="sxs-lookup"><span data-stu-id="18752-171">If the `BaggageHandler` class reports a new flight arrival, the <xref:System.IObserver%601.OnNext%2A> method implementation adds information about that flight to the list.</span></span> <span data-ttu-id="18752-172">Jeśli `BaggageHandler` Klasa zgłasza, że bagaż pracownika został zwolniony, <xref:System.IObserver%601.OnNext%2A> Metoda usuwa ten lot z listy.</span><span class="sxs-lookup"><span data-stu-id="18752-172">If the `BaggageHandler` class reports that the flight's baggage has been unloaded, the <xref:System.IObserver%601.OnNext%2A> method removes that flight from the list.</span></span> <span data-ttu-id="18752-173">Za każdym razem, gdy zostanie wprowadzona zmiana, lista zostanie posortowana i wyświetlona w konsoli programu.</span><span class="sxs-lookup"><span data-stu-id="18752-173">Whenever a change is made, the list is sorted and displayed to the console.</span></span>

<span data-ttu-id="18752-174">Poniższy przykład zawiera punkt wejścia aplikacji, który tworzy wystąpienie klasy, `BaggageHandler` a także dwa wystąpienia `ArrivalsMonitor` klasy, i używa `BaggageHandler.BaggageStatus` metody do dodawania i usuwania informacji na temat przybycia lotów.</span><span class="sxs-lookup"><span data-stu-id="18752-174">The following example contains the application entry point that instantiates the `BaggageHandler` class as well as two instances of the `ArrivalsMonitor` class, and uses the `BaggageHandler.BaggageStatus` method to add and remove information about arriving flights.</span></span> <span data-ttu-id="18752-175">W każdym przypadku obserwatorzy odbierają aktualizacje i poprawnie wyświetlają informacje o postawie bagażu.</span><span class="sxs-lookup"><span data-stu-id="18752-175">In each case, the observers receive updates and correctly display baggage claim information.</span></span>

[!code-csharp[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.observerdesignpattern/cs/program.cs#5)]
[!code-vb[Conceptual.ObserverDesignPattern#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.observerdesignpattern/vb/module1.vb#5)]

## <a name="related-topics"></a><span data-ttu-id="18752-176">Tematy pokrewne</span><span class="sxs-lookup"><span data-stu-id="18752-176">Related Topics</span></span>

|<span data-ttu-id="18752-177">Tytuł</span><span class="sxs-lookup"><span data-stu-id="18752-177">Title</span></span>|<span data-ttu-id="18752-178">Opis</span><span class="sxs-lookup"><span data-stu-id="18752-178">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="18752-179">Wzorzec projektowy obserwatora — Najlepsze praktyki</span><span class="sxs-lookup"><span data-stu-id="18752-179">Observer Design Pattern Best Practices</span></span>](observer-design-pattern-best-practices.md)|<span data-ttu-id="18752-180">W tym artykule opisano najlepsze rozwiązania, które należy podjąć podczas opracowywania aplikacji, które implementują Wzorzec projektowy obserwatora.</span><span class="sxs-lookup"><span data-stu-id="18752-180">Describes best practices to adopt when developing applications that implement the observer design pattern.</span></span>|
|[<span data-ttu-id="18752-181">Instrukcje: implementowanie dostawcy</span><span class="sxs-lookup"><span data-stu-id="18752-181">How to: Implement a Provider</span></span>](how-to-implement-a-provider.md)|<span data-ttu-id="18752-182">Zapewnia implementację krok po kroku dostawcy dla aplikacji monitorującej temperaturę.</span><span class="sxs-lookup"><span data-stu-id="18752-182">Provides a step-by-step implementation of a provider for a temperature monitoring application.</span></span>|
|[<span data-ttu-id="18752-183">Instrukcje: implementowanie obserwatora</span><span class="sxs-lookup"><span data-stu-id="18752-183">How to: Implement an Observer</span></span>](how-to-implement-an-observer.md)|<span data-ttu-id="18752-184">Zawiera implementację krok po kroku obserwatora dla aplikacji monitorującej temperaturę.</span><span class="sxs-lookup"><span data-stu-id="18752-184">Provides a step-by-step implementation of an observer for a temperature monitoring application.</span></span>|
