---
title: Izolowany magazyn
description: Poznaj izolowany magazyn, który jest mechanizmem magazynu danych, który zapewnia izolację & bezpieczeństwa przez definiowanie standardowych metod kojarzenia kodu z zapisanymi danymi.
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- data storage using isolated storage
- stores
- storing data using isolated storage
- isolated storage
- location of isolated storage in file system
- standardizing storage systems
- storing data using isolated storage, when not to use
- code, isolated storage
- isolated storage, options
- data storage using isolated storage, when not to use
- storing data using isolated storage, options
- isolated storage, when not to use
- data storage using isolated storage, options
- isolation
ms.assetid: aff939d7-9e49-46f2-a8cd-938d3020e94e
ms.openlocfilehash: b9915faff2593cc51868c20e1a83a05ffca9f548
ms.sourcegitcommit: dc2feef0794cf41dbac1451a13b8183258566c0e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/24/2020
ms.locfileid: "85325937"
---
# <a name="isolated-storage"></a><span data-ttu-id="d8e8a-103">Izolowany magazyn</span><span class="sxs-lookup"><span data-stu-id="d8e8a-103">Isolated Storage</span></span>
<a name="top"></a><span data-ttu-id="d8e8a-104">W przypadku aplikacji klasycznych magazyn izolowany jest mechanizmem magazynu danych, który zapewnia izolację i bezpieczeństwo przez definiowanie ustandaryzowanych metod kojarzenia kodu z zapisanymi danymi.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-104">For desktop apps, isolated storage is a data storage mechanism that provides isolation and safety by defining standardized ways of associating code with saved data.</span></span> <span data-ttu-id="d8e8a-105">Standaryzacja oferuje także inne korzyści.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-105">Standardization provides other benefits as well.</span></span> <span data-ttu-id="d8e8a-106">Administratorzy mogą używać narzędzi przeznaczonych do wykonywania operacji na wydzielonej pamięci masowej w celu konfigurowania ilości miejsca przeznaczonego na pliki, ustawiania zasad zabezpieczeń i usuwania nieużywanych danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-106">Administrators can use tools designed to manipulate isolated storage to configure file storage space, set security policies, and delete unused data.</span></span> <span data-ttu-id="d8e8a-107">Dzięki wydzielonej pamięci masowej kod nie wymaga unikatowych ścieżek określających bezpieczne lokalizacje w systemie plików, a dane są chronione przed innymi aplikacjami, które mają dostęp tylko do wydzielonej pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-107">With isolated storage, your code no longer needs unique paths to specify safe locations in the file system, and data is protected from other applications that only have isolated storage access.</span></span> <span data-ttu-id="d8e8a-108">Ustalona informacja, która wskazuje, gdzie jest zlokalizowany obszar pamięci aplikacji nie jest potrzebna.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-108">Hard-coded information that indicates where an application's storage area is located is unnecessary.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d8e8a-109">Izolowany magazyn nie jest dostępny dla aplikacji ze sklepu Windows 8. x.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-109">Isolated storage is not available for Windows 8.x Store apps.</span></span> <span data-ttu-id="d8e8a-110">Zamiast tego należy użyć klas danych aplikacji w `Windows.Storage` przestrzeniach nazw uwzględnionych w interfejsie API środowisko wykonawcze systemu Windows do przechowywania lokalnych danych i plików.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-110">Instead, use the application data classes in the `Windows.Storage` namespaces included in the Windows Runtime API to store local data and files.</span></span> <span data-ttu-id="d8e8a-111">Aby uzyskać więcej informacji, zobacz [dane aplikacji](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10)) w centrum deweloperów systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-111">For more information, see [Application data](https://docs.microsoft.com/previous-versions/windows/apps/hh464917(v=win.10)) in the Windows Dev Center.</span></span>

<span data-ttu-id="d8e8a-112">Ten temat zawiera następujące sekcje:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-112">This topic contains the following sections:</span></span>

- [<span data-ttu-id="d8e8a-113">Przedziały i magazyny danych</span><span class="sxs-lookup"><span data-stu-id="d8e8a-113">Data Compartments and Stores</span></span>](#data_compartments_and_stores)

- [<span data-ttu-id="d8e8a-114">Limity izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-114">Quotas for Isolated Storage</span></span>](#quotas)

- [<span data-ttu-id="d8e8a-115">Bezpieczny dostęp</span><span class="sxs-lookup"><span data-stu-id="d8e8a-115">Secure Access</span></span>](#secure_access)

- [<span data-ttu-id="d8e8a-116">Dopuszczalne użycie i zagrożenia zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="d8e8a-116">Allowed Usage and Security Risks</span></span>](#allowed_usage)

- [<span data-ttu-id="d8e8a-117">Lokalizacje izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-117">Isolated Storage Locations</span></span>](#isolated_storage_locations)

- [<span data-ttu-id="d8e8a-118">Tworzenia, wyliczania i usuwania izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-118">Creating, Enumerating, and Deleting Isolated Storage</span></span>](#isolated_storage_tasks)

- [<span data-ttu-id="d8e8a-119">Scenariusze izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-119">Scenarios for Isolated Storage</span></span>](#scenarios_for_isolated_storage)

- [<span data-ttu-id="d8e8a-120">Tematy pokrewne</span><span class="sxs-lookup"><span data-stu-id="d8e8a-120">Related Topics</span></span>](#related_topics)

- [<span data-ttu-id="d8e8a-121">Tematy pomocy</span><span class="sxs-lookup"><span data-stu-id="d8e8a-121">Reference</span></span>](#reference)

<a name="data_compartments_and_stores"></a>

## <a name="data-compartments-and-stores"></a><span data-ttu-id="d8e8a-122">Przedziały i magazyny danych</span><span class="sxs-lookup"><span data-stu-id="d8e8a-122">Data Compartments and Stores</span></span>

<span data-ttu-id="d8e8a-123">Kiedy aplikacja przechowuje dane w pliku, należy ostrożnie wybierać nazwę pliku i lokalizację w pamięci masowej, aby zminimalizować prawdopodobieństwo, że lokalizacja w pamięci masowej będzie znana innej aplikacji, przez co będzie narażona na uszkodzenia.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-123">When an application stores data in a file, the file name and storage location must be carefully chosen to minimize the possibility that the storage location will be known to another application and, therefore, will be vulnerable to corruption.</span></span> <span data-ttu-id="d8e8a-124">Bez standardowego systemu do zarządzania wymienionymi problemami projektowanie technik ad hoc, które minimalizują konflikty pamięci podręcznej, może być złożone, a wyniki mogą być zawodne.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-124">Without a standard system in place to manage these problems, developing ad hoc techniques that minimize storage conflicts can be complex, and the results can be unreliable.</span></span>

<span data-ttu-id="d8e8a-125">Dzięki wydzielonej pamięci masowej dane są zawsze izolowane według użytkownika i zestawu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-125">With isolated storage, data is always isolated by user and by assembly.</span></span> <span data-ttu-id="d8e8a-126">Poświadczenia, takie jak pochodzenie lub silna nazwa zestawu, określają tożsamość zestawu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-126">Credentials such as the origin or the strong name of the assembly determine assembly identity.</span></span> <span data-ttu-id="d8e8a-127">Użycie podobnych poświadczeń umożliwia też izolowanie danych według domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-127">Data can also be isolated by application domain, using similar credentials.</span></span>

<span data-ttu-id="d8e8a-128">Gdy jest używana wydzielona pamięć masowa, aplikacja zapisuje dane w unikatowym przedziale danych skojarzonym z pewnymi aspektami tożsamości kodu, takimi jak wydawca lub podpis.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-128">When you use isolated storage, your application saves data to a unique data compartment that is associated with some aspect of the code's identity, such as its publisher or signature.</span></span> <span data-ttu-id="d8e8a-129">Przedział danych jest abstrakcyjną, a nie konkretną lokalizacją w pamięci masowej; składa się z co najmniej jednego pliku wydzielonej pamięci masowej, nazywanego magazynem, który zawiera rzeczywistą lokalizację katalogu, w którym są przechowywane dane.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-129">The data compartment is an abstraction, not a specific storage location; it consists of one or more isolated storage files, called stores, which contain the actual directory locations where data is stored.</span></span> <span data-ttu-id="d8e8a-130">Na przykład aplikacja może mieć skojarzony przedział danych, a katalog w systemie plików będzie implementować magazyn, w którym w rzeczywistości są przechowywane dane dla tej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-130">For example, an application might have a data compartment associated with it, and a directory in the file system would implement the store that actually preserves the data for that application.</span></span> <span data-ttu-id="d8e8a-131">Dane zapisane w magazynie mogą być dowolnego rodzaju, od informacji o preferencjach użytkownika po informacje o stanie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-131">The data saved in the store can be any kind of data, from user preference information to application state.</span></span> <span data-ttu-id="d8e8a-132">Lokalizacja przedziału danych jest niewidoczna dla dewelopera.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-132">For the developer, the location of the data compartment is transparent.</span></span> <span data-ttu-id="d8e8a-133">Magazyny zazwyczaj znajdują się na komputerze klienckim, ale aplikacje serwerowe mogą używać izolowanych magazynów do przechowywania informacji, personifikując użytkownika, w imieniu którego działają.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-133">Stores usually reside on the client, but a server application could use isolated stores to store information by impersonating the user on whose behalf it is functioning.</span></span> <span data-ttu-id="d8e8a-134">Wydzielona pamięć masowa może także przechowywać informacje na serwerze, używając profilu mobilnego użytkownika, dzięki czemu takie informacje mogą podróżować razem z użytkownikiem mobilnym.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-134">Isolated storage can also store information on a server with a user's roaming profile so that the information will travel with the roaming user.</span></span>

<a name="quotas"></a>

## <a name="quotas-for-isolated-storage"></a><span data-ttu-id="d8e8a-135">Limity izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-135">Quotas for Isolated Storage</span></span>

<span data-ttu-id="d8e8a-136">Przydział to limit ilości wydzielonej pamięci masowej, której można używać.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-136">A quota is a limit on the amount of isolated storage that can be used.</span></span> <span data-ttu-id="d8e8a-137">Przydział zawiera bajty w przestrzeni plików, a także zapas skojarzony z katalogiem i innymi informacjami w magazynie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-137">The quota includes bytes of file space as well as the overhead associated with the directory and other information in the store.</span></span> <span data-ttu-id="d8e8a-138">Magazyn izolowany korzysta z przydziałów uprawnień, które są limitami magazynu ustawionymi za pomocą <xref:System.Security.Permissions.IsolatedStoragePermission> obiektów.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-138">Isolated storage uses permission quotas, which are storage limits that are set by using <xref:System.Security.Permissions.IsolatedStoragePermission> objects.</span></span> <span data-ttu-id="d8e8a-139">Jeśli spróbujesz zapisać dane, które przekraczają limit przydziału, <xref:System.IO.IsolatedStorage.IsolatedStorageException> zostanie zgłoszony wyjątek.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-139">If you try to write data that exceeds the quota, an <xref:System.IO.IsolatedStorage.IsolatedStorageException> exception is thrown.</span></span>  <span data-ttu-id="d8e8a-140">Zasady zabezpieczeń, które można modyfikować za pomocą narzędzia .NET Framework Configuration Tool (Mscorcfg.msc), określają uprawnienia udzielane kodowi.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-140">Security policy, which can be modified using the .NET Framework Configuration Tool (Mscorcfg.msc), determines which permissions are granted to code.</span></span> <span data-ttu-id="d8e8a-141">Kod, który został udzielony, <xref:System.Security.Permissions.IsolatedStoragePermission> jest ograniczony do używania nie więcej miejsca do magazynowania niż <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> zezwala na właściwość.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-141">Code that has been granted <xref:System.Security.Permissions.IsolatedStoragePermission> is restricted to using no more storage than the <xref:System.Security.Permissions.IsolatedStoragePermission.UserQuota%2A> property allows.</span></span> <span data-ttu-id="d8e8a-142">Jednak kod może obejść przedziały uprawnień, prezentując różne tożsamości użytkownika, więc przydziały uprawnień pełnią rolę wytycznych dotyczących zachowania kodu, a nie stałych limitów zachowania kodu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-142">However, because code can bypass permission quotas by presenting different user identities, permission quotas serve as guidelines for how code should behave rather than as a firm limit on code behavior.</span></span>

<span data-ttu-id="d8e8a-143">Przydziały nie są wymuszane w magazynach mobilnych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-143">Quotas are not enforced on roaming stores.</span></span> <span data-ttu-id="d8e8a-144">Z tego powodu kod musi mieć nieco wyższy poziom uprawnień, aby mógł ich używać.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-144">Because of this, a slightly higher level of permission is required for code to use them.</span></span> <span data-ttu-id="d8e8a-145">Wartości wyliczeniowe <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> i <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> określają uprawnienia do używania wydzielonej pamięci masowej dla użytkownika mobilnego.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-145">The enumeration values <xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser> and <xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser> specify a permission to use isolated storage for a roaming user.</span></span>

<a name="secure_access"></a>

## <a name="secure-access"></a><span data-ttu-id="d8e8a-146">Bezpieczny dostęp</span><span class="sxs-lookup"><span data-stu-id="d8e8a-146">Secure Access</span></span>

<span data-ttu-id="d8e8a-147">Wydzielona pamięć masowa umożliwia częściowo zaufanym aplikacjom przechowywanie danych w sposób kontrolowany przez zasady zabezpieczeń komputera.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-147">Using isolated storage enables partially trusted applications to store data in a manner that is controlled by the computer's security policy.</span></span> <span data-ttu-id="d8e8a-148">Jest to szczególnie przydatne w przypadku pobranych składników, które użytkownik może chcieć uruchomić z zachowaniem ostrożności.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-148">This is especially useful for downloaded components that a user might want to run cautiously.</span></span> <span data-ttu-id="d8e8a-149">Zasady zabezpieczeń rzadko udzielają uprawnień kodu tego rodzaju podczas uzyskiwania dostępu do systemu plików przy użyciu standardowych mechanizmów We/Wy.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-149">Security policy rarely grants this kind of code permission when you access the file system by using standard I/O mechanisms.</span></span> <span data-ttu-id="d8e8a-150">Jednak kod uruchomiony na komputerze lokalnym, w sieci lokalnej lub w Internecie ma domyślnie udzielone prawo do używania wydzielonej pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-150">However, by default, code running from the local computer, a local network, or the Internet is granted the right to use isolated storage.</span></span>

<span data-ttu-id="d8e8a-151">Na podstawie odpowiedniego poziomu zaufania administratorzy mogą określić, ile wydzielonej pamięci masowej jest dostępnej dla aplikacji lub użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-151">Administrators can limit how much isolated storage an application or a user has available, based on an appropriate trust level.</span></span> <span data-ttu-id="d8e8a-152">Ponadto administratorzy mogą całkowicie usuwać utrwalone dane użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-152">In addition, administrators can remove a user's persisted data completely.</span></span> <span data-ttu-id="d8e8a-153">Aby utworzyć magazyn izolowany lub uzyskać do niego dostęp, należy przyznać mu odpowiednie <xref:System.Security.Permissions.IsolatedStorageFilePermission> uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-153">To create or access isolated storage, code must be granted the appropriate <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission.</span></span>

<span data-ttu-id="d8e8a-154">Aby uzyskać dostęp do wydzielonej pamięci masowej, kod musi mieć wszystkie niezbędne natywne prawa platformy systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-154">To access isolated storage, code must have all necessary native platform operating system rights.</span></span> <span data-ttu-id="d8e8a-155">Wymagana jest zgodność z listami kontroli dostępu (ACL) określającymi, którzy użytkownicy mają prawa do używania systemu plików.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-155">The access control lists (ACLs) that control which users have the rights to use the file system must be satisfied.</span></span> <span data-ttu-id="d8e8a-156">Aplikacje programu .NET Framework mają już prawa systemu operacyjnego dotyczące dostępu do wydzielonej pamięci masowej, chyba że wykonują personifikację (specyficzna dla platformy).</span><span class="sxs-lookup"><span data-stu-id="d8e8a-156">.NET Framework applications already have operating system rights to access isolated storage unless they perform (platform-specific) impersonation.</span></span> <span data-ttu-id="d8e8a-157">W tym przypadku aplikacja jest odpowiedzialna za sprawdzanie, czy tożsamość personifikowanego użytkownika ma prawidłowe prawa systemu operacyjnego do uzyskiwania dostępu do wydzielonej pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-157">In this case, the application is responsible for ensuring that the impersonated user identity has the proper operating system rights to access isolated storage.</span></span> <span data-ttu-id="d8e8a-158">Ten dostęp oferuje uruchomionemu lub pobranemu z sieci web kodowi wygodny sposób odczytu lub zapisu w obszarze pamięci masowej związanym z konkretnym użytkownikiem.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-158">This access provides a convenient way for code that is run or downloaded from the web to read and write to a storage area related to a particular user.</span></span>

<span data-ttu-id="d8e8a-159">Aby kontrolować dostęp do magazynu izolowanego, środowisko uruchomieniowe języka wspólnego używa <xref:System.Security.Permissions.IsolatedStorageFilePermission> obiektów.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-159">To control access to isolated storage, the common language runtime uses <xref:System.Security.Permissions.IsolatedStorageFilePermission> objects.</span></span> <span data-ttu-id="d8e8a-160">Każdy obiekt ma właściwości, które określają następujące wartości:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-160">Each object has properties that specify the following values:</span></span>

- <span data-ttu-id="d8e8a-161">Dozwolone użycie, które wskazuje typ dozwolonego dostępu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-161">Allowed usage, which indicates the type of access that is allowed.</span></span> <span data-ttu-id="d8e8a-162">Wartości są elementami członkowskimi <xref:System.Security.Permissions.IsolatedStorageContainment> wyliczenia.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-162">The values are members of the <xref:System.Security.Permissions.IsolatedStorageContainment> enumeration.</span></span> <span data-ttu-id="d8e8a-163">Aby uzyskać więcej informacji na temat tych wartości, zobacz tabelę w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-163">For more information about these values, see the table in the next section.</span></span>

- <span data-ttu-id="d8e8a-164">Przydział pamięci, tak jak omówiono w poprzedniej sekcji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-164">Storage quota, as discussed in the preceding section.</span></span>

<span data-ttu-id="d8e8a-165">Środowisko uruchomieniowe wymaga <xref:System.Security.Permissions.IsolatedStorageFilePermission> uprawnień, gdy kod próbuje otworzyć magazyn.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-165">The runtime demands <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission when code first attempts to open a store.</span></span> <span data-ttu-id="d8e8a-166">Decyduje o tym, czy udzielić tego uprawnienia, w zależności od tego, jaki kod jest zaufany.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-166">It decides whether to grant this permission, based on how much the code is trusted.</span></span> <span data-ttu-id="d8e8a-167">Jeśli przyznano uprawnienia, dozwolone wartości przydziału użycia i magazynu są określane przez zasady zabezpieczeń i przez żądanie kodu dla <xref:System.Security.Permissions.IsolatedStorageFilePermission> .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-167">If the permission is granted, the allowed usage and storage quota values are determined by security policy and by the code's request for <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span> <span data-ttu-id="d8e8a-168">Zasady zabezpieczeń są ustawiane przy użyciu narzędzia .NET Framework Configuration Tool (Mscorcfg.msc).</span><span class="sxs-lookup"><span data-stu-id="d8e8a-168">Security policy is set by using the .NET Framework Configuration Tool (Mscorcfg.msc).</span></span> <span data-ttu-id="d8e8a-169">Wszystkie obiekty wywołujące w stosie wywołań są sprawdzane w celu zagwarantowania, że każdy obiekt wywołujący ma co najmniej jedno odpowiednie dozwolone użycie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-169">All callers in the call stack are checked to ensure that each caller has at least the appropriate allowed usage.</span></span> <span data-ttu-id="d8e8a-170">Środowisko uruchomieniowe sprawdza też przydział określony przez kod, który otworzył lub utworzył magazyn, w którym mają być zapisywane pliki.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-170">The runtime also checks the quota imposed on the code that opened or created the store in which the file is to be saved.</span></span> <span data-ttu-id="d8e8a-171">Jeśli warunki są spełnione, jest udzielane uprawnienie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-171">If these conditions are satisfied, permission is granted.</span></span> <span data-ttu-id="d8e8a-172">Przydział jest sprawdzany ponownie za każdym razem, gdy plik jest zapisywany w magazynie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-172">The quota is checked again every time a file is written to the store.</span></span>

<span data-ttu-id="d8e8a-173">Kod aplikacji nie jest wymagany do zażądania uprawnień, ponieważ środowisko uruchomieniowe języka wspólnego udzieli <xref:System.Security.Permissions.IsolatedStorageFilePermission> odpowiedniej wartości na podstawie zasad zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-173">Application code is not required to request permission because the common language runtime will grant whatever <xref:System.Security.Permissions.IsolatedStorageFilePermission> is appropriate based on security policy.</span></span> <span data-ttu-id="d8e8a-174">Jednak istnieją dobre powody, aby zażądać określonych uprawnień wymaganych przez aplikację, w tym <xref:System.Security.Permissions.IsolatedStorageFilePermission> .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-174">However, there are good reasons to request specific permissions that your application needs, including <xref:System.Security.Permissions.IsolatedStorageFilePermission>.</span></span>

<a name="allowed_usage"></a>

## <a name="allowed-usage-and-security-risks"></a><span data-ttu-id="d8e8a-175">Dopuszczalne użycie i zagrożenia zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="d8e8a-175">Allowed Usage and Security Risks</span></span>

<span data-ttu-id="d8e8a-176">Dozwolone użycie określone przez <xref:System.Security.Permissions.IsolatedStorageFilePermission> określa stopień, w jakim kod będzie mógł utworzyć i używać izolowanego magazynu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-176">The allowed usage specified by <xref:System.Security.Permissions.IsolatedStorageFilePermission> determines the degree to which code will be allowed to create and use isolated storage.</span></span> <span data-ttu-id="d8e8a-177">W poniższej tabeli pokazano, jak dozwolone użycie określone w uprawnieniu odpowiada typom izolacji, i podsumowano zagrożenia bezpieczeństwa skojarzone z każdym dozwolonym użyciem.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-177">The following table shows how the allowed usage specified in the permission corresponds to types of isolation and summarizes the security risks associated with each allowed usage.</span></span>

|<span data-ttu-id="d8e8a-178">Dozwolone użycie</span><span class="sxs-lookup"><span data-stu-id="d8e8a-178">Allowed usage</span></span>|<span data-ttu-id="d8e8a-179">Typy izolacji</span><span class="sxs-lookup"><span data-stu-id="d8e8a-179">Isolation types</span></span>|<span data-ttu-id="d8e8a-180">Wpływ na zabezpieczenia</span><span class="sxs-lookup"><span data-stu-id="d8e8a-180">Security impact</span></span>|
|-------------------|---------------------|---------------------|
|<xref:System.Security.Permissions.IsolatedStorageContainment.None>|<span data-ttu-id="d8e8a-181">Użycie wydzielonej pamięci masowej nie jest dozwolone.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-181">No isolated storage use is allowed.</span></span>|<span data-ttu-id="d8e8a-182">Brak wpływu na zabezpieczenia.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-182">There is no security impact.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByUser>|<span data-ttu-id="d8e8a-183">Izolacja według użytkownika, domeny i zestawu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-183">Isolation by user, domain, and assembly.</span></span> <span data-ttu-id="d8e8a-184">Każdy zestaw ma oddzielny podmagazyn w domenie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-184">Each assembly has a separate substore within the domain.</span></span> <span data-ttu-id="d8e8a-185">Magazyny używające tego uprawnienia są także niejawnie izolowane przez komputer.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-185">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="d8e8a-186">Ten poziom uprawnień zostawia zasoby otwarte do nieautoryzowanego użycia, mimo że wymuszone przydziały utrudniają takie użycie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-186">This permission level leaves resources open to unauthorized overuse, although enforced quotas make it more difficult.</span></span> <span data-ttu-id="d8e8a-187">Takie działanie jest znanej pod nazwą „ataku typu odmowa usługi”.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-187">This is called a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.DomainIsolationByRoamingUser>|<span data-ttu-id="d8e8a-188">Analogicznie jak `DomainIsolationByUser` , ale magazyn jest zapisywany w lokalizacji, która będzie przenoszona w przypadku włączenia profilów użytkowników mobilnych, a limity przydziału nie są wymuszane.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-188">Same as `DomainIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="d8e8a-189">Przydziały muszą być wyłączone, więc zasoby pamięci masowej są bardziej podatne na atak typu „odmowa usługi”.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-189">Because quotas must be disabled, storage resources are more vulnerable to a denial of service attack.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByUser>|<span data-ttu-id="d8e8a-190">Izolacja według użytkownika i zestawu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-190">Isolation by user and assembly.</span></span> <span data-ttu-id="d8e8a-191">Magazyny używające tego uprawnienia są także niejawnie izolowane przez komputer.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-191">Stores that use this permission are also implicitly isolated by computer.</span></span>|<span data-ttu-id="d8e8a-192">Na tym poziomie są wymuszane przydziały, aby zapobiegać atakom typu „odmowa usługi”.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-192">Quotas are enforced at this level to help prevent a denial of service attack.</span></span> <span data-ttu-id="d8e8a-193">Taki sam zestaw w innej domenie może mieć dostęp do magazynu, przez co możliwe jest przeciekanie informacji między aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-193">The same assembly in another domain can access this store, opening the possibility that information could be leaked between applications.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AssemblyIsolationByRoamingUser>|<span data-ttu-id="d8e8a-194">Analogicznie jak `AssemblyIsolationByUser` , ale magazyn jest zapisywany w lokalizacji, która będzie przenoszona w przypadku włączenia profilów użytkowników mobilnych, a limity przydziału nie są wymuszane.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-194">Same as `AssemblyIsolationByUser`, but store is saved to a location that will roam if roaming user profiles are enabled and quotas are not enforced.</span></span>|<span data-ttu-id="d8e8a-195">Tak samo jak w `AssemblyIsolationByUser` przypadku, ale bez przydziałów, ryzyko ataku typu "odmowa usługi" zwiększa się.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-195">Same as in `AssemblyIsolationByUser`, but without quotas, the risk of a denial of service attack increases.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.AdministerIsolatedStorageByUser>|<span data-ttu-id="d8e8a-196">Izolacja według użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-196">Isolation by user.</span></span> <span data-ttu-id="d8e8a-197">Zazwyczaj tylko narzędzia administracyjne lub narzędzia do debugowania używają tego poziomu uprawnień.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-197">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="d8e8a-198">Dostęp z użyciem tego uprawnienia umożliwia kodowi wyświetlanie i usuwanie dowolnych plików lub katalogów użytkownika przechowywanych w wydzielonej pamięci masowej (niezależnie do izolacji zestawu).</span><span class="sxs-lookup"><span data-stu-id="d8e8a-198">Access with this permission allows code to view or delete any of a user's isolated storage files or directories (regardless of assembly isolation).</span></span> <span data-ttu-id="d8e8a-199">Zagrożenia to m.in. wycieki informacji i utrata danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-199">Risks include, but are not limited to, leaking information and data loss.</span></span>|
|<xref:System.Security.Permissions.IsolatedStorageContainment.UnrestrictedIsolatedStorage>|<span data-ttu-id="d8e8a-200">Izolacja według wszystkich użytkowników, domen i zestawów.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-200">Isolation by all users, domains, and assemblies.</span></span> <span data-ttu-id="d8e8a-201">Zazwyczaj tylko narzędzia administracyjne lub narzędzia do debugowania używają tego poziomu uprawnień.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-201">Typically, only administrative or debugging tools use this level of permission.</span></span>|<span data-ttu-id="d8e8a-202">To uprawnienie tworzy potencjalną możliwość naruszenia zabezpieczeń wszystkich izolowanych magazynów wszystkich użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-202">This permission creates the potential for a total compromise of all isolated stores for all users.</span></span>|

## <a name="safety-of-isolated-storage-components-with-regard-to-untrusted-data"></a><span data-ttu-id="d8e8a-203">Bezpieczeństwo izolowanych składników magazynu w odniesieniu do niezaufanych danych</span><span class="sxs-lookup"><span data-stu-id="d8e8a-203">Safety of isolated storage components with regard to untrusted data</span></span>

<span data-ttu-id="d8e8a-204">__Ta sekcja ma zastosowanie do następujących platform:__</span><span class="sxs-lookup"><span data-stu-id="d8e8a-204">__This section applies to the following frameworks:__</span></span>

- <span data-ttu-id="d8e8a-205">.NET Framework (wszystkie wersje)</span><span class="sxs-lookup"><span data-stu-id="d8e8a-205">.NET Framework (all versions)</span></span>
- <span data-ttu-id="d8e8a-206">.NET Core 2.1 +</span><span class="sxs-lookup"><span data-stu-id="d8e8a-206">.NET Core 2.1+</span></span>
- <span data-ttu-id="d8e8a-207">.NET 5.0 +</span><span class="sxs-lookup"><span data-stu-id="d8e8a-207">.NET 5.0+</span></span>

<span data-ttu-id="d8e8a-208">.NET Framework i .NET Core oferują [izolowany magazyn](/dotnet/standard/io/isolated-storage) jako mechanizm utrwalania danych dla użytkownika, aplikacji lub składnika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-208">The .NET Framework and .NET Core offer [isolated storage](/dotnet/standard/io/isolated-storage) as a mechanism to persist data for a user, an application, or a component.</span></span> <span data-ttu-id="d8e8a-209">Jest to starszy składnik przeznaczony głównie do realizacji przestarzałych scenariuszy zabezpieczeń dostępu do kodu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-209">This is a legacy component primarily designed for now-deprecated Code Access Security scenarios.</span></span>

<span data-ttu-id="d8e8a-210">Do odczytywania danych między granicami zaufania można używać różnych izolowanych interfejsów API i narzędzi magazynu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-210">Various isolated storage APIs and tools can be used to read data across trust boundaries.</span></span> <span data-ttu-id="d8e8a-211">Na przykład odczyt danych z zakresu całego komputera może agregować dane z innych, prawdopodobnie mniej zaufanych kont użytkowników na komputerze.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-211">For example, reading data from a machine-wide scope can aggregate data from other, possibly less-trusted user accounts on the machine.</span></span> <span data-ttu-id="d8e8a-212">Składniki lub aplikacje odczytane z oddzielonych na cały komputer zakresów magazynu powinny mieć świadomość skutków odczytu tych danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-212">Components or applications which read from machine-wide isolated storage scopes should be aware of the consequences of reading this data.</span></span>

### <a name="security-sensitive-apis-which-can-read-from-the-machine-wide-scope"></a><span data-ttu-id="d8e8a-213">Zależne od zabezpieczeń interfejsy API, które mogą odczytywać z zakresu całego komputera</span><span class="sxs-lookup"><span data-stu-id="d8e8a-213">Security-sensitive APIs which can read from the machine-wide scope</span></span>

<span data-ttu-id="d8e8a-214">Składniki lub aplikacje, które wywołują dowolne z następujących interfejsów API, Odczytaj z zakresu całego komputera:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-214">Components or applications that call any of the following APIs read from the machine-wide scope:</span></span>

* <span data-ttu-id="d8e8a-215">[IsolatedStorageFile. GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), przekazywanie zakresu, który zawiera flagę IsolatedStorageScope. Machine</span><span class="sxs-lookup"><span data-stu-id="d8e8a-215">[IsolatedStorageFile.GetEnumerator](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getenumerator), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* [<span data-ttu-id="d8e8a-216">IsolatedStorageFile.GetMachineStoreForApplication</span><span class="sxs-lookup"><span data-stu-id="d8e8a-216">IsolatedStorageFile.GetMachineStoreForApplication</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforapplication)
* [<span data-ttu-id="d8e8a-217">IsolatedStorageFile.GetMachineStoreForAssembly</span><span class="sxs-lookup"><span data-stu-id="d8e8a-217">IsolatedStorageFile.GetMachineStoreForAssembly</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestoreforassembly)
* [<span data-ttu-id="d8e8a-218">IsolatedStorageFile.GetMachineStoreForDomain</span><span class="sxs-lookup"><span data-stu-id="d8e8a-218">IsolatedStorageFile.GetMachineStoreForDomain</span></span>](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getmachinestorefordomain)
* <span data-ttu-id="d8e8a-219">[IsolatedStorageFile. GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), przekazywanie zakresu zawierającego flagę IsolatedStorageScope. Machine</span><span class="sxs-lookup"><span data-stu-id="d8e8a-219">[IsolatedStorageFile.GetStore](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.getstore), passing a scope that includes the IsolatedStorageScope.Machine flag</span></span>
* <span data-ttu-id="d8e8a-220">[IsolatedStorageFile. Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), przekazywanie zakresu zawierającego `IsolatedStorageScope.Machine` flagę</span><span class="sxs-lookup"><span data-stu-id="d8e8a-220">[IsolatedStorageFile.Remove](/dotnet/api/system.io.isolatedstorage.isolatedstoragefile.remove), passing a scope that includes the `IsolatedStorageScope.Machine` flag</span></span>

<span data-ttu-id="d8e8a-221">Działanie [Narzędzia izolowanego magazynu](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` ma wpływ na to `/machine` , jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-221">The [isolated storage tool](/dotnet/framework/tools/storeadm-exe-isolated-storage-tool) `storeadm.exe` is impacted if called with the `/machine` switch, as shown in the following code:</span></span>

```txt
storeadm.exe /machine [any-other-switches]
```

<span data-ttu-id="d8e8a-222">Narzędzie izolowanego magazynu jest dostępne jako część programu Visual Studio i zestawu SDK .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-222">The isolated storage tool is provided as part of Visual Studio and the .NET Framework SDK.</span></span>

<span data-ttu-id="d8e8a-223">Jeśli aplikacja nie obejmuje wywołań do poprzednich interfejsów API lub jeśli przepływ pracy nie wymaga wywołania `storeadm.exe` w ten sposób, ten dokument nie ma zastosowania.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-223">If the application doesn't involve calls to the preceding APIs, or if the workflow doesn't involve calling `storeadm.exe` in this manner, this document doesn't apply.</span></span>

### <a name="impact-in-multi-user-environments"></a><span data-ttu-id="d8e8a-224">Wpływ na środowiska z obsługą wielu użytkowników</span><span class="sxs-lookup"><span data-stu-id="d8e8a-224">Impact in multi-user environments</span></span>

<span data-ttu-id="d8e8a-225">Jak wspomniano wcześniej, wpływ na zabezpieczenia z tych interfejsów API wynika z danych zapisanych z jednego środowiska zaufania, które są odczytywane z innego środowiska zaufania.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-225">As mentioned previously, the security impact from these APIs results from data written from one trust environment is read from a different trust environment.</span></span> <span data-ttu-id="d8e8a-226">Magazyn izolowany zwykle używa jednej z trzech lokalizacji do odczytu i zapisu danych:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-226">Isolated storage generally uses one of three locations to read and write data:</span></span>

1. <span data-ttu-id="d8e8a-227">`%LOCALAPPDATA%\IsolatedStorage\`: Na przykład `C:\Users\<username>\AppData\Local\IsolatedStorage\` , dla `User` zakresu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-227">`%LOCALAPPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Local\IsolatedStorage\`, for `User` scope.</span></span>
2. <span data-ttu-id="d8e8a-228">`%APPDATA%\IsolatedStorage\`: Na przykład `C:\Users\<username>\AppData\Roaming\IsolatedStorage\` , dla `User|Roaming` zakresu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-228">`%APPDATA%\IsolatedStorage\`: For example, `C:\Users\<username>\AppData\Roaming\IsolatedStorage\`, for `User|Roaming` scope.</span></span>
3. <span data-ttu-id="d8e8a-229">`%PROGRAMDATA%\IsolatedStorage\`: Na przykład `C:\ProgramData\IsolatedStorage\` , dla `Machine` zakresu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-229">`%PROGRAMDATA%\IsolatedStorage\`: For example, `C:\ProgramData\IsolatedStorage\`, for `Machine` scope.</span></span>

<span data-ttu-id="d8e8a-230">Pierwsze dwie lokalizacje są izolowane dla poszczególnych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-230">The first two locations are isolated per-user.</span></span> <span data-ttu-id="d8e8a-231">System Windows zapewnia, że różne konta użytkowników na tym samym komputerze nie będą miały dostępu do folderów profilu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-231">Windows ensures that different user accounts on the same machine cannot access each other's user profile folders.</span></span> <span data-ttu-id="d8e8a-232">Dwa różne konta użytkowników, którzy korzystają `User` ze `User|Roaming` sklepów lub nie będą widzieć danych nawzajem i nie mogą zakłócać działania danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-232">Two different user accounts who use the `User` or `User|Roaming` stores will not see each other's data and cannot interfere with each other's data.</span></span>

<span data-ttu-id="d8e8a-233">Trzecia lokalizacja jest udostępniana dla wszystkich kont użytkowników na komputerze.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-233">The third location is shared across all user accounts on the machine.</span></span> <span data-ttu-id="d8e8a-234">Różne konta mogą odczytywać i zapisywać dane w tej lokalizacji, a następnie mogą zobaczyć, jak się znajdują.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-234">Different accounts can read from and write to this location, and they're able to see each other's data.</span></span>

<span data-ttu-id="d8e8a-235">Powyższe ścieżki mogą się różnić w zależności od używanej wersji systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-235">The preceding paths may differ based on the version of Windows in use.</span></span>

<span data-ttu-id="d8e8a-236">Teraz Rozważmy system z obsługą dwóch użytkowników z dwoma zarejestrowanymi użytkownikami _Mallory_ i _Roberta_.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-236">Now consider a multi-user system with two registered users _Mallory_ and _Bob_.</span></span> <span data-ttu-id="d8e8a-237">Mallory ma możliwość uzyskiwania dostępu do katalogu profilu użytkownika `C:\Users\Mallory\` i może uzyskać dostęp do udostępnionej lokalizacji magazynu na całym komputerze `C:\ProgramData\IsolatedStorage\` .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-237">Mallory has the ability to access her user profile directory `C:\Users\Mallory\`, and she can access the shared machine-wide storage location `C:\ProgramData\IsolatedStorage\`.</span></span> <span data-ttu-id="d8e8a-238">Nie może uzyskać dostępu do katalogu profilu użytkownika Roberta `C:\Users\Bob\` .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-238">She cannot access Bob's user profile directory `C:\Users\Bob\`.</span></span>

<span data-ttu-id="d8e8a-239">Jeśli Mallory życzy sobie atakującej, może ona zapisywać dane w lokalizacji przechowywania w całej maszynie, a następnie próbować wpływać na odczytanie ze sklepu na całym komputerze.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-239">If Mallory wishes to attack Bob, she might write data to the machine-wide storage location, then attempt to influence Bob into reading from the machine-wide store.</span></span> <span data-ttu-id="d8e8a-240">Gdy Robert uruchamia aplikację, która odczytuje z tego magazynu, ta aplikacja będzie działać na Mallory danych umieszczonych w tym miejscu, ale w kontekście konta użytkownika Roberta.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-240">When Bob runs an app that reads from this store, that app will operate on the data Mallory placed there, but from within the context of Bob's user account.</span></span> <span data-ttu-id="d8e8a-241">W pozostałej części tego dokumentu opisano różne wektory ataków oraz czynności, które można wykonać, aby zminimalizować ryzyko związane z atakami.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-241">The remainder of this document contemplates various attack vectors and what steps apps can do to minimize their risk to these attacks.</span></span>

<span data-ttu-id="d8e8a-242">__Uwaga:__ Aby atak miał miejsce, Mallory wymaga:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-242">__Note:__ In order for such an attack to take place, Mallory requires:</span></span>

* <span data-ttu-id="d8e8a-243">Konto użytkownika na komputerze.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-243">A user account on the machine.</span></span>
* <span data-ttu-id="d8e8a-244">Możliwość umieszczenia pliku w znanej lokalizacji w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-244">The ability to place a file into a known location on the file system.</span></span>
* <span data-ttu-id="d8e8a-245">Wiedza o tym, że Robert będzie w pewnym momencie uruchamiać aplikację, która próbuje odczytać te dane.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-245">Knowledge that Bob will at some point run an app which attempts to read this data.</span></span>

<span data-ttu-id="d8e8a-246">Nie są to wektory zagrożeń, które mają zastosowanie w standardowych środowiskach klasycznych jednego użytkownika, takich jak komputery domowe lub stacje robocze przedsiębiorstwa z pojedynczym pracownikiem.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-246">These are not threat vectors which apply to standard single-user desktop environments like home PCs or single-employee enterprise workstations.</span></span>

#### <a name="elevation-of-privilege"></a><span data-ttu-id="d8e8a-247">Podniesienie uprawnień</span><span class="sxs-lookup"><span data-stu-id="d8e8a-247">Elevation of privilege</span></span>

<span data-ttu-id="d8e8a-248">__Podniesienie poziomu uprawnień__ występuje, gdy aplikacja Roberta odczytuje plik Mallory i automatycznie próbuje wykonać jakąś akcję na podstawie zawartości tego ładunku.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-248">An __elevation of privilege__ attack occurs when Bob's app reads Mallory's file and automatically tries to take some action based on the contents of that payload.</span></span> <span data-ttu-id="d8e8a-249">Rozważmy aplikację, która odczytuje zawartość skryptu uruchamiania ze sklepu dla całego komputera i przekazuje tę zawartość do programu `Process.Start` .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-249">Consider an app that reads the contents of a startup script from the machine-wide store and passes those contents to `Process.Start`.</span></span> <span data-ttu-id="d8e8a-250">Jeśli Mallory może umieścić złośliwy skrypt w sklepie dla całej maszyny, gdy Robert uruchomi swoją aplikację:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-250">If Mallory can place a malicious script inside the machine-wide store, when Bob launches his app:</span></span>

* <span data-ttu-id="d8e8a-251">Aplikacja analizuje i uruchamia złośliwy skrypt Mallory _w kontekście profilu użytkownika Roberta_.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-251">His app parses and launches Mallory's malicious script _under the context of Bob's user profile_.</span></span>
* <span data-ttu-id="d8e8a-252">Mallory uzyskuje dostęp do konta Roberta na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-252">Mallory gaines access to Bob's account on the local machine.</span></span>

#### <a name="denial-of-service"></a><span data-ttu-id="d8e8a-253">Odmowa usługi</span><span class="sxs-lookup"><span data-stu-id="d8e8a-253">Denial of service</span></span>

<span data-ttu-id="d8e8a-254">Atak __typu "odmowa usługi"__ występuje, gdy aplikacja Roberta odczytuje plik i awarie Mallory, lub w przeciwnym razie przestaje działać poprawnie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-254">A __denial of service__ attack occurs when Bob's app reads Mallory's file and crashes or otherwise stops functioning correctly.</span></span> <span data-ttu-id="d8e8a-255">Rozważ ponownie aplikację wspomnianą wcześniej, która próbuje analizować skrypt uruchamiania ze sklepu dla całego komputera.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-255">Consider again the app mentioned previously, which attempts to parse a startup script from the machine-wide store.</span></span> <span data-ttu-id="d8e8a-256">Jeśli Mallory może umieścić plik z nieprawidłowo utworzoną zawartością w sklepie dla całego komputera, może:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-256">If Mallory can place a file with malformed contents inside the machine-wide store, she might:</span></span>

* <span data-ttu-id="d8e8a-257">Przed wczesnym wyrzucaniem przez aplikację Roberta wyjątku w ścieżce początkowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-257">Cause Bob's app to throw an exception early in the startup path.</span></span>
* <span data-ttu-id="d8e8a-258">Uniemożliwiaj pomyślne uruchomienie aplikacji z powodu wyjątku.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-258">Prevent the app from launching successfully because of the exception.</span></span>

<span data-ttu-id="d8e8a-259">Następnie odmówił Roberta możliwość uruchomienia aplikacji przy użyciu własnego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-259">She has then denied Bob the ability to launch the app under his own user account.</span></span>

#### <a name="information-disclosure"></a><span data-ttu-id="d8e8a-260">Ujawnienie informacji</span><span class="sxs-lookup"><span data-stu-id="d8e8a-260">Information disclosure</span></span>

<span data-ttu-id="d8e8a-261">Atak z __ujawnianiem informacji__ występuje, gdy Mallory może dowiedzieć się, jak wycofać zawartość pliku, do którego Mallory zwykle nie ma dostępu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-261">An __information disclosure__ attack occurs when Mallory can trick Bob into disclosing the contents of a file that Mallory does not normally have access to.</span></span> <span data-ttu-id="d8e8a-262">Należy wziąć pod uwagę, że Robert ma plik tajny *C:\Users\Bob\secret.txt* Mallory.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-262">Consider that Bob has a secret file *C:\Users\Bob\secret.txt* that Mallory wants to read.</span></span> <span data-ttu-id="d8e8a-263">Zna ścieżkę do tego pliku, ale nie może go odczytać, ponieważ system Windows zabrania sobie dostępu do katalogu profilu użytkownika Roberta.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-263">She knows the path to this file, but she cannot read it because Windows forbids her from gaining access to Bob's user profile directory.</span></span>

<span data-ttu-id="d8e8a-264">Zamiast tego Mallory umieszcza twarde łącze w sklepie dla całego komputera.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-264">Instead, Mallory places a hard link into the machine-wide store.</span></span> <span data-ttu-id="d8e8a-265">Jest to specjalny rodzaj pliku, który nie zawiera żadnej zawartości, a nie wskazuje na inny plik na dysku.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-265">This is a special kind of file that itself does not contain any contents, rather, it points to another file on disk.</span></span> <span data-ttu-id="d8e8a-266">Próba odczytania pliku linku twardego spowoduje odczytanie zawartości pliku, którego dotyczy link.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-266">Attempting to read the hard link file will instead read the contents of the file targeted by the link.</span></span> <span data-ttu-id="d8e8a-267">Po utworzeniu twardego linku Mallory nadal nie można odczytać zawartości pliku, ponieważ nie ma dostępu do elementu docelowego ( `C:\Users\Bob\secret.txt` ) łącza.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-267">After creating the hard link, Mallory still cannot read the file contents because she does not have access to the target (`C:\Users\Bob\secret.txt`) of the link.</span></span> <span data-ttu-id="d8e8a-268">Jednak _Robert ma_ dostęp do tego pliku.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-268">However, Bob _does_ have access to this file.</span></span>

<span data-ttu-id="d8e8a-269">Gdy aplikacja Roberta odczytuje dane ze sklepu na całym komputerze, teraz przypadkowo odczytuje zawartość `secret.txt` pliku, podobnie jak w przypadku, gdy sam plik był obecny w sklepie dla całego komputera.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-269">When Bob's app reads from the machine-wide store, it now inadvertently reads the contents of his `secret.txt` file, just as if the file itself had been present in the machine-wide store.</span></span> <span data-ttu-id="d8e8a-270">Gdy aplikacja Roberta zostanie zakończona, jeśli spróbuje ponownie zapisać plik w sklepie dla całego komputera, spowoduje to zakończenie umieszczania rzeczywistej kopii pliku w katalogu \* C:\ProgramData\IsolatedStorage \* .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-270">When Bob's app exits, if it attempts to resave the file to the machine-wide store, it will end up placing an actual copy of the file in the \*C:\ProgramData\IsolatedStorage\* directory.</span></span> <span data-ttu-id="d8e8a-271">Ponieważ ten katalog jest odczytywany przez dowolnego użytkownika na komputerze, Mallory może teraz odczytać zawartość pliku.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-271">Since this directory is readable by any user on the machine, Mallory can now read the contents of the file.</span></span>

### <a name="best-practices-to-defend-against-these-attacks"></a><span data-ttu-id="d8e8a-272">Najlepsze rozwiązania dotyczące obrony przed atakami</span><span class="sxs-lookup"><span data-stu-id="d8e8a-272">Best practices to defend against these attacks</span></span>

<span data-ttu-id="d8e8a-273">__Ważne:__ Jeśli środowisko ma wielu niezaufanych użytkowników, nie wywołuj interfejsu API ani __nie__ `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` Wywołaj tego narzędzia `storeadm.exe /machine /list` .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-273">__Important:__ If your environment has multiple mutually untrusted users, __do not__ call the API `IsolatedStorageFile.GetEnumerator(IsolatedStorageScope.Machine)` or invoke the tool `storeadm.exe /machine /list`.</span></span> <span data-ttu-id="d8e8a-274">Oba te założono, że działają na zaufanych danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-274">Both of these assume that they're operating on trusted data.</span></span> <span data-ttu-id="d8e8a-275">Jeśli osoba atakująca może obsłużyć złośliwy ładunek w sklepie dla całego komputera, ten ładunek może prowadzić do podniesienia uprawnień w kontekście użytkownika, który uruchamia te polecenia.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-275">If an attacker can seed a malicious payload in the machine-wide store, that payload can lead to an elevation of privilege attack under the context of the user who runs these commands.</span></span>

<span data-ttu-id="d8e8a-276">Jeśli działa w środowisku z obsługą kilku użytkowników, należy rozważyć użycie izolowanych funkcji magazynu, które są ukierunkowane na zakres _maszyn_ .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-276">If operating in a multi-user environment, reconsider use of isolated storage features which target the _Machine_ scope.</span></span> <span data-ttu-id="d8e8a-277">Jeśli aplikacja musi odczytywać dane z lokalizacji w całej maszynie, wolisz odczytywać dane z lokalizacji, która jest tylko do zapisu na kontach administratorów.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-277">If an app must read data from a machine-wide location, prefer to read the data from a location that are writable only by admin accounts.</span></span> <span data-ttu-id="d8e8a-278">`%PROGRAMFILES%`Katalog i `HKLM` gałąź rejestru to przykłady lokalizacji zapisywalnych przez administratorów i odczytywane przez wszystkich użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-278">The `%PROGRAMFILES%` directory and the `HKLM` registry hive are examples of locations which are writable by only administrators and readable by everyone.</span></span> <span data-ttu-id="d8e8a-279">Dane odczytane z tych lokalizacji są uważane za wiarygodne.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-279">Data read from those locations is therefore considered trustworthy.</span></span>

<span data-ttu-id="d8e8a-280">Jeśli aplikacja musi używać zakresu _maszyn_ w środowisku wielu użytkowników, zweryfikuj zawartość dowolnego pliku odczytywanego ze sklepu dla całego komputera.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-280">If an app must use the _Machine_ scope in a multi-user environment, validate the contents of any file that you read from the machine-wide store.</span></span> <span data-ttu-id="d8e8a-281">Jeśli aplikacja odserializacja grafów obiektów z tych plików, rozważ użycie bezpieczniejszych serializacji, takich jak `XmlSerializer` zamiast niebezpiecznych serializatorów, takich jak `BinaryFormatter` lub `NetDataContractSerializer` .</span><span class="sxs-lookup"><span data-stu-id="d8e8a-281">If the app deserializing object graphs from these files, consider using safer serializers like `XmlSerializer` instead of dangerous serializers like `BinaryFormatter` or `NetDataContractSerializer`.</span></span> <span data-ttu-id="d8e8a-282">Należy zachować ostrożność przy użyciu głęboko zagnieżdżonych wykresów obiektów lub grafów obiektów, które wykonują alokację zasobów na podstawie zawartości pliku.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-282">Use caution with deeply nested object graphs or object graphs which perform resource allocation based on the file contents.</span></span>

<a name="isolated_storage_locations"></a>

## <a name="isolated-storage-locations"></a><span data-ttu-id="d8e8a-283">Lokalizacje izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-283">Isolated Storage Locations</span></span>

<span data-ttu-id="d8e8a-284">Czasami jest ono pomocne podczas weryfikowania zmiany w wydzielonej pamięci masowej za pomocą systemu plików systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-284">Sometimes it is helpful to verify a change to isolated storage by using the file system of the operating system.</span></span> <span data-ttu-id="d8e8a-285">Czasami mogą być też potrzebne informacje o lokalizacji plików wydzielonej pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-285">You might also want to know the location of isolated storage files.</span></span> <span data-ttu-id="d8e8a-286">Ta lokalizacja zmienia się w zależności od systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-286">This location is different depending on the operating system.</span></span> <span data-ttu-id="d8e8a-287">W poniższej tabeli pokazano główne lokalizacje w najbardziej popularnych systemach operacyjnych, w których jest tworzona wydzielona pamięć masowa.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-287">The following table shows the root locations where isolated storage is created on a few common operating systems.</span></span> <span data-ttu-id="d8e8a-288">Znajdź katalogi Microsoft\IsolatedStorage w tej lokalizacji głównej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-288">Look for Microsoft\IsolatedStorage directories under this root location.</span></span> <span data-ttu-id="d8e8a-289">Musisz zmienić ustawienia folderów, aby wyświetlać ukryte pliki i foldery, co umożliwi zobaczenie wydzielonej pamięci masowej w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-289">You must change folder settings to show hidden files and folders in order to see isolated storage in the file system.</span></span>

|<span data-ttu-id="d8e8a-290">System operacyjny</span><span class="sxs-lookup"><span data-stu-id="d8e8a-290">Operating system</span></span>|<span data-ttu-id="d8e8a-291">Lokalizacja w systemie plików</span><span class="sxs-lookup"><span data-stu-id="d8e8a-291">Location in file system</span></span>|
|----------------------|-----------------------------|
|<span data-ttu-id="d8e8a-292">Windows 2000, Windows XP, Windows Server 2003 (uaktualnienie z systemu Windows NT 4.0)</span><span class="sxs-lookup"><span data-stu-id="d8e8a-292">Windows 2000, Windows XP, Windows Server 2003  (upgrade from Windows NT 4.0)</span></span>|<span data-ttu-id="d8e8a-293">Magazyny z obsługą roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-293">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-294">\<SYSTEMROOT>\Profiles \\<użytkownik \> \Dane danych</span><span class="sxs-lookup"><span data-stu-id="d8e8a-294">\<SYSTEMROOT>\Profiles\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="d8e8a-295">Magazyny bez obsługi roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-295">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-296">\<SYSTEMROOT>\Profiles \\<użytkownik \> \Ustawienia lokalne\Dane</span><span class="sxs-lookup"><span data-stu-id="d8e8a-296">\<SYSTEMROOT>\Profiles\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="d8e8a-297">Windows 2000 — czysta instalacja (oraz uaktualnienia z systemu Windows 98 i Windows NT 3.51)</span><span class="sxs-lookup"><span data-stu-id="d8e8a-297">Windows 2000  - clean installation (and upgrades from Windows 98 and Windows NT 3.51)</span></span>|<span data-ttu-id="d8e8a-298">Magazyny z obsługą roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-298">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-299">\<SYSTEMDRIVE>\Dokumenty i ustawienia \\<użytkownik \> \Dane danych</span><span class="sxs-lookup"><span data-stu-id="d8e8a-299">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="d8e8a-300">Magazyny bez obsługi roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-300">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-301">\<SYSTEMDRIVE>\Documents and Settings \\<użytkownika \> \Ustawienia Lokalne\dane — dane</span><span class="sxs-lookup"><span data-stu-id="d8e8a-301">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="d8e8a-302">Windows XP, Windows Server 2003 — czysta instalacja (i uaktualnienia z systemu Windows 2000 i Windows 98)</span><span class="sxs-lookup"><span data-stu-id="d8e8a-302">Windows XP, Windows Server 2003 - clean installation (and upgrades from Windows 2000 and Windows 98)</span></span>|<span data-ttu-id="d8e8a-303">Magazyny z obsługą roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-303">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-304">\<SYSTEMDRIVE>\Dokumenty i ustawienia \\<użytkownik \> \Dane danych</span><span class="sxs-lookup"><span data-stu-id="d8e8a-304">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Application Data</span></span><br /><br /> <span data-ttu-id="d8e8a-305">Magazyny bez obsługi roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-305">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-306">\<SYSTEMDRIVE>\Documents and Settings \\<użytkownika \> \Ustawienia Lokalne\dane — dane</span><span class="sxs-lookup"><span data-stu-id="d8e8a-306">\<SYSTEMDRIVE>\Documents and Settings\\<user\>\Local Settings\Application Data</span></span>|
|<span data-ttu-id="d8e8a-307">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span><span class="sxs-lookup"><span data-stu-id="d8e8a-307">Windows 8, Windows 7, Windows Server 2008, Windows Vista</span></span>|<span data-ttu-id="d8e8a-308">Magazyny z obsługą roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-308">Roaming-enabled stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-309">\<SYSTEMDRIVE>\Users \\<użytkownika \> \AppData\Roaming</span><span class="sxs-lookup"><span data-stu-id="d8e8a-309">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Roaming</span></span><br /><br /> <span data-ttu-id="d8e8a-310">Magazyny bez obsługi roamingu =</span><span class="sxs-lookup"><span data-stu-id="d8e8a-310">Nonroaming stores =</span></span><br /><br /> <span data-ttu-id="d8e8a-311">\<SYSTEMDRIVE>\Users \\<użytkownika \> \AppData\Local</span><span class="sxs-lookup"><span data-stu-id="d8e8a-311">\<SYSTEMDRIVE>\Users\\<user\>\AppData\Local</span></span>|

<a name="isolated_storage_tasks"></a>

## <a name="creating-enumerating-and-deleting-isolated-storage"></a><span data-ttu-id="d8e8a-312">Tworzenia, wyliczania i usuwania izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-312">Creating, Enumerating, and Deleting Isolated Storage</span></span>

<span data-ttu-id="d8e8a-313">.NET Framework zawiera trzy klasy w <xref:System.IO.IsolatedStorage> przestrzeni nazw, które ułatwiają wykonywanie zadań obejmujących izolowany magazyn:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-313">The .NET Framework provides three classes in the <xref:System.IO.IsolatedStorage> namespace to help you perform tasks that involve isolated storage:</span></span>

- <span data-ttu-id="d8e8a-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, pochodzi z <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> i zapewnia podstawowe zarządzanie przechowywanymi plikami zestawu i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-314"><xref:System.IO.IsolatedStorage.IsolatedStorageFile>, derives from <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType> and provides basic management of stored assembly and application files.</span></span> <span data-ttu-id="d8e8a-315">Wystąpienie <xref:System.IO.IsolatedStorage.IsolatedStorageFile> klasy reprezentuje pojedynczy magazyn znajdujący się w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-315">An instance of the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class represents a single store located in the file system.</span></span>

- <span data-ttu-id="d8e8a-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream>pochodzi z <xref:System.IO.FileStream?displayProperty=nameWithType> i zapewnia dostęp do plików w sklepie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-316"><xref:System.IO.IsolatedStorage.IsolatedStorageFileStream> derives from <xref:System.IO.FileStream?displayProperty=nameWithType> and provides access to the files in a store.</span></span>

- <span data-ttu-id="d8e8a-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope>jest wyliczeniem umożliwiającym tworzenie i wybieranie magazynu z odpowiednim typem izolacji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-317"><xref:System.IO.IsolatedStorage.IsolatedStorageScope> is an enumeration that enables you to create and select a store with the appropriate isolation type.</span></span>

<span data-ttu-id="d8e8a-318">Klasy wydzielonej pamięci masowej umożliwiają tworzenie, wyliczanie oraz usuwanie wydzielonej pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-318">The isolated storage classes enable you to create, enumerate, and delete isolated storage.</span></span> <span data-ttu-id="d8e8a-319">Metody wykonywania tych zadań są dostępne za pomocą <xref:System.IO.IsolatedStorage.IsolatedStorageFile> obiektu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-319">The methods for performing these tasks are available through the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> object.</span></span> <span data-ttu-id="d8e8a-320">Niektóre operacje wymagają posiadania <xref:System.Security.Permissions.IsolatedStorageFilePermission> uprawnienia, które reprezentuje prawo do administrowania izolowanym magazynem. może być również konieczne posiadanie praw systemu operacyjnego w celu uzyskania dostępu do pliku lub katalogu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-320">Some operations require you to have the <xref:System.Security.Permissions.IsolatedStorageFilePermission> permission that represents the right to administer isolated storage; you might also need to have operating system rights to access the file or directory.</span></span>

<span data-ttu-id="d8e8a-321">Aby uzyskać szereg przykładów demonstrujących typowe zadania magazynu izolowanego, zapoznaj się z tematami podanymi w [tematach pokrewnych](#related_topics).</span><span class="sxs-lookup"><span data-stu-id="d8e8a-321">For a series of examples that demonstrate common isolated storage tasks, see the how-to topics listed in [Related Topics](#related_topics).</span></span>

<a name="scenarios_for_isolated_storage"></a>

## <a name="scenarios-for-isolated-storage"></a><span data-ttu-id="d8e8a-322">Scenariusze izolowanych magazynów</span><span class="sxs-lookup"><span data-stu-id="d8e8a-322">Scenarios for Isolated Storage</span></span>

<span data-ttu-id="d8e8a-323">Wydzielona pamięć masowa jest przydatna w wielu sytuacjach, włączając w to następujące cztery scenariusze:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-323">Isolated storage is useful in many situations, including these four scenarios:</span></span>

- <span data-ttu-id="d8e8a-324">Pobrane formanty.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-324">Downloaded controls.</span></span> <span data-ttu-id="d8e8a-325">Formanty kodu zarządzanego pobrane z Internetu nie mogą wykonywać operacji zapisu na dysku twardym za pośrednictwem zwykłych klas We/Wy, ale mogą używać wydzielonej pamięci masowej w celu utrwalania stanów aplikacji i ustawień użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-325">Managed code controls downloaded from the Internet are not allowed to write to the hard drive through normal I/O classes, but they can use isolated storage to persist users' settings and application states.</span></span>

- <span data-ttu-id="d8e8a-326">Magazyn składników współużytkowanych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-326">Shared component storage.</span></span> <span data-ttu-id="d8e8a-327">Składniki współużytkowane przez różne aplikacje mogą używać wydzielonej pamięci masowej, aby umożliwiać kontrolowany dostęp do danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-327">Components that are shared between applications can use isolated storage to provide controlled access to data stores.</span></span>

- <span data-ttu-id="d8e8a-328">Magazyn na serwerze.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-328">Server storage.</span></span> <span data-ttu-id="d8e8a-329">Aplikacje serwerowe mogą używać wydzielonej pamięci masowej, aby dostarczać indywidualne magazyny wielu użytkownikom wysyłającym żądania do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-329">Server applications can use isolated storage to provide individual stores for a large number of users making requests to the application.</span></span> <span data-ttu-id="d8e8a-330">Ponieważ wydzielona pamięć masowa zawsze jest segregowana według użytkowników, serwer musi dokonać personifikacji użytkownika zgłaszającego żądanie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-330">Because isolated storage is always segregated by user, the server must impersonate the user making the request.</span></span> <span data-ttu-id="d8e8a-331">W takim przypadku dane są izolowane na podstawie tożsamości podmiotu zabezpieczeń, która jest tą samą tożsamością, której aplikacja używa do rozróżniania między użytkownikami.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-331">In this case, data is isolated based on the identity of the principal, which is the same identity the application uses to distinguish between its users.</span></span>

- <span data-ttu-id="d8e8a-332">Roaming.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-332">Roaming.</span></span> <span data-ttu-id="d8e8a-333">Aplikacje mogą również używać wydzielonej pamięci masowej z mobilnymi profilami użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-333">Applications can also use isolated storage with roaming user profiles.</span></span> <span data-ttu-id="d8e8a-334">Dzięki temu użytkownik może uzyskiwać mobilny dostęp do swoich izolowanych magazynów, używając profilu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-334">This allows a user's isolated stores to roam with the profile.</span></span>

<span data-ttu-id="d8e8a-335">Wydzielonej pamięci masowej nie należy używać w następujących sytuacjach:</span><span class="sxs-lookup"><span data-stu-id="d8e8a-335">You should not use isolated storage in the following situations:</span></span>

- <span data-ttu-id="d8e8a-336">Do przechowywania tajemnic o wysokiej wartości, takich jak niezaszyfrowane klucze lub hasła, ponieważ wydzielona pamięć masowa nie jest chroniona przed wysoce zaufanym kodem, kodem niezarządzanym oraz zaufanymi użytkownikami komputera.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-336">To store high-value secrets, such as unencrypted keys or passwords, because isolated storage is not protected from highly trusted code, from unmanaged code, or from trusted users of the computer.</span></span>

- <span data-ttu-id="d8e8a-337">Do przechowywania kodu.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-337">To store code.</span></span>

- <span data-ttu-id="d8e8a-338">Do przechowywania ustawień konfiguracji i wdrażania kontrolowanych przez administratorów.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-338">To store configuration and deployment settings, which administrators control.</span></span> <span data-ttu-id="d8e8a-339">(Preferencje użytkownika nie są uważane za ustawienia konfiguracji, ponieważ administratorzy nie mają kontroli nad nimi).</span><span class="sxs-lookup"><span data-stu-id="d8e8a-339">(User preferences are not considered to be configuration settings because administrators do not control them.)</span></span>

<span data-ttu-id="d8e8a-340">Wiele aplikacji używa bazy danych do przechowywania i izolowania danych; w takim przypadku jeden lub większa liczba wierszy w bazie danych może reprezentować pamięć masową dla określonego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-340">Many applications use a database to store and isolate data, in which case one or more rows in a database might represent storage for a specific user.</span></span> <span data-ttu-id="d8e8a-341">Można użyć wydzielonej pamięci masowej zamiast bazy danych, gdy liczba użytkowników jest mała, gdy obciążenie związane z użyciem bazy danych jest znaczące lub gdy nie istnieje infrastruktura baz danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-341">You might choose to use isolated storage instead of a database when the number of users is small, when the overhead of using a database is significant, or when no database facility exists.</span></span> <span data-ttu-id="d8e8a-342">Również gdy aplikacja wymaga pamięci masowej, która będzie bardziej elastyczna oraz złożona niż to, co oferuje wiersz w bazie danych, wydzielona pamięć masowa może być wartą rozważenia alternatywą.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-342">Also, when the application requires storage that is more flexible and complex than what a row in a database provides, isolated storage can provide a viable alternative.</span></span>

<a name="related_topics"></a>

## <a name="related-topics"></a><span data-ttu-id="d8e8a-343">Tematy pokrewne</span><span class="sxs-lookup"><span data-stu-id="d8e8a-343">Related Topics</span></span>

|<span data-ttu-id="d8e8a-344">Tytuł</span><span class="sxs-lookup"><span data-stu-id="d8e8a-344">Title</span></span>|<span data-ttu-id="d8e8a-345">Opis</span><span class="sxs-lookup"><span data-stu-id="d8e8a-345">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="d8e8a-346">Typy izolacji</span><span class="sxs-lookup"><span data-stu-id="d8e8a-346">Types of Isolation</span></span>](types-of-isolation.md)|<span data-ttu-id="d8e8a-347">Opis różnych typów izolacji.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-347">Describes the different types of isolation.</span></span>|
|[<span data-ttu-id="d8e8a-348">Instrukcje: Uzyskiwanie magazynów dla izolowanego magazynu</span><span class="sxs-lookup"><span data-stu-id="d8e8a-348">How to: Obtain Stores for Isolated Storage</span></span>](how-to-obtain-stores-for-isolated-storage.md)|<span data-ttu-id="d8e8a-349">Stanowi przykład użycia <xref:System.IO.IsolatedStorage.IsolatedStorageFile> klasy w celu uzyskania magazynu izolowanego przez użytkownika i zestaw.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-349">Provides an example of using the <xref:System.IO.IsolatedStorage.IsolatedStorageFile> class to obtain a store isolated by user and assembly.</span></span>|
|[<span data-ttu-id="d8e8a-350">Instrukcje: Wykazywanie magazynów dla izolowanego magazynu</span><span class="sxs-lookup"><span data-stu-id="d8e8a-350">How to: Enumerate Stores for Isolated Storage</span></span>](how-to-enumerate-stores-for-isolated-storage.md)|<span data-ttu-id="d8e8a-351">Pokazuje, w jaki sposób używać <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> metody do obliczania rozmiaru całego izolowanego magazynu dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-351">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.GetEnumerator%2A?displayProperty=nameWithType> method to calculate the size of all isolated storage for the user.</span></span>|
|[<span data-ttu-id="d8e8a-352">Instrukcje: Usuwanie danych z izolowanego magazynu</span><span class="sxs-lookup"><span data-stu-id="d8e8a-352">How to: Delete Stores in Isolated Storage</span></span>](how-to-delete-stores-in-isolated-storage.md)|<span data-ttu-id="d8e8a-353">Pokazuje, jak używać <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> metody na dwa różne sposoby usuwania izolowanych sklepów.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-353">Shows how to use the <xref:System.IO.IsolatedStorage.IsolatedStorageFile.Remove%2A?displayProperty=nameWithType> method in two different ways to delete isolated stores.</span></span>|
|[<span data-ttu-id="d8e8a-354">Instrukcje: Przewidywanie warunków braku miejsca w izolowanym magazynie</span><span class="sxs-lookup"><span data-stu-id="d8e8a-354">How to: Anticipate Out-of-Space Conditions with Isolated Storage</span></span>](how-to-anticipate-out-of-space-conditions-with-isolated-storage.md)|<span data-ttu-id="d8e8a-355">Opis sposobu mierzenia ilości pozostałego miejsca w izolowanym magazynie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-355">Shows how to measure the remaining space in an isolated store.</span></span>|
|[<span data-ttu-id="d8e8a-356">Instrukcje: Tworzenie plików i katalogów w izolowanym magazynie</span><span class="sxs-lookup"><span data-stu-id="d8e8a-356">How to: Create Files and Directories in Isolated Storage</span></span>](how-to-create-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="d8e8a-357">Przykłady tworzenia plików i katalogów w izolowanym magazynie.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-357">Provides some examples of creating files and directories in an isolated store.</span></span>|
|[<span data-ttu-id="d8e8a-358">Instrukcje: Wyszukiwanie istniejących plików i katalogów w izolowanym magazynie</span><span class="sxs-lookup"><span data-stu-id="d8e8a-358">How to: Find Existing Files and Directories in Isolated Storage</span></span>](how-to-find-existing-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="d8e8a-359">Opis sposobu odczytywania struktury katalogów i plików w wydzielonej pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-359">Demonstrates how to read the directory structure and files in isolated storage.</span></span>|
|[<span data-ttu-id="d8e8a-360">Instrukcje: Odczyt i zapis w plikach w izolowanym magazynie</span><span class="sxs-lookup"><span data-stu-id="d8e8a-360">How to: Read and Write to Files in Isolated Storage</span></span>](how-to-read-and-write-to-files-in-isolated-storage.md)|<span data-ttu-id="d8e8a-361">Przykład zapisywania ciągu w pliku w wydzielonej pamięci masowej i odczytywania go z powrotem.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-361">Provides an example of writing a string to an isolated storage file and reading it back.</span></span>|
|[<span data-ttu-id="d8e8a-362">Instrukcje: Usuwanie plików i katalogów w izolowanym magazynie</span><span class="sxs-lookup"><span data-stu-id="d8e8a-362">How to: Delete Files and Directories in Isolated Storage</span></span>](how-to-delete-files-and-directories-in-isolated-storage.md)|<span data-ttu-id="d8e8a-363">Opis sposobu usuwania plików i katalogów wydzielonej pamięci masowej.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-363">Demonstrates how to delete isolated storage files and directories.</span></span>|
|[<span data-ttu-id="d8e8a-364">We/wy plików i strumieni</span><span class="sxs-lookup"><span data-stu-id="d8e8a-364">File and Stream I/O</span></span>](index.md)|<span data-ttu-id="d8e8a-365">Opis sposobu synchronicznego i asynchronicznego uzyskiwania dostępu do pliku i strumienia danych.</span><span class="sxs-lookup"><span data-stu-id="d8e8a-365">Explains how you can perform synchronous and asynchronous file and data stream access.</span></span>|

<a name="reference"></a>

## <a name="reference"></a><span data-ttu-id="d8e8a-366">Tematy pomocy</span><span class="sxs-lookup"><span data-stu-id="d8e8a-366">Reference</span></span>

- <xref:System.IO.IsolatedStorage.IsolatedStorage?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFile?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageFileStream?displayProperty=nameWithType>

- <xref:System.IO.IsolatedStorage.IsolatedStorageScope?displayProperty=nameWithType>
