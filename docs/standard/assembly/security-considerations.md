---
title: Zagadnienia dotyczące zabezpieczeń zestawów
description: Podczas kompilowania zestawu .NET można określić uprawnienia wymagane przez zestaw do uruchomienia. W tym artykule omówiono zestawy o silnych nazwach i narzędzia podpisywania.
ms.date: 08/20/2019
helpviewer_keywords:
- assemblies [.NET], security
- signcodes
- names [.NET], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET], signing
- granting permissions, assemblies
- assemblies [.NET], strong-named
- names [.NET], strong names
- permissions [.NET], assemblies
- security [.NET], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
ms.openlocfilehash: 91ea206abf80da275651854b9f13aa0116b7a1c5
ms.sourcegitcommit: 279fb6e8d515df51676528a7424a1df2f0917116
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/27/2020
ms.locfileid: "92687260"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="994f0-104">Zagadnienia dotyczące zabezpieczeń zestawów</span><span class="sxs-lookup"><span data-stu-id="994f0-104">Assembly security considerations</span></span>

<span data-ttu-id="994f0-105">Podczas kompilowania zestawu można określić zestaw uprawnień wymaganych do uruchomienia zestawu.</span><span class="sxs-lookup"><span data-stu-id="994f0-105">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="994f0-106">To, czy określone uprawnienia są przyznane do zestawu, czy nie, zależy od dowodów.</span><span class="sxs-lookup"><span data-stu-id="994f0-106">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="994f0-107">Istnieją dwa wyraźnie różniące się sposoby używania dowodów:</span><span class="sxs-lookup"><span data-stu-id="994f0-107">There are two distinct ways evidence is used:</span></span>  
  
- <span data-ttu-id="994f0-108">Dowód wejściowy jest scalany z dowodami zebranymi przez moduł ładujący w celu utworzenia ostatecznego zestawu dowodów stosowanego do rozpoznawania zasad.</span><span class="sxs-lookup"><span data-stu-id="994f0-108">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="994f0-109">Metody używające tej semantyki obejmują **Assembly. Load** , **Assembly. LoadFrom** i **aktywator. CreateInstance** .</span><span class="sxs-lookup"><span data-stu-id="994f0-109">The methods that use this semantic include **Assembly.Load** , **Assembly.LoadFrom** , and **Activator.CreateInstance** .</span></span>  
  
- <span data-ttu-id="994f0-110">Dowód wejściowy jest używany w niezmienionej formie jako ostateczny zestaw dowodów stosowanych do rozpoznawania zasad.</span><span class="sxs-lookup"><span data-stu-id="994f0-110">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="994f0-111">Metody używające tej semantyki obejmują **zestaw. Load (Byte [])** i **AppDomain. DefineDynamicAssembly ()** .</span><span class="sxs-lookup"><span data-stu-id="994f0-111">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()** .</span></span>  
  
  <span data-ttu-id="994f0-112">Uprawnienia opcjonalne mogą być przyznawane [zasadom zabezpieczeń](../../framework/misc/code-access-security-basics.md) ustawionym na komputerze, na którym zostanie uruchomiony zestaw.</span><span class="sxs-lookup"><span data-stu-id="994f0-112">Optional permissions can be granted by the [security policy](../../framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="994f0-113">Jeśli kod ma obsługiwać wszystkie potencjalne wyjątki zabezpieczeń, można wykonać jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="994f0-113">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
- <span data-ttu-id="994f0-114">Wstawić żądania o uprawnienia dla wszystkich uprawnień, których wymaga kod, oraz obsługiwać z wyprzedzeniem niepowodzenia w czasie ładowania, które występują w razie nieprzyznania uprawnień.</span><span class="sxs-lookup"><span data-stu-id="994f0-114">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
- <span data-ttu-id="994f0-115">W celu uzyskania uprawnień wymaganych przez kod nie używać żądań o uprawnienia, ale przygotować się na obsługę wyjątków zabezpieczeń w razie nieprzyznania uprawnień.</span><span class="sxs-lookup"><span data-stu-id="994f0-115">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
  > [!NOTE]
  > <span data-ttu-id="994f0-116">Zabezpieczenia to skomplikowana dziedzina, w której istnieje wiele opcji do wyboru.</span><span class="sxs-lookup"><span data-stu-id="994f0-116">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="994f0-117">Aby uzyskać więcej informacji, zobacz podstawowe [pojęcia dotyczące zabezpieczeń](../security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="994f0-117">For more information, see [Key Security Concepts](../security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="994f0-118">Podczas ładowania dowód zestawu jest wykorzystywany jako dane wejściowe dla zasad zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="994f0-118">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="994f0-119">Zasady zabezpieczeń są ustalane przez przedsiębiorstwo i administratora komputera, a także przez ustawienia zasad użytkownika. Określają one zestaw uprawnień przydzielanych całemu zarządzanemu kodowi podczas wykonywania.</span><span class="sxs-lookup"><span data-stu-id="994f0-119">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="994f0-120">Zasady zabezpieczeń można ustanowić dla wydawcy zestawu (jeśli ma on podpis wygenerowany przez narzędzie do podpisywania), dla witryny internetowej i strefy (w znaczeniu używanym w programie Internet Explorer), z której zestaw został pobrany, lub dla silnej nazwy zestawu.</span><span class="sxs-lookup"><span data-stu-id="994f0-120">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="994f0-121">Na przykład administrator komputera może ustanowić zasady zabezpieczeń, które pozwalają, aby kod pobrany z witryny internetowej i podpisany przez producenta danego oprogramowania miał dostęp do bazy danych na komputerze, ale nie przyznają dostępu umożliwiającego zapis na dysku komputera.</span><span class="sxs-lookup"><span data-stu-id="994f0-121">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="994f0-122">Zestawy o silnych nazwach i narzędzia podpisywania</span><span class="sxs-lookup"><span data-stu-id="994f0-122">Strong-named assemblies and signing tools</span></span>  

 > [!WARNING]
 > <span data-ttu-id="994f0-123">Nie należy polegać na silnych nazwach zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="994f0-123">Do not rely on strong names for security.</span></span> <span data-ttu-id="994f0-124">Zapewniają one tylko unikatową tożsamość.</span><span class="sxs-lookup"><span data-stu-id="994f0-124">They provide a unique identity only.</span></span>

 <span data-ttu-id="994f0-125">Zestaw można podpisać na dwa różne, ale uzupełniające sposoby: za pomocą silnej nazwy lub przy użyciu  [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="994f0-125">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="994f0-126">Podpisywanie zestawu o silnej nazwie dodaje szyfrowanie klucza publicznego do pliku zawierającego manifest zestawu.</span><span class="sxs-lookup"><span data-stu-id="994f0-126">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="994f0-127">Podpisywanie za pomocą silnej nazwy pomaga zweryfikować unikatowość nazwy, zapobiec podszywaniu się pod nazwę oraz dostarczyć obiektom wywołującym jakąś tożsamość podczas rozpoznawania odwołań.</span><span class="sxs-lookup"><span data-stu-id="994f0-127">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="994f0-128">Żaden poziom zaufania nie jest skojarzony z silną nazwą, co sprawia, że [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md) ważne.</span><span class="sxs-lookup"><span data-stu-id="994f0-128">No level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="994f0-129">Te dwa narzędzia podpisywania wymagają, aby wydawca potwierdził swoją tożsamość wobec zewnętrznego urzędu i uzyskał certyfikat.</span><span class="sxs-lookup"><span data-stu-id="994f0-129">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="994f0-130">Certyfikat jest następnie osadzany w pliku i na jego podstawie administrator może decydować, czy ufa autentyczności kodu.</span><span class="sxs-lookup"><span data-stu-id="994f0-130">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="994f0-131">Można utworzyć silną nazwę i podpis cyfrowy utworzony przy użyciu [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md) do zestawu lub użyć dowolnego z nich.</span><span class="sxs-lookup"><span data-stu-id="994f0-131">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="994f0-132">Oba narzędzia podpisywania mogą podpisywać tylko jeden plik jednocześnie. W przypadku zestawu wieloplikowego podpisuje się plik zawierający manifest zestawu.</span><span class="sxs-lookup"><span data-stu-id="994f0-132">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="994f0-133">Silna nazwa jest przechowywana w pliku zawierającym manifest zestawu, ale sygnatura utworzona przy użyciu [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md) jest przechowywana w zastrzeżonym miejscu w przenośnym pliku wykonywalnym (PE) zawierającym manifest zestawu.</span><span class="sxs-lookup"><span data-stu-id="994f0-133">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="994f0-134">Podpisywanie zestawu przy użyciu [SignTool.exe (narzędzia podpisywania)](../../framework/tools/signtool-exe.md) może być używane (z silną nazwą lub bez niej), gdy istnieje już Hierarchia zaufania, która opiera się na wygenerowanych sygnaturach [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md) lub gdy zasady korzystają tylko z części klucza i nie sprawdzają łańcucha zaufania.</span><span class="sxs-lookup"><span data-stu-id="994f0-134">Signing of an assembly using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="994f0-135">Jeśli do zestawu ma być stosowana silna nazwa i podpis z narzędzia podpisywania, najpierw należy przypisać silną nazwę.</span><span class="sxs-lookup"><span data-stu-id="994f0-135">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="994f0-136">Środowisko uruchomieniowe języka wspólnego również dokonuje weryfikacji skrótu. Manifest zestawu zawiera listę wszystkich plików tworzących zestaw, a także skrót każdego pliku utworzony podczas kompilowania manifestu.</span><span class="sxs-lookup"><span data-stu-id="994f0-136">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="994f0-137">Przy wczytywaniu każdego pliku jego wartość jest skracana i porównywana z wartością skrótu przechowywaną w manifeście.</span><span class="sxs-lookup"><span data-stu-id="994f0-137">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="994f0-138">Jeśli skróty różnią się od siebie, zestaw nie jest wczytywany.</span><span class="sxs-lookup"><span data-stu-id="994f0-138">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="994f0-139">Ponieważ silne nazewnictwo i podpisywanie przy użyciu [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md) gwarantuje integralność, zasady zabezpieczeń dostępu kodu można oprzeć na tych dwóch formach dowodu zestawu.</span><span class="sxs-lookup"><span data-stu-id="994f0-139">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="994f0-140">Silne nazewnictwo i podpisywanie przy użyciu [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md) gwarantuje integralność dzięki podpisom cyfrowym i certyfikatom.</span><span class="sxs-lookup"><span data-stu-id="994f0-140">Strong naming and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="994f0-141">Wszystkie wymienione technologie — weryfikacja skrótu, silne nazewnictwo i podpisywanie przy użyciu [SignTool.exe (Narzędzie podpisywania)](../../framework/tools/signtool-exe.md)— współdziałanie, aby upewnić się, że zestaw nie został zmieniony w żaden sposób.</span><span class="sxs-lookup"><span data-stu-id="994f0-141">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="994f0-142">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="994f0-142">See also</span></span>

- [<span data-ttu-id="994f0-143">Zestawy o silnych nazwach</span><span class="sxs-lookup"><span data-stu-id="994f0-143">Strong-named assemblies</span></span>](strong-named.md)
- [<span data-ttu-id="994f0-144">Zestawy w środowisku .NET</span><span class="sxs-lookup"><span data-stu-id="994f0-144">Assemblies in .NET</span></span>](index.md)
- [<span data-ttu-id="994f0-145">SignTool.exe (Narzędzie podpisywania)</span><span class="sxs-lookup"><span data-stu-id="994f0-145">SignTool.exe (Sign Tool)</span></span>](../../framework/tools/signtool-exe.md)
