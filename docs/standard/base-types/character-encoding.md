---
title: Kodowanie znaków w .NET
ms.date: 12/22/2017
ms.technology: dotnet-standard
dev_langs:
- csharp
- vb
helpviewer_keywords:
- encoding, understanding
- encoding, choosing
- encoding, fallback strategy
ms.assetid: bf6d9823-4c2d-48af-b280-919c5af66ae9
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: cac7e0fca4a009b7f5b6f677abed70cf2519052d
ms.sourcegitcommit: ad99773e5e45068ce03b99518008397e1299e0d1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/24/2018
ms.locfileid: "46711760"
---
# <a name="character-encoding-in-net"></a><span data-ttu-id="dda48-102">Kodowanie znaków w .NET</span><span class="sxs-lookup"><span data-stu-id="dda48-102">Character Encoding in .NET</span></span>
<span data-ttu-id="dda48-103">Znaki są abstrakcyjne jednostek, które mogą być przedstawione na wiele różnych sposobów.</span><span class="sxs-lookup"><span data-stu-id="dda48-103">Characters are abstract entities that can be represented in many different ways.</span></span> <span data-ttu-id="dda48-104">Kodowanie znaków to system, który pary, każdy znak w obsługiwanych znaków, zestaw z jakąś wartość, która reprezentuje ten znak.</span><span class="sxs-lookup"><span data-stu-id="dda48-104">A character encoding is a system that pairs each character in a supported character set with some value that represents that character.</span></span> <span data-ttu-id="dda48-105">Na przykład Morse'a jest znakiem kodowania tej pary każdego znaku w alfabetu łacińskiego z wzorcem kropki i łączniki, które są odpowiednie na potrzeby transmisji przez telegraficznego wierszy.</span><span class="sxs-lookup"><span data-stu-id="dda48-105">For example, Morse code is a character encoding that pairs each character in the Roman alphabet with a pattern of dots and dashes that are suitable for transmission over telegraph lines.</span></span> <span data-ttu-id="dda48-106">Kodowanie znaków dla pary komputerów dla każdego znaku obsługiwany zestaw z wartością liczbową, który reprezentuje ten znak znaków.</span><span class="sxs-lookup"><span data-stu-id="dda48-106">A character encoding for computers pairs each character in a supported character set with a numeric value that represents that character.</span></span> <span data-ttu-id="dda48-107">Kodowanie znaków ma dwa różne składniki:</span><span class="sxs-lookup"><span data-stu-id="dda48-107">A character encoding has two distinct components:</span></span>  
  
-   <span data-ttu-id="dda48-108">Koder, który tłumaczy sekwencji znaków do sekwencji wartości liczbowych (w bajtach).</span><span class="sxs-lookup"><span data-stu-id="dda48-108">An encoder, which translates a sequence of characters into a sequence of numeric values (bytes).</span></span>  
  
-   <span data-ttu-id="dda48-109">Dekoder, który tłumaczy sekwencję bajtów do sekwencji znaków.</span><span class="sxs-lookup"><span data-stu-id="dda48-109">A decoder, which translates a sequence of bytes into a sequence of characters.</span></span>  
  
 <span data-ttu-id="dda48-110">Kodowanie znaków w tym artykule opisano zasady, według których koder i dekoder działać.</span><span class="sxs-lookup"><span data-stu-id="dda48-110">Character encoding describes the rules by which an encoder and a decoder operate.</span></span> <span data-ttu-id="dda48-111">Na przykład <xref:System.Text.UTF8Encoding> klasy w tym artykule opisano zasady kodowanie i dekodowanie z 8-bitową przekształcania formatu Unicode (UTF-8), który używa jednej do czterech bajtach oznaczającego pojedynczy znak Unicode.</span><span class="sxs-lookup"><span data-stu-id="dda48-111">For example, the <xref:System.Text.UTF8Encoding> class describes the rules for encoding to, and decoding from, 8-bit Unicode Transformation Format (UTF-8), which uses one to four bytes to represent a single Unicode character.</span></span> <span data-ttu-id="dda48-112">Kodowanie i dekodowanie mogą również obejmować sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="dda48-112">Encoding and decoding can also include validation.</span></span> <span data-ttu-id="dda48-113">Na przykład <xref:System.Text.UnicodeEncoding> klasa sprawdza wszystkie surogaty, aby upewnić się, ponieważ stanowią one prawidłowe znaki dwuskładnikowe.</span><span class="sxs-lookup"><span data-stu-id="dda48-113">For example, the <xref:System.Text.UnicodeEncoding> class checks all surrogates  to make sure they constitute valid surrogate pairs.</span></span> <span data-ttu-id="dda48-114">(Para zastępcza składa się z znakiem z zakresu od U + D800 do U + DBFF następuje znak z punktem kodu z zakresu od U + DC00 do U + DFFF punktu kodu).  Strategia rezerwowa określa sposób obsługi przez koder nieprawidłowe znaki lub jak dekodera obsługuje nieprawidłowe bajty.</span><span class="sxs-lookup"><span data-stu-id="dda48-114">(A surrogate pair consists of a character with a code point that ranges from U+D800 to U+DBFF followed by a character with a code point that ranges from U+DC00 to U+DFFF.)  A fallback strategy determines how an encoder handles invalid characters or how a decoder handles invalid bytes.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="dda48-115">Klasy kodowania platformy .NET umożliwiają przechowywanie i konwertowania danych znakowych.</span><span class="sxs-lookup"><span data-stu-id="dda48-115">.NET encoding classes provide a way to store and convert character data.</span></span> <span data-ttu-id="dda48-116">Nie powinny one używane do przechowywania danych binarnych w postaci ciągu.</span><span class="sxs-lookup"><span data-stu-id="dda48-116">They should not be used to store binary data in string form.</span></span> <span data-ttu-id="dda48-117">W zależności od kodowanie używane, konwersja danych binarnych na ciąg formatu przy użyciu klas kodowania można wprowadzić nieoczekiwane zachowanie i tworzenia nieprawidłowe lub uszkodzone dane.</span><span class="sxs-lookup"><span data-stu-id="dda48-117">Depending on the encoding used, converting binary data to string format with the encoding classes can introduce unexpected behavior and produce inaccurate or corrupted data.</span></span> <span data-ttu-id="dda48-118">Aby przekonwertować danych binarnych w postaci ciągu, należy użyć <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-118">To convert binary data to a string form, use the <xref:System.Convert.ToBase64String%2A?displayProperty=nameWithType> method.</span></span>  
  
 <span data-ttu-id="dda48-119">.NET używa kodowania UTF-16 (reprezentowane przez <xref:System.Text.UnicodeEncoding> klasy) do reprezentowania znaków i ciągów.</span><span class="sxs-lookup"><span data-stu-id="dda48-119">.NET uses the UTF-16 encoding (represented by the <xref:System.Text.UnicodeEncoding> class) to represent characters and strings.</span></span> <span data-ttu-id="dda48-120">Aplikacje przeznaczone środowiska uruchomieniowego języka wspólnego Użyj koderów, aby zamapować reprezentacji znaków Unicode obsługiwanych przez środowisko uruchomieniowe języka wspólnego do innych systemów kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-120">Applications that target the common language runtime use encoders to map Unicode character representations supported by the common language runtime to other encoding schemes.</span></span> <span data-ttu-id="dda48-121">Dekodery one służy do mapowania znaków z innego niż Unicode kodowania na Unicode.</span><span class="sxs-lookup"><span data-stu-id="dda48-121">They use decoders to map characters from non-Unicode encodings to Unicode.</span></span>  
  
 <span data-ttu-id="dda48-122">Ten temat zawiera następujące sekcje:</span><span class="sxs-lookup"><span data-stu-id="dda48-122">This topic consists of the following sections:</span></span>  
  
-   [<span data-ttu-id="dda48-123">Kodowanie na platformie .NET</span><span class="sxs-lookup"><span data-stu-id="dda48-123">Encodings in .NET</span></span>](../../../docs/standard/base-types/character-encoding.md#Encodings)  
  
-   [<span data-ttu-id="dda48-124">Wybieranie klasy kodowania</span><span class="sxs-lookup"><span data-stu-id="dda48-124">Selecting an Encoding Class</span></span>](../../../docs/standard/base-types/character-encoding.md#Selecting)  
  
-   [<span data-ttu-id="dda48-125">Używanie obiektu kodowania</span><span class="sxs-lookup"><span data-stu-id="dda48-125">Using an Encoding Object</span></span>](../../../docs/standard/base-types/character-encoding.md#Using)  
  
-   [<span data-ttu-id="dda48-126">Wybieranie strategii rezerwowe</span><span class="sxs-lookup"><span data-stu-id="dda48-126">Choosing a Fallback Strategy</span></span>](../../../docs/standard/base-types/character-encoding.md#FallbackStrategy)  
  
-   [<span data-ttu-id="dda48-127">Implementowanie niestandardowego strategia rezerwowa</span><span class="sxs-lookup"><span data-stu-id="dda48-127">Implementing a Custom Fallback Strategy</span></span>](../../../docs/standard/base-types/character-encoding.md#Custom)  
  
<a name="Encodings"></a>   
## <a name="encodings-in-net"></a><span data-ttu-id="dda48-128">Kodowanie na platformie .NET</span><span class="sxs-lookup"><span data-stu-id="dda48-128">Encodings in .NET</span></span>  
 <span data-ttu-id="dda48-129">Wszystkich znaków kodowania klasy .NET dziedziczą w <xref:System.Text.Encoding?displayProperty=nameWithType> klasy, która jest klasą abstrakcyjną, definiujący funkcje wspólne do wszystkich znaków kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-129">All character encoding classes in .NET inherit from the <xref:System.Text.Encoding?displayProperty=nameWithType> class, which is an abstract class that defines the functionality common to all character encodings.</span></span> <span data-ttu-id="dda48-130">Można uzyskać dostęp do poszczególnych obiektów kodowania zaimplementowany w środowisku .NET, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="dda48-130">To access the individual encoding objects implemented in .NET, do the following:</span></span>  
  
-   <span data-ttu-id="dda48-131">Użyj właściwości statycznej <xref:System.Text.Encoding> klasy, która zwraca obiekty reprezentujące kodowania znaków standardowych dostępnych w programie .NET (ASCII, UTF-7, UTF-8, UTF-16 i UTF-32).</span><span class="sxs-lookup"><span data-stu-id="dda48-131">Use the static properties of the <xref:System.Text.Encoding> class, which return objects that represent the standard character encodings available in .NET (ASCII, UTF-7, UTF-8, UTF-16, and UTF-32).</span></span> <span data-ttu-id="dda48-132">Na przykład <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> właściwość zwraca <xref:System.Text.UnicodeEncoding> obiektu.</span><span class="sxs-lookup"><span data-stu-id="dda48-132">For example, the <xref:System.Text.Encoding.Unicode%2A?displayProperty=nameWithType> property returns a <xref:System.Text.UnicodeEncoding> object.</span></span> <span data-ttu-id="dda48-133">Każdy obiekt używa zastąpienie rezerwowego ciągów uchwytu, które go nie można zakodować i bajtów, które nie można go zdekodować.</span><span class="sxs-lookup"><span data-stu-id="dda48-133">Each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode.</span></span> <span data-ttu-id="dda48-134">(Aby uzyskać więcej informacji, zobacz [rezerwowe zastąpienie](../../../docs/standard/base-types/character-encoding.md#Replacement) sekcji.)</span><span class="sxs-lookup"><span data-stu-id="dda48-134">(For more information, see the [Replacement Fallback](../../../docs/standard/base-types/character-encoding.md#Replacement) section.)</span></span>  
  
-   <span data-ttu-id="dda48-135">Wywoływanie konstruktora klasy kodowania firmy.</span><span class="sxs-lookup"><span data-stu-id="dda48-135">Call the encoding's class constructor.</span></span> <span data-ttu-id="dda48-136">Obiekty ASCII, UTF-7, UTF-8, UTF-16 i UTF-32 kodowania mogą być utworzone w ten sposób.</span><span class="sxs-lookup"><span data-stu-id="dda48-136">Objects for the ASCII, UTF-7, UTF-8, UTF-16, and UTF-32 encodings can be instantiated in this way.</span></span> <span data-ttu-id="dda48-137">Domyślnie każdy obiekt używa zastąpienie rezerwowego do obsługi ciągów, które go nie można zakodować i bajtów, których nie można go zdekodować, ale można określić, czy należy zgłosić wyjątek zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="dda48-137">By default, each object uses replacement fallback to handle strings that it cannot encode and bytes that it cannot decode, but you can specify that an exception should be thrown instead.</span></span> <span data-ttu-id="dda48-138">(Aby uzyskać więcej informacji, zobacz [rezerwowe zastąpienie](../../../docs/standard/base-types/character-encoding.md#Replacement) i [rezerwowe wyjątek](../../../docs/standard/base-types/character-encoding.md#Exception) sekcje.)</span><span class="sxs-lookup"><span data-stu-id="dda48-138">(For more information, see the [Replacement Fallback](../../../docs/standard/base-types/character-encoding.md#Replacement) and [Exception Fallback](../../../docs/standard/base-types/character-encoding.md#Exception) sections.)</span></span>  
  
-   <span data-ttu-id="dda48-139">Wywołaj <xref:System.Text.Encoding.%23ctor%28System.Int32%29?displayProperty=nameWithType> Konstruktor i przekazywanie ich liczba całkowita, która reprezentuje kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-139">Call the <xref:System.Text.Encoding.%23ctor%28System.Int32%29?displayProperty=nameWithType> constructor and pass it an integer that represents the encoding.</span></span> <span data-ttu-id="dda48-140">Standard kodowania obiektów użyj rezerwowe zastąpienia i stronę kodową i zestaw znaków dwubajtowych (DBCS) kodowanie obiektów Użyj najlepszego dopasowania powrotu do ciągów uchwytu, które ich nie można zakodować i bajtów, które ich nie można zdekodować.</span><span class="sxs-lookup"><span data-stu-id="dda48-140">Standard encoding objects use replacement fallback, and code page and double-byte character set (DBCS) encoding objects use best-fit fallback to handle strings that they cannot encode and bytes that they cannot decode.</span></span> <span data-ttu-id="dda48-141">(Aby uzyskać więcej informacji, zobacz [rezerwowe Best-Fit](../../../docs/standard/base-types/character-encoding.md#BestFit) sekcji.)</span><span class="sxs-lookup"><span data-stu-id="dda48-141">(For more information, see the [Best-Fit Fallback](../../../docs/standard/base-types/character-encoding.md#BestFit) section.)</span></span>  
  
-   <span data-ttu-id="dda48-142">Wywołaj <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType> metody, która zwraca wszystkie standardowe, stronę kodową lub kodowanie znaków Dwubajtowych dostępne na platformie .NET.</span><span class="sxs-lookup"><span data-stu-id="dda48-142">Call the <xref:System.Text.Encoding.GetEncoding%2A?displayProperty=nameWithType> method, which returns any standard, code page, or DBCS encoding available in .NET.</span></span> <span data-ttu-id="dda48-143">Przeciążenia pozwalają określać rezerwowego obiektu dla koder i dekoder.</span><span class="sxs-lookup"><span data-stu-id="dda48-143">Overloads let you specify a fallback object for both the encoder and the decoder.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="dda48-144">Unicode Standard przypisuje punkt kodowy (liczba) i nazwę każdego znaku w każdej obsługiwanej skryptu.</span><span class="sxs-lookup"><span data-stu-id="dda48-144">The Unicode Standard assigns a code point (a number) and a name to each character in every supported script.</span></span> <span data-ttu-id="dda48-145">Na przykład znak "A" jest reprezentowany przez punkt kodowy U + 0041 i nazwie "LATIN CAPITAL LETTER A".</span><span class="sxs-lookup"><span data-stu-id="dda48-145">For example, the character "A" is represented by the code point U+0041 and the name "LATIN CAPITAL LETTER A".</span></span> <span data-ttu-id="dda48-146">Kodowania Format przekształcenia Unicode (UTF) zdefiniuj sposoby kodowanie tego punktu kodu do sekwencji bajtów jednego lub więcej.</span><span class="sxs-lookup"><span data-stu-id="dda48-146">The Unicode Transformation Format (UTF) encodings define ways to encode that code point into a sequence of one or more bytes.</span></span> <span data-ttu-id="dda48-147">Schemat kodowania Unicode upraszcza opracowywanie aplikacji gotowej dla całego świata, ponieważ zezwala ona na znaki z dowolnego zestawu może być reprezentowana w jednym kodowania znaków.</span><span class="sxs-lookup"><span data-stu-id="dda48-147">A Unicode encoding scheme simplifies world-ready application development because it allows characters from any character set to be represented in a single encoding.</span></span> <span data-ttu-id="dda48-148">Deweloperzy aplikacji nie ma już do śledzenia schemat kodowania, który został użyty do utworzenia znaków dla określonego języka lub zapis systemu, a dane mogą być udostępniane między systemami w wielu krajach bez jest uszkodzony.</span><span class="sxs-lookup"><span data-stu-id="dda48-148">Application developers no longer have to keep track of the encoding scheme that was used to produce characters for a specific language or writing system, and data can be shared among systems internationally without being corrupted.</span></span>  
>   
>  <span data-ttu-id="dda48-149">.NET wspomaga trzy kodowania z definicją w standardzie Unicode: UTF-8, UTF-16 i UTF-32.</span><span class="sxs-lookup"><span data-stu-id="dda48-149">.NET supports three encodings defined by the Unicode standard: UTF-8, UTF-16, and UTF-32.</span></span> <span data-ttu-id="dda48-150">Aby uzyskać więcej informacji, zobacz Unicode Standard na [strony głównej Unicode](https://www.unicode.org/).</span><span class="sxs-lookup"><span data-stu-id="dda48-150">For more information, see The Unicode Standard at the [Unicode home page](https://www.unicode.org/).</span></span>  
  
 <span data-ttu-id="dda48-151">Można pobrać informacji na temat kodowania dostępne na platformie .NET, wywołując <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-151">You can retrieve information about all the encodings available in .NET by calling the <xref:System.Text.Encoding.GetEncodings%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dda48-152">.NET wspomaga znaków kodowania systemów wymienionych w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="dda48-152">.NET supports the character encoding systems listed in the following table.</span></span>  
  
|<span data-ttu-id="dda48-153">Kodowanie</span><span class="sxs-lookup"><span data-stu-id="dda48-153">Encoding</span></span>|<span data-ttu-id="dda48-154">Class</span><span class="sxs-lookup"><span data-stu-id="dda48-154">Class</span></span>|<span data-ttu-id="dda48-155">Opis</span><span class="sxs-lookup"><span data-stu-id="dda48-155">Description</span></span>|<span data-ttu-id="dda48-156">Zalety i wady</span><span class="sxs-lookup"><span data-stu-id="dda48-156">Advantages/disadvantages</span></span>|  
|--------------|-----------|-----------------|-------------------------------|  
|<span data-ttu-id="dda48-157">ASCII</span><span class="sxs-lookup"><span data-stu-id="dda48-157">ASCII</span></span>|<xref:System.Text.ASCIIEncoding>|<span data-ttu-id="dda48-158">Koduje ograniczony zakres znaków przy użyciu niższe siedem bitów bajtu.</span><span class="sxs-lookup"><span data-stu-id="dda48-158">Encodes a limited range of characters by using the lower seven bits of a byte.</span></span>|<span data-ttu-id="dda48-159">Ponieważ to kodowanie tylko obsługuje wartości znakowych z 0000 U + poprzez U + 007F, w większości przypadków jest to niewystarczające do aplikacji międzynarodowych.</span><span class="sxs-lookup"><span data-stu-id="dda48-159">Because this encoding only supports character values from U+0000 through U+007F, in most cases it is inadequate for internationalized applications.</span></span>|  
|<span data-ttu-id="dda48-160">UTF-7</span><span class="sxs-lookup"><span data-stu-id="dda48-160">UTF-7</span></span>|<xref:System.Text.UTF7Encoding>|<span data-ttu-id="dda48-161">Reprezentuje znaków jako sekwencje znaków ASCII 7-bitowego.</span><span class="sxs-lookup"><span data-stu-id="dda48-161">Represents characters as sequences of 7-bit ASCII characters.</span></span> <span data-ttu-id="dda48-162">Znaki spoza zestawu ASCII Unicode są reprezentowane przez sekwencję unikową znaków ASCII.</span><span class="sxs-lookup"><span data-stu-id="dda48-162">Non-ASCII Unicode characters are represented by an escape sequence of ASCII characters.</span></span>|<span data-ttu-id="dda48-163">UTF-7 obsługuje protokoły, takie jak wiadomości e-mail i protokoły grupy dyskusyjnej.</span><span class="sxs-lookup"><span data-stu-id="dda48-163">UTF-7 supports protocols such as email and newsgroup protocols.</span></span> <span data-ttu-id="dda48-164">Jednakże UTF-7 nie jest szczególnie bezpieczne i niezawodne.</span><span class="sxs-lookup"><span data-stu-id="dda48-164">However, UTF-7 is not particularly secure or robust.</span></span> <span data-ttu-id="dda48-165">W niektórych przypadkach zmieniając jeden bit może znacząco zmieniają interpretacji cały ciąg UTF-7.</span><span class="sxs-lookup"><span data-stu-id="dda48-165">In some cases, changing one bit can radically alter the interpretation of an entire UTF-7 string.</span></span> <span data-ttu-id="dda48-166">W innych przypadkach różne ciągi UTF-7 można zakodować ten sam tekst.</span><span class="sxs-lookup"><span data-stu-id="dda48-166">In other cases, different UTF-7 strings can encode the same text.</span></span> <span data-ttu-id="dda48-167">Sekwencje, które zawierają znaki spoza zestawu ASCII wymaga więcej miejsca niż UTF-8, UTF-7 i Kodowanie dekodowanie jest wolniejsze.</span><span class="sxs-lookup"><span data-stu-id="dda48-167">For sequences that include non-ASCII characters, UTF-7 requires more space than UTF-8, and encoding/decoding is slower.</span></span> <span data-ttu-id="dda48-168">W związku z tym należy użyć UTF-8 zamiast UTF-7, jeśli jest to możliwe.</span><span class="sxs-lookup"><span data-stu-id="dda48-168">Consequently, you should use UTF-8 instead of UTF-7 if possible.</span></span>|  
|<span data-ttu-id="dda48-169">UTF-8</span><span class="sxs-lookup"><span data-stu-id="dda48-169">UTF-8</span></span>|<xref:System.Text.UTF8Encoding>|<span data-ttu-id="dda48-170">Reprezentuje każdy punkt kodu Unicode jako sekwencja jednej do czterech bajtów.</span><span class="sxs-lookup"><span data-stu-id="dda48-170">Represents each Unicode code point as a sequence of one to four bytes.</span></span>|<span data-ttu-id="dda48-171">UTF-8 obsługuje ilości danych 8-bitową i dobrze działa z wielu istniejących systemach operacyjnych.</span><span class="sxs-lookup"><span data-stu-id="dda48-171">UTF-8 supports 8-bit data sizes and works well with many existing operating systems.</span></span> <span data-ttu-id="dda48-172">Dla zakresu znaków ASCII UTF-8 jest taka sama jak kodowanie ASCII i zezwala na szerszy zestaw znaków.</span><span class="sxs-lookup"><span data-stu-id="dda48-172">For the ASCII range of characters, UTF-8 is identical to ASCII encoding and allows a broader set of characters.</span></span> <span data-ttu-id="dda48-173">Jednak dla skryptów chiński — japoński — koreańskich lub UTF-8 mogą wymagać trzy bajty dla każdego znaku i może powodować większe ilości danych niż UTF-16.</span><span class="sxs-lookup"><span data-stu-id="dda48-173">However, for Chinese-Japanese-Korean (CJK) scripts, UTF-8 can require three bytes for each character, and can potentially cause larger data sizes than UTF-16.</span></span> <span data-ttu-id="dda48-174">Należy pamiętać, czasami ilość danych ASCII, takich jak tagi HTML uzasadnia zwiększony rozmiar dla zakresu CJK.</span><span class="sxs-lookup"><span data-stu-id="dda48-174">Note that sometimes the amount of ASCII data, such as HTML tags, justifies the increased size for the CJK range.</span></span>|  
|<span data-ttu-id="dda48-175">UTF-16</span><span class="sxs-lookup"><span data-stu-id="dda48-175">UTF-16</span></span>|<xref:System.Text.UnicodeEncoding>|<span data-ttu-id="dda48-176">Reprezentuje każdy punkt kodu Unicode za pomocą sekwencji jednego lub dwóch 16-bitowych liczb całkowitych.</span><span class="sxs-lookup"><span data-stu-id="dda48-176">Represents each Unicode code point as a sequence of one or two 16-bit integers.</span></span> <span data-ttu-id="dda48-177">Najbardziej typowe znaków Unicode wymagają tylko jeden punkt kodu UTF-16, mimo że dodatkowych znaków Unicode (U + 10000 lub nowszym) wymagają dwa punkty kodowe zastępczy UTF-16.</span><span class="sxs-lookup"><span data-stu-id="dda48-177">Most common Unicode characters require only one UTF-16 code point, although Unicode supplementary characters (U+10000 and greater) require two UTF-16 surrogate code points.</span></span> <span data-ttu-id="dda48-178">Obsługiwane są zarówno zamówienia bajtów little-endian i big-endian.</span><span class="sxs-lookup"><span data-stu-id="dda48-178">Both little-endian and big-endian byte orders are supported.</span></span>|<span data-ttu-id="dda48-179">Środowisko uruchomieniowe języka wspólnego kodowanie UTF-16 jest używana do reprezentowania <xref:System.Char> i <xref:System.String> wartości która jest używana przez system operacyjny Windows do reprezentowania `WCHAR` wartości.</span><span class="sxs-lookup"><span data-stu-id="dda48-179">UTF-16 encoding is used by the common language runtime to represent <xref:System.Char> and <xref:System.String> values, and it is used by the Windows operating system to represent `WCHAR` values.</span></span>|  
|<span data-ttu-id="dda48-180">UTF-32</span><span class="sxs-lookup"><span data-stu-id="dda48-180">UTF-32</span></span>|<xref:System.Text.UTF32Encoding>|<span data-ttu-id="dda48-181">Reprezentuje każdy punkt kodu Unicode jako liczba całkowita 32-bitowych.</span><span class="sxs-lookup"><span data-stu-id="dda48-181">Represents each Unicode code point as a 32-bit integer.</span></span> <span data-ttu-id="dda48-182">Obsługiwane są zarówno zamówienia bajtów little-endian i big-endian.</span><span class="sxs-lookup"><span data-stu-id="dda48-182">Both little-endian and big-endian byte orders are supported.</span></span>|<span data-ttu-id="dda48-183">Kodowanie UTF-32 jest używany, jeśli chcesz uniknąć zachowanie punktu kodu zastępczy kodowanie UTF-16 w systemach operacyjnych, dla których zakodowany miejsca jest zbyt ważne aplikacje.</span><span class="sxs-lookup"><span data-stu-id="dda48-183">UTF-32 encoding is used when applications want to avoid the surrogate code point behavior of UTF-16 encoding on operating systems for which encoded space is too important.</span></span> <span data-ttu-id="dda48-184">Nadal można zakodować pojedynczego symbole renderowany na ekranie za pomocą więcej niż jednego znaku UTF-32.</span><span class="sxs-lookup"><span data-stu-id="dda48-184">Single glyphs rendered on a display can still be encoded with more than one UTF-32 character.</span></span>|  
|<span data-ttu-id="dda48-185">Kodowania ANSI/ISO</span><span class="sxs-lookup"><span data-stu-id="dda48-185">ANSI/ISO encodings</span></span>||<span data-ttu-id="dda48-186">Zapewnia obsługę różnych stron kodowych.</span><span class="sxs-lookup"><span data-stu-id="dda48-186">Provides support for a variety of code pages.</span></span> <span data-ttu-id="dda48-187">W systemach operacyjnych Windows stron kodowych są używane do obsługi określonego języka lub grupę języków.</span><span class="sxs-lookup"><span data-stu-id="dda48-187">On Windows operating systems, code pages are used to support a specific language or group of languages.</span></span> <span data-ttu-id="dda48-188">Dla tabeli, która zawiera listę stron kodowych obsługiwanych przez .NET, zobacz <xref:System.Text.Encoding> klasy.</span><span class="sxs-lookup"><span data-stu-id="dda48-188">For a table that lists the code pages supported by .NET, see the <xref:System.Text.Encoding> class.</span></span> <span data-ttu-id="dda48-189">Możesz pobrać obiekt kodowania dla strony kodu określonego przez wywołanie metody <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-189">You can retrieve an encoding object for a particular code page by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span>|<span data-ttu-id="dda48-190">Strona kodowa zawiera 256 punkty kodowe i jest liczony od zera.</span><span class="sxs-lookup"><span data-stu-id="dda48-190">A code page contains 256 code points and is zero-based.</span></span> <span data-ttu-id="dda48-191">W większości stron kodowych punkty kodowe od 0 do 127 reprezentuje zestaw znaków ASCII, a punkty kodowe 128 do 255 różni się znacznie między stron kodowych.</span><span class="sxs-lookup"><span data-stu-id="dda48-191">In most code pages, code points 0 through 127 represent the ASCII character set, and code points 128 through 255 differ significantly between code pages.</span></span> <span data-ttu-id="dda48-192">Na przykład strona kodowa 1252 przewiduje znaków łaciński pisania systemy, w tym angielski, niemiecki i francuski.</span><span class="sxs-lookup"><span data-stu-id="dda48-192">For example, code page 1252 provides the characters for Latin writing systems, including English, German, and French.</span></span> <span data-ttu-id="dda48-193">Ostatnie punkty kodowe 128 w na stronie kodowej 1252 zawierają znaki akcentu.</span><span class="sxs-lookup"><span data-stu-id="dda48-193">The last 128 code points in code page 1252 contain the accent characters.</span></span> <span data-ttu-id="dda48-194">Strona kodowa 1253 zawiera kody znaków, które są wymagane w systemie greckim zapisu.</span><span class="sxs-lookup"><span data-stu-id="dda48-194">Code page 1253 provides character codes that are required in the Greek writing system.</span></span> <span data-ttu-id="dda48-195">Ostatnie punkty kodowe 128 w na stronie kodowej 1253 zawierać znaków greckich.</span><span class="sxs-lookup"><span data-stu-id="dda48-195">The last 128 code points in code page 1253 contain the Greek characters.</span></span> <span data-ttu-id="dda48-196">W rezultacie aplikację, która opiera się na stronach kodowych ANSI nie można zapisać grecki i niemieckim w tym samym strumieniu tekstu, chyba że zawiera on identyfikator, który wskazuje stronę kodu.</span><span class="sxs-lookup"><span data-stu-id="dda48-196">As a result, an application that relies on ANSI code pages cannot store Greek and German in the same text stream unless it includes an identifier that indicates the referenced code page.</span></span>|  
|<span data-ttu-id="dda48-197">Zestaw znaków dwubajtowych kodowania (znaków znaków DBCS)</span><span class="sxs-lookup"><span data-stu-id="dda48-197">Double-byte character set (DBCS) encodings</span></span>||<span data-ttu-id="dda48-198">Obsługa języków, takich jak chiński i japoński, koreański, które zawierają więcej niż 256 znaków.</span><span class="sxs-lookup"><span data-stu-id="dda48-198">Supports languages, such as Chinese, Japanese, and Korean, that contain more than 256 characters.</span></span> <span data-ttu-id="dda48-199">W zestawie DBCS parę punkty kodowe (dwubajtowe) reprezentuje każdy znak.</span><span class="sxs-lookup"><span data-stu-id="dda48-199">In a DBCS, a pair of code points (a double byte) represents each character.</span></span> <span data-ttu-id="dda48-200"><xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> Właściwość zwraca `false` dla kodowań znaków Dwubajtowych.</span><span class="sxs-lookup"><span data-stu-id="dda48-200">The <xref:System.Text.Encoding.IsSingleByte%2A?displayProperty=nameWithType> property returns `false` for DBCS encodings.</span></span> <span data-ttu-id="dda48-201">Możesz pobrać obiekt kodowania dla określonego znaków Dwubajtowych, wywołując <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-201">You can retrieve an encoding object for a particular DBCS by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method.</span></span>|<span data-ttu-id="dda48-202">W zestawie DBCS parę punkty kodowe (dwubajtowe) reprezentuje każdy znak.</span><span class="sxs-lookup"><span data-stu-id="dda48-202">In a DBCS, a pair of code points (a double byte) represents each character.</span></span> <span data-ttu-id="dda48-203">Jeśli aplikacja obsługuje dane DBCS, pierwszego bajtu znaków DBCS (bajt) są przetwarzane w połączeniu z bajt, który następuje bezpośrednio po jej.</span><span class="sxs-lookup"><span data-stu-id="dda48-203">When an application handles DBCS data, the first byte of a DBCS character (the lead byte) is processed in combination with the trail byte that immediately follows it.</span></span> <span data-ttu-id="dda48-204">Ponieważ jedna para punkty kodowe dwubajtowe mogą reprezentować różne znaki, w zależności od strony kodowej, ten schemat nadal nie zezwala na kombinację dwóch języków, takich jak japońskim i chińskim, w tym samym strumieniu danych.</span><span class="sxs-lookup"><span data-stu-id="dda48-204">Because a single pair of double-byte code points can represent different characters depending on the code page, this scheme still does not allow for the combination of two languages, such as Japanese and Chinese, in the same data stream.</span></span>|  
  
 <span data-ttu-id="dda48-205">Tych kodowaniach umożliwiają pracę ze znakami Unicode, a także przy użyciu kodowania, które są najczęściej używane w przypadku starszych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-205">These encodings enable you to work with Unicode characters as well as with encodings that are most commonly used in legacy applications.</span></span> <span data-ttu-id="dda48-206">Ponadto można utworzyć niestandardowego kodowania, definiując klasę, która pochodzi od klasy <xref:System.Text.Encoding> i przesłanianie jej członków.</span><span class="sxs-lookup"><span data-stu-id="dda48-206">In addition, you can create a custom encoding by defining a class that derives from <xref:System.Text.Encoding> and overriding its members.</span></span>  
  
### <a name="platform-notes-includenetcoreincludesnet-core-mdmd"></a><span data-ttu-id="dda48-207">Uwagi dotyczące platformy: [!INCLUDE[net_core](../../../includes/net-core-md.md)]</span><span class="sxs-lookup"><span data-stu-id="dda48-207">Platform Notes: [!INCLUDE[net_core](../../../includes/net-core-md.md)]</span></span>  
 <span data-ttu-id="dda48-208">Domyślnie [!INCLUDE[net_core](../../../includes/net-core-md.md)] nie udostępnia żadnych stron kodowych innych niż strona kodowa 28591 i kodowania Unicode, takich jak UTF-8 i UTF-16.</span><span class="sxs-lookup"><span data-stu-id="dda48-208">By default, [!INCLUDE[net_core](../../../includes/net-core-md.md)] does not make available any code page encodings other than code page 28591 and the Unicode encodings, such as UTF-8 and UTF-16.</span></span> <span data-ttu-id="dda48-209">Można jednak dodać stron kodowych w standardowe aplikacje Windows znaleziono obiektu docelowego .NET do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-209">However, you can add the code page encodings found in standard Windows apps that target .NET to your app.</span></span> <span data-ttu-id="dda48-210">Aby uzyskać pełne informacje, zobacz <xref:System.Text.CodePagesEncodingProvider> tematu.</span><span class="sxs-lookup"><span data-stu-id="dda48-210">For complete information, see the <xref:System.Text.CodePagesEncodingProvider> topic.</span></span>  
  
<a name="Selecting"></a>   
## <a name="selecting-an-encoding-class"></a><span data-ttu-id="dda48-211">Wybieranie klasy kodowania</span><span class="sxs-lookup"><span data-stu-id="dda48-211">Selecting an Encoding Class</span></span>  
 <span data-ttu-id="dda48-212">Jeśli masz możliwość wyboru kodowanie do użycia przez aplikację, należy użyć kodowania Unicode najlepiej albo <xref:System.Text.UTF8Encoding> lub <xref:System.Text.UnicodeEncoding>.</span><span class="sxs-lookup"><span data-stu-id="dda48-212">If you have the opportunity to choose the encoding to be used by your application, you should use a Unicode encoding, preferably either <xref:System.Text.UTF8Encoding> or <xref:System.Text.UnicodeEncoding>.</span></span> <span data-ttu-id="dda48-213">(.NET obsługuje również trzeci kodowanie Unicode, <xref:System.Text.UTF32Encoding>.)</span><span class="sxs-lookup"><span data-stu-id="dda48-213">(.NET also supports a third Unicode encoding, <xref:System.Text.UTF32Encoding>.)</span></span>  
  
 <span data-ttu-id="dda48-214">Jeśli planowane jest używane kodowanie ASCII (<xref:System.Text.ASCIIEncoding>), wybierz <xref:System.Text.UTF8Encoding> zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="dda48-214">If you are planning to use an ASCII encoding (<xref:System.Text.ASCIIEncoding>), choose <xref:System.Text.UTF8Encoding> instead.</span></span> <span data-ttu-id="dda48-215">Dwa kodowania są identyczne dla zestawu znaków ASCII, ale <xref:System.Text.UTF8Encoding> ma następujące zalety:</span><span class="sxs-lookup"><span data-stu-id="dda48-215">The two encodings are identical for the ASCII character set, but <xref:System.Text.UTF8Encoding> has the following advantages:</span></span>  
  
-   <span data-ttu-id="dda48-216">Może ona reprezentować każdego znaku Unicode, natomiast <xref:System.Text.ASCIIEncoding> obsługuje tylko znak Unicode wartości od U + 0000 i U + 007F.</span><span class="sxs-lookup"><span data-stu-id="dda48-216">It can represent every Unicode character, whereas <xref:System.Text.ASCIIEncoding> supports only the Unicode character values between U+0000 and U+007F.</span></span>  
  
-   <span data-ttu-id="dda48-217">Zapewnia ona wykrywanie błędów i większe bezpieczeństwo.</span><span class="sxs-lookup"><span data-stu-id="dda48-217">It provides error detection and better security.</span></span>  
  
-   <span data-ttu-id="dda48-218">On ma zostać dostosowana do można tak szybko, jak to możliwe i powinien być szybciej niż inne kodowanie.</span><span class="sxs-lookup"><span data-stu-id="dda48-218">It has been tuned to be as fast as possible and should be faster than any other encoding.</span></span> <span data-ttu-id="dda48-219">Nawet w przypadku zawartości, która jest całkowicie ASCII, operacje wykonywane przy użyciu <xref:System.Text.UTF8Encoding> są szybsze niż operacje wykonywane przy użyciu <xref:System.Text.ASCIIEncoding>.</span><span class="sxs-lookup"><span data-stu-id="dda48-219">Even for content that is entirely ASCII, operations performed with <xref:System.Text.UTF8Encoding> are faster than operations performed with <xref:System.Text.ASCIIEncoding>.</span></span>  
  
 <span data-ttu-id="dda48-220">Należy rozważyć użycie <xref:System.Text.ASCIIEncoding> tylko w przypadku starszych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-220">You should consider using <xref:System.Text.ASCIIEncoding> only for legacy applications.</span></span> <span data-ttu-id="dda48-221">Jednak nawet w przypadku starszych aplikacji <xref:System.Text.UTF8Encoding> może być lepszym rozwiązaniem w następujących sytuacjach (zakładając, że ustawienia domyślne):</span><span class="sxs-lookup"><span data-stu-id="dda48-221">However, even for legacy applications, <xref:System.Text.UTF8Encoding> might be a better choice for the following reasons (assuming default settings):</span></span>  
  
-   <span data-ttu-id="dda48-222">Jeśli aplikacja ma zawartość, która nie jest ściśle ASCII i koduje go jako <xref:System.Text.ASCIIEncoding>, każdy znak spoza zestawu ASCII kodowane jako znak zapytania (?).</span><span class="sxs-lookup"><span data-stu-id="dda48-222">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.ASCIIEncoding>, each non-ASCII character encodes as a question mark (?).</span></span> <span data-ttu-id="dda48-223">Jeśli następnie aplikacja dekoduje tych danych, informacje zostaną utracone.</span><span class="sxs-lookup"><span data-stu-id="dda48-223">If the application then decodes this data, the information is lost.</span></span>  
  
-   <span data-ttu-id="dda48-224">Jeśli aplikacja ma zawartość, która nie jest ściśle ASCII i koduje go jako <xref:System.Text.UTF8Encoding>, wynik jest niezrozumiały, jeśli jest interpretowany jako ASCII.</span><span class="sxs-lookup"><span data-stu-id="dda48-224">If your application has content that is not strictly ASCII and encodes it with <xref:System.Text.UTF8Encoding>, the result seems unintelligible if interpreted as ASCII.</span></span> <span data-ttu-id="dda48-225">Jednak jeśli następnie aplikacja używa dekodera UTF-8 do zdekodowania tych danych, dane wykonuje pomyślnie komunikacji dwustronnej.</span><span class="sxs-lookup"><span data-stu-id="dda48-225">However, if the application then uses a UTF-8 decoder to decode this data, the data performs a round trip successfully.</span></span>  
  
 <span data-ttu-id="dda48-226">W aplikacji sieci web powinny odzwierciedlać znaków wysłane do klienta w odpowiedzi na żądania sieci web, kodowanie, używany przez klienta.</span><span class="sxs-lookup"><span data-stu-id="dda48-226">In a web application, characters sent to the client in response to a web request should reflect the encoding used on the client.</span></span> <span data-ttu-id="dda48-227">W większości przypadków należy ustawić <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> właściwości do wartości zwracanej przez <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> właściwości do wyświetlania tekstu w kodowaniu, że użytkownik oczekuje.</span><span class="sxs-lookup"><span data-stu-id="dda48-227">In most cases, you should set the <xref:System.Web.HttpResponse.ContentEncoding%2A?displayProperty=nameWithType> property to the value returned by the <xref:System.Web.HttpRequest.ContentEncoding%2A?displayProperty=nameWithType> property to display text in the encoding that the user expects.</span></span>  
  
<a name="Using"></a>   
## <a name="using-an-encoding-object"></a><span data-ttu-id="dda48-228">Używanie obiektu kodowania</span><span class="sxs-lookup"><span data-stu-id="dda48-228">Using an Encoding Object</span></span>  
 <span data-ttu-id="dda48-229">Koder konwertuje ciąg znaków (najczęściej znakami Unicode) na jej liczbowy (bajtów) równoważne.</span><span class="sxs-lookup"><span data-stu-id="dda48-229">An encoder converts a string of characters (most commonly, Unicode characters) to its numeric (byte) equivalent.</span></span> <span data-ttu-id="dda48-230">Koder ASCII może na przykład użyć, aby skonwertować znaki Unicode ASCII, tak, aby można było je wyświetlić w konsoli.</span><span class="sxs-lookup"><span data-stu-id="dda48-230">For example, you might use an ASCII encoder to convert Unicode characters to ASCII so that they can be displayed at the console.</span></span> <span data-ttu-id="dda48-231">Aby dokonać konwersji, należy wywołać <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-231">To perform the conversion, you call the <xref:System.Text.Encoding.GetBytes%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dda48-232">Jeśli chcesz określić liczbę bajtów są niezbędne do przechowywania zakodowanych znaków przed wykonaniem, kodowanie, można wywołać <xref:System.Text.Encoding.GetByteCount%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-232">If you want to determine how many bytes are needed to store the encoded characters before performing the encoding, you can call the <xref:System.Text.Encoding.GetByteCount%2A> method.</span></span>  
  
 <span data-ttu-id="dda48-233">W poniższym przykładzie użyto tablicy jednobajtowych do zakodowania ciągów w dwie oddzielne operacje.</span><span class="sxs-lookup"><span data-stu-id="dda48-233">The following example uses a single byte array to encode strings in two separate operations.</span></span> <span data-ttu-id="dda48-234">Obsługuje ona indeks wskazującą położenie początkowe w tablicy bajtowej dla następnego zestawu bajtów zakodowane w formacie ASCII.</span><span class="sxs-lookup"><span data-stu-id="dda48-234">It maintains an index that indicates the starting position in the byte array for the next set of ASCII-encoded bytes.</span></span> <span data-ttu-id="dda48-235">Wywołuje <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> metodę, aby upewnić się, że tablica bajtów jest wystarczająco duża, aby pomieścić ciąg zakodowany.</span><span class="sxs-lookup"><span data-stu-id="dda48-235">It calls the <xref:System.Text.ASCIIEncoding.GetByteCount%28System.String%29?displayProperty=nameWithType> method to ensure that the byte array is large enough to accommodate the encoded string.</span></span> <span data-ttu-id="dda48-236">Następnie wywołuje <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> metody do kodowania znaków w ciągu.</span><span class="sxs-lookup"><span data-stu-id="dda48-236">It then calls the <xref:System.Text.ASCIIEncoding.GetBytes%28System.String%2CSystem.Int32%2CSystem.Int32%2CSystem.Byte%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to encode the characters in the string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#8](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getbytes1.cs#8)]
 [!code-vb[Conceptual.Encoding#8](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getbytes1.vb#8)]  
  
 <span data-ttu-id="dda48-237">Dekoder konwertuje tablica bajtów, która odzwierciedla kodowania określony znak do zestawu znaków w tablicy znaków lub w ciągu.</span><span class="sxs-lookup"><span data-stu-id="dda48-237">A decoder converts a byte array that reflects a particular character encoding into a set of characters, either in a character array or in a string.</span></span> <span data-ttu-id="dda48-238">Aby zdekodować tablicy bajtów w tablicy znaków, należy wywołać <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-238">To decode a byte array into a character array, you call the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dda48-239">Aby zdekodować tablicy bajtów na ciąg znaków, należy wywołać <xref:System.Text.Encoding.GetString%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-239">To decode a byte array into a string, you call the <xref:System.Text.Encoding.GetString%2A> method.</span></span> <span data-ttu-id="dda48-240">Jeśli chcesz określić, ile znaków są niezbędne do przechowywania zdekodowany bajtów przed wykonaniem dekodowanie, można wywołać <xref:System.Text.Encoding.GetCharCount%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-240">If you want to determine how many characters are needed to store the decoded bytes before performing the decoding, you can call the <xref:System.Text.Encoding.GetCharCount%2A> method.</span></span>  
  
 <span data-ttu-id="dda48-241">Poniższy przykład trzy ciągi koduje i dekoduje je do jednej tablicy znaków.</span><span class="sxs-lookup"><span data-stu-id="dda48-241">The following example encodes three strings and then decodes them into a single array of characters.</span></span> <span data-ttu-id="dda48-242">Obsługuje ona indeks wskazującą położenie początkowe w tablicy znaków dla następnego zestawu znaków zdekodowanego.</span><span class="sxs-lookup"><span data-stu-id="dda48-242">It maintains an index that indicates the starting position in the character array for the next set of decoded characters.</span></span> <span data-ttu-id="dda48-243">Wywołuje <xref:System.Text.ASCIIEncoding.GetCharCount%2A> metody, aby upewnić się, że tablicy znaków jest wystarczająco duża, aby pomieścić wszystkich znaków zdekodowanego.</span><span class="sxs-lookup"><span data-stu-id="dda48-243">It calls the <xref:System.Text.ASCIIEncoding.GetCharCount%2A> method to ensure that the character array is large enough to accommodate all the decoded characters.</span></span> <span data-ttu-id="dda48-244">Następnie wywołuje <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> metoda zdekodować tablicy bajtów.</span><span class="sxs-lookup"><span data-stu-id="dda48-244">It then calls the <xref:System.Text.ASCIIEncoding.GetChars%28System.Byte%5B%5D%2CSystem.Int32%2CSystem.Int32%2CSystem.Char%5B%5D%2CSystem.Int32%29?displayProperty=nameWithType> method to decode the byte array.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#9](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/getchars1.cs#9)]
 [!code-vb[Conceptual.Encoding#9](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/getchars1.vb#9)]  
  
 <span data-ttu-id="dda48-245">Kodowanie i dekodowanie metody klasy pochodne <xref:System.Text.Encoding> zostały zaprojektowane do pracy w kompletny zestaw danych; oznacza to, że wszystkie dane, aby być szyfrowanym lub dekodowanym jest dostarczany w pojedynczym wywołaniu metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-245">The encoding and decoding methods of a class derived from <xref:System.Text.Encoding> are designed to work on a complete set of data; that is, all the data to be encoded or decoded is supplied in a single method call.</span></span> <span data-ttu-id="dda48-246">Jednak w niektórych przypadkach dane są dostępne w strumieniu, a dane można szyfrowanym lub dekodowanym może znajdować się tylko z oddzielnych operacji odczytu.</span><span class="sxs-lookup"><span data-stu-id="dda48-246">However, in some cases, data is available in a stream, and the data to be encoded or decoded may be available only from separate read operations.</span></span> <span data-ttu-id="dda48-247">Wymaga to operację kodowania lub dekodowania do zapamiętania dowolny zapisany stan z jego poprzedniego wywołania.</span><span class="sxs-lookup"><span data-stu-id="dda48-247">This requires the encoding or decoding operation to remember any saved state from its previous invocation.</span></span> <span data-ttu-id="dda48-248">Metody klas pochodnych <xref:System.Text.Encoder> i <xref:System.Text.Decoder> są w stanie obsłużyć kodowania i dekodowania operacje obejmujące wiele wywołań metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-248">Methods of classes derived from <xref:System.Text.Encoder> and <xref:System.Text.Decoder> are able to handle encoding and decoding operations that span multiple method calls.</span></span>  
  
 <span data-ttu-id="dda48-249"><xref:System.Text.Encoder> Obiekt określonego kodowania jest dostępny w tym kodowania firmy <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="dda48-249">An <xref:System.Text.Encoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetEncoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="dda48-250">A <xref:System.Text.Decoder> obiekt określonego kodowania jest dostępny w tym kodowania firmy <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="dda48-250">A <xref:System.Text.Decoder> object for a particular encoding is available from that encoding's <xref:System.Text.Encoding.GetDecoder%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="dda48-251">Dekodowania operacji, należy pamiętać, że klasy pochodne klasy <xref:System.Text.Decoder> obejmują <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> metody, ale nie ma metody, która odnosi się do <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="dda48-251">For decoding operations, note that classes derived from <xref:System.Text.Decoder> include a <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method, but they do not have a method that corresponds to <xref:System.Text.Encoding.GetString%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="dda48-252">Poniższy przykład ilustruje różnicę między <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> i <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> metody dekodowania tablicy bajtów Unicode.</span><span class="sxs-lookup"><span data-stu-id="dda48-252">The following example illustrates the difference between using the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> and <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> methods for decoding a Unicode byte array.</span></span> <span data-ttu-id="dda48-253">Przykład koduje ciąg, który zawiera niektóre znaki Unicode w pliku, a następnie używa dwie metody dekodowania zdekodować instrukcje na temat dziesięć bajtów w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="dda48-253">The example encodes a string that contains some Unicode characters to a file, and then uses the two decoding methods to decode them ten bytes at a time.</span></span> <span data-ttu-id="dda48-254">Ponieważ para zastępcza odbywa się w bajtach dziesiątego i jedenasty, są dekodowane w wywołaniach oddzielnych metodach.</span><span class="sxs-lookup"><span data-stu-id="dda48-254">Because a surrogate pair occurs in the tenth and eleventh bytes, it is decoded in separate method calls.</span></span> <span data-ttu-id="dda48-255">Dane wyjściowe pokazują, <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> metoda nie jest w stanie prawidłowo zdekodować bajtów i zamiast tego zastępuje je U + FFFD (znak zastępczy).</span><span class="sxs-lookup"><span data-stu-id="dda48-255">As the output shows, the <xref:System.Text.Encoding.GetChars%2A?displayProperty=nameWithType> method is not able to correctly decode the bytes and instead replaces them with U+FFFD (REPLACEMENT CHARACTER).</span></span> <span data-ttu-id="dda48-256">Z drugiej strony <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> metoda jest w stanie pomyślnie zdekodować tablicy bajtów, aby uzyskać oryginalny ciąg.</span><span class="sxs-lookup"><span data-stu-id="dda48-256">On the other hand, the <xref:System.Text.Decoder.GetChars%2A?displayProperty=nameWithType> method is able to successfully decode the byte array to get the original string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#10](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/stream1.cs#10)]
 [!code-vb[Conceptual.Encoding#10](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/stream1.vb#10)]  
  
<a name="FallbackStrategy"></a>   
## <a name="choosing-a-fallback-strategy"></a><span data-ttu-id="dda48-257">Wybieranie strategii rezerwowe</span><span class="sxs-lookup"><span data-stu-id="dda48-257">Choosing a Fallback Strategy</span></span>  
 <span data-ttu-id="dda48-258">Gdy metoda podejmuje próbę kodowania i dekodowania znak, ale nie istnieje żadne mapowanie, musi on implementować strategia rezerwowa, który określa sposób obsługi mapowania nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="dda48-258">When a method tries to encode or decode a character but no mapping exists, it must implement a fallback strategy that determines how the failed mapping should be handled.</span></span> <span data-ttu-id="dda48-259">Istnieją trzy typy rezerwowego strategii:</span><span class="sxs-lookup"><span data-stu-id="dda48-259">There are three types of fallback strategies:</span></span>  
  
-   <span data-ttu-id="dda48-260">Rezerwowe najlepszego dopasowania</span><span class="sxs-lookup"><span data-stu-id="dda48-260">Best-fit fallback</span></span>  
  
-   <span data-ttu-id="dda48-261">Zastąpienie rezerwowe</span><span class="sxs-lookup"><span data-stu-id="dda48-261">Replacement fallback</span></span>  
  
-   <span data-ttu-id="dda48-262">Wyjątek rezerwowe</span><span class="sxs-lookup"><span data-stu-id="dda48-262">Exception fallback</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="dda48-263">Najbardziej typowe problemy podczas operacji kodowania wystąpić, gdy znak Unicode nie można zamapować na kodowanie strony określonego kodu.</span><span class="sxs-lookup"><span data-stu-id="dda48-263">The most common problems in encoding operations occur when a Unicode character cannot be mapped to a particular code page encoding.</span></span> <span data-ttu-id="dda48-264">Najbardziej typowe problemy w dekodowanie operacje wystąpić, gdy sekwencje nieprawidłowy bajt nie można przetłumaczyć prawidłowych znaków Unicode.</span><span class="sxs-lookup"><span data-stu-id="dda48-264">The most common problems in decoding operations occur when invalid byte sequences cannot be translated into valid Unicode characters.</span></span> <span data-ttu-id="dda48-265">Z tego względu należy wiedzieć rezerwowego strategię, jakiej używa określonego obiektu kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-265">For these reasons, you should know which fallback strategy a particular encoding object uses.</span></span> <span data-ttu-id="dda48-266">Jeśli to możliwe, należy określić strategia rezerwowa używane przez obiekt kodowania, podczas tworzenia wystąpienia obiektu.</span><span class="sxs-lookup"><span data-stu-id="dda48-266">Whenever possible, you should specify the fallback strategy used by an encoding object when you instantiate the object.</span></span>  
  
<a name="BestFit"></a>   
### <a name="best-fit-fallback"></a><span data-ttu-id="dda48-267">Rezerwowe najlepszego dopasowania</span><span class="sxs-lookup"><span data-stu-id="dda48-267">Best-Fit Fallback</span></span>  
 <span data-ttu-id="dda48-268">Jeśli znak nie ma dokładnego dopasowania w kodowanie docelowe, kodera może podjąć próbę zamapowania go na podobny znak.</span><span class="sxs-lookup"><span data-stu-id="dda48-268">When a character does not have an exact match in the target encoding, the encoder can try to map it to a similar character.</span></span> <span data-ttu-id="dda48-269">(Rezerwowe najlepszego dopasowania jest przede wszystkim kodowania zamiast dekodowania problem.</span><span class="sxs-lookup"><span data-stu-id="dda48-269">(Best-fit fallback is mostly an encoding rather than a decoding issue.</span></span> <span data-ttu-id="dda48-270">Istnieje bardzo niewiele stron kodowych, które zawierają znaki nie mogą być poprawnie mapowane na Unicode.) Rezerwowe najlepszego dopasowania jest ustawieniem domyślnym dla strony kodowej i kodowania, które są pobierane przez zestaw znaków dwubajtowych <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> i <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType> przeciążenia.</span><span class="sxs-lookup"><span data-stu-id="dda48-270">There are very few code pages that contain characters that cannot be successfully mapped to Unicode.) Best-fit fallback is the default for code page and double-byte character set encodings that are retrieved by the <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> and <xref:System.Text.Encoding.GetEncoding%28System.String%29?displayProperty=nameWithType> overloads.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="dda48-271">Teoretycznie kodowania Unicode klasy w .NET (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding>, i <xref:System.Text.UTF32Encoding>) obsługę każdego znaku w każdym zestawie znaków, dzięki czemu może służyć, aby wyeliminować najlepszego dopasowania rezerwowego problemów.</span><span class="sxs-lookup"><span data-stu-id="dda48-271">In theory, the Unicode encoding classes provided in .NET (<xref:System.Text.UTF8Encoding>, <xref:System.Text.UnicodeEncoding>, and <xref:System.Text.UTF32Encoding>) support every character in every character set, so they can be used to eliminate best-fit fallback issues.</span></span>  
  
 <span data-ttu-id="dda48-272">Strategie najlepszego dopasowania się różnić w przypadku różne strony kodowe.</span><span class="sxs-lookup"><span data-stu-id="dda48-272">Best-fit strategies vary for different code pages.</span></span> <span data-ttu-id="dda48-273">Na przykład dla niektórych stron kodowych łaciński pełnej szerokości znaków mapy w celu bardziej powszechne połowę szerokości znaków alfabetu łacińskiego.</span><span class="sxs-lookup"><span data-stu-id="dda48-273">For example, for some code pages, full-width Latin characters map to the more common half-width Latin characters.</span></span> <span data-ttu-id="dda48-274">To mapowanie nie jest tworzona dla innych stron kodowych.</span><span class="sxs-lookup"><span data-stu-id="dda48-274">For other code pages, this mapping is not made.</span></span> <span data-ttu-id="dda48-275">Nawet w skuteczną strategię najlepszego dopasowania nie ma żadnych imaginable nadające się do niektórych znaków w niektórych kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-275">Even under an aggressive best-fit strategy, there is no imaginable fit for some characters in some encodings.</span></span> <span data-ttu-id="dda48-276">Na przykład chińskich ideogramów nie ma uzasadnione mapowania na stronę kodową 1252.</span><span class="sxs-lookup"><span data-stu-id="dda48-276">For example, a Chinese ideograph has no reasonable mapping to code page 1252.</span></span> <span data-ttu-id="dda48-277">W tym przypadku jest używany ciąg zastępujący.</span><span class="sxs-lookup"><span data-stu-id="dda48-277">In this case, a replacement string is used.</span></span> <span data-ttu-id="dda48-278">Domyślnie ten ciąg jest tylko pojedynczy znak zapytania (U + 003F).</span><span class="sxs-lookup"><span data-stu-id="dda48-278">By default, this string is just a single QUESTION MARK (U+003F).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="dda48-279">Strategie najlepszego dopasowania nie opisano szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="dda48-279">Best-fit strategies are not documented in detail.</span></span> <span data-ttu-id="dda48-280">Jednak kilka stron kodowych są udokumentowane na [konsorcjum Unicode](https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/) witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="dda48-280">However, several code pages are documented at the [Unicode Consortium's](https://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WindowsBestFit/) website.</span></span> <span data-ttu-id="dda48-281">Przejrzyj **readme.txt** plików w tym folderze opis jak interpretować pliki mapowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-281">Please review the **readme.txt** file in that folder for a description of how to interpret the mapping files.</span></span>
  
 <span data-ttu-id="dda48-282">W poniższym przykładzie użyto strony kodowej 1252 (Windows stronę kodową dla języków zachodnich Europejskiego), aby zilustrować mapowanie najlepszego dopasowania i jej wady.</span><span class="sxs-lookup"><span data-stu-id="dda48-282">The following example uses code page 1252 (the Windows code page for Western European languages) to illustrate best-fit mapping and its drawbacks.</span></span> <span data-ttu-id="dda48-283"><xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> Metoda służy do pobierania obiektu kodowania dla strony kodowej 1252.</span><span class="sxs-lookup"><span data-stu-id="dda48-283">The <xref:System.Text.Encoding.GetEncoding%28System.Int32%29?displayProperty=nameWithType> method is used to retrieve an encoding object for code page 1252.</span></span> <span data-ttu-id="dda48-284">Domyślnie używa dla znaków Unicode, których nie obsługuje mapowanie najlepszego dopasowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-284">By default, it uses a best-fit mapping for Unicode characters that it does not support.</span></span> <span data-ttu-id="dda48-285">Przykład tworzy ciąg, który zawiera trzy znaki spoza ASCII - KÓŁKACH LATIN CAPITAL LETTER S (U + 24C 8), DROBNY PIĘĆ (U + 2075), a INFINITY (U + 221E) - rozdzielone spacjami.</span><span class="sxs-lookup"><span data-stu-id="dda48-285">The example instantiates a string that contains three non-ASCII characters - CIRCLED LATIN CAPITAL LETTER S (U+24C8), SUPERSCRIPT FIVE (U+2075), and INFINITY (U+221E) - separated by spaces.</span></span> <span data-ttu-id="dda48-286">Wynika z przykładu pokazują, gdy ten ciąg jest zakodowany w trzech oryginalne znaki inne niż miejsca są zastępowane przez znak zapytania (U + 003F), PIĘCIU CYFR (U + 0035) i osiem CYFR (U + 0038).</span><span class="sxs-lookup"><span data-stu-id="dda48-286">As the output from the example shows, when the string is encoded, the three original non-space characters are replaced by QUESTION MARK (U+003F), DIGIT FIVE (U+0035), and DIGIT EIGHT (U+0038).</span></span> <span data-ttu-id="dda48-287">OSIEM CYFR zastępuje szczególnie niską nieobsługiwany znak NIESKOŃCZONOŚCI i znak zapytania oznacza, że żadne mapowanie była dostępna dla oryginalnego znaku.</span><span class="sxs-lookup"><span data-stu-id="dda48-287">DIGIT EIGHT is a particularly poor replacement for the unsupported INFINITY character, and QUESTION MARK indicates that no mapping was available for the original character.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#1](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1.cs#1)]
 [!code-vb[Conceptual.Encoding#1](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1.vb#1)]  
  
 <span data-ttu-id="dda48-288">Mapowanie jest domyślnym zachowaniem <xref:System.Text.Encoding> obiektu kodującej danych Unicode do danych strony kodowej, a istnieją starsze aplikacje, które zależą od tego zachowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-288">Best-fit mapping is the default behavior for an <xref:System.Text.Encoding> object that encodes Unicode data into code page data, and there are legacy applications that rely on this behavior.</span></span> <span data-ttu-id="dda48-289">Jednak większość nowych aplikacji należy unikać najlepszego dopasowania zachowanie ze względów bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="dda48-289">However, most new applications should avoid best-fit behavior for security reasons.</span></span> <span data-ttu-id="dda48-290">Na przykład aplikacje powinny nie umieszczać nazwy domeny za pomocą kodowania najlepszego dopasowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-290">For example, applications should not put a domain name through a best-fit encoding.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="dda48-291">Możesz również wdrożyć niestandardowe mapowanie rezerwowego najlepszego dopasowania dla kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-291">You can also implement a custom best-fit fallback mapping for an encoding.</span></span> <span data-ttu-id="dda48-292">Aby uzyskać więcej informacji, zobacz [realizację strategii rezerwowe niestandardowe](../../../docs/standard/base-types/character-encoding.md#Custom) sekcji.</span><span class="sxs-lookup"><span data-stu-id="dda48-292">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="dda48-293">Jeśli rezerwowe najlepszego dopasowania jest ustawieniem domyślnym dla obiektu kodowania, możesz wybrać inny strategia rezerwowa po pobraniu <xref:System.Text.Encoding> obiektu przez wywołanie metody <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> lub <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> przeciążenia.</span><span class="sxs-lookup"><span data-stu-id="dda48-293">If best-fit fallback is the default for an encoding object, you can choose another fallback strategy when you retrieve an <xref:System.Text.Encoding> object by calling the <xref:System.Text.Encoding.GetEncoding%28System.Int32%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> or <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> overload.</span></span> <span data-ttu-id="dda48-294">Poniższa sekcja zawiera przykład, który zastępuje każdy znak, który nie może być mapowana na stronę kodową 1252 gwiazdką (\*).</span><span class="sxs-lookup"><span data-stu-id="dda48-294">The following section includes an example that replaces each character that cannot be mapped to code page 1252 with an asterisk (\*).</span></span>  
  
 [!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
 [!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]  
  
<a name="Replacement"></a>   
### <a name="replacement-fallback"></a><span data-ttu-id="dda48-295">Zastąpienie rezerwowe</span><span class="sxs-lookup"><span data-stu-id="dda48-295">Replacement Fallback</span></span>  
 <span data-ttu-id="dda48-296">Jeśli znak nie ma dokładnego dopasowania w systemie docelowym, ale istnieje nie odpowiednie znak, który mogą być mapowane na, aplikacja może określić znak zastępczy lub ciąg.</span><span class="sxs-lookup"><span data-stu-id="dda48-296">When a character does not have an exact match in the target scheme, but there is no appropriate character that it can be mapped to, the application can specify a replacement character or string.</span></span> <span data-ttu-id="dda48-297">Jest to domyślne zachowanie dla dekoder Unicode, która zastępuje dowolnej sekwencji dwubajtowy, który nie można go zdekodować REPLACEMENT_CHARACTER (U + FFFD).</span><span class="sxs-lookup"><span data-stu-id="dda48-297">This is the default behavior for the Unicode decoder, which replaces any two-byte sequence that it cannot decode with REPLACEMENT_CHARACTER (U+FFFD).</span></span> <span data-ttu-id="dda48-298">Warto również domyślne zachowanie <xref:System.Text.ASCIIEncoding> klasy, która zastępuje każdy znak, który go nie kodowania i dekodowania znakiem zapytania.</span><span class="sxs-lookup"><span data-stu-id="dda48-298">It is also the default behavior of the <xref:System.Text.ASCIIEncoding> class, which replaces each character that it cannot encode or decode with a question mark.</span></span> <span data-ttu-id="dda48-299">Poniższy przykład ilustruje znaków zastępczych dla ciągu Unicode z poprzedniego przykładu.</span><span class="sxs-lookup"><span data-stu-id="dda48-299">The following example illustrates character replacement for the Unicode string from the previous example.</span></span> <span data-ttu-id="dda48-300">Dane wyjściowe pokazują, każdy znak, który można odkodować wartości bajtów ASCII zastępuje 0x3F, co w kodzie ASCII, znaku zapytania.</span><span class="sxs-lookup"><span data-stu-id="dda48-300">As the output shows, each character that cannot be decoded into an ASCII byte value is replaced by 0x3F, which is the ASCII code for a question mark.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#2](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/replacementascii.cs#2)]
 [!code-vb[Conceptual.Encoding#2](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/replacementascii.vb#2)]  
  
 <span data-ttu-id="dda48-301">.NET zawiera <xref:System.Text.EncoderReplacementFallback> i <xref:System.Text.DecoderReplacementFallback> klasy, które Zastąp ciąg zastępujący, jeśli znak nie jest mapowany w kodowania lub dekodowania operacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-301">.NET includes the <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallback> classes, which substitute a replacement string if a character does not map exactly in an encoding or decoding operation.</span></span> <span data-ttu-id="dda48-302">Domyślnie ten ciąg zastępczy jest znak zapytania, ale można wywoływać przeciążenia konstruktora klasy, aby wybrać inny ciąg.</span><span class="sxs-lookup"><span data-stu-id="dda48-302">By default, this replacement string is a question mark, but you can call a class constructor overload to choose a different string.</span></span> <span data-ttu-id="dda48-303">Zazwyczaj w ciągu zamiennym jest pojedynczy znak, ale nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="dda48-303">Typically, the replacement string is a single character, although this is not a requirement.</span></span> <span data-ttu-id="dda48-304">Poniższy przykład umożliwia zmianę zachowania kodera strona 1252 kodu przez utworzenie wystąpienia <xref:System.Text.EncoderReplacementFallback> obiektu, który używa znak gwiazdki (\*) jako ciąg zastępujący.</span><span class="sxs-lookup"><span data-stu-id="dda48-304">The following example changes the behavior of the code page 1252 encoder by instantiating an <xref:System.Text.EncoderReplacementFallback> object that uses an asterisk (\*) as a replacement string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#3](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/bestfit1a.cs#3)]
 [!code-vb[Conceptual.Encoding#3](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/bestfit1a.vb#3)]  
  
> [!NOTE]
>  <span data-ttu-id="dda48-305">Możesz również wdrożyć zastępczej klasie dla kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-305">You can also implement a replacement class for an encoding.</span></span> <span data-ttu-id="dda48-306">Aby uzyskać więcej informacji, zobacz [realizację strategii rezerwowe niestandardowe](../../../docs/standard/base-types/character-encoding.md#Custom) sekcji.</span><span class="sxs-lookup"><span data-stu-id="dda48-306">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="dda48-307">Oprócz znaku zapytania (U + 003F) znak zastępczy Unicode (U + FFFD) jest często stosowany jako ciąg zastępujący, szczególnie w przypadku, gdy dekodowanie sekwencje bajtów, które nie można pomyślnie przekształcić znaków Unicode.</span><span class="sxs-lookup"><span data-stu-id="dda48-307">In addition to QUESTION MARK (U+003F), the Unicode REPLACEMENT CHARACTER (U+FFFD) is commonly used as a replacement string, particularly when decoding byte sequences that cannot be successfully translated into Unicode characters.</span></span> <span data-ttu-id="dda48-308">Jednak masz swobodę wyboru każdy ciąg zastępczy i może zawierać wiele znaków.</span><span class="sxs-lookup"><span data-stu-id="dda48-308">However, you are free to choose any replacement string, and it can contain multiple characters.</span></span>  
  
<a name="Exception"></a>   
### <a name="exception-fallback"></a><span data-ttu-id="dda48-309">Wyjątek rezerwowe</span><span class="sxs-lookup"><span data-stu-id="dda48-309">Exception Fallback</span></span>  
 <span data-ttu-id="dda48-310">Zamiast podawać najlepszego dopasowania rezerwowe lub ciąg zastępujący, może zgłosić koder <xref:System.Text.EncoderFallbackException> Jeśli nie może zakodować zestawu znaków i może zgłosić dekodera <xref:System.Text.DecoderFallbackException> przypadku nie można zdekodować tablicy bajtów.</span><span class="sxs-lookup"><span data-stu-id="dda48-310">Instead of providing a best-fit fallback or a replacement string, an encoder can throw an <xref:System.Text.EncoderFallbackException> if it is unable to encode a set of characters, and a decoder can throw a <xref:System.Text.DecoderFallbackException> if it is unable to decode a byte array.</span></span> <span data-ttu-id="dda48-311">Aby zgłosić wyjątek w kodowania i dekodowania operacje, podaj <xref:System.Text.EncoderExceptionFallback> obiektu i <xref:System.Text.DecoderExceptionFallback> obiektu, odpowiednio do <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-311">To throw an exception in encoding and decoding operations, you supply an <xref:System.Text.EncoderExceptionFallback> object and a <xref:System.Text.DecoderExceptionFallback> object, respectively, to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dda48-312">Poniższy przykład ilustruje wyjątków rezerwowego z <xref:System.Text.ASCIIEncoding> klasy.</span><span class="sxs-lookup"><span data-stu-id="dda48-312">The following example illustrates exception fallback with the <xref:System.Text.ASCIIEncoding> class.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#4](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/exceptionascii.cs#4)]
 [!code-vb[Conceptual.Encoding#4](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/exceptionascii.vb#4)]  
  
> [!NOTE]
>  <span data-ttu-id="dda48-313">Można również zaimplementować niestandardowy wyjątek procedury obsługi dla operacji kodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-313">You can also implement a custom exception handler for an encoding operation.</span></span> <span data-ttu-id="dda48-314">Aby uzyskać więcej informacji, zobacz [realizację strategii rezerwowe niestandardowe](../../../docs/standard/base-types/character-encoding.md#Custom) sekcji.</span><span class="sxs-lookup"><span data-stu-id="dda48-314">For more information, see the [Implementing a Custom Fallback Strategy](../../../docs/standard/base-types/character-encoding.md#Custom) section.</span></span>  
  
 <span data-ttu-id="dda48-315"><xref:System.Text.EncoderFallbackException> i <xref:System.Text.DecoderFallbackException> obiektów należy podać następujące informacje o warunku, który spowodował wyjątek:</span><span class="sxs-lookup"><span data-stu-id="dda48-315">The <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide the following information about the condition that caused the exception:</span></span>  
  
-   <span data-ttu-id="dda48-316"><xref:System.Text.EncoderFallbackException> Obiekt zawiera <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> metody, która wskazuje, czy znak lub znaki, które nie może zostać zakodowana reprezentują para zastępcza Nieznany (w tym przypadku metoda ta zwraca `true`) lub nieznany pojedynczego znaku (w takiej sytuacji, metoda zwraca `false`).</span><span class="sxs-lookup"><span data-stu-id="dda48-316">The <xref:System.Text.EncoderFallbackException> object includes an <xref:System.Text.EncoderFallbackException.IsUnknownSurrogate%2A> method, which indicates whether the character or characters that cannot be encoded represent an unknown surrogate pair (in which case, the method returns `true`) or an unknown single character (in which case, the method returns `false`).</span></span> <span data-ttu-id="dda48-317">Znaki w para zastępcza są dostępne z <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> i <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="dda48-317">The characters in the surrogate pair are available from the <xref:System.Text.EncoderFallbackException.CharUnknownHigh%2A?displayProperty=nameWithType> and <xref:System.Text.EncoderFallbackException.CharUnknownLow%2A?displayProperty=nameWithType> properties.</span></span> <span data-ttu-id="dda48-318">Nieznany pojedynczy znak jest dostępne z <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="dda48-318">The unknown single character is available from the <xref:System.Text.EncoderFallbackException.CharUnknown%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="dda48-319"><xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> Właściwość wskazuje pozycji w ciągu odnaleziono pierwszy znak, który nie jest zaszyfrowana.</span><span class="sxs-lookup"><span data-stu-id="dda48-319">The <xref:System.Text.EncoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the position in the string at which the first character that could not be encoded was found.</span></span>  
  
-   <span data-ttu-id="dda48-320"><xref:System.Text.DecoderFallbackException> Obiekt zawiera <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> właściwość, która zwraca tablicę bajtów, które nie mogą zostać zdekodowane.</span><span class="sxs-lookup"><span data-stu-id="dda48-320">The <xref:System.Text.DecoderFallbackException> object includes a <xref:System.Text.DecoderFallbackException.BytesUnknown%2A> property that returns an array of bytes that cannot be decoded.</span></span> <span data-ttu-id="dda48-321"><xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> Właściwość wskazuje pozycję początkową nieznany bajtów.</span><span class="sxs-lookup"><span data-stu-id="dda48-321">The <xref:System.Text.DecoderFallbackException.Index%2A?displayProperty=nameWithType> property indicates the starting position of the unknown bytes.</span></span>  
  
 <span data-ttu-id="dda48-322">Mimo że <xref:System.Text.EncoderFallbackException> i <xref:System.Text.DecoderFallbackException> obiektów podaj odpowiednie informacje diagnostyczne o wyjątku, nie zapewniają one dostęp do kodowania lub dekodowania buforu.</span><span class="sxs-lookup"><span data-stu-id="dda48-322">Although the <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> objects provide adequate diagnostic information about the exception, they do not provide access to the encoding or decoding buffer.</span></span> <span data-ttu-id="dda48-323">W związku z tym nie zezwalają na nieprawidłowe dane do zastąpienia lub poprawione w metodzie kodowania lub dekodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-323">Therefore, they do not allow invalid data to be replaced or corrected within the encoding or decoding method.</span></span>  
  
<a name="Custom"></a>   
## <a name="implementing-a-custom-fallback-strategy"></a><span data-ttu-id="dda48-324">Implementowanie niestandardowego strategia rezerwowa</span><span class="sxs-lookup"><span data-stu-id="dda48-324">Implementing a Custom Fallback Strategy</span></span>  
 <span data-ttu-id="dda48-325">Oprócz mapowanie najlepszego dopasowania są implementowane wewnętrznie przez stron kodowych, .NET zawiera następujące klasy do implementowania strategia rezerwowa:</span><span class="sxs-lookup"><span data-stu-id="dda48-325">In addition to the best-fit mapping that is implemented internally by code pages, .NET includes the following classes for implementing a fallback strategy:</span></span>  
  
-   <span data-ttu-id="dda48-326">Użyj <xref:System.Text.EncoderReplacementFallback> i <xref:System.Text.EncoderReplacementFallbackBuffer> zostać zastąpione znaki kodowania operacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-326">Use <xref:System.Text.EncoderReplacementFallback> and <xref:System.Text.EncoderReplacementFallbackBuffer> to replace characters in encoding operations.</span></span>  
  
-   <span data-ttu-id="dda48-327">Użyj <xref:System.Text.DecoderReplacementFallback> i <xref:System.Text.DecoderReplacementFallbackBuffer> do zastąpienia znaków dekodowanie operacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-327">Use <xref:System.Text.DecoderReplacementFallback> and <xref:System.Text.DecoderReplacementFallbackBuffer> to replace characters in decoding operations.</span></span>  
  
-   <span data-ttu-id="dda48-328">Użyj <xref:System.Text.EncoderExceptionFallback> i <xref:System.Text.EncoderExceptionFallbackBuffer> zgłosić <xref:System.Text.EncoderFallbackException> po znaku nie może być zakodowany.</span><span class="sxs-lookup"><span data-stu-id="dda48-328">Use <xref:System.Text.EncoderExceptionFallback> and <xref:System.Text.EncoderExceptionFallbackBuffer> to throw an <xref:System.Text.EncoderFallbackException> when a character cannot be encoded.</span></span>  
  
-   <span data-ttu-id="dda48-329">Użyj <xref:System.Text.DecoderExceptionFallback> i <xref:System.Text.DecoderExceptionFallbackBuffer> zgłosić <xref:System.Text.DecoderFallbackException> po znaku nie mogą zostać zdekodowane.</span><span class="sxs-lookup"><span data-stu-id="dda48-329">Use <xref:System.Text.DecoderExceptionFallback> and <xref:System.Text.DecoderExceptionFallbackBuffer> to throw a <xref:System.Text.DecoderFallbackException> when a character cannot be decoded.</span></span>  
  
 <span data-ttu-id="dda48-330">Ponadto można zaimplementować niestandardowego rozwiązania, które używa rezerwowe najlepszego dopasowania, rezerwowy zastąpienia lub rezerwowe wyjątek, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="dda48-330">In addition, you can implement a custom solution that uses best-fit fallback, replacement fallback, or exception fallback, by following these steps:</span></span>  
  
1.  <span data-ttu-id="dda48-331">Wyprowadzić klasę z <xref:System.Text.EncoderFallback> operacji kodowania i z <xref:System.Text.DecoderFallback> dekodowania operacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-331">Derive a class from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span>  
  
2.  <span data-ttu-id="dda48-332">Wyprowadzić klasę z <xref:System.Text.EncoderFallbackBuffer> operacji kodowania i z <xref:System.Text.DecoderFallbackBuffer> dekodowania operacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-332">Derive a class from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span>  
  
3.  <span data-ttu-id="dda48-333">Do rezerwowej, gdy wyjątek jest wstępnie zdefiniowane <xref:System.Text.EncoderFallbackException> i <xref:System.Text.DecoderFallbackException> klasy nie spełnia Twoich potrzeb, takich jak wyprowadzenia klasy z obiektu wyjątku <xref:System.Exception> lub <xref:System.ArgumentException>.</span><span class="sxs-lookup"><span data-stu-id="dda48-333">For exception fallback, if the predefined <xref:System.Text.EncoderFallbackException> and <xref:System.Text.DecoderFallbackException> classes do not meet your needs, derive a class from an exception object such as <xref:System.Exception> or <xref:System.ArgumentException>.</span></span>  
  
### <a name="deriving-from-encoderfallback-or-decoderfallback"></a><span data-ttu-id="dda48-334">Wyprowadzanie z EncoderFallback lub DecoderFallback</span><span class="sxs-lookup"><span data-stu-id="dda48-334">Deriving from EncoderFallback or DecoderFallback</span></span>  
 <span data-ttu-id="dda48-335">Aby zaimplementować niestandardowe rozwiązanie alternatywne, należy utworzyć klasę, która dziedziczy po elemencie <xref:System.Text.EncoderFallback> operacji kodowania i z <xref:System.Text.DecoderFallback> dekodowania operacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-335">To implement a custom fallback solution, you must create a class that inherits from <xref:System.Text.EncoderFallback> for encoding operations, and from <xref:System.Text.DecoderFallback> for decoding operations.</span></span> <span data-ttu-id="dda48-336">Wystąpień tych klas są przekazywane do <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> metod i jako pośrednik między klasą kodowania i implementacji rezerwowej.</span><span class="sxs-lookup"><span data-stu-id="dda48-336">Instances of these classes are passed to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method and serve as the intermediary between the encoding class and the fallback implementation.</span></span>  
  
 <span data-ttu-id="dda48-337">Podczas tworzenia niestandardowego rozwiązania rezerwowe dla koder i dekoder, należy zaimplementować następujące elementy członkowskie:</span><span class="sxs-lookup"><span data-stu-id="dda48-337">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>  
  
-   <span data-ttu-id="dda48-338"><xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> Lub <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> właściwość, która zwraca maksymalną liczbę znaków, które mogą rezerwowego najlepszego dopasowania, wymiana albo wyjątek wróć do Zamień jeden znak.</span><span class="sxs-lookup"><span data-stu-id="dda48-338">The <xref:System.Text.EncoderFallback.MaxCharCount%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.MaxCharCount%2A?displayProperty=nameWithType> property, which returns the maximum possible number of characters that the best-fit, replacement, or exception fallback can return to replace a single character.</span></span> <span data-ttu-id="dda48-339">Dla niestandardowego wyjątku rezerwowy jego wartość wynosi zero.</span><span class="sxs-lookup"><span data-stu-id="dda48-339">For a custom exception fallback, its value is zero.</span></span>  
  
-   <span data-ttu-id="dda48-340"><xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> Lub <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> metody, która zwraca niestandardowe <xref:System.Text.EncoderFallbackBuffer> lub <xref:System.Text.DecoderFallbackBuffer> implementacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-340">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method, which returns your custom <xref:System.Text.EncoderFallbackBuffer> or <xref:System.Text.DecoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="dda48-341">Metoda jest wywoływana przez koder po napotkaniu pierwszego znaku, który nie może pomyślnie kodowanie lub przez dekoder, po napotkaniu pierwszego bajtu, która nie może pomyślnie dekodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-341">The method is called by the encoder when it encounters the first character that it is unable to successfully encode, or by the decoder when it encounters the first byte that it is unable to successfully decode.</span></span>  
  
### <a name="deriving-from-encoderfallbackbuffer-or-decoderfallbackbuffer"></a><span data-ttu-id="dda48-342">Wyprowadzanie z EncoderFallbackBuffer lub DecoderFallbackBuffer</span><span class="sxs-lookup"><span data-stu-id="dda48-342">Deriving from EncoderFallbackBuffer or DecoderFallbackBuffer</span></span>  
 <span data-ttu-id="dda48-343">Aby zaimplementować niestandardowe rozwiązanie alternatywne, również należy utworzyć klasę, która dziedziczy po elemencie <xref:System.Text.EncoderFallbackBuffer> operacji kodowania i z <xref:System.Text.DecoderFallbackBuffer> dekodowania operacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-343">To implement a custom fallback solution, you must also create a class that inherits from <xref:System.Text.EncoderFallbackBuffer> for encoding operations, and from <xref:System.Text.DecoderFallbackBuffer> for decoding operations.</span></span> <span data-ttu-id="dda48-344">Wystąpień tych klas są zwracane przez <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> metody <xref:System.Text.EncoderFallback> i <xref:System.Text.DecoderFallback> klasy.</span><span class="sxs-lookup"><span data-stu-id="dda48-344">Instances of these classes are returned by the <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A> method  of the <xref:System.Text.EncoderFallback> and <xref:System.Text.DecoderFallback> classes.</span></span> <span data-ttu-id="dda48-345"><xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> Metoda jest wywoływana przez koder po napotkaniu pierwszego znaku, który nie jest możliwe do kodowania, i <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> metoda jest wywoływana przez dekoder po napotkaniu co najmniej jeden bajtów, które nie jest w stanie do odkodowania.</span><span class="sxs-lookup"><span data-stu-id="dda48-345">The <xref:System.Text.EncoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the encoder when it encounters the first character that it is not able to encode, and the <xref:System.Text.DecoderFallback.CreateFallbackBuffer%2A?displayProperty=nameWithType> method is called by the decoder when it encounters one or more bytes that it is not able to decode.</span></span> <span data-ttu-id="dda48-346"><xref:System.Text.EncoderFallbackBuffer> i <xref:System.Text.DecoderFallbackBuffer> klasy zapewniają implementacji rezerwowej.</span><span class="sxs-lookup"><span data-stu-id="dda48-346">The <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> classes provide the fallback implementation.</span></span> <span data-ttu-id="dda48-347">Każde wystąpienie reprezentuje bufor, który zawiera znaki powrotu, które zastąpi znak, który nie może zostać zakodowana lub sekwencja bajtów, które nie mogą zostać zdekodowane.</span><span class="sxs-lookup"><span data-stu-id="dda48-347">Each instance represents a buffer that contains the fallback characters that will replace the character that cannot be encoded or the byte sequence that cannot be decoded.</span></span>  
  
 <span data-ttu-id="dda48-348">Podczas tworzenia niestandardowego rozwiązania rezerwowe dla koder i dekoder, należy zaimplementować następujące elementy członkowskie:</span><span class="sxs-lookup"><span data-stu-id="dda48-348">When you create a custom fallback solution for an encoder or decoder, you must implement the following members:</span></span>  
  
-   <span data-ttu-id="dda48-349"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> Lub <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-349">The <xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dda48-350"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> jest wywoływana przez koder zapewnienie bufora rezerwowy z informacjami o znak, który go nie można zakodować.</span><span class="sxs-lookup"><span data-stu-id="dda48-350"><xref:System.Text.EncoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> is called by the encoder to provide the fallback buffer with information about the character that it cannot encode.</span></span> <span data-ttu-id="dda48-351">Ponieważ znak, który ma być zdekodowany, może być para zastępcza, ta metoda jest przeciążony.</span><span class="sxs-lookup"><span data-stu-id="dda48-351">Because the character to be encoded may be a surrogate pair, this method is overloaded.</span></span> <span data-ttu-id="dda48-352">Kilkoma przeciążeniami jest przekazywany znak, który ma być zdekodowany i jej indeks w ciągu.</span><span class="sxs-lookup"><span data-stu-id="dda48-352">One overload is passed the character to be encoded and its index in the string.</span></span> <span data-ttu-id="dda48-353">Drugie przeciążenie jest przekazywany wysokim i niskim zastępcze wraz z jej indeks w ciągu.</span><span class="sxs-lookup"><span data-stu-id="dda48-353">The second overload is passed the high and low surrogate along with its index in the string.</span></span> <span data-ttu-id="dda48-354"><xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> Metoda jest wywoływana przez dekoder zapewnienie bufora rezerwowy informacji na temat bajtów, które nie można go zdekodować.</span><span class="sxs-lookup"><span data-stu-id="dda48-354">The <xref:System.Text.DecoderFallbackBuffer.Fallback%2A?displayProperty=nameWithType> method is called by the decoder to provide the fallback buffer with information about the bytes that it cannot decode.</span></span> <span data-ttu-id="dda48-355">Ta metoda jest przekazywana tablicę bajtów, które nie można go zdekodować, wraz z indeks pierwszego bajtu.</span><span class="sxs-lookup"><span data-stu-id="dda48-355">This method is passed an array of bytes that it cannot decode, along with the index of the first byte.</span></span> <span data-ttu-id="dda48-356">Określ metodę planu awaryjnego powinna zwrócić `true` Jeśli bufora rezerwowy może dostarczyć najlepszego dopasowania lub znak zastępczy lub znaków dwubajtowych; w przeciwnym razie powinna zwrócić `false`.</span><span class="sxs-lookup"><span data-stu-id="dda48-356">The fallback method should return `true` if the fallback buffer can supply a best-fit or replacement character or characters; otherwise, it should return `false`.</span></span> <span data-ttu-id="dda48-357">Dla wyjątku rezerwowy Określ metodę planu awaryjnego należy zgłosić wyjątek.</span><span class="sxs-lookup"><span data-stu-id="dda48-357">For an exception fallback, the fallback method should throw an exception.</span></span>  
  
-   <span data-ttu-id="dda48-358"><xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> Lub <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> metody, która jest wywoływana wielokrotnie przez koder lub dekoder, które można pobrać następny znak z bufora rezerwowy.</span><span class="sxs-lookup"><span data-stu-id="dda48-358">The <xref:System.Text.EncoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.GetNextChar%2A?displayProperty=nameWithType> method, which is called repeatedly by the encoder or decoder to get the next character from the fallback buffer.</span></span> <span data-ttu-id="dda48-359">Gdy wszystkie znaki powrotu zostały zwrócone, metoda powinna zwrócić U + 0000.</span><span class="sxs-lookup"><span data-stu-id="dda48-359">When all fallback characters have been returned, the method should return U+0000.</span></span>  
  
-   <span data-ttu-id="dda48-360"><xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> Lub <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> właściwość, która zwraca liczbę pozostałych znaków w buforze rezerwowego.</span><span class="sxs-lookup"><span data-stu-id="dda48-360">The <xref:System.Text.EncoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Remaining%2A?displayProperty=nameWithType> property, which returns the number of characters remaining in the fallback buffer.</span></span>  
  
-   <span data-ttu-id="dda48-361"><xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> Lub <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> metody, która przenosi bieżąca pozycja w buforze rezerwowym poprzedni znak.</span><span class="sxs-lookup"><span data-stu-id="dda48-361">The <xref:System.Text.EncoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.MovePrevious%2A?displayProperty=nameWithType> method, which moves the current position in the fallback buffer to the previous character.</span></span>  
  
-   <span data-ttu-id="dda48-362"><xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> Lub <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> metody, która ponownie inicjuje bufora rezerwowy.</span><span class="sxs-lookup"><span data-stu-id="dda48-362">The <xref:System.Text.EncoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> or <xref:System.Text.DecoderFallbackBuffer.Reset%2A?displayProperty=nameWithType> method, which reinitializes the fallback buffer.</span></span>  
  
 <span data-ttu-id="dda48-363">W przypadku powrotu najlepszego dopasowania lub zastąpienie rezerwowe implementacji rezerwowej klasy pochodne klasy <xref:System.Text.EncoderFallbackBuffer> i <xref:System.Text.DecoderFallbackBuffer> również utrzymania dwa pola wystąpieniem prywatnym: Dokładna liczba znaków w buforze; i indeks następnego znaku bufor do zwrócenia.</span><span class="sxs-lookup"><span data-stu-id="dda48-363">If the fallback implementation is a best-fit fallback or a replacement fallback, the classes derived from <xref:System.Text.EncoderFallbackBuffer> and <xref:System.Text.DecoderFallbackBuffer> also maintain two private instance fields: the exact number of characters in the buffer; and the index of the next character in the buffer to return.</span></span>  
  
### <a name="an-encoderfallback-example"></a><span data-ttu-id="dda48-364">Przykład EncoderFallback</span><span class="sxs-lookup"><span data-stu-id="dda48-364">An EncoderFallback Example</span></span>  
 <span data-ttu-id="dda48-365">Wcześniejszy przykład używany zastąpienie rezerwowego do zastępowania znaków Unicode, który nie odpowiada na znaki ASCII gwiazdką (\*).</span><span class="sxs-lookup"><span data-stu-id="dda48-365">An earlier example used replacement fallback to replace Unicode characters that did not correspond to ASCII characters with an asterisk (\*).</span></span> <span data-ttu-id="dda48-366">W poniższym przykładzie użyto niestandardowych implementacji rezerwowej najlepszego dopasowania zamiast tego, aby zapewnić lepsze mapowanie znaki spoza zestawu ASCII.</span><span class="sxs-lookup"><span data-stu-id="dda48-366">The following example uses a custom best-fit fallback implementation instead to provide a better mapping of non-ASCII characters.</span></span>  
  
 <span data-ttu-id="dda48-367">Poniższy kod definiuje klasę o nazwie `CustomMapper` , jest tworzony na podstawie <xref:System.Text.EncoderFallback> do obsługi mapowanie najlepszego dopasowania znaki spoza zestawu ASCII.</span><span class="sxs-lookup"><span data-stu-id="dda48-367">The following code defines a class named `CustomMapper` that is derived from <xref:System.Text.EncoderFallback> to handle the best-fit mapping of non-ASCII characters.</span></span> <span data-ttu-id="dda48-368">Jego `CreateFallbackBuffer` metoda zwraca `CustomMapperFallbackBuffer` obiektu, który zapewnia <xref:System.Text.EncoderFallbackBuffer> implementacji.</span><span class="sxs-lookup"><span data-stu-id="dda48-368">Its `CreateFallbackBuffer` method returns a `CustomMapperFallbackBuffer` object, which provides the <xref:System.Text.EncoderFallbackBuffer> implementation.</span></span> <span data-ttu-id="dda48-369">`CustomMapper` Klasy używa <xref:System.Collections.Generic.Dictionary%602> obiekt ma być przechowywany mapowania nieobsługiwane znaki Unicode (wartość klucza) i ich odpowiadające im znaki 8-bitową, (które są przechowywane w dwóch następujących po sobie bajtów w 64-bitowa liczba całkowita).</span><span class="sxs-lookup"><span data-stu-id="dda48-369">The `CustomMapper` class uses a <xref:System.Collections.Generic.Dictionary%602> object to store the mappings of unsupported Unicode characters (the key value) and their corresponding 8-bit characters (which are stored in two consecutive bytes in a 64-bit integer).</span></span> <span data-ttu-id="dda48-370">Aby udostępnić to mapowanie bufora rezerwowy, `CustomMapper` wystąpienia jest przekazywany jako parametr do `CustomMapperFallbackBuffer` konstruktora klasy.</span><span class="sxs-lookup"><span data-stu-id="dda48-370">To make this mapping available to the fallback buffer, the `CustomMapper` instance is passed as a parameter to the `CustomMapperFallbackBuffer` class constructor.</span></span> <span data-ttu-id="dda48-371">Ponieważ najdłuższy mapowanie jest ciąg "INF" znak Unicode, U + 221E, `MaxCharCount` właściwość zwraca wartość 3.</span><span class="sxs-lookup"><span data-stu-id="dda48-371">Because the longest mapping is the string "INF" for the Unicode character U+221E, the `MaxCharCount` property returns 3.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#5](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#5)]
 [!code-vb[Conceptual.Encoding#5](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#5)]  
  
 <span data-ttu-id="dda48-372">Poniższy kod definiuje `CustomMapperFallbackBuffer` klasy, która jest pochodną <xref:System.Text.EncoderFallbackBuffer>.</span><span class="sxs-lookup"><span data-stu-id="dda48-372">The following code defines the `CustomMapperFallbackBuffer` class, which is derived from <xref:System.Text.EncoderFallbackBuffer>.</span></span> <span data-ttu-id="dda48-373">Słownik zawierający mapowanie najlepszego dopasowania i który jest zdefiniowany w `CustomMapper` wystąpienie jest dostępne z jej konstruktora klasy.</span><span class="sxs-lookup"><span data-stu-id="dda48-373">The dictionary that contains best-fit mappings and that is defined in the `CustomMapper` instance is available from its class constructor.</span></span> <span data-ttu-id="dda48-374">Jego `Fallback` metoda zwraca `true` ewentualne znaków Unicode, których nie można zakodować kodera ASCII są zdefiniowane w słowniku mapowania; w przeciwnym razie zwraca `false`.</span><span class="sxs-lookup"><span data-stu-id="dda48-374">Its `Fallback` method returns `true` if any of the Unicode characters that the ASCII encoder cannot encode are defined in the mapping dictionary; otherwise, it returns `false`.</span></span> <span data-ttu-id="dda48-375">Dla każdego działania rezerwowego prywatna `count` zmienna oznacza liczbę znaków, które będą jeszcze zwracane i prywatna `index` zmiennej wskazuje pozycję buforu ciągu `charsToReturn`, następnego znaku do zwrócenia.</span><span class="sxs-lookup"><span data-stu-id="dda48-375">For each fallback, the private `count` variable indicates the number of characters that remain to be returned, and the private `index` variable indicates the position in the string buffer, `charsToReturn`, of the next character to return.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#6](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#6)]
 [!code-vb[Conceptual.Encoding#6](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#6)]  
  
 <span data-ttu-id="dda48-376">Poniższy kod tworzy następnie wystąpienie `CustomMapper` obiektu i przekazuje go do wystąpienia <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="dda48-376">The following code then instantiates the `CustomMapper` object and passes an instance of it to the <xref:System.Text.Encoding.GetEncoding%28System.String%2CSystem.Text.EncoderFallback%2CSystem.Text.DecoderFallback%29?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="dda48-377">Dane wyjściowe wskazują, że najlepszego dopasowania implementacji rezerwowej pomyślnie obsługuje trzy znaki spoza zestawu ASCII w oryginalnym ciągu.</span><span class="sxs-lookup"><span data-stu-id="dda48-377">The output indicates that the best-fit fallback implementation successfully handles the three non-ASCII characters in the original string.</span></span>  
  
 [!code-csharp[Conceptual.Encoding#7](../../../samples/snippets/csharp/VS_Snippets_CLR/conceptual.encoding/cs/custom1.cs#7)]
 [!code-vb[Conceptual.Encoding#7](../../../samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.encoding/vb/custom1.vb#7)]  
  
## <a name="see-also"></a><span data-ttu-id="dda48-378">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="dda48-378">See also</span></span>

- <xref:System.Text.Encoder>  
- <xref:System.Text.Decoder>  
- <xref:System.Text.DecoderFallback>  
- <xref:System.Text.Encoding>  
- <xref:System.Text.EncoderFallback>  
- [<span data-ttu-id="dda48-379">Globalizacja i lokalizacja</span><span class="sxs-lookup"><span data-stu-id="dda48-379">Globalization and Localization</span></span>](../../../docs/standard/globalization-localization/index.md)
