---
title: Tryby opóźnienia
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- garbage collection, intrusiveness
- garbage collection, latency modes
ms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81
ms.openlocfilehash: a8eaf0c80aa32978eead80c51a905cbcd66a537b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/15/2020
ms.locfileid: "74283594"
---
# <a name="latency-modes"></a><span data-ttu-id="6e2e1-102">Tryby opóźnienia</span><span class="sxs-lookup"><span data-stu-id="6e2e1-102">Latency modes</span></span>

<span data-ttu-id="6e2e1-103">Aby odzyskać obiekty, moduł zbierający elementy bezużyteczne (GC) musi zatrzymać wszystkie wątki wykonujące w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-103">To reclaim objects, the garbage collector (GC) must stop all the executing threads in an application.</span></span> <span data-ttu-id="6e2e1-104">Okres, w którym moduł odśmiecania pamięci jest aktywny jest określany jako jego *opóźnienie*.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-104">The period of time during which the garbage collector is active is referred to as its *latency*.</span></span>

<span data-ttu-id="6e2e1-105">W niektórych sytuacjach, takich jak gdy aplikacja pobiera dane lub wyświetla zawartość, pełne wyrzucanie elementów bezużytecznych może wystąpić w krytycznym czasie i utrudniać wydajność.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-105">In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance.</span></span> <span data-ttu-id="6e2e1-106">Można dostosować natrętność modułu odśmiecania <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> pamięci, ustawiając właściwość na jedną z <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> wartości.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-106">You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values.</span></span>

## <a name="low-latency-settings"></a><span data-ttu-id="6e2e1-107">Ustawienia małych opóźnień</span><span class="sxs-lookup"><span data-stu-id="6e2e1-107">Low latency settings</span></span>

<span data-ttu-id="6e2e1-108">Przy użyciu "niskie" ustawienie opóźnienia oznacza moduł zbierający elementy bezużyteczne wnika mniej w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-108">Using a "low" latency setting means the garbage collector intrudes less in your application.</span></span> <span data-ttu-id="6e2e1-109">Wyrzucanie elementów bezużytecznych jest bardziej konserwatywne w kwestii odzyskiwania pamięci.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-109">Garbage collection is more conservative about reclaiming memory.</span></span>

<span data-ttu-id="6e2e1-110">Wyliczenie <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> zawiera dwa ustawienia małych opóźnień:</span><span class="sxs-lookup"><span data-stu-id="6e2e1-110">The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:</span></span>

- <span data-ttu-id="6e2e1-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) pomija kolekcje generacji 2 i wykonuje tylko kolekcje generacji 0 i 1.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-111">[GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) suppresses generation 2 collections and performs only generation 0 and 1 collections.</span></span> <span data-ttu-id="6e2e1-112">Może być używany tylko przez krótki okres czasu.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-112">It can be used only for short periods of time.</span></span> <span data-ttu-id="6e2e1-113">Przez dłuższy czas, jeśli system jest pod ciśnieniem pamięci, moduł zbierający elementy bezużyteczne wyzwoli kolekcję, która może na chwilę wstrzymać aplikację i zakłócić operację o krytycznym znaczeniu czasowym.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-113">Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation.</span></span> <span data-ttu-id="6e2e1-114">To ustawienie jest dostępne tylko dla wyrzucania elementów bezużytecznych stacji roboczej.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-114">This setting is available only for workstation garbage collection.</span></span>

- <span data-ttu-id="6e2e1-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency) pomija kolekcje pierwszego planu generacji 2 i wykonuje tylko kolekcje generacji 0, 1 i background generation 2.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-115">[GCLatencyMode.SustainedLowLatency](xref:System.Runtime.GCLatencyMode.SustainedLowLatency) suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections.</span></span> <span data-ttu-id="6e2e1-116">Może być używany przez dłuższy czas i jest dostępny zarówno dla stacji roboczej, jak i wyrzucania elementów bezużytecznych serwera.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-116">It can be used for longer periods of time, and is available for both workstation and server garbage collection.</span></span> <span data-ttu-id="6e2e1-117">Tego ustawienia nie można użyć, jeśli wyrzucanie elementów bezużytecznych w tle jest wyłączone.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-117">This setting cannot be used if background garbage collection is disabled.</span></span>

<span data-ttu-id="6e2e1-118">W okresach małych opóźnień kolekcje generacji 2 są pomijane, chyba że wystąpią następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="6e2e1-118">During low latency periods, generation 2 collections are suppressed unless the following occurs:</span></span>

- <span data-ttu-id="6e2e1-119">System odbiera powiadomienie o małej ilości pamięci z systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-119">The system receives a low memory notification from the operating system.</span></span>

- <span data-ttu-id="6e2e1-120">Kod aplikacji indukuje <xref:System.GC.Collect%2A?displayProperty=nameWithType> kolekcję, wywołując metodę `generation` i określając 2 dla parametru.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-120">Application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter.</span></span>

## <a name="scenarios"></a><span data-ttu-id="6e2e1-121">Scenariusze</span><span class="sxs-lookup"><span data-stu-id="6e2e1-121">Scenarios</span></span>

<span data-ttu-id="6e2e1-122">W poniższej tabeli wymieniono <xref:System.Runtime.GCLatencyMode> scenariusze aplikacji służące do używania wartości:</span><span class="sxs-lookup"><span data-stu-id="6e2e1-122">The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values:</span></span>

|<span data-ttu-id="6e2e1-123">Tryb opóźnienia</span><span class="sxs-lookup"><span data-stu-id="6e2e1-123">Latency mode</span></span>|<span data-ttu-id="6e2e1-124">Scenariusze aplikacji</span><span class="sxs-lookup"><span data-stu-id="6e2e1-124">Application scenarios</span></span>|
|------------------|---------------------------|
|<xref:System.Runtime.GCLatencyMode.Batch>|<span data-ttu-id="6e2e1-125">Dla aplikacji, które nie mają interfejsu użytkownika (UI) lub operacji po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-125">For applications that have no user interface (UI) or server-side operations.</span></span><br /><br /><span data-ttu-id="6e2e1-126">Gdy wyrzucanie elementów bezużytecznych w tle jest wyłączone, jest to domyślny tryb dla stacji roboczej i wyrzucania elementów bezużytecznych serwera.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-126">When background garbage collection is disabled, this is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="6e2e1-127"><xref:System.Runtime.GCLatencyMode.Batch>mode zastępuje również ustawienie [gcConcurrent,](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) czyli zapobiega kolekcjom tła lub równoczesnych.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-127"><xref:System.Runtime.GCLatencyMode.Batch> mode also overrides the [gcConcurrent](../../framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) setting, that is, it prevents background or concurrent collections.</span></span>|
|<xref:System.Runtime.GCLatencyMode.Interactive>|<span data-ttu-id="6e2e1-128">Dla większości aplikacji, które mają interfejsu.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-128">For most applications that have a UI.</span></span><br /><br /><span data-ttu-id="6e2e1-129">Jest to domyślny tryb dla stacji roboczej i wyrzucania elementów bezużytecznych serwera.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-129">This is the default mode for workstation and server garbage collection.</span></span> <span data-ttu-id="6e2e1-130">Jednak jeśli aplikacja jest hostowana, ustawienia modułu odśmiecania pamięci procesu hostingu mają pierwszeństwo.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-130">However, if an app is hosted, the garbage collector settings of the hosting process take precedence.</span></span>|
|<xref:System.Runtime.GCLatencyMode.LowLatency>|<span data-ttu-id="6e2e1-131">W przypadku aplikacji, które mają krótkoterminowe, zależne od czasu operacje, podczas których przerwy w wyrzucaniu pamięci mogą być uciążliwe.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-131">For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="6e2e1-132">Na przykład aplikacje, które renderują animacje lub funkcje pozyskiwania danych.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-132">For example, applications that render animations or data acquisition functions.</span></span>|
|<xref:System.Runtime.GCLatencyMode.SustainedLowLatency>|<span data-ttu-id="6e2e1-133">W przypadku aplikacji, które mają operacje zależne od czasu dla zamkniętego, ale potencjalnie dłuższego czasu, w którym przerwy w wyrzucaniu pamięci mogą być uciążliwe.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-133">For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="6e2e1-134">Na przykład aplikacje, które wymagają szybkiego czasu reakcji w miarę zmian danych rynkowych w godzinach handlu.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-134">For example, applications that need quick response times as market data changes during trading hours.</span></span><br /><br /><span data-ttu-id="6e2e1-135">Ten tryb powoduje większy rozmiar sterty zarządzanej niż inne tryby.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-135">This mode results in a larger managed heap size than other modes.</span></span> <span data-ttu-id="6e2e1-136">Ponieważ nie kompaktowa sterty zarządzanej, możliwe jest wyższe fragmentacji.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-136">Because it does not compact the managed heap, higher fragmentation is possible.</span></span> <span data-ttu-id="6e2e1-137">Upewnij się, że dostępna jest wystarczająca ilość pamięci.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-137">Ensure that sufficient memory is available.</span></span>|

## <a name="guidelines-for-using-low-latency"></a><span data-ttu-id="6e2e1-138">Wskazówki dotyczące korzystania z małych opóźnień</span><span class="sxs-lookup"><span data-stu-id="6e2e1-138">Guidelines for using low latency</span></span>

<span data-ttu-id="6e2e1-139">Korzystając z trybu [GCLatencyMode.LowLatency,](xref:System.Runtime.GCLatencyMode.LowLatency) należy wziąć pod uwagę następujące wskazówki:</span><span class="sxs-lookup"><span data-stu-id="6e2e1-139">When you use [GCLatencyMode.LowLatency](xref:System.Runtime.GCLatencyMode.LowLatency) mode, consider the following guidelines:</span></span>

- <span data-ttu-id="6e2e1-140">Okres czasu w małym opóźnieniu należy zachować tak krótko, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-140">Keep the period of time in low latency as short as possible.</span></span>

- <span data-ttu-id="6e2e1-141">Należy unikać przydzielania dużych ilości pamięci w okresach małych opóźnień.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-141">Avoid allocating high amounts of memory during low latency periods.</span></span> <span data-ttu-id="6e2e1-142">Powiadomienia o małej ilości pamięci mogą wystąpić, ponieważ wyrzucanie elementów bezużytecznych odzyskuje mniej obiektów.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-142">Low memory notifications can occur because garbage collection reclaims fewer objects.</span></span>

- <span data-ttu-id="6e2e1-143">W trybie małych opóźnień zminimalizuj liczbę nowych alokacji, w szczególności alokacje na stercie dużych obiektów i przypiętych obiektów.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-143">While in the low latency mode, minimize the number of new allocations, in particular allocations onto the large object heap and pinned objects.</span></span>

- <span data-ttu-id="6e2e1-144">Należy pamiętać o wątków, które mogą być przydzielanie.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-144">Be aware of threads that could be allocating.</span></span> <span data-ttu-id="6e2e1-145">Ponieważ <xref:System.Runtime.GCSettings.LatencyMode%2A> ustawienie właściwości jest dla <xref:System.OutOfMemoryException> całego procesu, wyjątki mogą być generowane na dowolnym wątku, który jest przydzielanie.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-145">Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, <xref:System.OutOfMemoryException> exceptions can be generated on any thread that is allocating.</span></span>

- <span data-ttu-id="6e2e1-146">Zawijanie kodu o małym opóźnieniu w regionach ograniczonego wykonywania.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-146">Wrap the low latency code in constrained execution regions.</span></span> <span data-ttu-id="6e2e1-147">Aby uzyskać więcej informacji, zobacz [Regiony ograniczonewykonanie](../../../docs/framework/performance/constrained-execution-regions.md).</span><span class="sxs-lookup"><span data-stu-id="6e2e1-147">For more information, see [Constrained execution regions](../../../docs/framework/performance/constrained-execution-regions.md).</span></span>

- <span data-ttu-id="6e2e1-148">Można wymusić kolekcji generacji 2 w okresie <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> małych opóźnień, wywołując metodę.</span><span class="sxs-lookup"><span data-stu-id="6e2e1-148">You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method.</span></span>

## <a name="see-also"></a><span data-ttu-id="6e2e1-149">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="6e2e1-149">See also</span></span>

- <xref:System.GC?displayProperty=nameWithType>
- [<span data-ttu-id="6e2e1-150">Wywołane kolekcje</span><span class="sxs-lookup"><span data-stu-id="6e2e1-150">Induced Collections</span></span>](../../../docs/standard/garbage-collection/induced.md)
- [<span data-ttu-id="6e2e1-151">Odzyskiwanie pamięci</span><span class="sxs-lookup"><span data-stu-id="6e2e1-151">Garbage Collection</span></span>](../../../docs/standard/garbage-collection/index.md)
