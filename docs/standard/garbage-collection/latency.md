---
title: Tryby opóźnienia
ms.date: 03/30/2017
ms.technology: dotnet-standard
helpviewer_keywords:
- garbage collection, intrusiveness
- garbage collection, latency modes
ms.assetid: 96278bb7-6eab-4612-8594-ceebfc887d81
ms.openlocfilehash: 8833c88c3221c0a375011eb62dd712340f7e89cd
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/30/2019
ms.locfileid: "73120908"
---
# <a name="latency-modes"></a><span data-ttu-id="60c6d-102">Tryby opóźnienia</span><span class="sxs-lookup"><span data-stu-id="60c6d-102">Latency Modes</span></span>
<span data-ttu-id="60c6d-103">Aby odzyskiwać obiekty, Moduł wyrzucania elementów bezużytecznych musi zatrzymać wszystkie wątki wykonywane w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="60c6d-103">To reclaim objects, the garbage collector must stop all the executing threads in an application.</span></span> <span data-ttu-id="60c6d-104">W niektórych sytuacjach, na przykład gdy aplikacja pobiera dane lub wyświetla zawartość, pełne wyrzucanie elementów bezużytecznych może wystąpić w krytycznym czasie i utrudnić wydajność.</span><span class="sxs-lookup"><span data-stu-id="60c6d-104">In some situations, such as when an application retrieves data or displays content, a full garbage collection can occur at a critical time and impede performance.</span></span> <span data-ttu-id="60c6d-105">Można dostosować inwazyjność modułu wyrzucania elementów bezużytecznych, ustawiając właściwość <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> na jedną z wartości <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="60c6d-105">You can adjust the intrusiveness of the garbage collector by setting the <xref:System.Runtime.GCSettings.LatencyMode%2A?displayProperty=nameWithType> property to one of the <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> values.</span></span>  
  
 <span data-ttu-id="60c6d-106">Opóźnienie odnosi się do czasu, przez który moduł zbierający elementy bezużyteczne w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="60c6d-106">Latency refers to the time that the garbage collector intrudes in your application.</span></span> <span data-ttu-id="60c6d-107">W przypadku małych okresów opóźnienia Moduł wyrzucania elementów bezużytecznych jest bardziej ostrożny i mniej inwazyjny w odzyskiwaniu obiektów.</span><span class="sxs-lookup"><span data-stu-id="60c6d-107">During low latency periods, the garbage collector is more conservative and less intrusive in reclaiming objects.</span></span> <span data-ttu-id="60c6d-108">Wyliczenie <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> zapewnia dwa ustawienia małych opóźnień:</span><span class="sxs-lookup"><span data-stu-id="60c6d-108">The <xref:System.Runtime.GCLatencyMode?displayProperty=nameWithType> enumeration provides two low latency settings:</span></span>  
  
- <span data-ttu-id="60c6d-109"><xref:System.Runtime.GCLatencyMode.LowLatency> pomija kolekcje generacji 2 i wykonuje tylko kolekcje generacji 0 i 1.</span><span class="sxs-lookup"><span data-stu-id="60c6d-109"><xref:System.Runtime.GCLatencyMode.LowLatency> suppresses generation 2 collections and performs only generation 0 and 1 collections.</span></span> <span data-ttu-id="60c6d-110">Może być używany tylko przez krótki okresy czasu.</span><span class="sxs-lookup"><span data-stu-id="60c6d-110">It can be used only for short periods of time.</span></span> <span data-ttu-id="60c6d-111">W dłuższym czasie, jeśli system jest w obszarze pamięci, Moduł wyrzucania elementów bezużytecznych wywoła kolekcję, która może krótko zawieszać aplikację i przerwać operację krytyczną czasu.</span><span class="sxs-lookup"><span data-stu-id="60c6d-111">Over longer periods, if the system is under memory pressure, the garbage collector will trigger a collection, which can briefly pause the application and disrupt a time-critical operation.</span></span> <span data-ttu-id="60c6d-112">To ustawienie jest dostępne tylko dla wyrzucania elementów bezużytecznych stacji roboczej.</span><span class="sxs-lookup"><span data-stu-id="60c6d-112">This setting is available only for workstation garbage collection.</span></span>  
  
- <span data-ttu-id="60c6d-113"><xref:System.Runtime.GCLatencyMode.SustainedLowLatency> pomija kolekcje generacji pierwszego planu 2 i wykonuje tylko kolekcje generacji 0, 1 i 2. generacji w tle.</span><span class="sxs-lookup"><span data-stu-id="60c6d-113"><xref:System.Runtime.GCLatencyMode.SustainedLowLatency> suppresses foreground generation 2 collections and performs only generation 0, 1, and background generation 2 collections.</span></span> <span data-ttu-id="60c6d-114">Może być używany przez dłuższy okres czasu i jest dostępny zarówno dla stacji roboczej, jak i serwera.</span><span class="sxs-lookup"><span data-stu-id="60c6d-114">It can be used for longer periods of time, and is available for both workstation and server garbage collection.</span></span> <span data-ttu-id="60c6d-115">Nie można użyć tego ustawienia, jeśli [współbieżne wyrzucanie elementów bezużytecznych](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) jest wyłączone.</span><span class="sxs-lookup"><span data-stu-id="60c6d-115">This setting cannot be used if [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled.</span></span>  
  
 <span data-ttu-id="60c6d-116">Podczas małych okresów opóźnienia kolekcje 2 generacji są pomijane, chyba że wystąpią następujące sytuacje:</span><span class="sxs-lookup"><span data-stu-id="60c6d-116">During low latency periods, generation 2 collections are suppressed unless the following occurs:</span></span>  
  
- <span data-ttu-id="60c6d-117">System odbiera powiadomienie o niskim poziomie pamięci z systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="60c6d-117">The system receives a low memory notification from the operating system.</span></span>  
  
- <span data-ttu-id="60c6d-118">Kod aplikacji wywołuje kolekcję przez wywołanie metody <xref:System.GC.Collect%2A?displayProperty=nameWithType> i określenie 2 dla parametru `generation`.</span><span class="sxs-lookup"><span data-stu-id="60c6d-118">Your application code induces a collection by calling the <xref:System.GC.Collect%2A?displayProperty=nameWithType> method and specifying 2 for the `generation` parameter.</span></span>  
  
 <span data-ttu-id="60c6d-119">W poniższej tabeli wymieniono scenariusze aplikacji dotyczące używania wartości <xref:System.Runtime.GCLatencyMode>.</span><span class="sxs-lookup"><span data-stu-id="60c6d-119">The following table lists the application scenarios for using the <xref:System.Runtime.GCLatencyMode> values.</span></span>  
  
|<span data-ttu-id="60c6d-120">Tryb opóźnień</span><span class="sxs-lookup"><span data-stu-id="60c6d-120">Latency mode</span></span>|<span data-ttu-id="60c6d-121">Scenariusze aplikacji</span><span class="sxs-lookup"><span data-stu-id="60c6d-121">Application scenarios</span></span>|  
|------------------|---------------------------|  
|<xref:System.Runtime.GCLatencyMode.Batch>|<span data-ttu-id="60c6d-122">W przypadku aplikacji, które nie mają interfejsu użytkownika ani operacji po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="60c6d-122">For applications that have no UI or server-side operations.</span></span><br /><br /> <span data-ttu-id="60c6d-123">Jest to domyślny tryb, gdy [współbieżne wyrzucanie elementów bezużytecznych](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) jest wyłączone.</span><span class="sxs-lookup"><span data-stu-id="60c6d-123">This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is disabled.</span></span>|  
|<xref:System.Runtime.GCLatencyMode.Interactive>|<span data-ttu-id="60c6d-124">Dla większości aplikacji, które mają interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="60c6d-124">For most applications that have a UI.</span></span><br /><br /> <span data-ttu-id="60c6d-125">Jest to domyślny tryb, gdy włączone jest [współbieżne wyrzucanie elementów bezużytecznych](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) .</span><span class="sxs-lookup"><span data-stu-id="60c6d-125">This is the default mode when [concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) is enabled.</span></span>|  
|<xref:System.Runtime.GCLatencyMode.LowLatency>|<span data-ttu-id="60c6d-126">W przypadku aplikacji, które mają krótkoterminowe, zależne od czasu operacje, w których przerwy między modułem wyrzucania elementów bezużytecznych mogą powodować zakłócenia.</span><span class="sxs-lookup"><span data-stu-id="60c6d-126">For applications that have short-term, time-sensitive operations during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="60c6d-127">Na przykład aplikacje, które wykonują renderowanie animacji lub funkcje pozyskiwania danych.</span><span class="sxs-lookup"><span data-stu-id="60c6d-127">For example, applications that do animation rendering or data acquisition functions.</span></span>|  
|<xref:System.Runtime.GCLatencyMode.SustainedLowLatency>|<span data-ttu-id="60c6d-128">W przypadku aplikacji, które mają dane zależne od czasu, ale dłuższy czas, w którym przerwy z modułu wyrzucania elementów bezużytecznych mogą być zakłócone.</span><span class="sxs-lookup"><span data-stu-id="60c6d-128">For applications that have time-sensitive operations for a contained but potentially longer duration of time during which interruptions from the garbage collector could be disruptive.</span></span> <span data-ttu-id="60c6d-129">Na przykład aplikacje, które wymagają krótkich czasów odpowiedzi jako zmiany danych rynkowych w godzinach pracy.</span><span class="sxs-lookup"><span data-stu-id="60c6d-129">For example, applications that need quick response times as market data changes during trading hours.</span></span><br /><br /> <span data-ttu-id="60c6d-130">Ten tryb powoduje zwiększenie rozmiaru zarządzanego sterty niż inne tryby.</span><span class="sxs-lookup"><span data-stu-id="60c6d-130">This mode results in a larger managed heap size than other modes.</span></span> <span data-ttu-id="60c6d-131">Ponieważ nie kompaktuje sterty zarządzanej, możliwe jest zwiększenie fragmentacji.</span><span class="sxs-lookup"><span data-stu-id="60c6d-131">Because it does not compact the managed heap, higher fragmentation is possible.</span></span> <span data-ttu-id="60c6d-132">Upewnij się, że dostępna jest wystarczająca ilość pamięci.</span><span class="sxs-lookup"><span data-stu-id="60c6d-132">Ensure that sufficient memory is available.</span></span>|  
  
## <a name="guidelines-for-using-low-latency"></a><span data-ttu-id="60c6d-133">Wskazówki dotyczące korzystania z małych opóźnień</span><span class="sxs-lookup"><span data-stu-id="60c6d-133">Guidelines for Using Low Latency</span></span>  
 <span data-ttu-id="60c6d-134">W przypadku korzystania z trybu <xref:System.Runtime.GCLatencyMode.LowLatency> należy wziąć pod uwagę następujące wytyczne:</span><span class="sxs-lookup"><span data-stu-id="60c6d-134">When you use <xref:System.Runtime.GCLatencyMode.LowLatency> mode, consider the following guidelines:</span></span>  
  
- <span data-ttu-id="60c6d-135">Przechowuj okres czasu w małych opóźnieniach, tak jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="60c6d-135">Keep the period of time in low latency as short as possible.</span></span>  
  
- <span data-ttu-id="60c6d-136">Unikaj alokowania dużych ilości pamięci podczas okresów o małym opóźnieniu.</span><span class="sxs-lookup"><span data-stu-id="60c6d-136">Avoid allocating high amounts of memory during low latency periods.</span></span> <span data-ttu-id="60c6d-137">Powiadomienia o niskiej ilości pamięci mogą wystąpić, ponieważ odzyskiwanie pamięci przejmuje mniej obiektów.</span><span class="sxs-lookup"><span data-stu-id="60c6d-137">Low memory notifications can occur because garbage collection reclaims fewer objects.</span></span>  
  
- <span data-ttu-id="60c6d-138">W trybie niskiego opóźnienia Minimalizuj liczbę dokonanych przydziałów, w szczególności przydziały do sterty dużego obiektu i przypiętych obiektów.</span><span class="sxs-lookup"><span data-stu-id="60c6d-138">While in the low latency mode, minimize the number of allocations you make, in particular allocations onto the Large Object Heap and pinned objects.</span></span>  
  
- <span data-ttu-id="60c6d-139">Należy pamiętać o wątkach, które mogą być przydzielane.</span><span class="sxs-lookup"><span data-stu-id="60c6d-139">Be aware of threads that could be allocating.</span></span> <span data-ttu-id="60c6d-140">Ponieważ ustawienie właściwości <xref:System.Runtime.GCSettings.LatencyMode%2A> to cały proces, można wygenerować <xref:System.OutOfMemoryException> na dowolnym wątku, który może przydzielić.</span><span class="sxs-lookup"><span data-stu-id="60c6d-140">Because the <xref:System.Runtime.GCSettings.LatencyMode%2A> property setting is process-wide, you could generate an <xref:System.OutOfMemoryException> on any thread that may be allocating.</span></span>  
  
- <span data-ttu-id="60c6d-141">Zawijaj kod małych opóźnień w regionach ograniczonego wykonywania (Aby uzyskać więcej informacji, zobacz [ograniczone regiony wykonywania](../../../docs/framework/performance/constrained-execution-regions.md)).</span><span class="sxs-lookup"><span data-stu-id="60c6d-141">Wrap the low latency code in constrained execution regions (for more information, see [Constrained Execution Regions](../../../docs/framework/performance/constrained-execution-regions.md)).</span></span>  
  
- <span data-ttu-id="60c6d-142">Można wymusić zbieranie 2 kolekcji w okresie o małym opóźnieniu, wywołując metodę <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="60c6d-142">You can force generation 2 collections during a low latency period by calling the <xref:System.GC.Collect%28System.Int32%2CSystem.GCCollectionMode%29?displayProperty=nameWithType> method.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="60c6d-143">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="60c6d-143">See also</span></span>

- <xref:System.GC?displayProperty=nameWithType>
- [<span data-ttu-id="60c6d-144">Wywołane kolekcje</span><span class="sxs-lookup"><span data-stu-id="60c6d-144">Induced Collections</span></span>](../../../docs/standard/garbage-collection/induced.md)
- [<span data-ttu-id="60c6d-145">Odzyskiwanie pamięci</span><span class="sxs-lookup"><span data-stu-id="60c6d-145">Garbage Collection</span></span>](../../../docs/standard/garbage-collection/index.md)
