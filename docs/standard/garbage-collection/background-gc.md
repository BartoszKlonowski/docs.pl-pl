---
title: Wyrzucanie elementów bezużytecznych w tle
description: Dowiedz się więcej o wyrzucaniu elementów bezużytecznych w tle w .NET i o tym, jak różni się ona w zakresie wyrzucania elementów bezużytecznych na stacjach roboczych i serwerach.
ms.date: 04/21/2020
helpviewer_keywords:
- garbage collection, background
- background garbage collection
ms.openlocfilehash: dcb1d348e679e07646273b8fbc4ea29b44ee4974
ms.sourcegitcommit: 73aa9653547a1cd70ee6586221f79cc29b588ebd
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2020
ms.locfileid: "82103563"
---
# <a name="background-garbage-collection"></a><span data-ttu-id="79e32-103">Wyrzucanie elementów bezużytecznych w tle</span><span class="sxs-lookup"><span data-stu-id="79e32-103">Background garbage collection</span></span>

<span data-ttu-id="79e32-104">W tle wyrzucania elementów bezużytecznych (GC), efemeryczne generacji (0 i 1) są zbierane w razie potrzeby, podczas gdy kolekcja generacji 2 jest w toku.</span><span class="sxs-lookup"><span data-stu-id="79e32-104">In background garbage collection (GC), ephemeral generations (0 and 1) are collected as needed while the collection of generation 2 is in progress.</span></span> <span data-ttu-id="79e32-105">Wyrzucanie elementów bezużytecznych w tle jest wykonywane na co najmniej jeden dedykowany wątki, w zależności od tego, czy jest to tło lub serwer GC i dotyczy tylko kolekcji generacji 2.</span><span class="sxs-lookup"><span data-stu-id="79e32-105">Background garbage collection is performed on one or more dedicated threads, depending on whether it's background or server GC, and applies only to generation 2 collections.</span></span>

<span data-ttu-id="79e32-106">Tło wyrzucania elementów bezużytecznych jest domyślnie włączona.</span><span class="sxs-lookup"><span data-stu-id="79e32-106">Background garbage collection is enabled by default.</span></span> <span data-ttu-id="79e32-107">Można go włączyć lub wyłączyć za pomocą ustawienia konfiguracji [gcConcurrent](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) w aplikacjach .NET Framework lub ustawienia [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) w aplikacjach .NET Core.</span><span class="sxs-lookup"><span data-stu-id="79e32-107">It can be enabled or disabled with the [gcConcurrent](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md) configuration setting in .NET Framework apps or the [System.GC.Concurrent](../../core/run-time-config/garbage-collector.md#systemgcconcurrentcomplus_gcconcurrent) setting in .NET Core apps.</span></span>

> [!NOTE]
> <span data-ttu-id="79e32-108">Wyrzucanie elementów bezużytecznych tła zastępuje [równoczesne wyrzucanie elementów bezużytecznych](#concurrent-garbage-collection) i jest dostępne w .NET Framework 4 i nowszych wersjach.</span><span class="sxs-lookup"><span data-stu-id="79e32-108">Background garbage collection replaces [concurrent garbage collection](#concurrent-garbage-collection) and is available in .NET Framework 4 and later versions.</span></span> <span data-ttu-id="79e32-109">W .NET Framework 4 jest obsługiwany tylko dla wyrzucania elementów *bezużytecznych stacji roboczej.*</span><span class="sxs-lookup"><span data-stu-id="79e32-109">In .NET Framework 4, it's supported only for *workstation* garbage collection.</span></span> <span data-ttu-id="79e32-110">Począwszy od programu .NET Framework 4.5, wyrzucanie elementów bezużytecznych w tle jest dostępne zarówno dla *stacji roboczej,* jak i dla wyrzucania elementów bezużytecznych *serwera.*</span><span class="sxs-lookup"><span data-stu-id="79e32-110">Starting with .NET Framework 4.5, background garbage collection is available for both *workstation* and *server* garbage collection.</span></span>

<span data-ttu-id="79e32-111">Kolekcja na efemeryczne generacji podczas wyrzucania elementów *bezużytecznych tła* jest znany jako pierwszego planu wyrzucania elementów bezużytecznych.</span><span class="sxs-lookup"><span data-stu-id="79e32-111">A collection on ephemeral generations during background garbage collection is known as *foreground* garbage collection.</span></span> <span data-ttu-id="79e32-112">Gdy wystąpią wyrzucanie elementów bezużytecznych na pierwszym planie, wszystkie wątki zarządzane są zawieszone.</span><span class="sxs-lookup"><span data-stu-id="79e32-112">When foreground garbage collections occur, all managed threads are suspended.</span></span>

<span data-ttu-id="79e32-113">Gdy wyrzucanie elementów bezużytecznych tła jest w toku i zostały przydzielone wystarczającej liczby obiektów w generacji 0, CLR wykonuje generacji 0 lub generacji 1 pierwszego planu wyrzucania elementów bezużytecznych.</span><span class="sxs-lookup"><span data-stu-id="79e32-113">When background garbage collection is in progress and you've allocated enough objects in generation 0, the CLR performs a generation 0 or generation 1 foreground garbage collection.</span></span> <span data-ttu-id="79e32-114">Dedykowany wątek wyrzucania elementów bezużytecznych w tle sprawdza w częstych bezpiecznych punktach, aby ustalić, czy istnieje żądanie wyrzucania elementów bezużytecznych na pierwszym planie.</span><span class="sxs-lookup"><span data-stu-id="79e32-114">The dedicated background garbage collection thread checks at frequent safe points to determine whether there is a request for foreground garbage collection.</span></span> <span data-ttu-id="79e32-115">Jeśli istnieje, kolekcja w tle zawiesza się tak, że na pierwszym planie wyrzucania elementów bezużytecznych może wystąpić.</span><span class="sxs-lookup"><span data-stu-id="79e32-115">If there is, the background collection suspends itself so that foreground garbage collection can occur.</span></span> <span data-ttu-id="79e32-116">Po zakończeniu wyrzucania elementów bezużytecznych na pierwszym planie, dedykowane wątki wyrzucania elementów bezużytecznych tła i wątki użytkownika wznowić.</span><span class="sxs-lookup"><span data-stu-id="79e32-116">After the foreground garbage collection is completed, the dedicated background garbage collection threads and user threads resume.</span></span>

<span data-ttu-id="79e32-117">Tło wyrzucania elementów bezużytecznych usuwa ograniczenia alokacji nałożone przez równoczesnych wyrzucania elementów bezużytecznych, ponieważ efemeryczne wyrzucania elementów bezużytecznych może wystąpić podczas wyrzucania elementów bezużytecznych w tle.</span><span class="sxs-lookup"><span data-stu-id="79e32-117">Background garbage collection removes allocation restrictions imposed by concurrent garbage collection, because ephemeral garbage collections can occur during background garbage collection.</span></span> <span data-ttu-id="79e32-118">Tło wyrzucania elementów bezużytecznych można usunąć martwe obiekty w efemeryczne pokolenia.</span><span class="sxs-lookup"><span data-stu-id="79e32-118">Background garbage collection can remove dead objects in ephemeral generations.</span></span> <span data-ttu-id="79e32-119">Można również rozwinąć stos, jeśli jest to konieczne podczas wyrzucania elementów bezużytecznych generacji 1.</span><span class="sxs-lookup"><span data-stu-id="79e32-119">It can also expand the heap if needed during a generation 1 garbage collection.</span></span>

## <a name="background-workstation-vs-server-gc"></a><span data-ttu-id="79e32-120">Stacja robocza w tle a gc serwera</span><span class="sxs-lookup"><span data-stu-id="79e32-120">Background workstation vs. server GC</span></span>

<span data-ttu-id="79e32-121">Począwszy od programu .NET Framework 4.5, wyrzucanie elementów bezużytecznych w tle jest dostępne dla gc serwera.</span><span class="sxs-lookup"><span data-stu-id="79e32-121">Starting with .NET Framework 4.5, background garbage collection is available for server GC.</span></span> <span data-ttu-id="79e32-122">GC w tle jest domyślnym trybem wyrzucania elementów bezużytecznych serwera.</span><span class="sxs-lookup"><span data-stu-id="79e32-122">Background GC is the default mode for server garbage collection.</span></span>

<span data-ttu-id="79e32-123">Funkcje wyrzucania elementów bezużytecznych serwera w tle, podobnie jak wyrzucanie elementów bezużytecznych na stacji roboczej w tle, ale istnieje kilka różnic:</span><span class="sxs-lookup"><span data-stu-id="79e32-123">Background server garbage collection functions similarly to background workstation garbage collection, but there are a few differences:</span></span>

- <span data-ttu-id="79e32-124">Tło stacji elementów bezużytecznych używa jednego dedykowanego wątku wyrzucania elementów bezużytecznych tła, podczas gdy serwer w tle wyrzucania elementów bezużytecznych używa wielu wątków.</span><span class="sxs-lookup"><span data-stu-id="79e32-124">Background workstation garbage collection uses one dedicated background garbage collection thread, whereas background server garbage collection uses multiple threads.</span></span> <span data-ttu-id="79e32-125">Zazwyczaj istnieje dedykowany wątek dla każdego procesora logicznego.</span><span class="sxs-lookup"><span data-stu-id="79e32-125">Typically, there's a dedicated thread for each logical processor.</span></span>

- <span data-ttu-id="79e32-126">W przeciwieństwie do wątku wyrzucania elementów bezużytecznych tła stacji roboczej wątki GC serwera tła nie limit czasu.</span><span class="sxs-lookup"><span data-stu-id="79e32-126">Unlike the workstation background garbage collection thread, the background server GC threads do not time out.</span></span>

<span data-ttu-id="79e32-127">Na poniższej ilustracji przedstawiono wyrzucanie elementów *bezużytecznych stacji roboczej* w tle wykonywane na oddzielnym, dedykowanym wątku:</span><span class="sxs-lookup"><span data-stu-id="79e32-127">The following illustration shows background *workstation* garbage collection performed on a separate, dedicated thread:</span></span>

![Wyrzucanie elementów bezużytecznych stacji roboczej w tle](./media/fundamentals/background-workstation-garbage-collection.png)

<span data-ttu-id="79e32-129">Na poniższej ilustracji przedstawiono wyrzucanie elementów bezużytecznych *serwera* w tle wykonywane na oddzielnych, dedykowanych wątkach:</span><span class="sxs-lookup"><span data-stu-id="79e32-129">The following illustration shows background *server* garbage collection performed on separate, dedicated threads:</span></span>

![Wyrzucanie elementów bezużytecznych serwera w tle](./media/fundamentals/background-server-garbage-collection.png)

## <a name="concurrent-garbage-collection"></a><span data-ttu-id="79e32-131">Równoczesne wyrzucanie elementów bezużytecznych</span><span class="sxs-lookup"><span data-stu-id="79e32-131">Concurrent garbage collection</span></span>

> [!TIP]
> <span data-ttu-id="79e32-132">Niniejsza sekcja dotyczy:</span><span class="sxs-lookup"><span data-stu-id="79e32-132">This section applies to:</span></span>
>
> - <span data-ttu-id="79e32-133">.NET Framework 3.5 i starsze dla wyrzucania elementów bezużytecznych stacji roboczych</span><span class="sxs-lookup"><span data-stu-id="79e32-133">.NET Framework 3.5 and earlier for workstation garbage collection</span></span>
> - <span data-ttu-id="79e32-134">.NET Framework 4 i starsze dla wyrzucania elementów bezużytecznych serwera</span><span class="sxs-lookup"><span data-stu-id="79e32-134">.NET Framework 4 and earlier for server garbage collection</span></span>
>
> <span data-ttu-id="79e32-135">Równoczesnych elementów bezużytecznych jest zastępowany przez tło wyrzucania elementów bezużytecznych w nowszych wersjach.</span><span class="sxs-lookup"><span data-stu-id="79e32-135">Concurrent garbage is replaced by background garbage collection in later versions.</span></span>

<span data-ttu-id="79e32-136">Na stacji roboczej lub serwera wyrzucania elementów bezużytecznych, można [włączyć równoczesnych wyrzucania elementów bezużytecznych](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), co umożliwia wątki do uruchamiania jednocześnie z dedykowanym wątku, który wykonuje wyrzucania elementów bezużytecznych przez większość czasu trwania kolekcji.</span><span class="sxs-lookup"><span data-stu-id="79e32-136">In workstation or server garbage collection, you can [enable concurrent garbage collection](../../../docs/framework/configure-apps/file-schema/runtime/gcconcurrent-element.md), which enables threads to run concurrently with a dedicated thread that performs the garbage collection for most of the duration of the collection.</span></span> <span data-ttu-id="79e32-137">Ta opcja dotyczy tylko wyrzucania elementów bezużytecznych w generacji 2; pokolenia 0 i 1 są zawsze niebieżne, ponieważ kończą się szybko.</span><span class="sxs-lookup"><span data-stu-id="79e32-137">This option affects only garbage collections in generation 2; generations 0 and 1 are always non-concurrent because they finish fast.</span></span>

<span data-ttu-id="79e32-138">Równoczesnych wyrzucania elementów bezużytecznych umożliwia interaktywne aplikacje, aby być bardziej elastyczne, minimalizując pauzy dla kolekcji.</span><span class="sxs-lookup"><span data-stu-id="79e32-138">Concurrent garbage collection enables interactive applications to be more responsive by minimizing pauses for a collection.</span></span> <span data-ttu-id="79e32-139">Zarządzane wątki można nadal działać przez większość czasu, gdy jest uruchomiony wątek równoczesnych wyrzucania elementów bezużytecznych.</span><span class="sxs-lookup"><span data-stu-id="79e32-139">Managed threads can continue to run most of the time while the concurrent garbage collection thread is running.</span></span> <span data-ttu-id="79e32-140">Powoduje to krótsze pauzy, gdy występuje wyrzucanie elementów bezużytecznych.</span><span class="sxs-lookup"><span data-stu-id="79e32-140">This results in shorter pauses while a garbage collection is occurring.</span></span>

<span data-ttu-id="79e32-141">Równoczesnych wyrzucania elementów bezużytecznych jest wykonywana na dedykowany wątek.</span><span class="sxs-lookup"><span data-stu-id="79e32-141">Concurrent garbage collection is performed on a dedicated thread.</span></span> <span data-ttu-id="79e32-142">Domyślnie program CLR uruchamia wyrzucanie elementów bezużytecznych na stacjach roboczych z równoczesnym wyrzucaniem elementów bezużytecznych włączonym zarówno na komputerach jednoprocesorowych, jak i wieloprocesorowych.</span><span class="sxs-lookup"><span data-stu-id="79e32-142">By default, the CLR runs workstation garbage collection with concurrent garbage collection enabled on both single-processor and multi-processor computers.</span></span>

<span data-ttu-id="79e32-143">Na poniższej ilustracji przedstawiono równoczesnych wyrzucania elementów bezużytecznych wykonywane na oddzielny wątek dedykowany.</span><span class="sxs-lookup"><span data-stu-id="79e32-143">The following illustration shows concurrent garbage collection performed on a separate dedicated thread.</span></span>

![Równoczesne wątki wyrzucania elementów bezużytecznych](./media/gc-concurrent.png)

## <a name="see-also"></a><span data-ttu-id="79e32-145">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="79e32-145">See also</span></span>

- [<span data-ttu-id="79e32-146">Wyrzucanie elementów bezużytecznych stacji roboczych i serwera</span><span class="sxs-lookup"><span data-stu-id="79e32-146">Workstation and server garbage collection</span></span>](workstation-server-gc.md)
- [<span data-ttu-id="79e32-147">Opcje konfiguracji w czasie wykonywania wyrzucania elementów bezużytecznych</span><span class="sxs-lookup"><span data-stu-id="79e32-147">Run-time configuration options for garbage collection</span></span>](../../core/run-time-config/garbage-collector.md)
