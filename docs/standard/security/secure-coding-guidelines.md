---
title: Wytyczne dotyczące bezpiecznego programowania dla platformy .NET
ms.date: 06/28/2018
helpviewer_keywords:
- managed wrapper to native code implementation
- secure coding
- reusable components
- library code that exposes protected resources
- code, security
- code security
- secure coding, options
- components [.NET], security
- code security, options
- security-neutral code
- security [.NET], coding guidelines
ms.assetid: 4f882d94-262b-4494-b0a6-ba9ba1f5f177
author: mairaw
ms.author: mairaw
ms.openlocfilehash: b3a8f0dfc1a2b5e09722876b73281ed1d8b6334e
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "62018648"
---
# <a name="secure-coding-guidelines"></a><span data-ttu-id="2d54c-102">Wytyczne dotyczące bezpiecznego programowania</span><span class="sxs-lookup"><span data-stu-id="2d54c-102">Secure coding guidelines</span></span>

<span data-ttu-id="2d54c-103">Zabezpieczenia oparte na dowód i zabezpieczenia dostępu kodu zapewniają mechanizmy ogromne możliwości, jawnych, aby zaimplementować zabezpieczenia.</span><span class="sxs-lookup"><span data-stu-id="2d54c-103">Evidence-based security and code access security provide very powerful, explicit mechanisms to implement security.</span></span> <span data-ttu-id="2d54c-104">Większość kodu aplikacji po prostu użyć infrastruktury implementowany przez platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="2d54c-104">Most application code can simply use the infrastructure implemented by .NET.</span></span> <span data-ttu-id="2d54c-105">W niektórych przypadkach dodatkowe zabezpieczenia specyficzne dla aplikacji jest wymagany, utworzona przez rozszerzenie systemu zabezpieczeń lub za pomocą nowych metod ad-hoc.</span><span class="sxs-lookup"><span data-stu-id="2d54c-105">In some cases, additional application-specific security is required, built either by extending the security system or by using new ad hoc methods.</span></span>

<span data-ttu-id="2d54c-106">Przy użyciu platformy .NET wymuszane, uprawnienia i innych wymuszania w kodzie, należy ustawienie bariery, aby zapobiec złośliwego kodu na dostęp do informacji, że użytkownik nie chce mieć lub wykonywania innych akcji niepożądane.</span><span class="sxs-lookup"><span data-stu-id="2d54c-106">Using .NET enforced permissions and other enforcement in your code, you should erect barriers to prevent malicious code from accessing information that you don't want it to have or performing other undesirable actions.</span></span> <span data-ttu-id="2d54c-107">Ponadto należy zachować równowagę pomiędzy zabezpieczeń i użyteczności, we wszystkich scenariuszach oczekiwanego przy użyciu zaufanego kodu.</span><span class="sxs-lookup"><span data-stu-id="2d54c-107">Additionally, you must strike a balance between security and usability in all the expected scenarios using trusted code.</span></span>

<span data-ttu-id="2d54c-108">W tym omówieniu opisano różne sposoby, w których kod może być przeznaczona do pracy z systemu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="2d54c-108">This overview describes the different ways code can be designed to work with the security system.</span></span>

## <a name="securing-resource-access"></a><span data-ttu-id="2d54c-109">Zabezpieczanie dostępu do zasobów</span><span class="sxs-lookup"><span data-stu-id="2d54c-109">Securing resource access</span></span>

<span data-ttu-id="2d54c-110">Podczas projektowania i tworzenia kodu, należy do ochrony i ograniczenie dostępu do zasobów, szczególnie w przypadku, gdy za pomocą lub wywoływania kodem nieznanego pochodzenia kodu.</span><span class="sxs-lookup"><span data-stu-id="2d54c-110">When designing and writing your code, you need to protect and limit the access that code has to resources, especially when using or invoking code of unknown origin.</span></span> <span data-ttu-id="2d54c-111">Dlatego należy przestrzegać następujących technik, aby upewnić się, że Twój kod jest bezpieczna:</span><span class="sxs-lookup"><span data-stu-id="2d54c-111">So, keep in mind the following techniques to ensure your code is secure:</span></span>

- <span data-ttu-id="2d54c-112">Nie należy używać zabezpieczeń dostępu kodu (CAS).</span><span class="sxs-lookup"><span data-stu-id="2d54c-112">Do not use Code Access Security (CAS).</span></span>

- <span data-ttu-id="2d54c-113">Nie należy używać częściowej zaufanego kodu.</span><span class="sxs-lookup"><span data-stu-id="2d54c-113">Do not use partial trusted code.</span></span>

- <span data-ttu-id="2d54c-114">Nie używaj [AllowPartiallyTrustedCaller](xref:System.Security.AllowPartiallyTrustedCallersAttribute) atrybutu (APTCA).</span><span class="sxs-lookup"><span data-stu-id="2d54c-114">Do not use the [AllowPartiallyTrustedCaller](xref:System.Security.AllowPartiallyTrustedCallersAttribute) attribute (APTCA).</span></span>

- <span data-ttu-id="2d54c-115">Nie należy używać wywołaniem funkcji zdalnych .NET.</span><span class="sxs-lookup"><span data-stu-id="2d54c-115">Do not use .NET Remoting.</span></span>

- <span data-ttu-id="2d54c-116">Nie należy używać Distributed Component Object Model (DCOM).</span><span class="sxs-lookup"><span data-stu-id="2d54c-116">Do not use Distributed Component Object Model (DCOM).</span></span>

- <span data-ttu-id="2d54c-117">Nie należy używać binarne elementy formatujące.</span><span class="sxs-lookup"><span data-stu-id="2d54c-117">Do not use binary formatters.</span></span>

<span data-ttu-id="2d54c-118">Zabezpieczenia dostępu kodu ani kod o przezroczystym poziomie bezpieczeństwa, nie są obsługiwane jako granice zabezpieczeń z częściowo zaufanego kodu.</span><span class="sxs-lookup"><span data-stu-id="2d54c-118">Code Access Security and Security-Transparent Code are not supported as a security boundary with partially trusted code.</span></span> <span data-ttu-id="2d54c-119">Odradzamy ładowanie i wykonywanie kodu z nieznanego źródła bez zapewnienia alternatywnych środków bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="2d54c-119">We advise against loading and executing code of unknown origins without putting alternative security measures in place.</span></span> <span data-ttu-id="2d54c-120">Dostępne są następujące alternatywnych środków bezpieczeństwa:</span><span class="sxs-lookup"><span data-stu-id="2d54c-120">The alternative security measures are:</span></span>

- <span data-ttu-id="2d54c-121">Wirtualizacja</span><span class="sxs-lookup"><span data-stu-id="2d54c-121">Virtualization</span></span>

- <span data-ttu-id="2d54c-122">AppContainers</span><span class="sxs-lookup"><span data-stu-id="2d54c-122">AppContainers</span></span>

- <span data-ttu-id="2d54c-123">Użytkownicy systemu operacyjnego (OS) i uprawnienia</span><span class="sxs-lookup"><span data-stu-id="2d54c-123">Operating system (OS) users and permissions</span></span>

- <span data-ttu-id="2d54c-124">Kontenery funkcji Hyper-V</span><span class="sxs-lookup"><span data-stu-id="2d54c-124">Hyper-V containers</span></span>

## <a name="security-neutral-code"></a><span data-ttu-id="2d54c-125">Kod o neutralnym poziomie bezpieczeństwa</span><span class="sxs-lookup"><span data-stu-id="2d54c-125">Security-neutral code</span></span>

<span data-ttu-id="2d54c-126">Kod o neutralnym poziomie bezpieczeństwa nie działają, które są jawnie system zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="2d54c-126">Security-neutral code does nothing explicit with the security system.</span></span> <span data-ttu-id="2d54c-127">Była uruchamiana z uprawnieniami niezależnie od jej odbiera.</span><span class="sxs-lookup"><span data-stu-id="2d54c-127">It runs with whatever permissions it receives.</span></span> <span data-ttu-id="2d54c-128">Mimo że aplikacje, których nie można przechwytywać wyjątki zabezpieczeń skojarzone z operacjami chroniony (na przykład przy użyciu plików, sieci i tak dalej) może spowodować nieobsługiwany wyjątek, kod o neutralnym poziomie bezpieczeństwa nadal korzysta z technologii zabezpieczeń na platformie .NET .</span><span class="sxs-lookup"><span data-stu-id="2d54c-128">Although applications that fail to catch security exceptions associated with protected operations (such as using files, networking, and so on) can result in an unhandled exception, security-neutral code still takes advantage of the security technologies in .NET.</span></span>

<span data-ttu-id="2d54c-129">Biblioteka neutralnym poziomie bezpieczeństwa ma specjalne właściwości, które należy zrozumieć.</span><span class="sxs-lookup"><span data-stu-id="2d54c-129">A security-neutral library has special characteristics that you should understand.</span></span> <span data-ttu-id="2d54c-130">Załóżmy, że biblioteka zawiera elementy interfejsu API, które pliki lub wywoływać kod niezarządzany.</span><span class="sxs-lookup"><span data-stu-id="2d54c-130">Suppose your library provides API elements that use files or call unmanaged code.</span></span> <span data-ttu-id="2d54c-131">Jeśli Twój kod nie ma odpowiednich uprawnień, nie będą uruchamiane, zgodnie z opisem.</span><span class="sxs-lookup"><span data-stu-id="2d54c-131">If your code doesn't have the corresponding permission, it won't run as described.</span></span> <span data-ttu-id="2d54c-132">Jednak nawet wtedy, gdy kod ma uprawnienie, kod źródłowy aplikacji, który ją wywołuje musi mieć tego samego uprawnienia, aby móc pracować.</span><span class="sxs-lookup"><span data-stu-id="2d54c-132">However, even if the code has the permission, any application code that calls it must have the same permission in order to work.</span></span> <span data-ttu-id="2d54c-133">Jeśli kod wywołujący nie ma odpowiednich uprawnień <xref:System.Security.SecurityException> pojawia się w wyniku przeszukiwania stosu zabezpieczeń dostępu kodu.</span><span class="sxs-lookup"><span data-stu-id="2d54c-133">If the calling code doesn't have the right permission, a <xref:System.Security.SecurityException> appears as a result of the code access security stack walk.</span></span>

## <a name="application-code-that-isnt-a-reusable-component"></a><span data-ttu-id="2d54c-134">Kod aplikacji, które nie są komponentów wielokrotnego użytku</span><span class="sxs-lookup"><span data-stu-id="2d54c-134">Application code that isn't a reusable component</span></span>

<span data-ttu-id="2d54c-135">Jeśli Twój kod jest częścią aplikacji, która nie będzie można wywoływać za pomocą innego kodu, zabezpieczeń jest prosty i specjalnych kodowania, nie mogą być wymagane.</span><span class="sxs-lookup"><span data-stu-id="2d54c-135">If your code is part of an application that won't be called by other code, security is simple and special coding might not be required.</span></span> <span data-ttu-id="2d54c-136">Należy jednak pamiętać, że złośliwy kod może wywołać kodu.</span><span class="sxs-lookup"><span data-stu-id="2d54c-136">However, remember that malicious code can call your code.</span></span> <span data-ttu-id="2d54c-137">Gdy zabezpieczenia dostępu kodu może zatrzymać złośliwego kodu, uzyskiwanie dostępu do zasobów, taki kod nadal można odczytać wartości pola lub właściwości, które mogą zawierać poufne informacje.</span><span class="sxs-lookup"><span data-stu-id="2d54c-137">While code access security might stop malicious code from accessing resources, such code could still read values of your fields or properties that might contain sensitive information.</span></span>

<span data-ttu-id="2d54c-138">Ponadto jeśli kod akceptuje dane wejściowe użytkownika z Internetu lub zawodnej źródeł, musi być ostrożność złośliwych danych.</span><span class="sxs-lookup"><span data-stu-id="2d54c-138">Additionally, if your code accepts user input from the Internet or other unreliable sources, you must be careful about malicious input.</span></span>

## <a name="managed-wrapper-to-native-code-implementation"></a><span data-ttu-id="2d54c-139">Zarządzany otok dla implementacji kodu natywnego</span><span class="sxs-lookup"><span data-stu-id="2d54c-139">Managed wrapper to native code implementation</span></span>

<span data-ttu-id="2d54c-140">Zwykle w tym scenariuszu niektóre przydatne jest implementowana w kodzie natywnym, który ma być dostępne dla kodu zarządzanego.</span><span class="sxs-lookup"><span data-stu-id="2d54c-140">Typically in this scenario, some useful functionality is implemented in native code that you want to make available to managed code.</span></span> <span data-ttu-id="2d54c-141">Zarządzanych otok są łatwe do zapisu przy użyciu jednej z tych platform wywołania lub współdziałania z modelem COM.</span><span class="sxs-lookup"><span data-stu-id="2d54c-141">Managed wrappers are easy to write using either platform invoke or COM interop.</span></span> <span data-ttu-id="2d54c-142">Jednak jeśli to zrobisz, wywołań usługi otoki musi mieć prawa kodu niezarządzanego, aby można było pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="2d54c-142">However, if you do this, callers of your wrappers must have unmanaged code rights in order to succeed.</span></span> <span data-ttu-id="2d54c-143">W obszarze domyślne zasady oznacza to, że kod pobrany z sieci intranet lub Internetem nie będzie działać z otoki.</span><span class="sxs-lookup"><span data-stu-id="2d54c-143">Under default policy, this means that code downloaded from an intranet or the Internet won't work with the wrappers.</span></span>

<span data-ttu-id="2d54c-144">Zamiast kodu niezarządzanego prawa do wszystkich aplikacji, które używają tych otoki, lepiej jest udzielić tych uprawnień tylko do kodu otoki.</span><span class="sxs-lookup"><span data-stu-id="2d54c-144">Instead of giving unmanaged code rights to all applications that use these wrappers, it's better to give these rights only to the wrapper code.</span></span> <span data-ttu-id="2d54c-145">Jeśli podstawową funkcjonalność ujawnia żadnych zasobów i wdrożenia podobnie jest bezpieczne, otoki musi tylko do potwierdzenia swoich praw umożliwiająca jakiegokolwiek kodu do wywołania przez nią.</span><span class="sxs-lookup"><span data-stu-id="2d54c-145">If the underlying functionality exposes no resources and the implementation is likewise safe, the wrapper only needs to assert its rights, which enables any code to call through it.</span></span> <span data-ttu-id="2d54c-146">W przypadku zasobów kodowania zabezpieczeń powinna być taka sama w przypadku kodu biblioteki, które są opisane w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="2d54c-146">When resources are involved, security coding should be the same as the library code case described in the next section.</span></span> <span data-ttu-id="2d54c-147">Ponieważ otoki potencjalnie jest ujawniany przez obiekty wywołujące do tych zasobów, dokładnej weryfikacji bezpieczeństwa kodu natywnego jest konieczne i odpowiada za otoki.</span><span class="sxs-lookup"><span data-stu-id="2d54c-147">Because the wrapper is potentially exposing callers to these resources, careful verification of the safety of the native code is necessary and is the wrapper's responsibility.</span></span>

## <a name="library-code-that-exposes-protected-resources"></a><span data-ttu-id="2d54c-148">Kod biblioteki udostępniający chronione zasoby</span><span class="sxs-lookup"><span data-stu-id="2d54c-148">Library code that exposes protected resources</span></span>

<span data-ttu-id="2d54c-149">Następujące podejście jest najbardziej zaawansowane i dlatego potencjalnie niebezpiecznych (jeśli jest wykonywane niepoprawnie) zabezpieczeń kodowania: biblioteki służy jako interfejs dla innego kodu, dostęp do niektórych zasobów, które w przeciwnym razie są niedostępne, tak samo, jak wymusić klas platformy .NET uprawnienia do zasobów, których używają.</span><span class="sxs-lookup"><span data-stu-id="2d54c-149">The following approach is the most powerful and hence potentially dangerous (if done incorrectly) for security coding: your library serves as an interface for other code to access certain resources that aren't otherwise available, just as the .NET classes enforce permissions for the resources they use.</span></span> <span data-ttu-id="2d54c-150">Wszędzie tam, gdzie należy udostępnić zasób, kod musi najpierw wymagają uprawnień dla danego zasobu (czyli go wykonać sprawdzanie zabezpieczeń) i zazwyczaj potwierdzenia swoich praw do wykonania bieżącej operacji.</span><span class="sxs-lookup"><span data-stu-id="2d54c-150">Wherever you expose a resource, your code must first demand the permission appropriate to the resource (that is, it must perform a security check) and then typically assert its rights to perform the actual operation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="2d54c-151">Tematy pokrewne</span><span class="sxs-lookup"><span data-stu-id="2d54c-151">Related topics</span></span>

|<span data-ttu-id="2d54c-152">Tytuł</span><span class="sxs-lookup"><span data-stu-id="2d54c-152">Title</span></span>|<span data-ttu-id="2d54c-153">Opis</span><span class="sxs-lookup"><span data-stu-id="2d54c-153">Description</span></span>|
|-----------|-----------------|
|[<span data-ttu-id="2d54c-154">Zabezpieczanie danych o stanie</span><span class="sxs-lookup"><span data-stu-id="2d54c-154">Securing State Data</span></span>](securing-state-data.md)|<span data-ttu-id="2d54c-155">Opisuje sposób chronić prywatnych elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="2d54c-155">Describes how to protect private members.</span></span>|
|[<span data-ttu-id="2d54c-156">Zabezpieczenia i dane użytkownika</span><span class="sxs-lookup"><span data-stu-id="2d54c-156">Security and User Input</span></span>](security-and-user-input.md)|<span data-ttu-id="2d54c-157">W tym artykule opisano problemy dotyczące zabezpieczeń dla aplikacji, które akceptują dane wejściowe użytkownika.</span><span class="sxs-lookup"><span data-stu-id="2d54c-157">Describes security concerns for applications that accept user input.</span></span>|
|[<span data-ttu-id="2d54c-158">Zabezpieczenia i sytuacja wyścigu</span><span class="sxs-lookup"><span data-stu-id="2d54c-158">Security and Race Conditions</span></span>](security-and-race-conditions.md)|<span data-ttu-id="2d54c-159">Opisuje sposoby unikania wyścigu w kodzie.</span><span class="sxs-lookup"><span data-stu-id="2d54c-159">Describes how to avoid race conditions in your code.</span></span>|
|[<span data-ttu-id="2d54c-160">Zabezpieczenia i generowanie kodu na bieżąco</span><span class="sxs-lookup"><span data-stu-id="2d54c-160">Security and On-the-Fly Code Generation</span></span>](security-and-on-the-fly-code-generation.md)|<span data-ttu-id="2d54c-161">W tym artykule opisano problemy dotyczące zabezpieczeń dla aplikacji, które generują kod dynamicznych.</span><span class="sxs-lookup"><span data-stu-id="2d54c-161">Describes security concerns for applications that generate dynamic code.</span></span>|
|[<span data-ttu-id="2d54c-162">Zabezpieczenia oparte na rolach</span><span class="sxs-lookup"><span data-stu-id="2d54c-162">Role-Based Security</span></span>](role-based-security.md)|<span data-ttu-id="2d54c-163">W tym artykule opisano zabezpieczenia oparte na roli platformy .NET szczegółowo i zawiera instrukcje dotyczące korzystania z niego w kodzie.</span><span class="sxs-lookup"><span data-stu-id="2d54c-163">Describes .NET role-based security in detail and provides instructions for using it in your code.</span></span>|
