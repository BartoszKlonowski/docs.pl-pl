---
title: Obiekty główne i obiekty tożsamości
description: Przeczytaj informacje o obiektach tożsamości, które reprezentują użytkowników w programie .NET. Zapoznaj się również z obiektami podmiotu zabezpieczeń, które hermetyzują zarówno obiekt tożsamości & rolę.
ms.date: 07/15/2020
ms.technology: dotnet-standard
helpviewer_keywords:
- WindowsIdentity objects
- GenericIdentity objects
- GenericPrincipal objects
- identity objects, about identity objects
- security [.NET], identity objects
- principal objects, about principal objects
- security [.NET], principals
- WindowsPrincipal objects
ms.assetid: aa5930ad-f3d7-40aa-b6f6-c6edcd5c64f7
ms.openlocfilehash: 79caeed6ed64a07238e398af1e12f51640b88b62
ms.sourcegitcommit: b7a8b09828bab4e90f66af8d495ecd7024c45042
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/04/2020
ms.locfileid: "87555257"
---
# <a name="principal-and-identity-objects"></a><span data-ttu-id="d63bc-104">Obiekty główne i obiekty tożsamości</span><span class="sxs-lookup"><span data-stu-id="d63bc-104">Principal and Identity Objects</span></span>

> [!NOTE]
> <span data-ttu-id="d63bc-105">Ten artykuł dotyczy systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="d63bc-105">This article applies to Windows.</span></span>
>
> <span data-ttu-id="d63bc-106">Aby uzyskać informacje na temat ASP.NET Core, zobacz [ASP.NET Core Security](/aspnet/core/security/).</span><span class="sxs-lookup"><span data-stu-id="d63bc-106">For information about ASP.NET Core, see [ASP.NET Core Security](/aspnet/core/security/).</span></span>

<span data-ttu-id="d63bc-107">Kod zarządzany może wykryć tożsamość lub rolę podmiotu zabezpieczeń za pomocą <xref:System.Security.Principal.IPrincipal> obiektu, który zawiera odwołanie do <xref:System.Security.Principal.IIdentity> obiektu.</span><span class="sxs-lookup"><span data-stu-id="d63bc-107">Managed code can discover the identity or the role of a principal through a <xref:System.Security.Principal.IPrincipal> object, which contains a reference to an <xref:System.Security.Principal.IIdentity> object.</span></span> <span data-ttu-id="d63bc-108">Pomocne może być porównanie tożsamości i obiektów głównych z znanymi pojęciami, takimi jak konta użytkowników i grup.</span><span class="sxs-lookup"><span data-stu-id="d63bc-108">It might be helpful to compare identity and principal objects to familiar concepts like user and group accounts.</span></span> <span data-ttu-id="d63bc-109">W większości środowisk sieciowych konta użytkowników reprezentują osoby lub programy, natomiast konta grup reprezentują pewne kategorie użytkowników i prawa, które posiada.</span><span class="sxs-lookup"><span data-stu-id="d63bc-109">In most network environments, user accounts represent people or programs, while group accounts represent certain categories of users and the rights they possess.</span></span> <span data-ttu-id="d63bc-110">Podobnie obiekty tożsamości platformy .NET reprezentują użytkowników, natomiast role reprezentują członkostwa i konteksty zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="d63bc-110">Similarly, .NET identity objects represent users, while roles represent memberships and security contexts.</span></span> <span data-ttu-id="d63bc-111">W programie .NET obiekt Principal hermetyzuje zarówno obiekt tożsamości, jak i rolę.</span><span class="sxs-lookup"><span data-stu-id="d63bc-111">In .NET, the principal object encapsulates both an identity object and a role.</span></span> <span data-ttu-id="d63bc-112">Aplikacje platformy .NET przyznają uprawnienia podmiotowi zabezpieczeń na podstawie jego tożsamości lub, częściej, przynależności do roli.</span><span class="sxs-lookup"><span data-stu-id="d63bc-112">.NET applications grant rights to the principal based on its identity or, more commonly, its role membership.</span></span>  
  
## <a name="identity-objects"></a><span data-ttu-id="d63bc-113">Obiekty tożsamości</span><span class="sxs-lookup"><span data-stu-id="d63bc-113">Identity Objects</span></span>

<span data-ttu-id="d63bc-114">Obiekt Identity hermetyzuje informacje o zweryfikowanym użytkowniku lub jednostce.</span><span class="sxs-lookup"><span data-stu-id="d63bc-114">The identity object encapsulates information about the user or entity being validated.</span></span> <span data-ttu-id="d63bc-115">Na poziomie podstawowym obiekty tożsamości zawierają nazwę i typ uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d63bc-115">At their most basic level, identity objects contain a name and an authentication type.</span></span> <span data-ttu-id="d63bc-116">Może to być nazwa użytkownika lub nazwa konta systemu Windows, podczas gdy typem uwierzytelniania może być obsługiwany protokół logowania, taki jak Kerberos V5 lub wartość niestandardowa.</span><span class="sxs-lookup"><span data-stu-id="d63bc-116">The name can either be a user's name or the name of a Windows account, while the authentication type can be either a supported logon protocol, such as Kerberos V5, or a custom value.</span></span> <span data-ttu-id="d63bc-117">Platforma .NET definiuje <xref:System.Security.Principal.GenericIdentity> obiekt, którego można użyć w przypadku większości niestandardowych scenariuszy logowania i bardziej wyspecjalizowany <xref:System.Security.Principal.WindowsIdentity> obiekt, którego można użyć, gdy aplikacja ma korzystać z uwierzytelniania systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="d63bc-117">.NET defines a <xref:System.Security.Principal.GenericIdentity> object that can be used for most custom logon scenarios and a more specialized <xref:System.Security.Principal.WindowsIdentity> object that can be used when you want your application to rely on Windows authentication.</span></span> <span data-ttu-id="d63bc-118">Ponadto możesz zdefiniować własną klasę tożsamości, która hermetyzuje niestandardowe informacje o użytkownikach.</span><span class="sxs-lookup"><span data-stu-id="d63bc-118">Additionally, you can define your own identity class that encapsulates custom user information.</span></span>  
  
<span data-ttu-id="d63bc-119"><xref:System.Security.Principal.IIdentity>Interfejs definiuje właściwości dostępu do nazwy i typu uwierzytelniania, takich jak Kerberos V5 lub NTLM.</span><span class="sxs-lookup"><span data-stu-id="d63bc-119">The <xref:System.Security.Principal.IIdentity> interface defines properties for accessing a name and an authentication type, such as Kerberos V5 or NTLM.</span></span> <span data-ttu-id="d63bc-120">Wszystkie klasy **tożsamości** implementują interfejs **IIdentity** .</span><span class="sxs-lookup"><span data-stu-id="d63bc-120">All **Identity** classes implement the **IIdentity** interface.</span></span> <span data-ttu-id="d63bc-121">Nie istnieje żadna wymagana relacja między obiektem **Identity** i tokenem procesu systemu Windows NT, w ramach którego aktualnie wykonywany jest wątek.</span><span class="sxs-lookup"><span data-stu-id="d63bc-121">There is no required relationship between an **Identity** object and the Windows NT process token under which a thread is currently executing.</span></span> <span data-ttu-id="d63bc-122">Jeśli jednak obiekt **Identity** jest obiektem **WindowsIdentity** , założono, że tożsamość reprezentuje token zabezpieczający systemu Windows NT.</span><span class="sxs-lookup"><span data-stu-id="d63bc-122">However, if the **Identity** object is a **WindowsIdentity** object, the identity is assumed to represent a Windows NT security token.</span></span>  
  
## <a name="principal-objects"></a><span data-ttu-id="d63bc-123">Obiekty główne</span><span class="sxs-lookup"><span data-stu-id="d63bc-123">Principal Objects</span></span>

<span data-ttu-id="d63bc-124">Obiekt Principal reprezentuje kontekst zabezpieczeń, w którym jest uruchomiony kod.</span><span class="sxs-lookup"><span data-stu-id="d63bc-124">The principal object represents the security context under which code is running.</span></span> <span data-ttu-id="d63bc-125">Aplikacje implementujące prawa do przyznawania zabezpieczeń oparte na rolach w oparciu o rolę skojarzoną z obiektem Principal.</span><span class="sxs-lookup"><span data-stu-id="d63bc-125">Applications that implement role-based security grant rights based on the role associated with a principal object.</span></span> <span data-ttu-id="d63bc-126">Podobnie jak w przypadku obiektów tożsamości, platforma .NET udostępnia <xref:System.Security.Principal.GenericPrincipal> obiekt i <xref:System.Security.Principal.WindowsPrincipal> obiekt.</span><span class="sxs-lookup"><span data-stu-id="d63bc-126">Similar to identity objects, .NET provides a <xref:System.Security.Principal.GenericPrincipal> object and a <xref:System.Security.Principal.WindowsPrincipal> object.</span></span> <span data-ttu-id="d63bc-127">Można także definiować własne niestandardowe klasy główne.</span><span class="sxs-lookup"><span data-stu-id="d63bc-127">You can also define your own custom principal classes.</span></span>  
  
<span data-ttu-id="d63bc-128"><xref:System.Security.Principal.IPrincipal>Interfejs definiuje Właściwość uzyskiwania dostępu do skojarzonego obiektu **tożsamości** , a także metodę określania, czy użytkownik identyfikowany przez obiekt **Principal** jest członkiem danej roli.</span><span class="sxs-lookup"><span data-stu-id="d63bc-128">The <xref:System.Security.Principal.IPrincipal> interface defines a property for accessing an associated **Identity** object as well as a method for determining whether the user identified by the **Principal** object is a member of a given role.</span></span> <span data-ttu-id="d63bc-129">Wszystkie klasy **Główne** implementują interfejs **IPrincipal** oraz wszelkie dodatkowe właściwości i metody, które są niezbędne.</span><span class="sxs-lookup"><span data-stu-id="d63bc-129">All **Principal** classes implement the **IPrincipal** interface as well as any additional properties and methods that are necessary.</span></span> <span data-ttu-id="d63bc-130">Na przykład środowisko uruchomieniowe języka wspólnego udostępnia klasę **WindowsPrincipal** , która implementuje dodatkowe funkcje mapowania członkostwa grupy systemu Windows NT lub Windows 2000 do ról.</span><span class="sxs-lookup"><span data-stu-id="d63bc-130">For example, the common language runtime provides the **WindowsPrincipal** class, which implements additional functionality for mapping Windows NT or Windows 2000 group membership to roles.</span></span>  
  
<span data-ttu-id="d63bc-131">Obiekt **Principal** jest powiązany z obiektem kontekstu wywołania ( <xref:System.Runtime.Remoting.Messaging.CallContext> ) w domenie aplikacji ( <xref:System.AppDomain> ).</span><span class="sxs-lookup"><span data-stu-id="d63bc-131">A **Principal** object is bound to a call context (<xref:System.Runtime.Remoting.Messaging.CallContext>) object within an application domain (<xref:System.AppDomain>).</span></span> <span data-ttu-id="d63bc-132">Domyślny kontekst wywołania jest zawsze tworzony z każdą nową **domeną aplikacji**, więc zawsze jest dostępny kontekst wywołania do akceptowania obiektu **głównego** .</span><span class="sxs-lookup"><span data-stu-id="d63bc-132">A default call context is always created with each new **AppDomain**, so there is always a call context available to accept the **Principal** object.</span></span> <span data-ttu-id="d63bc-133">Po utworzeniu nowego wątku tworzony jest również obiekt **CallContext** dla wątku.</span><span class="sxs-lookup"><span data-stu-id="d63bc-133">When a new thread is created, a **CallContext** object is also created for the thread.</span></span> <span data-ttu-id="d63bc-134">Odwołanie do obiektu **głównego** jest automatycznie kopiowane z wątku tworzenia do **CallContext**nowego wątku.</span><span class="sxs-lookup"><span data-stu-id="d63bc-134">The **Principal** object reference is automatically copied from the creating thread to the new thread's **CallContext**.</span></span> <span data-ttu-id="d63bc-135">Jeśli środowisko wykonawcze nie może ustalić, który obiekt **główny** należy do twórcy wątku, następuje po zasadach domyślnych dla tworzenia obiektów **podmiotu zabezpieczeń** i **tożsamości** .</span><span class="sxs-lookup"><span data-stu-id="d63bc-135">If the runtime cannot determine which **Principal** object belongs to the creator of the thread, it follows the default policy for **Principal** and **Identity** object creation.</span></span>  
  
<span data-ttu-id="d63bc-136">Konfigurowalne zasady specyficzne dla domeny aplikacji definiują reguły decydujące o typie obiektu **podmiotu zabezpieczeń** , który ma zostać skojarzony z nową domeną aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d63bc-136">A configurable application domain-specific policy defines the rules for deciding what type of **Principal** object to associate with a new application domain.</span></span> <span data-ttu-id="d63bc-137">W przypadku, gdy zasady zabezpieczeń pozwalają, środowisko uruchomieniowe może utworzyć obiekty **Principal** i **Identity** , które odzwierciedlają token systemu operacyjnego skojarzony z bieżącym wątkiem wykonywania.</span><span class="sxs-lookup"><span data-stu-id="d63bc-137">Where security policy permits, the runtime can create **Principal** and **Identity** objects that reflect the operating system token associated with the current thread of execution.</span></span> <span data-ttu-id="d63bc-138">Domyślnie środowisko uruchomieniowe używa obiektów **Principal** i **Identity** , które reprezentują nieuwierzytelnionych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="d63bc-138">By default, the runtime uses **Principal** and **Identity** objects that represent unauthenticated users.</span></span> <span data-ttu-id="d63bc-139">Środowisko uruchomieniowe nie tworzy tych domyślnych obiektów **głównych** i **tożsamości** , dopóki kod nie spróbuje uzyskać do nich dostępu.</span><span class="sxs-lookup"><span data-stu-id="d63bc-139">The runtime does not create these default **Principal** and **Identity** objects until the code attempts to access them.</span></span>  
  
<span data-ttu-id="d63bc-140">Zaufany kod, który tworzy domenę aplikacji, może ustawić zasady domeny aplikacji kontrolujące konstruowanie domyślnych obiektów **głównych** i **tożsamości** .</span><span class="sxs-lookup"><span data-stu-id="d63bc-140">Trusted code that creates an application domain can set the application domain policy that controls construction of the default **Principal** and **Identity** objects.</span></span> <span data-ttu-id="d63bc-141">Te zasady specyficzne dla domeny aplikacji mają zastosowanie do wszystkich wątków wykonywania w tej domenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d63bc-141">This application domain-specific policy applies to all execution threads in that application domain.</span></span> <span data-ttu-id="d63bc-142">Niezarządzany, zaufany Host nieodłącznie ma możliwość ustawienia tych zasad, ale kod zarządzany, który ustawia te zasady, musi mieć uprawnienia <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> do kontrolowania zasad domeny.</span><span class="sxs-lookup"><span data-stu-id="d63bc-142">An unmanaged, trusted host inherently has the ability to set this policy, but managed code that sets this policy must have the <xref:System.Security.Permissions.SecurityPermission?displayProperty=nameWithType> for controlling domain policy.</span></span>  
  
<span data-ttu-id="d63bc-143">Podczas przesyłania obiektu **podmiotu zabezpieczeń** między domenami aplikacji, ale w ramach tego samego procesu (i w związku z tym na tym samym komputerze) infrastruktura zdalna kopiuje odwołanie do obiektu **podmiotu zabezpieczeń** skojarzonego z kontekstem obiektu wywołującego do kontekstu wywoływanego.</span><span class="sxs-lookup"><span data-stu-id="d63bc-143">When transmitting a **Principal** object across application domains but within the same process (and therefore on the same computer), the remoting infrastructure copies a reference to the **Principal** object associated with the caller's context to the callee's context.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d63bc-144">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="d63bc-144">See also</span></span>

- [<span data-ttu-id="d63bc-145">Instrukcje: Tworzenie obiektu WindowsPrincipal</span><span class="sxs-lookup"><span data-stu-id="d63bc-145">How to: Create a WindowsPrincipal Object</span></span>](how-to-create-a-windowsprincipal-object.md)
- [<span data-ttu-id="d63bc-146">Instrukcje: Tworzenie obiektów GenericPrincipal i GenericIdentity</span><span class="sxs-lookup"><span data-stu-id="d63bc-146">How to: Create GenericPrincipal and GenericIdentity Objects</span></span>](how-to-create-genericprincipal-and-genericidentity-objects.md)
- [<span data-ttu-id="d63bc-147">Zastępowanie obiektu głównego</span><span class="sxs-lookup"><span data-stu-id="d63bc-147">Replacing a Principal Object</span></span>](replacing-a-principal-object.md)
- [<span data-ttu-id="d63bc-148">Personifikacja i przywracanie</span><span class="sxs-lookup"><span data-stu-id="d63bc-148">Impersonating and Reverting</span></span>](impersonating-and-reverting.md)
- [<span data-ttu-id="d63bc-149">Zabezpieczenia oparte na rolach</span><span class="sxs-lookup"><span data-stu-id="d63bc-149">Role-Based Security</span></span>](role-based-security.md)
- [<span data-ttu-id="d63bc-150">Główne pojęcia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="d63bc-150">Key Security Concepts</span></span>](key-security-concepts.md)
- [<span data-ttu-id="d63bc-151">Zabezpieczenia ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="d63bc-151">ASP.NET Core Security</span></span>](/aspnet/core/security/)
