---
title: Typy konwerterów dla XAML — Omówienie
ms.date: 03/30/2017
helpviewer_keywords:
- XAML [XAML Services], type converters
- XAML [XAML Services], TypeConverter
- type conversion for XAML [XAML Services]
ms.assetid: 51a65860-efcb-4fe0-95a0-1c679cde66b7
ms.openlocfilehash: 6e78210178fda65bb3baad0d24eb3a20cd6f2a3e
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/15/2020
ms.locfileid: "90540116"
---
# <a name="overview-of-type-converters-for-xaml"></a><span data-ttu-id="4827e-102">Omówienie konwerterów typów dla języka XAML</span><span class="sxs-lookup"><span data-stu-id="4827e-102">Overview of type converters for XAML</span></span>

<span data-ttu-id="4827e-103">Typy konwerterów dostarczają logiki dla składnika zapisywania obiektów, który konwertuje z ciągu znaków XAML na określone obiekty w grafie obiektów.</span><span class="sxs-lookup"><span data-stu-id="4827e-103">Type converters supply logic for an object writer that converts from a string in XAML markup into particular objects in an object graph.</span></span> <span data-ttu-id="4827e-104">W usługach programu .NET XAML konwerter typu musi być klasą, która pochodzi od <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="4827e-104">In .NET XAML Services, the type converter must be a class that derives from <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="4827e-105">Niektóre konwertery obsługują również ścieżkę zapisu XAML i mogą służyć do serializacji obiektu w postaci ciągu w znaczniku serializacji.</span><span class="sxs-lookup"><span data-stu-id="4827e-105">Some converters also support the XAML save path and can be used to serialize an object into a string form in serialization markup.</span></span> <span data-ttu-id="4827e-106">W tym temacie opisano, jak i kiedy są wywoływane konwertery typów w języku XAML, i przedstawiono porady dotyczące implementacji metod przesłania <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="4827e-106">This topic describes how and when type converters in XAML are invoked, and provides implementation advice for the method overrides of <xref:System.ComponentModel.TypeConverter>.</span></span>

## <a name="type-conversion-concepts"></a><span data-ttu-id="4827e-107">Pojęcia dotyczące konwersji typów</span><span class="sxs-lookup"><span data-stu-id="4827e-107">Type Conversion Concepts</span></span>

<span data-ttu-id="4827e-108">W poniższych sekcjach objaśniono podstawowe pojęcia związane z używaniem ciągów przez XAML i sposobu, w jaki moduły zapisujące obiektów w usługach .NET XAML używają konwerterów typów do przetwarzania niektórych wartości ciągów, które są napotkane w źródle XAML.</span><span class="sxs-lookup"><span data-stu-id="4827e-108">The following sections explain basic concepts about how XAML uses strings, and how object writers in .NET XAML Services use type converters to process some of the string values that are encountered in a XAML source.</span></span>

### <a name="xaml-and-string-values"></a><span data-ttu-id="4827e-109">Wartości XAML i String</span><span class="sxs-lookup"><span data-stu-id="4827e-109">XAML and String Values</span></span>

<span data-ttu-id="4827e-110">Po ustawieniu wartości atrybutu w pliku XAML, początkowy typ tej wartości jest ciągiem w ogólnym sensie, a wartość atrybutu String w sensie XML.</span><span class="sxs-lookup"><span data-stu-id="4827e-110">When you set an attribute value in a XAML file, the initial type of that value is a string in a general sense, and a string attribute value in an XML sense.</span></span> <span data-ttu-id="4827e-111">Nawet inne elementy podstawowe, takie jak, <xref:System.Double> są początkowo ciągami do procesora XAML.</span><span class="sxs-lookup"><span data-stu-id="4827e-111">Even other primitives such as <xref:System.Double> are initially strings to a XAML processor.</span></span>

<span data-ttu-id="4827e-112">W większości przypadków procesor XAML wymaga dwóch informacji do przetworzenia wartości atrybutu.</span><span class="sxs-lookup"><span data-stu-id="4827e-112">In most cases, a XAML processor needs two pieces of information to process an attribute value.</span></span> <span data-ttu-id="4827e-113">Pierwsza część informacji jest typem wartości właściwości, która jest ustawiana.</span><span class="sxs-lookup"><span data-stu-id="4827e-113">The first piece of information is the value type of the property that is being set.</span></span> <span data-ttu-id="4827e-114">Dowolny ciąg, który definiuje wartość atrybutu i który jest przetwarzany w języku XAML, musi ostatecznie być konwertowany lub rozpoznany jako wartość tego typu.</span><span class="sxs-lookup"><span data-stu-id="4827e-114">Any string that defines an attribute value and that is processed in XAML must ultimately be converted or resolved to a value of that type.</span></span> <span data-ttu-id="4827e-115">Jeśli wartość jest typem podstawowym, który jest zrozumiały dla analizatora XAML (na przykład wartość liczbowa), podejmowana jest bezpośrednia Konwersja ciągu.</span><span class="sxs-lookup"><span data-stu-id="4827e-115">If the value is a primitive that is understood by the XAML parser (such as a numeric value), a direct conversion of the string is attempted.</span></span> <span data-ttu-id="4827e-116">Jeśli wartość atrybutu odwołuje się do wyliczenia, dostarczony ciąg jest sprawdzany pod kątem zgodności nazw z nazwaną stałą w tym wyliczeniu.</span><span class="sxs-lookup"><span data-stu-id="4827e-116">If the value for the attribute references an enumeration, the supplied string is checked for a name match to a named constant in that enumeration.</span></span> <span data-ttu-id="4827e-117">Jeśli wartość nie jest rozpoznawana jako nazwa pierwotna lub stała z wyliczenia, odpowiedni typ musi być w stanie podać wartość lub odwołanie na podstawie przekonwertowanego ciągu.</span><span class="sxs-lookup"><span data-stu-id="4827e-117">If the value is not a parser-understood primitive or a constant name from an enumeration, the applicable type must be able to provide a value or reference that is based on a converted string.</span></span>

> [!NOTE]
> <span data-ttu-id="4827e-118">Dyrektywy języka XAML nie używają konwerterów typów.</span><span class="sxs-lookup"><span data-stu-id="4827e-118">XAML language directives do not use type converters.</span></span>

### <a name="type-converters-and-markup-extensions"></a><span data-ttu-id="4827e-119">Konwertery typów i rozszerzenia znaczników</span><span class="sxs-lookup"><span data-stu-id="4827e-119">Type Converters and Markup Extensions</span></span>

<span data-ttu-id="4827e-120">Użycie rozszerzeń znaczników musi być obsługiwane przez procesor XAML przed sprawdzeniem typu właściwości i innych zagadnień.</span><span class="sxs-lookup"><span data-stu-id="4827e-120">Markup extension usages must be handled by a XAML processor before it checks for property type and other considerations.</span></span> <span data-ttu-id="4827e-121">Na przykład, jeśli właściwość ustawiana jako atrybut zwykle ma konwersję typu, ale w konkretnym przypadku jest ustawiana za pomocą rozszerzenia znaczników, wówczas zachowanie rozszerzenia znaczników jest najpierw przetwarzane.</span><span class="sxs-lookup"><span data-stu-id="4827e-121">For example, if a property being set as an attribute normally has a type conversion, but in a particular case is set by a markup extension usage, then the markup extension behavior processes first.</span></span> <span data-ttu-id="4827e-122">Jedną z typowych sytuacji, gdy wymagane jest rozszerzenie znaczników, jest odwołanie do obiektu, który już istnieje.</span><span class="sxs-lookup"><span data-stu-id="4827e-122">One common situation where a markup extension is necessary is to make a reference to an object that already exists.</span></span> <span data-ttu-id="4827e-123">W tym scenariuszu konwerter typu bezstanowego może generować tylko nowe wystąpienie, które może nie być pożądane.</span><span class="sxs-lookup"><span data-stu-id="4827e-123">For this scenario, a stateless type converter can only generate a new instance, which might not be desirable.</span></span> <span data-ttu-id="4827e-124">Aby uzyskać więcej informacji na temat rozszerzeń znaczników, zobacz [znaczniki rozszerzeń dla języka XAML — Omówienie](markup-extensions-overview.md).</span><span class="sxs-lookup"><span data-stu-id="4827e-124">For more information about markup extensions, see [Markup Extensions for XAML Overview](markup-extensions-overview.md).</span></span>

### <a name="native-type-converters"></a><span data-ttu-id="4827e-125">Konwertery typów natywnych</span><span class="sxs-lookup"><span data-stu-id="4827e-125">Native Type Converters</span></span>

<span data-ttu-id="4827e-126">We wdrożeniach usług Windows Presentation Foundation (WPF) i .NET XAML istnieją pewne typy CLR, które mają obsługę konwersji typu macierzystego.</span><span class="sxs-lookup"><span data-stu-id="4827e-126">In the Windows Presentation Foundation (WPF) and .NET XAML services implementations, there are certain CLR types that have native type conversion handling.</span></span> <span data-ttu-id="4827e-127">Jednak te typy CLR nie są zwyczajowo uważane za elementy pierwotne.</span><span class="sxs-lookup"><span data-stu-id="4827e-127">However, those CLR types are not conventionally thought of as primitives.</span></span> <span data-ttu-id="4827e-128">Przykładem takiego typu jest <xref:System.DateTime> .</span><span class="sxs-lookup"><span data-stu-id="4827e-128">An example of such a type is <xref:System.DateTime>.</span></span> <span data-ttu-id="4827e-129">Jednym z powodów tego jest to, jak działa architektura .NET Framework: typ <xref:System.DateTime> jest zdefiniowany w bibliotece Mscorlib, a najbardziej podstawowa Biblioteka w programie .NET.</span><span class="sxs-lookup"><span data-stu-id="4827e-129">One reason for this is how the .NET Framework architecture works: the type <xref:System.DateTime> is defined in mscorlib, the most basic library in .NET.</span></span> <span data-ttu-id="4827e-130"><xref:System.DateTime> nie jest dozwolone, aby mieć atrybut pochodzący z innego zestawu, który wprowadza zależność ( <xref:System.ComponentModel.TypeConverterAttribute> pochodzi z systemu).</span><span class="sxs-lookup"><span data-stu-id="4827e-130"><xref:System.DateTime> is not permitted to be attributed with an attribute that comes from another assembly that introduces a dependency (<xref:System.ComponentModel.TypeConverterAttribute> is from System).</span></span> <span data-ttu-id="4827e-131">W związku z tym nie można obsługiwać standardowego mechanizmu wykrywania konwertera typów przez przypisanie.</span><span class="sxs-lookup"><span data-stu-id="4827e-131">Therefore, the usual type converter discovery mechanism by attributing cannot be supported.</span></span> <span data-ttu-id="4827e-132">Zamiast tego Analizator XAML ma listę typów, które wymagają przetwarzania natywnego, i przetwarza te typy podobnie jak w przypadku przetwarzania prawdziwych elementów podstawowych.</span><span class="sxs-lookup"><span data-stu-id="4827e-132">Instead, the XAML parser has a list of types that need native processing, and it processes these types similar to how the true primitives are processed.</span></span> <span data-ttu-id="4827e-133">W przypadku <xref:System.DateTime> , przetwarzanie obejmuje wywołanie <xref:System.DateTime.Parse%2A> .</span><span class="sxs-lookup"><span data-stu-id="4827e-133">In the case of <xref:System.DateTime>, this processing involves a call to <xref:System.DateTime.Parse%2A>.</span></span>

## <a name="implementing-a-type-converter"></a><span data-ttu-id="4827e-134">Implementowanie konwertera typów</span><span class="sxs-lookup"><span data-stu-id="4827e-134">Implementing a Type Converter</span></span>

<span data-ttu-id="4827e-135">W poniższych sekcjach omówiono interfejs API <xref:System.ComponentModel.TypeConverter> klasy.</span><span class="sxs-lookup"><span data-stu-id="4827e-135">The following sections discuss the API of the <xref:System.ComponentModel.TypeConverter> class.</span></span>

### <a name="typeconverter"></a><span data-ttu-id="4827e-136">TypeConverter</span><span class="sxs-lookup"><span data-stu-id="4827e-136">TypeConverter</span></span>

<span data-ttu-id="4827e-137">W obszarze usługi platformy .NET XAML wszystkie konwertery typów, które są używane na potrzeby języka XAML, są klasami pochodnymi od klasy bazowej <xref:System.ComponentModel.TypeConverter> .</span><span class="sxs-lookup"><span data-stu-id="4827e-137">Under .NET XAML Services, all type converters that are used for XAML purposes are classes that derive from the base class <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="4827e-138"><xref:System.ComponentModel.TypeConverter>Klasa istniała w wersjach .NET Framework przed istnieniem XAML; jednym z oryginalnych <xref:System.ComponentModel.TypeConverter> scenariuszy było zapewnienie konwersji ciągów dla edytorów właściwości w projektantach wizualizacji.</span><span class="sxs-lookup"><span data-stu-id="4827e-138">The <xref:System.ComponentModel.TypeConverter> class existed in versions of the .NET Framework before XAML existed; one of the original <xref:System.ComponentModel.TypeConverter> scenarios was to provide string conversion for property editors in visual designers.</span></span>

<span data-ttu-id="4827e-139">Dla języka XAML rola <xref:System.ComponentModel.TypeConverter> jest rozwinięta.</span><span class="sxs-lookup"><span data-stu-id="4827e-139">For XAML, the role of <xref:System.ComponentModel.TypeConverter> is expanded.</span></span> <span data-ttu-id="4827e-140">W celach XAML <xref:System.ComponentModel.TypeConverter> jest klasą bazową w celu zapewnienia obsługi określonych ciągów i konwersji ciągów.</span><span class="sxs-lookup"><span data-stu-id="4827e-140">For XAML purposes, <xref:System.ComponentModel.TypeConverter> is the base class for providing support for certain to-string and from-string conversions.</span></span> <span data-ttu-id="4827e-141">Parametry from umożliwiają analizowanie wartości atrybutu String z XAML.</span><span class="sxs-lookup"><span data-stu-id="4827e-141">From-string enables parsing a string attribute value from XAML.</span></span> <span data-ttu-id="4827e-142">Ciąg może umożliwiać przetwarzanie wartości właściwości określonego obiektu z powrotem do atrybutu w kodzie XAML dla serializacji.</span><span class="sxs-lookup"><span data-stu-id="4827e-142">To-string might enable processing a run-time value of a particular object property back into an attribute in XAML for serialization.</span></span>

<span data-ttu-id="4827e-143"><xref:System.ComponentModel.TypeConverter> definiuje cztery składowe, które są istotne dla konwersji do-String i z-String dla celów przetwarzania kodu XAML:</span><span class="sxs-lookup"><span data-stu-id="4827e-143"><xref:System.ComponentModel.TypeConverter> defines four members that are relevant for converting to-string and from-string for XAML processing purposes:</span></span>

- <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>

- <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>

- <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>

- <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>

<span data-ttu-id="4827e-144">Z tych elementów członkowskich najważniejsze metody to <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> , które konwertuje ciąg wejściowy na wymagany typ obiektu.</span><span class="sxs-lookup"><span data-stu-id="4827e-144">Of these members, the most important method is <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>, which converts the input string to the required object type.</span></span> <span data-ttu-id="4827e-145"><xref:System.ComponentModel.TypeConverter.ConvertFrom%2A>Metodę można zaimplementować w celu przekonwertowania szerszego zakresu typów na zamierzony typ docelowy konwertera.</span><span class="sxs-lookup"><span data-stu-id="4827e-145">The <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method can be implemented to convert a wider range of types into the intended destination type of the converter.</span></span> <span data-ttu-id="4827e-146">W związku z tym może obsługiwać cele wykraczające poza kod XAML, takie jak obsługa konwersji w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="4827e-146">Therefore, it can serve purposes that extend beyond XAML, such as supporting run-time conversions.</span></span> <span data-ttu-id="4827e-147">Jednak w przypadku użycia XAML tylko ścieżka kodu, która może przetwarzać <xref:System.String> dane wejściowe, jest ważna.</span><span class="sxs-lookup"><span data-stu-id="4827e-147">However, for XAML use, only the code path that can process a <xref:System.String> input is important.</span></span>

<span data-ttu-id="4827e-148">Druga z najważniejszych metod to <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> .</span><span class="sxs-lookup"><span data-stu-id="4827e-148">The second-most important method is <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span> <span data-ttu-id="4827e-149">Jeśli aplikacja jest konwertowana na reprezentację znaczników (na przykład jeśli jest zapisywana w języku XAML jako plik), jest uwzględniany <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> w większym scenariuszu składnika zapisywania tekstu XAML, aby utworzyć reprezentację znaczników.</span><span class="sxs-lookup"><span data-stu-id="4827e-149">If an application is converted to a markup representation (for example, if it is saved to XAML as a file), <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is involved in the larger scenario of a XAML text writer to produce a markup representation.</span></span> <span data-ttu-id="4827e-150">W takim przypadku ważną ścieżką kodu dla języka XAML jest, gdy wywołujący przekazuje `destinationType` element <xref:System.String> .</span><span class="sxs-lookup"><span data-stu-id="4827e-150">In this case, the important code path for XAML is when the caller passes a `destinationType` of <xref:System.String>.</span></span>

<span data-ttu-id="4827e-151"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> i <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> obsługują metody, które są używane, gdy usługa wysyła zapytanie o możliwości <xref:System.ComponentModel.TypeConverter> implementacji.</span><span class="sxs-lookup"><span data-stu-id="4827e-151"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> and <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> are support methods that are used when a service queries the capabilities of the <xref:System.ComponentModel.TypeConverter> implementation.</span></span> <span data-ttu-id="4827e-152">Należy zaimplementować te metody, aby zwrócić się do `true` przypadków specyficznych dla typów, które są równoważnymi metodami konwersji konwertera.</span><span class="sxs-lookup"><span data-stu-id="4827e-152">You must implement these methods to return `true` for type-specific cases that the equivalent conversion methods of your converter support.</span></span> <span data-ttu-id="4827e-153">Na potrzeby języka XAML zazwyczaj oznacza to <xref:System.String> Typ.</span><span class="sxs-lookup"><span data-stu-id="4827e-153">For XAML purposes, this generally means the <xref:System.String> type.</span></span>

### <a name="culture-information-and-type-converters-for-xaml"></a><span data-ttu-id="4827e-154">Informacje o kulturze i konwertery typów dla języka XAML</span><span class="sxs-lookup"><span data-stu-id="4827e-154">Culture Information and Type Converters for XAML</span></span>

<span data-ttu-id="4827e-155">Każda <xref:System.ComponentModel.TypeConverter> implementacja może jednoznacznie interpretować, co jest prawidłowym ciągiem dla konwersji, i może również używać lub ignorować opis typu, który jest przesyłany jako parametry.</span><span class="sxs-lookup"><span data-stu-id="4827e-155">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what is a valid string for a conversion, and it can also use or ignore the type description that is passed as parameters.</span></span> <span data-ttu-id="4827e-156">Ważnym zagadnieniem dotyczącym konwersji kultury i języka XAML są następujące: Chociaż użycie lokalizowalnych ciągów jako wartości atrybutów jest obsługiwane przez język XAML, nie można używać tych lokalizowalnych ciągów jako danych wejściowych konwertera typów z określonymi wymaganiami kultury.</span><span class="sxs-lookup"><span data-stu-id="4827e-156">An important consideration for culture and XAML type conversion is the following: although using localizable strings as attribute values is supported by XAML, you cannot use these localizable strings as type converter input with specific culture requirements.</span></span> <span data-ttu-id="4827e-157">To ograniczenie wynika z faktu, że konwertery typów dla wartości atrybutów XAML wymagają stałego języka XAML, który używa `en-US` kultury.</span><span class="sxs-lookup"><span data-stu-id="4827e-157">This limitation is because type converters for XAML attribute values involve a necessarily fixed-language XAML-processing behavior that uses `en-US` culture.</span></span> <span data-ttu-id="4827e-158">Aby uzyskać więcej informacji na temat przyczyn związanych z projektowaniem tego ograniczenia, zobacz Specyfikacja języka XAML ([ \[ MS \] -XAML](/previous-versions/msp-n-p/ff650760(v=pandp.10))) lub [Omówienie globalizacji i lokalizacji platformy WPF](/dotnet/desktop/wpf/advanced/wpf-globalization-and-localization-overview).</span><span class="sxs-lookup"><span data-stu-id="4827e-158">For more information about the design reasons for this restriction, see the XAML language specification ([\[MS-XAML\]](/previous-versions/msp-n-p/ff650760(v=pandp.10))) or [WPF Globalization and Localization Overview](/dotnet/desktop/wpf/advanced/wpf-globalization-and-localization-overview).</span></span>

<span data-ttu-id="4827e-159">Przykładowo, gdy kultura może być problemem, niektóre kultury używają przecinka zamiast kropki jako ogranicznika przecinka dziesiętnego dla liczb w postaci ciągów.</span><span class="sxs-lookup"><span data-stu-id="4827e-159">As an example where culture can be an issue, some cultures use a comma instead of a period as the decimal point delimiter for numbers in string form.</span></span> <span data-ttu-id="4827e-160">To użycie koliduje z zachowaniem wielu istniejących konwerterów typów, które ma używać przecinka jako ogranicznika.</span><span class="sxs-lookup"><span data-stu-id="4827e-160">This use collides with the behavior that many existing type converters have, which is to use a comma as a delimiter.</span></span> <span data-ttu-id="4827e-161">Przekazywanie kultury przez `xml:lang` w otaczającym XAML nie rozwiązuje problemu.</span><span class="sxs-lookup"><span data-stu-id="4827e-161">Passing a culture through `xml:lang` in the surrounding XAML does not solve the issue.</span></span>

### <a name="implementing-convertfrom"></a><span data-ttu-id="4827e-162">Implementowanie ConvertFrom</span><span class="sxs-lookup"><span data-stu-id="4827e-162">Implementing ConvertFrom</span></span>

<span data-ttu-id="4827e-163">Aby można było używać ich jako <xref:System.ComponentModel.TypeConverter> implementacji, która obsługuje XAML, <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> Metoda dla tego konwertera musi akceptować ciąg jako `value` parametr.</span><span class="sxs-lookup"><span data-stu-id="4827e-163">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> method for that converter must accept a string as the `value` parameter.</span></span> <span data-ttu-id="4827e-164">Jeśli ciąg jest w prawidłowym formacie i może być konwertowany przez <xref:System.ComponentModel.TypeConverter> implementację, zwracany obiekt musi obsługiwać rzutowanie do typu, który jest oczekiwany przez właściwość.</span><span class="sxs-lookup"><span data-stu-id="4827e-164">If the string is in a valid format and can be converted by the <xref:System.ComponentModel.TypeConverter> implementation, the returned object must support a cast to the type that is expected by the property.</span></span> <span data-ttu-id="4827e-165">W przeciwnym razie <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementacja musi zwrócić `null` .</span><span class="sxs-lookup"><span data-stu-id="4827e-165">Otherwise, the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation must return `null`.</span></span>

<span data-ttu-id="4827e-166">Każda <xref:System.ComponentModel.TypeConverter> implementacja może jednoznacznie interpretować, co stanowi prawidłowy ciąg dla konwersji, i może również używać lub ignorować opis typu lub kontekstów kultury, które są przesyłane jako parametry.</span><span class="sxs-lookup"><span data-stu-id="4827e-166">Each <xref:System.ComponentModel.TypeConverter> implementation can uniquely interpret what constitutes a valid string for a conversion, and it can also use or ignore the type description or culture contexts that are passed as parameters.</span></span> <span data-ttu-id="4827e-167">Jednak przetwarzanie w języku XAML WPF może nie przekazywać wartości do kontekstu opisu typu we wszystkich przypadkach, a także może nie przekazywać kultury opartej na `xml:lang` .</span><span class="sxs-lookup"><span data-stu-id="4827e-167">However, the WPF XAML processing might not pass values to the type description context in all cases and also might not pass culture based on `xml:lang`.</span></span>

> [!NOTE]
> <span data-ttu-id="4827e-168">Nie używaj nawiasów klamrowych ( {} ), a w odniesieniu do nawiasu otwierającego ({) jako elementu w formacie ciągu.</span><span class="sxs-lookup"><span data-stu-id="4827e-168">Do not use the braces ({}), specifically the opening brace ({), as an element of your string format.</span></span> <span data-ttu-id="4827e-169">Te znaki są zarezerwowane jako wejście i wyjście dla sekwencji rozszerzenia znaczników.</span><span class="sxs-lookup"><span data-stu-id="4827e-169">These characters are reserved as the entry and exit for a markup extension sequence.</span></span>

<span data-ttu-id="4827e-170">Jest to konieczne, aby zgłosić wyjątek, gdy konwerter typu musi mieć dostęp do usługi XAML z składnika zapisywania obiektów programu .NET XAML, ale <xref:System.IServiceProvider.GetService%2A> wywołanie wykonane względem kontekstu nie zwraca tej usługi.</span><span class="sxs-lookup"><span data-stu-id="4827e-170">It is appropriate to throw an exception when your type converter must have access to a XAML service from .NET XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>

### <a name="implementing-convertto"></a><span data-ttu-id="4827e-171">Implementowanie ConvertTo</span><span class="sxs-lookup"><span data-stu-id="4827e-171">Implementing ConvertTo</span></span>

<span data-ttu-id="4827e-172"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> jest potencjalnie używany do obsługi serializacji.</span><span class="sxs-lookup"><span data-stu-id="4827e-172"><xref:System.ComponentModel.TypeConverter.ConvertTo%2A> is potentially used for serialization support.</span></span> <span data-ttu-id="4827e-173">Obsługa serializacji za pomocą <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> dla typu niestandardowego i jego konwertera typów nie jest wymaganiem bezwzględnym.</span><span class="sxs-lookup"><span data-stu-id="4827e-173">Serialization support through <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> for your custom type and its type converter is not an absolute requirement.</span></span> <span data-ttu-id="4827e-174">Jednak jeśli wdrażasz kontrolkę lub korzystasz z serializacji jako części funkcji lub projektu klasy, należy zaimplementować <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> .</span><span class="sxs-lookup"><span data-stu-id="4827e-174">However, if you are implementing a control, or using serialization of as part of the features or design of your class, you should implement <xref:System.ComponentModel.TypeConverter.ConvertTo%2A>.</span></span>

<span data-ttu-id="4827e-175">Aby można było używać ich jako <xref:System.ComponentModel.TypeConverter> implementacji, która obsługuje XAML, <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> Metoda dla tego konwertera musi akceptować wystąpienie typu (lub wartość), które jest obsługiwane jako `value` parametr.</span><span class="sxs-lookup"><span data-stu-id="4827e-175">To be usable as a <xref:System.ComponentModel.TypeConverter> implementation that supports XAML, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> method for that converter must accept an instance of the type (or a value) that is supported as the `value` parameter.</span></span> <span data-ttu-id="4827e-176">Gdy `destinationType` parametr jest typu <xref:System.String> , zwracany obiekt musi być w stanie rzutować jako <xref:System.String> .</span><span class="sxs-lookup"><span data-stu-id="4827e-176">When the `destinationType` parameter is of type <xref:System.String>, the returned object must be able to be cast as <xref:System.String>.</span></span> <span data-ttu-id="4827e-177">Zwrócony ciąg musi reprezentować wartość serializowaną `value` .</span><span class="sxs-lookup"><span data-stu-id="4827e-177">The returned string must represent a serialized value of `value`.</span></span> <span data-ttu-id="4827e-178">Najlepiej, gdy wybrany format serializacji powinien być w stanie generować tę samą wartość, co w przypadku, gdy ten ciąg został przekazano do <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementacji tego samego konwertera, bez znacznej utraty informacji.</span><span class="sxs-lookup"><span data-stu-id="4827e-178">Ideally, the serialization format that you choose should be able to generate the same value as if that string were passed to the <xref:System.ComponentModel.TypeConverter.ConvertFrom%2A> implementation of the same converter, without significant loss of information.</span></span>

<span data-ttu-id="4827e-179">Jeśli wartość nie może być serializowana lub konwerter nie obsługuje serializacji, <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementacja musi zwracać `null` i może zgłosić wyjątek.</span><span class="sxs-lookup"><span data-stu-id="4827e-179">If the value cannot be serialized or the converter does not support serialization, the <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> implementation must return `null` and can throw an exception.</span></span> <span data-ttu-id="4827e-180">Jednakże w przypadku zgłaszania wyjątków należy zgłosić niezdolność do korzystania z tej konwersji w ramach <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementacji, tak aby najlepszym rozwiązaniem w zakresie sprawdzania z <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> pierwszym sposobem na uniknięcie wyjątków jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="4827e-180">However, if you do throw exceptions, you should report the inability to use that conversion as part of your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation so that the best practice of checking with <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> first to avoid exceptions is supported.</span></span>

<span data-ttu-id="4827e-181">Jeśli `destinationType` parametr nie jest typu, możesz <xref:System.String> wybrać własny sposób obsługi konwertera.</span><span class="sxs-lookup"><span data-stu-id="4827e-181">If the `destinationType` parameter is not of type <xref:System.String>, you can choose your own converter handling.</span></span> <span data-ttu-id="4827e-182">Zwykle przywracana jest podstawowa obsługa implementacji, która w bazie <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> zgłasza konkretny wyjątek.</span><span class="sxs-lookup"><span data-stu-id="4827e-182">Typically, you revert to base implementation handling, which in the base <xref:System.ComponentModel.TypeConverter.ConvertTo%2A> raises a specific exception.</span></span>

<span data-ttu-id="4827e-183">Jest to konieczne, aby zgłosić wyjątek, gdy konwerter typu musi mieć dostęp do usługi XAML z składnika zapisywania obiektów programu .NET XAML, ale <xref:System.IServiceProvider.GetService%2A> wywołanie wykonane względem kontekstu nie zwraca tej usługi.</span><span class="sxs-lookup"><span data-stu-id="4827e-183">It is appropriate to throw an exception when your type converter must have access to a XAML service from .NET XAML Services object writer, but the <xref:System.IServiceProvider.GetService%2A> call that is made against the context does not return that service.</span></span>

### <a name="implementing-canconvertfrom"></a><span data-ttu-id="4827e-184">Implementowanie CanConvertFrom</span><span class="sxs-lookup"><span data-stu-id="4827e-184">Implementing CanConvertFrom</span></span>

<span data-ttu-id="4827e-185">Twoja <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementacja powinna zwracać `true` dla `sourceType` typu <xref:System.String> i w przeciwnym razie przełożyć na implementację podstawową.</span><span class="sxs-lookup"><span data-stu-id="4827e-185">Your <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> implementation should return `true` for `sourceType` of type <xref:System.String> and otherwise, defer to the base implementation.</span></span> <span data-ttu-id="4827e-186">Nie zgłaszaj wyjątków z programu <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A> .</span><span class="sxs-lookup"><span data-stu-id="4827e-186">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertFrom%2A>.</span></span>

### <a name="implementing-canconvertto"></a><span data-ttu-id="4827e-187">Implementowanie CanConvertTo</span><span class="sxs-lookup"><span data-stu-id="4827e-187">Implementing CanConvertTo</span></span>

<span data-ttu-id="4827e-188"><xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>Implementacja powinna zwracać `true` dla `destinationType` typu <xref:System.String> i w inny sposób odroczyć na implementację podstawową.</span><span class="sxs-lookup"><span data-stu-id="4827e-188">Your <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> implementation should return `true` for `destinationType` of type <xref:System.String>, and otherwise defer to the base implementation.</span></span> <span data-ttu-id="4827e-189">Nie zgłaszaj wyjątków z programu <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A> .</span><span class="sxs-lookup"><span data-stu-id="4827e-189">Do not throw exceptions from <xref:System.ComponentModel.TypeConverter.CanConvertTo%2A>.</span></span>

## <a name="applying-the-typeconverterattribute"></a><span data-ttu-id="4827e-190">Stosowanie TypeConverterAttribute</span><span class="sxs-lookup"><span data-stu-id="4827e-190">Applying the TypeConverterAttribute</span></span>

<span data-ttu-id="4827e-191">Dla niestandardowego konwertera typów, który ma być używany jako typ działającego konwertera klasy niestandardowej przez usługi .NET XAML, należy zastosować <xref:System.ComponentModel.TypeConverterAttribute> do definicji klasy.</span><span class="sxs-lookup"><span data-stu-id="4827e-191">For your custom type converter to be used as the acting type converter for a custom class by .NET XAML Services, you must apply the <xref:System.ComponentModel.TypeConverterAttribute> to your class definition.</span></span> <span data-ttu-id="4827e-192"><xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A>Określony za pomocą atrybutu musi być nazwą typu niestandardowego konwertera typów.</span><span class="sxs-lookup"><span data-stu-id="4827e-192">The <xref:System.ComponentModel.TypeConverterAttribute.ConverterTypeName%2A> that you specify through the attribute must be the type name of your custom type converter.</span></span> <span data-ttu-id="4827e-193">W przypadku zastosowania tego atrybutu, gdy procesor XAML obsługuje wartości, w których typ właściwości używa typu klasy niestandardowej, może wprowadzać ciągi i zwracać wystąpienia obiektów.</span><span class="sxs-lookup"><span data-stu-id="4827e-193">If you apply this attribute, when a XAML processor handles values where the property type uses your custom class type, it can input strings and return object instances.</span></span>

<span data-ttu-id="4827e-194">Można również udostępnić konwerter typów dla poszczególnych właściwości.</span><span class="sxs-lookup"><span data-stu-id="4827e-194">You can also provide a type converter on a per-property basis.</span></span> <span data-ttu-id="4827e-195">Zamiast stosować <xref:System.ComponentModel.TypeConverterAttribute> do definicji klasy, zastosuj ją do definicji właściwości (głównej definicji, a nie w `get` / `set` ramach jej implementacji).</span><span class="sxs-lookup"><span data-stu-id="4827e-195">Instead of applying a <xref:System.ComponentModel.TypeConverterAttribute> to the class definition, apply it to a property definition (the main definition, not the `get`/`set` implementations within it).</span></span> <span data-ttu-id="4827e-196">Typ właściwości musi być zgodny z typem, który jest przetwarzany przez konwerter typów niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="4827e-196">The type of the property must match the type that is processed by your custom type converter.</span></span> <span data-ttu-id="4827e-197">Po zastosowaniu tego atrybutu, gdy procesor XAML obsługuje wartości tej właściwości, może przetwarzać ciągi wejściowe i zwracać wystąpienia obiektów.</span><span class="sxs-lookup"><span data-stu-id="4827e-197">With this attribute applied, when a XAML processor handles values of that property, it can process input strings and return object instances.</span></span> <span data-ttu-id="4827e-198">Technika konwertera typów dla właściwości jest przydatna, jeśli zdecydujesz się użyć typu właściwości z Microsoft .NET Framework lub z innej biblioteki, w której nie można kontrolować definicji klasy i nie można jej zastosować <xref:System.ComponentModel.TypeConverterAttribute> .</span><span class="sxs-lookup"><span data-stu-id="4827e-198">The per-property type converter technique is useful if you choose to use a property type from Microsoft .NET Framework or from some other library where you cannot control the class definition and cannot apply a <xref:System.ComponentModel.TypeConverterAttribute> there.</span></span>

<span data-ttu-id="4827e-199">Aby podać zachowanie konwersji typu dla niestandardowego dołączonego elementu członkowskiego, Zastosuj <xref:System.ComponentModel.TypeConverterAttribute> do `Get` metody dostępu wzorca implementacji dla dołączonego elementu członkowskiego.</span><span class="sxs-lookup"><span data-stu-id="4827e-199">To supply a type conversion behavior for a custom attached member, apply <xref:System.ComponentModel.TypeConverterAttribute> to the `Get` accessor method of the implementation pattern for the attached member.</span></span>

## <a name="accessing-service-provider-context-from-a-markup-extension-implementation"></a><span data-ttu-id="4827e-200">Uzyskiwanie dostępu do kontekstu dostawcy usług z implementacji rozszerzenia znaczników</span><span class="sxs-lookup"><span data-stu-id="4827e-200">Accessing Service Provider Context from a Markup Extension Implementation</span></span>

<span data-ttu-id="4827e-201">Dostępne usługi są takie same dla dowolnego konwertera wartości.</span><span class="sxs-lookup"><span data-stu-id="4827e-201">The available services are the same for any value converter.</span></span> <span data-ttu-id="4827e-202">Różnica polega na tym, jak każdy konwerter wartości otrzymuje kontekst usługi.</span><span class="sxs-lookup"><span data-stu-id="4827e-202">The difference is in how each value converter receives the service context.</span></span> <span data-ttu-id="4827e-203">Dostęp do usług i dostępnych usług są udokumentowane w sekcji [konwertery typów i rozszerzenia znaczników dla języka XAML](type-converters-and-markup-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="4827e-203">Accessing services and the services available are documented in the topic [Type Converters and Markup Extensions for XAML](type-converters-and-markup-extensions.md).</span></span>

## <a name="type-converters-in-the-xaml-node-stream"></a><span data-ttu-id="4827e-204">Konwertery typów w strumieniu węzła XAML</span><span class="sxs-lookup"><span data-stu-id="4827e-204">Type Converters in the XAML Node Stream</span></span>

<span data-ttu-id="4827e-205">Jeśli pracujesz ze strumieniem węzła XAML, Akcja lub wynik końcowy konwertera typów nie został jeszcze wykonany.</span><span class="sxs-lookup"><span data-stu-id="4827e-205">If you are working with a XAML node stream, the action or end result of a type converter is not yet executed.</span></span> <span data-ttu-id="4827e-206">W ścieżce ładowania ciąg atrybutu, który ostatecznie musi być przekonwertowany na typ, w celu załadowania pozostanie jako wartość tekstowa w obrębie początkowego elementu członkowskiego i końcowego elementu członkowskiego.</span><span class="sxs-lookup"><span data-stu-id="4827e-206">In a load path, the attribute string that eventually needs to be type-converted in order to load remains as a text value within a start member and end member.</span></span> <span data-ttu-id="4827e-207">Konwerter typu, który jest ostatecznie potrzebny do wykonania tej operacji, można określić za pomocą <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="4827e-207">The type converter that is eventually needed for this operation can be determined by using the <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="4827e-208">Jednak uzyskanie prawidłowej wartości polega na wykorzystaniu <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> kontekstu schematu XAML, który może uzyskać dostęp do tych informacji za pośrednictwem bazowego elementu członkowskiego lub typu wartości obiektu używanej przez element członkowski.</span><span class="sxs-lookup"><span data-stu-id="4827e-208">However, obtaining a valid value from <xref:System.Xaml.XamlMember.TypeConverter%2A?displayProperty=nameWithType> relies on having a XAML schema context, which can access such information through the underlying member, or the type of the object value that the member uses.</span></span> <span data-ttu-id="4827e-209">Wywoływanie zachowania konwersji typu wymaga również kontekstu schematu XAML, ponieważ wymaga on mapowania typów i tworzenia wystąpienia konwertera.</span><span class="sxs-lookup"><span data-stu-id="4827e-209">Invoking the type conversion behavior also requires the XAML schema context because that requires type-mapping and creating a converter instance.</span></span>

## <a name="see-also"></a><span data-ttu-id="4827e-210">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="4827e-210">See also</span></span>

- <xref:System.ComponentModel.TypeConverterAttribute>
- [<span data-ttu-id="4827e-211">Typy konwerterów i rozszerzenia znaczników dla XAML</span><span class="sxs-lookup"><span data-stu-id="4827e-211">Type Converters and Markup Extensions for XAML</span></span>](type-converters-and-markup-extensions.md)
- [<span data-ttu-id="4827e-212">Omówienie XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="4827e-212">XAML Overview (WPF)</span></span>](../fundamentals/xaml.md)
