---
title: CA5351 reguły nie używają uszkodzonych algorytmów kryptograficznych (analiza kodu)
description: Dowiedz się więcej na temat reguły reguły analizy kodu CA5351 nie używaj uszkodzonych algorytmów kryptograficznych
ms.date: 11/04/2016
ms.topic: reference
author: gewarren
ms.author: gewarren
ms.openlocfilehash: 6e84d4faa3c9ac061b411fd14422ec29f4620b3e
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/25/2020
ms.locfileid: "96586926"
---
# <a name="ca5351-do-not-use-broken-cryptographic-algorithms"></a><span data-ttu-id="5b6a7-103">CA5351: Nie używaj uszkodzonych algorytmów kryptograficznych</span><span class="sxs-lookup"><span data-stu-id="5b6a7-103">CA5351 Do Not Use Broken Cryptographic Algorithms</span></span>

| | <span data-ttu-id="5b6a7-104">Wartość</span><span class="sxs-lookup"><span data-stu-id="5b6a7-104">Value</span></span> |
|-|-|
| <span data-ttu-id="5b6a7-105">**Identyfikator zasady**</span><span class="sxs-lookup"><span data-stu-id="5b6a7-105">**Rule ID**</span></span> |<span data-ttu-id="5b6a7-106">CA5351</span><span class="sxs-lookup"><span data-stu-id="5b6a7-106">CA5351</span></span>|
| <span data-ttu-id="5b6a7-107">**Kategoria**</span><span class="sxs-lookup"><span data-stu-id="5b6a7-107">**Category**</span></span> |<span data-ttu-id="5b6a7-108">Microsoft.Security</span><span class="sxs-lookup"><span data-stu-id="5b6a7-108">Microsoft.Security</span></span>|
| <span data-ttu-id="5b6a7-109">**Naprawa jest przerywana lub nieprzerwana**</span><span class="sxs-lookup"><span data-stu-id="5b6a7-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="5b6a7-110">Nieprzerwanie</span><span class="sxs-lookup"><span data-stu-id="5b6a7-110">Non-breaking</span></span>|

> [!NOTE]
> <span data-ttu-id="5b6a7-111">To ostrzeżenie zostało ostatnio zaktualizowane w listopadzie 2015.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-111">This warning was last updated on November 2015.</span></span>

## <a name="cause"></a><span data-ttu-id="5b6a7-112">Przyczyna</span><span class="sxs-lookup"><span data-stu-id="5b6a7-112">Cause</span></span>

<span data-ttu-id="5b6a7-113">Funkcje tworzenia skrótów, takie jak <xref:System.Security.Cryptography.MD5> i algorytmy szyfrowania, takie jak <xref:System.Security.Cryptography.DES> i <xref:System.Security.Cryptography.RC2> mogą ujawniać znaczne ryzyko i mogą powodować narażenie poufnych informacji przez proste techniki ataków, takie jak ataki z wymuszeniem i kolizje skrótów.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-113">Hashing functions such as <xref:System.Security.Cryptography.MD5> and encryption algorithms such as <xref:System.Security.Cryptography.DES> and <xref:System.Security.Cryptography.RC2> can expose significant risk and may result in the exposure of sensitive information through trivial attack techniques, such as brute force attacks and hash collisions.</span></span>

<span data-ttu-id="5b6a7-114">Lista algorytmów kryptograficznych poniżej podlega znanym atakom kryptograficznym.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-114">The cryptographic algorithms list below are subject to known cryptographic attacks.</span></span> <span data-ttu-id="5b6a7-115">Algorytm wyznaczania wartości skrótu <xref:System.Security.Cryptography.MD5> jest objęty atakami polegającymi na kolizji.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-115">The cryptographic hash algorithm <xref:System.Security.Cryptography.MD5> is subject to hash collision attacks.</span></span>  <span data-ttu-id="5b6a7-116">W zależności od użycia kolizja skrótów może prowadzić do personifikacji, naruszenia lub innego rodzaju ataków w systemach, które opierają się na unikatowych danych wyjściowych funkcji tworzenia skrótów.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-116">Depending on the usage, a hash collision may lead to impersonation, tampering, or other kinds of attacks on systems that rely on the unique cryptographic output of a hashing function.</span></span> <span data-ttu-id="5b6a7-117">Algorytmy szyfrowania <xref:System.Security.Cryptography.DES> i <xref:System.Security.Cryptography.RC2> podlegają atakom kryptograficznym, które mogą spowodować niezamierzone ujawnienie zaszyfrowanych danych.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-117">The encryption algorithms <xref:System.Security.Cryptography.DES> and <xref:System.Security.Cryptography.RC2> are subject to cryptographic attacks that may result in unintended disclosure of encrypted data.</span></span>

## <a name="rule-description"></a><span data-ttu-id="5b6a7-118">Opis reguły</span><span class="sxs-lookup"><span data-stu-id="5b6a7-118">Rule description</span></span>

<span data-ttu-id="5b6a7-119">Uszkodzone algorytmy kryptograficzne nie są uznawane za bezpieczne i nie należy ich stosować.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-119">Broken cryptographic algorithms are not  considered secure and their use should be discouraged.</span></span> <span data-ttu-id="5b6a7-120">Algorytm wyznaczania wartości skrótu MD5 jest podatny na znane ataki kolizji, chociaż konkretna usterka różni się w zależności od kontekstu użytkowania.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-120">The MD5 hash algorithm is susceptible to known collision attacks, though the specific vulnerability will vary based on the context of use.</span></span>  <span data-ttu-id="5b6a7-121">Algorytmy wyznaczania wartości skrótu używane do zapewnienia integralności danych (na przykład sygnatury pliku lub certyfikatu cyfrowego) są szczególnie narażone.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-121">Hashing algorithms used to ensure data integrity (for example, file signature or digital certificate) are particularly vulnerable.</span></span>  <span data-ttu-id="5b6a7-122">W tym kontekście osoby atakujące mogą generować dwa oddzielne fragmenty danych, dzięki czemu niegroźne dane mogą zostać zastąpione złośliwymi danymi, bez zmiany wartości skrótu ani unieważniania skojarzonego podpisu cyfrowego.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-122">In this context, attackers could generate two separate pieces of data, such that benign data can be substituted with malicious data, without changing the hash value or invalidating an associated digital signature.</span></span>

<span data-ttu-id="5b6a7-123">Dla algorytmów szyfrowania:</span><span class="sxs-lookup"><span data-stu-id="5b6a7-123">For encryption algorithms:</span></span>

- <span data-ttu-id="5b6a7-124"><xref:System.Security.Cryptography.DES> Szyfrowanie zawiera mały rozmiar klucza, który może być wymuszany w ciągu krótszym niż dzień.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-124"><xref:System.Security.Cryptography.DES> encryption contains a small key size, which could be brute-forced in less than a day.</span></span>

- <span data-ttu-id="5b6a7-125"><xref:System.Security.Cryptography.RC2> szyfrowanie jest podatne na atak z kluczem pokrewnym, gdzie osoba atakująca znajdzie relacje matematyczne między wszystkimi wartościami klucza.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-125"><xref:System.Security.Cryptography.RC2> encryption is susceptible to a related-key attack, where the attacker finds mathematical relationships between all key values.</span></span>

<span data-ttu-id="5b6a7-126">Ta reguła jest wyzwalana po znalezieniu którejkolwiek z powyższych funkcji kryptograficznych w kodzie źródłowym i zgłaszaniu użytkownikowi ostrzeżenia.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-126">This rule triggers when it finds any of the above cryptographic functions in source code and throws a warning to the user.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="5b6a7-127">Jak naprawić naruszenia</span><span class="sxs-lookup"><span data-stu-id="5b6a7-127">How to fix violations</span></span>

<span data-ttu-id="5b6a7-128">Użyj opcji silnie silniejszych:</span><span class="sxs-lookup"><span data-stu-id="5b6a7-128">Use cryptographically stronger options:</span></span>

- <span data-ttu-id="5b6a7-129">W przypadku algorytmu MD5 należy używać skrótów w rodzinie [SHA-2](/windows/desktop/SecCrypto/hash-and-signature-algorithms) (na przykład, <xref:System.Security.Cryptography.SHA512> , <xref:System.Security.Cryptography.SHA384> , <xref:System.Security.Cryptography.SHA256> ).</span><span class="sxs-lookup"><span data-stu-id="5b6a7-129">For MD5, use hashes in the [SHA-2](/windows/desktop/SecCrypto/hash-and-signature-algorithms) family (for example, <xref:System.Security.Cryptography.SHA512>, <xref:System.Security.Cryptography.SHA384>, <xref:System.Security.Cryptography.SHA256>).</span></span>

- <span data-ttu-id="5b6a7-130">W przypadku algorytmu DES i RC2 należy użyć <xref:System.Security.Cryptography.Aes> szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-130">For DES and RC2, use <xref:System.Security.Cryptography.Aes> encryption.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="5b6a7-131">Kiedy pominąć ostrzeżenia</span><span class="sxs-lookup"><span data-stu-id="5b6a7-131">When to suppress warnings</span></span>

<span data-ttu-id="5b6a7-132">Nie pomijaj ostrzeżenia z tej reguły, chyba że została sprawdzona przez eksperta kryptograficznego.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-132">Do not suppress a warning from this rule, unless it's been reviewed by a cryptographic expert.</span></span>

## <a name="pseudo-code-examples"></a><span data-ttu-id="5b6a7-133">Przykłady pseudo kodu</span><span class="sxs-lookup"><span data-stu-id="5b6a7-133">Pseudo-code examples</span></span>

<span data-ttu-id="5b6a7-134">Poniższe pseudo kodu przykładowe ilustrują wzorzec wykrywany przez tę regułę i możliwe alternatywy.</span><span class="sxs-lookup"><span data-stu-id="5b6a7-134">The following pseudo-code samples illustrate the pattern detected by this rule and possible alternatives.</span></span>

### <a name="md5-hashing-violation"></a><span data-ttu-id="5b6a7-135">Naruszenie skrótu MD5</span><span class="sxs-lookup"><span data-stu-id="5b6a7-135">MD5 Hashing Violation</span></span>

```csharp
using System.Security.Cryptography;
...
var hashAlg = MD5.Create();
```

<span data-ttu-id="5b6a7-136">Rozwiązanie:</span><span class="sxs-lookup"><span data-stu-id="5b6a7-136">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
var hashAlg = SHA256.Create();
```

### <a name="rc2-encryption-violation"></a><span data-ttu-id="5b6a7-137">Naruszenie szyfrowania RC2</span><span class="sxs-lookup"><span data-stu-id="5b6a7-137">RC2 Encryption Violation</span></span>

```csharp
using System.Security.Cryptography;
...
RC2 encAlg = RC2.Create();
```

<span data-ttu-id="5b6a7-138">Rozwiązanie:</span><span class="sxs-lookup"><span data-stu-id="5b6a7-138">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
using (AesManaged encAlg = new AesManaged())
{
  ...
}
```

### <a name="des-encryption-violation"></a><span data-ttu-id="5b6a7-139">Naruszenie szyfrowania DES</span><span class="sxs-lookup"><span data-stu-id="5b6a7-139">DES Encryption Violation</span></span>

```csharp
using System.Security.Cryptography;
...
DES encAlg = DES.Create();
```

<span data-ttu-id="5b6a7-140">Rozwiązanie:</span><span class="sxs-lookup"><span data-stu-id="5b6a7-140">Solution:</span></span>

```csharp
using System.Security.Cryptography;
...
using (AesManaged encAlg = new AesManaged())
{
  ...
}
```
