---
title: 'CA2012: Użyj ValueTasks prawidłowo (analiza kodu)'
description: 'Dowiedz się więcej o regule analizy kodu CA2012: Użyj ValueTasks prawidłowo'
ms.date: 06/18/2020
ms.topic: reference
f1_keywords:
- UseValueTasksCorrectly
- CA2012
helpviewer_keywords:
- UseValueTasksCorrectly
- CA2012
author: stephentoub
ms.author: stoub
ms.openlocfilehash: 0bd2a2b18f61f6024b4231b0188f386e292d9f65
ms.sourcegitcommit: 2e4adc490c1d2a705a0592b295d606b10b9f51f1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/25/2020
ms.locfileid: "96587094"
---
# <a name="ca2012-use-valuetasks-correctly"></a><span data-ttu-id="d6e6a-103">CA2012: Poprawnie używaj elementów ValueTask</span><span class="sxs-lookup"><span data-stu-id="d6e6a-103">CA2012: Use ValueTasks correctly</span></span>

| | <span data-ttu-id="d6e6a-104">Wartość</span><span class="sxs-lookup"><span data-stu-id="d6e6a-104">Value</span></span> |
|-|-|
| <span data-ttu-id="d6e6a-105">**Identyfikator zasady**</span><span class="sxs-lookup"><span data-stu-id="d6e6a-105">**Rule ID**</span></span> |<span data-ttu-id="d6e6a-106">CA2012</span><span class="sxs-lookup"><span data-stu-id="d6e6a-106">CA2012</span></span>|
| <span data-ttu-id="d6e6a-107">**Kategoria**</span><span class="sxs-lookup"><span data-stu-id="d6e6a-107">**Category**</span></span> |<span data-ttu-id="d6e6a-108">Microsoft. niezawodność</span><span class="sxs-lookup"><span data-stu-id="d6e6a-108">Microsoft.Reliability</span></span>|
| <span data-ttu-id="d6e6a-109">**Naprawa jest przerywana lub nieprzerwana**</span><span class="sxs-lookup"><span data-stu-id="d6e6a-109">**Fix is breaking or non-breaking**</span></span> |<span data-ttu-id="d6e6a-110">Nieprzerwanie</span><span class="sxs-lookup"><span data-stu-id="d6e6a-110">Non-breaking</span></span>|

## <a name="cause"></a><span data-ttu-id="d6e6a-111">Przyczyna</span><span class="sxs-lookup"><span data-stu-id="d6e6a-111">Cause</span></span>

<span data-ttu-id="d6e6a-112"><xref:System.Threading.Tasks.ValueTask>Wystąpienie zwrócone przez wywołanie elementu członkowskiego jest używane w sposób, który może prowadzić do wyjątków, uszkodzenia lub niskiej wydajności.</span><span class="sxs-lookup"><span data-stu-id="d6e6a-112">A <xref:System.Threading.Tasks.ValueTask> instance returned from a member invocation is used in a way that could lead to exceptions, corruption, or poor performance.</span></span>

## <a name="rule-description"></a><span data-ttu-id="d6e6a-113">Opis reguły</span><span class="sxs-lookup"><span data-stu-id="d6e6a-113">Rule description</span></span>

<span data-ttu-id="d6e6a-114"><xref:System.Threading.Tasks.ValueTask> wystąpienia zwracane z wywołań elementów członkowskich mają być bezpośrednio oczekiwane.</span><span class="sxs-lookup"><span data-stu-id="d6e6a-114"><xref:System.Threading.Tasks.ValueTask> instances returned from member invocations are intended to be directly awaited.</span></span>  <span data-ttu-id="d6e6a-115">Próbuje użyć ValueTask wiele razy lub uzyskać bezpośredni dostęp do wyniku, zanim będzie wiadomo, że może to spowodować wyjątek lub uszkodzenie.</span><span class="sxs-lookup"><span data-stu-id="d6e6a-115">Attempts to consume a ValueTask multiple times or to directly access one's result before it's known to be completed may result in an exception or corruption.</span></span>  <span data-ttu-id="d6e6a-116">Takie ValueTask jest prawdopodobnie oznaką funkcjonalnej usterki i może obniżyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="d6e6a-116">Ignoring such a ValueTask is likely an indication of a functional bug and may degrade performance.</span></span>

## <a name="how-to-fix-violations"></a><span data-ttu-id="d6e6a-117">Jak naprawić naruszenia</span><span class="sxs-lookup"><span data-stu-id="d6e6a-117">How to fix violations</span></span>

<span data-ttu-id="d6e6a-118">Ogólnie rzecz biorąc, ValueTasks powinna być bezpośrednio oczekiwana, a nie w innych lokalizacjach, takich jak zmienne lokalne lub pola.</span><span class="sxs-lookup"><span data-stu-id="d6e6a-118">In general, ValueTasks should be directly awaited rather than discarded or stored into other locations like local variables or fields.</span></span>

## <a name="when-to-suppress-warnings"></a><span data-ttu-id="d6e6a-119">Kiedy pominąć ostrzeżenia</span><span class="sxs-lookup"><span data-stu-id="d6e6a-119">When to suppress warnings</span></span>

<span data-ttu-id="d6e6a-120">Dla ValueTasks zwracanych z dowolnych wywołań elementów członkowskich obiekt wywołujący musi założyć, że ValueTask musi być zużyty (np. oczekujący) i tylko raz.</span><span class="sxs-lookup"><span data-stu-id="d6e6a-120">For ValueTasks returned from arbitrary member calls, the caller needs to assume that the ValueTask must be consumed (e.g. awaited) once and only once.</span></span>  <span data-ttu-id="d6e6a-121">Jeśli jednak programista kontroluje również wywoływany element członkowski i ma pełną wiedzę na temat jego implementacji, programista może wiedzieć, że jest bezpieczny, aby pominąć ostrzeżenie, na przykład jeśli Return ValueTask zawsze otacza <xref:System.Threading.Tasks.Task> obiekt.</span><span class="sxs-lookup"><span data-stu-id="d6e6a-121">However, if the developer also controls the member being invoked and has complete knowledge of its implementation, the developer may know it's safe to suppress the warning, for example, if the return ValueTask always wraps a <xref:System.Threading.Tasks.Task> object.</span></span>

## <a name="see-also"></a><span data-ttu-id="d6e6a-122">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="d6e6a-122">See also</span></span>

- [<span data-ttu-id="d6e6a-123">Reguły dotyczące niezawodności</span><span class="sxs-lookup"><span data-stu-id="d6e6a-123">Reliability rules</span></span>](reliability-warnings.md)
