---
title: Przepływ do przodu w czasie wykonywania dla wdrożeń aplikacji .NET Core.
description: Dowiedz się więcej o dotnet publikowania zmian dla wdrożeń samodzielnych.
author: KathleenDollard
ms.date: 05/31/2018
ms.openlocfilehash: 22385c7b5d2bf87755fd51cd6268d21fe3431c74
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/14/2020
ms.locfileid: "75740784"
---
# <a name="self-contained-deployment-runtime-roll-forward"></a><span data-ttu-id="a4013-103">Przenoszenie do przodu w czasie samodzielnego środowiska uruchomieniowego wdrożenia</span><span class="sxs-lookup"><span data-stu-id="a4013-103">Self-contained deployment runtime roll forward</span></span>

<span data-ttu-id="a4013-104">Niezależne [wdrożenia aplikacji](index.md) .NET Core obejmują zarówno biblioteki .NET Core, jak i program runtime .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a4013-104">.NET Core [self-contained application deployments](index.md) include both the .NET Core libraries and the .NET Core runtime.</span></span> <span data-ttu-id="a4013-105">Począwszy od .NET Core 2.1 SDK (wersja 2.1.300), niezależne wdrożenie aplikacji [publikuje najwyższy czas pracy poprawki na komputerze](https://github.com/dotnet/designs/pull/36).</span><span class="sxs-lookup"><span data-stu-id="a4013-105">Starting in .NET Core 2.1 SDK (version 2.1.300), a self-contained application deployment [publishes the highest patch runtime on your machine](https://github.com/dotnet/designs/pull/36).</span></span> <span data-ttu-id="a4013-106">Domyślnie [`dotnet publish`](../tools/dotnet-publish.md) dla samodzielnego wdrożenia wybiera najnowszą wersję zainstalowaną jako część sdk na komputerze wydawniczym.</span><span class="sxs-lookup"><span data-stu-id="a4013-106">By default, [`dotnet publish`](../tools/dotnet-publish.md) for a self-contained deployment selects the latest version installed as part of the SDK on the publishing machine.</span></span> <span data-ttu-id="a4013-107">Dzięki temu wdrożona aplikacja może działać z poprawkami `publish`zabezpieczeń (i innymi poprawkami) dostępnymi podczas .</span><span class="sxs-lookup"><span data-stu-id="a4013-107">This enables your deployed application to run with security fixes (and other fixes) available during `publish`.</span></span> <span data-ttu-id="a4013-108">Aplikacja musi zostać ponownie opublikowana w celu uzyskania nowej poprawki.</span><span class="sxs-lookup"><span data-stu-id="a4013-108">The application must be republished to obtain a new patch.</span></span> <span data-ttu-id="a4013-109">Niezależne aplikacje są tworzone przez `-r <RID>` określenie `dotnet publish` polecenia lub przez określenie [identyfikatora czasu wykonywania (RID)](../rid-catalog.md) w pliku projektu (csproj / vbproj) lub w wierszu polecenia.</span><span class="sxs-lookup"><span data-stu-id="a4013-109">Self-contained applications are created by specifying `-r <RID>` on the `dotnet publish` command or by specifying the [runtime identifier (RID)](../rid-catalog.md) in the project file (csproj / vbproj) or on the command line.</span></span>

## <a name="patch-version-roll-forward-overview"></a><span data-ttu-id="a4013-110">Omówienie przewijania wersji poprawek</span><span class="sxs-lookup"><span data-stu-id="a4013-110">Patch version roll forward overview</span></span>

<span data-ttu-id="a4013-111">[`restore`](../tools/dotnet-restore.md)i [`build`](../tools/dotnet-build.md) [`publish`](../tools/dotnet-publish.md) są `dotnet` poleceniami, które mogą być uruchamiane oddzielnie.</span><span class="sxs-lookup"><span data-stu-id="a4013-111">[`restore`](../tools/dotnet-restore.md), [`build`](../tools/dotnet-build.md) and [`publish`](../tools/dotnet-publish.md) are `dotnet` commands that can run separately.</span></span> <span data-ttu-id="a4013-112">Wybór czasu wykonywania jest `restore` częścią `publish` operacji, nie lub `build`.</span><span class="sxs-lookup"><span data-stu-id="a4013-112">The runtime choice is part of the `restore` operation, not `publish` or `build`.</span></span> <span data-ttu-id="a4013-113">Jeśli zadzwonisz, `publish`zostanie wybrana najnowsza wersja poprawki.</span><span class="sxs-lookup"><span data-stu-id="a4013-113">If you call `publish`, the latest patch version will be chosen.</span></span> <span data-ttu-id="a4013-114">Jeśli `publish` wywołasz `--no-restore` z argumentem, a następnie może nie `restore` uzyskać żądaną wersję poprawki, ponieważ wcześniej może nie zostały wykonane z nowych zasad publikowania aplikacji niezależne.</span><span class="sxs-lookup"><span data-stu-id="a4013-114">If you call `publish` with the `--no-restore` argument, then you may not get the desired patch version because a prior `restore` may not have been executed with the new self-contained application publishing policy.</span></span> <span data-ttu-id="a4013-115">W takim przypadku błąd kompilacji jest generowany z tekstem podobnym do następującego:</span><span class="sxs-lookup"><span data-stu-id="a4013-115">In this case, a build error is generated with text similar to the following:</span></span>

  <span data-ttu-id="a4013-116">"Projekt został przywrócony przy użyciu wersji Microsoft.NETCore.App 2.0.0, ale przy bieżących ustawieniach zostanie użyta wersja 2.0.6.</span><span class="sxs-lookup"><span data-stu-id="a4013-116">"The project was restored using Microsoft.NETCore.App version 2.0.0, but with current settings, version 2.0.6 would be used instead.</span></span> <span data-ttu-id="a4013-117">Aby rozwiązać ten problem, upewnij się, że te same ustawienia są używane do przywracania i kolejnych operacji, takich jak kompilacja lub publikowanie.</span><span class="sxs-lookup"><span data-stu-id="a4013-117">To resolve this issue, make sure the same settings are used for restore and for subsequent operations such as build or publish.</span></span> <span data-ttu-id="a4013-118">Zazwyczaj ten problem może wystąpić, jeśli Właściwość RuntimeIdentifier jest ustawiona podczas kompilacji lub publikowania, ale nie podczas przywracania."</span><span class="sxs-lookup"><span data-stu-id="a4013-118">Typically this issue can occur if the RuntimeIdentifier property is set during build or publish but not during restore."</span></span>

> [!NOTE]
> <span data-ttu-id="a4013-119">`restore`i `build` mogą być uruchamiane niejawnie `publish`jako część innego polecenia, takiego jak .</span><span class="sxs-lookup"><span data-stu-id="a4013-119">`restore` and `build` can be run implicitly as part of another command, like `publish`.</span></span> <span data-ttu-id="a4013-120">Po uruchomieniu niejawnie jako część innego polecenia, są one dostarczane z dodatkowym kontekstem, dzięki czemu odpowiednie artefakty są produkowane.</span><span class="sxs-lookup"><span data-stu-id="a4013-120">When run implicitly as part of another command, they are provided with additional context so that the right artifacts are produced.</span></span> <span data-ttu-id="a4013-121">Podczas `publish` wykonywania (na `dotnet publish -r linux-x64`przykład), niejawne `restore` przywraca pakiety dla uruchomienia linux-x64.</span><span class="sxs-lookup"><span data-stu-id="a4013-121">When you `publish` with a runtime (for example, `dotnet publish -r linux-x64`), the implicit `restore` restores packages for the linux-x64 runtime.</span></span> <span data-ttu-id="a4013-122">Jeśli wywołasz `restore` jawnie, nie przywraca pakietów w czasie wykonywania domyślnie, ponieważ nie ma tego kontekstu.</span><span class="sxs-lookup"><span data-stu-id="a4013-122">If you call `restore` explicitly, it does not restore runtime packages by default, because it doesn't have that context.</span></span>

## <a name="how-to-avoid-restore-during-publish"></a><span data-ttu-id="a4013-123">Jak uniknąć przywracania podczas publikowania</span><span class="sxs-lookup"><span data-stu-id="a4013-123">How to avoid restore during publish</span></span>

<span data-ttu-id="a4013-124">Uruchamianie `restore` w `publish` ramach operacji może być niepożądane dla scenariusza.</span><span class="sxs-lookup"><span data-stu-id="a4013-124">Running `restore` as part of the `publish` operation may be undesirable for your scenario.</span></span> <span data-ttu-id="a4013-125">Aby `restore` uniknąć `publish` podczas tworzenia aplikacji samodzielnych, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="a4013-125">To avoid `restore` during `publish` while creating self-contained applications, do the following:</span></span>

- <span data-ttu-id="a4013-126">Ustaw `RuntimeIdentifiers` właściwość na listę oddzielone średnikami wszystkich [identyfikatorów IDENTYFIKATORÓW, które](../rid-catalog.md) mają zostać opublikowane.</span><span class="sxs-lookup"><span data-stu-id="a4013-126">Set the `RuntimeIdentifiers` property to a semicolon-separated list of all the [RIDs](../rid-catalog.md) to be published.</span></span>
- <span data-ttu-id="a4013-127">Ustaw `TargetLatestRuntimePatch` właściwość `true`na .</span><span class="sxs-lookup"><span data-stu-id="a4013-127">Set the `TargetLatestRuntimePatch` property to `true`.</span></span>

## <a name="no-restore-argument-with-dotnet-publish-options"></a><span data-ttu-id="a4013-128">Argument no-restore z opcjami publikowania dotnet</span><span class="sxs-lookup"><span data-stu-id="a4013-128">No-restore argument with dotnet publish options</span></span>

<span data-ttu-id="a4013-129">Jeśli chcesz utworzyć zarówno niezależne aplikacje, jak i [aplikacje zależne od struktury](index.md) z `--no-restore` tym `dotnet publish`samym plikiem projektu i chcesz użyć argumentu z , wybierz jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="a4013-129">If you want to create both self-contained applications and [framework-dependent applications](index.md) with the same project file, and you want to use the `--no-restore` argument with `dotnet publish`, then choose one of the following:</span></span>

1. <span data-ttu-id="a4013-130">Preferuj zachowanie zależne od struktury.</span><span class="sxs-lookup"><span data-stu-id="a4013-130">Prefer the framework-dependent behavior.</span></span> <span data-ttu-id="a4013-131">Jeśli aplikacja jest zależna od struktury, jest to zachowanie domyślne.</span><span class="sxs-lookup"><span data-stu-id="a4013-131">If the application is framework-dependent, this is the default behavior.</span></span> <span data-ttu-id="a4013-132">Jeśli aplikacja jest niezależna i może używać niezałatanego lokalnego czasu uruchomieniowego `TargetLatestRuntimePatch` `false` 2.1.0, ustaw wartość w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="a4013-132">If the application is self-contained, and can use an unpatched 2.1.0 local runtime, set the `TargetLatestRuntimePatch` to `false` in the project file.</span></span>

2. <span data-ttu-id="a4013-133">Preferuj zachowanie samodzielne.</span><span class="sxs-lookup"><span data-stu-id="a4013-133">Prefer the self-contained behavior.</span></span> <span data-ttu-id="a4013-134">Jeśli aplikacja jest niezależna, jest to zachowanie domyślne.</span><span class="sxs-lookup"><span data-stu-id="a4013-134">If the application is self-contained, this is the default behavior.</span></span> <span data-ttu-id="a4013-135">Jeśli aplikacja jest zależna od struktury i wymaga `TargetLatestRuntimePatch` zainstalowanej najnowszej poprawki, ustaw ją `true` w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="a4013-135">If the application is framework-dependent, and requires the latest patch installed, set `TargetLatestRuntimePatch` to `true` in the project file.</span></span>

3. <span data-ttu-id="a4013-136">Przejmij jawną kontrolę `RuntimeFrameworkVersion` nad wersją struktury wykonywania, ustawiając określoną wersję poprawki w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="a4013-136">Take explicit control of the runtime framework version by setting `RuntimeFrameworkVersion` to the specific patch version in the project file.</span></span>
