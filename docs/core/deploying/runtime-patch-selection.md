---
title: Samodzielne wdrożenia środowiska uruchomieniowego przenoszenia do przodu
description: Dowiedz się więcej o dotnet Opublikuj zmiany wdrożeń niezależne.
author: jralexander
ms.author: kdollard
ms.date: 05/31/2018
ms.openlocfilehash: 39a23917dec1aba5142839265c555da5c1e6f09c
ms.sourcegitcommit: 9e18e4a18284ae9e54c515e30d019c0bbff9cd37
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/28/2018
ms.locfileid: "37071035"
---
# <a name="self-contained-deployment-runtime-roll-forward"></a><span data-ttu-id="d7b79-103">Samodzielne wdrożenia środowiska uruchomieniowego przenoszenia do przodu</span><span class="sxs-lookup"><span data-stu-id="d7b79-103">Self-contained deployment runtime roll forward</span></span>

<span data-ttu-id="d7b79-104">Oprogramowanie .NET core [wdrożeń aplikację autonomiczną](index.md) obejmujące bibliotek .NET Core i środowiska uruchomieniowego .NET Core.</span><span class="sxs-lookup"><span data-stu-id="d7b79-104">.NET Core [self-contained application deployments](index.md) include both the .NET Core libraries and the .NET Core runtime.</span></span> <span data-ttu-id="d7b79-105">W programie .NET Core SDK 2.1.300 (.NET Core 2.1) wdrożenia aplikację autonomiczną [publikuje najwyższy środowiska uruchomieniowego poprawki na komputerze](https://github.com/dotnet/designs/pull/36).</span><span class="sxs-lookup"><span data-stu-id="d7b79-105">Starting in .NET Core SDK 2.1.300 (.NET Core 2.1), a self-contained application deployment [publishes the highest patch runtime on your machine](https://github.com/dotnet/designs/pull/36).</span></span> <span data-ttu-id="d7b79-106">Domyślnie [ `dotnet publish` ](../tools/dotnet-publish.md) dla wdrożenia niezależne wybiera najnowszej wersji instalowane jako część zestawu SDK na maszynie publikowania.</span><span class="sxs-lookup"><span data-stu-id="d7b79-106">By default, [`dotnet publish`](../tools/dotnet-publish.md) for a self-contained deployment selects the latest version installed as part of the SDK on the publishing machine.</span></span> <span data-ttu-id="d7b79-107">Dzięki temu wdrożonej aplikacji do uruchamiania z poprawki zabezpieczeń (i inne poprawki) dostępnych w trakcie `publish`.</span><span class="sxs-lookup"><span data-stu-id="d7b79-107">This enables your deployed application to run with security fixes (and other fixes) available during `publish`.</span></span> <span data-ttu-id="d7b79-108">Aplikacja musi być opublikowany ponownie, aby uzyskać nowe poprawki.</span><span class="sxs-lookup"><span data-stu-id="d7b79-108">The application must be re-published to obtain a new patch.</span></span> <span data-ttu-id="d7b79-109">Samodzielne aplikacje zostały utworzone przez określenie `-r <RID>` na `dotnet publish` polecenia lub określając [identyfikator środowiska uruchomieniowego (RID)](../rid-catalog.md) w pliku projektu (csproj / vbproj) lub w wierszu polecenia.</span><span class="sxs-lookup"><span data-stu-id="d7b79-109">Self-contained applications are created by specifying `-r <RID>` on `dotnet publish` command or by specifying the [runtime identifier (RID)](../rid-catalog.md) in the project file (csproj / vbproj) or on the command line.</span></span>

## <a name="patch-version-roll-forward-overview"></a><span data-ttu-id="d7b79-110">Poprawka do przodu omówienie zbiorczego wersji</span><span class="sxs-lookup"><span data-stu-id="d7b79-110">Patch version roll forward overview</span></span>

<span data-ttu-id="d7b79-111">[`restore`](../tools/dotnet-restore.md), [ `build` ](../tools/dotnet-build.md) i [ `publish` ](../tools/dotnet-publish.md) są `dotnet` poleceń, które można uruchomić osobno.</span><span class="sxs-lookup"><span data-stu-id="d7b79-111">[`restore`](../tools/dotnet-restore.md), [`build`](../tools/dotnet-build.md) and [`publish`](../tools/dotnet-publish.md) are `dotnet` commands that can run separately.</span></span> <span data-ttu-id="d7b79-112">Wybór środowiska uruchomieniowego jest częścią `restore` operacji, nie `publish` lub `build`.</span><span class="sxs-lookup"><span data-stu-id="d7b79-112">The runtime choice is part of the `restore` operation, not `publish` or `build`.</span></span> <span data-ttu-id="d7b79-113">Jeśli należy wywołać `publish`, zostanie wybrana najnowszej wersji poprawki.</span><span class="sxs-lookup"><span data-stu-id="d7b79-113">If you call `publish`, the latest patch version will be chosen.</span></span> <span data-ttu-id="d7b79-114">Jeśli wywołujesz `publish` z `--no-restore` argumentu, możesz nie zawierają wersji poprawki żądaną ponieważ wcześniej `restore` nie mogło zostać wykonane z nową aplikację autonomiczną publikowania zasad.</span><span class="sxs-lookup"><span data-stu-id="d7b79-114">If you call `publish` with the `--no-restore` argument, then you may not get the desired patch version because a prior `restore` may not have been executed with the new self-contained application publishing policy.</span></span> <span data-ttu-id="d7b79-115">W takim przypadku błąd kompilacji jest generowany z tekstem podobny do następującego:</span><span class="sxs-lookup"><span data-stu-id="d7b79-115">In this case, a build error is generated with text similar to the following:</span></span>

  <span data-ttu-id="d7b79-116">"Projekt został przywrócony przy użyciu Microsoft.NETCore.App wersji 2.0.0, ale z bieżącymi ustawieniami 2.0.6 będą używać wersji zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="d7b79-116">"The project was restored using Microsoft.NETCore.App version 2.0.0, but with current settings, version 2.0.6 would be used instead.</span></span> <span data-ttu-id="d7b79-117">Aby rozwiązać ten problem, upewnij się, że te same ustawienia są stosowane do przywracania i dla kolejnych operacji, takich jak kompilacji lub publikowania.</span><span class="sxs-lookup"><span data-stu-id="d7b79-117">To resolve this issue, make sure the same settings are used for restore and for subsequent operations such as build or publish.</span></span> <span data-ttu-id="d7b79-118">Zazwyczaj ten problem może wystąpić w przypadku RuntimeIdentifier właściwość jest ustawiona podczas kompilacji lub opublikować, ale nie podczas przywracania."</span><span class="sxs-lookup"><span data-stu-id="d7b79-118">Typically this issue can occur if the RuntimeIdentifier property is set during build or publish but not during restore."</span></span>

> [!NOTE]
> <span data-ttu-id="d7b79-119">`restore` i `build` mogą być uruchamiane niejawnie jako część innego polecenia, takie jak `publish`.</span><span class="sxs-lookup"><span data-stu-id="d7b79-119">`restore` and `build` can be run implicitly as part of another command, like `publish`.</span></span> <span data-ttu-id="d7b79-120">Uruchom niejawnie jako część innego polecenia, są udostępniane z dodatkowy kontekst w, prawy artefakty są tworzone.</span><span class="sxs-lookup"><span data-stu-id="d7b79-120">When run implicitly as part of another command, they are provided with additional context so that the right artifacts are produced.</span></span> <span data-ttu-id="d7b79-121">Gdy można `publish` o środowisku uruchomieniowym (na przykład `dotnet publish -r linux-x64`), niejawne `restore` przywraca pakietów dla środowiska uruchomieniowego linux x64.</span><span class="sxs-lookup"><span data-stu-id="d7b79-121">When you `publish` with a runtime (for example, `dotnet publish -r linux-x64`), the implicit `restore` restores packages for the linux-x64 runtime.</span></span> <span data-ttu-id="d7b79-122">Jeśli należy wywołać `restore` jawnie, nie są przywracane pakietów środowiska uruchomieniowego domyślnie, ponieważ nie ma w tym kontekście.</span><span class="sxs-lookup"><span data-stu-id="d7b79-122">If you call `restore` explicitly, it does not restore runtime packages by default, because it doesn't have that context.</span></span>

## <a name="how-to-avoid-restore-during-publish"></a><span data-ttu-id="d7b79-123">Jak uniknąć Przywracanie podczas publikowania</span><span class="sxs-lookup"><span data-stu-id="d7b79-123">How to avoid restore during publish</span></span>

<span data-ttu-id="d7b79-124">Uruchomiona `restore` jako część `publish` operacji może być niepożądane dla danego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="d7b79-124">Running `restore` as part of the `publish` operation may be undesirable for your scenario.</span></span> <span data-ttu-id="d7b79-125">Aby uniknąć `restore` podczas `publish` podczas tworzenia aplikacji niezależne, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="d7b79-125">To avoid `restore` during `publish` while creating self-contained applications, do the following:</span></span>

* <span data-ttu-id="d7b79-126">Ustaw `RuntimeIdentifiers` właściwości rozdzieloną średnikami listę wszystkich [identyfikatorów RID](../rid-catalog.md) do opublikowania.</span><span class="sxs-lookup"><span data-stu-id="d7b79-126">Set the `RuntimeIdentifiers` property to a semicolon-separated list of all the [RIDs](../rid-catalog.md) to be published.</span></span>
* <span data-ttu-id="d7b79-127">Ustaw `TargetLatestRuntimePatch` właściwości `true`.</span><span class="sxs-lookup"><span data-stu-id="d7b79-127">Set the `TargetLatestRuntimePatch` property to `true`.</span></span>

## <a name="no-restore-argument-with-dotnet-publish-options"></a><span data-ttu-id="d7b79-128">Opcje publikowania przywracania nie argumentu z dotnet</span><span class="sxs-lookup"><span data-stu-id="d7b79-128">No-restore argument with dotnet publish options</span></span>

<span data-ttu-id="d7b79-129">Jeśli chcesz utworzyć obie aplikacje niezależna i [aplikacje zależne od framework](index.md) z tego samego pliku projektu, i chcesz użyć `--no-restore` argumentu z `dotnet publish`, a następnie wybierz jedno z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="d7b79-129">If you want to create both self-contained applications and [framework-dependent applications](index.md) with the same project file, and you want to use the `--no-restore` argument with `dotnet publish`, then choose one of the following:</span></span>

1. <span data-ttu-id="d7b79-130">Preferowane jest zachowanie framework zależne.</span><span class="sxs-lookup"><span data-stu-id="d7b79-130">Prefer the framework-dependent behavior.</span></span> <span data-ttu-id="d7b79-131">Jeśli aplikacja jest zależne od framework, to zachowanie domyślne.</span><span class="sxs-lookup"><span data-stu-id="d7b79-131">If the application is framework-dependent, this is the default behavior.</span></span> <span data-ttu-id="d7b79-132">Jeśli aplikacja jest niezależna i można używać bez poprawki 2.1.0 lokalnego środowiska uruchomieniowego, ustaw `TargetLatestRuntimePatch` do `false` w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="d7b79-132">If the application is self-contained, and can use an unpatched 2.1.0 local runtime, set the `TargetLatestRuntimePatch` to `false` in the project file.</span></span>

2. <span data-ttu-id="d7b79-133">Preferowane jest niezależna zachowanie.</span><span class="sxs-lookup"><span data-stu-id="d7b79-133">Prefer the self-contained behavior.</span></span> <span data-ttu-id="d7b79-134">Jeśli aplikacja jest niezależne, to domyślne zachowanie.</span><span class="sxs-lookup"><span data-stu-id="d7b79-134">If the application is self-contained, this is the default behavior.</span></span> <span data-ttu-id="d7b79-135">Jeśli aplikacja jest zależny od framework i wymaga najnowszej zainstalowana poprawka, ustaw `TargetLatestRuntimePatch` do `true` w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="d7b79-135">If the application is framework-dependent, and requires the latest patch installed, set `TargetLatestRuntimePatch` to `true` in the project file.</span></span>

3. <span data-ttu-id="d7b79-136">Kontrolować jawne framework w wersji środowiska uruchomieniowego przez ustawienie `RuntimeFrameworkVersion` do wersji poprawki określonych w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="d7b79-136">Take explicit control of the runtime framework version by setting `RuntimeFrameworkVersion` to the specific patch version in the project file.</span></span>
