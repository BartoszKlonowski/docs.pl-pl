---
title: Zrzuty — .NET
description: Wprowadzenie do zrzutów w programie .NET.
ms.date: 10/12/2020
ms.openlocfilehash: a5f12837e81edc82f420f7b325b0248f9f8989a3
ms.sourcegitcommit: 0802ac583585110022beb6af8ea0b39188b77c43
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/25/2020
ms.locfileid: "96034832"
---
# <a name="dumps"></a><span data-ttu-id="14dd4-103">Zrzuty</span><span class="sxs-lookup"><span data-stu-id="14dd4-103">Dumps</span></span>

<span data-ttu-id="14dd4-104">Zrzut to plik zawierający migawkę procesu w momencie jego utworzenia i może być przydatny do sprawdzania stanu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="14dd4-104">A dump is a file that contains a snapshot of the process at the time it was created and can be useful for examining the state of your application.</span></span> <span data-ttu-id="14dd4-105">Zrzuty mogą służyć do debugowania aplikacji .NET, gdy trudno jest dołączyć do niej debuger, taki jak środowisko produkcyjne lub środowiska CI.</span><span class="sxs-lookup"><span data-stu-id="14dd4-105">Dumps can be used to debug your .NET application when it is difficult to attach a debugger to it such as production or CI environments.</span></span> <span data-ttu-id="14dd4-106">Użycie zrzutów umożliwia przechwycenie stanu problematycznego procesu i zbadanie go bez konieczności zatrzymywania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="14dd4-106">Using dumps allows you to capture the state of the problematic process and examine it without having to stop the application.</span></span>

## <a name="collect-dumps"></a><span data-ttu-id="14dd4-107">Zbieraj zrzuty</span><span class="sxs-lookup"><span data-stu-id="14dd4-107">Collect dumps</span></span>

<span data-ttu-id="14dd4-108">Zrzuty mogą być zbierane na różne sposoby w zależności od platformy, w której uruchomiono aplikację.</span><span class="sxs-lookup"><span data-stu-id="14dd4-108">Dumps can be collected in a variety of ways depending on which platform you are running your app on.</span></span>

> [!NOTE]
> <span data-ttu-id="14dd4-109">Zbieranie zrzutu wewnątrz kontenera wymaga możliwości PTRACE, które można dodać za pośrednictwem `--cap-add=SYS_PTRACE` lub `--privileged` .</span><span class="sxs-lookup"><span data-stu-id="14dd4-109">Collecting a dump inside a container requires PTRACE capability, which can be added via `--cap-add=SYS_PTRACE` or `--privileged`.</span></span>

> [!NOTE]
> <span data-ttu-id="14dd4-110">Zrzuty mogą zawierać informacje poufne, ponieważ mogą zawierać pełną pamięć procesu uruchomionego.</span><span class="sxs-lookup"><span data-stu-id="14dd4-110">Dumps may contain sensitive information because they can contain the full memory of the running process.</span></span> <span data-ttu-id="14dd4-111">Obsłuż je wszelkimi ograniczeniami zabezpieczeń i wskazówkami.</span><span class="sxs-lookup"><span data-stu-id="14dd4-111">Handle them with any security restrictions and guidances in mind.</span></span>

### <a name="collecting-dumps-on-crash"></a><span data-ttu-id="14dd4-112">Zbieranie zrzutów w przypadku awarii</span><span class="sxs-lookup"><span data-stu-id="14dd4-112">Collecting dumps on crash</span></span>

<span data-ttu-id="14dd4-113">Możesz użyć zmiennych środowiskowych, aby skonfigurować aplikację do zbierania zrzutu po awarii.</span><span class="sxs-lookup"><span data-stu-id="14dd4-113">You can use environment variables to configure your application to collect a dump upon a crash.</span></span> <span data-ttu-id="14dd4-114">Jest to przydatne, gdy chcesz uzyskać informacje o tym, dlaczego wystąpił awaria.</span><span class="sxs-lookup"><span data-stu-id="14dd4-114">This is helpful when you want to get an understanding of why a crash happened.</span></span> <span data-ttu-id="14dd4-115">Na przykład przechwytywanie zrzutu w przypadku zgłoszenia wyjątku ułatwia zidentyfikowanie problemu przez sprawdzenie stanu aplikacji w przypadku jej awarii.</span><span class="sxs-lookup"><span data-stu-id="14dd4-115">For example, capturing a dump when an exception is thrown helps you identify an issue by examining the state of the app when it crashed.</span></span>

<span data-ttu-id="14dd4-116">W poniższej tabeli przedstawiono zmienne środowiskowe, które można skonfigurować w celu zbierania zrzutów po awarii.</span><span class="sxs-lookup"><span data-stu-id="14dd4-116">The following table shows the environment variables you can configure for collecting dumps on a crash.</span></span>

|<span data-ttu-id="14dd4-117">Zmienna środowiskowa</span><span class="sxs-lookup"><span data-stu-id="14dd4-117">Environment variable</span></span>|<span data-ttu-id="14dd4-118">Opis</span><span class="sxs-lookup"><span data-stu-id="14dd4-118">Description</span></span>|<span data-ttu-id="14dd4-119">Wartość domyślna</span><span class="sxs-lookup"><span data-stu-id="14dd4-119">Default value</span></span>|
|-------|---------|---|
|`COMPlus_DbgEnableMiniDump`|<span data-ttu-id="14dd4-120">W przypadku ustawienia wartości 1 Włącz generowanie zrzutów podstawowych.</span><span class="sxs-lookup"><span data-stu-id="14dd4-120">If set to 1, enable core dump generation.</span></span>|<span data-ttu-id="14dd4-121">0</span><span class="sxs-lookup"><span data-stu-id="14dd4-121">0</span></span>|
|`COMPlus_DbgMiniDumpType`|<span data-ttu-id="14dd4-122">Typ zrzutu do zebrania.</span><span class="sxs-lookup"><span data-stu-id="14dd4-122">Type of dump to be collected.</span></span> <span data-ttu-id="14dd4-123">Aby uzyskać więcej informacji, zobacz poniższą tabelę.</span><span class="sxs-lookup"><span data-stu-id="14dd4-123">For more information, see the table below</span></span>|<span data-ttu-id="14dd4-124">2 ( `MiniDumpWithPrivateReadWriteMemory` )</span><span class="sxs-lookup"><span data-stu-id="14dd4-124">2 (`MiniDumpWithPrivateReadWriteMemory`)</span></span>|
|`COMPlus_DbgMiniDumpName`|<span data-ttu-id="14dd4-125">Ścieżka do pliku, w którym ma zostać zapisany zrzut.</span><span class="sxs-lookup"><span data-stu-id="14dd4-125">Path to a file to write the dump to.</span></span>|`/tmp/coredump.<pid>`|
|`COMPlus_CreateDumpDiagnostics`|<span data-ttu-id="14dd4-126">W przypadku ustawienia wartości 1 Włącz rejestrowanie diagnostyczne procesu zrzutu.</span><span class="sxs-lookup"><span data-stu-id="14dd4-126">If set to 1, enable diagnostic logging of dump process.</span></span>|<span data-ttu-id="14dd4-127">0</span><span class="sxs-lookup"><span data-stu-id="14dd4-127">0</span></span>|

<span data-ttu-id="14dd4-128">W poniższej tabeli przedstawiono wszystkie opcje, których można użyć `COMPlus_DbgMiniDumpType` , dla których można określić jako wartość.</span><span class="sxs-lookup"><span data-stu-id="14dd4-128">The table below shows all the options you may use for `COMPlus_DbgMiniDumpType` which can be specified as a value.</span></span> <span data-ttu-id="14dd4-129">Na przykład ustawienie wartość `COMPlus_DbgMiniDumpType` 1 oznacza `MiniDumpNormal` , że zrzut typu będzie zbierany w przypadku awarii.</span><span class="sxs-lookup"><span data-stu-id="14dd4-129">For example, setting `COMPlus_DbgMiniDumpType` to 1 means `MiniDumpNormal` type dump will be collected on a crash.</span></span>

|<span data-ttu-id="14dd4-130">Wartość</span><span class="sxs-lookup"><span data-stu-id="14dd4-130">Value</span></span>|<span data-ttu-id="14dd4-131">Nazwa</span><span class="sxs-lookup"><span data-stu-id="14dd4-131">Name</span></span>|<span data-ttu-id="14dd4-132">Opis</span><span class="sxs-lookup"><span data-stu-id="14dd4-132">Description</span></span>|
|-----|----|-----------|
|<span data-ttu-id="14dd4-133">1</span><span class="sxs-lookup"><span data-stu-id="14dd4-133">1</span></span>|`MiniDumpNormal`|<span data-ttu-id="14dd4-134">Uwzględnij tylko te informacje, które są niezbędne do przechwytywania śladów stosu dla wszystkich istniejących wątków w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-134">Include just the information necessary to capture stack traces for all existing threads in a process.</span></span> <span data-ttu-id="14dd4-135">Ograniczona pamięć i informacje dotyczące sterty GC.</span><span class="sxs-lookup"><span data-stu-id="14dd4-135">Limited GC heap memory and information.</span></span>|
|<span data-ttu-id="14dd4-136">2</span><span class="sxs-lookup"><span data-stu-id="14dd4-136">2</span></span>|`MiniDumpWithPrivateReadWriteMemory`|<span data-ttu-id="14dd4-137">Obejmuje sterty GC i informacje niezbędne do przechwytywania śladów stosu dla wszystkich istniejących wątków w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-137">Includes the GC heaps and information necessary to capture stack traces for all existing threads in a process.</span></span>|
|<span data-ttu-id="14dd4-138">3</span><span class="sxs-lookup"><span data-stu-id="14dd4-138">3</span></span>|`MiniDumpFilterTriage`|<span data-ttu-id="14dd4-139">Uwzględnij tylko te informacje, które są niezbędne do przechwytywania śladów stosu dla wszystkich istniejących wątków w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-139">Include just the information necessary to capture stack traces for all existing threads in a process.</span></span> <span data-ttu-id="14dd4-140">Ograniczona pamięć i informacje dotyczące sterty GC.</span><span class="sxs-lookup"><span data-stu-id="14dd4-140">Limited GC heap memory and information.</span></span>|
|<span data-ttu-id="14dd4-141">4</span><span class="sxs-lookup"><span data-stu-id="14dd4-141">4</span></span>|`MiniDumpWithFullMemory`|<span data-ttu-id="14dd4-142">Uwzględnij całą dostępną pamięć w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-142">Include all accessible memory in the process.</span></span> <span data-ttu-id="14dd4-143">Dane nieprzetworzonej pamięci są uwzględniane na końcu, aby struktury początkowe można mapować bezpośrednio bez informacji o pamięci nieprzetworzonej.</span><span class="sxs-lookup"><span data-stu-id="14dd4-143">The raw memory data is included at the end, so that the initial structures can be mapped directly without the raw memory information.</span></span> <span data-ttu-id="14dd4-144">Ta opcja może powodować bardzo duży plik.</span><span class="sxs-lookup"><span data-stu-id="14dd4-144">This option can result in a very large file.</span></span>|

### <a name="collecting-dumps-at-specific-point-in-time"></a><span data-ttu-id="14dd4-145">Zbieranie zrzutów w określonym momencie</span><span class="sxs-lookup"><span data-stu-id="14dd4-145">Collecting dumps at specific point in time</span></span>

<span data-ttu-id="14dd4-146">Może być konieczne zebranie zrzutu, gdy aplikacja nie uległa jeszcze awarii.</span><span class="sxs-lookup"><span data-stu-id="14dd4-146">You may want to collect a dump when the app hasn't crashed yet.</span></span> <span data-ttu-id="14dd4-147">Na przykład jeśli chcesz przejrzeć stan aplikacji, która wydaje się być zakleszczeniem, skonfigurowanie zmiennych środowiskowych w celu zbierania zrzutów w przypadku awarii nie będzie przydatne, ponieważ aplikacja nadal działa.</span><span class="sxs-lookup"><span data-stu-id="14dd4-147">For example, if you want to examine the state of an application that seems to be in a deadlock, configuring the environment variables to collect dumps on crash will not be helpful because the app is still running.</span></span>

<span data-ttu-id="14dd4-148">Aby zbierać zrzuty we własnym żądaniu, można użyć `dotnet-dump` , który jest narzędziem interfejsu wiersza polecenia do zbierania i analizowania zrzutów.</span><span class="sxs-lookup"><span data-stu-id="14dd4-148">To collect dump at your own request, you can use `dotnet-dump`, which is a CLI tool for collecting and analyzing dumps.</span></span> <span data-ttu-id="14dd4-149">Aby uzyskać więcej informacji na temat zbierania zrzutów za pomocą programu `dotnet-dump` , zobacz [zrzuty narzędzi do zbierania i analizy](dotnet-dump.md).</span><span class="sxs-lookup"><span data-stu-id="14dd4-149">For more information on how to use it to collect dumps with `dotnet-dump`, see [Dump collection and analysis utility](dotnet-dump.md).</span></span>

### <a name="types-of-dumps-in-net"></a><span data-ttu-id="14dd4-150">Typy zrzutów w programie .NET</span><span class="sxs-lookup"><span data-stu-id="14dd4-150">Types of dumps in .NET</span></span>

<span data-ttu-id="14dd4-151">Można zbierać różne typy zrzutów w zależności od przeznaczenia.</span><span class="sxs-lookup"><span data-stu-id="14dd4-151">You can collect different types of the dump depending on the purpose.</span></span> <span data-ttu-id="14dd4-152">Można skonfigurować przy użyciu `COMPlus_DbgMiniDumpType` zmiennej środowiskowej when lub `--type` flagi podczas korzystania z programu `dotnet-dump` .</span><span class="sxs-lookup"><span data-stu-id="14dd4-152">This can be configured with the `COMPlus_DbgMiniDumpType` when using environment variable, or the `--type` flag when you are using `dotnet-dump`.</span></span> <span data-ttu-id="14dd4-153">W poniższej tabeli przedstawiono typy zrzutów, które można zbierać w programie .NET.</span><span class="sxs-lookup"><span data-stu-id="14dd4-153">The following table shows the types of dumps you can collect in .NET.</span></span>

|<span data-ttu-id="14dd4-154">Wartość</span><span class="sxs-lookup"><span data-stu-id="14dd4-154">Value</span></span>|<span data-ttu-id="14dd4-155">Nazwa</span><span class="sxs-lookup"><span data-stu-id="14dd4-155">Name</span></span>|<span data-ttu-id="14dd4-156">Opis</span><span class="sxs-lookup"><span data-stu-id="14dd4-156">Description</span></span>|
|-----|----|-----------|
|<span data-ttu-id="14dd4-157">1</span><span class="sxs-lookup"><span data-stu-id="14dd4-157">1</span></span>|`MiniDumpNormal`|<span data-ttu-id="14dd4-158">Uwzględnij tylko te informacje, które są niezbędne do przechwytywania śladów stosu dla wszystkich istniejących wątków w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-158">Include just the information necessary to capture stack traces for all existing threads in a process.</span></span> <span data-ttu-id="14dd4-159">Ograniczona pamięć i informacje dotyczące sterty GC.</span><span class="sxs-lookup"><span data-stu-id="14dd4-159">Limited GC heap memory and information.</span></span>|
|<span data-ttu-id="14dd4-160">2</span><span class="sxs-lookup"><span data-stu-id="14dd4-160">2</span></span>|`MiniDumpWithPrivateReadWriteMemory`|<span data-ttu-id="14dd4-161">Obejmuje sterty GC i informacje niezbędne do przechwytywania śladów stosu dla wszystkich istniejących wątków w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-161">Includes the GC heaps and information necessary to capture stack traces for all existing threads in a process.</span></span>|
|<span data-ttu-id="14dd4-162">3</span><span class="sxs-lookup"><span data-stu-id="14dd4-162">3</span></span>|`MiniDumpFilterTriage`|<span data-ttu-id="14dd4-163">Uwzględnij tylko te informacje, które są niezbędne do przechwytywania śladów stosu dla wszystkich istniejących wątków w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-163">Include just the information necessary to capture stack traces for all existing threads in a process.</span></span> <span data-ttu-id="14dd4-164">Ograniczona pamięć i informacje dotyczące sterty GC.</span><span class="sxs-lookup"><span data-stu-id="14dd4-164">Limited GC heap memory and information.</span></span>|
|<span data-ttu-id="14dd4-165">4</span><span class="sxs-lookup"><span data-stu-id="14dd4-165">4</span></span>|`MiniDumpWithFullMemory`|<span data-ttu-id="14dd4-166">Uwzględnij całą dostępną pamięć w procesie.</span><span class="sxs-lookup"><span data-stu-id="14dd4-166">Include all accessible memory in the process.</span></span> <span data-ttu-id="14dd4-167">Dane nieprzetworzonej pamięci są uwzględniane na końcu, aby struktury początkowe można mapować bezpośrednio bez informacji o pamięci nieprzetworzonej.</span><span class="sxs-lookup"><span data-stu-id="14dd4-167">The raw memory data is included at the end, so that the initial structures can be mapped directly without the raw memory information.</span></span> <span data-ttu-id="14dd4-168">Ta opcja może powodować bardzo duży plik.</span><span class="sxs-lookup"><span data-stu-id="14dd4-168">This option can result in a very large file.</span></span>|

## <a name="analyze-dumps"></a><span data-ttu-id="14dd4-169">Analizowanie zrzutów</span><span class="sxs-lookup"><span data-stu-id="14dd4-169">Analyze dumps</span></span>

<span data-ttu-id="14dd4-170">Zrzuty mogą być analizowane przy użyciu [`dotnet-dump`](dotnet-dump.md) .</span><span class="sxs-lookup"><span data-stu-id="14dd4-170">Dumps can be analyzed using [`dotnet-dump`](dotnet-dump.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="14dd4-171">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="14dd4-171">See also</span></span>

<span data-ttu-id="14dd4-172">Dowiedz się więcej o tym, jak można wykorzystać zrzuty, aby pomóc w diagnozowaniu problemów w aplikacji .NET.</span><span class="sxs-lookup"><span data-stu-id="14dd4-172">Learn more about how you can leverage dumps to help diagnosing problems in your .NET application.</span></span>

* <span data-ttu-id="14dd4-173">Samouczek dotyczący [debugowania zrzutów systemu Linux](debug-linux-dumps.md) przeprowadzi Cię przez proces debugowania zrzutu, który został zebrany w systemie Linux.</span><span class="sxs-lookup"><span data-stu-id="14dd4-173">[Debug Linux dumps](debug-linux-dumps.md) tutorial walks you through how to debug a dump that was collected in Linux.</span></span>

* <span data-ttu-id="14dd4-174">Samouczek [debugowania](debug-deadlock.md) — przeprowadzi Cię przez proces debugowania zakleszczenia w aplikacji .NET przy użyciu zrzutów.</span><span class="sxs-lookup"><span data-stu-id="14dd4-174">[Debug deadlock](debug-deadlock.md) tutorial walks you through how to debug a deadlock in your .NET application using dumps.</span></span>
