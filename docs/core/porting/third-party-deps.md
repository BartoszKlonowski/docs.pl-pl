---
title: Analizowanie zależności w celu przeniesienia kodu portu do programu .NET Core
description: Dowiedz się, jak analizować zależności zewnętrzne w celu przeniesienia projektu z .NET Framework do .NET Core.
author: cartermp
ms.date: 10/22/2019
ms.openlocfilehash: 2aa09e551a99358d3a6961fafcfc0aa8dbd976b1
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/14/2020
ms.locfileid: "79398966"
---
# <a name="analyze-your-dependencies-to-port-code-to-net-core"></a><span data-ttu-id="9ebb0-103">Analizowanie zależności w celu przeniesienia kodu do .NET Core</span><span class="sxs-lookup"><span data-stu-id="9ebb0-103">Analyze your dependencies to port code to .NET Core</span></span>

<span data-ttu-id="9ebb0-104">Aby przenieść kod do .NET Core lub .NET Standard, należy zrozumieć zależności.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-104">To port your code to .NET Core or .NET Standard, you must understand your dependencies.</span></span> <span data-ttu-id="9ebb0-105">Zależności zewnętrzne są pakiety NuGet lub `.dll` pliki, do których odwołujesz się w projekcie, ale nie tworzą samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-105">External dependencies are the NuGet packages or `.dll` files you reference in your project, but that you don't build yourself.</span></span>

## <a name="migrate-your-nuget-packages-to-packagereference"></a><span data-ttu-id="9ebb0-106">Migrowanie pakietów NuGet do`PackageReference`</span><span class="sxs-lookup"><span data-stu-id="9ebb0-106">Migrate your NuGet packages to `PackageReference`</span></span>

<span data-ttu-id="9ebb0-107">Program .NET Core używa [PackageReference](/nuget/consume-packages/package-references-in-project-files) do określania zależności pakietów.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-107">.NET Core uses [PackageReference](/nuget/consume-packages/package-references-in-project-files) to specify package dependencies.</span></span> <span data-ttu-id="9ebb0-108">Jeśli używasz [packages.config,](/nuget/reference/packages-config) aby określić pakiety w projekcie, `PackageReference` przekonwertuj go na format, ponieważ `packages.config` nie jest obsługiwany w programie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-108">If you're using [packages.config](/nuget/reference/packages-config) to specify your packages in your project, convert it to the `PackageReference` format, because `packages.config` isn't supported in .NET Core.</span></span>

<span data-ttu-id="9ebb0-109">Aby dowiedzieć się, jak przeprowadzić migrację, zobacz [migracji z packages.config do PackageReference](/nuget/reference/migrate-packages-config-to-package-reference) artykułu.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-109">To learn how to migrate, see the [Migrate from packages.config to PackageReference](/nuget/reference/migrate-packages-config-to-package-reference) article.</span></span>

## <a name="upgrade-your-nuget-packages"></a><span data-ttu-id="9ebb0-110">Uaktualnij swoje pakiety NuGet</span><span class="sxs-lookup"><span data-stu-id="9ebb0-110">Upgrade your NuGet packages</span></span>

<span data-ttu-id="9ebb0-111">Po migracji projektu do `PackageReference` formatu sprawdź, czy pakiety są zgodne z .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-111">After you migrate your project to the `PackageReference` format, verify if your packages are compatible with .NET Core.</span></span>

<span data-ttu-id="9ebb0-112">Najpierw uaktualnij pakiety do najnowszej wersji, którą możesz.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-112">First, upgrade your packages to the latest version that you can.</span></span> <span data-ttu-id="9ebb0-113">Można to zrobić za pomocą interfejsu interfejsu menedżera pakietów NuGet w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-113">This can be done with the NuGet Package Manager UI in Visual Studio.</span></span> <span data-ttu-id="9ebb0-114">Jest prawdopodobne, że nowsze wersje zależności pakietu są już zgodne z .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-114">It's likely that newer versions of your package dependencies are already compatible with .NET Core.</span></span>

## <a name="analyze-your-package-dependencies"></a><span data-ttu-id="9ebb0-115">Analizowanie zależności pakietów</span><span class="sxs-lookup"><span data-stu-id="9ebb0-115">Analyze your package dependencies</span></span>

<span data-ttu-id="9ebb0-116">Jeśli nie masz jeszcze zweryfikowania, czy przekonwertowane i uaktualnione zależności pakietów działają na .NET Core, można to osiągnąć na kilka sposobów:</span><span class="sxs-lookup"><span data-stu-id="9ebb0-116">If you haven't already verified that your converted and upgraded package dependencies work on .NET Core, there are a few ways that you can achieve that:</span></span>

### <a name="analyze-nuget-packages-using-nugetorg"></a><span data-ttu-id="9ebb0-117">Analizowanie pakietów NuGet przy użyciu nuget.org</span><span class="sxs-lookup"><span data-stu-id="9ebb0-117">Analyze NuGet packages using nuget.org</span></span>

<span data-ttu-id="9ebb0-118">Można zobaczyć menikers platformy docelowej (TFM), że każdy pakiet obsługuje [na nuget.org](https://www.nuget.org/) w sekcji **zależności** na stronie pakietu.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-118">You can see the Target Framework Monikers (TFMs) that each package supports on [nuget.org](https://www.nuget.org/) under the **Dependencies** section of the package page.</span></span>

<span data-ttu-id="9ebb0-119">Chociaż korzystanie z witryny jest łatwiejsza metoda weryfikacji zgodności, **informacje o zależnościach** nie są dostępne w witrynie dla wszystkich pakietów.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-119">Although using the site is an easier method to verify the compatibility, **Dependencies** information isn't available on the site for all packages.</span></span>

### <a name="analyze-nuget-packages-using-nuget-package-explorer"></a><span data-ttu-id="9ebb0-120">Analizowanie pakietów NuGet przy użyciu Eksploratora pakietów NuGet</span><span class="sxs-lookup"><span data-stu-id="9ebb0-120">Analyze NuGet packages using NuGet Package Explorer</span></span>

<span data-ttu-id="9ebb0-121">Pakiet NuGet sam zestaw folderów, które zawierają zestawy specyficzne dla platformy.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-121">A NuGet package is itself a set of folders that contain platform-specific assemblies.</span></span> <span data-ttu-id="9ebb0-122">Sprawdź, czy istnieje folder, który zawiera zgodny zestaw wewnątrz pakietu.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-122">Check if there's a folder that contains a compatible assembly inside the package.</span></span>

<span data-ttu-id="9ebb0-123">Najprostszym sposobem sprawdzenia folderów pakietów NuGet jest użycie narzędzia [NuGet Package Explorer.](https://github.com/NuGetPackageExplorer/NuGetPackageExplorer)</span><span class="sxs-lookup"><span data-stu-id="9ebb0-123">The easiest way to inspect NuGet package folders is to use the [NuGet Package Explorer](https://github.com/NuGetPackageExplorer/NuGetPackageExplorer) tool.</span></span> <span data-ttu-id="9ebb0-124">Po zainstalowaniu go, należy wykonać następujące kroki, aby wyświetlić nazwy folderów:</span><span class="sxs-lookup"><span data-stu-id="9ebb0-124">After installing it, use the following steps to see the folder names:</span></span>

1. <span data-ttu-id="9ebb0-125">Otwórz Eksploratora pakietów NuGet.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-125">Open the NuGet Package Explorer.</span></span>
2. <span data-ttu-id="9ebb0-126">Kliknij **pozycję Otwórz pakiet z pliku danych online**.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-126">Click **Open package from online feed**.</span></span>
3. <span data-ttu-id="9ebb0-127">Wyszukaj nazwę pakietu.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-127">Search for the name of the package.</span></span>
4. <span data-ttu-id="9ebb0-128">Wybierz nazwę pakietu z wyników wyszukiwania i kliknij **przycisk Otwórz**przycisk Otwórz .</span><span class="sxs-lookup"><span data-stu-id="9ebb0-128">Select the package name from the search results and click **open**.</span></span>
5. <span data-ttu-id="9ebb0-129">Rozwiń folder *lib* po prawej stronie i spójrz na nazwy folderów.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-129">Expand the *lib* folder on the right-hand side and look at folder names.</span></span>

<span data-ttu-id="9ebb0-130">Poszukaj folderu z nazwami `netstandardX.Y` przy `netcoreappX.Y`użyciu jednego z następujących wzorców: lub .</span><span class="sxs-lookup"><span data-stu-id="9ebb0-130">Look for a folder with names using one the following patterns: `netstandardX.Y` or `netcoreappX.Y`.</span></span>

<span data-ttu-id="9ebb0-131">Wartości te są [target Framework Monikers (TFM),](../../standard/frameworks.md) które mapują do wersji [.NET Standard](../../standard/net-standard.md), .NET Core i tradycyjnych przenośnych bibliotek klas (PCL) profile, które są zgodne z .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-131">These values are the [Target Framework Monikers (TFMs)](../../standard/frameworks.md) that map to versions of the [.NET Standard](../../standard/net-standard.md), .NET Core, and traditional Portable Class Library (PCL) profiles that are compatible with .NET Core.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9ebb0-132">Patrząc na TFM, że pakiet obsługuje, należy pamiętać, że `netcoreapp*`, podczas gdy zgodne, jest tylko dla projektów .NET Core, a nie dla projektów .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-132">When looking at the TFMs that a package supports, note that `netcoreapp*`, while compatible, is for .NET Core projects only and not for .NET Standard projects.</span></span>
> <span data-ttu-id="9ebb0-133">Biblioteka, która `netcoreapp*` jest `netstandard*` przeznaczona tylko dla osób docelowych i nie może być używana tylko przez inne aplikacje .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-133">A library that only targets `netcoreapp*` and not `netstandard*` can only be consumed by other .NET Core apps.</span></span>

## <a name="net-framework-compatibility-mode"></a><span data-ttu-id="9ebb0-134">Tryb zgodności .NET Framework</span><span class="sxs-lookup"><span data-stu-id="9ebb0-134">.NET Framework compatibility mode</span></span>

<span data-ttu-id="9ebb0-135">Po przeanalizowaniu pakietów NuGet może się okazać, że są one przeznaczone tylko dla .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-135">After analyzing the NuGet packages, you might find that they only target the .NET Framework.</span></span>

<span data-ttu-id="9ebb0-136">Począwszy od .NET Standard 2.0 wprowadzono tryb zgodności .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-136">Starting with .NET Standard 2.0, the .NET Framework compatibility mode was introduced.</span></span> <span data-ttu-id="9ebb0-137">Ten tryb zgodności umożliwia projektom .NET Standard i .NET Core odwoływanie się do bibliotek .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-137">This compatibility mode allows .NET Standard and .NET Core projects to reference .NET Framework libraries.</span></span> <span data-ttu-id="9ebb0-138">Odwoływanie się do bibliotek .NET Framework nie działa dla wszystkich projektów, na przykład jeśli biblioteka używa interfejsów API Programu Windows Presentation Foundation (WPF), ale odblokowuje wiele scenariuszy przenoszenia.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-138">Referencing .NET Framework libraries doesn't work for all projects, such as if the library uses Windows Presentation Foundation (WPF) APIs, but it does unblock many porting scenarios.</span></span>

<span data-ttu-id="9ebb0-139">Podczas odwoływania się do pakietów NuGet, które są przeznaczone dla programu .NET Framework w projekcie, takich jak [Huitian.PowerCollections,](https://www.nuget.org/packages/Huitian.PowerCollections)otrzymasz ostrzeżenie rezerwowe pakietu ([NU1701](/nuget/reference/errors-and-warnings/nu1701)) podobne do następującego przykładu:</span><span class="sxs-lookup"><span data-stu-id="9ebb0-139">When you reference NuGet packages that target .NET Framework in your project, such as [Huitian.PowerCollections](https://www.nuget.org/packages/Huitian.PowerCollections), you get a package fallback warning ([NU1701](/nuget/reference/errors-and-warnings/nu1701)) similar to the following example:</span></span>

`NU1701: Package ‘Huitian.PowerCollections 1.0.0’ was restored using ‘.NETFramework,Version=v4.6.1’ instead of the project target framework ‘.NETStandard,Version=v2.0’. This package may not be fully compatible with your project.`

<span data-ttu-id="9ebb0-140">To ostrzeżenie jest wyświetlane po dodaniu pakietu i za każdym razem, gdy tworzysz, aby upewnić się, że testujesz ten pakiet z projektem.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-140">That warning is displayed when you add the package and every time you build to make sure you test that package with your project.</span></span> <span data-ttu-id="9ebb0-141">Jeśli projekt działa zgodnie z oczekiwaniami, można pominąć to ostrzeżenie, edytując właściwości pakietu w programie Visual Studio lub ręcznie edytując plik projektu w edytorze ulubionych kodów.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-141">If your project works as expected, you can suppress that warning by editing the package properties in Visual Studio or by manually editing the project file in your favorite code editor.</span></span>

<span data-ttu-id="9ebb0-142">Aby pominąć ostrzeżenie, edytując `PackageReference` plik projektu, znajdź wpis dla pakietu, `NoWarn` dla którego chcesz pominąć ostrzeżenie i dodać atrybut.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-142">To suppress the warning by editing the project file, find the `PackageReference` entry for the package you want to suppress the warning for and add the `NoWarn` attribute.</span></span> <span data-ttu-id="9ebb0-143">Atrybut `NoWarn` akceptuje listę wszystkich identyfikatorów ostrzeżeń rozdzielonych przecinkami.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-143">The `NoWarn` attribute accepts a comma-separated list of all the warning IDs.</span></span> <span data-ttu-id="9ebb0-144">W poniższym przykładzie pokazano, jak pominąć `NU1701` ostrzeżenie dla pakietu, `Huitian.PowerCollections` edytując plik projektu ręcznie:</span><span class="sxs-lookup"><span data-stu-id="9ebb0-144">The following example shows how to suppress the `NU1701` warning for the `Huitian.PowerCollections` package by editing your project file manually:</span></span>

```xml
<ItemGroup>
  <PackageReference Include="Huitian.PowerCollections" Version="1.0.0" NoWarn="NU1701" />
</ItemGroup>
```

<span data-ttu-id="9ebb0-145">Aby uzyskać więcej informacji na temat pomijania ostrzeżeń kompilatora w programie Visual Studio, zobacz [Pomijanie ostrzeżeń dla pakietów NuGet](/visualstudio/ide/how-to-suppress-compiler-warnings#suppress-warnings-for-nuget-packages).</span><span class="sxs-lookup"><span data-stu-id="9ebb0-145">For more information on how to suppress compiler warnings in Visual Studio, see [Suppressing warnings for NuGet packages](/visualstudio/ide/how-to-suppress-compiler-warnings#suppress-warnings-for-nuget-packages).</span></span>

## <a name="what-to-do-when-your-nuget-package-dependency-doesnt-run-on-net-core"></a><span data-ttu-id="9ebb0-146">Co zrobić, gdy zależność pakietu NuGet nie działa na .NET Core</span><span class="sxs-lookup"><span data-stu-id="9ebb0-146">What to do when your NuGet package dependency doesn't run on .NET Core</span></span>

<span data-ttu-id="9ebb0-147">Istnieje kilka czynności, które można zrobić, jeśli pakiet NuGet, od którego zależy, nie jest uruchamiany w ustom .NET Core:</span><span class="sxs-lookup"><span data-stu-id="9ebb0-147">There are a few things you can do if a NuGet package you depend on doesn't run on .NET Core:</span></span>

- <span data-ttu-id="9ebb0-148">Jeśli projekt jest open source i hostowane gdzieś jak GitHub, można zaangażować deweloperów bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-148">If the project is open source and hosted somewhere like GitHub, you can engage the developers directly.</span></span>
- <span data-ttu-id="9ebb0-149">Możesz skontaktować się z autorem bezpośrednio na [nuget.org](https://www.nuget.org/). Wyszukaj pakiet i kliknij **pozycję Skontaktuj się z właścicielami** po lewej stronie strony pakietu.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-149">You can contact the author directly on [nuget.org](https://www.nuget.org/). Search for the package and click **Contact Owners** on the left-hand side of the package's page.</span></span>
- <span data-ttu-id="9ebb0-150">Można wyszukać inny pakiet, który działa na .NET Core, który realizuje to samo zadanie, co pakiet, którego używasz.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-150">You can search for another package that runs on .NET Core that accomplishes the same task as the package you were using.</span></span>
- <span data-ttu-id="9ebb0-151">Można spróbować napisać kod pakiet robił samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-151">You can attempt to write the code the package was doing yourself.</span></span>
- <span data-ttu-id="9ebb0-152">Można wyeliminować zależność od pakietu, zmieniając funkcjonalność aplikacji, przynajmniej do momentu udostępnienia zgodnej wersji pakietu.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-152">You could eliminate the dependency on the package by changing the functionality of your app, at least until a compatible version of the package becomes available.</span></span>

<span data-ttu-id="9ebb0-153">Należy pamiętać, że opiekunowie projektów typu open source i wydawcy pakietów NuGet są często wolontariuszami.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-153">Remember that open-source project maintainers and NuGet package publishers are often volunteers.</span></span> <span data-ttu-id="9ebb0-154">Przyczyniają się, ponieważ dbają o daną domenę, robią to za darmo i często mają inną pracę w ciągu dnia.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-154">They contribute because they care about a given domain, do it for free, and often have a different daytime job.</span></span> <span data-ttu-id="9ebb0-155">Należy o tym pamiętać podczas kontaktowania się z nimi, aby poprosić o pomoc techniczną .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-155">Be mindful of that when contacting them to ask for .NET Core support.</span></span>

<span data-ttu-id="9ebb0-156">Jeśli nie możesz rozwiązać problemu z którąkolwiek z tych opcji, może być trzeba przenieść do .NET Core w późniejszym terminie.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-156">If you can't resolve your issue with any of these options, you may have to port to .NET Core at a later date.</span></span>

<span data-ttu-id="9ebb0-157">Zespół .NET chciałby wiedzieć, które biblioteki są najważniejsze do obsługi z .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-157">The .NET Team would like to know which libraries are the most important to support with .NET Core.</span></span> <span data-ttu-id="9ebb0-158">Możesz wysłać wiadomość dotnet@microsoft.com e-mail do o bibliotekach, których chcesz użyć.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-158">You can send an email to dotnet@microsoft.com about the libraries you'd like to use.</span></span>

## <a name="analyze-dependencies-that-arent-nuget-packages"></a><span data-ttu-id="9ebb0-159">Analizowanie zależności, które nie są pakietami NuGet</span><span class="sxs-lookup"><span data-stu-id="9ebb0-159">Analyze dependencies that aren't NuGet packages</span></span>

<span data-ttu-id="9ebb0-160">Może mieć zależność, która nie jest pakietem NuGet, takich jak dll w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-160">You may have a dependency that isn't a NuGet package, such as a DLL in the file system.</span></span> <span data-ttu-id="9ebb0-161">Jedynym sposobem określenia przenośności tej zależności jest uruchomienie narzędzia [Analizator przenośności .NET.](https://github.com/Microsoft/dotnet-apiport)</span><span class="sxs-lookup"><span data-stu-id="9ebb0-161">The only way to determine the portability of that dependency is to run the [.NET Portability Analyzer](https://github.com/Microsoft/dotnet-apiport) tool.</span></span> <span data-ttu-id="9ebb0-162">Narzędzie analizuje zestawy, które są przeznaczone dla programu .NET Framework i identyfikuje interfejsy API, które nie są przenośne dla innych platform .NET, takich jak .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9ebb0-162">The tool analyzes assemblies that target the .NET Framework and identifies APIs that aren't portable to other .NET platforms such as .NET Core.</span></span> <span data-ttu-id="9ebb0-163">Narzędzie można uruchomić jako aplikację konsoli lub jako [rozszerzenie programu Visual Studio.](../../standard/analyzers/portability-analyzer.md)</span><span class="sxs-lookup"><span data-stu-id="9ebb0-163">You can run the tool as a console application or as a [Visual Studio extension](../../standard/analyzers/portability-analyzer.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="9ebb0-164">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="9ebb0-164">Next steps</span></span>

>[!div class="nextstepaction"]
>[<span data-ttu-id="9ebb0-165">Przenoszenie bibliotek</span><span class="sxs-lookup"><span data-stu-id="9ebb0-165">Port libraries</span></span>](libraries.md)
