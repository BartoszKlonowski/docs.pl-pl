---
title: Migracja platformy .NET Core z pliku Project. JSON
description: Dowiedz się, jak przeprowadzić migrację starszego projektu .NET Core przy użyciu pliku Project. JSON
ms.date: 07/19/2017
ms.custom: seodec18
ms.openlocfilehash: 2912262d1191114d2314fed89e31c91c114f1935
ms.sourcegitcommit: 559259da2738a7b33a46c0130e51d336091c2097
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/22/2019
ms.locfileid: "72773903"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="4fa0b-103">Migrowanie projektów .NET Core z pliku Project. JSON</span><span class="sxs-lookup"><span data-stu-id="4fa0b-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="4fa0b-104">W tym dokumencie opisano następujące trzy scenariusze migracji dla projektów programu .NET Core:</span><span class="sxs-lookup"><span data-stu-id="4fa0b-104">This document covers the following three migration scenarios for .NET Core projects:</span></span>

1. [<span data-ttu-id="4fa0b-105">Migracja z prawidłowego najnowszego schematu pliku *Project. JSON* do *csproj*</span><span class="sxs-lookup"><span data-stu-id="4fa0b-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="4fa0b-106">Migracja z środowiska DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="4fa0b-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="4fa0b-107">Migracja z RC3 i poprzednich projektów .NET Core csproj do końcowego formatu</span><span class="sxs-lookup"><span data-stu-id="4fa0b-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="4fa0b-108">Ten dokument ma zastosowanie tylko do starszych projektów programu .NET Core, które używają pliku Project. JSON.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-108">This document is only applicable to older .NET Core projects that use project.json.</span></span> <span data-ttu-id="4fa0b-109">Nie dotyczy migrowania z .NET Framework do programu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-109">It does not apply to migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="4fa0b-110">Migracja z pliku Project. JSON do csproj</span><span class="sxs-lookup"><span data-stu-id="4fa0b-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="4fa0b-111">Migracja z pliku *Project. JSON* do *. csproj* można wykonać przy użyciu jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="4fa0b-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="4fa0b-112">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="4fa0b-112">Visual Studio</span></span>](#visual-studio)
- [<span data-ttu-id="4fa0b-113">Narzędzie wiersza polecenia migracji dotnet</span><span class="sxs-lookup"><span data-stu-id="4fa0b-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="4fa0b-114">Obie metody używają tego samego aparatu podstawowego do migrowania projektów, dlatego wyniki będą takie same dla obu tych metod.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="4fa0b-115">W większości przypadków użycie jednego z tych dwóch metod migracji pliku *Project. JSON* do *csproj* jest jedyną potrzebną operacją i nie jest konieczne dalsze ręczne edytowanie plików projektu.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed, and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="4fa0b-116">Utworzony plik *csproj* będzie taki sam jak nazwa katalogu zawierającego.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio"></a><span data-ttu-id="4fa0b-117">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="4fa0b-117">Visual Studio</span></span>

<span data-ttu-id="4fa0b-118">Po otwarciu pliku *. xproj* lub pliku rozwiązania, który odwołuje się do plików *. Xproj* w programie Visual Studio 2017 lub Visual studio 2019 w wersji 16,2 i starszej, zostanie wyświetlone okno dialogowe **uaktualnianie jednokierunkowe** .</span><span class="sxs-lookup"><span data-stu-id="4fa0b-118">When you open an *.xproj* file or a solution file that references *.xproj* files in Visual Studio 2017 or Visual Studio 2019 version 16.2 and earlier, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="4fa0b-119">W oknie dialogowym zostaną wyświetlone projekty do migracji.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-119">The dialog displays the projects to be migrated.</span></span> <span data-ttu-id="4fa0b-120">Jeśli otworzysz plik rozwiązania, zostaną wyświetlone wszystkie projekty określone w pliku rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-120">If you open a solution file, all the projects specified in the solution file are listed.</span></span> <span data-ttu-id="4fa0b-121">Przejrzyj listę projektów do migracji i wybierz **przycisk OK**.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Jednokierunkowe okno dialogowe uaktualniania zawierające listę projektów do migracji](media/one-way-upgrade.jpg)

<span data-ttu-id="4fa0b-123">Program Visual Studio automatycznie migruje wybrane projekty.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-123">Visual Studio migrates the selected projects automatically.</span></span> <span data-ttu-id="4fa0b-124">W przypadku migrowania rozwiązania, jeśli nie wybrano wszystkich projektów, zostanie wyświetlone okno dialogowe z prośbą o uaktualnienie pozostałych projektów z tego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-124">When migrating a solution, if you don't choose all projects, the same dialog appears asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="4fa0b-125">Po przeprowadzeniu migracji projektu można zobaczyć i zmodyfikować jego zawartość, klikając prawym przyciskiem myszy projekt w oknie **Eksplorator rozwiązań** i wybierając pozycję **edytuj \<project nazwa >. csproj**.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="4fa0b-126">Pliki migrowane (*Project. JSON*, *Global. JSON*, *. xproj*i plik rozwiązania) są przenoszone do folderu *kopii zapasowej* .</span><span class="sxs-lookup"><span data-stu-id="4fa0b-126">Files that were migrated (*project.json*, *global.json*, *.xproj*, and solution file) are moved to a *Backup* folder.</span></span> <span data-ttu-id="4fa0b-127">Migrowany plik rozwiązania jest uaktualniany do programu Visual Studio 2017 lub Visual Studio 2019 i nie będzie można otworzyć tego pliku rozwiązania w programie Visual Studio 2015 lub jego wcześniejszych wersjach.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-127">The migrated solution file is upgraded to Visual Studio 2017 or Visual Studio 2019 and you won't be able to open that solution file in Visual Studio 2015 or earlier versions.</span></span> <span data-ttu-id="4fa0b-128">Plik o nazwie *UpgradeLog. htm* zawierający raport migracji również jest automatycznie zapisywany i otwierany.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-128">A file named *UpgradeLog.htm* that contains a migration report is also saved and opened automatically.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="4fa0b-129">W programie Visual Studio 2019 w wersji 16,3 i nowszych nie można załadować ani zmigrować pliku *. xproj* .</span><span class="sxs-lookup"><span data-stu-id="4fa0b-129">In Visual Studio 2019 version 16.3 and later, you cannot load or migrate an *.xproj* file.</span></span> <span data-ttu-id="4fa0b-130">Ponadto program Visual Studio 2015 nie zapewnia możliwości migrowania pliku *. xproj* .</span><span class="sxs-lookup"><span data-stu-id="4fa0b-130">Additionally, Visual Studio 2015 doesn't provide the ability to migrate an *.xproj* file.</span></span> <span data-ttu-id="4fa0b-131">Jeśli używasz jednej z tych wersji programu Visual Studio, zainstaluj odpowiednią wersję programu Visual Studio lub użyj narzędzia migracji wiersza polecenia opisanego dalej.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-131">If you're using one of these Visual Studio versions, either install a suitable version of Visual Studio, or use the command line migration tool that's described next.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="4fa0b-132">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="4fa0b-132">dotnet migrate</span></span>

<span data-ttu-id="4fa0b-133">W scenariuszu wiersza polecenia można użyć polecenia [`dotnet migrate`](../tools/dotnet-migrate.md) .</span><span class="sxs-lookup"><span data-stu-id="4fa0b-133">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="4fa0b-134">Migruje projekt, rozwiązanie lub zestaw folderów w tej kolejności, w zależności od tego, które zostały znalezione.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-134">It migrates a project, a solution, or a set of folders in that order, depending on which ones were found.</span></span> <span data-ttu-id="4fa0b-135">Podczas migrowania projektu, projekt i wszystkie jego zależności są migrowane.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-135">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="4fa0b-136">Pliki migrowane (*Project. JSON*, *Global. JSON*i *. xproj*) są przenoszone do folderu *kopii zapasowej* .</span><span class="sxs-lookup"><span data-stu-id="4fa0b-136">Files that were migrated (*project.json*, *global.json*, and *.xproj*) are moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="4fa0b-137">Jeśli używasz Visual Studio Code, polecenie `dotnet migrate` nie modyfikuje Visual Studio Code plików specyficznych, takich jak *Tasks. JSON*.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-137">If you are using Visual Studio Code, the `dotnet migrate` command does not modify Visual Studio Code-specific files such as *tasks.json*.</span></span> <span data-ttu-id="4fa0b-138">Te pliki należy zmienić ręcznie.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-138">These files need to be changed manually.</span></span>
> <span data-ttu-id="4fa0b-139">Jest to również prawdziwe, jeśli używasz edytora lub zintegrowanego środowiska programistycznego (IDE) innego niż program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-139">This is also true if you are using an editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="4fa0b-140">Zapoznaj [się z mapowaniem właściwości Project. JSON i csproj](../tools/project-json-to-csproj.md) w celu porównania formatów *Project. JSON* i *. csproj* .</span><span class="sxs-lookup"><span data-stu-id="4fa0b-140">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of *project.json* and *.csproj* formats.</span></span>

<span data-ttu-id="4fa0b-141">Jeśli wystąpi błąd:</span><span class="sxs-lookup"><span data-stu-id="4fa0b-141">If you get an error:</span></span>

> <span data-ttu-id="4fa0b-142">Nie znaleziono pliku wykonywalnego zgodnego z poleceniem dotnet-Migrowanie</span><span class="sxs-lookup"><span data-stu-id="4fa0b-142">No executable found matching command dotnet-migrate</span></span>

<span data-ttu-id="4fa0b-143">Uruchom `dotnet --version`, aby zobaczyć, której wersji używasz.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-143">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="4fa0b-144">[`dotnet migrate`](../tools/dotnet-migrate.md) został wprowadzony w zestaw .NET Core SDK 1.0.0 i usunięty w wersji 3.0.100.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-144">[`dotnet migrate`](../tools/dotnet-migrate.md) was introduced in .NET Core SDK 1.0.0 and removed in version 3.0.100.</span></span>
<span data-ttu-id="4fa0b-145">Ten błąd występuje, jeśli masz plik *Global. JSON* w bieżącym lub nadrzędnym katalogu, a `sdk` wersja, którą określisz, jest spoza tego zakresu.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-145">You'll get this error if you have a *global.json* file in the current or parent directory, and the `sdk` version it specifies is outside this range.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="4fa0b-146">Migracja z środowiska DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="4fa0b-146">Migration from DNX to csproj</span></span>

<span data-ttu-id="4fa0b-147">Jeśli nadal używasz programu środowiska DNX do programowania w środowisku .NET Core, proces migracji powinien odbywać się w dwóch etapach:</span><span class="sxs-lookup"><span data-stu-id="4fa0b-147">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="4fa0b-148">Użyj [istniejących wskazówek dotyczących migracji środowiska DNX](from-dnx.md) , aby przeprowadzić migrację z środowiska DNX do interfejsu wiersza polecenia z włączonym kodem JSON.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-148">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="4fa0b-149">Postępuj zgodnie z instrukcjami z poprzedniej sekcji, aby przeprowadzić migrację z pliku *Project. JSON* do pliku *. csproj*.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-149">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>  

> [!NOTE]
> <span data-ttu-id="4fa0b-150">ŚRODOWISKA DNX jest oficjalnie przestarzałe w wersji zapoznawczej 1 interfejs wiersza polecenia platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-150">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="4fa0b-151">Migracja z wcześniejszych formatów programu .NET Core csproj do wersji RTM csproj</span><span class="sxs-lookup"><span data-stu-id="4fa0b-151">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="4fa0b-152">Format programu .NET Core csproj został zmieniony i rozwijający się za pomocą każdej nowej wersji wstępnej narzędzi.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-152">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="4fa0b-153">Nie ma narzędzia, które przeprowadzi migrację pliku projektu z wcześniejszych wersji csproj do najnowszej, więc musisz ręcznie edytować plik projektu.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-153">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="4fa0b-154">Rzeczywiste kroki zależą od wersji migrowanego pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-154">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="4fa0b-155">Poniżej znajdują się wskazówki, które należy wziąć pod uwagę w zależności od zmian, które wystąpiły między wersjami:</span><span class="sxs-lookup"><span data-stu-id="4fa0b-155">The following is some guidance to consider based on the changes that happened between versions:</span></span>

- <span data-ttu-id="4fa0b-156">Usuń właściwość wersja narzędzi z elementu `<Project>`, jeśli istnieje.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-156">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
- <span data-ttu-id="4fa0b-157">Usuń przestrzeń nazw XML (`xmlns`) z elementu `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-157">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
- <span data-ttu-id="4fa0b-158">Jeśli nie istnieje, Dodaj atrybut `Sdk` do elementu `<Project>` i ustaw go na `Microsoft.NET.Sdk` lub `Microsoft.NET.Sdk.Web`.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-158">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="4fa0b-159">Ten atrybut określa, że projekt używa zestawu SDK, który ma być używany.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-159">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="4fa0b-160">`Microsoft.NET.Sdk.Web` jest używany dla aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-160">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
- <span data-ttu-id="4fa0b-161">Usuń instrukcje `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` i `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` z góry i u dołu projektu.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-161">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="4fa0b-162">Te instrukcje importu są implikowane przez zestaw SDK, więc nie ma potrzeby, aby były one w projekcie.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-162">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
- <span data-ttu-id="4fa0b-163">Jeśli masz `Microsoft.NETCore.App` lub `NETStandard.Library` `<PackageReference>` elementy w projekcie, usuń je.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-163">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="4fa0b-164">Te odwołania do pakietów są [implikowane przez zestaw SDK](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="4fa0b-164">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
- <span data-ttu-id="4fa0b-165">Usuń element `<PackageReference>` `Microsoft.NET.Sdk`, jeśli istnieje.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-165">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="4fa0b-166">Odwołanie do zestawu SDK znajduje się w atrybucie `Sdk` elementu `<Project>`.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-166">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
- <span data-ttu-id="4fa0b-167">Usuń [elementy globalne](https://en.wikipedia.org/wiki/Glob_(programming)) , które są [implikowane przez zestaw SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span><span class="sxs-lookup"><span data-stu-id="4fa0b-167">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span></span> <span data-ttu-id="4fa0b-168">Pozostawienie tych elementy globalne w projekcie spowoduje wystąpienie błędu podczas kompilacji, ponieważ elementy kompilacji zostaną zduplikowane.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-168">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="4fa0b-169">Po wykonaniu tych kroków projekt powinien być w pełni zgodny z formatem CSPROJ RTM platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-169">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="4fa0b-170">Aby zapoznać się z przykładami przed i po migracji ze starego formatu csproj do nowego, zobacz artykuł [Aktualizacja programu Visual Studio 2017 RC — udoskonalenia narzędzi dla programu .NET Core](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) w blogu platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="4fa0b-170">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="4fa0b-171">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="4fa0b-171">See also</span></span>

- [<span data-ttu-id="4fa0b-172">Przenoszenie, migrowanie i uaktualnianie projektów programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="4fa0b-172">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)
