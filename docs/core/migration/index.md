---
title: Migracja programu .NET Core z projektu.json
description: Dowiedz się, jak przeprowadzić migrację starszego projektu programu .NET Core przy użyciu projektu project.json
ms.date: 07/19/2017
ms.openlocfilehash: 8a9dc05c82fd5476a70ee36a294a287abbfb68c4
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/15/2020
ms.locfileid: "77450690"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="16489-103">Migrowanie projektów programu .NET Core z projektu.json</span><span class="sxs-lookup"><span data-stu-id="16489-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="16489-104">Ten dokument obejmuje następujące trzy scenariusze migracji dla projektów .NET Core:</span><span class="sxs-lookup"><span data-stu-id="16489-104">This document covers the following three migration scenarios for .NET Core projects:</span></span>

1. [<span data-ttu-id="16489-105">Migracja z prawidłowego najnowszego schematu *project.json* do *csproj*</span><span class="sxs-lookup"><span data-stu-id="16489-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="16489-106">Migracja z DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="16489-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="16489-107">Migracja z RC3 i poprzednich projektów csproj .NET Core do formatu końcowego</span><span class="sxs-lookup"><span data-stu-id="16489-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="16489-108">Ten dokument ma zastosowanie tylko do starszych projektów .NET Core, które używają project.json.</span><span class="sxs-lookup"><span data-stu-id="16489-108">This document is only applicable to older .NET Core projects that use project.json.</span></span> <span data-ttu-id="16489-109">Nie ma zastosowania do migracji z .NET Framework do .NET Core.</span><span class="sxs-lookup"><span data-stu-id="16489-109">It does not apply to migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="16489-110">Migracja z project.json do csproj</span><span class="sxs-lookup"><span data-stu-id="16489-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="16489-111">Migracja z *project.json* do *.csproj* można wykonać za pomocą jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="16489-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="16489-112">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16489-112">Visual Studio</span></span>](#visual-studio)
- [<span data-ttu-id="16489-113">narzędzie wiersza polecenia dotnet</span><span class="sxs-lookup"><span data-stu-id="16489-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="16489-114">Obie metody używają tego samego aparatu podstawowego do migracji projektów, więc wyniki będą takie same dla obu.</span><span class="sxs-lookup"><span data-stu-id="16489-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="16489-115">W większości przypadków przy użyciu jednego z tych dwóch sposobów migracji *project.json* do *csproj* jest jedyną rzeczą, która jest potrzebna i nie jest konieczna dalsza ręczna edycja pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="16489-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed, and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="16489-116">Wynikowy plik *csproj* będzie miał taką samą nazwę jak nazwa katalogu zawierającego.</span><span class="sxs-lookup"><span data-stu-id="16489-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio"></a><span data-ttu-id="16489-117">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16489-117">Visual Studio</span></span>

<span data-ttu-id="16489-118">Po otwarciu pliku *xproj* lub pliku rozwiązania odwoływanego do plików *xproj* w programie Visual Studio 2017 lub Visual Studio 2019 w wersji 16.2 i wcześniejszych zostanie wyświetlone okno dialogowe **uaktualniania jednokierunkowego.**</span><span class="sxs-lookup"><span data-stu-id="16489-118">When you open an *.xproj* file or a solution file that references *.xproj* files in Visual Studio 2017 or Visual Studio 2019 version 16.2 and earlier, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="16489-119">W oknie dialogowym są wyświetlane projekty, które mają zostać poddane migracji.</span><span class="sxs-lookup"><span data-stu-id="16489-119">The dialog displays the projects to be migrated.</span></span> <span data-ttu-id="16489-120">Jeśli otworzysz plik rozwiązania, zostaną wyświetlone wszystkie projekty określone w pliku rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="16489-120">If you open a solution file, all the projects specified in the solution file are listed.</span></span> <span data-ttu-id="16489-121">Przejrzyj listę projektów do migracji i wybierz **przycisk OK**.</span><span class="sxs-lookup"><span data-stu-id="16489-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Okno dialogowe uaktualniania jednokierunkowego z listą projektów do migracji](media/one-way-upgrade.jpg)

<span data-ttu-id="16489-123">Program Visual Studio automatycznie migruje wybrane projekty.</span><span class="sxs-lookup"><span data-stu-id="16489-123">Visual Studio migrates the selected projects automatically.</span></span> <span data-ttu-id="16489-124">Podczas migracji rozwiązania, jeśli nie wybierzesz wszystkich projektów, zostanie wyświetlone to samo okno dialogowe z prośbą o uaktualnienie pozostałych projektów z tego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="16489-124">When migrating a solution, if you don't choose all projects, the same dialog appears asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="16489-125">Po migracji projektu można wyświetlić i zmodyfikować jego zawartość, klikając prawym przyciskiem myszy projekt w oknie **Eksploratora rozwiązań** i wybierając **pozycję Edycja \<nazwy projektu>.csproj**.</span><span class="sxs-lookup"><span data-stu-id="16489-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="16489-126">Pliki, które zostały poddane migracji (*project.json*, *global.json*, *xproj*i plik rozwiązania) są przenoszone do folderu *Kopia zapasowa.*</span><span class="sxs-lookup"><span data-stu-id="16489-126">Files that were migrated (*project.json*, *global.json*, *.xproj*, and solution file) are moved to a *Backup* folder.</span></span> <span data-ttu-id="16489-127">Zmigrowany plik rozwiązania zostanie uaktualniony do programu Visual Studio 2017 lub Visual Studio 2019 i nie będzie można otworzyć tego pliku rozwiązania w programie Visual Studio 2015 lub wcześniejszych wersjach.</span><span class="sxs-lookup"><span data-stu-id="16489-127">The migrated solution file is upgraded to Visual Studio 2017 or Visual Studio 2019 and you won't be able to open that solution file in Visual Studio 2015 or earlier versions.</span></span> <span data-ttu-id="16489-128">Plik o nazwie *UpgradeLog.htm* zawierający raport migracji jest również zapisywany i otwierany automatycznie.</span><span class="sxs-lookup"><span data-stu-id="16489-128">A file named *UpgradeLog.htm* that contains a migration report is also saved and opened automatically.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="16489-129">W programie Visual Studio 2019 w wersji 16.3 i nowszych nie można załadować ani przeprowadzić migracji pliku *xproj.*</span><span class="sxs-lookup"><span data-stu-id="16489-129">In Visual Studio 2019 version 16.3 and later, you cannot load or migrate an *.xproj* file.</span></span> <span data-ttu-id="16489-130">Ponadto program Visual Studio 2015 nie zapewnia możliwości migracji pliku *xproj.*</span><span class="sxs-lookup"><span data-stu-id="16489-130">Additionally, Visual Studio 2015 doesn't provide the ability to migrate an *.xproj* file.</span></span> <span data-ttu-id="16489-131">Jeśli używasz jednej z tych wersji programu Visual Studio, zainstaluj odpowiednią wersję programu Visual Studio lub użyj narzędzia do migracji wiersza polecenia opisanego dalej.</span><span class="sxs-lookup"><span data-stu-id="16489-131">If you're using one of these Visual Studio versions, either install a suitable version of Visual Studio, or use the command line migration tool that's described next.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="16489-132">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="16489-132">dotnet migrate</span></span>

<span data-ttu-id="16489-133">W scenariuszu wiersza polecenia można [`dotnet migrate`](../tools/dotnet-migrate.md) użyć polecenia.</span><span class="sxs-lookup"><span data-stu-id="16489-133">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="16489-134">Migruje projekt, rozwiązanie lub zestaw folderów w tej kolejności, w zależności od tego, które z nich zostały znalezione.</span><span class="sxs-lookup"><span data-stu-id="16489-134">It migrates a project, a solution, or a set of folders in that order, depending on which ones were found.</span></span> <span data-ttu-id="16489-135">Podczas migracji projektu projekt i wszystkie jego zależności są migrowane.</span><span class="sxs-lookup"><span data-stu-id="16489-135">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="16489-136">Pliki, które zostały poddane migracji (*project.json*, *global.json*i *.xproj*) są przenoszone do folderu *kopii zapasowej.*</span><span class="sxs-lookup"><span data-stu-id="16489-136">Files that were migrated (*project.json*, *global.json*, and *.xproj*) are moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="16489-137">Jeśli używasz kodu programu Visual `dotnet migrate` Studio, polecenie nie modyfikuje plików specyficznych dla kodu programu Visual Studio, takich jak *tasks.json*.</span><span class="sxs-lookup"><span data-stu-id="16489-137">If you are using Visual Studio Code, the `dotnet migrate` command does not modify Visual Studio Code-specific files such as *tasks.json*.</span></span> <span data-ttu-id="16489-138">Pliki te należy zmienić ręcznie.</span><span class="sxs-lookup"><span data-stu-id="16489-138">These files need to be changed manually.</span></span>
> <span data-ttu-id="16489-139">Jest to również prawdą, jeśli używasz edytora lub zintegrowanego środowiska programistycznego (IDE) innych niż Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="16489-139">This is also true if you are using an editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="16489-140">Zobacz [Mapowanie między project.json i csproj właściwości](../tools/project-json-to-csproj.md) dla porównania *formatów project.json* i *.csproj.*</span><span class="sxs-lookup"><span data-stu-id="16489-140">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of *project.json* and *.csproj* formats.</span></span>

<span data-ttu-id="16489-141">Jeśli pojawi się błąd:</span><span class="sxs-lookup"><span data-stu-id="16489-141">If you get an error:</span></span>

> <span data-ttu-id="16489-142">Nie znaleziono pliku wykonywalnego pasującego do polecenia dotnet-migrate</span><span class="sxs-lookup"><span data-stu-id="16489-142">No executable found matching command dotnet-migrate</span></span>

<span data-ttu-id="16489-143">Uruchom, `dotnet --version` aby zobaczyć, której wersji używasz.</span><span class="sxs-lookup"><span data-stu-id="16489-143">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="16489-144">[`dotnet migrate`](../tools/dotnet-migrate.md)został wprowadzony w .NET Core SDK 1.0.0 i usunięty w wersji 3.0.100.</span><span class="sxs-lookup"><span data-stu-id="16489-144">[`dotnet migrate`](../tools/dotnet-migrate.md) was introduced in .NET Core SDK 1.0.0 and removed in version 3.0.100.</span></span>
<span data-ttu-id="16489-145">Ten błąd zostanie uisany, jeśli w bieżącym lub nadrzędnym katalogu `sdk` znajduje się plik *global.json,* a określona przez niego wersja znajduje się poza tym zakresem.</span><span class="sxs-lookup"><span data-stu-id="16489-145">You'll get this error if you have a *global.json* file in the current or parent directory, and the `sdk` version it specifies is outside this range.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="16489-146">Migracja z DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="16489-146">Migration from DNX to csproj</span></span>

<span data-ttu-id="16489-147">Jeśli nadal używasz DNX dla rozwoju .NET Core, proces migracji powinien odbywać się w dwóch etapach:</span><span class="sxs-lookup"><span data-stu-id="16489-147">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="16489-148">Użyj [istniejących wskazówek migracji DNX](from-dnx.md) do migracji z DNX do projektu json włączone CLI.</span><span class="sxs-lookup"><span data-stu-id="16489-148">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="16489-149">Wykonaj kroki z poprzedniej sekcji, aby przeprowadzić migrację z *programu project.json* do *pliku .csproj*.</span><span class="sxs-lookup"><span data-stu-id="16489-149">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>

> [!NOTE]
> <span data-ttu-id="16489-150">DNX został oficjalnie przestarzały podczas wersji zapoznawczej 1.NET Core CLI.</span><span class="sxs-lookup"><span data-stu-id="16489-150">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="16489-151">Migracja z wcześniejszych formatów csproj csproj .NET Core do RTM csproj</span><span class="sxs-lookup"><span data-stu-id="16489-151">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="16489-152">Format csproj .NET Core zmienia ł się wraz z każdą nową wersją przedpremierową oprzyrządowania.</span><span class="sxs-lookup"><span data-stu-id="16489-152">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="16489-153">Nie ma narzędzia, które będzie migrować plik projektu z wcześniejszych wersji csproj do najnowszych, więc trzeba ręcznie edytować plik projektu.</span><span class="sxs-lookup"><span data-stu-id="16489-153">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="16489-154">Rzeczywiste kroki zależą od wersji pliku projektu, który jest migrowana.</span><span class="sxs-lookup"><span data-stu-id="16489-154">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="16489-155">Poniżej przedstawiono kilka wskazówek, które należy wziąć pod uwagę na podstawie zmian, które miały miejsce między wersjami:</span><span class="sxs-lookup"><span data-stu-id="16489-155">The following is some guidance to consider based on the changes that happened between versions:</span></span>

- <span data-ttu-id="16489-156">Usuń właściwość version tools `<Project>` z elementu, jeśli istnieje.</span><span class="sxs-lookup"><span data-stu-id="16489-156">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
- <span data-ttu-id="16489-157">Usuń obszar nazw XML`xmlns`( `<Project>` ) z elementu.</span><span class="sxs-lookup"><span data-stu-id="16489-157">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
- <span data-ttu-id="16489-158">Jeśli nie istnieje, dodaj `Sdk` atrybut do `<Project>` elementu i `Microsoft.NET.Sdk` ustaw `Microsoft.NET.Sdk.Web`go na lub .</span><span class="sxs-lookup"><span data-stu-id="16489-158">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="16489-159">Ten atrybut określa, że projekt używa sdk do użycia.</span><span class="sxs-lookup"><span data-stu-id="16489-159">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="16489-160">`Microsoft.NET.Sdk.Web`jest używany w aplikacjach internetowych.</span><span class="sxs-lookup"><span data-stu-id="16489-160">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
- <span data-ttu-id="16489-161">Usuń `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` instrukcje `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` i z góry i u dołu projektu.</span><span class="sxs-lookup"><span data-stu-id="16489-161">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="16489-162">Te instrukcje importu są implikowane przez zestaw SDK, więc nie ma potrzeby, aby znajdowały się w projekcie.</span><span class="sxs-lookup"><span data-stu-id="16489-162">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
- <span data-ttu-id="16489-163">Jeśli masz `Microsoft.NETCore.App` `NETStandard.Library` `<PackageReference>` lub elementy w projekcie, należy je usunąć.</span><span class="sxs-lookup"><span data-stu-id="16489-163">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="16489-164">Te odwołania do pakietów są [implikowane przez zestaw SDK](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="16489-164">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
- <span data-ttu-id="16489-165">`Microsoft.NET.Sdk` `<PackageReference>` Usuń element, jeśli istnieje.</span><span class="sxs-lookup"><span data-stu-id="16489-165">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="16489-166">Odwołanie sdk jest `Sdk` za pośrednictwem atrybutu na `<Project>` element.</span><span class="sxs-lookup"><span data-stu-id="16489-166">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
- <span data-ttu-id="16489-167">Usuń [globs,](https://en.wikipedia.org/wiki/Glob_(programming)) które są [implikowane przez zestaw SDK](../project-sdk/overview.md#default-compilation-includes).</span><span class="sxs-lookup"><span data-stu-id="16489-167">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../project-sdk/overview.md#default-compilation-includes).</span></span> <span data-ttu-id="16489-168">Pozostawienie tych globs w projekcie spowoduje błąd na kompilacji, ponieważ elementy kompilacji zostaną zduplikowane.</span><span class="sxs-lookup"><span data-stu-id="16489-168">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="16489-169">Po tych krokach projekt powinien być w pełni zgodny z formatem CSPROJ RTM .NET Core.</span><span class="sxs-lookup"><span data-stu-id="16489-169">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="16489-170">Przykłady przed i po migracji ze starego formatu csproj do nowego, zobacz [aktualizowanie visual studio 2017 RC — .NET Core Tooling ulepszenia](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) artykułu w blogu .NET.</span><span class="sxs-lookup"><span data-stu-id="16489-170">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="16489-171">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="16489-171">See also</span></span>

- [<span data-ttu-id="16489-172">Przenoszenie, migrowanie i uaktualnianie projektów programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="16489-172">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)
