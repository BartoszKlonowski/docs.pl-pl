---
title: Migracja platformy .NET Core z pliku Project. JSON
description: Dowiedz się, jak przeprowadzić migrację starszego projektu .NET Core przy użyciu pliku Project. JSON
ms.date: 07/19/2017
ms.custom: seodec18
ms.openlocfilehash: 6334f06a998054cfaf766654dda59d87f5d23ed8
ms.sourcegitcommit: 6f28b709592503d27077b16fff2e2eacca569992
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/28/2019
ms.locfileid: "70105307"
---
# <a name="migrating-net-core-projects-from-projectjson"></a><span data-ttu-id="c3087-103">Migrowanie projektów .NET Core z pliku Project. JSON</span><span class="sxs-lookup"><span data-stu-id="c3087-103">Migrating .NET Core projects from project.json</span></span>

<span data-ttu-id="c3087-104">W tym dokumencie omówiono scenariusze migracji dla projektów .NET Core i przechodzą następujące trzy scenariusze migracji:</span><span class="sxs-lookup"><span data-stu-id="c3087-104">This document will cover migration scenarios for .NET Core projects and will go over the following three migration scenarios:</span></span>

1. [<span data-ttu-id="c3087-105">Migracja z prawidłowego najnowszego schematu pliku *Project. JSON* do *csproj*</span><span class="sxs-lookup"><span data-stu-id="c3087-105">Migration from a valid latest schema of *project.json* to *csproj*</span></span>](#migration-from-projectjson-to-csproj)
2. [<span data-ttu-id="c3087-106">Migracja z środowiska DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="c3087-106">Migration from DNX to csproj</span></span>](#migration-from-dnx-to-csproj)
3. [<span data-ttu-id="c3087-107">Migracja z RC3 i poprzednich projektów .NET Core csproj do końcowego formatu</span><span class="sxs-lookup"><span data-stu-id="c3087-107">Migration from RC3 and previous .NET Core csproj projects to the final format</span></span>](#migration-from-earlier-net-core-csproj-formats-to-rtm-csproj)

<span data-ttu-id="c3087-108">Ten dokument ma zastosowanie tylko do starszych projektów programu .NET Core, które nadal używają pliku Project. JSON.</span><span class="sxs-lookup"><span data-stu-id="c3087-108">This document is only applicable to older .NET Core projects that still use project.json.</span></span> <span data-ttu-id="c3087-109">Nie dotyczy migrowania z .NET Framework do programu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c3087-109">It is not applicable for migrating from .NET Framework to .NET Core.</span></span>

## <a name="migration-from-projectjson-to-csproj"></a><span data-ttu-id="c3087-110">Migracja z pliku Project. JSON do csproj</span><span class="sxs-lookup"><span data-stu-id="c3087-110">Migration from project.json to csproj</span></span>

<span data-ttu-id="c3087-111">Migracja z pliku *Project. JSON* do *. csproj* można wykonać przy użyciu jednej z następujących metod:</span><span class="sxs-lookup"><span data-stu-id="c3087-111">Migration from *project.json* to *.csproj* can be done using one of the following methods:</span></span>

- [<span data-ttu-id="c3087-112">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="c3087-112">Visual Studio 2017</span></span>](#visual-studio-2017)
- [<span data-ttu-id="c3087-113">Narzędzie wiersza polecenia migracji dotnet</span><span class="sxs-lookup"><span data-stu-id="c3087-113">dotnet migrate command-line tool</span></span>](#dotnet-migrate)

<span data-ttu-id="c3087-114">Obie metody używają tego samego aparatu podstawowego do migrowania projektów, dlatego wyniki będą takie same dla obu tych metod.</span><span class="sxs-lookup"><span data-stu-id="c3087-114">Both methods use the same underlying engine to migrate the projects, so the results will be the same for both.</span></span> <span data-ttu-id="c3087-115">W większości przypadków użycie jednego z tych dwóch metod migracji pliku *Project. JSON* do *csproj* jest jedyną potrzebną operacją i nie jest konieczne ręczne edytowanie plików projektu.</span><span class="sxs-lookup"><span data-stu-id="c3087-115">In most cases, using one of these two ways to migrate the *project.json* to *csproj* is the only thing that is needed and no further manual editing of the project file is necessary.</span></span> <span data-ttu-id="c3087-116">Utworzony plik *csproj* będzie taki sam jak nazwa katalogu zawierającego.</span><span class="sxs-lookup"><span data-stu-id="c3087-116">The resulting *.csproj* file will be named the same as the containing directory name.</span></span>

### <a name="visual-studio-2017"></a><span data-ttu-id="c3087-117">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="c3087-117">Visual Studio 2017</span></span>

<span data-ttu-id="c3087-118">Po otwarciu pliku *. xproj* lub pliku rozwiązania, który odwołuje się do plików *. xproj* zostanie wyświetlone okno dialogowe **uaktualnianie jednokierunkowe** .</span><span class="sxs-lookup"><span data-stu-id="c3087-118">When you open a *.xproj* file or a solution file which references *.xproj* files, the **One-way upgrade** dialog appears.</span></span> <span data-ttu-id="c3087-119">W oknie dialogowym zostaną wyświetlone projekty do migracji.</span><span class="sxs-lookup"><span data-stu-id="c3087-119">The dialog displays the projects to be migrated.</span></span>
<span data-ttu-id="c3087-120">Jeśli otworzysz plik rozwiązania, zostaną wyświetlone wszystkie projekty określone w pliku rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c3087-120">If you open a solution file, all the projects specified in the solution file will be listed.</span></span> <span data-ttu-id="c3087-121">Przejrzyj listę projektów do migracji i wybierz **przycisk OK**.</span><span class="sxs-lookup"><span data-stu-id="c3087-121">Review the list of projects to be migrated and select **OK**.</span></span>

![Jednokierunkowe okno dialogowe uaktualniania zawierające listę projektów do migracji](media/one-way-upgrade.jpg)

<span data-ttu-id="c3087-123">Program Visual Studio automatycznie przeprowadzi migrację wybranych projektów.</span><span class="sxs-lookup"><span data-stu-id="c3087-123">Visual Studio will migrate the projects chosen automatically.</span></span> <span data-ttu-id="c3087-124">W przypadku migrowania rozwiązania, jeśli nie wybrano wszystkich projektów, zostanie wyświetlone okno dialogowe z prośbą o uaktualnienie pozostałych projektów z tego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="c3087-124">When migrating a solution, if you don't choose all projects, the same dialog will appear asking you to upgrade the remaining projects from that solution.</span></span> <span data-ttu-id="c3087-125">Po migracji projektu można zobaczyć i zmodyfikować jego zawartość, klikając prawym przyciskiem myszy projekt w oknie **Eksplorator rozwiązań** i wybierając polecenie **Edytuj \<nazwę projektu >. csproj**.</span><span class="sxs-lookup"><span data-stu-id="c3087-125">After the project is migrated, you can see and modify its contents by right-clicking the project in the **Solution Explorer** window and selecting **Edit \<project name>.csproj**.</span></span>

<span data-ttu-id="c3087-126">Pliki migrowane (*Project. JSON*, *Global. JSON*, *. xproj* i plik rozwiązania) zostaną przeniesione do folderu *kopii zapasowej* .</span><span class="sxs-lookup"><span data-stu-id="c3087-126">Files that were migrated (*project.json*, *global.json*, *.xproj* and solution file) will be moved to a *Backup* folder.</span></span> <span data-ttu-id="c3087-127">Migrowany plik rozwiązania zostanie uaktualniony do wersji Visual Studio 2017 i nie będzie można otworzyć tego pliku rozwiązania we wcześniejszych wersjach programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c3087-127">The solution file that is migrated will be upgraded to Visual Studio 2017 and you won't be able to open that solution file in previous versions of Visual Studio.</span></span>
<span data-ttu-id="c3087-128">Plik o nazwie *UpgradeLog. htm* jest również zapisywany i automatycznie otwierany, który zawiera raport migracji.</span><span class="sxs-lookup"><span data-stu-id="c3087-128">A file named *UpgradeLog.htm* is also saved and automatically opened that contains a migration report.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c3087-129">Nowe narzędzia nie są dostępne w programie Visual Studio 2015, dlatego nie można migrować projektów przy użyciu tej wersji programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c3087-129">The new tooling is not available in Visual Studio 2015, so you cannot migrate your projects using that version of Visual Studio.</span></span>

### <a name="dotnet-migrate"></a><span data-ttu-id="c3087-130">dotnet migrate</span><span class="sxs-lookup"><span data-stu-id="c3087-130">dotnet migrate</span></span>

<span data-ttu-id="c3087-131">W scenariuszu wiersza polecenia można użyć [`dotnet migrate`](../tools/dotnet-migrate.md) polecenia.</span><span class="sxs-lookup"><span data-stu-id="c3087-131">In the command-line scenario, you can use the [`dotnet migrate`](../tools/dotnet-migrate.md) command.</span></span> <span data-ttu-id="c3087-132">Przeprowadzi migrację projektu, rozwiązania lub zestawu folderów w tej kolejności, w zależności od tego, które zostały znalezione.</span><span class="sxs-lookup"><span data-stu-id="c3087-132">It will migrate a project, a solution or a set of folders in that order, depending on which ones were found.</span></span>
<span data-ttu-id="c3087-133">Podczas migrowania projektu, projekt i wszystkie jego zależności są migrowane.</span><span class="sxs-lookup"><span data-stu-id="c3087-133">When you migrate a project, the project and all its dependencies are migrated.</span></span>

<span data-ttu-id="c3087-134">Pliki migrowane (*Project. JSON*, *Global. JSON* i *. xproj*) zostaną przeniesione do folderu *kopii zapasowej* .</span><span class="sxs-lookup"><span data-stu-id="c3087-134">Files that were migrated (*project.json*, *global.json* and *.xproj*) will be moved to a *backup* folder.</span></span>

> [!NOTE]
> <span data-ttu-id="c3087-135">Jeśli używasz Visual Studio Code, `dotnet migrate` polecenie nie zmodyfikuje plików specyficznych dla Visual Studio Code, takich jak. `tasks.json`</span><span class="sxs-lookup"><span data-stu-id="c3087-135">If you are using Visual Studio Code, the `dotnet migrate` command will not modify Visual Studio Code-specific files such as `tasks.json`.</span></span> <span data-ttu-id="c3087-136">Te pliki należy zmienić ręcznie.</span><span class="sxs-lookup"><span data-stu-id="c3087-136">These files need to be changed manually.</span></span>
> <span data-ttu-id="c3087-137">Jest to również prawdziwe, jeśli używasz programu Project Ryder lub dowolnego edytora lub zintegrowanego środowiska programistycznego (IDE) innego niż program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c3087-137">This is also true if you are using Project Ryder or any editor or Integrated Development Environment (IDE) other than Visual Studio.</span></span>

<span data-ttu-id="c3087-138">Zobacz [Mapowanie między właściwościami Project. JSON i csproj](../tools/project-json-to-csproj.md) , aby porównać formaty Project. JSON i csproj.</span><span class="sxs-lookup"><span data-stu-id="c3087-138">See [A mapping between project.json and csproj properties](../tools/project-json-to-csproj.md) for a comparison of project.json and csproj formats.</span></span>

### <a name="common-issues"></a><span data-ttu-id="c3087-139">Typowe problemy</span><span class="sxs-lookup"><span data-stu-id="c3087-139">Common issues</span></span>

- <span data-ttu-id="c3087-140">Jeśli wystąpi błąd: "Nie znaleziono pliku wykonywalnego zgodnego z poleceniem dotnet-Migrowanie":</span><span class="sxs-lookup"><span data-stu-id="c3087-140">If you get an error: "No executable found matching command dotnet-migrate":</span></span>

<span data-ttu-id="c3087-141">Uruchom `dotnet --version` , aby zobaczyć, której wersji używasz.</span><span class="sxs-lookup"><span data-stu-id="c3087-141">Run `dotnet --version` to see which version you are using.</span></span> <span data-ttu-id="c3087-142">[`dotnet migrate`](../tools/dotnet-migrate.md)wymaga interfejs wiersza polecenia platformy .NET Core RC3 lub wyższego.</span><span class="sxs-lookup"><span data-stu-id="c3087-142">[`dotnet migrate`](../tools/dotnet-migrate.md) requires .NET Core CLI RC3 or higher.</span></span>
<span data-ttu-id="c3087-143">Ten błąd występuje, jeśli masz plik *Global. JSON* w bieżącym lub nadrzędnym katalogu, a `sdk` wersja jest ustawiona na starszą wersję.</span><span class="sxs-lookup"><span data-stu-id="c3087-143">You’ll get this error if you have a *global.json* file in the current or parent directory and the `sdk` version is set to an older version.</span></span>

## <a name="migration-from-dnx-to-csproj"></a><span data-ttu-id="c3087-144">Migracja z środowiska DNX do csproj</span><span class="sxs-lookup"><span data-stu-id="c3087-144">Migration from DNX to csproj</span></span>

<span data-ttu-id="c3087-145">Jeśli nadal używasz programu środowiska DNX do programowania w środowisku .NET Core, proces migracji powinien odbywać się w dwóch etapach:</span><span class="sxs-lookup"><span data-stu-id="c3087-145">If you are still using DNX for .NET Core development, your migration process should be done in two stages:</span></span>

1. <span data-ttu-id="c3087-146">Użyj [istniejących wskazówek dotyczących migracji środowiska DNX](from-dnx.md) , aby przeprowadzić migrację z środowiska DNX do interfejsu wiersza polecenia z włączonym kodem JSON.</span><span class="sxs-lookup"><span data-stu-id="c3087-146">Use the [existing DNX migration guidance](from-dnx.md) to migrate from DNX to project-json enabled CLI.</span></span>
2. <span data-ttu-id="c3087-147">Postępuj zgodnie z instrukcjami z poprzedniej sekcji, aby przeprowadzić migrację z pliku *Project. JSON* do pliku *. csproj*.</span><span class="sxs-lookup"><span data-stu-id="c3087-147">Follow the steps from the previous section to migrate from *project.json* to *.csproj*.</span></span>  

> [!NOTE]
> <span data-ttu-id="c3087-148">ŚRODOWISKA DNX jest oficjalnie przestarzałe w wersji zapoznawczej 1 interfejs wiersza polecenia platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c3087-148">DNX has become officially deprecated during the Preview 1 release of the .NET Core CLI.</span></span>

## <a name="migration-from-earlier-net-core-csproj-formats-to-rtm-csproj"></a><span data-ttu-id="c3087-149">Migracja z wcześniejszych formatów programu .NET Core csproj do wersji RTM csproj</span><span class="sxs-lookup"><span data-stu-id="c3087-149">Migration from earlier .NET Core csproj formats to RTM csproj</span></span>

<span data-ttu-id="c3087-150">Format programu .NET Core csproj został zmieniony i rozwijający się za pomocą każdej nowej wersji wstępnej narzędzi.</span><span class="sxs-lookup"><span data-stu-id="c3087-150">The .NET Core csproj format has been changing and evolving with each new pre-release version of the tooling.</span></span> <span data-ttu-id="c3087-151">Nie ma narzędzia, które przeprowadzi migrację pliku projektu z wcześniejszych wersji csproj do najnowszej, więc musisz ręcznie edytować plik projektu.</span><span class="sxs-lookup"><span data-stu-id="c3087-151">There is no tool that will migrate your project file from earlier versions of csproj to the latest, so you need to manually edit the project file.</span></span> <span data-ttu-id="c3087-152">Rzeczywiste kroki zależą od wersji migrowanego pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="c3087-152">The actual steps depend on the version of the project file you are migrating.</span></span> <span data-ttu-id="c3087-153">Poniżej znajdują się wskazówki, które należy wziąć pod uwagę w zależności od zmian, które wystąpiły między wersjami:</span><span class="sxs-lookup"><span data-stu-id="c3087-153">The following is some guidance to consider based on the changes that happened between versions:</span></span>

- <span data-ttu-id="c3087-154">Usuń właściwość wersja narzędzi z `<Project>` elementu, jeśli istnieje.</span><span class="sxs-lookup"><span data-stu-id="c3087-154">Remove the tools version property from the `<Project>` element, if it exists.</span></span>
- <span data-ttu-id="c3087-155">Usuń przestrzeń nazw XML (`xmlns`) `<Project>` z elementu.</span><span class="sxs-lookup"><span data-stu-id="c3087-155">Remove the XML namespace (`xmlns`) from the `<Project>` element.</span></span>
- <span data-ttu-id="c3087-156">Jeśli nie istnieje, `Sdk` Dodaj atrybut `<Project>` do elementu i ustaw go na `Microsoft.NET.Sdk` lub `Microsoft.NET.Sdk.Web`.</span><span class="sxs-lookup"><span data-stu-id="c3087-156">If it doesn't exist, add the `Sdk` attribute to the `<Project>` element and set it to `Microsoft.NET.Sdk` or `Microsoft.NET.Sdk.Web`.</span></span> <span data-ttu-id="c3087-157">Ten atrybut określa, że projekt używa zestawu SDK, który ma być używany.</span><span class="sxs-lookup"><span data-stu-id="c3087-157">This attribute specifies that the project uses the SDK to be used.</span></span> <span data-ttu-id="c3087-158">`Microsoft.NET.Sdk.Web`jest używany dla aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="c3087-158">`Microsoft.NET.Sdk.Web` is used for web apps.</span></span>
- <span data-ttu-id="c3087-159">Usuń instrukcje `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` i z góry i u dołu projektu. `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />`</span><span class="sxs-lookup"><span data-stu-id="c3087-159">Remove the `<Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" />` and `<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />` statements from the top and bottom of the project.</span></span> <span data-ttu-id="c3087-160">Te instrukcje importu są implikowane przez zestaw SDK, więc nie ma potrzeby, aby były one w projekcie.</span><span class="sxs-lookup"><span data-stu-id="c3087-160">These import statements are implied by the SDK, so there is no need for them to be in the project.</span></span>
- <span data-ttu-id="c3087-161">Jeśli masz `Microsoft.NETCore.App` lub `NETStandard.Library` elementywprojekcie,należyjeusunąć`<PackageReference>` .</span><span class="sxs-lookup"><span data-stu-id="c3087-161">If you have `Microsoft.NETCore.App` or `NETStandard.Library` `<PackageReference>` items in your project, you should remove them.</span></span> <span data-ttu-id="c3087-162">Te odwołania do pakietów są [implikowane przez zestaw SDK](https://aka.ms/sdkimplicitrefs).</span><span class="sxs-lookup"><span data-stu-id="c3087-162">These package references are [implied by the SDK](https://aka.ms/sdkimplicitrefs).</span></span>
- <span data-ttu-id="c3087-163">`Microsoft.NET.Sdk` Usuń`<PackageReference>` element, jeśli istnieje.</span><span class="sxs-lookup"><span data-stu-id="c3087-163">Remove the `Microsoft.NET.Sdk` `<PackageReference>` element, if it exists.</span></span> <span data-ttu-id="c3087-164">Odwołanie do zestawu SDK zawiera `Sdk` atrybut `<Project>` w elemencie.</span><span class="sxs-lookup"><span data-stu-id="c3087-164">The SDK reference comes through the `Sdk` attribute on the `<Project>` element.</span></span>
- <span data-ttu-id="c3087-165">Usuń [elementy globalne](https://en.wikipedia.org/wiki/Glob_(programming)) , które są [implikowane przez zestaw SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span><span class="sxs-lookup"><span data-stu-id="c3087-165">Remove the [globs](https://en.wikipedia.org/wiki/Glob_(programming)) that are [implied by the SDK](../tools/csproj.md#default-compilation-includes-in-net-core-projects).</span></span> <span data-ttu-id="c3087-166">Pozostawienie tych elementy globalne w projekcie spowoduje wystąpienie błędu podczas kompilacji, ponieważ elementy kompilacji zostaną zduplikowane.</span><span class="sxs-lookup"><span data-stu-id="c3087-166">Leaving these globs in your project will cause an error on build because compile items will be duplicated.</span></span>

<span data-ttu-id="c3087-167">Po wykonaniu tych kroków projekt powinien być w pełni zgodny z formatem CSPROJ RTM platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="c3087-167">After these steps your project should be fully compatible with the RTM .NET Core csproj format.</span></span>

<span data-ttu-id="c3087-168">Aby zapoznać się z przykładami przed i po migracji ze starego formatu csproj do nowego, zobacz artykuł [Aktualizacja programu Visual Studio 2017 RC — udoskonalenia narzędzi dla programu .NET Core](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) w blogu platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="c3087-168">For examples of before and after the migration from old csproj format to the new one, see the [Updating Visual Studio 2017 RC – .NET Core Tooling improvements](https://devblogs.microsoft.com/dotnet/updating-visual-studio-2017-rc-net-core-tooling-improvements/) article on the .NET blog.</span></span>

## <a name="see-also"></a><span data-ttu-id="c3087-169">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="c3087-169">See also</span></span>

- [<span data-ttu-id="c3087-170">Przenoszenie, migrowanie i uaktualnianie projektów programu Visual Studio</span><span class="sxs-lookup"><span data-stu-id="c3087-170">Port, Migrate, and Upgrade Visual Studio Projects</span></span>](/visualstudio/porting/port-migrate-and-upgrade-visual-studio-projects)
