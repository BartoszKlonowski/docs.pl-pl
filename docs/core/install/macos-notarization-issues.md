---
title: Praca z systemem macOS Catalina Notariacja
description: Jak obsługiwać problemy z notarialnie i certyfikatami z systemem macOS po zainstalowaniu programu .NET Core, SDK i aplikacji utworzonych przy golu .NET Core.
author: thraka
ms.author: adegeo
ms.date: 02/14/2020
ms.openlocfilehash: be39c1ea56699f84736a2b37bc958507b16e826b
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/14/2020
ms.locfileid: "79146752"
---
# <a name="macos-catalina-notarization-and-the-impact-on-net-core-downloads-and-projects"></a><span data-ttu-id="a9b09-103">Notarizacja catalina dla systemu macOS oraz wpływ na pobieranie i projekty programu .NET Core</span><span class="sxs-lookup"><span data-stu-id="a9b09-103">macOS Catalina Notarization and the impact on .NET Core downloads and projects</span></span>

<span data-ttu-id="a9b09-104">Począwszy od systemu macOS Catalina (wersja 10.15), całe oprogramowanie zbudowane po 1 czerwca 2019 r. i dystrybuowane z identyfikatorem dewelopera musi być notarialnie notarialnie.</span><span class="sxs-lookup"><span data-stu-id="a9b09-104">Beginning with macOS Catalina (version 10.15), all software built after June 1, 2019, and distributed with Developer ID, must be notarized.</span></span> <span data-ttu-id="a9b09-105">To wymaganie dotyczy programu .NET Core, .NET Core SDK i oprogramowania utworzonego za pomocą programu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a9b09-105">This requirement applies to the .NET Core runtime, .NET Core SDK, and software created with .NET Core.</span></span> <span data-ttu-id="a9b09-106">W tym artykule opisano typowe scenariusze, z którymi mogą wystąpić programy .NET Core i notarization systemu macOS.</span><span class="sxs-lookup"><span data-stu-id="a9b09-106">This article describes the common scenarios you may face with .NET Core and macOS notarization.</span></span>

## <a name="installing-net-core"></a><span data-ttu-id="a9b09-107">Instalowanie programu .NET Core</span><span class="sxs-lookup"><span data-stu-id="a9b09-107">Installing .NET Core</span></span>

<span data-ttu-id="a9b09-108">Instalatory .NET Core (zarówno w czasie wykonywania, jak i SDK) w wersjach 3.1, 3.0 i 2.1 zostały notarialnie notarialnie od lutego 18, 2020.</span><span class="sxs-lookup"><span data-stu-id="a9b09-108">The installers for .NET Core (both runtime and SDK) versions 3.1, 3.0, and 2.1, have been notarized since February 18, 2020.</span></span> <span data-ttu-id="a9b09-109">Wcześniej wydane wersje nie są notarialnie.</span><span class="sxs-lookup"><span data-stu-id="a9b09-109">Prior released versions aren't notarized.</span></span> <span data-ttu-id="a9b09-110">Można ręcznie zainstalować nienotarialnie wersję programu .NET Core, najpierw pobierając `sudo installer` instalator, a następnie używając polecenia.</span><span class="sxs-lookup"><span data-stu-id="a9b09-110">You can manually install a non-notarized version of .NET Core by first downloading the installer, and then using the `sudo installer` command.</span></span> <span data-ttu-id="a9b09-111">Aby uzyskać więcej informacji, zobacz [Pobieranie i ręczne instalowanie systemu macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span><span class="sxs-lookup"><span data-stu-id="a9b09-111">For more information, see [Download and manually install for macOS](sdk.md?pivots=os-macos#download-and-manually-install).</span></span>

<span data-ttu-id="a9b09-112">Począwszy od następujących wersji instalatorów .NET Core są notarialnie:</span><span class="sxs-lookup"><span data-stu-id="a9b09-112">Beginning with the following versions, the .NET Core installers are notarized:</span></span>

- <span data-ttu-id="a9b09-113">Środowisko uruchomieniowe platformy .NET Core</span><span class="sxs-lookup"><span data-stu-id="a9b09-113">.NET Core Runtime</span></span>
  - <span data-ttu-id="a9b09-114">2.1.16</span><span class="sxs-lookup"><span data-stu-id="a9b09-114">2.1.16</span></span>
  - <span data-ttu-id="a9b09-115">3.0.3</span><span class="sxs-lookup"><span data-stu-id="a9b09-115">3.0.3</span></span>
  - <span data-ttu-id="a9b09-116">3.1.2</span><span class="sxs-lookup"><span data-stu-id="a9b09-116">3.1.2</span></span>

- <span data-ttu-id="a9b09-117">Zestaw .NET Core SDK</span><span class="sxs-lookup"><span data-stu-id="a9b09-117">.NET Core SDK</span></span>
  - <span data-ttu-id="a9b09-118">2.1.512</span><span class="sxs-lookup"><span data-stu-id="a9b09-118">2.1.512</span></span>
  - <span data-ttu-id="a9b09-119">3.0.103</span><span class="sxs-lookup"><span data-stu-id="a9b09-119">3.0.103</span></span>
  - <span data-ttu-id="a9b09-120">3.1.102</span><span class="sxs-lookup"><span data-stu-id="a9b09-120">3.1.102</span></span>

## <a name="apphost-is-disabled-by-default"></a><span data-ttu-id="a9b09-121">appHost jest domyślnie wyłączony</span><span class="sxs-lookup"><span data-stu-id="a9b09-121">appHost is disabled by default</span></span>

<span data-ttu-id="a9b09-122">Domyślnie nienotaryzowane wersje .NET Core SDK 3.0 i powyżej produkują natywny plik wykonywalny Mach-O (znany jako **appHost)** po kompilacji projektu, opublikowaniu lub uruchomieniu.</span><span class="sxs-lookup"><span data-stu-id="a9b09-122">By default, non-notarized versions of the .NET Core SDK 3.0 and above produce a native Mach-O executable (known as the **appHost**) when your project compiles, publishes, or is run.</span></span> <span data-ttu-id="a9b09-123">Ten plik wykonywalny jest wygodnym sposobem uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a9b09-123">This executable is a convenient way to run your app.</span></span> <span data-ttu-id="a9b09-124">W przeciwnym razie aplikacja musi `dotnet <filename.dll>`zostać uruchomiona przez uruchomienie .</span><span class="sxs-lookup"><span data-stu-id="a9b09-124">Otherwise, your app must be started by running `dotnet <filename.dll>`.</span></span> <span data-ttu-id="a9b09-125">Gdy appHost jest włączona, `dotnet run` polecenie jest wywoływane w kontekście appHost.</span><span class="sxs-lookup"><span data-stu-id="a9b09-125">When the appHost is enabled, the `dotnet run` command is invoked in the context of the appHost.</span></span> <span data-ttu-id="a9b09-126">Aby uzyskać więcej informacji, zobacz [Kontekst aplikacjiHost](#context-of-the-apphost).</span><span class="sxs-lookup"><span data-stu-id="a9b09-126">For more information, see [Context of the appHost](#context-of-the-apphost).</span></span>

<span data-ttu-id="a9b09-127">Począwszy od notarialnie wersji .NET Core SDK 3.0 i powyżej, plik wykonywalny appHost nie jest generowany domyślnie.</span><span class="sxs-lookup"><span data-stu-id="a9b09-127">Starting with the notarized versions of the .NET Core SDK 3.0 and above, the appHost executable isn't generated by default.</span></span> <span data-ttu-id="a9b09-128">Możesz włączyć generowanie appHost [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) z ustawieniem logicznym w pliku projektu.</span><span class="sxs-lookup"><span data-stu-id="a9b09-128">You can turn on appHost generation with the [`UseAppHost`](../project-sdk/msbuild-props.md#useapphost) boolean setting in the project file.</span></span> <span data-ttu-id="a9b09-129">Można również przełączyć appHost z `-p:UseAppHost` parametrem w wierszu `dotnet` polecenia dla określonego polecenia, które uruchamiasz:</span><span class="sxs-lookup"><span data-stu-id="a9b09-129">You can also toggle the appHost with the `-p:UseAppHost` parameter on the command line for the specific `dotnet` command you run:</span></span>

- <span data-ttu-id="a9b09-130">Plik projektu</span><span class="sxs-lookup"><span data-stu-id="a9b09-130">Project file</span></span>

  ```xml
  <PropertyGroup>
    <UseAppHost>true</UseAppHost>
  </PropertyGroup>
  ```

- <span data-ttu-id="a9b09-131">Parametr wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="a9b09-131">Command-line parameter</span></span>

  ```dotnetcli
  dotnet run -p:UseAppHost=true
  ```

<span data-ttu-id="a9b09-132">AppHost jest zawsze tworzony podczas publikowania aplikacji [niezależne .](../deploying/index.md#publish-self-contained)</span><span class="sxs-lookup"><span data-stu-id="a9b09-132">An appHost is always created when you publish your app [self-contained](../deploying/index.md#publish-self-contained).</span></span>

<span data-ttu-id="a9b09-133">Aby uzyskać więcej `UseAppHost` informacji o tym ustawieniu, zobacz [WŁAŚCIWOŚCI MSBuild dla programu Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span><span class="sxs-lookup"><span data-stu-id="a9b09-133">For more information about the `UseAppHost` setting, see [MSBuild properties for Microsoft.NET.Sdk](../project-sdk/msbuild-props.md#useapphost).</span></span>

### <a name="context-of-the-apphost"></a><span data-ttu-id="a9b09-134">Kontekst aplikacjiHost</span><span class="sxs-lookup"><span data-stu-id="a9b09-134">Context of the appHost</span></span>

<span data-ttu-id="a9b09-135">Gdy appHost jest włączona w projekcie i `dotnet run` używasz polecenia do uruchamiania aplikacji, aplikacja jest wywoływana w kontekście appHost, `dotnet` a nie domyślnego hosta (domyślnym hostem jest polecenie).</span><span class="sxs-lookup"><span data-stu-id="a9b09-135">When the appHost is enabled in your project, and you use the `dotnet run` command to run your app, the app is invoked in the context of the appHost and not the default host (the default host is the `dotnet` command).</span></span> <span data-ttu-id="a9b09-136">Jeśli appHost jest wyłączony w projekcie, `dotnet run` polecenie uruchamia aplikację w kontekście hosta domyślnego.</span><span class="sxs-lookup"><span data-stu-id="a9b09-136">If the appHost is disabled in your project, the `dotnet run` command runs your app in the context of the default host.</span></span> <span data-ttu-id="a9b09-137">Nawet jeśli appHost jest wyłączony, publikowanie aplikacji jako niezależne generuje plik wykonywalny appHost, a użytkownicy używają tego pliku wykonywalnego do uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a9b09-137">Even if the appHost is disabled, publishing your app as self-contained generates an appHost executable, and users use that executable to run your app.</span></span> <span data-ttu-id="a9b09-138">Uruchamianie aplikacji `dotnet <filename.dll>` z wywołuje aplikację z domyślnym hostem, udostępnionym czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="a9b09-138">Running your app with `dotnet <filename.dll>` invokes the app with the default host, the shared runtime.</span></span>

<span data-ttu-id="a9b09-139">Gdy aplikacja korzystająca z appHost jest wywoływana, partycja certyfikatu dostępna przez aplikację różni się od notarialnie domyślnego hosta.</span><span class="sxs-lookup"><span data-stu-id="a9b09-139">When an app using the appHost is invoked, the certificate partition accessed by the app is different from the notarized default host.</span></span> <span data-ttu-id="a9b09-140">Jeśli aplikacja musi uzyskać dostęp do certyfikatów zainstalowanych za pośrednictwem hosta domyślnego, użyj `dotnet run` polecenia, aby uruchomić aplikację z pliku projektu lub użyj `dotnet <filename.dll>` polecenia, aby uruchomić aplikację bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="a9b09-140">If your app must access the certificates installed through the default host, use the `dotnet run` command to run your app from its project file, or use the `dotnet <filename.dll>` command to start the app directly.</span></span>

<span data-ttu-id="a9b09-141">Więcej informacji na temat tego scenariusza znajduje się w [sekcji ASP.NET Core i macOS oraz certyfikatów.](#aspnet-core-and-macos-and-certificates)</span><span class="sxs-lookup"><span data-stu-id="a9b09-141">More information about this scenario is provided in the [ASP.NET Core and macOS and certificates](#aspnet-core-and-macos-and-certificates) section.</span></span>

## <a name="aspnet-core-and-macos-and-certificates"></a><span data-ttu-id="a9b09-142">ASP.NET Core i macOS oraz certyfikaty</span><span class="sxs-lookup"><span data-stu-id="a9b09-142">ASP.NET Core and macOS and certificates</span></span>

<span data-ttu-id="a9b09-143">Program .NET Core umożliwia zarządzanie certyfikatami w pęku <xref:System.Security.Cryptography.X509Certificates> kluczy systemu macOS za pomocą tej klasy.</span><span class="sxs-lookup"><span data-stu-id="a9b09-143">.NET Core provides the ability to manage certificates in the macOS Keychain with the <xref:System.Security.Cryptography.X509Certificates> class.</span></span> <span data-ttu-id="a9b09-144">Dostęp do pęku kluczy systemu macOS używa tożsamości aplikacji jako kluczpodstawowy przy podejmowaniu decyzji, która partycja należy wziąć pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="a9b09-144">Access to the macOS Keychain uses the applications identity as the primary key when deciding which partition to consider.</span></span> <span data-ttu-id="a9b09-145">Na przykład niepodpisane aplikacje przechowują klucze tajne w niepodpisanej partycji, ale podpisane aplikacje przechowują swoje wpisy tajne w partycjach, do których tylko oni mogą uzyskać dostęp.</span><span class="sxs-lookup"><span data-stu-id="a9b09-145">For example, unsigned applications store secrets in the unsigned partition, but signed applications store their secrets in partitions only they can access.</span></span> <span data-ttu-id="a9b09-146">Źródło wykonania, które wywołuje aplikację decyduje, która partycja do użycia.</span><span class="sxs-lookup"><span data-stu-id="a9b09-146">The source of execution that invokes your app decides which partition to use.</span></span>

<span data-ttu-id="a9b09-147">.NET Core udostępnia trzy źródła wykonania: [appHost](#apphost-is-disabled-by-default), host domyślny `dotnet` (polecenie) i host niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="a9b09-147">.NET Core provides three sources of execution: [appHost](#apphost-is-disabled-by-default), default host (the `dotnet` command), and a custom host.</span></span> <span data-ttu-id="a9b09-148">Każdy model wykonywania może mieć różne tożsamości, podpisane lub niepodpisane i ma dostęp do różnych partycji w pęku kluczy.</span><span class="sxs-lookup"><span data-stu-id="a9b09-148">Each execution model may have different identities, either signed or unsigned, and has access to different partitions within the Keychain.</span></span> <span data-ttu-id="a9b09-149">Certyfikaty importowane przez jeden tryb mogą nie być dostępne z innego.</span><span class="sxs-lookup"><span data-stu-id="a9b09-149">Certificates imported by one mode may not be accessible from another.</span></span> <span data-ttu-id="a9b09-150">Na przykład notarialnie wersje programu .NET Core mają domyślny host, który jest podpisany.</span><span class="sxs-lookup"><span data-stu-id="a9b09-150">For example, the notarized versions of .NET Core have a default host that is signed.</span></span> <span data-ttu-id="a9b09-151">Certyfikaty są importowane do bezpiecznej partycji na podstawie jego tożsamości.</span><span class="sxs-lookup"><span data-stu-id="a9b09-151">Certificates are imported into a secure partition based on its identity.</span></span> <span data-ttu-id="a9b09-152">Certyfikaty te nie są dostępne z wygenerowanego appHost, ponieważ appHost jest niepodpisany.</span><span class="sxs-lookup"><span data-stu-id="a9b09-152">These certificates aren't accessible from a generated appHost, as the appHost is unsigned.</span></span>

<span data-ttu-id="a9b09-153">W innym przykładzie domyślnie ASP.NET Core importuje domyślny certyfikat SSL za pośrednictwem hosta domyślnego.</span><span class="sxs-lookup"><span data-stu-id="a9b09-153">Another example, by default, ASP.NET Core imports a default SSL certificate through the default host.</span></span> <span data-ttu-id="a9b09-154">ASP.NET Podstawowe aplikacje korzystające z appHost nie będą miały dostępu do tego certyfikatu i otrzymają błąd, gdy program .NET Core wykryje, że certyfikat nie jest dostępny.</span><span class="sxs-lookup"><span data-stu-id="a9b09-154">ASP.NET Core applications that use an appHost won't have access to this certificate and will receive an error when .NET Core detects the certificate isn't accessible.</span></span> <span data-ttu-id="a9b09-155">Komunikat o błędzie zawiera instrukcje dotyczące sposobu rozwiązania tego problemu.</span><span class="sxs-lookup"><span data-stu-id="a9b09-155">The error message provides instructions on how to fix this problem.</span></span>

<span data-ttu-id="a9b09-156">Jeśli wymagane jest udostępnianie certyfikatów, system macOS udostępnia opcje konfiguracji z narzędziem. `security`</span><span class="sxs-lookup"><span data-stu-id="a9b09-156">If certificate sharing is required, macOS provides configuration options with the `security` utility.</span></span>

<span data-ttu-id="a9b09-157">Aby uzyskać więcej informacji na temat rozwiązywania problemów z certyfikatem ASP.NET Core, zobacz [Wymuszanie protokołu HTTPS w ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span><span class="sxs-lookup"><span data-stu-id="a9b09-157">For more information on how to troubleshoot ASP.NET Core certificate issues, see [Enforce HTTPS in ASP.NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.1&tabs=visual-studio#troubleshoot-certificate-problems).</span></span>

## <a name="default-entitlements"></a><span data-ttu-id="a9b09-158">Uprawnienia domyślne</span><span class="sxs-lookup"><span data-stu-id="a9b09-158">Default entitlements</span></span>

<span data-ttu-id="a9b09-159">Domyślny host programu .NET `dotnet` Core (polecenie) ma zestaw uprawnień domyślnych.</span><span class="sxs-lookup"><span data-stu-id="a9b09-159">.NET Core’s default host (the `dotnet` command) has a set of default entitlements.</span></span> <span data-ttu-id="a9b09-160">Uprawnienia te są wymagane do prawidłowego działania programu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a9b09-160">These entitlements are required for proper operation of .NET Core.</span></span> <span data-ttu-id="a9b09-161">Jest możliwe, że aplikacja może wymagać dodatkowych uprawnień, w którym to przypadku musisz wygenerować i użyć [appHost,](#apphost-is-disabled-by-default) a następnie dodać niezbędne uprawnienia lokalnie.</span><span class="sxs-lookup"><span data-stu-id="a9b09-161">It's possible that your application may need additional entitlements, in which case you'll need to generate and use an [appHost](#apphost-is-disabled-by-default) and then add the necessary entitlements locally.</span></span>

<span data-ttu-id="a9b09-162">Domyślny zestaw uprawnień dla programu .NET Core:</span><span class="sxs-lookup"><span data-stu-id="a9b09-162">Default set of entitlements for .NET Core:</span></span>

- `com.apple.security.cs.allow-jit`
- `com.apple.security.cs.allow-unsigned-executable-memory`
- `com.apple.security.cs.allow-dyld-environment-variables`
- `com.apple.security.cs.disable-library-validation`

## <a name="notarize-a-net-core-app"></a><span data-ttu-id="a9b09-163">Notarize aplikacji .NET Core</span><span class="sxs-lookup"><span data-stu-id="a9b09-163">Notarize a .NET Core app</span></span>

<span data-ttu-id="a9b09-164">Jeśli chcesz uruchomić aplikację w systemie macOS Catalina (wersja 10.15) lub nowszej, należy powiadomić o tym aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a9b09-164">If you want your application to run on macOS Catalina (version 10.15) or higher, you'll want to notarize your app.</span></span> <span data-ttu-id="a9b09-165">AppHost, który przesyłasz wraz z aplikacją do notarializacji, powinien być używany z co najmniej tymi [samymi uprawnieniami domyślnymi](#default-entitlements) dla .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a9b09-165">The appHost you submit with your application for notarization should be used with at least the same [default entitlements](#default-entitlements) for .NET Core.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a9b09-166">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="a9b09-166">Next steps</span></span>

- <span data-ttu-id="a9b09-167">[Zależności i wymagania programu .NET Core](dependencies.md).</span><span class="sxs-lookup"><span data-stu-id="a9b09-167">[.NET Core dependencies and requirements](dependencies.md).</span></span>
- <span data-ttu-id="a9b09-168">[Zainstaluj zestaw SDK .NET Core](sdk.md).</span><span class="sxs-lookup"><span data-stu-id="a9b09-168">[Install the .NET Core SDK](sdk.md).</span></span>
- [<span data-ttu-id="a9b09-169">Instalowanie programu runowego .NET Core</span><span class="sxs-lookup"><span data-stu-id="a9b09-169">Install the .NET Core Runtime</span></span>](runtime.md)
