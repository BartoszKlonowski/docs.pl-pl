---
title: Architektura narzędzi wiersza polecenia programu .NET core
description: Więcej informacji na temat platformy .NET Core, narzędzia warstwy i co zmieniło się w nowszych wersjach.
author: blackdwarf
ms.date: 03/06/2017
ms.openlocfilehash: 85987129421e8ee22f7cf7fe1d44e0768d95a214
ms.sourcegitcommit: ad99773e5e45068ce03b99518008397e1299e0d1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/22/2018
ms.locfileid: "46696338"
---
# <a name="high-level-overview-of-changes-in-the-net-core-tools"></a><span data-ttu-id="ed1bd-103">Ogólne omówienie zmian w narzędziach platformy .NET Core</span><span class="sxs-lookup"><span data-stu-id="ed1bd-103">High-level overview of changes in the .NET Core tools</span></span>

<span data-ttu-id="ed1bd-104">W tym dokumencie opisano zmiany związane z przenoszeniem z *project.json* do programu MSBuild i *csproj* projektu systemu z informacjami na temat zmian warstw zestaw narzędzi .NET Core i Implementacja poleceń interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-104">This document describes the changes associated with moving from *project.json* to MSBuild and the *csproj* project system with information on the changes to the layering of the .NET Core tooling and the implementation of the CLI commands.</span></span> <span data-ttu-id="ed1bd-105">Te zmiany podczas wersji platformy .NET Core SDK 1.0 i Visual Studio 2017 z 7 marca 2017 r. (zobacz [ogłoszenie](https://blogs.msdn.microsoft.com/dotnet/2017/03/07/announcing-net-core-tools-1-0/)), ale początkowo zostały wdrożone za pomocą wersji programu .NET Core SDK w wersji zapoznawczej 3.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-105">These changes occurred with the release of .NET Core SDK 1.0 and Visual Studio 2017 on March 7, 2017 (see the [announcement](https://blogs.msdn.microsoft.com/dotnet/2017/03/07/announcing-net-core-tools-1-0/)) but were initially implemented with the release of the .NET Core SDK Preview 3.</span></span>

## <a name="moving-away-from-projectjson"></a><span data-ttu-id="ed1bd-106">Przejście od pliku project.json</span><span class="sxs-lookup"><span data-stu-id="ed1bd-106">Moving away from project.json</span></span>
<span data-ttu-id="ed1bd-107">Największe zmiana narzędzi dla platformy .NET Core jest bez obaw [przesuwania kursora od pliku project.json do csproj](https://blogs.msdn.microsoft.com/dotnet/2016/05/23/changes-to-project-json/) jako system projektu.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-107">The biggest change in the tooling for .NET Core is certainly the [move away from project.json to csproj](https://blogs.msdn.microsoft.com/dotnet/2016/05/23/changes-to-project-json/) as the project system.</span></span> <span data-ttu-id="ed1bd-108">Najnowsze wersje narzędzi wiersza polecenia nie obsługują *project.json* plików.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-108">The latest versions of the command-line tools don't support *project.json* files.</span></span> <span data-ttu-id="ed1bd-109">Oznacza to, że nie może służyć do tworzenia, uruchamiania lub publikowania aplikacji opartych na pliku project.json i bibliotek.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-109">That means that it cannot be used to build, run or publish project.json based applications and libraries.</span></span> <span data-ttu-id="ed1bd-110">Aby można było używać tej wersji narzędzi, konieczne będzie migracji istniejących projektów lub Rozpocznij nowe.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-110">In order to use this version of the tools, you will need to migrate your existing projects or start new ones.</span></span> 

<span data-ttu-id="ed1bd-111">W ramach tego przeniesienia, aparat niestandardowej kompilacji, który został opracowany, aby kompilować projekty project.json został zastąpiony z aparatem dojrzałe i pełną obsługę kompilacji o nazwie [MSBuild](https://github.com/Microsoft/msbuild).</span><span class="sxs-lookup"><span data-stu-id="ed1bd-111">As part of this move, the custom build engine that was developed to build project.json projects was replaced with a mature and fully capable build engine called [MSBuild](https://github.com/Microsoft/msbuild).</span></span> <span data-ttu-id="ed1bd-112">Program MSBuild jest aparatem dobrze znane w społeczności platformy .NET, ponieważ ma ono kluczowych technologii od pierwszej wersji tej platformy.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-112">MSBuild is a well-known engine in the .NET community, since it has been a key technology since the platform's first release.</span></span> <span data-ttu-id="ed1bd-113">Oczywiście ponieważ wymagane do kompilowania aplikacji platformy .NET Core, MSBuild wydajnej i .NET Core i może być używany na dowolnej platformie, która platformy .NET Core jest uruchamiany na.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-113">Of course, because it needs to build .NET Core applications, MSBuild has been ported to .NET Core and can be used on any platform that .NET Core runs on.</span></span> <span data-ttu-id="ed1bd-114">Jedną z głównych obietnic programu .NET Core jest to, że stosu wieloplatformowego opracowywania aplikacji, a firma Microsoft ma upewnienie się, że to przeniesienie nie mogą przerwać działania te zobowiązania.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-114">One of the main promises of .NET Core is that of a cross-platform development stack, and we have made sure that this move does not break that promise.</span></span>

> [!NOTE]
> <span data-ttu-id="ed1bd-115">Jeśli jesteś nowym użytkownikiem programu MSBuild i chcesz dowiedzieć się więcej na ten temat, można zacząć od przeczytania [pojęcia dotyczące programu MSBuild](/visualstudio/msbuild/msbuild-concepts) artykułu.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-115">If you are new to MSBuild and would like to learn more about it, you can start by reading the [MSBuild Concepts](/visualstudio/msbuild/msbuild-concepts) article.</span></span> 

## <a name="the-tooling-layers"></a><span data-ttu-id="ed1bd-116">Narzędzia warstwy</span><span class="sxs-lookup"><span data-stu-id="ed1bd-116">The tooling layers</span></span>
<span data-ttu-id="ed1bd-117">Wraz z przejściem od istniejącego systemu projektów, a także od utworzenia przełączników aparatu pytanie, na które następuje naturalny jest tego typu zmian zmieniaj ogólnej "warstwy" całego ekosystemu narzędzi .NET Core?</span><span class="sxs-lookup"><span data-stu-id="ed1bd-117">With the move away from the existing project system as well as with building engine switches, the question that naturally follows is do any of these changes change the overall "layering" of the whole .NET Core tooling ecosystem?</span></span> <span data-ttu-id="ed1bd-118">Czy istnieją nowe usługi bits i składniki?</span><span class="sxs-lookup"><span data-stu-id="ed1bd-118">Are there new bits and components?</span></span>

<span data-ttu-id="ed1bd-119">Zacznijmy od szybkiego przypomnienia informacji na temat wersji zapoznawczej 2 warstw, jak pokazano na poniższej ilustracji:</span><span class="sxs-lookup"><span data-stu-id="ed1bd-119">Let's start with a quick refresher on Preview 2 layering as shown in the following picture:</span></span>

![Architektura wysokiego poziomu narzędzi w wersji zapoznawczej 2](media/cli-msbuild-architecture/p2-arch.png)

<span data-ttu-id="ed1bd-121">Warstwowe narzędzi jest bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-121">The layering of the tools is quite simple.</span></span> <span data-ttu-id="ed1bd-122">W dolnej części mamy narzędzi wiersza polecenia programu .NET Core jako podstawa.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-122">At the bottom we have the .NET Core Command Line tools as a foundation.</span></span> <span data-ttu-id="ed1bd-123">Wszystkie inne wyższego poziomu narzędzi takich jak Visual Studio lub Visual Studio Code, zależą od i zależą od interfejsu wiersza polecenia do tworzenia projektów, Przywróć zależności i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-123">All other, higher-level tools such as Visual Studio or Visual Studio Code, depend and rely on the CLI to build projects, restore dependencies and so on.</span></span> <span data-ttu-id="ed1bd-124">Oznacza to, że na przykład, jeśli program Visual Studio chciał operacji przywracania, wywołałby do `dotnet restore` ([patrz Uwaga](#dotnet-restore-note)) polecenia interfejsu wiersza polecenia w pliku.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-124">This meant that, for example, if Visual Studio wanted to perform a restore operation, it would call into `dotnet restore` ([see note](#dotnet-restore-note)) command in the CLI.</span></span> 

<span data-ttu-id="ed1bd-125">Wraz z przejściem do nowego systemu projektu zmienia poprzedniego diagramu:</span><span class="sxs-lookup"><span data-stu-id="ed1bd-125">With the move to the new project system, the previous diagram changes:</span></span> 

![Architektura wysokiego poziomu zestawu SDK platformy .NET core 1.0.0](media/cli-msbuild-architecture/p3-arch.png)

<span data-ttu-id="ed1bd-127">Główna różnica polega na, interfejsu wiersza polecenia nie jest podstawowe warstwy już; Ta rola zostanie wypełniony przez "składnik udostępnionego zestawu SDK".</span><span class="sxs-lookup"><span data-stu-id="ed1bd-127">The main difference is that the CLI is not the foundational layer anymore; this role is now filled by the "shared SDK component".</span></span> <span data-ttu-id="ed1bd-128">Tego składnika współużytkowanego zestawu SDK jest zbiorem obiektów docelowych i skojarzonych zadań, które są odpowiedzialne za kompilowania kodu, publikując je i pakowania pakietów NuGet itp. Zestaw SDK, sama jest typu open source i jest dostępny w witrynie GitHub na [repozytorium zestawu SDK](https://github.com/dotnet/sdk).</span><span class="sxs-lookup"><span data-stu-id="ed1bd-128">This shared SDK component is a set of targets and associated tasks that are responsible for compiling your code, publishing it, packing NuGet packages etc. The SDK itself is open-source and is available on GitHub on the [SDK repo](https://github.com/dotnet/sdk).</span></span> 

> [!NOTE]
> <span data-ttu-id="ed1bd-129">"target" to termin MSBuild wskazującą o nazwie operacji, które może wywołać program MSBuild.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-129">A "target" is a MSBuild term that indicates a named operation that MSBuild can invoke.</span></span> <span data-ttu-id="ed1bd-130">Jest ona zwykle połączone z co najmniej jedno zadanie, które są wykonywane logikę i element docelowy powinien zrobić.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-130">It is usually coupled with one or more tasks that execute some logic that the target is supposed to do.</span></span> <span data-ttu-id="ed1bd-131">Program MSBuild obsługuje wiele gotowych elementów docelowych, takie jak `Copy` lub `Execute`; umożliwia również użytkownikom napisać własne zadania przy użyciu kodu zarządzanego i zdefiniuj cele do wykonania tych zadań.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-131">MSBuild supports many ready-made targets such as `Copy` or `Execute`; it also allows users to write their own tasks using managed code and define targets to execute those tasks.</span></span> <span data-ttu-id="ed1bd-132">Aby uzyskać więcej informacji, zobacz [zadania programu MSBuild](/visualstudio/msbuild/msbuild-tasks).</span><span class="sxs-lookup"><span data-stu-id="ed1bd-132">For more information, see [MSBuild tasks](/visualstudio/msbuild/msbuild-tasks).</span></span> 

<span data-ttu-id="ed1bd-133">Wszystkie zestawy narzędzi teraz korzystać z udostępnionych składników zestawu SDK i interfejsu wiersza polecenia dołączone jego obiekty docelowe.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-133">All the toolsets now consume the shared SDK component and its targets, CLI included.</span></span> <span data-ttu-id="ed1bd-134">Na przykład następnej wersji programu Visual Studio będzie nie mogą wywoływać `dotnet restore` ([patrz Uwaga](#dotnet-restore-note)) polecenia, aby przywrócić zależności dla projektów .NET Core, zostanie użyty element docelowy "Przywracanie" bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-134">For example, the next version of Visual Studio will not call into `dotnet restore` ([see note](#dotnet-restore-note)) command to restore dependencies for .NET Core projects, it will use the "Restore" target directly.</span></span> <span data-ttu-id="ed1bd-135">Ponieważ te elementy docelowe programu MSBuild, umożliwia także MSBuild pierwotne można wykonać je za pomocą [dotnet msbuild](dotnet-msbuild.md) polecenia.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-135">Since these are MSBuild targets, you can also use raw MSBuild to execute them using the [dotnet msbuild](dotnet-msbuild.md) command.</span></span> 

### <a name="cli-commands"></a><span data-ttu-id="ed1bd-136">Polecenia interfejsu wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="ed1bd-136">CLI commands</span></span>
<span data-ttu-id="ed1bd-137">Składnika współużytkowanego zestawu SDK oznacza, że większość istniejących poleceń interfejsu wiersza polecenia zostały ponownie zaimplementowane jako cele i zadania programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-137">The shared SDK component means that the majority of existing CLI commands have been re-implemented as MSBuild tasks and targets.</span></span> <span data-ttu-id="ed1bd-138">Co to oznacza dla poleceń interfejsu wiersza polecenia i użycie zestawu narzędzi programu</span><span class="sxs-lookup"><span data-stu-id="ed1bd-138">What does this mean for the CLI commands and your usage of the toolset?</span></span> 

<span data-ttu-id="ed1bd-139">Z perspektywy użycia go nie zmienia sposób użycia interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-139">From an usage perspective, it doesn't change the way you use the CLI.</span></span> <span data-ttu-id="ed1bd-140">Interfejs wiersza polecenia nadal ma podstawowe polecenia, które istnieją w wersji 2 (wersja zapoznawcza):</span><span class="sxs-lookup"><span data-stu-id="ed1bd-140">The CLI still has the core commands that exist in Preview 2 release:</span></span>

* `new`
* `restore`
* `run` 
* `build`
* `publish`
* `test`
* `pack` 

<span data-ttu-id="ed1bd-141">Te polecenia są nadal odpowiadają Twoim oczekiwaniom (nowy projekt, skompiluj go, opublikuj ją, pakiet go i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="ed1bd-141">These commands still do what you expect them to do (new up a project, build it, publish it, pack it and so on).</span></span> <span data-ttu-id="ed1bd-142">Większość opcji nie są zmieniane i nadal istnieją i mogą analizować ekrany pomocy poleceń (przy użyciu `dotnet <command> --help`) lub dokumentacji w tej witrynie, aby zapoznać się ze wszystkimi zmianami.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-142">Majority of the options are not changed, and are still there, and you can consult either the commands' help screens (using `dotnet <command> --help`) or documentation on this site to get familiar with any changes.</span></span> 

<span data-ttu-id="ed1bd-143">Z perspektywy wykonywania poleceń interfejsu wiersza polecenia przyjmuje swoich parametrów i konstruowania wywołanie "pierwotne" MSBuild, będzie wymagane właściwości, a następnie uruchom wybraną docelową.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-143">From an execution perspective, the CLI commands will take their parameters and construct a call to "raw" MSBuild that will set the needed properties and run the desired target.</span></span> <span data-ttu-id="ed1bd-144">Aby lepiej zilustrować to, należy wziąć pod uwagę następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="ed1bd-144">To better illustrate this, consider the following command:</span></span> 

   `dotnet publish -o pub -c Release`
    
<span data-ttu-id="ed1bd-145">To polecenie jest publikowanie aplikacji w `pub` folder przy użyciu konfiguracji "Wersja".</span><span class="sxs-lookup"><span data-stu-id="ed1bd-145">This command is publishing an application into a `pub` folder using the "Release" configuration.</span></span> <span data-ttu-id="ed1bd-146">Wewnętrznie to polecenie pobiera przetłumaczyć następujące wywołania MSBuild:</span><span class="sxs-lookup"><span data-stu-id="ed1bd-146">Internally, this command gets translated into the following MSBuild invocation:</span></span> 

   `dotnet msbuild -t:Publish -p:OutputPath=pub -p:Configuration=Release`

<span data-ttu-id="ed1bd-147">Godne uwagi wyjątkiem od tej reguły są `new` i `run` polecenia, ponieważ nie zostały one wdrożone jako elementy docelowe programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="ed1bd-147">The notable exception to this rule are `new` and `run` commands, as they have not been implemented as MSBuild targets.</span></span>

<a name="dotnet-restore-note"></a>  
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
