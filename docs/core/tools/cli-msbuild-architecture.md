---
title: Architektura narzędzi wiersza polecenia platformy .NET Core
description: Dowiedz się więcej o warstwach narzędzi programu .NET Core i zmianach w ostatnich wersjach.
ms.date: 03/06/2017
ms.openlocfilehash: 05183a9edc26615e00d6383043fd10d8bec06f2b
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/17/2019
ms.locfileid: "72521306"
---
# <a name="high-level-overview-of-changes-in-the-net-core-tools"></a><span data-ttu-id="b326e-103">Ogólne omówienie zmian w narzędziach .NET Core</span><span class="sxs-lookup"><span data-stu-id="b326e-103">High-level overview of changes in the .NET Core tools</span></span>

<span data-ttu-id="b326e-104">W tym dokumencie opisano zmiany związane z przechodzeniem z pliku *Project. JSON* do programu MSBuild i system projektu *csproj* z informacjami o zmianach w warstwach narzędzi platformy .NET Core i implementacji poleceń interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="b326e-104">This document describes the changes associated with moving from *project.json* to MSBuild and the *csproj* project system with information on the changes to the layering of the .NET Core tooling and the implementation of the CLI commands.</span></span> <span data-ttu-id="b326e-105">Te zmiany wystąpiły z wydaniem zestaw .NET Core SDK 1,0 i Visual Studio 2017 w dniu 7 marca 2017 (zobacz [anons](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)), ale początkowo zostały wdrożone w wersji zapoznawczej zestaw .NET Core SDK 3.</span><span class="sxs-lookup"><span data-stu-id="b326e-105">These changes occurred with the release of .NET Core SDK 1.0 and Visual Studio 2017 on March 7, 2017 (see the [announcement](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)) but were initially implemented with the release of the .NET Core SDK Preview 3.</span></span>

## <a name="moving-away-from-projectjson"></a><span data-ttu-id="b326e-106">Przejście z pliku Project. JSON</span><span class="sxs-lookup"><span data-stu-id="b326e-106">Moving away from project.json</span></span>

<span data-ttu-id="b326e-107">Największą zmianą w narzędziach dla platformy .NET Core jest odmowa [od pliku Project. JSON do csproj](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) jako system projektu.</span><span class="sxs-lookup"><span data-stu-id="b326e-107">The biggest change in the tooling for .NET Core is certainly the [move away from project.json to csproj](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) as the project system.</span></span> <span data-ttu-id="b326e-108">Najnowsze wersje narzędzi wiersza polecenia nie obsługują plików *Project. JSON* .</span><span class="sxs-lookup"><span data-stu-id="b326e-108">The latest versions of the command-line tools don't support *project.json* files.</span></span> <span data-ttu-id="b326e-109">Oznacza to, że nie można go użyć do kompilowania, uruchamiania lub publikowania aplikacji i bibliotek opartych na pliku Project. JSON.</span><span class="sxs-lookup"><span data-stu-id="b326e-109">That means that it cannot be used to build, run or publish project.json based applications and libraries.</span></span> <span data-ttu-id="b326e-110">Aby można było korzystać z tej wersji narzędzi, należy zmigrować istniejące projekty lub rozpocząć nowe.</span><span class="sxs-lookup"><span data-stu-id="b326e-110">In order to use this version of the tools, you will need to migrate your existing projects or start new ones.</span></span> 

<span data-ttu-id="b326e-111">W ramach tego przenoszenia niestandardowy aparat kompilacji, który został opracowany do kompilowania projektów Project. JSON, został zastąpiony przez kompletny i w pełni obsługujący aparat kompilacji o nazwie [MSBuild](https://github.com/Microsoft/msbuild).</span><span class="sxs-lookup"><span data-stu-id="b326e-111">As part of this move, the custom build engine that was developed to build project.json projects was replaced with a mature and fully capable build engine called [MSBuild](https://github.com/Microsoft/msbuild).</span></span> <span data-ttu-id="b326e-112">Program MSBuild jest dobrze znanym aparatem w społeczności .NET, ponieważ był to kluczową technologię od momentu pierwszej wersji platformy.</span><span class="sxs-lookup"><span data-stu-id="b326e-112">MSBuild is a well-known engine in the .NET community, since it has been a key technology since the platform's first release.</span></span> <span data-ttu-id="b326e-113">Oczywiście, ponieważ wymaga kompilowania aplikacji platformy .NET Core, program MSBuild został przestawiony do platformy .NET Core i może być używany na dowolnej platformie, na której działa .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b326e-113">Of course, because it needs to build .NET Core applications, MSBuild has been ported to .NET Core and can be used on any platform that .NET Core runs on.</span></span> <span data-ttu-id="b326e-114">Jednym z głównych niesie obietnice zwiększenia .NET Core jest to, że wieloplatformowy stos programistyczny, a my upewnimy się, że to przeniesienie nie przerywa tego obietnicy.</span><span class="sxs-lookup"><span data-stu-id="b326e-114">One of the main promises of .NET Core is that of a cross-platform development stack, and we have made sure that this move does not break that promise.</span></span>

> [!NOTE]
> <span data-ttu-id="b326e-115">Jeśli jesteś nowym narzędziem MSBuild i chcesz dowiedzieć się więcej na jego temat, możesz zacząć od odczytywania artykułu [koncepcji programu MSBuild](/visualstudio/msbuild/msbuild-concepts) .</span><span class="sxs-lookup"><span data-stu-id="b326e-115">If you are new to MSBuild and would like to learn more about it, you can start by reading the [MSBuild Concepts](/visualstudio/msbuild/msbuild-concepts) article.</span></span> 

## <a name="the-tooling-layers"></a><span data-ttu-id="b326e-116">Warstwy narzędzi</span><span class="sxs-lookup"><span data-stu-id="b326e-116">The tooling layers</span></span>

<span data-ttu-id="b326e-117">Po przejściu z istniejącego systemu projektu, a także w przypadku tworzenia przełączników aparatu, pytanie, które w sposób naturalny następuje, zmieni ogólny "warstwowy" w całym ekosystemie narzędzi platformy .NET Core?</span><span class="sxs-lookup"><span data-stu-id="b326e-117">With the move away from the existing project system as well as with building engine switches, the question that naturally follows is do any of these changes change the overall "layering" of the whole .NET Core tooling ecosystem?</span></span> <span data-ttu-id="b326e-118">Czy istnieją nowe bity i składniki?</span><span class="sxs-lookup"><span data-stu-id="b326e-118">Are there new bits and components?</span></span>

<span data-ttu-id="b326e-119">Zacznijmy od szybkiego odświeżacza w wersji zapoznawczej 2, jak pokazano na poniższej ilustracji:</span><span class="sxs-lookup"><span data-stu-id="b326e-119">Let's start with a quick refresher on Preview 2 layering as shown in the following picture:</span></span>

![Wersja zapoznawcza 2 — architektura wysokiego poziomu](media/cli-msbuild-architecture/p2-arch.png)

<span data-ttu-id="b326e-121">Warstwa narzędzi jest bardzo prosta.</span><span class="sxs-lookup"><span data-stu-id="b326e-121">The layering of the tools is quite simple.</span></span> <span data-ttu-id="b326e-122">W dolnej części narzędzia wiersza polecenia platformy .NET Core są dostępne jako podstawy.</span><span class="sxs-lookup"><span data-stu-id="b326e-122">At the bottom we have the .NET Core Command Line tools as a foundation.</span></span> <span data-ttu-id="b326e-123">Wszystkie inne narzędzia wyższego poziomu, takie jak Visual Studio lub Visual Studio Code, są zależne i polegają na interfejsie wiersza polecenia do kompilowania projektów, przywracania zależności i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="b326e-123">All other, higher-level tools such as Visual Studio or Visual Studio Code, depend and rely on the CLI to build projects, restore dependencies and so on.</span></span> <span data-ttu-id="b326e-124">Oznacza to, że na przykład jeśli program Visual Studio chciał wykonać operację przywracania, wywoła on `dotnet restore` ([patrz Uwaga](#dotnet-restore-note)) polecenie w interfejsie wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="b326e-124">This meant that, for example, if Visual Studio wanted to perform a restore operation, it would call into `dotnet restore` ([see note](#dotnet-restore-note)) command in the CLI.</span></span> 

<span data-ttu-id="b326e-125">Po przejściu do nowego systemu projektu, poprzedni diagram zmienia się:</span><span class="sxs-lookup"><span data-stu-id="b326e-125">With the move to the new project system, the previous diagram changes:</span></span> 

![Architektura wysokiego poziomu zestaw .NET Core SDK 1.0.0](media/cli-msbuild-architecture/p3-arch.png)

<span data-ttu-id="b326e-127">Główną różnicą jest to, że interfejs wiersza polecenia nie jest już podstawą. Ta rola jest teraz wypełniana przez "współużytkowany składnik zestawu SDK".</span><span class="sxs-lookup"><span data-stu-id="b326e-127">The main difference is that the CLI is not the foundational layer anymore; this role is now filled by the "shared SDK component".</span></span> <span data-ttu-id="b326e-128">Ten współużytkowany składnik zestawu SDK to zbiór elementów docelowych i skojarzonych zadań, które są odpowiedzialne za kompilowanie kodu, publikowanie go, pakowanie pakietów NuGet itd. Sam zestaw SDK to open-source i jest dostępny w witrynie GitHub w [repozytorium zestawu SDK](https://github.com/dotnet/sdk).</span><span class="sxs-lookup"><span data-stu-id="b326e-128">This shared SDK component is a set of targets and associated tasks that are responsible for compiling your code, publishing it, packing NuGet packages etc. The SDK itself is open-source and is available on GitHub on the [SDK repo](https://github.com/dotnet/sdk).</span></span> 

> [!NOTE]
> <span data-ttu-id="b326e-129">"Target" jest terminem MSBuild, który wskazuje nazwę operacji, którą MSBuild może wywołać.</span><span class="sxs-lookup"><span data-stu-id="b326e-129">A "target" is a MSBuild term that indicates a named operation that MSBuild can invoke.</span></span> <span data-ttu-id="b326e-130">Zwykle jest to powiązane z jednym lub kilkoma zadaniami, które wykonują pewną logikę, którą powinien wykonać element docelowy.</span><span class="sxs-lookup"><span data-stu-id="b326e-130">It is usually coupled with one or more tasks that execute some logic that the target is supposed to do.</span></span> <span data-ttu-id="b326e-131">Program MSBuild obsługuje wiele gotowych obiektów docelowych, takich jak `Copy` lub `Execute`; umożliwia również użytkownikom pisanie własnych zadań przy użyciu kodu zarządzanego i definiowanie celów do wykonania tych zadań.</span><span class="sxs-lookup"><span data-stu-id="b326e-131">MSBuild supports many ready-made targets such as `Copy` or `Execute`; it also allows users to write their own tasks using managed code and define targets to execute those tasks.</span></span> <span data-ttu-id="b326e-132">Aby uzyskać więcej informacji, zobacz [zadania programu MSBuild](/visualstudio/msbuild/msbuild-tasks).</span><span class="sxs-lookup"><span data-stu-id="b326e-132">For more information, see [MSBuild tasks](/visualstudio/msbuild/msbuild-tasks).</span></span> 

<span data-ttu-id="b326e-133">Wszystkie zestawy narzędzi wykorzystują teraz współużytkowany składnik zestawu SDK i jego obiekty docelowe, dołączone do interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="b326e-133">All the toolsets now consume the shared SDK component and its targets, CLI included.</span></span> <span data-ttu-id="b326e-134">Na przykład, następna wersja programu Visual Studio nie będzie wywoływała do `dotnet restore` ([Zobacz Uwaga](#dotnet-restore-note)), aby przywrócić zależności dla projektów .NET Core, będzie ona używać bezpośrednio elementu docelowego "Restore".</span><span class="sxs-lookup"><span data-stu-id="b326e-134">For example, the next version of Visual Studio will not call into `dotnet restore` ([see note](#dotnet-restore-note)) command to restore dependencies for .NET Core projects, it will use the "Restore" target directly.</span></span> <span data-ttu-id="b326e-135">Ponieważ są to obiekty docelowe programu MSBuild, można także użyć pierwotnego programu MSBuild do wykonywania ich przy użyciu polecenia programu [dotnet MSBuild](dotnet-msbuild.md) .</span><span class="sxs-lookup"><span data-stu-id="b326e-135">Since these are MSBuild targets, you can also use raw MSBuild to execute them using the [dotnet msbuild](dotnet-msbuild.md) command.</span></span> 

### <a name="cli-commands"></a><span data-ttu-id="b326e-136">Poleceń interfejsu wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="b326e-136">CLI commands</span></span>
<span data-ttu-id="b326e-137">Współużytkowany składnik zestawu SDK oznacza, że większość istniejących poleceń interfejsu wiersza polecenia została zaimplementowana jako zadania i elementy docelowe programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="b326e-137">The shared SDK component means that the majority of existing CLI commands have been re-implemented as MSBuild tasks and targets.</span></span> <span data-ttu-id="b326e-138">Co to znaczy dla poleceń interfejsu wiersza polecenia i użycia zestawu narzędzi?</span><span class="sxs-lookup"><span data-stu-id="b326e-138">What does this mean for the CLI commands and your usage of the toolset?</span></span> 

<span data-ttu-id="b326e-139">W perspektywie użycia nie zmienia on sposobu korzystania z interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="b326e-139">From an usage perspective, it doesn't change the way you use the CLI.</span></span> <span data-ttu-id="b326e-140">Interfejs wiersza polecenia ma nadal dostępne podstawowe poleceń, które znajdują się w wersji zapoznawczej 2:</span><span class="sxs-lookup"><span data-stu-id="b326e-140">The CLI still has the core commands that exist in Preview 2 release:</span></span>

- `new`
- `restore`
- `run` 
- `build`
- `publish`
- `test`
- `pack` 

<span data-ttu-id="b326e-141">Te polecenia nadal wykonują czynności, które należy wykonać (nowy projekt, kompilacja, publikowanie, pakowanie i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="b326e-141">These commands still do what you expect them to do (new up a project, build it, publish it, pack it and so on).</span></span> <span data-ttu-id="b326e-142">Większość opcji nie jest zmieniana i w dalszym ciągu można skonsultować się z ekranami pomocy (przy użyciu `dotnet <command> --help`) lub dokumentacji w tej witrynie, aby poznać wszelkie zmiany.</span><span class="sxs-lookup"><span data-stu-id="b326e-142">Majority of the options are not changed, and are still there, and you can consult either the commands' help screens (using `dotnet <command> --help`) or documentation on this site to get familiar with any changes.</span></span> 

<span data-ttu-id="b326e-143">Z perspektywy wykonywania polecenie interfejsu wiersza polecenia przyjmuje parametry i konstruuje wywołanie "RAW" MSBuild, który ustawi wymagane właściwości i uruchomi żądany element docelowy.</span><span class="sxs-lookup"><span data-stu-id="b326e-143">From an execution perspective, the CLI commands will take their parameters and construct a call to "raw" MSBuild that will set the needed properties and run the desired target.</span></span> <span data-ttu-id="b326e-144">Aby lepiej zilustrować ten sposób, weź pod uwagę następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="b326e-144">To better illustrate this, consider the following command:</span></span> 

   ```dotnetcli
   dotnet publish -o pub -c Release
   ```
    
<span data-ttu-id="b326e-145">To polecenie umożliwia opublikowanie aplikacji w folderze `pub` przy użyciu konfiguracji "Release".</span><span class="sxs-lookup"><span data-stu-id="b326e-145">This command is publishing an application into a `pub` folder using the "Release" configuration.</span></span> <span data-ttu-id="b326e-146">Wewnętrznie to polecenie jest tłumaczone na następujące wywołanie MSBuild:</span><span class="sxs-lookup"><span data-stu-id="b326e-146">Internally, this command gets translated into the following MSBuild invocation:</span></span> 

   ```dotnetcli
   dotnet msbuild -t:Publish -p:OutputPath=pub -p:Configuration=Release
   ```

<span data-ttu-id="b326e-147">Istotnym wyjątkiem od tej reguły są `new` i `run` polecenia, ponieważ nie zostały one zaimplementowane jako elementy docelowe programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="b326e-147">The notable exception to this rule are `new` and `run` commands, as they have not been implemented as MSBuild targets.</span></span>

<a name="dotnet-restore-note"></a>  
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
