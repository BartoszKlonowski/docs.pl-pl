---
title: Architektura narzędzi wiersza polecenia platformy .NET Core
description: Dowiedz się więcej o warstwach narzędzi programu .NET Core i zmianach w ostatnich wersjach.
ms.date: 03/06/2017
ms.openlocfilehash: 0064e7354f073be618bcf6a79962ab495927fadd
ms.sourcegitcommit: 19014f9c081ca2ff19652ca12503828db8239d48
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 02/04/2020
ms.locfileid: "76980213"
---
# <a name="high-level-overview-of-changes-in-the-net-core-tools"></a><span data-ttu-id="63424-103">Ogólne omówienie zmian w narzędziach .NET Core</span><span class="sxs-lookup"><span data-stu-id="63424-103">High-level overview of changes in the .NET Core tools</span></span>

<span data-ttu-id="63424-104">W tym dokumencie opisano zmiany związane z przechodzeniem z pliku *Project. JSON* do programu MSBuild i system projektu *csproj* z informacjami o zmianach w warstwach narzędzi platformy .NET Core i implementacji poleceń interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="63424-104">This document describes the changes associated with moving from *project.json* to MSBuild and the *csproj* project system with information on the changes to the layering of the .NET Core tooling and the implementation of the CLI commands.</span></span> <span data-ttu-id="63424-105">Te zmiany wystąpiły z wydaniem zestaw .NET Core SDK 1,0 i Visual Studio 2017 w dniu 7 marca 2017 (zobacz [anons](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)), ale początkowo zostały wdrożone w wersji zapoznawczej zestaw .NET Core SDK 3.</span><span class="sxs-lookup"><span data-stu-id="63424-105">These changes occurred with the release of .NET Core SDK 1.0 and Visual Studio 2017 on March 7, 2017 (see the [announcement](https://devblogs.microsoft.com/dotnet/announcing-net-core-tools-1-0/)) but were initially implemented with the release of the .NET Core SDK Preview 3.</span></span>

## <a name="moving-away-from-projectjson"></a><span data-ttu-id="63424-106">Przejście z pliku Project. JSON</span><span class="sxs-lookup"><span data-stu-id="63424-106">Moving away from project.json</span></span>

<span data-ttu-id="63424-107">Największą zmianą w narzędziach dla platformy .NET Core jest odmowa [od pliku Project. JSON do csproj](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) jako system projektu.</span><span class="sxs-lookup"><span data-stu-id="63424-107">The biggest change in the tooling for .NET Core is certainly the [move away from project.json to csproj](https://devblogs.microsoft.com/dotnet/changes-to-project-json/) as the project system.</span></span> <span data-ttu-id="63424-108">Najnowsze wersje narzędzi wiersza polecenia nie obsługują plików *Project. JSON* .</span><span class="sxs-lookup"><span data-stu-id="63424-108">The latest versions of the command-line tools don't support *project.json* files.</span></span> <span data-ttu-id="63424-109">Oznacza to, że nie można jej użyć do kompilowania, uruchamiania lub publikowania aplikacji i bibliotek opartych na pliku Project. JSON.</span><span class="sxs-lookup"><span data-stu-id="63424-109">That means that it cannot be used to build, run, or publish project.json based applications and libraries.</span></span> <span data-ttu-id="63424-110">Aby użyć tej wersji narzędzi, Migruj istniejące projekty lub Rozpocznij nowe.</span><span class="sxs-lookup"><span data-stu-id="63424-110">To use this version of the tools, migrate your existing projects or start new ones.</span></span>

<span data-ttu-id="63424-111">W ramach tego przenoszenia niestandardowy aparat kompilacji, który został opracowany do kompilowania projektów Project. JSON, został zastąpiony przez kompletny i w pełni obsługujący aparat kompilacji o nazwie [MSBuild](https://github.com/Microsoft/msbuild).</span><span class="sxs-lookup"><span data-stu-id="63424-111">As part of this move, the custom build engine that was developed to build project.json projects was replaced with a mature and fully capable build engine called [MSBuild](https://github.com/Microsoft/msbuild).</span></span> <span data-ttu-id="63424-112">Program MSBuild jest dobrze znanym aparatem w społeczności programu .NET.</span><span class="sxs-lookup"><span data-stu-id="63424-112">MSBuild is a well-known engine in the .NET community.</span></span> <span data-ttu-id="63424-113">Jest to kluczowa technologia od momentu pierwszej wersji platformy.</span><span class="sxs-lookup"><span data-stu-id="63424-113">It has been a key technology since the platform's first release.</span></span> <span data-ttu-id="63424-114">Ponieważ musi on kompilować aplikacje platformy .NET Core, program MSBuild został portem do programu .NET Core i może być używany na dowolnej platformie, na której działa .NET Core.</span><span class="sxs-lookup"><span data-stu-id="63424-114">Because it needs to build .NET Core applications, MSBuild has been ported to .NET Core and can be used on any platform that .NET Core runs on.</span></span> <span data-ttu-id="63424-115">Jednym z głównych niesie obietnice zwiększenia .NET Core jest to, że wieloplatformowy stos programistyczny, a my upewnimy się, że to przeniesienie nie przerywa tego obietnicy.</span><span class="sxs-lookup"><span data-stu-id="63424-115">One of the main promises of .NET Core is that of a cross-platform development stack, and we have made sure that this move does not break that promise.</span></span>

> [!TIP]
> <span data-ttu-id="63424-116">Jeśli jesteś nowym narzędziem MSBuild i chcesz dowiedzieć się więcej na jego temat, możesz zacząć od odczytywania artykułu [koncepcji programu MSBuild](/visualstudio/msbuild/msbuild-concepts) .</span><span class="sxs-lookup"><span data-stu-id="63424-116">If you are new to MSBuild and would like to learn more about it, you can start by reading the [MSBuild concepts](/visualstudio/msbuild/msbuild-concepts) article.</span></span>

## <a name="the-tooling-layers"></a><span data-ttu-id="63424-117">Warstwy narzędzi</span><span class="sxs-lookup"><span data-stu-id="63424-117">The tooling layers</span></span>

<span data-ttu-id="63424-118">Po przejściu z istniejącego systemu projektu, a także w przypadku tworzenia przełączników aparatu, pytanie, które w sposób naturalny następuje, zmieni ogólny "warstwowy" w całym ekosystemie narzędzi platformy .NET Core?</span><span class="sxs-lookup"><span data-stu-id="63424-118">With the move away from the existing project system as well as with building engine switches, the question that naturally follows is do any of these changes change the overall "layering" of the whole .NET Core tooling ecosystem?</span></span> <span data-ttu-id="63424-119">Czy istnieją nowe bity i składniki?</span><span class="sxs-lookup"><span data-stu-id="63424-119">Are there new bits and components?</span></span>

<span data-ttu-id="63424-120">Zacznijmy od szybkiego odświeżacza w wersji zapoznawczej 2, jak pokazano na poniższej ilustracji:</span><span class="sxs-lookup"><span data-stu-id="63424-120">Let's start with a quick refresher on Preview 2 layering as shown in the following picture:</span></span>

![Wersja zapoznawcza 2 — architektura wysokiego poziomu](media/cli-msbuild-architecture/p2-arch.png)

<span data-ttu-id="63424-122">Warstwa narzędzi jest bardzo prosta.</span><span class="sxs-lookup"><span data-stu-id="63424-122">The layering of the tools is quite simple.</span></span> <span data-ttu-id="63424-123">Na dole podstawą jest interfejs wiersza polecenia platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="63424-123">At the bottom, the foundation is the .NET Core CLI.</span></span> <span data-ttu-id="63424-124">Wszystkie inne narzędzia wyższego poziomu, takie jak Visual Studio lub Visual Studio Code, są zależne i polegają na interfejsie wiersza polecenia do kompilowania projektów, przywracania zależności i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="63424-124">All other, higher-level tools, such as Visual Studio or Visual Studio Code, depend and rely on the CLI to build projects, restore dependencies, and so on.</span></span> <span data-ttu-id="63424-125">Na przykład jeśli program Visual Studio chciał wykonać operację przywracania, wywoła on polecenie `dotnet restore` ([patrz Uwaga](#dotnet-restore-note)) w interfejsie wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="63424-125">For example, if Visual Studio wanted to perform a restore operation, it would call into `dotnet restore` ([see note](#dotnet-restore-note)) command in the CLI.</span></span>

<span data-ttu-id="63424-126">Po przejściu do nowego systemu projektu, poprzedni diagram zmienia się:</span><span class="sxs-lookup"><span data-stu-id="63424-126">With the move to the new project system, the previous diagram changes:</span></span>

![Architektura wysokiego poziomu zestaw .NET Core SDK 1.0.0](media/cli-msbuild-architecture/p3-arch.png)

<span data-ttu-id="63424-128">Główną różnicą jest to, że interfejs wiersza polecenia nie jest już podstawą. Ta rola jest teraz wypełniana przez "współużytkowany składnik zestawu SDK".</span><span class="sxs-lookup"><span data-stu-id="63424-128">The main difference is that the CLI is not the foundational layer anymore; this role is now filled by the "shared SDK component".</span></span> <span data-ttu-id="63424-129">Ten współużytkowany składnik zestawu SDK to zbiór elementów docelowych i skojarzonych zadań, które są odpowiedzialne za kompilowanie kodu, publikowanie go, pakowanie pakietów NuGet itd.</span><span class="sxs-lookup"><span data-stu-id="63424-129">This shared SDK component is a set of targets and associated tasks that are responsible for compiling code, publishing it, packing NuGet packages, and so on.</span></span> <span data-ttu-id="63424-130">Zestaw .NET Core SDK jest otwartym źródłem i jest dostępny w witrynie GitHub w [repozytorium zestawu SDK](https://github.com/dotnet/sdk).</span><span class="sxs-lookup"><span data-stu-id="63424-130">The .NET Core SDK is open-source and is available on GitHub on the [SDK repo](https://github.com/dotnet/sdk).</span></span>

> [!NOTE]
> <span data-ttu-id="63424-131">"Target" jest terminem MSBuild, który wskazuje nazwę operacji, którą MSBuild może wywołać.</span><span class="sxs-lookup"><span data-stu-id="63424-131">A "target" is an MSBuild term that indicates a named operation that MSBuild can invoke.</span></span> <span data-ttu-id="63424-132">Zwykle jest to powiązane z jednym lub kilkoma zadaniami, które wykonują pewną logikę, którą powinien wykonać element docelowy.</span><span class="sxs-lookup"><span data-stu-id="63424-132">It is usually coupled with one or more tasks that execute some logic that the target is supposed to do.</span></span> <span data-ttu-id="63424-133">Program MSBuild obsługuje wiele gotowych obiektów docelowych, takich jak `Copy` lub `Execute`; umożliwia również użytkownikom pisanie własnych zadań przy użyciu kodu zarządzanego i definiowanie celów do wykonania tych zadań.</span><span class="sxs-lookup"><span data-stu-id="63424-133">MSBuild supports many ready-made targets such as `Copy` or `Execute`; it also allows users to write their own tasks using managed code and define targets to execute those tasks.</span></span> <span data-ttu-id="63424-134">Aby uzyskać więcej informacji, zobacz [zadania programu MSBuild](/visualstudio/msbuild/msbuild-tasks).</span><span class="sxs-lookup"><span data-stu-id="63424-134">For more information, see [MSBuild tasks](/visualstudio/msbuild/msbuild-tasks).</span></span>

<span data-ttu-id="63424-135">Wszystkie zestawy narzędzi wykorzystują teraz współużytkowany składnik zestawu SDK i jego obiekty docelowe, dołączone do interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="63424-135">All the toolsets now consume the shared SDK component and its targets, CLI included.</span></span> <span data-ttu-id="63424-136">Na przykład program Visual Studio 2019 nie wywołuje polecenia `dotnet restore` ([patrz Uwaga](#dotnet-restore-note)), aby przywrócić zależności dla projektów .NET Core.</span><span class="sxs-lookup"><span data-stu-id="63424-136">For example, Visual Studio 2019 doesn't call into the `dotnet restore` ([see note](#dotnet-restore-note)) command to restore dependencies for .NET Core projects.</span></span> <span data-ttu-id="63424-137">Zamiast tego używa elementu docelowego "Restore" bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="63424-137">Instead, it uses the "Restore" target directly.</span></span> <span data-ttu-id="63424-138">Ponieważ są to obiekty docelowe programu MSBuild, można także użyć pierwotnego programu MSBuild do wykonywania ich przy użyciu polecenia programu [dotnet MSBuild](dotnet-msbuild.md) .</span><span class="sxs-lookup"><span data-stu-id="63424-138">Since these are MSBuild targets, you can also use raw MSBuild to execute them using the [dotnet msbuild](dotnet-msbuild.md) command.</span></span>

### <a name="cli-commands"></a><span data-ttu-id="63424-139">Poleceń interfejsu wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="63424-139">CLI commands</span></span>

<span data-ttu-id="63424-140">Współużytkowany składnik zestawu SDK oznacza, że większość istniejących poleceń interfejsu wiersza polecenia została zaimplementowana jako zadania i elementy docelowe programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="63424-140">The shared SDK component means that the majority of existing CLI commands have been re-implemented as MSBuild tasks and targets.</span></span> <span data-ttu-id="63424-141">Co to znaczy dla poleceń interfejsu wiersza polecenia i użycia zestawu narzędzi?</span><span class="sxs-lookup"><span data-stu-id="63424-141">What does this mean for the CLI commands and your usage of the toolset?</span></span>

<span data-ttu-id="63424-142">Z punktu widzenia użycia nie zmienia on sposobu korzystania z interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="63424-142">From a usage perspective, it doesn't change the way you use the CLI.</span></span> <span data-ttu-id="63424-143">Interfejs wiersza polecenia ma nadal dostępne podstawowe polecenie, które istniały w wersji .NET Core 1,0 Preview 2:</span><span class="sxs-lookup"><span data-stu-id="63424-143">The CLI still has the core commands that existed in the .NET Core 1.0 Preview 2 release:</span></span>

- `new`
- `restore`
- `run`
- `build`
- `publish`
- `test`
- `pack`

<span data-ttu-id="63424-144">Te polecenia nadal wykonują czynności, które należy wykonać (nowy projekt, kompilacja, publikowanie, pakowanie i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="63424-144">These commands still do what you expect them to do (new up a project, build it, publish it, pack it, and so on).</span></span> <span data-ttu-id="63424-145">Aby zapoznać się z zachowaniem, możesz zapoznać się z ekranem pomocy polecenia (za pomocą `dotnet <command> --help`) lub dokumentacją w tej witrynie.</span><span class="sxs-lookup"><span data-stu-id="63424-145">You can consult either the command's help screen (using `dotnet <command> --help`) or documentation on this site to get familiar with their behavior.</span></span>

<span data-ttu-id="63424-146">Z perspektywy wykonywania polecenie interfejsu wiersza polecenia przyjmuje parametry i konstruuje wywołanie "RAW" MSBuild, który ustawia wymagane właściwości i uruchamia żądany element docelowy.</span><span class="sxs-lookup"><span data-stu-id="63424-146">From an execution perspective, the CLI commands take their parameters and construct a call to "raw" MSBuild that sets the needed properties and runs the desired target.</span></span> <span data-ttu-id="63424-147">Aby lepiej zilustrować ten sposób, weź pod uwagę następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="63424-147">To better illustrate this, consider the following command:</span></span>

   ```dotnetcli
   dotnet publish -o pub -c Release
   ```

<span data-ttu-id="63424-148">To polecenie publikuje aplikację w folderze `pub` przy użyciu konfiguracji "Release".</span><span class="sxs-lookup"><span data-stu-id="63424-148">This command publishes an application into a `pub` folder using the "Release" configuration.</span></span> <span data-ttu-id="63424-149">Wewnętrznie to polecenie jest tłumaczone na następujące wywołanie MSBuild:</span><span class="sxs-lookup"><span data-stu-id="63424-149">Internally, this command gets translated into the following MSBuild invocation:</span></span>

   ```dotnetcli
   dotnet msbuild -t:Publish -p:OutputPath=pub -p:Configuration=Release
   ```

<span data-ttu-id="63424-150">Istotne wyjątki od tej reguły to `new` i `run` polecenia.</span><span class="sxs-lookup"><span data-stu-id="63424-150">Notable exceptions to this rule are the `new` and `run` commands.</span></span> <span data-ttu-id="63424-151">Nie zostały one zaimplementowane jako cele programu MSBuild.</span><span class="sxs-lookup"><span data-stu-id="63424-151">They have not been implemented as MSBuild targets.</span></span>

<a name="dotnet-restore-note"></a>
[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]
