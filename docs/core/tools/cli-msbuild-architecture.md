---
title: "Architektura narzędzi wiersza polecenia programu .NET core"
description: "Więcej informacji na temat platformy .NET Core narzędzi warstwy i co się zmieniło w nowszych wersjach."
keywords: Architektura .NET core MSBuild,
author: blackdwarf
ms.date: 03/06/2017
ms.topic: article
ms.prod: .net-core
ms.technology: dotnet-cli
ms.devlang: dotnet
ms.assetid: 7fff0f61-ac23-42f0-9661-72a7240a4456
ms.openlocfilehash: ad34faa0c2577bd5e3a0ba339b19a9ad387e015a
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/18/2017
---
# <a name="high-level-overview-of-changes-in-the-net-core-tools"></a><span data-ttu-id="7167e-104">Ogólne omówienie zmian w narzędziach .NET Core</span><span class="sxs-lookup"><span data-stu-id="7167e-104">High-level overview of changes in the .NET Core tools</span></span>

<span data-ttu-id="7167e-105">W tym dokumencie opisano zmiany skojarzone z przenoszenie z *project.json* dla programu MSBuild i *csproj* projektu systemu informacji o zmiany kolejności nakładania się narzędzi platformy .NET Core i wykonanie polecenia interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="7167e-105">This document describes the changes associated with moving from *project.json* to MSBuild and the *csproj* project system with information on the changes to the layering of the .NET Core tooling and the implementation of the CLI commands.</span></span> <span data-ttu-id="7167e-106">Te zmiany na 7 marca 2017 wystąpił w wersji 1.0 zestawu SDK programu .NET Core i Visual Studio 2017 (zobacz [anonsu](https://blogs.msdn.microsoft.com/dotnet/2017/03/07/announcing-net-core-tools-1-0/)), ale początkowo zostały wprowadzone w wersji programu .NET Core SDK w wersji zapoznawczej 3.</span><span class="sxs-lookup"><span data-stu-id="7167e-106">These changes occurred with the release of .NET Core SDK 1.0 and Visual Studio 2017 on March 7, 2017 (see the [announcement](https://blogs.msdn.microsoft.com/dotnet/2017/03/07/announcing-net-core-tools-1-0/)) but were initially implemented with the release of the .NET Core SDK Preview 3.</span></span>

## <a name="moving-away-from-projectjson"></a><span data-ttu-id="7167e-107">Przenoszenie od pliku project.json</span><span class="sxs-lookup"><span data-stu-id="7167e-107">Moving away from project.json</span></span>
<span data-ttu-id="7167e-108">Największych zmiana narzędzi dla platformy .NET Core jest oczywiście [przenieść poza project.json csproj](https://blogs.msdn.microsoft.com/dotnet/2016/05/23/changes-to-project-json/) jako system projektu.</span><span class="sxs-lookup"><span data-stu-id="7167e-108">The biggest change in the tooling for .NET Core is certainly the [move away from project.json to csproj](https://blogs.msdn.microsoft.com/dotnet/2016/05/23/changes-to-project-json/) as the project system.</span></span> <span data-ttu-id="7167e-109">Najnowsze wersje narzędzia wiersza polecenia nie obsługują *project.json* plików.</span><span class="sxs-lookup"><span data-stu-id="7167e-109">The latest versions of the command-line tools don't support *project.json* files.</span></span> <span data-ttu-id="7167e-110">Oznacza to, że nie może służyć do kompilacji, uruchomić lub publikowania aplikacji na podstawie pliku project.json i bibliotek.</span><span class="sxs-lookup"><span data-stu-id="7167e-110">That means that it cannot be used to build, run or publish project.json based applications and libraries.</span></span> <span data-ttu-id="7167e-111">Aby można było używać tej wersji narzędzi, należy przeprowadzić migrację istniejących projektów lub Rozpocznij nowe.</span><span class="sxs-lookup"><span data-stu-id="7167e-111">In order to use this version of the tools, you will need to migrate your existing projects or start new ones.</span></span> 

<span data-ttu-id="7167e-112">W ramach tego przeniesienia, aparat niestandardowej kompilacji, który został opracowany do kompilacji projektów project.json został zastąpiony aparatem dojrzałe i w pełni współpracować kompilacji o nazwie [MSBuild](https://github.com/Microsoft/msbuild).</span><span class="sxs-lookup"><span data-stu-id="7167e-112">As part of this move, the custom build engine that was developed to build project.json projects was replaced with a mature and fully capable build engine called [MSBuild](https://github.com/Microsoft/msbuild).</span></span> <span data-ttu-id="7167e-113">MSBuild jest dobrze znanego aparatu w społeczności .NET, ponieważ był to kluczowa technologia od pierwszej wersji platformy.</span><span class="sxs-lookup"><span data-stu-id="7167e-113">MSBuild is a well-known engine in the .NET community, since it has been a key technology since the platform's first release.</span></span> <span data-ttu-id="7167e-114">Oczywiście ponieważ należy do tworzenia aplikacji platformy .NET Core, MSBuild systemie .NET Core i można używać na dowolnej platformie .NET Core uruchamianego na.</span><span class="sxs-lookup"><span data-stu-id="7167e-114">Of course, because it needs to build .NET Core applications, MSBuild has been ported to .NET Core and can be used on any platform that .NET Core runs on.</span></span> <span data-ttu-id="7167e-115">Jedną z głównych zapowiedzi .NET Core jest to, że stosu wiele platform i wprowadzono się, że to przeniesienie przerwał tego promise.</span><span class="sxs-lookup"><span data-stu-id="7167e-115">One of the main promises of .NET Core is that of a cross-platform development stack, and we have made sure that this move does not break that promise.</span></span>

> [!NOTE]
> <span data-ttu-id="7167e-116">Jeśli dopiero zaczynasz korzystać z programu MSBuild i chcesz dowiedzieć się więcej informacji na ten temat, możesz uruchomić odczytywania [pojęcia dotyczące programu MSBuild](/visualstudio/msbuild/msbuild-concepts) artykułu.</span><span class="sxs-lookup"><span data-stu-id="7167e-116">If you are new to MSBuild and would like to learn more about it, you can start by reading the [MSBuild Concepts](/visualstudio/msbuild/msbuild-concepts) article.</span></span> 

## <a name="the-tooling-layers"></a><span data-ttu-id="7167e-117">Warstwy narzędzi</span><span class="sxs-lookup"><span data-stu-id="7167e-117">The tooling layers</span></span>
<span data-ttu-id="7167e-118">Wraz z przejściem od istniejącego systemu projektów, a także budowania aparat przełączników pytanie naturalnie jest zmian zmienić ogólnej "warstwy" cały ekosystem narzędzi platformy .NET Core?</span><span class="sxs-lookup"><span data-stu-id="7167e-118">With the move away from the existing project system as well as with building engine switches, the question that naturally follows is do any of these changes change the overall "layering" of the whole .NET Core tooling ecosystem?</span></span> <span data-ttu-id="7167e-119">Istnieją nowe usługi bits i składniki?</span><span class="sxs-lookup"><span data-stu-id="7167e-119">Are there new bits and components?</span></span>

<span data-ttu-id="7167e-120">Zacznijmy od szybkie odświeżacz na tworzenie warstw Preview 2 jak pokazano na poniższej ilustracji:</span><span class="sxs-lookup"><span data-stu-id="7167e-120">Let's start with a quick refresher on Preview 2 layering as shown in the following picture:</span></span>

![Architektura wysokiego poziomu narzędzi Preview 2](media/cli-msbuild-architecture/p2-arch.png)

<span data-ttu-id="7167e-122">Tworzenie warstw narzędzi jest bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="7167e-122">The layering of the tools is quite simple.</span></span> <span data-ttu-id="7167e-123">W dolnej części jako podstawę zostały narzędzia wiersza polecenia programu .NET Core.</span><span class="sxs-lookup"><span data-stu-id="7167e-123">At the bottom we have the .NET Core Command Line tools as a foundation.</span></span> <span data-ttu-id="7167e-124">Wszystkie inne, wyższego poziomu narzędzi takich jak Visual Studio lub Visual Studio Code, są zależne i zależne od interfejsu wiersza polecenia do kompilacji projektów, Przywróć zależności i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="7167e-124">All other, higher-level tools such as Visual Studio or Visual Studio Code, depend and rely on the CLI to build projects, restore dependencies and so on.</span></span> <span data-ttu-id="7167e-125">Oznacza to, że na przykład, jeśli program Visual Studio do wykonania operacji przywracania, jego spowodowałoby wywołanie do `dotnet restore` ([patrz Uwaga](#dotnet-restore-note)) w interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="7167e-125">This meant that, for example, if Visual Studio wanted to perform a restore operation, it would call into `dotnet restore` ([see note](#dotnet-restore-note)) command in the CLI.</span></span> 

<span data-ttu-id="7167e-126">Wraz z przejściem do nowego systemu projektu poprzedni diagram zmiany:</span><span class="sxs-lookup"><span data-stu-id="7167e-126">With the move to the new project system, the previous diagram changes:</span></span> 

![Architektura wysokiego poziomu zestawu SDK programu .NET core 1.0.0](media/cli-msbuild-architecture/p3-arch.png)

<span data-ttu-id="7167e-128">Główną różnicą jest to, że interfejsu wiersza polecenia nie jest podstawowym warstwy już; Ta rola zostanie wypełniony przez "składnika współużytkowanego zestawu SDK".</span><span class="sxs-lookup"><span data-stu-id="7167e-128">The main difference is that the CLI is not the foundational layer anymore; this role is now filled by the "shared SDK component".</span></span> <span data-ttu-id="7167e-129">Ten składnik udostępnionego zestawu SDK jest zestaw elementów docelowych i skojarzone zadania, które są odpowiedzialne za kompilowanie kodu, publikowania, pakowanie pakietów NuGet itp. Sam zestaw SDK open source i jest dostępny w witrynie GitHub na [repozytorium SDK](https://github.com/dotnet/sdk).</span><span class="sxs-lookup"><span data-stu-id="7167e-129">This shared SDK component is a set of targets and associated tasks that are responsible for compiling your code, publishing it, packing NuGet packages etc. The SDK itself is open-source and is available on GitHub on the [SDK repo](https://github.com/dotnet/sdk).</span></span> 

> [!NOTE]
> <span data-ttu-id="7167e-130">"Miejsce docelowe" to termin MSBuild wskazuje nazwanego operacji, które może wywołać program MSBuild.</span><span class="sxs-lookup"><span data-stu-id="7167e-130">A "target" is a MSBuild term that indicates a named operation that MSBuild can invoke.</span></span> <span data-ttu-id="7167e-131">Jest on zwykle połączone z jednego lub więcej zadań, które wykonać niektóre logiki element docelowy powinien wykonać.</span><span class="sxs-lookup"><span data-stu-id="7167e-131">It is usually coupled with one or more tasks that execute some logic that the target is supposed to do.</span></span> <span data-ttu-id="7167e-132">MSBuild obsługuje wiele gotowych elementów docelowych, takich jak `Copy` lub `Execute`; umożliwia także użytkownikom pisać własne zadania przy użyciu kodu zarządzanego i zdefiniuj cele do wykonania tych zadań.</span><span class="sxs-lookup"><span data-stu-id="7167e-132">MSBuild supports many ready-made targets such as `Copy` or `Execute`; it also allows users to write their own tasks using managed code and define targets to execute those tasks.</span></span> <span data-ttu-id="7167e-133">Aby uzyskać więcej informacji, zobacz [zadania programu MSBuild](/visualstudio/msbuild/msbuild-tasks).</span><span class="sxs-lookup"><span data-stu-id="7167e-133">For more information, see [MSBuild tasks](/visualstudio/msbuild/msbuild-tasks).</span></span> 

<span data-ttu-id="7167e-134">Wszystkie procesami teraz korzystać z udostępnionego składnika zestawu SDK i jego elementów docelowych, interfejsu wiersza polecenia uwzględnione.</span><span class="sxs-lookup"><span data-stu-id="7167e-134">All the toolsets now consume the shared SDK component and its targets, CLI included.</span></span> <span data-ttu-id="7167e-135">Na przykład na następną wersję programu Visual Studio nie zostanie wywołany `dotnet restore` ([patrz Uwaga](#dotnet-restore-note)) polecenia do przywrócenia zależności dla platformy .NET Core projektów, zostanie użyty element docelowy "Przywracanie" bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="7167e-135">For example, the next version of Visual Studio will not call into `dotnet restore` ([see note](#dotnet-restore-note)) command to restore dependencies for .NET Core projects, it will use the "Restore" target directly.</span></span> <span data-ttu-id="7167e-136">Ponieważ są one docelowych elementów MSBuild, umożliwia także raw MSBuild można wykonać je za pomocą [dotnet msbuild](dotnet-msbuild.md) polecenia.</span><span class="sxs-lookup"><span data-stu-id="7167e-136">Since these are MSBuild targets, you can also use raw MSBuild to execute them using the [dotnet msbuild](dotnet-msbuild.md) command.</span></span> 

### <a name="cli-commands"></a><span data-ttu-id="7167e-137">Polecenia interfejsu wiersza polecenia</span><span class="sxs-lookup"><span data-stu-id="7167e-137">CLI commands</span></span>
<span data-ttu-id="7167e-138">Składnik zestawu SDK udostępnionego oznacza, że większość istniejących poleceń interfejsu wiersza polecenia zostały ponownie zaimplementowane jako zadania programu MSBuild i obiektów docelowych.</span><span class="sxs-lookup"><span data-stu-id="7167e-138">The shared SDK component means that the majority of existing CLI commands have been re-implemented as MSBuild tasks and targets.</span></span> <span data-ttu-id="7167e-139">Co to znaczy polecenia interfejsu wiersza polecenia i użycie zestawu narzędzi</span><span class="sxs-lookup"><span data-stu-id="7167e-139">What does this mean for the CLI commands and your usage of the toolset?</span></span> 

<span data-ttu-id="7167e-140">Z perspektywy użycia nie zmienia sposób użycia interfejsu wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="7167e-140">From an usage perspective, it doesn't change the way you use the CLI.</span></span> <span data-ttu-id="7167e-141">Interfejsu wiersza polecenia nadal ma podstawowe polecenia, które istnieją w wersji Preview 2:</span><span class="sxs-lookup"><span data-stu-id="7167e-141">The CLI still has the core commands that exist in Preview 2 release:</span></span>

* `new`
* `restore`
* `run` 
* `build`
* `publish`
* `test`
* `pack` 

<span data-ttu-id="7167e-142">Te polecenia są nadal oczekiwaniami (nowy projekt, skompiluj go, przed opublikowaniem, pakiet go i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="7167e-142">These commands still do what you expect them to do (new up a project, build it, publish it, pack it and so on).</span></span> <span data-ttu-id="7167e-143">Większość opcji nie są zmieniane i nadal występują i można znaleźć ekrany pomocy poleceń (przy użyciu `dotnet <command> --help`) lub dokumentacji w tej lokacji, aby zapoznać się z wszelkie zmiany.</span><span class="sxs-lookup"><span data-stu-id="7167e-143">Majority of the options are not changed, and are still there, and you can consult either the commands' help screens (using `dotnet <command> --help`) or documentation on this site to get familiar with any changes.</span></span> 

<span data-ttu-id="7167e-144">Z perspektywy wykonanie polecenia interfejsu wiersza polecenia otrzymuje ich parametrów i utworzyć wywołanie "nieprzetworzonej" MSBuild, który będzie wymagane właściwości, a następnie uruchom wybrany element docelowy.</span><span class="sxs-lookup"><span data-stu-id="7167e-144">From an execution perspective, the CLI commands will take their parameters and construct a call to "raw" MSBuild that will set the needed properties and run the desired target.</span></span> <span data-ttu-id="7167e-145">Aby lepiej zilustrować ten, należy wziąć pod uwagę następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="7167e-145">To better illustrate this, consider the following command:</span></span> 

   `dotnet publish -o pub -c Release`
    
<span data-ttu-id="7167e-146">To polecenie jest publikowanie aplikacji w `pub` folderu za pomocą konfiguracji "Wersja".</span><span class="sxs-lookup"><span data-stu-id="7167e-146">This command is publishing an application into a `pub` folder using the "Release" configuration.</span></span> <span data-ttu-id="7167e-147">Wewnętrznie to polecenie pobiera przetłumaczyć następujące wywołanie MSBuild:</span><span class="sxs-lookup"><span data-stu-id="7167e-147">Internally, this command gets translated into the following MSBuild invocation:</span></span> 

   `dotnet msbuild /t:Publish /p:OutputPath=pub /p:Configuration=Release`

<span data-ttu-id="7167e-148">Godne wyjątkiem od tej reguły są `new` i `run` polecenia, ponieważ nie zostały one wdrożone jako docelowych elementów MSBuild.</span><span class="sxs-lookup"><span data-stu-id="7167e-148">The notable exception to this rule are `new` and `run` commands, as they have not been implemented as MSBuild targets.</span></span>

<a name="dotnet-restore-note"></a> <span data-ttu-id="7167e-149">[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]</span><span class="sxs-lookup"><span data-stu-id="7167e-149">[!INCLUDE[DotNet Restore Note](~/includes/dotnet-restore-note.md)]</span></span>