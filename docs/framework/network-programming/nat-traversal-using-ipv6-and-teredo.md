---
title: Przechodzenie translatora adresów Sieciowych przy użyciu protokołu IPv6 i Teredo
ms.date: 03/30/2017
ms.assetid: 568cd245-3300-49ef-a995-d81bf845d961
author: mcleblanc
ms.author: markl
ms.openlocfilehash: 7ee219f8ecb3103e5f9676498b09f290d6e7be8d
ms.sourcegitcommit: 69229651598b427c550223d3c58aba82e47b3f82
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/04/2018
ms.locfileid: "48581943"
---
# <a name="nat-traversal-using-ipv6-and-teredo"></a><span data-ttu-id="8be0e-102">Przechodzenie translatora adresów Sieciowych przy użyciu protokołu IPv6 i Teredo</span><span class="sxs-lookup"><span data-stu-id="8be0e-102">NAT Traversal using IPv6 and Teredo</span></span>
<span data-ttu-id="8be0e-103">Wprowadzono ulepszenia, które umożliwiają przechodzenie translacji adresów sieciowych (NAT).</span><span class="sxs-lookup"><span data-stu-id="8be0e-103">Enhancements were made that provide support for Network Address Translation (NAT) traversal.</span></span> <span data-ttu-id="8be0e-104">Te zmiany są skonstruowane do użycia przy użyciu protokołu IPv6 i Teredo, ale są one również zastosowanie do innych adresów IP, tunelowanie technologii.</span><span class="sxs-lookup"><span data-stu-id="8be0e-104">These changes are designed for use with IPv6 and Teredo, but they are also applicable to other IP tunneling technologies.</span></span> <span data-ttu-id="8be0e-105">Te ulepszenia wpływają na klas w <xref:System.Net> i pokrewnych przestrzeniach nazw.</span><span class="sxs-lookup"><span data-stu-id="8be0e-105">These enhancements affect classes in the <xref:System.Net> and related namespaces.</span></span>  
  
 <span data-ttu-id="8be0e-106">Te zmiany mogą wpływać na klienta i serwera aplikacji, które planujesz używać tunelowania technologii adresu IP.</span><span class="sxs-lookup"><span data-stu-id="8be0e-106">These changes can affect client and server applications that plan to use IP tunneling technologies.</span></span>  
  
 <span data-ttu-id="8be0e-107">Zmiany, które umożliwiają przechodzenie translatora adresów Sieciowych są dostępne tylko dla aplikacji przy użyciu platformy .NET Framework w wersji 4.</span><span class="sxs-lookup"><span data-stu-id="8be0e-107">The changes to support NAT traversal are available only for applications using .NET Framework version 4.</span></span> <span data-ttu-id="8be0e-108">Te funkcje nie są dostępne we wcześniejszych wersjach programu .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="8be0e-108">These features are not available on earlier versions of the .NET Framework.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="8be0e-109">Omówienie</span><span class="sxs-lookup"><span data-stu-id="8be0e-109">Overview</span></span>  
 <span data-ttu-id="8be0e-110">Protokołu internetowego w wersji 4 (IPv4) adres IPv4 są zdefiniowane jako 32 bity długości.</span><span class="sxs-lookup"><span data-stu-id="8be0e-110">The Internet Protocol version 4 (IPv4) defined an IPv4 address as 32 bits long.</span></span> <span data-ttu-id="8be0e-111">W rezultacie protokołu IPv4 obsługuje około 4 miliardy unikatowych adresów IP (2 ^ 32).</span><span class="sxs-lookup"><span data-stu-id="8be0e-111">As a result, IPv4 supports approximately 4 billion unique IP addresses (2^32).</span></span> <span data-ttu-id="8be0e-112">Jako liczba komputerów i urządzeń sieciowych w Internecie, rozwinięty w 1990s granice przestrzeni adresów IPv4 stał się widoczny.</span><span class="sxs-lookup"><span data-stu-id="8be0e-112">As the number of computers and network devices on the Internet expanded in the 1990s, the limits of the IPv4 address space became apparent.</span></span>  
  
 <span data-ttu-id="8be0e-113">Jeden z kilku technik używanej do rozszerzania okres istnienia IPv4 został wdrażania translatora adresów Sieciowych, aby zezwolić na jeden unikatowy publiczny adres IP do reprezentowania dużej liczby prywatny adres IP adresów (prywatny Intranet).</span><span class="sxs-lookup"><span data-stu-id="8be0e-113">One of several techniques used to extend the lifetime of IPv4 has been to deploy NAT to allow a single unique public IP address to represent a large number of private IP addresses (private Intranet).</span></span> <span data-ttu-id="8be0e-114">Prywatne adresy IP za urządzeniem NAT udostępnianie jednego publicznego adresu IPv4.</span><span class="sxs-lookup"><span data-stu-id="8be0e-114">The private IP addresses behind the NAT device share the single public IPv4 address.</span></span> <span data-ttu-id="8be0e-115">Urządzenie NAT może być dedykowanym urządzeniem sprzętowym (niedrogie punkt dostępu bezprzewodowego i routera, na przykład) lub komputera z uruchomioną usługą w celu zapewnienia translatora adresów sieciowych.</span><span class="sxs-lookup"><span data-stu-id="8be0e-115">The NAT device may be a dedicated hardware device (an inexpensive Wireless Access Point and router, for example) or a computer running a service to provide NAT.</span></span> <span data-ttu-id="8be0e-116">Urządzenie lub usługa dla tego publicznego adresu IP dokonuje translacji pakietów sieciowych adresów IP między publicznym Internetem a prywatny Intranet.</span><span class="sxs-lookup"><span data-stu-id="8be0e-116">A device or service for this public IP address translates IP network packets between the public Internet and the private Intranet.</span></span>  
  
 <span data-ttu-id="8be0e-117">Ten schemat działa dobrze w przypadku aplikacji klienckich działających na prywatnym intranetem, które wysyłają żądania z innymi adresami IP (zazwyczaj serwery) w Internecie.</span><span class="sxs-lookup"><span data-stu-id="8be0e-117">This scheme works well for client applications running on the private Intranet that send requests to other IP addresses (usually servers) on the Internet.</span></span> <span data-ttu-id="8be0e-118">Urządzenie NAT lub serwer można pozostawić mapowanie żądań klientów to gdy odpowiedź jest zwracana wie, gdzie wysyłać odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="8be0e-118">The NAT device or server can keep a mapping of client requests so when a response is returned it knows where to send the response.</span></span> <span data-ttu-id="8be0e-119">Jednak ten schemat stwarza problemy dla aplikacji uruchamianych w prywatnym intranecie za urządzeniem NAT, które do świadczenia usług, nasłuchiwania pakietów oraz reagować.</span><span class="sxs-lookup"><span data-stu-id="8be0e-119">But this scheme poses problems for applications running in the private Intranet behind the NAT device that want to provide services, listen for packets, and respond.</span></span> <span data-ttu-id="8be0e-120">Jest to szczególnie w przypadku aplikacji peer-to-peer.</span><span class="sxs-lookup"><span data-stu-id="8be0e-120">This is particularly the case for peer-to-peer applications.</span></span>  
  
 <span data-ttu-id="8be0e-121">Protokół IPv6 określa adres IPv4 jako długości 128 bitów.</span><span class="sxs-lookup"><span data-stu-id="8be0e-121">The IPv6 protocol defined an IPv4 address as 128 bits long.</span></span> <span data-ttu-id="8be0e-122">W rezultacie IPv6 obsługuje bardzo duża przestrzeń adresów IP 3.2 x 10 ^ 38 unikatowych adresów (2 ^ 128).</span><span class="sxs-lookup"><span data-stu-id="8be0e-122">As a result, IPv6 supports very a large IP address space of 3.2 x 10^38 unique addresses (2^128).</span></span> <span data-ttu-id="8be0e-123">Przy użyciu przestrzeni adresowej o takim rozmiarze jest możliwe dla każdego urządzenia połączone z Internetem, otrzyma unikatowy adres.</span><span class="sxs-lookup"><span data-stu-id="8be0e-123">With an address space of this size, it is possible for every device connected to the Internet to be given a unique address.</span></span> <span data-ttu-id="8be0e-124">Ale występują problemy.</span><span class="sxs-lookup"><span data-stu-id="8be0e-124">But there are problems.</span></span> <span data-ttu-id="8be0e-125">Większość świecie nadal jest używany tylko protokół IPv4.</span><span class="sxs-lookup"><span data-stu-id="8be0e-125">Much of the world is still using only IPv4.</span></span> <span data-ttu-id="8be0e-126">W szczególności wiele routery i punktów dostępu bezprzewodowego używanych przez małe firmy, organizacje i gospodarstw domowych nie obsługują protokołu IPv6.</span><span class="sxs-lookup"><span data-stu-id="8be0e-126">In particular, many of the existing routers and wireless access points used by small companies, organizations, and households do not support IPv6.</span></span> <span data-ttu-id="8be0e-127">Ponadto niektórzy usługodawcy internetowi, które pełnią Ci klienci nie obsługują albo nie skonfigurowano obsługę protokołu IPv6.</span><span class="sxs-lookup"><span data-stu-id="8be0e-127">Also some Internet service providers that serve these customers either do not support or have not configured support for IPv6.</span></span>  
  
 <span data-ttu-id="8be0e-128">Kilka technologie przejściowe IPv6 zostały opracowane w celu adresy w tunelu IPv6 w pakiecie IPv4.</span><span class="sxs-lookup"><span data-stu-id="8be0e-128">Several IPv6 transition technologies have been developed to tunnel IPv6 addresses in an IPv4 packet.</span></span> <span data-ttu-id="8be0e-129">Te technologie obejmują usługi 6to4 protokołu ISATAP, i tunele protokołu Teredo, zapewniające przypisywania adresów i hosta do automatycznego tunelowania ruchu IPv6 emisji pojedynczej Jeśli hosty IPv6 musi przechodzić przez IP4 sieci w celu dostępu do innych sieci IPv6.</span><span class="sxs-lookup"><span data-stu-id="8be0e-129">These technologies include 6to4, ISATAP, and Teredo tunnels that provide address assignment and host-to-host automatic tunneling for unicast IPv6 traffic when IPv6 hosts must traverse IP4 networks to reach other IPv6 networks.</span></span> <span data-ttu-id="8be0e-130">Pakiety IPv6 są wysyłane tunelowane jako pakiety protokołu IPv4.</span><span class="sxs-lookup"><span data-stu-id="8be0e-130">IPv6 packets are sent tunneled as IPv4 packets.</span></span> <span data-ttu-id="8be0e-131">Kilka technik tunelowania są używane przez urządzenie NAT zezwalających na Przechodzenie translatora adresów Sieciowych dla adresów IPv6.</span><span class="sxs-lookup"><span data-stu-id="8be0e-131">Several tunneling techniques are being used that allow NAT traversal for IPv6 addresses through a NAT device.</span></span>  
  
 <span data-ttu-id="8be0e-132">Protokół Teredo jest jednym z technologie przejściowe IPv6, które udostępnia łączność IPv6 w sieci IPv4.</span><span class="sxs-lookup"><span data-stu-id="8be0e-132">Teredo is one of the IPv6 transition technologies which brings IPv6 connectivity to IPv4 networks.</span></span> <span data-ttu-id="8be0e-133">Protokół Teredo jest udokumentowany w dokumencie RFC 4380 opublikowane przez Internet Engineering Task Force (IETF).</span><span class="sxs-lookup"><span data-stu-id="8be0e-133">Teredo is documented in RFC 4380 published by the Internet Engineering Task Force (IETF).</span></span> <span data-ttu-id="8be0e-134">Windows XP z dodatkiem SP2 oraz później zapewnić wsparcie dla wirtualnej karty sieciowej protokołu Teredo, co może zapewnić publiczny adres IPv6 w zakresie 2001: 0:: / 32.</span><span class="sxs-lookup"><span data-stu-id="8be0e-134">Windows XP SP2 and later provide support for a virtual Teredo adapter which can provide a public IPv6 address in the range 2001:0::/32.</span></span> <span data-ttu-id="8be0e-135">Ten adres IPv6 może służyć do nasłuchiwania połączeń przychodzących z Internetu i mogą otrzymywać klientom włączony protokół IPv6, które chcą nawiązać połączenie z usługą nasłuchiwania.</span><span class="sxs-lookup"><span data-stu-id="8be0e-135">This IPv6 address can be used to listen for incoming connections from the Internet and can be provided to IPv6 enabled clients that wish to connect to the listening service.</span></span> <span data-ttu-id="8be0e-136">To powoduje zwolnienie aplikacji z konieczności martwienia się o adres komputera za urządzeniem NAT, ponieważ aplikacja może po prostu nawiązać z nim przy użyciu jego adresu IPv6 klientów Teredo.</span><span class="sxs-lookup"><span data-stu-id="8be0e-136">This frees an application from worrying about how to address a computer behind a NAT device, since the application can just connect to it using its IPv6 Teredo address.</span></span>  
  
## <a name="enhancements-to-support-nat-traversal-and-teredo"></a><span data-ttu-id="8be0e-137">Ulepszenia obsługi Przechodzenie translatora adresów Sieciowych i Teredo</span><span class="sxs-lookup"><span data-stu-id="8be0e-137">Enhancements to Support NAT Traversal and Teredo</span></span>  
 <span data-ttu-id="8be0e-138">Ulepszenia są dodawane do <xref:System.Net>, <xref:System.Net.NetworkInformation>, i <xref:System.Net.Sockets> przestrzenie nazw do obsługi Przechodzenie translatora adresów Sieciowych przy użyciu protokołu IPv6 i Teredo.</span><span class="sxs-lookup"><span data-stu-id="8be0e-138">Enhancements are added to the <xref:System.Net>, <xref:System.Net.NetworkInformation>, and <xref:System.Net.Sockets> namespaces for supporting NAT traversal using IPv6 and Teredo.</span></span>  
  
 <span data-ttu-id="8be0e-139">Kilka metod są dodawane do <xref:System.Net.NetworkInformation.IPGlobalProperties?displayProperty=nameWithType> klasy w celu uzyskania adresów IP listę emisji pojedynczej na hoście.</span><span class="sxs-lookup"><span data-stu-id="8be0e-139">Several methods are added to the <xref:System.Net.NetworkInformation.IPGlobalProperties?displayProperty=nameWithType> class to get the list of unicast IP addresses on the host.</span></span> <span data-ttu-id="8be0e-140"><xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A> Metoda rozpoczyna żądania asynchronicznego, można pobrać tabeli adresów IP emisji pojedynczej stabilna na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="8be0e-140">The <xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A> method begins an asynchronous request to retrieve the stable unicast IP address table on the local computer.</span></span> <span data-ttu-id="8be0e-141"><xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A> Metoda kończy się oczekującego żądania asynchronicznego, można pobrać tabeli adresów IP emisji pojedynczej stabilna na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="8be0e-141">The <xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A> method ends a pending asynchronous request to retrieve the stable unicast IP address table on the local computer.</span></span> <span data-ttu-id="8be0e-142"><xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A> Metodą jest synchroniczne żądanie pobrania tabeli adresów IP emisji pojedynczej stabilna na komputerze lokalnym, czekając na tabelę adresów stabilizuje się, jeśli to konieczne.</span><span class="sxs-lookup"><span data-stu-id="8be0e-142">The <xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A> method is a synchronous request to retrieve the stable unicast IP address table on the local computer, waiting until the address table stabilizes if necessary.</span></span>  
  
 <span data-ttu-id="8be0e-143"><xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType> Właściwość może służyć do określenia, czy <xref:System.Net.IPAddress> jest adresem IPv6 klientów Teredo.</span><span class="sxs-lookup"><span data-stu-id="8be0e-143">The <xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType> property can be used to determine if an <xref:System.Net.IPAddress> is an IPv6 Teredo address.</span></span>  
  
 <span data-ttu-id="8be0e-144">Korzystanie z tych nowych <xref:System.Net.NetworkInformation.IPGlobalProperties> metody w połączeniu z klasy <xref:System.Net.IPAddress.IsIPv6Teredo%2A> właściwość umożliwia aplikacji łatwo znaleźć adresu Teredo.</span><span class="sxs-lookup"><span data-stu-id="8be0e-144">Using these new <xref:System.Net.NetworkInformation.IPGlobalProperties> class methods in combination with the <xref:System.Net.IPAddress.IsIPv6Teredo%2A> property allows an application to easily find the Teredo address.</span></span> <span data-ttu-id="8be0e-145">Aplikacja wymaga zwykle jedynie znać lokalnego adresu Teredo, jeśli komunikuje się te informacje do zdalnych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8be0e-145">An application normally only needs to know the local Teredo address if it is communicating this information to remote applications.</span></span> <span data-ttu-id="8be0e-146">Na przykład aplikacji peer-to-peer może wysyłać, wszystkie jego adresy IPv6 do serwera matchmaking, który można następnie prześlij je dalej do innych osób prowadzi komunikację równorzędną, aby włączyć bezpośrednią komunikację.</span><span class="sxs-lookup"><span data-stu-id="8be0e-146">For example, a peer-to-peer application might send all of its IPv6 addresses to a matchmaking server which can then forward them to others peers to enable direct communication.</span></span>  
  
 <span data-ttu-id="8be0e-147">Aplikacja zazwyczaj należy ustawić jego service nasłuchiwania do nasłuchiwania <xref:System.Net.IPAddress.IPv6Any?displayProperty=nameWithType> , a nie na lokalnym adresem Teredo.</span><span class="sxs-lookup"><span data-stu-id="8be0e-147">An application should normally set its listening service to listen on <xref:System.Net.IPAddress.IPv6Any?displayProperty=nameWithType> rather than on the local Teredo address.</span></span> <span data-ttu-id="8be0e-148">Dlatego jeśli klientów zdalnych lub elementów równorzędnych ma bezpośredni trasa IPv6 do hosta service nasłuchiwania, klienta lub równorzędnym można połączyć się bezpośrednio przy użyciu protokołu IPv6 i nie trzeba używać protokołu Teredo pakietów tunelu.</span><span class="sxs-lookup"><span data-stu-id="8be0e-148">So if a remote client or peer has a direct IPv6 route to the host of the listening service, the client or peer can connect directly using IPv6 and not have to use Teredo to tunnel packets.</span></span>  
  
 <span data-ttu-id="8be0e-149">W przypadku aplikacji TCP <xref:System.Net.Sockets.TcpListener?displayProperty=nameWithType> klasa ma <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A> metodę, aby włączyć Przechodzenie translatora adresów Sieciowych.</span><span class="sxs-lookup"><span data-stu-id="8be0e-149">For TCP applications, the <xref:System.Net.Sockets.TcpListener?displayProperty=nameWithType> class has an <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A> method to enable NAT traversal.</span></span> <span data-ttu-id="8be0e-150">W przypadku aplikacji UDP <xref:System.Net.Sockets.UdpClient?displayProperty=nameWithType> klasa ma <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A> metodę, aby włączyć Przechodzenie translatora adresów Sieciowych.</span><span class="sxs-lookup"><span data-stu-id="8be0e-150">For UDP applications, the <xref:System.Net.Sockets.UdpClient?displayProperty=nameWithType> class has an <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A> method to enable NAT traversal.</span></span>  
  
 <span data-ttu-id="8be0e-151">W przypadku aplikacji, które używają <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> i powiązanymi klasami <xref:System.Net.Sockets.Socket.GetSocketOption%2A> i <xref:System.Net.Sockets.Socket.SetSocketOption%2A> metody mogą być używane z <xref:System.Net.Sockets.SocketOptionName.IPProtectionLevel?displayProperty=nameWithType> gniazda opcję, aby zbadać, włączyć lub wyłączyć Przechodzenie translatora adresów Sieciowych.</span><span class="sxs-lookup"><span data-stu-id="8be0e-151">For applications that use the <xref:System.Net.Sockets.Socket?displayProperty=nameWithType> and related classes, the <xref:System.Net.Sockets.Socket.GetSocketOption%2A> and <xref:System.Net.Sockets.Socket.SetSocketOption%2A> methods can be used with the <xref:System.Net.Sockets.SocketOptionName.IPProtectionLevel?displayProperty=nameWithType> socket option to query, enable, or disable NAT traversal.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8be0e-152">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="8be0e-152">See Also</span></span>  
 <xref:System.Net.IPAddress.IsIPv6Teredo%2A?displayProperty=nameWithType>  
 <xref:System.Net.NetworkInformation.IPGlobalProperties.BeginGetUnicastAddresses%2A?displayProperty=nameWithType>  
 <xref:System.Net.NetworkInformation.IPGlobalProperties.EndGetUnicastAddresses%2A?displayProperty=nameWithType>  
 <xref:System.Net.NetworkInformation.IPGlobalProperties.GetUnicastAddresses%2A?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.IPProtectionLevel?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.Socket.SetIPProtectionLevel%2A?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.TcpListener.AllowNatTraversal%2A?displayProperty=nameWithType>  
 <xref:System.Net.Sockets.UdpClient.AllowNatTraversal%2A?displayProperty=nameWithType>
