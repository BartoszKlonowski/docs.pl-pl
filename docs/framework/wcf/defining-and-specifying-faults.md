---
title: Definiowanie i określanie błędów
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- handling faults [WCF], specifying
- handling faults [WCF], defining
ms.assetid: c00c84f1-962d-46a7-b07f-ebc4f80fbfc1
ms.openlocfilehash: e2217cdac8edcab2f4b9e28484fb0758a149b72c
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/23/2019
ms.locfileid: "54590594"
---
# <a name="defining-and-specifying-faults"></a><span data-ttu-id="aa97d-102">Definiowanie i określanie błędów</span><span class="sxs-lookup"><span data-stu-id="aa97d-102">Defining and Specifying Faults</span></span>
<span data-ttu-id="aa97d-103">Błędach SOAP obejmują warunku informacje o błędzie z usługi do klienta, a w przypadku dupleksowy, od klienta do usługi w sposób interoperacyjny.</span><span class="sxs-lookup"><span data-stu-id="aa97d-103">SOAP faults convey error condition information from a service to a client and, in the duplex case, from a client to a service in an interoperable way.</span></span> <span data-ttu-id="aa97d-104">W tym temacie omówiono, kiedy i jak zdefiniować zawartości niestandardowych błędów i określić, jakie operacje można przywrócić je.</span><span class="sxs-lookup"><span data-stu-id="aa97d-104">This topic discusses when and how to define custom fault content and specify which operations can return them.</span></span> <span data-ttu-id="aa97d-105">Aby uzyskać więcej informacji na temat jak usługi lub dupleks klient może wysyłać te błędy i jak aplikacja klienta lub usługę obsługuje te błędy, zobacz [wysyłanie i odbieranie błędów](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="aa97d-105">For more information about how a service, or duplex client, can send those faults and how a client or service application handles these faults, see [Sending and Receiving Faults](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span></span> <span data-ttu-id="aa97d-106">Aby uzyskać omówienie obsługi błędów w aplikacji Windows Communication Foundation (WCF), zobacz [określanie i obsługa błędów w kontraktach i usługach](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="aa97d-106">For an overview of error handling in Windows Communication Foundation (WCF) applications, see [Specifying and Handling Faults in Contracts and Services](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
## <a name="overview"></a><span data-ttu-id="aa97d-107">Omówienie</span><span class="sxs-lookup"><span data-stu-id="aa97d-107">Overview</span></span>  
 <span data-ttu-id="aa97d-108">Zadeklarowane w błędach SOAP są te, w których jest operacją <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> , który określa typ niestandardowy błędu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="aa97d-108">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="aa97d-109">Niezadeklarowany błędach SOAP są te, które nie zostały określone w umowie dla danej operacji.</span><span class="sxs-lookup"><span data-stu-id="aa97d-109">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span> <span data-ttu-id="aa97d-110">W tym temacie pomaga zidentyfikować te warunki błędów i tworzenie usterek kontraktu usługi używanego przez klientów aby prawidłowo obsługiwać te warunki błędów zgłoszonych przez niestandardowych błędach SOAP.</span><span class="sxs-lookup"><span data-stu-id="aa97d-110">This topic helps you identify those error conditions and create a fault contract for your service that clients can use to properly handle those error conditions when notified by custom SOAP faults.</span></span> <span data-ttu-id="aa97d-111">Podstawowe zadania są w kolejności:</span><span class="sxs-lookup"><span data-stu-id="aa97d-111">The basic tasks are, in order:</span></span>  
  
1.  <span data-ttu-id="aa97d-112">Zdefiniuj warunki błędów, które należy wiedzieć, klient usługi.</span><span class="sxs-lookup"><span data-stu-id="aa97d-112">Define the error conditions that a client of your service should know about.</span></span>  
  
2.  <span data-ttu-id="aa97d-113">Definiowanie zawartości niestandardowych błędach SOAP dla tych warunków błędu.</span><span class="sxs-lookup"><span data-stu-id="aa97d-113">Define the custom content of the SOAP faults for those error conditions.</span></span>  
  
3.  <span data-ttu-id="aa97d-114">Oznacz operacje tak, aby określonych błędach SOAP, które zgłaszają są widoczne dla klientów w języku WSDL.</span><span class="sxs-lookup"><span data-stu-id="aa97d-114">Mark your operations so that the specific SOAP faults that they throw are exposed to clients in WSDL.</span></span>  
  
### <a name="defining-error-conditions-that-clients-should-know-about"></a><span data-ttu-id="aa97d-115">Definiowanie warunków błędów, których klientów należy wiedzieć o</span><span class="sxs-lookup"><span data-stu-id="aa97d-115">Defining Error Conditions That Clients Should Know About</span></span>  
 <span data-ttu-id="aa97d-116">Błędy protokołu SOAP są publicznie opisano komunikaty, które zawierają informacje o błędzie dla określonej operacji.</span><span class="sxs-lookup"><span data-stu-id="aa97d-116">SOAP faults are publicly described messages that carry fault information for a particular operation.</span></span> <span data-ttu-id="aa97d-117">Ponieważ zostały one opisane oraz inne komunikaty operacji w języku WSDL, klienci wiedzieć i dlatego należy oczekiwać obsłużyć takie błędy podczas wywoływania operacji.</span><span class="sxs-lookup"><span data-stu-id="aa97d-117">Because they are described along with other operation messages in WSDL, clients know and, therefore, expect to handle such faults when invoking an operation.</span></span> <span data-ttu-id="aa97d-118">Ale ponieważ usług WCF są zapisywane w kodzie zarządzanym przy wyborze rozwiązania, które błąd warunków w kodzie zarządzanym są do przekonwertowania na błędy i zwracany do klienta zapewnia możliwość oddzielenia warunki błędów i usterki w usłudze sprawność po błędzie formalne Konwersacja należy za pomocą klienta.</span><span class="sxs-lookup"><span data-stu-id="aa97d-118">But because WCF services are written in managed code, deciding which error conditions in managed code are to be converted into faults and returned to the client provides you the opportunity to separate error conditions and bugs in your service from the formal error conversation you have with a client.</span></span>  
  
 <span data-ttu-id="aa97d-119">Na przykład poniższy przykład kodu pokazuje operacji, która przyjmuje dwóch liczb całkowitych i zwraca inną liczbę całkowitą.</span><span class="sxs-lookup"><span data-stu-id="aa97d-119">For example, the following code example shows an operation that takes two integers and returns another integer.</span></span> <span data-ttu-id="aa97d-120">Kilka wyjątki mogą zostać wygenerowane w tym miejscu, dzięki czemu podczas projektowania kontrakt błędu, należy określić warunki błędów, które są ważne dla klienta.</span><span class="sxs-lookup"><span data-stu-id="aa97d-120">Several exceptions can be thrown here, so when designing the fault contract, you must determine which error conditions are important for your client.</span></span> <span data-ttu-id="aa97d-121">W tym przypadku usługa powinna wykryć <xref:System.DivideByZeroException?displayProperty=nameWithType> wyjątku.</span><span class="sxs-lookup"><span data-stu-id="aa97d-121">In this case, the service should detect the <xref:System.DivideByZeroException?displayProperty=nameWithType> exception.</span></span>  
  
```csharp  
[ServiceContract]  
public class CalculatorService  
{  
    [OperationContract]   
    int Divide(int a, int b)  
    {  
      if (b==0) throw new Exception("Division by zero!");  
      return a/b;  
    }  
}  
```  
  
```vb  
<ServiceContract> _  
Public Class CalculatorService  
    <OperationContract]> _  
    Public Function Divide(ByVal a As Integer, ByVal b As Integer) _  
       As Integer  
      If (b==0) Then   
            Throw New Exception("Division by zero!")  
      Return a/b  
    End Function  
End Class  
```  
  
 <span data-ttu-id="aa97d-122">W powyższym przykładzie operacji można albo zwraca niestandardowy błąd protokołu SOAP, które są specyficzne dla dzielenie przez zero, niestandardowych błędów, który jest specyficzny dla operacji matematycznych, ale który zawiera informacje dotyczące dzielenia przez zero, wiele błędów dla kilku różnych sytuacje, lub nie błąd protokołu SOAP w ogóle.</span><span class="sxs-lookup"><span data-stu-id="aa97d-122">In the preceding example the operation can either return a custom SOAP fault that is specific to dividing by zero, a custom fault that is specific to math operations but that contains information specific to dividing by zero, multiple faults for several different error situations, or no SOAP fault at all.</span></span>  
  
### <a name="define-the-content-of-error-conditions"></a><span data-ttu-id="aa97d-123">Definiowanie zawartości warunki błędów</span><span class="sxs-lookup"><span data-stu-id="aa97d-123">Define the Content of Error Conditions</span></span>  
 <span data-ttu-id="aa97d-124">Gdy wystąpi warunek błędu została zidentyfikowana jako taki, który skutecznie może zwrócić niestandardowy błąd protokołu SOAP, następnym krokiem jest do definiowania zawartości tego błędu i upewnij się, struktura zawartości może być serializowany.</span><span class="sxs-lookup"><span data-stu-id="aa97d-124">Once an error condition has been identified as one that can usefully return a custom SOAP fault, the next step is to define the contents of that fault and ensure that the content structure can be serialized.</span></span> <span data-ttu-id="aa97d-125">Przykład kodu w poprzedniej sekcji pokazuje błąd, specyficzne dla `Divide` operacji, ale jeśli istnieją inne operacje na `Calculator` usługi, a następnie pojedynczego niestandardowy błąd protokołu SOAP mogą informować klienta o wszystkie błędy Kalkulator `Divide`uwzględnione.</span><span class="sxs-lookup"><span data-stu-id="aa97d-125">The code example in the preceding section shows an error specific to a `Divide` operation, but if there are other operations on the `Calculator` service, then a single custom SOAP fault can inform the client of all calculator error conditions, `Divide` included.</span></span> <span data-ttu-id="aa97d-126">W poniższym przykładzie kodu pokazano tworzenie obiektu niestandardowego błędu protokołu SOAP `MathFault`, który z nich mogą raportować błędy, które zostało nawiązane przy użyciu wszystkie operacje zapisu matematycznego, w tym `Divide`.</span><span class="sxs-lookup"><span data-stu-id="aa97d-126">The following code example shows the creation of a custom SOAP fault, `MathFault`, which can report errors made using all math operations, including `Divide`.</span></span> <span data-ttu-id="aa97d-127">Podczas tej klasy można określić operacji ( `Operation` właściwości) i wartość, która opisuje problem ( `ProblemType` właściwości), klasy i właściwości te muszą być możliwy do serializacji do przekazania do klienta w niestandardowy błąd protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="aa97d-127">While the class can specify an operation (the `Operation` property) and a value that describes the problem (the `ProblemType` property), the class and these properties must be serializable to be transferred to the client in a custom SOAP fault.</span></span> <span data-ttu-id="aa97d-128">W związku z tym <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> i <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> atrybuty są wykorzystywane do wytwarzania typu i jego właściwości, możliwy do serializacji i interoperacyjne, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="aa97d-128">Therefore, the <xref:System.Runtime.Serialization.DataContractAttribute?displayProperty=nameWithType> and <xref:System.Runtime.Serialization.DataMemberAttribute?displayProperty=nameWithType> attributes are used to make the type and its properties serializable and as interoperable as possible.</span></span>  
  
 [!code-csharp[Faults#2](../../../samples/snippets/csharp/VS_Snippets_CFX/faults/cs/service.cs#2)]
 [!code-vb[Faults#2](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faults/vb/service.vb#2)]  
  
 <span data-ttu-id="aa97d-129">Aby uzyskać więcej informacji na temat jak zapewnić danych jest możliwy do serializacji, zobacz [Określanie transferu danych w kontraktach usług](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="aa97d-129">For more information about how to ensure your data is serializable, see [Specifying Data Transfer in Service Contracts](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span></span> <span data-ttu-id="aa97d-130">Aby uzyskać listę serializacji obsługuje <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType> udostępnia, zobacz [typy obsługiwane przez serializator kontraktu danych](../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="aa97d-130">For a list of the serialization support that <xref:System.Runtime.Serialization.DataContractSerializer?displayProperty=nameWithType> provides, see [Types Supported by the Data Contract Serializer](../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span></span>  
  
### <a name="mark-operations-to-establish-the-fault-contract"></a><span data-ttu-id="aa97d-131">Oznacz operacji w celu ustalenia kontrakt błędu</span><span class="sxs-lookup"><span data-stu-id="aa97d-131">Mark Operations to Establish the Fault Contract</span></span>  
 <span data-ttu-id="aa97d-132">Gdy struktury danych możliwych do serializacji, który jest zwracany jako część niestandardowego błąd protokołu SOAP jest zdefiniowany, ostatnim krokiem jest do oznaczania swoje kontrakt operacji jako zgłaszanie błędu protokołu SOAP tego typu.</span><span class="sxs-lookup"><span data-stu-id="aa97d-132">Once a serializable data structure that is returned as part of a custom SOAP fault is defined, the last step is to mark your operation contract as throwing a SOAP fault of that type.</span></span> <span data-ttu-id="aa97d-133">Aby to zrobić, należy użyć <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> atrybutu i przekazać typ niestandardowego typu danych, które zostały zbudowane.</span><span class="sxs-lookup"><span data-stu-id="aa97d-133">To do this, use the <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> attribute and pass the type of the custom data type that you have constructed.</span></span> <span data-ttu-id="aa97d-134">Poniższy przykład kodu pokazuje sposób użycia <xref:System.ServiceModel.FaultContractAttribute> atrybutu, aby określić, że `Divide` operacji może zwrócić błąd protokołu SOAP, typu `MathFault`.</span><span class="sxs-lookup"><span data-stu-id="aa97d-134">The following code example shows how to use the <xref:System.ServiceModel.FaultContractAttribute> attribute to specify that the `Divide` operation can return a SOAP fault of type `MathFault`.</span></span> <span data-ttu-id="aa97d-135">Inne operacje matematyczne na podstawie można teraz również określić czy może zwrócić `MathFault`.</span><span class="sxs-lookup"><span data-stu-id="aa97d-135">Other math-based operations can now also specify that they can return a `MathFault`.</span></span>  
  
 [!code-csharp[Faults#1](../../../samples/snippets/csharp/VS_Snippets_CFX/faults/cs/service.cs#1)]
 [!code-vb[Faults#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faults/vb/service.vb#1)]  
  
 <span data-ttu-id="aa97d-136">Operacji można określić, że zwraca więcej niż jeden błąd niestandardowy, oznaczając tej operacji z więcej niż jednym <xref:System.ServiceModel.FaultContractAttribute> atrybutu.</span><span class="sxs-lookup"><span data-stu-id="aa97d-136">An operation can specify that it returns more than one custom fault by marking that operation with more than one <xref:System.ServiceModel.FaultContractAttribute> attribute.</span></span>  
  
 <span data-ttu-id="aa97d-137">Następnym krokiem, aby zaimplementować kontrakt błędu w danej implementacji operacji jest opisana w temacie [wysyłanie i odbieranie błędów](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span><span class="sxs-lookup"><span data-stu-id="aa97d-137">The next step, to implement the fault contract in your operation implementation, is described in the topic [Sending and Receiving Faults](../../../docs/framework/wcf/sending-and-receiving-faults.md).</span></span>  
  
#### <a name="soap-wsdl-and-interoperability-considerations"></a><span data-ttu-id="aa97d-138">Protokołu SOAP, WSDL i zagadnienia dotyczące współdziałania</span><span class="sxs-lookup"><span data-stu-id="aa97d-138">SOAP, WSDL, and Interoperability Considerations</span></span>  
 <span data-ttu-id="aa97d-139">W pewnych okolicznościach szczególnie podczas współpracy z platformami, może być ważne, aby kontrolować sposób wyświetlania błędów w komunikacie protokołu SOAP lub sposób jest opisany w metadanych WSDL.</span><span class="sxs-lookup"><span data-stu-id="aa97d-139">In some circumstances, especially when interoperating with other platforms, it may be important to control the way a fault appears in a SOAP message or the way it is described in the WSDL metadata.</span></span>  
  
 <span data-ttu-id="aa97d-140"><xref:System.ServiceModel.FaultContractAttribute> Atrybut ma <xref:System.ServiceModel.FaultContractAttribute.Name%2A> właściwość, która zapewnia kontrolę nad nazwy elementu błędów WSDL, który jest generowany w metadanych dla tego błędu.</span><span class="sxs-lookup"><span data-stu-id="aa97d-140">The <xref:System.ServiceModel.FaultContractAttribute> attribute has a <xref:System.ServiceModel.FaultContractAttribute.Name%2A> property that allows control of the WSDL fault element name that is generated in the metadata for that fault.</span></span>  
  
 <span data-ttu-id="aa97d-141">Zgodnie ze standardem protokołu SOAP usterka może mieć `Action`, `Code`, a `Reason`.</span><span class="sxs-lookup"><span data-stu-id="aa97d-141">According to the SOAP standard, a fault can have an `Action`, a `Code`, and a `Reason`.</span></span> <span data-ttu-id="aa97d-142">`Action` Jest kontrolowana przez <xref:System.ServiceModel.FaultContractAttribute.Action%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="aa97d-142">The `Action` is controlled by the <xref:System.ServiceModel.FaultContractAttribute.Action%2A> property.</span></span> <span data-ttu-id="aa97d-143"><xref:System.ServiceModel.FaultException.Code%2A> Właściwości i <xref:System.ServiceModel.FaultException.Reason%2A> właściwości są obie właściwości <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> klasy, która jest klasą nadrzędną ogólnego <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="aa97d-143">The <xref:System.ServiceModel.FaultException.Code%2A> property and <xref:System.ServiceModel.FaultException.Reason%2A> property are both properties of the <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> class, which is the parent class of the generic <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType>.</span></span> <span data-ttu-id="aa97d-144">`Code` Zawiera właściwość <xref:System.ServiceModel.FaultCode.SubCode%2A> elementu członkowskiego.</span><span class="sxs-lookup"><span data-stu-id="aa97d-144">The `Code` property includes a <xref:System.ServiceModel.FaultCode.SubCode%2A> member.</span></span>  
  
 <span data-ttu-id="aa97d-145">Podczas uzyskiwania dostępu do innych usług, które generowanie błędów, istnieją pewne ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="aa97d-145">When accessing non-services that generate faults, certain limitations exist.</span></span> <span data-ttu-id="aa97d-146">WCF obsługuje tylko błędy z typami szczegółowo opisujący schematu i które są zgodne z kontraktów danych.</span><span class="sxs-lookup"><span data-stu-id="aa97d-146">WCF supports only faults with detail types that the schema describes and that are compatible with data contracts.</span></span> <span data-ttu-id="aa97d-147">Na przykład jak wspomniano powyżej, usługi WCF nie obsługuje błędy, które Użyj atrybutów XML w ich typach szczegółów lub błędów przy użyciu więcej niż jeden element najwyższego poziomu w sekcji szczegółów.</span><span class="sxs-lookup"><span data-stu-id="aa97d-147">For example, as mentioned above, WCF does not support faults that use XML attributes in their detail types, or faults with more than one top-level element in the detail section.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aa97d-148">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="aa97d-148">See also</span></span>
- <xref:System.ServiceModel.FaultContractAttribute>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute>
- [<span data-ttu-id="aa97d-149">Określanie i obsługa błędów w kontraktach i usługach</span><span class="sxs-lookup"><span data-stu-id="aa97d-149">Specifying and Handling Faults in Contracts and Services</span></span>](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)
- [<span data-ttu-id="aa97d-150">Wysyłanie i odbieranie błędów</span><span class="sxs-lookup"><span data-stu-id="aa97d-150">Sending and Receiving Faults</span></span>](../../../docs/framework/wcf/sending-and-receiving-faults.md)
- [<span data-ttu-id="aa97d-151">Instrukcje: Deklarowanie błędów w kontraktach usługi</span><span class="sxs-lookup"><span data-stu-id="aa97d-151">How to: Declare Faults in Service Contracts</span></span>](../../../docs/framework/wcf/how-to-declare-faults-in-service-contracts.md)
- [<span data-ttu-id="aa97d-152">Omówienie poziomów ochrony</span><span class="sxs-lookup"><span data-stu-id="aa97d-152">Understanding Protection Level</span></span>](../../../docs/framework/wcf/understanding-protection-level.md)
- [<span data-ttu-id="aa97d-153">Instrukcje: Ustawianie właściwości ProtectionLevel</span><span class="sxs-lookup"><span data-stu-id="aa97d-153">How to: Set the ProtectionLevel Property</span></span>](../../../docs/framework/wcf/how-to-set-the-protectionlevel-property.md)
- [<span data-ttu-id="aa97d-154">Określanie transferu danych w kontraktach usług</span><span class="sxs-lookup"><span data-stu-id="aa97d-154">Specifying Data Transfer in Service Contracts</span></span>](../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md)
