---
title: Warunkowe operacje Get i Put
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 3d22067f-57b8-4e0f-a571-a694512187ae
caps.latest.revision: "8"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 08efa127ed06ffc8cff3c7bb83af7be929329794
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="conditional-get-and-put"></a><span data-ttu-id="f7840-102">Warunkowe operacje Get i Put</span><span class="sxs-lookup"><span data-stu-id="f7840-102">Conditional Get and Put</span></span>
<span data-ttu-id="f7840-103">W tym przykładzie pokazano, jak nowy pobrać warunkowe i zaktualizować interfejsów API REST usługi WCF modelu programowania.</span><span class="sxs-lookup"><span data-stu-id="f7840-103">This sample demonstrates how to use the new conditional retrieve and update APIs for the WCF REST programming model.</span></span> <span data-ttu-id="f7840-104">Ponieważ warunkowego pobrania i aktualizacji są najbardziej odpowiednie dla zorientowane na zasobu i rozszerzenia tego przykładu usług REST, [podstawowej usługi zasobów](../../../../docs/framework/wcf/samples/basic-resource-service.md) próbki.</span><span class="sxs-lookup"><span data-stu-id="f7840-104">Because conditional retrieve and update are most appropriate for resource-oriented and REST services, this sample extends the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="f7840-105">W tym przykładzie koncentruje się na obsługę warunkowego pobierania i zaktualizuj go do [podstawowej usługi zasobów](../../../../docs/framework/wcf/samples/basic-resource-service.md) próbkowania przy użyciu nowych interfejsów API, wprowadzone w systemie [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f7840-105">This sample focuses on adding support for conditional retrieve and update to the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample using the new APIs introduced in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
## <a name="demonstrates"></a><span data-ttu-id="f7840-106">Demonstracje</span><span class="sxs-lookup"><span data-stu-id="f7840-106">Demonstrates</span></span>  
 <span data-ttu-id="f7840-107">Warunkowe pobrania i aktualizacji</span><span class="sxs-lookup"><span data-stu-id="f7840-107">Conditional Retrieve and Update</span></span>  
  
## <a name="discussion"></a><span data-ttu-id="f7840-108">Omówienie</span><span class="sxs-lookup"><span data-stu-id="f7840-108">Discussion</span></span>  
 <span data-ttu-id="f7840-109">Usługi WCF w tym przykładzie udostępnia kolekcję klientów w realizacji konkretnych zasobów i sposób REST.</span><span class="sxs-lookup"><span data-stu-id="f7840-109">The WCF service in this sample exposes a collection of customers in a resource-oriented and REST manner.</span></span> <span data-ttu-id="f7840-110">Aby uzyskać szczegółowy opis implementacji usługi, zobacz [podstawowej usługi zasobów](../../../../docs/framework/wcf/samples/basic-resource-service.md) próbki.</span><span class="sxs-lookup"><span data-stu-id="f7840-110">For a detailed description of the service implementation, please see the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span>  
  
 <span data-ttu-id="f7840-111">W tym przykładzie dodaje warunkowego pobieranie oraz możliwości aktualizacji [podstawowej usługi zasobów](../../../../docs/framework/wcf/samples/basic-resource-service.md) próbki.</span><span class="sxs-lookup"><span data-stu-id="f7840-111">This sample adds conditional retrieve and update capabilities to the [Basic Resource Service](../../../../docs/framework/wcf/samples/basic-resource-service.md) sample.</span></span> <span data-ttu-id="f7840-112">Warunkowe pobierania i aktualizowania Użyj tagów jednostki HTTP i nagłówków HTTP If-None-Match i If-Match, aby sprawdzanie, czy klienci mają lub nie masz najnowszej jednostki dla danego zasobu.</span><span class="sxs-lookup"><span data-stu-id="f7840-112">Conditional retrieve and update use HTTP entity tags and the HTTP If-None-Match and If-Match headers to validate that clients either have or do not have the most current entity for a given resource.</span></span> <span data-ttu-id="f7840-113">Jednak wdrażania kodu można poprawnie przeanalizować nagłówków HTTP If-None-Match i If-Match może być niewygodny i podatne na błędy.</span><span class="sxs-lookup"><span data-stu-id="f7840-113">However, implementing the code to correctly parse the HTTP If-None-Match and If-Match headers can be tedious and error-prone.</span></span> <span data-ttu-id="f7840-114">W związku z tym <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> i <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> metody zostały dodane do <xref:System.ServiceModel.Web.IncomingWebRequestContext>, którego można uzyskać dostęp za pomocą bieżące wystąpienie klasy <xref:System.ServiceModel.Web.WebOperationContext>.</span><span class="sxs-lookup"><span data-stu-id="f7840-114">Therefore, the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> and <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> methods have been added to the <xref:System.ServiceModel.Web.IncomingWebRequestContext>, which can be accessed using the current instance of the <xref:System.ServiceModel.Web.WebOperationContext>.</span></span> <span data-ttu-id="f7840-115">Ponadto `SetETag` metody został dodany do <xref:System.ServiceModel.Web.OutgoingWebRequestContext>, ułatwiając zwracać prawidłową jednostkę tagów.</span><span class="sxs-lookup"><span data-stu-id="f7840-115">In addition, the `SetETag` method has been added to the <xref:System.ServiceModel.Web.OutgoingWebRequestContext>, making it easier to return valid entity tags.</span></span>  
  
 <span data-ttu-id="f7840-116"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> Metoda jest przeznaczona do użycia z operacjami [WebGet].</span><span class="sxs-lookup"><span data-stu-id="f7840-116">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method is intended to be used with [WebGet] operations.</span></span> <span data-ttu-id="f7840-117">Trwa bieżący tag jednostki dla danego zasobu jako `entityTag` parametr, który może być `string`, `int`, `long` lub `Guid`.</span><span class="sxs-lookup"><span data-stu-id="f7840-117">It takes the current entity tag for the given resource as the `entityTag` parameter, which can be a `string`, `int`, `long` or `Guid`.</span></span> <span data-ttu-id="f7840-118"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> Metoda sprawdza tag jednostki przed nagłówka HTTP If-None-Match żądania.</span><span class="sxs-lookup"><span data-stu-id="f7840-118">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method checks the entity tag against the HTTP If-None-Match header of the request.</span></span> <span data-ttu-id="f7840-119">Jeśli tag jednostki znajduje się w nagłówku HTTP If-None-Match, a następnie <xref:System.ServiceModel.Web.WebFaultException> ze stanem jest generowany kod niezmodyfikowane (304); w przeciwnym razie metoda zwraca.</span><span class="sxs-lookup"><span data-stu-id="f7840-119">If the entity tag is present in the HTTP If-None-Match header, then a <xref:System.ServiceModel.Web.WebFaultException> with a status code of Not Modified (304) is thrown; otherwise the method returns.</span></span> <span data-ttu-id="f7840-120">Mechanizm warunkowego pobrać umożliwia klientowi przekazaniu do serwera, czy ma ona tej jednostki i jeśli klient nie ma jeszcze go wysłać tylko bieżącego obiektu.</span><span class="sxs-lookup"><span data-stu-id="f7840-120">The conditional retrieve mechanism allows the client to tell the server that it has this entity and to only send the current entity if the client does not already have it.</span></span> <span data-ttu-id="f7840-121">Przykład użycia <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> metody są widoczne w `GetCustomer` i `GetCustomers` operacje usługi.</span><span class="sxs-lookup"><span data-stu-id="f7840-121">Example usage of the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method can be seen in the `GetCustomer` and `GetCustomers` operations of the service.</span></span> <span data-ttu-id="f7840-122">Należy pamiętać, który odwołuje się do <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> nie może zwracać.</span><span class="sxs-lookup"><span data-stu-id="f7840-122">It is important to note that calls to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> may not return.</span></span> <span data-ttu-id="f7840-123">Deweloperzy powinny implementować operacji, dzięki czemu żądanie jest już znana się powodzeniem przed wywołaniem do <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> wykonane, na przykład jeśli wywołanie <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> został nie istnieje, usługa są wysyłane odpowiedzi z kodem stanu powiodło się.</span><span class="sxs-lookup"><span data-stu-id="f7840-123">Developers should implement the operation so that the request is already known to be successful before the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> is executed, such that if the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> was not present, the service would send a response with a successful status code.</span></span>  
  
 <span data-ttu-id="f7840-124"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> Metoda jest podobna do <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="f7840-124">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method is similar to the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A> method.</span></span> <span data-ttu-id="f7840-125">Trwa bieżący tag jednostki dla danego zasobu.</span><span class="sxs-lookup"><span data-stu-id="f7840-125">It also takes the current entity tag for the given resource.</span></span> <span data-ttu-id="f7840-126">Jednak jest ona przeznaczona do użycia z operacjami [WebInvoke], w których jest ustawiona metoda "PUT" lub "DELETE".</span><span class="sxs-lookup"><span data-stu-id="f7840-126">However, it is intended to be used with [WebInvoke] operations in which the method is set to "PUT" or "DELETE".</span></span> <span data-ttu-id="f7840-127"><xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> Metoda sprawdza tag jednostki przed nagłówka HTTP If-Match żądania.</span><span class="sxs-lookup"><span data-stu-id="f7840-127">The <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method checks the entity tag against the HTTP If-Match header of the request.</span></span> <span data-ttu-id="f7840-128">Jeśli tag jednostki nie znajduje się w nagłówku HTTP If-Match, a następnie <xref:System.ServiceModel.Web.WebFaultException> ze stanem jest generowany kod warunek wstępny nie powiodło się (412).</span><span class="sxs-lookup"><span data-stu-id="f7840-128">If the entity tag is not present in the HTTP If-Match header, then a <xref:System.ServiceModel.Web.WebFaultException> with a status code of Precondition Failed (412) is thrown.</span></span> <span data-ttu-id="f7840-129">Mechanizm aktualizacji warunkowego umożliwia klientowi serwera stwierdzić, że ma tej jednostki dla zasobu i tylko umożliwia klientowi alter zasobu. Jeśli jednostka ma jest aktualny.</span><span class="sxs-lookup"><span data-stu-id="f7840-129">The conditional update mechanism allows the client to tell the server that it has this entity for the resource and to only allow the client to alter the resource; if the entity it has is current.</span></span> <span data-ttu-id="f7840-130">Przykład użycia <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> metody są widoczne w `UpdateCustomer` i `DeleteCustomer` operacje usługi.</span><span class="sxs-lookup"><span data-stu-id="f7840-130">Example usage of the <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> method can be seen in the `UpdateCustomer` and `DeleteCustomer` operations of the service.</span></span> <span data-ttu-id="f7840-131">Tylko jako z <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>, ważne jest, aby należy zwrócić uwagę, który odwołuje się do <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> nie może zwracać.</span><span class="sxs-lookup"><span data-stu-id="f7840-131">Just as with <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalRetrieve%2A>, it is important to note that calls to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> may not return.</span></span> <span data-ttu-id="f7840-132">Deweloperzy powinien implementować operacji w taki sposób, że żądanie jest już znana się powodzeniem przed wywołaniem do <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> wykonane, na przykład jeśli wywołanie <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> nie jest obecny, usługa będzie odpowiadać, podając kod stanu powiodło się.</span><span class="sxs-lookup"><span data-stu-id="f7840-132">Developers should implement the operation such that the request is already known to be successful before the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> is executed, such that if the call to <xref:System.ServiceModel.Web.IncomingWebRequestContext.CheckConditionalUpdate%2A> was not present, the service would respond with a successful status code.</span></span>  
  
 <span data-ttu-id="f7840-133">Próbka składa się z własnym hostowana usługa i klient, który jest uruchamiany w ramach aplikacji konsoli.</span><span class="sxs-lookup"><span data-stu-id="f7840-133">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="f7840-134">Podczas działania aplikacji konsoli, klient wysyła żądania do usługi i zapisuje istotnych informacji z odpowiedzi w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="f7840-134">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-run-the-sample"></a><span data-ttu-id="f7840-135">Aby uruchomić przykładowy</span><span class="sxs-lookup"><span data-stu-id="f7840-135">To run the sample</span></span>  
  
1.  <span data-ttu-id="f7840-136">Otwórz rozwiązanie przykładowej warunkowego Get i Put.</span><span class="sxs-lookup"><span data-stu-id="f7840-136">Open the solution for the Conditional Get and Put sample.</span></span> <span data-ttu-id="f7840-137">Podczas uruchamiania [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], należy uruchomić jako administrator, aby pomyślnie wykonać próbki.</span><span class="sxs-lookup"><span data-stu-id="f7840-137">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator to execute the sample successfully.</span></span> <span data-ttu-id="f7840-138">To zrobić, klikając prawym przyciskiem myszy [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] ikony, jak i wybieranie **Uruchom jako Administrator** z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="f7840-138">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and choosing **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="f7840-139">Naciśnij klawisze CTRL + SHIFT + B Skompiluj rozwiązanie, a następnie naciśnij klawisz CTRL + F5, aby uruchomić projekt aplikacji konsoli.</span><span class="sxs-lookup"><span data-stu-id="f7840-139">Press CTRL+SHIFT+B to build the solution and then press CTRL+F5 to run the console application project.</span></span> <span data-ttu-id="f7840-140">Jeśli uruchomiony ten projekt z włączonym (naciskając klawisz F5 zamiast CTRL + F5) debugowaniem, zatrzymuje debugera, gdy wyjątek przez warunkowy GET i PUT, sprawdzanie.</span><span class="sxs-lookup"><span data-stu-id="f7840-140">If running this project with debugging enabled (by pressing F5 instead of CTRL+F5), the debugger stops when an exception is thrown by the conditional GET and PUT checking.</span></span> <span data-ttu-id="f7840-141">W takim przypadku naciśnij klawisz F5, aby kontynuować wykonywanie przykładowej.</span><span class="sxs-lookup"><span data-stu-id="f7840-141">When this happens, press F5 to continue executing the sample.</span></span>  
  
3.  <span data-ttu-id="f7840-142">Wyświetlenie okna konsoli piasku zawiera identyfikator URI uruchomionej usługi i identyfikator URI strony pomocy HTML do uruchomionej usługi.</span><span class="sxs-lookup"><span data-stu-id="f7840-142">The console window appear sand provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
4.  <span data-ttu-id="f7840-143">Jak działa próbki, klient wysyła żądania do usługi i zapisuje odpowiedzi w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="f7840-143">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span>  
  
5.  <span data-ttu-id="f7840-144">Naciśnij dowolny klawisz, aby zakończyć próbki.</span><span class="sxs-lookup"><span data-stu-id="f7840-144">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="f7840-145">Próbki mogą być zainstalowane na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="f7840-145">The samples may already be installed on your machine.</span></span> <span data-ttu-id="f7840-146">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="f7840-146">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="f7840-147">Jeśli ten katalog nie istnieje, przejdź do [Windows Communication Foundation (WCF) i Windows Workflow Foundation (WF) przykłady dla programu .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) pobrać wszystkie [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] próbek.</span><span class="sxs-lookup"><span data-stu-id="f7840-147">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="f7840-148">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="f7840-148">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\ConditionalGetAndPut`
