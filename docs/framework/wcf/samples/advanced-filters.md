---
title: Zaawansowane filtry
ms.date: 03/30/2017
ms.assetid: 8d81590f-e036-4f96-824a-4a187f462764
ms.openlocfilehash: 7022384e8abe93f4276eec48785b3243ed926438
ms.sourcegitcommit: a885cc8c3e444ca6471348893d5373c6e9e49a47
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/06/2018
ms.locfileid: "44042598"
---
# <a name="advanced-filters"></a><span data-ttu-id="0638e-102">Zaawansowane filtry</span><span class="sxs-lookup"><span data-stu-id="0638e-102">Advanced Filters</span></span>
<span data-ttu-id="0638e-103">Niniejszy przykład pokazuje usługi routingu Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="0638e-103">This sample demonstrates a Windows Communication Foundation (WCF) routing service.</span></span> <span data-ttu-id="0638e-104">Usługa routingu jest składnikiem usługi WCF, który ułatwia to dołączenie routerem na podstawie zawartości do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0638e-104">The routing service is a WCF component that makes it easy to include a content-based router in your application.</span></span> <span data-ttu-id="0638e-105">W tym przykładzie dostosowuje się standardowej próbki Kalkulator WCF do komunikowania się za pomocą usługi routingu.</span><span class="sxs-lookup"><span data-stu-id="0638e-105">This sample adapts the standard WCF Calculator sample to communicate using the routing service.</span></span> <span data-ttu-id="0638e-106">Niniejszy przykład pokazuje jak zdefiniować oparte na zawartości logiki routingu filtry komunikatów i tabele filtr komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0638e-106">This sample shows how to define content-based routing logic through the use of message filters and message filter tables.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0638e-107">Przykłady może już być zainstalowany na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="0638e-107">The samples may already be installed on your computer.</span></span> <span data-ttu-id="0638e-108">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="0638e-108">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="0638e-109">Jeśli ten katalog nie istnieje, przejdź do strony [Windows Communication Foundation (WCF) i przykłady Windows Workflow Foundation (WF) dla platformy .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) do pobierania wszystkich Windows Communication Foundation (WCF) i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] przykładów.</span><span class="sxs-lookup"><span data-stu-id="0638e-109">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="0638e-110">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="0638e-110">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\RoutingServices\AdvancedFilters`  
  
## <a name="sample-details"></a><span data-ttu-id="0638e-111">Przykład szczegółów</span><span class="sxs-lookup"><span data-stu-id="0638e-111">Sample Details</span></span>  
 <span data-ttu-id="0638e-112">W poniższej tabeli przedstawiono filtry komunikatów, które są dodawane do tabeli filtr komunikatów usługi routingu.</span><span class="sxs-lookup"><span data-stu-id="0638e-112">The following table shows the message filters that are added to the message filter table of the routing service.</span></span>  
  
|<span data-ttu-id="0638e-113">Filtr</span><span class="sxs-lookup"><span data-stu-id="0638e-113">Filter</span></span>|<span data-ttu-id="0638e-114">Reguła</span><span class="sxs-lookup"><span data-stu-id="0638e-114">Rule</span></span>|<span data-ttu-id="0638e-115">Priorytet</span><span class="sxs-lookup"><span data-stu-id="0638e-115">Priority</span></span>|  
|------------|----------|--------------|  
|<span data-ttu-id="0638e-116">Jeśli (ma nagłówka)</span><span class="sxs-lookup"><span data-stu-id="0638e-116">If (has header)</span></span>|<span data-ttu-id="0638e-117">Zaokrąglenie</span><span class="sxs-lookup"><span data-stu-id="0638e-117">Rounding</span></span>|<span data-ttu-id="0638e-118">2</span><span class="sxs-lookup"><span data-stu-id="0638e-118">2</span></span>|  
|<span data-ttu-id="0638e-119">Jeśli (pokazał na Ep2)</span><span class="sxs-lookup"><span data-stu-id="0638e-119">If (showed up on Ep2)</span></span>|<span data-ttu-id="0638e-120">Regularne</span><span class="sxs-lookup"><span data-stu-id="0638e-120">Regular</span></span>|<span data-ttu-id="0638e-121">1</span><span class="sxs-lookup"><span data-stu-id="0638e-121">1</span></span>|  
|<span data-ttu-id="0638e-122">Jeśli (pokazał z 2)</span><span class="sxs-lookup"><span data-stu-id="0638e-122">If (showed up with Address2)</span></span>|<span data-ttu-id="0638e-123">Zaokrąglenie</span><span class="sxs-lookup"><span data-stu-id="0638e-123">Rounding</span></span>|<span data-ttu-id="0638e-124">1</span><span class="sxs-lookup"><span data-stu-id="0638e-124">1</span></span>|  
|<span data-ttu-id="0638e-125">Jeśli (RoundRobin1)</span><span class="sxs-lookup"><span data-stu-id="0638e-125">If (RoundRobin1)</span></span>|<span data-ttu-id="0638e-126">Regularne</span><span class="sxs-lookup"><span data-stu-id="0638e-126">Regular</span></span>|<span data-ttu-id="0638e-127">0</span><span class="sxs-lookup"><span data-stu-id="0638e-127">0</span></span>|  
|<span data-ttu-id="0638e-128">Jeśli (RoundRobin2)</span><span class="sxs-lookup"><span data-stu-id="0638e-128">If (RoundRobin2)</span></span>|<span data-ttu-id="0638e-129">Zaokrąglenie</span><span class="sxs-lookup"><span data-stu-id="0638e-129">Rounding</span></span>|<span data-ttu-id="0638e-130">0</span><span class="sxs-lookup"><span data-stu-id="0638e-130">0</span></span>|  
  
 <span data-ttu-id="0638e-131">Filtry komunikatów i tabele filtr komunikatu można tworzyć i konfigurować za pomocą kodu lub w pliku konfiguracyjnym aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0638e-131">The message filters and message filter tables can be created and configured either through code or in the application configuration file.</span></span> <span data-ttu-id="0638e-132">W tym przykładzie można znaleźć filtry komunikatów i komunikat filtrowania tabel zdefiniowane przez kod w pliku RoutingService\routing.cs, lub w pliku konfiguracyjnym aplikacji w pliku RoutingService\App.config.</span><span class="sxs-lookup"><span data-stu-id="0638e-132">For this sample, you can find the message filters and message filter tables defined through code in the RoutingService\routing.cs file, or defined in the application configuration file in the RoutingService\App.config file.</span></span> <span data-ttu-id="0638e-133">Następuje opisują sposób tworzenia filtrów komunikatów i tabele filtr komunikatu dla tego przykładu, za pomocą kodu.</span><span class="sxs-lookup"><span data-stu-id="0638e-133">The following paragraphs describe how the message filters and message filter tables are created for this sample through code.</span></span>  
  
 <span data-ttu-id="0638e-134">Po pierwsze, <xref:System.ServiceModel.Dispatcher.XPathMessageFilter> szuka niestandardowego nagłówka.</span><span class="sxs-lookup"><span data-stu-id="0638e-134">First, an <xref:System.ServiceModel.Dispatcher.XPathMessageFilter> looks for the custom header.</span></span> <span data-ttu-id="0638e-135">Należy pamiętać, że <xref:System.ServiceModel.WSHttpBinding> skutkuje wersja schematu envelope przy użyciu protokołu SOAP 1.2, co instrukcja języka XPath jest zdefiniowany w celu używania przestrzeni nazw protokołu SOAP 1.2.</span><span class="sxs-lookup"><span data-stu-id="0638e-135">Note that <xref:System.ServiceModel.WSHttpBinding> results in an envelope version using SOAP 1.2, so the XPath statement is defined to use the SOAP 1.2 namespace.</span></span> <span data-ttu-id="0638e-136">Menedżer przestrzeni nazw domyślny dla <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>s już definiuje prefiks przestrzeni nazw protokołu SOAP 1.2 /s12, który może być używany.</span><span class="sxs-lookup"><span data-stu-id="0638e-136">The default namespace manager for <xref:System.ServiceModel.Dispatcher.XPathMessageFilter>s already defines a prefix for the SOAP 1.2 namespace, /s12, which can be used.</span></span> <span data-ttu-id="0638e-137">Domyślny Menedżer przestrzeni nazw nie ma jednak niestandardowej przestrzeni nazw, aby zdefiniować rzeczywistej wartości nagłówka, więc musi być zdefiniowany tego prefiksu używanego przez klienta.</span><span class="sxs-lookup"><span data-stu-id="0638e-137">However, the default namespace manager does not have the custom namespace that the client uses to define the actual header value, so that prefix must be defined.</span></span> <span data-ttu-id="0638e-138">Każdy komunikat o pojawia się z tym nagłówkiem pasuje do tego filtru.</span><span class="sxs-lookup"><span data-stu-id="0638e-138">Any message that shows up with this header matches this filter.</span></span>  
  
```  
XPathMessageContext namespaceManager = new XPathMessageContext();  
namespaceManager.AddNamespace("custom", "http://my.custom.namespace/");  
  
XPathMessageFilter xpathFilter = new XPathMessageFilter("/s12:Envelope/s12:Header/custom:RoundingCalculator = 1", namespaceManager);  
```  
  
 <span data-ttu-id="0638e-139">Drugi filtr <xref:System.ServiceModel.Dispatcher.EndpointNameMessageFilter>, który dopasowuje każdy komunikat, który został odebrany w `calculatorEndpoint`.</span><span class="sxs-lookup"><span data-stu-id="0638e-139">The second filter is an <xref:System.ServiceModel.Dispatcher.EndpointNameMessageFilter>, which matches any message that was received on the `calculatorEndpoint`.</span></span> <span data-ttu-id="0638e-140">Nazwa punktu końcowego jest zdefiniowany, gdy tworzony jest obiekt punktu końcowego usługi.</span><span class="sxs-lookup"><span data-stu-id="0638e-140">The endpoint name is defined when a service endpoint object is created.</span></span>  
  
```  
EndpointNameMessageFilter endpointNameFilter = new EndpointNameMessageFilter("calculatorEndpoint");  
```  
  
 <span data-ttu-id="0638e-141">Trzeci filtr jest <xref:System.ServiceModel.Dispatcher.PrefixEndpointAddressMessageFilter>.</span><span class="sxs-lookup"><span data-stu-id="0638e-141">The third filter is a <xref:System.ServiceModel.Dispatcher.PrefixEndpointAddressMessageFilter>.</span></span> <span data-ttu-id="0638e-142">Odpowiada to wszystkie komunikaty, które pojawiło się w punkcie końcowym za pomocą adresu, który dopasowuje ciąg prefiksu adresu (lub pierwszej części), pod warunkiem.</span><span class="sxs-lookup"><span data-stu-id="0638e-142">This matches any message that showed up on an endpoint with an address that matches the address prefix (or the front portion) provided.</span></span> <span data-ttu-id="0638e-143">W tym przykładzie prefiksu adresu jest zdefiniowany jako "http://localhost/routingservice/router/rounding/".</span><span class="sxs-lookup"><span data-stu-id="0638e-143">In this example the address prefix is defined as "http://localhost/routingservice/router/rounding/".</span></span> <span data-ttu-id="0638e-144">Oznacza to, że wiadomości przychodzących, które są skierowane do "http://localhost/routingservice/router/rounding/\*" są dopasowane przez ten filtr.</span><span class="sxs-lookup"><span data-stu-id="0638e-144">This means that any incoming messages that are addressed to "http://localhost/routingservice/router/rounding/\*" are matched by this filter.</span></span> <span data-ttu-id="0638e-145">W tym przypadku jest wiadomości, które pojawiają się w punkcie końcowym zaokrąglania Kalkulator, który ma adres "http://localhost/routingservice/router/rounding/calculator".</span><span class="sxs-lookup"><span data-stu-id="0638e-145">In this case, it is messages that show up on the Rounding Calculator endpoint, which has the address of "http://localhost/routingservice/router/rounding/calculator".</span></span>  
  
```  
PrefixEndpointAddressMessageFilter prefixAddressFilter = new PrefixEndpointAddressMessageFilter(new EndpointAddress("http://localhost/routingservice/router/rounding/"));  
```  
  
 <span data-ttu-id="0638e-146">Ostatnie dwa filtry komunikatów są niestandardowe <xref:System.ServiceModel.Dispatcher.MessageFilter>s.</span><span class="sxs-lookup"><span data-stu-id="0638e-146">The last two message filters are custom <xref:System.ServiceModel.Dispatcher.MessageFilter>s.</span></span> <span data-ttu-id="0638e-147">W tym przykładzie jest używany filtr komunikatu "RoundRobin".</span><span class="sxs-lookup"><span data-stu-id="0638e-147">In this example, a "RoundRobin" message filter is used.</span></span> <span data-ttu-id="0638e-148">Ten filtr komunikatu jest tworzony w podanego pliku RoutingService\RoundRobinMessageFilter.cs.</span><span class="sxs-lookup"><span data-stu-id="0638e-148">This message filter is created in the provided RoutingService\RoundRobinMessageFilter.cs file.</span></span> <span data-ttu-id="0638e-149">Te filtry po ustawieniu tej samej grupie zamiennie raportowania są zgodne wiadomości i że tak nie jest, w taki sposób, że tylko jeden z nich odpowiada `true` w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="0638e-149">These filters, when set to the same group, alternate between reporting that they match the message and that they do not, such that only one of them responds `true` at a time.</span></span>  
  
```  
RoundRobinMessageFilter roundRobinFilter1 = new RoundRobinMessageFilter("group1");  
  
RoundRobinMessageFilter roundRobinFilter2 = new RoundRobinMessageFilter("group1");  
```  
  
 <span data-ttu-id="0638e-150">Następnie wszystkie te komunikaty są dodawane do <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601>.</span><span class="sxs-lookup"><span data-stu-id="0638e-150">Next, all of those messages are added to a <xref:System.ServiceModel.Dispatcher.MessageFilterTable%601>.</span></span> <span data-ttu-id="0638e-151">W ten sposób priorytety są określane w celu wywierania wpływu na kolejność, w którym tabeli filtr komunikatów wykonuje filtry.</span><span class="sxs-lookup"><span data-stu-id="0638e-151">In doing so, priorities are specified to influence the order in which the message filter table executes the filters.</span></span> <span data-ttu-id="0638e-152">Wyższy priorytet, tym szybciej filtru jest wykonywana. tym niższy priorytet, później filtru jest wykonywany.</span><span class="sxs-lookup"><span data-stu-id="0638e-152">The higher the priority, the sooner the filter is executed; the lower the priority, the later a filter is executed.</span></span> <span data-ttu-id="0638e-153">Dlatego filtr o priorytecie 2 jest uruchamiany przed filtr priorytetem 1.</span><span class="sxs-lookup"><span data-stu-id="0638e-153">Thus a filter at priority 2 runs before a filter at priority 1.</span></span> <span data-ttu-id="0638e-154">Domyślny poziom priorytetu, jeśli nie określono to 0.</span><span class="sxs-lookup"><span data-stu-id="0638e-154">The default priority level if none is specified is 0.</span></span> <span data-ttu-id="0638e-155">Tabela filtr komunikatów wykonuje wszystkie filtry na poziomie podana wartość priorytetu przed przejściem do następnego najniższy poziom priorytetu.</span><span class="sxs-lookup"><span data-stu-id="0638e-155">A message filter table executes all of the filters at a given priority level before moving to the next lowest priority level.</span></span> <span data-ttu-id="0638e-156">Jeśli zostanie znalezione dopasowanie z określonym priorytetem, następnie tabeli filtr komunikatów nie będzie próby znalezienia dopasowania z niższym priorytetem dalej.</span><span class="sxs-lookup"><span data-stu-id="0638e-156">If a match is found at a particular priority, then the message filter table does not continue trying to find matches at the next lower priority.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0638e-157">Chociaż w tym przykładzie pokazano, jak używać priorytety filtr komunikatów, ogólnie rzecz biorąc jest wydajniej i lepsze projektu do projektu i skonfigurować filtry w taki sposób, że nie wymagają priorytetów do poprawnego działania.</span><span class="sxs-lookup"><span data-stu-id="0638e-157">While this example shows how to use message filter priorities, in general it is more performant and better design to design and configure your filters such that they do not require prioritization to function correctly.</span></span>  
  
 <span data-ttu-id="0638e-158">Pierwszy filtr w celu dodania jest filtr XPath i jego priorytet jest równa 2.</span><span class="sxs-lookup"><span data-stu-id="0638e-158">The first filter to be added is the XPath filter and its priority is set to 2.</span></span> <span data-ttu-id="0638e-159">Jest to pierwszy filtr komunikatów, który jest wykonywany.</span><span class="sxs-lookup"><span data-stu-id="0638e-159">This is the first message filter that executes.</span></span> <span data-ttu-id="0638e-160">Jeśli znajdzie niestandardowy nagłówek, niezależnie od tego, jakie wyniki inne filtry byłyby, komunikat jest kierowany do endpoint zaokrąglania Kalkulator.</span><span class="sxs-lookup"><span data-stu-id="0638e-160">If it finds the custom header, regardless of what the results of the other filters would be, the message is routed to the Rounding Calculator endpoint.</span></span>  
  
 <span data-ttu-id="0638e-161">Priorytetem 1 są dodawane dwa filtry.</span><span class="sxs-lookup"><span data-stu-id="0638e-161">At priority 1, two filters are added.</span></span> <span data-ttu-id="0638e-162">Ponownie je uruchomić tylko filtr XPath o priorytecie 2 jest niezgodna z wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0638e-162">Again, these only run if the XPath filter at priority 2 does not match the message.</span></span> <span data-ttu-id="0638e-163">Te dwa filtry pokazano dwa różne sposoby, aby określić, gdzie komunikat został skierowany, gdy zostało wyświetlone.</span><span class="sxs-lookup"><span data-stu-id="0638e-163">These two filters show two different ways to determine where the message was addressed when it showed up.</span></span> <span data-ttu-id="0638e-164">Ponieważ dwa filtry skutecznie Sprawdź, czy wiadomość dotarła do jednego z dwóch punktów końcowych, mogły być uruchamiane na tym samym poziomie priorytetu ponieważ robią nie oba zwrócenia `true` w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="0638e-164">Because the two filters effectively check to see whether the message arrived at one of the two endpoints, they can be run at the same priority level because they do not both return `true` at the same time.</span></span>  
  
 <span data-ttu-id="0638e-165">Na koniec priorytetem 0 (najniższy priorytet) uruchom RoundRobin komunikatu filtrów.</span><span class="sxs-lookup"><span data-stu-id="0638e-165">Finally, at Priority 0 (the lowest priority) run the RoundRobin message filters.</span></span> <span data-ttu-id="0638e-166">Filtry są skonfigurowane przy użyciu tej samej nazwy grupy, tylko jeden z nich odpowiada w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="0638e-166">Because the filters are configured with the same group name, only one of them matches at a time.</span></span> <span data-ttu-id="0638e-167">Ponieważ trasowanych wszystkie komunikaty z niestandardowego nagłówka, a wszystkie te skierowane do określonych zwirtualizowanych punktów końcowych, komunikaty obsługiwane przez filtry komunikatów RoundRobin są tylko komunikaty, które zostały opisane na domyślny punkt końcowy routera bez niestandardowego Nagłówek.</span><span class="sxs-lookup"><span data-stu-id="0638e-167">Because all messages with the custom header have been routed and all those addressed to the specific virtualized endpoints, messages handled by the RoundRobin message filters are only messages that were addressed to the default router endpoint without the custom header.</span></span> <span data-ttu-id="0638e-168">Ponieważ te komunikaty przełączyć się na wiadomości dla każdego wywołania, połowę operacji, przejdź do punktu końcowego kalkulatora regularne a druga połowa do punktu końcowego zaokrąglania Kalkulator.</span><span class="sxs-lookup"><span data-stu-id="0638e-168">Because these messages switch on a message for each call, half of the operations go to the Regular Calculator endpoint and the other half go to the Rounding Calculator endpoint.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="0638e-169">Aby użyć tego przykładu</span><span class="sxs-lookup"><span data-stu-id="0638e-169">To use this sample</span></span>  
  
1.  <span data-ttu-id="0638e-170">Za pomocą [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], otwórz AdvancedFilters.sln.</span><span class="sxs-lookup"><span data-stu-id="0638e-170">Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open AdvancedFilters.sln.</span></span>  
  
2.  <span data-ttu-id="0638e-171">Aby otworzyć **Eksploratora rozwiązań**, wybierz opcję **Eksploratora rozwiązań** z **widoku** menu.</span><span class="sxs-lookup"><span data-stu-id="0638e-171">To open **Solution Explorer**, select **Solution Explorer** from the **View** menu.</span></span>  
  
3.  <span data-ttu-id="0638e-172">W programie Visual Studio naciśnij klawisz F5 lub CTRL + SHIFT + B.</span><span class="sxs-lookup"><span data-stu-id="0638e-172">Press F5 or CTRL+SHIFT+B in Visual Studio.</span></span>  
  
    1.  <span data-ttu-id="0638e-173">Jeśli chcesz automatycznie uruchomić projektów konieczne po naciśnięciu klawisza F5, kliknij prawym przyciskiem myszy rozwiązanie, a następnie wybierz **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="0638e-173">If you would like to auto-launch the necessary projects when you press F5, right-click the solution and select **Properties**.</span></span> <span data-ttu-id="0638e-174">Wybierz **projekt startowy** węźle **wspólne właściwości** w okienku po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="0638e-174">Select the **Startup Project** node under **Common Properties** in the left pane.</span></span> <span data-ttu-id="0638e-175">Wybierz **wiele projektów startowych** przycisk radiowy, a następnie ustaw wszystkie projekty, które mają **Start** akcji.</span><span class="sxs-lookup"><span data-stu-id="0638e-175">Select the **Multiple Startup Projects**  radio button and set all of the projects to have the **Start** action.</span></span>  
  
    2.  <span data-ttu-id="0638e-176">Jeśli tworzysz projekt za pomocą klawiszy CTRL + SHIFT + B, należy uruchomić następujące aplikacje:</span><span class="sxs-lookup"><span data-stu-id="0638e-176">If you build the project with CTRL+SHIFT+B, you must start the following applications:</span></span>  
  
        1.  <span data-ttu-id="0638e-177">Kalkulator klienta (. / CalculatorClient/bin/client.exe)</span><span class="sxs-lookup"><span data-stu-id="0638e-177">Calculator Client (./CalculatorClient/bin/client.exe)</span></span>  
  
        2.  <span data-ttu-id="0638e-178">Kalkulator usługi (. / CalculatorService/bin/service.exe)</span><span class="sxs-lookup"><span data-stu-id="0638e-178">Calculator Service (./CalculatorService/bin/service.exe)</span></span>  
  
        3.  <span data-ttu-id="0638e-179">Usługa routingu Kalkulator (. / RoundingCalcService/bin/service.exe)</span><span class="sxs-lookup"><span data-stu-id="0638e-179">Routing Calculator Service (./RoundingCalcService/bin/service.exe)</span></span>  
  
        4.  <span data-ttu-id="0638e-180">RoutingService (. / RoutingService/bin/RoutingService.exe)</span><span class="sxs-lookup"><span data-stu-id="0638e-180">RoutingService (./RoutingService/bin/RoutingService.exe)</span></span>  
  
4.  <span data-ttu-id="0638e-181">W oknie konsoli klienta Kalkulator naciśnij klawisz ENTER, aby uruchomić klienta.</span><span class="sxs-lookup"><span data-stu-id="0638e-181">In the console window of the Calculator client, press ENTER to start the client.</span></span> <span data-ttu-id="0638e-182">Klient zwraca listę docelowych punktów końcowych do wyboru.</span><span class="sxs-lookup"><span data-stu-id="0638e-182">The client returns a list of destination endpoints to choose from.</span></span>  
  
5.  <span data-ttu-id="0638e-183">Wybierz docelowy punkt końcowy, wpisując jego odpowiedniego literą, a następnie naciśnij klawisz ENTER.</span><span class="sxs-lookup"><span data-stu-id="0638e-183">Choose a destination endpoint by typing its corresponding letter and press ENTER.</span></span>  
  
6.  <span data-ttu-id="0638e-184">Następnie klient pyta, czy chcesz dodać niestandardowy nagłówek.</span><span class="sxs-lookup"><span data-stu-id="0638e-184">Next, the client asks you if you want to add a custom header.</span></span> <span data-ttu-id="0638e-185">Naciśnij klawisz Y dla tak lub N nie, naciśnij klawisz ENTER.</span><span class="sxs-lookup"><span data-stu-id="0638e-185">Press Y for Yes or N for No, then press ENTER.</span></span>  
  
7.  <span data-ttu-id="0638e-186">W zależności od dokonanych wyborów powinien zostać wyświetlony różnych danych wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="0638e-186">Depending on the selections you made, you should see different outputs.</span></span>  
  
    1.  <span data-ttu-id="0638e-187">Poniżej przedstawiono, że dane wyjściowe zwrócone, jeśli nagłówka niestandardowego jest dodawany do wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0638e-187">The following is the output returned if you added a custom header to the messages.</span></span>  
  
        ```Output  
        Add(100,15.99) = 116  
        Subtract(145,76.54) = 68.5  
        Multiply(9,81.25) = 731.3  
        Divide(22,7) = 3.1  
        ```  
  
    2.  <span data-ttu-id="0638e-188">Poniżej przedstawiono, że dane wyjściowe zwrócone, jeśli została wybrana opcja punkt końcowy zaokrąglania Kalkulator, bez nagłówka niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="0638e-188">The following is the output returned if you chose the Rounding Calculator endpoint without a custom header.</span></span>  
  
        ```Output  
        Add(100,15.99) = 116  
        Subtract(145,76.54) = 68.5  
        Multiply(9,81.25) = 731.3  
        Divide(22,7) = 3.1  
        ```  
  
    3.  <span data-ttu-id="0638e-189">Poniżej przedstawiono, że dane wyjściowe zwrócone, jeśli została wybrana opcja punkt końcowy kalkulatora regularne bez nagłówka niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="0638e-189">The following is the output returned if you chose the Regular Calculator endpoint without a custom header.</span></span>  
  
        ```Output  
        Add(100,15.99) = 115.99  
        Subtract(145,76.54) = 68. 46  
        Multiply(9,81.25) = 731.25  
        Divide(22,7) = 3.14285714285714  
        ```  
  
    4.  <span data-ttu-id="0638e-190">Poniżej przedstawiono, że dane wyjściowe zwrócone, jeśli wybrano domyślny routera punkt końcowy bez nagłówka niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="0638e-190">The following is the output returned if you chose the Default Router endpoint without a custom header.</span></span>  
  
        ```Output  
        Add(100,15.99) = 116  
        Subtract(145,76.54) = 68.46  
        Multiply(9,81.25) = 731.3  
        Divide(22,7) = 3.14285714285714  
        ```  
  
8.  <span data-ttu-id="0638e-191">Kalkulator usługi i zaokrąglania Kalkulator również drukowania dziennika operacji wywoływane w celu ich odpowiedniej konsoli systemu windows.</span><span class="sxs-lookup"><span data-stu-id="0638e-191">The Calculator Service and the Rounding Calculator Service also prints out a log of the operations invoked to their respective console windows.</span></span>  
  
9. <span data-ttu-id="0638e-192">W oknie konsoli klienta wpisz `quit` i naciśnij klawisz ENTER, aby zakończyć.</span><span class="sxs-lookup"><span data-stu-id="0638e-192">In the client console window, type `quit` and press ENTER to exit.</span></span>  
  
10. <span data-ttu-id="0638e-193">Naciśnij klawisz ENTER w oknach konsoli usług do zakończenia usługi.</span><span class="sxs-lookup"><span data-stu-id="0638e-193">Press ENTER in the services console windows to terminate the services.</span></span>  
  
## <a name="configurable-via-code-or-appconfig"></a><span data-ttu-id="0638e-194">Można konfigurować za pomocą kodu lub pliku App.config</span><span class="sxs-lookup"><span data-stu-id="0638e-194">Configurable Via Code or App.config</span></span>  
 <span data-ttu-id="0638e-195">Dostarczany próbki, skonfigurowany do używania pliku App.config do definiowania zachowania routera.</span><span class="sxs-lookup"><span data-stu-id="0638e-195">The sample ships configured to use an App.config file to define the router’s behavior.</span></span> <span data-ttu-id="0638e-196">Możesz również zmienić nazwę pliku RoutingService\App.config się czymś innym, tak, aby nie został rozpoznany i usuń znaczniki komentarza wywołania metody, które ma `ConfigureRouterViaCode()` w RoutingService\routing.cs.</span><span class="sxs-lookup"><span data-stu-id="0638e-196">You can also change the name of the RoutingService\App.config file to something else so that it is not recognized and uncomment the method call to `ConfigureRouterViaCode()` in RoutingService\routing.cs.</span></span> <span data-ttu-id="0638e-197">Każda z tych metod powoduje takie samo zachowanie z routera.</span><span class="sxs-lookup"><span data-stu-id="0638e-197">Either method results in the same behavior from the router.</span></span>  
  
### <a name="scenario"></a><span data-ttu-id="0638e-198">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="0638e-198">Scenario</span></span>  
 <span data-ttu-id="0638e-199">Niniejszy przykład demonstruje routerze działającego jako router opartego na zawartości, dzięki czemu wielu typów lub implementacji usług są dostępne za pośrednictwem punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="0638e-199">This sample demonstrates the router acting as a content-based router allowing multiple types or implementation of services to be exposed through one endpoint.</span></span>  
  
### <a name="real-world-scenario"></a><span data-ttu-id="0638e-200">Scenariusz rzeczywistych</span><span class="sxs-lookup"><span data-stu-id="0638e-200">Real World Scenario</span></span>  
 <span data-ttu-id="0638e-201">Firma Contoso chce wszystkich swoich usług, aby uwidocznić tylko jeden punkt końcowy publicznie za pomocą którego oferują dostęp do wielu różnych typów usług wirtualizacji.</span><span class="sxs-lookup"><span data-stu-id="0638e-201">Contoso wants to virtualize all of their services to expose only one endpoint publicly through which they offer access to multiple different types of services.</span></span> <span data-ttu-id="0638e-202">W tym przypadku skorzystają z usługą routingu opartego na zawartości możliwości routingu w celu określenia, gdzie mają być wysyłane żądania przychodzące.</span><span class="sxs-lookup"><span data-stu-id="0638e-202">In this case they utilize the routing service’s content-based routing capabilities to determine where the incoming requests should be sent.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0638e-203">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0638e-203">See Also</span></span>  
 [<span data-ttu-id="0638e-204">Przykłady trwałości i hostingu AppFabric</span><span class="sxs-lookup"><span data-stu-id="0638e-204">AppFabric Hosting and Persistence Samples</span></span>](https://go.microsoft.com/fwlink/?LinkId=193961)
