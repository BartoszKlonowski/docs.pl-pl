---
title: Mostkowanie i obsługa błędów
ms.date: 03/30/2017
ms.assetid: 4ae87d1a-b615-4014-a494-a53f63ff0137
ms.openlocfilehash: 6afaddc75855b7e95ad708b2179cabb9aee35001
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/04/2018
ms.locfileid: "43514545"
---
# <a name="bridging-and-error-handling"></a><span data-ttu-id="23419-102">Mostkowanie i obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="23419-102">Bridging and Error Handling</span></span>
<span data-ttu-id="23419-103">Niniejszy przykład pokazuje, jak usługa routingu Windows Communication Foundation (WCF) służy do mostkowanie komunikacji między klientem a usługą, używanego przez różnych powiązania.</span><span class="sxs-lookup"><span data-stu-id="23419-103">This sample demonstrates how the Windows Communication Foundation (WCF) routing service is used for bridging communication between a client and a service that use different bindings.</span></span> <span data-ttu-id="23419-104">Ten przykład pokazuje także sposób korzystania z usługi tworzenia kopii zapasowych dla scenariusze trybu failover.</span><span class="sxs-lookup"><span data-stu-id="23419-104">This sample also shows how to use a back-up service for failover scenarios.</span></span> <span data-ttu-id="23419-105">Usługa routingu jest składnikiem usługi WCF, który ułatwia to dołączenie routerem na podstawie zawartości do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="23419-105">The routing service is a WCF component that makes it easy to include a content-based router in your application.</span></span> <span data-ttu-id="23419-106">W tym przykładzie dostosowuje się standardowa przykładowe Kalkulator WCF do komunikowania się za pomocą usługi routingu.</span><span class="sxs-lookup"><span data-stu-id="23419-106">This sample adapts the standard WCF Calculator Sample to communicate using the routing service.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="23419-107">Przykłady może już być zainstalowany na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="23419-107">The samples may already be installed on your computer.</span></span> <span data-ttu-id="23419-108">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="23419-108">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="23419-109">Jeśli ten katalog nie istnieje, przejdź do strony [Windows Communication Foundation (WCF) i przykłady Windows Workflow Foundation (WF) dla platformy .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) do pobierania wszystkich Windows Communication Foundation (WCF) i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] przykładów.</span><span class="sxs-lookup"><span data-stu-id="23419-109">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="23419-110">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="23419-110">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\RoutingServices\ErrorHandlingAndBridging`  
  
## <a name="sample-details"></a><span data-ttu-id="23419-111">Przykład szczegółów</span><span class="sxs-lookup"><span data-stu-id="23419-111">Sample Details</span></span>  
 <span data-ttu-id="23419-112">W tym przykładzie klient Kalkulator jest skonfigurowany do wysyłania wiadomości do punktu końcowego uwidocznionego przez router.</span><span class="sxs-lookup"><span data-stu-id="23419-112">In this sample, the Calculator client is configured to send messages to an endpoint exposed by the router.</span></span> <span data-ttu-id="23419-113">Usługa routingu jest skonfigurowany do akceptowania wszystkie komunikaty wysyłane do niej i przekazują je do punktu końcowego, który odnosi się do usługi kalkulatora.</span><span class="sxs-lookup"><span data-stu-id="23419-113">The routing service is configured to accept all messages sent to it and to forward them to an endpoint that corresponds to the Calculator service.</span></span> <span data-ttu-id="23419-114">Następujące punkty opisano w konfiguracji podstawowej usługi Kalkulator, usługę Kalkulator kopii zapasowych i klienta Kalkulator i jak się dzieje komunikacji między klientem a usługą przy użyciu usługi routingu:</span><span class="sxs-lookup"><span data-stu-id="23419-114">The following points describe the configuration of the primary Calculator service, the back-up Calculator service, and the Calculator client and how the communication between the client and the service happens using the routing service:</span></span>  
  
-   <span data-ttu-id="23419-115">Klient Kalkulator jest skonfigurowany do użycia BasicHttpBinding, podczas gdy usługa Kalkulator jest skonfigurowana do używania NetTcpBinding.</span><span class="sxs-lookup"><span data-stu-id="23419-115">The Calculator client is configured to use BasicHttpBinding while the Calculator service is configured to use NetTcpBinding.</span></span> <span data-ttu-id="23419-116">Usługa routingu automatycznie konwertuje komunikaty w razie potrzeby przed wysłaniem ich do usługi Kalkulator i konwertuje ono również odpowiedzi, aby klient Kalkulator mają do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="23419-116">The routing service automatically converts the messages as necessary before sending them to the Calculator service and it also converts the responses so that the Calculator client can access them.</span></span>  
  
-   <span data-ttu-id="23419-117">Usługa routingu obsługującemu dwie usługi Kalkulatora: podstawowe usługi Kalkulator i wykonaj kopię zapasową Kalkulator.</span><span class="sxs-lookup"><span data-stu-id="23419-117">The routing service knows about two Calculator services: the primary Calculator service and the back-up Calculator service.</span></span> <span data-ttu-id="23419-118">Usługa routingu najpierw próbuje komunikować się z podstawowego punktu końcowego usługi kalkulatora.</span><span class="sxs-lookup"><span data-stu-id="23419-118">The routing service first attempts to communicate with the primary Calculator service endpoint.</span></span> <span data-ttu-id="23419-119">Jeśli ta próba kończy się niepowodzeniem ze względu na punkt końcowy jest wciśnięty, usługa routingu próbuje się komunikować z punktem końcowym usługi Kalkulator kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="23419-119">If this attempt fails due to the endpoint being down, the routing service then tries to communicate with the back-up Calculator service endpoint.</span></span>  
  
 <span data-ttu-id="23419-120">Ten sposób wiadomości wysłanych z klienta są odbierane przez router, a są przekierowane do rzeczywistej usługi kalkulatora.</span><span class="sxs-lookup"><span data-stu-id="23419-120">Thus messages sent from the client are received by the router and are rerouted to the actual Calculator service.</span></span> <span data-ttu-id="23419-121">Jeśli punkt końcowy usługi Kalkulator jest wyłączony, usługa routingu kieruje wiadomości z punktem końcowym usługi Kalkulator kopii zapasowych.</span><span class="sxs-lookup"><span data-stu-id="23419-121">If the Calculator service endpoint is down, the routing service routes the message to the back-up Calculator service endpoint.</span></span> <span data-ttu-id="23419-122">Komunikaty z Kalkulatora usługi kopii zapasowej są wysyłane do routera usługi, który z kolei przekazuje je do klienta kalkulatora.</span><span class="sxs-lookup"><span data-stu-id="23419-122">Messages from the back-up Calculator service are sent back to the service router, which in turn passes them back to the Calculator client.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="23419-123">Wykaz kopii zapasowych może mieć więcej niż jeden punkt końcowy zdefiniowany.</span><span class="sxs-lookup"><span data-stu-id="23419-123">A back-up list can have more than one endpoint defined.</span></span> <span data-ttu-id="23419-124">W tym przypadku punkt końcowy usługi tworzenia kopii zapasowych nie działa, usługa routingu będzie próbuje nawiązać połączenie do następnego punktu końcowego kopii zapasowych na liście do momentu pomyślnego połączenia wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="23419-124">In this case if the back-up service endpoint is down, the routing service attempts to connect to the next back-up endpoint in the list until a successful connection occurs.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="23419-125">Aby użyć tego przykładu</span><span class="sxs-lookup"><span data-stu-id="23419-125">To use this sample</span></span>  
  
1.  <span data-ttu-id="23419-126">Za pomocą [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], otwórz RouterBridgingAndErrorHandling.sln.</span><span class="sxs-lookup"><span data-stu-id="23419-126">Using [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], open RouterBridgingAndErrorHandling.sln.</span></span>  
  
2.  <span data-ttu-id="23419-127">Naciśnij klawisz F5 lub CTRL + SHIFT + B, w programie Visual Studio</span><span class="sxs-lookup"><span data-stu-id="23419-127">Press F5 or CTRL+SHIFT+B in Visual Studio</span></span>  
  
    1.  <span data-ttu-id="23419-128">Jeśli chcesz automatycznie uruchomić projektów konieczne po naciśnięciu klawisza F5, kliknij prawym przyciskiem myszy rozwiązanie, wybierz opcję **właściwości**, a następnie w **projekt startowy** węźle **wspólne właściwości**, wybierz opcję **wiele projektów startowych**, a wszystkie projekty **Start**.</span><span class="sxs-lookup"><span data-stu-id="23419-128">If you would like to auto-launch the necessary projects when you press F5, right-click the solution, select **Properties**, and in the **Startup Project** node under **Common Properties**, select **Multiple Startup Projects**, and set all projects to **Start**.</span></span>  
  
    2.  <span data-ttu-id="23419-129">Jeśli tworzysz projekt za pomocą klawiszy CTRL + SHIFT + B, uruchom następujące aplikacje:</span><span class="sxs-lookup"><span data-stu-id="23419-129">If you build the project with CTRL+SHIFT+B, start the following applications:</span></span>  
  
        1.  <span data-ttu-id="23419-130">Kalkulator klienta (. / CalculatorClient/bin/client.exe)</span><span class="sxs-lookup"><span data-stu-id="23419-130">Calculator client (./CalculatorClient/bin/client.exe)</span></span>  
  
        2.  <span data-ttu-id="23419-131">Kalkulator usługi (. / CalculatorService/bin/service.exe)</span><span class="sxs-lookup"><span data-stu-id="23419-131">Calculator service (./CalculatorService/bin/service.exe)</span></span>  
  
        3.  <span data-ttu-id="23419-132">Usługa routingu (. / RoutingService/bin/RoutingService.exe)</span><span class="sxs-lookup"><span data-stu-id="23419-132">Routing Service (./RoutingService/bin/RoutingService.exe)</span></span>  
  
3.  <span data-ttu-id="23419-133">W kliencie Kalkulator naciśnij klawisz ENTER, aby uruchomić klienta.</span><span class="sxs-lookup"><span data-stu-id="23419-133">In the Calculator Client, press ENTER to start the client.</span></span>  
  
     <span data-ttu-id="23419-134">Powinny zostać wyświetlone następujące dane wyjściowe:</span><span class="sxs-lookup"><span data-stu-id="23419-134">You should see the following output:</span></span>  
  
    ```Output  
    Add(100,15.99) = 115.99  
    Subtract(145,76.54) = 68.46  
    Multiply(9,81.25) = 731.25  
    Divide(22,7) = 3.14285714285714  
    ```  
  
## <a name="configurable-via-code-or-appconfig"></a><span data-ttu-id="23419-135">Można konfigurować za pomocą kodu lub pliku App.config</span><span class="sxs-lookup"><span data-stu-id="23419-135">Configurable Via Code or App.config</span></span>  
 <span data-ttu-id="23419-136">Dostarczany próbki, skonfigurowany do używania pliku App.config do definiowania zachowania routera.</span><span class="sxs-lookup"><span data-stu-id="23419-136">The sample ships configured to use an App.config file to define the router’s behavior.</span></span> <span data-ttu-id="23419-137">Możesz również zmienić nazwę pliku App.config się czymś innym, tak aby nie został rozpoznany i usuń znaczniki komentarza wywołania metody, które ma `ConfigureRouterViaCode()`.</span><span class="sxs-lookup"><span data-stu-id="23419-137">You can also change the name of the App.config file to something else so that it is not recognized and uncomment the method call to `ConfigureRouterViaCode()`.</span></span> <span data-ttu-id="23419-138">Każda z tych metod powoduje takie samo zachowanie z routera.</span><span class="sxs-lookup"><span data-stu-id="23419-138">Either method results in the same behavior from the router.</span></span>  
  
### <a name="scenario"></a><span data-ttu-id="23419-139">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="23419-139">Scenario</span></span>  
 <span data-ttu-id="23419-140">Niniejszy przykład pokazuje routera service pełniący funkcję obsługi mostka i błędów protokołu.</span><span class="sxs-lookup"><span data-stu-id="23419-140">This sample demonstrates the service router acting as a protocol bridge and error handler.</span></span> <span data-ttu-id="23419-141">W tym scenariuszu routingu opartego na zawartości nie występuje; Usługa routingu działa jako węzeł przezroczystym serwerem proxy skonfigurowane do przekazywania wiadomości bezpośrednio do wstępnie skonfigurowanego zestawu docelowych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="23419-141">In this scenario, no content-based routing occurs; the routing service acts as a transparent proxy node configured to pass messages directly to a preconfigured set of destination endpoints.</span></span> <span data-ttu-id="23419-142">Usługa routingu wykonuje też dodatkowe kroki w sposób niewidoczny dla użytkownika obsługi błędów występujących podczas próbuje wysyłać do punktów końcowych, że jest skonfigurowany do komunikowania się z.</span><span class="sxs-lookup"><span data-stu-id="23419-142">The routing service also performs the additional steps of transparently handling errors that occur when it tries to send to the endpoints that it is configured to communicate with.</span></span> <span data-ttu-id="23419-143">Według działających jako Most protokołu, usługa routingu umożliwia użytkownikowi zdefiniowanie jednego protokołu komunikacji zewnętrznych i inny wpis dla komunikacji wewnętrznej.</span><span class="sxs-lookup"><span data-stu-id="23419-143">By acting as a protocol bridge, the routing service enables the user to define one protocol for external communication and another for internal communication.</span></span>  
  
### <a name="real-world-scenario"></a><span data-ttu-id="23419-144">Scenariusz rzeczywistych</span><span class="sxs-lookup"><span data-stu-id="23419-144">Real World Scenario</span></span>  
 <span data-ttu-id="23419-145">Firma Contoso chce zapewnić punktu końcowego usług międzyoperacyjnych w sieci, przy jednoczesnej optymalizacji wydajności wewnętrznie.</span><span class="sxs-lookup"><span data-stu-id="23419-145">Contoso wants to provide an interoperable service endpoint to the world, while optimizing performance internally.</span></span> <span data-ttu-id="23419-146">Ten sposób uwidacznia jego usług na świecie za pośrednictwem punktu końcowego przy użyciu BasicHttpBinding, używając przy tym wewnętrznie usługa routingu do zestawiania tego połączenia z punktem końcowym za pomocą NetTcpBinding, używane w usługach.</span><span class="sxs-lookup"><span data-stu-id="23419-146">Thus it exposes its services to the world through an endpoint using the BasicHttpBinding, while internally using the routing service to bridge that connection to the endpoint using NetTcpBinding, which its services use.</span></span> <span data-ttu-id="23419-147">Ponadto firma Contoso chce, aby jego oferty być odporne na tymczasowe awarii w jednym z jego produkcji usługi usług, a zatem Wirtualizuje wiele punktów końcowych za zaporą za pomocą usługi routera jego możliwości, aby automatycznie przejściu w tryb failover obsługę błędów Tworzenie kopii zapasowych punktów końcowych, gdy jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="23419-147">Furthermore, Contoso wants its service offering to be tolerant of temporary outages in any one of their production services and thus virtualizes multiple endpoints behind the router service using the ’s error handling capabilities to automatically failover to back-up endpoints when necessary.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="23419-148">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="23419-148">See Also</span></span>  
 [<span data-ttu-id="23419-149">Przykłady trwałości i hostingu AppFabric</span><span class="sxs-lookup"><span data-stu-id="23419-149">AppFabric Hosting and Persistence Samples</span></span>](https://go.microsoft.com/fwlink/?LinkId=193961)
