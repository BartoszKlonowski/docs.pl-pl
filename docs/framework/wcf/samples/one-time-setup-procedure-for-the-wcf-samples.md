---
title: Procedura konfiguracji jednorazowej dla przykładów Windows Communication Foundation
ms.date: 03/30/2017
ms.assetid: a5848ffd-3eb5-432d-812e-bd948ccb6bca
ms.openlocfilehash: 954ec04d2ef1ca7667b4f75a8a6652010b5dbd33
ms.sourcegitcommit: 43cbde34970f5f38f30c43cd63b9c7e2e83717ae
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/11/2020
ms.locfileid: "81121618"
---
# <a name="one-time-setup-procedure-for-the-windows-communication-foundation-samples"></a><span data-ttu-id="efa8f-102">Procedura konfiguracji jednorazowej dla przykładów Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="efa8f-102">One-Time Setup Procedure for the Windows Communication Foundation Samples</span></span>

<span data-ttu-id="efa8f-103">Większość przykładów programu Windows Communication Foundation (WCF) jest hostowana w internetowych usługach informacyjnych (IIS) i uruchamiana ze wspólnego katalogu wirtualnego.</span><span class="sxs-lookup"><span data-stu-id="efa8f-103">Most of the Windows Communication Foundation (WCF) samples are hosted in Internet Information Services (IIS) and run from a common virtual directory.</span></span> <span data-ttu-id="efa8f-104">Ta jednorazowa procedura konfiguracji tworzy folder na dysku; dodaje również katalog wirtualny do usług IIS o nazwie **ServiceModelSamples**.</span><span class="sxs-lookup"><span data-stu-id="efa8f-104">This one-time setup procedure creates a folder on the disk; it also adds a virtual directory to IIS named **ServiceModelSamples**.</span></span>

<span data-ttu-id="efa8f-105">Katalog wirtualny **ServiceModelSamples** służy do tworzenia i uruchamiania wszystkich przykładów korzystających z usługi hostowanej przez usługi IIS.</span><span class="sxs-lookup"><span data-stu-id="efa8f-105">The **ServiceModelSamples** virtual directory is used for building and running all samples that use an IIS-hosted service.</span></span> <span data-ttu-id="efa8f-106">Jest to jedyny katalog wirtualny, który jest wymagany do uruchomienia próbek.</span><span class="sxs-lookup"><span data-stu-id="efa8f-106">This is the only virtual directory that is required to run the samples.</span></span> <span data-ttu-id="efa8f-107">Tworzenie próbki zastąpi wszystkie wcześniej wdrożone usługi w tym katalogu wirtualnym; tylko ostatnio zbudowany próbka zostanie wdrożona i będzie dostępna w tym katalogu wirtualnym.</span><span class="sxs-lookup"><span data-stu-id="efa8f-107">Building a sample will replace any previously deployed service at this virtual directory; only the most recently built sample will be deployed and available in this virtual directory.</span></span>

> [!NOTE]
> <span data-ttu-id="efa8f-108">Należy uruchomić wszystkie polecenia w ramach lokalnego konta administratora.</span><span class="sxs-lookup"><span data-stu-id="efa8f-108">You must run all commands under a local administrator account.</span></span> <span data-ttu-id="efa8f-109">Jeśli używasz systemu Windows 7, Windows Vista lub Windows Server 2008 R2, należy również uruchomić wiersz polecenia z podwyższonymi uprawnieniami.</span><span class="sxs-lookup"><span data-stu-id="efa8f-109">If you are using Windows 7, Windows Vista, or Windows Server 2008 R2, you must also run the command prompt with elevated privileges.</span></span> <span data-ttu-id="efa8f-110">W tym celu kliknij prawym przyciskiem myszy ikonę wiersza polecenia, a następnie kliknij polecenie **Uruchom jako administrator**.</span><span class="sxs-lookup"><span data-stu-id="efa8f-110">To do so, right-click the command prompt icon, and then click **Run as administrator**.</span></span> <span data-ttu-id="efa8f-111">Wszystkie polecenia w tym temacie muszą być uruchamiane w wierszu polecenia, który ma odpowiednie ustawienia ścieżki.</span><span class="sxs-lookup"><span data-stu-id="efa8f-111">All commands in this topic must be run in a command prompt that has the appropriate path settings.</span></span>  <span data-ttu-id="efa8f-112">Najprostszym sposobem, aby upewnić się, że jest to za pomocą wiersza polecenia programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="efa8f-112">The easiest way to ensure this is by using the Visual Studio Command Prompt.</span></span> <span data-ttu-id="efa8f-113">Aby otworzyć ten monit, kliknij przycisk **Start**, wybierz **pozycję Wszystkie programy**, przewiń w dół do programu Visual Studio **2010**, wybierz polecenie **Narzędzia programu Visual Studio**, kliknij prawym przyciskiem myszy wiersz polecenia programu Visual Studio **(2010),** a następnie kliknij polecenie **Uruchom jako administrator**.</span><span class="sxs-lookup"><span data-stu-id="efa8f-113">To open this prompt, click **Start**, select **All Programs**, scroll down to **Visual Studio 2010**, select **Visual Studio Tools**, right-click **Visual Studio Command Prompt (2010)**, and then click **Run as administrator**.</span></span> <span data-ttu-id="efa8f-114">Jeśli masz zainstalowaną jedną z wersji programu Visual Studio Express, ten wiersz polecenia jest niedostępny i do ścieżki systemowej należy dodać "C:\Windows\Microsoft.Net\Framework\v4.0".</span><span class="sxs-lookup"><span data-stu-id="efa8f-114">If you have one of the Visual Studio Express editions installed, this command prompt is not available, and you will have to add "C:\Windows\Microsoft.Net\Framework\v4.0" to the system path.</span></span>

### <a name="one-time-setup-procedure-for-wcf-samples"></a><span data-ttu-id="efa8f-115">Procedura jednorazowej konfiguracji próbek WCF</span><span class="sxs-lookup"><span data-stu-id="efa8f-115">One-time setup procedure for WCF samples</span></span>

1. <span data-ttu-id="efa8f-116">Upewnij się, że ASP.NET jest skonfigurowany.</span><span class="sxs-lookup"><span data-stu-id="efa8f-116">Ensure that ASP.NET is set up.</span></span> <span data-ttu-id="efa8f-117">Aby uzyskać więcej informacji na temat konfigurowania ASP.NET, zobacz [Instrukcje hostingu usług informacyjnych w Internecie](internet-information-service-hosting-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="efa8f-117">For more information about how to set up ASP.NET, see [Internet Information Service Hosting Instructions](internet-information-service-hosting-instructions.md).</span></span>

2. <span data-ttu-id="efa8f-118">Upewnij się, że jest zainstalowany program .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="efa8f-118">Ensure that .NET Framework 4 is installed.</span></span> <span data-ttu-id="efa8f-119">Wyszukiwanie następującego katalogu w wersji 4.0 (lub nowszej): **\Windows\Microsoft.NET\Framework**</span><span class="sxs-lookup"><span data-stu-id="efa8f-119">Search the following directory for v4.0 (or later): **\Windows\Microsoft.NET\Framework**</span></span>

3. <span data-ttu-id="efa8f-120">Upewnij się, że masz zainstalowany program Visual Studio 2012 lub nowszy lub system operacyjny to Windows Server 2008 SP2 lub nowszy.</span><span class="sxs-lookup"><span data-stu-id="efa8f-120">Ensure you have Visual Studio 2012 or later installed, or your operating system is Windows Server 2008 SP2 or later.</span></span>

4. <span data-ttu-id="efa8f-121">Uruchom następujące polecenia.</span><span class="sxs-lookup"><span data-stu-id="efa8f-121">Run the following commands.</span></span> <span data-ttu-id="efa8f-122">Aby uzyskać więcej informacji o tym, dlaczego te polecenia muszą być uruchamiane, zobacz [Usługa hostowana usług IIS kończy się niepowodzeniem](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms752252(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="efa8f-122">For more information about why these commands must be run, see [IIS Hosted Service Fails](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/ms752252(v=vs.90)).</span></span>

    > [!WARNING]
    > <span data-ttu-id="efa8f-123">Jeśli program IIS zostanie ponownie zainstalowany, należy ponownie uruchomić następujące polecenia.</span><span class="sxs-lookup"><span data-stu-id="efa8f-123">If IIS is reinstalled, the following commands will need to be run again.</span></span>

    ```console
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\aspnet_regiis" –i –enable
    "%WINDIR%\Microsoft.Net\Framework\v4.0.30319\ServiceModelReg.exe" -r
    ```

    > [!WARNING]
    > <span data-ttu-id="efa8f-124">Uruchomienie polecenia `aspnet_regiis –i –enable` spowoduje, że domyślna pula aplikacji będzie uruchamiana przy użyciu programu .NET Framework 4, co może powodować problemy ze zgodnością innych aplikacji na tym samym komputerze.</span><span class="sxs-lookup"><span data-stu-id="efa8f-124">Running the command `aspnet_regiis –i –enable` will make the Default App Pool run using .NET Framework 4, which may produce incompatibility issues for other applications on the same computer.</span></span>

5. <span data-ttu-id="efa8f-125">Postępuj zgodnie z [instrukcjami zapory,](firewall-instructions.md) aby włączyć porty używane przez przykłady.</span><span class="sxs-lookup"><span data-stu-id="efa8f-125">Follow the [Firewall Instructions](firewall-instructions.md) for enabling the ports used by the samples.</span></span>

6. <span data-ttu-id="efa8f-126">Sprawdź, czy w katalogu \<domyślnym nie ma następujących katalogów domyślnych: InstallDrive>:**\WF_WCF_Samples**.</span><span class="sxs-lookup"><span data-stu-id="efa8f-126">Check for the following default directory: \<InstallDrive>:**\WF_WCF_Samples**.</span></span> <span data-ttu-id="efa8f-127">Jeśli próbki zostały wcześniej zainstalowane, jest to katalog domyślny.</span><span class="sxs-lookup"><span data-stu-id="efa8f-127">If the samples were previously installed, this is the default directory.</span></span>

7. <span data-ttu-id="efa8f-128">Jeśli próbki nie są zainstalowane, zainstaluj je z [przykładów Programu Windows Communication Foundation (WCF) i Windows Workflow Foundation (WF) dla programu .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459).</span><span class="sxs-lookup"><span data-stu-id="efa8f-128">If the samples are not installed, install them from [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://www.microsoft.com/download/details.aspx?id=21459).</span></span>

8. <span data-ttu-id="efa8f-129">Po zainstalowaniu przykładów przejdź \<do : InstallDrive>:\*\*\WF_WCF_Samples\WCF\Setup\\ \*\*</span><span class="sxs-lookup"><span data-stu-id="efa8f-129">After installing the samples, go to : \<InstallDrive>:**\WF_WCF_Samples\WCF\Setup\\**</span></span>

9. <span data-ttu-id="efa8f-130">Uruchom plik wsadowy **Setupvroot.bat.**</span><span class="sxs-lookup"><span data-stu-id="efa8f-130">Run the **Setupvroot.bat** batch file.</span></span> <span data-ttu-id="efa8f-131">Wykonywane są następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="efa8f-131">The following steps are performed:</span></span>

    - <span data-ttu-id="efa8f-132">Katalog wirtualny jest tworzony w usługach IIS o nazwie ServiceModelSamples.</span><span class="sxs-lookup"><span data-stu-id="efa8f-132">A virtual directory is created in IIS named ServiceModelSamples.</span></span>

    - <span data-ttu-id="efa8f-133">Nowe katalogi dysków są tworzone o nazwie %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples i %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span><span class="sxs-lookup"><span data-stu-id="efa8f-133">New disk directories are created named %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples and %SystemDrive%\Inetpub\wwwroot\ServiceModelSamples\bin.</span></span>

    <span data-ttu-id="efa8f-134">Jeśli wolisz ręcznie skonfigurować te katalogi, zobacz [Instrukcje konfiguracji katalogu wirtualnego](virtual-directory-setup-instructions.md).</span><span class="sxs-lookup"><span data-stu-id="efa8f-134">If you prefer to set up these directories manually, see the [Virtual Directory Setup Instructions](virtual-directory-setup-instructions.md).</span></span> <span data-ttu-id="efa8f-135">Aby przywrócić wszystkie zmiany wykonane w tym kroku, uruchom cleanupvroot.bat po zakończeniu korzystania z próbek.</span><span class="sxs-lookup"><span data-stu-id="efa8f-135">To revert all changes done in this step, run cleanupvroot.bat after you finish using the samples.</span></span>

    > [!NOTE]
    > <span data-ttu-id="efa8f-136">Ta procedura musi być wykonana tylko raz na komputerze, chyba że cleanupvroot.bat jest uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="efa8f-136">This procedure must be performed only once on a computer, unless cleanupvroot.bat is run.</span></span>

10. <span data-ttu-id="efa8f-137">Należy udzielić uprawnień do modyfikowania dla %SystemDrive%\inetpub\wwwroot do konta, na którym są one budowane próbki i użytkownika usługi sieciowej.</span><span class="sxs-lookup"><span data-stu-id="efa8f-137">You must grant permission to modify for %SystemDrive%\inetpub\wwwroot to the account under which you are building the samples and the Network Service user.</span></span> <span data-ttu-id="efa8f-138">Podczas tworzenia niektóre próbki hostowane w sieci Web mogą próbować skopiować skompilowane pliki binarne do wcześniej wymienionej lokalizacji, a jeśli nie ustawiono odpowiednich uprawnień, kompilacja zostanie przerwana.</span><span class="sxs-lookup"><span data-stu-id="efa8f-138">While building, some Web-hosted samples might attempt to copy the compiled binaries to the previously mentioned location, and if you have not set the appropriate permissions, the build will break.</span></span> <span data-ttu-id="efa8f-139">Alternatywnie można pozostawić uprawnienia, ponieważ są one i uruchomić wiersz polecenia SDK lub Visual Studio Command Prompt (2012) jako administrator lub utworzyć przykłady w programie Visual Studio 2012, również uruchomić jako administrator.</span><span class="sxs-lookup"><span data-stu-id="efa8f-139">Alternatively, you can leave the permissions as they are and run the SDK command prompt or Visual Studio Command Prompt (2012) as Administrator, or build the samples in Visual Studio 2012, also run as Administrator.</span></span>

    > [!NOTE]
    > <span data-ttu-id="efa8f-140">Jeśli ten krok nie zostanie ukończony, wszystkie próbki hostowane przez iIS zakończy się niepowodzeniem podczas tworzenia.</span><span class="sxs-lookup"><span data-stu-id="efa8f-140">If this step is not completed, all IIS-hosted samples will fail while building.</span></span> <span data-ttu-id="efa8f-141">Upewnij się, że poprawnie ustawisz uprawnienia lub uruchomisz wiersz polecenia zestawu SDK i wiersz polecenia programu Visual Studio (2012) jako administratora.</span><span class="sxs-lookup"><span data-stu-id="efa8f-141">Ensure that you set the permissions correctly, or run both the SDK command prompt and Visual Studio Command Prompt (2012) as Administrator.</span></span>

11. <span data-ttu-id="efa8f-142">Tworzenie katalogu C:\logs na komputerze; niektóre próbki mogą się tego spodziewać.</span><span class="sxs-lookup"><span data-stu-id="efa8f-142">Create a C:\logs directory on the computer; some samples might be expecting it.</span></span> <span data-ttu-id="efa8f-143">Upewnij się, że odpowiednie konto ma dostęp do zapisu przyznany temu folderowi.</span><span class="sxs-lookup"><span data-stu-id="efa8f-143">Make sure that the appropriate account has write access granted to this folder.</span></span> <span data-ttu-id="efa8f-144">W systemach Windows 7, Windows Vista i Windows Server 2008 R2 to konto to **usługa sieciowa**.</span><span class="sxs-lookup"><span data-stu-id="efa8f-144">For Windows 7, Windows Vista, and Windows Server 2008 R2, this account is **Network Service**.</span></span> <span data-ttu-id="efa8f-145">W systemie Windows Server 2008 kontem jest nt authority\usługa sieciowa.</span><span class="sxs-lookup"><span data-stu-id="efa8f-145">For  Windows Server 2008, the account is NT Authority\Network Service.</span></span> <span data-ttu-id="efa8f-146">W systemach Windows XP i Windows Server 2003 kontem jest aspnet.</span><span class="sxs-lookup"><span data-stu-id="efa8f-146">For Windows XP and Windows Server 2003, the account is ASPNET.</span></span>

12. <span data-ttu-id="efa8f-147">Uruchom plik Setupcerttool.bat.</span><span class="sxs-lookup"><span data-stu-id="efa8f-147">Run the Setupcerttool.bat file.</span></span> <span data-ttu-id="efa8f-148">Ten plik znajduje \<się w folderze InstallPath>\WF_WCF_Samples\WCF\Setup\.</span><span class="sxs-lookup"><span data-stu-id="efa8f-148">This file is located in the  \<InstallPath>\WF_WCF_Samples\WCF\Setup\  folder.</span></span>  <span data-ttu-id="efa8f-149">Ten skrypt wykona następujące zadania:</span><span class="sxs-lookup"><span data-stu-id="efa8f-149">This script will perform the following tasks:</span></span>

    - <span data-ttu-id="efa8f-150">Tworzenie narzędzia FindPrivateKey.</span><span class="sxs-lookup"><span data-stu-id="efa8f-150">Build the FindPrivateKey tool.</span></span>

    - <span data-ttu-id="efa8f-151">Utwórz katalog o nazwie %ProgramFiles%\ServiceModelSampleTools.</span><span class="sxs-lookup"><span data-stu-id="efa8f-151">Create a directory called %ProgramFiles%\ServiceModelSampleTools.</span></span>

    - <span data-ttu-id="efa8f-152">Skopiuj nowe narzędzie FindPrivateKey do tego katalogu.</span><span class="sxs-lookup"><span data-stu-id="efa8f-152">Copy the new FindPrivateKey tool to this directory.</span></span>

    <span data-ttu-id="efa8f-153">To narzędzie jest wymagane przez przykłady, które używają certyfikatów i są hostowane w urzędzie IIS.</span><span class="sxs-lookup"><span data-stu-id="efa8f-153">This tool is required by samples that use certificates and are hosted in IIS.</span></span>

    > [!NOTE]
    > <span data-ttu-id="efa8f-154">Ze względów bezpieczeństwa należy pamiętać o usunięciu definicji katalogu wirtualnego i uprawnień przyznanych w powyższych krokach konfiguracji, uruchamiając plik wsadowy o nazwie Cleanupvroot.bat po zakończeniu pracy z próbkami.</span><span class="sxs-lookup"><span data-stu-id="efa8f-154">For security purposes, remember to remove the virtual directory definition and permissions granted in the setup steps above by running the batch file named Cleanupvroot.bat after you are finished with the samples.</span></span>

13. <span data-ttu-id="efa8f-155">Przykłady, które są hostowane samodzielnie (nie są hostowane w serwisach IIS) wymagają uprawnień do rejestrowania adresów HTTP na komputerze w celu nasłuchiwania.</span><span class="sxs-lookup"><span data-stu-id="efa8f-155">Samples that are self-hosted (not hosted in IIS) require permission to register HTTP addresses on the computer for listening.</span></span> <span data-ttu-id="efa8f-156">Uprawnienie do rezerwacji obszaru nazw HTTP pochodzi z konta użytkownika używanego do uruchamiania próbki.</span><span class="sxs-lookup"><span data-stu-id="efa8f-156">The permission for an HTTP namespace reservation comes from the user account used to run the sample.</span></span> <span data-ttu-id="efa8f-157">Domyślnie konta administratora mają uprawnienia do rejestrowania dowolnego adresu HTTP.</span><span class="sxs-lookup"><span data-stu-id="efa8f-157">By default, administrator accounts have the permission to register any HTTP address.</span></span> <span data-ttu-id="efa8f-158">Konta niebędące administratorami muszą mieć uprawnienia do obszarów nazw HTTP używanych przez przykłady.</span><span class="sxs-lookup"><span data-stu-id="efa8f-158">Non-administrator accounts must be granted permission for the HTTP namespaces used by the samples.</span></span> <span data-ttu-id="efa8f-159">Aby uzyskać więcej informacji na temat konfigurowania rezerwacji obszaru nazw, zobacz [Konfigurowanie protokołu HTTP i HTTPS](../feature-details/configuring-http-and-https.md).</span><span class="sxs-lookup"><span data-stu-id="efa8f-159">For more information about how to configure namespace reservations, see [Configuring HTTP and HTTPS](../feature-details/configuring-http-and-https.md).</span></span>

14. <span data-ttu-id="efa8f-160">Niektóre przykłady wymagają usługi kolejkowania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="efa8f-160">Some samples require Message Queuing.</span></span> <span data-ttu-id="efa8f-161">Aby uzyskać instrukcje instalacji, zobacz [Instalowanie usługi kolejkowania wiadomości (MSMQ).](installing-message-queuing-msmq.md)</span><span class="sxs-lookup"><span data-stu-id="efa8f-161">See [Installing Message Queuing (MSMQ)](installing-message-queuing-msmq.md) for installation instructions.</span></span>

    > [!NOTE]
    > <span data-ttu-id="efa8f-162">Przed uruchomieniem próbek wymagających usługi kolejkowania wiadomości należy rozpocząć usługę MSMQ.</span><span class="sxs-lookup"><span data-stu-id="efa8f-162">Ensure that you start the MSMQ service before you run any samples that require Message Queuing.</span></span>

15. <span data-ttu-id="efa8f-163">Niektóre przykłady wymagają certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="efa8f-163">Some samples require certificates.</span></span> <span data-ttu-id="efa8f-164">Zobacz [Instrukcje instalacji certyfikatów serwera usług informacyjnych (IIS).](iis-server-certificate-installation-instructions.md)</span><span class="sxs-lookup"><span data-stu-id="efa8f-164">See [Internet Information Services (IIS) Server Certificate Installation Instructions](iis-server-certificate-installation-instructions.md).</span></span>
