---
title: Automatyczne wybieranie formatu
ms.date: 03/30/2017
ms.assetid: dab51e56-8517-4a6a-bb54-b55b15ab37bb
ms.openlocfilehash: 4fd695195f5c7c13bc088248a6b3c12388328d37
ms.sourcegitcommit: 3c1c3ba79895335ff3737934e39372555ca7d6d0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/05/2018
ms.locfileid: "43784761"
---
# <a name="automatic-format-selection"></a><span data-ttu-id="ababe-102">Automatyczne wybieranie formatu</span><span class="sxs-lookup"><span data-stu-id="ababe-102">Automatic Format Selection</span></span>
<span data-ttu-id="ababe-103">W tym przykładzie pokazano, jak włączyć automatyczne wybieranie formatu (XML lub JSON) z użyciem usług REST Windows Communication Foundation (WCF), programowania modelu, a także jak jawnie ustawić format w kodzie operacji.</span><span class="sxs-lookup"><span data-stu-id="ababe-103">This sample demonstrates how to enable automatic format selection (XML or JSON) with the Windows Communication Foundation (WCF) REST programming model, as well as how to explicitly set the format in the operation code.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="ababe-104">Przykład szczegółów</span><span class="sxs-lookup"><span data-stu-id="ababe-104">Sample Details</span></span>  
 <span data-ttu-id="ababe-105">Przykład składa się z usługi wraz z kodem klienta, który sprawia, że żądania do usługi.</span><span class="sxs-lookup"><span data-stu-id="ababe-105">The sample consists of a service along with client code that makes requests to the service.</span></span> <span data-ttu-id="ababe-106">Usługa obsługuje pojedynczy HTTP `GET` operacji (`EchoWithGet`) i jednego HTTP `POST` operacji (`EchoWithPost`).</span><span class="sxs-lookup"><span data-stu-id="ababe-106">The service supports a single HTTP `GET` operation (`EchoWithGet`) and a single HTTP `POST` operation (`EchoWithPost`).</span></span> <span data-ttu-id="ababe-107">Obie operacje oczekiwany ciąg, a następnie wróć ciągu w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="ababe-107">Both operations expect a string and then return the string in the response.</span></span> <span data-ttu-id="ababe-108">Za pomocą `GET` operacji, ciąg jest podawany jako parametr ciągu zapytania identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="ababe-108">With the `GET` operation, the string is provided in a URI query-string parameter.</span></span> <span data-ttu-id="ababe-109">Za pomocą `POST` operacji ciągu znajduje się w treści żądania, serializowane w kodzie XML.</span><span class="sxs-lookup"><span data-stu-id="ababe-109">With the `POST` operation, the string is provided in the body of the request, serialized in XML.</span></span> <span data-ttu-id="ababe-110">Usługa jest w stanie do zwracania odpowiedzi XML lub JSON, wykorzystując nowe automatyczne wybieranie formatu i format imperatywne wybór funkcji w [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ababe-110">The service is able to return responses in either XML or JSON, utilizing the new automatic format selection and imperative format selection features in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
 <span data-ttu-id="ababe-111">W tym przykładzie automatyczne wybieranie formatu jest włączona, przy użyciu pliku App.config.</span><span class="sxs-lookup"><span data-stu-id="ababe-111">In the sample, automatic format selection is enabled using the App.config file.</span></span> <span data-ttu-id="ababe-112">Na domyślny punkt końcowy protokołu HTTP sieci Web `automaticFormatSelectionEnabled` atrybut ma wartość `true`.</span><span class="sxs-lookup"><span data-stu-id="ababe-112">On the default Web HTTP endpoint, the `automaticFormatSelectionEnabled` attribute has been given a value of `true`.</span></span> <span data-ttu-id="ababe-113">W przypadku automatyczne wybieranie formatu włączone infrastruktura WCF wybiera najbardziej odpowiedni format odpowiedzi (XML lub JSON) podane nagłówki HTTP Zaakceptuj lub Content-Type żądania.</span><span class="sxs-lookup"><span data-stu-id="ababe-113">With automatic format selection enabled, the WCF infrastructure selects the most appropriate response format (XML or JSON) given the HTTP Accept or Content-Type headers of the request.</span></span> <span data-ttu-id="ababe-114">Deweloper nie jest wymagane do zapewnienia dodatkowego kodu ani konfiguracji innych niż ustawienie `automaticFormatSelectionEnabled` atrybutu `true` do korzystania z nowej funkcji.</span><span class="sxs-lookup"><span data-stu-id="ababe-114">The developer is not required to provide any additional code or configuration other than setting the `automaticFormatSelectionEnabled` attribute to `true` to use this new feature.</span></span> <span data-ttu-id="ababe-115">W kodzie klienta w pliku Program.cs, są wysyłane żądania na wartość oba `GET` i `POST` operacje usługi przy użyciu nagłówka HTTP zaakceptować, określony jako "application/xml" lub "application/json" i zwraca odpowiedź w tym odpowiedni format.</span><span class="sxs-lookup"><span data-stu-id="ababe-115">In the client code in Program.cs, requests are sent to both the `GET` and `POST` operations of the service with the HTTP Accept header specified as either "application/xml" or "application/json" and the service returns a response in that respective format.</span></span>  
  
 <span data-ttu-id="ababe-116">Również w `GET` operacja, imperatywne Formatuj zaznaczenie jest używana.</span><span class="sxs-lookup"><span data-stu-id="ababe-116">Also in the `GET` operation, imperative format selection is used.</span></span> <span data-ttu-id="ababe-117">`GET` Operacji sprawdza, czy opcjonalny `format` parametr ciągu zapytania, a jeśli jest obecny, ustawia format odpowiedzi na <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="ababe-117">The `GET` operation checks for an optional `format` query-string parameter and if present, sets the response format on the <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> property.</span></span> <span data-ttu-id="ababe-118">Obowiązkowo ustawienie formatu odpowiedzi w ten sposób zastąpienia automatyczne wybieranie formatu wykonywane przez infrastrukturę usługi WCF.</span><span class="sxs-lookup"><span data-stu-id="ababe-118">Imperatively setting the response format in this way overrides the automatic format selection done by the WCF infrastructure.</span></span>  
  
 <span data-ttu-id="ababe-119">Przykład składa się z samodzielnie hostowana usługa i klient, który jest uruchamiany w ramach aplikacji konsoli.</span><span class="sxs-lookup"><span data-stu-id="ababe-119">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="ababe-120">Po uruchomieniu aplikacji konsolowej klienta zgłasza żądania do usługi i zapisuje odpowiednie informacje z odpowiedzi w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="ababe-120">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="ababe-121">Aby użyć tego przykładu</span><span class="sxs-lookup"><span data-stu-id="ababe-121">To use this sample</span></span>  
  
1.  <span data-ttu-id="ababe-122">Otwórz rozwiązanie dla automatycznego przykładu wybór formatu.</span><span class="sxs-lookup"><span data-stu-id="ababe-122">Open the solution for the Automatic Format Selection Sample.</span></span> <span data-ttu-id="ababe-123">Podczas uruchamiania [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], należy uruchomić jako administrator na potrzeby przykładu zostać pomyślnie uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="ababe-123">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator for the sample to execute successfully.</span></span> <span data-ttu-id="ababe-124">W tym celu kliknij prawym przyciskiem myszy [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] ikonę i wybierz pozycję **Uruchom jako Administrator** z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="ababe-124">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and select **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="ababe-125">Naciśnij klawisze CTRL + SHIFT + B, Skompiluj rozwiązanie, a następnie naciśnij klawisz Ctrl + F5, aby uruchomić projekt AutomaticFormatSelection aplikacji konsoli.</span><span class="sxs-lookup"><span data-stu-id="ababe-125">Press CTRL+SHIFT+B to build the solution and then press Ctrl+F5 to run the console application AutomaticFormatSelection project.</span></span> <span data-ttu-id="ababe-126">W oknie konsoli pojawia się i zawiera identyfikator URI uruchomioną usługę i identyfikator URI elementu HTML pomocy strony dla uruchomionej usługi.</span><span class="sxs-lookup"><span data-stu-id="ababe-126">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
3.  <span data-ttu-id="ababe-127">Po uruchomieniu przykładu klient wysyła żądania do usługi i zapisuje odpowiedzi w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="ababe-127">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span> <span data-ttu-id="ababe-128">Zwróć uwagę, różne formaty odpowiedzi w XML i JSON.</span><span class="sxs-lookup"><span data-stu-id="ababe-128">Notice the different formats of the responses in XML and JSON.</span></span>  
  
4.  <span data-ttu-id="ababe-129">Naciśnij dowolny klawisz, aby zakończyć próbki.</span><span class="sxs-lookup"><span data-stu-id="ababe-129">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="ababe-130">Przykłady może już być zainstalowany na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="ababe-130">The samples may already be installed on your machine.</span></span> <span data-ttu-id="ababe-131">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="ababe-131">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="ababe-132">Jeśli ten katalog nie istnieje, przejdź do strony [Windows Communication Foundation (WCF) i przykłady Windows Workflow Foundation (WF) dla platformy .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) do pobierania wszystkich Windows Communication Foundation (WCF) i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] przykładów.</span><span class="sxs-lookup"><span data-stu-id="ababe-132">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="ababe-133">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="ababe-133">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\AutomaticFormatSelection`  
  
## <a name="see-also"></a><span data-ttu-id="ababe-134">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="ababe-134">See Also</span></span>
