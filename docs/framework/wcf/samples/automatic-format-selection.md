---
title: Automatyczne wybieranie formatu
ms.date: 03/30/2017
ms.assetid: dab51e56-8517-4a6a-bb54-b55b15ab37bb
ms.openlocfilehash: 8c26253bee069bf9bbc009ea219e6c12cab034ef
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/07/2018
---
# <a name="automatic-format-selection"></a><span data-ttu-id="e7b14-102">Automatyczne wybieranie formatu</span><span class="sxs-lookup"><span data-stu-id="e7b14-102">Automatic Format Selection</span></span>
<span data-ttu-id="e7b14-103">W tym przykładzie pokazano, jak włączyć automatyczne wybieranie formatu (XML lub JSON) z resztą Windows Communication Foundation (WCF) programowania modelu, a także sposobu jawnie ustawić format w kodzie operacji.</span><span class="sxs-lookup"><span data-stu-id="e7b14-103">This sample demonstrates how to enable automatic format selection (XML or JSON) with the Windows Communication Foundation (WCF) REST programming model, as well as how to explicitly set the format in the operation code.</span></span>  
  
## <a name="sample-details"></a><span data-ttu-id="e7b14-104">Szczegóły próbki</span><span class="sxs-lookup"><span data-stu-id="e7b14-104">Sample Details</span></span>  
 <span data-ttu-id="e7b14-105">Próbka składa się z usługą wraz z kodu klienta, który wysyła żądania do usługi.</span><span class="sxs-lookup"><span data-stu-id="e7b14-105">The sample consists of a service along with client code that makes requests to the service.</span></span> <span data-ttu-id="e7b14-106">Usługa obsługuje jeden protokół HTTP `GET` operacji (`EchoWithGet`) i jeden HTTP `POST` operacji (`EchoWithPost`).</span><span class="sxs-lookup"><span data-stu-id="e7b14-106">The service supports a single HTTP `GET` operation (`EchoWithGet`) and a single HTTP `POST` operation (`EchoWithPost`).</span></span> <span data-ttu-id="e7b14-107">Obie operacje oczekiwany ciąg, a następnie wróć ciąg w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="e7b14-107">Both operations expect a string and then return the string in the response.</span></span> <span data-ttu-id="e7b14-108">Z `GET` operacji ciąg znajduje się w parametr ciągu zapytania identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="e7b14-108">With the `GET` operation, the string is provided in a URI query-string parameter.</span></span> <span data-ttu-id="e7b14-109">Z `POST` operacji ciąg znajduje się w treści żądania serializacji w danych XML.</span><span class="sxs-lookup"><span data-stu-id="e7b14-109">With the `POST` operation, the string is provided in the body of the request, serialized in XML.</span></span> <span data-ttu-id="e7b14-110">Usługa jest w stanie zwracanie odpowiedzi w XML lub JSON przy użyciu nowego automatycznego wyboru formatu i formatu konieczne wybór funkcji w [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="e7b14-110">The service is able to return responses in either XML or JSON, utilizing the new automatic format selection and imperative format selection features in [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)].</span></span>  
  
 <span data-ttu-id="e7b14-111">W przykładzie automatycznego wyboru formatu jest włączona, przy użyciu pliku App.config.</span><span class="sxs-lookup"><span data-stu-id="e7b14-111">In the sample, automatic format selection is enabled using the App.config file.</span></span> <span data-ttu-id="e7b14-112">Na domyślny punkt końcowy HTTP w sieci Web `automaticFormatSelectionEnabled` atrybutu została podana wartość `true`.</span><span class="sxs-lookup"><span data-stu-id="e7b14-112">On the default Web HTTP endpoint, the `automaticFormatSelectionEnabled` attribute has been given a value of `true`.</span></span> <span data-ttu-id="e7b14-113">W przypadku automatycznego wyboru formatu włączone infrastruktura WCF wybiera najbardziej odpowiedni format odpowiedzi (XML lub JSON) podane nagłówki HTTP Zaakceptuj lub typ zawartości żądania.</span><span class="sxs-lookup"><span data-stu-id="e7b14-113">With automatic format selection enabled, the WCF infrastructure selects the most appropriate response format (XML or JSON) given the HTTP Accept or Content-Type headers of the request.</span></span> <span data-ttu-id="e7b14-114">Deweloper nie są wymagane do świadczenia dodatkowy kod ani konfiguracji innych niż ustawienie `automaticFormatSelectionEnabled` atrybutu `true` Aby użyć tej nowej funkcji.</span><span class="sxs-lookup"><span data-stu-id="e7b14-114">The developer is not required to provide any additional code or configuration other than setting the `automaticFormatSelectionEnabled` attribute to `true` to use this new feature.</span></span> <span data-ttu-id="e7b14-115">W kodzie klienta w pliku Program.cs żądania są wysyłane zarówno do `GET` i `POST` operacji usługi z określonego jako "application/xml" lub "application/json" nagłówka HTTP zaakceptować i zwraca odpowiedź w tym odpowiedni format.</span><span class="sxs-lookup"><span data-stu-id="e7b14-115">In the client code in Program.cs, requests are sent to both the `GET` and `POST` operations of the service with the HTTP Accept header specified as either "application/xml" or "application/json" and the service returns a response in that respective format.</span></span>  
  
 <span data-ttu-id="e7b14-116">Również w `GET` operacja, Wybieranie formatu konieczne jest używana.</span><span class="sxs-lookup"><span data-stu-id="e7b14-116">Also in the `GET` operation, imperative format selection is used.</span></span> <span data-ttu-id="e7b14-117">`GET` Operacja wyszukuje opcjonalny `format` parametr ciągu zapytania i jeśli jest obecny, określa format odpowiedzi na <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="e7b14-117">The `GET` operation checks for an optional `format` query-string parameter and if present, sets the response format on the <xref:System.ServiceModel.Web.WebOperationContext.OutgoingResponse%2A> property.</span></span> <span data-ttu-id="e7b14-118">Imperatively ustawienie format odpowiedzi w ten sposób przesłania automatycznego wyboru formatu programach infrastruktura WCF.</span><span class="sxs-lookup"><span data-stu-id="e7b14-118">Imperatively setting the response format in this way overrides the automatic format selection done by the WCF infrastructure.</span></span>  
  
 <span data-ttu-id="e7b14-119">Próbka składa się z własnym hostowana usługa i klient, który jest uruchamiany w ramach aplikacji konsoli.</span><span class="sxs-lookup"><span data-stu-id="e7b14-119">The sample consists of a self-hosted service and a client that runs within a console application.</span></span> <span data-ttu-id="e7b14-120">Podczas działania aplikacji konsoli, klient wysyła żądania do usługi i zapisuje istotnych informacji z odpowiedzi w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="e7b14-120">As the console application runs, the client makes requests to the service and writes the pertinent information from the responses to the console window.</span></span>  
  
#### <a name="to-use-this-sample"></a><span data-ttu-id="e7b14-121">Aby użyć tego przykładu</span><span class="sxs-lookup"><span data-stu-id="e7b14-121">To use this sample</span></span>  
  
1.  <span data-ttu-id="e7b14-122">Otwórz rozwiązanie przykładowej automatycznego wyboru formatu.</span><span class="sxs-lookup"><span data-stu-id="e7b14-122">Open the solution for the Automatic Format Selection Sample.</span></span> <span data-ttu-id="e7b14-123">Podczas uruchamiania [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], należy uruchomić jako administrator przykładowej może zostać pomyślnie uruchomiony.</span><span class="sxs-lookup"><span data-stu-id="e7b14-123">When launching [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run as an administrator for the sample to execute successfully.</span></span> <span data-ttu-id="e7b14-124">To zrobić, klikając prawym przyciskiem myszy [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] ikony, jak i wybierz **Uruchom jako Administrator** z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="e7b14-124">Do this by right-clicking the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] icon and select **Run as Administrator** from the context menu.</span></span>  
  
2.  <span data-ttu-id="e7b14-125">Naciśnij klawisze CTRL + SHIFT + B Skompiluj rozwiązanie, a następnie naciśnij klawisz Ctrl + F5, aby uruchomić projekt AutomaticFormatSelection aplikacji konsoli.</span><span class="sxs-lookup"><span data-stu-id="e7b14-125">Press CTRL+SHIFT+B to build the solution and then press Ctrl+F5 to run the console application AutomaticFormatSelection project.</span></span> <span data-ttu-id="e7b14-126">W oknie konsoli zostanie wyświetlony i zawiera identyfikator URI uruchomionej usługi i identyfikator URI elementu HTML pomocy strony uruchomionej usługi.</span><span class="sxs-lookup"><span data-stu-id="e7b14-126">The console window appears and provides the URI of the running service and the URI of the HTML help page for the running service.</span></span>  
  
3.  <span data-ttu-id="e7b14-127">Jak działa próbki, klient wysyła żądania do usługi i zapisuje odpowiedzi w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="e7b14-127">As the sample runs, the client sends requests to the service and writes the responses to the console window.</span></span> <span data-ttu-id="e7b14-128">Zwróć uwagę, formaty odpowiedzi w pliku XML i JSON.</span><span class="sxs-lookup"><span data-stu-id="e7b14-128">Notice the different formats of the responses in XML and JSON.</span></span>  
  
4.  <span data-ttu-id="e7b14-129">Naciśnij dowolny klawisz, aby zakończyć próbki.</span><span class="sxs-lookup"><span data-stu-id="e7b14-129">Press any key to terminate the sample.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="e7b14-130">Próbki mogą być zainstalowane na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="e7b14-130">The samples may already be installed on your machine.</span></span> <span data-ttu-id="e7b14-131">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="e7b14-131">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="e7b14-132">Jeśli ten katalog nie istnieje, przejdź do [Windows Communication Foundation (WCF) i Windows Workflow Foundation (WF) przykłady dla programu .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) do pobrania wszystkich Windows Communication Foundation (WCF) i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] próbek.</span><span class="sxs-lookup"><span data-stu-id="e7b14-132">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="e7b14-133">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="e7b14-133">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WCF\Basic\Web\AutomaticFormatSelection`  
  
## <a name="see-also"></a><span data-ttu-id="e7b14-134">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="e7b14-134">See Also</span></span>
