---
title: "Konfigurowanie rejestrowania komunikatów"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: message logging [WCF]
ms.assetid: 0ff4c857-8f09-4b85-9dc0-89084706e4c9
caps.latest.revision: "40"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 866a53af52ac43363ff195dde84092df61deb339
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/21/2017
---
# <a name="configuring-message-logging"></a><span data-ttu-id="e1faa-102">Konfigurowanie rejestrowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="e1faa-102">Configuring Message Logging</span></span>
<span data-ttu-id="e1faa-103">W tym temacie opisano, jak można skonfigurować rejestrowania komunikatów dla różnych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="e1faa-103">This topic describes how you can configure message logging for different scenarios.</span></span>  
  
## <a name="enabling-message-logging"></a><span data-ttu-id="e1faa-104">Włączanie rejestrowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="e1faa-104">Enabling Message Logging</span></span>  
 [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="e1faa-105">rejestruje komunikaty domyślnie.</span><span class="sxs-lookup"><span data-stu-id="e1faa-105"> does not log messages by default.</span></span> <span data-ttu-id="e1faa-106">Aby włączyć rejestrowanie komunikatów, należy dodać odbiornik śledzenia do `System.ServiceModel.MessageLogging` źródło śledzenia i ustawić atrybuty `<messagelogging>` w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e1faa-106">To activate message logging, you must add a trace listener to the `System.ServiceModel.MessageLogging` trace source and set attributes for the `<messagelogging>` element in the configuration file.</span></span>  
  
 <span data-ttu-id="e1faa-107">Poniższy przykład pokazuje, jak włączyć rejestrowanie i określ opcje dodatkowe.</span><span class="sxs-lookup"><span data-stu-id="e1faa-107">The following example shows how to enable logging and specify additional options.</span></span>  
  
```xml  
<system.diagnostics>  
  <sources>  
      <source name="System.ServiceModel.MessageLogging">  
        <listeners>  
                 <add name="messages"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\logs\messages.svclog" />  
          </listeners>  
      </source>  
    </sources>  
</system.diagnostics>  
  
<system.serviceModel>  
  <diagnostics>  
    <messageLogging   
         logEntireMessage="true"   
         logMalformedMessages="false"  
         logMessagesAtServiceLevel="true"   
         logMessagesAtTransportLevel="false"  
         maxMessagesToLog="3000"  
         maxSizeOfMessageToLog="2000"/>  
  </diagnostics>  
</system.serviceModel>  
```  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e1faa-108">Ustawienia rejestrowania, zobacz [zalecane ustawienia śledzenia i rejestrowania komunikatów](../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span><span class="sxs-lookup"><span data-stu-id="e1faa-108"> message logging settings, see [Recommended Settings for Tracing and Message Logging](../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>  
  
 <span data-ttu-id="e1faa-109">Można użyć `add` Aby określić nazwę i typ odbiornika, którego chcesz użyć.</span><span class="sxs-lookup"><span data-stu-id="e1faa-109">You can use `add` to specify the name and type of the listener you want to use.</span></span> <span data-ttu-id="e1faa-110">W konfiguracji przykład odbiornik o nazwie "wiadomości" i dodaje standardowe nasłuchującego śledzenia .NET Framework (`System.Diagnostics.XmlWriterTraceListener`) jako typ do użycia.</span><span class="sxs-lookup"><span data-stu-id="e1faa-110">In the example configuration, the Listener is named "messages" and adds the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type to use.</span></span> <span data-ttu-id="e1faa-111">Jeśli używasz `System.Diagnostics.XmlWriterTraceListener`, należy określić dane wyjściowe lokalizację i nazwę pliku w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e1faa-111">If you use `System.Diagnostics.XmlWriterTraceListener`, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="e1faa-112">Odbywa się przez ustawienie `initializeData` do nazwy pliku dziennika.</span><span class="sxs-lookup"><span data-stu-id="e1faa-112">This is done by setting `initializeData` to the name of the log file.</span></span> <span data-ttu-id="e1faa-113">W przeciwnym razie system zgłasza wyjątek.</span><span class="sxs-lookup"><span data-stu-id="e1faa-113">Otherwise, the system throws an exception.</span></span> <span data-ttu-id="e1faa-114">Można też wdrożyć niestandardowe odbiornik, który emituje dzienniki, aby plik domyślny.</span><span class="sxs-lookup"><span data-stu-id="e1faa-114">You can also implement a custom listener that emits logs to a default file.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e1faa-115">Ponieważ rejestrowanie komunikatów uzyskuje dostęp do miejsca na dysku, należy ograniczyć liczbę wiadomości, które są zapisywane na dysku dla określonej usługi.</span><span class="sxs-lookup"><span data-stu-id="e1faa-115">Because message logging accesses disk space, you should limit the number of messages that are written to disk for a particular service.</span></span> <span data-ttu-id="e1faa-116">Po osiągnięciu limitu wiadomości śledzenia na poziomie informacji jest tworzony, i Zatrzymaj wszystkie działania rejestrowania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-116">When the message limit is reached, a trace at the Information level is produced and all message logging activities stop.</span></span>  
  
 <span data-ttu-id="e1faa-117">Poziom rejestrowania, a także dodatkowe opcje, omówiono w sekcji Opcje i poziom rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="e1faa-117">The logging level, as well as the additional options, are discussed in the Logging Level and Options section.</span></span>  
  
 <span data-ttu-id="e1faa-118">`switchValue` Atrybutu `source` jest prawidłowy tylko dla śledzenia.</span><span class="sxs-lookup"><span data-stu-id="e1faa-118">The `switchValue` attribute of a `source` is only valid for tracing.</span></span> <span data-ttu-id="e1faa-119">Jeśli określisz `switchValue` atrybutu dla `System.ServiceModel.MessageLogging` źródło śladu jako zgodna, nie działa.</span><span class="sxs-lookup"><span data-stu-id="e1faa-119">If you specify a `switchValue` attribute for the `System.ServiceModel.MessageLogging` trace source as follows, it has no effect.</span></span>  
  
```xml  
<source name="System.ServiceModel.MessageLogging" switchValue="Verbose">  
```  
  
 <span data-ttu-id="e1faa-120">Jeśli chcesz wyłączyć źródła śledzenia, należy użyć `logMessagesAtServiceLevel`, `logMalformedMessages`, i `logMessagesAtTransportLevel` atrybuty `messageLogging` elementu zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="e1faa-120">If you want to disable the trace source, you should use the `logMessagesAtServiceLevel`, `logMalformedMessages`, and `logMessagesAtTransportLevel` attributes of the `messageLogging` element instead.</span></span> <span data-ttu-id="e1faa-121">Należy ustawić te atrybuty `false`.</span><span class="sxs-lookup"><span data-stu-id="e1faa-121">You should set all these attributes to `false`.</span></span> <span data-ttu-id="e1faa-122">Można to zrobić przy użyciu pliku konfiguracji, w poprzednim przykładzie kodu za pomocą interfejsu użytkownika edytora konfiguracji interfejsu, lub za pomocą usługi WMI.</span><span class="sxs-lookup"><span data-stu-id="e1faa-122">This can be done by using the configuration file in the previous code example, through the Configuration Editor UI interface, or using WMI.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e1faa-123">Narzędzie edytora konfiguracji, zobacz [narzędzie edytora konfiguracji (SvcConfigEditor.exe)](../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md).</span><span class="sxs-lookup"><span data-stu-id="e1faa-123"> the Configuration Editor tool, see [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e1faa-124">Usługi WMI, zobacz [przy użyciu Instrumentacji zarządzania Windows dla diagnostyki](../../../../docs/framework/wcf/diagnostics/wmi/index.md).</span><span class="sxs-lookup"><span data-stu-id="e1faa-124"> WMI, see [Using Windows Management Instrumentation for Diagnostics](../../../../docs/framework/wcf/diagnostics/wmi/index.md).</span></span>  
  
## <a name="logging-levels-and-options"></a><span data-ttu-id="e1faa-125">Opcje i poziomy rejestrowania</span><span class="sxs-lookup"><span data-stu-id="e1faa-125">Logging Levels and Options</span></span>  
 <span data-ttu-id="e1faa-126">Dla komunikatów przychodzących rejestrowanie odbywa się natychmiast po sformułowany komunikat bezpośrednio przed pobiera komunikat, aby kod użytkownika na poziomie usługi i po wykryciu wadliwe komunikaty.</span><span class="sxs-lookup"><span data-stu-id="e1faa-126">For incoming messages, logging happens immediately after the message is formed, immediately before the message gets to user code in the service level, and when malformed messages are detected.</span></span>  
  
 <span data-ttu-id="e1faa-127">Dla komunikatów wychodzących rejestrowanie odbywa się natychmiast po wiadomość opuszcza kod użytkownika i bezpośrednio przed przejdzie do przesyłania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="e1faa-127">For outgoing messages, logging happens immediately after the message leaves user code and immediately before the message goes on the wire.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="e1faa-128">rejestruje komunikaty w dwóch różnych poziomach, usług i mechanizm transportu.</span><span class="sxs-lookup"><span data-stu-id="e1faa-128"> logs messages at two different levels, service and transport.</span></span> <span data-ttu-id="e1faa-129">Wadliwe komunikaty są także rejestrowane.</span><span class="sxs-lookup"><span data-stu-id="e1faa-129">Malformed messages are also logged.</span></span> <span data-ttu-id="e1faa-130">Trzy kategorie są niezależne od siebie i można aktywować niezależnie w konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e1faa-130">The three categories are independent from each other and can be activated separately in configuration.</span></span>  
  
 <span data-ttu-id="e1faa-131">Poziom rejestrowania można kontrolować przez ustawienie `logMessagesAtServiceLevel`, `logMalformedMessages`, i `logMessagesAtTransportLevel` atrybuty `messageLogging` elementu.</span><span class="sxs-lookup"><span data-stu-id="e1faa-131">You can control the logging level by setting the `logMessagesAtServiceLevel`, `logMalformedMessages`, and `logMessagesAtTransportLevel` attributes of the `messageLogging` element.</span></span>  
  
### <a name="service-level"></a><span data-ttu-id="e1faa-132">Poziom usług</span><span class="sxs-lookup"><span data-stu-id="e1faa-132">Service Level</span></span>  
 <span data-ttu-id="e1faa-133">Komunikaty zarejestrowane w tej warstwie zamiar wprowadź (na odbieranie) lub pozostaw (przy wysyłaniu) kodu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="e1faa-133">Messages logged at this layer are about to enter (on receiving) or leave (on sending) user code.</span></span> <span data-ttu-id="e1faa-134">Jeśli zostały określone filtry, są rejestrowane tylko komunikatów spełniających filtrów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-134">If filters have been defined, only messages that match the filters are logged.</span></span> <span data-ttu-id="e1faa-135">W przeciwnym razie są rejestrowane wszystkie wiadomości na poziomie usługi.</span><span class="sxs-lookup"><span data-stu-id="e1faa-135">Otherwise, all messages at the service level are logged.</span></span> <span data-ttu-id="e1faa-136">Komunikaty infrastruktury (transakcje, kanałów równorzędnych i zabezpieczeń) również są rejestrowane na tym poziomie, z wyjątkiem komunikaty niezawodnej obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-136">Infrastructure messages (transactions, peer channel, and security) are also logged at this level, except for Reliable Messaging messages.</span></span> <span data-ttu-id="e1faa-137">Na strumienia wiadomości tylko nagłówki są rejestrowane.</span><span class="sxs-lookup"><span data-stu-id="e1faa-137">On streamed messages, only the headers are logged.</span></span> <span data-ttu-id="e1faa-138">Ponadto zabezpieczonych wiadomości są rejestrowane odszyfrować na tym poziomie.</span><span class="sxs-lookup"><span data-stu-id="e1faa-138">In addition, secure messages are logged decrypted at this level.</span></span>  
  
### <a name="transport-level"></a><span data-ttu-id="e1faa-139">Poziom transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-139">Transport Level</span></span>  
 <span data-ttu-id="e1faa-140">Komunikaty zarejestrowane w tej warstwie jest gotowe do można lub dekodowanym na lub po transportu w sieci.</span><span class="sxs-lookup"><span data-stu-id="e1faa-140">Messages logged at this layer are ready to be encoded or decoded for or after transportation on the wire.</span></span> <span data-ttu-id="e1faa-141">Jeśli zostały określone filtry, są rejestrowane tylko komunikatów spełniających filtrów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-141">If filters have been defined, only messages that match the filters are logged.</span></span> <span data-ttu-id="e1faa-142">W przeciwnym razie są rejestrowane wszystkie komunikaty w warstwie transportowej.</span><span class="sxs-lookup"><span data-stu-id="e1faa-142">Otherwise, all messages at the transport layer are logged.</span></span> <span data-ttu-id="e1faa-143">Wszystkie komunikaty infrastruktury są rejestrowane w tej warstwie, w tym komunikaty niezawodnej obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-143">All infrastructure messages are logged at this layer, including reliable messaging messages.</span></span> <span data-ttu-id="e1faa-144">Na strumienia wiadomości tylko nagłówki są rejestrowane.</span><span class="sxs-lookup"><span data-stu-id="e1faa-144">On streamed messages, only the headers are logged.</span></span> <span data-ttu-id="e1faa-145">Ponadto zabezpieczonych wiadomości są rejestrowane szyfrowane na tym poziomie, chyba że bezpiecznego transportu, takie jak jest używany protokół HTTPS.</span><span class="sxs-lookup"><span data-stu-id="e1faa-145">In addition, secure messages are logged as encrypted at this level, except if a secure transport such as HTTPS is used.</span></span>  
  
### <a name="malformed-level"></a><span data-ttu-id="e1faa-146">Poziom źle sformułowany</span><span class="sxs-lookup"><span data-stu-id="e1faa-146">Malformed Level</span></span>  
 <span data-ttu-id="e1faa-147">Wadliwe komunikaty są komunikaty, które zostały odrzucone prze [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] stosu na każdym etapie przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="e1faa-147">Malformed messages are messages that are rejected by the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] stack at any stage of processing.</span></span> <span data-ttu-id="e1faa-148">Wadliwe komunikaty są rejestrowane jako — jest: szyfrowane, gdy są one tak, z XML bez odpowiedniego i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="e1faa-148">Malformed messages are logged as-is: encrypted if they are so, with non-proper XML, and so on.</span></span> <span data-ttu-id="e1faa-149">`maxSizeOfMessageToLog`rozmiar komunikatu, który ma zostać zarejestrowany jako typu CDATA zdefiniowany.</span><span class="sxs-lookup"><span data-stu-id="e1faa-149">`maxSizeOfMessageToLog` defined the size of the message to be logged as CDATA.</span></span> <span data-ttu-id="e1faa-150">Domyślnie `maxSizeOfMessageToLog` jest równa 256 KB.</span><span class="sxs-lookup"><span data-stu-id="e1faa-150">By default, `maxSizeOfMessageToLog` is equal to 256K.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="e1faa-151">Ten atrybut, zobacz sekcję inne opcje.</span><span class="sxs-lookup"><span data-stu-id="e1faa-151"> this attribute, see the Other Options section.</span></span>  
  
### <a name="other-options"></a><span data-ttu-id="e1faa-152">Inne opcje</span><span class="sxs-lookup"><span data-stu-id="e1faa-152">Other Options</span></span>  
 <span data-ttu-id="e1faa-153">Oprócz poziomów rejestrowania użytkownika można określić następujące opcje:</span><span class="sxs-lookup"><span data-stu-id="e1faa-153">In addition to the logging levels, the user can specify the following options:</span></span>  
  
-   <span data-ttu-id="e1faa-154">Zaloguj się cały komunikat (`logEntireMessage` atrybut): Ta wartość określa, czy cały komunikat (nagłówek i treść wiadomości) jest zarejestrowany.</span><span class="sxs-lookup"><span data-stu-id="e1faa-154">Log Entire Message (`logEntireMessage` attribute): This value specifies whether the entire message (message header and body) is logged.</span></span> <span data-ttu-id="e1faa-155">Wartość domyślna to `false`, co oznacza, że jest rejestrowane tylko nagłówek.</span><span class="sxs-lookup"><span data-stu-id="e1faa-155">The default value is `false`, meaning that only the header is logged.</span></span> <span data-ttu-id="e1faa-156">To ustawienie ma wpływ usług i mechanizm transportu poziomy rejestrowania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-156">This setting affects service and transport message logging levels..</span></span>  
  
-   <span data-ttu-id="e1faa-157">Maksymalna liczba komunikatów do zarejestrowania (`maxMessagesToLog` atrybut): Ta wartość określa maksymalną liczbę komunikatów do zarejestrowania.</span><span class="sxs-lookup"><span data-stu-id="e1faa-157">Max messages to log (`maxMessagesToLog` attribute): This value specifies the maximum number of messages to log.</span></span> <span data-ttu-id="e1faa-158">Wszystkie komunikaty (usługa transportu i wadliwe komunikaty) są liczone kierunku ten limit przydziału.</span><span class="sxs-lookup"><span data-stu-id="e1faa-158">All messages (service, transport, and malformed messages) are counted towards this quota.</span></span> <span data-ttu-id="e1faa-159">Po osiągnięciu limitu przydziału jest emitowany śledzenia i nie dodatkowe jest rejestrowany.</span><span class="sxs-lookup"><span data-stu-id="e1faa-159">When the quota is reached, a trace is emitted and no additional message is logged.</span></span> <span data-ttu-id="e1faa-160">Wartość domyślna to 10 000.</span><span class="sxs-lookup"><span data-stu-id="e1faa-160">The default value is 10000.</span></span>  
  
-   <span data-ttu-id="e1faa-161">Maksymalny rozmiar komunikatu do dziennika (`maxSizeOfMessageToLog` atrybut): Ta wartość określa maksymalny rozmiar wiadomości dziennika w bajtach.</span><span class="sxs-lookup"><span data-stu-id="e1faa-161">Max size of message to log (`maxSizeOfMessageToLog` attribute): This value specifies the maximum size of messages to log in bytes.</span></span> <span data-ttu-id="e1faa-162">Komunikaty, które przekraczają limit rozmiaru nie jest zalogowany, a żadnych innych czynności jest wykonywane dla tej wiadomości.</span><span class="sxs-lookup"><span data-stu-id="e1faa-162">Messages that exceed the size limit are not logged, and no other activity is performed for that message.</span></span> <span data-ttu-id="e1faa-163">To ustawienie ma wpływ na wszystkie poziomy śledzenia.</span><span class="sxs-lookup"><span data-stu-id="e1faa-163">This setting affects all trace levels.</span></span> <span data-ttu-id="e1faa-164">Jeśli śledzenie ServiceModel znajduje się na ostrzeżenie poziomu śledzenia jest emitowany przy pierwszym rejestrowania (ServiceModelSend * lub TransportReceive) do powiadamiania użytkownika.</span><span class="sxs-lookup"><span data-stu-id="e1faa-164">If ServiceModel tracing is on, a Warning level trace is emitted at the first logging point (ServiceModelSend* or TransportReceive) to notify the user.</span></span> <span data-ttu-id="e1faa-165">Wartością domyślną dla transportu i na poziomie komunikatów usługi jest 256 KB, gdy wartością domyślną dla źle sformułowane wiadomości jest 4K.</span><span class="sxs-lookup"><span data-stu-id="e1faa-165">The default value for service level and transport level messages is 256K, while the default value for malformed messages is 4K.</span></span>  
  
    > [!CAUTION]
    >  <span data-ttu-id="e1faa-166">Rozmiar wiadomości, która jest kolumną obliczaną, aby porównać `maxSizeOfMessageToLog` rozmiar wiadomości w pamięci przed serializacji.</span><span class="sxs-lookup"><span data-stu-id="e1faa-166">The message size that is computed to compare against `maxSizeOfMessageToLog` is the message size in memory before serialization.</span></span> <span data-ttu-id="e1faa-167">Ten rozmiar może się różnić od rzeczywista długość ciągu komunikat, który jest rejestrowany i w wielu przypadkach jest większy niż rzeczywisty rozmiar.</span><span class="sxs-lookup"><span data-stu-id="e1faa-167">This size can differ from the actual length of the message string that is being logged, and in many occasions is bigger than the actual size.</span></span> <span data-ttu-id="e1faa-168">W związku z tym komunikaty nie mogą być rejestrowane.</span><span class="sxs-lookup"><span data-stu-id="e1faa-168">As a result, messages may not be logged.</span></span> <span data-ttu-id="e1faa-169">Można uwzględnić ten fakt, określając `maxSizeOfMessageToLog` atrybutu, aby była większa niż rozmiar wiadomości oczekiwano 10%.</span><span class="sxs-lookup"><span data-stu-id="e1faa-169">You can account for this fact by specifying the `maxSizeOfMessageToLog` attribute to be 10% larger than the expected message size.</span></span> <span data-ttu-id="e1faa-170">Ponadto, czy wadliwe komunikaty są rejestrowane, rzeczywista ilość miejsca na dysku wykorzystywane przez dzienniki komunikat może mieć maksymalnie 5 razy rozmiar wartość określoną przez `maxSizeOfMessageToLog`.</span><span class="sxs-lookup"><span data-stu-id="e1faa-170">In addition, if malformed messages are logged, the actual disk space utilized by the message logs can be up to 5 times the size of the value specified by `maxSizeOfMessageToLog`.</span></span>  
  
 <span data-ttu-id="e1faa-171">Jeśli nie nasłuchującego śledzenia jest zdefiniowany w pliku konfiguracji, niezależnie od określonego poziomu rejestrowania są generowane nie dane wyjściowe rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="e1faa-171">If no trace listener is defined in the configuration file, no logging output is generated regardless of the specified logging level.</span></span>  
  
 <span data-ttu-id="e1faa-172">Opcje rejestrowania komunikatów, takie jak atrybuty opisane w tej sekcji można zmienić w czasie wykonywania za pomocą Instrumentacji zarządzania Windows (WMI).</span><span class="sxs-lookup"><span data-stu-id="e1faa-172">Message logging options, such as the attributes described in this section, can be changed at runtime using Windows Management Instrumentation (WMI).</span></span> <span data-ttu-id="e1faa-173">Można to zrobić po zalogowaniu się do [AppDomainInfo](../../../../docs/framework/wcf/diagnostics/wmi/appdomaininfo.md) wystąpienia, która udostępnia te właściwości, wartość logiczna: `LogMessagesAtServiceLevel`, `LogMessagesAtTransportLevel`, i `LogMalformedMessages`.</span><span class="sxs-lookup"><span data-stu-id="e1faa-173">This can be done by accessing the [AppDomainInfo](../../../../docs/framework/wcf/diagnostics/wmi/appdomaininfo.md) instance, which exposes these Boolean properties: `LogMessagesAtServiceLevel`, `LogMessagesAtTransportLevel`, and `LogMalformedMessages`.</span></span> <span data-ttu-id="e1faa-174">W związku z tym jeśli skonfiguruj odbiornik śledzenia dla rejestrowanie komunikatów, ale ustawiona korzystać z tych opcji do `false` w konfiguracji można później zmienić ich `true` gdy aplikacja jest uruchomiona.</span><span class="sxs-lookup"><span data-stu-id="e1faa-174">Therefore, if you configure a trace listener for message logging, but set these options to `false` in configuration, you can later change them to `true` when the application is running.</span></span> <span data-ttu-id="e1faa-175">Umożliwia to efektywne rejestrowanie komunikatów w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="e1faa-175">This effectively enables message logging at runtime.</span></span> <span data-ttu-id="e1faa-176">Podobnie po włączeniu rejestrowania w pliku konfiguracyjnym komunikatów, można ją wyłączyć w czasie wykonywania za pomocą usługi WMI.</span><span class="sxs-lookup"><span data-stu-id="e1faa-176">Similarly, if you enable message logging in your configuration file, you can disable it at runtime using WMI.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="e1faa-177">[Za pomocą Instrumentacji zarządzania Windows dla diagnostyki](../../../../docs/framework/wcf/diagnostics/wmi/index.md).</span><span class="sxs-lookup"><span data-stu-id="e1faa-177"> [Using Windows Management Instrumentation for Diagnostics](../../../../docs/framework/wcf/diagnostics/wmi/index.md).</span></span>  
  
 <span data-ttu-id="e1faa-178">`source` Pola w dzienniku komunikatów Określa, w którego kontekście jest rejestrowany: podczas wysyłania/odbierania komunikatu żądania, żądanie odpowiedź lub sposób 1 żądania, w przypadku warstwy transportu i modelu usługi lub w przypadku uszkodzony komunikat.</span><span class="sxs-lookup"><span data-stu-id="e1faa-178">The `source` field in a message log specifies in which context the message is logged: when sending/receiving a request message, for a request-reply or 1-way request, at service model or transport layer, or in the case of a malformed message.</span></span>  
  
 <span data-ttu-id="e1faa-179">Źle sformułowane wiadomości `source` jest równa `Malformed`.</span><span class="sxs-lookup"><span data-stu-id="e1faa-179">For malformed messages, `source`  is equal to `Malformed`.</span></span> <span data-ttu-id="e1faa-180">W przeciwnym razie źródło zawiera następujące wartości na podstawie kontekstu.</span><span class="sxs-lookup"><span data-stu-id="e1faa-180">Otherwise, source has the following values based on the context.</span></span>  
  
 <span data-ttu-id="e1faa-181">Dla żądania i odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="e1faa-181">For Request/Reply</span></span>  
  
||<span data-ttu-id="e1faa-182">Wyślij żądanie</span><span class="sxs-lookup"><span data-stu-id="e1faa-182">Send Request</span></span>|<span data-ttu-id="e1faa-183">Limit czasu żądania odbioru</span><span class="sxs-lookup"><span data-stu-id="e1faa-183">Receive Request</span></span>|<span data-ttu-id="e1faa-184">Wysłanie odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="e1faa-184">Send Reply</span></span>|<span data-ttu-id="e1faa-185">Odebrać odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="e1faa-185">Receive Reply</span></span>|  
|-|------------------|---------------------|----------------|-------------------|  
|<span data-ttu-id="e1faa-186">Warstwy modelu usług</span><span class="sxs-lookup"><span data-stu-id="e1faa-186">Service Model layer</span></span>|<span data-ttu-id="e1faa-187">Usługa</span><span class="sxs-lookup"><span data-stu-id="e1faa-187">Service</span></span><br /><br /> <span data-ttu-id="e1faa-188">Poziom</span><span class="sxs-lookup"><span data-stu-id="e1faa-188">Level</span></span><br /><br /> <span data-ttu-id="e1faa-189">Wyślij</span><span class="sxs-lookup"><span data-stu-id="e1faa-189">Send</span></span><br /><br /> <span data-ttu-id="e1faa-190">Żądanie</span><span class="sxs-lookup"><span data-stu-id="e1faa-190">Request</span></span>|<span data-ttu-id="e1faa-191">Usługa</span><span class="sxs-lookup"><span data-stu-id="e1faa-191">Service</span></span><br /><br /> <span data-ttu-id="e1faa-192">Poziom</span><span class="sxs-lookup"><span data-stu-id="e1faa-192">Level</span></span><br /><br /> <span data-ttu-id="e1faa-193">Odbieranie</span><span class="sxs-lookup"><span data-stu-id="e1faa-193">Receive</span></span><br /><br /> <span data-ttu-id="e1faa-194">Żądanie</span><span class="sxs-lookup"><span data-stu-id="e1faa-194">Request</span></span>|<span data-ttu-id="e1faa-195">Usługa</span><span class="sxs-lookup"><span data-stu-id="e1faa-195">Service</span></span><br /><br /> <span data-ttu-id="e1faa-196">Poziom</span><span class="sxs-lookup"><span data-stu-id="e1faa-196">Level</span></span><br /><br /> <span data-ttu-id="e1faa-197">Wyślij</span><span class="sxs-lookup"><span data-stu-id="e1faa-197">Send</span></span><br /><br /> <span data-ttu-id="e1faa-198">odpowiedź</span><span class="sxs-lookup"><span data-stu-id="e1faa-198">Reply</span></span>|<span data-ttu-id="e1faa-199">Usługa</span><span class="sxs-lookup"><span data-stu-id="e1faa-199">Service</span></span><br /><br /> <span data-ttu-id="e1faa-200">Poziom</span><span class="sxs-lookup"><span data-stu-id="e1faa-200">Level</span></span><br /><br /> <span data-ttu-id="e1faa-201">Odbieranie</span><span class="sxs-lookup"><span data-stu-id="e1faa-201">Receive</span></span><br /><br /> <span data-ttu-id="e1faa-202">odpowiedź</span><span class="sxs-lookup"><span data-stu-id="e1faa-202">Reply</span></span>|  
|<span data-ttu-id="e1faa-203">Warstwa transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-203">Transport layer</span></span>|<span data-ttu-id="e1faa-204">Transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-204">Transport</span></span><br /><br /> <span data-ttu-id="e1faa-205">Wyślij</span><span class="sxs-lookup"><span data-stu-id="e1faa-205">Send</span></span>|<span data-ttu-id="e1faa-206">Transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-206">Transport</span></span><br /><br /> <span data-ttu-id="e1faa-207">Odbieranie</span><span class="sxs-lookup"><span data-stu-id="e1faa-207">Receive</span></span>|<span data-ttu-id="e1faa-208">Transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-208">Transport</span></span><br /><br /> <span data-ttu-id="e1faa-209">Wyślij</span><span class="sxs-lookup"><span data-stu-id="e1faa-209">Send</span></span>|<span data-ttu-id="e1faa-210">Transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-210">Transport</span></span><br /><br /> <span data-ttu-id="e1faa-211">Odbieranie</span><span class="sxs-lookup"><span data-stu-id="e1faa-211">Receive</span></span>|  
  
 <span data-ttu-id="e1faa-212">Dla żądania jednokierunkowe</span><span class="sxs-lookup"><span data-stu-id="e1faa-212">For One-way Request</span></span>  
  
||<span data-ttu-id="e1faa-213">Wyślij żądanie</span><span class="sxs-lookup"><span data-stu-id="e1faa-213">Send Request</span></span>|<span data-ttu-id="e1faa-214">Limit czasu żądania odbioru</span><span class="sxs-lookup"><span data-stu-id="e1faa-214">Receive Request</span></span>|  
|-|------------------|---------------------|  
|<span data-ttu-id="e1faa-215">Warstwy modelu usług</span><span class="sxs-lookup"><span data-stu-id="e1faa-215">Service Model layer</span></span>|<span data-ttu-id="e1faa-216">Usługa</span><span class="sxs-lookup"><span data-stu-id="e1faa-216">Service</span></span><br /><br /> <span data-ttu-id="e1faa-217">Poziom</span><span class="sxs-lookup"><span data-stu-id="e1faa-217">Level</span></span><br /><br /> <span data-ttu-id="e1faa-218">Wyślij</span><span class="sxs-lookup"><span data-stu-id="e1faa-218">Send</span></span><br /><br /> <span data-ttu-id="e1faa-219">Datagram</span><span class="sxs-lookup"><span data-stu-id="e1faa-219">Datagram</span></span>|<span data-ttu-id="e1faa-220">Usługa</span><span class="sxs-lookup"><span data-stu-id="e1faa-220">Service</span></span><br /><br /> <span data-ttu-id="e1faa-221">Poziom</span><span class="sxs-lookup"><span data-stu-id="e1faa-221">Level</span></span><br /><br /> <span data-ttu-id="e1faa-222">Odbieranie</span><span class="sxs-lookup"><span data-stu-id="e1faa-222">Receive</span></span><br /><br /> <span data-ttu-id="e1faa-223">Datagram</span><span class="sxs-lookup"><span data-stu-id="e1faa-223">Datagram</span></span>|  
|<span data-ttu-id="e1faa-224">Warstwa transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-224">Transport layer</span></span>|<span data-ttu-id="e1faa-225">Transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-225">Transport</span></span><br /><br /> <span data-ttu-id="e1faa-226">Wyślij</span><span class="sxs-lookup"><span data-stu-id="e1faa-226">Send</span></span>|<span data-ttu-id="e1faa-227">Transportu</span><span class="sxs-lookup"><span data-stu-id="e1faa-227">Transport</span></span><br /><br /> <span data-ttu-id="e1faa-228">Odbieranie</span><span class="sxs-lookup"><span data-stu-id="e1faa-228">Receive</span></span>|  
  
## <a name="message-filters"></a><span data-ttu-id="e1faa-229">Filtry komunikatów</span><span class="sxs-lookup"><span data-stu-id="e1faa-229">Message Filters</span></span>  
 <span data-ttu-id="e1faa-230">Filtry komunikatów są zdefiniowane w `messageLogging` elementu konfiguracji `diagnostics` sekcji konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e1faa-230">Message filters are defined in the `messageLogging` configuration element of the `diagnostics` configuration section.</span></span> <span data-ttu-id="e1faa-231">Są one stosowane na poziomie usług i mechanizm transportu.</span><span class="sxs-lookup"><span data-stu-id="e1faa-231">They are applied at the service and transport level.</span></span> <span data-ttu-id="e1faa-232">Po zdefiniowaniu co najmniej jeden filtr są rejestrowane tylko komunikatów spełniających co najmniej jeden z filtrów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-232">When one or more filters are defined, only messages that match at least one of the filters are logged.</span></span> <span data-ttu-id="e1faa-233">Jeśli nie jest definiować filtru, wszystkie komunikaty przekazywane.</span><span class="sxs-lookup"><span data-stu-id="e1faa-233">If no filter is defined, all messages pass through.</span></span>  
  
 <span data-ttu-id="e1faa-234">Filtry obsługuje pełnej składni języka XPath i są stosowane w kolejności, w jakiej znajdują się w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e1faa-234">Filters support the full XPath syntax and are applied in the order they appear in the configuration file.</span></span> <span data-ttu-id="e1faa-235">Nieprawidłowy filtr powoduje wyjątek konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e1faa-235">A syntactically incorrect filter results in a configuration exception.</span></span>  
  
 <span data-ttu-id="e1faa-236">Filtry również udostępniać funkcję bezpieczeństwa przy użyciu `nodeQuota` atrybut, który ogranicza maksymalną liczbę węzłów w modelu DOM XPath, które można zbadać zgodny z filtrem.</span><span class="sxs-lookup"><span data-stu-id="e1faa-236">Filters also provide a safety feature using the `nodeQuota` attribute, which limits the maximum number of nodes in the XPath DOM that can be examined to match the filter.</span></span>  
  
 <span data-ttu-id="e1faa-237">Poniższy przykład pokazuje, jak skonfigurować filtr tej wiadomości tylko rekordy, które mają sekcji nagłówka SOAP.</span><span class="sxs-lookup"><span data-stu-id="e1faa-237">The following example shows how to configure a filter that records only messages that have a SOAP header section.</span></span>  
  
```xml  
<messageLogging logEntireMessage="true"  
    logMalformedMessages="true"   
    logMessagesAtServiceLevel="true"  
    logMessagesAtTransportLevel="true"  
    maxMessagesToLog="420">  
    <filters>  
        <add nodeQuota="10" xmlns:soap="http://www.w3.org/2003/05/soap-envelope">  
                 /soap:Envelope/soap:Header  
        </add>  
     </filters>  
</messageLogging>  
```  
  
 <span data-ttu-id="e1faa-238">Nie można zastosować filtry do treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="e1faa-238">Filters cannot be applied to the body of a message.</span></span> <span data-ttu-id="e1faa-239">Filtry, które mają na celu manipulowania treści wiadomości są usuwane z listy filtrów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-239">Filters that attempt to manipulate the body of a message are removed from the list of filters.</span></span> <span data-ttu-id="e1faa-240">Zdarzenie jest również emitowane wskazującą to.</span><span class="sxs-lookup"><span data-stu-id="e1faa-240">An event is also emitted that indicates this.</span></span> <span data-ttu-id="e1faa-241">Na przykład następujący filtr zostaną usunięte z tabeli filtrów.</span><span class="sxs-lookup"><span data-stu-id="e1faa-241">For example, the following filter would be removed from the filter table.</span></span>  
  
```xml  
<add xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">/s:Envelope/s:Body[contains(text(), "Hello")]</add>  
```  
  
## <a name="configuring-a-custom-listener"></a><span data-ttu-id="e1faa-242">Konfigurowanie niestandardowych odbiornika</span><span class="sxs-lookup"><span data-stu-id="e1faa-242">Configuring a Custom Listener</span></span>  
 <span data-ttu-id="e1faa-243">Odbiornik niestandardowej można także skonfigurować dodatkowe opcje.</span><span class="sxs-lookup"><span data-stu-id="e1faa-243">You can also configure a custom listener with additional options.</span></span> <span data-ttu-id="e1faa-244">Niestandardowe odbiornika mogą być przydatne w filtrowania elementów dane osobowe specyficzne dla aplikacji z wiadomości przed zalogowaniem.</span><span class="sxs-lookup"><span data-stu-id="e1faa-244">A custom listener can be useful in filtering application-specific PII elements from messages before logging.</span></span> <span data-ttu-id="e1faa-245">W poniższym przykładzie pokazano konfiguracji odbiornika niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="e1faa-245">The following example demonstrates a custom listener configuration.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
     <source name="System.ServiceModel.MessageLogging">  
           <listeners>  
             <add name="MyListener"   
                    type="YourCustomListener"  
                    initializeData="c:\logs\messages.svclog"  
                    maxDiskSpace="1000"/>  
           </listeners>  
     </source>  
   </sources>  
</system.diagnostics>  
```  
  
 <span data-ttu-id="e1faa-246">Należy pamiętać, że `type` atrybut powinien mieć ustawioną nazwę kwalifikowaną zestawu typu.</span><span class="sxs-lookup"><span data-stu-id="e1faa-246">You should be aware that the `type` attribute should be set to a qualified assembly name of the type.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e1faa-247">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="e1faa-247">See Also</span></span>  
 [<span data-ttu-id="e1faa-248">\<messageLogging ></span><span class="sxs-lookup"><span data-stu-id="e1faa-248">\<messageLogging></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/messagelogging.md)  
 [<span data-ttu-id="e1faa-249">Rejestrowanie komunikatów</span><span class="sxs-lookup"><span data-stu-id="e1faa-249">Message Logging</span></span>](../../../../docs/framework/wcf/diagnostics/message-logging.md)  
 [<span data-ttu-id="e1faa-250">Zalecane ustawienia śledzenia i rejestrowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="e1faa-250">Recommended Settings for Tracing and Message Logging</span></span>](../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md)
