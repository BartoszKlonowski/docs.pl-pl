---
title: Używanie przeglądarki danych śledzenia usługi do wyświetlania skorelowanych danych śledzenia i rozwiązywania problemów
ms.date: 03/30/2017
ms.assetid: 05d2321c-8acb-49d7-a6cd-8ef2220c6775
ms.openlocfilehash: cfa1ec0e486943d196ec016be87544f17a0114e6
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/07/2018
ms.locfileid: "33806773"
---
# <a name="using-service-trace-viewer-for-viewing-correlated-traces-and-troubleshooting"></a><span data-ttu-id="1f56e-102">Używanie przeglądarki danych śledzenia usługi do wyświetlania skorelowanych danych śledzenia i rozwiązywania problemów</span><span class="sxs-lookup"><span data-stu-id="1f56e-102">Using Service Trace Viewer for Viewing Correlated Traces and Troubleshooting</span></span>
<span data-ttu-id="1f56e-103">W tym temacie opisano format danych śledzenia, jak wyświetlać i metod korzystających z przeglądarki śledzenia usługi Rozwiązywanie problemów z aplikacją.</span><span class="sxs-lookup"><span data-stu-id="1f56e-103">This topic describes the format of trace data, how to view it, and approaches that use the Service Trace Viewer to troubleshoot your application.</span></span>  
  
## <a name="using-the-service-trace-viewer-tool"></a><span data-ttu-id="1f56e-104">Za pomocą narzędzia podglądu śledzenia usługi</span><span class="sxs-lookup"><span data-stu-id="1f56e-104">Using the Service Trace Viewer Tool</span></span>  
 <span data-ttu-id="1f56e-105">Narzędzia podglądu śledzenia usługi Windows Communication Foundation (WCF) pomaga skorelowania dane śledzenia diagnostycznego utworzonego przez odbiorników WCF, aby znaleźć przyczynę błędu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-105">The Windows Communication Foundation (WCF) Service Trace Viewer tool helps you correlate diagnostic traces produced by WCF listeners to locate the root cause of an error.</span></span> <span data-ttu-id="1f56e-106">Narzędzie umożliwia łatwe przeglądanie grupy, i filtrować dane śledzenia, tak aby zdiagnozować, napraw i sprawdź problemy z usługi WCF.</span><span class="sxs-lookup"><span data-stu-id="1f56e-106">The tool gives you a way to easily view, group, and filter traces so that you can diagnose, repair and verify issues with WCF services.</span></span> <span data-ttu-id="1f56e-107">Aby uzyskać więcej informacji na temat stosowania tego narzędzia, zobacz [narzędzia podglądu śledzenia usług (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span><span class="sxs-lookup"><span data-stu-id="1f56e-107">For more information about using this tool, see [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span></span>  
  
 <span data-ttu-id="1f56e-108">Ten temat zawiera zrzuty ekranu śladów generowane przez uruchomienie [śledzenie i rejestrowanie komunikatów](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) próbkowania, podczas wyświetlania przy użyciu [narzędzia podglądu śledzenia usług (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span><span class="sxs-lookup"><span data-stu-id="1f56e-108">This topic contains screenshots of traces generated by running the [Tracing and Message Logging](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) sample, when viewed using the [Service Trace Viewer Tool (SvcTraceViewer.exe)](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md).</span></span> <span data-ttu-id="1f56e-109">W tym temacie przedstawiono sposób śledzenia zawartości, działań i ich korelacji i analizowania dużych ilości danych śledzenia podczas rozwiązywania problemów.</span><span class="sxs-lookup"><span data-stu-id="1f56e-109">This topic demonstrates how to understand trace content, activities and their correlation, and how to analyze large numbers of traces when troubleshooting.</span></span>  
  
## <a name="viewing-trace-content"></a><span data-ttu-id="1f56e-110">Wyświetlanie zawartości śledzenia</span><span class="sxs-lookup"><span data-stu-id="1f56e-110">Viewing Trace Content</span></span>  
 <span data-ttu-id="1f56e-111">Zdarzenia śledzenia zawiera następujące najważniejsze informacje:</span><span class="sxs-lookup"><span data-stu-id="1f56e-111">A trace event contains the following most significant information:</span></span>  
  
-   <span data-ttu-id="1f56e-112">Nazwa działania po ustawieniu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-112">Activity name when set.</span></span>  
  
-   <span data-ttu-id="1f56e-113">Czas emisji.</span><span class="sxs-lookup"><span data-stu-id="1f56e-113">Emission time.</span></span>  
  
-   <span data-ttu-id="1f56e-114">Poziom śledzenia.</span><span class="sxs-lookup"><span data-stu-id="1f56e-114">Trace level.</span></span>  
  
-   <span data-ttu-id="1f56e-115">Nazwa źródła śledzenia.</span><span class="sxs-lookup"><span data-stu-id="1f56e-115">Trace source name.</span></span>  
  
-   <span data-ttu-id="1f56e-116">Nazwa procesu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-116">Process name.</span></span>  
  
-   <span data-ttu-id="1f56e-117">Identyfikator wątku.</span><span class="sxs-lookup"><span data-stu-id="1f56e-117">Thread id.</span></span>  
  
-   <span data-ttu-id="1f56e-118">Identyfikator unikatowy śledzenia, czyli adres URL, którego obiektem docelowym w Docs firmy Microsoft, z którego można uzyskać więcej informacji dotyczących śledzenia.</span><span class="sxs-lookup"><span data-stu-id="1f56e-118">A unique trace identifier, which is a URL that points to a destination in Microsoft Docs, from which you can obtain more information related to the trace.</span></span>  
  
 <span data-ttu-id="1f56e-119">Wszystkie te można wyświetlić w górnym prawym panelu podglądu śledzenia usługi lub w **podstawowe informacje** sekcji w widoku sformatowany panelu prawym dolnym podczas wybierania śledzenia.</span><span class="sxs-lookup"><span data-stu-id="1f56e-119">All of these can be seen in the upper right panel in the Service Trace Viewer, or in the **Basic Information** section in the formatted view of the lower-right panel when selecting a trace.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1f56e-120">Jeśli klienta i usługi znajdują się na tym samym komputerze, będzie występować ślady dla obydwu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1f56e-120">If the client and the service are on the same machine, the traces for both applications will be present.</span></span> <span data-ttu-id="1f56e-121">Te można filtrować przy użyciu **nazwa procesu** kolumny.</span><span class="sxs-lookup"><span data-stu-id="1f56e-121">These can be filtered using the **Process Name** column.</span></span>  
  
 <span data-ttu-id="1f56e-122">Ponadto sformatowany widok zawiera również opis dla śledzenia i dodatkowe szczegółowe informacje po ich udostępnieniu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-122">In addition, the formatted view also provides a description for the trace and additional detailed information when available.</span></span> <span data-ttu-id="1f56e-123">Drugie mogą obejmować wyjątek typu i wiadomości, stosy wywołań Akcja komunikatu, z/do pól i inne informacje o wyjątku.</span><span class="sxs-lookup"><span data-stu-id="1f56e-123">The latter can include exception type and message, call stacks, message action, from/to fields, and other exception information.</span></span>  
  
 <span data-ttu-id="1f56e-124">W widoku XML tagi xml przydatne są następujące:</span><span class="sxs-lookup"><span data-stu-id="1f56e-124">In the XML view, useful xml tags include the following:</span></span>  
  
-   <span data-ttu-id="1f56e-125">\<Podtyp > (poziom śledzenia).</span><span class="sxs-lookup"><span data-stu-id="1f56e-125">\<SubType> (trace level).</span></span>  
  
-   <span data-ttu-id="1f56e-126">\<TimeCreated >.</span><span class="sxs-lookup"><span data-stu-id="1f56e-126">\<TimeCreated>.</span></span>  
  
-   <span data-ttu-id="1f56e-127">\<Źródło > (nazwa źródła śledzenia).</span><span class="sxs-lookup"><span data-stu-id="1f56e-127">\<Source> (trace source name).</span></span>  
  
-   <span data-ttu-id="1f56e-128">\<Korelacji > (identyfikator działania ustawić podczas emitowania śledzenia).</span><span class="sxs-lookup"><span data-stu-id="1f56e-128">\<Correlation> (activity id set when emitting the trace).</span></span>  
  
-   <span data-ttu-id="1f56e-129">\<Wykonanie > (identyfikator procesu i wątku).</span><span class="sxs-lookup"><span data-stu-id="1f56e-129">\<Execution> (process and thread id).</span></span>  
  
-   <span data-ttu-id="1f56e-130">\<Komputera >.</span><span class="sxs-lookup"><span data-stu-id="1f56e-130">\<Computer>.</span></span>  
  
-   <span data-ttu-id="1f56e-131">\<ExtendedData >, w tym \<akcji >, \<MessageID > i \<ActivityId > Ustaw w nagłówku wiadomości przy wysyłaniu wiadomości.</span><span class="sxs-lookup"><span data-stu-id="1f56e-131">\<ExtendedData>, including \<Action>, \<MessageID> and the \<ActivityId> set in the message header when sending a message.</span></span>  
  
 <span data-ttu-id="1f56e-132">Jeśli należy zbadać śledzenia "Wysłano wiadomość kanałem", mogą pojawić się następujące zawartości.</span><span class="sxs-lookup"><span data-stu-id="1f56e-132">If you examine the "Sent a message over a channel" trace, you may see the following content.</span></span>  
  
```xml  
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">  
   <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">  
      <EventID>262163</EventID>  
      <Type>3</Type>  
      <SubType Name="Information">0</SubType>  
      <Level>8</Level>  
      <TimeCreated SystemTime="2006-08-04T18:45:30.8491051Z" />  
      <Source Name="System.ServiceModel" />  
       <Correlation ActivityID="{27c6331d-8998-43aa-a382-03239013a6bd}"/>  
       <Execution ProcessName="client" ProcessID="1808" ThreadID="1" />  
       <Channel />  
       <Computer>TEST1</Computer>  
   </System>  
   <ApplicationData>  
       <TraceData>  
          <DataItem>  
             <TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Information">  
                 <TraceIdentifier>http://msdn.microsoft.com/library/System.ServiceModel.Channels.MessageSent.aspx</TraceIdentifier>  
                 <Description>Sent a message over a channel.</Description>  
                 <AppDomain>client.exe</AppDomain>  
                 <Source>System.ServiceModel.Channels.ClientFramingDuplexSessionChannel/35191196</Source>  
                <ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/MessageTransmitTraceRecord">  
  
                  <MessageProperties>  
                     <AllowOutputBatching>False</AllowOutputBatching>  
                  </MessageProperties>  
                  <MessageHeaders>  
                     <Action d4p1:mustUnderstand="1" xmlns:d4p1="http://www.w3.org/2003/05/soap-envelope" xmlns="http://www.w3.org/2005/08/addressing">http://Microsoft.ServiceModel.Samples/ICalculator/Multiply</Action>  
                     <MessageID xmlns="http://www.w3.org/2005/08/addressing">urn:uuid:7c6670d8-4c9c-496e-b6a0-2ceb6db35338</MessageID>  
                     <ActivityId CorrelationId="b02e2189-0816-4387-980c-dd8e306440f5" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">27c6331d-8998-43aa-a382-03239013a6bd</ActivityId>  
                     <ReplyTo xmlns="http://www.w3.org/2005/08/addressing">  
                        <Address>http://www.w3.org/2005/08/addressing/anonymous</Address>  
                    </ReplyTo>  
                    <To d4p1:mustUnderstand="1" xmlns:d4p1="http://www.w3.org/2003/05/soap-envelope" xmlns="http://www.w3.org/2005/08/addressing">net.tcp://localhost/servicemodelsamples/service</To>  
                  </MessageHeaders>  
                  <RemoteAddress>net.tcp://localhost/servicemodelsamples/service</RemoteAddress>  
                </ExtendedData>  
            </TraceRecord>  
          </DataItem>  
       </TraceData>  
   </ApplicationData>  
</E2ETraceEvent>  
```  
  
## <a name="servicemodel-e2e-tracing"></a><span data-ttu-id="1f56e-133">Śledzenie ServiceModel E2E</span><span class="sxs-lookup"><span data-stu-id="1f56e-133">ServiceModel E2E Tracing</span></span>  
 <span data-ttu-id="1f56e-134">Gdy `System.ServiceModel` źródła została skonfigurowana z `switchValue` innych niż wyłączone, i `ActivityTracing`, WCF tworzy działań i transferu dla przetwarzania WCF.</span><span class="sxs-lookup"><span data-stu-id="1f56e-134">When the `System.ServiceModel` trace source is set with a `switchValue` other than Off, and `ActivityTracing`, WCF creates activities and transfers for WCF processing.</span></span>  
  
 <span data-ttu-id="1f56e-135">Działanie to jednostka logiczna przetwarzania czy grupy wszystkie ślady dotyczące tej jednostki przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="1f56e-135">An activity is a logical unit of processing that groups all traces related to that processing unit.</span></span> <span data-ttu-id="1f56e-136">Na przykład można zdefiniować jedno działanie dla każdego żądania.</span><span class="sxs-lookup"><span data-stu-id="1f56e-136">For example, you can define one activity for each request.</span></span> <span data-ttu-id="1f56e-137">Transfery utworzyć przyczynowego między działaniami w obrębie punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="1f56e-137">Transfers create a causal relationship between activities within endpoints.</span></span> <span data-ttu-id="1f56e-138">Propagowanie identyfikator działania umożliwia odnoszą się działań w obrębie punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="1f56e-138">Propagating the activity ID enables you to relate activities across endpoints.</span></span> <span data-ttu-id="1f56e-139">Można to zrobić przez ustawienie `propagateActivity` = `true` w konfiguracji w każdym punkcie końcowym.</span><span class="sxs-lookup"><span data-stu-id="1f56e-139">This can be done by setting `propagateActivity`=`true` in configuration at every endpoint.</span></span> <span data-ttu-id="1f56e-140">Działań, przesyłania i propagacji umożliwiają wykonywanie błąd korelacji.</span><span class="sxs-lookup"><span data-stu-id="1f56e-140">Activities, transfers, and propagation allow you to perform error correlation.</span></span> <span data-ttu-id="1f56e-141">W ten sposób można znaleźć przyczynę błędu szybciej.</span><span class="sxs-lookup"><span data-stu-id="1f56e-141">In this way, you can find the root cause of an error more quickly.</span></span>  
  
 <span data-ttu-id="1f56e-142">Na komputerze klienckim jedno działanie WCF jest tworzony dla każdego wywołania modelu obiektu (na przykład otwórz elementu ChannelFactory, Dodaj dzielenia i itd.) Każdy z wywołania operacji są przetwarzane w działaniu "Akcja procesu".</span><span class="sxs-lookup"><span data-stu-id="1f56e-142">On the client, one WCF activity is created for each object model call (for example, Open ChannelFactory, Add, Divide, and so on.) Each of the operation calls is processed in a "Process Action" activity.</span></span>  
  
 <span data-ttu-id="1f56e-143">Na poniższym zrzucie ekranu wyodrębniony z [śledzenie i rejestrowanie komunikatów](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) próbki lewego panelu Wyświetla listę działań utworzonych w procesie klienta, posortowane według czasu utworzenia.</span><span class="sxs-lookup"><span data-stu-id="1f56e-143">In the following screenshot, extracted from the [Tracing and Message Logging](../../../../../docs/framework/wcf/samples/tracing-and-message-logging.md) sample the left panel displays the list of activities created in the client process, sorted by creation time.</span></span> <span data-ttu-id="1f56e-144">Poniżej przedstawiono listę chronologicznej działania:</span><span class="sxs-lookup"><span data-stu-id="1f56e-144">The following is a chronological list of activities:</span></span>  
  
-   <span data-ttu-id="1f56e-145">Konstruować fabryki kanałów (obiektu ClientBase).</span><span class="sxs-lookup"><span data-stu-id="1f56e-145">Constructed the channel factory (ClientBase).</span></span>  
  
-   <span data-ttu-id="1f56e-146">Otworzyć fabryki kanałów.</span><span class="sxs-lookup"><span data-stu-id="1f56e-146">Opened the channel factory.</span></span>  
  
-   <span data-ttu-id="1f56e-147">Przetwarzane akcji Dodaj.</span><span class="sxs-lookup"><span data-stu-id="1f56e-147">Processed the Add action.</span></span>  
  
-   <span data-ttu-id="1f56e-148">Skonfiguruj bezpieczną sesję (ten WYSTĄPIŁ na pierwsze żądanie) i przetworzyć trzy wiadomości odpowiedzi infrastruktury zabezpieczeń: RST, odpowiedź RSTR, SCT (proces komunikat 1, 2, 3).</span><span class="sxs-lookup"><span data-stu-id="1f56e-148">Set up the Secure Session (this OCCURRED on the first request) and processed three security infrastructure response messages: RST, RSTR, SCT (Process message 1, 2, 3).</span></span>  
  
-   <span data-ttu-id="1f56e-149">Mnożenie przetwarzane Subtract, i dzielenia żądań.</span><span class="sxs-lookup"><span data-stu-id="1f56e-149">Processed the Subtract, Multiply, and Divide requests.</span></span>  
  
-   <span data-ttu-id="1f56e-150">Zamknięte fabryki kanałów, a w ten sposób zamknięte bezpiecznej sesji i przetworzyć odpowiedzi na komunikat zabezpieczeń Anuluj.</span><span class="sxs-lookup"><span data-stu-id="1f56e-150">Closed the channel factory, and doing so closed the Secure session and processed the security message response Cancel.</span></span>  
  
 <span data-ttu-id="1f56e-151">Widzimy komunikatów infrastruktury zabezpieczeń z powodu wsHttpBinding.</span><span class="sxs-lookup"><span data-stu-id="1f56e-151">We see the security infrastructure messages because of the wsHttpBinding.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="1f56e-152">W programie WCF, zostanie przedstawiony wiadomości odpowiedzi początkowo przetwarzanych w oddzielnych działania (proces komunikat) przed możemy skorelowania do odpowiedniego działania działania procesu, który obejmuje komunikat żądania do przeniesienia.</span><span class="sxs-lookup"><span data-stu-id="1f56e-152">In WCF, we show response messages being processed initially in a separate activity (Process message) before we correlate them to the corresponding Process Action activity that includes the request message, through a transfer.</span></span> <span data-ttu-id="1f56e-153">To odbywa się w infrastrukturze wiadomości i żądań asynchronicznych, ze względu na fakt, że firma Microsoft musi sprawdzić wiadomości, odczytać nagłówka identyfikatora i zidentyfikować istniejące działanie procesu akcji o takim identyfikatorze służące do skorelowania do niego.</span><span class="sxs-lookup"><span data-stu-id="1f56e-153">This happens for infrastructure messages and asynchronous requests and is due to the fact that we must inspect the message, read the activityId header, and identify the existing Process Action activity with that id to correlate to it.</span></span> <span data-ttu-id="1f56e-154">Żądań synchronicznych firma Microsoft blokuje odpowiedzi, a więc wiedzieć, jakie działania procesu odpowiedzi odnosi się do.</span><span class="sxs-lookup"><span data-stu-id="1f56e-154">For synchronous requests, we are blocking for the response and hence know which Process action the response relates to.</span></span>  
  
 <span data-ttu-id="1f56e-155">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace4.gif "e2eTrace4")</span><span class="sxs-lookup"><span data-stu-id="1f56e-155">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace4.gif "e2eTrace4")</span></span>  
<span data-ttu-id="1f56e-156">Działania klienta WCF, wymienionych według godzina utworzenia (lewego panelu) i zagnieżdżonych działań i dane śledzenia (w górnym prawym panelu)</span><span class="sxs-lookup"><span data-stu-id="1f56e-156">WCF client activities listed by creation time (left panel) and their nested activities and traces (upper right panel)</span></span>  
  
 <span data-ttu-id="1f56e-157">Gdy firma Microsoft wybierz działanie, w lewym panelu, firma Microsoft Zobacz zagnieżdżonych działań i dane śledzenia w górnym prawym panelu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-157">When we select an activity in the left panel, we can see nested activities and traces on the upper right panel.</span></span> <span data-ttu-id="1f56e-158">W związku z tym jest to obniżonej hierarchiczny widok listy działań po lewej stronie, na podstawie wybranej nadrzędnej działania.</span><span class="sxs-lookup"><span data-stu-id="1f56e-158">Therefore, this is a reduced hierarchical view of the list of activities on the left, based on the selected parent activity.</span></span> <span data-ttu-id="1f56e-159">Ponieważ wybranej akcji procesu dodaj to pierwsze żądanie, to działanie zawiera działanie ustawić zapasowej bezpieczną sesję (przesyłanie danych do przeniesienia od) i śledzi rzeczywiste przetwarzanie akcji Dodaj.</span><span class="sxs-lookup"><span data-stu-id="1f56e-159">Because the selected Process action Add is the first request made, this activity contains the Set Up Secure Session activity (transfer to, transfer back from), and traces for the actual processing of the Add action.</span></span>  
  
 <span data-ttu-id="1f56e-160">Kliknij dwukrotnie działanie procesu Dodaj działania w lewym panelu, po widzimy graficzną reprezentację działania WCF klienta, które są powiązane z Dodaj.</span><span class="sxs-lookup"><span data-stu-id="1f56e-160">If we double click the Process action Add activity in the left panel, we can see a graphical representation of the client WCF activities related to Add.</span></span> <span data-ttu-id="1f56e-161">Pierwsze działanie po lewej stronie jest działanie główne (0000), która jest domyślne działanie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-161">The first activity on the left is the root activity (0000), which is the default activity.</span></span> <span data-ttu-id="1f56e-162">Transfery WCF z otaczającym działania.</span><span class="sxs-lookup"><span data-stu-id="1f56e-162">WCF transfers out of the ambient activity.</span></span> <span data-ttu-id="1f56e-163">Jeśli to nie jest zdefiniowany, WCF przesyła poza 0000.</span><span class="sxs-lookup"><span data-stu-id="1f56e-163">If this is not defined, WCF transfers out of 0000.</span></span> <span data-ttu-id="1f56e-164">W tym miejscu drugi działania. Dodaj działania procesu transferu poza 0.</span><span class="sxs-lookup"><span data-stu-id="1f56e-164">Here, the second activity, Process Action Add, transfers out of 0.</span></span> <span data-ttu-id="1f56e-165">Następnie sprawdź ustawienia bezpieczną sesję.</span><span class="sxs-lookup"><span data-stu-id="1f56e-165">Then we see Setup Secure Session.</span></span>  
  
 <span data-ttu-id="1f56e-166">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace5.gif "e2eTrace5")</span><span class="sxs-lookup"><span data-stu-id="1f56e-166">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace5.gif "e2eTrace5")</span></span>  
<span data-ttu-id="1f56e-167">Wykres widoku działania klienta WCF: działanie otoczenia (tutaj 0), proces działania i ustawić zapasowej bezpieczną sesję</span><span class="sxs-lookup"><span data-stu-id="1f56e-167">Graph view of WCF client activities: Ambient Activity (here 0), Process action, and Set Up Secure Session</span></span>  
  
 <span data-ttu-id="1f56e-168">W górnym prawym panelu możemy stwierdzić, że wszystkie ślady dotyczące działań dodać działania procesu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-168">On the upper right panel, we can see all traces related to the Process Action Add activity.</span></span> <span data-ttu-id="1f56e-169">W szczególności firma Microsoft ma wysłała komunikat żądania ("Wysłano wiadomość kanałem") i Odebrano odpowiedź ("Odebrano wiadomość kanałem") w tym samym działaniu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-169">Specifically, we have sent the request message ("Sent a message over a channel") and received the response ("Received a message over a channel") in the same activity.</span></span> <span data-ttu-id="1f56e-170">To jest wyświetlane na wykresie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-170">This is shown in the following graph.</span></span> <span data-ttu-id="1f56e-171">Dla uzyskania przejrzystości Skonfiguruj bezpieczną sesję działania jest zwinięte na wykresie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-171">For clarity, the Set up Secure Session activity is collapsed in the graph.</span></span>  
  
 <span data-ttu-id="1f56e-172">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace6.gif "e2eTrace6")</span><span class="sxs-lookup"><span data-stu-id="1f56e-172">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace6.gif "e2eTrace6")</span></span>  
<span data-ttu-id="1f56e-173">Lista śladów działania procesu akcji: możemy wysłać żądania i odbierania odpowiedzi w tym samym działaniu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-173">List of traces for the Process Action activity: we send the request and receive the response in the same activity.</span></span>  
  
 <span data-ttu-id="1f56e-174">W tym miejscu możemy załadować śladów klienta tylko dla jasności, ale ślady usługi (Odebrano komunikat żądania i odpowiedzi wiadomość wysłana) są wyświetlane w to samo działanie, jeśli należą również załadowany w narzędziu i `propagateActivity` ustawiono `true.` przedstawiono to w późniejszym ilustracji.</span><span class="sxs-lookup"><span data-stu-id="1f56e-174">Here, we load client traces only for clarity, but service traces (request message received and response message sent) appear in the same activity if they are also loaded in the tool and `propagateActivity` was set to `true.` This is shown in a later illustration.</span></span>  
  
 <span data-ttu-id="1f56e-175">W usłudze modelu aktywności mapuje pojęcia dotyczące usługi WCF w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="1f56e-175">On the service, the activity model maps to the WCF concepts as follows:</span></span>  
  
1.  <span data-ttu-id="1f56e-176">Firma Microsoft może utworzyć, a następnie otwórz ServiceHost (może to spowodować kilku czynności związanych z hosta, na przykład w przypadku zabezpieczeń).</span><span class="sxs-lookup"><span data-stu-id="1f56e-176">We construct and open a ServiceHost (this may create several host-related activities, for instance, in the case of security).</span></span>  
  
2.  <span data-ttu-id="1f56e-177">Utworzymy nasłuchiwania na działanie dla każdego odbiornika w ServiceHost (z przesyłania i otwórz ServiceHost).</span><span class="sxs-lookup"><span data-stu-id="1f56e-177">We create a Listen At activity for each listener in the ServiceHost (with transfers in and out of Open ServiceHost).</span></span>  
  
3.  <span data-ttu-id="1f56e-178">Odbiornik wykryje żądanie komunikacji inicjowane przez klienta, przesyłania do działania "Odbieranie bajtów", w którym są przetwarzane wszystkich bajtów wysłanych z klienta.</span><span class="sxs-lookup"><span data-stu-id="1f56e-178">When the listener detects a communication request initiated by the client, it transfers to a "Receive Bytes" activity, in which all bytes sent from the client are processed.</span></span> <span data-ttu-id="1f56e-179">W przypadku tego działania możemy Zobacz wszelkie błędy połączenia, które wystąpiły w czasie interakcji usługi klienta.</span><span class="sxs-lookup"><span data-stu-id="1f56e-179">In this activity, we can see any connection errors that have happened during the client-service interaction.</span></span>  
  
4.  <span data-ttu-id="1f56e-180">Dla każdego zestawu bajtów odebranych jest umożliwiająca wiadomości możemy przetworzyć tych bajtów w działaniu "Proces komunikat", gdzie możemy utworzyć obiektu wiadomości WCF.</span><span class="sxs-lookup"><span data-stu-id="1f56e-180">For each set of bytes that is received that corresponds to a message, we process these bytes in a "Process Message" activity, where we create the WCF Message object.</span></span> <span data-ttu-id="1f56e-181">W przypadku tego działania widzimy błędy związane z koperty nieprawidłowy lub uszkodzony komunikat.</span><span class="sxs-lookup"><span data-stu-id="1f56e-181">In this activity, we see errors related to a bad envelope or a malformed message.</span></span>  
  
5.  <span data-ttu-id="1f56e-182">Gdy komunikat jest sformułowany, przekazywane do działania procesu akcji.</span><span class="sxs-lookup"><span data-stu-id="1f56e-182">Once the message is formed, we transfer to a Process Action activity.</span></span> <span data-ttu-id="1f56e-183">Jeśli `propagateActivity` ma ustawioną wartość `true` na klienta i usługi, to działanie ma ten sam identyfikator jak zdefiniowane na komputerze klienckim i opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="1f56e-183">If `propagateActivity` is set to `true` on both the client and service, this activity has the same id as the one defined in the client, and described previously.</span></span> <span data-ttu-id="1f56e-184">Z tego etapu Rozpoczniemy do korzystania z bezpośredniego korelacji w obrębie punktów końcowych, ponieważ wszystkie ślady wysyłanego w programie WCF, powiązanych do żądania znajdują się w tej samej działania, w tym przetwarzanie komunikatu odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="1f56e-184">From this stage we start to benefit from direct correlation across endpoints, because all traces emitted in WCF that are related to the request are in that same activity, including the response message processing.</span></span>  
  
6.  <span data-ttu-id="1f56e-185">Akcja poza procesem utworzymy działanie "Wykonywanie kodu użytkownika", aby odizolować śladów wysyłanego w kodzie użytkownika z tymi wysyłanego w programie WCF.</span><span class="sxs-lookup"><span data-stu-id="1f56e-185">For out-of-process action, we create an "Execute user code" activity to isolate traces emitted in user code from the ones emitted in WCF.</span></span> <span data-ttu-id="1f56e-186">W powyższym przykładzie śledzenia "Usługa wysyła odpowiedź Dodaj" są emitowane w działaniu "Kod użytkownika Execute" nie znajduje się w działania propagowane przez klienta, jeśli ma to zastosowanie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-186">In the preceding example, the "Service sends Add response" trace is emitted in the "Execute User code" activity not in the activity propagated by the client, if applicable.</span></span>  
  
 <span data-ttu-id="1f56e-187">Na ilustracji poniżej pierwsze działanie po lewej stronie będzie działanie główne (0000), która jest domyślne działanie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-187">In the illustration that follows, the first activity on the left is the root activity (0000), which is the default activity.</span></span> <span data-ttu-id="1f56e-188">Trzech kolejnych działań są otworzyć ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="1f56e-188">The next three activities are to open the ServiceHost.</span></span> <span data-ttu-id="1f56e-189">Działania w kolumnie 5 jest odbiornika, a pozostałych działań (od 6 do 8) opisano przetwarzania WCF wiadomość z bajtów przetwarzania aktywację kodu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f56e-189">The activity in column 5 is the listener, and the remaining activities (6 to 8) describe the WCF processing of a message, from bytes processing to user code activation.</span></span>  
  
 <span data-ttu-id="1f56e-190">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace7.gif "e2eTrace7")</span><span class="sxs-lookup"><span data-stu-id="1f56e-190">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace7.gif "e2eTrace7")</span></span>  
<span data-ttu-id="1f56e-191">Lista działań usługi WCF</span><span class="sxs-lookup"><span data-stu-id="1f56e-191">List of WCF service activities</span></span>  
  
 <span data-ttu-id="1f56e-192">Poniższy zrzut ekranu przedstawia działania klienta i usługi i prezentuje działanie procesu Akcja dodanie między procesami (kolor pomarańczowy).</span><span class="sxs-lookup"><span data-stu-id="1f56e-192">The following screenshot shows the activities for both the client and service, and highlights the Process Action Add activity across processes (orange).</span></span> <span data-ttu-id="1f56e-193">Strzałki dotyczą żądań i odpowiedzi wiadomości wysyłanych i odbieranych przez klienta i usługi.</span><span class="sxs-lookup"><span data-stu-id="1f56e-193">Arrows relate the request and response messages sent and received by the client and service.</span></span> <span data-ttu-id="1f56e-194">Ślady procesu akcji są rozdzielone przez procesy na wykresie, ale wyświetlany jako część tego samego działania w prawym górnym panelu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-194">The traces of Process Action are separated across processes in the graph, but shown as part of the same activity in the upper-right panel.</span></span> <span data-ttu-id="1f56e-195">W tym panelu możemy Zobacz ślady klienta dla wysłanych komunikatów następuje ślady usługi odebranej i przetwarzanie komunikatów.</span><span class="sxs-lookup"><span data-stu-id="1f56e-195">In this panel, we can see client traces for sent messages followed by service traces for received and processed messages.</span></span>  
  
 <span data-ttu-id="1f56e-196">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace8.gif "e2eTrace8")</span><span class="sxs-lookup"><span data-stu-id="1f56e-196">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace8.gif "e2eTrace8")</span></span>  
<span data-ttu-id="1f56e-197">Widok wykresu zarówno działań klienta i usługi WCF</span><span class="sxs-lookup"><span data-stu-id="1f56e-197">Graph view of both WCF client and service activities</span></span>  
  
 <span data-ttu-id="1f56e-198">W poniższym scenariuszu błąd błąd i ostrzeżenie ślady na usługi i klienta są powiązane.</span><span class="sxs-lookup"><span data-stu-id="1f56e-198">In the following error scenario, error and warning traces at the service and client are related.</span></span> <span data-ttu-id="1f56e-199">Najpierw jest zgłaszany wyjątek w kodzie użytkownika w usłudze (zielony działania prawej krawędzi, który obejmuje Ostrzeżenie śledzenia dla wyjątku "Usługa nie może przetworzyć tego żądania w kodzie użytkownika.").</span><span class="sxs-lookup"><span data-stu-id="1f56e-199">An exception is first thrown in user code on the service (right-most green activity that includes a warning trace for the exception "The service cannot process this request in user code.").</span></span> <span data-ttu-id="1f56e-200">Po wysłaniu odpowiedzi do klienta śledzenia ostrzeżenie jest ponownie wysyłanego do oznaczania komunikat o błędzie (po lewej stronie różowym działanie).</span><span class="sxs-lookup"><span data-stu-id="1f56e-200">When the response is sent to the client, a warning trace is again emitted to denote the fault message (left pink activity).</span></span> <span data-ttu-id="1f56e-201">Klient następnie zamyka jego klienta WCF (żółty działanie po stronie lewej dolnej), która przerywa połączenie z usługą.</span><span class="sxs-lookup"><span data-stu-id="1f56e-201">The client then closes its WCF client (yellow activity on the lower-left side), which aborts the connection to the service.</span></span> <span data-ttu-id="1f56e-202">Usługa zgłasza błąd (najdłuższym różowym działanie po prawej stronie).</span><span class="sxs-lookup"><span data-stu-id="1f56e-202">The service throws an error (longest pink activity on the right).</span></span>  
  
 <span data-ttu-id="1f56e-203">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span><span class="sxs-lookup"><span data-stu-id="1f56e-203">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span></span>  
<span data-ttu-id="1f56e-204">Błąd korelacji między usługą i klienta</span><span class="sxs-lookup"><span data-stu-id="1f56e-204">Error correlation across the service and client</span></span>  
  
 <span data-ttu-id="1f56e-205">Przykładowy służący do generowania te operacje śledzenia jest szereg żądań synchronicznych przy użyciu klasy wsHttpBinding.</span><span class="sxs-lookup"><span data-stu-id="1f56e-205">The sample used to generate these traces is a series of synchronous requests using the wsHttpBinding.</span></span> <span data-ttu-id="1f56e-206">Brak odchylenia od tego wykresu dla scenariuszy bez zabezpieczeń lub z żądań asynchronicznych, której działanie procesu akcji obejmuje operacje rozpoczęcia i zakończenia, które tworzą wywołania asynchronicznego oraz przedstawia transferu do działania wywołania zwrotnego.</span><span class="sxs-lookup"><span data-stu-id="1f56e-206">There are deviations from this graph for scenarios without security, or with asynchronous requests, where the Process Action activity encompasses the begin and end operations that constitute the asynchronous call, and shows transfers to a callback activity.</span></span> <span data-ttu-id="1f56e-207">Aby uzyskać więcej informacji o dodatkowych scenariuszach, zobacz [scenariusze śledzenia End-To-End](../../../../../docs/framework/wcf/diagnostics/tracing/end-to-end-tracing-scenarios.md).</span><span class="sxs-lookup"><span data-stu-id="1f56e-207">For more information about additional scenarios, see [End-To-End Tracing Scenarios](../../../../../docs/framework/wcf/diagnostics/tracing/end-to-end-tracing-scenarios.md).</span></span>  
  
## <a name="troubleshooting-using-the-service-trace-viewer"></a><span data-ttu-id="1f56e-208">Rozwiązywanie problemów przy użyciu przeglądarki śledzenia usługi</span><span class="sxs-lookup"><span data-stu-id="1f56e-208">Troubleshooting Using the Service Trace Viewer</span></span>  
 <span data-ttu-id="1f56e-209">Podczas ładowania plików śledzenia w narzędziu Podgląd śledzenia usługi można wybrać żadnych czerwony lub żółty aktywności w lewym panelu śledzić przyczyna problemu w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1f56e-209">When you load trace files in the Service Trace Viewer Tool, you can select any red or yellow activity on the left panel to track down the cause of a problem in your application.</span></span> <span data-ttu-id="1f56e-210">Zazwyczaj działanie 000 ma nieobsługiwane wyjątki, które propagują do użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f56e-210">The 000 activity typically has unhandled exceptions that bubble up to the user.</span></span>  
  
 <span data-ttu-id="1f56e-211">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace10.gif "e2eTrace10")</span><span class="sxs-lookup"><span data-stu-id="1f56e-211">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace10.gif "e2eTrace10")</span></span>  
<span data-ttu-id="1f56e-212">Zaznaczenie działania czerwony lub żółty Znajdź główny problem</span><span class="sxs-lookup"><span data-stu-id="1f56e-212">Selecting red or yellow activity to locate the root of a problem</span></span>  
  
 <span data-ttu-id="1f56e-213">W górnym prawym panelu należy zbadać śledzenia dla działania, którego wybrano po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="1f56e-213">On the upper right panel, you can examine traces for the activity you selected on the left.</span></span> <span data-ttu-id="1f56e-214">Można zbadać czerwony lub żółty dane śledzenia w panelu i zobacz, jak są skorelowane.</span><span class="sxs-lookup"><span data-stu-id="1f56e-214">You can then examine red or yellow traces in that panel and see how they are correlated.</span></span> <span data-ttu-id="1f56e-215">Na poprzednim wykresie przedstawiono zapisy ostrzeżeń zarówno dla klienta i usługi, w tym samym działaniu działania procesu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-215">In the preceding graph, we see warning traces both for the client and service in the same Process Action activity.</span></span>  
  
 <span data-ttu-id="1f56e-216">Jeśli te operacje śledzenia nie zawierają przyczynę błędu, może korzystać z wykresu, klikając dwukrotnie wybrane działanie w lewym panelu (tutaj Akcja procesu).</span><span class="sxs-lookup"><span data-stu-id="1f56e-216">If these traces do not provide you with the root cause of the error, you can utilize the graph by double-clicking the selected activity on the left panel (here Process action).</span></span> <span data-ttu-id="1f56e-217">Następnie zostanie wyświetlony wykres z powiązanych z nimi działań.</span><span class="sxs-lookup"><span data-stu-id="1f56e-217">The graph with related activities is then displayed.</span></span> <span data-ttu-id="1f56e-218">Następnie można rozwinąć pokrewne działania (klikając znaki "+") można znaleźć pierwszego śledzenia emitowany na czerwono lub żółty, pokrewne działania.</span><span class="sxs-lookup"><span data-stu-id="1f56e-218">You can then expand related activities (by clicking the "+" signs) to find the first emitted trace in red or yellow in a related activity.</span></span> <span data-ttu-id="1f56e-219">Zachowaj rozwijanie działań, które wystąpiły tuż przed śledzenia czerwony lub żółty zainteresowania po przekazaniu pokrewne działania lub przepływów wiadomości między punktami końcowymi, dopóki śledzić główną przyczynę problemu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-219">Keep expanding the activities that happened just before the red or yellow trace of interest, following transfers to related activities or message flows across endpoints, until you track the root cause of the problem.</span></span>  
  
 <span data-ttu-id="1f56e-220">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span><span class="sxs-lookup"><span data-stu-id="1f56e-220">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/wcfc-e2etrace9s.gif "wcfc_e2etrace9s")</span></span>  
<span data-ttu-id="1f56e-221">Rozszerzanie działania śledzenia głównej przyczyny problemu</span><span class="sxs-lookup"><span data-stu-id="1f56e-221">Expanding activities to track the root cause of a problem</span></span>  
  
 <span data-ttu-id="1f56e-222">Jeśli ServiceModel `ActivityTracing` jest wyłączone, ale ServiceModel śledzenie jest włączone, widać wysyłanego w działaniu 0000 śladów ServiceModel.</span><span class="sxs-lookup"><span data-stu-id="1f56e-222">If ServiceModel `ActivityTracing` is off but ServiceModel tracing is on, you can see ServiceModel traces emitted in the 0000 activity.</span></span> <span data-ttu-id="1f56e-223">Jednak wymaga więcej wysiłku, aby zrozumieć korelację te operacje śledzenia.</span><span class="sxs-lookup"><span data-stu-id="1f56e-223">However, this requires more effort to understand the correlation of these traces.</span></span>  
  
 <span data-ttu-id="1f56e-224">Po włączeniu rejestrowania komunikatów służy karcie wiadomość aby zobaczyć, których komunikat jest wpływ błędu.</span><span class="sxs-lookup"><span data-stu-id="1f56e-224">If Message Logging is enabled, you can use the Message Tab to see which message is impacted by the error.</span></span> <span data-ttu-id="1f56e-225">Dwukrotne kliknięcie komunikatu na czerwono lub żółty, jest widoczny w widoku wykresu powiązanych działań.</span><span class="sxs-lookup"><span data-stu-id="1f56e-225">By double-clicking a message in red or yellow, you can see the graph view of the related activities.</span></span> <span data-ttu-id="1f56e-226">Te działania są pokazane najlepiej powiązanych do żądania, w którym wystąpił błąd.</span><span class="sxs-lookup"><span data-stu-id="1f56e-226">These activities are the ones most closely related to the request where an error happened.</span></span>  
  
 <span data-ttu-id="1f56e-227">![Przy użyciu przeglądarki śledzenia](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace11.gif "e2eTrace11")</span><span class="sxs-lookup"><span data-stu-id="1f56e-227">![Using the Trace Viewer](../../../../../docs/framework/wcf/diagnostics/tracing/media/e2etrace11.gif "e2eTrace11")</span></span>  
<span data-ttu-id="1f56e-228">Zacząć Rozwiązywanie problemów można również pobranie śladu czerwony lub żółty wiadomości i dwukrotnie kliknij go, aby śledzić głównej przyczyny</span><span class="sxs-lookup"><span data-stu-id="1f56e-228">To start troubleshooting, you can also pick a red or yellow message trace and double click it to track the root cause</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1f56e-229">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="1f56e-229">See Also</span></span>  
 [<span data-ttu-id="1f56e-230">Scenariusze kompleksowego śledzenia</span><span class="sxs-lookup"><span data-stu-id="1f56e-230">End-To-End Tracing Scenarios</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/end-to-end-tracing-scenarios.md)  
 [<span data-ttu-id="1f56e-231">Narzędzie do przeglądania danych śledzenia usług (SvcTraceViewer.exe)</span><span class="sxs-lookup"><span data-stu-id="1f56e-231">Service Trace Viewer Tool (SvcTraceViewer.exe)</span></span>](../../../../../docs/framework/wcf/service-trace-viewer-tool-svctraceviewer-exe.md)  
 [<span data-ttu-id="1f56e-232">Śledzenie</span><span class="sxs-lookup"><span data-stu-id="1f56e-232">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)
