---
title: Śledzenie działania w ramach zabezpieczeń komunikatów
ms.date: 03/30/2017
ms.assetid: 68862534-3b2e-4270-b097-8121b12a2c97
ms.openlocfilehash: bb8a4c6782cc52de393eacc2458e216d0f069866
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/22/2019
ms.locfileid: "69933514"
---
# <a name="activity-tracing-in-message-security"></a><span data-ttu-id="4e699-102">Śledzenie działania w ramach zabezpieczeń komunikatów</span><span class="sxs-lookup"><span data-stu-id="4e699-102">Activity Tracing in Message Security</span></span>
<span data-ttu-id="4e699-103">W tym temacie opisano śledzenie działań na potrzeby przetwarzania zabezpieczeń, które odbywa się w następujących trzech fazach.</span><span class="sxs-lookup"><span data-stu-id="4e699-103">This topic describes activity tracing for security processing, which happens in the following three phases.</span></span>  
  
- <span data-ttu-id="4e699-104">Negocjowanie/SCT Exchange.</span><span class="sxs-lookup"><span data-stu-id="4e699-104">Negotiation/SCT exchange.</span></span> <span data-ttu-id="4e699-105">Może się to zdarzyć w przypadku późniejszego transportu (za pomocą wymiany danych binarnych) lub warstwy wiadomości (za pomocą wymiany komunikatów protokołu SOAP).</span><span class="sxs-lookup"><span data-stu-id="4e699-105">This can happen at the transport later (through binary data exchange) or message layer (through SOAP message exchanges).</span></span>  
  
- <span data-ttu-id="4e699-106">Szyfrowanie/odszyfrowywanie komunikatu z weryfikacją podpisu i uwierzytelnianiem.</span><span class="sxs-lookup"><span data-stu-id="4e699-106">Message encryption/decryption, with signature verification and authentication.</span></span> <span data-ttu-id="4e699-107">Ślady są wyświetlane w działaniu otoczenia, zazwyczaj "Akcja procesu".</span><span class="sxs-lookup"><span data-stu-id="4e699-107">Traces appear in the ambient activity, typically "Process Action."</span></span>  
  
- <span data-ttu-id="4e699-108">Autoryzacja i weryfikacja.</span><span class="sxs-lookup"><span data-stu-id="4e699-108">Authorization and verification.</span></span> <span data-ttu-id="4e699-109">Może się to zdarzyć lokalnie lub podczas komunikacji między punktami końcowymi.</span><span class="sxs-lookup"><span data-stu-id="4e699-109">This can happen locally or when communicating between endpoints.</span></span>  
  
## <a name="negotiationsct-exchange"></a><span data-ttu-id="4e699-110">Negocjowanie/wymiana z SCT</span><span class="sxs-lookup"><span data-stu-id="4e699-110">Negotiation/SCT exchange</span></span>  
 <span data-ttu-id="4e699-111">W fazie wymiany negocjacji/SCT na kliencie tworzone są dwa typy działań: "Skonfiguruj bezpieczną sesję" i "Zamknij bezpieczną sesję".</span><span class="sxs-lookup"><span data-stu-id="4e699-111">In the negotiation/SCT exchange phase, two activity types are created on the client: "Set up Secure Session" and "Close Secure Session."</span></span> <span data-ttu-id="4e699-112">"Skonfiguruj bezpieczną sesję" obejmuje ślady dla wymiany komunikatów RST/RSTR/SCT, natomiast polecenie "Zamknij bezpieczną sesję" obejmuje ślady dla wiadomości Anuluj.</span><span class="sxs-lookup"><span data-stu-id="4e699-112">"Set up Secure Session" encompasses traces for the RST/RSTR/SCT message exchanges, while "Close Secure Session" includes traces for the Cancel message.</span></span>  
  
 <span data-ttu-id="4e699-113">Na serwerze każde żądanie/odpowiedź dla RST/RSTR/SCT pojawia się w jego własnej aktywności.</span><span class="sxs-lookup"><span data-stu-id="4e699-113">On the server, each request/reply for the RST/RSTR/SCT appears in its own activity.</span></span> <span data-ttu-id="4e699-114">Jeśli `propagateActivity` zarównoserwer,`true` jak i klient, działania na serwerze mają ten sam identyfikator i pojawiają się razem w oknie "bezpieczna sesja" podczas wyświetlania za pomocą przeglądarki śledzenia usługi. =</span><span class="sxs-lookup"><span data-stu-id="4e699-114">If `propagateActivity`=`true` on both the server and client, activities on the server have the same ID, and appear together in the "Setup Secure Session" when viewed through Service Trace Viewer.</span></span>  
  
 <span data-ttu-id="4e699-115">Ten model śledzenia aktywności jest prawidłowy dla uwierzytelniania nazwy użytkownika/hasła, uwierzytelniania certyfikatów i uwierzytelniania NTLM.</span><span class="sxs-lookup"><span data-stu-id="4e699-115">This activity tracing model is valid for user name/password authentication, certificate authentication, and NTLM authentication.</span></span>  
  
 <span data-ttu-id="4e699-116">W poniższej tabeli wymieniono działania i ślady dotyczące negocjacji oraz wymiany SCT.</span><span class="sxs-lookup"><span data-stu-id="4e699-116">The following table lists the activities and traces for negotiation and SCT exchange.</span></span>  
  
||<span data-ttu-id="4e699-117">Czas, w którym odbywa się negocjowanie/nawiązywanie wymiany z SCT</span><span class="sxs-lookup"><span data-stu-id="4e699-117">Time when Negotiation/SCT exchange happens</span></span>|<span data-ttu-id="4e699-118">Kategoria Activities</span><span class="sxs-lookup"><span data-stu-id="4e699-118">Activities</span></span>|<span data-ttu-id="4e699-119">Ścieżki</span><span class="sxs-lookup"><span data-stu-id="4e699-119">Traces</span></span>|  
|-|-------------------------------------------------|----------------|------------|  
|<span data-ttu-id="4e699-120">Bezpieczny transport</span><span class="sxs-lookup"><span data-stu-id="4e699-120">Secure Transport</span></span><br /><br /> <span data-ttu-id="4e699-121">(HTTPS, SSL)</span><span class="sxs-lookup"><span data-stu-id="4e699-121">(HTTPS, SSL)</span></span>|<span data-ttu-id="4e699-122">Po odebraniu pierwszego komunikatu.</span><span class="sxs-lookup"><span data-stu-id="4e699-122">On first message received.</span></span>|<span data-ttu-id="4e699-123">Ślady są emitowane w działaniu otoczenia.</span><span class="sxs-lookup"><span data-stu-id="4e699-123">Traces are emitted in the ambient activity.</span></span>|<span data-ttu-id="4e699-124">— Ślady programu Exchange</span><span class="sxs-lookup"><span data-stu-id="4e699-124">-   Exchange traces</span></span><br /><span data-ttu-id="4e699-125">-Nawiązano bezpieczny kanał</span><span class="sxs-lookup"><span data-stu-id="4e699-125">-   Secure channel established</span></span><br /><span data-ttu-id="4e699-126">— Otrzymane wpisy tajne są udostępniane.</span><span class="sxs-lookup"><span data-stu-id="4e699-126">-   Share secrets obtained.</span></span>|  
|<span data-ttu-id="4e699-127">Warstwa komunikatów zabezpieczonych</span><span class="sxs-lookup"><span data-stu-id="4e699-127">Secure Message Layer</span></span><br /><br /> <span data-ttu-id="4e699-128">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="4e699-128">(WSHTTP)</span></span>|<span data-ttu-id="4e699-129">Po odebraniu pierwszego komunikatu.</span><span class="sxs-lookup"><span data-stu-id="4e699-129">On first message received.</span></span>|<span data-ttu-id="4e699-130">Na kliencie:</span><span class="sxs-lookup"><span data-stu-id="4e699-130">On the client:</span></span><br /><br /> <span data-ttu-id="4e699-131">-"Skonfiguruj bezpieczną sesję" z "akcją procesu" dla tego pierwszego komunikatu dla każdego żądania/odpowiedzi dla RST/RSTR/SCT.</span><span class="sxs-lookup"><span data-stu-id="4e699-131">-   "Setup Secure Session" out of "Process Action" of that first message, for each request/reply for RST/RSTR/SCT.</span></span><br /><span data-ttu-id="4e699-132">-"Zamknij bezpieczną sesję" dla elementu CANCEL Exchange wychodzącego z działania "Zamknij serwer proxy".</span><span class="sxs-lookup"><span data-stu-id="4e699-132">-   "Close Secure Session" for the CANCEL exchange, out of the "Close Proxy activity."</span></span> <span data-ttu-id="4e699-133">To działanie może wystąpić z innego otoczenia, w zależności od tego, kiedy jest zamykana bezpieczna sesja.</span><span class="sxs-lookup"><span data-stu-id="4e699-133">This activity may happen out of some other ambient activity, depending on when the secure session is closed.</span></span><br /><br /> <span data-ttu-id="4e699-134">Na serwerze programu:</span><span class="sxs-lookup"><span data-stu-id="4e699-134">On the server:</span></span><br /><br /> <span data-ttu-id="4e699-135">-Jedno działanie "Akcja procesowa" dla każdego żądania/odpowiedzi dla RST/SCT/Anuluj na serwerze.</span><span class="sxs-lookup"><span data-stu-id="4e699-135">-   One "Process Action" activity for each request/reply for RST/SCT/Cancel on the server.</span></span> <span data-ttu-id="4e699-136">W `propagateActivity`przypadku, gdy = `true`działania RST/RSTR/SCT są scalane z usługą "Skonfiguruj sesję zabezpieczeń", a przycisk Anuluj zostanie scalony z działaniem "Zamknij" z klienta.</span><span class="sxs-lookup"><span data-stu-id="4e699-136">If `propagateActivity`=`true`, RST/RSTR/SCT activities are merged with "Set up Security Session", and Cancel is merged with the "Close" activity from the client.</span></span><br /><br /> <span data-ttu-id="4e699-137">Dla opcji "Skonfiguruj bezpieczną sesję" Istnieją dwa etapy:</span><span class="sxs-lookup"><span data-stu-id="4e699-137">There are two stages for "Set up Secure Session":</span></span><br /><br /> <span data-ttu-id="4e699-138">1.  Negocjowanie uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="4e699-138">1.  Authentication negotiation.</span></span> <span data-ttu-id="4e699-139">Jest to opcjonalne, jeśli klient ma już odpowiednie poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="4e699-139">This is optional if the client already has the proper credentials.</span></span> <span data-ttu-id="4e699-140">Tę fazę można wykonać za poorednictwem bezpiecznego transportu lub wymian komunikatów.</span><span class="sxs-lookup"><span data-stu-id="4e699-140">This phase can be done through secure transport, or through message exchanges.</span></span> <span data-ttu-id="4e699-141">W tym drugim przypadku mogą wystąpić 1 lub 2 RSTR.</span><span class="sxs-lookup"><span data-stu-id="4e699-141">In the latter case, 1 or 2 RST/RSTR exchanges can happen.</span></span> <span data-ttu-id="4e699-142">W przypadku tych wymian ślady są emitowane w nowych działaniach żądania/odpowiedzi zgodnie z założeniami.</span><span class="sxs-lookup"><span data-stu-id="4e699-142">For these exchanges, traces are emitted in new request/reply activities as previously designed.</span></span><br /><span data-ttu-id="4e699-143">2.  Ustanawianie bezpiecznej sesji (SCT), w której w tym miejscu występuje jeden serwer RSTR.</span><span class="sxs-lookup"><span data-stu-id="4e699-143">2.  Secure session establishment (SCT), in which one RST/RSTR exchange happens here.</span></span> <span data-ttu-id="4e699-144">Ma to takie same działania otoczenia jak opisane wcześniej.</span><span class="sxs-lookup"><span data-stu-id="4e699-144">This has the same ambient activities as described previously.</span></span>|<span data-ttu-id="4e699-145">— Ślady programu Exchange</span><span class="sxs-lookup"><span data-stu-id="4e699-145">-   Exchange traces</span></span><br /><span data-ttu-id="4e699-146">-Nawiązano bezpieczny kanał</span><span class="sxs-lookup"><span data-stu-id="4e699-146">-   Secure channel established</span></span><br /><span data-ttu-id="4e699-147">— Otrzymane wpisy tajne są udostępniane.</span><span class="sxs-lookup"><span data-stu-id="4e699-147">-   Share secrets obtained.</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="4e699-148">W trybie zabezpieczeń mieszanym uwierzytelnianie negocjacji odbywa się w wymianach binarnych, ale w wymianie komunikatów jest to polecenie SCT.</span><span class="sxs-lookup"><span data-stu-id="4e699-148">In mixed security mode, negotiation authentication happens in binary exchanges, but SCT happens in message exchange.</span></span> <span data-ttu-id="4e699-149">W trybie czysty transport negocjacje odbywają się tylko w transporcie bez dodatkowych działań.</span><span class="sxs-lookup"><span data-stu-id="4e699-149">In pure transport mode, negotiation happens only in transport with no additional activities.</span></span>  
  
## <a name="message-encryption-and-decryption"></a><span data-ttu-id="4e699-150">Szyfrowanie i odszyfrowywanie komunikatów</span><span class="sxs-lookup"><span data-stu-id="4e699-150">Message Encryption and Decryption</span></span>  
 <span data-ttu-id="4e699-151">Poniższa tabela zawiera listę działań i śladów związanych z szyfrowaniem/odszyfrowywaniem komunikatów oraz uwierzytelnianiem sygnatury.</span><span class="sxs-lookup"><span data-stu-id="4e699-151">The following table lists the activities and traces for message encryption/decryption, as well as signature authentication.</span></span>  
  
||<span data-ttu-id="4e699-152">Bezpieczny transport</span><span class="sxs-lookup"><span data-stu-id="4e699-152">Secure Transport</span></span><br /><br /> <span data-ttu-id="4e699-153">(HTTPS, SSL) i bezpieczna warstwa komunikatów</span><span class="sxs-lookup"><span data-stu-id="4e699-153">(HTTPS, SSL) and Secure Message Layer</span></span><br /><br /> <span data-ttu-id="4e699-154">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="4e699-154">(WSHTTP)</span></span>|  
|-|---------------------------------------------------------------------------------|  
|<span data-ttu-id="4e699-155">Czas, w którym następuje szyfrowanie i odszyfrowywanie wiadomości, a także uwierzytelnianie podpisu</span><span class="sxs-lookup"><span data-stu-id="4e699-155">Time when message encryption/decryption, as well as signature authentication happens</span></span>|<span data-ttu-id="4e699-156">Po odebraniu komunikatu</span><span class="sxs-lookup"><span data-stu-id="4e699-156">On message received</span></span>|  
|<span data-ttu-id="4e699-157">Kategoria Activities</span><span class="sxs-lookup"><span data-stu-id="4e699-157">Activities</span></span>|<span data-ttu-id="4e699-158">Ślady są emitowane w działaniu ProcessAction na kliencie i serwerze.</span><span class="sxs-lookup"><span data-stu-id="4e699-158">Traces are emitted in the ProcessAction activity on the client and server.</span></span>|  
|<span data-ttu-id="4e699-159">Ścieżki</span><span class="sxs-lookup"><span data-stu-id="4e699-159">Traces</span></span>|<span data-ttu-id="4e699-160">-sendSecurityHeader (nadawca):</span><span class="sxs-lookup"><span data-stu-id="4e699-160">-   sendSecurityHeader (sender):</span></span><br /><span data-ttu-id="4e699-161">-Podpisz wiadomość</span><span class="sxs-lookup"><span data-stu-id="4e699-161">-   Sign message</span></span><br /><span data-ttu-id="4e699-162">-Szyfruj dane żądania</span><span class="sxs-lookup"><span data-stu-id="4e699-162">-   Encrypt request data</span></span><br /><span data-ttu-id="4e699-163">-receiveSecurityHeader (odbiornik):</span><span class="sxs-lookup"><span data-stu-id="4e699-163">-   receiveSecurityHeader (receiver):</span></span><br /><span data-ttu-id="4e699-164">-Weryfikuj podpis</span><span class="sxs-lookup"><span data-stu-id="4e699-164">-   Verify signature</span></span><br /><span data-ttu-id="4e699-165">-Odszyfruj dane odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="4e699-165">-   Decrypt response data</span></span><br /><span data-ttu-id="4e699-166">-Uwierzytelnianie</span><span class="sxs-lookup"><span data-stu-id="4e699-166">-   Authentication</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="4e699-167">W trybie czystego transportu szyfrowanie lub odszyfrowywanie komunikatów odbywa się tylko w transporcie bez dodatkowych działań.</span><span class="sxs-lookup"><span data-stu-id="4e699-167">In pure transport mode, message encryption/decryption happens only in transport with no additional activities.</span></span>  
  
## <a name="authorization-and-verification"></a><span data-ttu-id="4e699-168">Autoryzacja i weryfikacja</span><span class="sxs-lookup"><span data-stu-id="4e699-168">Authorization and Verification</span></span>  
 <span data-ttu-id="4e699-169">Poniższa tabela zawiera listę działań i śladów na potrzeby autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="4e699-169">The following table lists the activities and traces for authorization.</span></span>  
  
||<span data-ttu-id="4e699-170">Czas trwania autoryzacji</span><span class="sxs-lookup"><span data-stu-id="4e699-170">Time when authorization happens</span></span>|<span data-ttu-id="4e699-171">Kategoria Activities</span><span class="sxs-lookup"><span data-stu-id="4e699-171">Activities</span></span>|<span data-ttu-id="4e699-172">Ścieżki</span><span class="sxs-lookup"><span data-stu-id="4e699-172">Traces</span></span>|  
|-|-------------------------------------|----------------|------------|  
|<span data-ttu-id="4e699-173">Lokalna (domyślnie)</span><span class="sxs-lookup"><span data-stu-id="4e699-173">Local (default)</span></span>|<span data-ttu-id="4e699-174">Po odszyfrowaniu komunikatu na serwerze</span><span class="sxs-lookup"><span data-stu-id="4e699-174">After the message is decrypted on the server</span></span>|<span data-ttu-id="4e699-175">Ślady są emitowane w działaniu ProcessAction na serwerze.</span><span class="sxs-lookup"><span data-stu-id="4e699-175">Traces are emitted in the ProcessAction activity at the server.</span></span>|<span data-ttu-id="4e699-176">Użytkownik autoryzowany.</span><span class="sxs-lookup"><span data-stu-id="4e699-176">User authorized.</span></span>|  
|<span data-ttu-id="4e699-177">Zdalne</span><span class="sxs-lookup"><span data-stu-id="4e699-177">Remote</span></span>|<span data-ttu-id="4e699-178">Po odszyfrowaniu komunikatu na serwerze</span><span class="sxs-lookup"><span data-stu-id="4e699-178">After the message is decrypted on the server</span></span>|<span data-ttu-id="4e699-179">Ślady są emitowane w nowym działaniu wywoływanym przez działanie ProcessAction.</span><span class="sxs-lookup"><span data-stu-id="4e699-179">Traces are emitted in a new activity invoked by the ProcessAction activity.</span></span>|<span data-ttu-id="4e699-180">Użytkownik autoryzowany.</span><span class="sxs-lookup"><span data-stu-id="4e699-180">User authorized.</span></span>|
