---
title: Śledzenie działania w ramach zabezpieczeń komunikatów
ms.date: 03/30/2017
ms.assetid: 68862534-3b2e-4270-b097-8121b12a2c97
ms.openlocfilehash: c3bd36598fd903dc016959149e563174624d084b
ms.sourcegitcommit: 296183dbe35077b5c5e5e74d5fbe7f399bc507ee
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/05/2018
ms.locfileid: "50982844"
---
# <a name="activity-tracing-in-message-security"></a><span data-ttu-id="e01a3-102">Śledzenie działania w ramach zabezpieczeń komunikatów</span><span class="sxs-lookup"><span data-stu-id="e01a3-102">Activity Tracing in Message Security</span></span>
<span data-ttu-id="e01a3-103">W tym temacie opisano śledzenie aktywności dla przetwarzania zabezpieczeń, co się stanie w następujące trzy etapy.</span><span class="sxs-lookup"><span data-stu-id="e01a3-103">This topic describes activity tracing for security processing, which happens in the following three phases.</span></span>  
  
-   <span data-ttu-id="e01a3-104">Negocjowanie/SCT programu exchange.</span><span class="sxs-lookup"><span data-stu-id="e01a3-104">Negotiation/SCT exchange.</span></span> <span data-ttu-id="e01a3-105">Może to nastąpić transportu (przez dane binarne exchange) lub warstwy komunikat (za pośrednictwem wymiany komunikatów protokołu SOAP).</span><span class="sxs-lookup"><span data-stu-id="e01a3-105">This can happen at the transport later (through binary data exchange) or message layer (through SOAP message exchanges).</span></span>  
  
-   <span data-ttu-id="e01a3-106">Komunikat operacji szyfrowania i odszyfrowywania, za pomocą uwierzytelniania i weryfikacji podpisu.</span><span class="sxs-lookup"><span data-stu-id="e01a3-106">Message encryption/decryption, with signature verification and authentication.</span></span> <span data-ttu-id="e01a3-107">Ślady są wyświetlane w działaniu, otoczenia, zazwyczaj "Action procesu".</span><span class="sxs-lookup"><span data-stu-id="e01a3-107">Traces appear in the ambient activity, typically "Process Action."</span></span>  
  
-   <span data-ttu-id="e01a3-108">Autoryzacja i weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="e01a3-108">Authorization and verification.</span></span> <span data-ttu-id="e01a3-109">Można to zrobić, lokalnie lub gdy komunikacja między punktami końcowymi.</span><span class="sxs-lookup"><span data-stu-id="e01a3-109">This can happen locally or when communicating between endpoints.</span></span>  
  
## <a name="negotiationsct-exchange"></a><span data-ttu-id="e01a3-110">Negocjowanie/SCT programu exchange</span><span class="sxs-lookup"><span data-stu-id="e01a3-110">Negotiation/SCT exchange</span></span>  
 <span data-ttu-id="e01a3-111">W fazie exchange negocjowania/SCT dwa typy działań są tworzone na komputerze klienckim: "Ustaw się zabezpieczyć sesja" i "Zamknij bezpiecznej sesji."</span><span class="sxs-lookup"><span data-stu-id="e01a3-111">In the negotiation/SCT exchange phase, two activity types are created on the client: "Set up Secure Session" and "Close Secure Session."</span></span> <span data-ttu-id="e01a3-112">"Konfigurowanie Secure sesji" obejmuje śladów RST/RSTR/SCT wymianę komunikatów, gdy "Zamknij sesję Secure" zawiera dane śledzenia dla komunikatu Anuluj.</span><span class="sxs-lookup"><span data-stu-id="e01a3-112">"Set up Secure Session" encompasses traces for the RST/RSTR/SCT message exchanges, while "Close Secure Session" includes traces for the Cancel message.</span></span>  
  
 <span data-ttu-id="e01a3-113">Na serwerze każdego żądanie/nietypizowana odpowiedź dla RST/RSTR/SCT pojawia się w swoje własne działania.</span><span class="sxs-lookup"><span data-stu-id="e01a3-113">On the server, each request/reply for the RST/RSTR/SCT appears in its own activity.</span></span> <span data-ttu-id="e01a3-114">Jeśli `propagateActivity` = `true` na serwer i klienta, mają taki sam identyfikator działania na serwerze i pojawiają się razem w "Ustawienia zabezpieczenia sesji" podczas wyświetlania za pośrednictwem przeglądarki danych śledzenia usługi.</span><span class="sxs-lookup"><span data-stu-id="e01a3-114">If `propagateActivity`=`true` on both the server and client, activities on the server have the same ID, and appear together in the "Setup Secure Session" when viewed through Service Trace Viewer.</span></span>  
  
 <span data-ttu-id="e01a3-115">Ten model śledzenia działania jest prawidłowy dla użytkownika nazwy i hasła, uwierzytelnianie oparte na certyfikatach oraz uwierzytelnianie NTLM.</span><span class="sxs-lookup"><span data-stu-id="e01a3-115">This activity tracing model is valid for user name/password authentication, certificate authentication, and NTLM authentication.</span></span>  
  
 <span data-ttu-id="e01a3-116">W poniższej tabeli wymieniono działania i ślady negocjacje i SCT programu exchange.</span><span class="sxs-lookup"><span data-stu-id="e01a3-116">The following table lists the activities and traces for negotiation and SCT exchange.</span></span>  
  
||<span data-ttu-id="e01a3-117">Czas, kiedy się stanie, negocjowania/SCT programu exchange</span><span class="sxs-lookup"><span data-stu-id="e01a3-117">Time when Negotiation/SCT exchange happens</span></span>|<span data-ttu-id="e01a3-118">Kategoria Activities</span><span class="sxs-lookup"><span data-stu-id="e01a3-118">Activities</span></span>|<span data-ttu-id="e01a3-119">ślady</span><span class="sxs-lookup"><span data-stu-id="e01a3-119">Traces</span></span>|  
|-|-------------------------------------------------|----------------|------------|  
|<span data-ttu-id="e01a3-120">Zabezpieczenia transportu</span><span class="sxs-lookup"><span data-stu-id="e01a3-120">Secure Transport</span></span><br /><br /> <span data-ttu-id="e01a3-121">(HTTPS, SSL)</span><span class="sxs-lookup"><span data-stu-id="e01a3-121">(HTTPS, SSL)</span></span>|<span data-ttu-id="e01a3-122">Na pierwszy komunikat odebrany.</span><span class="sxs-lookup"><span data-stu-id="e01a3-122">On first message received.</span></span>|<span data-ttu-id="e01a3-123">Ślady są emitowane w działaniu otoczenia.</span><span class="sxs-lookup"><span data-stu-id="e01a3-123">Traces are emitted in the ambient activity.</span></span>|<span data-ttu-id="e01a3-124">-Ślady Exchange</span><span class="sxs-lookup"><span data-stu-id="e01a3-124">-   Exchange traces</span></span><br /><span data-ttu-id="e01a3-125">-Należy zabezpieczyć kanał nawiązane</span><span class="sxs-lookup"><span data-stu-id="e01a3-125">-   Secure channel established</span></span><br /><span data-ttu-id="e01a3-126">-Udostępnić klucze tajne uzyskany.</span><span class="sxs-lookup"><span data-stu-id="e01a3-126">-   Share secrets obtained.</span></span>|  
|<span data-ttu-id="e01a3-127">Warstwa zabezpieczoną wiadomość</span><span class="sxs-lookup"><span data-stu-id="e01a3-127">Secure Message Layer</span></span><br /><br /> <span data-ttu-id="e01a3-128">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="e01a3-128">(WSHTTP)</span></span>|<span data-ttu-id="e01a3-129">Na pierwszy komunikat odebrany.</span><span class="sxs-lookup"><span data-stu-id="e01a3-129">On first message received.</span></span>|<span data-ttu-id="e01a3-130">Na komputerze klienckim:</span><span class="sxs-lookup"><span data-stu-id="e01a3-130">On the client:</span></span><br /><br /> <span data-ttu-id="e01a3-131">-"Instalatora bezpiecznej sesji" poza "Action procesu" ten pierwszy komunikat dla każdego żądanie/nietypizowana odpowiedź dla RST/RSTR/SCT.</span><span class="sxs-lookup"><span data-stu-id="e01a3-131">-   "Setup Secure Session" out of "Process Action" of that first message, for each request/reply for RST/RSTR/SCT.</span></span><br /><span data-ttu-id="e01a3-132">-"Bezpiecznej sesji Zamknij" w wymianie ANULOWANIA, poza "działanie Zamknij serwer Proxy".</span><span class="sxs-lookup"><span data-stu-id="e01a3-132">-   "Close Secure Session" for the CANCEL exchange, out of the "Close Proxy activity."</span></span> <span data-ttu-id="e01a3-133">To działanie może się zdarzyć z niektórych innych otoczenia działania, w zależności od tego, po zamknięciu bezpiecznej sesji.</span><span class="sxs-lookup"><span data-stu-id="e01a3-133">This activity may happen out of some other ambient activity, depending on when the secure session is closed.</span></span><br /><br /> <span data-ttu-id="e01a3-134">Na serwerze:</span><span class="sxs-lookup"><span data-stu-id="e01a3-134">On the server:</span></span><br /><br /> <span data-ttu-id="e01a3-135">— Jedno działanie "Proces Action" dla każdego żądanie/nietypizowana odpowiedź dla RST/SCT/anulować na serwerze.</span><span class="sxs-lookup"><span data-stu-id="e01a3-135">-   One "Process Action" activity for each request/reply for RST/SCT/Cancel on the server.</span></span> <span data-ttu-id="e01a3-136">Jeśli `propagateActivity` = `true`RST/RSTR/SCT działań są scalane z "Ustaw się sesja zabezpieczeń" i Anuluj jest scalany z "Zamknij" działanie od klienta.</span><span class="sxs-lookup"><span data-stu-id="e01a3-136">If `propagateActivity`=`true`, RST/RSTR/SCT activities are merged with "Set up Security Session", and Cancel is merged with the "Close" activity from the client.</span></span><br /><br /> <span data-ttu-id="e01a3-137">Istnieją dwa etapy "Ustaw się zabezpieczyć sesji":</span><span class="sxs-lookup"><span data-stu-id="e01a3-137">There are two stages for "Set up Secure Session":</span></span><br /><br /> <span data-ttu-id="e01a3-138">1.  Negocjowanie uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="e01a3-138">1.  Authentication negotiation.</span></span> <span data-ttu-id="e01a3-139">Jest to opcjonalne, jeśli klient ma już prawidłowe poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="e01a3-139">This is optional if the client already has the proper credentials.</span></span> <span data-ttu-id="e01a3-140">Ta faza może odbywać się przez bezpiecznym transportem, albo przez wymianę komunikatów.</span><span class="sxs-lookup"><span data-stu-id="e01a3-140">This phase can be done through secure transport, or through message exchanges.</span></span> <span data-ttu-id="e01a3-141">W tym ostatnim przypadku może się zdarzyć wymiany RST/RSTR 1 lub 2.</span><span class="sxs-lookup"><span data-stu-id="e01a3-141">In the latter case, 1 or 2 RST/RSTR exchanges can happen.</span></span> <span data-ttu-id="e01a3-142">Dla tych wymian dane śledzenia są emitowane w nowe działania żądanie/nietypizowana odpowiedź wcześniej zaprojektowana.</span><span class="sxs-lookup"><span data-stu-id="e01a3-142">For these exchanges, traces are emitted in new request/reply activities as previously designed.</span></span><br /><span data-ttu-id="e01a3-143">2.  Zabezpiecz ustanawiania sesji (SCT), w którym jeden exchange RST/RSTR się stanie, w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="e01a3-143">2.  Secure session establishment (SCT), in which one RST/RSTR exchange happens here.</span></span> <span data-ttu-id="e01a3-144">Ma takie same działania otoczenia, zgodnie z wcześniejszym opisem.</span><span class="sxs-lookup"><span data-stu-id="e01a3-144">This has the same ambient activities as described previously.</span></span>|<span data-ttu-id="e01a3-145">-Ślady Exchange</span><span class="sxs-lookup"><span data-stu-id="e01a3-145">-   Exchange traces</span></span><br /><span data-ttu-id="e01a3-146">-Należy zabezpieczyć kanał nawiązane</span><span class="sxs-lookup"><span data-stu-id="e01a3-146">-   Secure channel established</span></span><br /><span data-ttu-id="e01a3-147">-Udostępnić klucze tajne uzyskany.</span><span class="sxs-lookup"><span data-stu-id="e01a3-147">-   Share secrets obtained.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="e01a3-148">W trybie mieszanym zabezpieczeń negocjacji uwierzytelnianie odbywa się w binarnym wymiany, ale SCT odbywa się w wymianie wiadomości.</span><span class="sxs-lookup"><span data-stu-id="e01a3-148">In mixed security mode, negotiation authentication happens in binary exchanges, but SCT happens in message exchange.</span></span> <span data-ttu-id="e01a3-149">W trybie transportu czystego negocjacji odbywa się tylko w przypadku transportu bez dodatkowych działań.</span><span class="sxs-lookup"><span data-stu-id="e01a3-149">In pure transport mode, negotiation happens only in transport with no additional activities.</span></span>  
  
## <a name="message-encryption-and-decryption"></a><span data-ttu-id="e01a3-150">Komunikat, szyfrowania i odszyfrowywania</span><span class="sxs-lookup"><span data-stu-id="e01a3-150">Message Encryption and Decryption</span></span>  
 <span data-ttu-id="e01a3-151">Poniższa tabela zawiera listę działań i danych śledzenia dla operacji szyfrowania i odszyfrowywania wiadomości, a także uwierzytelniania sygnatury.</span><span class="sxs-lookup"><span data-stu-id="e01a3-151">The following table lists the activities and traces for message encryption/decryption, as well as signature authentication.</span></span>  
  
||<span data-ttu-id="e01a3-152">Zabezpieczenia transportu</span><span class="sxs-lookup"><span data-stu-id="e01a3-152">Secure Transport</span></span><br /><br /> <span data-ttu-id="e01a3-153">(HTTPS, SSL) i zabezpieczanie warstwy wiadomości</span><span class="sxs-lookup"><span data-stu-id="e01a3-153">(HTTPS, SSL) and Secure Message Layer</span></span><br /><br /> <span data-ttu-id="e01a3-154">(WSHTTP)</span><span class="sxs-lookup"><span data-stu-id="e01a3-154">(WSHTTP)</span></span>|  
|-|---------------------------------------------------------------------------------|  
|<span data-ttu-id="e01a3-155">Czas, kiedy również podpisu uwierzytelnianie odbywa się komunikatu szyfrowania i odszyfrowywania</span><span class="sxs-lookup"><span data-stu-id="e01a3-155">Time when message encryption/decryption, as well as signature authentication happens</span></span>|<span data-ttu-id="e01a3-156">Na odebranego komunikatu</span><span class="sxs-lookup"><span data-stu-id="e01a3-156">On message received</span></span>|  
|<span data-ttu-id="e01a3-157">Kategoria Activities</span><span class="sxs-lookup"><span data-stu-id="e01a3-157">Activities</span></span>|<span data-ttu-id="e01a3-158">Ślady są emitowane w działaniu ProcessAction na kliencie i serwerze.</span><span class="sxs-lookup"><span data-stu-id="e01a3-158">Traces are emitted in the ProcessAction activity on the client and server.</span></span>|  
|<span data-ttu-id="e01a3-159">ślady</span><span class="sxs-lookup"><span data-stu-id="e01a3-159">Traces</span></span>|<span data-ttu-id="e01a3-160">-sendSecurityHeader (nadawcy):</span><span class="sxs-lookup"><span data-stu-id="e01a3-160">-   sendSecurityHeader (sender):</span></span><br /><span data-ttu-id="e01a3-161">— Logowanie komunikat</span><span class="sxs-lookup"><span data-stu-id="e01a3-161">-   Sign message</span></span><br /><span data-ttu-id="e01a3-162">-Szyfrowania danych na żądanie</span><span class="sxs-lookup"><span data-stu-id="e01a3-162">-   Encrypt request data</span></span><br /><span data-ttu-id="e01a3-163">-receiveSecurityHeader (odbiorca):</span><span class="sxs-lookup"><span data-stu-id="e01a3-163">-   receiveSecurityHeader (receiver):</span></span><br /><span data-ttu-id="e01a3-164">— Weryfikowanie podpisu</span><span class="sxs-lookup"><span data-stu-id="e01a3-164">-   Verify signature</span></span><br /><span data-ttu-id="e01a3-165">-Odszyfrowywania danych odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="e01a3-165">-   Decrypt response data</span></span><br /><span data-ttu-id="e01a3-166">— Uwierzytelnianie</span><span class="sxs-lookup"><span data-stu-id="e01a3-166">-   Authentication</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="e01a3-167">W trybie transportu czystego szyfrowania i odszyfrowywania wiadomości odbywa się tylko w przypadku transportu bez dodatkowych działań.</span><span class="sxs-lookup"><span data-stu-id="e01a3-167">In pure transport mode, message encryption/decryption happens only in transport with no additional activities.</span></span>  
  
## <a name="authorization-and-verification"></a><span data-ttu-id="e01a3-168">Autoryzacja i weryfikacja</span><span class="sxs-lookup"><span data-stu-id="e01a3-168">Authorization and Verification</span></span>  
 <span data-ttu-id="e01a3-169">W poniższej tabeli wymieniono działania i ślady na potrzeby autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="e01a3-169">The following table lists the activities and traces for authorization.</span></span>  
  
||<span data-ttu-id="e01a3-170">Czas, kiedy się dzieje autoryzacji</span><span class="sxs-lookup"><span data-stu-id="e01a3-170">Time when authorization happens</span></span>|<span data-ttu-id="e01a3-171">Kategoria Activities</span><span class="sxs-lookup"><span data-stu-id="e01a3-171">Activities</span></span>|<span data-ttu-id="e01a3-172">ślady</span><span class="sxs-lookup"><span data-stu-id="e01a3-172">Traces</span></span>|  
|-|-------------------------------------|----------------|------------|  
|<span data-ttu-id="e01a3-173">Lokalne (ustawienie domyślne)</span><span class="sxs-lookup"><span data-stu-id="e01a3-173">Local (default)</span></span>|<span data-ttu-id="e01a3-174">Po wiadomości jest odszyfrowywany na serwerze</span><span class="sxs-lookup"><span data-stu-id="e01a3-174">After the message is decrypted on the server</span></span>|<span data-ttu-id="e01a3-175">Ślady są emitowane w działaniu ProcessAction na serwerze.</span><span class="sxs-lookup"><span data-stu-id="e01a3-175">Traces are emitted in the ProcessAction activity at the server.</span></span>|<span data-ttu-id="e01a3-176">Użytkownik autoryzowany.</span><span class="sxs-lookup"><span data-stu-id="e01a3-176">User authorized.</span></span>|  
|<span data-ttu-id="e01a3-177">Zdalne</span><span class="sxs-lookup"><span data-stu-id="e01a3-177">Remote</span></span>|<span data-ttu-id="e01a3-178">Po wiadomości jest odszyfrowywany na serwerze</span><span class="sxs-lookup"><span data-stu-id="e01a3-178">After the message is decrypted on the server</span></span>|<span data-ttu-id="e01a3-179">Ślady są emitowane w nowe działanie wywoływane przez działanie ProcessAction.</span><span class="sxs-lookup"><span data-stu-id="e01a3-179">Traces are emitted in a new activity invoked by the ProcessAction activity.</span></span>|<span data-ttu-id="e01a3-180">Użytkownik autoryzowany.</span><span class="sxs-lookup"><span data-stu-id="e01a3-180">User authorized.</span></span>|
