---
title: Korzystanie z sesji
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- sessions [WCF]
ms.assetid: 864ba12f-3331-4359-a359-6d6d387f1035
caps.latest.revision: 32
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 172ef71bd3ae09e3c9f15cb0bdb48728a587605e
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/30/2018
---
# <a name="using-sessions"></a><span data-ttu-id="e79ed-102">Korzystanie z sesji</span><span class="sxs-lookup"><span data-stu-id="e79ed-102">Using Sessions</span></span>
<span data-ttu-id="e79ed-103">W [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] aplikacji, *sesji* są powiązane z grupą wiadomości do konwersacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-103">In [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, a *session* correlates a group of messages into a conversation.</span></span> [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="e79ed-104"> sesje są inne niż dostępna w obiekcie sesji [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] aplikacji, obsługuje różne zachowania i są kontrolowane na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="e79ed-104"> sessions are different than the session object available in [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications, support different behaviors, and are controlled in different ways.</span></span> <span data-ttu-id="e79ed-105">W tym temacie opisano funkcje, które sesji umożliwiają w [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplikacji i sposobu ich używania.</span><span class="sxs-lookup"><span data-stu-id="e79ed-105">This topic describes the features that sessions enable in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications and how to use them.</span></span>  
  
## <a name="sessions-in-windows-communication-foundation-applications"></a><span data-ttu-id="e79ed-106">Sesje w aplikacjach programu Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="e79ed-106">Sessions in Windows Communication Foundation Applications</span></span>  
 <span data-ttu-id="e79ed-107">Gdy kontrakt usługi określa, że wymaga ona sesji, umowy jest określenie, że wszystkie wywołania (to znaczy podstawowej wymiany komunikatów obsługujących wywołania) musi być częścią jednej konwersacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-107">When a service contract specifies that it requires a session, that contract is specifying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="e79ed-108">Jeśli kontrakt Określa, że umożliwia sesji, ale nie wymaga jednego, klienci mogą łączyć się i albo ustanowienia sesji lub nie ustanowienia sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-108">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not establish a session.</span></span> <span data-ttu-id="e79ed-109">Jeśli sesja zakończy się oraz komunikat jest wysyłany za pośrednictwem tego samego kanału, który jest zwracany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="e79ed-109">If the session ends and a message is sent through the same channel an exception is thrown.</span></span>  
  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="e79ed-110"> sesje mają następujące funkcje koncepcyjnej główne:</span><span class="sxs-lookup"><span data-stu-id="e79ed-110"> sessions have the following main conceptual features:</span></span>  
  
-   <span data-ttu-id="e79ed-111">Jawnie są inicjowane i został przerwany przez wywołanie aplikacji (klienta WCF).</span><span class="sxs-lookup"><span data-stu-id="e79ed-111">They are explicitly initiated and terminated by the calling application (the WCF client).</span></span>  
  
-   <span data-ttu-id="e79ed-112">Komunikaty dostarczone podczas sesji są przetwarzane w kolejności, w którym są odbierane.</span><span class="sxs-lookup"><span data-stu-id="e79ed-112">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
-   <span data-ttu-id="e79ed-113">Sesje skorelowania grupy wiadomości w konwersacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-113">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="e79ed-114">Możliwe są różnego rodzaju korelacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-114">Different types of correlation are possible.</span></span> <span data-ttu-id="e79ed-115">Na przykład jeden kanał opartymi na sesji mogą mieć związek wiadomości opartych na połączenie sieciowe udostępnionych podczas innego opartymi na sesji kanału może skorelować wiadomości opartych na udostępnionych tagu w treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="e79ed-115">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="e79ed-116">Funkcje, które mogą być uzyskane z sesji są zależne od charakteru korelacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-116">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
-   <span data-ttu-id="e79ed-117">Brak ma skojarzone z magazynu danych ogólnych [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-117">There is no general data store associated with a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] session.</span></span>  
  
 <span data-ttu-id="e79ed-118">Jeśli znasz <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> klasy w [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] aplikacji i funkcji umożliwia, można zauważyć następujące różnice między tego rodzaju sesji i [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] sesji:</span><span class="sxs-lookup"><span data-stu-id="e79ed-118">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] applications and the functionality it provides, you might notice the following differences between that kind of session and [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] sessions:</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="e79ed-119"> sesje są zawsze inicjowanych przez serwer.</span><span class="sxs-lookup"><span data-stu-id="e79ed-119"> sessions are always server-initiated.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="e79ed-120"> sesje są niejawnie nieuporządkowaną.</span><span class="sxs-lookup"><span data-stu-id="e79ed-120"> sessions are implicitly unordered.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]<span data-ttu-id="e79ed-121"> sesje udostępniają mechanizm magazynu danych ogólnych żądań.</span><span class="sxs-lookup"><span data-stu-id="e79ed-121"> sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="e79ed-122">W tym temacie opisano:</span><span class="sxs-lookup"><span data-stu-id="e79ed-122">This topic describes:</span></span>  
  
-   <span data-ttu-id="e79ed-123">Domyślne wykonywania zachowanie przy użyciu powiązań opartymi na sesji w warstwy modelu usług.</span><span class="sxs-lookup"><span data-stu-id="e79ed-123">The default execution behavior when using session-based bindings in the service model layer.</span></span>  
  
-   <span data-ttu-id="e79ed-124">Typy funkcji [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] Podaj powiązania opartymi na sesji, dostarczane przez system.</span><span class="sxs-lookup"><span data-stu-id="e79ed-124">The types of features that the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] session-based, system-provided bindings provide.</span></span>  
  
-   <span data-ttu-id="e79ed-125">Jak utworzyć kontrakt, który deklaruje wymóg sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-125">How to create a contract that declares a session requirement.</span></span>  
  
-   <span data-ttu-id="e79ed-126">Jak zrozumieć i kontrolować tworzenia i zakończenia sesji i ich relacji z sesji do wystąpienia usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-126">How to understand and control the creation and termination of the session and the relationship of the session to the service instance.</span></span>  
  
## <a name="default-execution-behavior-using-sessions"></a><span data-ttu-id="e79ed-127">Domyślne wykonywania zachowanie przy użyciu sesji</span><span class="sxs-lookup"><span data-stu-id="e79ed-127">Default Execution Behavior Using Sessions</span></span>  
 <span data-ttu-id="e79ed-128">Nosi nazwę powiązania, które próbuje zainicjować sesję *opartymi na sesji* powiązania.</span><span class="sxs-lookup"><span data-stu-id="e79ed-128">A binding that attempts to initiate a session is called a *session-based* binding.</span></span> <span data-ttu-id="e79ed-129">Kontrakty usług określić, że ich wymagają, zezwolić lub odmówić powiązania opartymi na sesji przez ustawienie <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> właściwości interfejsu kontraktu usługi (lub klasy) do jednego z <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> wartości wyliczenia.</span><span class="sxs-lookup"><span data-stu-id="e79ed-129">Service contracts specify that they require, permit, or refuse session-based bindings by setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on the service contract interface (or class) to one of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration values.</span></span> <span data-ttu-id="e79ed-130">Domyślna wartość tej właściwości to <xref:System.ServiceModel.SessionMode.Allowed>, co oznacza, że jeśli klient używa powiązania opartymi na sesji z [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] implementacji usługi Usługa ustanawia i używa sesji podane.</span><span class="sxs-lookup"><span data-stu-id="e79ed-130">By default, the value of this property is <xref:System.ServiceModel.SessionMode.Allowed>, which means that if a client uses a session-based binding with a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service implementation, the service establishes and uses the session provided.</span></span>  
  
 <span data-ttu-id="e79ed-131">Gdy [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] usługa akceptuje sesji klienta, są domyślnie włączone następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="e79ed-131">When a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service accepts a client session, the following features are enabled by default:</span></span>  
  
1.  <span data-ttu-id="e79ed-132">Wszystkie wywołania między [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta są obsługiwane przez tego samego wystąpienia usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-132">All calls between a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object are handled by the same service instance.</span></span>  
  
2.  <span data-ttu-id="e79ed-133">Różne powiązania opartymi na sesji oferują dodatkowe funkcje.</span><span class="sxs-lookup"><span data-stu-id="e79ed-133">Different session-based bindings provide additional features.</span></span>  
  
## <a name="system-provided-session-types"></a><span data-ttu-id="e79ed-134">Typy sesji dostarczane przez system</span><span class="sxs-lookup"><span data-stu-id="e79ed-134">System-Provided Session Types</span></span>  
 <span data-ttu-id="e79ed-135">Powiązanie opartymi na sesji obsługuje domyślne skojarzenie wystąpienia usługi z określoną sesją.</span><span class="sxs-lookup"><span data-stu-id="e79ed-135">A session-based binding supports the default association of a service instance with a particular session.</span></span> <span data-ttu-id="e79ed-136">Jednak różnych powiązania opartymi na sesji obsługuje różne funkcje oprócz włączenia opartymi na sesji sterowania wystąpień opisany wcześniej.</span><span class="sxs-lookup"><span data-stu-id="e79ed-136">However, different session-based bindings support different features in addition to enabling the session-based instancing control previously described.</span></span>  
  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="e79ed-137"> udostępnia następujące rodzaje zachowanie aplikacji opartych na sesji:</span><span class="sxs-lookup"><span data-stu-id="e79ed-137"> provides the following types of session-based application behavior:</span></span>  
  
-   <span data-ttu-id="e79ed-138"><xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> Obsługuje sesji na podstawie zabezpieczeń, w których oba końce elementu komunikacji przyjmują określonej bezpiecznej konwersacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-138">The <xref:System.ServiceModel.Channels.SecurityBindingElement?displayProperty=nameWithType> supports security-based sessions, in which both ends of communication have agreed upon a specific secure conversation.</span></span> <span data-ttu-id="e79ed-139">Aby uzyskać więcej informacji, zobacz [zabezpieczania usług](../../../docs/framework/wcf/securing-services.md).</span><span class="sxs-lookup"><span data-stu-id="e79ed-139">For more information, see [Securing Services](../../../docs/framework/wcf/securing-services.md).</span></span> <span data-ttu-id="e79ed-140">Na przykład <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> powiązanie, który zawiera pomocy technicznej dla sesji zabezpieczeń i sesje niezawodne, domyślnie używa tylko bezpiecznej sesji i podpisaniu wiadomości.</span><span class="sxs-lookup"><span data-stu-id="e79ed-140">For example, the <xref:System.ServiceModel.WSHttpBinding?displayProperty=nameWithType> binding, which contains support for both security sessions and reliable sessions, by default uses only a secure session that encrypts and digitally signs messages.</span></span>  
  
-   <span data-ttu-id="e79ed-141"><xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> Powiązanie obsługuje opartych na protokole TCP/IP sesji, aby upewnić się, skorelowanych wszystkie komunikaty dla tego połączenia na poziomie gniazda.</span><span class="sxs-lookup"><span data-stu-id="e79ed-141">The <xref:System.ServiceModel.NetTcpBinding?displayProperty=nameWithType> binding supports TCP/IP-based sessions to ensure that all messages are correlated by the connection at the socket level.</span></span>  
  
-   <span data-ttu-id="e79ed-142"><xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> Element, który implementuje specyfikacji WS-ReliableMessaging, zapewnia obsługę niezawodne sesje, w których można skonfigurować komunikaty mają być dostarczone w kolejności i dokładnie, po sprawdzeniu, nawet wtedy, gdy są przesyłane komunikaty są odbierane wiadomości w wielu węzłach podczas konwersacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-142">The <xref:System.ServiceModel.Channels.ReliableSessionBindingElement?displayProperty=nameWithType> element, which implements the WS-ReliableMessaging specification, provides support for reliable sessions in which messages can be configured to be delivered in order and exactly once, ensuring messages are received even when messages travel across multiple nodes during the conversation.</span></span> <span data-ttu-id="e79ed-143">Aby uzyskać więcej informacji, zobacz [sesji niezawodnej](../../../docs/framework/wcf/feature-details/reliable-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="e79ed-143">For more information, see [Reliable Sessions](../../../docs/framework/wcf/feature-details/reliable-sessions.md).</span></span>  
  
-   <span data-ttu-id="e79ed-144"><xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> Powiązanie obsługuje sesje datagramu MSMQ.</span><span class="sxs-lookup"><span data-stu-id="e79ed-144">The <xref:System.ServiceModel.NetMsmqBinding?displayProperty=nameWithType> binding provides MSMQ datagram sessions.</span></span> <span data-ttu-id="e79ed-145">Aby uzyskać więcej informacji, zobacz [kolejki programu WCF](../../../docs/framework/wcf/feature-details/queues-in-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="e79ed-145">For more information, see [Queues in WCF](../../../docs/framework/wcf/feature-details/queues-in-wcf.md).</span></span>  
  
 <span data-ttu-id="e79ed-146">Ustawienie <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> właściwość nie określa typ sesji kontrakt wymaga, tylko że wymaga jednego.</span><span class="sxs-lookup"><span data-stu-id="e79ed-146">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not specify the type of session the contract requires, only that it requires one.</span></span>  
  
## <a name="creating-a-contract-that-requires-a-session"></a><span data-ttu-id="e79ed-147">Tworzenie kontraktu wymagającego sesji</span><span class="sxs-lookup"><span data-stu-id="e79ed-147">Creating a Contract That Requires a Session</span></span>  
 <span data-ttu-id="e79ed-148">Tworzenie kontraktu, który wymaga sesji stwierdza, że grupy działań, które deklaruje kontraktu usługi musi wszystkie można wykonać w obrębie tej samej sesji i że wiadomości musi być dostarczane w kolejności.</span><span class="sxs-lookup"><span data-stu-id="e79ed-148">Creating a contract that requires a session states that the group of operations that the service contract declares must all be executed within the same session and that messages must be delivered in order.</span></span> <span data-ttu-id="e79ed-149">Do potwierdzenia poziom obsługi sesji, która wymaga kontraktu usługi, należy ustawić <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> właściwości interfejsu kontraktu usługi lub klasy do wartości <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> wyliczeniu, aby określić, czy kontrakt:</span><span class="sxs-lookup"><span data-stu-id="e79ed-149">To assert the level of session support that a service contract requires, set the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property on your service contract interface or class to the value of the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> enumeration to specify whether the contract:</span></span>  
  
-   <span data-ttu-id="e79ed-150">Wymaga sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-150">Requires a session.</span></span>  
  
-   <span data-ttu-id="e79ed-151">Umożliwia klientowi ustanowienia sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-151">Allows a client to establish a session.</span></span>  
  
-   <span data-ttu-id="e79ed-152">Zabrania używania sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-152">Prohibits a session.</span></span>  
  
 <span data-ttu-id="e79ed-153">Ustawienie <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> właściwości, jednak określić typ zachowania opartymi na sesji kontrakt wymaga.</span><span class="sxs-lookup"><span data-stu-id="e79ed-153">Setting the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A> property does not, however, specify the type of session-based behavior the contract requires.</span></span> <span data-ttu-id="e79ed-154">Informuje [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] o potwierdzenie w czasie wykonywania który skonfigurowane powiązanie (tworzącej kanał komunikacyjny) usługa, nie obsługuje lub można ustanowić sesji podczas wdrażania usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-154">It instructs [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] to confirm at runtime that the configured binding (which creates the communication channel) for the service does, does not, or can establish a session when implementing a service.</span></span> <span data-ttu-id="e79ed-155">Ponownie, powiązania spełnia tego wymagania w przypadku każdego typu opartymi na sesji zachowanie wybiera — zabezpieczeń, transport, niezawodnych lub kombinację.</span><span class="sxs-lookup"><span data-stu-id="e79ed-155">Again, the binding can satisfy that requirement with any type of session-based behavior it chooses—security, transport, reliable, or some combination.</span></span> <span data-ttu-id="e79ed-156">Dokładne zachowanie zależy od <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> wybranej wartości.</span><span class="sxs-lookup"><span data-stu-id="e79ed-156">The exact behavior depends on the <xref:System.ServiceModel.SessionMode?displayProperty=nameWithType> value selected.</span></span> <span data-ttu-id="e79ed-157">Jeśli skonfigurowanego powiązania usługi nie jest zgodny z wartością <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>, jest zgłaszany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="e79ed-157">If the configured binding of the service does not conform to the value of <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A>, an exception is thrown.</span></span> <span data-ttu-id="e79ed-158">Powiązania i kanały tworzenia czy sesji pomocy technicznej są określane jako opartymi na sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-158">Bindings and the channels they create that support sessions are said to be session-based.</span></span>  
  
 <span data-ttu-id="e79ed-159">Następujące kontrakt usługi określa, że wszystkie operacje w `ICalculatorSession` muszą być wymieniane w ramach sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-159">The following service contract specifies that all operations in the `ICalculatorSession` must be exchanged within a session.</span></span> <span data-ttu-id="e79ed-160">Żadna z operacji zwraca wartość do wywołującego, z wyjątkiem `Equals` metody.</span><span class="sxs-lookup"><span data-stu-id="e79ed-160">None of the operations returns a value to the caller except the `Equals` method.</span></span> <span data-ttu-id="e79ed-161">Jednak `Equals` — metoda nie przyjmuje żadnych parametrów i, w związku z tym może zwracać tylko wartości niezerowej, wewnątrz sesji, w którym dane już został przekazany do innych operacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-161">However, the `Equals` method takes no parameters and, therefore, can only return a non-zero value inside a session in which data has already been passed to the other operations.</span></span> <span data-ttu-id="e79ed-162">Ten kontrakt wymaga elementu session działać prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="e79ed-162">This contract requires a session to function properly.</span></span> <span data-ttu-id="e79ed-163">Bez sesji skojarzonego z określonym kliencie wystąpienie usługi nie ma możliwości otrzymuje żadnej informacji o poprzedniej danych wysłał tego klienta.</span><span class="sxs-lookup"><span data-stu-id="e79ed-163">Without a session associated with a specific client, the service instance has no way of knowing what previous data this client has sent.</span></span>  
  
 [!code-csharp[S_Service_Session#1](../../../samples/snippets/csharp/VS_Snippets_CFX/s_service_session/cs/service.cs#1)]
 [!code-vb[S_Service_Session#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/s_service_session/vb/service.vb#1)]  
  
 <span data-ttu-id="e79ed-164">Jeśli usługa umożliwia sesji, następnie sesji jest ustanowić i używane, jeśli klient jest inicjowany w przeciwnym razie nie ustanowiono.</span><span class="sxs-lookup"><span data-stu-id="e79ed-164">If a service allows a session, then a session is established and used if the client initiates one; otherwise, no session is established.</span></span>  
  
## <a name="sessions-and-service-instances"></a><span data-ttu-id="e79ed-165">Sesje i wystąpień usługi</span><span class="sxs-lookup"><span data-stu-id="e79ed-165">Sessions and Service Instances</span></span>  
 <span data-ttu-id="e79ed-166">Jeśli użytkownik korzysta z domyślnych wystąpień zachowanie w [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], wszystkie wywołania między [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta są obsługiwane przez tego samego wystąpienia usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-166">If you use the default instancing behavior in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], all calls between a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object are handled by the same service instance.</span></span> <span data-ttu-id="e79ed-167">W związku z tym na poziomie aplikacji, można traktować sesji jako włączenie zachowanie aplikacji podobne do zachowania połączenia lokalnego.</span><span class="sxs-lookup"><span data-stu-id="e79ed-167">Therefore, at the application level, you can think of a session as enabling application behavior similar to local call behavior.</span></span> <span data-ttu-id="e79ed-168">Na przykład podczas tworzenia obiektu lokalnego:</span><span class="sxs-lookup"><span data-stu-id="e79ed-168">For example, when you create a local object:</span></span>  
  
-   <span data-ttu-id="e79ed-169">Konstruktor jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="e79ed-169">A constructor is called.</span></span>  
  
-   <span data-ttu-id="e79ed-170">Wszystkie kolejne wywołania [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] odwołanie do obiektu klienta są przetwarzane przez to samo wystąpienie obiektu.</span><span class="sxs-lookup"><span data-stu-id="e79ed-170">All subsequent calls made to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object reference are processed by the same object instance.</span></span>  
  
-   <span data-ttu-id="e79ed-171">Destruktora jest wywoływane, gdy odwołanie do obiektu zostanie zniszczony.</span><span class="sxs-lookup"><span data-stu-id="e79ed-171">A destructor is called when the object reference is destroyed.</span></span>  
  
 <span data-ttu-id="e79ed-172">Sesje Włącz podobne zachowanie między klientami i usługami tak długo, jak jest używane domyślne zachowanie wystąpienia usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-172">Sessions enable a similar behavior between clients and services as long as the default service instance behavior is used.</span></span> <span data-ttu-id="e79ed-173">Jeśli kontrakt usługi wymaga lub obsługuje sesji, co najmniej jeden kontrakt operacji może być oznaczony jako inicjowanie lub zakończenia sesji przez ustawienie <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> i <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="e79ed-173">If a service contract requires or supports sessions, one or more contract operations can be marked as initiating or terminating a session by setting the <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A> and <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A> properties.</span></span>  
  
 <span data-ttu-id="e79ed-174">*Inicjowanie operacji* to takie, które musi zostać wywołana jako pierwszą operacją nowej sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-174">*Initiating operations* are those that must be called as the first operation of a new session.</span></span> <span data-ttu-id="e79ed-175">Operacje inicjowania nie można wywołać tylko wtedy, gdy co najmniej jedną operację inicjujący została wywołana.</span><span class="sxs-lookup"><span data-stu-id="e79ed-175">Non-initiating operations can be called only after at least one initiating operation has been called.</span></span> <span data-ttu-id="e79ed-176">W związku z tym można utworzyć typu konstruktora sesji usługi przez zadeklarowanie inicjujący działania mające na celu pobrać dane wejściowe z klientów odpowiednie na początku wystąpienia usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-176">You can therefore create a kind of session constructor for your service by declaring initiating operations designed to take input from clients appropriate to the beginning of the service instance.</span></span> <span data-ttu-id="e79ed-177">(Stan jest skojarzony z sesji i nie obiekt usługi).</span><span class="sxs-lookup"><span data-stu-id="e79ed-177">(The state is associated with the session, however, and not the service object.)</span></span>  
  
 <span data-ttu-id="e79ed-178">*Kończenie operacji*, natomiast to takie, które musi zostać wywołana jako ostatnią wiadomością w istniejącej sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-178">*Terminating operations*, conversely, are those that must be called as the last message in an existing session.</span></span> <span data-ttu-id="e79ed-179">W przypadku domyślnej [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] po zamknięciu sesji, z którym usługa została powiązana jest odtwarzana obiekt usługi i jego kontekstu.</span><span class="sxs-lookup"><span data-stu-id="e79ed-179">In the default case, [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] recycles the service object and its context after the session with which the service was associated is closed.</span></span> <span data-ttu-id="e79ed-180">W związku z tym można utworzyć rodzaj destruktora przez zadeklarowanie przerywania działania mające na celu wykonywania funkcji odpowiednie do końca wystąpienia usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-180">You can, therefore, create a kind of destructor by declaring terminating operations designed to perform a function appropriate to the end of the service instance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e79ed-181">Domyślne zachowanie nosi podobieństwa do lokalnego konstruktory i destruktory, ale jest tylko wynik.</span><span class="sxs-lookup"><span data-stu-id="e79ed-181">Although the default behavior bears a resemblance to local constructors and destructors, it is only a resemblance.</span></span> <span data-ttu-id="e79ed-182">Wszelkie [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] Operacja usługi może być inicjowanie zakończenia operacji i/lub w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="e79ed-182">Any [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service operation can be an initiating or terminating operation, or both at the same time.</span></span> <span data-ttu-id="e79ed-183">Ponadto w przypadku domyślne Inicjowanie operacji można wywołać dowolną liczbę razy w dowolnej kolejności. nie dodatkowych sesji są tworzone po ustanowić sesję i skojarzone z wystąpieniem, chyba że jawnie zarządzają okresem istnienia wystąpienia usługi (przez manipulowanie <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> obiektu).</span><span class="sxs-lookup"><span data-stu-id="e79ed-183">In addition, in the default case, initiating operations can be called any number of times in any order; no additional sessions are created once the session is established and associated with an instance unless you explicitly control the lifetime of the service instance (by manipulating the <xref:System.ServiceModel.InstanceContext?displayProperty=nameWithType> object).</span></span> <span data-ttu-id="e79ed-184">Na koniec stan jest skojarzony z sesji, a nie obiektu usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-184">Finally, the state is associated with the session and not the service object.</span></span>  
  
 <span data-ttu-id="e79ed-185">Na przykład `ICalculatorSession` kontraktu użyty w poprzednim przykładzie wymaga, aby [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] pierwsze wywołanie obiektu klienta `Clear` operacji przed innej operacji i że sesji z tym [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] powinien obiektu klienta Kiedy wywołuje `Equals` operacji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-185">For example, the `ICalculatorSession` contract used in the preceding example requires that the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object first call the `Clear` operation prior to any other operation and that the session with this [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object should terminate when it calls the `Equals` operation.</span></span> <span data-ttu-id="e79ed-186">Poniższy przykład kodu pokazuje kontraktu, która wymusza te wymagania.</span><span class="sxs-lookup"><span data-stu-id="e79ed-186">The following code example shows a contract that enforces these requirements.</span></span> <span data-ttu-id="e79ed-187">`Clear` Najpierw należy wywołać do zainicjowania sesji, i że kończenia sesji, gdy `Equals` jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="e79ed-187">`Clear` must be called first to initiate a session, and that session ends when `Equals` is called.</span></span>  
  
 [!code-csharp[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/csharp/VS_Snippets_CFX/sca.isinitiatingisterminating/cs/service.cs#1)]
 [!code-vb[SCA.IsInitiatingIsTerminating#1](../../../samples/snippets/visualbasic/VS_Snippets_CFX/sca.isinitiatingisterminating/vb/service.vb#1)]  
  
 <span data-ttu-id="e79ed-188">Usługi nie są uruchamiane sesje z klientami.</span><span class="sxs-lookup"><span data-stu-id="e79ed-188">Services do not start sessions with clients.</span></span> <span data-ttu-id="e79ed-189">W [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplikacje klienckie bezpośrednie relację między okres istnienia kanału opartymi na sesji i okresem istnienia sesji sam.</span><span class="sxs-lookup"><span data-stu-id="e79ed-189">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client applications, a direct relationship exists between the lifetime of the session-based channel and the lifetime of the session itself.</span></span> <span data-ttu-id="e79ed-190">Tak klienci tworzenia nowej sesji przez utworzenie nowych kanałów opartymi na sesji i zniszcz istniejące sesje, zamykając bezpiecznie kanały opartymi na sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-190">As such, clients create new sessions by creating new session-based channels and tear down existing sessions by closing session-based channels gracefully.</span></span> <span data-ttu-id="e79ed-191">Klient uruchamia sesję z punktem końcowym usługi wywołując jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="e79ed-191">A client starts a session with a service endpoint by calling one of the following:</span></span>  
  
-   <span data-ttu-id="e79ed-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> w kanale zwrócony przez wywołanie do <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e79ed-192"><xref:System.ServiceModel.ICommunicationObject.Open%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="e79ed-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType> na [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] generowanych przez obiekt klient [narzędzie narzędzia metadanych elementu ServiceModel (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="e79ed-193"><xref:System.ServiceModel.ClientBase%601.Open%2A?displayProperty=nameWithType> on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span>  
  
-   <span data-ttu-id="e79ed-194">Operacja inicjujący w obu typów [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta (domyślnie wszystkie operacje są Inicjowanie).</span><span class="sxs-lookup"><span data-stu-id="e79ed-194">An initiating operation on either type of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object (by default, all operations are initiating).</span></span> <span data-ttu-id="e79ed-195">Po pierwszej operacji [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta automatycznie otwiera kanału i inicjuje sesję.</span><span class="sxs-lookup"><span data-stu-id="e79ed-195">When the first operation is called, the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="e79ed-196">Zazwyczaj klient kończy sesję przy użyciu punktu końcowego usługi wywołując jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="e79ed-196">Typically a client ends a session with a service endpoint by calling one of the following:</span></span>  
  
-   <span data-ttu-id="e79ed-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> w kanale zwrócony przez wywołanie do <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e79ed-197"><xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> on the channel returned by a call to <xref:System.ServiceModel.ChannelFactory%601.CreateChannel%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="e79ed-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> na [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] generowane przez Svcutil.exe obiektu klienta.</span><span class="sxs-lookup"><span data-stu-id="e79ed-198"><xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType> on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object generated by Svcutil.exe.</span></span>  
  
-   <span data-ttu-id="e79ed-199">Trwa przerywanie działania operacji na obu typów [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta (domyślnie żadne operacje nie są przerywanie; kontrakt musi zawierać jawnie zakończenia operacji).</span><span class="sxs-lookup"><span data-stu-id="e79ed-199">A terminating operation on either type of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object (by default, no operations are terminating; the contract must explicitly specify a terminating operation).</span></span> <span data-ttu-id="e79ed-200">Po pierwszej operacji [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta automatycznie otwiera kanału i inicjuje sesję.</span><span class="sxs-lookup"><span data-stu-id="e79ed-200">When the first operation is called, the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object automatically opens the channel and initiates a session.</span></span>  
  
 <span data-ttu-id="e79ed-201">Przykłady można znaleźć [porady: Tworzenie usługi czy wymaga sesji](../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md) , jak również [domyślne zachowanie usługi](../../../docs/framework/wcf/samples/default-service-behavior.md) i [Instancing](../../../docs/framework/wcf/samples/instancing.md) próbek.</span><span class="sxs-lookup"><span data-stu-id="e79ed-201">For examples, see [How to: Create a Service That Requires Sessions](../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md) as well as the [Default Service Behavior](../../../docs/framework/wcf/samples/default-service-behavior.md) and [Instancing](../../../docs/framework/wcf/samples/instancing.md) samples.</span></span>  
  
 <span data-ttu-id="e79ed-202">Aby uzyskać więcej informacji dotyczących klientów i sesji, zobacz [dostęp do usług za pomocą klienta WCF](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md).</span><span class="sxs-lookup"><span data-stu-id="e79ed-202">For more information about clients and sessions, see [Accessing Services Using a WCF Client](../../../docs/framework/wcf/feature-details/accessing-services-using-a-client.md).</span></span>  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="e79ed-203">Sesje interakcję z ustawieniami InstanceContext</span><span class="sxs-lookup"><span data-stu-id="e79ed-203">Sessions Interact with InstanceContext Settings</span></span>  
 <span data-ttu-id="e79ed-204">Brak interakcji między <xref:System.ServiceModel.SessionMode> wyliczenia w umowie i <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> właściwość, która określa skojarzenie między kanałów i obiektów określonej usługi.</span><span class="sxs-lookup"><span data-stu-id="e79ed-204">There is an interaction between the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property, which controls the association between channels and specific service objects.</span></span> <span data-ttu-id="e79ed-205">Aby uzyskać więcej informacji, zobacz [sesji, Instancing i współbieżność](../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="e79ed-205">For more information, see [Sessions, Instancing, and Concurrency](../../../docs/framework/wcf/feature-details/sessions-instancing-and-concurrency.md).</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="e79ed-206">Udostępnianie obiektów InstanceContext</span><span class="sxs-lookup"><span data-stu-id="e79ed-206">Sharing InstanceContext Objects</span></span>  
 <span data-ttu-id="e79ed-207">Można również sterować kanał opartymi na sesji lub połączenia jest skojarzony z którym <xref:System.ServiceModel.InstanceContext> obiektu przez siebie wykonanie tego skojarzenia.</span><span class="sxs-lookup"><span data-stu-id="e79ed-207">You can also control which session-based channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span> <span data-ttu-id="e79ed-208">Pełny przykład, zobacz [InstanceContextSharing](http://msdn.microsoft.com/library/4a6a46d7-b7d7-4bb5-a0dd-03ffa3cbc230).</span><span class="sxs-lookup"><span data-stu-id="e79ed-208">For a complete example, see [InstanceContextSharing](http://msdn.microsoft.com/library/4a6a46d7-b7d7-4bb5-a0dd-03ffa3cbc230).</span></span>  
  
## <a name="sessions-and-streaming"></a><span data-ttu-id="e79ed-209">Sesje i przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="e79ed-209">Sessions and Streaming</span></span>  
 <span data-ttu-id="e79ed-210">Jeśli masz dużą ilość danych do przesłania tryb strumieniowy transfer w [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] jest możliwe alternatywą do domyślne zachowanie buforowania i przetwarzanie komunikatów w pamięci w całości.</span><span class="sxs-lookup"><span data-stu-id="e79ed-210">When you have a large amount of data to transfer, the streaming transfer mode in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] is a feasible alternative to the default behavior of buffering and processing messages in memory in their entirety.</span></span> <span data-ttu-id="e79ed-211">Mogą wystąpić nieoczekiwane zachowanie podczas przesyłania strumieniowego wywołania z powiązaniem opartymi na sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-211">You may get unexpected behavior when streaming calls with a session-based binding.</span></span> <span data-ttu-id="e79ed-212">Wszystkie wywołania przesyłania strumieniowego są nawiązywane przy użyciu jednego kanału (kanale datagramowym), który nie obsługuje sesji, nawet jeśli powiązania, używany jest skonfigurowana do używania sesji.</span><span class="sxs-lookup"><span data-stu-id="e79ed-212">All streaming calls are made through a single channel (the datagram channel) that does not support sessions even if the binding being used is configured to use sessions.</span></span> <span data-ttu-id="e79ed-213">Jeśli wielu klientów wywołań przesyłania strumieniowego do tego samego obiektu usługi za pośrednictwem powiązania opartymi na sesji i tryb współbieżności obiekt usługi jest ustawiony na jednym i jej wystąpienia kontekstu tryb ustawiono `PerSession`, wywołania musi przechodzić przez kanał datagram i dlatego tylko jedno wywołanie są przetwarzane pojedynczo.</span><span class="sxs-lookup"><span data-stu-id="e79ed-213">If multiple clients make streaming calls to the same service object over a session-based binding, and the service object's concurrency mode is set to single and its instance context mode is set to `PerSession`, all calls must go through the datagram channel and so only one call is processed at a time.</span></span> <span data-ttu-id="e79ed-214">Co najmniej jeden klient następnie może upłynął limit czasu. Można obejść ten problem, ustawiając obiektu usługi `InstanceContextMode` do `PerCall` lub współbieżności do wielu.</span><span class="sxs-lookup"><span data-stu-id="e79ed-214">One or more clients may then time out. You can work around this issue by either setting the service object's `InstanceContextMode` to `PerCall` or Concurrency to multiple.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e79ed-215">MaxConcurrentSessions nie obowiązują w takim przypadku ponieważ jest dostępna tylko jedna "sesja".</span><span class="sxs-lookup"><span data-stu-id="e79ed-215">MaxConcurrentSessions have no effect in this case because there is only one "session" available.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e79ed-216">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="e79ed-216">See Also</span></span>  
 <xref:System.ServiceModel.OperationContractAttribute.IsInitiating%2A>  
 <xref:System.ServiceModel.OperationContractAttribute.IsTerminating%2A>
