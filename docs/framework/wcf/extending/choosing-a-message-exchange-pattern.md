---
title: "Wybieranie platformy wymiany komunikatów"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 0f502ca1-6a8e-4607-ba15-59198c0e6146
caps.latest.revision: "11"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: fd45d9522d40c0760c3aa231b6a0f07c9bcbc9af
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/18/2017
---
# <a name="choosing-a-message-exchange-pattern"></a><span data-ttu-id="0323b-102">Wybieranie platformy wymiany komunikatów</span><span class="sxs-lookup"><span data-stu-id="0323b-102">Choosing a Message Exchange Pattern</span></span>
<span data-ttu-id="0323b-103">Pierwszą czynnością przy tworzeniu niestandardowych transportu jest podjęcie decyzji, które *komunikatu wzorce exchange* (lub MEPs) są wymagane dla kanału tworzysz.</span><span class="sxs-lookup"><span data-stu-id="0323b-103">The first step in writing a custom transport is to decide which *message exchange patterns* (or MEPs) are required for the channel you are developing.</span></span> <span data-ttu-id="0323b-104">W tym temacie opisano dostępne opcje oraz omówiono różne wymagania.</span><span class="sxs-lookup"><span data-stu-id="0323b-104">This topic describes the options available and discusses the various requirements.</span></span> <span data-ttu-id="0323b-105">Jest to pierwsze zadanie na liście zadań rozwoju kanału opisane w [kanały rozwijających się](../../../../docs/framework/wcf/extending/developing-channels.md).</span><span class="sxs-lookup"><span data-stu-id="0323b-105">This is the first task in the channel development task list described in [Developing Channels](../../../../docs/framework/wcf/extending/developing-channels.md).</span></span>  
  
## <a name="six-message-exchange-patterns"></a><span data-ttu-id="0323b-106">Sześć wzorców wymiany komunikatów</span><span class="sxs-lookup"><span data-stu-id="0323b-106">Six Message Exchange Patterns</span></span>  
 <span data-ttu-id="0323b-107">Istnieją trzy MEPs do wyboru:</span><span class="sxs-lookup"><span data-stu-id="0323b-107">There are three MEPs to choose from:</span></span>  
  
-   <span data-ttu-id="0323b-108">Datagramów (<xref:System.ServiceModel.Channels.IInputChannel> i <xref:System.ServiceModel.Channels.IOutputChannel>)</span><span class="sxs-lookup"><span data-stu-id="0323b-108">Datagram (<xref:System.ServiceModel.Channels.IInputChannel> and <xref:System.ServiceModel.Channels.IOutputChannel>)</span></span>  
  
     <span data-ttu-id="0323b-109">Korzystając z datagram MEP, klient wysyła komunikat przy użyciu *wyzwalać i zapomnij* programu exchange.</span><span class="sxs-lookup"><span data-stu-id="0323b-109">When using a datagram MEP, a client sends a message using a *fire and forget* exchange.</span></span> <span data-ttu-id="0323b-110">Uruchomienie a zapomnieć exchange to taki, który wymaga potwierdzenia poza pasmem pomyślnie dostawy.</span><span class="sxs-lookup"><span data-stu-id="0323b-110">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="0323b-111">Komunikat mogą zostać utracone podczas przesyłania i nigdy nie dotarcia do usługi.</span><span class="sxs-lookup"><span data-stu-id="0323b-111">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="0323b-112">Jeśli operacja wysyłania zakończy się pomyślnie po stronie klienta, nie gwarantuje to, że zdalny punkt końcowy odebrał komunikat.</span><span class="sxs-lookup"><span data-stu-id="0323b-112">If the send operation completes successfully at the client end, it does not guarantee that the remote endpoint has received the message.</span></span> <span data-ttu-id="0323b-113">Datagram jest bloku konstrukcyjnego podstawowych do obsługi wiadomości, ponieważ można tworzyć własne protokoły na nim — łącznie z protokołów bezpieczne i niezawodne protokoły.</span><span class="sxs-lookup"><span data-stu-id="0323b-113">The datagram is a fundamental building block for messaging, as you can build your own protocols on top of it—including reliable protocols and secure protocols.</span></span> <span data-ttu-id="0323b-114">Wdrożenie klienta datagram kanałów <xref:System.ServiceModel.Channels.IOutputChannel> implementuje interfejs i Usługa datagramów kanałów <xref:System.ServiceModel.Channels.IInputChannel> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="0323b-114">Client datagram channels implement the <xref:System.ServiceModel.Channels.IOutputChannel> interface and service datagram channels implement the <xref:System.ServiceModel.Channels.IInputChannel> interface.</span></span>  
  
-   <span data-ttu-id="0323b-115">Żądanie odpowiedź (<xref:System.ServiceModel.Channels.IRequestChannel> i <xref:System.ServiceModel.Channels.IReplyChannel>)</span><span class="sxs-lookup"><span data-stu-id="0323b-115">Request-Response (<xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>)</span></span>  
  
     <span data-ttu-id="0323b-116">W tym MEP jest wysyłany komunikat i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="0323b-116">In this MEP, a message is sent, and a reply is received.</span></span> <span data-ttu-id="0323b-117">Wzorzec składa się z pary żądanie / odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="0323b-117">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="0323b-118">Przykłady wywołań żądań i odpowiedzi są zdalnych wywołań procedur (RPC) i GET przeglądarką żądania.</span><span class="sxs-lookup"><span data-stu-id="0323b-118">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="0323b-119">Ten wzorzec jest nazywany również półdupleks.</span><span class="sxs-lookup"><span data-stu-id="0323b-119">This pattern is also known as half-duplex.</span></span> <span data-ttu-id="0323b-120">W tym MEP wdrożenia klienta kanałów <xref:System.ServiceModel.Channels.IRequestChannel> i wdrożenie usługi kanałów <xref:System.ServiceModel.Channels.IReplyChannel>.</span><span class="sxs-lookup"><span data-stu-id="0323b-120">In this MEP, client channels implement <xref:System.ServiceModel.Channels.IRequestChannel> and service channels implement <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span>  
  
-   <span data-ttu-id="0323b-121">Dupleks (<xref:System.ServiceModel.Channels.IDuplexChannel>)</span><span class="sxs-lookup"><span data-stu-id="0323b-121">Duplex (<xref:System.ServiceModel.Channels.IDuplexChannel>)</span></span>  
  
     <span data-ttu-id="0323b-122">Dupleks MEP umożliwia dowolnej liczby wiadomości wysłane przez klienta i odbieranie w dowolnej kolejności.</span><span class="sxs-lookup"><span data-stu-id="0323b-122">The duplex MEP allows an arbitrary number of messages to be sent by a client and received in any order.</span></span> <span data-ttu-id="0323b-123">Dupleks MEP przypomina rozmowy telefonicznej każdego wyrazu jest używany w przypadku komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0323b-123">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span> <span data-ttu-id="0323b-124">Ponieważ obie strony może wysyłać i odbierać w tym MEP, interfejs implementowany przez kanały klient i usługa jest <xref:System.ServiceModel.Channels.IDuplexChannel>.</span><span class="sxs-lookup"><span data-stu-id="0323b-124">Because both sides can send and receive in this MEP, the interface implemented by the client and service channels is <xref:System.ServiceModel.Channels.IDuplexChannel>.</span></span>  
  
 <span data-ttu-id="0323b-125">![Wybieranie platformy wymiany komunikatów](../../../../docs/framework/wcf/extending/media/wcfc-basicthreemepsc.gif "wcfc_BasicThreeMEPsc")</span><span class="sxs-lookup"><span data-stu-id="0323b-125">![Choosing a message exchange pattern](../../../../docs/framework/wcf/extending/media/wcfc-basicthreemepsc.gif "wcfc_BasicThreeMEPsc")</span></span>  
<span data-ttu-id="0323b-126">Trzy wzorce exchange podstawowe wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0323b-126">The three basic message exchange patterns.</span></span> <span data-ttu-id="0323b-127">Z góry na dół: datagram, żądanie odpowiedź i dupleks.</span><span class="sxs-lookup"><span data-stu-id="0323b-127">Top to bottom: datagram, request-response, and duplex.</span></span>  
  
 <span data-ttu-id="0323b-128">Każdy z tych MEPs może również obsługiwać *sesji*.</span><span class="sxs-lookup"><span data-stu-id="0323b-128">Each of these MEPs can also support *sessions*.</span></span> <span data-ttu-id="0323b-129">Sesja (i stosowania <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> typu <xref:System.ServiceModel.Channels.ISession?displayProperty=nameWithType>) są powiązane z wszystkich wiadomości wysłanych i odebranych na kanale.</span><span class="sxs-lookup"><span data-stu-id="0323b-129">A session (and implementation of <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> of type <xref:System.ServiceModel.Channels.ISession?displayProperty=nameWithType>) correlates all messages sent and received on a channel.</span></span> <span data-ttu-id="0323b-130">Wzorzec żądań i odpowiedzi się sesję komunikat dwa autonomiczne skorelowanych żądania i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="0323b-130">The request-response pattern is a stand-alone two-message session, as the request and reply are correlated.</span></span> <span data-ttu-id="0323b-131">Z kolei wzorzec żądań i odpowiedzi, który obsługuje sesji oznacza skorelowanych wszystkie pary żądanie/odpowiedź w tym kanale ze sobą.</span><span class="sxs-lookup"><span data-stu-id="0323b-131">In contrast, the request-response pattern that supports sessions implies that all request/response pairs on that channel are correlated with each other.</span></span> <span data-ttu-id="0323b-132">Daje łączną liczbę sześć MEPs do wyboru:</span><span class="sxs-lookup"><span data-stu-id="0323b-132">This gives you a total of six MEPs to choose from:</span></span>  
  
-   <span data-ttu-id="0323b-133">Datagram</span><span class="sxs-lookup"><span data-stu-id="0323b-133">Datagram</span></span>  
  
-   <span data-ttu-id="0323b-134">Żądanie odpowiedź</span><span class="sxs-lookup"><span data-stu-id="0323b-134">Request-response</span></span>  
  
-   <span data-ttu-id="0323b-135">Dupleks</span><span class="sxs-lookup"><span data-stu-id="0323b-135">Duplex</span></span>  
  
-   <span data-ttu-id="0323b-136">Datagram z sesji</span><span class="sxs-lookup"><span data-stu-id="0323b-136">Datagram with sessions</span></span>  
  
-   <span data-ttu-id="0323b-137">Żądań i odpowiedzi z sesji</span><span class="sxs-lookup"><span data-stu-id="0323b-137">Request-response with sessions</span></span>  
  
-   <span data-ttu-id="0323b-138">Komunikacja dwukierunkowa z sesji</span><span class="sxs-lookup"><span data-stu-id="0323b-138">Duplex with sessions</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0323b-139">Dla transportu UDP tylko MEP, która jest obsługiwana jest datagram, ponieważ jest z założenia fire UDP, a zapomnieć protokołu.</span><span class="sxs-lookup"><span data-stu-id="0323b-139">For the UDP transport, the only MEP that is supported is datagram, because UDP is inherently a fire and forget protocol.</span></span>  
  
## <a name="sessions-and-sessionful-channels"></a><span data-ttu-id="0323b-140">Sesje i Sessionful kanałów</span><span class="sxs-lookup"><span data-stu-id="0323b-140">Sessions and Sessionful Channels</span></span>  
 <span data-ttu-id="0323b-141">W sieci world istnieją bez połączenia protokołów (na przykład UDP) i nawiązaniem połączenia protokołów (na przykład TCP).</span><span class="sxs-lookup"><span data-stu-id="0323b-141">In the networking world, there are connection-oriented protocols (for example, TCP) and connection-less protocols (for example, UDP).</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="0323b-142">używa sesji termin oznacza abstrakcji logiczne typu połączenia.</span><span class="sxs-lookup"><span data-stu-id="0323b-142"> uses the term session to mean a connection-like logical abstraction.</span></span> <span data-ttu-id="0323b-143">Przekroczono WCF protokoły są podobne do połączeń protokołów sieciowych i Bezsesyjne WCF protokoły są podobne do protokołów sieciowych bez połączenia.</span><span class="sxs-lookup"><span data-stu-id="0323b-143">Sessionful WCF protocols are similar to connection-oriented network protocols and sessionless WCF protocols are similar to connection-less network protocols.</span></span>  
  
 <span data-ttu-id="0323b-144">W modelu obiektu kanału każdej sesji logicznej manifesty jako wystąpienie podczas zamykania kanału sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-144">In the channel object model, each logical session manifests as an instance of a sessionful channel.</span></span> <span data-ttu-id="0323b-145">W związku z tym co nowej sesji, które są tworzone przez klienta i zaakceptowane w usłudze odnosi się do nowego podczas zamykania kanału sesji na każdej stronie.</span><span class="sxs-lookup"><span data-stu-id="0323b-145">Therefore every new session created by the client, and accepted on the service, corresponds to a new sessionful channel on each side.</span></span> <span data-ttu-id="0323b-146">Na poniższym diagramie przedstawiono, w górnej części, struktura Bezsesyjne kanałów i u dołu, struktura zamykania kanałów.</span><span class="sxs-lookup"><span data-stu-id="0323b-146">The following diagram shows, on the top, the structure of sessionless channels, and on the bottom, the structure of sessionful channels.</span></span>  
  
 <span data-ttu-id="0323b-147">![Wybieranie platformy wymiany komunikatów](../../../../docs/framework/wcf/extending/media/wcfc-sessionandsessionlesschannelsc.gif "wcfc_SessionAndSessionlessChannelsc")</span><span class="sxs-lookup"><span data-stu-id="0323b-147">![Choosing a message exchange pattern](../../../../docs/framework/wcf/extending/media/wcfc-sessionandsessionlesschannelsc.gif "wcfc_SessionAndSessionlessChannelsc")</span></span>  
  
 <span data-ttu-id="0323b-148">Klient tworzy nowy podczas zamykania kanału sesji i wysyła komunikat.</span><span class="sxs-lookup"><span data-stu-id="0323b-148">A client creates a new sessionful channel and sends a message.</span></span> <span data-ttu-id="0323b-149">Na stronie usługi odbiornika kanałów odbiera ten komunikat i wykrywa, że należy on do nowej sesji tworzy nowy podczas zamykania kanału sesji i przekazuje ją do aplikacji (w odpowiedzi do wywoływania AcceptChannel dla odbiornika kanałów aplikacji).</span><span class="sxs-lookup"><span data-stu-id="0323b-149">On the service side, the channel listener receives this message and detects that it belongs to a new session so it creates a new sessionful channel and hands it to the application (in response to the application calling AcceptChannel on the channel listener).</span></span> <span data-ttu-id="0323b-150">Następnie aplikacja odbiera ten komunikat i wszystkie kolejne wiadomości wysłanych w tej samej sesji przy użyciu tego samego zamykania kanału.</span><span class="sxs-lookup"><span data-stu-id="0323b-150">The application then receives this message and all subsequent messages sent in the same session through the same sessionful channel.</span></span>  
  
 <span data-ttu-id="0323b-151">Inny klient (lub ten sam klient) tworzy nowy sessionful i wysyła komunikat.</span><span class="sxs-lookup"><span data-stu-id="0323b-151">Another client (or the same client) creates a new sessionful and sends a message.</span></span> <span data-ttu-id="0323b-152">Odbiornik kanału wykrywa ten komunikat jest w nowej sesji i tworzy nowy podczas zamykania kanału sesji i proces powtarza się.</span><span class="sxs-lookup"><span data-stu-id="0323b-152">The channel listener detects this message is in a new session and creates a new sessionful channel and the process repeats.</span></span>  
  
 <span data-ttu-id="0323b-153">Bez sesji Brak korelacja kanałów i sesje.</span><span class="sxs-lookup"><span data-stu-id="0323b-153">Without sessions, there is no correlation between channels and sessions.</span></span> <span data-ttu-id="0323b-154">W związku z tym odbiornika kanałów tworzy tylko jeden kanał za pośrednictwem której wszystkie odebrane wiadomości są dostarczane do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0323b-154">Therefore a channel listener creates only one channel through which all received messages are delivered to the application.</span></span> <span data-ttu-id="0323b-155">Nie ma również kolejność, ponieważ nie istnieje żadna sesja w ramach którego do obsługi komunikatów kolejności.</span><span class="sxs-lookup"><span data-stu-id="0323b-155">There is also no message ordering because there is no session within which to maintain message order.</span></span> <span data-ttu-id="0323b-156">Górna część powyższej grafiki przedstawiono exchange Bezsesyjne wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0323b-156">The top portion of the preceding graphic illustrates a sessionless message exchange.</span></span>  
  
## <a name="starting-and-terminating-sessions"></a><span data-ttu-id="0323b-157">Uruchamianie i kończenie sesji</span><span class="sxs-lookup"><span data-stu-id="0323b-157">Starting and Terminating Sessions</span></span>  
 <span data-ttu-id="0323b-158">Sesje są uruchamiane na komputerze klienckim po prostu, tworząc nowe podczas zamykania kanału sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-158">Sessions are started on the client by simply creating a new sessionful channel.</span></span> <span data-ttu-id="0323b-159">Są one uruchomione usługi, gdy usługa odbiera wiadomość została wysłana w nowej sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-159">They are started on the service when the service receives a message that was sent in a new session.</span></span> <span data-ttu-id="0323b-160">Podobnie sesje są zakończone przez zamknięcie lub przerywanie podczas zamykania kanału sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-160">Likewise, sessions are terminated by closing or aborting a sessionful channel.</span></span>  
  
 <span data-ttu-id="0323b-161">Wyjątkiem jest <xref:System.ServiceModel.Channels.IDuplexSessionChannel> używany zarówno wysyłania i odbierania wiadomości we wzorcu komunikacji dupleksowej, sesyjnych.</span><span class="sxs-lookup"><span data-stu-id="0323b-161">The exception to this is <xref:System.ServiceModel.Channels.IDuplexSessionChannel> which is used for both sending and receiving messages in a duplex, sessionful communication pattern.</span></span> <span data-ttu-id="0323b-162">Istnieje możliwość, po jednej stronie będzie można zatrzymać wysyłanie wiadomości, ale nadal odbierać wiadomości w związku z tym, za pomocą <xref:System.ServiceModel.Channels.IDuplexSessionChannel> istnieje mechanizm, który umożliwia zamknięcie wskazujący sesji danych wyjściowych nie będzie wysyłać więcej wiadomości, ale zachować ją wejściowych otwarty, umożliwiając nadal otrzymywać wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0323b-162">It is possible that one side will want to stop sending messages but continue to receive messages therefore when using <xref:System.ServiceModel.Channels.IDuplexSessionChannel> there is a mechanism that lets you close the output session indicating you will not send any more messages but keep the input session opened allowing you to continue to receive messages.</span></span>  
  
 <span data-ttu-id="0323b-163">Ogólnie rzecz biorąc sesje zostaną zamknięte po stronie wychodzących, a nie na stronie przychodzących.</span><span class="sxs-lookup"><span data-stu-id="0323b-163">In general, sessions are closed on the outgoing side and not on the incoming side.</span></span> <span data-ttu-id="0323b-164">Oznacza to dane wyjściowe zamykania kanałów może zostać zamknięty, a tym samym prawidłowo przerywanie sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-164">That is, sessionful output channels can be closed, thereby cleanly terminating the session.</span></span> <span data-ttu-id="0323b-165">Zamknięcie kanału w danych wyjściowych Przekroczono powoduje, że odpowiednie zamykania kanał wejściowy do zwrócenia wartości null do wywoływania aplikacji <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> na <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="0323b-165">Closing a sessionful output channel causes the corresponding sessionful input channel to return null to the application calling <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span>  
  
 <span data-ttu-id="0323b-166">Jednak zamykania kanałów wejściowych nie powinien zostać zamknięty, chyba że <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> na <xref:System.ServiceModel.Channels.IDuplexSessionChannel> zwraca wartość null, wskazując, że sesja jest już zamknięty.</span><span class="sxs-lookup"><span data-stu-id="0323b-166">However sessionful input channels should not be closed unless <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> returns null, indicating that the session is already closed.</span></span> <span data-ttu-id="0323b-167">Jeśli <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> na <xref:System.ServiceModel.Channels.IDuplexSessionChannel> ma nie zwróciła wartość null, podczas zamykania kanału wejściowego zamknięcia może zgłosić wyjątek, ponieważ może pojawić się nieoczekiwane komunikaty podczas zamykania.</span><span class="sxs-lookup"><span data-stu-id="0323b-167">If <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> has not returned null, closing a sessionful input channel may throw an exception because it may receive unexpected messages while closing.</span></span> <span data-ttu-id="0323b-168">Jeśli odbiornik życzą sobie, aby zakończyć sesję przed nadawcy, powinny wywoływać <xref:System.ServiceModel.ICommunicationObject.Abort%2A> na kanał wejściowy, który nagle zakończenia sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-168">If a receiver wishes to terminate a session before the sender does, it should call <xref:System.ServiceModel.ICommunicationObject.Abort%2A> on the input channel, which abruptly terminates the session.</span></span>  
  
## <a name="writing-sessionful-channels"></a><span data-ttu-id="0323b-169">Zapisywanie Sessionful kanałów</span><span class="sxs-lookup"><span data-stu-id="0323b-169">Writing Sessionful Channels</span></span>  
 <span data-ttu-id="0323b-170">Jako autor podczas zamykania kanału sesji istnieje kilka sposobów kanału należy wykonać, aby zapewnić sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-170">As a sessionful channel author, there are a few things your channel must do to provide sessions.</span></span> <span data-ttu-id="0323b-171">Po stronie wysyłającej kanału musi:</span><span class="sxs-lookup"><span data-stu-id="0323b-171">On the send side, your channel needs to:</span></span>  
  
-   <span data-ttu-id="0323b-172">Dla każdego nowego kanału utworzenie nowej sesji i powiązać ją z identyfikatorem nowej sesji, który jest unikatowy ciąg.</span><span class="sxs-lookup"><span data-stu-id="0323b-172">For each new channel, create a new session and associate it with a new session id which is a unique string.</span></span> <span data-ttu-id="0323b-173">Lub uzyskać nową sesję z zamykania kanału poniżej w stosie.</span><span class="sxs-lookup"><span data-stu-id="0323b-173">Or obtain a new session from the sessionful channel below you in the stack.</span></span>  
  
-   <span data-ttu-id="0323b-174">Jeśli kanał utworzony sesji (w przeciwieństwie do uzyskania go z warstwy poniżej), każdy komunikat jest wysyłany przy użyciu tego kanału, należy skojarzyć wiadomości z sesją.</span><span class="sxs-lookup"><span data-stu-id="0323b-174">For each message sent using this channel, if your channel created the session (as opposed to obtaining it from the layer below you), you need to associate the message with the session.</span></span> <span data-ttu-id="0323b-175">Protokół kanałów jest to zazwyczaj wykonywane przez dodanie nagłówka SOAP.</span><span class="sxs-lookup"><span data-stu-id="0323b-175">For protocol channels, this is typically done by adding a SOAP header.</span></span> <span data-ttu-id="0323b-176">Dla kanały transportu jest to zazwyczaj wykonywane przez utworzenie nowego połączenia transportu lub dodawanie informacji o sesji protokołu ramek.</span><span class="sxs-lookup"><span data-stu-id="0323b-176">For transport channels, this is typically done by creating a new transport connection or adding session information to the framing protocol.</span></span>  
  
-   <span data-ttu-id="0323b-177">Dla każdego komunikatu wysyłanego przy użyciu tego kanału musisz podać gwarancją dostarczania wymienionych powyżej.</span><span class="sxs-lookup"><span data-stu-id="0323b-177">For each message sent using this channel, you need to provide the delivery guarantees mentioned above.</span></span> <span data-ttu-id="0323b-178">Jeśli używasz w kanale poniżej należy podać sesji, tym kanale zawiera również gwarancją dostarczania.</span><span class="sxs-lookup"><span data-stu-id="0323b-178">If you are relying on the channel below you to provide the session, that channel will also provide the delivery guarantees.</span></span> <span data-ttu-id="0323b-179">Jeśli sesja użytkownika, należy wdrożyć te gwarancje w ramach sieci protokołu.</span><span class="sxs-lookup"><span data-stu-id="0323b-179">If you’re providing the session yourself, you need to implement those guarantees as part of your protocol.</span></span> <span data-ttu-id="0323b-180">Ogólnie rzecz biorąc podczas pisania kanału protokołu, który przyjmuje WCF po obu stronach może wymagać transportu TCP lub kanału niezawodna obsługa komunikatów i polegać na jedną zapewnienie, sesji.</span><span class="sxs-lookup"><span data-stu-id="0323b-180">In general, if you are writing a protocol channel that assumes WCF on both sides you may require the TCP transport or the Reliable Messaging channel and rely on either one to provide a session.</span></span>  
  
-   <span data-ttu-id="0323b-181">Gdy <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> jest wywoływana na kanał, wykonać niezbędne pracy, aby zamknąć sesję przy użyciu określonego limitu czasu lub domyślny.</span><span class="sxs-lookup"><span data-stu-id="0323b-181">When <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> is called on your channel, perform the necessary work to close the session using either the specified timeout or the default one.</span></span> <span data-ttu-id="0323b-182">Może to być równie proste co wywołanie <xref:System.ServiceModel.ICommunicationObject.Close%2A> w kanale poniżej (Jeśli właśnie sesji są uzyskiwane z niego) lub wysyłania komunikatu SOAP specjalnych lub zamykanie połączenia transportu.</span><span class="sxs-lookup"><span data-stu-id="0323b-182">This can be as simple as calling <xref:System.ServiceModel.ICommunicationObject.Close%2A> on the channel below you (if you just obtained the session from it) or sending a special SOAP message or closing a transport connection.</span></span>  
  
-   <span data-ttu-id="0323b-183">Gdy <xref:System.ServiceModel.ICommunicationObject.Abort%2A> jest wywoływana na kanał, zakończyć sesję nagle bez wykonywania operacji We/Wy.</span><span class="sxs-lookup"><span data-stu-id="0323b-183">When <xref:System.ServiceModel.ICommunicationObject.Abort%2A> is called on your channel, terminate the session abruptly without performing I/O.</span></span> <span data-ttu-id="0323b-184">To może oznaczać, wykonywanie nic lub mogą spowodować przerwanie połączenia sieciowego lub innego zasobu.</span><span class="sxs-lookup"><span data-stu-id="0323b-184">This may mean doing nothing or may involve aborting a network connection or some other resource.</span></span>  
  
 <span data-ttu-id="0323b-185">Po stronie odbierania kanału musi:</span><span class="sxs-lookup"><span data-stu-id="0323b-185">On the receive side, your channel needs to:</span></span>  
  
-   <span data-ttu-id="0323b-186">Dla każdej wiadomości przychodzącej odbiornika kanałów musi wykryć sesji, do której należy.</span><span class="sxs-lookup"><span data-stu-id="0323b-186">For each incoming message, the channel listener must detect the session it belongs to.</span></span> <span data-ttu-id="0323b-187">Jest to pierwszy komunikat w sesji, odbiornika kanałów należy utworzyć nowy kanał, przywrócić go z wywołania <xref:System.ServiceModel.Channels.IChannelListener%601.AcceptChannel%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0323b-187">If this is the first message in the session, the channel listener must create a new channel and return it from the call to <xref:System.ServiceModel.Channels.IChannelListener%601.AcceptChannel%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="0323b-188">W przeciwnym razie odbiornika kanałów musi znaleźć istniejące kanał, który odpowiada sesji i dostarczenie wiadomości za pośrednictwem tego kanału.</span><span class="sxs-lookup"><span data-stu-id="0323b-188">Otherwise the channel listener must find the existing channel that corresponds to the session and deliver the message through that channel.</span></span>  
  
-   <span data-ttu-id="0323b-189">Jeśli kanał jest zapewnienie sesji (wraz z gwarancją dostarczania wymagane) po stronie odbierania może wymagać do wykonywania pewnych działań, takich jak zmienić kolejność wiadomości lub wysyłania potwierdzeń.</span><span class="sxs-lookup"><span data-stu-id="0323b-189">If your channel is providing the session (along with the required delivery guarantees) the receive side may be required to perform some actions such as re-order messages or send acknowledgements.</span></span>  
  
-   <span data-ttu-id="0323b-190">Gdy <xref:System.ServiceModel.ICommunicationObject.Close%2A> jest wywoływana na kanał, wykonać niezbędne pracy, aby zamknąć sesję określony limit czasu lub domyślny.</span><span class="sxs-lookup"><span data-stu-id="0323b-190">When <xref:System.ServiceModel.ICommunicationObject.Close%2A> is called on your channel, perform the necessary work to close the session either the specified timeout or the default one.</span></span> <span data-ttu-id="0323b-191">To może spowodować wystąpienie wyjątków Jeśli kanał odebrał komunikat podczas oczekiwania na limit czasu zamknięcia wygaśnie.</span><span class="sxs-lookup"><span data-stu-id="0323b-191">This could result in exceptions if the channel receives a message while waiting for the close timeout to expire.</span></span> <span data-ttu-id="0323b-192">Wynika to z kanału będzie w stanie zamknięcia po odebraniu wiadomości, więc go spowoduje zgłoszenie.</span><span class="sxs-lookup"><span data-stu-id="0323b-192">That’s because the channel will be in the Closing state when it receives a message so it would throw.</span></span>  
  
-   <span data-ttu-id="0323b-193">Gdy <xref:System.ServiceModel.ICommunicationObject.Abort%2A> jest wywoływana na kanał, zakończyć sesję nagle bez wykonywania operacji We/Wy.</span><span class="sxs-lookup"><span data-stu-id="0323b-193">When <xref:System.ServiceModel.ICommunicationObject.Abort%2A> is called on your channel, terminate the session abruptly without performing I/O.</span></span> <span data-ttu-id="0323b-194">Ponownie to może oznaczać, wykonywanie nic lub mogą spowodować przerwanie połączenia sieciowego lub innego zasobu.</span><span class="sxs-lookup"><span data-stu-id="0323b-194">Again, this may mean doing nothing or may involve aborting a network connection or some other resource.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0323b-195">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0323b-195">See Also</span></span>  
 [<span data-ttu-id="0323b-196">Przegląd modelu kanału</span><span class="sxs-lookup"><span data-stu-id="0323b-196">Channel Model Overview</span></span>](../../../../docs/framework/wcf/extending/channel-model-overview.md)
