---
title: Wybieranie platformy wymiany komunikatów
ms.date: 03/30/2017
ms.assetid: 0f502ca1-6a8e-4607-ba15-59198c0e6146
ms.openlocfilehash: 98788fb89fc68dc1220d9bf8d9ad89df5ca69e6e
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/18/2019
ms.locfileid: "59157788"
---
# <a name="choosing-a-message-exchange-pattern"></a><span data-ttu-id="b113d-102">Wybieranie platformy wymiany komunikatów</span><span class="sxs-lookup"><span data-stu-id="b113d-102">Choosing a Message Exchange Pattern</span></span>
<span data-ttu-id="b113d-103">Pierwszym krokiem podczas pisania niestandardowych transportu jest podjęcie decyzji, które *wiadomości programu exchange wzorców* (lub MEPs) są wymagane dla kanału, tworzysz.</span><span class="sxs-lookup"><span data-stu-id="b113d-103">The first step in writing a custom transport is to decide which *message exchange patterns* (or MEPs) are required for the channel you are developing.</span></span> <span data-ttu-id="b113d-104">W tym temacie opisano dostępne opcje, a w tym artykule omówiono różne wymagania.</span><span class="sxs-lookup"><span data-stu-id="b113d-104">This topic describes the options available and discusses the various requirements.</span></span> <span data-ttu-id="b113d-105">Jest to pierwsze zadanie na liście zadań tworzenia kanału, opisanego w [kanały rozwijających się](../../../../docs/framework/wcf/extending/developing-channels.md).</span><span class="sxs-lookup"><span data-stu-id="b113d-105">This is the first task in the channel development task list described in [Developing Channels](../../../../docs/framework/wcf/extending/developing-channels.md).</span></span>  
  
## <a name="six-message-exchange-patterns"></a><span data-ttu-id="b113d-106">Sześć wzorców wymiany komunikatów</span><span class="sxs-lookup"><span data-stu-id="b113d-106">Six Message Exchange Patterns</span></span>  
 <span data-ttu-id="b113d-107">Istnieją trzy MEPs do wyboru:</span><span class="sxs-lookup"><span data-stu-id="b113d-107">There are three MEPs to choose from:</span></span>  
  
-   <span data-ttu-id="b113d-108">Datagramów (<xref:System.ServiceModel.Channels.IInputChannel> i <xref:System.ServiceModel.Channels.IOutputChannel>)</span><span class="sxs-lookup"><span data-stu-id="b113d-108">Datagram (<xref:System.ServiceModel.Channels.IInputChannel> and <xref:System.ServiceModel.Channels.IOutputChannel>)</span></span>  
  
     <span data-ttu-id="b113d-109">Korzystając z datagram MEP, klient wysyła komunikat przy użyciu *zostanie wyzwolony i zapomnij* programu exchange.</span><span class="sxs-lookup"><span data-stu-id="b113d-109">When using a datagram MEP, a client sends a message using a *fire and forget* exchange.</span></span> <span data-ttu-id="b113d-110">Element zostanie wyzwolony i zapomnij programu exchange to taki, który wymaga potwierdzenia out-of-band skutecznej.</span><span class="sxs-lookup"><span data-stu-id="b113d-110">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="b113d-111">Komunikat może zostać utracone podczas przesyłania i nigdy nie dotrzeć do usługi.</span><span class="sxs-lookup"><span data-stu-id="b113d-111">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="b113d-112">Jeśli operacja wysyłania zakończy się pomyślnie po stronie klienta, nie gwarantuje to, że zdalny punkt końcowy otrzymał komunikat.</span><span class="sxs-lookup"><span data-stu-id="b113d-112">If the send operation completes successfully at the client end, it does not guarantee that the remote endpoint has received the message.</span></span> <span data-ttu-id="b113d-113">Datagram jest elementem konstrukcyjnym podstawowych do obsługi komunikatów, możesz tworzyć własne protokołów na jego podstawie — w tym protokoły niezawodne i bezpieczne protokoły.</span><span class="sxs-lookup"><span data-stu-id="b113d-113">The datagram is a fundamental building block for messaging, as you can build your own protocols on top of it—including reliable protocols and secure protocols.</span></span> <span data-ttu-id="b113d-114">Implementowanie kanały datagram klientów <xref:System.ServiceModel.Channels.IOutputChannel> implementuje interfejs i usługi kanały datagram <xref:System.ServiceModel.Channels.IInputChannel> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="b113d-114">Client datagram channels implement the <xref:System.ServiceModel.Channels.IOutputChannel> interface and service datagram channels implement the <xref:System.ServiceModel.Channels.IInputChannel> interface.</span></span>  
  
-   <span data-ttu-id="b113d-115">Odpowiedź na żądanie (<xref:System.ServiceModel.Channels.IRequestChannel> i <xref:System.ServiceModel.Channels.IReplyChannel>)</span><span class="sxs-lookup"><span data-stu-id="b113d-115">Request-Response (<xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>)</span></span>  
  
     <span data-ttu-id="b113d-116">W tym MEP wiadomość jest wysyłana i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="b113d-116">In this MEP, a message is sent, and a reply is received.</span></span> <span data-ttu-id="b113d-117">Wzorzec składa się z pary odpowiedź na żądanie.</span><span class="sxs-lookup"><span data-stu-id="b113d-117">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="b113d-118">Odpowiedź na żądanie wywołania przykłady zdalnych wywołań procedur (RPC) i przeglądarka GET żądań.</span><span class="sxs-lookup"><span data-stu-id="b113d-118">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="b113d-119">Ten wzorzec jest nazywany również półdupleks.</span><span class="sxs-lookup"><span data-stu-id="b113d-119">This pattern is also known as half-duplex.</span></span> <span data-ttu-id="b113d-120">W tym MEP zaimplementuj kanały klientów <xref:System.ServiceModel.Channels.IRequestChannel> i zaimplementować usługi kanały <xref:System.ServiceModel.Channels.IReplyChannel>.</span><span class="sxs-lookup"><span data-stu-id="b113d-120">In this MEP, client channels implement <xref:System.ServiceModel.Channels.IRequestChannel> and service channels implement <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span>  
  
-   <span data-ttu-id="b113d-121">Duplex (<xref:System.ServiceModel.Channels.IDuplexChannel>)</span><span class="sxs-lookup"><span data-stu-id="b113d-121">Duplex (<xref:System.ServiceModel.Channels.IDuplexChannel>)</span></span>  
  
     <span data-ttu-id="b113d-122">Dwukierunkowe MEP umożliwia dowolną liczbę wiadomości wysłane przez klienta i odbieranie w dowolnej kolejności.</span><span class="sxs-lookup"><span data-stu-id="b113d-122">The duplex MEP allows an arbitrary number of messages to be sent by a client and received in any order.</span></span> <span data-ttu-id="b113d-123">Dwukierunkowego MEP przypomina rozmowy telefonicznej, gdzie każdy wyraz mowy jest komunikat.</span><span class="sxs-lookup"><span data-stu-id="b113d-123">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span> <span data-ttu-id="b113d-124">Obie strony może wysyłać i odbierać w tym MEP, interfejs implementowany przez kanały klient internetowy i usługa jest <xref:System.ServiceModel.Channels.IDuplexChannel>.</span><span class="sxs-lookup"><span data-stu-id="b113d-124">Because both sides can send and receive in this MEP, the interface implemented by the client and service channels is <xref:System.ServiceModel.Channels.IDuplexChannel>.</span></span>  
  
 <span data-ttu-id="b113d-125">![Wybieranie platformy wymiany komunikatów](../../../../docs/framework/wcf/extending/media/wcfc-basicthreemepsc.gif "wcfc_BasicThreeMEPsc")</span><span class="sxs-lookup"><span data-stu-id="b113d-125">![Choosing a message exchange pattern](../../../../docs/framework/wcf/extending/media/wcfc-basicthreemepsc.gif "wcfc_BasicThreeMEPsc")</span></span>  
<span data-ttu-id="b113d-126">Trzy wzorce podstawowe wiadomości programu exchange.</span><span class="sxs-lookup"><span data-stu-id="b113d-126">The three basic message exchange patterns.</span></span> <span data-ttu-id="b113d-127">Od góry do dołu: datagram, odpowiedź na żądanie i dupleks.</span><span class="sxs-lookup"><span data-stu-id="b113d-127">Top to bottom: datagram, request-response, and duplex.</span></span>  
  
 <span data-ttu-id="b113d-128">Każda z tych MEPs może również obsługiwać *sesje*.</span><span class="sxs-lookup"><span data-stu-id="b113d-128">Each of these MEPs can also support *sessions*.</span></span> <span data-ttu-id="b113d-129">Sesję (i stosowania <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> typu <xref:System.ServiceModel.Channels.ISession?displayProperty=nameWithType>) jest skorelowane wszystkie komunikaty wysłane i odebrane w kanale.</span><span class="sxs-lookup"><span data-stu-id="b113d-129">A session (and implementation of <xref:System.ServiceModel.Channels.ISessionChannel%601?displayProperty=nameWithType> of type <xref:System.ServiceModel.Channels.ISession?displayProperty=nameWithType>) correlates all messages sent and received on a channel.</span></span> <span data-ttu-id="b113d-130">Wzorzec odpowiedź na żądanie jest sesję komunikat dwóch autonomicznych, jak żądania i odpowiedzi są powiązane.</span><span class="sxs-lookup"><span data-stu-id="b113d-130">The request-response pattern is a stand-alone two-message session, as the request and reply are correlated.</span></span> <span data-ttu-id="b113d-131">Z kolei wzorzec odpowiedź na żądanie, który obsługuje sesji oznacza, że wszystkie pary żądanie/odpowiedź, w tym kanale są powiązane ze sobą.</span><span class="sxs-lookup"><span data-stu-id="b113d-131">In contrast, the request-response pattern that supports sessions implies that all request/response pairs on that channel are correlated with each other.</span></span> <span data-ttu-id="b113d-132">Daje w sumie sześć MEPs do wyboru:</span><span class="sxs-lookup"><span data-stu-id="b113d-132">This gives you a total of six MEPs to choose from:</span></span>  
  
-   <span data-ttu-id="b113d-133">Datagram</span><span class="sxs-lookup"><span data-stu-id="b113d-133">Datagram</span></span>  
  
-   <span data-ttu-id="b113d-134">Odpowiedź na żądanie</span><span class="sxs-lookup"><span data-stu-id="b113d-134">Request-response</span></span>  
  
-   <span data-ttu-id="b113d-135">Dupleks</span><span class="sxs-lookup"><span data-stu-id="b113d-135">Duplex</span></span>  
  
-   <span data-ttu-id="b113d-136">Datagram z sesjami</span><span class="sxs-lookup"><span data-stu-id="b113d-136">Datagram with sessions</span></span>  
  
-   <span data-ttu-id="b113d-137">Odpowiedź na żądanie z sesji</span><span class="sxs-lookup"><span data-stu-id="b113d-137">Request-response with sessions</span></span>  
  
-   <span data-ttu-id="b113d-138">Komunikacja dwukierunkowa z sesjami</span><span class="sxs-lookup"><span data-stu-id="b113d-138">Duplex with sessions</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="b113d-139">Dla transportu UDP datagram, jest tylko MEP, która jest obsługiwana, ponieważ UDP jest pożar i zapomnij protokołu.</span><span class="sxs-lookup"><span data-stu-id="b113d-139">For the UDP transport, the only MEP that is supported is datagram, because UDP is inherently a fire and forget protocol.</span></span>  
  
## <a name="sessions-and-sessionful-channels"></a><span data-ttu-id="b113d-140">Sesje i Sessionful kanałów</span><span class="sxs-lookup"><span data-stu-id="b113d-140">Sessions and Sessionful Channels</span></span>  
 <span data-ttu-id="b113d-141">W sieci world istnieją połączeniowy protokołów (na przykład, TCP) i protokoły bez połączenia (na przykład, UDP).</span><span class="sxs-lookup"><span data-stu-id="b113d-141">In the networking world, there are connection-oriented protocols (for example, TCP) and connection-less protocols (for example, UDP).</span></span> <span data-ttu-id="b113d-142">Usługi WCF używa sesji termin oznacza abstrakcji logiczne podobne do połączenia.</span><span class="sxs-lookup"><span data-stu-id="b113d-142">WCF uses the term session to mean a connection-like logical abstraction.</span></span> <span data-ttu-id="b113d-143">Przekroczono WCF protokoły są podobne do połączeniowy protokołów sieciowych i Bezsesyjne WCF protokoły są podobne do protokołów sieciowych bez połączenia.</span><span class="sxs-lookup"><span data-stu-id="b113d-143">Sessionful WCF protocols are similar to connection-oriented network protocols and sessionless WCF protocols are similar to connection-less network protocols.</span></span>  
  
 <span data-ttu-id="b113d-144">W modelu obiektu kanału każdej sesji logicznej manifesty jako wystąpienie kanału sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-144">In the channel object model, each logical session manifests as an instance of a sessionful channel.</span></span> <span data-ttu-id="b113d-145">W związku z tym każdej nowej sesji utworzone przez klienta i zaakceptowane w usłudze odnosi się do nowego kanału sesji na każdej stronie.</span><span class="sxs-lookup"><span data-stu-id="b113d-145">Therefore every new session created by the client, and accepted on the service, corresponds to a new sessionful channel on each side.</span></span> <span data-ttu-id="b113d-146">Na poniższym diagramie przedstawiono, w górnej części, struktura Bezsesyjne kanały, a w dolnej części, struktura zamykania kanałów.</span><span class="sxs-lookup"><span data-stu-id="b113d-146">The following diagram shows, on the top, the structure of sessionless channels, and on the bottom, the structure of sessionful channels.</span></span>  
  
 <span data-ttu-id="b113d-147">![Wybieranie platformy wymiany komunikatów](../../../../docs/framework/wcf/extending/media/wcfc-sessionandsessionlesschannelsc.gif "wcfc_SessionAndSessionlessChannelsc")</span><span class="sxs-lookup"><span data-stu-id="b113d-147">![Choosing a message exchange pattern](../../../../docs/framework/wcf/extending/media/wcfc-sessionandsessionlesschannelsc.gif "wcfc_SessionAndSessionlessChannelsc")</span></span>  
  
 <span data-ttu-id="b113d-148">Klient tworzy nowego kanału sesji i wysyła komunikat.</span><span class="sxs-lookup"><span data-stu-id="b113d-148">A client creates a new sessionful channel and sends a message.</span></span> <span data-ttu-id="b113d-149">Na stronie usługi odbiornika kanałów odbiera ten komunikat i wykrywa, czy należy on do nowej sesji więc tworzy nowego kanału sesji i przekazuje go do aplikacji (w odpowiedzi do aplikacji podczas wywoływania AcceptChannel odbiornik kanału).</span><span class="sxs-lookup"><span data-stu-id="b113d-149">On the service side, the channel listener receives this message and detects that it belongs to a new session so it creates a new sessionful channel and hands it to the application (in response to the application calling AcceptChannel on the channel listener).</span></span> <span data-ttu-id="b113d-150">Następnie aplikacja otrzymuje tę wiadomość, a wszystkie kolejne komunikaty wysłane w jednej sesji przez tego samego kanału sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-150">The application then receives this message and all subsequent messages sent in the same session through the same sessionful channel.</span></span>  
  
 <span data-ttu-id="b113d-151">Innym kliencie (lub tego samego klienta) tworzy nowe sessionful i wysyła komunikat.</span><span class="sxs-lookup"><span data-stu-id="b113d-151">Another client (or the same client) creates a new sessionful and sends a message.</span></span> <span data-ttu-id="b113d-152">Odbiornik kanału wykrywa ten komunikat jest w nowej sesji i tworzy nowy kanał sesji, a ten proces jest powtarzany.</span><span class="sxs-lookup"><span data-stu-id="b113d-152">The channel listener detects this message is in a new session and creates a new sessionful channel and the process repeats.</span></span>  
  
 <span data-ttu-id="b113d-153">Bez sesji istnieje korelacja kanałów i sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-153">Without sessions, there is no correlation between channels and sessions.</span></span> <span data-ttu-id="b113d-154">W związku z tym odbiornik kanału tworzy tylko jeden kanał, za pomocą którego wszystkie odebrane komunikaty są dostarczane do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b113d-154">Therefore a channel listener creates only one channel through which all received messages are delivered to the application.</span></span> <span data-ttu-id="b113d-155">Nie ma również kolejność, ponieważ nie istnieje żadna sesja, w którym należy utrzymywać kolejność komunikatów.</span><span class="sxs-lookup"><span data-stu-id="b113d-155">There is also no message ordering because there is no session within which to maintain message order.</span></span> <span data-ttu-id="b113d-156">Górna część poprzedniego rysunku przedstawiono Bezsesyjne wiadomości programu exchange.</span><span class="sxs-lookup"><span data-stu-id="b113d-156">The top portion of the preceding graphic illustrates a sessionless message exchange.</span></span>  
  
## <a name="starting-and-terminating-sessions"></a><span data-ttu-id="b113d-157">Uruchamianie i kończenie sesji</span><span class="sxs-lookup"><span data-stu-id="b113d-157">Starting and Terminating Sessions</span></span>  
 <span data-ttu-id="b113d-158">Sesje są uruchamiane na komputerze klienckim, po prostu tworząc nowy kanał sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-158">Sessions are started on the client by simply creating a new sessionful channel.</span></span> <span data-ttu-id="b113d-159">Są one uruchamiane w usłudze podczas usługa odbiera komunikat, który został wysłany w nowej sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-159">They are started on the service when the service receives a message that was sent in a new session.</span></span> <span data-ttu-id="b113d-160">Podobnie sesje są kończone przez zamknięcie lub przerywanie kanału sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-160">Likewise, sessions are terminated by closing or aborting a sessionful channel.</span></span>  
  
 <span data-ttu-id="b113d-161">Wyjątkiem jest <xref:System.ServiceModel.Channels.IDuplexSessionChannel> używany do wysyłania i odbierania wiadomości we wzorcu dupleksowy, sesji komunikacji.</span><span class="sxs-lookup"><span data-stu-id="b113d-161">The exception to this is <xref:System.ServiceModel.Channels.IDuplexSessionChannel> which is used for both sending and receiving messages in a duplex, sessionful communication pattern.</span></span> <span data-ttu-id="b113d-162">Istnieje możliwość, obok będzie chcesz zatrzymać wysyłanie komunikatów, ale nadal odbierać komunikaty w związku z tym, za pomocą <xref:System.ServiceModel.Channels.IDuplexSessionChannel> istnieje mechanizm, który umożliwia zamknięcie wyjście sesji wskazujący, nie będzie wysyłać więcej wiadomości, ale zachować ją danych wejściowych otwarte, dzięki czemu możesz w dalszym ciągu otrzymywać wiadomości.</span><span class="sxs-lookup"><span data-stu-id="b113d-162">It is possible that one side will want to stop sending messages but continue to receive messages therefore when using <xref:System.ServiceModel.Channels.IDuplexSessionChannel> there is a mechanism that lets you close the output session indicating you will not send any more messages but keep the input session opened allowing you to continue to receive messages.</span></span>  
  
 <span data-ttu-id="b113d-163">Ogólnie rzecz biorąc sesje zostaną zamknięte po stronie wychodzących i nie po stronie przychodzących.</span><span class="sxs-lookup"><span data-stu-id="b113d-163">In general, sessions are closed on the outgoing side and not on the incoming side.</span></span> <span data-ttu-id="b113d-164">Oznacza to kanałów sesji danych wyjściowych może zostać zamknięty, a tym samym nie pozostawia żadnych śladów zakończenie sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-164">That is, sessionful output channels can be closed, thereby cleanly terminating the session.</span></span> <span data-ttu-id="b113d-165">Zamknięcie kanału w danych wyjściowych Przekroczono powoduje, że odpowiednie zamykania kanału wejściowego do zwrócenia wartości null do wywoływania aplikacji <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> na <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="b113d-165">Closing a sessionful output channel causes the corresponding sessionful input channel to return null to the application calling <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span>  
  
 <span data-ttu-id="b113d-166">Jednak zamykania kanałów danych wejściowych nie powinien zostać zamknięty, chyba że <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> na <xref:System.ServiceModel.Channels.IDuplexSessionChannel> zwraca wartość null, wskazując, że sesja jest już zamknięty.</span><span class="sxs-lookup"><span data-stu-id="b113d-166">However sessionful input channels should not be closed unless <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> returns null, indicating that the session is already closed.</span></span> <span data-ttu-id="b113d-167">Jeśli <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> na <xref:System.ServiceModel.Channels.IDuplexSessionChannel> ma nie zwrócił wartość null, zamykanie sesji kanał wejściowy może zgłosić wyjątek, ponieważ może zostać wyświetlony nieoczekiwane komunikaty podczas zamykania.</span><span class="sxs-lookup"><span data-stu-id="b113d-167">If <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A?displayProperty=nameWithType> on the <xref:System.ServiceModel.Channels.IDuplexSessionChannel> has not returned null, closing a sessionful input channel may throw an exception because it may receive unexpected messages while closing.</span></span> <span data-ttu-id="b113d-168">Jeśli odbiorca chce zakończyć sesję przed nadawcy, powinny wywoływać <xref:System.ServiceModel.ICommunicationObject.Abort%2A> nagle w kanale danych wejściowych, który kończy sesję.</span><span class="sxs-lookup"><span data-stu-id="b113d-168">If a receiver wishes to terminate a session before the sender does, it should call <xref:System.ServiceModel.ICommunicationObject.Abort%2A> on the input channel, which abruptly terminates the session.</span></span>  
  
## <a name="writing-sessionful-channels"></a><span data-ttu-id="b113d-169">Zapisywanie Sessionful kanałów</span><span class="sxs-lookup"><span data-stu-id="b113d-169">Writing Sessionful Channels</span></span>  
 <span data-ttu-id="b113d-170">Jako autor kanału sesji istnieje kilka rzeczy, które kanał należy wykonać, aby zapewnić sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-170">As a sessionful channel author, there are a few things your channel must do to provide sessions.</span></span> <span data-ttu-id="b113d-171">Na stronie wysyłania kanał musi:</span><span class="sxs-lookup"><span data-stu-id="b113d-171">On the send side, your channel needs to:</span></span>  
  
-   <span data-ttu-id="b113d-172">Dla każdego nowego kanału utworzenie nowej sesji i skojarz go z identyfikatorem nowej sesji, który jest unikatowy ciąg.</span><span class="sxs-lookup"><span data-stu-id="b113d-172">For each new channel, create a new session and associate it with a new session id which is a unique string.</span></span> <span data-ttu-id="b113d-173">Lub uzyskać nową sesję z kanału sesji poniżej w stosie.</span><span class="sxs-lookup"><span data-stu-id="b113d-173">Or obtain a new session from the sessionful channel below you in the stack.</span></span>  
  
-   <span data-ttu-id="b113d-174">Dla każdej wiadomości wysyłane za pomocą tego kanału Jeśli kanał utworzony sesji (w przeciwieństwie do uzyskania go z warstwy poniżej), należy skojarzyć wiadomości z sesją.</span><span class="sxs-lookup"><span data-stu-id="b113d-174">For each message sent using this channel, if your channel created the session (as opposed to obtaining it from the layer below you), you need to associate the message with the session.</span></span> <span data-ttu-id="b113d-175">Dla protokołu kanałów zazwyczaj jest to wykonywane przez dodanie nagłówka SOAP.</span><span class="sxs-lookup"><span data-stu-id="b113d-175">For protocol channels, this is typically done by adding a SOAP header.</span></span> <span data-ttu-id="b113d-176">Kanały transportu na zwykle odbywa się przez utworzenie nowego połączenia transportu lub dodawanie informacji o sesji protokołu ramek.</span><span class="sxs-lookup"><span data-stu-id="b113d-176">For transport channels, this is typically done by creating a new transport connection or adding session information to the framing protocol.</span></span>  
  
-   <span data-ttu-id="b113d-177">Dla każdej wiadomości wysyłane za pomocą tego kanału musisz podać gwarancją dostarczania wymienionych powyżej.</span><span class="sxs-lookup"><span data-stu-id="b113d-177">For each message sent using this channel, you need to provide the delivery guarantees mentioned above.</span></span> <span data-ttu-id="b113d-178">Jeśli polegasz na kanale poniżej musisz podać sesji przez kanał udostępni również gwarancją dostarczania.</span><span class="sxs-lookup"><span data-stu-id="b113d-178">If you are relying on the channel below you to provide the session, that channel will also provide the delivery guarantees.</span></span> <span data-ttu-id="b113d-179">Jeśli udostępniasz sesji samodzielnie, należy zaimplementować te gwarancje w ramach usługi protokołu.</span><span class="sxs-lookup"><span data-stu-id="b113d-179">If you’re providing the session yourself, you need to implement those guarantees as part of your protocol.</span></span> <span data-ttu-id="b113d-180">Ogólnie rzecz biorąc Jeśli piszesz kanału protokołu, który przyjmuje WCF po obu stronach może wymagają warstwy transportowej TCP lub kanał niezawodna obsługa komunikatów i zależą od jednego zapewnienie sesji.</span><span class="sxs-lookup"><span data-stu-id="b113d-180">In general, if you are writing a protocol channel that assumes WCF on both sides you may require the TCP transport or the Reliable Messaging channel and rely on either one to provide a session.</span></span>  
  
-   <span data-ttu-id="b113d-181">Gdy <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> jest wywoływana na kanale, wykonują pracę niezbędne zamknąć sesję przy użyciu określonego limitu czasu lub domyślny.</span><span class="sxs-lookup"><span data-stu-id="b113d-181">When <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType> is called on your channel, perform the necessary work to close the session using either the specified timeout or the default one.</span></span> <span data-ttu-id="b113d-182">Może to być proste co wywołanie metody <xref:System.ServiceModel.ICommunicationObject.Close%2A> na kanale poniżej możesz (jeśli jest to po prostu sesji są uzyskiwane z niego) lub wysyłania komunikatu protokołu SOAP specjalne lub zamyka połączenie transportu.</span><span class="sxs-lookup"><span data-stu-id="b113d-182">This can be as simple as calling <xref:System.ServiceModel.ICommunicationObject.Close%2A> on the channel below you (if you just obtained the session from it) or sending a special SOAP message or closing a transport connection.</span></span>  
  
-   <span data-ttu-id="b113d-183">Gdy <xref:System.ServiceModel.ICommunicationObject.Abort%2A> jest wywoływana na kanale, zakończyć sesję nagle bez wykonywania operacji We/Wy.</span><span class="sxs-lookup"><span data-stu-id="b113d-183">When <xref:System.ServiceModel.ICommunicationObject.Abort%2A> is called on your channel, terminate the session abruptly without performing I/O.</span></span> <span data-ttu-id="b113d-184">To może oznaczać, że czynności lub mogą spowodować przerwanie połączenia sieciowego lub innego zasobu.</span><span class="sxs-lookup"><span data-stu-id="b113d-184">This may mean doing nothing or may involve aborting a network connection or some other resource.</span></span>  
  
 <span data-ttu-id="b113d-185">Po stronie odbierającej kanał musi:</span><span class="sxs-lookup"><span data-stu-id="b113d-185">On the receive side, your channel needs to:</span></span>  
  
-   <span data-ttu-id="b113d-186">Dla każdego komunikatu przychodzącego odbiornika kanałów musi wykryć sesji, do której należy.</span><span class="sxs-lookup"><span data-stu-id="b113d-186">For each incoming message, the channel listener must detect the session it belongs to.</span></span> <span data-ttu-id="b113d-187">Jeśli jest to pierwszy komunikat w sesji, odbiornik kanału, należy utworzyć nowy kanał i przywrócić go z wywołania <xref:System.ServiceModel.Channels.IChannelListener%601.AcceptChannel%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="b113d-187">If this is the first message in the session, the channel listener must create a new channel and return it from the call to <xref:System.ServiceModel.Channels.IChannelListener%601.AcceptChannel%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="b113d-188">W przeciwnym razie odbiornika kanałów musi znaleźć istniejącego kanału, który odnosi się do sesji i dostarczenia komunikatu za pośrednictwem tego kanału.</span><span class="sxs-lookup"><span data-stu-id="b113d-188">Otherwise the channel listener must find the existing channel that corresponds to the session and deliver the message through that channel.</span></span>  
  
-   <span data-ttu-id="b113d-189">Jeśli kanał jest zapewnienie sesji (wraz z gwarancją dostarczania wymagane) stronie odbierającej może być konieczne wykonywać niektórych akcji, takich jak zmienić kolejność komunikatów lub wysyłać potwierdzenia.</span><span class="sxs-lookup"><span data-stu-id="b113d-189">If your channel is providing the session (along with the required delivery guarantees) the receive side may be required to perform some actions such as re-order messages or send acknowledgements.</span></span>  
  
-   <span data-ttu-id="b113d-190">Gdy <xref:System.ServiceModel.ICommunicationObject.Close%2A> jest wywoływana na kanale, wykonują pracę niezbędne zamknąć sesję, określony limit czasu lub domyślny.</span><span class="sxs-lookup"><span data-stu-id="b113d-190">When <xref:System.ServiceModel.ICommunicationObject.Close%2A> is called on your channel, perform the necessary work to close the session either the specified timeout or the default one.</span></span> <span data-ttu-id="b113d-191">Może to spowodować wyjątki Jeśli kanał odbiera komunikat podczas oczekiwania na limit czasu zamknięcia wygaśnie.</span><span class="sxs-lookup"><span data-stu-id="b113d-191">This could result in exceptions if the channel receives a message while waiting for the close timeout to expire.</span></span> <span data-ttu-id="b113d-192">To, ponieważ kanał będzie w stanie zamknięcia po odebraniu wiadomości, dzięki czemu będzie ona zgłaszają.</span><span class="sxs-lookup"><span data-stu-id="b113d-192">That’s because the channel will be in the Closing state when it receives a message so it would throw.</span></span>  
  
-   <span data-ttu-id="b113d-193">Gdy <xref:System.ServiceModel.ICommunicationObject.Abort%2A> jest wywoływana na kanale, zakończyć sesję nagle bez wykonywania operacji We/Wy.</span><span class="sxs-lookup"><span data-stu-id="b113d-193">When <xref:System.ServiceModel.ICommunicationObject.Abort%2A> is called on your channel, terminate the session abruptly without performing I/O.</span></span> <span data-ttu-id="b113d-194">Ponownie to może oznaczać, że czynności lub mogą spowodować przerwanie połączenia sieciowego lub innego zasobu.</span><span class="sxs-lookup"><span data-stu-id="b113d-194">Again, this may mean doing nothing or may involve aborting a network connection or some other resource.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b113d-195">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="b113d-195">See also</span></span>

- [<span data-ttu-id="b113d-196">Przegląd modelu kanału</span><span class="sxs-lookup"><span data-stu-id="b113d-196">Channel Model Overview</span></span>](../../../../docs/framework/wcf/extending/channel-model-overview.md)
