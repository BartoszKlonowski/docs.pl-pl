---
title: 'Usługa: Odbiorniki kanałów i kanały'
ms.date: 03/30/2017
ms.assetid: 8ccbe0e8-7e55-441d-80de-5765f67542fa
ms.openlocfilehash: 0a740f5dcf682c3c140adb9c4c7c9678c4eae132
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/07/2019
ms.locfileid: "70797181"
---
# <a name="service-channel-listeners-and-channels"></a><span data-ttu-id="23327-102">Usługa: Odbiorniki kanałów i kanały</span><span class="sxs-lookup"><span data-stu-id="23327-102">Service: Channel listeners and channels</span></span>

<span data-ttu-id="23327-103">Istnieją trzy kategorie obiektów kanału: kanały, odbiorniki kanałów i fabryki kanałów.</span><span class="sxs-lookup"><span data-stu-id="23327-103">There are three categories of channel objects: channels, channel listeners, and channel factories.</span></span> <span data-ttu-id="23327-104">Kanały to interfejs między aplikacją a stosem kanału.</span><span class="sxs-lookup"><span data-stu-id="23327-104">Channels are the interface between the application and the channel stack.</span></span> <span data-ttu-id="23327-105">Odbiorniki kanałów są odpowiedzialne za tworzenie kanałów na stronie odbierania (lub nasłuchiwania), zazwyczaj w odpowiedzi na nowy komunikat przychodzący lub połączenie.</span><span class="sxs-lookup"><span data-stu-id="23327-105">Channel listeners are responsible for creating channels on the receive (or listen) side, typically in response to a new incoming message or connection.</span></span> <span data-ttu-id="23327-106">Fabryki kanałów są odpowiedzialne za tworzenie kanałów po stronie wysyłania w celu zainicjowania komunikacji z punktem końcowym.</span><span class="sxs-lookup"><span data-stu-id="23327-106">Channel factories are responsible for creating channels on the send side to initiate communication with an endpoint.</span></span>

## <a name="channel-listeners-and-channels"></a><span data-ttu-id="23327-107">Odbiorniki kanałów i kanały</span><span class="sxs-lookup"><span data-stu-id="23327-107">Channel listeners and channels</span></span>

<span data-ttu-id="23327-108">Odbiorniki kanałów są odpowiedzialne za tworzenie kanałów i otrzymywanie komunikatów z warstwy poniżej lub z sieci.</span><span class="sxs-lookup"><span data-stu-id="23327-108">Channel listeners are responsible for creating channels and receiving messages from the layer below or from the network.</span></span> <span data-ttu-id="23327-109">Odebrane komunikaty są dostarczane do warstwy powyżej przy użyciu kanału, który jest tworzony przez odbiornik kanału.</span><span class="sxs-lookup"><span data-stu-id="23327-109">Received messages are delivered to the layer above using a channel that is created by the channel listener.</span></span>

<span data-ttu-id="23327-110">Na poniższym diagramie przedstawiono proces otrzymywania komunikatów i dostarczania ich do warstwy powyżej.</span><span class="sxs-lookup"><span data-stu-id="23327-110">The following diagram illustrates the process of receiving messages and delivering them to the layer above.</span></span>

<span data-ttu-id="23327-111">![Odbiorniki kanałów i kanały](./media/wcfc-wcfchannelsigure1highlevelc.gif "wcfc_WCFChannelsigure1HighLevelc")</span><span class="sxs-lookup"><span data-stu-id="23327-111">![Channel listeners and channels](./media/wcfc-wcfchannelsigure1highlevelc.gif "wcfc_WCFChannelsigure1HighLevelc")</span></span>

<span data-ttu-id="23327-112">Odbiornik kanału odbiera komunikaty i dostarcza do warstwy powyżej za pośrednictwem kanałów.</span><span class="sxs-lookup"><span data-stu-id="23327-112">A channel listener receiving messages and delivering to the layer above through channels.</span></span>

<span data-ttu-id="23327-113">Ten proces może być koncepcyjnie modelowany jako kolejka w każdym kanale, chociaż implementacja nie może w rzeczywistości korzystać z kolejki.</span><span class="sxs-lookup"><span data-stu-id="23327-113">The process can be conceptually modeled as a queue inside each channel although the implementation may not actually use a queue.</span></span> <span data-ttu-id="23327-114">Odbiornik kanału jest odpowiedzialny za otrzymywanie komunikatów z warstwy poniżej lub z sieci i umieszczanie ich w kolejce.</span><span class="sxs-lookup"><span data-stu-id="23327-114">The channel listener is responsible for receiving messages from the layer below or the network and putting them in the queue.</span></span> <span data-ttu-id="23327-115">Kanał jest odpowiedzialny za pobieranie komunikatów z kolejki i umieszczanie ich w powyższej warstwie, gdy ta warstwa pyta o komunikat, na przykład przez wywołanie `Receive` kanału.</span><span class="sxs-lookup"><span data-stu-id="23327-115">The channel is responsible for getting messages from the queue and handing them to the layer above when that layer asks for a message, for example by calling `Receive` on the channel.</span></span>

<span data-ttu-id="23327-116">Funkcja WCF udostępnia pomocników klasy bazowej dla tego procesu.</span><span class="sxs-lookup"><span data-stu-id="23327-116">WCF provides base class helpers for this process.</span></span> <span data-ttu-id="23327-117">(Aby zapoznać się z diagramem klas pomocnika kanału omawianych w tym artykule, zobacz temat [model kanału — Omówienie](channel-model-overview.md)).</span><span class="sxs-lookup"><span data-stu-id="23327-117">(For a diagram of the channel helper classes discussed in this article, see [Channel Model Overview](channel-model-overview.md).)</span></span>

- <span data-ttu-id="23327-118">Klasa implementuje <xref:System.ServiceModel.ICommunicationObject> i wymusza komputer stanu opisany w kroku 2 [tworzenia kanałów.](developing-channels.md) <xref:System.ServiceModel.Channels.CommunicationObject></span><span class="sxs-lookup"><span data-stu-id="23327-118">The <xref:System.ServiceModel.Channels.CommunicationObject> class implements <xref:System.ServiceModel.ICommunicationObject> and enforces the state machine described in step 2 of [Developing Channels](developing-channels.md).</span></span>

- <span data-ttu-id="23327-119">Klasa implementuje <xref:System.ServiceModel.Channels.CommunicationObject> i udostępnia ujednoliconą klasę bazową dla <xref:System.ServiceModel.Channels.ChannelFactoryBase> i <xref:System.ServiceModel.Channels.ChannelListenerBase>. <xref:System.ServiceModel.Channels.ChannelManagerBase></span><span class="sxs-lookup"><span data-stu-id="23327-119">The <xref:System.ServiceModel.Channels.ChannelManagerBase> class implements <xref:System.ServiceModel.Channels.CommunicationObject> and provides a unified base class for <xref:System.ServiceModel.Channels.ChannelFactoryBase> and <xref:System.ServiceModel.Channels.ChannelListenerBase>.</span></span> <span data-ttu-id="23327-120">Klasa działa w połączeniu z <xref:System.ServiceModel.Channels.ChannelBase>, która jest klasą bazową implementującą <xref:System.ServiceModel.Channels.IChannel>. <xref:System.ServiceModel.Channels.ChannelManagerBase></span><span class="sxs-lookup"><span data-stu-id="23327-120">The <xref:System.ServiceModel.Channels.ChannelManagerBase> class works in conjunction with <xref:System.ServiceModel.Channels.ChannelBase>, which is a base class that implements <xref:System.ServiceModel.Channels.IChannel>.</span></span>

- <span data-ttu-id="23327-121"><xref:System.ServiceModel.Channels.ChannelFactoryBase> Klasa implementuje <xref:System.ServiceModel.Channels.ChannelManagerBase> i<xref:System.ServiceModel.Channels.IChannelFactory> konsoliduje przeciążeniaw`OnCreateChannel` jedną metodę abstrakcyjną. `CreateChannel`</span><span class="sxs-lookup"><span data-stu-id="23327-121">The <xref:System.ServiceModel.Channels.ChannelFactoryBase> class implements <xref:System.ServiceModel.Channels.ChannelManagerBase> and <xref:System.ServiceModel.Channels.IChannelFactory> and consolidates the `CreateChannel` overloads into one `OnCreateChannel` abstract method.</span></span>

- <span data-ttu-id="23327-122"><xref:System.ServiceModel.Channels.ChannelListenerBase> Klasa implementuje<xref:System.ServiceModel.Channels.IChannelListener>.</span><span class="sxs-lookup"><span data-stu-id="23327-122">The <xref:System.ServiceModel.Channels.ChannelListenerBase> class implements <xref:System.ServiceModel.Channels.IChannelListener>.</span></span> <span data-ttu-id="23327-123">Dział IT zajmuje się podstawowym zarządzaniem stanem.</span><span class="sxs-lookup"><span data-stu-id="23327-123">It takes care of basic state management.</span></span>

<span data-ttu-id="23327-124">Następująca dyskusja jest oparta [na transporcie: Przykład](../samples/transport-udp.md) protokołu UDP.</span><span class="sxs-lookup"><span data-stu-id="23327-124">The following discussion is based upon the [Transport: UDP](../samples/transport-udp.md) sample.</span></span>

## <a name="creating-a-channel-listener"></a><span data-ttu-id="23327-125">Tworzenie odbiornika kanału</span><span class="sxs-lookup"><span data-stu-id="23327-125">Creating a channel listener</span></span>

<span data-ttu-id="23327-126">To, że Przykładowa implementacja jest pochodną <xref:System.ServiceModel.Channels.ChannelListenerBase> klasy. `UdpChannelListener`</span><span class="sxs-lookup"><span data-stu-id="23327-126">The `UdpChannelListener` that the sample implements derives from the <xref:System.ServiceModel.Channels.ChannelListenerBase> class.</span></span> <span data-ttu-id="23327-127">Do odbierania datagramów jest stosowane pojedyncze gniazdo UDP.</span><span class="sxs-lookup"><span data-stu-id="23327-127">It uses a single UDP socket to receive datagrams.</span></span> <span data-ttu-id="23327-128">`OnOpen` Metoda odbiera dane przy użyciu gniazda UDP w pętli asynchronicznej.</span><span class="sxs-lookup"><span data-stu-id="23327-128">The `OnOpen` method receives data using the UDP socket in an asynchronous loop.</span></span> <span data-ttu-id="23327-129">Dane są następnie konwertowane na komunikaty przy użyciu systemu kodowania komunikatów:</span><span class="sxs-lookup"><span data-stu-id="23327-129">The data are then converted into messages using the message encoding system:</span></span>

```csharp
message = UdpConstants.MessageEncoder.ReadMessage(
  new ArraySegment<byte>(buffer, 0, count),
  bufferManager
);
```

<span data-ttu-id="23327-130">Ponieważ ten sam kanał datagramu reprezentuje komunikaty, które docierają do różnych źródeł `UdpChannelListener` , jest to pojedynczy odbiornik.</span><span class="sxs-lookup"><span data-stu-id="23327-130">Because the same datagram channel represents messages that arrive from a number of sources, the `UdpChannelListener` is a singleton listener.</span></span> <span data-ttu-id="23327-131">W danym momencie istnieje najwyżej <xref:System.ServiceModel.Channels.IChannel> jedna aktywna skojarzona z tym odbiornikiem.</span><span class="sxs-lookup"><span data-stu-id="23327-131">There is at most one active <xref:System.ServiceModel.Channels.IChannel> associated with this listener at a time.</span></span> <span data-ttu-id="23327-132">Przykład generuje inny, tylko wtedy, gdy kanał, który jest zwracany przez <xref:System.ServiceModel.Channels.ChannelListenerBase%601.AcceptChannel%2A> metodę, zostaje następnie usunięty.</span><span class="sxs-lookup"><span data-stu-id="23327-132">The sample generates another one only if a channel that is returned by the <xref:System.ServiceModel.Channels.ChannelListenerBase%601.AcceptChannel%2A> method is subsequently disposed.</span></span> <span data-ttu-id="23327-133">Po odebraniu komunikatu jest on dodawany do kolejki pojedynczego tego kanału.</span><span class="sxs-lookup"><span data-stu-id="23327-133">When a message is received, it's enqueued into this singleton channel.</span></span>

### <a name="udpinputchannel"></a><span data-ttu-id="23327-134">UdpInputChannel</span><span class="sxs-lookup"><span data-stu-id="23327-134">UdpInputChannel</span></span>

<span data-ttu-id="23327-135">`UdpInputChannel` Klasa implementuje<xref:System.ServiceModel.Channels.IInputChannel>.</span><span class="sxs-lookup"><span data-stu-id="23327-135">The `UdpInputChannel` class implements <xref:System.ServiceModel.Channels.IInputChannel>.</span></span> <span data-ttu-id="23327-136">Składa się z kolejki komunikatów przychodzących wypełnianych przez `UdpChannelListener`gniazdo.</span><span class="sxs-lookup"><span data-stu-id="23327-136">It consists of a queue of incoming messages that is populated by the `UdpChannelListener`'s socket.</span></span> <span data-ttu-id="23327-137">Te komunikaty są dekolejkowane przez <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A> metodę.</span><span class="sxs-lookup"><span data-stu-id="23327-137">These messages are dequeued by the <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A> method.</span></span>
