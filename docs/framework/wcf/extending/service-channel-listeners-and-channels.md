---
title: "Usługa: Odbiorniki kanałów i kanały"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8ccbe0e8-7e55-441d-80de-5765f67542fa
caps.latest.revision: "8"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: f991ebe2be79313bbcf51b41944f84886b1a0b8d
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/18/2017
---
# <a name="service-channel-listeners-and-channels"></a><span data-ttu-id="cb085-102">Usługa: Odbiorniki kanałów i kanały</span><span class="sxs-lookup"><span data-stu-id="cb085-102">Service: Channel Listeners and Channels</span></span>
<span data-ttu-id="cb085-103">Istnieją trzy kategorie obiektów kanału: kanały, odbiorniki kanałów i fabryk kanałów.</span><span class="sxs-lookup"><span data-stu-id="cb085-103">There are three categories of channel objects: channels, channel listeners and channel factories.</span></span> <span data-ttu-id="cb085-104">Kanały to interfejs pomiędzy aplikacją i stosu kanału.</span><span class="sxs-lookup"><span data-stu-id="cb085-104">Channels are the interface between the application and the channel stack.</span></span> <span data-ttu-id="cb085-105">Odbiorniki kanałów są zobowiązani do tworzenia kanałów po stronie odbioru (lub nasłuchiwania), zwykle w odpowiedzi na połączenie lub nowy komunikat przychodzący.</span><span class="sxs-lookup"><span data-stu-id="cb085-105">Channel listeners are responsible for creating channels on the receive (or listen) side, typically in response to a new incoming message or connection.</span></span> <span data-ttu-id="cb085-106">Fabryk kanałów, które są odpowiedzialne za tworzenie kanałów po stronie wysyłającej można zainicjować komunikacji z punktem końcowym.</span><span class="sxs-lookup"><span data-stu-id="cb085-106">Channel factories are responsible for creating channels on the send side to initiate communication with an endpoint.</span></span>  
  
## <a name="channel-listeners-and-channels"></a><span data-ttu-id="cb085-107">Odbiorniki kanałów i kanały</span><span class="sxs-lookup"><span data-stu-id="cb085-107">Channel Listeners and Channels</span></span>  
 <span data-ttu-id="cb085-108">Odbiorniki kanałów są odpowiedzialne za tworzenie kanałów i odbieranie wiadomości z warstwy poniżej lub z sieci.</span><span class="sxs-lookup"><span data-stu-id="cb085-108">Channel listeners are responsible for creating channels and receiving messages from the layer below or from the network.</span></span> <span data-ttu-id="cb085-109">Odebrane komunikaty są dostarczane do warstwy powyżej przy użyciu kanału, który jest tworzony przez odbiornik kanału.</span><span class="sxs-lookup"><span data-stu-id="cb085-109">Received messages are delivered to the layer above using a channel that is created by the channel listener.</span></span>  
  
 <span data-ttu-id="cb085-110">Na poniższym diagramie przedstawiono proces odbieranie wiadomości oraz dostarczania ich do warstwy powyżej.</span><span class="sxs-lookup"><span data-stu-id="cb085-110">The following diagram illustrates the process of receiving messages and delivering them to the layer above.</span></span>  
  
 <span data-ttu-id="cb085-111">![Odbiorniki kanałów i kanały](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigure1highlevelc.gif "wcfc_WCFChannelsigure1HighLevelc")</span><span class="sxs-lookup"><span data-stu-id="cb085-111">![Channel listeners and channels](../../../../docs/framework/wcf/extending/media/wcfc-wcfchannelsigure1highlevelc.gif "wcfc_WCFChannelsigure1HighLevelc")</span></span>  
<span data-ttu-id="cb085-112">Odbiornik kanału odbierania komunikatów i dostarczanie do warstwy powyżej za pośrednictwem kanałów.</span><span class="sxs-lookup"><span data-stu-id="cb085-112">A channel listener receiving messages and delivering to the layer above through channels.</span></span>  
  
 <span data-ttu-id="cb085-113">Proces można koncepcyjnie modelowane jako kolejki wewnątrz każdego kanału, mimo że implementacji nie mogą faktycznie używać kolejki.</span><span class="sxs-lookup"><span data-stu-id="cb085-113">The process can be conceptually modeled as a queue inside each channel although the implementation may not actually use a queue.</span></span> <span data-ttu-id="cb085-114">Odbiornik kanału jest odpowiedzialny za odbieranie wiadomości z warstwy poniżej lub sieci i umieszczania ich w kolejce.</span><span class="sxs-lookup"><span data-stu-id="cb085-114">The channel listener is responsible for receiving messages from the layer below or the network and putting them in the queue.</span></span> <span data-ttu-id="cb085-115">Kanał jest odpowiedzialny za pobieranie wiadomości z kolejki i przekazywanie ich do warstwy powyżej po tej warstwy komunikatu z pytaniem wiadomości, na przykład wywołując `Receive` w kanale.</span><span class="sxs-lookup"><span data-stu-id="cb085-115">The channel is responsible for getting messages from the queue and handing them to the layer above when that layer asks for a message, for example by calling `Receive` on the channel.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="cb085-116">udostępnia pomocników klasę podstawową dla tego procesu.</span><span class="sxs-lookup"><span data-stu-id="cb085-116"> provides base class helpers for this process.</span></span> <span data-ttu-id="cb085-117">(Dla diagramu klas pomocniczych kanału omówione w tym temacie, zobacz [Przegląd modelu kanału](../../../../docs/framework/wcf/extending/channel-model-overview.md).)</span><span class="sxs-lookup"><span data-stu-id="cb085-117">(For a diagram of the channel helper classes discussed in this topic, see [Channel Model Overview](../../../../docs/framework/wcf/extending/channel-model-overview.md).)</span></span>  
  
-   <span data-ttu-id="cb085-118"><xref:System.ServiceModel.Channels.CommunicationObject> Klasa implementuje <xref:System.ServiceModel.ICommunicationObject> i wymusza automatu stanów opisany w kroku 2 [kanały rozwijających się](../../../../docs/framework/wcf/extending/developing-channels.md).</span><span class="sxs-lookup"><span data-stu-id="cb085-118">The <xref:System.ServiceModel.Channels.CommunicationObject> class implements <xref:System.ServiceModel.ICommunicationObject> and enforces the state machine described in step 2 of [Developing Channels](../../../../docs/framework/wcf/extending/developing-channels.md).</span></span>  
  
-   <span data-ttu-id="cb085-119"><xref:System.ServiceModel.Channels.ChannelManagerBase> Klasa implementuje <xref:System.ServiceModel.Channels.CommunicationObject> i zapewnia ujednolicone klasa podstawowa dla <xref:System.ServiceModel.Channels.ChannelFactoryBase> i <xref:System.ServiceModel.Channels.ChannelListenerBase>.</span><span class="sxs-lookup"><span data-stu-id="cb085-119">The <xref:System.ServiceModel.Channels.ChannelManagerBase> class implements <xref:System.ServiceModel.Channels.CommunicationObject> and provides a unified base class for <xref:System.ServiceModel.Channels.ChannelFactoryBase> and <xref:System.ServiceModel.Channels.ChannelListenerBase>.</span></span> <span data-ttu-id="cb085-120"><xref:System.ServiceModel.Channels.ChannelManagerBase> Klasa działa w połączeniu z <xref:System.ServiceModel.Channels.ChannelBase>, która jest klasy podstawowej, która implementuje <xref:System.ServiceModel.Channels.IChannel>.</span><span class="sxs-lookup"><span data-stu-id="cb085-120">The <xref:System.ServiceModel.Channels.ChannelManagerBase> class works in conjunction with <xref:System.ServiceModel.Channels.ChannelBase>, which is a base class that implements <xref:System.ServiceModel.Channels.IChannel>.</span></span>  
  
-   <span data-ttu-id="cb085-121">"<xref:System.ServiceModel.Channels.ChannelFactoryBase> Klasa implementuje <xref:System.ServiceModel.Channels.ChannelManagerBase> i <xref:System.ServiceModel.Channels.IChannelFactory> i konsoliduje `CreateChannel` overloads do jednego `OnCreateChannel` metody abstrakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="cb085-121">The``<xref:System.ServiceModel.Channels.ChannelFactoryBase> class implements <xref:System.ServiceModel.Channels.ChannelManagerBase> and <xref:System.ServiceModel.Channels.IChannelFactory> and consolidates the `CreateChannel` overloads into one `OnCreateChannel` abstract method.</span></span>  
  
-   <span data-ttu-id="cb085-122"><xref:System.ServiceModel.Channels.ChannelListenerBase> Klasa implementuje <xref:System.ServiceModel.Channels.IChannelListener>.</span><span class="sxs-lookup"><span data-stu-id="cb085-122">The <xref:System.ServiceModel.Channels.ChannelListenerBase> class implements <xref:System.ServiceModel.Channels.IChannelListener>.</span></span> <span data-ttu-id="cb085-123">Odpowiada on za podstawowy zarządzania.</span><span class="sxs-lookup"><span data-stu-id="cb085-123">It takes care of basic state management.</span></span>  
  
 <span data-ttu-id="cb085-124">Następujące dyskusji opiera się na [transportu: UDP](../../../../docs/framework/wcf/samples/transport-udp.md) próbki.</span><span class="sxs-lookup"><span data-stu-id="cb085-124">The following discussion is based upon the [Transport: UDP](../../../../docs/framework/wcf/samples/transport-udp.md) sample.</span></span>  
  
## <a name="creating-a-channel-listener"></a><span data-ttu-id="cb085-125">Tworzenie odbiornika kanałów</span><span class="sxs-lookup"><span data-stu-id="cb085-125">Creating a Channel Listener</span></span>  
 <span data-ttu-id="cb085-126">"UdpChannelListener implementujący próbki jest pochodną <xref:System.ServiceModel.Channels.ChannelListenerBase> klasy.</span><span class="sxs-lookup"><span data-stu-id="cb085-126">The``UdpChannelListener that the sample implements derives from the <xref:System.ServiceModel.Channels.ChannelListenerBase> class.</span></span> <span data-ttu-id="cb085-127">Użyto jednego gniazda UDP do odbierania datagramów.</span><span class="sxs-lookup"><span data-stu-id="cb085-127">It uses a single UDP socket to receive datagrams.</span></span> <span data-ttu-id="cb085-128">`OnOpen` Metody odbiera dane przy użyciu gniazda UDP w pętli asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="cb085-128">The `OnOpen` method receives data using the UDP socket in an asynchronous loop.</span></span> <span data-ttu-id="cb085-129">Dane są następnie konwertowane na komunikaty przy użyciu kodowania systemu komunikatu:</span><span class="sxs-lookup"><span data-stu-id="cb085-129">The data are then converted into messages using the message encoding system:</span></span>  
  
```  
message = UdpConstants.MessageEncoder.ReadMessage(  
  new ArraySegment<byte>(buffer, 0, count),   
  bufferManager  
);  
```  
  
 <span data-ttu-id="cb085-130">Ponieważ ten sam kanał datagram reprezentuje komunikaty przychodzące z różnych źródeł, `UdpChannelListener` odbiornik singleton.</span><span class="sxs-lookup"><span data-stu-id="cb085-130">Because the same datagram channel represents messages that arrive from a number of sources, the `UdpChannelListener` is a singleton listener.</span></span> <span data-ttu-id="cb085-131">W większości jeden aktywny jest <xref:System.ServiceModel.Channels.IChannel>'' skojarzone z tym odbiorniku naraz.</span><span class="sxs-lookup"><span data-stu-id="cb085-131">There is at most one active <xref:System.ServiceModel.Channels.IChannel>``associated with this listener at a time.</span></span> <span data-ttu-id="cb085-132">Przykład generuje kolejnego tylko wtedy, gdy kanału, który jest zwracany przez <xref:System.ServiceModel.Channels.ChannelListenerBase%601.AcceptChannel%2A> metody później został usunięty.</span><span class="sxs-lookup"><span data-stu-id="cb085-132">The sample generates another one only if a channel that is returned by the <xref:System.ServiceModel.Channels.ChannelListenerBase%601.AcceptChannel%2A> method is subsequently disposed.</span></span> <span data-ttu-id="cb085-133">Po otrzymaniu komunikatu jest dodawanych do kolejki w tym kanale singleton.</span><span class="sxs-lookup"><span data-stu-id="cb085-133">When a message is received, it is enqueued into this singleton channel.</span></span>  
  
### <a name="udpinputchannel"></a><span data-ttu-id="cb085-134">UdpInputChannel</span><span class="sxs-lookup"><span data-stu-id="cb085-134">UdpInputChannel</span></span>  
 <span data-ttu-id="cb085-135">`UdpInputChannel` Klasa implementuje <xref:System.ServiceModel.Channels.IInputChannel>.</span><span class="sxs-lookup"><span data-stu-id="cb085-135">The `UdpInputChannel` class implements <xref:System.ServiceModel.Channels.IInputChannel>.</span></span> <span data-ttu-id="cb085-136">Składa się z kolejki wiadomości przychodzących, które jest wypełniana `UdpChannelListener`do gniazda.</span><span class="sxs-lookup"><span data-stu-id="cb085-136">It consists of a queue of incoming messages that is populated by the `UdpChannelListener`'s socket.</span></span> <span data-ttu-id="cb085-137">Komunikaty te są usuniętej przez <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="cb085-137">These messages are dequeued by the <xref:System.ServiceModel.Channels.IInputChannel.Receive%2A> method.</span></span>
