---
title: 'Instrukcje: Tworzenie tokenu niestandardowego'
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- SecurityTokenParameters class
- security [WCF], creating custom tokens
- WSSecurityTokenSerializer class
- SecurityToken class
ms.assetid: 6d892973-1558-4115-a9e1-696777776125
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 476c28305935ec8930091d5c3700afe9dd6c2450
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/02/2017
---
# <a name="how-to-create-a-custom-token"></a><span data-ttu-id="6586e-102">Instrukcje: Tworzenie tokenu niestandardowego</span><span class="sxs-lookup"><span data-stu-id="6586e-102">How to: Create a Custom Token</span></span>
<span data-ttu-id="6586e-103">W tym temacie przedstawiono sposób tworzenia tokenu zabezpieczeń niestandardowych przy użyciu <xref:System.IdentityModel.Tokens.SecurityToken> klasy i jak zintegrować ją z dostawcy tokenów zabezpieczających niestandardowych i wystawcy uwierzytelnienia.</span><span class="sxs-lookup"><span data-stu-id="6586e-103">This topic shows how to create a custom security token using the <xref:System.IdentityModel.Tokens.SecurityToken> class, and how to integrate it with a custom security token provider and authenticator.</span></span> <span data-ttu-id="6586e-104">Pełny przykład kodu dla [niestandardowy Token](../../../../docs/framework/wcf/samples/custom-token.md) próbki.</span><span class="sxs-lookup"><span data-stu-id="6586e-104">For a complete code example see the [Custom Token](../../../../docs/framework/wcf/samples/custom-token.md) sample.</span></span>  
  
 <span data-ttu-id="6586e-105">A *tokenu zabezpieczającego* jest zasadniczo element XML, który jest używany przez [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] framework zabezpieczeń do reprezentowania oświadczenia dotyczące nadawcy wiadomości protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="6586e-105">A *security token* is essentially an XML element that is used by the [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] security framework to represent claims about a sender inside the SOAP message.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="6586e-106">funkcja zabezpieczenia oferuje różne tokenów do tryby uwierzytelniania dostarczane przez system.</span><span class="sxs-lookup"><span data-stu-id="6586e-106"> security provides various tokens for system-provided authentication modes.</span></span> <span data-ttu-id="6586e-107">Przykłady obejmują tokenu zabezpieczającego certyfikatu X.509 reprezentowany przez <xref:System.IdentityModel.Tokens.X509SecurityToken> klasy lub tokenu zabezpieczającego nazwy użytkownika reprezentowanego przez <xref:System.IdentityModel.Tokens.UserNameSecurityToken> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-107">Examples include an X.509 certificate security token represented by the <xref:System.IdentityModel.Tokens.X509SecurityToken> class or a Username security token represented by the <xref:System.IdentityModel.Tokens.UserNameSecurityToken> class.</span></span>  
  
 <span data-ttu-id="6586e-108">Czasami tryb uwierzytelniania lub poświadczenia nie jest obsługiwany przez udostępnionych typów.</span><span class="sxs-lookup"><span data-stu-id="6586e-108">Sometimes an authentication mode or credential is not supported by the provided types.</span></span> <span data-ttu-id="6586e-109">W takim przypadku jest niezbędne do utworzenia tokenu zabezpieczającego niestandardowych zapewnienie reprezentację XML niestandardowego poświadczenia wewnątrz komunikatu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="6586e-109">In that case, it is necessary to create a custom security token to provide an XML representation of the custom credential inside the SOAP message.</span></span>  
  
 <span data-ttu-id="6586e-110">W poniższych procedurach przedstawiono sposób tworzenia tokenu zabezpieczającego niestandardowych oraz sposób zintegrować ją z [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastruktury zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6586e-110">The following procedures show how to create a custom security token and how to integrate it with the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] security infrastructure.</span></span> <span data-ttu-id="6586e-111">W tym temacie tworzy token karty kredytowej, który jest używany do przekazywania informacji o karcie kredytowej klienta do serwera.</span><span class="sxs-lookup"><span data-stu-id="6586e-111">This topic creates a credit card token that is used to pass information about the client's credit card to the server.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="6586e-112">niestandardowe poświadczenia i Menedżer tokenów zabezpieczających, zobacz [wskazówki: Tworzenie niestandardowego klienta i poświadczeń usługi](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="6586e-112"> custom credentials and security token manager, see [Walkthrough: Creating Custom Client and Service Credentials](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span></span>  
  
 <span data-ttu-id="6586e-113">Zobacz <xref:System.IdentityModel.Tokens> przestrzeń nazw dla innych klas, które reprezentują tokenów zabezpieczających.</span><span class="sxs-lookup"><span data-stu-id="6586e-113">See the <xref:System.IdentityModel.Tokens> namespace for more classes that represent security tokens.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="6586e-114">poświadczenia, Menedżer tokenów zabezpieczających oraz klasy dostawcy i uwierzytelniania, zobacz [Architektura zabezpieczeń](http://msdn.microsoft.com/en-us/16593476-d36a-408d-808c-ae6fd483e28f).</span><span class="sxs-lookup"><span data-stu-id="6586e-114"> credentials, security token manager, and provider and authenticator classes, see [Security Architecture](http://msdn.microsoft.com/en-us/16593476-d36a-408d-808c-ae6fd483e28f).</span></span>  
  
## <a name="procedures"></a><span data-ttu-id="6586e-115">Procedury</span><span class="sxs-lookup"><span data-stu-id="6586e-115">Procedures</span></span>  
 <span data-ttu-id="6586e-116">Aplikacja kliencka muszą być wyposażone w sposób, aby określić informacje o karcie kredytowej infrastruktury zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6586e-116">A client application must be provided with a way to specify credit card information for the security infrastructure.</span></span> <span data-ttu-id="6586e-117">Te informacje były dostępne dla aplikacji przez klasę poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="6586e-117">This information is made available to the application by a custom client credentials class.</span></span> <span data-ttu-id="6586e-118">Pierwszym krokiem jest można utworzyć klasy do reprezentowania informacje o karcie kredytowej dla poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="6586e-118">The first step is to create a class to represent the credit card information for custom client credentials.</span></span>  
  
#### <a name="to-create-a-class-that-represents-credit-card-information-inside-client-credentials"></a><span data-ttu-id="6586e-119">Aby utworzyć klasę, która reprezentuje informacje o karcie kredytowej wewnątrz poświadczeń klienta</span><span class="sxs-lookup"><span data-stu-id="6586e-119">To create a class that represents credit card information inside client credentials</span></span>  
  
1.  <span data-ttu-id="6586e-120">Zdefiniuj nową klasę, która reprezentuje informacje o karcie kredytowej dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="6586e-120">Define a new class that represents the credit card information for the application.</span></span> <span data-ttu-id="6586e-121">Poniższy przykład nazwy klasy `CreditCardInfo`.</span><span class="sxs-lookup"><span data-stu-id="6586e-121">The following example names the class `CreditCardInfo`.</span></span>  
  
2.  <span data-ttu-id="6586e-122">Dodaj odpowiednie właściwości do klasy, aby zezwolić informacji wymaganych dla tokenu niestandardowego zestawu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="6586e-122">Add appropriate properties to the class to allow an application set the necessary information required for the custom token.</span></span> <span data-ttu-id="6586e-123">W tym przykładzie klasa ma trzy właściwości: `CardNumber`, `CardIssuer`, i `ExpirationDate`.</span><span class="sxs-lookup"><span data-stu-id="6586e-123">In this example, the class has three properties: `CardNumber`, `CardIssuer`, and `ExpirationDate`.</span></span>  
  
     [!code-csharp[c_CustomToken#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#4)]
     [!code-vb[c_CustomToken#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#4)]  
  
 <span data-ttu-id="6586e-124">Następnie należy utworzyć Klasa reprezentująca token zabezpieczający niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="6586e-124">Next, a class that represents the custom security token must be created.</span></span> <span data-ttu-id="6586e-125">Ta klasa jest używana przez token dostawcy uwierzytelniania i serializator klasy zabezpieczeń do przekazywania informacji o tokenie zabezpieczeń do i z [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastruktury zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6586e-125">This class is used by the security token provider, authenticator, and serializer classes to pass information about the security token to and from the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] security infrastructure.</span></span>  
  
#### <a name="to-create-a-custom-security-token-class"></a><span data-ttu-id="6586e-126">Aby utworzyć klasę tokenu zabezpieczeń niestandardowych</span><span class="sxs-lookup"><span data-stu-id="6586e-126">To create a custom security token class</span></span>  
  
1.  <span data-ttu-id="6586e-127">Zdefiniuj nową klasę pochodną <xref:System.IdentityModel.Tokens.SecurityToken> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-127">Define a new class derived from the <xref:System.IdentityModel.Tokens.SecurityToken> class.</span></span> <span data-ttu-id="6586e-128">W tym przykładzie tworzy klasę o nazwie `CreditCardToken`.</span><span class="sxs-lookup"><span data-stu-id="6586e-128">This example creates a class named `CreditCardToken`.</span></span>  
  
2.  <span data-ttu-id="6586e-129">Zastąpienie <xref:System.IdentityModel.Tokens.SecurityToken.Id%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="6586e-129">Override the <xref:System.IdentityModel.Tokens.SecurityToken.Id%2A> property.</span></span> <span data-ttu-id="6586e-130">Ta właściwość jest używana, aby określić lokalny identyfikator tokenu zabezpieczeń, który służy do punktu na jej reprezentację XML tokenu zabezpieczeń z innymi elementami wewnątrz komunikatu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="6586e-130">This property is used to get the local identifier of the security token that is used to point to the security token XML representation from other elements inside the SOAP message.</span></span> <span data-ttu-id="6586e-131">W tym przykładzie identyfikatora tokenu może być przekazany do niego jako parametru konstruktora lub nową losowe jest generowana za każdym razem, gdy jest tworzone wystąpienie tokenu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6586e-131">In this example, a token identifier can be either passed to it as a constructor parameter or a new random one is generated every time a security token instance is created.</span></span>  
  
3.  <span data-ttu-id="6586e-132">Implementowanie <xref:System.IdentityModel.Tokens.SecurityToken.SecurityKeys%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="6586e-132">Implement the <xref:System.IdentityModel.Tokens.SecurityToken.SecurityKeys%2A> property.</span></span> <span data-ttu-id="6586e-133">Ta właściwość zwraca kolekcję kluczy zabezpieczeń, które reprezentuje wystąpienie tokenu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6586e-133">This property returns a collection of security keys that the security token instance represents.</span></span> <span data-ttu-id="6586e-134">Te klucze mogą być używane przez [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] do podpisywania lub szyfrowania części komunikatu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="6586e-134">Such keys can be used by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] to sign or encrypt parts of the SOAP message.</span></span> <span data-ttu-id="6586e-135">W tym przykładzie tokenu zabezpieczającego karty kredytowej nie może zawierać żadnych kluczy zabezpieczeń; w związku z tym zawsze implementacja zwraca pustą kolekcję.</span><span class="sxs-lookup"><span data-stu-id="6586e-135">In this example, the credit card security token cannot contain any security keys; therefore, the implementation always returns an empty collection.</span></span>  
  
4.  <span data-ttu-id="6586e-136">Zastąpienie <xref:System.IdentityModel.Tokens.SecurityToken.ValidFrom%2A> i <xref:System.IdentityModel.Tokens.SecurityToken.ValidTo%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="6586e-136">Override the <xref:System.IdentityModel.Tokens.SecurityToken.ValidFrom%2A> and <xref:System.IdentityModel.Tokens.SecurityToken.ValidTo%2A> properties.</span></span> <span data-ttu-id="6586e-137">Te właściwości są używane przez [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] do sprawdzania poprawności wystąpienia tokenu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6586e-137">These properties are used by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] to determine the validity of the security token instance.</span></span> <span data-ttu-id="6586e-138">W tym przykładzie karty kredytowej tokenu zabezpieczeń ma tylko datę wygaśnięcia, więc `ValidFrom` zwraca <xref:System.DateTime> reprezentujący datę i godzinę utworzenia wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="6586e-138">In this example, the credit card security token has only an expiration date, so the `ValidFrom` property returns a <xref:System.DateTime> that represents the date and time of the instance creation.</span></span>  
  
     [!code-csharp[c_CustomToken#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#1)]
     [!code-vb[c_CustomToken#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#1)]  
  
 <span data-ttu-id="6586e-139">Gdy nowy zabezpieczający typ tokenu jest tworzony, wymaga wykonania <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-139">When a new security token type is created, it requires an implementation of the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters> class.</span></span> <span data-ttu-id="6586e-140">Implementacja jest używana w Konfiguracja elementu powiązania zabezpieczeń do reprezentowania nowy typ tokenu.</span><span class="sxs-lookup"><span data-stu-id="6586e-140">The implementation is used in the security binding element configuration to represent the new token type.</span></span> <span data-ttu-id="6586e-141">Klasa Parametry tokenu zabezpieczeń służy jako szablon, który jest używany do dopasowywania wystąpienie tokenu zabezpieczeń rzeczywiste do, gdy komunikat jest przetwarzany.</span><span class="sxs-lookup"><span data-stu-id="6586e-141">The security token parameters class serves as a template that is used to match the actual security token instance to when a message is processed.</span></span> <span data-ttu-id="6586e-142">Szablon zawiera dodatkowe właściwości, które aplikacji można użyć do określenia kryteriów, które tokenu zabezpieczającego muszą być zgodne do użycia lub uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="6586e-142">The template provides additional properties that an application can use to specify criteria that the security token must match to be used or authenticated.</span></span> <span data-ttu-id="6586e-143">Poniższy przykład nie dodaje żadnych dodatkowych właściwości tylko dopasowaniu typ tokenu zabezpieczeń podczas [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastruktury wyszukuje wystąpienie tokenu zabezpieczeń do użycia, lub do sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="6586e-143">The following example does not add any additional properties, so only the security token type is matched when the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastructure searches for a security token instance to use or to validate.</span></span>  
  
#### <a name="to-create-a-custom-security-token-parameters-class"></a><span data-ttu-id="6586e-144">Aby utworzyć klasę Parametry tokenu zabezpieczeń niestandardowych</span><span class="sxs-lookup"><span data-stu-id="6586e-144">To create a custom security token parameters class</span></span>  
  
1.  <span data-ttu-id="6586e-145">Zdefiniuj nową klasę pochodną <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-145">Define a new class derived from the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters> class.</span></span>  
  
2.  <span data-ttu-id="6586e-146">Implementowanie <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.CloneCore%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="6586e-146">Implement the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.CloneCore%2A> method.</span></span> <span data-ttu-id="6586e-147">Skopiuj wszystkie pola wewnętrznego zdefiniowany w klasie, jeśli istnieje.</span><span class="sxs-lookup"><span data-stu-id="6586e-147">Copy all internal fields defined in your class, if any.</span></span> <span data-ttu-id="6586e-148">W tym przykładzie nie definiuje żadnych dodatkowych pól.</span><span class="sxs-lookup"><span data-stu-id="6586e-148">This example does not define any additional fields.</span></span>  
  
3.  <span data-ttu-id="6586e-149">Implementowanie <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.SupportsClientAuthentication%2A> właściwości tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="6586e-149">Implement the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.SupportsClientAuthentication%2A> read-only property.</span></span> <span data-ttu-id="6586e-150">Ta właściwość zwraca `true` Jeśli typ tokenu zabezpieczeń reprezentowanego przez tę klasę może służyć do uwierzytelniania klienta do usługi.</span><span class="sxs-lookup"><span data-stu-id="6586e-150">This property returns `true` if the security token type represented by this class can be used to authenticate a client to a service.</span></span> <span data-ttu-id="6586e-151">W tym przykładzie tokenu zabezpieczającego karty kredytowej może służyć do uwierzytelniania klienta do usługi.</span><span class="sxs-lookup"><span data-stu-id="6586e-151">In this example, the credit card security token can be used to authenticate a client to a service.</span></span>  
  
4.  <span data-ttu-id="6586e-152">Implementowanie <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.SupportsServerAuthentication%2A> właściwości tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="6586e-152">Implement the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.SupportsServerAuthentication%2A> read-only property.</span></span> <span data-ttu-id="6586e-153">Ta właściwość zwraca `true` Jeśli typ tokenu zabezpieczeń reprezentowanego przez tę klasę może służyć do uwierzytelniania usługi na kliencie.</span><span class="sxs-lookup"><span data-stu-id="6586e-153">This property returns `true` if the security token type represented by this class can be used to authenticate a service to a client.</span></span> <span data-ttu-id="6586e-154">W tym przykładzie tokenu zabezpieczającego karty kredytowej nie może służyć do uwierzytelniania usługi na kliencie.</span><span class="sxs-lookup"><span data-stu-id="6586e-154">In this example, the credit card security token cannot be used to authenticate a service to a client.</span></span>  
  
5.  <span data-ttu-id="6586e-155">Implementowanie <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.SupportsClientWindowsIdentity%2A> właściwości tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="6586e-155">Implement the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.SupportsClientWindowsIdentity%2A> read-only property.</span></span> <span data-ttu-id="6586e-156">Ta właściwość zwraca `true` Jeśli reprezentowanego przez tę klasę typ tokenu zabezpieczeń mogą być mapowane na konta systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="6586e-156">This property returns `true` if the security token type represented by this class can be mapped to a Windows account.</span></span> <span data-ttu-id="6586e-157">Jeśli tak, wynik uwierzytelniania jest reprezentowana przez <xref:System.Security.Principal.WindowsIdentity> wystąpienie klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-157">If so, the authentication result is represented by a <xref:System.Security.Principal.WindowsIdentity> class instance.</span></span> <span data-ttu-id="6586e-158">W tym przykładzie token nie można zamapować na konto systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="6586e-158">In this example, the token cannot be mapped to a Windows account.</span></span>  
  
6.  <span data-ttu-id="6586e-159">Implementowanie <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.CreateKeyIdentifierClause%28System.IdentityModel.Tokens.SecurityToken%2CSystem.ServiceModel.Security.Tokens.SecurityTokenReferenceStyle%29> metody.</span><span class="sxs-lookup"><span data-stu-id="6586e-159">Implement the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.CreateKeyIdentifierClause%28System.IdentityModel.Tokens.SecurityToken%2CSystem.ServiceModel.Security.Tokens.SecurityTokenReferenceStyle%29> method.</span></span> <span data-ttu-id="6586e-160">Ta metoda jest wywoływana przez [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] zabezpieczeń platformę, gdy wymaga odwołania do wystąpienia tokenu zabezpieczeń reprezentowanego przez tę klasę Parametry tokenu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="6586e-160">This method is called by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] security framework when it requires a reference to the security token instance represented by this security token parameters class.</span></span> <span data-ttu-id="6586e-161">Zarówno rzeczywiste zabezpieczeń tokenu wystąpienie i <xref:System.ServiceModel.Security.Tokens.SecurityTokenReferenceStyle> , który określa typ odwołania, który jest wymagany są przekazywane do tej metody jako argumenty.</span><span class="sxs-lookup"><span data-stu-id="6586e-161">Both the actual security token instance and <xref:System.ServiceModel.Security.Tokens.SecurityTokenReferenceStyle> that specifies the type of the reference that is being requested are passed to this method as arguments.</span></span> <span data-ttu-id="6586e-162">W tym przykładzie tylko wewnętrzne odwołania są obsługiwane przez karty kredytowej tokenu zabezpieczającego.</span><span class="sxs-lookup"><span data-stu-id="6586e-162">In this example, only internal references are supported by the credit card security token.</span></span> <span data-ttu-id="6586e-163"><xref:System.IdentityModel.Tokens.SecurityToken> Klasa ma funkcje do tworzenia odwołań wewnętrzny; w związku z tym implementacja nie wymaga dodatkowego kodu.</span><span class="sxs-lookup"><span data-stu-id="6586e-163">The <xref:System.IdentityModel.Tokens.SecurityToken> class has functionality to create internal references; therefore, the implementation does not require additional code.</span></span>  
  
7.  <span data-ttu-id="6586e-164">Implementowanie <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.InitializeSecurityTokenRequirement%28System.IdentityModel.Selectors.SecurityTokenRequirement%29> metody.</span><span class="sxs-lookup"><span data-stu-id="6586e-164">Implement the <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters.InitializeSecurityTokenRequirement%28System.IdentityModel.Selectors.SecurityTokenRequirement%29> method.</span></span> <span data-ttu-id="6586e-165">Ta metoda jest wywoływana przez [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] przekonwertować zabezpieczeń wystąpienie do wystąpienia klasy Parametry tokenu <xref:System.IdentityModel.Selectors.SecurityTokenRequirement> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-165">This method is called by [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] to convert the security token parameters class instance into an instance of the <xref:System.IdentityModel.Selectors.SecurityTokenRequirement> class.</span></span> <span data-ttu-id="6586e-166">Aby utworzyć wystąpienie tokenu zabezpieczeń odpowiednich przez dostawców tokenów zabezpieczeń zostanie użyty wynik.</span><span class="sxs-lookup"><span data-stu-id="6586e-166">The result is used by security token providers to create the appropriate security token instance.</span></span>  
  
     [!code-csharp[c_CustomToken#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#2)]
     [!code-vb[c_CustomToken#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#2)]  
  
 <span data-ttu-id="6586e-167">Tokeny zabezpieczające są przesyłane w wiadomości SOAP, które wymaga mechanizm tłumaczenia między reprezentacja tokenu zabezpieczeń w pamięci i reprezentacja w locie.</span><span class="sxs-lookup"><span data-stu-id="6586e-167">Security tokens are transmitted inside SOAP messages, which requires a translation mechanism between the in-memory security token representation and the on-the-wire representation.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="6586e-168">używa Serializator tokenu zabezpieczającego, aby wykonać to zadanie.</span><span class="sxs-lookup"><span data-stu-id="6586e-168"> uses a security token serializer to accomplish this task.</span></span> <span data-ttu-id="6586e-169">Każdy token niestandardowy musi towarzyszyć Serializator tokenu zabezpieczającego niestandardowych, które mogą serializacji i deserializacji tokenu zabezpieczającego niestandardowych z komunikatu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="6586e-169">Every custom token must be accompanied by a custom security token serializer that can serialize and deserialize the custom security token from the SOAP message.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6586e-170">Pochodne klucze są domyślnie włączone.</span><span class="sxs-lookup"><span data-stu-id="6586e-170">Derived keys are enabled by default.</span></span> <span data-ttu-id="6586e-171">Jeśli utworzysz tokenu zabezpieczającego niestandardowych i używać go jako token podstawowy [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] pochodną klucza.</span><span class="sxs-lookup"><span data-stu-id="6586e-171">If you create a custom security token and use it as the primary token, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] derives a key from it.</span></span> <span data-ttu-id="6586e-172">Podczas tej czynności wywołuje niestandardowy Serializator tokenu zabezpieczającego zapisu <xref:System.IdentityModel.Tokens.SecurityKeyIdentifierClause> dla tokenu zabezpieczającego niestandardowych podczas serializowania `DerivedKeyToken` można przewodowo.</span><span class="sxs-lookup"><span data-stu-id="6586e-172">While doing so, it calls the custom security token serializer to write the <xref:System.IdentityModel.Tokens.SecurityKeyIdentifierClause> for the custom security token while serializing the `DerivedKeyToken` to the wire.</span></span> <span data-ttu-id="6586e-173">Na stronie odbierającej, podczas deserializacji tokenu poza umieszczonego w sieci `DerivedKeyToken` Serializator oczekuje `SecurityTokenReference` element jako element podrzędny najwyższego poziomu w samej siebie.</span><span class="sxs-lookup"><span data-stu-id="6586e-173">On the receiving end, when deserializing the token off the wire, the `DerivedKeyToken` serializer expects a `SecurityTokenReference` element as the top-level child under itself.</span></span> <span data-ttu-id="6586e-174">Jeśli nie dodano Serializator tokenu zabezpieczającego niestandardowych `SecurityTokenReference` elementu podczas serializowania jego typ klauzuli, jest zgłaszany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="6586e-174">If the custom security token serializer did not add a `SecurityTokenReference` element while serializing its clause type, an exception is thrown.</span></span>  
  
#### <a name="to-create-a-custom-security-token-serializer"></a><span data-ttu-id="6586e-175">Aby utworzyć serializatora tokenu zabezpieczeń niestandardowych</span><span class="sxs-lookup"><span data-stu-id="6586e-175">To create a custom security token serializer</span></span>  
  
1.  <span data-ttu-id="6586e-176">Zdefiniuj nową klasę pochodną <xref:System.ServiceModel.Security.WSSecurityTokenSerializer> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-176">Define a new class derived from the <xref:System.ServiceModel.Security.WSSecurityTokenSerializer> class.</span></span>  
  
2.  <span data-ttu-id="6586e-177">Zastąpienie <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.CanReadTokenCore%28System.Xml.XmlReader%29> metodę, która zależy od <xref:System.Xml.XmlReader> odczytywać strumień XML.</span><span class="sxs-lookup"><span data-stu-id="6586e-177">Override the <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.CanReadTokenCore%28System.Xml.XmlReader%29> method, which relies on an <xref:System.Xml.XmlReader> to read the XML stream.</span></span> <span data-ttu-id="6586e-178">Metoda zwraca `true` jeśli implementacja serializator może wykonywać deserializację na podstawie tokenu zabezpieczającego nadać jej bieżącego elementu.</span><span class="sxs-lookup"><span data-stu-id="6586e-178">The method returns `true` if the serializer implementation can deserialize the security token based given its current element.</span></span> <span data-ttu-id="6586e-179">W tym przykładzie ta metoda sprawdza, czy bieżący obiektu odczytującego XML — element XML ma element poprawną nazwę i przestrzeń nazw.</span><span class="sxs-lookup"><span data-stu-id="6586e-179">In this example, this method checks whether the XML reader's current XML element has the correct element name and namespace.</span></span> <span data-ttu-id="6586e-180">Jeśli nie, wywołuje metodę Implementacja klasy podstawowej tę metodę w celu obsługi elementu XML.</span><span class="sxs-lookup"><span data-stu-id="6586e-180">If it does not, it calls the base class implementation of this method to handle the XML element.</span></span>  
  
3.  <span data-ttu-id="6586e-181">Zastąpienie <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.ReadTokenCore%28System.Xml.XmlReader%2CSystem.IdentityModel.Selectors.SecurityTokenResolver%29> metody.</span><span class="sxs-lookup"><span data-stu-id="6586e-181">Override the <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.ReadTokenCore%28System.Xml.XmlReader%2CSystem.IdentityModel.Selectors.SecurityTokenResolver%29> method.</span></span> <span data-ttu-id="6586e-182">Ta metoda odczytuje zawartość XML tokenu zabezpieczającego i tworzy odpowiednie reprezentacji w pamięci dla niego.</span><span class="sxs-lookup"><span data-stu-id="6586e-182">This method reads the XML content of the security token and constructs the appropriate in-memory representation for it.</span></span> <span data-ttu-id="6586e-183">Jeśli nie rozpoznaje elementu XML, na którym jest stały przekazany czytnika XML, wywołuje metodę implementację klasy podstawowej, aby przetworzyć typy tokenów dostarczane przez system.</span><span class="sxs-lookup"><span data-stu-id="6586e-183">If it does not recognize the XML element on which the passed-in XML reader is standing, it calls the base class implementation to process the system-provided token types.</span></span>  
  
4.  <span data-ttu-id="6586e-184">Zastąpienie <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.CanWriteTokenCore%28System.IdentityModel.Tokens.SecurityToken%29> metody.</span><span class="sxs-lookup"><span data-stu-id="6586e-184">Override the <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.CanWriteTokenCore%28System.IdentityModel.Tokens.SecurityToken%29> method.</span></span> <span data-ttu-id="6586e-185">Ta metoda zwraca `true` Jeśli umożliwia on konwertowanie reprezentacja tokenu w pamięci (przekazany jako argument) na końcu reprezentacji XML.</span><span class="sxs-lookup"><span data-stu-id="6586e-185">This method returns `true` if it can convert the in-memory token representation (passed in as an argument) to the XML representation.</span></span> <span data-ttu-id="6586e-186">Jeśli nie można dokonać konwersji, wywołuje metodę implementacji klasy podstawowej.</span><span class="sxs-lookup"><span data-stu-id="6586e-186">If it cannot convert, it calls the base class implementation.</span></span>  
  
5.  <span data-ttu-id="6586e-187">Zastąpienie <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.WriteTokenCore%28System.Xml.XmlWriter%2CSystem.IdentityModel.Tokens.SecurityToken%29> metody.</span><span class="sxs-lookup"><span data-stu-id="6586e-187">Override the <xref:System.ServiceModel.Security.WSSecurityTokenSerializer.WriteTokenCore%28System.Xml.XmlWriter%2CSystem.IdentityModel.Tokens.SecurityToken%29> method.</span></span> <span data-ttu-id="6586e-188">Ta metoda konwertuje reprezentacja tokenu zabezpieczeń w pamięci w reprezentacji XML.</span><span class="sxs-lookup"><span data-stu-id="6586e-188">This method converts an in-memory security token representation into an XML representation.</span></span> <span data-ttu-id="6586e-189">Jeśli metoda nie może dokonać konwersji, wywołuje metodę implementacji klasy podstawowej.</span><span class="sxs-lookup"><span data-stu-id="6586e-189">If the method cannot convert, it calls the base class implementation.</span></span>  
  
     [!code-csharp[c_CustomToken#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#3)]
     [!code-vb[c_CustomToken#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#3)]  
  
 <span data-ttu-id="6586e-190">Po zakończeniu cztery poprzedniej procedury, integracja tokenu zabezpieczającego niestandardowych z dostawcy tokenów zabezpieczających, uwierzytelniania, Menedżer i poświadczeń klienta i usługi.</span><span class="sxs-lookup"><span data-stu-id="6586e-190">After completing the four previous procedures, integrate the custom security token with the security token provider, authenticator, manager, and client and service credentials.</span></span>  
  
#### <a name="to-integrate-the-custom-security-token-with-a-security-token-provider"></a><span data-ttu-id="6586e-191">Token zabezpieczający niestandardowy jest integrowana z dostawcy tokenów zabezpieczających</span><span class="sxs-lookup"><span data-stu-id="6586e-191">To integrate the custom security token with a security token provider</span></span>  
  
1.  <span data-ttu-id="6586e-192">Dostawcy tokenów zabezpieczających tworzy, modyfikuje (w razie potrzeby) i zwraca wystąpienie tokenu.</span><span class="sxs-lookup"><span data-stu-id="6586e-192">The security token provider creates, modifies (if necessary), and returns an instance of the token.</span></span> <span data-ttu-id="6586e-193">Można utworzyć niestandardowego dostawcę dla tokenu zabezpieczającego niestandardowych, Utwórz klasę, która dziedziczy <xref:System.IdentityModel.Selectors.SecurityTokenProvider> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-193">To create a custom provider for the custom security token, create a class that inherits from the <xref:System.IdentityModel.Selectors.SecurityTokenProvider> class.</span></span> <span data-ttu-id="6586e-194">Poniższy przykład zastępuje <xref:System.IdentityModel.Selectors.SecurityTokenProvider.GetTokenCore%2A> sposób zwrócenia wystąpienia klasy `CreditCardToken`.</span><span class="sxs-lookup"><span data-stu-id="6586e-194">The following example overrides the <xref:System.IdentityModel.Selectors.SecurityTokenProvider.GetTokenCore%2A> method to return an instance of the `CreditCardToken`.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="6586e-195">dostawcy tokenów zabezpieczeń niestandardowych, zobacz [porady: Tworzenie niestandardowego dostawcy tokenów zabezpieczających](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-provider.md).</span><span class="sxs-lookup"><span data-stu-id="6586e-195"> custom security token providers, see [How to: Create a Custom Security Token Provider](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-provider.md).</span></span>  
  
     [!code-csharp[c_CustomToken#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#6)]
     [!code-vb[c_CustomToken#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#6)]  
  
#### <a name="to-integrate-the-custom-security-token-with-a-security-token-authenticator"></a><span data-ttu-id="6586e-196">Token zabezpieczający niestandardowy jest integrowana z wystawcę uwierzytelnienia tokenów zabezpieczających</span><span class="sxs-lookup"><span data-stu-id="6586e-196">To integrate the custom security token with a security token authenticator</span></span>  
  
1.  <span data-ttu-id="6586e-197">Sprawdza poprawność zawartości tokenu zabezpieczającego wystawcę uwierzytelnienia tokenów zabezpieczających, gdy został wyodrębniony z komunikatu.</span><span class="sxs-lookup"><span data-stu-id="6586e-197">The security token authenticator validates the content of the security token when it is extracted from the message.</span></span> <span data-ttu-id="6586e-198">Aby utworzyć niestandardowego wystawcy uwierzytelnienia tokenu zabezpieczającego niestandardowych, Utwórz klasę, która dziedziczy po <xref:System.IdentityModel.Selectors.SecurityTokenAuthenticator> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-198">To create a custom authenticator for the custom security token, create a class that inherits from the <xref:System.IdentityModel.Selectors.SecurityTokenAuthenticator> class.</span></span> <span data-ttu-id="6586e-199">Poniższy przykład zastępuje <xref:System.IdentityModel.Selectors.SecurityTokenAuthenticator.ValidateTokenCore%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="6586e-199">The following example overrides the <xref:System.IdentityModel.Selectors.SecurityTokenAuthenticator.ValidateTokenCore%2A> method.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="6586e-200">wystawcy uwierzytelnienia tokenu zabezpieczeń niestandardowych, zobacz [porady: Tworzenie niestandardowego wystawcę uwierzytelnienia tokenów zabezpieczających](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-authenticator.md).</span><span class="sxs-lookup"><span data-stu-id="6586e-200"> custom security token authenticators, see [How to: Create a Custom Security Token Authenticator](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-authenticator.md).</span></span>  
  
     [!code-csharp[c_CustomToken#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#7)]
     [!code-vb[c_CustomToken#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#7)]  
  
     [!code-csharp[c_CustomToken#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#12)]
     [!code-vb[c_CustomToken#12](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#12)]  
  
#### <a name="to-integrate-the-custom-security-token-with-a-security-token-manager"></a><span data-ttu-id="6586e-201">Token zabezpieczający niestandardowy jest integrowana z Menedżer tokenów zabezpieczających</span><span class="sxs-lookup"><span data-stu-id="6586e-201">To integrate the custom security token with a security token manager</span></span>  
  
1.  <span data-ttu-id="6586e-202">Menedżer tokenów zabezpieczających tworzy odpowiedniego dostawcy tokenów zabezpieczeń uwierzytelniania i wystąpień serializatora tokenu.</span><span class="sxs-lookup"><span data-stu-id="6586e-202">The security token manager creates the appropriate token provider, security authenticator, and token serializer instances.</span></span> <span data-ttu-id="6586e-203">Aby utworzyć niestandardowe Menedżer tokenów, należy utworzyć klasę, która dziedziczy <xref:System.ServiceModel.ClientCredentialsSecurityTokenManager> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-203">To create a custom token manager, create a class that inherits from the <xref:System.ServiceModel.ClientCredentialsSecurityTokenManager> class.</span></span> <span data-ttu-id="6586e-204">Podstawowe metody Użyj klasy <xref:System.IdentityModel.Selectors.SecurityTokenRequirement> do utworzenia odpowiedniego dostawcy i poświadczeń klienta lub usługi.</span><span class="sxs-lookup"><span data-stu-id="6586e-204">The primary methods of the class use a <xref:System.IdentityModel.Selectors.SecurityTokenRequirement> to create the appropriate provider and client or service credentials.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="6586e-205">Menedżerowie tokenu zabezpieczeń niestandardowych, zobacz [wskazówki: Tworzenie niestandardowego klienta i poświadczeń usługi](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="6586e-205"> custom security token managers, see [Walkthrough: Creating Custom Client and Service Credentials](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span></span>  
  
     [!code-csharp[c_CustomToken#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#8)]
     [!code-vb[c_CustomToken#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#8)]  
  
     [!code-csharp[c_CustomToken#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#9)]
     [!code-vb[c_CustomToken#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#9)]  
  
#### <a name="to-integrate-the-custom-security-token-with-custom-client-and-service-credentials"></a><span data-ttu-id="6586e-206">Token zabezpieczający niestandardowy jest integrowana z niestandardowego klienta i poświadczeń usługi</span><span class="sxs-lookup"><span data-stu-id="6586e-206">To integrate the custom security token with custom client and service credentials</span></span>  
  
1.  <span data-ttu-id="6586e-207">Niestandardowe klienta i poświadczeń usługi muszą zostać dodane do dostarczać interfejs API do pozwala na stosowanie niestandardowych informacji o tokenie używanego przez infrastrukturę tokenu zabezpieczeń niestandardowe utworzone wcześniej do udostępniania i uwierzytelniania niestandardowego zabezpieczeń aplikacji Token zawartość.</span><span class="sxs-lookup"><span data-stu-id="6586e-207">The custom client and service credentials must be added to provide an API for the application to allow specifying custom token information that is used by the custom security token infrastructure created previously to provide and authenticate the custom security token content.</span></span> <span data-ttu-id="6586e-208">Poniższe przykłady pokazują, jak to zrobić.</span><span class="sxs-lookup"><span data-stu-id="6586e-208">The following samples show how this can be done.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="6586e-209">niestandardowe klienta i poświadczenia usługi, zobacz [wskazówki: Tworzenie niestandardowego klienta i poświadczeń usługi](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="6586e-209"> custom client and service credentials, see [Walkthrough: Creating Custom Client and Service Credentials](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md).</span></span>  
  
     [!code-csharp[c_CustomToken#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#10)]
     [!code-vb[c_CustomToken#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#10)]  
  
     [!code-csharp[c_customToken#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#11)]
     [!code-vb[c_customToken#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#11)]  
  
 <span data-ttu-id="6586e-210">Klasa Parametry tokenu zabezpieczeń niestandardowe utworzone wcześniej umożliwia Poinformuj [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] framework zabezpieczeń tokenu zabezpieczającego niestandardowy musi być używany podczas komunikacji z usługą.</span><span class="sxs-lookup"><span data-stu-id="6586e-210">The custom security token parameters class created previously is used to tell the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] security framework that a custom security token must be used when communicating with a service.</span></span> <span data-ttu-id="6586e-211">W poniższej procedurze wyjaśniono, jak to zrobić.</span><span class="sxs-lookup"><span data-stu-id="6586e-211">The following procedure shows how this can be done.</span></span>  
  
#### <a name="to-integrate-the-custom-security-token-with-the-binding"></a><span data-ttu-id="6586e-212">Integracja z powiązaniem tokenu zabezpieczającego niestandardowych</span><span class="sxs-lookup"><span data-stu-id="6586e-212">To integrate the custom security token with the binding</span></span>  
  
1.  <span data-ttu-id="6586e-213">Klasa Parametry tokenu zabezpieczeń niestandardowych musi być określony w jednej z kolekcji Parametry tokenu, które są dostępne w <xref:System.ServiceModel.Channels.SecurityBindingElement> klasy.</span><span class="sxs-lookup"><span data-stu-id="6586e-213">The custom security token parameters class must be specified in one of the token parameters collections that are exposed on the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span> <span data-ttu-id="6586e-214">W poniższym przykładzie użyto kolekcji zwróconej przez `SignedEncrypted`.</span><span class="sxs-lookup"><span data-stu-id="6586e-214">The following example uses the collection returned by `SignedEncrypted`.</span></span> <span data-ttu-id="6586e-215">Ten kod dodaje niestandardowy token karty kredytowej do każdej wiadomości wysłanych z klienta do usługi z zawartością automatycznie podpisane i zaszyfrowane.</span><span class="sxs-lookup"><span data-stu-id="6586e-215">The code adds the credit card custom token to every message sent from the client to the service with its content automatically signed and encrypted.</span></span>  
  
     [!code-csharp[c_CustomToken#13](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_customtoken/cs/source.cs#13)]
     [!code-vb[c_CustomToken#13](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_customtoken/vb/source.vb#13)]  
  
 <span data-ttu-id="6586e-216">W tym temacie przedstawiono niezbędne do zaimplementowania i użycia niestandardowy token różnych fragmentów kodu.</span><span class="sxs-lookup"><span data-stu-id="6586e-216">This topic shows the various pieces of code necessary to implement and use a custom token.</span></span> <span data-ttu-id="6586e-217">Aby wyświetlić pełny przykład tego, jak te fragmenty kodu dopasowania, zobacz [niestandardowy Token](../../../../docs/framework/wcf/samples/custom-token.md).</span><span class="sxs-lookup"><span data-stu-id="6586e-217">To see a complete example of how all these pieces of code fit together see, [Custom Token](../../../../docs/framework/wcf/samples/custom-token.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6586e-218">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="6586e-218">See Also</span></span>  
 <xref:System.IdentityModel.Tokens.SecurityToken>  
 <xref:System.ServiceModel.Security.Tokens.SecurityTokenParameters>  
 <xref:System.ServiceModel.Security.WSSecurityTokenSerializer>  
 <xref:System.IdentityModel.Selectors.SecurityTokenProvider>  
 <xref:System.IdentityModel.Selectors.SecurityTokenAuthenticator>  
 <xref:System.IdentityModel.Policy.IAuthorizationPolicy>  
 <xref:System.IdentityModel.Selectors.SecurityTokenRequirement>  
 <xref:System.IdentityModel.Selectors.SecurityTokenManager>  
 <xref:System.ServiceModel.Description.ClientCredentials>  
 <xref:System.ServiceModel.Description.ServiceCredentials>  
 <xref:System.ServiceModel.Channels.SecurityBindingElement>  
 [<span data-ttu-id="6586e-219">Wskazówki: Tworzenie niestandardowego klienta i poświadczeń usługi</span><span class="sxs-lookup"><span data-stu-id="6586e-219">Walkthrough: Creating Custom Client and Service Credentials</span></span>](../../../../docs/framework/wcf/extending/walkthrough-creating-custom-client-and-service-credentials.md)  
 [<span data-ttu-id="6586e-220">Porady: tworzenie wystawcy uwierzytelnienia tokenu zabezpieczeń niestandardowych</span><span class="sxs-lookup"><span data-stu-id="6586e-220">How to: Create a Custom Security Token Authenticator</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-authenticator.md)  
 [<span data-ttu-id="6586e-221">Jak: utworzyć dostawcę tokenu zabezpieczającego niestandardowych</span><span class="sxs-lookup"><span data-stu-id="6586e-221">How to: Create a Custom Security Token Provider</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-security-token-provider.md)  
 [<span data-ttu-id="6586e-222">Architektura zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="6586e-222">Security Architecture</span></span>](http://msdn.microsoft.com/en-us/16593476-d36a-408d-808c-ae6fd483e28f)
