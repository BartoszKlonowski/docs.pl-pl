---
title: "Kontrolowanie zużycia zasobów i zwiększanie wydajności"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 9a829669-5f76-4c88-80ec-92d0c62c0660
caps.latest.revision: "18"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: d11cc876ba6fc9dcd94a88ebcde18b4bd13797de
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/21/2017
---
# <a name="controlling-resource-consumption-and-improving-performance"></a><span data-ttu-id="d9fe0-102">Kontrolowanie zużycia zasobów i zwiększanie wydajności</span><span class="sxs-lookup"><span data-stu-id="d9fe0-102">Controlling Resource Consumption and Improving Performance</span></span>
<span data-ttu-id="d9fe0-103">W tym temacie opisano różne właściwości w różnych obszarach [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] architekturę, która działa kontrolowanie zużycia zasobów i wpływają na metryki wydajności.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-103">This topic describes various properties in different areas of the [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] architecture that work to control resource consumption and affect performance metrics.</span></span>  
  
## <a name="properties-that-constrain-resource-consumption-in-wcf"></a><span data-ttu-id="d9fe0-104">Właściwości, które ograniczyć zużycie zasobów w programie WCF</span><span class="sxs-lookup"><span data-stu-id="d9fe0-104">Properties that Constrain Resource Consumption in WCF</span></span>  
 [!INCLUDE[indigo1](../../../includes/indigo1-md.md)]<span data-ttu-id="d9fe0-105">zastosowanie ograniczenia dotyczące niektórych typów procesów celów zabezpieczeń i wydajności.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-105"> applies constraints on certain types of processes for either security or performance purposes.</span></span> <span data-ttu-id="d9fe0-106">Ograniczenia te są dostępne w dwóch głównych formularzy, przydziały i limity.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-106">These constraints come in two main forms, either quotas and throttles.</span></span> <span data-ttu-id="d9fe0-107">*Przydziały* są limity wyzwalających osiągnięto lub przekroczono natychmiastowego wyjątek w pewnym momencie w systemie.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-107">*Quotas* are limits that when reached or exceeded trigger an immediate exception at some point in the system.</span></span> <span data-ttu-id="d9fe0-108">*Ogranicza* ograniczeń, które nie powodują natychmiast wyjątków.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-108">*Throttles* are limits that do not immediately cause an exception to be thrown.</span></span> <span data-ttu-id="d9fe0-109">Zamiast tego po osiągnięciu limitu ograniczania przepustowości przetwarzania nadal, ale w granicach ustawiony przez wartość tego ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-109">Instead, when a throttle limit is reached, processing continues but within the limits set by that throttle value.</span></span> <span data-ttu-id="d9fe0-110">To ograniczona przetwarzanie może wyzwolić wyjątek w innym miejscu, ale zależy to od aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-110">This limited processing might trigger an exception elsewhere, but this depends upon the application.</span></span>  
  
 <span data-ttu-id="d9fe0-111">Oprócz różnicy między przydziały i limity niektóre właściwości ograniczający znajdują się na poziomie serializacji, niektóre na poziomie transportu i niektóre na poziomie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-111">In addition to the distinction between quotas and throttles, some constraining properties are located at the serialization level, some at the transport level, and some at the application level.</span></span> <span data-ttu-id="d9fe0-112">Na przykład limit przydziału <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType>, który jest implementowany przez wszystkie elementy powiązania transportu dostarczany przez system, jest domyślnie do 65 536 bajtów utrudnić złośliwego klientów angażowania ataku typu "odmowa usługi" Usługa powodując nadmiernego pamięci Użycie.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-112">For example, the quota <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType>, which is implemented by all system-supplied transport binding elements, is set to 65,536 bytes by default to hinder malicious clients from engaging in denial-of-service attacks against a service by causing excessive memory consumption.</span></span> <span data-ttu-id="d9fe0-113">(Zazwyczaj można zwiększyć wydajność przez zmniejszenie tej wartości.)</span><span class="sxs-lookup"><span data-stu-id="d9fe0-113">(Typically, you can increase performance by lowering this value.)</span></span>  
  
 <span data-ttu-id="d9fe0-114">Na przykład limit przydziału serializacji <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> właściwość, która określa maksymalną liczbę obiektów, które serializator serializuje i deserializuje w jednej <xref:System.Runtime.Serialization.DataContractSerializer.ReadObject%2A> wywołania metody.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-114">An example of a serialization quota is the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> property, which specifies the maximum number of objects that the serializer serializes or deserializes in a single <xref:System.Runtime.Serialization.DataContractSerializer.ReadObject%2A> method call.</span></span> <span data-ttu-id="d9fe0-115">Na przykład ograniczania na poziomie aplikacji <xref:System.ServiceModel.Dispatcher.ServiceThrottle.MaxConcurrentSessions%2A?displayProperty=nameWithType> właściwość, która domyślnie ogranicza liczbę połączeń współbieżnych podczas zamykania kanału do 10.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-115">An example of an application-level throttle is the <xref:System.ServiceModel.Dispatcher.ServiceThrottle.MaxConcurrentSessions%2A?displayProperty=nameWithType> property, which by default restricts the number of concurrent sessionful channel connections to 10.</span></span> <span data-ttu-id="d9fe0-116">(W przeciwieństwie do przydziałów, po osiągnięciu tej wartości ograniczania aplikacja przetwarzanie jest kontynuowane, ale akceptuje nie nowych zamykania kanałów, co oznacza, że nowych klientów nie można połączyć z aż do jednego z innych kanałów sesyjnych została zakończona.)</span><span class="sxs-lookup"><span data-stu-id="d9fe0-116">(Unlike the quotas, if this throttle value is reached, the application continues processing but accepts no new sessionful channels, which means that new clients cannot connect until one of the other sessionful channels is ended.)</span></span>  
  
 <span data-ttu-id="d9fe0-117">Formanty te zostały zaprojektowane łagodzenia poza pole przed określone typy ataków lub metryki wydajności, takich jak zużycie pamięci, czas uruchamiania i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-117">These controls are designed to provide an out-of-the-box mitigation against certain types of attacks or to improve performance metrics such as memory footprint, start-up time, and so on.</span></span> <span data-ttu-id="d9fe0-118">W zależności od aplikacji, tych kontrolek można jednak utrudniać wydajność aplikacji usługi lub uniemożliwiają pracy na wszystkich aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-118">However, depending on the application, these controls can impede service application performance or prevent the application from working at all.</span></span> <span data-ttu-id="d9fe0-119">Na przykład, aplikacja do strumienia wideo łatwo może przekroczyć domyślny <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-119">For example, an application designed to stream video can easily exceed the default <xref:System.ServiceModel.Channels.TransportBindingElement.MaxReceivedMessageSize%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="d9fe0-120">Ten temat zawiera przegląd różnych formantów stosowany do aplikacji na wszystkich poziomach [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], w tym artykule opisano różne sposoby, aby uzyskać więcej informacji na temat tego, czy jest to ustawienie jest zakłócały aplikacji i opisuje sposoby Popraw różnych w rozwiązywaniu problemów.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-120">This topic provides an overview of the various controls applied to applications at all levels of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)], describes various ways to obtain more information about whether a setting is hindering your application, and describes ways to correct various problems.</span></span> <span data-ttu-id="d9fe0-121">Większość limity i niektóre przydziały są dostępne na poziomie aplikacji, nawet wtedy, gdy właściwość podstawowy jest ograniczeniem serializacji lub transportu.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-121">Most throttles and some quotas are available at the application level, even when the base property is a serialization or transport constraint.</span></span> <span data-ttu-id="d9fe0-122">Na przykład można ustawić <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> za pomocą właściwości <xref:System.ServiceModel.ServiceBehaviorAttribute.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> właściwość klasy usługi.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-122">For example, you can set the <xref:System.Runtime.Serialization.DataContractSerializer.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> property using the <xref:System.ServiceModel.ServiceBehaviorAttribute.MaxItemsInObjectGraph%2A?displayProperty=nameWithType> property on the service class.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d9fe0-123">Jeśli masz konkretnych problemów, należy najpierw przeczytać [szybkiego startu WCF Rozwiązywanie problemów z](../../../docs/framework/wcf/wcf-troubleshooting-quickstart.md) aby zobaczyć, czy problem (rozwiązanie) jest wyświetlany i.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-123">If you have a particular problem, you should first read the [WCF Troubleshooting Quickstart](../../../docs/framework/wcf/wcf-troubleshooting-quickstart.md) to see whether your problem (and a solution) is listed there.</span></span>  
  
 <span data-ttu-id="d9fe0-124">Właściwości, które ograniczają procesów serializacji są wymienione w [zagadnienia dotyczące zabezpieczeń dla danych](../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span><span class="sxs-lookup"><span data-stu-id="d9fe0-124">Properties that restrict serialization processes are listed in [Security Considerations for Data](../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span></span> <span data-ttu-id="d9fe0-125">Właściwości, które ograniczyć zużycie zasobów związanych z transportu są wymienione w [przydziały dla transportu](../../../docs/framework/wcf/feature-details/transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="d9fe0-125">Properties that restrict the consumption of resources related to transports are listed in [Transport Quotas](../../../docs/framework/wcf/feature-details/transport-quotas.md).</span></span> <span data-ttu-id="d9fe0-126">Właściwości, które ograniczają zużycie zasobów w warstwie aplikacji są członkami <xref:System.ServiceModel.Dispatcher.ServiceThrottle> klasy.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-126">Properties that restrict the consumption of resources at the application layer are the members of the <xref:System.ServiceModel.Dispatcher.ServiceThrottle> class.</span></span>  
  
## <a name="detecting-application-and-performance-issues-related-to-quota-settings"></a><span data-ttu-id="d9fe0-127">Wykrywanie aplikacji i problemy z wydajnością związane z ustawieniami limitu przydziału</span><span class="sxs-lookup"><span data-stu-id="d9fe0-127">Detecting Application and Performance Issues Related to Quota Settings</span></span>  
 <span data-ttu-id="d9fe0-128">Aby włączyć funkcję aplikacji w warstwie podstawowa w szerokim zakresie typów aplikacji, zapewniając Podstawowa ochrona typowych problemów z zabezpieczeniami zostały wybrane ustawienia domyślne poprzedniej wartości.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-128">The defaults of the preceding values have been chosen to enable basic application functionality across a wide range of application types while providing basic protection against common security issues.</span></span> <span data-ttu-id="d9fe0-129">Jednak projektów innej aplikacji może przekroczyć co najmniej jednego ustawienia ograniczania, mimo że aplikacja, w przeciwnym razie jest bezpieczna i będzie działać zgodnie z założeniami.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-129">However, different application designs might exceed one or more throttle settings although the application otherwise is secure and would work as designed.</span></span> <span data-ttu-id="d9fe0-130">W takich sytuacjach należy wskazać przekroczenia wartości ograniczania i w poziomie i podjąć decyzję w odpowiedni sposób postępowania w celu zwiększenia przepływności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-130">In these cases, you must identify which throttle values are being exceeded and at what level, and decide on the appropriate course of action to increase application throughput.</span></span>  
  
 <span data-ttu-id="d9fe0-131">Zazwyczaj podczas pisania aplikacji i jej debugowanie, ustawiania <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> właściwości `true` w pliku konfiguracji lub programowo.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-131">Typically, when writing the application and debugging it, you set the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property to `true` in the configuration file or programmatically.</span></span> <span data-ttu-id="d9fe0-132">To powoduje, że [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] Aby przywrócić dane śledzenia stosu wyjątków usługi aplikacji klienta w celu wyświetlenia.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-132">This instructs [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] to return service exception stack traces to the client application for viewing.</span></span> <span data-ttu-id="d9fe0-133">Ta funkcja raporty większość wyjątków na poziomie aplikacji w taki sposób, aby wyświetlić ustawienia limitu przydziału, które mogą być wykonywane, jeżeli jest to problem.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-133">This feature reports most application-level exceptions in such a way as to display which quota settings might be involved, if that is the problem.</span></span>  
  
 <span data-ttu-id="d9fe0-134">Niektóre wyjątki wykonana w czasie wykonywania poniżej widoczność warstwy aplikacji i nie są zwracane przy użyciu tego mechanizmu i nie mogą one być obsługiwane przez niestandardowy <xref:System.ServiceModel.Dispatcher.IErrorHandler?displayProperty=nameWithType> implementacji.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-134">Some exceptions happen at run time below the visibility of the application layer and are not returned using this mechanism, and they might not be handled by a custom <xref:System.ServiceModel.Dispatcher.IErrorHandler?displayProperty=nameWithType> implementation.</span></span> <span data-ttu-id="d9fe0-135">Jeśli pracujesz w środowisku projektowania, takich jak program Microsoft Visual Studio, większość tych wyjątków są automatycznie wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-135">If you are in a development environment like Microsoft Visual Studio, most of these exceptions are displayed automatically.</span></span> <span data-ttu-id="d9fe0-136">Jednak niektóre wyjątki można zamaskować programowanie ustawienia środowiska, takich jak [tylko mój kod](http://go.microsoft.com/fwlink/?LinkId=82174) ustawień w programie Visual Studio 2005.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-136">However, some exceptions can be masked by development environment settings such as the [Just My Code](http://go.microsoft.com/fwlink/?LinkId=82174) settings in Visual Studio 2005.</span></span>  
  
 <span data-ttu-id="d9fe0-137">Niezależnie od możliwości środowiska deweloperskiego, można użyć funkcji [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] śledzenie i rejestrowanie komunikatów debugowania wszystkie wyjątki i dostrajania wydajności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-137">Regardless of the capabilities of your development environment, you can use capabilities of [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] tracing and message logging to debug all exceptions and tune the performance of your applications.</span></span> <span data-ttu-id="d9fe0-138">Aby uzyskać więcej informacji, zobacz [przy użyciu śledzenie, aby rozwiązać Twoja aplikacja](../../../docs/framework/wcf/diagnostics/tracing/using-tracing-to-troubleshoot-your-application.md).</span><span class="sxs-lookup"><span data-stu-id="d9fe0-138">For more information, see [Using Tracing to Troubleshoot Your Application](../../../docs/framework/wcf/diagnostics/tracing/using-tracing-to-troubleshoot-your-application.md).</span></span>  
  
## <a name="performance-issues-and-xmlserializer"></a><span data-ttu-id="d9fe0-139">Problemy z wydajnością i XmlSerializer</span><span class="sxs-lookup"><span data-stu-id="d9fe0-139">Performance Issues and XmlSerializer</span></span>  
 <span data-ttu-id="d9fe0-140">Usługi i aplikacje klienckie, które używają typów danych, które są do serializacji przy użyciu <xref:System.Xml.Serialization.XmlSerializer> Generowanie i kompilacja kodu serializacji dla tych typów danych w czasie wykonywania, co może spowodować wolne uruchamiania wydajności.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-140">Services and client applications that use data types that are serializable using the <xref:System.Xml.Serialization.XmlSerializer> generate and compile serialization code for those data types at run time, which can result in slow start-up performance.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d9fe0-141">Serializacja wstępnie wygenerowanego kodu można użyć tylko w aplikacjach klienckich, a nie w usługach.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-141">Pre-generated serialization code can be used only in client applications and not in services.</span></span>  
  
 <span data-ttu-id="d9fe0-142">[Narzędzie narzędzia metadanych elementu ServiceModel (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) może poprawić wydajność uruchamiania tych aplikacji przez generowania kodu serializacji niezbędne z skompilowane zestawy dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-142">The [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) can improve start-up performance for these applications by generating the necessary serialization code from the compiled assemblies for the application.</span></span> <span data-ttu-id="d9fe0-143">Aby uzyskać więcej informacji, zobacz [porady: poprawy uruchamiania czasu programu WCF aplikacje klienckie przy użyciu elementu XmlSerializer](../../../docs/framework/wcf/feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md).</span><span class="sxs-lookup"><span data-stu-id="d9fe0-143">For more information, see [How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer](../../../docs/framework/wcf/feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md).</span></span>  
  
## <a name="performance-issues-when-hosting-wcf-services-under-aspnet"></a><span data-ttu-id="d9fe0-144">Problemy z wydajnością odnośnie do hostowania usług WCF w ramach platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="d9fe0-144">Performance Issues When Hosting WCF Services Under ASP.NET</span></span>  
 <span data-ttu-id="d9fe0-145">Gdy usługa WCF jest hostowana w ramach usług IIS i platformy ASP.NET, ustawienia konfiguracji usług IIS i platformy ASP.NET może mieć wpływ na przepustowość i pamięci rozmiaru usługi WCF.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-145">When a WCF service is hosted under IIS and ASP.NET, the configuration settings of IIS and ASP.NET can affect the throughput and memory footprint of the WCF service.</span></span>  [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="d9fe0-146">Wydajność programu ASP.NET, zobacz [poprawę wydajności ASP.NET](http://go.microsoft.com/fwlink/?LinkId=186462).</span><span class="sxs-lookup"><span data-stu-id="d9fe0-146"> ASP.NET performance, see [Improving ASP.NET Performance](http://go.microsoft.com/fwlink/?LinkId=186462).</span></span>  <span data-ttu-id="d9fe0-147">Jeden ustawienie może być jest niezamierzone skutki <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A>, która jest właściwością <xref:System.Web.Configuration.ProcessModelSection>.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-147">One setting that might have unintended consequences is <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A>, which is a property of the <xref:System.Web.Configuration.ProcessModelSection>.</span></span> <span data-ttu-id="d9fe0-148">Jeśli aplikacja ma stały lub małej liczby klientów, ustawienie <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A> 2 może zawierać większą przepustowość na komputerze wieloprocesorowych, który ma użycie procesora CPU, bliski 100%.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-148">If your application has a fixed or small number of clients, setting <xref:System.Web.Configuration.ProcessModelSection.MinWorkerThreads%2A> to 2 might provide a throughput boost on a multiprocessor machine that has a CPU utilization close to 100%.</span></span> <span data-ttu-id="d9fe0-149">To zwiększenie wydajności jest dostarczany z koszt: również spowoduje zwiększenie użycia pamięci, co może zmniejszyć skalowalności.</span><span class="sxs-lookup"><span data-stu-id="d9fe0-149">This increase in performance comes with a cost: it will also cause an increase in memory usage, which could reduce scalability.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d9fe0-150">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="d9fe0-150">See Also</span></span>  
 [<span data-ttu-id="d9fe0-151">Administracja i Diagnostyka</span><span class="sxs-lookup"><span data-stu-id="d9fe0-151">Administration and Diagnostics</span></span>](../../../docs/framework/wcf/diagnostics/index.md)  
 [<span data-ttu-id="d9fe0-152">Duże ilości danych i przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="d9fe0-152">Large Data and Streaming</span></span>](../../../docs/framework/wcf/feature-details/large-data-and-streaming.md)
