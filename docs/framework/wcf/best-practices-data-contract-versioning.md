---
title: 'Najlepsze rozwiązania: przechowywanie wersji kontraktu danych'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: 4d500c37efa4a90e24b06cd2e886147e1f159d4e
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/15/2019
ms.locfileid: "72320779"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="9227f-102">Najlepsze rozwiązania: przechowywanie wersji kontraktu danych</span><span class="sxs-lookup"><span data-stu-id="9227f-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="9227f-103">W tym temacie przedstawiono najlepsze rozwiązania dotyczące tworzenia kontraktów danych, które mogą być łatwo rozmieszczone w czasie.</span><span class="sxs-lookup"><span data-stu-id="9227f-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="9227f-104">Aby uzyskać więcej informacji na temat umów dotyczących danych, zobacz tematy dotyczące [korzystania z kontraktów danych](./feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="9227f-104">For more information about data contracts, see the topics in [Using Data Contracts](./feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="9227f-105">Uwaga dotycząca weryfikacji schematu</span><span class="sxs-lookup"><span data-stu-id="9227f-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="9227f-106">W omawianiu wersji kontraktu danych należy zauważyć, że schemat kontraktu danych wyeksportowany przez Windows Communication Foundation (WCF) nie ma żadnej obsługi wersji, inne niż fakt, że elementy są domyślnie oznaczone jako opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="9227f-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="9227f-107">Oznacza to, że nawet najbardziej typowy scenariusz obsługi wersji, taki jak dodanie nowego elementu członkowskiego danych, nie może być zaimplementowany w sposób, który jest bezproblemowy w odniesieniu do danego schematu.</span><span class="sxs-lookup"><span data-stu-id="9227f-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="9227f-108">Nowsze wersje kontraktu danych (na przykład z nowym elementem członkowskim danych) nie weryfikują się przy użyciu starego schematu.</span><span class="sxs-lookup"><span data-stu-id="9227f-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="9227f-109">Istnieje jednak wiele scenariuszy, w których ścisła zgodność schematu nie jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="9227f-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="9227f-110">Wiele platform usług sieci Web, w tym usług sieci Web WCF i XML utworzonych za pomocą ASP.NET, nie przeprowadzaj walidacji schematu domyślnie, dlatego można tolerować dodatkowe elementy, które nie są opisane przez schemat.</span><span class="sxs-lookup"><span data-stu-id="9227f-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="9227f-111">Podczas pracy z takimi platformami scenariusze wielu wersji są łatwiejsze do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="9227f-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="9227f-112">W ten sposób istnieją dwa zestawy wytycznych dotyczących wersji kontraktu danych: jeden zestaw dla scenariuszy, w których ważna jest ścisła ważność schematu i inny zestaw dla scenariuszy, gdy nie jest.</span><span class="sxs-lookup"><span data-stu-id="9227f-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="9227f-113">Przechowywanie wersji, gdy wymagana jest Walidacja schematu</span><span class="sxs-lookup"><span data-stu-id="9227f-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="9227f-114">Jeśli wymagana jest ścisła ważność schematu we wszystkich kierunkach (od nowa do starych i starych do nowych), kontrakty danych należy traktować jako niezmienne.</span><span class="sxs-lookup"><span data-stu-id="9227f-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="9227f-115">Jeśli wymagana jest obsługa wersji, należy utworzyć nowy kontrakt danych z inną nazwą lub przestrzenią nazw, a kontrakt usługi przy użyciu typu danych powinien mieć odpowiednią wersję.</span><span class="sxs-lookup"><span data-stu-id="9227f-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="9227f-116">Na przykład kontrakt usługi przetwarzania zamówień zakupu o nazwie `PoProcessing` z operacją `PostPurchaseOrder` przyjmuje parametr, który jest zgodny z kontraktem danych `PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="9227f-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="9227f-117">Jeśli kontrakt `PurchaseOrder` musi ulec zmianie, należy utworzyć nowy kontrakt danych, czyli `PurchaseOrder2`, który obejmuje zmiany.</span><span class="sxs-lookup"><span data-stu-id="9227f-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="9227f-118">Następnie należy obsłużyć obsługę wersji na poziomie kontraktu usługi.</span><span class="sxs-lookup"><span data-stu-id="9227f-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="9227f-119">Na przykład przez utworzenie `PostPurchaseOrder2` operacji, która przyjmuje parametr `PurchaseOrder2` lub przez utworzenie kontraktu usługi `PoProcessing2`, gdzie operacja `PostPurchaseOrder` przyjmuje kontrakt danych `PurchaseOrder2`.</span><span class="sxs-lookup"><span data-stu-id="9227f-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="9227f-120">Należy zauważyć, że zmiany umów dotyczących danych, do których odwołują się inne kontrakty danych, również przechodzą do warstwy modelu usług.</span><span class="sxs-lookup"><span data-stu-id="9227f-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="9227f-121">Na przykład w poprzednim scenariuszu kontrakt danych `PurchaseOrder` nie musi być zmieniany.</span><span class="sxs-lookup"><span data-stu-id="9227f-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="9227f-122">Zawiera on jednak element członkowski danych kontraktu danych `Customer`, który z kolei zawierał element członkowski danych kontraktu danych `Address`, który należy zmienić.</span><span class="sxs-lookup"><span data-stu-id="9227f-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="9227f-123">W takim przypadku konieczne będzie utworzenie kontraktu danych `Address2` z wymaganymi zmianami, kontraktu danych `Customer2` zawierającego element członkowski danych `Address2` oraz kontrakt danych `PurchaseOrder2`, który zawiera element członkowski danych `Customer2`.</span><span class="sxs-lookup"><span data-stu-id="9227f-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="9227f-124">Tak jak w poprzednim przypadku, kontrakt usługi będzie musiał również mieć wersję.</span><span class="sxs-lookup"><span data-stu-id="9227f-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="9227f-125">Chociaż w tych przykładach nazwy zostały zmienione (poprzez dołączenie "2"), zaleca się zmianę przestrzeni nazw zamiast nazw przez dołączenie nowych przestrzeni nazw z numerem wersji lub datą.</span><span class="sxs-lookup"><span data-stu-id="9227f-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="9227f-126">Na przykład kontrakt danych `http://schemas.contoso.com/2005/05/21/PurchaseOrder` zmieni się na kontrakt danych `http://schemas.contoso.com/2005/10/14/PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="9227f-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="9227f-127">Aby uzyskać więcej informacji, Zobacz najlepsze rozwiązania: [przechowywanie wersji usługi](service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="9227f-127">For more information, see Best Practices: [Service Versioning](service-versioning.md).</span></span>  
  
 <span data-ttu-id="9227f-128">Czasami należy zagwarantować ścisłą zgodność schematu dla komunikatów wysyłanych przez aplikację, ale nie można polegać na komunikatach przychodzących, które są ściśle zgodne ze schematem.</span><span class="sxs-lookup"><span data-stu-id="9227f-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="9227f-129">W takim przypadku istnieje zagrożenie, że komunikat przychodzący może zawierać dane nadmiarowe.</span><span class="sxs-lookup"><span data-stu-id="9227f-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="9227f-130">Nadmiarowe wartości są przechowywane i zwracane przez program WCF i w rezultacie są wysyłane komunikaty nieprawidłowe w schemacie.</span><span class="sxs-lookup"><span data-stu-id="9227f-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="9227f-131">Aby uniknąć tego problemu, funkcja okrężna musi być wyłączona.</span><span class="sxs-lookup"><span data-stu-id="9227f-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="9227f-132">Istnieją dwa sposoby, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="9227f-132">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="9227f-133">Nie należy implementować interfejsu <xref:System.Runtime.Serialization.IExtensibleDataObject> na żadnym z typów.</span><span class="sxs-lookup"><span data-stu-id="9227f-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="9227f-134">Zastosuj atrybut <xref:System.ServiceModel.ServiceBehaviorAttribute> do kontraktu usługi z właściwością <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> ustawioną na `true`.</span><span class="sxs-lookup"><span data-stu-id="9227f-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="9227f-135">Aby uzyskać więcej informacji na temat rundy, zobacz [Kontrakty danych zgodne z przekazywaniem dalej](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="9227f-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="9227f-136">Przechowywanie wersji, gdy Walidacja schematu nie jest wymagana</span><span class="sxs-lookup"><span data-stu-id="9227f-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="9227f-137">Ścisła zgodność schematu jest rzadko wymagana.</span><span class="sxs-lookup"><span data-stu-id="9227f-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="9227f-138">Wiele platform tolerowanie dodatkowych elementów nieopisanych przez schemat.</span><span class="sxs-lookup"><span data-stu-id="9227f-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="9227f-139">Tak długo, jak to jest dopuszczalne, można użyć pełnego zestawu funkcji opisanych w temacie [przechowywanie wersji kontraktu danych](./feature-details/data-contract-versioning.md) i [Kontrakty danych zgodne z przekazaniem dalej](./feature-details/forward-compatible-data-contracts.md) .</span><span class="sxs-lookup"><span data-stu-id="9227f-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](./feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="9227f-140">Zalecane są następujące wskazówki.</span><span class="sxs-lookup"><span data-stu-id="9227f-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="9227f-141">Aby można było wysyłać nowe wersje typu, w przypadku których oczekiwany jest starszy lub wysyłany jest stary, w niektórych przypadkach należy wykonać tylko te wskazówki.</span><span class="sxs-lookup"><span data-stu-id="9227f-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="9227f-142">Inne wskazówki nie są ściśle wymagane, ale są wymienione w tym miejscu, ponieważ mogą one mieć wpływ na przyszłą wersję schematu.</span><span class="sxs-lookup"><span data-stu-id="9227f-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="9227f-143">Nie należy próbować uzyskać wersji kontraktów danych przez dziedziczenie typu.</span><span class="sxs-lookup"><span data-stu-id="9227f-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="9227f-144">Aby utworzyć późniejsze wersje, należy zmienić kontrakt danych na istniejącym typie lub utworzyć nowy niepowiązany typ.</span><span class="sxs-lookup"><span data-stu-id="9227f-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="9227f-145">Użycie dziedziczenia wraz z kontraktami danych jest dozwolone, pod warunkiem, że dziedziczenie nie jest używane jako mechanizm obsługi wersji i że są stosowane pewne reguły.</span><span class="sxs-lookup"><span data-stu-id="9227f-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="9227f-146">Jeśli typ pochodzi od określonego typu podstawowego, nie należy dziedziczyć go z innego typu podstawowego w przyszłej wersji (chyba że ma ten sam kontrakt danych).</span><span class="sxs-lookup"><span data-stu-id="9227f-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="9227f-147">Istnieje jeden wyjątek: można wstawić typ do hierarchii między typem kontraktu danych i jego typem bazowym, ale tylko wtedy, gdy nie zawiera składowych danych o takich samych nazwach jak inne elementy członkowskie w innych typach w hierarchii.</span><span class="sxs-lookup"><span data-stu-id="9227f-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="9227f-148">Ogólnie rzecz biorąc, używanie elementów członkowskich danych o takich samych nazwach na różnych poziomach hierarchii dziedziczenia może prowadzić do poważnych problemów z wersją i należy je unikać.</span><span class="sxs-lookup"><span data-stu-id="9227f-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="9227f-149">Począwszy od pierwszej wersji kontraktu danych, należy zawsze zaimplementować <xref:System.Runtime.Serialization.IExtensibleDataObject>, aby umożliwić wykonywanie rundy.</span><span class="sxs-lookup"><span data-stu-id="9227f-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="9227f-150">Aby uzyskać więcej informacji, zobacz [Kontrakty danych zgodne z przekazywaniem dalej](./feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="9227f-150">For more information, see [Forward-Compatible Data Contracts](./feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="9227f-151">Jeśli wydano co najmniej jedną wersję typu bez implementowania tego interfejsu, należy zaimplementować ją w następnej wersji typu.</span><span class="sxs-lookup"><span data-stu-id="9227f-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="9227f-152">W nowszych wersjach nie należy zmieniać nazwy kontraktu danych ani przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="9227f-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="9227f-153">Jeśli zmieniasz nazwę lub przestrzeń nazw typu podstawowego kontraktu danych, pamiętaj, aby zachować nazwę i przestrzeń nazw kontraktu danych przy użyciu odpowiednich mechanizmów, takich jak Właściwość <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="9227f-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="9227f-154">Aby uzyskać więcej informacji o nazewnictwie, zobacz [nazwy kontraktów danych](./feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="9227f-154">For more information about naming, see [Data Contract Names](./feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="9227f-155">W nowszych wersjach nie należy zmieniać nazw żadnych elementów członkowskich danych.</span><span class="sxs-lookup"><span data-stu-id="9227f-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="9227f-156">W przypadku zmiany nazwy pola, właściwości lub zdarzenia będącego elementem członkowskim danych Użyj właściwości `Name` <xref:System.Runtime.Serialization.DataMemberAttribute>, aby zachować istniejącą nazwę elementu członkowskiego danych.</span><span class="sxs-lookup"><span data-stu-id="9227f-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="9227f-157">W nowszych wersjach nie należy zmieniać typu żadnego pola, właściwości ani zdarzenia będącego członkiem danych, w taki sposób, że kontrakt danych uzyskanych dla tego elementu członkowskiego danych ulega zmianie.</span><span class="sxs-lookup"><span data-stu-id="9227f-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="9227f-158">Należy pamiętać, że typy interfejsów są równoważne <xref:System.Object> na potrzeby określania oczekiwanego kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="9227f-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="9227f-159">W nowszych wersjach nie należy zmieniać kolejności istniejących elementów członkowskich danych przez dostosowanie właściwości <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> atrybutu <xref:System.Runtime.Serialization.DataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="9227f-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="9227f-160">W nowszych wersjach można dodać nowe składowe danych.</span><span class="sxs-lookup"><span data-stu-id="9227f-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="9227f-161">Należy zawsze przestrzegać następujących zasad:</span><span class="sxs-lookup"><span data-stu-id="9227f-161">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="9227f-162">Właściwość <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> powinna zawsze pozostać w wartości domyślnej `false`.</span><span class="sxs-lookup"><span data-stu-id="9227f-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="9227f-163">Jeśli wartość domyślna `null` lub zero dla elementu członkowskiego jest nieakceptowalna, metoda wywołania zwrotnego powinna zostać podana przy użyciu <xref:System.Runtime.Serialization.OnDeserializingAttribute> w celu zapewnienia uzasadnionej wartości domyślnej w przypadku, gdy element członkowski nie jest obecny w strumieniu przychodzącym.</span><span class="sxs-lookup"><span data-stu-id="9227f-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="9227f-164">Aby uzyskać więcej informacji na temat wywołania zwrotnego, zobacz [wywołania zwrotne serializacji odporne na wersje](./feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="9227f-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](./feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="9227f-165">Właściwość <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> powinna być używana do upewnienia się, że wszystkie nowo dodane elementy członkowskie danych są wyświetlane po istniejących elementach członkowskich danych.</span><span class="sxs-lookup"><span data-stu-id="9227f-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="9227f-166">Zalecanym sposobem wykonania tej czynności jest następujący: żaden z elementów członkowskich danych w pierwszej wersji kontraktu danych nie powinien mieć ustawionej właściwości `Order`.</span><span class="sxs-lookup"><span data-stu-id="9227f-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="9227f-167">Wszyscy członkowie danych dodani w wersji 2 kontraktu danych powinni mieć Właściwość `Order` ustawioną na wartość 2.</span><span class="sxs-lookup"><span data-stu-id="9227f-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="9227f-168">Wszyscy członkowie danych dodani w wersji 3 kontraktu danych powinni mieć ustawioną `Order` i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="9227f-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="9227f-169">Dozwolone jest posiadanie więcej niż jednego elementu członkowskiego danych na ten sam numer `Order`.</span><span class="sxs-lookup"><span data-stu-id="9227f-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="9227f-170">Nie należy usuwać elementów członkowskich danych w nowszych wersjach, nawet jeśli właściwość <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> została pozostawiona z domyślną właściwością `false` w poprzednich wersjach.</span><span class="sxs-lookup"><span data-stu-id="9227f-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="9227f-171">Nie należy zmieniać właściwości `IsRequired` dla żadnych istniejących elementów członkowskich danych z wersji do wersji.</span><span class="sxs-lookup"><span data-stu-id="9227f-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="9227f-172">W przypadku wymaganych elementów członkowskich danych (gdzie `IsRequired` jest `true`) nie należy zmieniać właściwości `EmitDefaultValue` z wersji na wersję.</span><span class="sxs-lookup"><span data-stu-id="9227f-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="9227f-173">Nie należy podejmować próby utworzenia gałęziowych hierarchii wersji.</span><span class="sxs-lookup"><span data-stu-id="9227f-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="9227f-174">Oznacza to, że zawsze powinna być ścieżką w co najmniej jednym kierunku od dowolnej wersji do innej wersji, używając tylko zmian dozwolonych w tych wytycznych.</span><span class="sxs-lookup"><span data-stu-id="9227f-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="9227f-175">Na przykład jeśli wersja 1 kontraktu danych osoby zawiera tylko element członkowski danych, nie należy tworzyć wersji 2a kontraktu, dodając tylko członka wieku i wersji 2b, dodając tylko członka adresu.</span><span class="sxs-lookup"><span data-stu-id="9227f-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="9227f-176">Przejście od od 2A do 2b spowoduje usunięcie wieku i dodanie adresu; przejście w inne kierunki spowoduje usunięcie adresu i dodanie wieku.</span><span class="sxs-lookup"><span data-stu-id="9227f-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="9227f-177">Te wytyczne nie zezwalają na usuwanie członków.</span><span class="sxs-lookup"><span data-stu-id="9227f-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="9227f-178">Zazwyczaj nie należy tworzyć nowych podtypów istniejących typów kontraktu danych w nowej wersji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9227f-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="9227f-179">Podobnie nie należy tworzyć nowych kontraktów danych, które są używane zamiast składowych danych zadeklarowanych jako obiekt lub jako typy interfejsów.</span><span class="sxs-lookup"><span data-stu-id="9227f-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="9227f-180">Tworzenie tych nowych klas jest dozwolone tylko wtedy, gdy wiadomo, że można dodać nowe typy do listy znanych typów wszystkich wystąpień starego aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9227f-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="9227f-181">Na przykład w wersji 1 aplikacji może istnieć typ kontraktu danych LibraryItem z podtypem kontraktu i danych dotyczących książki i gazetowej.</span><span class="sxs-lookup"><span data-stu-id="9227f-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="9227f-182">Następnie LibraryItem będzie zawierać listę znanych typów, która zawiera książkę i gazetę.</span><span class="sxs-lookup"><span data-stu-id="9227f-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="9227f-183">Załóżmy, że teraz dodasz typ magazynu w wersji 2, która jest podtypem LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="9227f-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="9227f-184">Jeśli wyślesz wystąpienie magazynu z wersji 2 do wersji 1, kontrakt danych magazynu nie zostanie znaleziony na liście znanych typów i zostanie zgłoszony wyjątek.</span><span class="sxs-lookup"><span data-stu-id="9227f-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="9227f-185">Nie należy dodawać ani usuwać elementów członkowskich wyliczenia między wersjami.</span><span class="sxs-lookup"><span data-stu-id="9227f-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="9227f-186">Nie należy również zmieniać nazw elementów członkowskich wyliczenia, chyba że jest używana Właściwość Name w atrybucie `EnumMemberAttribute` w celu zachowania ich nazw w modelu kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="9227f-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="9227f-187">Kolekcje są zamienne w modelu kontraktu danych, zgodnie z opisem w obszarze [typy kolekcji w kontraktach danych](./feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="9227f-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](./feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="9227f-188">Pozwala to na doskonałe elastyczność.</span><span class="sxs-lookup"><span data-stu-id="9227f-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="9227f-189">Należy jednak pamiętać, że nie można przypadkowo zmienić typu kolekcji w sposób niewymienny z wersji na wersję.</span><span class="sxs-lookup"><span data-stu-id="9227f-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="9227f-190">Na przykład nie należy zmieniać żadnej dostosowanej kolekcji (to oznacza, że bez atrybutu `CollectionDataContractAttribute`) do dostosowanej kolekcji lub dostosowanej do niedostosowanej.</span><span class="sxs-lookup"><span data-stu-id="9227f-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="9227f-191">Ponadto nie należy zmieniać właściwości `CollectionDataContractAttribute` z wersji na wersję.</span><span class="sxs-lookup"><span data-stu-id="9227f-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="9227f-192">Jedyną dozwoloną zmianą jest dodanie nazwy lub właściwości przestrzeni nazw, jeśli nazwa lub przestrzeń nazw odpowiedniego typu kolekcji uległy zmianie i należy wprowadzić swoją nazwę kontraktu danych i przestrzeń nazw tak samo jak w poprzedniej wersji.</span><span class="sxs-lookup"><span data-stu-id="9227f-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="9227f-193">Niektóre z wymienionych poniżej wskazówek można bezpiecznie zignorować w przypadku zastosowania specjalnych okoliczności.</span><span class="sxs-lookup"><span data-stu-id="9227f-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="9227f-194">Upewnij się, że w pełni rozumiesz mechanizmy serializacji, deserializacji i schematu, które są wykorzystywane przed odchyleniami od wytycznych.</span><span class="sxs-lookup"><span data-stu-id="9227f-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9227f-195">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="9227f-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="9227f-196">Używanie kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="9227f-196">Using Data Contracts</span></span>](./feature-details/using-data-contracts.md)
- [<span data-ttu-id="9227f-197">Przechowywanie wersji kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="9227f-197">Data Contract Versioning</span></span>](./feature-details/data-contract-versioning.md)
- [<span data-ttu-id="9227f-198">Nazwy kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="9227f-198">Data Contract Names</span></span>](./feature-details/data-contract-names.md)
- [<span data-ttu-id="9227f-199">Kontrakty danych zgodne z nowszymi wersjami</span><span class="sxs-lookup"><span data-stu-id="9227f-199">Forward-Compatible Data Contracts</span></span>](./feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="9227f-200">Wywołania zwrotne serializacji z tolerancją dla wersji</span><span class="sxs-lookup"><span data-stu-id="9227f-200">Version-Tolerant Serialization Callbacks</span></span>](./feature-details/version-tolerant-serialization-callbacks.md)
