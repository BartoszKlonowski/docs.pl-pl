---
title: 'Najlepsze rozwiązania: Przechowywanie wersji kontraktów danych'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: a56111796b1e301862dcbd9e76a6294c709ea06f
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/28/2019
ms.locfileid: "64652154"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="8901a-102">Najlepsze rozwiązania: Przechowywanie wersji kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="8901a-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="8901a-103">Ten temat zawiera najlepsze rozwiązania dotyczące tworzenia kontraktów danych, które można łatwo ewoluować wraz z upływem czasu.</span><span class="sxs-lookup"><span data-stu-id="8901a-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="8901a-104">Aby uzyskać więcej informacji na temat kontraktów danych, zobacz Tematy w [za pomocą kontraktów danych](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8901a-104">For more information about data contracts, see the topics in [Using Data Contracts](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="8901a-105">Uwaga dotycząca sprawdzania poprawności schematu</span><span class="sxs-lookup"><span data-stu-id="8901a-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="8901a-106">W Omawiając przechowywanie wersji kontraktów danych, jest należy pamiętać, że schematu kontraktu danych, które są eksportowane przez Windows Communication Foundation (WCF) nie ma żadnych obsługą wersjonowania, poza tym, że elementy są oznaczone jako opcjonalną domyślnie.</span><span class="sxs-lookup"><span data-stu-id="8901a-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="8901a-107">Oznacza to, że nawet najbardziej typowe wersji scenariusza, takie jak dodanie nowy element członkowski danych nie mogą zostać zaimplementowane w sposób, który jest bezproblemowe w odniesieniu do danego schematu.</span><span class="sxs-lookup"><span data-stu-id="8901a-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="8901a-108">Nowsze wersje kontraktu danych (za pomocą nowej składowej danych, na przykład) nie weryfikują przy użyciu starego schematu.</span><span class="sxs-lookup"><span data-stu-id="8901a-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="8901a-109">Istnieją jednak wiele scenariuszy, w których zgodność ścisłego schematu nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="8901a-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="8901a-110">Wiele platform usług sieci Web, w tym usług WCF i sieci Web XML utworzone za pomocą programu ASP.NET, nie wykonać sprawdzanie poprawności schematu domyślnie i w związku z tym tolerować dodatkowe elementy, które nie zostały opisane w schemacie.</span><span class="sxs-lookup"><span data-stu-id="8901a-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="8901a-111">Podczas pracy z takich platform, wiele scenariuszy, w wersji są łatwiejsze do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="8901a-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="8901a-112">W związku z tym, są dwa zestawy danych kontraktu wskazówki wersji: on ustawiony dla scenariuszy, w którym ważność ścisłego schematu jest ważna, a innego zestawu dla scenariuszy, gdy nie jest.</span><span class="sxs-lookup"><span data-stu-id="8901a-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="8901a-113">Przechowywanie wersji, gdy wymagana jest Weryfikacja schematu</span><span class="sxs-lookup"><span data-stu-id="8901a-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="8901a-114">Jeśli ważność ścisłego schematu jest wymagany we wszystkich kierunkach (nowy w starym i starego do nowego), kontraktów danych należy rozważyć niezmienne.</span><span class="sxs-lookup"><span data-stu-id="8901a-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="8901a-115">Jeśli wymagane jest przechowywanie wersji, nowe kontraktu danych należy utworzyć inną nazwę lub przestrzeń nazw, i kontrakt usługi przy użyciu typu danych powinien być poddany kontroli wersji w związku z tym.</span><span class="sxs-lookup"><span data-stu-id="8901a-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="8901a-116">Na przykład zamówienie zakupu przetwarzania kontraktu usługi o nazwie `PoProcessing` z `PostPurchaseOrder` operacji przyjmuje parametr, który jest zgodny z `PurchaseOrder` kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="8901a-117">Jeśli `PurchaseOrder` kontraktu musi zmienić, należy utworzyć nowe kontraktu danych, oznacza to, `PurchaseOrder2`, który zawiera zmiany.</span><span class="sxs-lookup"><span data-stu-id="8901a-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="8901a-118">Następnie musi obsługiwać wersji na poziomie kontraktu usługi.</span><span class="sxs-lookup"><span data-stu-id="8901a-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="8901a-119">Na przykład, tworząc `PostPurchaseOrder2` operacji, która przyjmuje `PurchaseOrder2` parametru lub tworząc `PoProcessing2` kontraktu usługi gdzie `PostPurchaseOrder` Trwa operacja `PurchaseOrder2` kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="8901a-120">Należy pamiętać, że zmiany w kontraktach danych, które są przywoływane przez inne kontraktów danych także rozszerzyć warstwy modelu usług.</span><span class="sxs-lookup"><span data-stu-id="8901a-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="8901a-121">Na przykład w poprzednim scenariuszu `PurchaseOrder` kontraktu danych nie trzeba zmieniać.</span><span class="sxs-lookup"><span data-stu-id="8901a-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="8901a-122">Jednak zawiera element członkowski danych z `Customer` kontraktu danych, który z kolei zawarty składowa danych klasy `Address` kontraktu danych, które muszą zostać zmienione.</span><span class="sxs-lookup"><span data-stu-id="8901a-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="8901a-123">W takim przypadku należy utworzyć `Address2` kontraktu danych za pomocą wymagane zmiany `Customer2` kontraktu danych, który zawiera `Address2` element członkowski danych, a `PurchaseOrder2` kontraktu danych, który zawiera `Customer2` element członkowski danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="8901a-124">Tak jak w przypadku poprzedniego Umowa serwisowa musi również być poddany kontroli wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="8901a-125">Mimo że w tych przykładach zmiany nazw (na przykład przez dołączenie "2"), zaleca się zmiany obszarów nazw, zamiast nazwy, dodając nowe przestrzenie nazw za pomocą numeru wersji lub wartość typu date.</span><span class="sxs-lookup"><span data-stu-id="8901a-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="8901a-126">Na przykład `http://schemas.contoso.com/2005/05/21/PurchaseOrder` kontraktu danych zmienią się `http://schemas.contoso.com/2005/10/14/PurchaseOrder` kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="8901a-127">Aby uzyskać więcej informacji zobacz najważniejsze wskazówki: [Przechowywanie wersji usługi](../../../docs/framework/wcf/service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="8901a-127">For more information, see Best Practices: [Service Versioning](../../../docs/framework/wcf/service-versioning.md).</span></span>  
  
 <span data-ttu-id="8901a-128">Od czasu do czasu należy zagwarantować zgodność ścisłego schematu dla komunikatów wysyłanych przez aplikację, ale nie można polegać na komunikaty przychodzące być ściśle zgodny ze schematem.</span><span class="sxs-lookup"><span data-stu-id="8901a-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="8901a-129">W tym przypadku istnieje zagrożenie, że wiadomości przychodzące mogą zawierać nadmiarowe dane.</span><span class="sxs-lookup"><span data-stu-id="8901a-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="8901a-130">Nadmiarowe wartości są przechowywane i zwrócony przez architekturę WCF, czyli z wiadomości nieprawidłowy schemat.</span><span class="sxs-lookup"><span data-stu-id="8901a-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="8901a-131">Aby uniknąć tego problemu, funkcja Pełna zgodnooć wersji powinna być wyłączona.</span><span class="sxs-lookup"><span data-stu-id="8901a-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="8901a-132">Istnieją dwa sposoby, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="8901a-132">There are two ways to do this.</span></span>  
  
- <span data-ttu-id="8901a-133">Nie należy implementować <xref:System.Runtime.Serialization.IExtensibleDataObject> interfejsu na wszystkich typów.</span><span class="sxs-lookup"><span data-stu-id="8901a-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
- <span data-ttu-id="8901a-134">Zastosuj <xref:System.ServiceModel.ServiceBehaviorAttribute> atrybutu do Twojej umowy serwisowej z <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> właściwością `true`.</span><span class="sxs-lookup"><span data-stu-id="8901a-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="8901a-135">Aby uzyskać więcej informacji na temat Pełna zgodnooć wersji, zobacz [kontrakty danych zgodne](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8901a-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="8901a-136">Przechowywanie wersji, gdy sprawdzanie poprawności schematu nie jest wymagane</span><span class="sxs-lookup"><span data-stu-id="8901a-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="8901a-137">Rzadko wymagana jest zgodność ścisłego schematu.</span><span class="sxs-lookup"><span data-stu-id="8901a-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="8901a-138">Wiele platform tolerować dodatkowe elementy, które nie są opisane przez schemat.</span><span class="sxs-lookup"><span data-stu-id="8901a-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="8901a-139">Tak długo, jak to jest tolerowane, pełny zestaw funkcji opisanych w [przechowywanie wersji kontraktów danych](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) i [kontrakty danych zgodne](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) mogą być używane.</span><span class="sxs-lookup"><span data-stu-id="8901a-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="8901a-140">Zaleca się następujące wskazówki.</span><span class="sxs-lookup"><span data-stu-id="8901a-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="8901a-141">Niektóre wytyczne musi występować dokładnie wysyłanie nowej wersji typu gdzie stary oczekuje lub wysyłania stare hasło, których oczekuje się nowego.</span><span class="sxs-lookup"><span data-stu-id="8901a-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="8901a-142">Innych wytycznych, nie są ściśle wymagane, ale są wymienione w tym miejscu, ponieważ one mogą mieć wpływ na przyszłość schematu przechowywania wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1. <span data-ttu-id="8901a-143">Nie należy próbować wersji kontraktów danych poprzez dziedziczenie typu.</span><span class="sxs-lookup"><span data-stu-id="8901a-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="8901a-144">Aby utworzyć nowsze wersje, zmień kontraktu danych na istniejący typ lub utworzenia nowego typu niepowiązanego.</span><span class="sxs-lookup"><span data-stu-id="8901a-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2. <span data-ttu-id="8901a-145">Dziedziczenie wraz z kontraktów danych jest dozwolone, pod warunkiem, że dziedziczenie nie jest używana jako mechanizm obsługi wersji, a niektóre zasady zostaną wykonane prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="8901a-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="8901a-146">Jeśli typ pochodzi z określonego typu podstawowego, nie dokonuj on pochodzić z innym typem bazowym w przyszłych wersjach (chyba że ma te same dane umowy).</span><span class="sxs-lookup"><span data-stu-id="8901a-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="8901a-147">Istnieje jeden wyjątek to: typ można wstawić do hierarchii między typu kontraktu danych i jego typ podstawowy, ale tylko wtedy, gdy nie zawiera elementów członkowskich danych za pomocą te same nazwy jak inne elementy wszystkie możliwe wersje innych typów w hierarchii.</span><span class="sxs-lookup"><span data-stu-id="8901a-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="8901a-148">Ogólnie rzecz biorąc elementy członkowskie danych przy użyciu tych samych nazw na różnych poziomach w tej samej hierarchii dziedziczenia może prowadzić do problemów poważnych versioning i należy ich unikać.</span><span class="sxs-lookup"><span data-stu-id="8901a-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3. <span data-ttu-id="8901a-149">Począwszy od pierwszej wersji kontraktu danych, zawsze wdrożenia <xref:System.Runtime.Serialization.IExtensibleDataObject> umożliwia Pełna zgodnooć wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="8901a-150">Aby uzyskać więcej informacji, zobacz [kontrakty danych zgodne](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8901a-150">For more information, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="8901a-151">Jeśli zostały wydane co najmniej wersji typu bez implementacji interfejsu, należy ją wykonać w następnej wersji typu.</span><span class="sxs-lookup"><span data-stu-id="8901a-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4. <span data-ttu-id="8901a-152">W nowszych wersjach nie zmieniaj nazwy kontraktu danych lub obszaru nazw.</span><span class="sxs-lookup"><span data-stu-id="8901a-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="8901a-153">Jeśli zmiana nazwy lub przestrzeń nazw typu kontraktu danych bazowych upewnij się zachować nazwie kontraktu danych i przestrzeni nazw przy użyciu odpowiednich mechanizmów, takich jak <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> właściwość <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="8901a-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="8901a-154">Aby uzyskać więcej informacji na temat nazewnictwa, zobacz [nazwy kontraktów danych](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="8901a-154">For more information about naming, see [Data Contract Names](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span></span>  
  
5. <span data-ttu-id="8901a-155">W nowszych wersjach nie należy zmieniać nazw żadnych składowych danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="8901a-156">Jeśli zmiana nazwy pola, właściwości lub zdarzenia bazowego elementu członkowskiego danych, użyj `Name` właściwość <xref:System.Runtime.Serialization.DataMemberAttribute> zachować istniejącą nazwę elementu członkowskiego danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6. <span data-ttu-id="8901a-157">W nowszych wersjach nie należy zmieniać typu pola, właściwości lub zdarzenia podstawowy element członkowski danych w taki sposób, że dane wynikowe kontrakt dla tej zmiany element członkowski danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="8901a-158">Należy pamiętać, że typy interfejsów są równoważne <xref:System.Object> na potrzeby określania kontraktu oczekiwanych danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7. <span data-ttu-id="8901a-159">W nowszych wersjach, nie należy zmieniać kolejność istniejących elementów członkowskich danych przez dostosowanie <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> właściwość <xref:System.Runtime.Serialization.DataMemberAttribute> atrybutu.</span><span class="sxs-lookup"><span data-stu-id="8901a-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8. <span data-ttu-id="8901a-160">W nowszych wersjach można dodać nowe elementy członkowskie danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="8901a-161">Powinny one zawsze wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="8901a-161">They should always follow these rules:</span></span>  
  
    1. <span data-ttu-id="8901a-162"><xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> Właściwość zawsze należy pozostawić wartość domyślną `false`.</span><span class="sxs-lookup"><span data-stu-id="8901a-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2. <span data-ttu-id="8901a-163">Jeśli wartość domyślną `null` lub zero dla elementu członkowskiego jest nieodpowiednia, można określić metodę wywołania zwrotnego za pomocą <xref:System.Runtime.Serialization.OnDeserializingAttribute> do zapewniania domyślnego uzasadnione, w przypadku, gdy element członkowski nie jest obecny w strumienia przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="8901a-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="8901a-164">Aby uzyskać więcej informacji na temat wywołania zwrotnego, zobacz [wywołania zwrotne serializacji z tolerancją dla wersji](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="8901a-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3. <span data-ttu-id="8901a-165"><xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> Właściwość powinna być używana, aby upewnić się, czy wszystkie elementy członkowskie nowo dodane dane są wyświetlane po istniejące elementy członkowskie danych.</span><span class="sxs-lookup"><span data-stu-id="8901a-165">The <xref:System.Runtime.Serialization.DataMemberAttribute.Order?displayProperty=nameWithType> property should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="8901a-166">Zalecanym sposobem w ten sposób jest następująca: Żaden z elementów członkowskich danych w pierwszej wersji kontraktu danych powinny mieć ich `Order` zestawu właściwości.</span><span class="sxs-lookup"><span data-stu-id="8901a-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="8901a-167">Wszystkie elementy członkowskie danych dodane w wersji 2 kontraktu danych powinny mieć ich `Order` właściwość ustawioną na 2.</span><span class="sxs-lookup"><span data-stu-id="8901a-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="8901a-168">Wszystkie elementy członkowskie danych dodane w wersji 3 kontraktu danych powinny mieć ich `Order` ustawiony na wartość 3 i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="8901a-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="8901a-169">Dopuszcza się mieć więcej niż jeden element członkowski danych takie same `Order` numer.</span><span class="sxs-lookup"><span data-stu-id="8901a-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="8901a-170">Nie usuwaj elementy członkowskie danych w nowszych wersjach, nawet wtedy, gdy <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> właściwość pozostawało na jego domyślna właściwość `false` w poprzednich wersjach.</span><span class="sxs-lookup"><span data-stu-id="8901a-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="8901a-171">Nie zmieniaj `IsRequired` właściwość wszelkie istniejące elementy członkowskie danych z wersji do wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="8901a-172">Dla wymaganych elementów członkowskich danych (gdzie `IsRequired` jest `true`), nie należy zmieniać `EmitDefaultValue` właściwości z wersji do wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="8901a-173">Nie należy próbować tworzyć hierarchie rozgałęziony przechowywania wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="8901a-174">Oznacza to, że zawsze należy ścieżki co najmniej w jednym kierunku z dowolnej wersji do innej wersji przy użyciu tylko zmiany dozwolone stosowanie tych wytycznych.</span><span class="sxs-lookup"><span data-stu-id="8901a-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="8901a-175">Na przykład, jeśli wersja 1 kontraktu danych osoby zawiera tylko nazwę składowej danych, nie należy tworzyć 2a wersja kontraktu, dodawanie tylko wiek elementu członkowskiego i wersji 2b dodawanie tylko członek adresu.</span><span class="sxs-lookup"><span data-stu-id="8901a-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="8901a-176">Zamierzasz 2b z 2a obejmowałaby usunięcie wiek, a dodanie adresu; Możesz to zrobić w innym kierunku będzie pociąga za sobą usunięcie adresu i dodawanie wieku.</span><span class="sxs-lookup"><span data-stu-id="8901a-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="8901a-177">Usuwanie członków nie jest dozwolona stosowanie tych wytycznych.</span><span class="sxs-lookup"><span data-stu-id="8901a-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="8901a-178">Zazwyczaj nie należy tworzyć nowych podtypów istniejące typy kontraktu danych w nowej wersji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8901a-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="8901a-179">Podobnie nie należy tworzyć nowych kontraktów danych, które są używane zamiast dane, które są zadeklarowane elementy członkowskie jako obiekt lub typów interfejsów.</span><span class="sxs-lookup"><span data-stu-id="8901a-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="8901a-180">Tworzenie tych nowych klas jest dozwolone tylko wtedy, gdy wiesz, dodawać nowych typów do listy znanych typów wszystkich wystąpień starych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8901a-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="8901a-181">Na przykład w wersji 1 aplikacji może mieć LibraryItem dane typu z książką kontraktu i gazet podtypy kontraktu.</span><span class="sxs-lookup"><span data-stu-id="8901a-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="8901a-182">LibraryItem będzie miała listę znanych typów, która zawiera książki i gazet.</span><span class="sxs-lookup"><span data-stu-id="8901a-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="8901a-183">Załóżmy, że teraz dodać typ magazynu w wersji 2, która jest podtypem LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="8901a-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="8901a-184">Jeśli wyślesz wystąpienia magazyn w wersji 2 do wersji 1 kontraktu danych magazyn nie znajduje się na liście znanych typów, i zgłaszany jest wyjątek.</span><span class="sxs-lookup"><span data-stu-id="8901a-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="8901a-185">Należy nie dodawać lub usuwać elementy członkowskie wyliczenia między wersjami.</span><span class="sxs-lookup"><span data-stu-id="8901a-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="8901a-186">Należy również nie zmienić nazwy elementów członkowskich wyliczenia, chyba że używana jest właściwość nazwa na `EnumMemberAttribute` atrybutu, aby zapewnić ich nazwy w modelu kontraktu danych, takie same.</span><span class="sxs-lookup"><span data-stu-id="8901a-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="8901a-187">Kolekcje są wymienne w modelu kontraktu danych, zgodnie z opisem w [typy kolekcji w kontraktach danych](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="8901a-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="8901a-188">Umożliwia to doskonałe stopień elastyczności.</span><span class="sxs-lookup"><span data-stu-id="8901a-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="8901a-189">Jednak należy się upewnić, że nie przypadkowo zmienisz typ kolekcji, w innych niż wymienne sposób od poprzedniej wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="8901a-190">Na przykład nie należy zmieniać z kolekcji, które nie zostały dostosowane (to znaczy bez `CollectionDataContractAttribute` atrybutu) do dostosowanego co najmniej kolekcję dostosowane do jednego z innych dostosowanego przez producenta.</span><span class="sxs-lookup"><span data-stu-id="8901a-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="8901a-191">Ponadto nie należy zmieniać właściwości na `CollectionDataContractAttribute` od wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="8901a-192">Jedyna zmiana dozwolone jest dodawanie właściwości nazwy lub Namespace, jeśli zmieniono nazwę lub przestrzeń nazw podstawowy typ kolekcji, a następnie musisz wprowadzić swoje dane umowy, nazwę i przestrzeń nazw taki sam jak w poprzedniej wersji.</span><span class="sxs-lookup"><span data-stu-id="8901a-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="8901a-193">Niektóre z wymienionych w tym miejscu można bezpiecznie zignorować kiedy szczególne okoliczności.</span><span class="sxs-lookup"><span data-stu-id="8901a-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="8901a-194">Upewnij się, że w pełni zrozumieć serializacji, deserializacji i mechanizmy schematu przed odejście od wytycznych.</span><span class="sxs-lookup"><span data-stu-id="8901a-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8901a-195">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="8901a-195">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>
- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>
- <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>
- <xref:System.Runtime.Serialization.IExtensibleDataObject>
- <xref:System.ServiceModel.ServiceBehaviorAttribute>
- <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>
- <xref:System.Runtime.Serialization.ExtensionDataObject>
- <xref:System.Runtime.Serialization.OnDeserializingAttribute>
- [<span data-ttu-id="8901a-196">Używanie kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="8901a-196">Using Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-data-contracts.md)
- [<span data-ttu-id="8901a-197">Przechowywanie wersji kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="8901a-197">Data Contract Versioning</span></span>](../../../docs/framework/wcf/feature-details/data-contract-versioning.md)
- [<span data-ttu-id="8901a-198">Nazwy kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="8901a-198">Data Contract Names</span></span>](../../../docs/framework/wcf/feature-details/data-contract-names.md)
- [<span data-ttu-id="8901a-199">Kontrakty danych zgodne z nowszymi wersjami</span><span class="sxs-lookup"><span data-stu-id="8901a-199">Forward-Compatible Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md)
- [<span data-ttu-id="8901a-200">Wywołania zwrotne serializacji z tolerancją dla wersji</span><span class="sxs-lookup"><span data-stu-id="8901a-200">Version-Tolerant Serialization Callbacks</span></span>](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md)
