---
title: 'Wskazówki: Przechowywanie wersji kontraktów danych'
ms.date: 03/30/2017
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
ms.openlocfilehash: 33db8749656a8bb001f0a1797c77451476a126f2
ms.sourcegitcommit: 15109844229ade1c6449f48f3834db1b26907824
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/07/2018
ms.locfileid: "33808539"
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="57a2a-102">Wskazówki: Przechowywanie wersji kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="57a2a-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="57a2a-103">Ten temat zawiera najlepsze rozwiązania w zakresie tworzenia kontraktów danych, które można łatwo rozwijać, wraz z upływem czasu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> <span data-ttu-id="57a2a-104">Aby uzyskać więcej informacji na temat kontraktów danych, zobacz Tematy w [za pomocą kontraktów danych](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="57a2a-104">For more information about data contracts, see the topics in [Using Data Contracts](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="57a2a-105">Uwagi dotyczące sprawdzania poprawności schematu</span><span class="sxs-lookup"><span data-stu-id="57a2a-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="57a2a-106">W dyskutować przechowywanie wersji kontraktów danych, to należy pamiętać, że schematu kontraktu danych wyeksportowane przez Windows Communication Foundation (WCF) nie ma żadnych obsługi przechowywania wersji, innego niż fakt, że elementy nie została oznaczona jako opcjonalna domyślnie.</span><span class="sxs-lookup"><span data-stu-id="57a2a-106">In discussing data contract versioning, it is important to note that the data contract schema exported by Windows Communication Foundation (WCF) does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="57a2a-107">Oznacza to, że nawet najbardziej typowych versioning scenariusz, takie jak dodawanie nowego elementu członkowskiego danych nie można zaimplementować w sposób zapewniający szybkie rozwiązanie w zakresie danego schematu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="57a2a-108">Nowsze wersje kontraktu danych (z nowego członka danych, na przykład) nie weryfikują przy użyciu starego schematu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="57a2a-109">Istnieje jednak wiele scenariuszy, w których zgodność strict schematu nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="57a2a-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="57a2a-110">Wiele platform usług sieci Web, w tym usług WCF i XML sieci Web utworzony za pomocą programu ASP.NET, nie sprawdzania poprawności schematu domyślnie i w związku z tym tolerować dodatkowe elementy, które nie zostały opisane w schemacie.</span><span class="sxs-lookup"><span data-stu-id="57a2a-110">Many Web services platforms, including WCF and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="57a2a-111">Podczas pracy z takich platform, wiele scenariuszy, w kontroli wersji są łatwiejsze do wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="57a2a-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="57a2a-112">W związku z tym są dwa zestawy danych kontraktu wytycznymi wersjonowania: jeden ustawiony w scenariuszach, w których ważność strict schematu jest ważne, a inną wartość dla scenariuszy nie jest.</span><span class="sxs-lookup"><span data-stu-id="57a2a-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="57a2a-113">Przechowywanie wersji, gdy jest wymagana Weryfikacja schematu</span><span class="sxs-lookup"><span data-stu-id="57a2a-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="57a2a-114">Jeśli schemat strict ważności jest wymagane we wszystkich kierunkach (nowe stary i starego do nowego), kontraktów danych należy traktować jako niezmienialny.</span><span class="sxs-lookup"><span data-stu-id="57a2a-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="57a2a-115">Jeśli wymagane jest przechowywanie wersji, nowe kontraktu danych należy utworzyć inną nazwę lub przestrzeń nazw, i kontraktu usługi przy użyciu typu danych powinien być numerów wersji odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="57a2a-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="57a2a-116">Na przykład zamówienia zakupu przetwarzania kontraktu usługi o nazwie `PoProcessing` z `PostPurchaseOrder` operacji przyjmuje parametr, który odpowiada `PurchaseOrder` kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="57a2a-117">Jeśli `PurchaseOrder` kontraktu musi zmienić, należy utworzyć nowego kontraktu danych, czyli `PurchaseOrder2`, która obejmuje zmiany.</span><span class="sxs-lookup"><span data-stu-id="57a2a-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="57a2a-118">Następnie musi obsługiwać versioning na poziomie kontraktu usługi.</span><span class="sxs-lookup"><span data-stu-id="57a2a-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="57a2a-119">Na przykład, tworząc `PostPurchaseOrder2` operacja, która przyjmuje `PurchaseOrder2` parametr, lub przez tworzenie `PoProcessing2` kontraktu usługi gdzie `PostPurchaseOrder` Trwa operacja `PurchaseOrder2` kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="57a2a-120">Należy pamiętać, że zmiany w kontraktach danych, do których odwołuje się inne kontraktów danych rozszerzać do warstwy modelu usług.</span><span class="sxs-lookup"><span data-stu-id="57a2a-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="57a2a-121">Na przykład w poprzednim scenariuszu `PurchaseOrder` kontraktu danych nie trzeba zmieniać.</span><span class="sxs-lookup"><span data-stu-id="57a2a-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="57a2a-122">Jednak zawiera element członkowski danych klasy `Customer` kontraktu danych, który z kolei zawiera element członkowski danych klasy `Address` kontraktu danych, które muszą zostać zmienione.</span><span class="sxs-lookup"><span data-stu-id="57a2a-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="57a2a-123">W takim przypadku należy utworzyć `Address2` kontrakt danych o wymagane zmiany, `Customer2` kontraktu danych, który zawiera `Address2` element członkowski danych, a `PurchaseOrder2` kontraktu danych, który zawiera `Customer2` element członkowski danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="57a2a-124">Tak jak w przypadku poprzednich kontrakt usługi musi również być wersjonowany.</span><span class="sxs-lookup"><span data-stu-id="57a2a-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="57a2a-125">Mimo że w tych przykładach zmiany nazw (przez dodanie "2"), zaleca się zmienić przestrzeni nazw zamiast nazw przez dodanie nowych przestrzeni nazw datę lub numer wersji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="57a2a-126">Na przykład `http://schemas.contoso.com/2005/05/21/PurchaseOrder` zmienić kontraktu danych `http://schemas.contoso.com/2005/10/14/PurchaseOrder` kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 <span data-ttu-id="57a2a-127">Aby uzyskać więcej informacji, zobacz zalecenia: [przechowywanie wersji usługi](../../../docs/framework/wcf/service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="57a2a-127">For more information, see Best Practices: [Service Versioning](../../../docs/framework/wcf/service-versioning.md).</span></span>  
  
 <span data-ttu-id="57a2a-128">Czasami musi zapewniać zgodność strict schematu dla wiadomości wysyłanych przez aplikację, ale nie może polegać na wiadomości przychodzących, które należy ściśle schematu zgodne.</span><span class="sxs-lookup"><span data-stu-id="57a2a-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="57a2a-129">W takim przypadku to zagrożenie, że komunikat przychodzący może zawierać nadmiarowe dane.</span><span class="sxs-lookup"><span data-stu-id="57a2a-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="57a2a-130">Nadmiarowe wartości są przechowywane i zwrócony przez usługę WCF i w związku z tym wynikiem wiadomości nieprawidłowy schemat.</span><span class="sxs-lookup"><span data-stu-id="57a2a-130">The extraneous values are stored and returned by WCF and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="57a2a-131">Aby uniknąć tego problemu, funkcja dwustronną komunikację powinna być wyłączona.</span><span class="sxs-lookup"><span data-stu-id="57a2a-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="57a2a-132">Istnieją dwa sposoby, w tym celu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-132">There are two ways to do this.</span></span>  
  
-   <span data-ttu-id="57a2a-133">Nie należy implementować <xref:System.Runtime.Serialization.IExtensibleDataObject> interfejsu na żadnym z typów.</span><span class="sxs-lookup"><span data-stu-id="57a2a-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
-   <span data-ttu-id="57a2a-134">Zastosuj <xref:System.ServiceModel.ServiceBehaviorAttribute> do umowy serwisowej z atrybut <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> ustawioną właściwość `true`.</span><span class="sxs-lookup"><span data-stu-id="57a2a-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 <span data-ttu-id="57a2a-135">Aby uzyskać więcej informacji na temat dwustronną komunikację, zobacz [kontrakty danych zgodne z nowszymi](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="57a2a-135">For more information about round-tripping, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="57a2a-136">Przechowywanie wersji podczas sprawdzania poprawności schematu nie jest wymagana</span><span class="sxs-lookup"><span data-stu-id="57a2a-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="57a2a-137">Rzadko wymagany jest schemat Strict zgodności.</span><span class="sxs-lookup"><span data-stu-id="57a2a-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="57a2a-138">Wiele platform tolerować dodatkowe elementy, które nie dotyczą schematu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="57a2a-139">Tak długo, jak jest to dopuszczalne, pełny zestaw funkcji opisanych w [przechowywanie wersji kontraktów danych](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) i [kontrakty danych zgodne z nowszymi](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) mogą być używane.</span><span class="sxs-lookup"><span data-stu-id="57a2a-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="57a2a-140">Zaleca się następujące wskazówki.</span><span class="sxs-lookup"><span data-stu-id="57a2a-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="57a2a-141">Niektóre wytycznych musi występować dokładnie tak, aby wysłać nowe wersje typu, których można oczekiwać stary lub wysyłania stare hasło, których można oczekiwać nowego.</span><span class="sxs-lookup"><span data-stu-id="57a2a-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="57a2a-142">Pozostałych wskazówek nie są ściśle wymagane, ale są wymienione w tym miejscu, ponieważ mogą one mieć wpływ przyszłych wersji schematu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1.  <span data-ttu-id="57a2a-143">Nie należy próbować wersji kontraktów danych przez typ dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="57a2a-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="57a2a-144">Aby utworzyć nowsze wersje, Zmień na istniejący typ kontraktu danych lub utworzenia nowego typu niepowiązanego.</span><span class="sxs-lookup"><span data-stu-id="57a2a-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2.  <span data-ttu-id="57a2a-145">Dziedziczenie wraz z kontraktów danych jest dozwolone, pod warunkiem że dziedziczenia nie jest używana jako mechanizm kontroli wersji, a niektóre zasady zostaną wykonane.</span><span class="sxs-lookup"><span data-stu-id="57a2a-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="57a2a-146">Jeśli typ pochodzi z określonego typu podstawowego, nie należy wprowadzać on pochodzić z innym typem bazowym w przyszłych wersjach (o ile nie ma tych samych danych kontraktu).</span><span class="sxs-lookup"><span data-stu-id="57a2a-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="57a2a-147">Istnieje jeden wyjątek to: typ można wstawiać do hierarchii między typu kontraktu danych, a jego typ podstawowy, ale tylko wtedy, gdy nie zawiera elementów członkowskich danych z nazwy taki sam jak inne elementy członkowskie w wszystkie możliwe wersje inne typy w hierarchii.</span><span class="sxs-lookup"><span data-stu-id="57a2a-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="57a2a-148">Ogólnie rzecz biorąc, przy użyciu elementy członkowskie danych pod tą samą nazwą na różnych poziomach o tej samej hierarchii dziedziczenia może prowadzić do problemów poważne przechowywanie wersji i należy unikać.</span><span class="sxs-lookup"><span data-stu-id="57a2a-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3.  <span data-ttu-id="57a2a-149">Począwszy od pierwszej wersji kontraktu danych, zawsze zaimplementować <xref:System.Runtime.Serialization.IExtensibleDataObject> umożliwiające dwustronną komunikację.</span><span class="sxs-lookup"><span data-stu-id="57a2a-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> <span data-ttu-id="57a2a-150">Aby uzyskać więcej informacji, zobacz [kontrakty danych zgodne z nowszymi](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="57a2a-150">For more information, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="57a2a-151">Bez stosowania tego interfejsu wydaniu wersji co najmniej jednego typu należy wdrożyć go w następnej wersji tego typu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4.  <span data-ttu-id="57a2a-152">W nowszych wersjach nie należy zmieniać nazwy kontraktu danych lub przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="57a2a-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="57a2a-153">Jeśli zmiana nazwy lub przestrzeni nazw typu podstawowego kontraktu danych, upewnij się zachować nazwie kontraktu danych i przestrzeni nazw przy użyciu odpowiednich mechanizmów, takich jak <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> właściwość <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="57a2a-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> <span data-ttu-id="57a2a-154">Aby uzyskać więcej informacji o nazwach, zobacz [nazwy kontraktów danych](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="57a2a-154">For more information about naming, see [Data Contract Names](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span></span>  
  
5.  <span data-ttu-id="57a2a-155">W nowszych wersjach nie należy zmieniać nazwy żadnych elementów członkowskich danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="57a2a-156">Jeśli zmiana nazwy pola, właściwości lub zdarzenia podstawowy element członkowski danych, użyj `Name` właściwość <xref:System.Runtime.Serialization.DataMemberAttribute> zachować nazwę istniejącego elementu członkowskiego danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6.  <span data-ttu-id="57a2a-157">W nowszych wersjach nie należy zmieniać typu pola, właściwości lub zdarzenia podstawowy element członkowski danych w taki sposób, że dane wynikowe kontraktu tego zmian elementów członkowskich danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="57a2a-158">Należy pamiętać, że typy interfejsów są równoważne <xref:System.Object> na potrzeby określania kontraktu oczekiwane dane.</span><span class="sxs-lookup"><span data-stu-id="57a2a-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7.  <span data-ttu-id="57a2a-159">W nowszych wersjach, nie należy zmieniać kolejność istniejące elementy członkowskie danych przez dostosowanie wartości właściwości <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> właściwość <xref:System.Runtime.Serialization.DataMemberAttribute> atrybutu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8.  <span data-ttu-id="57a2a-160">W nowszych wersjach można dodać nowe elementy członkowskie danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="57a2a-161">One zawsze należy wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="57a2a-161">They should always follow these rules:</span></span>  
  
    1.  <span data-ttu-id="57a2a-162"><xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> Właściwość zawsze należy pozostawić wartość domyślną `false`.</span><span class="sxs-lookup"><span data-stu-id="57a2a-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2.  <span data-ttu-id="57a2a-163">Jeśli wartość domyślną równą `null` lub zero dla elementu członkowskiego jest nie do przyjęcia, metody wywołania zwrotnego należy podawać przy użyciu <xref:System.Runtime.Serialization.OnDeserializingAttribute> do zapewniania domyślnego uzasadnione, w przypadku, gdy element członkowski nie jest obecny w strumienia przychodzącego.</span><span class="sxs-lookup"><span data-stu-id="57a2a-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> <span data-ttu-id="57a2a-164">Aby uzyskać więcej informacji na temat wywołania zwrotnego, zobacz [wywołania zwrotne serializacji z tolerancją dla wersji](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="57a2a-164">For more information about the callback, see [Version-Tolerant Serialization Callbacks](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3.  <span data-ttu-id="57a2a-165">`Order` Właściwość `DataMemberAttribute` powinien być używany do upewnij się, że wszystkie elementy członkowskie nowo dodanych danych zostaną wyświetlone po istniejące elementy członkowskie danych.</span><span class="sxs-lookup"><span data-stu-id="57a2a-165">The `Order` property on the `DataMemberAttribute` should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="57a2a-166">Zalecaną metodą zrobić to wygląda następująco: żaden z elementów członkowskich danych w pierwszej wersji kontraktu danych powinien nie ma ich `Order` zestawu właściwości.</span><span class="sxs-lookup"><span data-stu-id="57a2a-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="57a2a-167">Wszystkie elementy członkowskie danych dodany w wersji 2 kontraktu danych powinny mieć swoje `Order` właściwością o wartości 2.</span><span class="sxs-lookup"><span data-stu-id="57a2a-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="57a2a-168">Wszystkie elementy członkowskie danych dodany w wersji 3 kontraktu danych powinny mieć ich `Order` na 3 i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="57a2a-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="57a2a-169">Dopuszcza się ma więcej niż jeden element członkowski danych takie same `Order` numer.</span><span class="sxs-lookup"><span data-stu-id="57a2a-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="57a2a-170">Nie usuwaj elementy członkowskie danych w nowszych wersjach, nawet wtedy, gdy <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> właściwości pozostawało na jego domyślna właściwość `false` w poprzednich wersjach.</span><span class="sxs-lookup"><span data-stu-id="57a2a-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="57a2a-171">Nie zmieniaj `IsRequired` właściwość żadnych istniejących elementów członkowskich danych z wersji do wersji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="57a2a-172">Dla wymaganych elementów członkowskich danych (jeżeli `IsRequired` jest `true`), nie należy zmieniać `EmitDefaultValue` właściwości z wersji do wersji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="57a2a-173">Nie należy próbować tworzyć hierarchie rozgałęzione przechowywania wersji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="57a2a-174">Oznacza to, że zawsze należy ścieżką w co najmniej jeden kierunek z dowolnej wersji do innych wersji przy użyciu tylko zmiany dozwolone przez te wytyczne.</span><span class="sxs-lookup"><span data-stu-id="57a2a-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="57a2a-175">Na przykład, jeśli wersja 1 kontraktu danych osoby zawiera tylko nazwa członka danych, nie należy tworzyć 2a wersja kontraktu dodanie tylko wieku element członkowski i wersji 2b dodanie tylko z elementem członkowskim adresu.</span><span class="sxs-lookup"><span data-stu-id="57a2a-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="57a2a-176">Będzie 2a 2b wymagałoby usunąć wieku i dodać adres; Przechodzenie w innym kierunku pociąga adres usuwania i dodawania wieku.</span><span class="sxs-lookup"><span data-stu-id="57a2a-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="57a2a-177">Usunięcie elementów członkowskich nie jest dozwolone przez te wytyczne.</span><span class="sxs-lookup"><span data-stu-id="57a2a-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="57a2a-178">Zwykle nie należy tworzyć nowych podtypów istniejące typy kontraktu danych w nowej wersji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="57a2a-179">Ponadto nie należy tworzyć nowych kontraktów danych, które są używane zamiast dane, które elementy członkowskie zadeklarowany jako obiekt lub typów interfejsów.</span><span class="sxs-lookup"><span data-stu-id="57a2a-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="57a2a-180">Tworzenie tych nowych klas jest dozwolone tylko wtedy, gdy wiesz, że można dodać nowych typów do listy znanych typów wszystkich wystąpień aplikacji stary.</span><span class="sxs-lookup"><span data-stu-id="57a2a-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="57a2a-181">Na przykład w aplikacji w wersji 1, konieczne może być typu z książką kontraktu danych LibraryItem i danych gazecie kontraktu podtypów.</span><span class="sxs-lookup"><span data-stu-id="57a2a-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="57a2a-182">LibraryItem będzie zmuszony listę znanych typów, która zawiera książki i gazecie.</span><span class="sxs-lookup"><span data-stu-id="57a2a-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="57a2a-183">Załóżmy, że teraz dodać typ magazynu w wersji 2, która jest podtypem LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="57a2a-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="57a2a-184">Po wysłaniu wystąpienia magazynu w wersji 2 do wersji 1 kontraktu danych magazynu nie odnaleziono listy znanych typów i jest zgłaszany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="57a2a-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="57a2a-185">Nie należy dodawać lub usuwać elementy członkowskie wyliczenia między wersjami.</span><span class="sxs-lookup"><span data-stu-id="57a2a-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="57a2a-186">Należy również nie zmienisz elementy członkowskie wyliczenia, chyba że używana jest właściwość Name na `EnumMemberAttribute` atrybutu, aby zapewnić ich nazwy w modelu kontraktu danych, takie same.</span><span class="sxs-lookup"><span data-stu-id="57a2a-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="57a2a-187">Kolekcje są wymienne w modelu kontraktu danych, zgodnie z opisem w [typy kolekcji w kontraktach danych](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="57a2a-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="57a2a-188">Dzięki temu precyzyjną elastyczność.</span><span class="sxs-lookup"><span data-stu-id="57a2a-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="57a2a-189">Jednak należy się upewnić, że nie mogą przypadkowo zmienisz typ kolekcji w innych niż wymienne sposób od poprzedniej wersji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="57a2a-190">Na przykład nie należy zmieniać z kolekcji bez dostosowania (czyli bez `CollectionDataContractAttribute` atrybut) dostosowane jedno lub dostosowany zbiór aby stworzyć plik bez dostosowania.</span><span class="sxs-lookup"><span data-stu-id="57a2a-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="57a2a-191">Ponadto nie należy zmieniać właściwości na `CollectionDataContractAttribute` od wersji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="57a2a-192">Dozwolonych jedyna różnica polega na dodaniu właściwości Name i Namespace Jeśli nazwę lub przestrzeń nazw podstawowy typ kolekcji został zmieniony, należy udostępnić jego dane umowy, nazwę i przestrzeń nazw takie same jak w poprzedniej wersji.</span><span class="sxs-lookup"><span data-stu-id="57a2a-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="57a2a-193">Niektóre z wymienionych w tym miejscu można bezpiecznie zignorować podczas specjalne okoliczności.</span><span class="sxs-lookup"><span data-stu-id="57a2a-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="57a2a-194">Upewnij się, że w pełni zrozumieć serializacji, deserializacji i mechanizmach schematu przed odejście od wytyczne.</span><span class="sxs-lookup"><span data-stu-id="57a2a-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="57a2a-195">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="57a2a-195">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>  
 <xref:System.Runtime.Serialization.DataContractAttribute>  
 <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>  
 <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>  
 <xref:System.Runtime.Serialization.IExtensibleDataObject>  
 <xref:System.ServiceModel.ServiceBehaviorAttribute>  
 <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>  
 <xref:System.Runtime.Serialization.ExtensionDataObject>  
 <xref:System.Runtime.Serialization.OnDeserializingAttribute>  
 [<span data-ttu-id="57a2a-196">Używanie kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="57a2a-196">Using Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-data-contracts.md)  
 [<span data-ttu-id="57a2a-197">Przechowywanie wersji kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="57a2a-197">Data Contract Versioning</span></span>](../../../docs/framework/wcf/feature-details/data-contract-versioning.md)  
 [<span data-ttu-id="57a2a-198">Nazwy kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="57a2a-198">Data Contract Names</span></span>](../../../docs/framework/wcf/feature-details/data-contract-names.md)  
 [<span data-ttu-id="57a2a-199">Kontrakty danych zgodne z nowszymi wersjami</span><span class="sxs-lookup"><span data-stu-id="57a2a-199">Forward-Compatible Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md)  
 [<span data-ttu-id="57a2a-200">Wywołania zwrotne serializacji z tolerancją dla wersji</span><span class="sxs-lookup"><span data-stu-id="57a2a-200">Version-Tolerant Serialization Callbacks</span></span>](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md)
