---
title: Tworzenie kolejek w programie WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: c390970d66e442eb413d238691896608dcf27e03
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/28/2019
ms.locfileid: "64643509"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="90a7a-102">Tworzenie kolejek w programie WCF</span><span class="sxs-lookup"><span data-stu-id="90a7a-102">Queuing in WCF</span></span>
<span data-ttu-id="90a7a-103">W tej sekcji opisano sposób użycia komunikacji z obsługą kolejek w Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="90a7a-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="90a7a-104">Kolejki jako WCF transportu powiązania</span><span class="sxs-lookup"><span data-stu-id="90a7a-104">Queues as a WCF transport binding</span></span>  
 <span data-ttu-id="90a7a-105">W WCF — umowy Określ, co wymianie.</span><span class="sxs-lookup"><span data-stu-id="90a7a-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="90a7a-106">Kontrakty są wymianę komunikatów zależnych od firm lub specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="90a7a-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="90a7a-107">Mechanizm służący do wymiany wiadomości (lub "jak") jest określona w powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="90a7a-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="90a7a-108">Powiązania WCF hermetyzować szczegółowe informacje o wymianie wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="90a7a-109">Eksponowanie pokrętła konfiguracji dla użytkownika kontrolować różne aspekty transportu lub protokół, który reprezentuje powiązania.</span><span class="sxs-lookup"><span data-stu-id="90a7a-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="90a7a-110">Usługa kolejkowania w programie WCF jest traktowany jak inne powiązania transportu, która jest dużą zaletą dla wielu aplikacji usługi kolejkowania.</span><span class="sxs-lookup"><span data-stu-id="90a7a-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="90a7a-111">Dzisiaj wiele aplikacji kolejkowania są zapisywane inaczej od innych zdalnego wywołania procedury (RPC)-style aplikacji rozproszonych, co utrudnia stosować i obsługa.</span><span class="sxs-lookup"><span data-stu-id="90a7a-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="90a7a-112">Za pomocą usługi WCF styl pisania aplikacji rozproszonej jest bardzo podobne do, ułatwiając stosować i obsługa.</span><span class="sxs-lookup"><span data-stu-id="90a7a-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="90a7a-113">Ponadto, uwzględniając się mechanizm programu exchange, niezależnie od logiki biznesowej, łatwiej jest skonfigurować transportu lub go zmienić bez wpływu na kod określonych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="90a7a-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="90a7a-114">Na poniższym rysunku przedstawiono strukturę usługi i klienta WCF przy użyciu usługi MSMQ jako transportu.</span><span class="sxs-lookup"><span data-stu-id="90a7a-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="90a7a-115">![Diagram aplikacji w kolejce](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "rozproszonych kolejka rysunek")</span><span class="sxs-lookup"><span data-stu-id="90a7a-115">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="90a7a-116">Jak widać na poprzednim rysunku, klient i usługa należy zdefiniować tylko aplikacji semantykę, oznacza to, gdy kontrakt i implementacja.</span><span class="sxs-lookup"><span data-stu-id="90a7a-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="90a7a-117">Usługa umożliwia skonfigurowanie Zakolejkowane powiązanie odpowiednie ustawienia.</span><span class="sxs-lookup"><span data-stu-id="90a7a-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="90a7a-118">Klient używa [narzędzia narzędzie metadanych elementu ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) Generowanie klienta programu WCF do usługi oraz generowanie pliku konfiguracji, który opisuje powiązania do użycia, aby wysyłać komunikaty do usługi.</span><span class="sxs-lookup"><span data-stu-id="90a7a-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="90a7a-119">W związku z tym aby wysłać wiadomość w kolejce, klient tworzy klienta programu WCF i wywołuje operację.</span><span class="sxs-lookup"><span data-stu-id="90a7a-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="90a7a-120">Powoduje to, że komunikat, który ma być wysyłany do kolejki transmisji i przeniesiona do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="90a7a-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="90a7a-121">Złożoności komunikacji z obsługą kolejek są ukryte przed aplikacji, która wysyła i odbiera wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="90a7a-122">Ostrzeżenia dotyczące Zakolejkowane powiązanie w usłudze WCF obejmują:</span><span class="sxs-lookup"><span data-stu-id="90a7a-122">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="90a7a-123">Wszystkie usługi, musi być jednokierunkowe operacji, ponieważ domyślnie umieszczane w kolejce powiązanie w usłudze WCF nie obsługuje komunikację dupleksową przy użyciu funkcji kolejek.</span><span class="sxs-lookup"><span data-stu-id="90a7a-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="90a7a-124">Przykładowe komunikacja dwukierunkowa ([komunikacji dwustronny](../../../../docs/framework/wcf/samples/two-way-communication.md)) pokazano, jak wdrożyć paradygmacie komunikacji przy użyciu funkcji kolejek za pomocą kontraktów jednokierunkowych dwa.</span><span class="sxs-lookup"><span data-stu-id="90a7a-124">A two-way communication sample ([Two-Way Communication](../../../../docs/framework/wcf/samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="90a7a-125">Do generowania WCF klienta za pomocą wymiany metadanych wymaga dodatkowego punktu końcowego HTTP usługi mogą być wyszukiwane w bezpośrednio do generowania klienta WCF i uzyskać informacje o powiązaniu, aby odpowiednio skonfigurować komunikacji z obsługą kolejek.</span><span class="sxs-lookup"><span data-stu-id="90a7a-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="90a7a-126">Oparty na umieszczonych w kolejce powiązania, dodatkowe poza WCF jest wymagana konfiguracja.</span><span class="sxs-lookup"><span data-stu-id="90a7a-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="90a7a-127">Na przykład <xref:System.ServiceModel.NetMsmqBinding> klasy, który jest dostarczany z programem WCF, musisz skonfigurować powiązania, a także nieznacznego skonfigurowania usługi kolejkowania komunikatów (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="90a7a-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="90a7a-128">W poniższych sekcjach opisano określonych umieszczonych w kolejce powiązania dostarczane z programem WCF, które są oparte na usłudze MSMQ.</span><span class="sxs-lookup"><span data-stu-id="90a7a-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="90a7a-129">Usługa MSMQ</span><span class="sxs-lookup"><span data-stu-id="90a7a-129">MSMQ</span></span>  
 <span data-ttu-id="90a7a-130">Transport umieszczonych w kolejce w programie WCF używa usługi MSMQ komunikacie w kolejce.</span><span class="sxs-lookup"><span data-stu-id="90a7a-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="90a7a-131">Usługa MSMQ jest dostarczany jako opcjonalny składnik z Windows i działa jako usługa NT.</span><span class="sxs-lookup"><span data-stu-id="90a7a-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="90a7a-132">Przechwytuje wiadomości do przesłania w kolejce transmisji i dostarczania w kolejce docelowej.</span><span class="sxs-lookup"><span data-stu-id="90a7a-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="90a7a-133">Menedżerami kolejki usługi MSMQ zaimplementować protokół transferu komunikatów w niezawodny, dzięki czemu komunikaty nie zostaną utracone podczas transmisji.</span><span class="sxs-lookup"><span data-stu-id="90a7a-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="90a7a-134">Protokół może być lokalny lub opartego na protokole SOAP, takich jak Reliable protokołu komunikatu (SRMP) protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="90a7a-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="90a7a-135">W usłudze MSMQ kolejki może być transakcyjna lub nietransakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="90a7a-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="90a7a-136">Kolejka transakcyjna pozwala być przechwytywane i dostarczane w ramach transakcji i następnie trwale przechowywane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="90a7a-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="90a7a-137">Wiadomości wysłanych do kolejki transakcyjne są przesyłane dokładnie jeden raz w kolejności.</span><span class="sxs-lookup"><span data-stu-id="90a7a-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="90a7a-138">Kolejka nietransakcyjna służy do wysyłania komunikatów trwałe i nietrwałe.</span><span class="sxs-lookup"><span data-stu-id="90a7a-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="90a7a-139">Komunikat wysyłany do kolejki nietransakcyjnej nie zawiera żadnych gwarancji niezawodne przesyłanie; w związku z tym komunikaty mogą zostać utracone.</span><span class="sxs-lookup"><span data-stu-id="90a7a-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="90a7a-140">Kolejki usługi MSMQ również mogą być chronione przy użyciu tożsamości Windows zarejestrowanych przy użyciu usługi katalogowej Active Directory.</span><span class="sxs-lookup"><span data-stu-id="90a7a-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="90a7a-141">Podczas instalowania usługi MSMQ, można zainstalować integracji usługi Active Directory, która wymaga komputera jako część sieci z domeną Windows.</span><span class="sxs-lookup"><span data-stu-id="90a7a-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="90a7a-142">Aby uzyskać więcej informacji na temat usługi MSMQ, zobacz [instalowanie komunikatów usługi kolejkowania wiadomości (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="90a7a-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="90a7a-143">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="90a7a-143">NetMsmqBinding</span></span>  
 <span data-ttu-id="90a7a-144">[ \<NetMsmqBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) jest Zakolejkowane powiązanie WCF zapewnia dwa punktami końcowymi programu WCF do komunikowania się za pomocą usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="90a7a-144">The [\<netMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="90a7a-145">Wiązanie, w związku z tym, udostępnia właściwości, które są specyficzne dla usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="90a7a-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="90a7a-146">Jednak nie wszystkie funkcje usługi MSMQ i właściwości, które są widoczne w `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="90a7a-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="90a7a-147">Kompaktowania `NetMsmqBinding` zaprojektowano z optymalny zestaw zasobów wystąpień funkcji, które większość klientów powinien znajdować się wystarczające.</span><span class="sxs-lookup"><span data-stu-id="90a7a-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="90a7a-148">`NetMsmqBinding` Manifesty podstawowe koncepcje kolejkowania na powiązania, a następnie omówiono tej pory w formie właściwości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="90a7a-149">Te właściwości, z kolei komunikują się do usługi MSMQ jak przenieść i dostarczanie komunikatów.</span><span class="sxs-lookup"><span data-stu-id="90a7a-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="90a7a-150">Dyskusję na temat kategorii właściwości znajduje się w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="90a7a-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="90a7a-151">Aby uzyskać więcej informacji zobacz koncepcyjne tematy, które opisują konkretne właściwości więcej całkowicie.</span><span class="sxs-lookup"><span data-stu-id="90a7a-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="90a7a-152">ExactlyOnce i trwałe właściwości</span><span class="sxs-lookup"><span data-stu-id="90a7a-152">ExactlyOnce and Durable Properties</span></span>  
 <span data-ttu-id="90a7a-153">`ExactlyOnce` i `Durable` właściwości wpływają na sposób przekazywania komunikatów pomiędzy kolejki:</span><span class="sxs-lookup"><span data-stu-id="90a7a-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="90a7a-154">`ExactlyOnce`: Po ustawieniu `true` (ustawienie domyślne), zwrócony gwarantuje, że komunikat, jeśli dostarczony, nie jest zduplikowany.</span><span class="sxs-lookup"><span data-stu-id="90a7a-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="90a7a-155">Gwarantuje również, że komunikat nie zostanie utracony.</span><span class="sxs-lookup"><span data-stu-id="90a7a-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="90a7a-156">Jeśli nie można dostarczyć komunikatu lub komunikat do czasu na żywo wygaśnie przed wiadomości, które mogą być dostarczane, nie powiodło się komunikat i odtworzy dostarczania Przyczyna niepowodzenia jest rejestrowana w kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="90a7a-157">Po ustawieniu `false`, zwrócony sprawia, że zmierzających do transferu wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="90a7a-158">W takim przypadku możesz opcjonalnie wybrać kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="90a7a-159">`Durable:` Po ustawieniu `true` (ustawienie domyślne), zwrócony gwarantuje, że usługi MSMQ przechowuje komunikat trwale na dysku.</span><span class="sxs-lookup"><span data-stu-id="90a7a-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="90a7a-160">W związku z tym jeśli usługa MSMQ udało się zatrzymać i uruchomić ponownie, wiadomości na dysku jest przeniesiona do kolejki docelowej lub dostarczane do usługi.</span><span class="sxs-lookup"><span data-stu-id="90a7a-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="90a7a-161">Po ustawieniu `false`, komunikaty są przechowywane w magazynie volatile i zostaną utracone na zatrzymanie i ponowne uruchomienie usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="90a7a-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="90a7a-162">Aby uzyskać `ExactlyOnce` transferu niezawodnej usługi MSMQ wymaga kolejki transakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="90a7a-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="90a7a-163">Ponadto usługi MSMQ wymaga transakcji można odczytać z kolejką transakcyjną.</span><span class="sxs-lookup"><span data-stu-id="90a7a-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="90a7a-164">W efekcie zastosowania `NetMsmqBinding`, należy pamiętać, że transakcja jest wymagany do wysyłania i odbierania komunikatów podczas `ExactlyOnce` ustawiono `true`.</span><span class="sxs-lookup"><span data-stu-id="90a7a-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="90a7a-165">Podobnie, usługa MSMQ wymaga się nietransakcyjnej dla zapewnienia optymalnych, takie jak czas w kolejce `ExactlyOnce` jest `false` i volatile komunikatów.</span><span class="sxs-lookup"><span data-stu-id="90a7a-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="90a7a-166">W związku z tym podczas ustawiania `ExactlyOnce` do `false` lub trwałe do `false`, użytkownik nie może wysłać lub odebrać, przy użyciu transakcji.</span><span class="sxs-lookup"><span data-stu-id="90a7a-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="90a7a-167">Upewnij się, czy poprawny kolejki (transakcyjna lub nietransakcyjna) został utworzony zgodnie z ustawieniami w powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="90a7a-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="90a7a-168">Jeśli `ExactlyOnce` jest `true`, użyj kolejkę transakcyjną; w przeciwnym razie użyj nietransakcyjnej kolejki.</span><span class="sxs-lookup"><span data-stu-id="90a7a-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="90a7a-169">Właściwości kolejki utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="90a7a-169">Dead-Letter Queue Properties</span></span>  
 <span data-ttu-id="90a7a-170">Kolejki utraconych wiadomości jest używany do przechowywania komunikatów, które nie spełniają dostarczania.</span><span class="sxs-lookup"><span data-stu-id="90a7a-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="90a7a-171">Użytkownik może zapisać logiki wyrównującej, która odczytuje komunikaty z kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="90a7a-172">Wiele systemów kolejkowania zapewnia kolejki utraconych wiadomości całego systemu.</span><span class="sxs-lookup"><span data-stu-id="90a7a-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="90a7a-173">Usługi MSMQ zapewnia systemowe nietransakcyjnej kolejki utraconych wiadomości dla wiadomości, które się nie powieść dostarczania nietransakcyjnej kolejkach i systemowe transakcyjnej kolejki utraconych wiadomości dla wiadomości, które nie spełniają dostarczania do kolejek transakcyjnych.</span><span class="sxs-lookup"><span data-stu-id="90a7a-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="90a7a-174">Jeśli wielu klientów, wysyłanie komunikatów do kolejki inną docelową udostępniają usługi MSMQ, wszystkie komunikaty wysyłane przez klientów przejdź do tej samej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="90a7a-175">Nie zawsze jest to pożądane.</span><span class="sxs-lookup"><span data-stu-id="90a7a-175">This is not always preferable.</span></span> <span data-ttu-id="90a7a-176">Dla lepszej izolacji, WCF i usługi MSMQ w [!INCLUDE[wv](../../../../includes/wv-md.md)] podać niestandardowy kolejki utraconych wiadomości (lub kolejki utraconych wiadomości specyficzne dla aplikacji), użytkownik może określić do przechowywania komunikatów, które nie spełniają dostarczania.</span><span class="sxs-lookup"><span data-stu-id="90a7a-176">For better isolation, WCF and MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="90a7a-177">W związku z tym różni klienci nie korzystają z tej samej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="90a7a-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="90a7a-178">Powiązanie ma dwie właściwości zainteresowania:</span><span class="sxs-lookup"><span data-stu-id="90a7a-178">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="90a7a-179">`DeadLetterQueue`: Ta właściwość jest wyliczeniem, która wskazuje, czy kolejka utraconych wiadomości jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="90a7a-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="90a7a-180">Wyliczenie zawiera także rodzaj kolejki utraconych wiadomości, jeśli wymagana jest jeden.</span><span class="sxs-lookup"><span data-stu-id="90a7a-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="90a7a-181">Wartości są `None`, `System`, i `Custom`.</span><span class="sxs-lookup"><span data-stu-id="90a7a-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="90a7a-182">Aby uzyskać więcej informacji na temat interpretacji tych właściwości, zobacz [przy użyciu kolejki utraconych wiadomości, do obsługi błędów transferu](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span><span class="sxs-lookup"><span data-stu-id="90a7a-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="90a7a-183">`CustomDeadLetterQueue`: Ta właściwość jest adresem identyfikator (URI) kolejki utraconych wiadomości specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="90a7a-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="90a7a-184">Jest to wymagane, jeśli `DeadLetterQueue`.`Custom`</span><span class="sxs-lookup"><span data-stu-id="90a7a-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="90a7a-185">jest wybierany.</span><span class="sxs-lookup"><span data-stu-id="90a7a-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="90a7a-186">Właściwości Obsługa komunikatów zanieczyszczonych</span><span class="sxs-lookup"><span data-stu-id="90a7a-186">Poison Message Handling properties</span></span>  
 <span data-ttu-id="90a7a-187">Usługa odczytuje komunikaty z kolejki docelowej, w ramach transakcji, usługa może zakończyć się niepowodzeniem przetworzyć komunikatu z różnych powodów.</span><span class="sxs-lookup"><span data-stu-id="90a7a-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="90a7a-188">Komunikat jest następnie odłożyć do kolejki, aby ponownie odczytać.</span><span class="sxs-lookup"><span data-stu-id="90a7a-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="90a7a-189">Aby poradzić sobie z wiadomości, które nie są regularnie, zbiór Obsługa komunikatów poison właściwości można skonfigurować w powiązaniu.</span><span class="sxs-lookup"><span data-stu-id="90a7a-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="90a7a-190">Istnieją cztery właściwości: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, i `ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="90a7a-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="90a7a-191">Aby uzyskać więcej informacji o tych właściwościach, zobacz [Obsługa komunikatów zanieczyszczonych](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="90a7a-191">For more information about these properties, see [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="90a7a-192">Właściwości zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="90a7a-192">Security Properties</span></span>  
 <span data-ttu-id="90a7a-193">Usługa MSMQ udostępnia własny model zabezpieczeń, takie jak listy kontroli dostępu (ACL) w kolejce lub wysyłania uwierzytelnione komunikaty.</span><span class="sxs-lookup"><span data-stu-id="90a7a-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="90a7a-194">`NetMsmqBinding` Udostępnia te właściwości zabezpieczeń jako część jej ustawienia zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="90a7a-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="90a7a-195">Istnieją dwie właściwości powiązanie dla zabezpieczeń transportu: `MsmqAuthenticationMode` i `MsmqProtectionLevel`.</span><span class="sxs-lookup"><span data-stu-id="90a7a-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="90a7a-196">Ustawienia w ramach tych właściwości zależą od tego, jak usługa MSMQ jest skonfigurowana.</span><span class="sxs-lookup"><span data-stu-id="90a7a-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="90a7a-197">Aby uzyskać więcej informacji, zobacz [Zabezpieczanie komunikatów za pomocą zabezpieczeń transportu](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="90a7a-197">For more information, see [Securing Messages Using Transport Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="90a7a-198">Oprócz zabezpieczeń transportu rzeczywiste samej wiadomości protokołu SOAP mogą być chronione, korzystanie z zabezpieczeń komunikatów.</span><span class="sxs-lookup"><span data-stu-id="90a7a-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="90a7a-199">Aby uzyskać więcej informacji, zobacz [Zabezpieczanie komunikatów za pomocą zabezpieczeń wiadomości](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="90a7a-199">For more information, see [Securing Messages Using Message Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="90a7a-200">`MsmqTransportSecurity` udostępnia również dwie właściwości `MsmqEncryptionAlgorithm` i `MsmqHashAlgorithm`.</span><span class="sxs-lookup"><span data-stu-id="90a7a-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="90a7a-201">Są to wyliczenia różnych algorytmów szyfrowania transferu kolejki do kolejki komunikatów i wyznaczania wartości skrótu podpisów.</span><span class="sxs-lookup"><span data-stu-id="90a7a-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="90a7a-202">Inne właściwości</span><span class="sxs-lookup"><span data-stu-id="90a7a-202">Other Properties</span></span>  
 <span data-ttu-id="90a7a-203">Oprócz poprzedniego właściwości inne właściwości specyficzne dla usługi MSMQ ujawnione podczas dołączania powiązania:</span><span class="sxs-lookup"><span data-stu-id="90a7a-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="90a7a-204">`UseSourceJournal`: Właściwości, aby wskazać, że źródłowa jest wyłączona.</span><span class="sxs-lookup"><span data-stu-id="90a7a-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="90a7a-205">Źródłowa to funkcja usługi MSMQ, która przechowuje informacje o wiadomości, które zostały pomyślnie przekazane z kolejki transmisji.</span><span class="sxs-lookup"><span data-stu-id="90a7a-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="90a7a-206">`UseMsmqTracing`: Właściwości, aby wskazać, czy śledzenie usługi MSMQ jest włączona.</span><span class="sxs-lookup"><span data-stu-id="90a7a-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="90a7a-207">Śledzenie usługi MSMQ wysyła komunikaty raportu do kolejki raportu, za każdym razem wiadomości pozostawia lub dociera komputer, na którym Menedżer kolejki usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="90a7a-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="90a7a-208">`QueueTransferProtocol`: Wyliczenie protokół do użycia dla transferów kolejki do kolejki komunikatów.</span><span class="sxs-lookup"><span data-stu-id="90a7a-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="90a7a-209">Usługa MSMQ implementuje protokół transmisji w trybie macierzystym kolejki do kolejki i opartego na protokole SOAP protokołu SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="90a7a-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="90a7a-210">SRMP jest używany, gdy za pomocą transportu HTTP transferów kolejki do kolejki.</span><span class="sxs-lookup"><span data-stu-id="90a7a-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="90a7a-211">SRMP bezpieczne jest używana w przypadku używania protokołu HTTPS dla kolejki do kolejki transferu.</span><span class="sxs-lookup"><span data-stu-id="90a7a-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="90a7a-212">`UseActiveDirectory`: Wartość logiczna, aby wskazać, czy usługi Active Directory muszą być używane do rozpoznawania adresów kolejki.</span><span class="sxs-lookup"><span data-stu-id="90a7a-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="90a7a-213">Domyślnie jest wyłączona.</span><span class="sxs-lookup"><span data-stu-id="90a7a-213">By default, this is off.</span></span> <span data-ttu-id="90a7a-214">Aby uzyskać więcej informacji, zobacz [punkty końcowe usługi i adresowanie kolejki](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="90a7a-214">For more information, see [Service Endpoints and Queue Addressing](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="90a7a-215">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="90a7a-215">MsmqIntegrationBinding</span></span>  
 <span data-ttu-id="90a7a-216">`MsmqIntegrationBinding` Jest używany, gdy punkt końcowy usługi WCF do komunikowania się z istniejącą aplikacją usługi MSMQ napisanych w C, C++, COM lub System.Messaging interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="90a7a-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="90a7a-217">Wiązanie właściwości są takie same jak w przypadku `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="90a7a-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="90a7a-218">Jednak mają zastosowanie następujące różnice:</span><span class="sxs-lookup"><span data-stu-id="90a7a-218">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="90a7a-219">Kontrakt operacji dla `MsmqIntegrationBinding` jest ograniczony do przełączania jeden parametr typu <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> gdzie parametr typu jest typem treści.</span><span class="sxs-lookup"><span data-stu-id="90a7a-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="90a7a-220">Wiele właściwości natywnej wiadomości usługi MSMQ są widoczne w <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> do użycia.</span><span class="sxs-lookup"><span data-stu-id="90a7a-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="90a7a-221">Aby ułatwić serializacji i deserializacji treści komunikatu, znajdują się serializatory, takich jak XML i ActiveX.</span><span class="sxs-lookup"><span data-stu-id="90a7a-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="90a7a-222">Przykładowy kod</span><span class="sxs-lookup"><span data-stu-id="90a7a-222">Sample Code</span></span>  
 <span data-ttu-id="90a7a-223">Aby uzyskać instrukcje krok po kroku dotyczące pisania WCF usług korzystających z usługi MSMQ, zobacz następujące tematy:</span><span class="sxs-lookup"><span data-stu-id="90a7a-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="90a7a-224">Instrukcje: Wymiana komunikatów z punktami końcowymi programu WCF i aplikacjami do obsługi kolejek komunikatów</span><span class="sxs-lookup"><span data-stu-id="90a7a-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="90a7a-225">Instrukcje: Wymiana zakolejkowanych komunikatów z punktami końcowymi programu WCF</span><span class="sxs-lookup"><span data-stu-id="90a7a-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="90a7a-226">Aby uzyskać kompletny kod przykładowy pokazujący użycie usługi MSMQ w usłudze WCF, zobacz następujące tematy:</span><span class="sxs-lookup"><span data-stu-id="90a7a-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="90a7a-227">Transakcyjne powiązanie MSMQ</span><span class="sxs-lookup"><span data-stu-id="90a7a-227">Transacted MSMQ Binding</span></span>](../../../../docs/framework/wcf/samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="90a7a-228">Komunikacja za pomocą nietrwałych kolejek</span><span class="sxs-lookup"><span data-stu-id="90a7a-228">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="90a7a-229">Kolejki utraconych komunikatów</span><span class="sxs-lookup"><span data-stu-id="90a7a-229">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="90a7a-230">Sesje i kolejki</span><span class="sxs-lookup"><span data-stu-id="90a7a-230">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="90a7a-231">Komunikacja dwukierunkowa</span><span class="sxs-lookup"><span data-stu-id="90a7a-231">Two-Way Communication</span></span>](../../../../docs/framework/wcf/samples/two-way-communication.md) 
  
- [<span data-ttu-id="90a7a-232">SRMP</span><span class="sxs-lookup"><span data-stu-id="90a7a-232">SRMP</span></span>](../../../../docs/framework/wcf/samples/srmp.md)  
  
- [<span data-ttu-id="90a7a-233">Zabezpieczenia komunikatów w ramach kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="90a7a-233">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="90a7a-234">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="90a7a-234">See also</span></span>

- [<span data-ttu-id="90a7a-235">Punkty końcowe usługi i adresowanie kolejki</span><span class="sxs-lookup"><span data-stu-id="90a7a-235">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="90a7a-236">Sieć Web hostująca aplikację zakolejkowaną</span><span class="sxs-lookup"><span data-stu-id="90a7a-236">Web Hosting a Queued Application</span></span>](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md)
