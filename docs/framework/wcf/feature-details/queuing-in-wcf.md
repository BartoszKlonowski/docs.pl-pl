---
title: Tworzenie kolejek w programie WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: e6608a3d556b546660be904eb8c853243e833d2e
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/12/2020
ms.locfileid: "79184560"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="0dba6-102">Tworzenie kolejek w programie WCF</span><span class="sxs-lookup"><span data-stu-id="0dba6-102">Queuing in WCF</span></span>
<span data-ttu-id="0dba6-103">W tej sekcji opisano sposób używania komunikacji w kolejce w programie Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="0dba6-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="0dba6-104">Kolejki jako powiązanie transportu WCF</span><span class="sxs-lookup"><span data-stu-id="0dba6-104">Queues as a WCF transport binding</span></span>  
 <span data-ttu-id="0dba6-105">W WCF kontrakty określają, co jest wymieniane.</span><span class="sxs-lookup"><span data-stu-id="0dba6-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="0dba6-106">Kontrakty są zależne od firmy lub specyficzne dla aplikacji wymiany komunikatów.</span><span class="sxs-lookup"><span data-stu-id="0dba6-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="0dba6-107">Mechanizm używany do wymiany komunikatów (lub "jak") jest określony w powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="0dba6-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="0dba6-108">Powiązania w WCF hermetyzują szczegóły wymiany komunikatów.</span><span class="sxs-lookup"><span data-stu-id="0dba6-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="0dba6-109">Uwidaczniają one pokrętła konfiguracji dla użytkownika do kontrolowania różnych aspektów transportu lub protokołu, który reprezentują powiązania.</span><span class="sxs-lookup"><span data-stu-id="0dba6-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="0dba6-110">Kolejkowanie w WCF jest traktowane jak każde inne powiązanie transportowe, co jest dużą zaletą dla wielu aplikacji kolejkowania.</span><span class="sxs-lookup"><span data-stu-id="0dba6-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="0dba6-111">Obecnie wiele aplikacji kolejkowania jest zapisywanych inaczej niż inne aplikacje rozproszone w stylu zdalnego wywoływania procedur (RPC), co utrudnia śledzenie i konserwację.</span><span class="sxs-lookup"><span data-stu-id="0dba6-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="0dba6-112">Z WCF styl pisania aplikacji rozproszonej jest znacznie taka sama, dzięki czemu łatwiej śledzić i obsługiwać.</span><span class="sxs-lookup"><span data-stu-id="0dba6-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="0dba6-113">Ponadto, poprzez uwzględnienie mechanizmu wymiany oddzielnie od logiki biznesowej, łatwiej jest skonfigurować transport lub wprowadzić w nim zmiany bez wpływu na kod specyficzny dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0dba6-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="0dba6-114">Poniższy rysunek ilustruje strukturę usługi WCF i klienta przy użyciu usługi MSMQ jako transportu.</span><span class="sxs-lookup"><span data-stu-id="0dba6-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="0dba6-115">![Diagram aplikacji w kolejce](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Liczba rozproszonych kolejek")</span><span class="sxs-lookup"><span data-stu-id="0dba6-115">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="0dba6-116">Jak widać na powyższej ilustracji, klient i usługa musi zdefiniować tylko semantyka aplikacji, czyli umowy i implementacji.</span><span class="sxs-lookup"><span data-stu-id="0dba6-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="0dba6-117">Usługa konfiguruje powiązanie w kolejce z preferowanymi ustawieniami.</span><span class="sxs-lookup"><span data-stu-id="0dba6-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="0dba6-118">Klient używa [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) do generowania klienta WCF do usługi i do generowania pliku konfiguracji, który opisuje powiązania używane do wysyłania wiadomości do usługi.</span><span class="sxs-lookup"><span data-stu-id="0dba6-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="0dba6-119">W związku z tym, aby wysłać wiadomość w kolejce, klient wywołuje klienta WCF i wywołuje operację na nim.</span><span class="sxs-lookup"><span data-stu-id="0dba6-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="0dba6-120">Powoduje to, że wiadomość ma zostać wysłana do kolejki transmisji i przeniesiona do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="0dba6-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="0dba6-121">Wszystkie zawiłości komunikacji w kolejce są ukryte przed aplikacją, która wysyła i odbiera wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="0dba6-122">Zastrzeżenia dotyczące powiązania w kolejce w WCF obejmują:</span><span class="sxs-lookup"><span data-stu-id="0dba6-122">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="0dba6-123">Wszystkie operacje usługi muszą być jednokierunkowe, ponieważ domyślne powiązanie w kolejce w WCF nie obsługuje komunikacji dupleksowej przy użyciu kolejek.</span><span class="sxs-lookup"><span data-stu-id="0dba6-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="0dba6-124">Przykład komunikacji dwukierunkowej[(Dwukierunkowa komunikacja)](../../../../docs/framework/wcf/samples/two-way-communication.md)ilustruje sposób używania dwóch kontraktów jednokierunkowych do implementacji komunikacji dupleksowej przy użyciu kolejek.</span><span class="sxs-lookup"><span data-stu-id="0dba6-124">A two-way communication sample ([Two-Way Communication](../../../../docs/framework/wcf/samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="0dba6-125">Aby wygenerować klienta WCF przy użyciu wymiany metadanych wymaga dodatkowego punktu końcowego HTTP w usłudze, dzięki czemu można zbadać bezpośrednio do generowania klienta WCF i uzyskać informacje o powiązaniach odpowiednio skonfigurować komunikację w kolejce.</span><span class="sxs-lookup"><span data-stu-id="0dba6-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="0dba6-126">Na podstawie powiązania w kolejce wymagana jest dodatkowa konfiguracja poza WCF.</span><span class="sxs-lookup"><span data-stu-id="0dba6-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="0dba6-127">Na przykład <xref:System.ServiceModel.NetMsmqBinding> klasa, która jest dostarczana z WCF wymaga skonfigurowania powiązań, a także minimalnie skonfigurować usługę kolejkowania wiadomości (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="0dba6-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="0dba6-128">W poniższych sekcjach opisano określone powiązania w kolejce dostarczane z WCF, które są oparte na msmq.</span><span class="sxs-lookup"><span data-stu-id="0dba6-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="0dba6-129">Usługa MSMQ</span><span class="sxs-lookup"><span data-stu-id="0dba6-129">MSMQ</span></span>  
 <span data-ttu-id="0dba6-130">Transport w kolejce w WCF używa usługi MSMQ do komunikacji w kolejce.</span><span class="sxs-lookup"><span data-stu-id="0dba6-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="0dba6-131">Usługa MSMQ jest dostarczany jako opcjonalny składnik z systemem Windows i działa jako usługa NT.</span><span class="sxs-lookup"><span data-stu-id="0dba6-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="0dba6-132">Przechwytuje wiadomości do transmisji w kolejce transmisji i do dostarczania w kolejce docelowej.</span><span class="sxs-lookup"><span data-stu-id="0dba6-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="0dba6-133">Menedżery kolejek usługi MSMQ implementują niezawodny protokół transferu wiadomości, dzięki czemu wiadomości nie są tracone podczas transmisji.</span><span class="sxs-lookup"><span data-stu-id="0dba6-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="0dba6-134">Protokół może być natywny lub oparty na pogrodówce, na przykład protokół SOAP Reliable Message Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="0dba6-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="0dba6-135">W ujmijce MSMQ kolejki mogą być transakcyjne lub nietransakcyjne.</span><span class="sxs-lookup"><span data-stu-id="0dba6-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="0dba6-136">Kolejka transakcyjna umożliwia przechwytywanie i dostarczanie wiadomości w transakcji, a następnie trwale przechowywane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="0dba6-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="0dba6-137">Wiadomości wysyłane do kolejki transakcyjnej są przesyłane dokładnie raz w kolejności.</span><span class="sxs-lookup"><span data-stu-id="0dba6-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="0dba6-138">Kolejki nietransakcyjnej można używać do wysyłania zarówno wiadomości nietrwałych, jak i trwałych.</span><span class="sxs-lookup"><span data-stu-id="0dba6-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="0dba6-139">Wiadomość wysłana do kolejki nietransakcyjnej nie zawiera żadnych wiarygodnych gwarancji przeniesienia; w ten sposób wiadomości mogą zostać utracone.</span><span class="sxs-lookup"><span data-stu-id="0dba6-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="0dba6-140">Kolejki usługi MSMQ można również zabezpieczyć przy użyciu tożsamości systemu Windows zarejestrowanej w usłudze katalogowej Active Directory.</span><span class="sxs-lookup"><span data-stu-id="0dba6-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="0dba6-141">Podczas instalowania usługi MSMQ można zainstalować integrację usługi Active Directory, która wymaga, aby komputer był częścią sieci domeny systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="0dba6-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="0dba6-142">Aby uzyskać więcej informacji na temat usługi MSMQ, zobacz [Instalowanie usługi kolejkowania wiadomości (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="0dba6-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="0dba6-143">Netmsmqbinding</span><span class="sxs-lookup"><span data-stu-id="0dba6-143">NetMsmqBinding</span></span>  
 <span data-ttu-id="0dba6-144">NetMsmqBinding>jest w kolejce powiązania WCF zapewnia dwa punkty końcowe WCF do komunikowania się przy użyciu usługi MSMQ. [ \<](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md)</span><span class="sxs-lookup"><span data-stu-id="0dba6-144">The [\<netMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="0dba6-145">Powiązanie, w związku z tym udostępnia właściwości, które są specyficzne dla usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="0dba6-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="0dba6-146">Jednak nie wszystkie funkcje i właściwości usługi `NetMsmqBinding`MSMQ są widoczne w pliku .</span><span class="sxs-lookup"><span data-stu-id="0dba6-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="0dba6-147">Kompaktowy `NetMsmqBinding` został zaprojektowany z optymalnym zestawem funkcji, które większość klientów powinna znaleźć wystarczające.</span><span class="sxs-lookup"><span data-stu-id="0dba6-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="0dba6-148">Manifesty `NetMsmqBinding` podstawowe koncepcje kolejkowania omówione do tej pory w postaci właściwości na powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="0dba6-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="0dba6-149">Te właściwości z kolei komunikują się z usługą MSMQ, jak przesyłać i dostarczać wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="0dba6-150">Omówienie kategorii właściwości znajduje się w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="0dba6-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="0dba6-151">Aby uzyskać więcej informacji, zobacz tematy koncepcyjne, które opisują określone właściwości bardziej całkowicie.</span><span class="sxs-lookup"><span data-stu-id="0dba6-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="0dba6-152">DokładnieNachu i trwałe właściwości</span><span class="sxs-lookup"><span data-stu-id="0dba6-152">ExactlyOnce and Durable Properties</span></span>  
 <span data-ttu-id="0dba6-153">Właściwości `ExactlyOnce` `Durable` i właściwości wpływają na sposób przesyłania wiadomości między kolejkami:</span><span class="sxs-lookup"><span data-stu-id="0dba6-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="0dba6-154">`ExactlyOnce`: Po `true` ustawieniu (domyślnie) kanał w kolejce zapewnia, że wiadomość, jeśli zostanie dostarczona, nie zostanie zduplikowana.</span><span class="sxs-lookup"><span data-stu-id="0dba6-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="0dba6-155">Zapewnia również, że wiadomość nie zostanie utracona.</span><span class="sxs-lookup"><span data-stu-id="0dba6-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="0dba6-156">Jeśli wiadomość nie może zostać dostarczona lub wiadomość Time-To Live wygaśnie przed dostarczeniem wiadomości, wiadomość nie powiodła się wraz z przyczyną niepowodzenia dostarczania jest rejestrowana w kolejce utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="0dba6-157">Po ustawieniu `false`na kanał w kolejce podejmuje próbę przeniesienia wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="0dba6-158">W takim przypadku można opcjonalnie wybrać kolejkę utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="0dba6-159">`Durable:`Po ustawieniu `true` (domyślnie) kanał w kolejce zapewnia, że usługa MSMQ przechowuje wiadomość trwale na dysku.</span><span class="sxs-lookup"><span data-stu-id="0dba6-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="0dba6-160">W związku z tym jeśli usługa MSMQ miały zatrzymać i ponownie uruchomić, wiadomości na dysku są przenoszone do kolejki docelowej lub dostarczane do usługi.</span><span class="sxs-lookup"><span data-stu-id="0dba6-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="0dba6-161">Po ustawieniu `false`na , wiadomości są przechowywane w magazynie nietrwałych i są tracone podczas zatrzymywania i ponownego uruchamiania usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="0dba6-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="0dba6-162">W `ExactlyOnce` przypadku transferu niezawodnego usługa MSMQ wymaga, aby kolejka była transakcyjna.</span><span class="sxs-lookup"><span data-stu-id="0dba6-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="0dba6-163">Ponadto usługa MSMQ wymaga transakcji do odczytu z kolejki transakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="0dba6-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="0dba6-164">W związku z tym `NetMsmqBinding`podczas korzystania z programu , należy pamiętać, że transakcja jest wymagana do wysyłania lub odbierania wiadomości, gdy `ExactlyOnce` jest ustawiona na `true`.</span><span class="sxs-lookup"><span data-stu-id="0dba6-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="0dba6-165">Podobnie usługa MSMQ wymaga, aby kolejka nie była transakcyjna w `ExactlyOnce` `false` celu zapewnienia najlepszego wysiłku, na przykład kiedy jest i dla nietrwałej obsługi wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="0dba6-166">W związku `ExactlyOnce` z `false` tym `false`podczas ustawiania lub trwałe do , nie można wysyłać lub odbierać przy użyciu transakcji.</span><span class="sxs-lookup"><span data-stu-id="0dba6-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="0dba6-167">Upewnij się, że prawidłowa kolejka (transakcyjnych lub nietransakcyjnych) jest tworzony na podstawie ustawień w powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="0dba6-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="0dba6-168">Jeśli `ExactlyOnce` `true`tak, użyj kolejki transakcyjnej; w przeciwnym razie należy użyć kolejki nietransakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="0dba6-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="0dba6-169">Właściwości kolejki utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="0dba6-169">Dead-Letter Queue Properties</span></span>  
 <span data-ttu-id="0dba6-170">Kolejka utraconych wiadomości służy do przechowywania wiadomości, które nie dostarczają.</span><span class="sxs-lookup"><span data-stu-id="0dba6-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="0dba6-171">Użytkownik może napisać logikę kompensacją, która odczytuje wiadomości z kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="0dba6-172">Wiele systemów kolejkowania zapewnia ogólnosystemową kolejkę utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="0dba6-173">Usługa MSMQ udostępnia ogólnosystemową kolejkę utraconych wiadomości nietransakcyjnych dla wiadomości, które nie są dostarczane do kolejek nietransakcyjnych, oraz ogólnosystemową kolejkę utraconych wiadomości dla wiadomości, które nie dostarczają do kolejek transakcyjnych.</span><span class="sxs-lookup"><span data-stu-id="0dba6-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="0dba6-174">Jeśli wielu klientów wysyłających wiadomości do różnych kolejek docelowych współużytkuje usługę MSMQ, wszystkie wiadomości wysyłane przez klientów przechodzą do tej samej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="0dba6-175">Nie zawsze jest to preferowane.</span><span class="sxs-lookup"><span data-stu-id="0dba6-175">This is not always preferable.</span></span> <span data-ttu-id="0dba6-176">Aby uzyskać lepszą izolację, WCF i MSMQ w systemie Windows Vista zapewniają niestandardową kolejkę utraconych wiadomości (lub kolejkę utraconych wiadomości specyficznych dla aplikacji), którą użytkownik może określić do przechowywania wiadomości, które nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="0dba6-176">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="0dba6-177">W związku z tym różnych klientów nie współużytkują tę samą kolejkę utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="0dba6-178">Powiązanie ma dwie właściwości zainteresowania:</span><span class="sxs-lookup"><span data-stu-id="0dba6-178">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="0dba6-179">`DeadLetterQueue`: Ta właściwość jest wyliczeniem, które wskazuje, czy żądana jest kolejka utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="0dba6-180">Wyliczenie zawiera również rodzaj kolejki utraconych wiadomości, jeśli jest to wymagane.</span><span class="sxs-lookup"><span data-stu-id="0dba6-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="0dba6-181">Wartości to `None` `System`, `Custom`i .</span><span class="sxs-lookup"><span data-stu-id="0dba6-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="0dba6-182">Aby uzyskać więcej informacji na temat interpretacji tych właściwości, zobacz [Używanie kolejek utraconych do obsługi błędów transferu wiadomości](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span><span class="sxs-lookup"><span data-stu-id="0dba6-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="0dba6-183">`CustomDeadLetterQueue`: Ta właściwość jest adresem identyfikatora URI (Uniform Resource Identifier) kolejki utraconych wiadomości specyficznych dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0dba6-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="0dba6-184">Jest to wymagane, jeśli `DeadLetterQueue`.`Custom`</span><span class="sxs-lookup"><span data-stu-id="0dba6-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="0dba6-185">zostanie wybrana.</span><span class="sxs-lookup"><span data-stu-id="0dba6-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="0dba6-186">Właściwości obsługi trujących wiadomości</span><span class="sxs-lookup"><span data-stu-id="0dba6-186">Poison Message Handling properties</span></span>  
 <span data-ttu-id="0dba6-187">Gdy usługa odczytuje wiadomości z kolejki docelowej w ramach transakcji, usługa może nie przetwarzać komunikatu z różnych powodów.</span><span class="sxs-lookup"><span data-stu-id="0dba6-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="0dba6-188">Wiadomość jest następnie umieszczana z powrotem w kolejce do odczytu ponownie.</span><span class="sxs-lookup"><span data-stu-id="0dba6-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="0dba6-189">Aby poradzić sobie z komunikatami, które nie wielokrotnie, zestaw właściwości obsługi wiadomości poison można skonfigurować w powiązaniu.</span><span class="sxs-lookup"><span data-stu-id="0dba6-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="0dba6-190">Istnieją cztery właściwości: `ReceiveRetryCount` `MaxRetryCycles`, `RetryCycleDelay`, `ReceiveErrorHandling`, i .</span><span class="sxs-lookup"><span data-stu-id="0dba6-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="0dba6-191">Aby uzyskać więcej informacji na temat tych właściwości, zobacz [Trująca obsługa wiadomości](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="0dba6-191">For more information about these properties, see [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="0dba6-192">Właściwości zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="0dba6-192">Security Properties</span></span>  
 <span data-ttu-id="0dba6-193">Usługa MSMQ udostępnia własny model zabezpieczeń, taki jak listy kontroli dostępu (Listy kontroli dostępu) w kolejce lub wysyłanie uwierzytelnionych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="0dba6-194">Udostępnia `NetMsmqBinding` te właściwości zabezpieczeń w ramach ustawień zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="0dba6-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="0dba6-195">Istnieją dwie właściwości w powiązaniu `MsmqAuthenticationMode` dla `MsmqProtectionLevel`zabezpieczeń transportu: i .</span><span class="sxs-lookup"><span data-stu-id="0dba6-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="0dba6-196">Ustawienia w tych właściwościach zależą od konfiguracji usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="0dba6-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="0dba6-197">Aby uzyskać więcej informacji, zobacz [zabezpieczanie wiadomości przy użyciu zabezpieczeń transportu](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="0dba6-197">For more information, see [Securing Messages Using Transport Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="0dba6-198">Oprócz zabezpieczeń transportu, rzeczywisty komunikat SOAP sam może być zabezpieczony przy użyciu zabezpieczeń wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0dba6-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="0dba6-199">Aby uzyskać więcej informacji, zobacz [zabezpieczanie wiadomości przy użyciu zabezpieczeń wiadomości](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="0dba6-199">For more information, see [Securing Messages Using Message Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="0dba6-200">`MsmqTransportSecurity`również udostępnia dwie właściwości `MsmqEncryptionAlgorithm` `MsmqHashAlgorithm`i .</span><span class="sxs-lookup"><span data-stu-id="0dba6-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="0dba6-201">Są to wyliczenia różnych algorytmów do wyboru dla szyfrowania transferu kolejka do kolejki wiadomości i mieszania podpisów.</span><span class="sxs-lookup"><span data-stu-id="0dba6-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="0dba6-202">Inne właściwości</span><span class="sxs-lookup"><span data-stu-id="0dba6-202">Other Properties</span></span>  
 <span data-ttu-id="0dba6-203">Oprócz poprzednich właściwości inne właściwości specyficzne dla usługi MSMQ widoczne w powiązaniu obejmują:</span><span class="sxs-lookup"><span data-stu-id="0dba6-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="0dba6-204">`UseSourceJournal`: Właściwość wskazująca, że rejestrowanie źródłowe jest włączone.</span><span class="sxs-lookup"><span data-stu-id="0dba6-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="0dba6-205">Rejestrowanie źródłowe to funkcja usługi MSMQ, która śledzi wiadomości, które zostały pomyślnie przesłane z kolejki transmisji.</span><span class="sxs-lookup"><span data-stu-id="0dba6-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="0dba6-206">`UseMsmqTracing`: Właściwość wskazująca, że śledzenie usługi MSMQ jest włączone.</span><span class="sxs-lookup"><span data-stu-id="0dba6-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="0dba6-207">Śledzenie usługi MSMQ wysyła wiadomości raportu do kolejki raportów za każdym razem, gdy wiadomość opuszcza lub dociera do komputera obsługującego menedżera kolejek usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="0dba6-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="0dba6-208">`QueueTransferProtocol`: Wyliczenie protokołu używanego do przesyłania wiadomości kolejka do kolejki.</span><span class="sxs-lookup"><span data-stu-id="0dba6-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="0dba6-209">Usługa MSMQ implementuje natywny protokół transferu kolejka do kolejki oraz protokół oparty na potajemnym protokół o nazwie SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="0dba6-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="0dba6-210">Protokół SRMP jest używany podczas korzystania z transportu HTTP do transferów kolejka do kolejki.</span><span class="sxs-lookup"><span data-stu-id="0dba6-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="0dba6-211">SRMP secure jest używany podczas korzystania z protokołu HTTPS do transferów kolejka do kolejki.</span><span class="sxs-lookup"><span data-stu-id="0dba6-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="0dba6-212">`UseActiveDirectory`: Wartość logiczna wskazująca, czy usługa Active Directory musi być używana do rozpoznawania adresów kolejki.</span><span class="sxs-lookup"><span data-stu-id="0dba6-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="0dba6-213">Domyślnie jest to wyłączone.</span><span class="sxs-lookup"><span data-stu-id="0dba6-213">By default, this is off.</span></span> <span data-ttu-id="0dba6-214">Aby uzyskać więcej informacji, zobacz [Punkty końcowe usługi i Adresowanie kolejek](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="0dba6-214">For more information, see [Service Endpoints and Queue Addressing](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="0dba6-215">Msmqintegrationbinding</span><span class="sxs-lookup"><span data-stu-id="0dba6-215">MsmqIntegrationBinding</span></span>  
 <span data-ttu-id="0dba6-216">Jest `MsmqIntegrationBinding` używany, gdy punkt końcowy WCF do komunikowania się z istniejącą aplikacją MSMQ napisane w C, C++, COM lub System.Messaging interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="0dba6-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="0dba6-217">Właściwości wiązania są takie same `NetMsmqBinding`jak dla .</span><span class="sxs-lookup"><span data-stu-id="0dba6-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="0dba6-218">Obowiązują jednak następujące różnice:</span><span class="sxs-lookup"><span data-stu-id="0dba6-218">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="0dba6-219">Kontrakt operacyjny `MsmqIntegrationBinding` dla jest ograniczona do podjęcia <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> jednego parametru typu, gdzie parametr typu jest typem treści.</span><span class="sxs-lookup"><span data-stu-id="0dba6-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="0dba6-220">Wiele właściwości wiadomości natywnych usługi MSMQ są widoczne w <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> do użytku.</span><span class="sxs-lookup"><span data-stu-id="0dba6-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="0dba6-221">Aby pomóc w serializacji i deserializacji treści wiadomości, serializatory, takie jak XML i ActiveX są dostarczane.</span><span class="sxs-lookup"><span data-stu-id="0dba6-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="0dba6-222">Przykładowy kod</span><span class="sxs-lookup"><span data-stu-id="0dba6-222">Sample Code</span></span>  
 <span data-ttu-id="0dba6-223">Aby uzyskać instrukcje krok po kroku dotyczące pisania usług WCF korzystających z usługi MSMQ, zobacz następujące tematy:</span><span class="sxs-lookup"><span data-stu-id="0dba6-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="0dba6-224">Instrukcje: wymiana komunikatów z punktami końcowymi programu WCF i aplikacjami do obsługi kolejek komunikatów</span><span class="sxs-lookup"><span data-stu-id="0dba6-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="0dba6-225">Instrukcje: wymiana komunikatów znajdujących się w kolejce z punktami końcowymi WCF</span><span class="sxs-lookup"><span data-stu-id="0dba6-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="0dba6-226">W przypadku ukończonego przykładu kodu ilustrującego użycie usługi MSMQ w WCF zobacz następujące tematy:</span><span class="sxs-lookup"><span data-stu-id="0dba6-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="0dba6-227">Transakcyjne powiązanie MSMQ</span><span class="sxs-lookup"><span data-stu-id="0dba6-227">Transacted MSMQ Binding</span></span>](../../../../docs/framework/wcf/samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="0dba6-228">Komunikacja za pomocą nietrwałych kolejek</span><span class="sxs-lookup"><span data-stu-id="0dba6-228">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="0dba6-229">Kolejki utraconych komunikatów</span><span class="sxs-lookup"><span data-stu-id="0dba6-229">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="0dba6-230">Sesje i kolejki</span><span class="sxs-lookup"><span data-stu-id="0dba6-230">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="0dba6-231">Komunikacja dwukierunkowa</span><span class="sxs-lookup"><span data-stu-id="0dba6-231">Two-Way Communication</span></span>](../../../../docs/framework/wcf/samples/two-way-communication.md)
  
- [<span data-ttu-id="0dba6-232">SRMP</span><span class="sxs-lookup"><span data-stu-id="0dba6-232">SRMP</span></span>](../../../../docs/framework/wcf/samples/srmp.md)  
  
- [<span data-ttu-id="0dba6-233">Zabezpieczenia komunikatów w ramach kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="0dba6-233">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="0dba6-234">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0dba6-234">See also</span></span>

- [<span data-ttu-id="0dba6-235">Punkty końcowe usługi i adresowanie kolejki</span><span class="sxs-lookup"><span data-stu-id="0dba6-235">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="0dba6-236">Sieć Web hostująca aplikację zakolejkowaną</span><span class="sxs-lookup"><span data-stu-id="0dba6-236">Web Hosting a Queued Application</span></span>](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md)
