---
title: Tworzenie kolejek w programie WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: 7f0a6700dba8eb844cc471704095b29c2a2c7937
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="7aa01-102">Tworzenie kolejek w programie WCF</span><span class="sxs-lookup"><span data-stu-id="7aa01-102">Queuing in WCF</span></span>
<span data-ttu-id="7aa01-103">Tej sekcji opisano sposób użycia komunikacji z obsługą kolejek w systemie Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="7aa01-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="7aa01-104">Powiązania transportu kolejki jako WCF</span><span class="sxs-lookup"><span data-stu-id="7aa01-104">Queues as a WCF transport binding</span></span>  
 <span data-ttu-id="7aa01-105">W programie WCF umów Określ, jakie wymiany.</span><span class="sxs-lookup"><span data-stu-id="7aa01-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="7aa01-106">Kontrakty są wymiany komunikatów zależne od firm lub specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7aa01-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="7aa01-107">Mechanizm służący do wymiany wiadomości (lub "jak") jest określona w powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="7aa01-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="7aa01-108">Powiązania WCF hermetyzować szczegółowe informacje o wymianie wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="7aa01-109">Udostępniają pokrętła konfiguracji dla użytkownika kontrolować różne aspekty transportu lub protokół, który reprezentuje powiązania.</span><span class="sxs-lookup"><span data-stu-id="7aa01-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="7aa01-110">Usługi kolejkowania wiadomości w programie WCF jest traktowany jak wszelkie inne powiązania transportu, czyli duże korzyści w wielu aplikacjach kolejkowania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="7aa01-111">Obecnie wiele aplikacji kolejkowania wiadomości są zapisywane inaczej z innych zdalnego wywołania procedury (RPC) — styl aplikacji rozproszonych, dzięki czemu trudniej wykonaj i obsługa.</span><span class="sxs-lookup"><span data-stu-id="7aa01-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="7aa01-112">Z programem WCF styl pisania aplikacji rozproszonej jest znacznie takie same, co ułatwia wykonaj i konserwacji.</span><span class="sxs-lookup"><span data-stu-id="7aa01-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="7aa01-113">Ponadto przez factoring limit mechanizmu programu exchange, niezależnie od logiki biznesowej, łatwiej skonfigurować transportu lub go zmienić bez wpływu na kodu określonych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7aa01-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="7aa01-114">Na poniższym rysunku przedstawiono struktury usług WCF i klienta przy użyciu usługi MSMQ do ich przenoszenia.</span><span class="sxs-lookup"><span data-stu-id="7aa01-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="7aa01-115">![Diagram aplikacji w kolejce](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "rozproszonych kolejki — rysunek")</span><span class="sxs-lookup"><span data-stu-id="7aa01-115">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="7aa01-116">Jak widać na poprzedniej ilustracji, klient i usługa muszą być zdefiniowane tylko aplikacji semantykę, oznacza to, gdy kontrakt i implementacja.</span><span class="sxs-lookup"><span data-stu-id="7aa01-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="7aa01-117">Usługa umożliwia skonfigurowanie Zakolejkowane powiązanie odpowiednie ustawienia.</span><span class="sxs-lookup"><span data-stu-id="7aa01-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="7aa01-118">Klient używa [narzędzie narzędzia metadanych elementu ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) do wygenerowania klienta programu WCF z usługą i generowania pliku konfiguracji, który opisuje powiązania służące do wysyłania komunikatów do usługi.</span><span class="sxs-lookup"><span data-stu-id="7aa01-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="7aa01-119">W związku z tym aby wysłać wiadomość w kolejce, klient tworzy klienta WCF i wywołuje operację.</span><span class="sxs-lookup"><span data-stu-id="7aa01-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="7aa01-120">Powoduje to, że komunikat, który ma zostać wysłane do kolejki transmisji i przeniesienia uprawnień do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="7aa01-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="7aa01-121">Złożonością komunikatu w kolejce są ukryte przed aplikacji, która wysyła i odbiera komunikaty.</span><span class="sxs-lookup"><span data-stu-id="7aa01-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="7aa01-122">Ostrzeżenia o Zakolejkowane powiązanie w programie WCF obejmują:</span><span class="sxs-lookup"><span data-stu-id="7aa01-122">Caveats about queued binding in WCF include:</span></span>  
  
-   <span data-ttu-id="7aa01-123">Wszystkie usługi, którą musi być jednokierunkowej operacji, ponieważ domyślnie Zakolejkowane powiązanie w programie WCF nie obsługuje komunikację dupleksową korzystanie z kolejek.</span><span class="sxs-lookup"><span data-stu-id="7aa01-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="7aa01-124">Przykładowe komunikacja dwukierunkowa ([komunikacji dwustronny](../../../../docs/framework/wcf/samples/two-way-communication.md)) ilustruje sposób używania dwa kontrakty jednokierunkowe do zaimplementowania komunikację dupleksową korzystanie z kolejek.</span><span class="sxs-lookup"><span data-stu-id="7aa01-124">A two-way communication sample ([Two-Way Communication](../../../../docs/framework/wcf/samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
-   <span data-ttu-id="7aa01-125">Aby wygenerować WCF klienta przy użyciu wymiany metadanych wymaga dodatkowy punkt końcowy HTTP w usłudze mogą być przeszukiwane w bezpośrednio do generowania klienta WCF i uzyskać informacje o powiązaniu odpowiednio skonfigurować komunikację w kolejce.</span><span class="sxs-lookup"><span data-stu-id="7aa01-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
-   <span data-ttu-id="7aa01-126">W oparciu o Zakolejkowane powiązanie, dodatkowe poza WCF jest wymagana konfiguracja.</span><span class="sxs-lookup"><span data-stu-id="7aa01-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="7aa01-127">Na przykład <xref:System.ServiceModel.NetMsmqBinding> klasy, który jest dostarczany z programem WCF, musisz skonfigurować powiązania, a także skonfigurować migrację usługi kolejkowania komunikatów (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="7aa01-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="7aa01-128">W poniższych sekcjach opisano określonych umieszczonych w kolejce powiązania dostarczanego z programem WCF, które są oparte na usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7aa01-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="7aa01-129">Usługa MSMQ</span><span class="sxs-lookup"><span data-stu-id="7aa01-129">MSMQ</span></span>  
 <span data-ttu-id="7aa01-130">Transport z kolejką w programie WCF używa usługi MSMQ do komunikacji z jej w kolejce.</span><span class="sxs-lookup"><span data-stu-id="7aa01-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="7aa01-131">Usługa MSMQ jest dostarczany jako opcjonalny składnik z systemem Windows i działa jako usługa NT.</span><span class="sxs-lookup"><span data-stu-id="7aa01-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="7aa01-132">Zarejestrowaniu wiadomości do przesłania w kolejce transmisji i dostarczenie w kolejce docelowej.</span><span class="sxs-lookup"><span data-stu-id="7aa01-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="7aa01-133">Menedżerami kolejki usługi MSMQ implementacji protokołu niezawodnych transferu komunikatów, dzięki czemu komunikaty nie zostaną utracone podczas transmisji.</span><span class="sxs-lookup"><span data-stu-id="7aa01-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="7aa01-134">Protokół może być lokalny lub opartego na protokole SOAP, takich jak Reliable protokołu komunikatu (SRMP) protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="7aa01-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="7aa01-135">W usłudze MSMQ kolejek można transakcyjnej lub nietransakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="7aa01-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="7aa01-136">Kolejką transakcyjną umożliwia komunikaty, aby przechwycić i dostarczane w transakcji i następnie trwale przechowywane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="7aa01-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="7aa01-137">Komunikaty wysyłane do kolejką transakcyjną są przekazywane tylko raz w kolejności.</span><span class="sxs-lookup"><span data-stu-id="7aa01-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="7aa01-138">Kolejki nietransakcyjnej służy do wysyłania wiadomości jednocześnie nietrwałe i trwałe.</span><span class="sxs-lookup"><span data-stu-id="7aa01-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="7aa01-139">Wiadomość wysłana do kolejki nietransakcyjnej nie zawiera żadnych gwarancji niezawodnej transferu; w związku z tym komunikaty mogą zostać utracone.</span><span class="sxs-lookup"><span data-stu-id="7aa01-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="7aa01-140">Kolejki usługi MSMQ mogą również chronione, za pomocą tożsamości systemu Windows, w zarejestrowany w usłudze katalogowej Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7aa01-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="7aa01-141">Podczas instalowania usługi MSMQ, należy zainstalować integracji usługi Active Directory, która wymaga komputera, jako część sieci domeny systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="7aa01-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="7aa01-142">Aby uzyskać więcej informacji na temat usługi MSMQ, zobacz [usługi kolejkowania komunikatów instalowanie (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="7aa01-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="7aa01-143">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="7aa01-143">NetMsmqBinding</span></span>  
 <span data-ttu-id="7aa01-144">[ \<NetMsmqBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) jest Zakolejkowane powiązanie WCF zapewnia dwa punktami końcowymi WCF do komunikowania się przy użyciu usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7aa01-144">The [\<netMsmqBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="7aa01-145">Wiązanie, w związku z tym udostępnia właściwości, które są specyficzne dla usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7aa01-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="7aa01-146">Jednak nie wszystkie funkcje usługi MSMQ i właściwości są widoczne w `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="7aa01-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="7aa01-147">CD `NetMsmqBinding` zaprojektowano z optymalny zestaw funkcji, które większość klientów stwierdzi, że wystarczające.</span><span class="sxs-lookup"><span data-stu-id="7aa01-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="7aa01-148">`NetMsmqBinding` Manifesty podstawowe koncepcje kolejkowania omówione w związku z tym daleko w formie właściwości na powiązania.</span><span class="sxs-lookup"><span data-stu-id="7aa01-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="7aa01-149">Te właściwości, komunikują się z usługi MSMQ z kolei, jak przenieść i dostarczania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="7aa01-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="7aa01-150">Omówienie kategorii właściwości jest w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="7aa01-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="7aa01-151">Aby uzyskać więcej informacji zobacz tematy dotyczące pojęć, opisujących właściwości specyficzne dla bardziej całkowicie.</span><span class="sxs-lookup"><span data-stu-id="7aa01-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="7aa01-152">ExactlyOnce i trwałe właściwości</span><span class="sxs-lookup"><span data-stu-id="7aa01-152">ExactlyOnce and Durable Properties</span></span>  
 <span data-ttu-id="7aa01-153">`ExactlyOnce` i `Durable` właściwości mają wpływ na sposób wiadomości są przesyłane między kolejki:</span><span class="sxs-lookup"><span data-stu-id="7aa01-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
-   <span data-ttu-id="7aa01-154">`ExactlyOnce`: Jeśli równa `true` (domyślnie) umieszczonych w kolejce kanał zapewnia, że komunikat, jeśli dostarczane, nie jest zduplikowany.</span><span class="sxs-lookup"><span data-stu-id="7aa01-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="7aa01-155">Gwarantuje również, że komunikat nie zostaną utracone.</span><span class="sxs-lookup"><span data-stu-id="7aa01-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="7aa01-156">Jeśli nie można dostarczyć wiadomości lub wiadomości do czasu wygaśnięcia wygasa przed wiadomości mogą być dostarczane, wiadomości nie powiodło się wraz z przyczyną niepowodzenia dostarczenia jest rejestrowana w kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="7aa01-157">Jeśli wartość `false`, zwrócony sprawia, że ramach działań zmierzających do transferowania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="7aa01-158">W takim przypadku można opcjonalnie kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
-   <span data-ttu-id="7aa01-159">`Durable:` Jeśli wartość `true` (ustawienie domyślne), umieszczonych w kolejce kanał zapewnia, że usługa MSMQ przechowuje wiadomości trwale na dysku.</span><span class="sxs-lookup"><span data-stu-id="7aa01-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="7aa01-160">W związku z tym jeżeli zatrzymać i uruchomić ponownie usługę MSMQ, wiadomości na dysku jest przenoszona do kolejki docelowej lub dostarczone do usługi.</span><span class="sxs-lookup"><span data-stu-id="7aa01-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="7aa01-161">Jeśli wartość `false`, komunikaty są przechowywane w magazynie nietrwałe i zostaną utracone na zatrzymując i uruchamiając ponownie usługę MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7aa01-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="7aa01-162">Aby uzyskać `ExactlyOnce` niezawodnej transfer MSMQ wymaga kolejki transakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="7aa01-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="7aa01-163">Ponadto usługi MSMQ wymaga transakcji można odczytać z kolejką transakcyjną.</span><span class="sxs-lookup"><span data-stu-id="7aa01-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="7aa01-164">Tak, jeśli używasz `NetMsmqBinding`, należy pamiętać, że transakcja jest wymagana do wysyłania i odbierania wiadomości gdy `ExactlyOnce` ma ustawioną wartość `true`.</span><span class="sxs-lookup"><span data-stu-id="7aa01-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="7aa01-165">Podobnie, MSMQ wymaga kolejki z systemem innym niż transakcyjnej dla zapewnienia optymalnych, takie jak kiedy `ExactlyOnce` jest `false` i nietrwałe obsługi wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="7aa01-166">W związku z tym podczas ustawiania `ExactlyOnce` do `false` lub trwałe do `false`, nie można wysyłać ani odbierać przy użyciu transakcji.</span><span class="sxs-lookup"><span data-stu-id="7aa01-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7aa01-167">Upewnij się, czy prawidłowa kolejki (transakcyjna lub nietransakcyjna) został utworzony zgodnie z ustawieniami w powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="7aa01-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="7aa01-168">Jeśli `ExactlyOnce` jest `true`, użyj kolejką transakcyjną; w przeciwnym razie użyj kolejki nietransakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="7aa01-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="7aa01-169">Właściwości kolejki utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="7aa01-169">Dead-Letter Queue Properties</span></span>  
 <span data-ttu-id="7aa01-170">Kolejki utraconych wiadomości jest używany do przechowywania komunikatów, które nie są dostawy.</span><span class="sxs-lookup"><span data-stu-id="7aa01-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="7aa01-171">Użytkownik może zapisać kompensacyjnych logikę, która odczytuje wiadomości z kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="7aa01-172">Wiele systemów kolejkowania Podaj kolejki utraconych wiadomości całego systemu.</span><span class="sxs-lookup"><span data-stu-id="7aa01-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="7aa01-173">Usługa MSMQ zapewnia systemowe nietransakcyjnej kolejki utraconych wiadomości dla wiadomości, które nie są dostawy do kolejki nietransakcyjnej i systemowe transakcyjnej kolejki utraconych wiadomości dla wiadomości, które nie są dostawy do kolejek transakcyjnych.</span><span class="sxs-lookup"><span data-stu-id="7aa01-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="7aa01-174">Jeśli wielu klientów, wysyłanie komunikatów do kolejki inny element docelowy korzystają usługi MSMQ, wszystkie wiadomości wysyłane przez klientów przejdź do tej samej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="7aa01-175">Nie zawsze jest preferowanym.</span><span class="sxs-lookup"><span data-stu-id="7aa01-175">This is not always preferable.</span></span> <span data-ttu-id="7aa01-176">Dla lepszej izolacji, WCF i usługi MSMQ w [!INCLUDE[wv](../../../../includes/wv-md.md)] Podaj niestandardowej kolejki utraconych wiadomości (lub kolejki utraconych wiadomości specyficzne dla aplikacji) czy użytkownika można określić do przechowywania komunikatów, które nie są dostawy.</span><span class="sxs-lookup"><span data-stu-id="7aa01-176">For better isolation, WCF and MSMQ in [!INCLUDE[wv](../../../../includes/wv-md.md)] provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="7aa01-177">W związku z tym różnych klientów nie mają tej samej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="7aa01-178">Powiązanie ma dwie właściwości odsetek:</span><span class="sxs-lookup"><span data-stu-id="7aa01-178">The binding has two properties of interest:</span></span>  
  
-   <span data-ttu-id="7aa01-179">`DeadLetterQueue`: Ta właściwość jest wyliczeniem, która wskazuje, czy kolejka utraconych wiadomości jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="7aa01-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="7aa01-180">Wyliczenie zawiera także rodzaj kolejki utraconych wiadomości, jeśli wymagane jest jeden.</span><span class="sxs-lookup"><span data-stu-id="7aa01-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="7aa01-181">Wartości są `None`, `System`, i `Custom`.</span><span class="sxs-lookup"><span data-stu-id="7aa01-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="7aa01-182">Aby uzyskać więcej informacji na temat interpretacji te właściwości, zobacz [przy użyciu kolejki utraconych wiadomości do obsługi błędów transferu](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span><span class="sxs-lookup"><span data-stu-id="7aa01-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
-   <span data-ttu-id="7aa01-183">`CustomDeadLetterQueue`: Ta właściwość jest adresem identyfikator URI (Uniform Resource) specyficzne dla aplikacji kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7aa01-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="7aa01-184">Jest to wymagane, jeśli `DeadLetterQueue`.`Custom`</span><span class="sxs-lookup"><span data-stu-id="7aa01-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="7aa01-185">zostanie wybrany.</span><span class="sxs-lookup"><span data-stu-id="7aa01-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="7aa01-186">Właściwości Obsługa komunikatów zanieczyszczonych</span><span class="sxs-lookup"><span data-stu-id="7aa01-186">Poison Message Handling properties</span></span>  
 <span data-ttu-id="7aa01-187">Usługa odczytuje wiadomości z kolejki docelowej, w ramach transakcji, usługa może zakończyć się niepowodzeniem przetworzyć komunikatu z różnych przyczyn.</span><span class="sxs-lookup"><span data-stu-id="7aa01-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="7aa01-188">Komunikat jest następnie przywracane do kolejki, aby ponownie odczytać.</span><span class="sxs-lookup"><span data-stu-id="7aa01-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="7aa01-189">Na wypadek wiadomości, które nie są często zestaw poison komunikat — Obsługa właściwości można skonfigurować w powiązaniu.</span><span class="sxs-lookup"><span data-stu-id="7aa01-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="7aa01-190">Istnieją cztery właściwości: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, i `ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="7aa01-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="7aa01-191">Aby uzyskać więcej informacji na temat tych właściwości, zobacz [Obsługa komunikatów zanieczyszczonych](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="7aa01-191">For more information about these properties, see [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="7aa01-192">Właściwości zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="7aa01-192">Security Properties</span></span>  
 <span data-ttu-id="7aa01-193">MSMQ udostępnia własny model zabezpieczeń, takie jak listy kontroli dostępu (ACL) w kolejce lub wysyłania uwierzytelnione komunikaty.</span><span class="sxs-lookup"><span data-stu-id="7aa01-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="7aa01-194">`NetMsmqBinding` Opisuje te właściwości zabezpieczeń jako część jej ustawienia zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="7aa01-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="7aa01-195">Istnieją dwie właściwości powiązanie dla zabezpieczeń transportu: `MsmqAuthenticationMode` i `MsmqProtectionLevel`.</span><span class="sxs-lookup"><span data-stu-id="7aa01-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="7aa01-196">Ustawienia te właściwości są zależne od konfiguracji usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7aa01-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="7aa01-197">Aby uzyskać więcej informacji, zobacz [Zabezpieczanie komunikatów za pomocą zabezpieczeń transportu](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="7aa01-197">For more information, see [Securing Messages Using Transport Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="7aa01-198">Oprócz zabezpieczeń transportu korzystanie z zabezpieczeń komunikatów być zabezpieczona rzeczywiste samej wiadomości SOAP.</span><span class="sxs-lookup"><span data-stu-id="7aa01-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="7aa01-199">Aby uzyskać więcej informacji, zobacz [Zabezpieczanie komunikatów za pomocą komunikatów zabezpieczeń](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="7aa01-199">For more information, see [Securing Messages Using Message Security](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="7aa01-200">`MsmqTransportSecurity` udostępnia również dwie właściwości `MsmqEncryptionAlgorithm` i `MsmqHashAlgorithm`.</span><span class="sxs-lookup"><span data-stu-id="7aa01-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="7aa01-201">Są to wyliczenia różne algorytmy, aby wybrać szyfrowania transferu kolejki do kolejki komunikatów i tworzenia skrótów podpisów.</span><span class="sxs-lookup"><span data-stu-id="7aa01-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="7aa01-202">Inne właściwości</span><span class="sxs-lookup"><span data-stu-id="7aa01-202">Other Properties</span></span>  
 <span data-ttu-id="7aa01-203">Oprócz powyższych właściwości innych właściwości specyficzne dla usługi MSMQ w include powiązania:</span><span class="sxs-lookup"><span data-stu-id="7aa01-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
-   <span data-ttu-id="7aa01-204">`UseSourceJournal`: Właściwość, aby wskazać, że źródłowa jest włączona.</span><span class="sxs-lookup"><span data-stu-id="7aa01-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="7aa01-205">Źródłowa jest funkcją usługi MSMQ, który śledzi wiadomości, które zostały pomyślnie przekazane z kolejki transmisji.</span><span class="sxs-lookup"><span data-stu-id="7aa01-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
-   <span data-ttu-id="7aa01-206">`UseMsmqTracing`: Właściwość wskazująca, czy usługa MSMQ śledzenia jest włączona.</span><span class="sxs-lookup"><span data-stu-id="7aa01-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="7aa01-207">Śledzenie MSMQ wysyła komunikaty raport do kolejki raportu, zawsze pozostawia lub nadejściu wiadomości we komputer, na którym menedżera kolejki usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="7aa01-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
-   <span data-ttu-id="7aa01-208">`QueueTransferProtocol`: Wyliczenie protokół do użycia podczas transferu wiadomości do kolejki do kolejki.</span><span class="sxs-lookup"><span data-stu-id="7aa01-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="7aa01-209">Usługa MSMQ implementuje protokół transmisji w trybie macierzystym kolejki do kolejki i opartego na protokole SOAP protokołu SOAP Reliable Messaging Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="7aa01-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="7aa01-210">SRMP jest używany podczas transferów kolejki do kolejki przy użyciu transportu HTTP.</span><span class="sxs-lookup"><span data-stu-id="7aa01-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="7aa01-211">Bezpieczne SRMP jest używany podczas transferów kolejki do kolejki przy użyciu protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="7aa01-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
-   <span data-ttu-id="7aa01-212">`UseActiveDirectory`: Wartość logiczna wskazująca, czy usługi Active Directory muszą być używane do rozpoznawania adresów kolejki.</span><span class="sxs-lookup"><span data-stu-id="7aa01-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="7aa01-213">Domyślnie jest wyłączona.</span><span class="sxs-lookup"><span data-stu-id="7aa01-213">By default, this is off.</span></span> <span data-ttu-id="7aa01-214">Aby uzyskać więcej informacji, zobacz [punkty końcowe usługi i adresowanie kolejki](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="7aa01-214">For more information, see [Service Endpoints and Queue Addressing](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="7aa01-215">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="7aa01-215">MsmqIntegrationBinding</span></span>  
 <span data-ttu-id="7aa01-216">`MsmqIntegrationBinding` Jest używany, gdy punkt końcowy usługi WCF do komunikowania się z istniejącej aplikacji usługi MSMQ napisana C, C++, COM lub System.Messaging interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="7aa01-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="7aa01-217">Właściwości powiązania są takie same, jak w przypadku `NetMsmqBinding`.</span><span class="sxs-lookup"><span data-stu-id="7aa01-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="7aa01-218">Jednakże Zastosuj następujące różnice:</span><span class="sxs-lookup"><span data-stu-id="7aa01-218">However, the following differences apply:</span></span>  
  
-   <span data-ttu-id="7aa01-219">Kontrakt operacji dla `MsmqIntegrationBinding` jest ograniczona do podjęcia pojedynczy parametr typu <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> gdzie parametr typu jest typem treści.</span><span class="sxs-lookup"><span data-stu-id="7aa01-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
-   <span data-ttu-id="7aa01-220">Większość właściwości macierzystych wiadomości usługi MSMQ są widoczne w <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> do użycia.</span><span class="sxs-lookup"><span data-stu-id="7aa01-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
-   <span data-ttu-id="7aa01-221">Do serializacji i deserializacji treści wiadomości, znajdują się serializatorów, takich jak XML i ActiveX.</span><span class="sxs-lookup"><span data-stu-id="7aa01-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="7aa01-222">Przykładowy kod</span><span class="sxs-lookup"><span data-stu-id="7aa01-222">Sample Code</span></span>  
 <span data-ttu-id="7aa01-223">Aby uzyskać instrukcje krok po kroku dotyczące programowania WCF usług używających usługi MSMQ, zobacz następujące tematy:</span><span class="sxs-lookup"><span data-stu-id="7aa01-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
-   [<span data-ttu-id="7aa01-224">Instrukcje: wymiana komunikatów z punktami końcowymi programu WCF i aplikacjami do obsługi kolejek komunikatów</span><span class="sxs-lookup"><span data-stu-id="7aa01-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
-   [<span data-ttu-id="7aa01-225">Instrukcje: wymiana komunikatów znajdujących się w kolejce z punktami końcowymi WCF</span><span class="sxs-lookup"><span data-stu-id="7aa01-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="7aa01-226">Kompletny kod przykładowy pokazujący korzystanie z usługi MSMQ w programie WCF, zobacz następujące tematy:</span><span class="sxs-lookup"><span data-stu-id="7aa01-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
-   [<span data-ttu-id="7aa01-227">Transakcyjne powiązanie MSMQ</span><span class="sxs-lookup"><span data-stu-id="7aa01-227">Transacted MSMQ Binding</span></span>](../../../../docs/framework/wcf/samples/transacted-msmq-binding.md)  
  
-   [<span data-ttu-id="7aa01-228">Komunikacja za pomocą nietrwałych kolejek</span><span class="sxs-lookup"><span data-stu-id="7aa01-228">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)  
  
-   [<span data-ttu-id="7aa01-229">Kolejki utraconych komunikatów</span><span class="sxs-lookup"><span data-stu-id="7aa01-229">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)  
  
-   [<span data-ttu-id="7aa01-230">Sesje i kolejki</span><span class="sxs-lookup"><span data-stu-id="7aa01-230">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)  
  
-   [<span data-ttu-id="7aa01-231">Komunikacja dwukierunkowa</span><span class="sxs-lookup"><span data-stu-id="7aa01-231">Two-Way Communication</span></span>](../../../../docs/framework/wcf/samples/two-way-communication.md)  
  
-   [<span data-ttu-id="7aa01-232">Obsługa wsadowa w ramach transakcji</span><span class="sxs-lookup"><span data-stu-id="7aa01-232">Transacted Batching</span></span>](../../../../docs/framework/wcf/samples/transacted-batching.md)  
  
-   [<span data-ttu-id="7aa01-233">SRMP</span><span class="sxs-lookup"><span data-stu-id="7aa01-233">SRMP</span></span>](../../../../docs/framework/wcf/samples/srmp.md)  
  
-   [<span data-ttu-id="7aa01-234">Zabezpieczenia komunikatów w ramach kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="7aa01-234">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="7aa01-235">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="7aa01-235">See Also</span></span>  
 [<span data-ttu-id="7aa01-236">Punkty końcowe usługi i adresowanie kolejki</span><span class="sxs-lookup"><span data-stu-id="7aa01-236">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)  
 [<span data-ttu-id="7aa01-237">Sieć Web hostująca aplikację zakolejkowaną</span><span class="sxs-lookup"><span data-stu-id="7aa01-237">Web Hosting a Queued Application</span></span>](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md)
