---
title: "Najlepsze rozwiązania dotyczące komunikacji z obsługą kolejek"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- queues [WCF], best practices
- best practices [WCF], queued communication
ms.assetid: 446a6383-cae3-4338-b193-a33c14a49948
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 15de43cc83e92b781e44da703353bec98dbc2c6a
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/02/2017
---
# <a name="best-practices-for-queued-communication"></a><span data-ttu-id="1b4b0-102">Najlepsze rozwiązania dotyczące komunikacji z obsługą kolejek</span><span class="sxs-lookup"><span data-stu-id="1b4b0-102">Best Practices for Queued Communication</span></span>
<span data-ttu-id="1b4b0-103">W tym temacie przedstawiono zalecane praktyki dla komunikacji z obsługą kolejek w [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="1b4b0-103">This topic provides recommended practices for queued communication in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span> <span data-ttu-id="1b4b0-104">W poniższych sekcjach omówiono zalecane praktyki z punktu widzenia scenariusza.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-104">The following sections discuss recommended practices from a scenario perspective.</span></span>  
  
## <a name="fast-best-effort-queued-messaging"></a><span data-ttu-id="1b4b0-105">Szybkie optymalnych w kolejce obsługi wiadomości</span><span class="sxs-lookup"><span data-stu-id="1b4b0-105">Fast, Best-Effort Queued Messaging</span></span>  
 <span data-ttu-id="1b4b0-106">Scenariusze wymagające zapewnia oddzielenie, który obsługi wiadomości w kolejce i szybko i wysokiej wydajności wiadomości zapewnienia optymalnych Użyj nietransakcyjnej kolejki i ustaw <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> właściwości `false`.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-106">For scenarios that require separation that queued messaging provides and fast, high-performance messaging with best-effort assurances, use a non-transactional queue and set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="1b4b0-107">Ponadto użytkownik może nie ponoszenia kosztów operacji zapisu na dysku przez ustawienie <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> właściwości `false`.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-107">In addition, you can choose not to incur the cost of disk writes by setting the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="1b4b0-108">Zabezpieczenia mają wpływ na wydajność.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-108">Security has implications on performance.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1b4b0-109">[Zagadnienia dotyczące wydajności](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-109"> [Performance Considerations](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span></span>  
  
## <a name="reliable-end-to-end-queued-messaging"></a><span data-ttu-id="1b4b0-110">Niezawodne End-to-End w kolejce obsługi wiadomości</span><span class="sxs-lookup"><span data-stu-id="1b4b0-110">Reliable End-to-End Queued Messaging</span></span>  
 <span data-ttu-id="1b4b0-111">W poniższych sekcjach opisano najważniejsze wskazówki dotyczące scenariuszy, które wymagają end-to-end niezawodna obsługa komunikatów.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-111">The following sections describe recommended practices for scenarios that require end-to-end reliable messaging.</span></span>  
  
### <a name="basic-reliable-transfer"></a><span data-ttu-id="1b4b0-112">Transfer niezawodne podstawowe</span><span class="sxs-lookup"><span data-stu-id="1b4b0-112">Basic Reliable Transfer</span></span>  
 <span data-ttu-id="1b4b0-113">Niezawodność end-to-end można ustawić <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> właściwości `true` zapewnienie transferu.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-113">For end-to-end reliability, set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `true` to ensure transfer.</span></span> <span data-ttu-id="1b4b0-114"><xref:System.ServiceModel.MsmqBindingBase.Durable%2A> Ustawioną właściwość `true` lub `false` w zależności od wymagań (wartość domyślna to `true`).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-114">The <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property can be set to `true` or `false` depending on your requirements (the default is `true`).</span></span> <span data-ttu-id="1b4b0-115">Ogólnie rzecz biorąc <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> właściwość jest ustawiona na `true` jako część niezawodności end-to-end.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-115">Generally, the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property is set to `true` as part of end-to-end reliability.</span></span> <span data-ttu-id="1b4b0-116">Naruszenia zabezpieczeń jest koszt wydajności, ale powoduje, że komunikat trwałe, aby komunikat nie zostaną utracone, jeśli wystąpiła awaria menedżera kolejek.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-116">The compromise is a performance cost, but makes the message durable so that the message is not lost if a queue manager crashes.</span></span>  
  
### <a name="use-of-transactions"></a><span data-ttu-id="1b4b0-117">Używanie transakcji</span><span class="sxs-lookup"><span data-stu-id="1b4b0-117">Use of Transactions</span></span>  
 <span data-ttu-id="1b4b0-118">Aby zapewnić niezawodność end-to-end, należy użyć transakcji.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-118">You must use transactions to ensure end-to-end reliability.</span></span> <span data-ttu-id="1b4b0-119">`ExactlyOnce`gwarancje tylko zapewnić dostarczenie wiadomości do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-119">`ExactlyOnce` assurances only ensure that messages are delivered to the target queue.</span></span> <span data-ttu-id="1b4b0-120">Aby upewnić się, że komunikat jest odbierany, użyj transakcji.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-120">To ensure that the message is received, use transactions.</span></span> <span data-ttu-id="1b4b0-121">Bez transakcji Jeśli usługa ulegnie awarii, utracisz komunikat, który jest dostarczana, ale faktycznie jest dostarczany do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-121">Without transactions, if the service crashes, you lose the message that is being delivered but is actually delivered to the application.</span></span>  
  
### <a name="use-of-dead-letter-queues"></a><span data-ttu-id="1b4b0-122">Użyj kolejki utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="1b4b0-122">Use of Dead-letter Queues</span></span>  
 <span data-ttu-id="1b4b0-123">Kolejki utraconych wiadomości upewnij się, że powiadamia komunikat nie zostanie dostarczona do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-123">Dead-letter queues ensure that you are notified if a message fails to be delivered to the target queue.</span></span> <span data-ttu-id="1b4b0-124">Możesz użyć kolejki utraconych wiadomości dostarczane przez system lub niestandardowej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-124">You can use the system-provided dead-letter queue or a custom dead-letter queue.</span></span> <span data-ttu-id="1b4b0-125">Ogólnie rzecz biorąc przy użyciu niestandardowej kolejki utraconych wiadomości jest najlepszym, ponieważ pozwala na wysyłanie wiadomości utraconych z jednej aplikacji do pojedynczej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-125">In general, using a custom dead-letter queue is best because it enables you to send dead-letter messages from one application into a single dead-letter queue.</span></span> <span data-ttu-id="1b4b0-126">W przeciwnym razie wszystkich wiadomości utraconych wiadomości, które miało miejsce w przypadku wszystkich aplikacji uruchomionych w systemie są dostarczane do pojedynczej kolejki.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-126">Otherwise, all dead-letter messages that occur for all applications running on the system are delivered to a single queue.</span></span> <span data-ttu-id="1b4b0-127">Każda aplikacja musi następnie wyszukaj jednak kolejki utraconych wiadomości, można znaleźć wiadomości utraconych wiadomości, które mają zastosowanie do tej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-127">Each application must then search though the dead-letter queue to find the dead-letter messages that are relevant to that application.</span></span> <span data-ttu-id="1b4b0-128">Czasami przy użyciu niestandardowej kolejki utraconych wiadomości nie jest to możliwe, takie jak, korzystając z usługi MSMQ 3.0.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-128">Sometimes, using a custom dead-letter queue is not feasible, such as when using MSMQ 3.0.</span></span>  
  
 <span data-ttu-id="1b4b0-129">Nie zaleca się wyłączenie kolejki utraconych wiadomości dla komunikacji niezawodnej na trasie.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-129">Turning off dead-letter queues for end-to-end reliable communication is not recommended.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1b4b0-130">[Błędów transferu przy użyciu kolejki utraconych wiadomości, by obsłużyć komunikat](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-130"> [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span></span>  
  
### <a name="use-of-poison-message-handling"></a><span data-ttu-id="1b4b0-131">Użyj Poison komunikat — Obsługa</span><span class="sxs-lookup"><span data-stu-id="1b4b0-131">Use of Poison-Message Handling</span></span>  
 <span data-ttu-id="1b4b0-132">Poison komunikat — Obsługa zapewnia możliwość odzyskiwania danych po awarii do przetwarzania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-132">Poison-message handling provides the ability to recover from the failure to process messages.</span></span>  
  
 <span data-ttu-id="1b4b0-133">Podczas korzystania z funkcji obsługi komunikatów poison, upewnij się, że <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> właściwość jest ustawiona na odpowiednią wartość.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-133">When using the poison-message handling feature, ensure that the <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> property is set to the appropriate value.</span></span> <span data-ttu-id="1b4b0-134">Ustawieniem dla niego <xref:System.ServiceModel.ReceiveErrorHandling.Drop> oznacza, że dane zostaną utracone.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-134">Setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Drop> means the data is lost.</span></span> <span data-ttu-id="1b4b0-135">Z drugiej strony, ustawieniem dla niego <xref:System.ServiceModel.ReceiveErrorHandling.Fault> błędów hosta usługi, gdy wykryje Trująca wiadomość.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-135">On the other hand, setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Fault> faults the service host when it detects a poison message.</span></span> <span data-ttu-id="1b4b0-136">Za pomocą usługi MSMQ w wersji 3.0 <xref:System.ServiceModel.ReceiveErrorHandling.Fault> jest najlepszą opcją, aby uniknąć utraty danych i przenieść Trująca wiadomość do końca.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-136">Using MSMQ 3.0, <xref:System.ServiceModel.ReceiveErrorHandling.Fault> is the best option to avoid data loss and move the poison message out of the way.</span></span> <span data-ttu-id="1b4b0-137">Za pomocą usługi MSMQ 4.0, <xref:System.ServiceModel.ReceiveErrorHandling.Move> jest zalecanym podejściem.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-137">Using MSMQ 4.0, <xref:System.ServiceModel.ReceiveErrorHandling.Move> is the recommended approach.</span></span> <span data-ttu-id="1b4b0-138"><xref:System.ServiceModel.ReceiveErrorHandling.Move>Przenosi skażone wiadomości z kolejki, więc usługa dalsze przetwarzanie nowych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-138"><xref:System.ServiceModel.ReceiveErrorHandling.Move> moves a poisoned message out of the queue so the service can continue to process new messages.</span></span> <span data-ttu-id="1b4b0-139">Usługa poison wiadomość można następnie oddzielnie przetworzyć Trująca wiadomość.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-139">The poison-message service can then process the poison message separately.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1b4b0-140">[Obsługa komunikatów zanieczyszczonych](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-140"> [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
## <a name="achieving-high-throughput"></a><span data-ttu-id="1b4b0-141">Uzyskanie wysokiej przepływności</span><span class="sxs-lookup"><span data-stu-id="1b4b0-141">Achieving High Throughput</span></span>  
 <span data-ttu-id="1b4b0-142">Uzyskanie wysokiej przepływności na jeden punkt końcowy, użyj następującego polecenia:</span><span class="sxs-lookup"><span data-stu-id="1b4b0-142">To achieve high throughput on a single endpoint, use the following:</span></span>  
  
-   <span data-ttu-id="1b4b0-143">Wykonany, przetwarzanie wsadowe.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-143">Transacted batching.</span></span> <span data-ttu-id="1b4b0-144">Transakcyjnego przetwarzania wsadowego gwarantuje, że wiele komunikatów mogą być odczytywane w ramach jednej transakcji.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-144">Transacted batching ensures that many messages can be read in a single transaction.</span></span> <span data-ttu-id="1b4b0-145">Umożliwia to optymalne zatwierdzeń transakcji, zwiększa ogólną wydajność.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-145">This optimizes transaction commits, increasing overall performance.</span></span> <span data-ttu-id="1b4b0-146">Przetwarzanie wsadowe koszt jest to, że jeśli wystąpi błąd w pojedynczym komunikacie w partii, a następnie całą partię zostanie wycofana i komunikaty muszą być przetwarzane jedna aż bezpiecznie partii ponownie.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-146">The cost of batching is that if a failure occurs in a single message within a batch, then the entire batch is rolled back and the messages must be processed one at a time until it is safe to batch again.</span></span> <span data-ttu-id="1b4b0-147">W większości przypadków skażone wiadomości występują rzadko, dlatego tworzenie plików wsadowych jest preferowany sposób, aby zwiększyć wydajność systemu, zwłaszcza w przypadku innych menedżerowie zasobów, które uczestniczą w transakcji.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-147">In most cases, poison messages are rare, so batching is the preferred way to increase system performance, particularly when you have other resource managers that participate in the transaction.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1b4b0-148">[Tworzenie partii komunikatów w ramach transakcji](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-148"> [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span></span>  
  
-   <span data-ttu-id="1b4b0-149">Współbieżność.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-149">Concurrency.</span></span> <span data-ttu-id="1b4b0-150">Współbieżność zwiększa przepustowość, ale współbieżności wpływa na rywalizacji do zasobów udostępnionych.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-150">Concurrency increases throughput, but concurrency also affects contention to shared resources.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1b4b0-151">[Współbieżności](../../../../docs/framework/wcf/samples/concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-151"> [Concurrency](../../../../docs/framework/wcf/samples/concurrency.md).</span></span>  
  
-   <span data-ttu-id="1b4b0-152">Ograniczenia przepustowości.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-152">Throttling.</span></span> <span data-ttu-id="1b4b0-153">Aby zoptymalizować wydajność ograniczyć liczbę komunikatów w potoku dyspozytora.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-153">For optimal performance, throttle the number of messages in the dispatcher pipeline.</span></span> <span data-ttu-id="1b4b0-154">Na przykład jak to zrobić, zobacz [ograniczania](../../../../docs/framework/wcf/samples/throttling.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-154">For an example of how to do this, see [Throttling](../../../../docs/framework/wcf/samples/throttling.md).</span></span>  
  
 <span data-ttu-id="1b4b0-155">Podczas korzystania z przetwarzania wsadowego, należy pamiętać, że współbieżności i ograniczania przepustowości przełożyć na partie współbieżnych.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-155">When using batching, be aware that concurrency and throttling translate to concurrent batches.</span></span>  
  
 <span data-ttu-id="1b4b0-156">Aby osiągnąć wyższy przepływności i dostępności, użyj farma [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług, które zapoznały się z kolejki.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-156">To achieve higher throughput and availability, use a farm of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that read from the queue.</span></span> <span data-ttu-id="1b4b0-157">Wymaga to, że wszystkie te usługi narazić ten sam kontrakt, w tym samym punkcie końcowym.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-157">This requires that all of these services expose the same contract on the same endpoint.</span></span> <span data-ttu-id="1b4b0-158">To rozwiązanie farmy jest najlepsza dla aplikacji, które mają produkcji wysokiej szybkości wiadomości, ponieważ dzięki liczbę usług do wszystkich odczytywać z tej samej kolejki.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-158">The farm approach works best for applications that have high production rates of messages because it enables a number of services to all read from the same queue.</span></span>  
  
 <span data-ttu-id="1b4b0-159">Podczas korzystania z farmy, należy pamiętać, usługa MSMQ 3.0 nie obsługuje zdalnego odczyty transakcyjne.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-159">When using farms, be aware that MSMQ 3.0 does not support remote transacted reads.</span></span> <span data-ttu-id="1b4b0-160">MSMQ 4.0 obsługuje zdalne odczyty transakcyjne.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-160">MSMQ 4.0 does support remote transacted reads.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1b4b0-161">[Tworzenie partii komunikatów w ramach transakcji](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) i [różnice w funkcjach kolejkowania w systemach Windows Vista, Windows Server 2003 i Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-161"> [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) and [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>  
  
## <a name="queuing-with-unit-of-work-semantics"></a><span data-ttu-id="1b4b0-162">Usługi kolejkowania wiadomości z jednostką pracy semantyki</span><span class="sxs-lookup"><span data-stu-id="1b4b0-162">Queuing with Unit of Work Semantics</span></span>  
 <span data-ttu-id="1b4b0-163">W niektórych scenariuszach może być powiązane grupy wiadomości w kolejce i w związku z tym kolejności tych wiadomości jest znacząca.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-163">In some scenarios a group of messages in a queue may be related and, therefore, the ordering of these messages is significant.</span></span> <span data-ttu-id="1b4b0-164">W takich scenariuszach przetwarzania grupy powiązane komunikaty razem jako pojedyncza jednostka: wszystkie komunikaty są przetwarzane pomyślnie albo żaden nie jest.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-164">In such scenarios, process a group of related messages together as a single unit: either all of the messages are processed successfully or none are.</span></span> <span data-ttu-id="1b4b0-165">Aby zaimplementować takie zachowanie, użyj sesji z kolejki.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-165">To implement such behavior, use sessions with queues.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="1b4b0-166">[Grupowanie wiadomości w kolejce w sesji](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span><span class="sxs-lookup"><span data-stu-id="1b4b0-166"> [Grouping Queued Messages in a Session](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span></span>  
  
## <a name="correlating-request-reply-messages"></a><span data-ttu-id="1b4b0-167">Korelowanie wiadomości "żądanie-odpowiedź"</span><span class="sxs-lookup"><span data-stu-id="1b4b0-167">Correlating Request-Reply Messages</span></span>  
 <span data-ttu-id="1b4b0-168">Chociaż kolejki są zwykle jednokierunkowe, w niektórych sytuacjach może zajść potrzeba dopasowania odpowiedzi otrzymanych na żądanie wysłane wcześniej.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-168">Though queues are typically one-way, in some scenarios you may want to correlate a reply received to a request sent earlier.</span></span> <span data-ttu-id="1b4b0-169">Jeśli potrzebujesz takie korelacji zaleca się stosowanie własnych nagłówek komunikatu protokołu SOAP, zawierający informacje o powiązaniu z komunikatem.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-169">If you require such correlation, it is recommended that you apply your own SOAP message header that contains correlation information with the message.</span></span> <span data-ttu-id="1b4b0-170">Zazwyczaj nadawca dołącza ten nagłówek z komunikatem i odbiornik, podczas przetwarzania komunikatu i odpowiedzi z powrotem nowej wiadomości w kolejce odpowiedzi, dołączenie nadawcy wiadomości nagłówek, który zawiera informacje o powiązaniu, dlatego można nadawcy Określ komunikat odpowiedzi z komunikatu żądania.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-170">Typically, the sender attaches this header with the message, and the receiver, upon processing the message and replying back with a new message on a reply queue, attaches the sender's message header that contains the correlation information so that the sender can identify the reply message with the request message.</span></span>  
  
## <a name="integrating-with-non-wcf-applications"></a><span data-ttu-id="1b4b0-171">Współdziałanie z aplikacjami z systemem innym niż WCF</span><span class="sxs-lookup"><span data-stu-id="1b4b0-171">Integrating with Non-WCF Applications</span></span>  
 <span data-ttu-id="1b4b0-172">Użyj `MsmqIntegrationBinding` składników podczas integrowania [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług lub klientom z systemem innym niż[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług lub klientów.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-172">Use `MsmqIntegrationBinding` when integrating [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services or clients with non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services or clients.</span></span> <span data-ttu-id="1b4b0-173">Nie -[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikacji może być MSMQ aplikacji napisanych z użyciem System.Messaging COM + [!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)], lub C++.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-173">The non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application can be an MSMQ application written using System.Messaging, COM+, [!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)], or C++.</span></span>  
  
 <span data-ttu-id="1b4b0-174">Korzystając z `MsmqIntegrationBinding`, należy pamiętać o następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="1b4b0-174">When using `MsmqIntegrationBinding`, be aware of the following:</span></span>  
  
-   <span data-ttu-id="1b4b0-175">A [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] treść komunikatu nie jest taka sama jak treść wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-175">A [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message body is not the same as a MSMQ message body.</span></span> <span data-ttu-id="1b4b0-176">Podczas wysyłania [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] komunikatów za pomocą powiązania kolejkowanego [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] treści wiadomości znajduje się wewnątrz wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-176">When sending a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message using a queued binding, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message body is placed inside of a MSMQ message.</span></span> <span data-ttu-id="1b4b0-177">Infrastruktura usługi MSMQ jest oblivious do tych informacji dodatkowych; widzi ona tylko wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-177">The MSMQ infrastructure is oblivious to this extra information; it sees only the MSMQ message.</span></span>  
  
-   <span data-ttu-id="1b4b0-178">`MsmqIntegrationBinding`obsługuje serializacji popularnych typów.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-178">`MsmqIntegrationBinding` supports popular serialization types.</span></span> <span data-ttu-id="1b4b0-179">Na podstawie typu serializacji, typ treści komunikat ogólny <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, przyjmuje parametry innego typu.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-179">Based on the serialization type, the body type of the generic message, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, takes different type parameters.</span></span> <span data-ttu-id="1b4b0-180">Na przykład <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray> wymaga `MsmqMessage\<byte[]>` i <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> wymaga `MsmqMessage<Stream>`.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-180">For example, <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray> requires `MsmqMessage\<byte[]>` and <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> requires `MsmqMessage<Stream>`.</span></span>  
  
-   <span data-ttu-id="1b4b0-181">Serializacji XML można określić przy użyciu znanego typu `KnownTypes` atrybutu [ \<zachowanie >](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element, który jest następnie używany do określania, jak deserializować wiadomości XML.</span><span class="sxs-lookup"><span data-stu-id="1b4b0-181">With XML serialization, you can specify the known type using the `KnownTypes` attribute on the [\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element that is then used to determine how to deserialize the XML message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1b4b0-182">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="1b4b0-182">See Also</span></span>  
 [<span data-ttu-id="1b4b0-183">Usługi kolejkowania wiadomości w programie WCF</span><span class="sxs-lookup"><span data-stu-id="1b4b0-183">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)  
 [<span data-ttu-id="1b4b0-184">Porady: wymiana komunikatów z punktami końcowymi WCF umieszczonych w kolejce</span><span class="sxs-lookup"><span data-stu-id="1b4b0-184">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
 [<span data-ttu-id="1b4b0-185">Porady: wymiana komunikatów z punktami końcowymi WCF i aplikacji usługi kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="1b4b0-185">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
 [<span data-ttu-id="1b4b0-186">Grupowanie w kolejce wiadomości w sesji</span><span class="sxs-lookup"><span data-stu-id="1b4b0-186">Grouping Queued Messages in a Session</span></span>](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md)  
 [<span data-ttu-id="1b4b0-187">Tworzenie partii komunikatów w ramach transakcji</span><span class="sxs-lookup"><span data-stu-id="1b4b0-187">Batching Messages in a Transaction</span></span>](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)  
 [<span data-ttu-id="1b4b0-188">Przy użyciu kolejki utraconych wiadomości do obsługi transferów komunikatów zakończonych niepowodzeniem</span><span class="sxs-lookup"><span data-stu-id="1b4b0-188">Using Dead-Letter Queues to Handle Message Transfer Failures</span></span>](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)  
 [<span data-ttu-id="1b4b0-189">Obsługa komunikatów zanieczyszczonych</span><span class="sxs-lookup"><span data-stu-id="1b4b0-189">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)  
 [<span data-ttu-id="1b4b0-190">Różnice w funkcjach kolejkowania w systemach Windows Vista, Windows Server 2003 i Windows XP</span><span class="sxs-lookup"><span data-stu-id="1b4b0-190">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md)  
 [<span data-ttu-id="1b4b0-191">Zabezpieczanie komunikatów za pomocą zabezpieczeń transportu</span><span class="sxs-lookup"><span data-stu-id="1b4b0-191">Securing Messages Using Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md)  
 [<span data-ttu-id="1b4b0-192">Korzystanie z zabezpieczeń komunikatów</span><span class="sxs-lookup"><span data-stu-id="1b4b0-192">Securing Messages Using Message Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md)  
 [<span data-ttu-id="1b4b0-193">Rozwiązywanie problemów obsługi komunikatów kolejek</span><span class="sxs-lookup"><span data-stu-id="1b4b0-193">Troubleshooting Queued Messaging</span></span>](../../../../docs/framework/wcf/feature-details/troubleshooting-queued-messaging.md)
