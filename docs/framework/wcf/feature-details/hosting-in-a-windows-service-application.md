---
title: "Hostowanie w aplikacji usługi systemu Windows"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
caps.latest.revision: "12"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: d1a39162097c21f20c0dd04f3911442602871436
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="ed26f-102">Hostowanie w aplikacji usługi systemu Windows</span><span class="sxs-lookup"><span data-stu-id="ed26f-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="ed26f-103">Usługi systemu Windows (wcześniej znane jako usługi systemu Windows NT) zapewniają proces modelu szczególnie nadaje się do aplikacji, musi istnieć w pliku wykonywalnym długotrwałe, które nie są wyświetlane wszystkie formularza interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ed26f-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="ed26f-104">Okres istnienia procesu systemu Windows, usługi aplikacja jest zarządzana przez Menedżera sterowania usługami (SCM), dzięki czemu można uruchomić, zatrzymać i wstrzymywanie aplikacji usług systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ed26f-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="ed26f-105">Można skonfigurować do automatycznego uruchamiania podczas uruchamiania komputera, dzięki czemu odpowiednie środowisko macierzyste dla aplikacji "zawsze włączone" proces usługi systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ed26f-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="ed26f-106">Aplikacje usług systemu Windows, temacie [aplikacji usług systemu Windows](http://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="ed26f-106"> Windows service applications, see [Windows Service Applications](http://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="ed26f-107">Aplikacje obsługujące długotrwałe [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] usług mają wiele właściwości usługami wdrażania systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ed26f-107">Applications that host long-running [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services share many characteristics with Windows services.</span></span> <span data-ttu-id="ed26f-108">W szczególności [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługi są długotrwałe plików wykonywalnych serwera, które nie wchodzą w interakcje bezpośrednio z użytkownikiem i w związku z tym nie należy implementować dowolnej formy interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ed26f-108">In particular, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="ed26f-109">W efekcie hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług wewnątrz aplikacji usługi systemu Windows jest jedną z opcji tworzenia niezawodne, długotrwałą, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ed26f-109">As such, hosting [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services inside of a Windows service application is one option for building robust, long-running, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] applications.</span></span>  
  
 <span data-ttu-id="ed26f-110">Często [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] deweloperzy należy zdecydować, czy do obsługi ich [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikacji wewnątrz aplikacji usługi systemu Windows lub w środowisku macierzystym Internet Information Services (IIS) lub usługi aktywacji procesów systemu Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="ed26f-110">Often, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] developers must decide whether to host their [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="ed26f-111">Należy rozważyć użycie aplikacji usług systemu Windows w następujących warunkach:</span><span class="sxs-lookup"><span data-stu-id="ed26f-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
-   <span data-ttu-id="ed26f-112">Aplikacja wymaga jawnego aktywacji.</span><span class="sxs-lookup"><span data-stu-id="ed26f-112">Your application requires explicit activation.</span></span> <span data-ttu-id="ed26f-113">Na przykład podczas aplikacji musi zaczynać się automatycznie podczas uruchamiania serwera zamiast dynamicznie uruchamiany w odpowiedzi na pierwszy komunikat przychodzący należy używać usług systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ed26f-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
-   <span data-ttu-id="ed26f-114">Proces, który jest hostem aplikacji może zostać wyłączony, po uruchomieniu.</span><span class="sxs-lookup"><span data-stu-id="ed26f-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="ed26f-115">Po rozpoczęciu procesu usługi systemu Windows jest uruchomiona, chyba że jawnie zamykanie przez administratora serwera przy użyciu Menedżera kontroli usług.</span><span class="sxs-lookup"><span data-stu-id="ed26f-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="ed26f-116">Aplikacje hostowane w usługach IIS lub WAS może być uruchamiania i zatrzymywania dynamicznie optymalne wykorzystanie zasobów systemowych.</span><span class="sxs-lookup"><span data-stu-id="ed26f-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="ed26f-117">Aplikacje, które wymagają jawne kontroli w okresie istnienia procesu hostingu powinien używać usług systemu Windows zamiast usług IIS lub WAS.</span><span class="sxs-lookup"><span data-stu-id="ed26f-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
-   <span data-ttu-id="ed26f-118">Twoje [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługi należy uruchomić w systemie Windows Server 2003 i korzystać z transportu innego niż HTTP.</span><span class="sxs-lookup"><span data-stu-id="ed26f-118">Your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="ed26f-119">W systemie Windows Server 2003 [!INCLUDE[iis601](../../../../includes/iis601-md.md)] środowisko macierzyste jest ograniczone do komunikacji HTTP tylko.</span><span class="sxs-lookup"><span data-stu-id="ed26f-119">On Windows Server 2003, the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="ed26f-120">Aplikacje usług systemu Windows nie są to ograniczenie i można użyć dowolnego transportu [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] obsługuje, w tym net.tcp, net.pipe i net.msmq.</span><span class="sxs-lookup"><span data-stu-id="ed26f-120">Windows service applications are not subject to this restriction and can use any transport [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="ed26f-121">Na hoście WCF wewnątrz aplikacji usługi systemu Windows</span><span class="sxs-lookup"><span data-stu-id="ed26f-121">To host WCF inside of a Windows service application</span></span>  
  
1.  <span data-ttu-id="ed26f-122">Utwórz aplikację usługi systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ed26f-122">Create a Windows service application.</span></span> <span data-ttu-id="ed26f-123">Aplikacje usług systemu Windows może zapisać w kodzie zarządzanym przy użyciu klas w <xref:System.ServiceProcess> przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="ed26f-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="ed26f-124">Ta aplikacja musi zawierać jedną klasę, która dziedziczy <xref:System.ServiceProcess.ServiceBase>.</span><span class="sxs-lookup"><span data-stu-id="ed26f-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2.  <span data-ttu-id="ed26f-125">Okres istnienia Link [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług systemu Windows przez czas ich istnienia aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="ed26f-125">Link the lifetime of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="ed26f-126">Zwykle ma [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługi hostowanej w aplikacji usługi systemu Windows staje się aktywny po uruchomieniu usługi hostingu, Zatrzymano nasłuchiwanie wiadomości po zatrzymaniu usługi hostingu i zamykania hostingu podczas przetwarzania [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługa napotka błąd.</span><span class="sxs-lookup"><span data-stu-id="ed26f-126">Typically, you want [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service encounters an error.</span></span> <span data-ttu-id="ed26f-127">Można to zrobić w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="ed26f-127">This can be accomplished as follows:</span></span>  
  
    -   <span data-ttu-id="ed26f-128">Zastąpienie <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> do otwarcia jednego lub więcej wystąpień <xref:System.ServiceModel.ServiceHost>.</span><span class="sxs-lookup"><span data-stu-id="ed26f-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="ed26f-129">Pojedynczy aplikację usługi systemu Windows można zarządzać wieloma [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług, których uruchamianie i zatrzymywanie jako grupa.</span><span class="sxs-lookup"><span data-stu-id="ed26f-129">A single Windows service application can host multiple [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that start and stop as a group.</span></span>  
  
    -   <span data-ttu-id="ed26f-130">Zastąpienie <xref:System.ServiceProcess.ServiceBase.OnStop%2A> do wywołania <xref:System.ServiceModel.Channels.CommunicationObject.Closed> na <xref:System.ServiceModel.ServiceHost> wszelkie uruchomione [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług, które zostały uruchomione podczas <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span><span class="sxs-lookup"><span data-stu-id="ed26f-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    -   <span data-ttu-id="ed26f-131">Subskrybuj <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> zdarzenie <xref:System.ServiceModel.ServiceHost> i użyj <xref:System.ServiceProcess.ServiceController> klasę, aby zamknąć aplikację usługi systemu Windows w przypadku błędu.</span><span class="sxs-lookup"><span data-stu-id="ed26f-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="ed26f-132">Aplikacje usług systemu Windows, że host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługi są wdrażane i zarządzane w taki sam sposób jak użycie aplikacji usług systemu Windows, które nie [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="ed26f-132">Windows service applications that host [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services are deployed and managed in the same way as Windows service applications that do not make use of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ed26f-133">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="ed26f-133">See Also</span></span>  
 <xref:System.ServiceProcess>  
 [<span data-ttu-id="ed26f-134">Przewodnik: tworzenie aplikacji usługowej systemu Windows w Projektancie składników</span><span class="sxs-lookup"><span data-stu-id="ed26f-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](http://go.microsoft.com/fwlink/?LinkId=94875)  
 [<span data-ttu-id="ed26f-135">Instrukcje: hostowanie usługi WCF w usłudze zarządzanej systemu Windows</span><span class="sxs-lookup"><span data-stu-id="ed26f-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)  
 [<span data-ttu-id="ed26f-136">Host usług systemu Windows</span><span class="sxs-lookup"><span data-stu-id="ed26f-136">Windows Service Host</span></span>](../../../../docs/framework/wcf/samples/windows-service-host.md)  
 [<span data-ttu-id="ed26f-137">Architektura programowania aplikacji usług</span><span class="sxs-lookup"><span data-stu-id="ed26f-137">Service Application Programming Architecture</span></span>](http://go.microsoft.com/fwlink/?LinkId=94876)  
 [<span data-ttu-id="ed26f-138">Windows Server AppFabric funkcje hostingu</span><span class="sxs-lookup"><span data-stu-id="ed26f-138">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
