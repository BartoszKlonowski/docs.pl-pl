---
title: Hostowanie w aplikacji usługi systemu Windows
ms.date: 03/30/2017
ms.assetid: f4199998-27f3-4dd9-aee4-0a4addfa9f24
ms.openlocfilehash: ba49d123508ceb8da677d1e9c67721e4f86aa7c3
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/09/2020
ms.locfileid: "84597335"
---
# <a name="hosting-in-a-windows-service-application"></a><span data-ttu-id="b808a-102">Hostowanie w aplikacji usługi systemu Windows</span><span class="sxs-lookup"><span data-stu-id="b808a-102">Hosting in a Windows Service Application</span></span>
<span data-ttu-id="b808a-103">Usługi systemu Windows (znane wcześniej jako usługi systemu Windows NT) oferują model procesu szczególnie odpowiedni dla aplikacji, które muszą się znajdować w długim, uruchomionym pliku wykonywalnym i nie mogą wyświetlać żadnych form interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b808a-103">Windows services (formerly known as Windows NT services) provide a process model particularly suited to applications that must live in a long-running executable and do not display any form of user interface.</span></span> <span data-ttu-id="b808a-104">Okres istnienia aplikacji usługi systemu Windows jest zarządzany przez menedżera kontroli usług (SCM), który pozwala uruchamiać, zatrzymywać i wstrzymywać aplikacje usług systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="b808a-104">The process lifetime of a Windows service application is managed by the service control manager (SCM), which allows you to start, stop, and pause Windows service applications.</span></span> <span data-ttu-id="b808a-105">Proces usługi systemu Windows można skonfigurować do automatycznego uruchamiania podczas uruchamiania komputera, co sprawia, że jest to odpowiednie środowisko hostingu dla aplikacji "zawsze włączone".</span><span class="sxs-lookup"><span data-stu-id="b808a-105">You can configure a Windows service process to start automatically when the computer starts, making it a suitable hosting environment for "always on" applications.</span></span> <span data-ttu-id="b808a-106">Aby uzyskać więcej informacji o aplikacjach usług systemu Windows, zobacz [aplikacje usług systemu Windows](https://go.microsoft.com/fwlink/?LinkId=89450).</span><span class="sxs-lookup"><span data-stu-id="b808a-106">For more information about Windows service applications, see [Windows Service Applications](https://go.microsoft.com/fwlink/?LinkId=89450).</span></span>  
  
 <span data-ttu-id="b808a-107">Aplikacje, które obsługują długotrwałe usługi Windows Communication Foundation (WCF), współdzielą wiele cech z usługami systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="b808a-107">Applications that host long-running Windows Communication Foundation (WCF) services share many characteristics with Windows services.</span></span> <span data-ttu-id="b808a-108">W szczególności usługi WCF są długotrwałymi plikami wykonywalnymi serwera, które nie współdziałają bezpośrednio z użytkownikiem i w związku z tym nie implementują żadnej formy interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b808a-108">In particular, WCF services are long-running server executables that do not interact directly with the user and therefore do not implement any form of user interface.</span></span> <span data-ttu-id="b808a-109">W związku z tym hosting usług WCF w ramach aplikacji usługi systemu Windows to jedna z opcji tworzenia niezawodnych, długotrwałych aplikacji WCF.</span><span class="sxs-lookup"><span data-stu-id="b808a-109">As such, hosting WCF services inside of a Windows service application is one option for building robust, long-running, WCF applications.</span></span>  
  
 <span data-ttu-id="b808a-110">Często deweloperzy programu WCF muszą zdecydować, czy hostować swoją aplikację WCF w ramach aplikacji usługi systemu Windows, czy w ramach środowiska usług Internet Information Services (IIS) czy usługi aktywacji procesów systemu Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="b808a-110">Often, WCF developers must decide whether to host their WCF application inside of a Windows service application or inside of the Internet Information Services (IIS) or Windows Process Activation Service (WAS) hosting environment.</span></span> <span data-ttu-id="b808a-111">Należy rozważyć użycie aplikacji usługi systemu Windows w następujących warunkach:</span><span class="sxs-lookup"><span data-stu-id="b808a-111">You should consider using Windows service applications under the following conditions:</span></span>  
  
- <span data-ttu-id="b808a-112">Aplikacja wymaga jawnej aktywacji.</span><span class="sxs-lookup"><span data-stu-id="b808a-112">Your application requires explicit activation.</span></span> <span data-ttu-id="b808a-113">Na przykład należy używać usług systemu Windows, gdy aplikacja musi być uruchamiana automatycznie podczas uruchamiania serwera, zamiast uruchamiania dynamicznego w odpowiedzi na pierwszy komunikat przychodzący.</span><span class="sxs-lookup"><span data-stu-id="b808a-113">For example, you should use Windows services when your application must start automatically when the server starts instead of being dynamically started in response to the first incoming message.</span></span>  
  
- <span data-ttu-id="b808a-114">Proces hostujący aplikację musi pozostać uruchomiony po uruchomieniu.</span><span class="sxs-lookup"><span data-stu-id="b808a-114">The process that hosts your application must remain running once started.</span></span> <span data-ttu-id="b808a-115">Po uruchomieniu proces usługi systemu Windows pozostaje uruchomiony, chyba że zostanie jawnie zamknięty przez administratora serwera przy użyciu Menedżera kontroli usług.</span><span class="sxs-lookup"><span data-stu-id="b808a-115">Once started, a Windows service process remains running unless explicitly shut down by a server administrator using the service control manager.</span></span> <span data-ttu-id="b808a-116">Aplikacje hostowane w usługach IIS lub mogły zostać uruchomione i dynamicznie zatrzymane w celu optymalnego wykorzystania zasobów systemowych.</span><span class="sxs-lookup"><span data-stu-id="b808a-116">Applications hosted in IIS or WAS may be started and stopped dynamically to make optimal use of system resources.</span></span> <span data-ttu-id="b808a-117">Aplikacje, które wymagają jawnej kontroli nad okresem istnienia procesu hostingu, powinny używać usług systemu Windows zamiast usług IIS lub WAS.</span><span class="sxs-lookup"><span data-stu-id="b808a-117">Applications that require explicit control over the lifetime of their hosting process should use Windows services instead of IIS or WAS.</span></span>  
  
- <span data-ttu-id="b808a-118">Usługa WCF musi działać w systemie Windows Server 2003 i używać transportów innych niż HTTP.</span><span class="sxs-lookup"><span data-stu-id="b808a-118">Your WCF service must run on Windows Server 2003 and use transports other than HTTP.</span></span> <span data-ttu-id="b808a-119">W systemie Windows Server 2003 środowisko hostingu usług IIS 6,0 jest ograniczone tylko do komunikacji HTTP.</span><span class="sxs-lookup"><span data-stu-id="b808a-119">On Windows Server 2003, the IIS 6.0 hosting environment is restricted to HTTP communication only.</span></span> <span data-ttu-id="b808a-120">Aplikacje usług systemu Windows nie podlegają temu ograniczeniu i mogą korzystać z dowolnego obsługiwanego przez transport WCF, w tym net. TCP, net. pipe i net. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="b808a-120">Windows service applications are not subject to this restriction and can use any transport WCF supports, including net.tcp, net.pipe, and net.msmq.</span></span>  
  
### <a name="to-host-wcf-inside-of-a-windows-service-application"></a><span data-ttu-id="b808a-121">Aby hostować WCF w aplikacji usługi systemu Windows</span><span class="sxs-lookup"><span data-stu-id="b808a-121">To host WCF inside of a Windows service application</span></span>  
  
1. <span data-ttu-id="b808a-122">Utwórz aplikację usługi systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="b808a-122">Create a Windows service application.</span></span> <span data-ttu-id="b808a-123">Można napisać aplikacje usług systemu Windows w zarządzanym kodzie przy użyciu klas w <xref:System.ServiceProcess> przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="b808a-123">You can write Windows service applications in managed code using the classes in the <xref:System.ServiceProcess> namespace.</span></span> <span data-ttu-id="b808a-124">Ta aplikacja musi zawierać jedną klasę, która dziedziczy z <xref:System.ServiceProcess.ServiceBase> .</span><span class="sxs-lookup"><span data-stu-id="b808a-124">This application must include one class that inherits from <xref:System.ServiceProcess.ServiceBase>.</span></span>  
  
2. <span data-ttu-id="b808a-125">Połącz okres istnienia usług WCF w okresie istnienia aplikacji usługi systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="b808a-125">Link the lifetime of the WCF services to the lifetime of the Windows service application.</span></span> <span data-ttu-id="b808a-126">Zazwyczaj usługi WCF hostowane w aplikacji usługi systemu Windows stają się aktywne po uruchomieniu usługi hostingu, przerywają nasłuchiwanie komunikatów, gdy usługa hostingu jest zatrzymana, i zamyka proces hostingu, gdy usługa WCF napotka błąd.</span><span class="sxs-lookup"><span data-stu-id="b808a-126">Typically, you want WCF services hosted in a Windows service application to become active when the hosting service starts, stop listening for messages when the hosting service is stopped, and shut down the hosting process when the WCF service encounters an error.</span></span> <span data-ttu-id="b808a-127">Można to zrobić w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="b808a-127">This can be accomplished as follows:</span></span>  
  
    - <span data-ttu-id="b808a-128">Przesłoń <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> , aby otworzyć co najmniej jedno wystąpienie elementu <xref:System.ServiceModel.ServiceHost> .</span><span class="sxs-lookup"><span data-stu-id="b808a-128">Override <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> to open one or more instances of <xref:System.ServiceModel.ServiceHost>.</span></span> <span data-ttu-id="b808a-129">Pojedyncza aplikacja usługi systemu Windows może obsługiwać wiele usług WCF, które są uruchamiane i zatrzymywane jako Grupa.</span><span class="sxs-lookup"><span data-stu-id="b808a-129">A single Windows service application can host multiple WCF services that start and stop as a group.</span></span>  
  
    - <span data-ttu-id="b808a-130">Przesłoń, <xref:System.ServiceProcess.ServiceBase.OnStop%2A> Aby wywołać <xref:System.ServiceModel.Channels.CommunicationObject.Closed> <xref:System.ServiceModel.ServiceHost> wszystkie uruchomione usługi WCF, które zostały uruchomione w czasie <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> .</span><span class="sxs-lookup"><span data-stu-id="b808a-130">Override <xref:System.ServiceProcess.ServiceBase.OnStop%2A> to call <xref:System.ServiceModel.Channels.CommunicationObject.Closed> on the <xref:System.ServiceModel.ServiceHost> any running WCF services that were started during <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29>.</span></span>  
  
    - <span data-ttu-id="b808a-131">Zasubskrybuj <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> zdarzenie <xref:System.ServiceModel.ServiceHost> i Użyj <xref:System.ServiceProcess.ServiceController> klasy, aby zamknąć aplikację usługi systemu Windows w przypadku błędu.</span><span class="sxs-lookup"><span data-stu-id="b808a-131">Subscribe to the <xref:System.ServiceModel.Channels.CommunicationObject.Faulted> event of <xref:System.ServiceModel.ServiceHost> and use the <xref:System.ServiceProcess.ServiceController> class to shut down the Windows service application in case of error.</span></span>  
  
     <span data-ttu-id="b808a-132">Aplikacje usług systemu Windows obsługujące usługi WCF są wdrażane i zarządzane w taki sam sposób, jak aplikacje usług systemu Windows, które nie korzystają z programu WCF.</span><span class="sxs-lookup"><span data-stu-id="b808a-132">Windows service applications that host WCF services are deployed and managed in the same way as Windows service applications that do not make use of WCF.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b808a-133">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="b808a-133">See also</span></span>

- <xref:System.ServiceProcess>
- [<span data-ttu-id="b808a-134">Przewodnik: tworzenie aplikacji usługowej systemu Windows w Projektancie składników</span><span class="sxs-lookup"><span data-stu-id="b808a-134">Walkthrough: Creating a Windows Service Application in the Component Designer</span></span>](https://go.microsoft.com/fwlink/?LinkId=94875)
- [<span data-ttu-id="b808a-135">Instrukcje: hostowanie usługi WCF w usłudze zarządzanej systemu Windows</span><span class="sxs-lookup"><span data-stu-id="b808a-135">How to: Host a WCF Service in a Managed Windows Service</span></span>](how-to-host-a-wcf-service-in-a-managed-windows-service.md)
- [<span data-ttu-id="b808a-136">Host usług systemu Windows</span><span class="sxs-lookup"><span data-stu-id="b808a-136">Windows Service Host</span></span>](../samples/windows-service-host.md)
- [<span data-ttu-id="b808a-137">Architektura programowania aplikacji usług</span><span class="sxs-lookup"><span data-stu-id="b808a-137">Service Application Programming Architecture</span></span>](https://go.microsoft.com/fwlink/?LinkId=94876)
- <span data-ttu-id="b808a-138">[Funkcje hostingu sieci szkieletowej aplikacji systemu Windows Server](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="b808a-138">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
