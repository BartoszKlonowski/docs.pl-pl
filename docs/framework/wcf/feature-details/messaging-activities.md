---
title: Działania dotyczące komunikatów
ms.date: 03/30/2017
ms.assetid: 8498f215-1823-4aba-a6e1-391407f8c273
ms.openlocfilehash: 69a0e9a415b10d9c58d04eac27e48b1ed6a78064
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/09/2020
ms.locfileid: "84576398"
---
# <a name="messaging-activities"></a><span data-ttu-id="7d8e8-102">Działania dotyczące komunikatów</span><span class="sxs-lookup"><span data-stu-id="7d8e8-102">Messaging activities</span></span>

<span data-ttu-id="7d8e8-103">Działania obsługi komunikatów umożliwiają przepływom pracy wysyłanie i odbieranie komunikatów WCF.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-103">Messaging activities allow workflows to send and receive WCF messages.</span></span> <span data-ttu-id="7d8e8-104">Dodając działania obsługi komunikatów do przepływu pracy, można modelować wszelkie arbitralnie złożone wzorce wymiany komunikatów (unikatowy MEP).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-104">By adding messaging activities to a workflow you can model any arbitrarily complex message exchange patterns (MEP).</span></span>

## <a name="message-exchange-patterns"></a><span data-ttu-id="7d8e8-105">Wzorce wymiany komunikatów</span><span class="sxs-lookup"><span data-stu-id="7d8e8-105">Message exchange patterns</span></span>

<span data-ttu-id="7d8e8-106">Istnieją trzy podstawowe wzorce wymiany komunikatów:</span><span class="sxs-lookup"><span data-stu-id="7d8e8-106">There are three basic message exchange patterns:</span></span>

- <span data-ttu-id="7d8e8-107">**Datagram** — w przypadku korzystania z datagramu unikatowy MEP klient wysyła komunikat do usługi, ale usługa nie odpowiada.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-107">**Datagram** - When using the datagram MEP the client sends a message to the service, but the service does not respond.</span></span> <span data-ttu-id="7d8e8-108">Jest to czasami nazywane "pożar i zapomnij".</span><span class="sxs-lookup"><span data-stu-id="7d8e8-108">This is sometimes called "fire and forget".</span></span> <span data-ttu-id="7d8e8-109">Usługa Fire i zapomnij wymiany jest taka, która wymaga potwierdzenia pomyślnego dostarczenia poza pasmem.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-109">A fire and forget exchange is one that requires out-of-band confirmation of successful delivery.</span></span> <span data-ttu-id="7d8e8-110">Komunikat może zostać utracony podczas przesyłania i nigdy nie docierał do usługi.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-110">The message might be lost in transit and never reach the service.</span></span> <span data-ttu-id="7d8e8-111">Jeśli klient pomyślnie wyśle komunikat, nie gwarantuje to, że usługa odebrała komunikat.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-111">If the client successfully sends a message, it does not guarantee that the service has received the message.</span></span> <span data-ttu-id="7d8e8-112">Datagram jest podstawowym blokiem konstrukcyjnym do obsługi komunikatów, ponieważ można stworzyć własny MEPs na jego podstawie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-112">The datagram is a fundamental building block for messaging, as you can build your own MEPs on top of it.</span></span>

- <span data-ttu-id="7d8e8-113">**Żądanie-odpowiedź** — w przypadku korzystania z odpowiedzi żądania unikatowy MEP klient wysyła komunikat do usługi, usługa wykonuje wymagane przetwarzanie, a następnie wysyła odpowiedź z powrotem do klienta.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-113">**Request-Response** - When using the request-response MEP the client sends a message to the service, the service does the required processing, and then sends a response back to the client.</span></span> <span data-ttu-id="7d8e8-114">Wzorzec składa się z par żądanie-odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-114">The pattern consists of request-response pairs.</span></span> <span data-ttu-id="7d8e8-115">Przykłady wywołań żądania-odpowiedź to zdalne wywołania procedury (RPC) i żądania GET przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-115">Examples of request-response calls are remote procedure calls (RPC) and browser GET requests.</span></span> <span data-ttu-id="7d8e8-116">Ten wzorzec jest również znany jako półdupleks.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-116">This pattern is also known as half-duplex.</span></span>

- <span data-ttu-id="7d8e8-117">**Dupleks** — w przypadku używania dupleksu unikatowy MEP klient i usługa może wysyłać komunikaty do siebie w dowolnej kolejności.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-117">**Duplex** - When using the duplex MEP the client and service can send messages to each other in any order.</span></span> <span data-ttu-id="7d8e8-118">UNIKATOWY MEP dupleks jest taka sama jak rozmowa telefoniczna, gdzie każdy wypowiadany wyraz jest komunikatem.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-118">The duplex MEP is like a phone conversation, where each word being spoken is a message.</span></span>

<span data-ttu-id="7d8e8-119">Działania związane z obsługą komunikatów umożliwiają wdrożenie dowolnych z tych podstawowych MEPs oraz wszelkich arbitralnie złożonych unikatowy MEP.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-119">The messaging activities allow you to implement any of these basic MEPs as well as any arbitrarily complex MEP.</span></span>

## <a name="messaging-activities"></a><span data-ttu-id="7d8e8-120">Działania dotyczące komunikatów</span><span class="sxs-lookup"><span data-stu-id="7d8e8-120">Messaging activities</span></span>

<span data-ttu-id="7d8e8-121">[!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)]Definiuje następujące działania dotyczące komunikatów:</span><span class="sxs-lookup"><span data-stu-id="7d8e8-121">The [!INCLUDE[netfx_current_long](../../../../includes/netfx-current-long-md.md)] defines the following messaging activities:</span></span>

- <span data-ttu-id="7d8e8-122"><xref:System.ServiceModel.Activities.Send>— Użyj <xref:System.ServiceModel.Activities.Send> działania, aby wysłać wiadomość.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-122"><xref:System.ServiceModel.Activities.Send>- Use the <xref:System.ServiceModel.Activities.Send> activity to send a message.</span></span>

- <span data-ttu-id="7d8e8-123"><xref:System.ServiceModel.Activities.SendReply>— Użyj <xref:System.ServiceModel.Activities.SendReply> działania, aby wysłać odpowiedź do odebranej wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-123"><xref:System.ServiceModel.Activities.SendReply> - Use the <xref:System.ServiceModel.Activities.SendReply> activity to send a response to a received message.</span></span> <span data-ttu-id="7d8e8-124">To działanie jest używane przez usługi przepływu pracy podczas implementowania żądania/odpowiedzi unikatowy MEP.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-124">This activity is used by workflow services when implementing a request/reply MEP.</span></span>

- <span data-ttu-id="7d8e8-125"><xref:System.ServiceModel.Activities.Receive>— Użyj <xref:System.ServiceModel.Activities.Receive> działania, aby odebrać komunikat.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-125"><xref:System.ServiceModel.Activities.Receive>- Use the <xref:System.ServiceModel.Activities.Receive> activity to receive a message.</span></span>

- <span data-ttu-id="7d8e8-126"><xref:System.ServiceModel.Activities.ReceiveReply>— Użyj <xref:System.ServiceModel.Activities.ReceiveReply> działania, aby otrzymać komunikat odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-126"><xref:System.ServiceModel.Activities.ReceiveReply> - Use the <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive a reply message.</span></span> <span data-ttu-id="7d8e8-127">To działanie jest używane przez klientów usługi przepływu pracy podczas implementowania żądania/odpowiedzi unikatowy MEP.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-127">This activity is used by workflow service clients when implementing a request/reply MEP.</span></span>

## <a name="messaging-activities-and-message-exchange-patterns"></a><span data-ttu-id="7d8e8-128">Działania obsługi komunikatów i wzorce wymiany komunikatów</span><span class="sxs-lookup"><span data-stu-id="7d8e8-128">Messaging activities and message exchange patterns</span></span>

<span data-ttu-id="7d8e8-129">UNIKATOWY MEP datagramu obejmuje klienta wysyłającego wiadomość i usługi otrzymującej komunikat.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-129">A datagram MEP involves a client sending a message and a service receiving the message.</span></span> <span data-ttu-id="7d8e8-130">Jeśli klient jest przepływem pracy, użyj <xref:System.ServiceModel.Activities.Send> działania do wysłania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-130">If the client is a workflow use a <xref:System.ServiceModel.Activities.Send> activity to send the message.</span></span> <span data-ttu-id="7d8e8-131">Aby odebrać ten komunikat w przepływie pracy, użyj <xref:System.ServiceModel.Activities.Receive> działania.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-131">To receive that message in a workflow, use a <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="7d8e8-132"><xref:System.ServiceModel.Activities.Send>Każdy z <xref:System.ServiceModel.Activities.Receive> nich ma właściwość o nazwie `Content` .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-132">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities each have a property named `Content`.</span></span> <span data-ttu-id="7d8e8-133">Ta właściwość zawiera dane, które są wysyłane lub odbierane.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-133">This property contains the data being sent or received.</span></span> <span data-ttu-id="7d8e8-134">Podczas wdrażania żądania-Response unikatowy MEP zarówno klienta, jak i usługi używają par działań.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-134">When implementing the request-response MEP both the client and the service use pairs of activities.</span></span> <span data-ttu-id="7d8e8-135">Klient używa <xref:System.ServiceModel.Activities.Send> działania do wysłania wiadomości i <xref:System.ServiceModel.Activities.ReceiveReply> działania w celu odebrania odpowiedzi z usługi.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-135">The client uses a <xref:System.ServiceModel.Activities.Send> activity to send the message and a <xref:System.ServiceModel.Activities.ReceiveReply> activity to receive the response from the service.</span></span> <span data-ttu-id="7d8e8-136">Te dwa działania są skojarzone ze sobą przez <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> Właściwość.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-136">These two activities are associated with each other by the <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property.</span></span> <span data-ttu-id="7d8e8-137">Ta właściwość jest ustawiona na <xref:System.ServiceModel.Activities.Send> działanie, które wysłało oryginalną wiadomość.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-137">This property is set to the <xref:System.ServiceModel.Activities.Send> activity that sent the original message.</span></span> <span data-ttu-id="7d8e8-138">Usługa używa również pary skojarzonych działań: <xref:System.ServiceModel.Activities.Receive> i <xref:System.ServiceModel.Activities.SendReply> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-138">The service also uses a pair of associated activities: <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="7d8e8-139">Te dwa działania są skojarzone z <xref:System.ServiceModel.Activities.SendReply.Request%2A> właściwością.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-139">These two activities are associated by the <xref:System.ServiceModel.Activities.SendReply.Request%2A> property.</span></span> <span data-ttu-id="7d8e8-140">Ta właściwość jest ustawiona na <xref:System.ServiceModel.Activities.Receive> działanie, które odebrało oryginalną wiadomość.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-140">This property is set to the <xref:System.ServiceModel.Activities.Receive> activity that received the original message.</span></span> <span data-ttu-id="7d8e8-141"><xref:System.ServiceModel.Activities.ReceiveReply>Działania i <xref:System.ServiceModel.Activities.SendReply> , takie jak <xref:System.ServiceModel.Activities.Send> i <xref:System.ServiceModel.Activities.Receive> umożliwiają wysyłanie <xref:System.ServiceModel.Channels.Message> wystąpienia lub typu kontraktu komunikatu.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-141">The <xref:System.ServiceModel.Activities.ReceiveReply> and <xref:System.ServiceModel.Activities.SendReply> activities, like <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> allow you to send a <xref:System.ServiceModel.Channels.Message> instance or a message contract type.</span></span>

<span data-ttu-id="7d8e8-142">Ze względu na długotrwały charakter przepływów pracy ważne jest, aby wzorzec komunikacji dwukierunkowej obsługiwał również długotrwałe konwersacje.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-142">Because of the long-running nature of workflows, it is important for the duplex pattern of communication to also support long-running conversations.</span></span> <span data-ttu-id="7d8e8-143">Aby można było obsługiwać długotrwałe konwersacje, klienci inicjujący konwersacje muszą zapewnić usługę z możliwością wywołania jej ponownie w późniejszym czasie, gdy dane staną się dostępne.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-143">To support long-running conversations, clients who initiate the conversation must provide the service with an opportunity to call it back at a later time when the data becomes available.</span></span> <span data-ttu-id="7d8e8-144">Na przykład żądanie zamówienia zakupu jest przesyłane do zatwierdzenia przez Menedżera, ale może nie być przetwarzane przez dzień, tydzień lub nawet rok; po podaniu zatwierdzenia należy wznowić przepływ pracy, który zarządza zatwierdzeniem zamówienia zakupu.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-144">For example, a purchase order request is submitted for manager approval, but it might not be processed for a day, a week, or even a year; the workflow that manages the purchase order approval must know to resume after the approval is given.</span></span> <span data-ttu-id="7d8e8-145">Ten wzorzec komunikacji dwukierunkowej jest obsługiwany w przepływach pracy przy użyciu korelacji.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-145">This pattern of duplex communication is supported in workflows using correlation.</span></span> <span data-ttu-id="7d8e8-146">Do implementacji wzorca dupleksowego, używania <xref:System.ServiceModel.Activities.Send> i <xref:System.ServiceModel.Activities.Receive> działań.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-146">To implement a duplex pattern, use <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="7d8e8-147">W <xref:System.ServiceModel.Activities.Receive> działaniu zainicjuj korelację przy użyciu <xref:System.ServiceModel.Activities.CorrelationHandle> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-147">On the <xref:System.ServiceModel.Activities.Receive> activity, initialize a correlation using <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="7d8e8-148">W <xref:System.ServiceModel.Activities.Send> ustawieniu działanie, które obsługuje dojście korelacji jako <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> wartość właściwości.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-148">On the <xref:System.ServiceModel.Activities.Send> activity set that correlation handle as the <xref:System.ServiceModel.Activities.Send.CorrelatesWith%2A> property value.</span></span> <span data-ttu-id="7d8e8-149">Aby uzyskać więcej informacji, zobacz [trwały dupleks](durable-duplex-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-149">For more information, see [Durable Duplex](durable-duplex-correlation.md).</span></span>

> [!NOTE]
> <span data-ttu-id="7d8e8-150">Implementacja przepływności przepływu pracy przy użyciu korelacji wywołania zwrotnego ("trwały dupleks") jest przeznaczona dla długotrwałych konwersacji.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-150">Workflow’s implementation of duplex using a callback correlation ("Durable Duplex") is intended for long-running conversations.</span></span> <span data-ttu-id="7d8e8-151">Nie jest to takie samo, jak w przypadku programu WCF z kontraktami wywołania zwrotnego, w których konwersacja jest krótkoterminowa (okres istnienia kanału).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-151">This is not the same as WCF duplex with callback contracts where the conversation is short-running (the lifetime of the channel).</span></span>

## <a name="message-formatting-and-messaging-activities"></a><span data-ttu-id="7d8e8-152">Formatowanie komunikatów i działania dotyczące komunikatów</span><span class="sxs-lookup"><span data-stu-id="7d8e8-152">Message formatting and messaging activities</span></span>

<span data-ttu-id="7d8e8-153"><xref:System.ServiceModel.Activities.Receive>Działania i <xref:System.ServiceModel.Activities.ReceiveReply> mają właściwość o nazwie `Content` .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-153">The <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities have a property named `Content`.</span></span> <span data-ttu-id="7d8e8-154">Ta właściwość jest typu <xref:System.ServiceModel.Activities.ReceiveContent> i reprezentuje dane, które <xref:System.ServiceModel.Activities.Receive> <xref:System.ServiceModel.Activities.ReceiveReply> odbiera.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-154">This property is of type <xref:System.ServiceModel.Activities.ReceiveContent> and represents data the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity receives.</span></span> <span data-ttu-id="7d8e8-155">.NET Framework definiuje dwie powiązane klasy o nazwie <xref:System.ServiceModel.Activities.ReceiveMessageContent> i <xref:System.ServiceModel.Activities.ReceiveParametersContent> obie pochodne od <xref:System.ServiceModel.Activities.ReceiveContent> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-155">The .NET Framework defines two related classes called <xref:System.ServiceModel.Activities.ReceiveMessageContent> and <xref:System.ServiceModel.Activities.ReceiveParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.ReceiveContent>.</span></span> <span data-ttu-id="7d8e8-156">Ustaw <xref:System.ServiceModel.Activities.Receive> <xref:System.ServiceModel.Activities.ReceiveReply> Właściwość działania lub `Content` na wystąpienie jednego z tych typów, aby odbierać dane do usługi przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-156">Set the <xref:System.ServiceModel.Activities.Receive> or <xref:System.ServiceModel.Activities.ReceiveReply> activity’s `Content` property to an instance of one of these types to receive data into a workflow service.</span></span> <span data-ttu-id="7d8e8-157">Typ, który ma być używany, zależy od typu danych odbieranych przez działanie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-157">The type to use depends upon the type of data the activity receives.</span></span> <span data-ttu-id="7d8e8-158">Jeśli działanie odbierze `Message` obiekt lub typ kontraktu komunikatu, użyj <xref:System.ServiceModel.Activities.ReceiveMessageContent> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-158">If the activity receives a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.ReceiveMessageContent>.</span></span> <span data-ttu-id="7d8e8-159">Jeśli działanie odbiera zestaw kontraktów danych lub typów XML, które mogą być serializowane, użyj <xref:System.ServiceModel.Activities.ReceiveParametersContent> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-159">If the activity receives a set of data contract or XML types that can be serialized, use <xref:System.ServiceModel.Activities.ReceiveParametersContent>.</span></span> <span data-ttu-id="7d8e8-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent>umożliwia wysyłanie wielu parametrów, a <xref:System.ServiceModel.Activities.ReceiveMessageContent> jedynie umożliwia wysyłanie tylko jednego obiektu, wiadomości (lub typu kontraktu wiadomości).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-160"><xref:System.ServiceModel.Activities.ReceiveParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.ReceiveMessageContent> only allows you to send one object, the message (or message contract type).</span></span>

> [!NOTE]
> <span data-ttu-id="7d8e8-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent>może być również używany z pojedynczym kontraktem danych lub typem XML, który może być serializowany.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-161"><xref:System.ServiceModel.Activities.ReceiveMessageContent> can also be used with a single data contract or XML type that can be serialized.</span></span> <span data-ttu-id="7d8e8-162">Różnica między użyciem <xref:System.ServiceModel.Activities.ReceiveParametersContent> z pojedynczym parametrem a obiektem przekazanym bezpośrednio do <xref:System.ServiceModel.Activities.ReceiveMessageContent> formatu sieci.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-162">The difference between using <xref:System.ServiceModel.Activities.ReceiveParametersContent> with a single parameter and the object passed directly to <xref:System.ServiceModel.Activities.ReceiveMessageContent> is the wire-format.</span></span> <span data-ttu-id="7d8e8-163">Zawartość parametru jest opakowana w element XML, który odnosi się do nazwy operacji, a serializowany obiekt jest opakowany w element XML przy użyciu nazwy parametru (na przykład `<Echo><msg>Hello, World</msg></Echo>` ).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-163">The parameter’s content is wrapped in an XML element that corresponds to the operation name and the serialized object is wrapped in an XML element using the parameter name (for example, `<Echo><msg>Hello, World</msg></Echo>`).</span></span> <span data-ttu-id="7d8e8-164">Zawartość komunikatu nie jest opakowana przez nazwę operacji.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-164">The message content is not wrapped by the operation name.</span></span> <span data-ttu-id="7d8e8-165">Zamiast tego serializowany obiekt jest umieszczany w elemencie XML przy użyciu kwalifikowanej nazwy typu XML (na przykład `<string>Hello, World</string>` ).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-165">Instead, the serialized object is placed within an XML element using the XML-qualified type name (for example, `<string>Hello, World</string>`).</span></span>

<span data-ttu-id="7d8e8-166"><xref:System.ServiceModel.Activities.Send>Działania i <xref:System.ServiceModel.Activities.SendReply> mają również właściwość o nazwie `Content` .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-166">The <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities also have a property named `Content`.</span></span> <span data-ttu-id="7d8e8-167">Ta właściwość jest typu <xref:System.ServiceModel.Activities.SendContent> i reprezentuje dane wysyłane przez <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.SendReply> operacje lub.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-167">This property is of type <xref:System.ServiceModel.Activities.SendContent> and represents data the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity sends.</span></span> <span data-ttu-id="7d8e8-168">.NET Framework definiuje dwa typy powiązane <xref:System.ServiceModel.Activities.SendMessageContent> i <xref:System.ServiceModel.Activities.SendParametersContent> obie pochodne od <xref:System.ServiceModel.Activities.SendContent> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-168">The .NET Framework defines two related types called <xref:System.ServiceModel.Activities.SendMessageContent> and <xref:System.ServiceModel.Activities.SendParametersContent> both of which are derived from <xref:System.ServiceModel.Activities.SendContent>.</span></span> <span data-ttu-id="7d8e8-169">Ustaw <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.SendReply> Właściwość działania lub `Content` na wystąpienie jednego z tych typów w celu wysłania danych z usługi przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-169">Set the <xref:System.ServiceModel.Activities.Send> or <xref:System.ServiceModel.Activities.SendReply> activity’s `Content` property to an instance of one of these types to send data from a workflow service.</span></span> <span data-ttu-id="7d8e8-170">Typ, który ma być używany, zależy od typu danych wysyłanych przez działanie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-170">The type to use depends upon the type of data the activity sends.</span></span> <span data-ttu-id="7d8e8-171">Jeśli działanie wysyła `Message` obiekt lub typ kontraktu komunikatu, użyj <xref:System.ServiceModel.Activities.SendMessageContent> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-171">If the activity sends a `Message` object or a message contract type, use <xref:System.ServiceModel.Activities.SendMessageContent>.</span></span> <span data-ttu-id="7d8e8-172">Jeśli działanie wysyła typ kontraktu danych, użyj <xref:System.ServiceModel.Activities.SendParametersContent> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-172">If the activity sends a data contract type use <xref:System.ServiceModel.Activities.SendParametersContent>.</span></span> <span data-ttu-id="7d8e8-173"><xref:System.ServiceModel.Activities.SendParametersContent>umożliwia wysyłanie wielu parametrów, a <xref:System.ServiceModel.Activities.SendMessageContent> jedynie umożliwia wysyłanie tylko jednego obiektu, wiadomości (lub typu kontraktu wiadomości).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-173"><xref:System.ServiceModel.Activities.SendParametersContent> allows you to send multiple parameters, whereas <xref:System.ServiceModel.Activities.SendMessageContent> only allows you to send one object, the message (or the message contract type).</span></span>

<span data-ttu-id="7d8e8-174">Przy bezwzględnym programowaniu w działaniach związanych z przesyłaniem komunikatów należy używać generycznego <xref:System.Activities.InArgument%601> i <xref:System.Activities.OutArgument%601> do otaczania obiektów przypisanych do właściwości komunikatów lub <xref:System.ServiceModel.Activities.Send> parametrów <xref:System.ServiceModel.Activities.SendReply> działań,, <xref:System.ServiceModel.Activities.Receive> i <xref:System.ServiceModel.Activities.ReceiveReply> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-174">When programming imperatively with the messaging activities, you use the generic <xref:System.Activities.InArgument%601> and <xref:System.Activities.OutArgument%601> to wrap the objects you assign to the message or parameters properties of the <xref:System.ServiceModel.Activities.Send>, <xref:System.ServiceModel.Activities.SendReply>, <xref:System.ServiceModel.Activities.Receive>, and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="7d8e8-175">Służy <xref:System.Activities.InArgument%601> do działania i działania oraz <xref:System.ServiceModel.Activities.Send> <xref:System.ServiceModel.Activities.SendReply> <xref:System.Activities.OutArgument%601> dla <xref:System.ServiceModel.Activities.Receive> <xref:System.ServiceModel.Activities.ReceiveReply> działań i.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-175">Use <xref:System.Activities.InArgument%601> for the <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.SendReply> activities and <xref:System.Activities.OutArgument%601> for <xref:System.ServiceModel.Activities.Receive> and <xref:System.ServiceModel.Activities.ReceiveReply> activities.</span></span> <span data-ttu-id="7d8e8-176">`In`argumenty są używane z działaniami wysyłania, ponieważ dane są przesyłane do działań.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-176">`In` arguments are used with the send activities because the data is being passed into the activities.</span></span> <span data-ttu-id="7d8e8-177">`Out`argumenty są używane z działaniami odbierania, ponieważ dane są przesyłane z działań, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-177">`Out` arguments are used with the receive activities because data is being passed out of the activities, as shown in the following example.</span></span>

```csharp
Receive reserveSeat = new Receive
{
    ...
    Content = new ReceiveParametersContent
    {
        Parameters =
        {
            { "ReservationInfo", new OutArgument<ReservationRequest>(reservationInfo) }
        }
    }
};
SendReply reserveSeat = new SendReply
{
    ...
    Request = reserveSeat,
    Content = new SendParametersContent
    {
        Parameters =
        {
            { "ReservationId", new InArgument<string>(reservationId) }
        }
    },
};
```

<span data-ttu-id="7d8e8-178">Podczas implementowania usługi przepływu pracy, która definiuje operację żądania/odpowiedzi zwracającą wartość void, należy utworzyć wystąpienie <xref:System.ServiceModel.Activities.SendReply> działania i ustawić <xref:System.ServiceModel.Activities.SendReply.Content%2A> Właściwość na puste wystąpienie jednego z typów zawartości ( <xref:System.ServiceModel.Activities.SendMessageContent> lub <xref:System.ServiceModel.Activities.SendParametersContent> ), jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-178">When implementing a workflow service that defines a request/response operation that returns void, you must instantiate a <xref:System.ServiceModel.Activities.SendReply> activity and set the <xref:System.ServiceModel.Activities.SendReply.Content%2A> property to an empty instance of one of the content types (<xref:System.ServiceModel.Activities.SendMessageContent> or <xref:System.ServiceModel.Activities.SendParametersContent>) as shown in the following example.</span></span>

```csharp
Receive rcv = new Receive()
{
ServiceContractName = "IService",
OperationName = "NullReturningContract",
Content = new ReceiveParametersContent( new Dictionary<string, OutArgument>() { { "message", new OutArgument<string>() } } )
};
SendReply sr = new SendReply()
{
Request = rcv
   Content = new SendParametersContent();
};
```

## <a name="add-service-reference"></a><span data-ttu-id="7d8e8-179">Dodaj odwołanie do usługi</span><span class="sxs-lookup"><span data-stu-id="7d8e8-179">Add service reference</span></span>

<span data-ttu-id="7d8e8-180">Podczas wywoływania usługi przepływu pracy z poziomu aplikacji przepływu pracy program Visual Studio 2012 generuje niestandardowe działania związane z obsługą komunikatów, które hermetyzują zwykłe <xref:System.ServiceModel.Activities.Send> i <xref:System.ServiceModel.Activities.ReceiveReply> działania używane w żądaniu/odpowiedzi unikatowy MEP.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-180">When calling a workflow service from a workflow application, Visual Studio 2012 generates custom messaging activities that encapsulate the usual <xref:System.ServiceModel.Activities.Send> and <xref:System.ServiceModel.Activities.ReceiveReply> activities used in a request/reply MEP.</span></span> <span data-ttu-id="7d8e8-181">Aby użyć tej funkcji, kliknij prawym przyciskiem myszy projekt klienta w programie Visual Studio i wybierz polecenie **Dodaj**  >  **odwołanie do usługi**.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-181">To use this feature, right-click the client project in Visual Studio and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="7d8e8-182">W polu Adres wpisz adres podstawowy usługi, a następnie kliknij pozycję Przejdź.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-182">Type the base address of the service in the address box and click Go.</span></span> <span data-ttu-id="7d8e8-183">Dostępne usługi są wyświetlane w polu **usługi:** .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-183">The available services are displayed in the **Services:** box.</span></span> <span data-ttu-id="7d8e8-184">Rozwiń węzeł usługi, aby wyświetlić obsługiwane umowy.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-184">Expand the service node to display the contracts supported.</span></span> <span data-ttu-id="7d8e8-185">Wybierz kontrakt do wywołania, a lista dostępnych operacji zostanie wyświetlona w polu **operacje** .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-185">Select the contract you want to call and the list of available operations is displayed in the **Operations** box.</span></span> <span data-ttu-id="7d8e8-186">Następnie można określić obszar nazw dla wygenerowanego działania i kliknąć przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-186">You can then specify the namespace for the generated activity and click **OK**.</span></span> <span data-ttu-id="7d8e8-187">Zobaczysz okno dialogowe z informacją, że operacja została ukończona pomyślnie, a wygenerowane działania niestandardowe znajdują się w przyborniku po ponownym skompilowaniu projektu.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-187">You then see a dialog that says the operation completed successfully and that the generated custom activities are in the toolbox after you have rebuilt the project.</span></span> <span data-ttu-id="7d8e8-188">Istnieje jedno działanie dla każdej operacji zdefiniowanej w kontrakcie usługi.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-188">There is one activity for each operation defined on the service contract.</span></span> <span data-ttu-id="7d8e8-189">Po ponownym skompilowaniu projektu można przeciągnąć i upuścić niestandardowe działania w przepływie pracy i ustawić wymagane właściwości w oknie właściwości.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-189">After rebuilding the project you can drag and drop the custom activities onto your workflow and set any required properties in the properties window.</span></span>

## <a name="messaging-activity-templates"></a><span data-ttu-id="7d8e8-190">Szablony działań związanych z wiadomościami</span><span class="sxs-lookup"><span data-stu-id="7d8e8-190">Messaging activity templates</span></span>

<span data-ttu-id="7d8e8-191">Aby ułatwić skonfigurowanie żądania/odpowiedzi unikatowy MEP na kliencie i w usłudze, program Visual Studio 2012 udostępnia dwa szablony działań obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-191">To make setting up a request/response MEP on the client and service easier, Visual Studio 2012 provides two messaging activity templates.</span></span> <span data-ttu-id="7d8e8-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply`jest używany w usłudze i `System.ServiceModel.Activities.Design.SendAndReceiveReply` jest używany na kliencie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-192">`System.ServiceModel.Activities.Design.ReceiveAndSendReply` is used on the service and `System.ServiceModel.Activities.Design.SendAndReceiveReply` is used on the client.</span></span> <span data-ttu-id="7d8e8-193">W obu przypadkach szablony dodają odpowiednie działania dotyczące komunikatów do przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-193">In both cases the templates add the appropriate messaging activities to your workflow.</span></span> <span data-ttu-id="7d8e8-194">W usłudze program `System.ServiceModel.Activities.Design.ReceiveAndSendReply` dodaje <xref:System.ServiceModel.Activities.Receive> działanie, a po nim <xref:System.ServiceModel.Activities.SendReply> działanie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-194">On the service, the `System.ServiceModel.Activities.Design.ReceiveAndSendReply` adds a <xref:System.ServiceModel.Activities.Receive> activity followed by a <xref:System.ServiceModel.Activities.SendReply> activity.</span></span> <span data-ttu-id="7d8e8-195"><xref:System.ServiceModel.Activities.SendReply.Request>Właściwość jest automatycznie ustawiana na <xref:System.ServiceModel.Activities.Receive> działanie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-195">The <xref:System.ServiceModel.Activities.SendReply.Request> property is automatically set to the <xref:System.ServiceModel.Activities.Receive> activity.</span></span> <span data-ttu-id="7d8e8-196">Na kliencie `System.ServiceModel.Activities.Design.SendAndReceiveReply` dodaje działanie, a <xref:System.ServiceModel.Activities.Send> po nim <xref:System.ServiceModel.Activities.ReceiveReply> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-196">On the client, the `System.ServiceModel.Activities.Design.SendAndReceiveReply` adds a <xref:System.ServiceModel.Activities.Send> activity followed by a <xref:System.ServiceModel.Activities.ReceiveReply>.</span></span> <span data-ttu-id="7d8e8-197"><xref:System.ServiceModel.Activities.ReceiveReply.Request%2A>Właściwość jest automatycznie ustawiana na <xref:System.ServiceModel.Activities.Send> działanie.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-197">The <xref:System.ServiceModel.Activities.ReceiveReply.Request%2A> property is automatically set to the <xref:System.ServiceModel.Activities.Send> activity.</span></span> <span data-ttu-id="7d8e8-198">Aby użyć tych szablonów, przeciągnij i upuść odpowiedni szablon do przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-198">To use these templates, just drag and drop the appropriate template onto your workflow.</span></span>

## <a name="messaging-activities-and-transactions"></a><span data-ttu-id="7d8e8-199">Działania i transakcje komunikatów</span><span class="sxs-lookup"><span data-stu-id="7d8e8-199">Messaging activities and transactions</span></span>

<span data-ttu-id="7d8e8-200">Po wykonaniu wywołania do usługi przepływu pracy możesz chcieć przetworzyć transakcję do operacji usługi.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-200">When a call is made to a workflow service you may want to flow a transaction to the service operation.</span></span> <span data-ttu-id="7d8e8-201">W tym celu należy umieścić <xref:System.ServiceModel.Activities.Receive> działanie w ramach <xref:System.ServiceModel.Activities.TransactedReceiveScope> działania.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-201">To do this place the <xref:System.ServiceModel.Activities.Receive> activity within a <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity.</span></span> <span data-ttu-id="7d8e8-202"><xref:System.ServiceModel.Activities.TransactedReceiveScope>Działanie zawiera `Receive` działanie i treść.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-202">The <xref:System.ServiceModel.Activities.TransactedReceiveScope> activity contains a `Receive` activity and a body.</span></span> <span data-ttu-id="7d8e8-203">Transakcja przepływa do usługi pozostaje otaczająca przez cały czas wykonywania treści <xref:System.ServiceModel.Activities.TransactedReceiveScope> .</span><span class="sxs-lookup"><span data-stu-id="7d8e8-203">The transaction flowed to the service remains ambient throughout the execution of the body of the <xref:System.ServiceModel.Activities.TransactedReceiveScope>.</span></span> <span data-ttu-id="7d8e8-204">Transakcja jest ukończona, gdy treść kończy się wykonywaniem.</span><span class="sxs-lookup"><span data-stu-id="7d8e8-204">The transaction is completed when the body finishes executing.</span></span> <span data-ttu-id="7d8e8-205">Aby uzyskać więcej informacji o przepływach pracy i transakcjach, zobacz [transakcje przepływu pracy](../../windows-workflow-foundation/workflow-transactions.md).</span><span class="sxs-lookup"><span data-stu-id="7d8e8-205">For more information about workflows and transactions see [Workflow Transactions](../../windows-workflow-foundation/workflow-transactions.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="7d8e8-206">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="7d8e8-206">See also</span></span>

- [<span data-ttu-id="7d8e8-207">Jak wysyłać i odbierać błędy w usługach przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="7d8e8-207">How to Send and Receive Faults in Workflow Services</span></span>](https://go.microsoft.com/fwlink/?LinkId=189151)
- [<span data-ttu-id="7d8e8-208">Tworzenie długo działającej usługi przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="7d8e8-208">Creating a Long-running Workflow Service</span></span>](creating-a-long-running-workflow-service.md)
