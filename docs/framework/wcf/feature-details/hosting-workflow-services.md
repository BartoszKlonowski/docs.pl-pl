---
title: Hostowanie usług przepływu pracy
ms.date: 03/30/2017
ms.assetid: 2d55217e-8697-4113-94ce-10b60863342e
ms.openlocfilehash: 3bd45575e06ba742b0e6c43766c5e80dff47c03b
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "96256004"
---
# <a name="hosting-workflow-services"></a><span data-ttu-id="1b780-102">Hostowanie usług przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="1b780-102">Hosting Workflow Services</span></span>

<span data-ttu-id="1b780-103">Usługa przepływu pracy musi być hostowana, aby mogła reagować na wiadomości przychodzące.</span><span class="sxs-lookup"><span data-stu-id="1b780-103">A workflow service must be hosted for it to respond to incoming messages.</span></span> <span data-ttu-id="1b780-104">Usługi przepływu pracy korzystają z infrastruktury obsługi komunikatów WCF i dlatego są hostowane w podobny sposób.</span><span class="sxs-lookup"><span data-stu-id="1b780-104">Workflow services use the WCF messaging infrastructure and are therefore hosted in similar ways.</span></span> <span data-ttu-id="1b780-105">Podobnie jak w przypadku usług WCF usługi przepływu pracy mogą być hostowane w dowolnej aplikacji zarządzanej, w obszarze Internet Information Services (IIS) lub w obszarze usługi aktywacji procesów systemu Windows (WAS).</span><span class="sxs-lookup"><span data-stu-id="1b780-105">Like WCF services, workflow services can be hosted in any managed application, under Internet Information Services (IIS), or under Windows Process Activation Services (WAS).</span></span> <span data-ttu-id="1b780-106">Ponadto usługi przepływu pracy mogą być hostowane w sieci szkieletowej aplikacji systemu Windows Server.</span><span class="sxs-lookup"><span data-stu-id="1b780-106">In addition, workflow services can be hosted under Windows Server App Fabric.</span></span> <span data-ttu-id="1b780-107">Aby uzyskać więcej informacji na temat sieci szkieletowej aplikacji systemu Windows Server, zobacz [dokumentację usługi Windows Server App Fabric](/previous-versions/appfabric/ff384253(v=azure.10)), [funkcje hostingu programu AppFabric](/previous-versions/appfabric/ee677189(v=azure.10))i [koncepcje hostingu usługi AppFabric](/previous-versions/appfabric/ee677371(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="1b780-107">For more information about Windows Server App Fabric see [Windows Server App Fabric documentation](/previous-versions/appfabric/ff384253(v=azure.10)), [AppFabric Hosting Features](/previous-versions/appfabric/ee677189(v=azure.10)), and [AppFabric Hosting Concepts](/previous-versions/appfabric/ee677371(v=azure.10)).</span></span> <span data-ttu-id="1b780-108">Aby uzyskać więcej informacji na temat różnych sposobów hostowania usług WCF, zobacz [usługi hostingu](../hosting-services.md).</span><span class="sxs-lookup"><span data-stu-id="1b780-108">For more information about the various ways to host WCF services see [Hosting Services](../hosting-services.md).</span></span>

## <a name="hosting-in-a-managed-application"></a><span data-ttu-id="1b780-109">Hosting w aplikacji zarządzanej</span><span class="sxs-lookup"><span data-stu-id="1b780-109">Hosting in a managed application</span></span>

 <span data-ttu-id="1b780-110">Aby hostować usługę przepływu pracy w aplikacji zarządzanej, należy użyć <xref:System.ServiceModel.Activities.WorkflowServiceHost> klasy.</span><span class="sxs-lookup"><span data-stu-id="1b780-110">To host a workflow service in a managed application, use the <xref:System.ServiceModel.Activities.WorkflowServiceHost> class.</span></span> <span data-ttu-id="1b780-111"><xref:System.ServiceModel.Activities.WorkflowServiceHost>Konstruktor umożliwia określenie pojedynczego wystąpienia usługi przepływu pracy, definicji usługi przepływu pracy lub działania korzystającego z działań związanych z obsługą komunikatów przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="1b780-111">The <xref:System.ServiceModel.Activities.WorkflowServiceHost> constructor allows you to specify a singleton workflow service instance, a workflow service definition, or an activity that uses the workflow messaging activities.</span></span> <span data-ttu-id="1b780-112">Wywołanie <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> powoduje, że Usługa uruchamia nasłuchiwanie komunikatów przychodzących.</span><span class="sxs-lookup"><span data-stu-id="1b780-112">Calling <xref:System.ServiceModel.Channels.CommunicationObject.Open%2A> causes the service to start listening for incoming messages.</span></span>

## <a name="hosting-under-iis-or-was"></a><span data-ttu-id="1b780-113">Hosting w ramach usług IIS lub WAS</span><span class="sxs-lookup"><span data-stu-id="1b780-113">Hosting under IIS or WAS</span></span>

 <span data-ttu-id="1b780-114">Hostowanie usługi przepływu pracy w ramach usług IIS lub polega na utworzeniu katalogu wirtualnego i umieszczeniu plików w katalogu wirtualnym, które definiują usługę i jej zachowanie.</span><span class="sxs-lookup"><span data-stu-id="1b780-114">Hosting a workflow service under IIS or WAS involves creating a virtual directory and placing files in the virtual directory that define the service and its behavior.</span></span> <span data-ttu-id="1b780-115">W przypadku hostowania usługi przepływu pracy w ramach usług IIS lub była kilka możliwości:</span><span class="sxs-lookup"><span data-stu-id="1b780-115">When hosting a workflow service under IIS or WAS there are several possibilities:</span></span>

- <span data-ttu-id="1b780-116">Umieść plik. xamlx, który definiuje usługę przepływu pracy w katalogu wirtualnym usług IIS/WAS wraz z plikiem Web.config, który określa zachowania usługi, punkty końcowe i inne elementy konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="1b780-116">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory along with a Web.config file that specifies the service behaviors, endpoints, and other configuration elements.</span></span>

- <span data-ttu-id="1b780-117">Umieść plik. xamlx, który definiuje usługę przepływu pracy w katalogu wirtualnym usług IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="1b780-117">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="1b780-118">Plik. xamlx określa punkty końcowe do udostępnienia.</span><span class="sxs-lookup"><span data-stu-id="1b780-118">The .xamlx file specifies the endpoints to expose.</span></span> <span data-ttu-id="1b780-119">Punkty końcowe są określone w `WorkflowService.Endpoints` elemencie, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="1b780-119">Endpoints are specified in a `WorkflowService.Endpoints` element as shown in the following example.</span></span>

    ```xml
    <WorkflowService xmlns="http://schemas.microsoft.com/netfx/2009/xaml/servicemodel"  xmlns:p1="http://schemas.microsoft.com/netfx/2009/xaml/activities" xmlns:sad="clr-namespace:System.Activities.Debugger;assembly=System.Activities" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
      <WorkflowService.Endpoints>
        <Endpoint ServiceContractName="IWorkFlowEchoService" AddressUri="">
          <Endpoint.Binding>
            <BasicHttpBinding />
          </Endpoint.Binding>
        </Endpoint>
      </WorkflowService.Endpoints>
    <!-- ... -->
    </WorkflowService>
    ```

    > [!NOTE]
    > <span data-ttu-id="1b780-120">Nie można określać zachowań w pliku. xamlx, dlatego należy użyć Web.config, jeśli trzeba określić ustawienia zachowania.</span><span class="sxs-lookup"><span data-stu-id="1b780-120">Behaviors cannot be specified in a .xamlx file, so you must use a Web.config if you need to specify behavior settings.</span></span>

- <span data-ttu-id="1b780-121">Umieść plik. xamlx, który definiuje usługę przepływu pracy w katalogu wirtualnym usług IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="1b780-121">Place a .xamlx file that defines the workflow service in an IIS/WAS virtual directory.</span></span> <span data-ttu-id="1b780-122">Ponadto Umieść plik. svc w katalogu wirtualnym.</span><span class="sxs-lookup"><span data-stu-id="1b780-122">In addition, place a .svc file in the virtual directory.</span></span> <span data-ttu-id="1b780-123">Plik SVC pozwala określić niestandardową fabrykę hosta usługi sieci Web, zastosować zachowanie niestandardowe lub załadować konfigurację z lokalizacji niestandardowej.</span><span class="sxs-lookup"><span data-stu-id="1b780-123">The .svc file allows you to specify a custom Web service host factory, apply custom behavior, or load configuration from a custom location.</span></span>

- <span data-ttu-id="1b780-124">Umieść zestaw w katalogu wirtualnym usługi IIS/WAS zawierający działanie, które korzysta z działań związanych z obsługą komunikatów WCF.</span><span class="sxs-lookup"><span data-stu-id="1b780-124">Place an assembly in the IIS/WAS virtual directory that contains an activity that uses the WCF messaging activities.</span></span>

 <span data-ttu-id="1b780-125">Plik. xamlx, który definiuje usługę przepływu pracy, musi zawierać `Service` element główny> <lub element główny, który zawiera dowolny typ pochodzący z <xref:System.Workflow.ComponentModel.Activity> .</span><span class="sxs-lookup"><span data-stu-id="1b780-125">A .xamlx file that defines a workflow service must contain a <`Service`> root element or a root element that contains any type derived from <xref:System.Workflow.ComponentModel.Activity>.</span></span> <span data-ttu-id="1b780-126">W przypadku korzystania z szablonu działania programu Visual Studio tworzony jest plik XAMLX.</span><span class="sxs-lookup"><span data-stu-id="1b780-126">When using the Visual Studio activity template, a .xamlx file is created.</span></span> <span data-ttu-id="1b780-127">W przypadku korzystania z szablonu usługi przepływu pracy WCF tworzony jest plik XAMLX.</span><span class="sxs-lookup"><span data-stu-id="1b780-127">When using the WCF Workflow Service template, a .xamlx file is created.</span></span>

## <a name="hosting-workflow-services-under-windows-server-app-fabric"></a><span data-ttu-id="1b780-128">Hostowanie usług przepływu pracy w sieci szkieletowej aplikacji systemu Windows Server</span><span class="sxs-lookup"><span data-stu-id="1b780-128">Hosting Workflow Services under Windows Server App Fabric</span></span>

 <span data-ttu-id="1b780-129">Hosting usługi przepływu pracy w ramach sieci szkieletowej aplikacji systemu Windows Server odbywa się w taki sam sposób, jak w przypadku usług IIS/WAS.</span><span class="sxs-lookup"><span data-stu-id="1b780-129">Hosting a workflow service under Windows Server App Fabric is done in the same way as hosting under IIS/WAS.</span></span> <span data-ttu-id="1b780-130">Jedyną różnicą jest fakt, że zainstalowano aplikację sieci szkieletowej systemu Windows Server.</span><span class="sxs-lookup"><span data-stu-id="1b780-130">The only difference is the fact that Windows Server App Fabric is installed.</span></span> <span data-ttu-id="1b780-131">Windows Server App Fabric oferuje narzędzia, które są dodawane do programu Internet Information Services Manager, a także program PowerShell polecenia cmdlet.</span><span class="sxs-lookup"><span data-stu-id="1b780-131">Windows Server App Fabric provides tools that are added to Internet Information Services Manager, as well as PowerShell commandlets.</span></span> <span data-ttu-id="1b780-132">Narzędzia te upraszczają wdrażanie i śledzenie usług Workflow Services oraz usług WCF oraz zarządzanie nimi.</span><span class="sxs-lookup"><span data-stu-id="1b780-132">These tools simplify deploying, managing, and tracking of workflow services and WCF services.</span></span>

## <a name="referencing-custom-activities"></a><span data-ttu-id="1b780-133">Odwoływanie się do działań niestandardowych</span><span class="sxs-lookup"><span data-stu-id="1b780-133">Referencing Custom Activities</span></span>

 <span data-ttu-id="1b780-134">Odwołania do działań niestandardowych należy dodać do `Assemblies` sekcji <> w obszarze <`System.Web.Compilation`> tak, aby były one ładowane do domeny aplikacji, a Deserializator XAML będzie mógł zlokalizować typy.</span><span class="sxs-lookup"><span data-stu-id="1b780-134">References to custom activities must be added to the <`Assemblies`> section under <`System.Web.Compilation`> so that they are loaded into the Application Domain and the XAML deserializer is able to locate the types.</span></span> <span data-ttu-id="1b780-135">Te ustawienia można wykonać na poziomie aplikacji lub w katalogu głównym Web.config, jeśli ustawienia mają być stosowane do wszystkich aplikacji na komputerze.</span><span class="sxs-lookup"><span data-stu-id="1b780-135">These settings can be made at the application level or in the root Web.config if the settings should be applied to all applications on the machine.</span></span>

## <a name="deployment"></a><span data-ttu-id="1b780-136">Wdrożenie</span><span class="sxs-lookup"><span data-stu-id="1b780-136">Deployment</span></span>

 <span data-ttu-id="1b780-137">Narzędzie Web Deployment zostało utworzone w celu ułatwienia wdrażania zadania.</span><span class="sxs-lookup"><span data-stu-id="1b780-137">The Web Deployment tool has been created to make the job of deployment easier.</span></span> <span data-ttu-id="1b780-138">Narzędzie to umożliwia Migrowanie aplikacji między usługami IIS 6,0 i IIS 7,0, synchronizowanie farm serwerów oraz pakowanie, archiwizowanie i wdrażanie aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="1b780-138">The tool allows you to migrate applications between IIS 6.0 and IIS 7.0, synchronize server farms, and package, archive and deploy Web applications.</span></span> <span data-ttu-id="1b780-139">Aby uzyskać więcej informacji, zobacz [Narzędzie wdrażania firmy Microsoft](https://go.microsoft.com/fwlink/?LinkId=178690).</span><span class="sxs-lookup"><span data-stu-id="1b780-139">For more information, see [MS Deployment Tool](https://go.microsoft.com/fwlink/?LinkId=178690).</span></span>

## <a name="see-also"></a><span data-ttu-id="1b780-140">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="1b780-140">See also</span></span>

- [<span data-ttu-id="1b780-141">Elementy wewnętrzne hosta usługi przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="1b780-141">Workflow Service Host Internals</span></span>](workflow-service-host-internals.md)
- [<span data-ttu-id="1b780-142">Konfigurowanie elementu WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="1b780-142">Configuring WorkflowServiceHost</span></span>](configuring-workflowservicehost.md)
