---
title: Kontrakty danych zgodne z nowszymi wersjami
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- data contracts [WCF], forward compatibility
ms.assetid: 413c9044-26f8-4ecb-968c-18495ea52cd9
ms.openlocfilehash: 95a72d5d09538bc6f663f2376c7f8f928909cd57
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
---
# <a name="forward-compatible-data-contracts"></a><span data-ttu-id="539f1-102">Kontrakty danych zgodne z nowszymi wersjami</span><span class="sxs-lookup"><span data-stu-id="539f1-102">Forward-Compatible Data Contracts</span></span>
<span data-ttu-id="539f1-103">Funkcja programu Windows Communication Foundation (WCF) jest system kontraktu danych który umów można rozwijać w czasie nierozdzielający sposoby.</span><span class="sxs-lookup"><span data-stu-id="539f1-103">A feature of the Windows Communication Foundation (WCF) data contract system is that contracts can evolve over time in nonbreaking ways.</span></span> <span data-ttu-id="539f1-104">Oznacza to, że klienta przy użyciu starszej wersji kontraktu danych może komunikować się z usługą przy użyciu nowszej wersji tego samego kontraktu danych lub klienta przy użyciu nowszej wersji kontraktu danych może komunikować się ze starszą wersją tej samej kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="539f1-104">That is, a client with an older version of a data contract can communicate with a service with a newer version of the same data contract, or a client with a newer version of a data contract can communicate with an older version of the same data contract.</span></span> <span data-ttu-id="539f1-105">Aby uzyskać więcej informacji, zobacz [najlepsze rozwiązania: przechowywanie wersji kontraktów danych](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="539f1-105">For more information, see [Best Practices: Data Contract Versioning](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md).</span></span>  
  
 <span data-ttu-id="539f1-106">Większość funkcji przechowywania wersji można stosować na zgodnie z potrzebami, podczas tworzenia nowych wersji istniejących kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="539f1-106">You can apply most of the versioning features on an as-needed basis when new versions of an existing data contract are created.</span></span> <span data-ttu-id="539f1-107">Jednak jedna z funkcji przechowywania wersji, *dwustronną komunikację*, muszą zostać skompilowane na typ z pierwszej wersji prawidłowego funkcjonowania.</span><span class="sxs-lookup"><span data-stu-id="539f1-107">However, one versioning feature, *round-tripping*, must be built into the type from the first version in order to work properly.</span></span>  
  
## <a name="round-tripping"></a><span data-ttu-id="539f1-108">Dwustronną komunikację</span><span class="sxs-lookup"><span data-stu-id="539f1-108">Round-Tripping</span></span>  
 <span data-ttu-id="539f1-109">Dwustronną komunikację występuje, gdy dane są przesyłane z nowej wersji na starszą wersję i z powrotem do nowej wersji kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="539f1-109">Round-tripping occurs when data passes from a new version to an old version and back to the new version of a data contract.</span></span> <span data-ttu-id="539f1-110">Dwustronną komunikację gwarantuje, że żadne dane nie są tracone.</span><span class="sxs-lookup"><span data-stu-id="539f1-110">Round-tripping guarantees that no data is lost.</span></span> <span data-ttu-id="539f1-111">Włączanie dwustronną komunikację sprawia, że typ zgodne z nowszymi o zmianach w przyszłości obsługiwane przez model przechowywanie wersji kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="539f1-111">Enabling round-tripping makes the type forward-compatible with any future changes supported by the data contract versioning model.</span></span>  
  
 <span data-ttu-id="539f1-112">Aby włączyć dwustronną komunikację dla określonego typu, typ musi implementować <xref:System.Runtime.Serialization.IExtensibleDataObject> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="539f1-112">To enable round-tripping for a particular type, the type must implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="539f1-113">Interfejs zawiera jedną właściwość <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> (zwracanie <xref:System.Runtime.Serialization.ExtensionDataObject> typu).</span><span class="sxs-lookup"><span data-stu-id="539f1-113">The interface contains one property, <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> (returning the <xref:System.Runtime.Serialization.ExtensionDataObject> type).</span></span> <span data-ttu-id="539f1-114">Właściwość przechowuje wszystkie dane z przyszłych wersji kontraktu danych, który jest nieznany w bieżącej wersji.</span><span class="sxs-lookup"><span data-stu-id="539f1-114">The property stores any data from future versions of the data contract that is unknown to the current version.</span></span>  
  
### <a name="example"></a><span data-ttu-id="539f1-115">Przykład</span><span class="sxs-lookup"><span data-stu-id="539f1-115">Example</span></span>  
 <span data-ttu-id="539f1-116">Następujące kontraktu danych nie jest zgodne z nowszymi z przyszłe zmiany.</span><span class="sxs-lookup"><span data-stu-id="539f1-116">The following data contract is not forward-compatible with future changes.</span></span>  
  
 [!code-csharp[C_DataContract#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#7)]
 [!code-vb[C_DataContract#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#7)]  
  
 <span data-ttu-id="539f1-117">Aby typ zgodny z przyszłe zmiany (takich jak dodawanie nowego elementu członkowskiego danych o nazwie "phoneNumber"), należy zaimplementować <xref:System.Runtime.Serialization.IExtensibleDataObject> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="539f1-117">To make the type compatible with future changes (such as adding a new data member named "phoneNumber"), implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span>  
  
 [!code-csharp[C_DataContract#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_datacontract/cs/source.cs#8)]
 [!code-vb[C_DataContract#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_datacontract/vb/source.vb#8)]  
  
 <span data-ttu-id="539f1-118">Jeśli infrastruktura WCF napotka dane, które nie jest częścią kontrakt danych, dane są przechowywane we właściwości i zachowane.</span><span class="sxs-lookup"><span data-stu-id="539f1-118">When the WCF infrastructure encounters data that is not part of the original data contract, the data is stored in the property and preserved.</span></span> <span data-ttu-id="539f1-119">Nie został przetworzony w inny sposób, z wyjątkiem magazynu tymczasowego.</span><span class="sxs-lookup"><span data-stu-id="539f1-119">It is not processed in any other way except for temporary storage.</span></span> <span data-ttu-id="539f1-120">Jeśli obiekt jest zwracany do pochodzenie, jest także zwracany oryginalnych danych (nieznany).</span><span class="sxs-lookup"><span data-stu-id="539f1-120">If the object is returned back to where it originated, the original (unknown) data is also returned.</span></span> <span data-ttu-id="539f1-121">W związku z tym dane wprowadził obiegu do i z punktem końcowym źródłowego bez utraty.</span><span class="sxs-lookup"><span data-stu-id="539f1-121">Therefore, the data has made a round trip to and from the originating endpoint without loss.</span></span> <span data-ttu-id="539f1-122">Należy jednak pamiętać, że w razie potrzeby danych do przetwarzania źródłowego punktu końcowego tego oczekuje się unmet i punkt końcowy musi jakiś sposób wykrywania i wprowadzać zmiany.</span><span class="sxs-lookup"><span data-stu-id="539f1-122">Note, however, that if the originating endpoint required the data to be processed, that expectation is unmet, and the endpoint must somehow detect and accommodate the change.</span></span>  
  
 <span data-ttu-id="539f1-123"><xref:System.Runtime.Serialization.ExtensionDataObject> Typ nie zawiera publicznej metody lub właściwości.</span><span class="sxs-lookup"><span data-stu-id="539f1-123">The <xref:System.Runtime.Serialization.ExtensionDataObject> type contains no public methods or properties.</span></span> <span data-ttu-id="539f1-124">W związku z tym nie można uzyskać bezpośredni dostęp do danych przechowywanych w <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="539f1-124">Thus, it is impossible to get direct access to the data stored inside the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property.</span></span>  
  
 <span data-ttu-id="539f1-125">Funkcja dwustronną komunikację może zostać wyłączony, albo ustawiając `ignoreExtensionDataObject` do `true` w <xref:System.Runtime.Serialization.DataContractSerializer> konstruktora lub przez ustawienie <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> właściwości `true` na <xref:System.ServiceModel.ServiceBehaviorAttribute>.</span><span class="sxs-lookup"><span data-stu-id="539f1-125">The round-tripping feature may be turned off, either by setting `ignoreExtensionDataObject` to `true` in the <xref:System.Runtime.Serialization.DataContractSerializer> constructor or by setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property to `true` on the <xref:System.ServiceModel.ServiceBehaviorAttribute>.</span></span> <span data-ttu-id="539f1-126">Jeśli ta funkcja jest wyłączona, Deserializator nie spowoduje wypełnienie <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> właściwości i Serializator nie Emituj treści właściwości.</span><span class="sxs-lookup"><span data-stu-id="539f1-126">When this feature is off, the deserializer will not populate the <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A> property, and the serializer will not emit the contents of the property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="539f1-127">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="539f1-127">See Also</span></span>  
 <xref:System.Runtime.Serialization.IExtensibleDataObject>  
 <xref:System.Runtime.Serialization.ExtensionDataObject>  
 [<span data-ttu-id="539f1-128">Przechowywanie wersji kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="539f1-128">Data Contract Versioning</span></span>](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md)  
 [<span data-ttu-id="539f1-129">Najlepsze rozwiązania: przechowywanie wersji kontraktów danych</span><span class="sxs-lookup"><span data-stu-id="539f1-129">Best Practices: Data Contract Versioning</span></span>](../../../../docs/framework/wcf/best-practices-data-contract-versioning.md)
