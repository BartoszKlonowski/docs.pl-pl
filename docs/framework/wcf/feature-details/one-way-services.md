---
title: Usługi jednokierunkowe
ms.date: 03/30/2017
helpviewer_keywords:
- Windows Communication Foundation [WCF], one-way service contracts
- WCF [WCF], one-way service contracts
- service contracts [WCF], defining one-way
ms.assetid: 19053a36-4492-45a3-bfe6-0365ee0205a3
ms.openlocfilehash: 03efc27f2ba54ca22f03e3ece84770fe0dcadbb3
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
---
# <a name="one-way-services"></a><span data-ttu-id="3e52b-102">Usługi jednokierunkowe</span><span class="sxs-lookup"><span data-stu-id="3e52b-102">One-Way Services</span></span>
<span data-ttu-id="3e52b-103">Domyślne zachowanie operacji usługi jest wzorzec żądanie odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="3e52b-103">The default behavior of a service operation is the request-reply pattern.</span></span> <span data-ttu-id="3e52b-104">We wzorcu żądanie odpowiedź, klient oczekuje na komunikat odpowiedzi nawet wtedy, gdy operacja usługi jest reprezentowana w kodzie jako `void` metody.</span><span class="sxs-lookup"><span data-stu-id="3e52b-104">In a request-reply pattern, the client waits for the reply message, even if the service operation is represented in code as a `void` method.</span></span> <span data-ttu-id="3e52b-105">Z operacji jednokierunkowych są przesyłane tylko jeden komunikat.</span><span class="sxs-lookup"><span data-stu-id="3e52b-105">With a one-way operation, only one message is transmitted.</span></span> <span data-ttu-id="3e52b-106">Odbiornik nie wysyła komunikat odpowiedzi nie jest nadawca oczekiwany jeden.</span><span class="sxs-lookup"><span data-stu-id="3e52b-106">The receiver does not send a reply message, nor does the sender expect one.</span></span>  
  
 <span data-ttu-id="3e52b-107">Użyj wzorca projektowego jednokierunkowe:</span><span class="sxs-lookup"><span data-stu-id="3e52b-107">Use the one-way design pattern:</span></span>  
  
-   <span data-ttu-id="3e52b-108">Gdy klient musi wywołać operacji i nie ma wpływu na wynik operacji na poziomie operacji.</span><span class="sxs-lookup"><span data-stu-id="3e52b-108">When the client must call operations and is not affected by the result of the operation at the operation level.</span></span>  
  
-   <span data-ttu-id="3e52b-109">Korzystając z <xref:System.ServiceModel.NetMsmqBinding> lub <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> klasy.</span><span class="sxs-lookup"><span data-stu-id="3e52b-109">When using the <xref:System.ServiceModel.NetMsmqBinding> or the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> class.</span></span> <span data-ttu-id="3e52b-110">(Aby uzyskać więcej informacji na temat tego scenariusza, zobacz [kolejki programu WCF](../../../../docs/framework/wcf/feature-details/queues-in-wcf.md).)</span><span class="sxs-lookup"><span data-stu-id="3e52b-110">(For more information about this scenario, see [Queues in WCF](../../../../docs/framework/wcf/feature-details/queues-in-wcf.md).)</span></span>  
  
 <span data-ttu-id="3e52b-111">Podczas operacji jest jednokierunkowa, nie ma odpowiedzi do przenoszenia informacje o błędzie do klienta.</span><span class="sxs-lookup"><span data-stu-id="3e52b-111">When an operation is one-way, there is no response message to carry error information back to the client.</span></span> <span data-ttu-id="3e52b-112">Warunki błędów można wykryć za pomocą funkcji podstawowych powiązania, takich jak niezawodnej sesji lub Projektując kontrakt usługi dwustronnej, która używa dwóch operacji jednokierunkowych — kontraktu jednokierunkowego od klienta do usługi do wywołania operacji usługi, a drugi jednokierunkowe kontraktu między usługą i klienta, dzięki czemu usługa może wysyłać błędy wstecz do klienta przy użyciu wywołania zwrotnego, który implementuje klienta.</span><span class="sxs-lookup"><span data-stu-id="3e52b-112">You can detect error conditions by using features of the underlying binding, such as reliable sessions, or by designing a duplex service contract that uses two one-way operations—a one-way contract from the client to the service to call service operation and another one-way contract between the service and the client so that the service can send back faults to the client using a callback that the client implements.</span></span>  
  
 <span data-ttu-id="3e52b-113">Aby utworzyć kontrakt usługi jednokierunkowe, zdefiniuj dany kontrakt usługi, zastosuj <xref:System.ServiceModel.OperationContractAttribute> klasy do każdej operacji i ustaw <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> właściwości `true`, jak pokazano w poniższym kodzie próbki.</span><span class="sxs-lookup"><span data-stu-id="3e52b-113">To create a one-way service contract, define your service contract, apply the <xref:System.ServiceModel.OperationContractAttribute> class to each operation, and set the <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> property to `true`, as shown in the following sample code.</span></span>  
  
```  
[ServiceContract(Namespace="http://Microsoft.ServiceModel.Samples")]  
public interface IOneWayCalculator  
{  
    [OperationContract(IsOneWay=true)]  
    void Add(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Subtract(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Multiply(double n1, double n2);  
    [OperationContract(IsOneWay = true)]  
    void Divide(double n1, double n2);  
}  
```  
  
 <span data-ttu-id="3e52b-114">Pełny przykład, zobacz [jednokierunkowe](../../../../docs/framework/wcf/samples/one-way.md) próbki.</span><span class="sxs-lookup"><span data-stu-id="3e52b-114">For a complete example, see the [One-Way](../../../../docs/framework/wcf/samples/one-way.md) sample.</span></span>  
  
## <a name="clients-blocking-with-one-way-operations"></a><span data-ttu-id="3e52b-115">Klienci z blokowaniem za pomocą operacji jednokierunkowych</span><span class="sxs-lookup"><span data-stu-id="3e52b-115">Clients Blocking with One-Way Operations</span></span>  
 <span data-ttu-id="3e52b-116">Należy koniecznie należy pamiętać, że mimo że niektóre aplikacje jednokierunkowe zwraca jak danych wychodzących są zapisywane do połączenia sieciowego w kilku scenariuszach wdrażania powiązania lub usługi może spowodować klienta WCF zablokować przy użyciu operacji jednokierunkowych.</span><span class="sxs-lookup"><span data-stu-id="3e52b-116">It is important to realize that while some one-way applications return as soon as the outbound data is written to the network connection, in several scenarios the implementation of a binding or of a service can cause a WCF client to block using one-way operations.</span></span> <span data-ttu-id="3e52b-117">W aplikacjach klienckich usługi WCF obiekt klienta WCF nie zwraca dopóki danych wychodzących został zapisany do połączenia sieciowego.</span><span class="sxs-lookup"><span data-stu-id="3e52b-117">In WCF client applications, the WCF client object does not return until the outbound data has been written to the network connection.</span></span> <span data-ttu-id="3e52b-118">Dotyczy to wszystkich wzorców wymiany wiadomości, w tym przypadku operacji jednokierunkowych; oznacza to, że wszystkie problem z zapisywaniem się, że dane do transportu uniemożliwi zwracanie przez klienta.</span><span class="sxs-lookup"><span data-stu-id="3e52b-118">This is true for all message exchange patterns, including one-way operations; this means that any problem writing the data to the transport prevents the client from returning.</span></span> <span data-ttu-id="3e52b-119">W zależności od tego problemu, wynik może być wyjątku lub opóźnienia podczas wysyłania komunikatów do usługi.</span><span class="sxs-lookup"><span data-stu-id="3e52b-119">Depending upon the problem, the result could be an exception or a delay in sending messages to the service.</span></span>  
  
 <span data-ttu-id="3e52b-120">Na przykład, jeśli transport nie można odnaleźć punktu końcowego <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType> wyjątek bez dużego opóźnienia.</span><span class="sxs-lookup"><span data-stu-id="3e52b-120">For example, if the transport cannot find the endpoint, a <xref:System.ServiceModel.EndpointNotFoundException?displayProperty=nameWithType> exception is thrown without much delay.</span></span> <span data-ttu-id="3e52b-121">Jednak również jest możliwe, że usługa jest nie można odczytać danych ze przewodowy jakiegoś powodu, co uniemożliwia transport klienta operacji wysyłania zwracanie.</span><span class="sxs-lookup"><span data-stu-id="3e52b-121">However, it is also possible that the service is unable to read the data off the wire for some reason, which prevents the client transport send operation from returning.</span></span> <span data-ttu-id="3e52b-122">W takich przypadkach Jeśli <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType> okresu dla transportu klienta przekroczeniu powiązania <xref:System.TimeoutException?displayProperty=nameWithType> jest zgłaszany —, ale nie do czasu został przekroczony limit czasu.</span><span class="sxs-lookup"><span data-stu-id="3e52b-122">In these cases, if the <xref:System.ServiceModel.Channels.Binding.SendTimeout%2A?displayProperty=nameWithType> period on the client transport binding is exceeded, a <xref:System.TimeoutException?displayProperty=nameWithType> is thrown—but not until the timeout period has been exceeded.</span></span> <span data-ttu-id="3e52b-123">Istnieje również możliwość uruchomienie tak wiele komunikatów w punkcie usług, że usługa nie może ich przetworzyć po pewnym.</span><span class="sxs-lookup"><span data-stu-id="3e52b-123">It is also possible to fire so many messages at a service that the service cannot process them past a certain point.</span></span> <span data-ttu-id="3e52b-124">W takim przypadku, bloki jednokierunkowe klienta usługi może przetwarzać komunikatów lub do momentu jest zgłaszany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="3e52b-124">In this case, too, the one-way client blocks until the service can process the messages or until an exception is thrown.</span></span>  
  
 <span data-ttu-id="3e52b-125">Zmiana innego jest sytuacja, w którym usługa <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> właściwość jest ustawiona na <xref:System.ServiceModel.ConcurrencyMode.Single> i powiązania używa sesji.</span><span class="sxs-lookup"><span data-stu-id="3e52b-125">Another variation is the situation in which the service <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.ConcurrencyMode.Single> and the binding uses sessions.</span></span> <span data-ttu-id="3e52b-126">W takim przypadku Dyspozytor wymusza porządkowanie dla komunikatów przychodzących (wymaganie sesje), co zapobiega kolejnych komunikatów odczytywane poza siecią, dopóki usługa została przetworzona poprzedni komunikat dla tej sesji.</span><span class="sxs-lookup"><span data-stu-id="3e52b-126">In this case, the dispatcher enforces ordering on the incoming messages (a requirement of sessions), which prevents subsequent messages from being read off the network until the service has processed the preceding message for that session.</span></span> <span data-ttu-id="3e52b-127">Ponownie, bloki klienta, ale czy wystąpi wyjątek zależy od tego, czy usługa jest w stanie przetwarzać dane oczekiwania przed ustawienia limitu czasu na kliencie.</span><span class="sxs-lookup"><span data-stu-id="3e52b-127">Again, the client blocks, but whether an exception occurs depends upon whether the service is able to process the waiting data prior to the timeout settings on the client.</span></span>  
  
 <span data-ttu-id="3e52b-128">Można ograniczyć niektóre ten problem, wstawiając buforu między obiektem klienta i operację wysyłania transportu klienta.</span><span class="sxs-lookup"><span data-stu-id="3e52b-128">You can mitigate some of this problem by inserting a buffer between the client object and the client transport's send operation.</span></span> <span data-ttu-id="3e52b-129">Na przykład obiekt klienta szybko powrócić można włączyć za pomocą wywołania asynchroniczne lub kolejki komunikatów w pamięci.</span><span class="sxs-lookup"><span data-stu-id="3e52b-129">For example, using asynchronous calls or using an in-memory message queue can enable the client object to return quickly.</span></span> <span data-ttu-id="3e52b-130">W obu przypadkach efekt może zwiększyć funkcji, ale rozmiar puli wątków i kolejki wiadomości nadal wymuszać ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="3e52b-130">Both approaches may increase functionality, but the size of the thread pool and the message queue still enforce limits.</span></span>  
  
 <span data-ttu-id="3e52b-131">Jest to zalecane, zamiast tego należy zbadać różnych formantów w usłudze, a także na kliencie, a następnie przetestować scenariusze aplikacji w celu ustalenia najlepszej konfiguracji po obu stronach.</span><span class="sxs-lookup"><span data-stu-id="3e52b-131">It is recommended, instead, that you examine the various controls on the service as well as on the client, and then test your application scenarios to determine the best configuration on either side.</span></span> <span data-ttu-id="3e52b-132">Na przykład, jeśli użycie sesji blokuje przetwarzanie komunikatów w usłudze, możesz ustawić <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> właściwości <xref:System.ServiceModel.InstanceContextMode.PerCall> tak, aby każdy komunikat może przetworzone przez wystąpienie innej usługi i ustaw <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> do <xref:System.ServiceModel.ConcurrencyMode.Multiple> Aby umożliwić więcej niż jeden wątek na wysyłanie wiadomości w czasie.</span><span class="sxs-lookup"><span data-stu-id="3e52b-132">For example, if the use of sessions is blocking the processing of messages on your service, you can set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.InstanceContextMode.PerCall> so that each message can be processed by a different service instance, and set the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> to <xref:System.ServiceModel.ConcurrencyMode.Multiple> in order to allow more than one thread to dispatch messages at a time.</span></span> <span data-ttu-id="3e52b-133">Innym rozwiązaniem jest zwiększenie odczytu przydziały powiązania usługi i klienta.</span><span class="sxs-lookup"><span data-stu-id="3e52b-133">Another approach is to increase the read quotas of the service and client bindings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3e52b-134">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="3e52b-134">See Also</span></span>  
 [<span data-ttu-id="3e52b-135">Komunikacja jednokierunkowa</span><span class="sxs-lookup"><span data-stu-id="3e52b-135">One-Way</span></span>](../../../../docs/framework/wcf/samples/one-way.md)
