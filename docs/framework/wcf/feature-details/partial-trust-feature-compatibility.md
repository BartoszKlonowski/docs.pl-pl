---
title: Zgodność funkcji zaufania częściowego
ms.date: 03/30/2017
ms.assetid: a36a540b-1606-4e63-88e0-b7c59e0e6ab7
ms.openlocfilehash: 3e0f1c2f673d4ba603df7da431d10c211cf779ac
ms.sourcegitcommit: 09b4090b78f52fd09b0e430cd4b26576f1fdf96e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/17/2020
ms.locfileid: "76212121"
---
# <a name="partial-trust-feature-compatibility"></a><span data-ttu-id="a41ce-102">Zgodność funkcji zaufania częściowego</span><span class="sxs-lookup"><span data-stu-id="a41ce-102">Partial Trust Feature Compatibility</span></span>
<span data-ttu-id="a41ce-103">Windows Communication Foundation (WCF) obsługuje ograniczoną część funkcjonalności w przypadku uruchamiania w środowisku częściowo zaufanym.</span><span class="sxs-lookup"><span data-stu-id="a41ce-103">Windows Communication Foundation (WCF) supports a limited subset of functionality when running in a partially-trusted environment.</span></span> <span data-ttu-id="a41ce-104">Funkcje obsługiwane w częściowej relacji zaufania są przeznaczone dla określonego zestawu scenariuszy, zgodnie z opisem w temacie [obsługiwane scenariusze wdrażania](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) .</span><span class="sxs-lookup"><span data-stu-id="a41ce-104">The features supported in partial trust are designed around a specific set of scenarios as described in the [Supported Deployment Scenarios](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md) topic.</span></span>  
  
## <a name="minimum-permission-requirements"></a><span data-ttu-id="a41ce-105">Minimalne wymagania dotyczące uprawnień</span><span class="sxs-lookup"><span data-stu-id="a41ce-105">Minimum Permission Requirements</span></span>  
 <span data-ttu-id="a41ce-106">Usługa WCF obsługuje podzestaw funkcji w aplikacjach uruchamianych w ramach jednego z następujących standardowych zestawów uprawnień:</span><span class="sxs-lookup"><span data-stu-id="a41ce-106">WCF supports a subset of features in applications running under either of the following standard named permission sets:</span></span>  
  
- <span data-ttu-id="a41ce-107">Uprawnienia średniego zaufania</span><span class="sxs-lookup"><span data-stu-id="a41ce-107">Medium Trust permissions</span></span>  
  
- <span data-ttu-id="a41ce-108">Uprawnienia strefy internetowej</span><span class="sxs-lookup"><span data-stu-id="a41ce-108">Internet Zone permissions</span></span>  
  
 <span data-ttu-id="a41ce-109">Próba użycia programu WCF w aplikacjach częściowo zaufanych z bardziej restrykcyjnymi uprawnieniami może skutkować wyjątkami zabezpieczeń w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-109">Attempting to use WCF in partially-trusted applications with more restrictive permissions may result in security exceptions at runtime.</span></span>  
  
## <a name="contracts"></a><span data-ttu-id="a41ce-110">Kontrakty</span><span class="sxs-lookup"><span data-stu-id="a41ce-110">Contracts</span></span>  
 <span data-ttu-id="a41ce-111">Umowy podlegają następującym ograniczeniom w przypadku uruchamiania w ramach częściowej relacji zaufania:</span><span class="sxs-lookup"><span data-stu-id="a41ce-111">Contracts are subject to the following restrictions when running under partial trust:</span></span>  
  
- <span data-ttu-id="a41ce-112">Klasa usługi implementująca interfejs `[ServiceContract]` musi być `public` i mieć Konstruktor `public`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-112">The service class that implements the `[ServiceContract]` interface must be `public` and have a `public` constructor.</span></span> <span data-ttu-id="a41ce-113">Jeśli definiuje `[OperationContract]` metod, muszą one być `public`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-113">If it defines `[OperationContract]` methods, these must be `public`.</span></span> <span data-ttu-id="a41ce-114">Jeśli zamiast tego implementuje interfejs `[ServiceContract]`, te implementacje metod mogą być jawne lub `private`, pod warunkiem, że interfejs `[ServiceContract]` jest `public`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-114">If it instead implements a `[ServiceContract]` interface, those method implementations can be explicit or `private`, provided that the `[ServiceContract]` interface is `public`.</span></span>  
  
- <span data-ttu-id="a41ce-115">W przypadku korzystania z atrybutu `[ServiceKnownType]` należy określić metodę `public`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-115">When using the `[ServiceKnownType]` attribute, the method specified must be `public`.</span></span>  
  
- <span data-ttu-id="a41ce-116">`[MessageContract]` klas i ich członków można `public`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-116">`[MessageContract]` classes and their members can be `public`.</span></span> <span data-ttu-id="a41ce-117">Jeśli Klasa `[MessageContract]` jest zdefiniowana w zestawie aplikacji, może być `internal` i mieć `internal` członków.</span><span class="sxs-lookup"><span data-stu-id="a41ce-117">If the `[MessageContract]` class is defined in the application assembly it can be `internal` and have `internal` members.</span></span>  
  
## <a name="system-provided-bindings"></a><span data-ttu-id="a41ce-118">Wiązania dostarczane przez system</span><span class="sxs-lookup"><span data-stu-id="a41ce-118">System-Provided Bindings</span></span>  
 <span data-ttu-id="a41ce-119"><xref:System.ServiceModel.BasicHttpBinding> i <xref:System.ServiceModel.WebHttpBinding> są w pełni obsługiwane w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-119">The <xref:System.ServiceModel.BasicHttpBinding> and <xref:System.ServiceModel.WebHttpBinding> are fully supported in a partial trust environment.</span></span> <span data-ttu-id="a41ce-120"><xref:System.ServiceModel.WSHttpBinding> jest obsługiwana tylko w trybie zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="a41ce-120">The <xref:System.ServiceModel.WSHttpBinding> is supported for Transport security mode only.</span></span>  
  
 <span data-ttu-id="a41ce-121">Powiązania wykorzystujące transporty inne niż HTTP, takie jak <xref:System.ServiceModel.NetTcpBinding>, <xref:System.ServiceModel.NetNamedPipeBinding>lub <xref:System.ServiceModel.NetMsmqBinding>, nie są obsługiwane w przypadku uruchamiania w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-121">Bindings that use transports other than HTTP, such as the <xref:System.ServiceModel.NetTcpBinding>, the <xref:System.ServiceModel.NetNamedPipeBinding>, or the <xref:System.ServiceModel.NetMsmqBinding>, are not supported when running in a partial trust environment.</span></span>  
  
## <a name="custom-bindings"></a><span data-ttu-id="a41ce-122">Powiązania niestandardowe</span><span class="sxs-lookup"><span data-stu-id="a41ce-122">Custom Bindings</span></span>  
 <span data-ttu-id="a41ce-123">Niestandardowe powiązania mogą być tworzone i używane w środowisku częściowej relacji zaufania, ale muszą być zgodne z ograniczeniami określonymi w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="a41ce-123">Custom bindings can be created and used in a partial trust environment, but must follow the restrictions specified in this section.</span></span>  
  
### <a name="transports"></a><span data-ttu-id="a41ce-124">Transporty</span><span class="sxs-lookup"><span data-stu-id="a41ce-124">Transports</span></span>  
 <span data-ttu-id="a41ce-125">Jedyne dozwolone elementy powiązania transportu to <xref:System.ServiceModel.Channels.HttpTransportBindingElement> i <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span><span class="sxs-lookup"><span data-stu-id="a41ce-125">The only allowed transport binding elements are <xref:System.ServiceModel.Channels.HttpTransportBindingElement> and <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>.</span></span>  
  
### <a name="encoders"></a><span data-ttu-id="a41ce-126">Koderów</span><span class="sxs-lookup"><span data-stu-id="a41ce-126">Encoders</span></span>  
 <span data-ttu-id="a41ce-127">Następujące kodery są dozwolone:</span><span class="sxs-lookup"><span data-stu-id="a41ce-127">The following encoders are allowed:</span></span>  
  
- <span data-ttu-id="a41ce-128">Koder tekstowy (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="a41ce-128">The text encoder (<xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="a41ce-129">Koder binarny (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="a41ce-129">The binary encoder (<xref:System.ServiceModel.Channels.BinaryMessageEncodingBindingElement>).</span></span>  
  
- <span data-ttu-id="a41ce-130">Koder komunikatów sieci Web (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span><span class="sxs-lookup"><span data-stu-id="a41ce-130">The Web Message encoder (<xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>).</span></span>  
  
 <span data-ttu-id="a41ce-131">Kodery mechanizmu optymalizacji transmisji wiadomości (MTOM) nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="a41ce-131">The Message Transmission Optimization Mechanism (MTOM) encoders are not supported.</span></span>  
  
### <a name="security"></a><span data-ttu-id="a41ce-132">Zabezpieczenia</span><span class="sxs-lookup"><span data-stu-id="a41ce-132">Security</span></span>  
 <span data-ttu-id="a41ce-133">Częściowo zaufane aplikacje mogą korzystać z funkcji zabezpieczeń na poziomie transportu WCF w celu zabezpieczania komunikacji.</span><span class="sxs-lookup"><span data-stu-id="a41ce-133">Partially-trusted applications can use WCF's transport-level security features for securing their communication.</span></span> <span data-ttu-id="a41ce-134">Zabezpieczenia na poziomie wiadomości nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="a41ce-134">Message-level security is not supported.</span></span> <span data-ttu-id="a41ce-135">Skonfigurowanie powiązania do korzystania z wyników zabezpieczeń na poziomie komunikatu w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-135">Configuring a binding to use message-level security results in an exception at runtime.</span></span>  
  
### <a name="unsupported-bindings"></a><span data-ttu-id="a41ce-136">Nieobsługiwane powiązania</span><span class="sxs-lookup"><span data-stu-id="a41ce-136">Unsupported Bindings</span></span>  
 <span data-ttu-id="a41ce-137">Powiązania korzystające z niezawodnej obsługi komunikatów, transakcji lub zabezpieczeń na poziomie wiadomości nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="a41ce-137">Bindings that use reliable messaging, transactions, or message-level security are not supported.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="a41ce-138">Serializacja</span><span class="sxs-lookup"><span data-stu-id="a41ce-138">Serialization</span></span>  
 <span data-ttu-id="a41ce-139">Zarówno <xref:System.Runtime.Serialization.DataContractSerializer>, jak i <xref:System.Xml.Serialization.XmlSerializer> są obsługiwane w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-139">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Xml.Serialization.XmlSerializer> are supported in a partial trust environment.</span></span> <span data-ttu-id="a41ce-140">Jednak użycie <xref:System.Runtime.Serialization.DataContractSerializer> podlega następującym warunkom:</span><span class="sxs-lookup"><span data-stu-id="a41ce-140">However, use of the <xref:System.Runtime.Serialization.DataContractSerializer> is subject to the following conditions:</span></span>  
  
- <span data-ttu-id="a41ce-141">Wszystkie możliwe do serializacji typy `[DataContract]` muszą być `public`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-141">All serializable `[DataContract]` types must be `public`.</span></span>  
  
- <span data-ttu-id="a41ce-142">Wszystkie możliwe do serializacji pola `[DataMember]` lub właściwości w typie `[DataContract]` muszą być publiczne i odczytywane i zapisywane.</span><span class="sxs-lookup"><span data-stu-id="a41ce-142">All serializable `[DataMember]` fields or properties in a `[DataContract]` type must be public and read/write.</span></span> <span data-ttu-id="a41ce-143">Serializacja i deserializacja pól [tylko do odczytu](https://go.microsoft.com/fwlink/?LinkID=98854) nie jest obsługiwana w przypadku uruchamiania programu WCF w częściowo zaufanej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a41ce-143">The serialization and deserialization of [readonly](https://go.microsoft.com/fwlink/?LinkID=98854) fields is not supported when running WCF in a partially-trusted application.</span></span>  
  
- <span data-ttu-id="a41ce-144">Model programowania `[Serializable]`/ISerializable nie jest obsługiwany w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-144">The `[Serializable]`/ISerializable programming model is not supported in a partial trust environment.</span></span>  
  
- <span data-ttu-id="a41ce-145">Znane typy muszą być określone w kodzie lub konfiguracji na poziomie komputera (Machine. config).</span><span class="sxs-lookup"><span data-stu-id="a41ce-145">Known types must be specified in code or machine-level configuration (machine.config).</span></span> <span data-ttu-id="a41ce-146">Nie można określić znanych typów w konfiguracji na poziomie aplikacji ze względów bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="a41ce-146">Known types cannot be specified in application-level configuration for security reasons.</span></span>  
  
- <span data-ttu-id="a41ce-147">Typy implementujące <xref:System.Runtime.Serialization.IObjectReference> zgłaszają wyjątek w środowisku częściowo zaufanym.</span><span class="sxs-lookup"><span data-stu-id="a41ce-147">Types that implement <xref:System.Runtime.Serialization.IObjectReference> throw an exception in a partially-trusted environment.</span></span>  
  
 <span data-ttu-id="a41ce-148">Zapoznaj się z sekcją serializacji w [części częściowe relacje zaufania](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) , aby uzyskać więcej informacji na temat zabezpieczeń w przypadku bezpiecznego używania <xref:System.Runtime.Serialization.DataContractSerializer> w aplikacji częściowo zaufanej.</span><span class="sxs-lookup"><span data-stu-id="a41ce-148">See the Serialization section in [Partial Trust Best Practices](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md) for more information about security when using <xref:System.Runtime.Serialization.DataContractSerializer> safely in a partially-trusted application.</span></span>  
  
### <a name="collection-types"></a><span data-ttu-id="a41ce-149">Typy kolekcji</span><span class="sxs-lookup"><span data-stu-id="a41ce-149">Collection Types</span></span>  
 <span data-ttu-id="a41ce-150">Niektóre typy kolekcji implementują zarówno <xref:System.Collections.Generic.IEnumerable%601>, jak i <xref:System.Collections.IEnumerable>.</span><span class="sxs-lookup"><span data-stu-id="a41ce-150">Some collection types implement both <xref:System.Collections.Generic.IEnumerable%601> and <xref:System.Collections.IEnumerable>.</span></span> <span data-ttu-id="a41ce-151">Przykłady obejmują typy, które implementują <xref:System.Collections.Generic.ICollection%601>.</span><span class="sxs-lookup"><span data-stu-id="a41ce-151">Examples include types that implement <xref:System.Collections.Generic.ICollection%601>.</span></span> <span data-ttu-id="a41ce-152">Takie typy mogą implementować `public` implementację `GetEnumerator()`i jawną implementację `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-152">Such types can implement a `public` implementation of `GetEnumerator()`, and an explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="a41ce-153">W tym przypadku <xref:System.Runtime.Serialization.DataContractSerializer> wywołuje `public` implementacji `GetEnumerator()`, a nie jawną implementacją `GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-153">In this case, <xref:System.Runtime.Serialization.DataContractSerializer> invokes the `public` implementation of `GetEnumerator()`, and not the explicit implementation of `GetEnumerator()`.</span></span> <span data-ttu-id="a41ce-154">Jeśli żadna z implementacji `GetEnumerator()` nie jest `public` i wszystkie są jawnymi implementacjami, <xref:System.Runtime.Serialization.DataContractSerializer> wywołuje `IEnumerable.GetEnumerator()`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-154">If none of the `GetEnumerator()` implementations are `public` and all are explicit implementations, then <xref:System.Runtime.Serialization.DataContractSerializer> invokes `IEnumerable.GetEnumerator()`.</span></span>  
  
 <span data-ttu-id="a41ce-155">W przypadku typów kolekcji, gdy usługa WCF jest uruchomiona w środowisku częściowej relacji zaufania, jeśli żadna z implementacji `GetEnumerator()` nie jest `public`lub żadna z nich nie jest jawną implementacją interfejsu, zostanie zgłoszony wyjątek zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="a41ce-155">For collection types when WCF is running in a partial trust environment, if none of the `GetEnumerator()` implementations are `public`, or none of them are explicit interface implementations, then a security exception is thrown.</span></span>  
  
### <a name="netdatacontractserializer"></a><span data-ttu-id="a41ce-156">NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="a41ce-156">NetDataContractSerializer</span></span>  
 <span data-ttu-id="a41ce-157">Wiele .NET Framework typów kolekcji, takich jak <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> i <xref:System.Collections.Hashtable> nie są obsługiwane przez <xref:System.Runtime.Serialization.NetDataContractSerializer> w częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-157">Many .NET Framework collection types such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ArrayList>, <xref:System.Collections.Generic.Dictionary%602> and <xref:System.Collections.Hashtable> are not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span> <span data-ttu-id="a41ce-158">Te typy mają ustawiony atrybut `[Serializable]` i jak określono wcześniej w sekcji serializacji, ten atrybut nie jest obsługiwany w częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-158">These types have the `[Serializable]` attribute set, and as stated previously in the Serialization section, this attribute is not supported in partial trust.</span></span> <span data-ttu-id="a41ce-159"><xref:System.Runtime.Serialization.DataContractSerializer> traktuje kolekcje w specjalny sposób i w związku z tym jest w stanie obejść to ograniczenie, ale <xref:System.Runtime.Serialization.NetDataContractSerializer> nie ma takiego mechanizmu do obejścia tego ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="a41ce-159">The <xref:System.Runtime.Serialization.DataContractSerializer> treats collections in a special way and is thus able to get around this restriction, but the <xref:System.Runtime.Serialization.NetDataContractSerializer> has no such mechanism to circumvent this restriction.</span></span>  
  
 <span data-ttu-id="a41ce-160">Typ <xref:System.DateTimeOffset> nie jest obsługiwany przez <xref:System.Runtime.Serialization.NetDataContractSerializer> w częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-160">The <xref:System.DateTimeOffset> type is not supported by the <xref:System.Runtime.Serialization.NetDataContractSerializer> in partial trust.</span></span>  
  
 <span data-ttu-id="a41ce-161">Nie można używać surogatu z <xref:System.Runtime.Serialization.NetDataContractSerializer> (przy użyciu mechanizmu <xref:System.Runtime.Serialization.SurrogateSelector>) w przypadku uruchamiania w częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-161">A surrogate cannot be used with the <xref:System.Runtime.Serialization.NetDataContractSerializer> (using the <xref:System.Runtime.Serialization.SurrogateSelector> mechanism) when running in partial trust.</span></span> <span data-ttu-id="a41ce-162">Należy zauważyć, że to ograniczenie dotyczy przy użyciu surogatu, a nie do serializacji go.</span><span class="sxs-lookup"><span data-stu-id="a41ce-162">Note that this restriction applies to using a surrogate, not to serializing it.</span></span>  
  
## <a name="enabling-common-behaviors-to-run"></a><span data-ttu-id="a41ce-163">Włączanie wykonywania wspólnych zachowań</span><span class="sxs-lookup"><span data-stu-id="a41ce-163">Enabling Common Behaviors to Run</span></span>  
 <span data-ttu-id="a41ce-164">Zachowania usługi lub punktu końcowego nie są oznaczone atrybutem <xref:System.Security.AllowPartiallyTrustedCallersAttribute> (APTCA), które są dodawane do sekcji [\<commonBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) pliku konfiguracji nie są uruchamiane, gdy aplikacja działa w środowisku częściowej relacji zaufania, a w takim przypadku nie jest zgłaszany żaden wyjątek.</span><span class="sxs-lookup"><span data-stu-id="a41ce-164">Service or endpoint behaviors not marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute (APTCA) that are added to the [\<commonBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/commonbehaviors.md) section of a configuration file are not run when the application runs in a partial trust environment and no exception is thrown when this occurs.</span></span> <span data-ttu-id="a41ce-165">Aby wymusić uruchamianie typowych zachowań, należy wykonać jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="a41ce-165">To enforce the running of common behaviors, you must do one of the following options:</span></span>  
  
- <span data-ttu-id="a41ce-166">Oznacz wspólne zachowanie przy użyciu atrybutu <xref:System.Security.AllowPartiallyTrustedCallersAttribute>, aby można go było uruchomić w przypadku wdrożenia jako częściowo zaufanej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a41ce-166">Mark your common behavior with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> attribute so that it can run when deployed as a partial trust application.</span></span> <span data-ttu-id="a41ce-167">Należy pamiętać, że na komputerze można ustawić wpis rejestru, aby zapobiec uruchamianiu zestawów oznaczonych przez APTCA.</span><span class="sxs-lookup"><span data-stu-id="a41ce-167">Note that a registry entry can be set on the computer to prevent APTCA-marked assemblies from running.</span></span> <span data-ttu-id="a41ce-168">.</span><span class="sxs-lookup"><span data-stu-id="a41ce-168">.</span></span>  
  
- <span data-ttu-id="a41ce-169">Upewnij się, że jeśli aplikacja jest wdrożona jako w pełni zaufana aplikacja, której użytkownicy nie mogą modyfikować ustawień zabezpieczeń dostępu kodu w celu uruchamiania aplikacji w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-169">Ensure that if the application is deployed as a fully-trusted application that users cannot modify the code-access security settings to run the application in a partial trust environment.</span></span> <span data-ttu-id="a41ce-170">Jeśli tak się stanie, zachowanie nie zostanie uruchomione i żaden wyjątek nie jest zgłaszany.</span><span class="sxs-lookup"><span data-stu-id="a41ce-170">If they can do so, the behavior does not run and no exception is thrown.</span></span> <span data-ttu-id="a41ce-171">Aby to sprawdzić, zobacz opcję **levelfinal** za pomocą [Narzędzia Caspol. exe (narzędzie do uzyskiwania dostępu do kodu)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="a41ce-171">To ensure this, see the **levelfinal** option using [Caspol.exe (Code Access Security Policy Tool)](../../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
 <span data-ttu-id="a41ce-172">Przykład typowego zachowania można znaleźć [w temacie How to: Lock down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span><span class="sxs-lookup"><span data-stu-id="a41ce-172">For an example of a common behavior, see [How to: Lock Down Endpoints in the Enterprise](../../../../docs/framework/wcf/extending/how-to-lock-down-endpoints-in-the-enterprise.md).</span></span>  
  
## <a name="configuration"></a><span data-ttu-id="a41ce-173">Konfiguracja</span><span class="sxs-lookup"><span data-stu-id="a41ce-173">Configuration</span></span>  
 <span data-ttu-id="a41ce-174">Po jednym wyjątku kod częściowo zaufany może ładować tylko sekcje konfiguracji WCF w lokalnym pliku `app.config`.</span><span class="sxs-lookup"><span data-stu-id="a41ce-174">With one exception, partially-trusted code can only load WCF configuration sections in the local `app.config` file.</span></span> <span data-ttu-id="a41ce-175">Aby załadować sekcje konfiguracyjne WCF, które odwołują się do sekcji WCF w pliku Machine. config lub w katalogu głównym Web. config wymaga ConfigurationPermission (bez ograniczeń).</span><span class="sxs-lookup"><span data-stu-id="a41ce-175">To load WCF configuration sections that reference WCF sections in machine.config or in a root web.config file requires ConfigurationPermission(Unrestricted).</span></span> <span data-ttu-id="a41ce-176">Bez tego uprawnienia odwołania do sekcji konfiguracji WCF (zachowania, powiązania) poza lokalnym plikiem konfiguracji powoduje wyjątek podczas ładowania konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="a41ce-176">Without this permission, references to WCF configuration sections (behaviors, bindings) outside of the local configuration file results in an exception when the configuration is loaded.</span></span>  
  
 <span data-ttu-id="a41ce-177">Jedynym wyjątkiem jest konfiguracja typu dla serializacji, zgodnie z opisem w sekcji serializacji tego tematu.</span><span class="sxs-lookup"><span data-stu-id="a41ce-177">The one exception is known-type configuration for serialization, as described in the Serialization section of this topic.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="a41ce-178">Rozszerzenia konfiguracji są obsługiwane tylko wtedy, gdy działa w trybie pełnego zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-178">Configuration extensions are only supported when running under Full Trust.</span></span>  
  
## <a name="diagnostics"></a><span data-ttu-id="a41ce-179">Diagnostyka</span><span class="sxs-lookup"><span data-stu-id="a41ce-179">Diagnostics</span></span>  
  
### <a name="event-logging"></a><span data-ttu-id="a41ce-180">Rejestrowanie zdarzeń</span><span class="sxs-lookup"><span data-stu-id="a41ce-180">Event Logging</span></span>  
 <span data-ttu-id="a41ce-181">Rejestrowanie zdarzeń ograniczonych jest obsługiwane w ramach częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-181">Limited event logging is supported under partial trust.</span></span> <span data-ttu-id="a41ce-182">W dzienniku zdarzeń rejestrowane są tylko błędy aktywacji usługi i śledzenie komunikatów i komunikaty o błędach.</span><span class="sxs-lookup"><span data-stu-id="a41ce-182">Only service activation faults and tracing/message logging failures are logged to the Event Log.</span></span> <span data-ttu-id="a41ce-183">Maksymalna liczba zdarzeń, które mogą być rejestrowane przez proces to 5, aby uniknąć zapisywania nadmiernych komunikatów w dzienniku zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="a41ce-183">The maximum number of events that can be logged by a process is 5, to avoid writing excessive messages to the Event Log.</span></span>  
  
### <a name="message-logging"></a><span data-ttu-id="a41ce-184">Rejestrowanie komunikatów</span><span class="sxs-lookup"><span data-stu-id="a41ce-184">Message Logging</span></span>  
 <span data-ttu-id="a41ce-185">Rejestrowanie komunikatów nie działa w przypadku uruchamiania programu WCF w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-185">Message logging does not work when WCF is run in a partial trust environment.</span></span> <span data-ttu-id="a41ce-186">Jeśli ta opcja jest włączona w obszarze częściowe zaufanie, nie kończy się aktywacją usługi, ale komunikat nie jest rejestrowany.</span><span class="sxs-lookup"><span data-stu-id="a41ce-186">If enabled under partial trust, it does not fail service activation, but no message is logged.</span></span>  
  
### <a name="tracing"></a><span data-ttu-id="a41ce-187">Śledzenie</span><span class="sxs-lookup"><span data-stu-id="a41ce-187">Tracing</span></span>  
 <span data-ttu-id="a41ce-188">Funkcja śledzenia z ograniczeniami jest dostępna w przypadku uruchamiania w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-188">Restricted tracing functionality is available when running in a partial trust environment.</span></span> <span data-ttu-id="a41ce-189">W <`listeners`> elementu w pliku konfiguracyjnym jedynymi typami, które można dodać, są <xref:System.Diagnostics.TextWriterTraceListener> i nowe <xref:System.Diagnostics.EventSchemaTraceListener>.</span><span class="sxs-lookup"><span data-stu-id="a41ce-189">In the <`listeners`> element in the configuration file, the only types that you can add are <xref:System.Diagnostics.TextWriterTraceListener> and the new <xref:System.Diagnostics.EventSchemaTraceListener>.</span></span> <span data-ttu-id="a41ce-190">Użycie standardowego <xref:System.Diagnostics.XmlWriterTraceListener> może spowodować niekompletne lub nieprawidłowe dzienniki.</span><span class="sxs-lookup"><span data-stu-id="a41ce-190">Use of the standard <xref:System.Diagnostics.XmlWriterTraceListener> may result in incomplete or incorrect logs.</span></span>  
  
 <span data-ttu-id="a41ce-191">Obsługiwane źródła śledzenia to:</span><span class="sxs-lookup"><span data-stu-id="a41ce-191">Supported trace sources are:</span></span>  
  
- <xref:System.ServiceModel>  
  
- <xref:System.Runtime.Serialization>  
  
- <span data-ttu-id="a41ce-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors> oraz <xref:System.IdentityModel.Tokens>.</span><span class="sxs-lookup"><span data-stu-id="a41ce-192"><xref:System.IdentityModel.Claims>, <xref:System.IdentityModel.Policy>, <xref:System.IdentityModel.Selectors>, and <xref:System.IdentityModel.Tokens>.</span></span>  
  
 <span data-ttu-id="a41ce-193">Następujące źródła śledzenia nie są obsługiwane:</span><span class="sxs-lookup"><span data-stu-id="a41ce-193">The following trace sources are not supported:</span></span>  
  
- <span data-ttu-id="a41ce-194">CardSpace</span><span class="sxs-lookup"><span data-stu-id="a41ce-194">CardSpace</span></span>  
  
- <xref:System.IO.Log>  

- <span data-ttu-id="a41ce-195">[System. ServiceModel. Internal. TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span><span class="sxs-lookup"><span data-stu-id="a41ce-195">[System.ServiceModel.Internal.TransactionBridge](https://docs.microsoft.com/previous-versions/aa346556(v=vs.110))]</span></span>
  
 <span data-ttu-id="a41ce-196">Nie należy określać następujących elementów członkowskich wyliczenia <xref:System.Diagnostics.TraceOptions>:</span><span class="sxs-lookup"><span data-stu-id="a41ce-196">The following members of the <xref:System.Diagnostics.TraceOptions> enumeration should not be specified:</span></span>  
  
- <xref:System.Diagnostics.TraceOptions.Callstack?displayProperty=nameWithType>  
  
- <xref:System.Diagnostics.TraceOptions.ProcessId?displayProperty=nameWithType>  
  
 <span data-ttu-id="a41ce-197">W przypadku korzystania ze śledzenia w środowisku częściowej relacji zaufania upewnij się, że aplikacja ma wystarczające uprawnienia do przechowywania danych wyjściowych odbiornika śledzenia.</span><span class="sxs-lookup"><span data-stu-id="a41ce-197">When using tracing in a partial trust environment, ensure that the application has sufficient permissions to store the output of the trace listener.</span></span> <span data-ttu-id="a41ce-198">Na przykład w przypadku używania <xref:System.Diagnostics.TextWriterTraceListener> do zapisywania danych wyjściowych śledzenia do pliku tekstowego, należy się upewnić, że aplikacja wymaga FileIOPermission wymaganych do pomyślnego zapisu w pliku śledzenia.</span><span class="sxs-lookup"><span data-stu-id="a41ce-198">For example, when using the <xref:System.Diagnostics.TextWriterTraceListener> to write trace output to a text file, ensure that the application has the necessary FileIOPermission required to successfully write to the trace file.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="a41ce-199">Aby uniknąć zalewania plików śledzenia ze zduplikowanymi błędami, WCF wyłącza śledzenie zasobu lub akcji po pierwszym błędzie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="a41ce-199">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="a41ce-200">Istnieje jeden ślad wyjątku dla każdego niepowodzenia dostępu do zasobu, podczas gdy podejmowana jest próba uzyskania dostępu do zasobu lub wykonania akcji.</span><span class="sxs-lookup"><span data-stu-id="a41ce-200">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="wcf-service-host"></a><span data-ttu-id="a41ce-201">Host usługi WCF</span><span class="sxs-lookup"><span data-stu-id="a41ce-201">WCF Service Host</span></span>  
 <span data-ttu-id="a41ce-202">Host usługi WCF nie obsługuje częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-202">WCF service host does not support partial trust.</span></span> <span data-ttu-id="a41ce-203">Jeśli chcesz używać usługi WCF w częściowej relacji zaufania, nie należy używać szablonu projektu biblioteki usług WCF w programie Visual Studio do kompilowania usługi.</span><span class="sxs-lookup"><span data-stu-id="a41ce-203">If you want to use a WCF service in partial trust, do not use the WCF Service Library Project template in Visual Studio to build your service.</span></span> <span data-ttu-id="a41ce-204">Zamiast tego Utwórz nową witrynę sieci Web w programie Visual Studio, wybierając szablon witryna sieci Web usługi WCF, który może hostować usługę na serwerze sieci Web, na którym jest obsługiwana częściowe zaufanie WCF.</span><span class="sxs-lookup"><span data-stu-id="a41ce-204">Instead, create a new Web site in Visual Studio by choosing the WCF service Web site template, which can host the service in a Web server on which WCF partial trust is supported.</span></span>  
  
## <a name="other-limitations"></a><span data-ttu-id="a41ce-205">Inne ograniczenia</span><span class="sxs-lookup"><span data-stu-id="a41ce-205">Other Limitations</span></span>  

  <span data-ttu-id="a41ce-206">Funkcja WCF jest ogólnie ograniczona do zagadnień związanych z zabezpieczeniami nałożonych przez aplikację hostingu.</span><span class="sxs-lookup"><span data-stu-id="a41ce-206">WCF is generally limited to the security considerations imposed upon it by the hosting application.</span></span> <span data-ttu-id="a41ce-207">Jeśli na przykład WCF jest hostowana w aplikacji przeglądarki XAML (XBAP), podlegają ograniczeniam XBAP, zgodnie z opisem w [części Windows Presentation Foundation zabezpieczenia relacji zaufania](../../wpf/wpf-partial-trust-security.md).</span><span class="sxs-lookup"><span data-stu-id="a41ce-207">For example, if WCF is hosted in a XAML Browser Application (XBAP), it is subject to XBAP limitations, as described in [Windows Presentation Foundation Partial Trust Security](../../wpf/wpf-partial-trust-security.md).</span></span>  
  
 <span data-ttu-id="a41ce-208">Następujące dodatkowe funkcje nie są włączone w przypadku uruchamiania programu indigO2 w środowisku częściowej relacji zaufania:</span><span class="sxs-lookup"><span data-stu-id="a41ce-208">The following additional features are not enabled when running indigo2 in a partial trust environment:</span></span>  
  
- <span data-ttu-id="a41ce-209">Windows Management Instrumentation (WMI)</span><span class="sxs-lookup"><span data-stu-id="a41ce-209">Windows Management Instrumentation (WMI)</span></span>  
  
- <span data-ttu-id="a41ce-210">Rejestrowanie zdarzeń jest tylko częściowo włączone (zobacz dyskusje w sekcji **Diagnostyka** ).</span><span class="sxs-lookup"><span data-stu-id="a41ce-210">Event logging is only partially enabled (see discussion in **Diagnostics** section).</span></span>  
  
- <span data-ttu-id="a41ce-211">Liczniki wydajności</span><span class="sxs-lookup"><span data-stu-id="a41ce-211">Performance counters</span></span>  
  
 <span data-ttu-id="a41ce-212">Korzystanie z funkcji WCF, które nie są obsługiwane w środowisku częściowej relacji zaufania, może spowodować wyjątki w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="a41ce-212">Use of WCF features that are not supported in a partial trust environment may result in exceptions at runtime.</span></span>  
  
## <a name="unlisted-features"></a><span data-ttu-id="a41ce-213">Funkcje nieznajdujące się na liście</span><span class="sxs-lookup"><span data-stu-id="a41ce-213">Unlisted Features</span></span>  
 <span data-ttu-id="a41ce-214">Najlepszym sposobem, aby poznać, że informacja lub akcja jest niedostępna w przypadku uruchamiania w środowisku częściowego zaufania, jest próba uzyskania dostępu do zasobu lub wykonania akcji wewnątrz bloku `try`, a następnie `catch` błędu.</span><span class="sxs-lookup"><span data-stu-id="a41ce-214">The best way to discover that a piece of information or action is unavailable when running in a partial trust environment is to try to access the resource or do the action inside of a `try` block, and then `catch` the failure.</span></span> <span data-ttu-id="a41ce-215">Aby uniknąć zalewania plików śledzenia ze zduplikowanymi błędami, WCF wyłącza śledzenie zasobu lub akcji po pierwszym błędzie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="a41ce-215">To avoid flooding the trace files with duplicate errors, WCF disables tracing of the resource or action after the first security failure.</span></span> <span data-ttu-id="a41ce-216">Istnieje jeden ślad wyjątku dla każdego niepowodzenia dostępu do zasobu, podczas gdy podejmowana jest próba uzyskania dostępu do zasobu lub wykonania akcji.</span><span class="sxs-lookup"><span data-stu-id="a41ce-216">There is one exception trace for each failed resource access, the first time an attempt is made to access the resource or perform the action.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a41ce-217">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="a41ce-217">See also</span></span>

- <xref:System.ServiceModel.Channels.HttpTransportBindingElement>
- <xref:System.ServiceModel.Channels.HttpsTransportBindingElement>
- <xref:System.ServiceModel.Channels.TextMessageEncodingBindingElement>
- <xref:System.ServiceModel.Channels.WebMessageEncodingBindingElement>
- [<span data-ttu-id="a41ce-218">Obsługiwane scenariusze wdrażania</span><span class="sxs-lookup"><span data-stu-id="a41ce-218">Supported Deployment Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/supported-deployment-scenarios.md)
- [<span data-ttu-id="a41ce-219">Najlepsze rozwiązania dotyczące częściowego zaufania</span><span class="sxs-lookup"><span data-stu-id="a41ce-219">Partial Trust Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/partial-trust-best-practices.md)
