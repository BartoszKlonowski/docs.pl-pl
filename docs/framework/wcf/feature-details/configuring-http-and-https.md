---
title: Konfigurowanie protokołów HTTP i HTTPS
ms.date: 04/08/2019
helpviewer_keywords:
- configuring HTTP [WCF]
ms.assetid: b0c29a86-bc0c-41b3-bc1e-4eb5bb5714d4
ms.openlocfilehash: f7fd2bad6ced09b638cc1bb5d539fab1b9ce7d25
ms.sourcegitcommit: 30a558d23e3ac5a52071121a52c305c85fe15726
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/25/2019
ms.locfileid: "75336702"
---
# <a name="configuring-http-and-https"></a><span data-ttu-id="6d1d4-102">Konfigurowanie protokołów HTTP i HTTPS</span><span class="sxs-lookup"><span data-stu-id="6d1d4-102">Configuring HTTP and HTTPS</span></span>

<span data-ttu-id="6d1d4-103">Usługi i klienci WCF mogą komunikować się za pośrednictwem protokołów HTTP i HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-103">WCF services and clients can communicate over HTTP and HTTPS.</span></span> <span data-ttu-id="6d1d4-104">Ustawienia protokołu HTTP/HTTPS są konfigurowane przy użyciu Internet Information Services (IIS) lub przy użyciu narzędzia wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-104">The HTTP/HTTPS settings are configured by using Internet Information Services (IIS) or through the use of a command-line tool.</span></span> <span data-ttu-id="6d1d4-105">Gdy usługa WCF jest hostowana w obszarze Ustawienia HTTP lub HTTPS usługi IIS, można skonfigurować w ramach usług IIS (za pomocą narzędzia inetmgr. exe).</span><span class="sxs-lookup"><span data-stu-id="6d1d4-105">When a WCF service is hosted under IIS HTTP or HTTPS settings can be configured within IIS (using the inetmgr.exe tool).</span></span> <span data-ttu-id="6d1d4-106">Jeśli usługa WCF jest samodzielna, ustawienia protokołu HTTP lub HTTPS są konfigurowane przy użyciu narzędzia wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-106">If a WCF service is self-hosted, HTTP or HTTPS settings are configured by using a command-line tool.</span></span>

<span data-ttu-id="6d1d4-107">Aby skonfigurować rejestrację adresów URL i dodać wyjątek zapory dla adresu URL, który będzie używany przez usługę, należy określić co najmniej.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-107">At a minimum, you want to configure a URL registration and add a Firewall exception for the URL your service will be using.</span></span> <span data-ttu-id="6d1d4-108">Te ustawienia można skonfigurować za pomocą narzędzia Netsh. exe.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-108">You can configure these settings with the Netsh.exe tool.</span></span>

## <a name="configuring-namespace-reservations"></a><span data-ttu-id="6d1d4-109">Konfigurowanie rezerwacji przestrzeni nazw</span><span class="sxs-lookup"><span data-stu-id="6d1d4-109">Configuring namespace reservations</span></span>

<span data-ttu-id="6d1d4-110">Rezerwacja przestrzeni nazw przypisuje prawa dla części przestrzeni nazw HTTP URL do określonej grupy użytkowników.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-110">Namespace reservation assigns the rights for a portion of the HTTP URL namespace to a particular group of users.</span></span> <span data-ttu-id="6d1d4-111">Rezerwacja daje tym użytkownikom prawo do tworzenia usług, które nasłuchują na tej części przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-111">A reservation gives those users the right to create services that listen on that portion of the namespace.</span></span> <span data-ttu-id="6d1d4-112">Rezerwacje są prefiksami adresów URL, co oznacza, że rezerwacja obejmuje wszystkie ścieżki podrzędne ścieżki rezerwacji.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-112">Reservations are URL prefixes, meaning that the reservation covers all subpaths of the reservation path.</span></span> <span data-ttu-id="6d1d4-113">Rezerwacje przestrzeni nazw zezwalają na dwa sposoby używania symboli wieloznacznych.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-113">Namespace reservations permit two ways to use wildcards.</span></span> <span data-ttu-id="6d1d4-114">Dokumentacja interfejsu API serwera HTTP opisuje [kolejność rozpoznawania oświadczeń między przestrzeniami nazw, które obejmują symbole wieloznaczne](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="6d1d4-114">The HTTP Server API documentation describes the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span>

<span data-ttu-id="6d1d4-115">Działająca aplikacja może utworzyć podobne żądanie, aby dodać rejestracje przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-115">A running application can create a similar request to add namespace registrations.</span></span> <span data-ttu-id="6d1d4-116">Rejestracje i rezerwacje konkurują w przypadku części przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-116">Registrations and reservations compete for portions of the namespace.</span></span> <span data-ttu-id="6d1d4-117">Rezerwacja może mieć pierwszeństwo przed rejestracją zgodnie z kolejnością rozwiązywania [między oświadczeniami przestrzeni nazw, które obejmują symbole wieloznaczne](/windows/desktop/Http/routing-incoming-requests).</span><span class="sxs-lookup"><span data-stu-id="6d1d4-117">A reservation may have precedence over a registration according to the order of resolution given in the [order of resolution between namespace claims that involve wildcards](/windows/desktop/Http/routing-incoming-requests).</span></span> <span data-ttu-id="6d1d4-118">W takim przypadku rezerwacja blokuje uruchomioną aplikację z otrzymywania żądań.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-118">In this case, the reservation blocks the running application from receiving requests.</span></span>

<span data-ttu-id="6d1d4-119">Poniższy przykład używa narzędzia Netsh. exe:</span><span class="sxs-lookup"><span data-stu-id="6d1d4-119">The following example uses the Netsh.exe tool:</span></span>

```console
netsh http add urlacl url=http://+:80/MyUri user=DOMAIN\user
```

<span data-ttu-id="6d1d4-120">To polecenie dodaje rezerwację adresu URL dla określonego obszaru nazw URL dla konta domena\nazwa użytkownika.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-120">This command adds a URL reservation for the specified URL namespace for the DOMAIN\user account.</span></span> <span data-ttu-id="6d1d4-121">Aby uzyskać więcej informacji na temat korzystania z polecenia netsh, wpisz `netsh http add urlacl /?` w wierszu polecenia i naciśnij klawisz ENTER.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-121">For more information on using the netsh command, type `netsh http add urlacl /?` in a command-prompt and press Enter.</span></span>

## <a name="configuring-a-firewall-exception"></a><span data-ttu-id="6d1d4-122">Konfigurowanie wyjątku zapory</span><span class="sxs-lookup"><span data-stu-id="6d1d4-122">Configuring a firewall exception</span></span>

<span data-ttu-id="6d1d4-123">Podczas samodzielnego udostępniania usługi WCF, która komunikuje się za pośrednictwem protokołu HTTP, należy dodać do konfiguracji zapory wyjątek, aby zezwolić na połączenia przychodzące przy użyciu określonego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-123">When self-hosting a WCF service that communicates over HTTP, an exception must be added to the firewall configuration to allow inbound connections using a particular URL.</span></span>

## <a name="configuring-ssl-certificates"></a><span data-ttu-id="6d1d4-124">Konfigurowanie certyfikatów SSL</span><span class="sxs-lookup"><span data-stu-id="6d1d4-124">Configuring SSL certificates</span></span>

<span data-ttu-id="6d1d4-125">Protokół SSL (SSL) używa certyfikatów na kliencie i serwerze do przechowywania kluczy szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-125">The Secure Sockets Layer (SSL) protocol uses certificates on the client and server to store encryption keys.</span></span> <span data-ttu-id="6d1d4-126">Serwer udostępnia swój certyfikat SSL podczas ustanawiania połączenia, aby klient mógł zweryfikować tożsamość serwera.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-126">The server provides its SSL certificate when a connection is made so that the client can verify the server identity.</span></span> <span data-ttu-id="6d1d4-127">Serwer może również zażądać certyfikatu od klienta, aby zapewnić wzajemne uwierzytelnienie obu stron połączenia.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-127">The server can also request a certificate from the client to provide mutual authentication of both sides of the connection.</span></span>

<span data-ttu-id="6d1d4-128">Certyfikaty są przechowywane w scentralizowanym magazynie zgodnie z adresem IP i numerem portu połączenia.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-128">Certificates are stored in a centralized store according to the IP address and port number of the connection.</span></span> <span data-ttu-id="6d1d4-129">Specjalny adres IP 0.0.0.0 jest zgodny z dowolnym adresem IP komputera lokalnego.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-129">The special IP address 0.0.0.0 matches any IP address for the local machine.</span></span> <span data-ttu-id="6d1d4-130">Należy pamiętać, że magazyn certyfikatów nie rozróżnia adresów URL na podstawie ścieżki.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-130">Note that the certificate store doesn't distinguish URLs based on the path.</span></span> <span data-ttu-id="6d1d4-131">Usługi o tej samej kombinacji adresów IP i portów muszą udostępniać certyfikaty nawet wtedy, gdy ścieżka w adresie URL usług jest inna.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-131">Services with the same IP address and port combination must share certificates even if the path in the URL for the services is different.</span></span>

<span data-ttu-id="6d1d4-132">Instrukcje krok po kroku znajdują się w temacie [How to: Configure a port with a SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="6d1d4-132">For step-by-step instructions, see [How to: Configure a Port with an SSL Certificate](how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>

## <a name="configuring-the-ip-listen-list"></a><span data-ttu-id="6d1d4-133">Konfigurowanie listy nasłuchiwania adresów IP</span><span class="sxs-lookup"><span data-stu-id="6d1d4-133">Configuring the IP Listen List</span></span>

<span data-ttu-id="6d1d4-134">Interfejs API serwera HTTP wiąże się tylko z adresem IP i portem, gdy użytkownik zarejestruje adres URL.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-134">The HTTP Server API only binds to an IP address and port once a user registers a URL.</span></span> <span data-ttu-id="6d1d4-135">Domyślnie interfejs API serwera HTTP wiąże się z portem w adresie URL dla wszystkich adresów IP maszyny.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-135">By default, the HTTP Server API binds to the port in the URL for all of the IP addresses of the machine.</span></span> <span data-ttu-id="6d1d4-136">Występuje konflikt, jeśli aplikacja, która nie korzysta z interfejsu API serwera HTTP, została wcześniej powiązana z tą kombinacją adresu IP i portu.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-136">A conflict arises if an application that doesn't use the HTTP Server API has previously bound to that combination of IP address and port.</span></span> <span data-ttu-id="6d1d4-137">Lista nasłuchiwania adresów IP pozwala usługom WCF współistnieć z aplikacjami, które używają portu dla niektórych adresów IP maszyny.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-137">The IP Listen List allows WCF services to coexist with applications that use a port for some of the IP addresses of the machine.</span></span> <span data-ttu-id="6d1d4-138">Jeśli lista nasłuchu IP zawiera jakieś wpisy, interfejs API serwera HTTP tworzy powiązanie tylko z tymi adresami IP, które określa lista.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-138">If the IP Listen List contains any entries, the HTTP Server API only binds to those IP addresses that the list specifies.</span></span> <span data-ttu-id="6d1d4-139">Modyfikowanie listy nasłuchiwania adresów IP wymaga uprawnień administracyjnych.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-139">Modifying the IP Listen List requires administrative privileges.</span></span>

<span data-ttu-id="6d1d4-140">Użyj narzędzia Netsh, aby zmodyfikować listę nasłuchiwania adresów IP, jak pokazano w następującym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="6d1d4-140">Use the netsh tool to modify the IP Listen List, as shown in the following example:</span></span>

```console
netsh http add iplisten ipaddress=0.0.0.0:8000
```

## <a name="other-configuration-settings"></a><span data-ttu-id="6d1d4-141">Inne ustawienia konfiguracji</span><span class="sxs-lookup"><span data-stu-id="6d1d4-141">Other configuration settings</span></span>

<span data-ttu-id="6d1d4-142">W przypadku korzystania z <xref:System.ServiceModel.WSDualHttpBinding>połączenie klienta wykorzystuje wartości domyślne, które są zgodne z rezerwacjami przestrzeni nazw i Zaporą systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-142">When using <xref:System.ServiceModel.WSDualHttpBinding>, the client connection uses defaults that are compatible with namespace reservations and the Windows firewall.</span></span> <span data-ttu-id="6d1d4-143">W przypadku wybrania opcji dostosowania adresu podstawowego klienta podwójnego połączenia należy również skonfigurować te ustawienia protokołu HTTP na kliencie, aby odpowiadały nowemu adresowi.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-143">If you choose to customize the client base address of a dual connection, then you also must configure these HTTP settings on the client to match the new address.</span></span>

<span data-ttu-id="6d1d4-144">Interfejs API serwera HTTP zawiera niektóre zaawansowane ustawienia konfiguracji, które nie są dostępne za pośrednictwem usługi HttpCfg.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-144">The HTTP Server API has some advanced configuration settings that aren't available through HttpCfg.</span></span> <span data-ttu-id="6d1d4-145">Te ustawienia są przechowywane w rejestrze i stosowane do wszystkich aplikacji działających w systemach, które używają interfejsów API serwera HTTP.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-145">These settings are maintained in the registry and apply to all applications running on the systems that use the HTTP Server APIs.</span></span> <span data-ttu-id="6d1d4-146">Aby uzyskać informacje na temat tych ustawień, zobacz [Ustawienia rejestru http. sys dla usług IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span><span class="sxs-lookup"><span data-stu-id="6d1d4-146">For information about these settings, see [Http.sys registry settings for IIS](https://support.microsoft.com/help/820129/http-sys-registry-settings-for-windows).</span></span> <span data-ttu-id="6d1d4-147">Większość użytkowników nie musi zmieniać tych ustawień.</span><span class="sxs-lookup"><span data-stu-id="6d1d4-147">Most users don't need to change these settings.</span></span>

## <a name="see-also"></a><span data-ttu-id="6d1d4-148">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="6d1d4-148">See also</span></span>

- <xref:System.ServiceModel.WSDualHttpBinding>
- [<span data-ttu-id="6d1d4-149">Instrukcje: konfigurowanie portu z certyfikatem SSL</span><span class="sxs-lookup"><span data-stu-id="6d1d4-149">How to: Configure a Port with an SSL Certificate</span></span>](how-to-configure-a-port-with-an-ssl-certificate.md)
