---
title: Wybieranie typu poświadczeń
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: 20c070e9351219a649735ac404231cf6f265d814
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/28/2019
ms.locfileid: "64586128"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="0580a-102">Wybieranie typu poświadczeń</span><span class="sxs-lookup"><span data-stu-id="0580a-102">Selecting a Credential Type</span></span>
<span data-ttu-id="0580a-103">*Poświadczenia* jest Windows Communication Foundation (WCF) używanych do ustalenia tożsamości lub możliwości danych.</span><span class="sxs-lookup"><span data-stu-id="0580a-103">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="0580a-104">Na przykład usługi passport jest poświadczeń, przez Rząd potwierdzenie zaawansowanych możliwości dostępnych w kraju lub regionie.</span><span class="sxs-lookup"><span data-stu-id="0580a-104">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="0580a-105">W programie WCF poświadczenia mogą mieć wiele form, takich jak tokeny nazwy użytkownika i certyfikaty X.509.</span><span class="sxs-lookup"><span data-stu-id="0580a-105">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="0580a-106">W tym temacie omówiono poświadczenia, jak są używane w programie WCF i jak wybierać odpowiednie poświadczenia dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0580a-106">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="0580a-107">W wielu krajach i regionach prawa jazdy jest przykładem poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="0580a-107">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="0580a-108">Licencja zawiera dane, które reprezentuje tożsamość osoby i możliwości.</span><span class="sxs-lookup"><span data-stu-id="0580a-108">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="0580a-109">Zawiera ono dowód przesyłany w postaci obrazu inicjator.</span><span class="sxs-lookup"><span data-stu-id="0580a-109">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="0580a-110">Licencja jest wystawiony przez zaufany urząd, zwykle rządowych działu licencjonowania.</span><span class="sxs-lookup"><span data-stu-id="0580a-110">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="0580a-111">Licencja jest zapieczętowany i może zawierać hologram, pokazujący, że nie został zmodyfikowany lub podrobić.</span><span class="sxs-lookup"><span data-stu-id="0580a-111">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="0580a-112">Umożliwienie korzystania z poświadczeń obejmuje prezentowanie danych i dowodu posiadania danych.</span><span class="sxs-lookup"><span data-stu-id="0580a-112">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="0580a-113">Usługi WCF obsługuje różne typy poświadczeń na poziomach zabezpieczeń transportu i komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0580a-113">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="0580a-114">Na przykład, należy wziąć pod uwagę dwa typy obsługiwanych w programie WCF poświadczeń: nazwa użytkownika oraz (X.509) certyfikatu poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-114">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="0580a-115">Poświadczenie nazwy użytkownika, aby uzyskać nazwę użytkownika reprezentuje tożsamości, a hasło zawiera dowodu posiadania.</span><span class="sxs-lookup"><span data-stu-id="0580a-115">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="0580a-116">Zaufany urząd w tym przypadku to system, który sprawdza poprawność nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="0580a-116">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="0580a-117">Przy użyciu poświadczeń certyfikatu X.509, nazwa podmiotu i alternatywna nazwa podmiotu określonych pól w ramach certyfikatu może służyć jako oświadczenia tożsamości podczas inne pola, takie jak `Valid From` i `Valid To` pola, określają ważności certyfikat.</span><span class="sxs-lookup"><span data-stu-id="0580a-117">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="0580a-118">Typy poświadczeń transportu</span><span class="sxs-lookup"><span data-stu-id="0580a-118">Transport Credential Types</span></span>  
 <span data-ttu-id="0580a-119">W poniższej tabeli przedstawiono typy poświadczeń klienta, które mogą być używane przez powiązanie w tryb zabezpieczeń transport.</span><span class="sxs-lookup"><span data-stu-id="0580a-119">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="0580a-120">Podczas tworzenia usługi, ustaw `ClientCredentialType` właściwości do jednej z tych wartości, aby określić typ poświadczeń, które klient musi podać do komunikowania się z Twoją usługą.</span><span class="sxs-lookup"><span data-stu-id="0580a-120">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="0580a-121">Możesz ustawić typy w plikach kodu lub konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0580a-121">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="0580a-122">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="0580a-122">Setting</span></span>|<span data-ttu-id="0580a-123">Opis</span><span class="sxs-lookup"><span data-stu-id="0580a-123">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="0580a-124">Brak</span><span class="sxs-lookup"><span data-stu-id="0580a-124">None</span></span>|<span data-ttu-id="0580a-125">Określa, klient musi przedstawić żadnych poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-125">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="0580a-126">Przekłada się to anonimowym klientem.</span><span class="sxs-lookup"><span data-stu-id="0580a-126">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="0580a-127">Podstawowy</span><span class="sxs-lookup"><span data-stu-id="0580a-127">Basic</span></span>|<span data-ttu-id="0580a-128">Określa uwierzytelnianie podstawowe dla klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-128">Specifies basic authentication for the client.</span></span> <span data-ttu-id="0580a-129">Aby uzyskać więcej informacji, zobacz RFC2617 —[uwierzytelnianie HTTP: Podstawowe i uwierzytelnianie szyfrowane](https://go.microsoft.com/fwlink/?LinkID=88313).</span><span class="sxs-lookup"><span data-stu-id="0580a-129">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](https://go.microsoft.com/fwlink/?LinkID=88313).</span></span>|  
|<span data-ttu-id="0580a-130">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="0580a-130">Digest</span></span>|<span data-ttu-id="0580a-131">Określa, uwierzytelniania szyfrowanego dla klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-131">Specifies digest authentication for the client.</span></span> <span data-ttu-id="0580a-132">Aby uzyskać więcej informacji, zobacz RFC2617 —[uwierzytelnianie HTTP: Podstawowe i uwierzytelnianie szyfrowane](https://go.microsoft.com/fwlink/?LinkID=88313).</span><span class="sxs-lookup"><span data-stu-id="0580a-132">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](https://go.microsoft.com/fwlink/?LinkID=88313).</span></span>|  
|<span data-ttu-id="0580a-133">Ntlm</span><span class="sxs-lookup"><span data-stu-id="0580a-133">Ntlm</span></span>|<span data-ttu-id="0580a-134">Określa uwierzytelniania NT LAN Manager (NTLM).</span><span class="sxs-lookup"><span data-stu-id="0580a-134">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="0580a-135">To jest używany, gdy z jakiegoś powodu nie można użyć uwierzytelniania Kerberos.</span><span class="sxs-lookup"><span data-stu-id="0580a-135">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="0580a-136">Można również wyłączyć, ustawiając jako rezerwowe <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> właściwości `false`, co powoduje, że WCF umożliwiają staranności do zgłoszenia wyjątku, jeśli używane jest uwierzytelnianie NTLM.</span><span class="sxs-lookup"><span data-stu-id="0580a-136">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="0580a-137">Należy pamiętać, że ustawienie tej właściwości na `false` może uniemożliwia poświadczeń NTLM są przesyłane przez sieć.</span><span class="sxs-lookup"><span data-stu-id="0580a-137">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="0580a-138">Windows</span><span class="sxs-lookup"><span data-stu-id="0580a-138">Windows</span></span>|<span data-ttu-id="0580a-139">Określa uwierzytelniania Windows.</span><span class="sxs-lookup"><span data-stu-id="0580a-139">Specifies Windows authentication.</span></span> <span data-ttu-id="0580a-140">Aby określić protokołu Kerberos w domenie Windows, należy ustawić <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> właściwości `false` (wartość domyślna to `true`).</span><span class="sxs-lookup"><span data-stu-id="0580a-140">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="0580a-141">Certyfikat</span><span class="sxs-lookup"><span data-stu-id="0580a-141">Certificate</span></span>|<span data-ttu-id="0580a-142">Wykonuje uwierzytelnianie klienta przy użyciu certyfikatu X.509.</span><span class="sxs-lookup"><span data-stu-id="0580a-142">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="0580a-143">Hasło</span><span class="sxs-lookup"><span data-stu-id="0580a-143">Password</span></span>|<span data-ttu-id="0580a-144">Użytkownik musi podać nazwę użytkownika i hasło.</span><span class="sxs-lookup"><span data-stu-id="0580a-144">User must supply a user name and password.</span></span> <span data-ttu-id="0580a-145">Sprawdź poprawność pary nazwa/hasło użytkownika za pomocą uwierzytelniania Windows lub inne niestandardowe rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="0580a-145">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="0580a-146">Typy poświadczeń klienta wiadomości</span><span class="sxs-lookup"><span data-stu-id="0580a-146">Message Client Credential Types</span></span>  
 <span data-ttu-id="0580a-147">W poniższej tabeli przedstawiono typy możliwe poświadczeń, których można używać podczas tworzenia aplikacji, która używa zabezpieczenia komunikatów.</span><span class="sxs-lookup"><span data-stu-id="0580a-147">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="0580a-148">Te wartości można użyć w plikach kodu lub konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0580a-148">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="0580a-149">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="0580a-149">Setting</span></span>|<span data-ttu-id="0580a-150">Opis</span><span class="sxs-lookup"><span data-stu-id="0580a-150">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="0580a-151">Brak</span><span class="sxs-lookup"><span data-stu-id="0580a-151">None</span></span>|<span data-ttu-id="0580a-152">Określa, że klient nie potrzebuje do przedstawienia poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-152">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="0580a-153">Przekłada się to anonimowym klientem.</span><span class="sxs-lookup"><span data-stu-id="0580a-153">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="0580a-154">Windows</span><span class="sxs-lookup"><span data-stu-id="0580a-154">Windows</span></span>|<span data-ttu-id="0580a-155">Umożliwia wymianę komunikatów SOAP występuje w kontekście zabezpieczeń, nawiązane przy użyciu poświadczeń Windows.</span><span class="sxs-lookup"><span data-stu-id="0580a-155">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="0580a-156">Nazwa użytkownika</span><span class="sxs-lookup"><span data-stu-id="0580a-156">Username</span></span>|<span data-ttu-id="0580a-157">Umożliwia usłudze wymagają uwierzytelnienia klienta za pomocą poświadczenie nazwy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0580a-157">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="0580a-158">Należy pamiętać, usługi WCF nie zezwala na wszystkie operacje kryptograficzne przy użyciu nazwy użytkownika, takie jak generowania podpisu i szyfrowania danych.</span><span class="sxs-lookup"><span data-stu-id="0580a-158">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="0580a-159">Usługi WCF zapewnia, że transportu jest zabezpieczony przy użyciu poświadczeń nazwy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0580a-159">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="0580a-160">Certyfikat</span><span class="sxs-lookup"><span data-stu-id="0580a-160">Certificate</span></span>|<span data-ttu-id="0580a-161">Umożliwia usłudze wymagają który uwierzytelnienia klienta za pomocą certyfikatu X.509.</span><span class="sxs-lookup"><span data-stu-id="0580a-161">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="0580a-162">Wystawiony Token</span><span class="sxs-lookup"><span data-stu-id="0580a-162">Issued Token</span></span>|<span data-ttu-id="0580a-163">Niestandardowy typ tokenu skonfigurowane zgodnie z zasadami zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-163">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="0580a-164">Domyślny typ tokenu jest zabezpieczeń potwierdzenia Markup Language (SAML).</span><span class="sxs-lookup"><span data-stu-id="0580a-164">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="0580a-165">Token wystawiony przez usługa bezpiecznych tokenów.</span><span class="sxs-lookup"><span data-stu-id="0580a-165">The token is issued by a secure token service.</span></span> <span data-ttu-id="0580a-166">Aby uzyskać więcej informacji, zobacz [Federacja i wystawione tokeny](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="0580a-166">For more information, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="0580a-167">Model negocjowania poświadczeń usługi</span><span class="sxs-lookup"><span data-stu-id="0580a-167">Negotiation Model of Service Credentials</span></span>  
 <span data-ttu-id="0580a-168">*Negocjowanie* polega na ustanawianie relacji zaufania między klientem a usługą przez wymianę poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-168">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="0580a-169">Ten proces odbywa się interakcyjnie między klientem a service, tak, aby ujawnić tylko informacje niezbędne do następnego kroku w procesie negocjacji.</span><span class="sxs-lookup"><span data-stu-id="0580a-169">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="0580a-170">W praktyce efekt jest dostarczenie poświadczeń usługi do klienta, który ma być używany podczas kolejnych operacji.</span><span class="sxs-lookup"><span data-stu-id="0580a-170">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="0580a-171">Z jednym wyjątkiem domyślnie powiązania dostarczane przez system w usłudze WCF negocjowania poświadczeń usługi automatycznie przy użyciu zabezpieczeń na poziomie komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0580a-171">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="0580a-172">(Wyjątek stanowi <xref:System.ServiceModel.BasicHttpBinding>, który nie obsługuje zabezpieczeń domyślnie.) Aby wyłączyć to zachowanie, zobacz <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> i <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="0580a-172">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0580a-173">Stosowania zabezpieczeń SSL za pomocą programu .NET Framework 3.5 lub nowszy klient WCF używa zarówno certyfikaty pośrednie w magazynie certyfikatów i certyfikaty pośrednie odebranych podczas negocjacji w protokole SSL podczas weryfikacji łańcucha certyfikatu usługi certyfikat.</span><span class="sxs-lookup"><span data-stu-id="0580a-173">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="0580a-174">.NET framework 3.0 używa tylko certyfikaty pośrednie zainstalowany w lokalnym magazynie certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="0580a-174">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="0580a-175">Negocjowanie poza pasmem</span><span class="sxs-lookup"><span data-stu-id="0580a-175">Out-of-Band Negotiation</span></span>  
 <span data-ttu-id="0580a-176">Po wyłączeniu automatycznego negocjowania poświadczeń usługi musi być obsługiwana po stronie klienta przed wysłaniem komunikatów do usługi.</span><span class="sxs-lookup"><span data-stu-id="0580a-176">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="0580a-177">Jest to nazywane również *out-of-band* inicjowania obsługi administracyjnej.</span><span class="sxs-lookup"><span data-stu-id="0580a-177">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="0580a-178">Na przykład określony typ poświadczeń jest to certyfikat, i automatyczne negocjowanie jest wyłączone, klient powinni skontaktować się ze Właściciel usługi do odbierania i zainstaluj certyfikat na komputerze z uruchomioną aplikacją klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-178">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="0580a-179">Można to zrobić, na przykład, jeśli chcesz ściśle kontrolować, którzy klienci uzyskaniem dostępu do usług w ramach scenariusza business-to-business.</span><span class="sxs-lookup"><span data-stu-id="0580a-179">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="0580a-180">Ten limit z — poza pasmem negocjacja może odbywać się w wiadomości e-mail, a certyfikat X.509 jest przechowywany w magazynie certyfikatów Windows, za pomocą narzędzia takiego jak przystawki Certyfikaty programu Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="0580a-180">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0580a-181"><xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> Właściwość jest używana do świadczenia usług przy użyciu certyfikatu, który został osiągnięty przy użyciu negocjacji poza pasmem.</span><span class="sxs-lookup"><span data-stu-id="0580a-181">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="0580a-182">Jest to konieczne, korzystając z <xref:System.ServiceModel.BasicHttpBinding> klasy, ponieważ powiązanie nie zezwala na automatyczne negocjacji.</span><span class="sxs-lookup"><span data-stu-id="0580a-182">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="0580a-183">Jest również używana w scenariuszu nieskorelowane dwukierunkowego.</span><span class="sxs-lookup"><span data-stu-id="0580a-183">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="0580a-184">Jest to scenariusz, w której serwer wysyła wiadomość do klienta bez konieczności klienta najpierw wysyłać żądania do serwera.</span><span class="sxs-lookup"><span data-stu-id="0580a-184">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="0580a-185">Ponieważ serwer nie ma żądania od klienta, ona używać certyfikat klienta do szyfrowania wiadomości do klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-185">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="0580a-186">Ustawienie wartości poświadczeń</span><span class="sxs-lookup"><span data-stu-id="0580a-186">Setting Credential Values</span></span>  
 <span data-ttu-id="0580a-187">Po wybraniu tryb zabezpieczeń, należy określić rzeczywisty poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-187">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="0580a-188">Na przykład jeśli typ poświadczeń jest ustawiony na "certyfikatu", następnie należy skojarzyć poświadczenie (na przykład określonego certyfikatu X.509) przy użyciu usługi lub klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-188">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="0580a-189">W zależności od tego, czy programujesz, usługi lub klienta metoda do ustawiania wartości poświadczenie różni się nieco.</span><span class="sxs-lookup"><span data-stu-id="0580a-189">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="0580a-190">Ustawienie poświadczeń usługi</span><span class="sxs-lookup"><span data-stu-id="0580a-190">Setting Service Credentials</span></span>  
 <span data-ttu-id="0580a-191">Jeśli używasz trybu transportu i korzystania z protokołu HTTP jako transportu, możesz użyć albo Internet Information Services (IIS), lub konfigurowanie portu z certyfikatem.</span><span class="sxs-lookup"><span data-stu-id="0580a-191">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="0580a-192">Aby uzyskać więcej informacji, zobacz [Przegląd zabezpieczeń transportu](../../../../docs/framework/wcf/feature-details/transport-security-overview.md) i [zabezpieczenia transportu HTTP](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="0580a-192">For more information, see [Transport Security Overview](../../../../docs/framework/wcf/feature-details/transport-security-overview.md) and [HTTP Transport Security](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span></span>  
  
 <span data-ttu-id="0580a-193">Aby udostępnić usługę przy użyciu poświadczeń w kodzie, Utwórz wystąpienie obiektu <xref:System.ServiceModel.ServiceHost> klasy i określ odpowiednie poświadczenia, za pomocą <xref:System.ServiceModel.Description.ServiceCredentials> klasy, dostępne za pośrednictwem <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="0580a-193">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="0580a-194">Ustawienia certyfikatu</span><span class="sxs-lookup"><span data-stu-id="0580a-194">Setting a Certificate</span></span>  
 <span data-ttu-id="0580a-195">Aby zainicjować obsługę usługi za pomocą certyfikatu X.509, który ma być używany do uwierzytelniania usługi dla klientów, należy użyć <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> metody <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> klasy.</span><span class="sxs-lookup"><span data-stu-id="0580a-195">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="0580a-196">Aby zainicjować obsługę usługi za pomocą certyfikatu klienta, należy użyć <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> metody <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> klasy.</span><span class="sxs-lookup"><span data-stu-id="0580a-196">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="0580a-197">Ustawianie poświadczeń Windows</span><span class="sxs-lookup"><span data-stu-id="0580a-197">Setting Windows Credentials</span></span>  
 <span data-ttu-id="0580a-198">Jeśli klient określa prawidłową nazwę użytkownika i hasło, że poświadczenie jest używane do uwierzytelniania klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-198">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="0580a-199">W przeciwnym razie używane są poświadczenia bieżącego zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0580a-199">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="0580a-200">Ustawianie poświadczeń klienta</span><span class="sxs-lookup"><span data-stu-id="0580a-200">Setting Client Credentials</span></span>  
 <span data-ttu-id="0580a-201">W programie WCF aplikacji klienckich, należy użyć klienta programu WCF łączenie się z usługami.</span><span class="sxs-lookup"><span data-stu-id="0580a-201">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="0580a-202">Każdy klient pochodzi z <xref:System.ServiceModel.ClientBase%601> klasy, a <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> właściwości na komputerze klienckim umożliwia określenie różnych wartości poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-202">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="0580a-203">Ustawienia certyfikatu</span><span class="sxs-lookup"><span data-stu-id="0580a-203">Setting a Certificate</span></span>  
 <span data-ttu-id="0580a-204">Aby zainicjować obsługę usługi za pomocą certyfikatu X.509, który jest używany do uwierzytelniania klienta do usługi, należy użyć <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> metody <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> klasy.</span><span class="sxs-lookup"><span data-stu-id="0580a-204">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="0580a-205">Sposób używania poświadczeń klienta do uwierzytelniania klienta do usługi</span><span class="sxs-lookup"><span data-stu-id="0580a-205">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  
 <span data-ttu-id="0580a-206">Wymagany do komunikowania się z usługą informacji o poświadczeniach klienta znajduje się za pomocą <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> właściwości lub <xref:System.ServiceModel.ChannelFactory.Credentials%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="0580a-206">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="0580a-207">Kanał zabezpieczeń używa tych informacji do uwierzytelniania klienta do usługi.</span><span class="sxs-lookup"><span data-stu-id="0580a-207">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="0580a-208">Uwierzytelnianie odbywa się za pomocą jednego z dwóch trybów:</span><span class="sxs-lookup"><span data-stu-id="0580a-208">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="0580a-209">Poświadczenia klienta są używane raz przed wysłaniem pierwszy komunikat przy użyciu wystąpienia klienta programu WCF do ustanawiania kontekstu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-209">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="0580a-210">Wszystkie komunikaty aplikacji są następnie zabezpieczone za pomocą kontekstu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="0580a-210">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="0580a-211">Poświadczenia klienta są używane do uwierzytelniania każdego komunikatu aplikacji wysyłane do usługi.</span><span class="sxs-lookup"><span data-stu-id="0580a-211">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="0580a-212">W tym przypadku kontekst nie zostanie nawiązane między klientem a usługą.</span><span class="sxs-lookup"><span data-stu-id="0580a-212">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="0580a-213">Nie można zmienić tożsamości ustalonych</span><span class="sxs-lookup"><span data-stu-id="0580a-213">Established Identities Cannot Be Changed</span></span>  
 <span data-ttu-id="0580a-214">W przypadku pierwszej metody ustanowionych kontekst jest stałe skojarzone z tożsamością klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-214">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="0580a-215">Oznacza to, że po ustanowieniu kontekstu zabezpieczeń, nie można zmienić na tożsamość skojarzoną z klienta.</span><span class="sxs-lookup"><span data-stu-id="0580a-215">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="0580a-216">Istnieje sytuacja, aby wiedzieć, kiedy nie mogą być przełączane tożsamości (oznacza to, kiedy ustanowienia zabezpieczeń kontekstu jest włączona, domyślne zachowanie).</span><span class="sxs-lookup"><span data-stu-id="0580a-216">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="0580a-217">Jeśli tworzysz to usługa, która komunikuje się z usługą drugi, nie można zmienić tożsamości używany do otwierania klienta platformy WCF do drugiego usługi.</span><span class="sxs-lookup"><span data-stu-id="0580a-217">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="0580a-218">Ten staje się problemem, jeśli wielu klientów mogą korzystać z pierwszej usługi i usługa personifikuje klientów podczas uzyskiwania dostępu do drugiego usługi.</span><span class="sxs-lookup"><span data-stu-id="0580a-218">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="0580a-219">Jeśli usługa używa tego samego klienta dla wszystkich obiektów wywołujących, wszystkie wywołania do drugiego usługi są wykonywane z tożsamością pierwszy obiekt wywołujący, który został użyty do otwierania klienta do drugiego usługi.</span><span class="sxs-lookup"><span data-stu-id="0580a-219">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="0580a-220">Innymi słowy usługa korzysta z tożsamości pierwszy klient dla swoich klientów do komunikacji z usługą drugiego.</span><span class="sxs-lookup"><span data-stu-id="0580a-220">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="0580a-221">Może to prowadzić do podniesienia uprawnień.</span><span class="sxs-lookup"><span data-stu-id="0580a-221">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="0580a-222">Jeśli nie jest to zachowanie usługi, należy śledzić każdy obiekt wywołujący i tworzenia nowego klienta do drugiego usługi co różne obiektu wywołującego i upewnij się, że usługa używa tylko odpowiednie klienta do obiektu wywołującego w prawo do komunikacji z usługą drugi.</span><span class="sxs-lookup"><span data-stu-id="0580a-222">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="0580a-223">Aby uzyskać więcej informacji na temat poświadczeń i bezpieczne sesje, zobacz [zagadnienia dotyczące zabezpieczeń bezpiecznych sesji](../../../../docs/framework/wcf/feature-details/security-considerations-for-secure-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="0580a-223">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](../../../../docs/framework/wcf/feature-details/security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0580a-224">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="0580a-224">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="0580a-225">Pojęcia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="0580a-225">Security Concepts</span></span>](../../../../docs/framework/wcf/feature-details/security-concepts.md)
- [<span data-ttu-id="0580a-226">Zabezpieczanie usług i klientów</span><span class="sxs-lookup"><span data-stu-id="0580a-226">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
- [<span data-ttu-id="0580a-227">Programowanie zabezpieczeń WCF</span><span class="sxs-lookup"><span data-stu-id="0580a-227">Programming WCF Security</span></span>](../../../../docs/framework/wcf/feature-details/programming-wcf-security.md)
- [<span data-ttu-id="0580a-228">Zabezpieczenia transportu HTTP</span><span class="sxs-lookup"><span data-stu-id="0580a-228">HTTP Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/http-transport-security.md)
