---
title: Wybieranie typu poświadczeń
ms.date: 03/30/2017
ms.assetid: bf707063-3f30-4304-ab53-0e63413728a8
ms.openlocfilehash: 6737f7daeb37e2e296ca0429d73b963743c409a2
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/24/2020
ms.locfileid: "76746143"
---
# <a name="selecting-a-credential-type"></a><span data-ttu-id="288cb-102">Wybieranie typu poświadczeń</span><span class="sxs-lookup"><span data-stu-id="288cb-102">Selecting a Credential Type</span></span>
<span data-ttu-id="288cb-103">*Poświadczenia* to Windows Communication Foundation danych (WCF) służących do ustanowienia zatwierdzono tożsamości lub możliwości.</span><span class="sxs-lookup"><span data-stu-id="288cb-103">*Credentials* are the data Windows Communication Foundation (WCF) uses to establish either a claimed identity or capabilities.</span></span> <span data-ttu-id="288cb-104">Na przykład usługa Passport jest poświadczeniem instytucji rządowych, aby potwierdzić obywatelstwo w kraju lub regionie.</span><span class="sxs-lookup"><span data-stu-id="288cb-104">For example, a passport is a credential a government issues to prove citizenship in a country or region.</span></span> <span data-ttu-id="288cb-105">W programie WCF poświadczenia mogą przyjmować wiele form, takich jak tokeny nazw użytkowników i certyfikaty X. 509.</span><span class="sxs-lookup"><span data-stu-id="288cb-105">In WCF, credentials can take many forms, such as user name tokens and X.509 certificates.</span></span> <span data-ttu-id="288cb-106">W tym temacie omówiono poświadczenia, sposób ich używania w programie WCF oraz sposób wybierania odpowiednich poświadczeń dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="288cb-106">This topic discusses credentials, how they are used in WCF, and how to select the right credential for your application.</span></span>  
  
 <span data-ttu-id="288cb-107">W wielu krajach i regionach licencja sterownika jest przykładem poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="288cb-107">In many countries and regions, a driver’s license is an example of a credential.</span></span> <span data-ttu-id="288cb-108">Licencja zawiera dane reprezentujące tożsamość i możliwości osoby.</span><span class="sxs-lookup"><span data-stu-id="288cb-108">A license contains data that represents a person's identity and capabilities.</span></span> <span data-ttu-id="288cb-109">Zawiera dowód posiadania w postaci obrazu posiadacza.</span><span class="sxs-lookup"><span data-stu-id="288cb-109">It contains proof of possession in the form of the possessor's picture.</span></span> <span data-ttu-id="288cb-110">Licencja jest wystawiana przez zaufany urząd, zazwyczaj przez rządową Departament licencjonowania.</span><span class="sxs-lookup"><span data-stu-id="288cb-110">The license is issued by a trusted authority, usually a governmental department of licensing.</span></span> <span data-ttu-id="288cb-111">Licencja jest zapieczętowana i może zawierać hologram, co oznacza, że nie została naruszona ani sfałszowana.</span><span class="sxs-lookup"><span data-stu-id="288cb-111">The license is sealed, and can contain a hologram, showing that it has not been tampered with or counterfeited.</span></span>  
  
 <span data-ttu-id="288cb-112">Przedstawienie poświadczeń obejmuje przedstawienie danych i potwierdzenie posiadania danych.</span><span class="sxs-lookup"><span data-stu-id="288cb-112">Presenting a credential involves presenting both the data and proof of possession of the data.</span></span> <span data-ttu-id="288cb-113">Usługa WCF obsługuje różne typy poświadczeń zarówno na poziomie zabezpieczeń transportu, jak i komunikatów.</span><span class="sxs-lookup"><span data-stu-id="288cb-113">WCF supports a variety of credential types at both the transport and message security levels.</span></span> <span data-ttu-id="288cb-114">Rozważmy na przykład dwa typy poświadczeń obsługiwane w programie WCF: Nazwa użytkownika i (X. 509) poświadczenia certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="288cb-114">For example, consider two types of credentials supported in WCF: user name and (X.509) certificate credentials.</span></span>  
  
 <span data-ttu-id="288cb-115">W przypadku poświadczenia nazwy użytkownika nazwa użytkownika reprezentuje zażądaną tożsamość, a hasło zapewnia dowód posiadania.</span><span class="sxs-lookup"><span data-stu-id="288cb-115">For the user name credential, the user name represents the claimed identity and the password provides proof of possession.</span></span> <span data-ttu-id="288cb-116">W tym przypadku zaufany urząd sprawdza poprawność nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="288cb-116">The trusted authority in this case is the system that validates the user name and password.</span></span>  
  
 <span data-ttu-id="288cb-117">Za pomocą poświadczeń certyfikatu X. 509 nazwa podmiotu, alternatywna nazwa podmiotu lub określone pola w ramach certyfikatu mogą być używane jako oświadczenia tożsamości, natomiast inne pola, takie jak `Valid From` i `Valid To`, określają ważność certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="288cb-117">With an X.509 certificate credential, the subject name, subject alternative name or specific fields within the certificate can be used as claims of identity, while other fields, such as the `Valid From` and `Valid To` fields, specify the validity of the certificate.</span></span>  
  
## <a name="transport-credential-types"></a><span data-ttu-id="288cb-118">Typy poświadczeń transportu</span><span class="sxs-lookup"><span data-stu-id="288cb-118">Transport Credential Types</span></span>  
 <span data-ttu-id="288cb-119">W poniższej tabeli przedstawiono możliwe typy poświadczeń klienta, które mogą być używane przez powiązanie w trybie zabezpieczenia transportu.</span><span class="sxs-lookup"><span data-stu-id="288cb-119">The following table shows the possible types of client credentials that can be used by a binding in transport security mode.</span></span> <span data-ttu-id="288cb-120">Podczas tworzenia usługi ustaw właściwość `ClientCredentialType` na jedną z tych wartości, aby określić typ poświadczenia, które klient musi podać, aby komunikować się z usługą.</span><span class="sxs-lookup"><span data-stu-id="288cb-120">When creating a service, set the `ClientCredentialType` property to one of these values to specify the type of credential that the client must supply to communicate with your service.</span></span> <span data-ttu-id="288cb-121">Można ustawić typy w plikach kodu lub konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="288cb-121">You can set the types in either code or configuration files.</span></span>  
  
|<span data-ttu-id="288cb-122">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="288cb-122">Setting</span></span>|<span data-ttu-id="288cb-123">Opis</span><span class="sxs-lookup"><span data-stu-id="288cb-123">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="288cb-124">Brak</span><span class="sxs-lookup"><span data-stu-id="288cb-124">None</span></span>|<span data-ttu-id="288cb-125">Określa, że klient nie musi zaprezentować żadnego poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="288cb-125">Specifies that the client does not need to present any credential.</span></span> <span data-ttu-id="288cb-126">Powoduje to przetłumaczenie na klienta anonimowego.</span><span class="sxs-lookup"><span data-stu-id="288cb-126">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="288cb-127">Podstawowy</span><span class="sxs-lookup"><span data-stu-id="288cb-127">Basic</span></span>|<span data-ttu-id="288cb-128">Określa podstawowe uwierzytelnianie klienta.</span><span class="sxs-lookup"><span data-stu-id="288cb-128">Specifies basic authentication for the client.</span></span> <span data-ttu-id="288cb-129">Aby uzyskać dodatkowe informacje, zobacz RFC2617 — uwierzytelnianie[http: uwierzytelnianie podstawowe i szyfrowane](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="288cb-129">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="288cb-130">Szyfrowane</span><span class="sxs-lookup"><span data-stu-id="288cb-130">Digest</span></span>|<span data-ttu-id="288cb-131">Określa uwierzytelnianie szyfrowane dla klienta.</span><span class="sxs-lookup"><span data-stu-id="288cb-131">Specifies digest authentication for the client.</span></span> <span data-ttu-id="288cb-132">Aby uzyskać dodatkowe informacje, zobacz RFC2617 — uwierzytelnianie[http: uwierzytelnianie podstawowe i szyfrowane](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span><span class="sxs-lookup"><span data-stu-id="288cb-132">For additional information, see RFC2617—[HTTP Authentication: Basic and Digest Authentication](ftp://ftp.rfc-editor.org/in-notes/rfc2617.txt).</span></span>|  
|<span data-ttu-id="288cb-133">NTLM</span><span class="sxs-lookup"><span data-stu-id="288cb-133">Ntlm</span></span>|<span data-ttu-id="288cb-134">Określa uwierzytelnianie NT LAN Manager (NTLM).</span><span class="sxs-lookup"><span data-stu-id="288cb-134">Specifies NT LAN Manager (NTLM) authentication.</span></span> <span data-ttu-id="288cb-135">Jest on używany, jeśli z jakiegoś powodu nie można użyć uwierzytelniania Kerberos.</span><span class="sxs-lookup"><span data-stu-id="288cb-135">This is used when you cannot use Kerberos authentication for some reason.</span></span> <span data-ttu-id="288cb-136">Możesz również wyłączyć jego użycie jako rezerwę, ustawiając właściwość <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> na `false`, co powoduje, że program WCF będzie najlepszym nakładem na zgłoszenie wyjątku w przypadku użycia protokołu NTLM.</span><span class="sxs-lookup"><span data-stu-id="288cb-136">You can also disable its use as a fallback by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`, which causes WCF to make a best-effort to throw an exception if NTLM is used.</span></span> <span data-ttu-id="288cb-137">Należy pamiętać, że ustawienie tej właściwości na `false` może nie uniemożliwiać wysyłania poświadczeń NTLM za pośrednictwem sieci.</span><span class="sxs-lookup"><span data-stu-id="288cb-137">Note that setting this property to `false` may not prevent NTLM credentials from being sent over the wire.</span></span>|  
|<span data-ttu-id="288cb-138">Windows</span><span class="sxs-lookup"><span data-stu-id="288cb-138">Windows</span></span>|<span data-ttu-id="288cb-139">Określa uwierzytelnianie systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="288cb-139">Specifies Windows authentication.</span></span> <span data-ttu-id="288cb-140">Aby określić tylko protokół Kerberos w domenie systemu Windows, ustaw właściwość <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> na `false` (wartość domyślna to `true`).</span><span class="sxs-lookup"><span data-stu-id="288cb-140">To specify only the Kerberos protocol on a Windows domain, set the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false` (the default is `true`).</span></span>|  
|<span data-ttu-id="288cb-141">Certyfikat</span><span class="sxs-lookup"><span data-stu-id="288cb-141">Certificate</span></span>|<span data-ttu-id="288cb-142">Wykonuje uwierzytelnianie klienta przy użyciu certyfikatu X. 509.</span><span class="sxs-lookup"><span data-stu-id="288cb-142">Performs client authentication using an X.509 certificate.</span></span>|  
|<span data-ttu-id="288cb-143">Hasło</span><span class="sxs-lookup"><span data-stu-id="288cb-143">Password</span></span>|<span data-ttu-id="288cb-144">Użytkownik musi podać nazwę użytkownika i hasło.</span><span class="sxs-lookup"><span data-stu-id="288cb-144">User must supply a user name and password.</span></span> <span data-ttu-id="288cb-145">Sprawdź poprawność pary nazwa użytkownika/hasło przy użyciu uwierzytelniania systemu Windows lub innego niestandardowego rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="288cb-145">Validate the user name/password pair using Windows authentication or another custom solution.</span></span>|  
  
### <a name="message-client-credential-types"></a><span data-ttu-id="288cb-146">Typy poświadczeń klienta wiadomości</span><span class="sxs-lookup"><span data-stu-id="288cb-146">Message Client Credential Types</span></span>  
 <span data-ttu-id="288cb-147">W poniższej tabeli przedstawiono możliwe typy poświadczeń, których można użyć podczas tworzenia aplikacji, która korzysta z zabezpieczeń komunikatów.</span><span class="sxs-lookup"><span data-stu-id="288cb-147">The following table shows the possible credential types that you can use when creating an application that uses message security.</span></span> <span data-ttu-id="288cb-148">Tych wartości można użyć w plikach kodu lub konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="288cb-148">You can use these values in either code or configuration files.</span></span>  
  
|<span data-ttu-id="288cb-149">Ustawienie</span><span class="sxs-lookup"><span data-stu-id="288cb-149">Setting</span></span>|<span data-ttu-id="288cb-150">Opis</span><span class="sxs-lookup"><span data-stu-id="288cb-150">Description</span></span>|  
|-------------|-----------------|  
|<span data-ttu-id="288cb-151">Brak</span><span class="sxs-lookup"><span data-stu-id="288cb-151">None</span></span>|<span data-ttu-id="288cb-152">Określa, że klient nie musi przedstawić poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="288cb-152">Specifies that the client does not need to present a credential.</span></span> <span data-ttu-id="288cb-153">Powoduje to przetłumaczenie na klienta anonimowego.</span><span class="sxs-lookup"><span data-stu-id="288cb-153">This translates to an anonymous client.</span></span>|  
|<span data-ttu-id="288cb-154">Windows</span><span class="sxs-lookup"><span data-stu-id="288cb-154">Windows</span></span>|<span data-ttu-id="288cb-155">Zezwala wymianie komunikatów protokołu SOAP w kontekście zabezpieczeń ustanowionym przy użyciu poświadczeń systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="288cb-155">Allows SOAP message exchanges to occur under the security context established with a Windows credential.</span></span>|  
|<span data-ttu-id="288cb-156">Nazwa użytkownika</span><span class="sxs-lookup"><span data-stu-id="288cb-156">Username</span></span>|<span data-ttu-id="288cb-157">Zezwala usłudze na wymaganie uwierzytelniania klienta przy użyciu poświadczeń nazwy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="288cb-157">Allows the service to require that the client be authenticated with a user name credential.</span></span> <span data-ttu-id="288cb-158">Należy pamiętać, że WCF nie zezwala na operacje kryptograficzne z nazwami użytkowników, takie jak generowanie podpisu lub szyfrowanie danych.</span><span class="sxs-lookup"><span data-stu-id="288cb-158">Note that WCF does not allow any cryptographic operations with user names, such as generating a signature or encrypting data.</span></span> <span data-ttu-id="288cb-159">Usługa WCF gwarantuje, że transport jest zabezpieczony przy użyciu poświadczeń nazwy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="288cb-159">WCF ensures that the transport is secured when using user name credentials.</span></span>|  
|<span data-ttu-id="288cb-160">Certyfikat</span><span class="sxs-lookup"><span data-stu-id="288cb-160">Certificate</span></span>|<span data-ttu-id="288cb-161">Zezwala usłudze na wymaganie uwierzytelniania klienta przy użyciu certyfikatu X. 509.</span><span class="sxs-lookup"><span data-stu-id="288cb-161">Allows the service to require that the client be authenticated using an X.509 certificate.</span></span>|  
|<span data-ttu-id="288cb-162">Wystawiony token</span><span class="sxs-lookup"><span data-stu-id="288cb-162">Issued Token</span></span>|<span data-ttu-id="288cb-163">Typ niestandardowego tokenu skonfigurowany zgodnie z zasadami zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="288cb-163">A custom token type configured according to a security policy.</span></span> <span data-ttu-id="288cb-164">Domyślnym typem tokenu jest język SAML (Security Assertions Markup Language).</span><span class="sxs-lookup"><span data-stu-id="288cb-164">The default token type is Security Assertions Markup Language (SAML).</span></span> <span data-ttu-id="288cb-165">Token jest wystawiony przez usługę bezpiecznego tokenu.</span><span class="sxs-lookup"><span data-stu-id="288cb-165">The token is issued by a secure token service.</span></span> <span data-ttu-id="288cb-166">Aby uzyskać więcej informacji, zobacz [federacyjne i wystawione tokeny](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="288cb-166">For more information, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>|  
  
### <a name="negotiation-model-of-service-credentials"></a><span data-ttu-id="288cb-167">Model negocjacji poświadczeń usługi</span><span class="sxs-lookup"><span data-stu-id="288cb-167">Negotiation Model of Service Credentials</span></span>  
 <span data-ttu-id="288cb-168">*Negocjowanie* to proces ustanawiania relacji zaufania między klientem a usługą przez wymianę poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="288cb-168">*Negotiation* is the process of establishing trust between a client and a service by exchanging credentials.</span></span> <span data-ttu-id="288cb-169">Proces jest wykonywany w sposób iteracyjny między klientem a usługą, dlatego w celu ujawnienia tylko informacji niezbędnych do następnego kroku procesu negocjacji.</span><span class="sxs-lookup"><span data-stu-id="288cb-169">The process is performed iteratively between the client and the service, so as to disclose only the information necessary for the next step in the negotiation process.</span></span> <span data-ttu-id="288cb-170">W rzeczywistości wynik końcowy to dostarczenie poświadczeń usługi do klienta, który będzie używany w kolejnych operacjach.</span><span class="sxs-lookup"><span data-stu-id="288cb-170">In practice, the end result is the delivery of a service's credential to the client to be used in subsequent operations.</span></span>  
  
 <span data-ttu-id="288cb-171">Z jednym wyjątkiem domyślnie powiązania udostępnione przez system w programie WCF negocjują poświadczenia usługi automatycznie w przypadku korzystania z zabezpieczeń na poziomie komunikatów.</span><span class="sxs-lookup"><span data-stu-id="288cb-171">With one exception, by default the system-provided bindings in WCF negotiate the service credential automatically when using message-level security.</span></span> <span data-ttu-id="288cb-172">(Wyjątkiem jest <xref:System.ServiceModel.BasicHttpBinding>, które domyślnie nie włącza zabezpieczeń). Aby wyłączyć to zachowanie, zobacz Właściwości <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> i <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A>.</span><span class="sxs-lookup"><span data-stu-id="288cb-172">(The exception is the <xref:System.ServiceModel.BasicHttpBinding>, which does not enable security by default.) To disable this behavior, see the <xref:System.ServiceModel.MessageSecurityOverHttp.NegotiateServiceCredential%2A> and <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> properties.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="288cb-173">Gdy zabezpieczenia SSL są używane w .NET Framework 3,5 i nowszych, klient programu WCF używa zarówno certyfikatów pośrednich w magazynie certyfikatów, jak i pośrednich certyfikatów odebranych podczas negocjowania protokołu SSL w celu przeprowadzenia walidacji łańcucha certyfikatów w usłudze certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="288cb-173">When SSL security is used with .NET Framework 3.5 and later, a WCF client uses both the intermediate certificates in its certificate store and the intermediate certificates received during SSL negotiation to perform certificate chain validation on the service's certificate.</span></span> <span data-ttu-id="288cb-174">.NET Framework 3,0 używa tylko certyfikatów pośrednich zainstalowanych w lokalnym magazynie certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="288cb-174">.NET Framework 3.0 only uses the intermediate certificates installed in the local certificate store.</span></span>  
  
#### <a name="out-of-band-negotiation"></a><span data-ttu-id="288cb-175">Negocjowanie poza pasmem</span><span class="sxs-lookup"><span data-stu-id="288cb-175">Out-of-Band Negotiation</span></span>  
 <span data-ttu-id="288cb-176">Jeśli automatyczne negocjowanie jest wyłączone, poświadczenia usługi muszą zostać wdrożone na kliencie przed wysłaniem jakichkolwiek komunikatów do usługi.</span><span class="sxs-lookup"><span data-stu-id="288cb-176">If automatic negotiation is disabled, the service credential must be provisioned at the client prior to sending any messages to the service.</span></span> <span data-ttu-id="288cb-177">Jest to również znane jako inicjowanie obsługi *poza pasmem* .</span><span class="sxs-lookup"><span data-stu-id="288cb-177">This is also known as an *out-of-band* provisioning.</span></span> <span data-ttu-id="288cb-178">Na przykład jeśli określony typ poświadczeń jest certyfikatem, a automatyczne negocjowanie jest wyłączone, klient musi skontaktować się z właścicielem usługi, aby odebrać i zainstalować certyfikat na komputerze z uruchomioną aplikacją kliencką.</span><span class="sxs-lookup"><span data-stu-id="288cb-178">For example, if the specified credential type is a certificate, and automatic negotiation is disabled, the client must contact the service owner to receive and install the certificate on the computer running the client application.</span></span> <span data-ttu-id="288cb-179">Można to zrobić na przykład wtedy, gdy użytkownik chce ściśle kontrolować, którzy klienci mogą uzyskać dostęp do usługi w scenariuszu biznesowym.</span><span class="sxs-lookup"><span data-stu-id="288cb-179">This can be done, for example, when you want to strictly control which clients can access a service in a business-to-business scenario.</span></span> <span data-ttu-id="288cb-180">Takie negocjowanie poza pasmem można wykonać w wiadomości e-mail, a certyfikat X. 509 jest przechowywany w magazynie certyfikatów systemu Windows przy użyciu narzędzia, takiego jak Przystawka Certyfikaty programu Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="288cb-180">This out-of-band-negotiation can be done in email, and the X.509 certificate is stored in Windows certificate store, using a tool such as the Microsoft Management Console (MMC) Certificates snap-in.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="288cb-181">Właściwość <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> służy do świadczenia usługi przy użyciu certyfikatu, który został osiągnięty za pomocą negocjacji poza pasmem.</span><span class="sxs-lookup"><span data-stu-id="288cb-181">The <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property is used to provide the service with a certificate that was attained through out-of-band negotiation.</span></span> <span data-ttu-id="288cb-182">Jest to konieczne w przypadku używania klasy <xref:System.ServiceModel.BasicHttpBinding>, ponieważ powiązanie nie zezwala na automatyczne negocjowanie.</span><span class="sxs-lookup"><span data-stu-id="288cb-182">This is necessary when using the <xref:System.ServiceModel.BasicHttpBinding> class because the binding does not allow automated negotiation.</span></span> <span data-ttu-id="288cb-183">Właściwość jest również używana w nieskorelowanym scenariuszu dupleksu.</span><span class="sxs-lookup"><span data-stu-id="288cb-183">The property is also used in an uncorrelated duplex scenario.</span></span> <span data-ttu-id="288cb-184">Jest to scenariusz, w którym serwer wysyła komunikat do klienta bez konieczności uprzedniego wysłania żądania do serwera.</span><span class="sxs-lookup"><span data-stu-id="288cb-184">This is a scenario where a server sends a message to the client without requiring the client to send a request to the server first.</span></span> <span data-ttu-id="288cb-185">Ponieważ serwer nie ma żądania od klienta, musi użyć certyfikatu klienta, aby zaszyfrować komunikat na kliencie.</span><span class="sxs-lookup"><span data-stu-id="288cb-185">Because the server does not have a request from the client, it must use the client's certificate to encrypt the message to the client.</span></span>  
  
## <a name="setting-credential-values"></a><span data-ttu-id="288cb-186">Ustawianie wartości poświadczeń</span><span class="sxs-lookup"><span data-stu-id="288cb-186">Setting Credential Values</span></span>  
 <span data-ttu-id="288cb-187">Po wybraniu trybu zabezpieczeń należy określić rzeczywiste poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="288cb-187">Once you select a security mode, you must specify the actual credentials.</span></span> <span data-ttu-id="288cb-188">Na przykład, jeśli typ poświadczenia ma wartość "certyfikat", należy skojarzyć określone poświadczenie (na przykład certyfikat X. 509) z usługą lub klientem.</span><span class="sxs-lookup"><span data-stu-id="288cb-188">For example, if the credential type is set to "certificate," then you must associate a specific credential (such as a specific X.509 certificate) with the service or client.</span></span>  
  
 <span data-ttu-id="288cb-189">W zależności od tego, czy program korzysta z usługi, czy klienta, metoda ustawiania wartości poświadczeń różni się nieco.</span><span class="sxs-lookup"><span data-stu-id="288cb-189">Depending on whether you are programming a service or a client, the method for setting the credential value differs slightly.</span></span>  
  
### <a name="setting-service-credentials"></a><span data-ttu-id="288cb-190">Ustawianie poświadczeń usługi</span><span class="sxs-lookup"><span data-stu-id="288cb-190">Setting Service Credentials</span></span>  
 <span data-ttu-id="288cb-191">Jeśli używasz trybu transportu i używasz protokołu HTTP jako transportu, musisz użyć obu Internet Information Services (IIS) lub skonfigurować port przy użyciu certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="288cb-191">If you are using transport mode, and you are using HTTP as the transport, you must use either Internet Information Services (IIS) or configure the port with a certificate.</span></span> <span data-ttu-id="288cb-192">Aby uzyskać więcej informacji, zobacz [Omówienie zabezpieczeń transportu](../../../../docs/framework/wcf/feature-details/transport-security-overview.md) i [zabezpieczenia transportu HTTP](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="288cb-192">For more information, see [Transport Security Overview](../../../../docs/framework/wcf/feature-details/transport-security-overview.md) and [HTTP Transport Security](../../../../docs/framework/wcf/feature-details/http-transport-security.md).</span></span>  
  
 <span data-ttu-id="288cb-193">Aby zainicjować obsługę administracyjną usługi przy użyciu poświadczeń w kodzie, Utwórz wystąpienie klasy <xref:System.ServiceModel.ServiceHost> i określ odpowiednie poświadczenie przy użyciu klasy <xref:System.ServiceModel.Description.ServiceCredentials>, dostępnym za pośrednictwem właściwości <xref:System.ServiceModel.ServiceHostBase.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="288cb-193">To provision a service with credentials in code, create an instance of the <xref:System.ServiceModel.ServiceHost> class and specify the appropriate credential using the <xref:System.ServiceModel.Description.ServiceCredentials> class, accessed through the <xref:System.ServiceModel.ServiceHostBase.Credentials%2A> property.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="288cb-194">Ustawianie certyfikatu</span><span class="sxs-lookup"><span data-stu-id="288cb-194">Setting a Certificate</span></span>  
 <span data-ttu-id="288cb-195">Aby zainicjować obsługę administracyjną usługi z certyfikatem X. 509 do użycia w celu uwierzytelnienia usługi dla klientów, użyj metody <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> klasy <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="288cb-195">To provision a service with an X.509 certificate to be used to authenticate the service to clients, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential> class.</span></span>  
  
 <span data-ttu-id="288cb-196">Aby zainicjować obsługę administracyjną usługi przy użyciu certyfikatu klienta, należy użyć metody <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> klasy <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>.</span><span class="sxs-lookup"><span data-stu-id="288cb-196">To provision a service with a client certificate, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential> class.</span></span>  
  
#### <a name="setting-windows-credentials"></a><span data-ttu-id="288cb-197">Ustawianie poświadczeń systemu Windows</span><span class="sxs-lookup"><span data-stu-id="288cb-197">Setting Windows Credentials</span></span>  
 <span data-ttu-id="288cb-198">Jeśli klient określi prawidłową nazwę użytkownika i hasło, to poświadczenie jest używane do uwierzytelniania klienta.</span><span class="sxs-lookup"><span data-stu-id="288cb-198">If the client specifies a valid user name and password, that credential is used to authenticate the client.</span></span> <span data-ttu-id="288cb-199">W przeciwnym razie używane są poświadczenia bieżącego zalogowanego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="288cb-199">Otherwise, the current logged-on user's credentials are used.</span></span>  
  
### <a name="setting-client-credentials"></a><span data-ttu-id="288cb-200">Ustawianie poświadczeń klienta</span><span class="sxs-lookup"><span data-stu-id="288cb-200">Setting Client Credentials</span></span>  
 <span data-ttu-id="288cb-201">W programie WCF aplikacje klienckie używają klienta WCF do łączenia się z usługami.</span><span class="sxs-lookup"><span data-stu-id="288cb-201">In WCF, client applications use a WCF client to connect to services.</span></span> <span data-ttu-id="288cb-202">Każdy klient pochodzi z klasy <xref:System.ServiceModel.ClientBase%601>, a właściwość <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> na kliencie umożliwia określenie różnych wartości poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="288cb-202">Every client derives from the <xref:System.ServiceModel.ClientBase%601> class, and the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property on the client allows the specification of various values of client credentials.</span></span>  
  
#### <a name="setting-a-certificate"></a><span data-ttu-id="288cb-203">Ustawianie certyfikatu</span><span class="sxs-lookup"><span data-stu-id="288cb-203">Setting a Certificate</span></span>  
 <span data-ttu-id="288cb-204">Aby zainicjować obsługę administracyjną dla usługi za pomocą certyfikatu X. 509, który jest używany do uwierzytelniania klienta w usłudze, użyj metody <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> klasy <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>.</span><span class="sxs-lookup"><span data-stu-id="288cb-204">To provision a service with an X.509 certificate that is used to authenticate the client to a service, use the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A> method of the <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential> class.</span></span>  
  
## <a name="how-client-credentials-are-used-to-authenticate-a-client-to-the-service"></a><span data-ttu-id="288cb-205">Jak poświadczenia klienta są używane do uwierzytelniania klienta w usłudze</span><span class="sxs-lookup"><span data-stu-id="288cb-205">How Client Credentials Are Used to Authenticate a Client to the Service</span></span>  
 <span data-ttu-id="288cb-206">Informacje o poświadczeniach klienta wymagane do komunikacji z usługą są udostępniane przy użyciu właściwości <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> lub właściwości <xref:System.ServiceModel.ChannelFactory.Credentials%2A>.</span><span class="sxs-lookup"><span data-stu-id="288cb-206">Client credential information required to communicate with a service is provided using either the <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A> property or the <xref:System.ServiceModel.ChannelFactory.Credentials%2A> property.</span></span> <span data-ttu-id="288cb-207">Kanał zabezpieczeń używa tych informacji do uwierzytelniania klienta w usłudze.</span><span class="sxs-lookup"><span data-stu-id="288cb-207">The security channel uses this information to authenticate the client to the service.</span></span> <span data-ttu-id="288cb-208">Uwierzytelnianie odbywa się przy użyciu jednego z dwóch trybów:</span><span class="sxs-lookup"><span data-stu-id="288cb-208">Authentication is accomplished through one of two modes:</span></span>  
  
- <span data-ttu-id="288cb-209">Poświadczenia klienta są używane raz przed wysłaniem pierwszej wiadomości, przy użyciu wystąpienia klienta programu WCF do ustanowienia kontekstu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="288cb-209">The client credentials are used once before the first message is sent, using the WCF client instance to establish a security context.</span></span> <span data-ttu-id="288cb-210">Wszystkie komunikaty aplikacji są następnie zabezpieczone za pomocą kontekstu zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="288cb-210">All application messages are then secured through the security context.</span></span>  
  
- <span data-ttu-id="288cb-211">Poświadczenia klienta służą do uwierzytelniania wszystkich komunikatów aplikacji wysyłanych do usługi.</span><span class="sxs-lookup"><span data-stu-id="288cb-211">The client credentials are used to authenticate every application message sent to the service.</span></span> <span data-ttu-id="288cb-212">W takim przypadku nie ustanowiono kontekstu między klientem a usługą.</span><span class="sxs-lookup"><span data-stu-id="288cb-212">In this case, no context is established between the client and the service.</span></span>  
  
### <a name="established-identities-cannot-be-changed"></a><span data-ttu-id="288cb-213">Nie można zmienić ustanowionych tożsamości</span><span class="sxs-lookup"><span data-stu-id="288cb-213">Established Identities Cannot Be Changed</span></span>  
 <span data-ttu-id="288cb-214">Gdy pierwsza metoda jest używana, ustanowiony kontekst jest trwale skojarzony z tożsamością klienta.</span><span class="sxs-lookup"><span data-stu-id="288cb-214">When the first method is used, the established context is permanently associated with the client identity.</span></span> <span data-ttu-id="288cb-215">Oznacza to, że po ustanowieniu kontekstu zabezpieczeń tożsamość skojarzona z klientem nie może zostać zmieniona.</span><span class="sxs-lookup"><span data-stu-id="288cb-215">That is, once the security context has been established, the identity associated with the client cannot be changed.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="288cb-216">Istnieje konieczność, aby mieć świadomość, kiedy nie można przełączyć tożsamości (to oznacza, że po włączeniu kontekstu zabezpieczeń, zachowanie domyślne).</span><span class="sxs-lookup"><span data-stu-id="288cb-216">There is a situation to be aware of when the identity cannot be switched (that is, when establish security context is on, the default behavior).</span></span> <span data-ttu-id="288cb-217">Jeśli utworzysz usługę, która komunikuje się z drugą usługą, nie można zmienić tożsamości użytej do otwarcia klienta programu WCF w drugiej usłudze.</span><span class="sxs-lookup"><span data-stu-id="288cb-217">If you create a service that communicates with a second service, the identity used to open the WCF client to the second service cannot be changed.</span></span> <span data-ttu-id="288cb-218">Jest to problem, jeśli wielu klientów może korzystać z pierwszej usługi, a usługa personifikuje klientów podczas uzyskiwania dostępu do drugiej usługi.</span><span class="sxs-lookup"><span data-stu-id="288cb-218">This becomes a problem if multiple clients are allowed to use the first service and the service impersonates the clients when accessing the second service.</span></span> <span data-ttu-id="288cb-219">Jeśli usługa ponownie używa tego samego klienta dla wszystkich wywołujących, wszystkie wywołania drugiej usługi są wykonywane w ramach tożsamości pierwszego obiektu wywołującego, który został użyty do otwarcia klienta w drugiej usłudze.</span><span class="sxs-lookup"><span data-stu-id="288cb-219">If the service reuses the same client for all callers, all calls to the second service are done under the identity of the first caller that was used to open the client to the second service.</span></span> <span data-ttu-id="288cb-220">Innymi słowy, usługa używa tożsamości pierwszego klienta dla wszystkich klientów do komunikowania się z drugą usługą.</span><span class="sxs-lookup"><span data-stu-id="288cb-220">In other words, the service uses the identity of the first client for all its clients to communicate with the second service.</span></span> <span data-ttu-id="288cb-221">Może to prowadzić do podniesienia uprawnień.</span><span class="sxs-lookup"><span data-stu-id="288cb-221">This can lead to the elevation of privilege.</span></span> <span data-ttu-id="288cb-222">Jeśli nie jest to wymagane zachowanie usługi, należy śledzić każdego wywołującego i utworzyć nowego klienta do drugiej usługi dla każdego oddzielnego obiektu wywołującego oraz upewnić się, że usługa używa tylko odpowiedniego klienta dla właściwego wywołującego, aby komunikować się z drugą usługą.</span><span class="sxs-lookup"><span data-stu-id="288cb-222">If this is not the desired behavior of your service, you must track each caller and create a new client to the second service for every distinct caller, and ensure that the service uses only the right client for the right caller to communicate with the second service.</span></span>  
  
 <span data-ttu-id="288cb-223">Aby uzyskać więcej informacji o poświadczeniach i bezpiecznych sesjach, zobacz [zagadnienia dotyczące zabezpieczeń bezpiecznych sesji](../../../../docs/framework/wcf/feature-details/security-considerations-for-secure-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="288cb-223">For more information about credentials and secure sessions, see [Security Considerations for Secure Sessions](../../../../docs/framework/wcf/feature-details/security-considerations-for-secure-sessions.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="288cb-224">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="288cb-224">See also</span></span>

- <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType>
- <xref:System.ServiceModel.ClientBase%601.ClientCredentials%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Description.ClientCredentials.ClientCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.BasicHttpMessageSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.HttpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverHttp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverMsmq.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.MessageSecurityOverTcp.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.TcpTransportSecurity.ClientCredentialType%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A?displayProperty=nameWithType>
- <xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A?displayProperty=nameWithType>
- [<span data-ttu-id="288cb-225">Pojęcia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="288cb-225">Security Concepts</span></span>](../../../../docs/framework/wcf/feature-details/security-concepts.md)
- [<span data-ttu-id="288cb-226">Zabezpieczanie usług i klientów</span><span class="sxs-lookup"><span data-stu-id="288cb-226">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
- [<span data-ttu-id="288cb-227">Programowanie zabezpieczeń WCF</span><span class="sxs-lookup"><span data-stu-id="288cb-227">Programming WCF Security</span></span>](../../../../docs/framework/wcf/feature-details/programming-wcf-security.md)
- [<span data-ttu-id="288cb-228">Zabezpieczenia transportu HTTP</span><span class="sxs-lookup"><span data-stu-id="288cb-228">HTTP Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/http-transport-security.md)
