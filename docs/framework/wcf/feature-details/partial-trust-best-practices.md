---
title: "Najlepsze rozwiązania dotyczące częściowego zaufania"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 0d052bc0-5b98-4c50-8bb5-270cc8a8b145
caps.latest.revision: "17"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 74b1bd42472da61497124a04620aa02af25b32bd
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/02/2017
---
# <a name="partial-trust-best-practices"></a><span data-ttu-id="2e440-102">Najlepsze rozwiązania dotyczące częściowego zaufania</span><span class="sxs-lookup"><span data-stu-id="2e440-102">Partial Trust Best Practices</span></span>
<span data-ttu-id="2e440-103">W tym temacie opisano najważniejsze wskazówki podczas uruchamiania [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="2e440-103">This topic describes best practices when running [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] in a partial trust environment.</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="2e440-104">Serializacja</span><span class="sxs-lookup"><span data-stu-id="2e440-104">Serialization</span></span>  
 <span data-ttu-id="2e440-105">Zastosuj następujące rozwiązania, korzystając z <xref:System.Runtime.Serialization.DataContractSerializer> w częściowo zaufanych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2e440-105">Apply the following practices when using the <xref:System.Runtime.Serialization.DataContractSerializer> in a partially-trusted application.</span></span>  
  
-   <span data-ttu-id="2e440-106">Wszystkie typy serializacji musi być jawnie oznaczone `[DataContract]` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="2e440-106">All serializable types must be explicitly marked with the `[DataContract]` attribute.</span></span> <span data-ttu-id="2e440-107">Następujące techniki nie są obsługiwane w środowisku częściowej relacji zaufania:</span><span class="sxs-lookup"><span data-stu-id="2e440-107">The following techniques are not supported in a partial trust environment:</span></span>  
  
-   <span data-ttu-id="2e440-108">Oznaczenie klasy, aby można było serializować ją przy <xref:System.SerializableAttribute>.</span><span class="sxs-lookup"><span data-stu-id="2e440-108">Marking classes to be serialized with the <xref:System.SerializableAttribute>.</span></span>  
  
-   <span data-ttu-id="2e440-109">Implementowanie <xref:System.Runtime.Serialization.ISerializable> interfejs umożliwia klasę, aby kontrolować procesu serializacji.</span><span class="sxs-lookup"><span data-stu-id="2e440-109">Implementing the <xref:System.Runtime.Serialization.ISerializable> interface to allow a class to control its serialization process.</span></span>  
  
### <a name="using-datacontractserializer"></a><span data-ttu-id="2e440-110">Przy użyciu elementu DataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="2e440-110">Using DataContractSerializer</span></span>  
  
-   <span data-ttu-id="2e440-111">Wszystkie typy oznaczone `[DataContract]` atrybutu muszą być publiczne.</span><span class="sxs-lookup"><span data-stu-id="2e440-111">All types marked with the `[DataContract]` attribute must be public.</span></span> <span data-ttu-id="2e440-112">Nie można zserializować typu niepubliczne w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="2e440-112">Non-public types cannot be serialized in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="2e440-113">Wszystkie `[DataContract]` elementów członkowskich w serializacji `[DataContract]` typu muszą być publiczne.</span><span class="sxs-lookup"><span data-stu-id="2e440-113">All `[DataContract]` members in a serializable `[DataContract]` type must be public.</span></span> <span data-ttu-id="2e440-114">Typ z niepublicznych `[DataMember]` nie może być serializowany w środowisku częściowej relacji zaufania.</span><span class="sxs-lookup"><span data-stu-id="2e440-114">A type with a non-public `[DataMember]` cannot be serialized in a partial trust environment.</span></span>  
  
-   <span data-ttu-id="2e440-115">Metody obsługi zdarzeń serializacji (takich jak `OnSerializing`, `OnSerialized`, `OnDeserializing`, i `OnDeserialized`) musi być zadeklarowany jako publiczny.</span><span class="sxs-lookup"><span data-stu-id="2e440-115">Methods that handle serialization events (such as `OnSerializing`, `OnSerialized`, `OnDeserializing`, and `OnDeserialized`) must be declared as public.</span></span> <span data-ttu-id="2e440-116">Jednak zarówno bezpośrednie i pośrednie implementacje <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29> są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="2e440-116">However, both explicit and implicit implementations of <xref:System.Runtime.Serialization.IDeserializationCallback.OnDeserialization%28System.Object%29> are supported.</span></span>  
  
-   <span data-ttu-id="2e440-117">`[DataContract]`typy zaimplementowana w zestawach oznaczonych <xref:System.Security.AllowPartiallyTrustedCallersAttribute> nie należy wykonać czynności związane z zabezpieczeniami w Konstruktorze typu jako <xref:System.Runtime.Serialization.DataContractSerializer> nie wywołuje konstruktor obiektu nowo utworzone podczas deserializacji.</span><span class="sxs-lookup"><span data-stu-id="2e440-117">`[DataContract]` types implemented in assemblies marked with the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> must not perform security-related actions in the type constructor, as the <xref:System.Runtime.Serialization.DataContractSerializer> does not call the constructor of the newly-instantiated object during deserialization.</span></span> <span data-ttu-id="2e440-118">W szczególności należy unikać następujące typowe techniki zabezpieczeń dla `[DataContract]` typów:</span><span class="sxs-lookup"><span data-stu-id="2e440-118">Specifically, the following common security techniques must be avoided for `[DataContract]` types:</span></span>  
  
-   <span data-ttu-id="2e440-119">Próba ograniczyć dostęp częściowej relacji zaufania, wprowadzając konstruktora typu wewnętrznego lub prywatnego.</span><span class="sxs-lookup"><span data-stu-id="2e440-119">Attempting to restrict partial trust access by making the type's constructor internal or private.</span></span>  
  
-   <span data-ttu-id="2e440-120">Ograniczanie dostępu do typu, dodając `[LinkDemand]` do konstruktora typu.</span><span class="sxs-lookup"><span data-stu-id="2e440-120">Restricting access to the type by adding a `[LinkDemand]` to the type's constructor.</span></span>  
  
-   <span data-ttu-id="2e440-121">Przy założeniu, że ponieważ obiekt został pomyślnie uruchomiony, wszelkie sprawdzanie poprawności, wymuszane przez Konstruktor ma zakończyło się pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="2e440-121">Assuming that because the object has been successfully instantiated, any validation checks enforced by the constructor have passed successfully.</span></span>  
  
### <a name="using-ixmlserializable"></a><span data-ttu-id="2e440-122">Przy użyciu interfejsu IXmlSerializable</span><span class="sxs-lookup"><span data-stu-id="2e440-122">Using IXmlSerializable</span></span>  
 <span data-ttu-id="2e440-123">Zastosuj poniższe najlepsze rozwiązania dla typów implementujących <xref:System.Xml.Serialization.IXmlSerializable> i są serializowane przy użyciu <xref:System.Runtime.Serialization.DataContractSerializer>:</span><span class="sxs-lookup"><span data-stu-id="2e440-123">The following best practices apply for types that implement <xref:System.Xml.Serialization.IXmlSerializable> and are serialized using the <xref:System.Runtime.Serialization.DataContractSerializer>:</span></span>  
  
-   <span data-ttu-id="2e440-124"><xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A> Implementacje metody statycznej musi być `public`.</span><span class="sxs-lookup"><span data-stu-id="2e440-124">The <xref:System.Xml.Serialization.IXmlSerializable.GetSchema%2A> static method implementations must be `public`.</span></span>  
  
-   <span data-ttu-id="2e440-125">Metody wystąpienia, które implementują <xref:System.Xml.Serialization.IXmlSerializable> interfejs musi być `public`.</span><span class="sxs-lookup"><span data-stu-id="2e440-125">The instance methods that implement the <xref:System.Xml.Serialization.IXmlSerializable> interface must be `public`.</span></span>  
  
## <a name="using-wcf-from-fully-trusted-platform-code-that-allows-calls-from-partially-trusted-callers"></a><span data-ttu-id="2e440-126">Przy użyciu programu WCF z kod platformy w pełni zaufany, który umożliwia wywołania z częściowo zaufane obiekty wywołujące</span><span class="sxs-lookup"><span data-stu-id="2e440-126">Using WCF from Fully-Trusted Platform Code that Allows Calls from Partially Trusted Callers</span></span>  
 <span data-ttu-id="2e440-127">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Model zabezpieczeń w częściowej relacji zaufania przy założeniu, że wszystkie wywołującej [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] publicznej metody lub właściwości działa w kontekście zabezpieczeń (CAS) dostępu do kodu aplikacji hostingu.</span><span class="sxs-lookup"><span data-stu-id="2e440-127">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] partial trust security model assumes that any caller of a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] public method or property is running in the code access security (CAS) context of the hosting application.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="2e440-128">założono również istnieje tej aplikacji tylko jeden kontekst zabezpieczeń dla każdego <xref:System.AppDomain>, i ustanowionej w tym kontekście <xref:System.AppDomain> czas utworzenia przez zaufanego hosta (na przykład przez wywołanie do <xref:System.AppDomain.CreateDomain%2A> lub przez Menedżera aplikacji ASP.NET).</span><span class="sxs-lookup"><span data-stu-id="2e440-128"> also assumes that only one application security context exists for each <xref:System.AppDomain>, and that this context is established at <xref:System.AppDomain> creation time by a trusted host (for example, by a call to <xref:System.AppDomain.CreateDomain%2A> or by the ASP.NET Application Manager).</span></span>  
  
 <span data-ttu-id="2e440-129">Ten model zabezpieczeń ma zastosowanie do aplikacji zapisane przez użytkownika, które nie assert dodatkowe uprawnienia urzędów certyfikacji, na przykład kod użytkownika uruchomiony w aplikacji ASP.NET zaufania średnia liczba godzin.</span><span class="sxs-lookup"><span data-stu-id="2e440-129">This security model applies to user-written applications that cannot assert additional CAS permissions, such as user code running in a Medium Trust ASP.NET application.</span></span> <span data-ttu-id="2e440-130">Jednak kod platformy w pełni zaufane (na przykład innych firm zestawu, który jest zainstalowany w globalnej pamięci podręcznej zestawów i akceptuje połączenia z częściowo zaufanego kodu) musi Zwróć uwagę na jawne wywoływanie [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] imieniu częściowo zaufanych Aplikacja, aby uniknąć wprowadzenia luk w zabezpieczeniach na poziomie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2e440-130">However, fully-trusted platform code (for example, a third-party assembly that is installed in the global assembly cache and accepts calls from partially-trusted code) must take explicit care when calling into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] on behalf of a partially-trusted application to avoid introducing application-level security vulnerabilities.</span></span>  
  
 <span data-ttu-id="2e440-131">Kod pełnego zaufania, należy unikać Zmienianie zestaw uprawnień urzędów certyfikacji bieżącego wątku (przez wywołanie metody <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, lub <xref:System.Security.PermissionSet.Deny%2A>) przed wywołaniem [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] interfejsów API w imieniu częściowo zaufany kod.</span><span class="sxs-lookup"><span data-stu-id="2e440-131">Full-trust code should avoid altering the CAS permission set of the current thread (by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>) prior to calling [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] APIs on behalf of partially-trusted code.</span></span> <span data-ttu-id="2e440-132">Potwierdzające, odmawianie lub w przeciwnym razie tworzenie kontekstu uprawnienia właściwe dla wątków, która jest niezależna od kontekstu zabezpieczeń na poziomie aplikacji może spowodować nieoczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="2e440-132">Asserting, denying, or otherwise creating a thread-specific permission context that is independent of the application-level security context can result in unexpected behavior.</span></span> <span data-ttu-id="2e440-133">W zależności od aplikacji to zachowanie może spowodować luk w zabezpieczeniach na poziomie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2e440-133">Depending on the application, this behavior may result in application-level security vulnerabilities.</span></span>  
  
 <span data-ttu-id="2e440-134">Kod, który wywołuje [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] przy użyciu kontekstu właściwe dla wątków uprawnienia muszą być przygotowane do obsługi następujących sytuacji, które mogą wystąpić podczas:</span><span class="sxs-lookup"><span data-stu-id="2e440-134">Code that calls into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] using a thread-specific permission context must be prepared to handle the following situations that may arise:</span></span>  
  
-   <span data-ttu-id="2e440-135">Kontekst zabezpieczeń właściwe dla wątków może się nie powieść w czasie trwania operacji, która powoduje potencjalnych wyjątki zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="2e440-135">The thread-specific security context may not be maintained for the duration of the operation, which results in potential security exceptions.</span></span>  
  
-   <span data-ttu-id="2e440-136">Wewnętrzny [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kodu, a także wszystkie wywołania zwrotne dostarczane przez użytkownika może działać w kontekście zabezpieczeń inną niż jeden, pod którym pierwotnie zainicjowano wywołanie.</span><span class="sxs-lookup"><span data-stu-id="2e440-136">Internal [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] code as well as any user-provided callbacks may run in a different security context than the one under which the call was originally initiated.</span></span> <span data-ttu-id="2e440-137">Konteksty te obejmują:</span><span class="sxs-lookup"><span data-stu-id="2e440-137">These contexts include:</span></span>  
  
    -   <span data-ttu-id="2e440-138">Kontekst uprawnienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2e440-138">The application permission context.</span></span>  
  
    -   <span data-ttu-id="2e440-139">Żadnego kontekstu uprawnienia właściwe dla wątków utworzone wcześniej przez inne wątki użytkownika używane do wywoływania w [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] przez cały okres istnienia aktualnie uruchomionych <xref:System.AppDomain>.</span><span class="sxs-lookup"><span data-stu-id="2e440-139">Any thread-specific permission context previously created by other user threads used to call into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] during the lifetime of the currently running <xref:System.AppDomain>.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="2e440-140">gwarantuje, że częściowo zaufany kod nie może uzyskać uprawnienia pełnego zaufania, chyba że takich uprawnień są oceniane pod przez składnik przed wywołaniem w pełni zaufanych [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] publicznych interfejsach API.</span><span class="sxs-lookup"><span data-stu-id="2e440-140"> guarantees that partially-trusted code cannot obtain full-trust permissions unless such permissions are asserted by a fully-trusted component prior to calling into [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] public APIs.</span></span> <span data-ttu-id="2e440-141">Jednak go nie gwarantuje, że skutki potwierdzające pełnego zaufania jest izolowana do określonego wątku, operacji lub akcji użytkownika.</span><span class="sxs-lookup"><span data-stu-id="2e440-141">However, it does not guarantee that the effects of asserting full trust is isolated to a particular thread, operation, or user action.</span></span>  
  
 <span data-ttu-id="2e440-142">Najlepszym rozwiązaniem uniknąć tworzenia kontekstu właściwe dla wątków uprawnienia, wywołując <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, lub <xref:System.Security.PermissionSet.Deny%2A>.</span><span class="sxs-lookup"><span data-stu-id="2e440-142">As a best practice, avoid creating thread-specific permission context by calling <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.PermitOnly%2A>, or <xref:System.Security.PermissionSet.Deny%2A>.</span></span> <span data-ttu-id="2e440-143">Zamiast tego należy udzielić lub odmówić uprawnień do aplikacji, dzięki czemu nie <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.Deny%2A>, lub <xref:System.Security.PermissionSet.PermitOnly%2A> jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="2e440-143">Instead, grant or deny the privilege to the application itself, so that no <xref:System.Security.PermissionSet.Assert%2A>, <xref:System.Security.PermissionSet.Deny%2A>, or <xref:System.Security.PermissionSet.PermitOnly%2A> is required.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2e440-144">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="2e440-144">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Xml.Serialization.IXmlSerializable>
