---
title: Strumieniowy transfer komunikatów
ms.date: 03/30/2017
ms.assetid: 72a47a51-e5e7-4b76-b24a-299d51e0ae5a
ms.openlocfilehash: e58b0ce698df310a5e18bcd24201fb2e27a9c1aa
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/08/2019
ms.locfileid: "59136880"
---
# <a name="streaming-message-transfer"></a><span data-ttu-id="fb10d-102">Strumieniowy transfer komunikatów</span><span class="sxs-lookup"><span data-stu-id="fb10d-102">Streaming Message Transfer</span></span>
<span data-ttu-id="fb10d-103">Transportów Windows Communication Foundation (WCF) obsługuje dwa tryby do przesyłania komunikatów:</span><span class="sxs-lookup"><span data-stu-id="fb10d-103">Windows Communication Foundation (WCF) transports support two modes for transferring messages:</span></span>  
  
-   <span data-ttu-id="fb10d-104">Transfery buforowanego przytrzymaj cały komunikat w buforze pamięci, do czasu ukończenia transferu.</span><span class="sxs-lookup"><span data-stu-id="fb10d-104">Buffered transfers hold the entire message in a memory buffer until the transfer is complete.</span></span> <span data-ttu-id="fb10d-105">Buforowane wiadomości musi być całkowicie dostarczana, zanim odbiorca może go odczytać.</span><span class="sxs-lookup"><span data-stu-id="fb10d-105">A buffered message must be completely delivered before a receiver can read it.</span></span>  
  
-   <span data-ttu-id="fb10d-106">Transfery przesyłane strumieniowo uwidocznić komunikatu jako strumień.</span><span class="sxs-lookup"><span data-stu-id="fb10d-106">Streamed transfers expose the message as a stream.</span></span> <span data-ttu-id="fb10d-107">Odbiornik uruchamia przetwarzania komunikatu, aby całkowicie został dostarczony.</span><span class="sxs-lookup"><span data-stu-id="fb10d-107">The receiver starts processing the message before it is completely delivered.</span></span>  
  
-   <span data-ttu-id="fb10d-108">Transfery przesyłane strumieniowo można poprawić skalowalność usługi, eliminując potrzebę dużej ilości pamięci, buforów.</span><span class="sxs-lookup"><span data-stu-id="fb10d-108">Streamed transfers can improve the scalability of a service by eliminating the requirement for large memory buffers.</span></span> <span data-ttu-id="fb10d-109">Czy zmiana trybu transferu zwiększa skalowalność, zależy od rozmiaru wiadomości przesyłane.</span><span class="sxs-lookup"><span data-stu-id="fb10d-109">Whether changing the transfer mode improves scalability depends on the size of the messages being transferred.</span></span> <span data-ttu-id="fb10d-110">Rozmiary dużych bloków komunikatów Preferuj przy użyciu transferu przesyłane strumieniowo.</span><span class="sxs-lookup"><span data-stu-id="fb10d-110">Large message sizes favor using streamed transfers.</span></span>  
  
 <span data-ttu-id="fb10d-111">Domyślnie HTTP, protokół TCP/IP i transportu nazwanego potoku używać buforowanego transferu.</span><span class="sxs-lookup"><span data-stu-id="fb10d-111">By default, the HTTP, TCP/IP, and named pipe transports use buffered transfers.</span></span> <span data-ttu-id="fb10d-112">W tym dokumencie opisano, jak przełączyć te transportu z buforowanego tryb transferu przesyłane strumieniowo i konsekwencje tej czynności.</span><span class="sxs-lookup"><span data-stu-id="fb10d-112">This document describes how to switch these transports from a buffered to streamed transfer mode and the consequences of doing so.</span></span>  
  
## <a name="enabling-streamed-transfers"></a><span data-ttu-id="fb10d-113">Włączanie transfery przesyłane strumieniowo</span><span class="sxs-lookup"><span data-stu-id="fb10d-113">Enabling Streamed Transfers</span></span>  
 <span data-ttu-id="fb10d-114">Wybieranie między trybami buforowanego i przesyłane strumieniowo transfer odbywa się na element powiązania transportu.</span><span class="sxs-lookup"><span data-stu-id="fb10d-114">Selecting between buffered and streamed transfer modes is done on the binding element of the transport.</span></span> <span data-ttu-id="fb10d-115">Element powiązania ma <xref:System.ServiceModel.TransferMode> właściwość, która może być równa `Buffered`, `Streamed`, `StreamedRequest`, lub `StreamedResponse`.</span><span class="sxs-lookup"><span data-stu-id="fb10d-115">The binding element has a <xref:System.ServiceModel.TransferMode> property that can be set to `Buffered`, `Streamed`, `StreamedRequest`, or `StreamedResponse`.</span></span> <span data-ttu-id="fb10d-116">Ustawienie trybu transferu `Streamed` umożliwia przesyłanie strumieniowe komunikacji w obu kierunkach.</span><span class="sxs-lookup"><span data-stu-id="fb10d-116">Setting the transfer mode to `Streamed` enables streaming communication in both directions.</span></span> <span data-ttu-id="fb10d-117">Ustawienie trybu transferu `StreamedRequest` lub `StreamedResponse` umożliwia przesyłanie strumieniowe komunikacji wskazany tylko w kierunku.</span><span class="sxs-lookup"><span data-stu-id="fb10d-117">Setting the transfer mode to `StreamedRequest` or `StreamedResponse` enables streaming communication in the indicated direction only.</span></span>  
  
 <span data-ttu-id="fb10d-118"><xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, I <xref:System.ServiceModel.NetNamedPipeBinding> udostępniają powiązania <xref:System.ServiceModel.TransferMode> właściwości.</span><span class="sxs-lookup"><span data-stu-id="fb10d-118">The <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, and <xref:System.ServiceModel.NetNamedPipeBinding> bindings expose the <xref:System.ServiceModel.TransferMode> property.</span></span> <span data-ttu-id="fb10d-119">Dla innych transportu należy utworzyć niestandardowego powiązania, aby ustawić tryb transferu.</span><span class="sxs-lookup"><span data-stu-id="fb10d-119">For other transports, you must create a custom binding to set the transfer mode.</span></span>  
  
 <span data-ttu-id="fb10d-120">Decyzja dotycząca użycia buforowanego lub przesyłane strumieniowo transferu jest decyzja lokalnego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="fb10d-120">The decision to use either buffered or streamed transfers is a local decision of the endpoint.</span></span> <span data-ttu-id="fb10d-121">Dla transportu HTTP tryb transferu nie propagować przez połączenie lub na serwerach i innych pośredników.</span><span class="sxs-lookup"><span data-stu-id="fb10d-121">For HTTP transports, the transfer mode does not propagate across a connection, or to servers and other intermediaries.</span></span> <span data-ttu-id="fb10d-122">Ustawianie trybu transferu nie zostaną uwzględnione w opisie interfejsu usługi.</span><span class="sxs-lookup"><span data-stu-id="fb10d-122">Setting the transfer mode is not reflected in the description of the service interface.</span></span> <span data-ttu-id="fb10d-123">Po wygenerowaniu klasy klienta dla usługi, możesz edytować plik konfiguracji usługi przeznaczone do użycia w przypadku transferów przesyłane strumieniowo można ustawić trybu.</span><span class="sxs-lookup"><span data-stu-id="fb10d-123">After generating a client class for a service, you must edit the configuration file for services intended to be used with streamed transfers to set the mode.</span></span> <span data-ttu-id="fb10d-124">Dla protokołu TCP i rodzajów transportu nazwanego potoku tryb transferu jest propagowany jako potwierdzenie zasad.</span><span class="sxs-lookup"><span data-stu-id="fb10d-124">For TCP and named pipe transports, the transfer mode is propagated as a policy assertion.</span></span>  
  
 <span data-ttu-id="fb10d-125">Aby uzyskać przykłady kodu, zobacz [jak: Włączanie przesyłania strumieniowego](../../../../docs/framework/wcf/feature-details/how-to-enable-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="fb10d-125">For code samples, see [How to: Enable Streaming](../../../../docs/framework/wcf/feature-details/how-to-enable-streaming.md).</span></span>  
  
## <a name="enabling-asynchronous-streaming"></a><span data-ttu-id="fb10d-126">Włączanie asynchronicznego przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="fb10d-126">Enabling Asynchronous Streaming</span></span>  
 <span data-ttu-id="fb10d-127">Aby włączyć, asynchronicznego przesyłania strumieniowego, Dodaj <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> zachowanie punktu końcowego usługi hosta i ustaw jego <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> właściwość `true`.</span><span class="sxs-lookup"><span data-stu-id="fb10d-127">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="fb10d-128">Ta wersja programu WCF również adde możliwości true asynchronicznego przesyłania strumieniowego po stronie wysyłania.</span><span class="sxs-lookup"><span data-stu-id="fb10d-128">This version of WCF also adde the capability of true asynchronous streaming on the send side.</span></span> <span data-ttu-id="fb10d-129">Poprawia skalowalność usługi w scenariuszach, gdzie jest strumienia komunikatów do wielu klientów, z których niektóre są powolne podczas odczytu; prawdopodobnie z powodu przeciążenia sieci lub są nie do czytania w ogóle.</span><span class="sxs-lookup"><span data-stu-id="fb10d-129">This improves scalability of the service in scenarios where it is streaming messages to multiple clients some of which are slow in reading; possibly due to network congestion or are not reading at all.</span></span> <span data-ttu-id="fb10d-130">W tych scenariuszach WCF już nie blokuje określonych wątków w usłudze na klienta.</span><span class="sxs-lookup"><span data-stu-id="fb10d-130">In these scenarios WCF no longer blocks individual threads on the service per client.</span></span> <span data-ttu-id="fb10d-131">Zapewnia to, że usługa jest w stanie do przetworzenia wiele większej liczby klientów, zwiększając w ten sposób skalowalność usługi.</span><span class="sxs-lookup"><span data-stu-id="fb10d-131">This ensures that the service is able to process many more clients thereby improving the scalability of the service.</span></span>  
  
## <a name="restrictions-on-streamed-transfers"></a><span data-ttu-id="fb10d-132">Ograniczenia dotyczące transferu przesyłane strumieniowo</span><span class="sxs-lookup"><span data-stu-id="fb10d-132">Restrictions on Streamed Transfers</span></span>  
 <span data-ttu-id="fb10d-133">Przy użyciu trybu transferu przesyłane strumieniowo powoduje, że czas uruchomienia wymusić dodatkowe ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="fb10d-133">Using the streamed transfer mode causes the run time to enforce additional restrictions.</span></span>  
  
 <span data-ttu-id="fb10d-134">Operacje, które występują w strumieniu transportu może mieć kontrakt co najwyżej jeden wejściowych lub wyjściowych parametr.</span><span class="sxs-lookup"><span data-stu-id="fb10d-134">Operations that occur across a streamed transport can have a contract with at most one input or output parameter.</span></span> <span data-ttu-id="fb10d-135">Ten parametr odnosi się do całej treści komunikatu i musi być <xref:System.ServiceModel.Channels.Message>, pochodne typu <xref:System.IO.Stream>, lub <xref:System.Xml.Serialization.IXmlSerializable> implementacji.</span><span class="sxs-lookup"><span data-stu-id="fb10d-135">That parameter corresponds to the entire body of the message and must be a <xref:System.ServiceModel.Channels.Message>, a derived type of <xref:System.IO.Stream>, or an <xref:System.Xml.Serialization.IXmlSerializable> implementation.</span></span> <span data-ttu-id="fb10d-136">Wartość zwracana dla operacji jest odpowiednikiem parametru wyjściowego.</span><span class="sxs-lookup"><span data-stu-id="fb10d-136">Having a return value for an operation is equivalent to having an output parameter.</span></span>  
  
 <span data-ttu-id="fb10d-137">Niektóre funkcje usługi WCF, takie jak niezawodną obsługę komunikatów, transakcje i zabezpieczenia na poziomie komunikatu protokołu SOAP, zależy od tego, buforowanie wiadomości dla transmisji.</span><span class="sxs-lookup"><span data-stu-id="fb10d-137">Some WCF features, such as reliable messaging, transactions, and SOAP message-level security, rely on buffering messages for transmissions.</span></span> <span data-ttu-id="fb10d-138">Za pomocą tych funkcji może być ograniczenie lub wyeliminowanie zalet wydajności przy użyciu przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="fb10d-138">Using these features may reduce or eliminate the performance benefits gained by using streaming.</span></span> <span data-ttu-id="fb10d-139">Aby zabezpieczyć przesyłane strumieniowo transportu, tylko zabezpieczenia na poziomie transportu lub zabezpieczenia na poziomie transportu, a także zabezpieczeń wiadomości tylko do uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="fb10d-139">To secure a streamed transport, use transport-level security only or use transport-level security plus authentication-only message security.</span></span>  
  
 <span data-ttu-id="fb10d-140">Nagłówków protokołu SOAP zawsze są buforowane, nawet wtedy, gdy tryb transferu jest ustawiony na przesyłane strumieniowo.</span><span class="sxs-lookup"><span data-stu-id="fb10d-140">SOAP headers are always buffered, even when the transfer mode is set to streamed.</span></span> <span data-ttu-id="fb10d-141">Nagłówki komunikatu nie może przekraczać rozmiaru `MaxBufferSize` przydziału transportu.</span><span class="sxs-lookup"><span data-stu-id="fb10d-141">The headers for a message must not exceed the size of the `MaxBufferSize` transport quota.</span></span> <span data-ttu-id="fb10d-142">Aby uzyskać więcej informacji na temat tego ustawienia, zobacz [przydziały dla transportu](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="fb10d-142">For more information about this setting, see [Transport Quotas](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span></span>  
  
## <a name="differences-between-buffered-and-streamed-transfers"></a><span data-ttu-id="fb10d-143">Różnice między buforowanego i przesyłane strumieniowo transferu</span><span class="sxs-lookup"><span data-stu-id="fb10d-143">Differences Between Buffered and Streamed Transfers</span></span>  
 <span data-ttu-id="fb10d-144">Tryb transferu z buforowanego do strumieniowego również zmiana kształtu natywnych kanału TCP i transportu nazwanego potoku.</span><span class="sxs-lookup"><span data-stu-id="fb10d-144">Changing the transfer mode from buffered to streamed also changes the native channel shape of the TCP and named pipe transports.</span></span> <span data-ttu-id="fb10d-145">Buforowanego transferu jest kształtu kanału natywnych <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="fb10d-145">For buffered transfers, the native channel shape is <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span> <span data-ttu-id="fb10d-146">W przypadku transferów przesyłane strumieniowo są natywne kanały <xref:System.ServiceModel.Channels.IRequestChannel> i <xref:System.ServiceModel.Channels.IReplyChannel>.</span><span class="sxs-lookup"><span data-stu-id="fb10d-146">For streamed transfers, the native channels are <xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span> <span data-ttu-id="fb10d-147">Zmienianie trybu transferu w istniejącej aplikacji, która wykorzystuje te służy do transportu bezpośrednio (oznacza to, nie za pośrednictwem umowy serwisowej) wymaga zmiany kształtu kanału oczekiwany dla fabryki kanałów i odbiorników.</span><span class="sxs-lookup"><span data-stu-id="fb10d-147">Changing the transfer mode in an existing application that uses these transports directly (that is, not through a service contract) requires changing the expected channel shape for channel factories and listeners.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fb10d-148">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="fb10d-148">See also</span></span>

- [<span data-ttu-id="fb10d-149">Instrukcje: włączanie przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="fb10d-149">How to: Enable Streaming</span></span>](../../../../docs/framework/wcf/feature-details/how-to-enable-streaming.md)
