---
title: Strumieniowy transfer komunikatów
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 72a47a51-e5e7-4b76-b24a-299d51e0ae5a
caps.latest.revision: 13
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: ed2aa57e044910ab9fd9c60dfd47eb7aaa0ce75e
ms.sourcegitcommit: 94d33cadc5ff81d2ac389bf5f26422c227832052
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/30/2018
---
# <a name="streaming-message-transfer"></a><span data-ttu-id="5a2ce-102">Strumieniowy transfer komunikatów</span><span class="sxs-lookup"><span data-stu-id="5a2ce-102">Streaming Message Transfer</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="5a2ce-103"> transport obsługuje dwa tryby przesyłania komunikatów:</span><span class="sxs-lookup"><span data-stu-id="5a2ce-103"> transports support two modes for transferring messages:</span></span>  
  
-   <span data-ttu-id="5a2ce-104">Transfery buforowanego przytrzymaj cały komunikat w buforze pamięci przed zakończeniem transferu.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-104">Buffered transfers hold the entire message in a memory buffer until the transfer is complete.</span></span> <span data-ttu-id="5a2ce-105">Buforowane wiadomości musi być całkowicie dostarczana przed odbiorca może go odczytać.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-105">A buffered message must be completely delivered before a receiver can read it.</span></span>  
  
-   <span data-ttu-id="5a2ce-106">Transfery przesyłanej strumieniowo ujawnia komunikatu jako strumień.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-106">Streamed transfers expose the message as a stream.</span></span> <span data-ttu-id="5a2ce-107">Odbiornik rozpoczyna przetwarzanie komunikatu przed przekazaniem całkowicie.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-107">The receiver starts processing the message before it is completely delivered.</span></span>  
  
-   <span data-ttu-id="5a2ce-108">Transfery przesyłanej strumieniowo może zwiększyć skalowalność usługi, eliminując konieczność buforów dużej ilości pamięci.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-108">Streamed transfers can improve the scalability of a service by eliminating the requirement for large memory buffers.</span></span> <span data-ttu-id="5a2ce-109">Czy zmienić tryb transferu zwiększa skalowalność, zależy od rozmiaru wiadomości przesyłane.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-109">Whether changing the transfer mode improves scalability depends on the size of the messages being transferred.</span></span> <span data-ttu-id="5a2ce-110">Komunikat duże rozmiary Preferuj przy użyciu transferu przesyłany strumieniowo.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-110">Large message sizes favor using streamed transfers.</span></span>  
  
 <span data-ttu-id="5a2ce-111">Domyślnie HTTP, TCP/IP i transportu nazwanego potoku używa buforowanego transferów.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-111">By default, the HTTP, TCP/IP, and named pipe transports use buffered transfers.</span></span> <span data-ttu-id="5a2ce-112">Ten dokument zawiera opis sposobu przełącznika te transportu z buforowanego tryb transmisji strumieniowej i skutków w ten sposób.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-112">This document describes how to switch these transports from a buffered to streamed transfer mode and the consequences of doing so.</span></span>  
  
## <a name="enabling-streamed-transfers"></a><span data-ttu-id="5a2ce-113">Włączanie przesyłanej strumieniowo transferu</span><span class="sxs-lookup"><span data-stu-id="5a2ce-113">Enabling Streamed Transfers</span></span>  
 <span data-ttu-id="5a2ce-114">Wybieranie między trybami transmisji buforowanego i przesyłany strumieniowo odbywa się w elemencie powiązania transportu.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-114">Selecting between buffered and streamed transfer modes is done on the binding element of the transport.</span></span> <span data-ttu-id="5a2ce-115">Element powiązania ma <xref:System.ServiceModel.TransferMode> właściwość, która może być ustawiony na `Buffered`, `Streamed`, `StreamedRequest`, lub `StreamedResponse`.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-115">The binding element has a <xref:System.ServiceModel.TransferMode> property that can be set to `Buffered`, `Streamed`, `StreamedRequest`, or `StreamedResponse`.</span></span> <span data-ttu-id="5a2ce-116">Ustawienie Tryb transferu `Streamed` umożliwia przesyłanie strumieniowe komunikacji w obu kierunkach.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-116">Setting the transfer mode to `Streamed` enables streaming communication in both directions.</span></span> <span data-ttu-id="5a2ce-117">Ustawienie Tryb transferu `StreamedRequest` lub `StreamedResponse` umożliwia przesyłanie strumieniowe komunikacji w wybranym kierunku tylko.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-117">Setting the transfer mode to `StreamedRequest` or `StreamedResponse` enables streaming communication in the indicated direction only.</span></span>  
  
 <span data-ttu-id="5a2ce-118"><xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, I <xref:System.ServiceModel.NetNamedPipeBinding> Uwidacznianie powiązania <xref:System.ServiceModel.TransferMode> właściwości.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-118">The <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, and <xref:System.ServiceModel.NetNamedPipeBinding> bindings expose the <xref:System.ServiceModel.TransferMode> property.</span></span> <span data-ttu-id="5a2ce-119">Dla innych transportu należy utworzyć niestandardowego powiązania, aby ustawić tryb transferu.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-119">For other transports, you must create a custom binding to set the transfer mode.</span></span>  
  
 <span data-ttu-id="5a2ce-120">Decyzja o wykorzystaniu buforowane lub przesyłany strumieniowo transferu jest decyzji lokalnego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-120">The decision to use either buffered or streamed transfers is a local decision of the endpoint.</span></span> <span data-ttu-id="5a2ce-121">Dla transportu HTTP tryb transferu nie propaguje przez połączenie lub na serwerach i innych pośredników.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-121">For HTTP transports, the transfer mode does not propagate across a connection, or to servers and other intermediaries.</span></span> <span data-ttu-id="5a2ce-122">Ustawianie trybu transferu nie zostaną uwzględnione w opisie interfejsu usługi.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-122">Setting the transfer mode is not reflected in the description of the service interface.</span></span> <span data-ttu-id="5a2ce-123">Po wygenerowaniu klasy klienta dla usługi, musi edycję pliku konfiguracyjnego dla usług przeznaczony do użycia w przypadku transferów przesyłanej strumieniowo można ustawić trybu.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-123">After generating a client class for a service, you must edit the configuration file for services intended to be used with streamed transfers to set the mode.</span></span> <span data-ttu-id="5a2ce-124">Dla transportu nazwanego potoku i TCP tryb transferu jest propagowana jako potwierdzenia zasad.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-124">For TCP and named pipe transports, the transfer mode is propagated as a policy assertion.</span></span>  
  
 <span data-ttu-id="5a2ce-125">Aby uzyskać przykłady kodu, zobacz [porady: Włączanie przesyłania strumieniowego](../../../../docs/framework/wcf/feature-details/how-to-enable-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="5a2ce-125">For code samples, see [How to: Enable Streaming](../../../../docs/framework/wcf/feature-details/how-to-enable-streaming.md).</span></span>  
  
## <a name="enabling-asynchronous-streaming"></a><span data-ttu-id="5a2ce-126">Włączanie asynchronicznego przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="5a2ce-126">Enabling Asynchronous Streaming</span></span>  
 <span data-ttu-id="5a2ce-127">Aby włączyć, asynchronicznego przesyłania strumieniowego, Dodaj <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> zachowania punktu końcowego usługi hosta i ustaw jej <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> właściwości `true`.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-127">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="5a2ce-128">Ta wersja programu WCF również adde możliwości wartość true, asynchronicznego przesyłania strumieniowego po stronie wysyłającej.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-128">This version of WCF also adde the capability of true asynchronous streaming on the send side.</span></span> <span data-ttu-id="5a2ce-129">Zwiększa skalowalność usługi w scenariuszach, w którym jest strumienia komunikatów do wielu klientów, niektóre z nich są przetwarzane wolno podczas odczytywania; prawdopodobnie z powodu przeciążenia sieci lub czy nie odczytu w ogóle.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-129">This improves scalability of the service in scenarios where it is streaming messages to multiple clients some of which are slow in reading; possibly due to network congestion or are not reading at all.</span></span> <span data-ttu-id="5a2ce-130">W tych scenariuszach WCF nie blokuje poszczególnych wątków w usłudze na klienta.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-130">In these scenarios WCF no longer blocks individual threads on the service per client.</span></span> <span data-ttu-id="5a2ce-131">Dzięki temu, że usługa jest w stanie przetwarzać wiele większej liczby klientów w celu poprawy skalowalności usługi.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-131">This ensures that the service is able to process many more clients thereby improving the scalability of the service.</span></span>  
  
## <a name="restrictions-on-streamed-transfers"></a><span data-ttu-id="5a2ce-132">Ograniczenia dotyczące transferów przesyłanej strumieniowo</span><span class="sxs-lookup"><span data-stu-id="5a2ce-132">Restrictions on Streamed Transfers</span></span>  
 <span data-ttu-id="5a2ce-133">Przy użyciu tryb transmisji strumieniowej powoduje, że czas uruchomienia wymusić dodatkowe ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-133">Using the streamed transfer mode causes the run time to enforce additional restrictions.</span></span>  
  
 <span data-ttu-id="5a2ce-134">Operacje występujących między przesyłanej strumieniowo transportu może mieć kontrakt co najwyżej jeden wejściowych lub wyjściowych parametr.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-134">Operations that occur across a streamed transport can have a contract with at most one input or output parameter.</span></span> <span data-ttu-id="5a2ce-135">Ten parametr odpowiada całej treści wiadomości i musi być <xref:System.ServiceModel.Channels.Message>, typu pochodnego <xref:System.IO.Stream>, lub <xref:System.Xml.Serialization.IXmlSerializable> implementacji.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-135">That parameter corresponds to the entire body of the message and must be a <xref:System.ServiceModel.Channels.Message>, a derived type of <xref:System.IO.Stream>, or an <xref:System.Xml.Serialization.IXmlSerializable> implementation.</span></span> <span data-ttu-id="5a2ce-136">Wartość zwracana operacji o jest odpowiednikiem o parametru wyjściowego.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-136">Having a return value for an operation is equivalent to having an output parameter.</span></span>  
  
 <span data-ttu-id="5a2ce-137">Niektóre [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] funkcje, takie jak niezawodna obsługa komunikatów, transakcje i zabezpieczenia na poziomie komunikatu protokołu SOAP, zależą od tego, buforowanie wiadomości transmisji.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-137">Some [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] features, such as reliable messaging, transactions, and SOAP message-level security, rely on buffering messages for transmissions.</span></span> <span data-ttu-id="5a2ce-138">Korzystanie z tych funkcji mogą ograniczenie lub wyeliminowanie zalet wydajności przy użyciu przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-138">Using these features may reduce or eliminate the performance benefits gained by using streaming.</span></span> <span data-ttu-id="5a2ce-139">Aby zabezpieczyć przesyłanej strumieniowo transportu, użyj tylko zabezpieczenia na poziomie transportu lub zabezpieczenia na poziomie transportu plus zabezpieczeń wiadomości tylko do uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-139">To secure a streamed transport, use transport-level security only or use transport-level security plus authentication-only message security.</span></span>  
  
 <span data-ttu-id="5a2ce-140">Nagłówki SOAP zawsze są buforowane, nawet wtedy, gdy tryb transferu jest ustawiony na przesyłanej strumieniowo.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-140">SOAP headers are always buffered, even when the transfer mode is set to streamed.</span></span> <span data-ttu-id="5a2ce-141">Nagłówki wiadomości nie może przekraczać wielkości `MaxBufferSize` przydziału transportu.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-141">The headers for a message must not exceed the size of the `MaxBufferSize` transport quota.</span></span> <span data-ttu-id="5a2ce-142">Aby uzyskać więcej informacji o tym ustawieniu, zobacz [przydziały dla transportu](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="5a2ce-142">For more information about this setting, see [Transport Quotas](../../../../docs/framework/wcf/feature-details/transport-quotas.md).</span></span>  
  
## <a name="differences-between-buffered-and-streamed-transfers"></a><span data-ttu-id="5a2ce-143">Różnice między buforowanego i przesyłany strumieniowo transferu</span><span class="sxs-lookup"><span data-stu-id="5a2ce-143">Differences Between Buffered and Streamed Transfers</span></span>  
 <span data-ttu-id="5a2ce-144">Tryb transferu z buforowanego do strumieniowego również zmiana kształtu natywnego kanału TCP i transportu nazwanego potoku.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-144">Changing the transfer mode from buffered to streamed also changes the native channel shape of the TCP and named pipe transports.</span></span> <span data-ttu-id="5a2ce-145">Transferów buforowany, jest kształtu kanału natywnego <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-145">For buffered transfers, the native channel shape is <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span> <span data-ttu-id="5a2ce-146">Transferów przesyłany strumieniowo, są natywnego kanały <xref:System.ServiceModel.Channels.IRequestChannel> i <xref:System.ServiceModel.Channels.IReplyChannel>.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-146">For streamed transfers, the native channels are <xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span> <span data-ttu-id="5a2ce-147">Zmienianie trybu transferu w istniejących aplikacji, która wykorzystuje te transporty bezpośrednio (to znaczy nie za pomocą kontraktu usługi) konieczna jest zmiana kształtu kanału oczekiwanego fabryk kanałów i odbiorników.</span><span class="sxs-lookup"><span data-stu-id="5a2ce-147">Changing the transfer mode in an existing application that uses these transports directly (that is, not through a service contract) requires changing the expected channel shape for channel factories and listeners.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5a2ce-148">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="5a2ce-148">See Also</span></span>  
 [<span data-ttu-id="5a2ce-149">Instrukcje: włączanie przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="5a2ce-149">How to: Enable Streaming</span></span>](../../../../docs/framework/wcf/feature-details/how-to-enable-streaming.md)
