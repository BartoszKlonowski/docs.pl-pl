---
title: Strumieniowy transfer komunikatów
ms.date: 03/30/2017
ms.assetid: 72a47a51-e5e7-4b76-b24a-299d51e0ae5a
ms.openlocfilehash: 4b90e5bf15f5cb1c4684a3ba224371f6cc232034
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "96246332"
---
# <a name="streaming-message-transfer"></a><span data-ttu-id="40b7e-102">Strumieniowy transfer komunikatów</span><span class="sxs-lookup"><span data-stu-id="40b7e-102">Streaming Message Transfer</span></span>

<span data-ttu-id="40b7e-103">Transporty programu Windows Communication Foundation (WCF) obsługują dwa tryby przesyłania komunikatów:</span><span class="sxs-lookup"><span data-stu-id="40b7e-103">Windows Communication Foundation (WCF) transports support two modes for transferring messages:</span></span>  
  
- <span data-ttu-id="40b7e-104">Transfery buforowane przechowują całą wiadomość w buforze pamięci do momentu zakończenia transferu.</span><span class="sxs-lookup"><span data-stu-id="40b7e-104">Buffered transfers hold the entire message in a memory buffer until the transfer is complete.</span></span> <span data-ttu-id="40b7e-105">Komunikat buforowany musi być całkowicie dostarczony przed odczytaniem przez odbiorcę.</span><span class="sxs-lookup"><span data-stu-id="40b7e-105">A buffered message must be completely delivered before a receiver can read it.</span></span>  
  
- <span data-ttu-id="40b7e-106">Transfery przesyłane strumieniowo uwidaczniają komunikat jako strumień.</span><span class="sxs-lookup"><span data-stu-id="40b7e-106">Streamed transfers expose the message as a stream.</span></span> <span data-ttu-id="40b7e-107">Odbiorca zacznie przetwarzać komunikat, zanim zostanie on całkowicie dostarczony.</span><span class="sxs-lookup"><span data-stu-id="40b7e-107">The receiver starts processing the message before it is completely delivered.</span></span>  
  
- <span data-ttu-id="40b7e-108">Transfery przesyłane strumieniowo mogą zwiększyć skalowalność usługi, eliminując konieczność stosowania dużych buforów pamięci.</span><span class="sxs-lookup"><span data-stu-id="40b7e-108">Streamed transfers can improve the scalability of a service by eliminating the requirement for large memory buffers.</span></span> <span data-ttu-id="40b7e-109">Bez względu na to, czy zmiana trybu transferu zwiększa skalowalność, zależy od rozmiaru transferowanych komunikatów.</span><span class="sxs-lookup"><span data-stu-id="40b7e-109">Whether changing the transfer mode improves scalability depends on the size of the messages being transferred.</span></span> <span data-ttu-id="40b7e-110">Duże rozmiary komunikatów preferują korzystanie z transferów przesyłanych strumieniowo.</span><span class="sxs-lookup"><span data-stu-id="40b7e-110">Large message sizes favor using streamed transfers.</span></span>  
  
 <span data-ttu-id="40b7e-111">Domyślnie transporty HTTP, TCP/IP i nazwanego potoku używają buforowanych transferów.</span><span class="sxs-lookup"><span data-stu-id="40b7e-111">By default, the HTTP, TCP/IP, and named pipe transports use buffered transfers.</span></span> <span data-ttu-id="40b7e-112">W tym dokumencie opisano sposób przełączania tych transportów z buforowanego do trybu transferu strumieniowego i konsekwencji tego działania.</span><span class="sxs-lookup"><span data-stu-id="40b7e-112">This document describes how to switch these transports from a buffered to streamed transfer mode and the consequences of doing so.</span></span>  
  
## <a name="enabling-streamed-transfers"></a><span data-ttu-id="40b7e-113">Włączanie transferu strumieniowego</span><span class="sxs-lookup"><span data-stu-id="40b7e-113">Enabling Streamed Transfers</span></span>  

 <span data-ttu-id="40b7e-114">Wybór między trybami transferu buforowanego i przesyłanym strumieniowo odbywa się na elemencie powiązania transportu.</span><span class="sxs-lookup"><span data-stu-id="40b7e-114">Selecting between buffered and streamed transfer modes is done on the binding element of the transport.</span></span> <span data-ttu-id="40b7e-115">Element Binding ma właściwość, <xref:System.ServiceModel.TransferMode> która może być ustawiona na `Buffered` , `Streamed` , `StreamedRequest` , lub `StreamedResponse` .</span><span class="sxs-lookup"><span data-stu-id="40b7e-115">The binding element has a <xref:System.ServiceModel.TransferMode> property that can be set to `Buffered`, `Streamed`, `StreamedRequest`, or `StreamedResponse`.</span></span> <span data-ttu-id="40b7e-116">Ustawienie trybu transferu w taki sposób, aby `Streamed` włączyć komunikację przesyłania strumieniowego w obu kierunkach.</span><span class="sxs-lookup"><span data-stu-id="40b7e-116">Setting the transfer mode to `Streamed` enables streaming communication in both directions.</span></span> <span data-ttu-id="40b7e-117">Ustawienie trybu transferu na `StreamedRequest` lub `StreamedResponse` umożliwia komunikację przesyłania strumieniowego tylko w określonym kierunku.</span><span class="sxs-lookup"><span data-stu-id="40b7e-117">Setting the transfer mode to `StreamedRequest` or `StreamedResponse` enables streaming communication in the indicated direction only.</span></span>  
  
 <span data-ttu-id="40b7e-118"><xref:System.ServiceModel.BasicHttpBinding>Powiązania, <xref:System.ServiceModel.NetTcpBinding> , i <xref:System.ServiceModel.NetNamedPipeBinding> uwidaczniają <xref:System.ServiceModel.TransferMode> Właściwość.</span><span class="sxs-lookup"><span data-stu-id="40b7e-118">The <xref:System.ServiceModel.BasicHttpBinding>, <xref:System.ServiceModel.NetTcpBinding>, and <xref:System.ServiceModel.NetNamedPipeBinding> bindings expose the <xref:System.ServiceModel.TransferMode> property.</span></span> <span data-ttu-id="40b7e-119">W przypadku innych transportów należy utworzyć niestandardowe powiązanie, aby ustawić tryb transferu.</span><span class="sxs-lookup"><span data-stu-id="40b7e-119">For other transports, you must create a custom binding to set the transfer mode.</span></span>  
  
 <span data-ttu-id="40b7e-120">Decyzja o użyciu buforowanych lub przesyłanych strumieniowo jest lokalną decyzją punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="40b7e-120">The decision to use either buffered or streamed transfers is a local decision of the endpoint.</span></span> <span data-ttu-id="40b7e-121">W przypadku transportów HTTP tryb transferu nie jest propagowany przez połączenie lub do serwerów i innych pośredników.</span><span class="sxs-lookup"><span data-stu-id="40b7e-121">For HTTP transports, the transfer mode does not propagate across a connection, or to servers and other intermediaries.</span></span> <span data-ttu-id="40b7e-122">Ustawienie trybu transferu nie jest odzwierciedlone w opisie interfejsu usługi.</span><span class="sxs-lookup"><span data-stu-id="40b7e-122">Setting the transfer mode is not reflected in the description of the service interface.</span></span> <span data-ttu-id="40b7e-123">Po wygenerowaniu klasy klienta dla usługi należy edytować plik konfiguracji usług przeznaczonych do użycia z transferem strumieniowym w celu ustawienia trybu.</span><span class="sxs-lookup"><span data-stu-id="40b7e-123">After generating a client class for a service, you must edit the configuration file for services intended to be used with streamed transfers to set the mode.</span></span> <span data-ttu-id="40b7e-124">W przypadku transportów TCP i nazwanych potoków tryb transferu jest propagowany jako potwierdzenie zasad.</span><span class="sxs-lookup"><span data-stu-id="40b7e-124">For TCP and named pipe transports, the transfer mode is propagated as a policy assertion.</span></span>  
  
 <span data-ttu-id="40b7e-125">Aby zapoznać się z przykładami kodu, zobacz [How to: Enable Streaming](how-to-enable-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="40b7e-125">For code samples, see [How to: Enable Streaming](how-to-enable-streaming.md).</span></span>  
  
## <a name="enabling-asynchronous-streaming"></a><span data-ttu-id="40b7e-126">Włączanie przesyłania strumieniowego asynchronicznego</span><span class="sxs-lookup"><span data-stu-id="40b7e-126">Enabling Asynchronous Streaming</span></span>  

 <span data-ttu-id="40b7e-127">Aby włączyć asynchroniczne przesyłanie strumieniowe, Dodaj  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> zachowanie punktu końcowego do hosta usługi i ustaw jego <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> Właściwość na `true` .</span><span class="sxs-lookup"><span data-stu-id="40b7e-127">To enable asynchronous streaming, add the  <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior> endpoint behavior to the service host and set its <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.AsynchronousSendEnabled%2A> property to `true`.</span></span>  
  
 <span data-ttu-id="40b7e-128">Ta wersja programu WCF ADDE również możliwość wysyłania strumieniowych asynchronicznie na stronie wysyłającej.</span><span class="sxs-lookup"><span data-stu-id="40b7e-128">This version of WCF also adde the capability of true asynchronous streaming on the send side.</span></span> <span data-ttu-id="40b7e-129">Poprawia to skalowalność usługi w scenariuszach, w których przesyła strumieniowo komunikaty do wielu klientów, z których niektóre są wolne do odczytu; prawdopodobnie z powodu przeciążenia sieci lub nie są w ogóle odczytywane.</span><span class="sxs-lookup"><span data-stu-id="40b7e-129">This improves scalability of the service in scenarios where it is streaming messages to multiple clients some of which are slow in reading; possibly due to network congestion or are not reading at all.</span></span> <span data-ttu-id="40b7e-130">W tych scenariuszach usługa WCF nie blokuje już pojedynczych wątków w usłudze na klienta.</span><span class="sxs-lookup"><span data-stu-id="40b7e-130">In these scenarios WCF no longer blocks individual threads on the service per client.</span></span> <span data-ttu-id="40b7e-131">Dzięki temu usługa może przetwarzać wielu kolejnych klientów w taki sposób, aby zwiększyć skalowalność usługi.</span><span class="sxs-lookup"><span data-stu-id="40b7e-131">This ensures that the service is able to process many more clients thereby improving the scalability of the service.</span></span>  
  
## <a name="restrictions-on-streamed-transfers"></a><span data-ttu-id="40b7e-132">Ograniczenia dotyczące transferów przesyłanych strumieniowo</span><span class="sxs-lookup"><span data-stu-id="40b7e-132">Restrictions on Streamed Transfers</span></span>  

 <span data-ttu-id="40b7e-133">Użycie trybu transferu strumieniowego powoduje wymuszenie dodatkowych ograniczeń przez czas wykonywania.</span><span class="sxs-lookup"><span data-stu-id="40b7e-133">Using the streamed transfer mode causes the run time to enforce additional restrictions.</span></span>  
  
 <span data-ttu-id="40b7e-134">Operacje wykonywane w ramach transportowego przesyłania strumieniowego mogą mieć kontrakt z co najwyżej jednym parametrem wejściowym lub wyjściowym.</span><span class="sxs-lookup"><span data-stu-id="40b7e-134">Operations that occur across a streamed transport can have a contract with at most one input or output parameter.</span></span> <span data-ttu-id="40b7e-135">Ten parametr odnosi się do całej treści wiadomości i musi być <xref:System.ServiceModel.Channels.Message> typem pochodnym <xref:System.IO.Stream> lub <xref:System.Xml.Serialization.IXmlSerializable> implementacją.</span><span class="sxs-lookup"><span data-stu-id="40b7e-135">That parameter corresponds to the entire body of the message and must be a <xref:System.ServiceModel.Channels.Message>, a derived type of <xref:System.IO.Stream>, or an <xref:System.Xml.Serialization.IXmlSerializable> implementation.</span></span> <span data-ttu-id="40b7e-136">Posiadanie wartości zwracanej dla operacji jest równoważne z parametrem wyjściowym.</span><span class="sxs-lookup"><span data-stu-id="40b7e-136">Having a return value for an operation is equivalent to having an output parameter.</span></span>  
  
 <span data-ttu-id="40b7e-137">Niektóre funkcje WCF, takie jak niezawodne komunikaty, transakcje i zabezpieczenia na poziomie komunikatów protokołu SOAP, polegają na buforowaniu komunikatów przesyłanych.</span><span class="sxs-lookup"><span data-stu-id="40b7e-137">Some WCF features, such as reliable messaging, transactions, and SOAP message-level security, rely on buffering messages for transmissions.</span></span> <span data-ttu-id="40b7e-138">Korzystanie z tych funkcji może zmniejszyć lub wyeliminować korzyści wynikające z wydajności uzyskane przy użyciu przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="40b7e-138">Using these features may reduce or eliminate the performance benefits gained by using streaming.</span></span> <span data-ttu-id="40b7e-139">Aby zabezpieczyć strumień przesyłanych strumieniowo, należy używać tylko zabezpieczeń na poziomie transportu lub zabezpieczeń na poziomie transportu oraz zabezpieczeń komunikatów opartych na uwierzytelnianiu.</span><span class="sxs-lookup"><span data-stu-id="40b7e-139">To secure a streamed transport, use transport-level security only or use transport-level security plus authentication-only message security.</span></span>  
  
 <span data-ttu-id="40b7e-140">Nagłówki protokołu SOAP są zawsze buforowane, nawet gdy tryb transferu jest ustawiony na przesyłanie strumieniowe.</span><span class="sxs-lookup"><span data-stu-id="40b7e-140">SOAP headers are always buffered, even when the transfer mode is set to streamed.</span></span> <span data-ttu-id="40b7e-141">Nagłówki wiadomości nie mogą przekraczać rozmiaru `MaxBufferSize` przydziału transportowego.</span><span class="sxs-lookup"><span data-stu-id="40b7e-141">The headers for a message must not exceed the size of the `MaxBufferSize` transport quota.</span></span> <span data-ttu-id="40b7e-142">Aby uzyskać więcej informacji na temat tego ustawienia, zobacz [transport Transports](transport-quotas.md).</span><span class="sxs-lookup"><span data-stu-id="40b7e-142">For more information about this setting, see [Transport Quotas](transport-quotas.md).</span></span>  
  
## <a name="differences-between-buffered-and-streamed-transfers"></a><span data-ttu-id="40b7e-143">Różnice między buforowanym i przesyłanym strumieniowo transferem</span><span class="sxs-lookup"><span data-stu-id="40b7e-143">Differences Between Buffered and Streamed Transfers</span></span>  

 <span data-ttu-id="40b7e-144">Zmiana trybu transferu z buforowanego na strumień powoduje także zmianę kształtu kanału natywnego transportów TCP i nazwanego potoku.</span><span class="sxs-lookup"><span data-stu-id="40b7e-144">Changing the transfer mode from buffered to streamed also changes the native channel shape of the TCP and named pipe transports.</span></span> <span data-ttu-id="40b7e-145">W przypadku transferów buforowanych kształt kanału natywnego to <xref:System.ServiceModel.Channels.IDuplexSessionChannel> .</span><span class="sxs-lookup"><span data-stu-id="40b7e-145">For buffered transfers, the native channel shape is <xref:System.ServiceModel.Channels.IDuplexSessionChannel>.</span></span> <span data-ttu-id="40b7e-146">W przypadku transferów przesyłanych strumieniowo kanały natywne to <xref:System.ServiceModel.Channels.IRequestChannel> i <xref:System.ServiceModel.Channels.IReplyChannel> .</span><span class="sxs-lookup"><span data-stu-id="40b7e-146">For streamed transfers, the native channels are <xref:System.ServiceModel.Channels.IRequestChannel> and <xref:System.ServiceModel.Channels.IReplyChannel>.</span></span> <span data-ttu-id="40b7e-147">Zmiana trybu transferu w istniejącej aplikacji, która używa tych transportów bezpośrednio (czyli nie przez kontrakt usługi) wymaga zmiany oczekiwanego kształtu kanału dla fabryk i odbiorników kanałów.</span><span class="sxs-lookup"><span data-stu-id="40b7e-147">Changing the transfer mode in an existing application that uses these transports directly (that is, not through a service contract) requires changing the expected channel shape for channel factories and listeners.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="40b7e-148">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="40b7e-148">See also</span></span>

- [<span data-ttu-id="40b7e-149">Instrukcje: włączanie przesyłania strumieniowego</span><span class="sxs-lookup"><span data-stu-id="40b7e-149">How to: Enable Streaming</span></span>](how-to-enable-streaming.md)
