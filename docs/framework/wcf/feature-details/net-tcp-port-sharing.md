---
title: Współużytkowanie portów w składniku Net.TCP
ms.date: 03/30/2017
helpviewer_keywords:
- port activation [WCF]
- port sharing [WCF]
ms.assetid: f13692ee-a179-4439-ae72-50db9534eded
ms.openlocfilehash: b04266b15f786e3a5a93ac1e9fff1754c397ccd4
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/18/2019
ms.locfileid: "59073696"
---
# <a name="nettcp-port-sharing"></a><span data-ttu-id="98683-102">Współużytkowanie portów w składniku Net.TCP</span><span class="sxs-lookup"><span data-stu-id="98683-102">Net.TCP Port Sharing</span></span>
<span data-ttu-id="98683-103">Windows Communication Foundation (WCF) zapewnia nowy Protokół sieci oparte na protokole TCP (net.tcp://) komunikację o wysokiej wydajności.</span><span class="sxs-lookup"><span data-stu-id="98683-103">Windows Communication Foundation (WCF) provides a new TCP-based network protocol (net.tcp://) for high-performance communication.</span></span> <span data-ttu-id="98683-104">Usługi WCF wprowadza również nowy składnik systemu, usługi udostępniania portów Net.TCP, która umożliwia użycie portów net.tcp być współużytkowane przez wiele procesów użytkownika.</span><span class="sxs-lookup"><span data-stu-id="98683-104">WCF also introduces a new system component, the Net.TCP Port Sharing Service that enables net.tcp ports to be shared across multiple user processes.</span></span>  
  
## <a name="background-and-motivation"></a><span data-ttu-id="98683-105">Tło i motywację</span><span class="sxs-lookup"><span data-stu-id="98683-105">Background and Motivation</span></span>  
 <span data-ttu-id="98683-106">Protokół TCP/IP została wprowadzona, tylko niewielka liczba protokołów aplikacji tworzone z niego korzystać.</span><span class="sxs-lookup"><span data-stu-id="98683-106">When the TCP/IP protocol was first introduced, only a small number of application protocols made use of it.</span></span> <span data-ttu-id="98683-107">TCP/IP używany numery portów do rozróżnienia między aplikacjami, przypisując unikatowy 16-bitowy numer portu dla każdego protokołu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="98683-107">TCP/IP used port numbers to differentiate between applications by assigning a unique 16-bit port number to each application protocol.</span></span> <span data-ttu-id="98683-108">Na przykład ruch HTTP jest obecnie standardowym by używał portu TCP 80 SMTP używa portu TCP 25 i protokół FTP używa portów TCP 20 i 21.</span><span class="sxs-lookup"><span data-stu-id="98683-108">For example, HTTP traffic today is standardized to use TCP port 80, SMTP uses TCP port 25, and FTP uses TCP ports 20 and 21.</span></span> <span data-ttu-id="98683-109">Inne aplikacje korzystające z protokołu TCP jako transportu wybrać inny numer portu dostępne, zgodnie z Konwencją lub za pośrednictwem formalne normalizacji.</span><span class="sxs-lookup"><span data-stu-id="98683-109">Other applications using TCP as a transport can choose another available port number, either by convention or through formal standardization.</span></span>  
  
 <span data-ttu-id="98683-110">Za pomocą numerów portów do rozróżniania między aplikacjami wystąpiły problemy z zabezpieczeniami.</span><span class="sxs-lookup"><span data-stu-id="98683-110">Using port numbers to distinguish between applications had security problems.</span></span> <span data-ttu-id="98683-111">Ogólnie zapór zablokować ruch TCP na wszystkich portach, z wyjątkiem kilku punktów wejścia dobrze znanego, dzięki czemu wdrożenie aplikacji korzystającej z niestandardowego portu jest często skomplikowany lub nawet niemożliwe z powodu obecności zapory firmowymi i prywatnymi.</span><span class="sxs-lookup"><span data-stu-id="98683-111">Firewalls are generally configured to block TCP traffic on all ports except for a few well-known entry points, so deploying an application that uses a non-standard port is often complicated or even impossible due to the presence of corporate and personal firewalls.</span></span> <span data-ttu-id="98683-112">Aplikacje, które mogą komunikować się za pośrednictwem standardowych, dobrze znanych portów, które są już dozwolone, ale zmniejszyć obszar ataków zewnętrznych.</span><span class="sxs-lookup"><span data-stu-id="98683-112">Applications that can communicate over standard, well-known ports that are already permitted, reduce the external attack surface.</span></span> <span data-ttu-id="98683-113">Wiele aplikacji sieciowych, korzystaj z HTTP protokołu, ponieważ większość zapór są domyślnie skonfigurowane, aby zezwolić na ruch na porcie 80 protokołu TCP.</span><span class="sxs-lookup"><span data-stu-id="98683-113">Many network applications make use of the HTTP protocol because most firewalls are configured by default to allow traffic on TCP port 80.</span></span>  
  
 <span data-ttu-id="98683-114">HTTP. SYS modelu, w którym ruch dla wielu różnych aplikacji protokołu HTTP jest multipleksowany do jednego portu TCP stał się standardowego dla Windows platform.</span><span class="sxs-lookup"><span data-stu-id="98683-114">The HTTP.SYS model in which traffic for many different HTTP applications is multiplexed onto a single TCP port has become standard on the Windows platform.</span></span> <span data-ttu-id="98683-115">Dzięki temu można wspólnego punktu kontroli zapory Administratorzy, zapewniając deweloperom aplikacji w celu zminimalizowania kosztów wdrożenia, tworzenia nowych aplikacji, które mogą ułatwić korzystanie z sieci.</span><span class="sxs-lookup"><span data-stu-id="98683-115">This provides a common point of control for firewall administrators while allowing application developers to minimize the deployment cost of building new applications that can make use of the network.</span></span>  
  
 <span data-ttu-id="98683-116">Możliwość udostępniania portów dla wielu aplikacji HTTP dawna funkcji programu Internetowe usługi informacyjne (IIS).</span><span class="sxs-lookup"><span data-stu-id="98683-116">The ability to share ports across multiple HTTP applications has long been a feature of Internet Information Services (IIS).</span></span> <span data-ttu-id="98683-117">Jednakże było tylko w przypadku wprowadzenia protokołu HTTP. SYS (tryb jądra odbiornika protokołu HTTP) przy użyciu [!INCLUDE[iis601](../../../../includes/iis601-md.md)] pełni uogólniony tej infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="98683-117">However, it was only with the introduction of HTTP.SYS (the kernel-mode HTTP protocol listener) with [!INCLUDE[iis601](../../../../includes/iis601-md.md)] that this infrastructure was fully generalized.</span></span> <span data-ttu-id="98683-118">W efekcie HTTP. SYS umożliwia użytkownika jest swobodny procesom współużytkowanie portów TCP dedykowany dla ruchu HTTP.</span><span class="sxs-lookup"><span data-stu-id="98683-118">In effect, HTTP.SYS allows arbitrary user processes to share the TCP ports dedicated to HTTP traffic.</span></span> <span data-ttu-id="98683-119">Ta funkcja umożliwia wielu aplikacji HTTP, które będą mogły nadal współistnieć na tym samym komputerze fizycznych w oddzielnych, izolowane procesów podczas udostępniania infrastruktury sieciowej, wymagane do wysyłania i odbierania ruchu za pośrednictwem portu TCP 80.</span><span class="sxs-lookup"><span data-stu-id="98683-119">This capability allows many HTTP applications to coexist on the same physical machine in separate, isolated processes while sharing the network infrastructure required to send and receive traffic over TCP port 80.</span></span> <span data-ttu-id="98683-120">Usługi udostępniania portów Net.TCP umożliwia ten sam typ udostępniania dla aplikacji net.tcp portów.</span><span class="sxs-lookup"><span data-stu-id="98683-120">The Net.TCP Port Sharing Service enables the same type of port sharing for net.tcp applications.</span></span>  
  
## <a name="port-sharing-architecture"></a><span data-ttu-id="98683-121">Architektura współużytkowania portów</span><span class="sxs-lookup"><span data-stu-id="98683-121">Port Sharing Architecture</span></span>  
 <span data-ttu-id="98683-122">Architektura współużytkowanie portów w programie WCF ma trzy główne składniki:</span><span class="sxs-lookup"><span data-stu-id="98683-122">The Port Sharing architecture in WCF has three main components:</span></span>  
  
-   <span data-ttu-id="98683-123">Proces roboczy: Żaden proces, komunikacji za pośrednictwem net.tcp:// przy użyciu udostępnionych portów.</span><span class="sxs-lookup"><span data-stu-id="98683-123">A Worker Process: Any process communicating over net.tcp:// using shared ports.</span></span>  
  
-   <span data-ttu-id="98683-124">Transportu TCP usługi WCF: Implementuje protokół net.tcp://.</span><span class="sxs-lookup"><span data-stu-id="98683-124">The WCF TCP transport: Implements the net.tcp:// protocol.</span></span>  
  
-   <span data-ttu-id="98683-125">Usługa udostępniania portów Net.TCP: Umożliwia wielu procesów roboczych na udostępnianie tego samego portu TCP.</span><span class="sxs-lookup"><span data-stu-id="98683-125">The Net.TCP Port Sharing Service: Allows many worker processes to share the same TCP port.</span></span>  
  
 <span data-ttu-id="98683-126">Usługi udostępniania portów Net.TCP jest usługa Windows trybu użytkownika, która akceptuje połączenia net.tcp:// imieniu procesów roboczych, łączących się za jego pośrednictwem.</span><span class="sxs-lookup"><span data-stu-id="98683-126">The Net.TCP Port Sharing Service is a user-mode Windows service that accepts net.tcp:// connections on behalf of the worker processes that connect through it.</span></span> <span data-ttu-id="98683-127">Po odebraniu połączenia z gniazdem współużytkowania portów bada strumienia komunikatów przychodzących w celu uzyskania adresu docelowego.</span><span class="sxs-lookup"><span data-stu-id="98683-127">When a socket connection arrives, the port sharing service inspects the incoming message stream to obtain its destination address.</span></span> <span data-ttu-id="98683-128">Oparte na ten adres, port udostępnianej usługi może kierować strumień danych do aplikacji, które ostatecznie przetwarza je.</span><span class="sxs-lookup"><span data-stu-id="98683-128">Based on this address, the port sharing service can route the data stream to the application that ultimately processes it.</span></span>  
  
 <span data-ttu-id="98683-129">Gdy usługa WCF, która używa net.tcp:// udostępniania portów, infrastruktura transportu TCP usługi WCF nie bezpośrednio otworzyć gniazda TCP w procesie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="98683-129">When a WCF service that uses net.tcp:// port sharing opens, the WCF TCP transport infrastructure does not directly open a TCP socket in the application process.</span></span> <span data-ttu-id="98683-130">Zamiast tego infrastruktura transportu rejestruje usługi adres podstawowy identyfikator URI (Uniform Resource) za pomocą usługi udostępniania portów Net.TCP i czeka na port udostępnianej usługi, aby nasłuchiwać komunikatów w jej imieniu.</span><span class="sxs-lookup"><span data-stu-id="98683-130">Instead, the transport infrastructure registers the service’s base address Uniform Resource Identifier (URI) with the Net.TCP Port Sharing Service and waits for the port sharing service to listen for messages on its behalf.</span></span>  <span data-ttu-id="98683-131">Port udostępnianej usługi wysyła komunikaty adresowane do usługi aplikacji, podczas ich dostarczania.</span><span class="sxs-lookup"><span data-stu-id="98683-131">The port sharing service dispatches messages addressed to the application service as they arrive.</span></span>  
  
## <a name="installing-port-sharing"></a><span data-ttu-id="98683-132">Instalowanie współużytkowania portów</span><span class="sxs-lookup"><span data-stu-id="98683-132">Installing Port Sharing</span></span>  
 <span data-ttu-id="98683-133">Usługi udostępniania portów Net.TCP jest dostępna we wszystkich systemach operacyjnych, które obsługują [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], ale usługa nie jest domyślnie włączona.</span><span class="sxs-lookup"><span data-stu-id="98683-133">The Net.TCP Port Sharing Service is available on all operating systems that support [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], but the service is not enabled by default.</span></span> <span data-ttu-id="98683-134">Ze względów bezpieczeństwa administrator musi ręcznie włączyć usługi udostępniania portów Net.TCP przed pierwszym użyciu.</span><span class="sxs-lookup"><span data-stu-id="98683-134">As a security precaution, an administrator must manually enable the Net.TCP Port Sharing Service prior to first use.</span></span> <span data-ttu-id="98683-135">Usługi udostępniania portów Net.TCP udostępnia opcje konfiguracji, które umożliwiają manipulowanie pewne cechy gniazd sieciowych należących do współużytkowania portów.</span><span class="sxs-lookup"><span data-stu-id="98683-135">The Net.TCP Port Sharing Service exposes configuration options that allow you to manipulate several characteristics of the network sockets owned by the port sharing service.</span></span> <span data-ttu-id="98683-136">Aby uzyskać więcej informacji, zobacz [jak: Włączanie usługi współużytkowania portów Net.TCP](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md).</span><span class="sxs-lookup"><span data-stu-id="98683-136">For more information, see [How to: Enable the Net.TCP Port Sharing Service](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md).</span></span>  
  
## <a name="using-nettcp-port-sharing-in-an-application"></a><span data-ttu-id="98683-137">Przy użyciu portów Net.tcp, udostępnianie w aplikacji</span><span class="sxs-lookup"><span data-stu-id="98683-137">Using Net.tcp Port Sharing in an Application</span></span>  
 <span data-ttu-id="98683-138">Najprostszym sposobem na korzystanie z portu net.tcp:// udostępnianie w aplikację WCF jest do udostępnienia usługi za pomocą <xref:System.ServiceModel.NetTcpBinding> a następnie włączyć usługi udostępniania portów Net.TCP przy użyciu <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="98683-138">The easiest way to use net.tcp:// port sharing in your WCF application is to expose a service using the <xref:System.ServiceModel.NetTcpBinding> and then to enable Net.TCP Port Sharing Service using the <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property.</span></span>  
  
 <span data-ttu-id="98683-139">Aby uzyskać więcej informacji na temat jak to zrobić, zobacz [jak: Konfigurowanie usługi WCF na potrzeby współużytkowania portów](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md).</span><span class="sxs-lookup"><span data-stu-id="98683-139">For more information about how to do this, see [How to: Configure a WCF Service to Use Port Sharing](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md).</span></span>  
  
## <a name="security-implications-of-port-sharing"></a><span data-ttu-id="98683-140">Ryzyko związane z współużytkowania portów</span><span class="sxs-lookup"><span data-stu-id="98683-140">Security Implications of Port Sharing</span></span>  
 <span data-ttu-id="98683-141">Chociaż usługi udostępniania portów Net.TCP warstwy przetwarzania między aplikacjami i sieci, aplikacje, które używają współużytkowania portów nadal powinien być zabezpieczony, tak, jakby były one bezpośrednio nasłuchiwanie w sieci.</span><span class="sxs-lookup"><span data-stu-id="98683-141">Although the Net.TCP Port Sharing Service provides a layer of processing between applications and the network, applications that use port sharing should still be secured as if they were directly listening on the network.</span></span> <span data-ttu-id="98683-142">Ściślej mówiąc aplikacje, które używają współużytkowania portów należy ocenić uprawnień procesów, na których działają.</span><span class="sxs-lookup"><span data-stu-id="98683-142">Specifically, applications that use port sharing should evaluate the process privileges under which they run.</span></span> <span data-ttu-id="98683-143">Rozważ uruchomienie aplikacji przy użyciu wbudowanego konta Usługa sieciowa działa z minimalnym zestawem uprawnień procesów wymaganych do komunikacji sieciowej.</span><span class="sxs-lookup"><span data-stu-id="98683-143">Consider running your application using the built-in Network Service account, which runs with the minimal set of process privileges required for network communication.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="98683-144">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="98683-144">See also</span></span>

- [<span data-ttu-id="98683-145">Konfigurowanie usługi współużytkowania portów Net.TCP</span><span class="sxs-lookup"><span data-stu-id="98683-145">Configuring the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/configuring-the-net-tcp-port-sharing-service.md)
- [<span data-ttu-id="98683-146">Hosting</span><span class="sxs-lookup"><span data-stu-id="98683-146">Hosting</span></span>](../../../../docs/framework/wcf/feature-details/hosting.md)
- [<span data-ttu-id="98683-147">Instrukcje: Konfigurowanie usługi WCF na potrzeby współużytkowania portów</span><span class="sxs-lookup"><span data-stu-id="98683-147">How to: Configure a WCF Service to Use Port Sharing</span></span>](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md)
- [<span data-ttu-id="98683-148">Instrukcje: Włączanie usługi współużytkowania portów Net.TCP</span><span class="sxs-lookup"><span data-stu-id="98683-148">How to: Enable the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)
