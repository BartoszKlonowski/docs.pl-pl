---
title: "Współużytkowanie portów w składniku Net.TCP"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- port activation [WCF]
- port sharing [WCF]
ms.assetid: f13692ee-a179-4439-ae72-50db9534eded
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 013c9e963ca75cc612d869a55b33d69aebbcad33
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="nettcp-port-sharing"></a><span data-ttu-id="7c781-102">Współużytkowanie portów w składniku Net.TCP</span><span class="sxs-lookup"><span data-stu-id="7c781-102">Net.TCP Port Sharing</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="7c781-103">zapewnia nowy protokół sieciach opartych na protokole TCP (net.tcp://) komunikację wysokiej wydajności.</span><span class="sxs-lookup"><span data-stu-id="7c781-103"> provides a new TCP-based network protocol (net.tcp://) for high-performance communication.</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="7c781-104">wprowadza również nowy składnik systemu usługi udostępniania portów Net.TCP, który umożliwia porty net.tcp, które mają być udostępniane wielu procesom użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7c781-104"> also introduces a new system component, the Net.TCP Port Sharing Service that enables net.tcp ports to be shared across multiple user processes.</span></span>  
  
## <a name="background-and-motivation"></a><span data-ttu-id="7c781-105">Tło i Motywacją</span><span class="sxs-lookup"><span data-stu-id="7c781-105">Background and Motivation</span></span>  
 <span data-ttu-id="7c781-106">Protokół TCP/IP została wprowadzona, tylko niewielka liczba protokołów aplikacji wprowadzane z niego korzystać.</span><span class="sxs-lookup"><span data-stu-id="7c781-106">When the TCP/IP protocol was first introduced, only a small number of application protocols made use of it.</span></span> <span data-ttu-id="7c781-107">Numery portów jest używany przez protokół TCP/IP do rozróżniania między aplikacjami, przypisując unikatowy 16-bitowy numer portu dla każdego protokołu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7c781-107">TCP/IP used port numbers to differentiate between applications by assigning a unique 16-bit port number to each application protocol.</span></span> <span data-ttu-id="7c781-108">Na przykład ruch HTTP jest obecnie standardowym by używał portu TCP 80 SMTP używa portu TCP 25 i FTP używa portów TCP 20 i 21.</span><span class="sxs-lookup"><span data-stu-id="7c781-108">For example, HTTP traffic today is standardized to use TCP port 80, SMTP uses TCP port 25, and FTP uses TCP ports 20 and 21.</span></span> <span data-ttu-id="7c781-109">Inne aplikacje korzystające z protokołu TCP jako transportu wybrać inny numer portu dostępne przez Konwencję lub za pośrednictwem posiadanie normalizacji.</span><span class="sxs-lookup"><span data-stu-id="7c781-109">Other applications using TCP as a transport can choose another available port number, either by convention or through formal standardization.</span></span>  
  
 <span data-ttu-id="7c781-110">Używanie numerów portów do rozróżniania między aplikacjami wystąpiły problemy zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="7c781-110">Using port numbers to distinguish between applications had security problems.</span></span> <span data-ttu-id="7c781-111">Zapory zwykle są skonfigurowane do blokowania ruch TCP na wszystkich portach, z wyjątkiem kilku punktów wejścia dobrze znany, więc wdrożenie aplikacji korzystającej z portem niestandardowym jest często skomplikowany lub nawet niemożliwe z powodu obecności zapór firmowymi i prywatnymi.</span><span class="sxs-lookup"><span data-stu-id="7c781-111">Firewalls are generally configured to block TCP traffic on all ports except for a few well-known entry points, so deploying an application that uses a non-standard port is often complicated or even impossible due to the presence of corporate and personal firewalls.</span></span> <span data-ttu-id="7c781-112">Aplikacje, które mogą komunikować się za pośrednictwem standardowych, dobrze znanych portów, które są już dozwolone zmniejszyć obszar ataków zewnętrznych.</span><span class="sxs-lookup"><span data-stu-id="7c781-112">Applications that can communicate over standard, well-known ports that are already permitted, reduce the external attack surface.</span></span> <span data-ttu-id="7c781-113">Wiele aplikacji w sieci wykorzystuje HTTP protokołu, ponieważ większość zapór są domyślnie skonfigurowane, aby zezwolić na ruch na porcie TCP 80.</span><span class="sxs-lookup"><span data-stu-id="7c781-113">Many network applications make use of the HTTP protocol because most firewalls are configured by default to allow traffic on TCP port 80.</span></span>  
  
 <span data-ttu-id="7c781-114">HTTP. SYS modelu, w którym ruch na wiele aplikacji HTTP jest multipleksowany na pojedynczym portem TCP stał się standardowa na platformie systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="7c781-114">The HTTP.SYS model in which traffic for many different HTTP applications is multiplexed onto a single TCP port has become standard on the Windows platform.</span></span> <span data-ttu-id="7c781-115">Zapewnia to wspólny punkt kontroli zapory Administratorzy, umożliwiając deweloperom aplikacji minimalizuje to koszt wdrożenia tworzenie nowych aplikacji, które mogą ułatwić za pomocą sieci.</span><span class="sxs-lookup"><span data-stu-id="7c781-115">This provides a common point of control for firewall administrators while allowing application developers to minimize the deployment cost of building new applications that can make use of the network.</span></span>  
  
 <span data-ttu-id="7c781-116">Możliwość udostępniania portów dla wielu aplikacji HTTP dawna funkcji programu Internetowe usługi informacyjne (IIS).</span><span class="sxs-lookup"><span data-stu-id="7c781-116">The ability to share ports across multiple HTTP applications has long been a feature of Internet Information Services (IIS).</span></span> <span data-ttu-id="7c781-117">Jednak było tylko wraz z wprowadzeniem HTTP. SYS (odbiornika protokołu HTTP trybu jądra) z [!INCLUDE[iis601](../../../../includes/iis601-md.md)] który pełni został uogólniony tej infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="7c781-117">However, it was only with the introduction of HTTP.SYS (the kernel-mode HTTP protocol listener) with [!INCLUDE[iis601](../../../../includes/iis601-md.md)] that this infrastructure was fully generalized.</span></span> <span data-ttu-id="7c781-118">W rezultacie HTTP. SYS umożliwia udostępnianie portów TCP dedykowana dla ruchu HTTP procesów dowolnego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="7c781-118">In effect, HTTP.SYS allows arbitrary user processes to share the TCP ports dedicated to HTTP traffic.</span></span> <span data-ttu-id="7c781-119">Ta funkcja umożliwia współistnieć na tym samym komputerze fizycznych w oddzielnych, izolowane procesy podczas udostępniania infrastruktury sieciowej wymaganej do wysyłać i odbierać ruch przez TCP port 80 wiele aplikacji HTTP.</span><span class="sxs-lookup"><span data-stu-id="7c781-119">This capability allows many HTTP applications to coexist on the same physical machine in separate, isolated processes while sharing the network infrastructure required to send and receive traffic over TCP port 80.</span></span> <span data-ttu-id="7c781-120">Usługa udostępniania portów Net.TCP umożliwia portów net.tcp aplikacji do udostępniania tego samego typu.</span><span class="sxs-lookup"><span data-stu-id="7c781-120">The Net.TCP Port Sharing Service enables the same type of port sharing for net.tcp applications.</span></span>  
  
## <a name="port-sharing-architecture"></a><span data-ttu-id="7c781-121">Architektura Udostępnianie portów</span><span class="sxs-lookup"><span data-stu-id="7c781-121">Port Sharing Architecture</span></span>  
 <span data-ttu-id="7c781-122">Architektura Udostępnianie portów w [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ma trzy główne składniki:</span><span class="sxs-lookup"><span data-stu-id="7c781-122">The Port Sharing architecture in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] has three main components:</span></span>  
  
-   <span data-ttu-id="7c781-123">Proces roboczy: Żaden proces, komunikować się za pośrednictwem net.tcp:// przy użyciu udostępnionych portów.</span><span class="sxs-lookup"><span data-stu-id="7c781-123">A Worker Process: Any process communicating over net.tcp:// using shared ports.</span></span>  
  
-   <span data-ttu-id="7c781-124">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Transportu TCP: implementuje ten protokół net.tcp://.</span><span class="sxs-lookup"><span data-stu-id="7c781-124">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP transport: Implements the net.tcp:// protocol.</span></span>  
  
-   <span data-ttu-id="7c781-125">Usługa udostępniania portów Net.TCP: Umożliwia wielu procesów roboczych na współużytkowanie tego samego portu TCP.</span><span class="sxs-lookup"><span data-stu-id="7c781-125">The Net.TCP Port Sharing Service: Allows many worker processes to share the same TCP port.</span></span>  
  
 <span data-ttu-id="7c781-126">Usługa udostępniania portów Net.TCP jest usługą systemu Windows trybu użytkownika, która akceptuje połączenia net.tcp:// imieniu procesów roboczych łączących się za jego pośrednictwem.</span><span class="sxs-lookup"><span data-stu-id="7c781-126">The Net.TCP Port Sharing Service is a user-mode Windows service that accepts net.tcp:// connections on behalf of the worker processes that connect through it.</span></span> <span data-ttu-id="7c781-127">Po odebraniu połączenia gniazda usługi współużytkowania portów przeprowadzający przychodzący strumień komunikatu do uzyskiwania adresów docelowego.</span><span class="sxs-lookup"><span data-stu-id="7c781-127">When a socket connection arrives, the port sharing service inspects the incoming message stream to obtain its destination address.</span></span> <span data-ttu-id="7c781-128">Oparte na ten adres, usługi współużytkowania portów może kierować strumienia danych aplikacji, w której ostatecznie przetwarza je.</span><span class="sxs-lookup"><span data-stu-id="7c781-128">Based on this address, the port sharing service can route the data stream to the application that ultimately processes it.</span></span>  
  
 <span data-ttu-id="7c781-129">Gdy [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługi, która używa net.tcp:// udostępniania, portów [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] infrastruktura transportu TCP nie powoduje bezpośredniego otwarcia gniazda TCP w procesie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7c781-129">When a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that uses net.tcp:// port sharing opens, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] TCP transport infrastructure does not directly open a TCP socket in the application process.</span></span> <span data-ttu-id="7c781-130">Zamiast tego infrastruktura transportu rejestruje usługi adres podstawowy identyfikator URI (Uniform Resource) z usługi udostępniania portów Net.TCP i czeka na port udostępnianej usługi do nasłuchiwania wiadomości w jego imieniu.</span><span class="sxs-lookup"><span data-stu-id="7c781-130">Instead, the transport infrastructure registers the service’s base address Uniform Resource Identifier (URI) with the Net.TCP Port Sharing Service and waits for the port sharing service to listen for messages on its behalf.</span></span>  <span data-ttu-id="7c781-131">Usługi współużytkowania portów wysyła komunikaty adresowane do usługi aplikacji podczas ich dostarczania.</span><span class="sxs-lookup"><span data-stu-id="7c781-131">The port sharing service dispatches messages addressed to the application service as they arrive.</span></span>  
  
## <a name="installing-port-sharing"></a><span data-ttu-id="7c781-132">Instalowanie współużytkowania portów</span><span class="sxs-lookup"><span data-stu-id="7c781-132">Installing Port Sharing</span></span>  
 <span data-ttu-id="7c781-133">Usługa udostępniania portów Net.TCP jest dostępna we wszystkich systemach operacyjnych, które obsługują [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], ale usługa nie jest domyślnie włączona.</span><span class="sxs-lookup"><span data-stu-id="7c781-133">The Net.TCP Port Sharing Service is available on all operating systems that support [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], but the service is not enabled by default.</span></span> <span data-ttu-id="7c781-134">Ze względów bezpieczeństwa administrator musi ręcznie włączyć usługi udostępniania portów Net.TCP przed pierwszym użyciem.</span><span class="sxs-lookup"><span data-stu-id="7c781-134">As a security precaution, an administrator must manually enable the Net.TCP Port Sharing Service prior to first use.</span></span> <span data-ttu-id="7c781-135">Usługa udostępniania portów Net.TCP udostępnia opcje konfiguracji, dzięki którym można manipulować pewne cechy gniazda sieci właścicielem usługi współużytkowania portów.</span><span class="sxs-lookup"><span data-stu-id="7c781-135">The Net.TCP Port Sharing Service exposes configuration options that allow you to manipulate several characteristics of the network sockets owned by the port sharing service.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="7c781-136">[Porady: Włączanie usługi współużytkowania portów Net.TCP](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md).</span><span class="sxs-lookup"><span data-stu-id="7c781-136"> [How to: Enable the Net.TCP Port Sharing Service](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md).</span></span>  
  
## <a name="using-nettcp-port-sharing-in-an-application"></a><span data-ttu-id="7c781-137">Za pomocą aplikacji do udostępniania portów Net.tcp</span><span class="sxs-lookup"><span data-stu-id="7c781-137">Using Net.tcp Port Sharing in an Application</span></span>  
 <span data-ttu-id="7c781-138">Najłatwiejszym sposobem na korzystanie z portu net.tcp:// udostępniania w sieci [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] aplikacji jest do udostępnienia usługi za pomocą <xref:System.ServiceModel.NetTcpBinding> , a następnie włączyć usługi udostępniania portów Net.TCP przy użyciu <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="7c781-138">The easiest way to use net.tcp:// port sharing in your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application is to expose a service using the <xref:System.ServiceModel.NetTcpBinding> and then to enable Net.TCP Port Sharing Service using the <xref:System.ServiceModel.NetTcpBinding.PortSharingEnabled%2A> property.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="7c781-139">jak to zrobić, zobacz [porady: Konfigurowanie usługi WCF na potrzeby współużytkowania portów użyj](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md).</span><span class="sxs-lookup"><span data-stu-id="7c781-139"> how to do this, see [How to: Configure a WCF Service to Use Port Sharing](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md).</span></span>  
  
## <a name="security-implications-of-port-sharing"></a><span data-ttu-id="7c781-140">Ryzyko związane z współużytkowania portów</span><span class="sxs-lookup"><span data-stu-id="7c781-140">Security Implications of Port Sharing</span></span>  
 <span data-ttu-id="7c781-141">Chociaż usługi udostępniania portów Net.TCP zapewnia warstwę przetwarzania między aplikacjami i siecią, aplikacje używające Udostępnianie portów nadal powinien być zabezpieczony, tak, jakby były one bezpośrednio nasłuchiwanie w sieci.</span><span class="sxs-lookup"><span data-stu-id="7c781-141">Although the Net.TCP Port Sharing Service provides a layer of processing between applications and the network, applications that use port sharing should still be secured as if they were directly listening on the network.</span></span> <span data-ttu-id="7c781-142">W szczególności aplikacje korzystające z Udostępnianie portów należy ocenić uprawnień procesów, w których są uruchamiane.</span><span class="sxs-lookup"><span data-stu-id="7c781-142">Specifically, applications that use port sharing should evaluate the process privileges under which they run.</span></span> <span data-ttu-id="7c781-143">Należy rozważyć uruchomienie aplikacji przy użyciu wbudowane konto Usługa sieciowa, która działa z minimalnym zestawem uprawnień procesów wymagane do komunikacji sieciowej.</span><span class="sxs-lookup"><span data-stu-id="7c781-143">Consider running your application using the built-in Network Service account, which runs with the minimal set of process privileges required for network communication.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7c781-144">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="7c781-144">See Also</span></span>  
 [<span data-ttu-id="7c781-145">Konfigurowanie usługi współużytkowania portów Net.TCP</span><span class="sxs-lookup"><span data-stu-id="7c781-145">Configuring the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/configuring-the-net-tcp-port-sharing-service.md)  
 [<span data-ttu-id="7c781-146">Hosting</span><span class="sxs-lookup"><span data-stu-id="7c781-146">Hosting</span></span>](../../../../docs/framework/wcf/feature-details/hosting.md)  
 [<span data-ttu-id="7c781-147">Instrukcje: konfigurowanie usługi WCF na potrzeby współużytkowania portów</span><span class="sxs-lookup"><span data-stu-id="7c781-147">How to: Configure a WCF Service to Use Port Sharing</span></span>](../../../../docs/framework/wcf/feature-details/how-to-configure-a-wcf-service-to-use-port-sharing.md)  
 [<span data-ttu-id="7c781-148">Instrukcje: włączanie usługi współużytkowania portów Net.TCP</span><span class="sxs-lookup"><span data-stu-id="7c781-148">How to: Enable the Net.TCP Port Sharing Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-enable-the-net-tcp-port-sharing-service.md)
