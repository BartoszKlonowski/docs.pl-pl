---
title: Korzystanie z personifikacji z zabezpieczeniami transportu
ms.date: 03/30/2017
ms.assetid: 426df8cb-6337-4262-b2c0-b96c2edf21a9
author: BrucePerlerMS
ms.openlocfilehash: 537bb1d9cfbda98b0e92833d94b40097fae205fd
ms.sourcegitcommit: fb78d8abbdb87144a3872cf154930157090dd933
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/27/2018
ms.locfileid: "47397036"
---
# <a name="using-impersonation-with-transport-security"></a><span data-ttu-id="56a21-102">Korzystanie z personifikacji z zabezpieczeniami transportu</span><span class="sxs-lookup"><span data-stu-id="56a21-102">Using Impersonation with Transport Security</span></span>
<span data-ttu-id="56a21-103">*Personifikacja* to zdolność aplikacji serwera, na potrzeby tożsamości klienta.</span><span class="sxs-lookup"><span data-stu-id="56a21-103">*Impersonation* is the ability of a server application to take on the identity of the client.</span></span> <span data-ttu-id="56a21-104">Jest to typowe dla usługi, aby podczas weryfikacji dostępu do zasobów należy używać personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-104">It is common for services to use impersonation when validating access to resources.</span></span> <span data-ttu-id="56a21-105">Aplikacja zostanie uruchomiona przy użyciu konta usługi, ale gdy serwer akceptuje połączenia klienta, personifikuje klienta, tak, aby sprawdzanie uprawnień dostępu są wykonywane przy użyciu poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="56a21-105">The server application runs using a service account, but when the server accepts a client connection, it impersonates the client so that access checks are performed using the client's credentials.</span></span> <span data-ttu-id="56a21-106">Zabezpieczenia transportu jest mechanizm przekazywania poświadczeń i zabezpieczenia komunikacji przy użyciu tych poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="56a21-106">Transport security is a mechanism both for passing credentials and securing communication using those credentials.</span></span> <span data-ttu-id="56a21-107">W tym temacie opisano, za pomocą zabezpieczeń transportu w Windows Communication Foundation (WCF) z funkcją personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-107">This topic describes using transport security in Windows Communication Foundation (WCF) with the impersonation feature.</span></span> <span data-ttu-id="56a21-108">Aby uzyskać więcej informacji na temat personifikacji korzystanie z zabezpieczeń komunikatów, zobacz [delegowanie i personifikacja](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="56a21-108">For more information about impersonation using message security, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="five-impersonation-levels"></a><span data-ttu-id="56a21-109">Pięć poziomów personifikacji</span><span class="sxs-lookup"><span data-stu-id="56a21-109">Five Impersonation Levels</span></span>  
 <span data-ttu-id="56a21-110">Transport security korzysta z pięciu poziomów personifikacji, zgodnie z opisem w poniższej tabeli.</span><span class="sxs-lookup"><span data-stu-id="56a21-110">Transport security makes use of five levels of impersonation, as described in the following table.</span></span>  
  
|<span data-ttu-id="56a21-111">Poziom personifikacji</span><span class="sxs-lookup"><span data-stu-id="56a21-111">Impersonation level</span></span>|<span data-ttu-id="56a21-112">Opis</span><span class="sxs-lookup"><span data-stu-id="56a21-112">Description</span></span>|  
|-------------------------|-----------------|  
|<span data-ttu-id="56a21-113">Brak</span><span class="sxs-lookup"><span data-stu-id="56a21-113">None</span></span>|<span data-ttu-id="56a21-114">Aplikacja serwera nie podjęto próby personifikacji klienta.</span><span class="sxs-lookup"><span data-stu-id="56a21-114">The server application does not attempt to impersonate the client.</span></span>|  
|<span data-ttu-id="56a21-115">Anonimowe</span><span class="sxs-lookup"><span data-stu-id="56a21-115">Anonymous</span></span>|<span data-ttu-id="56a21-116">Aplikacja serwera można wykonywać sprawdzanie uprawnień dostępu przed poświadczenia klienta, ale nie otrzymano informacji o tożsamości klienta.</span><span class="sxs-lookup"><span data-stu-id="56a21-116">The server application can perform access checks against the client's credentials, but does not receive any information about the client's identity.</span></span> <span data-ttu-id="56a21-117">Ten poziom personifikacji ma znaczenie tylko w przypadku komunikacji na komputerze, na przykład do potoków nazwanych.</span><span class="sxs-lookup"><span data-stu-id="56a21-117">This impersonation level is meaningful only for on-machine communication, such as named pipes.</span></span> <span data-ttu-id="56a21-118">Za pomocą `Anonymous` z połączenia zdalnego podwyższa poziom personifikacji tożsamością.</span><span class="sxs-lookup"><span data-stu-id="56a21-118">Using `Anonymous` with a remote connection promotes the impersonation level to Identify.</span></span>|  
|<span data-ttu-id="56a21-119">Identyfikowanie</span><span class="sxs-lookup"><span data-stu-id="56a21-119">Identify</span></span>|<span data-ttu-id="56a21-120">Aplikacja serwera wie, tożsamość klienta i można wykonywać sprawdzanie poprawności dostępu do względem poświadczenia klienta, ale nie można spersonifikować klienta.</span><span class="sxs-lookup"><span data-stu-id="56a21-120">The server application knows the client's identity and can perform access validation against the client's credentials, but cannot impersonate the client.</span></span> <span data-ttu-id="56a21-121">Identyfikowanie jest to domyślny poziom personifikacji, który jest używany przy użyciu poświadczeń SSPI w programie WCF, chyba że dostawcy tokenu, który zapewnia poziom personifikacji różnych.</span><span class="sxs-lookup"><span data-stu-id="56a21-121">Identify is the default impersonation level used with SSPI credentials in WCF unless the token provider provides a different impersonation level.</span></span>|  
|<span data-ttu-id="56a21-122">Impersonate</span><span class="sxs-lookup"><span data-stu-id="56a21-122">Impersonate</span></span>|<span data-ttu-id="56a21-123">Aplikacja serwera może uzyskiwać dostęp do zasobów na komputerze z serwerem, jako klienta oprócz przeprowadzania kontroli dostępu.</span><span class="sxs-lookup"><span data-stu-id="56a21-123">The server application can access resources on the server machine as the client in addition to performing access checks.</span></span> <span data-ttu-id="56a21-124">Aplikacja serwera nie może uzyskiwać dostęp do zasobów na maszyny zdalne przy użyciu tożsamości klienta, ponieważ spersonifikowanego tokenu nie ma poświadczeń sieciowych</span><span class="sxs-lookup"><span data-stu-id="56a21-124">The server application cannot access resources on remote machines using the client's identity because the impersonated token does not have network credentials</span></span>|  
|<span data-ttu-id="56a21-125">Delegate</span><span class="sxs-lookup"><span data-stu-id="56a21-125">Delegate</span></span>|<span data-ttu-id="56a21-126">Oprócz mających takie same możliwości jak `Impersonate`, poziom personifikacji delegata umożliwia również aplikacji serwera, które uzyskują dostęp do zasobów na maszyny zdalne przy użyciu tożsamości klienta i do przekazywania tożsamość do innych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-126">In addition to having the same capabilities as `Impersonate`, the Delegate impersonation level also enables the server application to access resources on remote machines using the client's identity and to pass the identity to other applications.</span></span><br /><br /> <span data-ttu-id="56a21-127">**Ważne** konto domeny serwera musi być oznaczona jako zaufane dla delegowania na kontrolerze domeny, aby korzystać z dodatkowych funkcji.</span><span class="sxs-lookup"><span data-stu-id="56a21-127">**Important** The server domain account must be marked as trusted for delegation on the domain controller to use these additional features.</span></span> <span data-ttu-id="56a21-128">Ten poziom personifikacji nie można używać z konta domeny klienta oznaczone jako poufne.</span><span class="sxs-lookup"><span data-stu-id="56a21-128">This level of impersonation cannot be used with client domain accounts marked as sensitive.</span></span>|  
  
 <span data-ttu-id="56a21-129">Dostępne są następujące poziomy najczęściej używane z zabezpieczeniami transportu `Identify` i `Impersonate`.</span><span class="sxs-lookup"><span data-stu-id="56a21-129">The levels most commonly used with transport security are `Identify` and `Impersonate`.</span></span> <span data-ttu-id="56a21-130">Poziomy `None` i `Anonymous` nie są zalecane w przypadku typowego użycia i przy użyciu uwierzytelniania za pomocą tych poziomów nie obsługują wielu transportów.</span><span class="sxs-lookup"><span data-stu-id="56a21-130">The levels `None` and `Anonymous` are not recommended for typical use, and many transports do not support using those levels with authentication.</span></span> <span data-ttu-id="56a21-131">`Delegate` Poziom jest zaawansowaną funkcją, która powinna być stosowana z rozwagą.</span><span class="sxs-lookup"><span data-stu-id="56a21-131">The `Delegate` level is a powerful feature that should be used with care.</span></span> <span data-ttu-id="56a21-132">Tylko zaufanych serwerów aplikacji, należy nadać uprawnienia do delegowania poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="56a21-132">Only trusted server applications should be given the permission to delegate credentials.</span></span>  
  
 <span data-ttu-id="56a21-133">Korzystanie z personifikacji w `Impersonate` lub `Delegate` poziomy wymaga aplikacji serwera, aby `SeImpersonatePrivilege` uprawnień.</span><span class="sxs-lookup"><span data-stu-id="56a21-133">Using impersonation at the `Impersonate` or `Delegate` levels requires the server application to have the `SeImpersonatePrivilege` privilege.</span></span> <span data-ttu-id="56a21-134">Aplikacja ma to uprawnienie domyślnie, jeśli jest uruchomiony przy użyciu konta w grupie Administratorzy lub przy użyciu konta z identyfikatorem SID usługi (Usługa sieciowa, Usługa lokalna lub systemu lokalnego).</span><span class="sxs-lookup"><span data-stu-id="56a21-134">An application has this privilege by default if it is running on an account in the Administrators group or on an account with a Service SID (Network Service, Local Service, or Local System).</span></span> <span data-ttu-id="56a21-135">Personifikacja nie wymaga wzajemnego uwierzytelniania klienta i serwera.</span><span class="sxs-lookup"><span data-stu-id="56a21-135">Impersonation does not require mutual authentication of the client and server.</span></span> <span data-ttu-id="56a21-136">Niektóre schematy uwierzytelniania, które obsługuje personifikacji, takich jak NTLM, nie można używać z wzajemnego uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="56a21-136">Some authentication schemes that support impersonation, such as NTLM, cannot be used with mutual authentication.</span></span>  
  
## <a name="transport-specific-issues-with-impersonation"></a><span data-ttu-id="56a21-137">Problemy specyficzne dla transportu dla personifikacji</span><span class="sxs-lookup"><span data-stu-id="56a21-137">Transport-Specific Issues with Impersonation</span></span>  
 <span data-ttu-id="56a21-138">Wybór transportu programu WCF wpływa na możliwościami personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-138">The choice of a transport in WCF affects the possible choices for impersonation.</span></span> <span data-ttu-id="56a21-139">W tej sekcji opisano problemy wpływające na standardowego protokołu HTTP i nazwanych potoków transporty w programie WCF.</span><span class="sxs-lookup"><span data-stu-id="56a21-139">This section describes issues affecting the standard HTTP and named pipe transports in WCF.</span></span> <span data-ttu-id="56a21-140">Niestandardowe transportów ma swoje własne żadnych ograniczeń dotyczących pomocy technicznej dla personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-140">Custom transports have their own restrictions on support for impersonation.</span></span>  
  
### <a name="named-pipe-transport"></a><span data-ttu-id="56a21-141">O nazwie transportu potoku</span><span class="sxs-lookup"><span data-stu-id="56a21-141">Named Pipe Transport</span></span>  
 <span data-ttu-id="56a21-142">Następujące elementy są używane za pomocą transportu nazwanego potoku:</span><span class="sxs-lookup"><span data-stu-id="56a21-142">The following items are used with the named pipe transport:</span></span>  
  
-   <span data-ttu-id="56a21-143">Transportu nazwanego potoku jest przeznaczony do użytku tylko na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="56a21-143">The named pipe transport is intended for use only on the local machine.</span></span> <span data-ttu-id="56a21-144">Transportu nazwanego potoku w programie WCF nie wyraźnie zezwala na połączenia między komputerami.</span><span class="sxs-lookup"><span data-stu-id="56a21-144">The named pipe transport in WCF explicitly disallows cross-machine connections.</span></span>  
  
-   <span data-ttu-id="56a21-145">Nie można używać do potoków nazwanych `Impersonate` lub `Delegate` poziom personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-145">Named pipes cannot be used with the `Impersonate` or `Delegate` impersonation level.</span></span> <span data-ttu-id="56a21-146">Nazwany potok nie może wymusić gwarancji na komputerze, na tych poziomach personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-146">The named pipe cannot enforce the on-machine guarantee at these impersonation levels.</span></span>  
  
 <span data-ttu-id="56a21-147">Aby uzyskać więcej informacji na temat potoków nazwanych, zobacz [Wybieranie transportu](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="56a21-147">For more information about named pipes, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
### <a name="http-transport"></a><span data-ttu-id="56a21-148">Transportu HTTP</span><span class="sxs-lookup"><span data-stu-id="56a21-148">HTTP Transport</span></span>  
 <span data-ttu-id="56a21-149">Powiązania, które używają protokołu HTTP (<xref:System.ServiceModel.WSHttpBinding> i <xref:System.ServiceModel.BasicHttpBinding>) obsługują kilka schematy uwierzytelniania, jak wyjaśniono w [opis uwierzytelniania HTTP](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="56a21-149">The bindings that use the HTTP transport (<xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.BasicHttpBinding>) support several authentication schemes, as explained in [Understanding HTTP Authentication](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span></span> <span data-ttu-id="56a21-150">Personifikacja obsługiwany poziom zależy od schematu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="56a21-150">The impersonation level supported depends on the authentication scheme.</span></span> <span data-ttu-id="56a21-151">Następujące elementy są używane przy użyciu protokołu http:</span><span class="sxs-lookup"><span data-stu-id="56a21-151">The following items are used with the HTTP transport:</span></span>  
  
-   <span data-ttu-id="56a21-152">`Anonymous` Schematu uwierzytelniania ignoruje personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-152">The `Anonymous` authentication scheme ignores impersonation.</span></span>  
  
-   <span data-ttu-id="56a21-153">`Basic` Schematu uwierzytelniania obsługuje tylko `Delegate` poziom.</span><span class="sxs-lookup"><span data-stu-id="56a21-153">The `Basic` authentication scheme supports only the `Delegate` level.</span></span> <span data-ttu-id="56a21-154">Uaktualniane są wszystkie niższe poziomy personifikacji.</span><span class="sxs-lookup"><span data-stu-id="56a21-154">All lower impersonation levels are upgraded.</span></span>  
  
-   <span data-ttu-id="56a21-155">`Digest` Schematu uwierzytelniania obsługuje tylko `Impersonate` i `Delegate` poziomów.</span><span class="sxs-lookup"><span data-stu-id="56a21-155">The `Digest` authentication scheme supports only the `Impersonate` and `Delegate` levels.</span></span>  
  
-   <span data-ttu-id="56a21-156">`NTLM` Schematu uwierzytelniania, można wybierać bezpośrednio lub za pomocą negocjowania, obsługuje tylko `Delegate` poziomu na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="56a21-156">The `NTLM` authentication scheme, selectable either directly or through negotiation, supports only the `Delegate` level on the local machine.</span></span>  
  
-   <span data-ttu-id="56a21-157">Schemat uwierzytelniania Kerberos, który można wybierać wyłącznie przy użyciu negocjacji, może służyć o dowolnym poziomie personifikacji obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="56a21-157">The Kerberos authentication scheme, which can only be selected through negotiation, can be used with any supported impersonation level.</span></span>  
  
 <span data-ttu-id="56a21-158">Aby uzyskać więcej informacji na temat protokołu HTTP, zobacz [Wybieranie transportu](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="56a21-158">For more information about the HTTP transport, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="56a21-159">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="56a21-159">See Also</span></span>  
 [<span data-ttu-id="56a21-160">Delegowanie i personifikacja</span><span class="sxs-lookup"><span data-stu-id="56a21-160">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)  
 [<span data-ttu-id="56a21-161">Autoryzacja</span><span class="sxs-lookup"><span data-stu-id="56a21-161">Authorization</span></span>](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)  
 [<span data-ttu-id="56a21-162">Instrukcje: personifikowanie klienta w usłudze</span><span class="sxs-lookup"><span data-stu-id="56a21-162">How to: Impersonate a Client on a Service</span></span>](../../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md)  
 [<span data-ttu-id="56a21-163">Opis uwierzytelniania HTTP</span><span class="sxs-lookup"><span data-stu-id="56a21-163">Understanding HTTP Authentication</span></span>](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md)
