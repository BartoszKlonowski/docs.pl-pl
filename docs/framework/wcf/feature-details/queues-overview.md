---
title: Omówienie kolejek
ms.date: 03/30/2017
helpviewer_keywords:
- queues [WCF], MSMQ integration
ms.assetid: b8757992-ffce-40ad-9e9b-3243f6d0fce1
ms.openlocfilehash: 85c8cb1fbbda9be14754174c7cb7c76513bd94c7
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
---
# <a name="queues-overview"></a><span data-ttu-id="5bc1f-102">Omówienie kolejek</span><span class="sxs-lookup"><span data-stu-id="5bc1f-102">Queues Overview</span></span>
<span data-ttu-id="5bc1f-103">W tej sekcji przedstawiono ogólne i podstawowe pojęcia oczekujących komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-103">This section introduces the general and core concepts behind queued communication.</span></span> <span data-ttu-id="5bc1f-104">Kolejne sekcje przejdź do szczegółów dotyczących sposobu kolejkowania pojęcia opisane w tym miejscu są dyskowe widoczne w systemie Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="5bc1f-104">Subsequent sections go into details about how the queuing concepts described here are manifested in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-queuing-concepts"></a><span data-ttu-id="5bc1f-105">Podstawowe pojęcia kolejkowania</span><span class="sxs-lookup"><span data-stu-id="5bc1f-105">Basic Queuing Concepts</span></span>  
 <span data-ttu-id="5bc1f-106">Podczas projektowania aplikacji rozproszonej, wybór ważne jest prawo transportu do komunikacji między usług i klientów.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-106">When designing a distributed application, choosing the right transport for communication between services and clients is important.</span></span> <span data-ttu-id="5bc1f-107">Istnieje kilka możliwych wpływa na rodzaj transportu do użycia.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-107">Several factors affect the kind of transport to use.</span></span> <span data-ttu-id="5bc1f-108">Jeden ważnym czynnikiem — izolację między usługa, klient i transportu — Określa użycie transport z kolejką lub transportu bezpośredniego, takiego jak protokół TCP lub HTTP.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-108">One important factor—isolation between the service, the client, and the transport—determines use of a queued transport or a direct transport, such as TCP or HTTP.</span></span> <span data-ttu-id="5bc1f-109">Ze względu na specyfikę transportów bezpośrednie, takie jak protokół TCP i HTTP komunikacji zatrzymuje całkowicie czy usługi lub klienta przestaną działać, czy sieć nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-109">Due to the nature of direct transports such as TCP and HTTP, communication stops altogether if the service or the client stop functioning or if the network fails.</span></span> <span data-ttu-id="5bc1f-110">W tym samym czasie dla aplikacji do pracy musi działać usługa, klient i sieci.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-110">The service, the client, and the network must be running at the same time for the application to work.</span></span> <span data-ttu-id="5bc1f-111">Transporty w kolejce zapewniają izolację, co oznacza, że usługi lub klienta się nie powieść lub łączy komunikacji między nimi zakończyć się niepowodzeniem, klient i usługa mogą nadal działać.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-111">Queued transports provide isolation, which means that if the service or client fail or if communication links between them fail, the client and service can continue to function.</span></span>  
  
 <span data-ttu-id="5bc1f-112">Kolejki zapewniają niezawodne komunikację nawet z błędami w komunikującymi się Stronami lub sieci.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-112">Queues provide reliable communication even with failures in the communicating parties or the network.</span></span> <span data-ttu-id="5bc1f-113">Kolejki przechwytywania i dostarczania wiadomości wymieniane między komunikującymi się Stronami.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-113">Queues capture and deliver messages exchanged between the communicating parties.</span></span> <span data-ttu-id="5bc1f-114">Kolejki są zwykle wspierany przez określonego rodzaju magazynu, który może być nietrwałe lub trwałe.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-114">Queues are typically backed by some kind of a store, which can be volatile or durable.</span></span> <span data-ttu-id="5bc1f-115">Kolejki przechowywania komunikatów z klienta w imieniu usługi i później przesyła te komunikaty do usługi.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-115">Queues store messages from a client on behalf of a service and later forward these messages to the service.</span></span> <span data-ttu-id="5bc1f-116">Operatory pośrednie, zapewniają kolejek zapewnia izolację awarii przez strony, co w związku z tym mechanizm komunikacji preferowanych systemy o wysokiej dostępności i odłączony usług.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-116">The indirection queues provide ensured isolation of failure by either party, thus making it the preferred communication mechanism for high-availability systems and disconnected services.</span></span> <span data-ttu-id="5bc1f-117">Pośredni zawiera koszt duże opóźnienie.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-117">The indirection comes with the cost of high latency.</span></span> <span data-ttu-id="5bc1f-118">*Czas oczekiwania* jest czas opóźnienia między czas, klient wysyła komunikat i usługa odbiera on.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-118">*Latency* is the time delay between the time the client sends a message and the time the service receives it.</span></span> <span data-ttu-id="5bc1f-119">Oznacza to, że po wysłaniu komunikatu nie wiadomo, kiedy wiadomości mogą być przetwarzane.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-119">This means that once a message is sent, you do not know when that message may be processed.</span></span> <span data-ttu-id="5bc1f-120">Najbardziej umieszczonych w kolejce aplikacji radzenia sobie duże opóźnienie.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-120">Most queued applications cope with high latency.</span></span> <span data-ttu-id="5bc1f-121">Na poniższej ilustracji przedstawiono model koncepcyjny komunikatu w kolejce.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-121">The following illustration shows a conceptual model of queued communication.</span></span>  
  
 <span data-ttu-id="5bc1f-122">![Model komunikacji w kolejce](../../../../docs/framework/wcf/feature-details/media/qconceptual-figure1c.gif "QConceptual Figure1c")</span><span class="sxs-lookup"><span data-stu-id="5bc1f-122">![Model of queued communication](../../../../docs/framework/wcf/feature-details/media/qconceptual-figure1c.gif "QConceptual-Figure1c")</span></span>  
  
 <span data-ttu-id="5bc1f-123">Komunikacja z obsługą kolejek model koncepcyjny</span><span class="sxs-lookup"><span data-stu-id="5bc1f-123">Queued communication conceptual model</span></span>  
  
 <span data-ttu-id="5bc1f-124">W rzeczywistości kolejki to pojęcie rozproszonych.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-124">In reality, the queue is a distributed concept.</span></span> <span data-ttu-id="5bc1f-125">Tak można je lokalnego drugiej strony lub zdalnego obu stron.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-125">As such, they can be local to either party or remote to both parties.</span></span> <span data-ttu-id="5bc1f-126">Kolejka jest zazwyczaj lokalnych z usługą.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-126">Typically, the queue is local to the service.</span></span> <span data-ttu-id="5bc1f-127">W tej konfiguracji klient nie może zależeć od łączności zdalnej kolejki być stale dostępne.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-127">In this configuration, the client cannot depend on connectivity to the remote queue to be constantly available.</span></span> <span data-ttu-id="5bc1f-128">Podobnie kolejki musi być dostępna niezależnie od dostępności usługi czytania z kolejki.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-128">Similarly, the queue must be available independent of the availability of the service reading from the queue.</span></span> <span data-ttu-id="5bc1f-129">Menedżer kolejek zarządza kolekcji kolejek.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-129">A queue manager manages a collection of queues.</span></span> <span data-ttu-id="5bc1f-130">Jest odpowiedzialny za akceptowanie komunikatów wysłanych do jego kolejki z innymi menedżerami kolejki.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-130">It is responsible for accepting messages sent to its queues from other queue managers.</span></span> <span data-ttu-id="5bc1f-131">Również jest odpowiedzialny za zarządzanie łączność z kolejek zdalnych i przesyłania komunikatów do tych kolejek zdalnych.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-131">It is also responsible for managing connectivity to remote queues and transferring messages to those remote queues.</span></span> <span data-ttu-id="5bc1f-132">Aby zapewnić dostępność kolejek niezależnie od awarii aplikacji klienta lub usługę, menedżera kolejek jest są zazwyczaj uruchamiane jako zewnętrznej usługi.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-132">To ensure availability of queues despite client or service application failures, the queue manager is typically run as an external service.</span></span>  
  
 <span data-ttu-id="5bc1f-133">Gdy klient wysyła wiadomość do kolejki, rozwiązuje wiadomości do kolejki docelowej, który jest zarządzany przez menedżera kolejek usługi kolejki.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-133">When a client sends a message to a queue, it addresses the message to the target queue, which is the queue managed by the service's queue manager.</span></span> <span data-ttu-id="5bc1f-134">Menedżer kolejek na kliencie wysyła wiadomość do transmisji (lub wychodzących) kolejki.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-134">The queue manager on the client sends the message to a transmission (or outgoing) queue.</span></span> <span data-ttu-id="5bc1f-135">Kolejka transmisji jest kolejką na menedżera kolejek klienta, który przechowuje komunikaty w celu przesłania go do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-135">The transmission queue is a queue on the client queue manager that stores messages for transmission to the target queue.</span></span> <span data-ttu-id="5bc1f-136">Następnie menedżera kolejek znalezienie ścieżkę do menedżera kolejek, który jest właścicielem kolejki docelowej i przesyła komunikat, aby go.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-136">The queue manager then finds a path to the queue manager that owns the target queue and transfers the message to it.</span></span> <span data-ttu-id="5bc1f-137">W celu zapewnienia komunikacji niezawodnej menedżerami kolejki implementacji protokołu transferu niezawodne, aby zapobiec utracie danych.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-137">To ensure reliable communication, the queue managers implement a reliable transfer protocol to prevent data loss.</span></span> <span data-ttu-id="5bc1f-138">Menedżer kolejki docelowej akceptuje komunikaty adresowane do kolejki docelowej, jest właścicielem i przechowuje komunikaty.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-138">The destination queue manager accepts messages addressed to the target queues it owns and stores the messages.</span></span> <span data-ttu-id="5bc1f-139">Usługa wykonuje żądaniami odczytu z kolejki docelowej, w tym czasie menedżera kolejek następnie dostarcza wiadomość aplikacji docelowej.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-139">The service makes requests to read from the target queue, at which time the queue manager then delivers the message to the destination application.</span></span> <span data-ttu-id="5bc1f-140">Na poniższej ilustracji przedstawiono komunikację między cztery strony.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-140">The following illustration shows communication between the four parties.</span></span>  
  
 <span data-ttu-id="5bc1f-141">![Diagram aplikacji w kolejce](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "rozproszonych kolejki — rysunek")</span><span class="sxs-lookup"><span data-stu-id="5bc1f-141">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="5bc1f-142">Komunikacja z obsługą kolejek w przypadku typowego wdrożenia</span><span class="sxs-lookup"><span data-stu-id="5bc1f-142">Queued communication in a typical deployment scenario</span></span>  
  
 <span data-ttu-id="5bc1f-143">W związku z tym Menedżer kolejek zapewnia to wymaganą izolację, aby nadawca i odbiorca może niezależnie zakończyć się niepowodzeniem bez wpływu na rzeczywiste komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-143">Thus, the queue manager provides the required isolation so that the sender and receiver can independently fail without affecting actual communication.</span></span> <span data-ttu-id="5bc1f-144">Zaletą pośredni dodatkowe, które zapewniają kolejek również umożliwia wiele wystąpień aplikacji do odczytu z tej samej kolejki, dzięki czemu hodowli pracy między węzłami osiągnięcie wyższej przepustowości.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-144">The benefit of extra indirection that queues provide also enables multiple application instances to read from the same queue, so that farming work among the nodes achieves higher throughput.</span></span> <span data-ttu-id="5bc1f-145">W związku z tym nie jest rzadko Zobacz kolejki używane do uzyskania wymagania dotyczące przepływności i zwiększenia skali.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-145">Therefore, it is not uncommon to see queues being used to achieve higher scale and throughput requirements.</span></span>  
  
## <a name="queues-and-transactions"></a><span data-ttu-id="5bc1f-146">Kolejki i transakcji</span><span class="sxs-lookup"><span data-stu-id="5bc1f-146">Queues and Transactions</span></span>  
 <span data-ttu-id="5bc1f-147">Transakcje umożliwiają pogrupować zestaw operacji, dzięki czemu w przypadku niepowodzenia operacji jednej operacji nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-147">Transactions allow you to group a set of operations together so that if one operation fails, all of the operations fail.</span></span> <span data-ttu-id="5bc1f-148">Przykład sposobu użycia transakcji jest, gdy osoba używa ATM do transferu wynosi 1000 z jego konta oszczędności jego konta.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-148">An example of how to use transactions is when a person uses an ATM to transfer $1,000 from his savings account to his checking account.</span></span> <span data-ttu-id="5bc1f-149">Pociąga to za sobą następujące operacje:</span><span class="sxs-lookup"><span data-stu-id="5bc1f-149">This entails the following operations:</span></span>  
  
-   <span data-ttu-id="5bc1f-150">Wycofanie 1000 USD z konta oszczędności.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-150">Withdrawing $1,000 from the savings account.</span></span>  
  
-   <span data-ttu-id="5bc1f-151">Złożenie 1000 USD przeznaczony na konta bankowego.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-151">Depositing $1,000 into the checking account.</span></span>  
  
 <span data-ttu-id="5bc1f-152">Jeśli pierwsza operacja zakończy się powodzeniem i 1000 USD zostanie wycofany z konta oszczędności, ale druga operacja nie powiedzie się, wynosi 1000 jest utracone, ponieważ już zostało wycofane z konta oszczędności.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-152">If the first operation succeeds and $1,000 is withdrawn from the savings account but the second operation fails, the $1,000 is lost because it has already been withdrawn from the savings account.</span></span> <span data-ttu-id="5bc1f-153">Aby zachować konta w nieprawidłowym stanie, jeśli jedna operacja zakończy się niepowodzeniem, operacjami musi zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-153">To keep the accounts in a valid state, if one operation fails, both operations must fail.</span></span>  
  
 <span data-ttu-id="5bc1f-154">W wiadomości transakcyjnych wysłanych do kolejki można wiadomości i odbierane z kolejki w ramach transakcji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-154">In transactional messaging, messages can be sent to the queue and received from the queue under a transaction.</span></span> <span data-ttu-id="5bc1f-155">W związku z tym w transakcji jest wysyłany komunikat transakcja zostanie wycofana, następnie wynik jest tak, jakby nigdy wiadomości została wysłana do kolejki.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-155">Thus, if a message is sent in a transaction and the transaction is rolled back, then the outcome is as if the message had never been sent to the queue.</span></span> <span data-ttu-id="5bc1f-156">Podobnie jeśli wiadomość zostanie odebrana w transakcji, a transakcja zostanie wycofana, następnie wynik jest tak, jakby wiadomości nie była nigdy nie zostały odebrane.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-156">Similarly if a message is received in a transaction and the transaction is rolled back, then the outcome is as if the message had never been received.</span></span> <span data-ttu-id="5bc1f-157">Komunikat pozostaje w kolejce do odczytu.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-157">The message remains in the queue to be read.</span></span>  
  
 <span data-ttu-id="5bc1f-158">Ze względu na duże opóźnienie podczas wysyłania wiadomości, że nie ma możliwości otrzymuje żadnej informacji o czas potrzebny do osiągnięcia swojej kolejki docelowej, podobnie jak wiadomo, jak długo trwa do przetworzenia komunikatów usługi.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-158">Because of high latency, when you send a message you have no way of knowing how long it takes to reach its target queue, nor do you know how long it takes for the service to process the message.</span></span> <span data-ttu-id="5bc1f-159">W związku z tym czy chcesz użyć pojedynczej transakcji do wysłania wiadomości, komunikat, a następnie przetworzyć komunikatu.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-159">Because of this, you do not want to use a single transaction to send the message, receive the message, and then process the message.</span></span> <span data-ttu-id="5bc1f-160">Spowoduje to utworzenie transakcji, która nie została przekazana przez nieokreślony czas.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-160">This creates a transaction that is not committed for an indeterminate amount of time.</span></span> <span data-ttu-id="5bc1f-161">Gdy klient i usługa komunikują się za pośrednictwem kolejki przy użyciu transakcji, są związane z dwóch transakcji: na kliencie i jeden w usłudze.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-161">When a client and service communicate through a queue using a transaction, two transactions are involved: one on the client and one on the service.</span></span> <span data-ttu-id="5bc1f-162">Na poniższej ilustracji przedstawiono granice transakcji w typowym umieszczonych w kolejce.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-162">The following illustration shows the transaction boundaries in typical queued communication.</span></span>  
  
 <span data-ttu-id="5bc1f-163">![Kolejka transakcji](../../../../docs/framework/wcf/feature-details/media/qwithtransactions-figure3.gif "QWithTransactions Figure3")</span><span class="sxs-lookup"><span data-stu-id="5bc1f-163">![Queue with transactions](../../../../docs/framework/wcf/feature-details/media/qwithtransactions-figure3.gif "QWithTransactions-Figure3")</span></span>  
  
 <span data-ttu-id="5bc1f-164">Komunikacja z obsługą kolejek przedstawiający oddzielnych transakcji do przechwytywania i dostarczenia</span><span class="sxs-lookup"><span data-stu-id="5bc1f-164">Queued communication showing separate transactions for capture and delivery</span></span>  
  
 <span data-ttu-id="5bc1f-165">Transakcja klienta przetwarza i wysyła wiadomość.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-165">The client transaction processes and sends the message.</span></span> <span data-ttu-id="5bc1f-166">Gdy transakcja zostanie zatwierdzone, wiadomość jest w kolejce transmisji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-166">When the transaction is committed, the message is in the transmission queue.</span></span> <span data-ttu-id="5bc1f-167">W usłudze transakcji odczytuje komunikat z kolejki docelowej, przetwarza komunikat i następnie zatwierdza transakcji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-167">On the service, the transaction reads the message from the target queue, processes the message, and then commits the transaction.</span></span> <span data-ttu-id="5bc1f-168">Jeśli wystąpi błąd podczas przetwarzania, wiadomość jest wycofana i umieszczane w kolejce docelowej.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-168">If an error occurs during the processing, the message is rolled back and placed in the target queue.</span></span>  
  
## <a name="asynchronous-communication-using-queues"></a><span data-ttu-id="5bc1f-169">Asynchroniczną komunikację za pomocą kolejek</span><span class="sxs-lookup"><span data-stu-id="5bc1f-169">Asynchronous Communication Using Queues</span></span>  
 <span data-ttu-id="5bc1f-170">Kolejki zapewniają asynchronicznych metod komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-170">Queues provide an asynchronous means of communication.</span></span> <span data-ttu-id="5bc1f-171">Aplikacje, które wysyłanie wiadomości przy użyciu kolejki nie może czekać na komunikat jest odbierany i przetwarzany przez odbiornik. ze względu na duże opóźnienie wprowadzane przez menedżera kolejek.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-171">Applications that send messages using queues cannot wait for the message to be received and processed by the receiver because of high latency introduced by the queue manager.</span></span> <span data-ttu-id="5bc1f-172">Komunikaty mogą pozostać w kolejce znacznie dłużej niż aplikację zamierzone.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-172">Messages can remain in the queue for a far longer time than the application intended.</span></span> <span data-ttu-id="5bc1f-173">Aby tego uniknąć, aplikacji można określić wartość czasu wygaśnięcia wiadomości.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-173">To avoid this, the application can specify a Time-To-Live value on the message.</span></span> <span data-ttu-id="5bc1f-174">Ta wartość określa, jak długo komunikatu może pozostawać w kolejce transmisji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-174">This value specifies how long the message should remain in the transmission queue.</span></span> <span data-ttu-id="5bc1f-175">Jeśli ta wartość czasu zostanie przekroczony, a komunikat nadal nie została wysłana do kolejki docelowej, można przenosić wiadomości do kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-175">If this time value is exceeded, and the message still has not been sent to the target queue, the message can be transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="5bc1f-176">Gdy nadawca wysyła komunikat, powrocie z operacji wysyłania oznacza, że komunikat tylko zapisane w kolejce transmisji na nadawcy.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-176">When the sender sends a message, the return from the send operation implies that the message only made it to the transmission queue on the sender.</span></span> <span data-ttu-id="5bc1f-177">Tak Jeśli występuje błąd uzyskiwania wiadomości do kolejki docelowej, aplikacja wysyłająca nie wiesz natychmiast.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-177">As such, if there is a failure in getting the message to the target queue, the sending application cannot know about it immediately.</span></span> <span data-ttu-id="5bc1f-178">Aby wziąć pod uwagę takie błędy, wiadomości nie powiodło się jest przekazywane do kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-178">To take note of such failures, the failed message is transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="5bc1f-179">Błędu, takie jak wiadomości, można osiągnąć kolejka docelowa lub Time-To-Live wygasa, muszą być przetwarzane osobno.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-179">Any error, such as a message failing to reach the target queue or the Time-To-Live expiring, must be processed separately.</span></span> <span data-ttu-id="5bc1f-180">Nie jest rzadko, w związku z tym dla aplikacji w kolejce do zapisania dwa zestawy logiki:</span><span class="sxs-lookup"><span data-stu-id="5bc1f-180">It is not uncommon, therefore, for queued applications to write two sets of logic:</span></span>  
  
-   <span data-ttu-id="5bc1f-181">Normalne klient i usługa logiki wysyłania i odbierania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-181">The normal client and service logic of sending and receiving messages.</span></span>  
  
-   <span data-ttu-id="5bc1f-182">Logika kompensacji do obsługi przekazywania nie powiodło się i dostarczania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-182">Compensation logic to handle messages from the failed transmission or delivery.</span></span>  
  
 <span data-ttu-id="5bc1f-183">W poniższych sekcjach omówiono te pojęcia.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-183">The following sections discuss these concepts.</span></span>  
  
## <a name="dead-letter-queue-programming"></a><span data-ttu-id="5bc1f-184">Programowanie kolejki utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="5bc1f-184">Dead-Letter Queue Programming</span></span>  
 <span data-ttu-id="5bc1f-185">Kolejki utraconych wiadomości zawiera komunikaty, które nie może połączyć się z różnych powodów kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-185">Dead-letter queues contain messages that failed to reach the target queue for various reasons.</span></span> <span data-ttu-id="5bc1f-186">Przyczyny mogą należeć do zakresu od wygasłych komunikatów do problemów z łącznością uniemożliwiające transfer wiadomości do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-186">The reasons can range from expired messages to connectivity issues preventing transfer of the message to the target queue.</span></span>  
  
 <span data-ttu-id="5bc1f-187">Zwykle aplikacja może odczytywać wiadomości z kolejki utraconych wiadomości systemowe, określić, co poszło źle i podejmij odpowiednie działania, takie jak naprawa błędów i ponowne wysyłanie wiadomości lub biorąc pod uwagę go.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-187">Typically, an application can read messages from a system-wide dead-letter queue, determine what went wrong, and take appropriate action, such as correcting the errors and resending the message or taking note of it.</span></span>  
  
## <a name="poison-message-queue-programming"></a><span data-ttu-id="5bc1f-188">Trująca wiadomość została kolejki programowania</span><span class="sxs-lookup"><span data-stu-id="5bc1f-188">Poison Message Queue Programming</span></span>  
 <span data-ttu-id="5bc1f-189">Po powoduje wiadomości do kolejki docelowej, usługa wielokrotnie może zakończyć się niepowodzeniem do przetworzenia komunikatów.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-189">After a message makes it to the target queue, the service may repeatedly fail to process the message.</span></span> <span data-ttu-id="5bc1f-190">Na przykład aplikacja czytania wiadomości z kolejki w ramach transakcji i aktualizowanie bazy danych może się okazać tymczasowo odłączone bazy danych.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-190">For example, an application reading a message from the queue under a transaction and updating a database may find the database temporarily disconnected.</span></span> <span data-ttu-id="5bc1f-191">W takim przypadku transakcja zostanie wycofana, utworzono nową transakcję i wiadomość jest odczytać z kolejki.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-191">In this case, the transaction is rolled back, a new transaction is created, and the message is reread from the queue.</span></span> <span data-ttu-id="5bc1f-192">Druga próba może succeed lub fail.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-192">A second attempt may succeed or fail.</span></span> <span data-ttu-id="5bc1f-193">W niektórych przypadkach, w zależności od przyczyny tego błędu komunikat wielokrotnie może nie powieść dostarczenia do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-193">In some cases, depending on the cause of the error, the message may repeatedly fail delivery to the application.</span></span> <span data-ttu-id="5bc1f-194">W takim przypadku wiadomość jest traktowany jako "poison."</span><span class="sxs-lookup"><span data-stu-id="5bc1f-194">In this case, the message is deemed as "poison."</span></span> <span data-ttu-id="5bc1f-195">Takie wiadomości są przenoszone do kolejki skażone, który może zostać odczytany przez aplikację do obsługi poison.</span><span class="sxs-lookup"><span data-stu-id="5bc1f-195">Such messages are moved to a poison queue that can be read by a poison-handling application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5bc1f-196">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="5bc1f-196">See Also</span></span>  
 [<span data-ttu-id="5bc1f-197">Tworzenie kolejek w programie WCF</span><span class="sxs-lookup"><span data-stu-id="5bc1f-197">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)  
 [<span data-ttu-id="5bc1f-198">Tworzenie kolejek w programie WCF</span><span class="sxs-lookup"><span data-stu-id="5bc1f-198">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)  
 [<span data-ttu-id="5bc1f-199">Sesje i kolejki</span><span class="sxs-lookup"><span data-stu-id="5bc1f-199">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)  
 [<span data-ttu-id="5bc1f-200">Kolejki utraconych komunikatów</span><span class="sxs-lookup"><span data-stu-id="5bc1f-200">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)  
 [<span data-ttu-id="5bc1f-201">Komunikacja za pomocą nietrwałych kolejek</span><span class="sxs-lookup"><span data-stu-id="5bc1f-201">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)  
 [<span data-ttu-id="5bc1f-202">Wysyłanie komunikatów z usługi WCF do usługi kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="5bc1f-202">Windows Communication Foundation to Message Queuing</span></span>](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)  
 [<span data-ttu-id="5bc1f-203">Instalowanie usługi kolejkowania komunikatów (MSMQ)</span><span class="sxs-lookup"><span data-stu-id="5bc1f-203">Installing Message Queuing (MSMQ)</span></span>](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)  
 [<span data-ttu-id="5bc1f-204">Przykłady powiązanie integracji usługi kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="5bc1f-204">Message Queuing Integration Binding Samples</span></span>](http://msdn.microsoft.com/library/997d11cb-f2c5-4ba0-9209-92843d4d0e1a)  
 [<span data-ttu-id="5bc1f-205">Obsługa kolejek komunikatów programu Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="5bc1f-205">Message Queuing to Windows Communication Foundation</span></span>](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)  
 [<span data-ttu-id="5bc1f-206">Zabezpieczenia komunikatów w ramach kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="5bc1f-206">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)
