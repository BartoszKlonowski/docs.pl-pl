---
title: Włączanie przepływu transakcji
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], enabling flow
ms.assetid: a03f5041-5049-43f4-897c-e0292d4718f7
ms.openlocfilehash: 8aff6afb09c97d7d01f5e7b7f1b92ae24bb99fb7
ms.sourcegitcommit: fbb8a593a511ce667992502a3ce6d8f65c594edf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/16/2019
ms.locfileid: "74141756"
---
# <a name="enabling-transaction-flow"></a><span data-ttu-id="dc4c6-102">Włączanie przepływu transakcji</span><span class="sxs-lookup"><span data-stu-id="dc4c6-102">Enabling Transaction Flow</span></span>
<span data-ttu-id="dc4c6-103">Windows Communication Foundation (WCF) zapewnia wysoce elastyczne opcje kontroli przepływu transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-103">Windows Communication Foundation (WCF) provides highly flexible options for controlling transaction flow.</span></span> <span data-ttu-id="dc4c6-104">Ustawienia przepływu transakcji usługi mogą być wyrażone przy użyciu kombinacji atrybutów i konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-104">A service's transaction flow settings can be expressed using a combination of attributes and configuration.</span></span>  
  
## <a name="transaction-flow-settings"></a><span data-ttu-id="dc4c6-105">Ustawienia przepływu transakcji</span><span class="sxs-lookup"><span data-stu-id="dc4c6-105">Transaction Flow Settings</span></span>  
 <span data-ttu-id="dc4c6-106">Ustawienia przepływu transakcji są generowane dla punktu końcowego usługi w wyniku przecięcia następujących trzech wartości:</span><span class="sxs-lookup"><span data-stu-id="dc4c6-106">Transaction flow settings are generated for a service endpoint as a result of the intersection of the following three values:</span></span>  
  
- <span data-ttu-id="dc4c6-107">Atrybut <xref:System.ServiceModel.TransactionFlowAttribute> określony dla każdej metody w kontrakcie usługi.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-107">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specified for each method in the service contract.</span></span>  
  
- <span data-ttu-id="dc4c6-108">Właściwość powiązania `TransactionFlow` określonego powiązania.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-108">The `TransactionFlow` binding property in the specific binding.</span></span>  
  
- <span data-ttu-id="dc4c6-109">Właściwość powiązania `TransactionFlowProtocol` określonego powiązania.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-109">The `TransactionFlowProtocol` binding property in the specific binding.</span></span> <span data-ttu-id="dc4c6-110">Właściwość powiązania `TransactionFlowProtocol` umożliwia wybranie spośród dwóch różnych protokołów transakcji, których można użyć do przepływu transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-110">The `TransactionFlowProtocol` binding property enables you to choose among two different transaction protocols that you can use to flow a transaction.</span></span> <span data-ttu-id="dc4c6-111">W poniższych sekcjach krótko opisano każdą z nich.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-111">The following sections briefly describe each of them.</span></span>  
  
### <a name="ws-atomictransaction-protocol"></a><span data-ttu-id="dc4c6-112">Protokół WS-AtomicTransaction</span><span class="sxs-lookup"><span data-stu-id="dc4c6-112">WS-AtomicTransaction Protocol</span></span>  
 <span data-ttu-id="dc4c6-113">Protokół WS-AtomicTransaction (WS-AT) jest użyteczny w scenariuszach, gdy wymagane jest współdziałanie z stosami protokołu innych firm.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-113">The WS-AtomicTransaction (WS-AT) protocol is useful for scenarios when interoperability with third-party protocol stacks is required.</span></span>  
  
### <a name="oletransactions-protocol"></a><span data-ttu-id="dc4c6-114">Protokół OleTransactions</span><span class="sxs-lookup"><span data-stu-id="dc4c6-114">OleTransactions Protocol</span></span>  
 <span data-ttu-id="dc4c6-115">Protokół OleTransactions jest użyteczny w scenariuszach, gdy współdziałanie z stosami protokołu innych firm nie jest wymagane, a program wdrażania usługi wie z wyprzedzeniem, że usługa protokołu WS-AT jest wyłączona lokalnie lub istniejąca topologia sieci nie Preferuj użycia usługi WS-AT.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-115">The OleTransactions protocol is useful for scenarios when interoperability with third-party protocol stacks is not required, and the deployer of a service knows in advance that the WS-AT protocol service is disabled locally or the existing network topology does not favor the usage of WS-AT.</span></span>  
  
 <span data-ttu-id="dc4c6-116">W poniższej tabeli przedstawiono różne typy przepływów transakcji, które można wygenerować przy użyciu tych różnych kombinacji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-116">The following table shows the different types of transaction flows that can be generated using these various combinations.</span></span>  
  
|<span data-ttu-id="dc4c6-117">TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="dc4c6-117">TransactionFlow</span></span><br /><br /> <span data-ttu-id="dc4c6-118">powiązanie</span><span class="sxs-lookup"><span data-stu-id="dc4c6-118">binding</span></span>|<span data-ttu-id="dc4c6-119">Właściwość powiązania TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="dc4c6-119">TransactionFlow binding property</span></span>|<span data-ttu-id="dc4c6-120">Protokół powiązania TransactionFlowProtocol</span><span class="sxs-lookup"><span data-stu-id="dc4c6-120">TransactionFlowProtocol binding protocol</span></span>|<span data-ttu-id="dc4c6-121">Typ przepływu transakcji</span><span class="sxs-lookup"><span data-stu-id="dc4c6-121">Type of transaction flow</span></span>|  
|---------------------------------|--------------------------------------|----------------------------------------------|------------------------------|  
|<span data-ttu-id="dc4c6-122">Obowiązkowy</span><span class="sxs-lookup"><span data-stu-id="dc4c6-122">Mandatory</span></span>|<span data-ttu-id="dc4c6-123">true</span><span class="sxs-lookup"><span data-stu-id="dc4c6-123">true</span></span>|<span data-ttu-id="dc4c6-124">WS-AT</span><span class="sxs-lookup"><span data-stu-id="dc4c6-124">WS-AT</span></span>|<span data-ttu-id="dc4c6-125">Transakcja musi być przepływa w formacie międzyoperacyjnym WS-AT.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-125">Transaction must be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="dc4c6-126">Obowiązkowy</span><span class="sxs-lookup"><span data-stu-id="dc4c6-126">Mandatory</span></span>|<span data-ttu-id="dc4c6-127">true</span><span class="sxs-lookup"><span data-stu-id="dc4c6-127">true</span></span>|<span data-ttu-id="dc4c6-128">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="dc4c6-128">OleTransactions</span></span>|<span data-ttu-id="dc4c6-129">Transakcja musi być przepływa w formacie OleTransactions WCF.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-129">Transaction must be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="dc4c6-130">Obowiązkowy</span><span class="sxs-lookup"><span data-stu-id="dc4c6-130">Mandatory</span></span>|<span data-ttu-id="dc4c6-131">false</span><span class="sxs-lookup"><span data-stu-id="dc4c6-131">false</span></span>|<span data-ttu-id="dc4c6-132">Nie dotyczy</span><span class="sxs-lookup"><span data-stu-id="dc4c6-132">Not applicable</span></span>|<span data-ttu-id="dc4c6-133">Nie dotyczy, ponieważ jest to nieprawidłowa konfiguracja.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-133">Not applicable because this is an invalid configuration.</span></span>|  
|<span data-ttu-id="dc4c6-134">Występować</span><span class="sxs-lookup"><span data-stu-id="dc4c6-134">Allowed</span></span>|<span data-ttu-id="dc4c6-135">true</span><span class="sxs-lookup"><span data-stu-id="dc4c6-135">true</span></span>|<span data-ttu-id="dc4c6-136">WS-AT</span><span class="sxs-lookup"><span data-stu-id="dc4c6-136">WS-AT</span></span>|<span data-ttu-id="dc4c6-137">Transakcja może być przepływa w formacie międzyoperacyjnym WS-AT.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-137">Transaction may be flowed in the interoperable WS-AT format.</span></span>|  
|<span data-ttu-id="dc4c6-138">Występować</span><span class="sxs-lookup"><span data-stu-id="dc4c6-138">Allowed</span></span>|<span data-ttu-id="dc4c6-139">true</span><span class="sxs-lookup"><span data-stu-id="dc4c6-139">true</span></span>|<span data-ttu-id="dc4c6-140">OleTransactions</span><span class="sxs-lookup"><span data-stu-id="dc4c6-140">OleTransactions</span></span>|<span data-ttu-id="dc4c6-141">Transakcja może być przepływa w formacie OleTransactions WCF.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-141">Transaction may be flowed in the WCF OleTransactions format.</span></span>|  
|<span data-ttu-id="dc4c6-142">Występować</span><span class="sxs-lookup"><span data-stu-id="dc4c6-142">Allowed</span></span>|<span data-ttu-id="dc4c6-143">false</span><span class="sxs-lookup"><span data-stu-id="dc4c6-143">false</span></span>|<span data-ttu-id="dc4c6-144">Dowolna wartość</span><span class="sxs-lookup"><span data-stu-id="dc4c6-144">Any value</span></span>|<span data-ttu-id="dc4c6-145">Transakcja nie jest przepływa.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-145">A transaction is not flowed.</span></span>|  
|<span data-ttu-id="dc4c6-146">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="dc4c6-146">NotAllowed</span></span>|<span data-ttu-id="dc4c6-147">Dowolna wartość</span><span class="sxs-lookup"><span data-stu-id="dc4c6-147">Any value</span></span>|<span data-ttu-id="dc4c6-148">Dowolna wartość</span><span class="sxs-lookup"><span data-stu-id="dc4c6-148">Any value</span></span>|<span data-ttu-id="dc4c6-149">Transakcja nie jest przepływa.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-149">A transaction is not flowed.</span></span>|  
  
 <span data-ttu-id="dc4c6-150">Poniższa tabela zawiera podsumowanie wyników przetwarzania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-150">The following table summarizes the message processing result.</span></span>  
  
|<span data-ttu-id="dc4c6-151">Komunikat przychodzący</span><span class="sxs-lookup"><span data-stu-id="dc4c6-151">Incoming message</span></span>|<span data-ttu-id="dc4c6-152">Ustawienie TransactionFlow</span><span class="sxs-lookup"><span data-stu-id="dc4c6-152">TransactionFlow setting</span></span>|<span data-ttu-id="dc4c6-153">Nagłówek transakcji</span><span class="sxs-lookup"><span data-stu-id="dc4c6-153">Transaction header</span></span>|<span data-ttu-id="dc4c6-154">Wynik przetwarzania komunikatu</span><span class="sxs-lookup"><span data-stu-id="dc4c6-154">Message processing result</span></span>|  
|----------------------|-----------------------------|------------------------|-------------------------------|  
|<span data-ttu-id="dc4c6-155">Transakcja jest zgodna z oczekiwanym formatem protokołu</span><span class="sxs-lookup"><span data-stu-id="dc4c6-155">Transaction matches expected protocol format</span></span>|<span data-ttu-id="dc4c6-156">Dozwolone lub obowiązkowe</span><span class="sxs-lookup"><span data-stu-id="dc4c6-156">Allowed or Mandatory</span></span>|<span data-ttu-id="dc4c6-157">`MustUnderstand` równe `true`.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-157">`MustUnderstand` equals `true`.</span></span>|<span data-ttu-id="dc4c6-158">Proces</span><span class="sxs-lookup"><span data-stu-id="dc4c6-158">Process</span></span>|  
|<span data-ttu-id="dc4c6-159">Transakcja nie jest zgodna z oczekiwanym formatem protokołu</span><span class="sxs-lookup"><span data-stu-id="dc4c6-159">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="dc4c6-160">Obowiązkowy</span><span class="sxs-lookup"><span data-stu-id="dc4c6-160">Mandatory</span></span>|<span data-ttu-id="dc4c6-161">`MustUnderstand` równe `false`.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-161">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="dc4c6-162">Odrzucono, ponieważ jest wymagana transakcja</span><span class="sxs-lookup"><span data-stu-id="dc4c6-162">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="dc4c6-163">Transakcja nie jest zgodna z oczekiwanym formatem protokołu</span><span class="sxs-lookup"><span data-stu-id="dc4c6-163">Transaction does not match expected protocol format</span></span>|<span data-ttu-id="dc4c6-164">Występować</span><span class="sxs-lookup"><span data-stu-id="dc4c6-164">Allowed</span></span>|<span data-ttu-id="dc4c6-165">`MustUnderstand` równe `false`.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-165">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="dc4c6-166">Odrzucono, ponieważ nagłówek nie jest zrozumiały</span><span class="sxs-lookup"><span data-stu-id="dc4c6-166">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="dc4c6-167">Transakcja przy użyciu dowolnego formatu protokołu</span><span class="sxs-lookup"><span data-stu-id="dc4c6-167">Transaction using any protocol format</span></span>|<span data-ttu-id="dc4c6-168">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="dc4c6-168">NotAllowed</span></span>|<span data-ttu-id="dc4c6-169">`MustUnderstand` równe `false`.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-169">`MustUnderstand` equals `false`.</span></span>|<span data-ttu-id="dc4c6-170">Odrzucono, ponieważ nagłówek nie jest zrozumiały</span><span class="sxs-lookup"><span data-stu-id="dc4c6-170">Rejected because the header is not understood</span></span>|  
|<span data-ttu-id="dc4c6-171">Brak transakcji</span><span class="sxs-lookup"><span data-stu-id="dc4c6-171">No transaction</span></span>|<span data-ttu-id="dc4c6-172">Obowiązkowy</span><span class="sxs-lookup"><span data-stu-id="dc4c6-172">Mandatory</span></span>|<span data-ttu-id="dc4c6-173">Brak</span><span class="sxs-lookup"><span data-stu-id="dc4c6-173">N/A</span></span>|<span data-ttu-id="dc4c6-174">Odrzucono, ponieważ jest wymagana transakcja</span><span class="sxs-lookup"><span data-stu-id="dc4c6-174">Rejected because a transaction is required</span></span>|  
|<span data-ttu-id="dc4c6-175">Brak transakcji</span><span class="sxs-lookup"><span data-stu-id="dc4c6-175">No transaction</span></span>|<span data-ttu-id="dc4c6-176">Występować</span><span class="sxs-lookup"><span data-stu-id="dc4c6-176">Allowed</span></span>|<span data-ttu-id="dc4c6-177">Brak</span><span class="sxs-lookup"><span data-stu-id="dc4c6-177">N/A</span></span>|<span data-ttu-id="dc4c6-178">Proces</span><span class="sxs-lookup"><span data-stu-id="dc4c6-178">Process</span></span>|  
|<span data-ttu-id="dc4c6-179">Brak transakcji</span><span class="sxs-lookup"><span data-stu-id="dc4c6-179">No transaction</span></span>|<span data-ttu-id="dc4c6-180">NotAllowed</span><span class="sxs-lookup"><span data-stu-id="dc4c6-180">NotAllowed</span></span>|<span data-ttu-id="dc4c6-181">Brak</span><span class="sxs-lookup"><span data-stu-id="dc4c6-181">N/A</span></span>|<span data-ttu-id="dc4c6-182">Proces</span><span class="sxs-lookup"><span data-stu-id="dc4c6-182">Process</span></span>|  
  
 <span data-ttu-id="dc4c6-183">Chociaż każda metoda w kontrakcie może mieć różne wymagania dotyczące przepływu transakcji, ustawienie protokołu przepływu transakcji jest ograniczone na poziomie powiązania.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-183">While each method on a contract can have different transaction flow requirements, the transaction flow protocol setting is scoped at the level of the binding.</span></span> <span data-ttu-id="dc4c6-184">Oznacza to, że wszystkie metody, które współużytkują ten sam punkt końcowy (i w związku z tym to samo powiązanie), również współużytkują te same zasady, które umożliwiają lub wymagają przepływu transakcji, a także ten sam protokół transakcji, jeśli ma to zastosowanie.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-184">This means that all methods that share the same endpoint (and therefore the same binding) also share the same policy allowing or requiring transaction flow, as well as the same transaction protocol if applicable.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-method-level"></a><span data-ttu-id="dc4c6-185">Włączanie przepływu transakcji na poziomie metody</span><span class="sxs-lookup"><span data-stu-id="dc4c6-185">Enabling Transaction Flow at the Method Level</span></span>  
 <span data-ttu-id="dc4c6-186">Wymagania przepływu transakcji nie są zawsze takie same dla wszystkich metod w kontrakcie usługi.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-186">Transaction flow requirements are not always the same for all methods in a service contract.</span></span> <span data-ttu-id="dc4c6-187">W związku z tym WCF zapewnia również mechanizm oparty na atrybutach, aby umożliwić wyrażanie preferencji przepływu transakcji poszczególnych metod.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-187">Therefore, WCF also provides an attribute-based mechanism to allow each method's transaction flow preferences to be expressed.</span></span> <span data-ttu-id="dc4c6-188">Jest to osiągane przez <xref:System.ServiceModel.TransactionFlowAttribute>, który określa poziom, w którym operacja usługi akceptuje Nagłówek transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-188">This is achieved by the <xref:System.ServiceModel.TransactionFlowAttribute> that specifies the level in which a service operation accepts a transaction header.</span></span> <span data-ttu-id="dc4c6-189">Jeśli chcesz włączyć przepływ transakcji, należy oznaczyć metody kontraktu usługi z tym atrybutem.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-189">You should mark your service contract methods with this attribute if you want to enable transaction flow.</span></span> <span data-ttu-id="dc4c6-190">Ten atrybut przyjmuje jedną z wartości wyliczenia <xref:System.ServiceModel.TransactionFlowOption>, w którym wartość domyślna to <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-190">This attribute takes one of the values of the <xref:System.ServiceModel.TransactionFlowOption> enumeration, in which the default value is <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span> <span data-ttu-id="dc4c6-191">Jeśli dowolna wartość z wyjątkiem <xref:System.ServiceModel.TransactionFlowOption.NotAllowed> jest określona, metoda jest wymagana, aby nie była jednokierunkowa.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-191">If any value except <xref:System.ServiceModel.TransactionFlowOption.NotAllowed> is specified, the method is required to not be one-way.</span></span> <span data-ttu-id="dc4c6-192">Deweloper może użyć tego atrybutu, aby określić wymagania lub ograniczenia przepływu transakcji na poziomie metody w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-192">A developer can use this attribute to specify method-level transaction flow requirements or constraints at design time.</span></span>  
  
## <a name="enabling-transaction-flow-at-the-endpoint-level"></a><span data-ttu-id="dc4c6-193">Włączanie przepływu transakcji na poziomie punktu końcowego</span><span class="sxs-lookup"><span data-stu-id="dc4c6-193">Enabling Transaction Flow at the Endpoint Level</span></span>  
 <span data-ttu-id="dc4c6-194">Oprócz ustawienia przepływu transakcji na poziomie metody, który udostępnia atrybut <xref:System.ServiceModel.TransactionFlowAttribute>, funkcja WCF zapewnia ustawienie dla przepływu transakcji dla całego punktu końcowego, co umożliwia administratorom sterowanie przepływem transakcji na wyższym poziomie.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-194">In addition to the method-level transaction flow setting  the <xref:System.ServiceModel.TransactionFlowAttribute> attribute provides, WCF provides an endpoint-wide setting for transaction flow to allow administrators to control transaction flow at a higher level.</span></span>  
  
 <span data-ttu-id="dc4c6-195">Jest to osiągane przez <xref:System.ServiceModel.Channels.TransactionFlowBindingElement>, co umożliwia włączenie lub wyłączenie przychodzącego przepływu transakcji w ustawieniach powiązań punktu końcowego, a także określenie formatu żądanego protokołu transakcji dla przychodzących transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-195">This is achieved by the <xref:System.ServiceModel.Channels.TransactionFlowBindingElement>, which enables you to enable or disable incoming transaction flow in an endpoint’s binding settings, as well as to specify the desired transaction protocol format for incoming transactions.</span></span>  
  
 <span data-ttu-id="dc4c6-196">Jeśli powiązanie wyłączyło przepływ transakcji, ale jedna z operacji w kontrakcie usługi wymaga transakcji przychodzącej, podczas uruchamiania usługi jest zgłaszany wyjątek sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-196">If the binding has disabled transaction flow, but one of the operations on a service contract requires an incoming transaction, then a validation exception is thrown at service startup.</span></span>  
  
 <span data-ttu-id="dc4c6-197">Większość stałych powiązań WCF zawiera atrybuty `transactionFlow` i `transactionProtocol`, które umożliwiają skonfigurowanie określonego powiązania w celu akceptowania przychodzących transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-197">Most of the standing bindings WCF provides contain the `transactionFlow` and `transactionProtocol` attributes to enable you to configure the specific binding to accept incoming transactions.</span></span> <span data-ttu-id="dc4c6-198">Aby uzyskać więcej informacji na temat ustawiania elementów konfiguracji, zobacz [\<powiązywanie >](../../configure-apps/file-schema/wcf/bindings.md).</span><span class="sxs-lookup"><span data-stu-id="dc4c6-198">For more information about setting the configuration elements, see [\<binding>](../../configure-apps/file-schema/wcf/bindings.md).</span></span>  
  
 <span data-ttu-id="dc4c6-199">Administrator lub program do wdrażania może użyć przepływu transakcji na poziomie punktu końcowego w celu skonfigurowania wymagań przepływu transakcji lub ograniczeń w czasie wdrażania przy użyciu pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-199">An administrator or deployer can use endpoint-level transaction flow to configure transaction flow requirements or constraints at deployment time using the configuration file.</span></span>  
  
## <a name="security"></a><span data-ttu-id="dc4c6-200">Zabezpieczenia</span><span class="sxs-lookup"><span data-stu-id="dc4c6-200">Security</span></span>  
 <span data-ttu-id="dc4c6-201">Aby zapewnić bezpieczeństwo i integralność systemu, należy zabezpieczyć wymianę komunikatów podczas przepływu transakcji między aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-201">To ensure system security and integrity, you must secure message exchanges when flowing transactions between applications.</span></span> <span data-ttu-id="dc4c6-202">Nie należy przepływać ani ujawniać szczegółowych informacji o transakcji do żadnej aplikacji, która nie jest uprawniona do uczestniczenia w tej samej transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-202">You should not flow or disclose transaction details to any application that is not entitled to participate in the same transaction.</span></span>  
  
 <span data-ttu-id="dc4c6-203">Podczas generowania klientów WCF do nieznanych lub niezaufanych usług sieci Web za pomocą wymiany metadanych, wywołania operacji na tych usługach sieci Web powinny pomijać bieżącą transakcję, jeśli jest to możliwe.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-203">When generating WCF clients to unknown or untrusted Web services through the use of metadata exchange, calls to operations on these Web services should suppress the current transaction if possible.</span></span> <span data-ttu-id="dc4c6-204">Poniższy przykład demonstruje, jak to zrobić.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-204">The following example demonstrates how to do this.</span></span>  
  
```csharp
//client code which has an ambient transaction  
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress))  
{  
    // No transaction will flow to this operation  
    untrustedProxy.Operation1(...);  
    scope.Complete();  
}  
//remainder of client code  
```  
  
 <span data-ttu-id="dc4c6-205">Ponadto usługi należy skonfigurować w taki sposób, aby akceptowały transakcje przychodzące tylko od klientów, którzy zostali uwierzytelnieni i autoryzowani.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-205">In addition, services should be configured to accept incoming transactions only from clients that they have authenticated and authorized.</span></span> <span data-ttu-id="dc4c6-206">Przychodzące transakcje powinny być akceptowane tylko wtedy, gdy pochodzą z wysoce zaufanych klientów.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-206">Incoming transactions should only be accepted if they come from highly trusted clients.</span></span>  
  
## <a name="policy-assertions"></a><span data-ttu-id="dc4c6-207">Potwierdzenia zasad</span><span class="sxs-lookup"><span data-stu-id="dc4c6-207">Policy Assertions</span></span>  
 <span data-ttu-id="dc4c6-208">Funkcja WCF używa potwierdzeń zasad do sterowania przepływem transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-208">WCF uses policy assertions to control transaction flow.</span></span> <span data-ttu-id="dc4c6-209">Potwierdzenia zasad znajdują się w dokumencie zasad usługi, który jest generowany przez agregowanie kontraktów, konfiguracji i atrybutów.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-209">Policy assertions can be found in a service’s policy document, which is generated by aggregating contracts, configuration, and attributes.</span></span> <span data-ttu-id="dc4c6-210">Klient może uzyskać dokument zasad usługi przy użyciu polecenia HTTP GET lub żądania WS-MetadataExchange.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-210">The client can obtain the service’s policy document using an HTTP GET or a WS-MetadataExchange request-reply.</span></span> <span data-ttu-id="dc4c6-211">Klienci mogą następnie przetwarzać dokument zasad, aby określić, które operacje w kontrakcie usługi mogą obsługiwać lub wymagać przepływu transakcji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-211">Clients can then process the policy document to determine which operations on a service contract may support or require transaction flow.</span></span>  
  
 <span data-ttu-id="dc4c6-212">Potwierdzenia zasad przepływu transakcji mają wpływ na przepływ transakcji przez określenie nagłówków protokołu SOAP, które klient powinien wysłać do usługi, aby reprezentować transakcję.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-212">Transaction flow policy assertions affect transaction flow by specifying the SOAP headers that a client should send to a service to represent a transaction.</span></span> <span data-ttu-id="dc4c6-213">Wszystkie nagłówki transakcji muszą być oznaczone `MustUnderstand` równe `true`.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-213">All transaction headers must be marked with `MustUnderstand` equal to `true`.</span></span> <span data-ttu-id="dc4c6-214">Wszystkie komunikaty z nagłówkiem oznaczonym inaczej są odrzucane z błędem SOAP.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-214">Any message with a header marked otherwise is rejected with a SOAP fault.</span></span>  
  
 <span data-ttu-id="dc4c6-215">Tylko jedno potwierdzenie zasad związanych z transakcją może być obecne w jednej operacji.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-215">Only one transaction-related policy assertion can be present on a single operation.</span></span> <span data-ttu-id="dc4c6-216">Dokumenty zasad z więcej niż jedną potwierdzeniem transakcji w operacji są uznawane za nieprawidłowe i są odrzucane przez WCF.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-216">Policy documents with more than one transaction assertion on an operation are considered invalid and are rejected by WCF.</span></span> <span data-ttu-id="dc4c6-217">Ponadto tylko jeden protokół transakcji może być obecny w obrębie każdego typu portu.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-217">In addition, only a single transaction protocol can be present inside each port type.</span></span> <span data-ttu-id="dc4c6-218">Dokumenty zasad z operacjami odwołującymi się do więcej niż jednego protokołu transakcji wewnątrz jednego typu portu są uznawane za nieprawidłowe i są odrzucane przez narzędzie do obsługi [metadanych ServiceModel (Svcutil. exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="dc4c6-218">Policy documents with operations referencing more than one transaction protocol inside a single port type are considered invalid, and are rejected by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="dc4c6-219">Dokumenty zasad z potwierdzeniami transakcji znajdującymi się w wiadomościach wyjściowych lub jednokierunkowymi komunikatami wejściowymi są również uznawane za nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="dc4c6-219">Policy documents with transaction assertions present on output messages or one-way input messages are also considered invalid.</span></span>
