---
title: "Omówienie architektury transferu danych"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: data transfer [WCF], architectural overview
ms.assetid: 343c2ca2-af53-4936-a28c-c186b3524ee9
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 829635bd7fd73b58004c59862f4d589e95f67f9b
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="data-transfer-architectural-overview"></a><span data-ttu-id="0c334-102">Omówienie architektury transferu danych</span><span class="sxs-lookup"><span data-stu-id="0c334-102">Data Transfer Architectural Overview</span></span>
[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)]<span data-ttu-id="0c334-103">można traktować jako infrastruktury obsługi wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-103"> can be thought of as a messaging infrastructure.</span></span> <span data-ttu-id="0c334-104">Można odbierać komunikaty, ich przetwarzania i wysyłania ich do kodu użytkownika dla dalszego działania lub można utworzyć wiadomości z danych przez kod użytkownika i dostarczania ich do miejsca docelowego.</span><span class="sxs-lookup"><span data-stu-id="0c334-104">It can receive messages, process them, and dispatch them to user code for further action, or it can construct messages from data given by user code and deliver them to a destination.</span></span> <span data-ttu-id="0c334-105">W tym temacie, który jest przeznaczony dla zaawansowanych programistów, w tym artykule opisano architekturę obsługi wiadomości i danych zawartych w niej.</span><span class="sxs-lookup"><span data-stu-id="0c334-105">This topic, which is intended for advanced developers, describes the architecture for handling messages and the contained data.</span></span> <span data-ttu-id="0c334-106">Dla widoku prostszy, zorientowane na zadania sposobu wysyłania i odbierania danych, zobacz [Określanie transferu danych w kontraktach usług](../../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-106">For a simpler, task-oriented view of how to send and receive data, see [Specifying Data Transfer in Service Contracts](../../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0c334-107">W tym temacie omówiono [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] szczegóły implementacji, które nie są widoczne, sprawdzając [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] obiektu modelu.</span><span class="sxs-lookup"><span data-stu-id="0c334-107">This topic discusses [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] implementation details that are not visible by examining the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] object model.</span></span> <span data-ttu-id="0c334-108">Są dwa wyrazy ostrożność w kolejności, w odniesieniu do szczegóły implementacji udokumentowane.</span><span class="sxs-lookup"><span data-stu-id="0c334-108">Two words of caution are in order with regard to documented implementation details.</span></span> <span data-ttu-id="0c334-109">Po pierwsze opisy są uproszczone; Rzeczywista implementacja może być bardziej złożone z powodu optymalizacji lub z innych powodów.</span><span class="sxs-lookup"><span data-stu-id="0c334-109">First, the descriptions are simplified; actual implementation may be more complex due to optimizations or other reasons.</span></span> <span data-ttu-id="0c334-110">Po drugie, nigdy nie będą miały szczegóły konkretnej implementacji, nawet udokumentowane, ponieważ te może ulec zmianie bez uprzedzenia z wersji do wersji lub nawet w przypadku obsługi wersji.</span><span class="sxs-lookup"><span data-stu-id="0c334-110">Second, you should never rely on specific implementation details, even documented ones, because these may change without notice from version to version or even in a servicing release.</span></span>  
  
## <a name="basic-architecture"></a><span data-ttu-id="0c334-111">Podstawowa architektura</span><span class="sxs-lookup"><span data-stu-id="0c334-111">Basic Architecture</span></span>  
 <span data-ttu-id="0c334-112">Stanowiącej podstawę [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] możliwości obsługi wiadomości jest <xref:System.ServiceModel.Channels.Message> klasy, która jest opisane szczegółowo w temacie [używanie klasy Message](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-112">At the core of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message-handling capabilities is the <xref:System.ServiceModel.Channels.Message> class, which is described in detail in [Using the Message Class](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span></span> <span data-ttu-id="0c334-113">Składniki wykonawcze [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] można podzielić na dwie główne części: stosu kanału i struktura usługi z <xref:System.ServiceModel.Channels.Message> klasy trwa punktu połączenia.</span><span class="sxs-lookup"><span data-stu-id="0c334-113">The run-time components of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] can be divided into two major parts: the channel stack and the service framework, with the <xref:System.ServiceModel.Channels.Message> class being the connection point.</span></span>  
  
 <span data-ttu-id="0c334-114">Stos kanał jest odpowiedzialny za konwertowanie prawidłową <xref:System.ServiceModel.Channels.Message> wystąpienia i niektóre akcje, umożliwiająca wysyłanie i odbieranie wiadomości danych.</span><span class="sxs-lookup"><span data-stu-id="0c334-114">The channel stack is responsible for converting between a valid <xref:System.ServiceModel.Channels.Message> instance and some action that corresponds to the sending or receiving of message data.</span></span> <span data-ttu-id="0c334-115">Po stronie wysyłającej stosu kanału ma prawidłową <xref:System.ServiceModel.Channels.Message> wystąpienia, a po zakończeniu niektórych przetwarzania wykonuje niektóre akcje logicznie umożliwiająca wysyłanie komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0c334-115">On the sending side, the channel stack takes a valid <xref:System.ServiceModel.Channels.Message> instance and, after some processing, performs some action that logically corresponds to sending the message.</span></span> <span data-ttu-id="0c334-116">Akcja może wysyłać pakietów TCP lub HTTP usługi kolejkowania komunikatów w usłudze kolejkowania zapisu komunikatu do bazy danych, zapisać go do udziału plików lub innych działań, w zależności od implementacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-116">The action may be sending TCP or HTTP packets, queuing the message in Message Queuing, writing the message to a database, saving it to a file share, or any other action, depending on the implementation.</span></span> <span data-ttu-id="0c334-117">Najbardziej typowych akcji wysyła wiadomość za pośrednictwem protokołu sieciowego.</span><span class="sxs-lookup"><span data-stu-id="0c334-117">The most common action is sending the message over a network protocol.</span></span> <span data-ttu-id="0c334-118">Po stronie odbierania sytuacji przeciwieństwem — wykrycia akcję (która może być TCP lub HTTP pakiety przychodzące lub innych działań), a po zakończeniu przetwarzania stosu kanału konwertuje tej akcji na prawidłową <xref:System.ServiceModel.Channels.Message> wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0c334-118">On the receive side, the opposite happens—an action is detected (which may be TCP or HTTP packets arriving or any other action), and, after processing, the channel stack converts this action into a valid <xref:System.ServiceModel.Channels.Message> instance.</span></span>  
  
 <span data-ttu-id="0c334-119">Można użyć [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] przy użyciu <xref:System.ServiceModel.Channels.Message> klasy i kanał stosu bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="0c334-119">You can use [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] by using the <xref:System.ServiceModel.Channels.Message> class and the channel stack directly.</span></span> <span data-ttu-id="0c334-120">Jednak jest to zrobić.</span><span class="sxs-lookup"><span data-stu-id="0c334-120">However, doing so is difficult and time-consuming.</span></span> <span data-ttu-id="0c334-121">Ponadto <xref:System.ServiceModel.Channels.Message> obiektu nie zapewnia metadanych obsługi, więc nie można wygenerować jednoznacznie [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] klientów, jeśli używasz [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] w ten sposób.</span><span class="sxs-lookup"><span data-stu-id="0c334-121">Additionally, the <xref:System.ServiceModel.Channels.Message> object provides no metadata support, so you cannot generate strongly typed [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clients if you use [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] in this manner.</span></span>  
  
 <span data-ttu-id="0c334-122">W związku z tym [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] zawiera struktura usługi, która zapewnia model programowania łatwy w użyciu, który służy do tworzenia i odbierania `Message` obiektów.</span><span class="sxs-lookup"><span data-stu-id="0c334-122">Therefore, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] includes a service framework that provides an easy-to-use programming model that you can use to construct and receive `Message` objects.</span></span> <span data-ttu-id="0c334-123">Struktura usługi mapy usług [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types za pośrednictwem pojęcie kontraktów usług i komunikaty będą rozsyłane do operacji użytkownika, które są po prostu [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] metody oznaczone atrybutami <xref:System.ServiceModel.OperationContractAttribute> atrybutu (Aby uzyskać więcej informacji, zobacz [Projektowanie kontraktów usług](../../../../docs/framework/wcf/designing-service-contracts.md)).</span><span class="sxs-lookup"><span data-stu-id="0c334-123">The service framework maps services to [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types through the notion of service contracts, and dispatches messages to user operations that are simply [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] methods marked with the <xref:System.ServiceModel.OperationContractAttribute> attribute (for more details, see [Designing Service Contracts](../../../../docs/framework/wcf/designing-service-contracts.md)).</span></span> <span data-ttu-id="0c334-124">Te metody mogą mieć parametrów i zwraca wartości.</span><span class="sxs-lookup"><span data-stu-id="0c334-124">These methods may have parameters and return values.</span></span> <span data-ttu-id="0c334-125">Na stronie usługi w ramach usługi konwertuje przychodzące <xref:System.ServiceModel.Channels.Message> wystąpień do parametrów i konwertuje wartości są zwracane do wychodzące <xref:System.ServiceModel.Channels.Message> wystąpień.</span><span class="sxs-lookup"><span data-stu-id="0c334-125">On the service side, the service framework converts incoming <xref:System.ServiceModel.Channels.Message> instances into parameters and converts return values into outgoing <xref:System.ServiceModel.Channels.Message> instances.</span></span> <span data-ttu-id="0c334-126">Po stronie klienta jest przeciwieństwem.</span><span class="sxs-lookup"><span data-stu-id="0c334-126">On the client side, it does the opposite.</span></span> <span data-ttu-id="0c334-127">Rozważmy na przykład `FindAirfare` operacji poniżej.</span><span class="sxs-lookup"><span data-stu-id="0c334-127">For example, consider the `FindAirfare` operation below.</span></span>  
  
 [!code-csharp[c_DataArchitecture#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#1)]
 [!code-vb[c_DataArchitecture#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#1)]  
  
 <span data-ttu-id="0c334-128">Załóżmy, że `FindAirfare` jest wywoływana na kliencie.</span><span class="sxs-lookup"><span data-stu-id="0c334-128">Suppose `FindAirfare` is called on the client.</span></span> <span data-ttu-id="0c334-129">Konwertuje w ramach usługi na kliencie `FromCity` i `ToCity` parametrów w wychodzący <xref:System.ServiceModel.Channels.Message> wystąpienia i przekazuje je do stosu kanału na wysłanie.</span><span class="sxs-lookup"><span data-stu-id="0c334-129">The service framework on the client converts the `FromCity` and `ToCity` parameters into an outgoing <xref:System.ServiceModel.Channels.Message> instance and passes it to the channel stack to be sent.</span></span>  
  
 <span data-ttu-id="0c334-130">Na stronie usługi podczas <xref:System.ServiceModel.Channels.Message> wystąpienia dociera ze stosu kanału, struktura usługi wyodrębnia odpowiednie dane z komunikat, aby wypełnić `FromCity` i `ToCity` parametry, a następnie wywołania po stronie serwera `FindAirfare` Metoda.</span><span class="sxs-lookup"><span data-stu-id="0c334-130">On the service side, when a <xref:System.ServiceModel.Channels.Message> instance arrives from the channel stack, the service framework extracts the relevant data from the message to populate the `FromCity` and `ToCity` parameters and then calls the service-side `FindAirfare` method.</span></span> <span data-ttu-id="0c334-131">Gdy metoda zwróci wartość, w ramach usługi przyjmuje wartość całkowitą zwrócony i `IsDirectFlight` parametru wyjściowego i tworzy <xref:System.ServiceModel.Channels.Message> wystąpienie obiektu, który zawiera te informacje.</span><span class="sxs-lookup"><span data-stu-id="0c334-131">When the method returns, the service framework takes the returned integer value and the `IsDirectFlight` output parameter and creates a <xref:System.ServiceModel.Channels.Message> object instance that contains this information.</span></span> <span data-ttu-id="0c334-132">Następnie przekazuje `Message` wystąpienia stos kanału do wysłania do klienta.</span><span class="sxs-lookup"><span data-stu-id="0c334-132">It then passes the `Message` instance to the channel stack to be sent back to the client.</span></span>  
  
 <span data-ttu-id="0c334-133">Po stronie klienta <xref:System.ServiceModel.Channels.Message> wystąpienia, które zawiera komunikat odpowiedzi wynika ze stosu kanału.</span><span class="sxs-lookup"><span data-stu-id="0c334-133">On the client side, a <xref:System.ServiceModel.Channels.Message> instance that contains the response message emerges from the channel stack.</span></span> <span data-ttu-id="0c334-134">Struktura usługi wyodrębnia wartości zwracanej i `IsDirectFlight` wartości i zwraca je do obiektu wywołującego klienta.</span><span class="sxs-lookup"><span data-stu-id="0c334-134">The service framework extracts the return value and the `IsDirectFlight` value and returns these to the caller of the client.</span></span>  
  
## <a name="message-class"></a><span data-ttu-id="0c334-135">Klasy wiadomości</span><span class="sxs-lookup"><span data-stu-id="0c334-135">Message Class</span></span>  
 <span data-ttu-id="0c334-136"><xref:System.ServiceModel.Channels.Message> Klasa ma być abstrakcyjna reprezentację komunikatu, ale jego projektowania zdecydowanie jest powiązany z komunikatu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="0c334-136">The <xref:System.ServiceModel.Channels.Message> class is intended to be an abstract representation of a message, but its design is strongly tied to the SOAP message.</span></span> <span data-ttu-id="0c334-137">A <xref:System.ServiceModel.Channels.Message> zawiera trzy główne informacje: treść wiadomości, nagłówki komunikatów i właściwości wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-137">A <xref:System.ServiceModel.Channels.Message> contains three major pieces of information: a message body, message headers, and message properties.</span></span>  
  
## <a name="message-body"></a><span data-ttu-id="0c334-138">Treść wiadomości</span><span class="sxs-lookup"><span data-stu-id="0c334-138">Message Body</span></span>  
 <span data-ttu-id="0c334-139">Treść komunikatu jest przeznaczony do reprezentowania danych rzeczywistych ładunku komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0c334-139">The message body is intended to represent the actual data payload of the message.</span></span> <span data-ttu-id="0c334-140">Treść komunikatu zawsze jest reprezentowany jako obiekt typu Infoset XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-140">The message body is always represented as an XML Infoset.</span></span> <span data-ttu-id="0c334-141">Nie oznacza to, że wszystkie komunikaty utworzony lub odebrano w [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] musi być w formacie XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-141">This does not mean that all messages created or received in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] must be in XML format.</span></span> <span data-ttu-id="0c334-142">Jest stos kanału, aby określić sposób interpretowania treść komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0c334-142">It is up to the channel stack to decide how to interpret the message body.</span></span> <span data-ttu-id="0c334-143">Może Emituj go jako XML, przekonwertuj go do jakiegoś innego formatu lub nawet pominąć całkowicie.</span><span class="sxs-lookup"><span data-stu-id="0c334-143">It may emit it as XML, convert it to some other format, or even omit it entirely.</span></span> <span data-ttu-id="0c334-144">Oczywiście z większością powiązania [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] dostaw, treść komunikatu jest reprezentowany jako zawartości XML w sekcji treści koperty protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="0c334-144">Of course, with most of the bindings [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] supplies, the message body is represented as XML content in the body section of a SOAP envelope.</span></span>  
  
 <span data-ttu-id="0c334-145">Ważne jest, aby należy pamiętać, że `Message` klasy nie musi zawierać buforu z danych XML reprezentujący treść.</span><span class="sxs-lookup"><span data-stu-id="0c334-145">It is important to realize that the `Message` class does not necessarily contain a buffer with XML data representing the body.</span></span> <span data-ttu-id="0c334-146">Logicznie `Message` zawiera XML typu infoset sprawdzonych, ale ten obiekt typu Infoset dynamicznie zbudowany i nigdy nie fizycznie może istnieć w pamięci.</span><span class="sxs-lookup"><span data-stu-id="0c334-146">Logically, `Message` contains an XML Infoset, but this Infoset may be dynamically constructed and may never physically exist in memory.</span></span>  
  
### <a name="putting-data-into-the-message-body"></a><span data-ttu-id="0c334-147">Wprowadzanie danych do treści wiadomości</span><span class="sxs-lookup"><span data-stu-id="0c334-147">Putting Data into the Message Body</span></span>  
 <span data-ttu-id="0c334-148">Nie istnieje mechanizm uniform umieszczać dane w treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-148">There is no uniform mechanism to put data into a message body.</span></span> <span data-ttu-id="0c334-149"><xref:System.ServiceModel.Channels.Message> Klasa zawiera metody abstrakcyjnej <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29>, która przyjmuje <xref:System.Xml.XmlDictionaryWriter>.</span><span class="sxs-lookup"><span data-stu-id="0c334-149">The <xref:System.ServiceModel.Channels.Message> class has an abstract method, <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29>, which takes an <xref:System.Xml.XmlDictionaryWriter>.</span></span> <span data-ttu-id="0c334-150">Każdy podklasą klasy <xref:System.ServiceModel.Channels.Message> klasy jest odpowiedzialny za przesłaniania tej metody i zapisywanie poza własną zawartość.</span><span class="sxs-lookup"><span data-stu-id="0c334-150">Each subclass of the <xref:System.ServiceModel.Channels.Message> class is responsible for overriding this method and writing out its own contents.</span></span> <span data-ttu-id="0c334-151">Treść wiadomości zawiera logicznie XML typu infoset sprawdzonych który `OnWriteBodyContent` tworzy.</span><span class="sxs-lookup"><span data-stu-id="0c334-151">The message body logically contains the XML Infoset that `OnWriteBodyContent` produces.</span></span> <span data-ttu-id="0c334-152">Na przykład, należy wziąć pod uwagę następujące `Message` podklasy.</span><span class="sxs-lookup"><span data-stu-id="0c334-152">For example, consider the following `Message` subclass.</span></span>  
  
 [!code-csharp[c_DataArchitecture#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#2)]
 [!code-vb[c_DataArchitecture#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#2)]  
  
 <span data-ttu-id="0c334-153">Fizycznie `AirfareRequestMessage` wystąpienie zawiera tylko dwa ciągi ("fromCity" i "toCity").</span><span class="sxs-lookup"><span data-stu-id="0c334-153">Physically, an `AirfareRequestMessage` instance contains only two strings ("fromCity" and "toCity").</span></span> <span data-ttu-id="0c334-154">Jednak logicznie komunikat zawiera następujące XML typu infoset sprawdzonych:</span><span class="sxs-lookup"><span data-stu-id="0c334-154">However, logically the message contains the following XML infoset:</span></span>  
  
```xml  
<airfareRequest>  
    <from>Tokyo</from>  
    <to>London</to>  
</airfareRequest>  
```  
  
 <span data-ttu-id="0c334-155">Oczywiście należy zwykle nie utworzyć wiadomości w ten sposób, ponieważ struktura usługi umożliwia tworzenie kontraktu parametry komunikat podobny do poprzedniej operacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-155">Of course, you would normally not create messages in this manner, because you can use the service framework to create a message like the preceding one from operation contract parameters.</span></span> <span data-ttu-id="0c334-156">Ponadto <xref:System.ServiceModel.Channels.Message> klasa ma statyczną `CreateMessage` metody używane do tworzenia komunikatów o najczęściej spotykane typy zawartości: pusty, komunikat, który zawiera seryjnych do pliku XML z obiekt <xref:System.Runtime.Serialization.DataContractSerializer>, wiadomość zawierającą SOAP odporność komunikat, który zawiera kod XML reprezentowany przez <xref:System.Xml.XmlReader>i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="0c334-156">Additionally, the <xref:System.ServiceModel.Channels.Message> class has static `CreateMessage` methods that you can use to create messages with common types of content: an empty message, a message that contains an object serialized to XML with the <xref:System.Runtime.Serialization.DataContractSerializer>, a message that contains a SOAP fault, a message that contains XML represented by an <xref:System.Xml.XmlReader>, and so on.</span></span>  
  
### <a name="getting-data-from-a-message-body"></a><span data-ttu-id="0c334-157">Pobieranie danych z treści wiadomości</span><span class="sxs-lookup"><span data-stu-id="0c334-157">Getting Data from a Message Body</span></span>  
 <span data-ttu-id="0c334-158">Można wyodrębnić danych przechowywanych w treści wiadomości, przede wszystkim na dwa sposoby:</span><span class="sxs-lookup"><span data-stu-id="0c334-158">You can extract the data stored in a message body in two main ways:</span></span>  
  
-   <span data-ttu-id="0c334-159">Treść komunikatu cały w tym samym czasie można uzyskać przez wywołanie metody <xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29> — metoda i przekazywanie edytora XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-159">You can get the entire message body at one time by calling the <xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29> method and passing in an XML writer.</span></span> <span data-ttu-id="0c334-160">Pełna treść jest zapisywany do ten moduł zapisujący.</span><span class="sxs-lookup"><span data-stu-id="0c334-160">The complete message body is written out to this writer.</span></span> <span data-ttu-id="0c334-161">W tym samym czasie pobieranie treści cały komunikat jest również nazywany *pisanie wiadomości*.</span><span class="sxs-lookup"><span data-stu-id="0c334-161">Getting the entire message body at one time is also called *writing a message*.</span></span> <span data-ttu-id="0c334-162">Zapisywanie odbywa się głównie przez stos kanału podczas wysyłania wiadomości — część stosu kanału będzie zwykle uzyskać dostęp do treści cały komunikat, kodować je i wysyłać je.</span><span class="sxs-lookup"><span data-stu-id="0c334-162">Writing is done primarily by the channel stack when sending messages—some part of the channel stack will usually get access to the entire message body, encode it, and send it.</span></span>  
  
-   <span data-ttu-id="0c334-163">Inny sposób, aby uzyskać informacje o treści wiadomości jest wywołać <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents> i uzyskać modułu odczytującego XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-163">Another way to get information out of the message body is to call <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents> and get an XML reader.</span></span> <span data-ttu-id="0c334-164">Treść komunikatu mają dostęp sekwencyjnie, zgodnie z potrzebami przez wywołanie metody w module.</span><span class="sxs-lookup"><span data-stu-id="0c334-164">The message body can then be accessed sequentially as needed by calling methods on the reader.</span></span> <span data-ttu-id="0c334-165">Pobieranie wiadomości treści element za fragment jest również nazywany *odczytywania komunikatu*.</span><span class="sxs-lookup"><span data-stu-id="0c334-165">Getting the message body piece-by-piece is also called *reading a message*.</span></span> <span data-ttu-id="0c334-166">Odczytywanie wiadomości jest używany głównie przez platformę service podczas odbierania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-166">Reading the message is primarily used by the service framework when receiving messages.</span></span> <span data-ttu-id="0c334-167">Na przykład, jeśli <xref:System.Runtime.Serialization.DataContractSerializer> jest w użyciu, w ramach usługi będą uzyskać modułu odczytującego XML w treści i przekaż ją do aparat deserializacji, który zostanie następnie uruchom odczytywanie wiadomości--elementów i utworzenie odpowiednich wykres obiektu.</span><span class="sxs-lookup"><span data-stu-id="0c334-167">For example, when the <xref:System.Runtime.Serialization.DataContractSerializer> is in use, the service framework will get an XML reader over the body and pass it to the deserialization engine, which will then start reading the message element-by-element and constructing the corresponding object graph.</span></span>  
  
 <span data-ttu-id="0c334-168">Treść komunikatu może zostać pobrany tylko raz.</span><span class="sxs-lookup"><span data-stu-id="0c334-168">A message body can be retrieved only once.</span></span> <span data-ttu-id="0c334-169">Dzięki temu można pracować z strumieni tylko do przodu.</span><span class="sxs-lookup"><span data-stu-id="0c334-169">This makes it possible to work with forward-only streams.</span></span> <span data-ttu-id="0c334-170">Na przykład można napisać <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29> zastąpienia, która odczytuje z <xref:System.IO.FileStream> i zwraca wynik jako XML typu Infoset.</span><span class="sxs-lookup"><span data-stu-id="0c334-170">For example, you can write an <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29> override that reads from a <xref:System.IO.FileStream> and returns the results as an XML Infoset.</span></span> <span data-ttu-id="0c334-171">Nigdy nie należy do "tyłu" na początku pliku.</span><span class="sxs-lookup"><span data-stu-id="0c334-171">You will never need to "rewind" to the beginning of the file.</span></span>  
  
 <span data-ttu-id="0c334-172">`WriteBodyContents` i `GetReaderAtBodyContents` metody po prostu zaznacz nigdy nie ma zostały pobrane przed treści wiadomości, a następnie wywołać `OnWriteBodyContents` lub `OnGetReaderAtBodyContents`odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="0c334-172">The `WriteBodyContents` and `GetReaderAtBodyContents` methods simply check that the message body has never been retrieved before, and then call `OnWriteBodyContents` or `OnGetReaderAtBodyContents`, respectively.</span></span>  
  
## <a name="message-usage-in-wcf"></a><span data-ttu-id="0c334-173">Obciążenie komunikatu w programie WCF</span><span class="sxs-lookup"><span data-stu-id="0c334-173">Message Usage in WCF</span></span>  
 <span data-ttu-id="0c334-174">Większość komunikaty mogą być klasyfikowane jako *wychodzących* (te, które są tworzone przez platformę usługi do wysłania przez kanał stos) lub *przychodzące* (te, które zostaną odebrane z kanału stosu i czy interpretowane przez platformę service).</span><span class="sxs-lookup"><span data-stu-id="0c334-174">Most messages can be classified as either *outgoing* (those that are created by the service framework to be sent by the channel stack) or *incoming* (those that arrive from the channel stack and are interpreted by the service framework).</span></span> <span data-ttu-id="0c334-175">Ponadto stosu kanału może działać w trybie buforowanego lub przesyłania strumieniowego.</span><span class="sxs-lookup"><span data-stu-id="0c334-175">Furthermore, the channel stack can operate in either buffered or streaming mode.</span></span> <span data-ttu-id="0c334-176">Struktura usługi również może narazić przesyłanej strumieniowo lub nonstreamed model programowania.</span><span class="sxs-lookup"><span data-stu-id="0c334-176">The service framework may also expose a streamed or nonstreamed programming model.</span></span> <span data-ttu-id="0c334-177">Prowadzi to do przypadków wymienionych w poniższej tabeli, wraz z uproszczonego szczegóły ich realizacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-177">This leads to the cases listed in the following table, along with simplified details of their implementation.</span></span>  
  
|<span data-ttu-id="0c334-178">Typ komunikatu</span><span class="sxs-lookup"><span data-stu-id="0c334-178">Message type</span></span>|<span data-ttu-id="0c334-179">Treść danych w komunikacie</span><span class="sxs-lookup"><span data-stu-id="0c334-179">Body data in message</span></span>|<span data-ttu-id="0c334-180">Implementacja zapisu (OnWriteBodyContents)</span><span class="sxs-lookup"><span data-stu-id="0c334-180">Write (OnWriteBodyContents) implementation</span></span>|<span data-ttu-id="0c334-181">Implementacja odczytu (OnGetReaderAtBodyContents)</span><span class="sxs-lookup"><span data-stu-id="0c334-181">Read (OnGetReaderAtBodyContents) Implementation</span></span>|  
|------------------|--------------------------|--------------------------------------------------|-------------------------------------------------------|  
|<span data-ttu-id="0c334-182">Wychodzące utworzone na podstawie nonstreamed model programowania</span><span class="sxs-lookup"><span data-stu-id="0c334-182">Outgoing, created from nonstreamed programming model</span></span>|<span data-ttu-id="0c334-183">Dane wymagane do zapisywania wiadomości (na przykład obiekt i <xref:System.Runtime.Serialization.DataContractSerializer> wystąpienia potrzebne do serializacji go) *</span><span class="sxs-lookup"><span data-stu-id="0c334-183">The data needed to write the message (for example, an object and the <xref:System.Runtime.Serialization.DataContractSerializer> instance needed to serialize it)*</span></span>|<span data-ttu-id="0c334-184">Niestandardowa logika do zapisywania wiadomości na podstawie przechowywanych danych (na przykład wywołać `WriteObject` na `DataContractSerializer` jeżeli jest to element serializujący używany) *</span><span class="sxs-lookup"><span data-stu-id="0c334-184">Custom logic to write out the message based on the stored data (for example, call `WriteObject` on the `DataContractSerializer` if that is the serializer in use)*</span></span>|<span data-ttu-id="0c334-185">Wywołanie `OnWriteBodyContents`, buforować wyniki, zwracać modułu odczytującego XML w buforze</span><span class="sxs-lookup"><span data-stu-id="0c334-185">Call `OnWriteBodyContents`, buffer the results, return an XML reader over the buffer</span></span>|  
|<span data-ttu-id="0c334-186">Wychodzące utworzone na podstawie strumienia model programowania</span><span class="sxs-lookup"><span data-stu-id="0c334-186">Outgoing, created from streamed programming model</span></span>|<span data-ttu-id="0c334-187">`Stream` z danymi do zapisania *</span><span class="sxs-lookup"><span data-stu-id="0c334-187">The `Stream` with the data to be written*</span></span>|<span data-ttu-id="0c334-188">Zapisz dane z przechowywanych stream przy użyciu <xref:System.Xml.IStreamProvider> mechanizmu *</span><span class="sxs-lookup"><span data-stu-id="0c334-188">Write out data from the stored stream using the <xref:System.Xml.IStreamProvider> mechanism*</span></span>|<span data-ttu-id="0c334-189">Wywołanie `OnWriteBodyContents`, buforować wyniki, zwracać modułu odczytującego XML w buforze</span><span class="sxs-lookup"><span data-stu-id="0c334-189">Call `OnWriteBodyContents`, buffer the results, return an XML reader over the buffer</span></span>|  
|<span data-ttu-id="0c334-190">Przychodzące z przesyłania strumieniowego stosu kanału</span><span class="sxs-lookup"><span data-stu-id="0c334-190">Incoming from streaming channel stack</span></span>|<span data-ttu-id="0c334-191">A `Stream` obiekt, który reprezentuje danych przesyłanych sieci z <xref:System.Xml.XmlReader> nad nim</span><span class="sxs-lookup"><span data-stu-id="0c334-191">A `Stream` object that represents the data coming in over the network with an <xref:System.Xml.XmlReader> over it</span></span>|<span data-ttu-id="0c334-192">Zapisać zawartość z przechowywanych `XmlReader` przy użyciu`WriteNode`</span><span class="sxs-lookup"><span data-stu-id="0c334-192">Write out the contents from the stored `XmlReader` using `WriteNode`</span></span>|<span data-ttu-id="0c334-193">Zwraca zapisana`XmlReader`</span><span class="sxs-lookup"><span data-stu-id="0c334-193">Returns the stored `XmlReader`</span></span>|  
|<span data-ttu-id="0c334-194">Przychodzące z kanału nonstreaming stosu</span><span class="sxs-lookup"><span data-stu-id="0c334-194">Incoming from nonstreaming channel stack</span></span>|<span data-ttu-id="0c334-195">Buforu, który zawiera treść danych za pomocą `XmlReader` nad nim</span><span class="sxs-lookup"><span data-stu-id="0c334-195">A buffer that contains body data with an `XmlReader` over it</span></span>|<span data-ttu-id="0c334-196">Zapisuje się zawartość z przechowywanych `XmlReader` przy użyciu`WriteNode`</span><span class="sxs-lookup"><span data-stu-id="0c334-196">Writes out the contents from the stored `XmlReader` using `WriteNode`</span></span>|<span data-ttu-id="0c334-197">Zwraca język przechowywane</span><span class="sxs-lookup"><span data-stu-id="0c334-197">Returns the stored lang</span></span>|  
  
 <span data-ttu-id="0c334-198">\*Te elementy nie zostały zaimplementowane bezpośrednio w `Message` podklasy, ale w podklasy <xref:System.ServiceModel.Channels.BodyWriter> klasy.</span><span class="sxs-lookup"><span data-stu-id="0c334-198">\* These items are not implemented directly in `Message` subclasses, but in subclasses of the <xref:System.ServiceModel.Channels.BodyWriter> class.</span></span> <span data-ttu-id="0c334-199">Aby uzyskać więcej informacji na temat <xref:System.ServiceModel.Channels.BodyWriter>, zobacz [używanie klasy Message](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-199">For more information about the <xref:System.ServiceModel.Channels.BodyWriter>, see [Using the Message Class](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span></span>  
  
## <a name="message-headers"></a><span data-ttu-id="0c334-200">Nagłówki komunikatów</span><span class="sxs-lookup"><span data-stu-id="0c334-200">Message Headers</span></span>  
 <span data-ttu-id="0c334-201">Komunikat może zawierać nagłówki.</span><span class="sxs-lookup"><span data-stu-id="0c334-201">A message may contain headers.</span></span> <span data-ttu-id="0c334-202">Nagłówek logicznie składa się z typu infoset sprawdzonych XML, który jest skojarzony z nazwą przestrzeni nazw i kilka innych właściwości.</span><span class="sxs-lookup"><span data-stu-id="0c334-202">A header logically consists of an XML Infoset that is associated with a name, a namespace, and a few other properties.</span></span> <span data-ttu-id="0c334-203">Nagłówki komunikatów są dostępne przy użyciu `Headers` właściwość <xref:System.ServiceModel.Channels.Message>.</span><span class="sxs-lookup"><span data-stu-id="0c334-203">Message headers are accessed using the `Headers` property on <xref:System.ServiceModel.Channels.Message>.</span></span> <span data-ttu-id="0c334-204">Każdy nagłówek jest reprezentowany przez <xref:System.ServiceModel.Channels.MessageHeader> klasy.</span><span class="sxs-lookup"><span data-stu-id="0c334-204">Each header is represented by a <xref:System.ServiceModel.Channels.MessageHeader> class.</span></span> <span data-ttu-id="0c334-205">Zwykle nagłówki komunikatów są mapowane na nagłówkach wiadomości SOAP przy użyciu stosu kanału skonfigurowane do pracy z komunikatami SOAP.</span><span class="sxs-lookup"><span data-stu-id="0c334-205">Normally, message headers are mapped to SOAP message headers when using a channel stack configured to work with SOAP messages.</span></span>  
  
 <span data-ttu-id="0c334-206">Umieszczanie informacji w nagłówku wiadomości i wyodrębniania informacji z niego jest podobne do korzystania z treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-206">Putting information into a message header and extracting information from it is similar to using the message body.</span></span> <span data-ttu-id="0c334-207">Proces nieco jest uproszczone, ponieważ przesyłania strumieniowego nie jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="0c334-207">The process is somewhat simplified because streaming is not supported.</span></span> <span data-ttu-id="0c334-208">Istnieje możliwość dostępu do zawartości tego samego nagłówka więcej niż raz, a nagłówki można uzyskać w kolejności dowolnego, wymuszanie nagłówków, aby zawsze można buforować.</span><span class="sxs-lookup"><span data-stu-id="0c334-208">It is possible to access the contents of the same header more than once, and headers can be accessed in arbitrary order, forcing headers to always be buffered.</span></span> <span data-ttu-id="0c334-209">Nie istnieje mechanizm ogólnego przeznaczenia, można uzyskać za pośrednictwem nagłówka modułu odczytującego XML, ale `MessageHeader` podklasy wewnętrzne [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] reprezentujący można odczytać nagłówka takiej możliwości.</span><span class="sxs-lookup"><span data-stu-id="0c334-209">There is no general-purpose mechanism available to get an XML reader over a header, but there is a `MessageHeader` subclass internal to [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] that represents a readable header with such a capability.</span></span> <span data-ttu-id="0c334-210">Ten typ `MessageHeader` jest tworzony przez stos kanału, gdy wiadomość z nagłówków niestandardowych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-210">This type of `MessageHeader` is created by the channel stack when a message with custom application headers comes in.</span></span> <span data-ttu-id="0c334-211">Dzięki temu w ramach usługi na korzystanie z aparatu deserializacji, takich jak <xref:System.Runtime.Serialization.DataContractSerializer>, aby zinterpretować tych nagłówków.</span><span class="sxs-lookup"><span data-stu-id="0c334-211">This enables the service framework to use a deserialization engine, such as the <xref:System.Runtime.Serialization.DataContractSerializer>, to interpret these headers.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="0c334-212">[Używanie klasy Message](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-212"> [Using the Message Class](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span></span>  
  
## <a name="message-properties"></a><span data-ttu-id="0c334-213">Właściwości wiadomości</span><span class="sxs-lookup"><span data-stu-id="0c334-213">Message Properties</span></span>  
 <span data-ttu-id="0c334-214">Komunikat może zawierać właściwości.</span><span class="sxs-lookup"><span data-stu-id="0c334-214">A message may contain properties.</span></span> <span data-ttu-id="0c334-215">A *właściwości* dowolnego [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] obiekt, który jest skojarzony z nazwą ciągu.</span><span class="sxs-lookup"><span data-stu-id="0c334-215">A *property* is any [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] object that is associated with a string name.</span></span> <span data-ttu-id="0c334-216">Właściwości są dostępne za pośrednictwem `Properties` właściwość `Message`.</span><span class="sxs-lookup"><span data-stu-id="0c334-216">Properties are accessed through the `Properties` property on `Message`.</span></span>  
  
 <span data-ttu-id="0c334-217">W przeciwieństwie do treści wiadomości i nagłówków komunikatów, (które zwykle mapowania treści protokołu SOAP i nagłówki SOAP odpowiednio) właściwości wiadomości zwykle nie są wysyłane lub odbierane wraz z wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-217">Unlike the message body and message headers (which normally map to the SOAP body and SOAP headers, respectively), message properties are normally not sent or received along with the messages.</span></span> <span data-ttu-id="0c334-218">Właściwości komunikatu istnieje głównie jako mechanizm komunikacji, aby przekazać dane o komunikacie, między różnych kanałów w stosie kanału i między stosu kanału i model usługi.</span><span class="sxs-lookup"><span data-stu-id="0c334-218">Message properties exist primarily as a communication mechanism to pass data about the message between the various channels in the channel stack, and between the channel stack and the service model.</span></span>  
  
 <span data-ttu-id="0c334-219">Na przykład HTTP transport kanału wchodzącego w skład [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] jest w stanie tworzenie różnych kodów stanu HTTP, takie jak "404 (nie znaleziono)" i "500 (wewnętrzny błąd serwera)," podczas wysyłania odpowiedzi do klientów.</span><span class="sxs-lookup"><span data-stu-id="0c334-219">For example, the HTTP transport channel included as part of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is capable of producing various HTTP status codes, such as "404 (Not Found)" and "500 (Internal Server Error)," when it sends replies to clients.</span></span> <span data-ttu-id="0c334-220">Przed wysłaniem wiadomości odpowiedzi, sprawdza, czy `Properties` z `Message` zawiera właściwość o nazwie "httpResponse", która zawiera obiekt typu <xref:System.ServiceModel.Channels.HttpResponseMessageProperty>.</span><span class="sxs-lookup"><span data-stu-id="0c334-220">Before sending a reply message, it checks to see whether the `Properties` of the `Message` contain a property called "httpResponse" that contains an object of type <xref:System.ServiceModel.Channels.HttpResponseMessageProperty>.</span></span> <span data-ttu-id="0c334-221">Jeśli zostanie znaleziony takich właściwości, zostanie ona wyszukana w <xref:System.ServiceModel.Channels.HttpResponseMessageProperty.StatusCode%2A> właściwości i użyj tego kodu stanu.</span><span class="sxs-lookup"><span data-stu-id="0c334-221">If such a property is found, it will look at the <xref:System.ServiceModel.Channels.HttpResponseMessageProperty.StatusCode%2A> property and use that status code.</span></span> <span data-ttu-id="0c334-222">Jeśli go nie zostanie znaleziony, wartość domyślna "200 (OK)" używany jest kod.</span><span class="sxs-lookup"><span data-stu-id="0c334-222">If it is not found, the default "200 (OK)" code is used.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="0c334-223">[Używanie klasy Message](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-223"> [Using the Message Class](../../../../docs/framework/wcf/feature-details/using-the-message-class.md).</span></span>  
  
### <a name="the-message-as-a-whole"></a><span data-ttu-id="0c334-224">Komunikat jako całość</span><span class="sxs-lookup"><span data-stu-id="0c334-224">The Message as a Whole</span></span>  
 <span data-ttu-id="0c334-225">Do tej pory Omówiliśmy metod dostępu do poszczególnych części komunikatu w izolacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-225">So far, we have discussed methods for accessing the various parts of the message in isolation.</span></span> <span data-ttu-id="0c334-226">Jednak <xref:System.ServiceModel.Channels.Message> klasy udostępnia również metody służące do pracy z cały komunikat jako całość.</span><span class="sxs-lookup"><span data-stu-id="0c334-226">However, the <xref:System.ServiceModel.Channels.Message> class also provides methods to work with the entire message as a whole.</span></span> <span data-ttu-id="0c334-227">Na przykład `WriteMessage` metoda zapisuje się cały komunikat do edytora XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-227">For example, the `WriteMessage` method writes out the entire message to an XML writer.</span></span>  
  
 <span data-ttu-id="0c334-228">Aby było to możliwe, należy zdefiniować mapowania między całą `Message` wystąpienia i XML typu Infoset.</span><span class="sxs-lookup"><span data-stu-id="0c334-228">For this to be possible, a mapping must be defined between the entire `Message` instance and an XML Infoset.</span></span> <span data-ttu-id="0c334-229">Takie mapowanie w rzeczywistości istnieje: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] używa standardowego protokołu SOAP w celu zdefiniowania to mapowanie.</span><span class="sxs-lookup"><span data-stu-id="0c334-229">Such a mapping, in fact, exists: [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] uses the SOAP standard to define this mapping.</span></span> <span data-ttu-id="0c334-230">Gdy `Message` wystąpienia jest zapisywany jako XML typu infoset sprawdzonych wynikowy obiekt typu Infoset jest prawidłowy koperty protokołu SOAP, który zawiera komunikat.</span><span class="sxs-lookup"><span data-stu-id="0c334-230">When a `Message` instance is written out as an XML Infoset, the resulting Infoset is the valid SOAP envelope that contains the message.</span></span> <span data-ttu-id="0c334-231">W związku z tym `WriteMessage` zwykle może wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="0c334-231">Thus, `WriteMessage` would normally perform the following steps:</span></span>  
  
1.  <span data-ttu-id="0c334-232">Zapisu elementu koperty protokołu SOAP tagu początkowego.</span><span class="sxs-lookup"><span data-stu-id="0c334-232">Write the SOAP envelope element opening tag.</span></span>  
  
2.  <span data-ttu-id="0c334-233">Element nagłówka SOAP tagu początkowego zapisu, zapisać wszystkie nagłówki i Zamknij element nagłówka.</span><span class="sxs-lookup"><span data-stu-id="0c334-233">Write the SOAP header element opening tag, write out all of the headers, and close the header element.</span></span>  
  
3.  <span data-ttu-id="0c334-234">Zapisu elementu treści protokołu SOAP tagu początkowego.</span><span class="sxs-lookup"><span data-stu-id="0c334-234">Write the SOAP body element opening tag.</span></span>  
  
4.  <span data-ttu-id="0c334-235">Wywołanie `WriteBodyContents` lub metodę równoważną zapisać treści.</span><span class="sxs-lookup"><span data-stu-id="0c334-235">Call `WriteBodyContents` or an equivalent method to write out the body.</span></span>  
  
5.  <span data-ttu-id="0c334-236">Zamknij elementy treści i koperty.</span><span class="sxs-lookup"><span data-stu-id="0c334-236">Close the body and envelope elements.</span></span>  
  
 <span data-ttu-id="0c334-237">Poprzednie kroki są ściśle powiązane z standardowego protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="0c334-237">The preceding steps are closely tied to the SOAP standard.</span></span> <span data-ttu-id="0c334-238">To jest skomplikowane faktem, że wiele wersji SOAP istnieje, na przykład nie można zapisać element koperty protokołu SOAP poprawnie bez uprzedniego uzyskania informacji o wersji protokołu SOAP w użyciu.</span><span class="sxs-lookup"><span data-stu-id="0c334-238">This is complicated by the fact that multiple versions of SOAP exist, for example, it is impossible to write out the SOAP envelope element correctly without knowing the SOAP version in use.</span></span> <span data-ttu-id="0c334-239">Ponadto w niektórych przypadkach może być pożądane, aby wyłączyć to złożony SOAP specyficzne dla mapowania całkowicie.</span><span class="sxs-lookup"><span data-stu-id="0c334-239">Also, in some cases, it may be desirable to turn off this complex SOAP-specific mapping completely.</span></span>  
  
 <span data-ttu-id="0c334-240">W tym celu `Version` właściwości znajduje się na `Message`.</span><span class="sxs-lookup"><span data-stu-id="0c334-240">For these purposes, a `Version` property is provided on `Message`.</span></span> <span data-ttu-id="0c334-241">Można ją ustawić na wersję SOAP do użycia podczas zapisywania wiadomości lub można ją ustawić `None` zapobiegające mapowań specyficzne dla protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="0c334-241">It can be set to the SOAP version to use when writing out the message, or it can be set to `None` to prevent any SOAP-specific mappings.</span></span> <span data-ttu-id="0c334-242">Jeśli `Version` właściwość jest ustawiona na `None`, metody, które pracować z czynnością cały komunikat tak, jakby komunikat składa się z jego treści, na przykład `WriteMessage` po prostu spowodowałoby wywołanie `WriteBodyContents` zamiast wykonywania wielu kroków opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="0c334-242">If the `Version` property is set to `None`, methods that work with the entire message act as if the message consisted of its body only, for example, `WriteMessage` would simply call `WriteBodyContents` instead of performing the multiple steps listed above.</span></span> <span data-ttu-id="0c334-243">Oczekuje się, które w komunikatach przychodzących `Version` zostanie automatycznie wykrytej i poprawnie ustawiony.</span><span class="sxs-lookup"><span data-stu-id="0c334-243">It is expected that on incoming messages, `Version` will be auto-detected and set correctly.</span></span>  
  
## <a name="the-channel-stack"></a><span data-ttu-id="0c334-244">Stos kanału</span><span class="sxs-lookup"><span data-stu-id="0c334-244">The Channel Stack</span></span>  
  
### <a name="channels"></a><span data-ttu-id="0c334-245">Kanały</span><span class="sxs-lookup"><span data-stu-id="0c334-245">Channels</span></span>  
 <span data-ttu-id="0c334-246">Określone przed stosu kanał jest odpowiedzialny za konwertowanie wychodzące <xref:System.ServiceModel.Channels.Message> wystąpienia na niektóre działania (takie jak wysyłanie pakietów za pośrednictwem sieci) lub konwersji niektóre akcje (takich jak odbieranie pakietów sieciowych) na przychodzące `Message` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0c334-246">As stated before, the channel stack is responsible for converting outgoing <xref:System.ServiceModel.Channels.Message> instances into some action (such as sending packets over the network), or converting some action (such as receiving network packets) into incoming `Message` instances.</span></span>  
  
 <span data-ttu-id="0c334-247">Stos kanału składa się z jednego lub kilku kanałów uporządkowanych w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="0c334-247">The channel stack is composed of one or more channels ordered in a sequence.</span></span> <span data-ttu-id="0c334-248">Wychodzące `Message` wystąpienia są przekazywane do pierwszego kanału w stosie (nazywane również *kanałowi*), która przekazuje ją do następnego kanału w dół stosu i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="0c334-248">An outgoing `Message` instance is passed to the first channel in the stack (also called the *topmost channel*), which passes it to the next channel down in stack, and so on.</span></span> <span data-ttu-id="0c334-249">Komunikat kończy ostatniego kanału, która jest wywoływana *kanał transportu*.</span><span class="sxs-lookup"><span data-stu-id="0c334-249">The message terminates in the last channel, which is called the *transport channel*.</span></span> <span data-ttu-id="0c334-250">Przychodzące komunikaty pochodzą kanał transportu i są przekazywane kanałów stosu.</span><span class="sxs-lookup"><span data-stu-id="0c334-250">Incoming messages originate in the transport channel and are passed from channel to channel up the stack.</span></span> <span data-ttu-id="0c334-251">Z kanału najwyższego poziomu komunikatu zwykle są przekazywane w ramach usługi.</span><span class="sxs-lookup"><span data-stu-id="0c334-251">From the topmost channel, the message is usually passed into the service framework.</span></span> <span data-ttu-id="0c334-252">Jest to zwykle wzorca dla komunikatów aplikacji, niektórych kanałów może działać nieco inaczej, na przykład mogli przesłać wiadomości infrastruktury bez przekazano komunikat przez kanał powyżej.</span><span class="sxs-lookup"><span data-stu-id="0c334-252">While this is the usual pattern for application messages, some channels may work slightly differently, for example, they may send their own infrastructure messages without being passed a message from a channel above.</span></span>  
  
 <span data-ttu-id="0c334-253">Kanały może działać na wiadomości na różne sposoby, kiedy przechodzi on przez stos.</span><span class="sxs-lookup"><span data-stu-id="0c334-253">Channels may operate on the message in various ways as it passes through the stack.</span></span> <span data-ttu-id="0c334-254">Najbardziej typowych operacji jest dodanie nagłówka do wysyłanej wiadomości i odczytywania nagłówków na wiadomości przychodzącej.</span><span class="sxs-lookup"><span data-stu-id="0c334-254">The most common operation is adding a header to an outgoing message and reading headers on an incoming message.</span></span> <span data-ttu-id="0c334-255">Na przykład kanału może obliczyć podpisu cyfrowego wiadomości i dodaj go jako nagłówek.</span><span class="sxs-lookup"><span data-stu-id="0c334-255">For example, a channel may compute the digital signature of a message and add it as a header.</span></span> <span data-ttu-id="0c334-256">Kanał może również sprawdzić ten nagłówek podpisu cyfrowego wiadomości przychodzących i blokowanie wiadomości, które nie mają prawidłowego podpisu z wprowadzeniem ich sposób górę stosu kanału.</span><span class="sxs-lookup"><span data-stu-id="0c334-256">A channel may also inspect this digital signature header on incoming messages and block messages that do not have a valid signature from making their way up the channel stack.</span></span> <span data-ttu-id="0c334-257">Kanały również często ustawić lub sprawdzić właściwości wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-257">Channels also often set or inspect message properties.</span></span> <span data-ttu-id="0c334-258">Treść komunikatu zwykle nie jest modyfikowany, mimo że jest to dozwolone, na przykład [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kanału zabezpieczeń można zaszyfrować wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-258">The message body is usually not modified, although this is allowed, for example, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] security channel can encrypt the message body.</span></span>  
  
### <a name="transport-channels-and-message-encoders"></a><span data-ttu-id="0c334-259">Kanały transportu i kodery wiadomości</span><span class="sxs-lookup"><span data-stu-id="0c334-259">Transport Channels and Message Encoders</span></span>  
 <span data-ttu-id="0c334-260">Znajdujących się najniżej kanału w stosie jest odpowiedzialny za faktycznie Przekształcanie wychodzące <xref:System.ServiceModel.Channels.Message>, ponieważ modyfikowany przez inne kanały do określonej akcji.</span><span class="sxs-lookup"><span data-stu-id="0c334-260">The bottommost channel in the stack is responsible for actually transforming an outgoing <xref:System.ServiceModel.Channels.Message>, as modified by other channels, into some action.</span></span> <span data-ttu-id="0c334-261">Po stronie odbierania jest kanału, który konwertuje niektóre akcje w `Message` czy inne kanały procesu.</span><span class="sxs-lookup"><span data-stu-id="0c334-261">On the receive side, this is the channel that converts some action into a `Message` that other channels process.</span></span>  
  
 <span data-ttu-id="0c334-262">Jak wspomniano wcześniej, może być zmieniona akcje: wysyłanie lub odbieranie pakietów sieciowych za pośrednictwem różnych protokołów, odczytu lub zapisu komunikatu w bazie danych usługi kolejkowania lub usuwania komunikatów w kolejki usługi kolejkowania komunikatów, aby zapewnić, ale kilka przykładów.</span><span class="sxs-lookup"><span data-stu-id="0c334-262">As stated previously, the actions may be varied: sending or receiving network packets over various protocols, reading or writing the message in a database, or queuing or dequeuing the message in a Message Queuing queue, to provide but a few examples.</span></span> <span data-ttu-id="0c334-263">Te akcje są wspólne rzecz: wymagają przekształceń między [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] `Message` wystąpienia i rzeczywistego grupy bajtów, które mogą być wysyłane, odebrany, odczytu, zapisana, Zakolejkowane lub usuniętej.</span><span class="sxs-lookup"><span data-stu-id="0c334-263">All these actions have one thing in common: they require a transformation between the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]`Message` instance and an actual group of bytes that can be sent, received, read, written, queued, or dequeued.</span></span> <span data-ttu-id="0c334-264">Proces konwersji `Message` do grupy bajtów jest nazywany *kodowanie*i procesu tworzenia `Message` z grupy bajtów jest nazywany *dekodowania*.</span><span class="sxs-lookup"><span data-stu-id="0c334-264">The process of converting a `Message` into a group of bytes is called *encoding*, and the reverse process of creating a `Message` from a group of bytes is called *decoding*.</span></span>  
  
 <span data-ttu-id="0c334-265">Większość kanały transportu używanie składnika o nazwie *komunikatu koderów* kodowania i dekodowania pracy.</span><span class="sxs-lookup"><span data-stu-id="0c334-265">Most transport channels use components called *message encoders* to accomplish the encoding and decoding work.</span></span> <span data-ttu-id="0c334-266">Koder komunikatów jest podklasą <xref:System.ServiceModel.Channels.MessageEncoder> klasy.</span><span class="sxs-lookup"><span data-stu-id="0c334-266">A message encoder is a subclass of the <xref:System.ServiceModel.Channels.MessageEncoder> class.</span></span> <span data-ttu-id="0c334-267">`MessageEncoder`zawiera różne `ReadMessage` i `WriteMessage` przeciążenia metody, które umożliwia konwersję pomiędzy `Message` i grup bajtów.</span><span class="sxs-lookup"><span data-stu-id="0c334-267">`MessageEncoder` includes various `ReadMessage` and `WriteMessage` method overloads to convert between `Message` and groups of bytes.</span></span>  
  
 <span data-ttu-id="0c334-268">Po stronie wysyłającej przekazuje buforowania kanał transportu `Message` obiekt, który otrzymał od kanału powyżej `WriteMessage`.</span><span class="sxs-lookup"><span data-stu-id="0c334-268">On the sending side, a buffering transport channel passes the `Message` object that it received from a channel above it to `WriteMessage`.</span></span> <span data-ttu-id="0c334-269">Ponownie pobiera tablicę bajtów, które używa następnie wykonać jego operacji (np. pakowania tych bajtów jako prawidłowy pakiety TCP i wysyłania ich do poprawny docelowy).</span><span class="sxs-lookup"><span data-stu-id="0c334-269">It gets back an array of bytes, which it then uses to perform its action (such as packaging these bytes as valid TCP packets and sending them to the correct destination).</span></span> <span data-ttu-id="0c334-270">Najpierw tworzy przesyłania strumieniowego kanał transportu `Stream` (na przykład za pośrednictwem wychodzące połączenie TCP) i następnie przekazuje zarówno `Stream` i `Message` należy wysłać do odpowiedniego `WriteMessage` przeciążenia, które zapisuje się komunikat .</span><span class="sxs-lookup"><span data-stu-id="0c334-270">A streaming transport channel first creates a `Stream` (for example, over the outgoing TCP connection), and then passes both the `Stream` and the `Message` it needs to send to the appropriate `WriteMessage` overload, which writes out the message.</span></span>  
  
 <span data-ttu-id="0c334-271">Po stronie odbiorczej buforowania kanał transportu wyodrębnia przychodzące bajty (na przykład z pakietów przychodzących TCP) do tablicy i wywołania `ReadMessage` uzyskanie `Message` obiektów, jaką może przekroczyć dalsze górę stosu kanału.</span><span class="sxs-lookup"><span data-stu-id="0c334-271">On the receiving side, a buffering transport channel extracts incoming bytes (for example, from incoming TCP packets) into an array and calls `ReadMessage` to get a `Message` object that it can pass further up the channel stack.</span></span> <span data-ttu-id="0c334-272">Tworzy przesyłania strumieniowego kanał transportu `Stream` obiektu (na przykład strumień sieci przez przychodzące połączenie TCP) i przekazuje do `ReadMessage` odzyskać `Message` obiektu.</span><span class="sxs-lookup"><span data-stu-id="0c334-272">A streaming transport channel creates a `Stream` object (for example, a network stream over the incoming TCP connection) and passes that to `ReadMessage` to get back a `Message` object.</span></span>  
  
 <span data-ttu-id="0c334-273">Rozdzielenie kanały transportu i kodera wiadomości nie jest obowiązkowe; istnieje możliwość zapisu kanał transportu, który nie korzysta z kodera wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-273">The separation between the transport channels and the message encoder is not mandatory; it is possible to write a transport channel that does not use a message encoder.</span></span> <span data-ttu-id="0c334-274">Jednak zaletą oddzielenie jest łatwość kompozycji.</span><span class="sxs-lookup"><span data-stu-id="0c334-274">However, the advantage of this separation is ease of composition.</span></span> <span data-ttu-id="0c334-275">Tak długo, jak kanał transportu używa tylko base <xref:System.ServiceModel.Channels.MessageEncoder>, można pracować ze wszystkimi [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] lub kodera wiadomości innych firm.</span><span class="sxs-lookup"><span data-stu-id="0c334-275">As long as a transport channel uses only the base <xref:System.ServiceModel.Channels.MessageEncoder>, it can work with any [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] or third-party message encoder.</span></span> <span data-ttu-id="0c334-276">Podobnie tego samego kodera zwykle można w dowolnym kanał transportu.</span><span class="sxs-lookup"><span data-stu-id="0c334-276">Likewise, the same encoder can normally be used in any transport channel.</span></span>  
  
### <a name="message-encoder-operation"></a><span data-ttu-id="0c334-277">Operacja kodera komunikatów</span><span class="sxs-lookup"><span data-stu-id="0c334-277">Message Encoder Operation</span></span>  
 <span data-ttu-id="0c334-278">Do opisania typową operację kodera, warto należy wziąć pod uwagę następujące cztery przypadków.</span><span class="sxs-lookup"><span data-stu-id="0c334-278">To describe the typical operation of an encoder, it is useful to consider the following four cases.</span></span>  
  
|<span data-ttu-id="0c334-279">Operacja</span><span class="sxs-lookup"><span data-stu-id="0c334-279">Operation</span></span>|<span data-ttu-id="0c334-280">Komentarz</span><span class="sxs-lookup"><span data-stu-id="0c334-280">Comment</span></span>|  
|---------------|-------------|  
|<span data-ttu-id="0c334-281">Kodowanie, buforowane</span><span class="sxs-lookup"><span data-stu-id="0c334-281">Encoding, Buffered</span></span>|<span data-ttu-id="0c334-282">W tryb buforowany koder zwykle tworzy buforu rozmiarach i następnie tworzy edytora XML nad nim.</span><span class="sxs-lookup"><span data-stu-id="0c334-282">In buffered mode, the encoder normally creates a variable-size buffer and then creates an XML writer over it.</span></span> <span data-ttu-id="0c334-283">Następnie wywołuje <xref:System.ServiceModel.Channels.Message.WriteMessage%28System.Xml.XmlWriter%29> w komunikacie zakodowane, który zapisuje nagłówki i następnie w treści przy użyciu <xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29>, zgodnie z opisem w poprzedniej sekcji o `Message` w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="0c334-283">It then calls <xref:System.ServiceModel.Channels.Message.WriteMessage%28System.Xml.XmlWriter%29> on the message being encoded, which writes out the headers and then the body using <xref:System.ServiceModel.Channels.Message.WriteBodyContents%28System.Xml.XmlDictionaryWriter%29>, as explained in the preceding section about `Message` in this topic.</span></span> <span data-ttu-id="0c334-284">Zawartość buforu (reprezentowane jako tablicę bajtów) są następnie zwracane dla kanał transportu do użycia.</span><span class="sxs-lookup"><span data-stu-id="0c334-284">The contents of the buffer (represented as an array of bytes) are then returned for the transport channel to use.</span></span>|  
|<span data-ttu-id="0c334-285">Kodowanie, strumieniowego</span><span class="sxs-lookup"><span data-stu-id="0c334-285">Encoding, Streamed</span></span>|<span data-ttu-id="0c334-286">W trybie przesyłanej strumieniowo operacji jest podobny do powyżej, ale jest to prostsze.</span><span class="sxs-lookup"><span data-stu-id="0c334-286">In streamed mode, the operation is similar to the above, but simpler.</span></span> <span data-ttu-id="0c334-287">Nie istnieje potrzeba bufora.</span><span class="sxs-lookup"><span data-stu-id="0c334-287">There is no need for a buffer.</span></span> <span data-ttu-id="0c334-288">Edytora XML jest zwykle tworzony przez strumień i <xref:System.ServiceModel.Channels.Message.WriteMessage%28System.Xml.XmlWriter%29> jest wywoływana na `Message` zapisać go do tego składnika zapisywania.</span><span class="sxs-lookup"><span data-stu-id="0c334-288">An XML writer is normally created over the stream and <xref:System.ServiceModel.Channels.Message.WriteMessage%28System.Xml.XmlWriter%29> is called on the `Message` to write it out to this writer.</span></span>|  
|<span data-ttu-id="0c334-289">Dekodowanie, buforowane</span><span class="sxs-lookup"><span data-stu-id="0c334-289">Decoding, Buffered</span></span>|<span data-ttu-id="0c334-290">Podczas dekodowania w tryb buforowany specjalnego `Message` zwykle utworzono podklasę, który zawiera buforowane dane.</span><span class="sxs-lookup"><span data-stu-id="0c334-290">When decoding in buffered mode, a special `Message` subclass that contains the buffered data is normally created.</span></span> <span data-ttu-id="0c334-291">Nagłówki wiadomości są odczytywane i tworzenia modułu odczytującego XML znajduje się w treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-291">The headers of the message are read, and an XML reader positioned on the message body is created.</span></span> <span data-ttu-id="0c334-292">Jest to reader, który zostanie zwrócony z <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents>.</span><span class="sxs-lookup"><span data-stu-id="0c334-292">This is the reader that will be returned with <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents>.</span></span>|  
|<span data-ttu-id="0c334-293">Dekodowanie, strumieniowego</span><span class="sxs-lookup"><span data-stu-id="0c334-293">Decoding, Streamed</span></span>|<span data-ttu-id="0c334-294">Podczas dekodowania w trybie przesyłany strumieniowo, zwykle jest tworzony specjalne podklasy wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-294">When decoding in streamed mode, a special Message subclass is normally created.</span></span> <span data-ttu-id="0c334-295">Strumień jest zaawansowane, aby odczytać wszystkie nagłówki i umieść go w treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-295">The stream is advanced just enough to read all the headers and position it on the message body.</span></span> <span data-ttu-id="0c334-296">Czytnik XML zostanie utworzona przez strumień.</span><span class="sxs-lookup"><span data-stu-id="0c334-296">An XML reader is then created over the stream.</span></span> <span data-ttu-id="0c334-297">Jest to reader, który zostanie zwrócony z <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents>.</span><span class="sxs-lookup"><span data-stu-id="0c334-297">This is the reader that will be returned with <xref:System.ServiceModel.Channels.Message.GetReaderAtBodyContents>.</span></span>|  
  
 <span data-ttu-id="0c334-298">Kodery można wykonywać również inne funkcje.</span><span class="sxs-lookup"><span data-stu-id="0c334-298">Encoders can perform other functions as well.</span></span> <span data-ttu-id="0c334-299">Na przykład koderów może utworzyć pulę czytniki XML i modułów zapisujących.</span><span class="sxs-lookup"><span data-stu-id="0c334-299">For example, the encoders can pool XML readers and writers.</span></span> <span data-ttu-id="0c334-300">Jest kosztowna do utworzenia nowego modułu odczytującego XML lub zapisywania za każdym razem, gdy jest ono wymagane.</span><span class="sxs-lookup"><span data-stu-id="0c334-300">It is expensive to create a new XML reader or writer every time one is needed.</span></span> <span data-ttu-id="0c334-301">W związku z tym koderów zwykle Obsługa puli czytelników i składników zapisywania można skonfigurować rozmiaru puli.</span><span class="sxs-lookup"><span data-stu-id="0c334-301">Therefore, encoders normally maintain a pool of readers and a pool of writers of configurable size.</span></span> <span data-ttu-id="0c334-302">W opisach operacji kodera opisanych powyżej po każdej zmianie frazę "Utwórz czytnika/składnika zapisywania XML" jest używana, zwykle oznacza to "wykonać jedną z puli, lub stworzyć, jeśli nie jest dostępny."</span><span class="sxs-lookup"><span data-stu-id="0c334-302">In the descriptions of encoder operation described previously, whenever the phrase "create an XML reader/writer" is used, it normally means "take one from the pool, or create one if one is not available."</span></span> <span data-ttu-id="0c334-303">Koder (i `Message` podklasy tworzy podczas dekodowania) zawiera logikę do zwrócenia czytelników i zapisywania do pul, gdy nie są już potrzebne (na przykład, gdy `Message` jest zamknięty).</span><span class="sxs-lookup"><span data-stu-id="0c334-303">The encoder (and the `Message` subclasses it creates while decoding) contain logic to return readers and writers to the pools once they are no longer needed (for example, when the `Message` is closed).</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="0c334-304">udostępnia trzy koderów wiadomości, mimo że można tworzyć dodatkowe niestandardowych typów.</span><span class="sxs-lookup"><span data-stu-id="0c334-304"> provides three message encoders, although it is possible to create additional custom types.</span></span> <span data-ttu-id="0c334-305">Podane typy tekstu, dane binarne i mechanizmu optymalizacji transmisji wiadomości (MTOM).</span><span class="sxs-lookup"><span data-stu-id="0c334-305">The supplied types are Text, Binary, and Message Transmission Optimization Mechanism (MTOM).</span></span> <span data-ttu-id="0c334-306">Te ustawienia zostały opisane szczegółowo w [Wybieranie kodera komunikatów](../../../../docs/framework/wcf/feature-details/choosing-a-message-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-306">These are described in detail in [Choosing a Message Encoder](../../../../docs/framework/wcf/feature-details/choosing-a-message-encoder.md).</span></span>  
  
### <a name="the-istreamprovider-interface"></a><span data-ttu-id="0c334-307">Element IStreamProvider interfejsu</span><span class="sxs-lookup"><span data-stu-id="0c334-307">The IStreamProvider Interface</span></span>  
 <span data-ttu-id="0c334-308">Podczas zapisywania wysyłanej wiadomości zawiera treść przesyłany strumieniowo do edytora XML <xref:System.ServiceModel.Channels.Message> używa sekwencję wywołań podobne do następujących w jego <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29> implementacji:</span><span class="sxs-lookup"><span data-stu-id="0c334-308">When writing an outgoing message that contains a streamed body to an XML writer, the <xref:System.ServiceModel.Channels.Message> uses a sequence of calls similar to the following in its <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29> implementation:</span></span>  
  
-   <span data-ttu-id="0c334-309">Zapisać wszelkie niezbędne informacje poprzedzających strumienia (na przykład otwierający XML tag).</span><span class="sxs-lookup"><span data-stu-id="0c334-309">Write any necessary information preceding the stream (for example, the opening XML tag).</span></span>  
  
-   <span data-ttu-id="0c334-310">Zapisu strumienia.</span><span class="sxs-lookup"><span data-stu-id="0c334-310">Write the stream.</span></span>  
  
-   <span data-ttu-id="0c334-311">Zapis żadnych informacji po strumienia (na przykład zamykający XML tag).</span><span class="sxs-lookup"><span data-stu-id="0c334-311">Write any information following the stream (for example, the closing XML tag).</span></span>  
  
 <span data-ttu-id="0c334-312">To dobrze działa z kodowania, które są podobne do kodowania tekstowy XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-312">This works well with encodings that are similar to the textual XML encoding.</span></span> <span data-ttu-id="0c334-313">Jednak niektóre kodowania nie umieszczaj XML typu infoset sprawdzonych informacji (na przykład znaczników początkowych i końcowych elementów XML) wraz z danych zawartych w elementów.</span><span class="sxs-lookup"><span data-stu-id="0c334-313">However, some encodings do not place XML Infoset information (for example, tags for starting and ending XML elements) together with the data contained within elements.</span></span> <span data-ttu-id="0c334-314">Na przykład w kodowanie MTOM wiadomość jest podzielony na wiele części.</span><span class="sxs-lookup"><span data-stu-id="0c334-314">For example, in the MTOM encoding, the message is split into multiple parts.</span></span> <span data-ttu-id="0c334-315">Jedną część zawiera XML typu Infoset, który może zawierać odwołania do innych części dla elementu rzeczywistej zawartości.</span><span class="sxs-lookup"><span data-stu-id="0c334-315">One part contains the XML Infoset, which may contain references to other parts for actual element contents.</span></span> <span data-ttu-id="0c334-316">XML typu infoset sprawdzonych jest zwykle małe w porównaniu do strumienia zawartości, więc warto buforu typu Infoset, zapisać go, a następnie wpisz zawartość w sposób przesyłany strumieniowo.</span><span class="sxs-lookup"><span data-stu-id="0c334-316">The XML Infoset is normally small compared to the streamed contents, so it makes sense to buffer the Infoset, write it out, and then write the contents in a streamed way.</span></span> <span data-ttu-id="0c334-317">Oznacza to, że do czasu zamknięcia tagu elementu są zapisywane, strumień powinien nie został napisany jeszcze.</span><span class="sxs-lookup"><span data-stu-id="0c334-317">This means that by the time the closing element tag is written, the stream should not have been written out yet.</span></span>  
  
 <span data-ttu-id="0c334-318">W tym celu <xref:System.Xml.IStreamProvider> używany jest interfejs.</span><span class="sxs-lookup"><span data-stu-id="0c334-318">For this purpose, the <xref:System.Xml.IStreamProvider> interface is used.</span></span> <span data-ttu-id="0c334-319">Interfejs ma <xref:System.Xml.IStreamProvider.GetStream> metodę, która zwraca strumień do zapisania.</span><span class="sxs-lookup"><span data-stu-id="0c334-319">The interface has a <xref:System.Xml.IStreamProvider.GetStream> method that returns the stream to be written.</span></span> <span data-ttu-id="0c334-320">Do zapisał komunikat przesyłany strumieniowo treści w prawidłowy sposób <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29> wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="0c334-320">The correct way to write out a streamed message body in <xref:System.ServiceModel.Channels.Message.OnWriteBodyContents%28System.Xml.XmlDictionaryWriter%29> is as follows:</span></span>  
  
1.  <span data-ttu-id="0c334-321">Zapisać wszelkie niezbędne informacje poprzedzających strumienia (na przykład otwierający XML tag).</span><span class="sxs-lookup"><span data-stu-id="0c334-321">Write any necessary information preceding the stream (for example, the opening XML tag).</span></span>  
  
2.  <span data-ttu-id="0c334-322">Wywołanie `WriteValue` przeciążenia na <xref:System.Xml.XmlDictionaryWriter> pobierającej <xref:System.Xml.IStreamProvider>, z `IStreamProvider` implementację, która zwraca strumień do zapisania.</span><span class="sxs-lookup"><span data-stu-id="0c334-322">Call the `WriteValue` overload on the <xref:System.Xml.XmlDictionaryWriter> that takes an <xref:System.Xml.IStreamProvider>, with an `IStreamProvider` implementation that returns the stream to be written.</span></span>  
  
3.  <span data-ttu-id="0c334-323">Zapis żadnych informacji po strumienia (na przykład zamykający XML tag).</span><span class="sxs-lookup"><span data-stu-id="0c334-323">Write any information following the stream (for example, the closing XML tag).</span></span>  
  
 <span data-ttu-id="0c334-324">Z tej metody edytora XML może wybrać kiedy wywołać metodę <xref:System.Xml.IStreamProvider.GetStream> i zapisać dane przesyłany strumieniowo.</span><span class="sxs-lookup"><span data-stu-id="0c334-324">With this approach, the XML writer has a choice of when to call <xref:System.Xml.IStreamProvider.GetStream> and write out the streamed data.</span></span> <span data-ttu-id="0c334-325">Na przykład zapisywania XML tekstową i binarne wywołują go bezpośrednio i zapisać zawartości przesyłanej strumieniowo między tagiem początkowym i końcowym.</span><span class="sxs-lookup"><span data-stu-id="0c334-325">For example, the textual and binary XML writers will call it immediately and write out the streamed contents in-between the start and end tags.</span></span> <span data-ttu-id="0c334-326">Modułu zapisującego MTOM może podjąć <xref:System.Xml.IStreamProvider.GetStream> później, gdy będzie gotowy do zapisu w odpowiedniej części wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-326">The MTOM writer may decide to call <xref:System.Xml.IStreamProvider.GetStream> later, when it is ready to write the appropriate part of the message.</span></span>  
  
## <a name="representing-data-in-the-service-framework"></a><span data-ttu-id="0c334-327">Reprezentacja danych w ramach usługi</span><span class="sxs-lookup"><span data-stu-id="0c334-327">Representing Data in the Service Framework</span></span>  
 <span data-ttu-id="0c334-328">Jak już wspomniano w sekcji "Podstawowej architektury" tego tematu, w ramach usługi jest częścią [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] , między innymi, jest odpowiedzialny za konwertowanie model programowania przyjazną dla użytkownika komunikat danych i rzeczywistych `Message` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="0c334-328">As stated in the "Basic Architecture" section of this topic, the service framework is the part of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] that, among other things, is responsible for converting between a user-friendly programming model for message data and actual `Message` instances.</span></span> <span data-ttu-id="0c334-329">Zazwyczaj wymiany wiadomości jest reprezentowana w ramach usługi jako [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] metoda oznaczona atrybutem <xref:System.ServiceModel.OperationContractAttribute> atrybutu.</span><span class="sxs-lookup"><span data-stu-id="0c334-329">Normally, a message exchange is represented in the service framework as a [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] method marked with the <xref:System.ServiceModel.OperationContractAttribute> attribute.</span></span> <span data-ttu-id="0c334-330">Metoda może zająć w niektórych parametrów i może zwrócić wartości zwracanej ani out (lub obu).</span><span class="sxs-lookup"><span data-stu-id="0c334-330">The method can take in some parameters and can return a return value or out parameters (or both).</span></span> <span data-ttu-id="0c334-331">Na stronie usługi parametry wejściowe reprezentują wiadomości przychodzącej i wartości zwracanej i parametrów out reprezentują komunikatu wychodzącego.</span><span class="sxs-lookup"><span data-stu-id="0c334-331">On the service side, the input parameters represent the incoming message, and the return value and out parameters represent the outgoing message.</span></span> <span data-ttu-id="0c334-332">Po stronie klienta odwrotnej ma wartość true.</span><span class="sxs-lookup"><span data-stu-id="0c334-332">On the client side, the reverse is true.</span></span> <span data-ttu-id="0c334-333">Model programowania dla opisu wiadomości przy użyciu parametrów i wartości zwracanej jest szczegółowo opisane w [Określanie transferu danych w kontraktach usług](../../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-333">The programming model for describing messages using parameters and the return value is described in detail in [Specifying Data Transfer in Service Contracts](../../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md).</span></span> <span data-ttu-id="0c334-334">Jednak w tej sekcji zapewni krótkie omówienie.</span><span class="sxs-lookup"><span data-stu-id="0c334-334">However, this section will provide a brief overview.</span></span>  
  
## <a name="programming-models"></a><span data-ttu-id="0c334-335">Modele programowania</span><span class="sxs-lookup"><span data-stu-id="0c334-335">Programming Models</span></span>  
 <span data-ttu-id="0c334-336">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Struktura usługi obsługuje pięć różne modele programowania dla opisu wiadomości:</span><span class="sxs-lookup"><span data-stu-id="0c334-336">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service framework supports five different programming models for describing messages:</span></span>  
  
### <a name="1-the-empty-message"></a><span data-ttu-id="0c334-337">1. Pusty komunikat</span><span class="sxs-lookup"><span data-stu-id="0c334-337">1. The Empty Message</span></span>  
 <span data-ttu-id="0c334-338">Jest to najprostsza.</span><span class="sxs-lookup"><span data-stu-id="0c334-338">This is the simplest case.</span></span> <span data-ttu-id="0c334-339">Do opisania pusty komunikat przychodzący, nie używaj parametrów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="0c334-339">To describe an empty incoming message, do not use any input parameters.</span></span>  
  
 [!code-csharp[C_DataArchitecture#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#3)]
 [!code-vb[C_DataArchitecture#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#3)]  
  
 <span data-ttu-id="0c334-340">Do opisania wiadomości wychodzącej puste, użyj pustą wartość zwracaną i nie należy używać żadnego parametry wyjściowe:</span><span class="sxs-lookup"><span data-stu-id="0c334-340">To describe an empty outgoing message, use a void return value and do not use any out parameters:</span></span>  
  
 [!code-csharp[C_DataArchitecture#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#4)]
 [!code-vb[C_DataArchitecture#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#4)]  
  
 <span data-ttu-id="0c334-341">Należy pamiętać, że jest inny niż kontraktu jednokierunkowego operację:</span><span class="sxs-lookup"><span data-stu-id="0c334-341">Note that this is different from a one-way operation contract:</span></span>  
  
 [!code-csharp[C_DataArchitecture#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#5)]
 [!code-vb[C_DataArchitecture#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#5)]  
  
 <span data-ttu-id="0c334-342">W `SetDesiredTemperature` przykład dwukierunkowe wymiany komunikatów jest opisany.</span><span class="sxs-lookup"><span data-stu-id="0c334-342">In the `SetDesiredTemperature` example, a two-way message exchange pattern is described.</span></span> <span data-ttu-id="0c334-343">Komunikat jest zwrócony przez operację, ale nie jest pusty.</span><span class="sxs-lookup"><span data-stu-id="0c334-343">A message is returned from the operation, but it is empty.</span></span> <span data-ttu-id="0c334-344">Istnieje możliwość zwraca błąd przez operację.</span><span class="sxs-lookup"><span data-stu-id="0c334-344">It is possible to return a fault from the operation.</span></span> <span data-ttu-id="0c334-345">W przykładzie "Ustaw żarówka" wymiany komunikatów jest jednokierunkowa, więc nie ma żadnych komunikatu wychodzącego do opisu.</span><span class="sxs-lookup"><span data-stu-id="0c334-345">In the "Set Lightbulb" example, the message exchange pattern is one-way, so there is no outgoing message to describe.</span></span> <span data-ttu-id="0c334-346">Usługa nie może komunikować się o stanie do klienta w tym przypadku.</span><span class="sxs-lookup"><span data-stu-id="0c334-346">The service cannot communicate any status back to the client in this case.</span></span>  
  
### <a name="2-using-the-message-class-directly"></a><span data-ttu-id="0c334-347">2. Używanie klasy Message bezpośrednio</span><span class="sxs-lookup"><span data-stu-id="0c334-347">2. Using the Message Class Directly</span></span>  
 <span data-ttu-id="0c334-348">Istnieje możliwość użycia <xref:System.ServiceModel.Channels.Message> klasy (lub jeden z jego podklas) bezpośrednio w kontrakt operacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-348">It is possible to use the <xref:System.ServiceModel.Channels.Message> class (or one of its subclasses) directly in an operation contract.</span></span> <span data-ttu-id="0c334-349">W takim przypadku po prostu przekazuje struktura usługi `Message` przez operację na stos kanału i odwrotnie, żadne dalsze przetwarzanie nie.</span><span class="sxs-lookup"><span data-stu-id="0c334-349">In this case, the service framework just passes the `Message` from the operation to the channel stack and vice versa, with no further processing.</span></span>  
  
 <span data-ttu-id="0c334-350">Istnieją dwa główne zastosowania przy użyciu `Message` bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="0c334-350">There are two main use cases for using `Message` directly.</span></span> <span data-ttu-id="0c334-351">Umożliwia to dla zaawansowanych scenariuszy, gdy żaden z innymi modelami programowania pozwala za mało opisano wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-351">You can use this for advanced scenarios, when none of the other programming models gives you enough flexibility to describe your message.</span></span> <span data-ttu-id="0c334-352">Można na przykład opis komunikatu z właściwości pliku staje się nagłówki komunikatów i jego zawartość się coraz treść komunikatu przy użyciu plików na dysku.</span><span class="sxs-lookup"><span data-stu-id="0c334-352">For example, you might want to use files on disk to describe a message, with the file’s properties becoming message headers and the file’s contents becoming the message body.</span></span> <span data-ttu-id="0c334-353">Następnie można tworzyć coś podobnego do następującego.</span><span class="sxs-lookup"><span data-stu-id="0c334-353">You can then create something similar to the following.</span></span>  
  
 [!code-csharp[C_DataArchitecture#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#6)]
 [!code-vb[C_DataArchitecture#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#6)]  
  
 <span data-ttu-id="0c334-354">Drugi typowe na użytek `Message` w kontrakt operacji jest Jeśli usługi nie interesują danego komunikatu zawartości i działa w komunikacie na czarne pole.</span><span class="sxs-lookup"><span data-stu-id="0c334-354">The second common use for `Message` in an operation contract is when a service does not care about the particular message contents and acts on the message as on a black box.</span></span> <span data-ttu-id="0c334-355">Na przykład może być to usługa, która przekazuje dalej wiadomości do wielu innych odbiorców.</span><span class="sxs-lookup"><span data-stu-id="0c334-355">For example, you might have a service that forwards messages to multiple other recipients.</span></span> <span data-ttu-id="0c334-356">Kontrakt można pisać w następujący sposób.</span><span class="sxs-lookup"><span data-stu-id="0c334-356">The contract can be written as follows.</span></span>  
  
 [!code-csharp[C_DataArchitecture#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#7)]
 [!code-vb[C_DataArchitecture#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#7)]  
  
 <span data-ttu-id="0c334-357">Akcja = "*" wiersz skutecznie wyłącza potrzeby rozsyłania komunikatów i zapewnia, że wszystkie wiadomości wysyłane do `IForwardingService` kontraktu należy ich sposobem `ForwardMessage` operacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-357">The Action="*" line effectively turns off message dispatching and ensures that all messages sent to the `IForwardingService` contract make their way to the `ForwardMessage` operation.</span></span> <span data-ttu-id="0c334-358">(Zazwyczaj Dyspozytor zbada nagłówka "Akcja" wiadomości do operacji, które jest przeznaczone do określenia.</span><span class="sxs-lookup"><span data-stu-id="0c334-358">(Normally, the dispatcher would examine the message’s "Action" header to determine which operation it is intended for.</span></span> <span data-ttu-id="0c334-359">Akcja = "\*" oznacza "wszystkie możliwe wartości nagłówka Action".) Kombinacja akcji = "\*" i za pomocą komunikatu jako parametr nosi nazwę "universal kontraktu", ponieważ jest w stanie wszystkie komunikaty możliwe.</span><span class="sxs-lookup"><span data-stu-id="0c334-359">Action="\*" means "all possible values of the Action header".) The combination of Action="\*" and using Message as a parameter is known as the "universal contract" because it is able to receive all possible messages.</span></span> <span data-ttu-id="0c334-360">Aby móc wysyłać komunikaty możliwe, należy użyć komunikatu jako wartości zwracane i ustawić `ReplyAction` do "\*".</span><span class="sxs-lookup"><span data-stu-id="0c334-360">To be able to send all possible messages, use Message as the return value and set `ReplyAction` to "\*".</span></span> <span data-ttu-id="0c334-361">Uniemożliwi to struktura usługi Dodawanie nagłówka własnego działania, dzięki któremu można kontrolować przy użyciu tego nagłówka `Message` obiekt powrocie.</span><span class="sxs-lookup"><span data-stu-id="0c334-361">This will prevent the service framework from adding its own Action header, enabling you to control this header using the `Message` object you return.</span></span>  
  
### <a name="3-message-contracts"></a><span data-ttu-id="0c334-362">3. Kontrakty komunikatów</span><span class="sxs-lookup"><span data-stu-id="0c334-362">3. Message Contracts</span></span>  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="0c334-363">zapewnia model programowania deklaratywne opisujące wiadomości, nazywane *komunikatu kontrakty*.</span><span class="sxs-lookup"><span data-stu-id="0c334-363"> provides a declarative programming model for describing messages, called *message contracts*.</span></span> <span data-ttu-id="0c334-364">Ten model jest szczegółowo opisane w [za pomocą kontraktów komunikatu](../../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-364">This model is described in detail in [Using Message Contracts](../../../../docs/framework/wcf/feature-details/using-message-contracts.md).</span></span> <span data-ttu-id="0c334-365">Zasadniczo cały komunikat jest reprezentowane przez jeden [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] typu, który używa atrybutów, takich jak <xref:System.ServiceModel.MessageBodyMemberAttribute> i <xref:System.ServiceModel.MessageHeaderAttribute> do opisywania części klasy kontraktu komunikatu, które powinny być mapowane na której części wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0c334-365">Essentially, the entire message is represented by a single [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type that uses attributes like the <xref:System.ServiceModel.MessageBodyMemberAttribute> and <xref:System.ServiceModel.MessageHeaderAttribute> to describe which parts of the message contract class should map to which part of the message.</span></span>  
  
 <span data-ttu-id="0c334-366">Kontrakty komunikatu zapewniają dużą kontrolę nad powstałe w ten sposób `Message` wystąpień (chociaż oczywiście nie tak formantu przy użyciu `Message` bezpośrednio klasa).</span><span class="sxs-lookup"><span data-stu-id="0c334-366">Message contracts provide a lot of control over the resulting `Message` instances (although obviously not as much control as using the `Message` class directly).</span></span> <span data-ttu-id="0c334-367">Na przykład treści wiadomości często składają się z wielu rodzajów informacji, każdy jest reprezentowany przez jego własnej — element XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-367">For example, message bodies are often composed of multiple pieces of information, each represented by its own XML element.</span></span> <span data-ttu-id="0c334-368">Te elementy albo mogą występować bezpośrednio w treści (*systemu od zera* tryb) lub może być *opakowana* w tym elemencie XML.</span><span class="sxs-lookup"><span data-stu-id="0c334-368">These elements can either occur directly in the body (*bare* mode) or can be *wrapped* in an encompassing XML element.</span></span> <span data-ttu-id="0c334-369">Za pomocą kontraktu komunikatu, model programowania umożliwia podjęcie decyzji bez systemu operacyjnego i opakowana i nazwa przestrzeni nazw i nazwa otoki formantu.</span><span class="sxs-lookup"><span data-stu-id="0c334-369">Using the message contract programming model enables you to make the bare-versus-wrapped decision and control the name of the wrapper name and namespace.</span></span>  
  
 <span data-ttu-id="0c334-370">W poniższym przykładzie kodu kontraktu komunikatu pokazano te funkcje.</span><span class="sxs-lookup"><span data-stu-id="0c334-370">The following code example of a message contract demonstrates these features.</span></span>  
  
 [!code-csharp[C_DataArchitecture#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#9)]
 [!code-vb[C_DataArchitecture#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#9)]  
  
 <span data-ttu-id="0c334-371">Elementy oznaczony do serializacji (z <xref:System.ServiceModel.MessageBodyMemberAttribute>, <xref:System.ServiceModel.MessageHeaderAttribute>, lub innych powiązanych atrybutów) muszą mieć możliwość serializowania uczestniczyć w kontrakcie komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0c334-371">Items marked to be serialized (with the <xref:System.ServiceModel.MessageBodyMemberAttribute>, <xref:System.ServiceModel.MessageHeaderAttribute>, or other related attributes) must be serializable to participate in a message contract.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="0c334-372">w sekcji "Serializacji" w dalszej części tego tematu.</span><span class="sxs-lookup"><span data-stu-id="0c334-372"> the "Serialization" section later in this topic.</span></span>  
  
### <a name="4-parameters"></a><span data-ttu-id="0c334-373">4. Parametry</span><span class="sxs-lookup"><span data-stu-id="0c334-373">4. Parameters</span></span>  
 <span data-ttu-id="0c334-374">Często deweloperze, który chce opisuje operację, która działa na wielu fragmentów danych nie jest konieczne stopień kontroli, które zapewniają kontraktów komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0c334-374">Often, a developer who wants to describe an operation that acts on multiple pieces of data does not need the degree of control that message contracts provide.</span></span> <span data-ttu-id="0c334-375">Na przykład podczas tworzenia nowych usług, co nie zwykle chce podjąć decyzję dotyczącą bez systemu operacyjnego i opakowana i zdecydować, nazwa elementu otoki.</span><span class="sxs-lookup"><span data-stu-id="0c334-375">For example, when creating new services, one does not usually want to make the bare-versus-wrapped decision and decide on the wrapper element name.</span></span> <span data-ttu-id="0c334-376">Podejmowanie tych decyzji często wymaga dokładnego wiedzę na temat usługi sieci Web i SOAP.</span><span class="sxs-lookup"><span data-stu-id="0c334-376">Making these decisions often requires deep knowledge of Web services and SOAP.</span></span>  
  
 <span data-ttu-id="0c334-377">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Struktura usługi może automatycznie wybrać reprezentacja SOAP najlepszym i najbardziej interoperacyjne do wysyłania i odbierania wielu powiązanych rodzajów informacji, bez wymuszania tych opcji na użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0c334-377">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service framework can automatically pick the best and most interoperable SOAP representation for sending or receiving multiple related pieces of information, without forcing these choices on the user.</span></span> <span data-ttu-id="0c334-378">To jest realizowane przez po prostu opisujące te elementy informacji jako parametry lub zwracać wartości kontrakt operacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-378">This is accomplished by simply describing these pieces of information as parameters or return values of an operation contract.</span></span> <span data-ttu-id="0c334-379">Na przykład należy wziąć pod uwagę następujące kontrakt operacji.</span><span class="sxs-lookup"><span data-stu-id="0c334-379">For example, consider the following operation contract.</span></span>  
  
 [!code-csharp[C_DataArchitecture#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_dataarchitecture/cs/source.cs#11)]
 [!code-vb[C_DataArchitecture#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_dataarchitecture/vb/source.vb#11)]  
  
 <span data-ttu-id="0c334-380">Struktura usługi automatycznie decyduje się wszystkie trzy informacje (`customerID`, `item`, i `quantity`) w treści wiadomości i zawijania je w element otoki o nazwie `SubmitOrderRequest`.</span><span class="sxs-lookup"><span data-stu-id="0c334-380">The service framework automatically decides to put all three pieces of information (`customerID`, `item`, and `quantity`) into the message body and wrap them in a wrapper element named `SubmitOrderRequest`.</span></span>  
  
 <span data-ttu-id="0c334-381">Informacje, które mają być wysyłane lub odbierane to prosta lista parametrów kontrakt operacji jest zalecane podejście, jeśli nie istnieją specjalne przyczyny można przenieść do kontraktu komunikatu bardziej skomplikowane opisujące lub `Message`— na podstawie modele programowania.</span><span class="sxs-lookup"><span data-stu-id="0c334-381">Describing the information to be sent or received as a simple list of operation contract parameters is the recommended approach, unless special reasons exist to move to the more-complex message contract or `Message`-based programming models.</span></span>  
  
### <a name="5-stream"></a><span data-ttu-id="0c334-382">5. Strumień</span><span class="sxs-lookup"><span data-stu-id="0c334-382">5. Stream</span></span>  
 <span data-ttu-id="0c334-383">Przy użyciu `Stream` lub jednej z jego podklas w kontrakt operacji lub w ramach treści wiadomości wyłącznie w kontrakcie komunikatu jest uznawana za oddzielne model programowania z opisane powyżej.</span><span class="sxs-lookup"><span data-stu-id="0c334-383">Using `Stream` or one of its subclasses in an operation contract or as a sole message body part in a message contract can be considered a separate programming model from the ones described above.</span></span> <span data-ttu-id="0c334-384">Przy użyciu `Stream` w ten sposób jest jedynym sposobem zagwarantowania, że Umowa będzie można używać w sposób przesyłany strumieniowo, jest zbyt mała pisanie własnych przesyłania strumieniowego zgodnego `Message` podklasy.</span><span class="sxs-lookup"><span data-stu-id="0c334-384">Using `Stream` in this way is the only way to guarantee that your contract will be usable in a streamed fashion, short of writing your own streaming-compatible `Message` subclass.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="0c334-385">[Dużej ilości danych i przesyłania strumieniowego](../../../../docs/framework/wcf/feature-details/large-data-and-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-385"> [Large Data and Streaming](../../../../docs/framework/wcf/feature-details/large-data-and-streaming.md).</span></span>  
  
 <span data-ttu-id="0c334-386">Gdy `Stream` lub jednej z jego podklas jest używany w ten sposób, nie zostanie wywołany element serializujący.</span><span class="sxs-lookup"><span data-stu-id="0c334-386">When `Stream` or one of its subclasses is used in this way, the serializer is not invoked.</span></span> <span data-ttu-id="0c334-387">Dla komunikatów wychodzących, specjalne przesyłania strumieniowego `Message` podklasy jest tworzony i strumień jest zapisywany limit zgodnie z opisem w sekcji na <xref:System.Xml.IStreamProvider> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="0c334-387">For outgoing messages, a special streaming `Message` subclass is created and the stream is written out as described in the section on the <xref:System.Xml.IStreamProvider> interface.</span></span> <span data-ttu-id="0c334-388">Dla komunikatów przychodzących, tworzy struktura usługi `Stream` podklasy za pośrednictwem wiadomości przychodzącej i udostępnia go wykonać operację.</span><span class="sxs-lookup"><span data-stu-id="0c334-388">For incoming messages, the service framework creates a `Stream` subclass over the incoming message and provides it to the operation.</span></span>  
  
## <a name="programming-model-restrictions"></a><span data-ttu-id="0c334-389">Ograniczenia modelu programowania</span><span class="sxs-lookup"><span data-stu-id="0c334-389">Programming Model Restrictions</span></span>  
 <span data-ttu-id="0c334-390">Modele programowania opisane powyżej, nie można łączyć arbitralnie.</span><span class="sxs-lookup"><span data-stu-id="0c334-390">The programming models described above cannot be arbitrarily combined.</span></span> <span data-ttu-id="0c334-391">Na przykład jeśli operacja akceptuje typ kontraktu komunikatu, kontraktu komunikatu musi być jego tylko parametr wejściowy.</span><span class="sxs-lookup"><span data-stu-id="0c334-391">For example, if an operation accepts a message contract type, the message contract must be its only input parameter.</span></span> <span data-ttu-id="0c334-392">Ponadto operacji musi być następnie zwracany jest pusty komunikat (zwracanego typu void) lub innej kontraktu komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0c334-392">Furthermore, the operation must then either return an empty message (return type of void) or another message contract.</span></span> <span data-ttu-id="0c334-393">Ograniczenia te modelu programowania są opisane w tematach dla każdego określonego modelu programowania: [za pomocą kontraktów komunikatu](../../../../docs/framework/wcf/feature-details/using-message-contracts.md), [używanie klasy Message](../../../../docs/framework/wcf/feature-details/using-the-message-class.md), i [duże ilości danych i przesyłania strumieniowego ](../../../../docs/framework/wcf/feature-details/large-data-and-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="0c334-393">These programming model restrictions are described in the topics for each specific programming model: [Using Message Contracts](../../../../docs/framework/wcf/feature-details/using-message-contracts.md), [Using the Message Class](../../../../docs/framework/wcf/feature-details/using-the-message-class.md), and [Large Data and Streaming](../../../../docs/framework/wcf/feature-details/large-data-and-streaming.md).</span></span>  
  
## <a name="message-formatters"></a><span data-ttu-id="0c334-394">Elementy formatujące komunikaty</span><span class="sxs-lookup"><span data-stu-id="0c334-394">Message Formatters</span></span>  
 <span data-ttu-id="0c334-395">Modele programowania opisane powyżej są obsługiwane przez podłączenie składniki o nazwie *komunikatu elementy formatujące* w ramach usługi.</span><span class="sxs-lookup"><span data-stu-id="0c334-395">The programming models described above are supported by plugging in components called *message formatters* into the service framework.</span></span> <span data-ttu-id="0c334-396">Elementy formatujące komunikaty są typy, które implementują <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter> lub <xref:System.ServiceModel.Dispatcher.IDispatchMessageFormatter> interfejsu i/lub dla klientów i usług [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] klientów, odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="0c334-396">Message formatters are types that implement the <xref:System.ServiceModel.Dispatcher.IClientMessageFormatter> or <xref:System.ServiceModel.Dispatcher.IDispatchMessageFormatter> interface, or both, for use in clients and service [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] clients, respectively.</span></span>  
  
 <span data-ttu-id="0c334-397">Elementy formatujące komunikaty są zwykle podłączone przez zachowania.</span><span class="sxs-lookup"><span data-stu-id="0c334-397">Message formatters are normally plugged in by behaviors.</span></span> <span data-ttu-id="0c334-398">Na przykład <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> podłącza programu formatującego kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="0c334-398">For example, the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> plugs in the data contract message formatter.</span></span> <span data-ttu-id="0c334-399">To zrobić na stronie usługi, ustawiając <xref:System.ServiceModel.Dispatcher.DispatchOperation.Formatter%2A> do poprawny element formatujący w <xref:System.ServiceModel.Description.IOperationBehavior.ApplyDispatchBehavior%28System.ServiceModel.Description.OperationDescription%2CSystem.ServiceModel.Dispatcher.DispatchOperation%29> metody, lub po stronie klienta, ustawiając <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A> do poprawny element formatujący w <xref:System.ServiceModel.Description.IOperationBehavior.ApplyClientBehavior%28System.ServiceModel.Description.OperationDescription%2CSystem.ServiceModel.Dispatcher.ClientOperation%29> — metoda.</span><span class="sxs-lookup"><span data-stu-id="0c334-399">This is done on the service side by setting <xref:System.ServiceModel.Dispatcher.DispatchOperation.Formatter%2A> to the correct formatter in the <xref:System.ServiceModel.Description.IOperationBehavior.ApplyDispatchBehavior%28System.ServiceModel.Description.OperationDescription%2CSystem.ServiceModel.Dispatcher.DispatchOperation%29> method, or on the client side by setting <xref:System.ServiceModel.Dispatcher.ClientOperation.Formatter%2A> to the correct formatter in the <xref:System.ServiceModel.Description.IOperationBehavior.ApplyClientBehavior%28System.ServiceModel.Description.OperationDescription%2CSystem.ServiceModel.Dispatcher.ClientOperation%29> method.</span></span>  
  
 <span data-ttu-id="0c334-400">Poniższe tabele zawierają listę metod, które mogą zaimplementować programu formatującego.</span><span class="sxs-lookup"><span data-stu-id="0c334-400">The following tables lists the methods that a message formatter may implement.</span></span>  
  
|<span data-ttu-id="0c334-401">Interface</span><span class="sxs-lookup"><span data-stu-id="0c334-401">Interface</span></span>|<span data-ttu-id="0c334-402">Metoda</span><span class="sxs-lookup"><span data-stu-id="0c334-402">Method</span></span>|<span data-ttu-id="0c334-403">Akcja</span><span class="sxs-lookup"><span data-stu-id="0c334-403">Action</span></span>|  
|---------------|------------|------------|  
|<xref:System.ServiceModel.Dispatcher.IDispatchMessageFormatter>|<xref:System.ServiceModel.Dispatcher.IDispatchMessageFormatter.DeserializeRequest%28System.ServiceModel.Channels.Message%2CSystem.Object%5B%5D%29>|<span data-ttu-id="0c334-404">Konwertuje przychodzące `Message` parametrów operacji</span><span class="sxs-lookup"><span data-stu-id="0c334-404">Converts an incoming `Message` to operation parameters</span></span>|  
|<xref:System.ServiceModel.Dispatcher.IDispatchMessageFormatter>|<xref:System.ServiceModel.Dispatcher.IDispatchMessageFormatter.SerializeReply%28System.ServiceModel.Channels.MessageVersion%2CSystem.Object%5B%5D%2CSystem.Object%29>|<span data-ttu-id="0c334-405">Tworzy wychodzące `Message` wartość zwracana z operacji/out parametrów</span><span class="sxs-lookup"><span data-stu-id="0c334-405">Creates an outgoing `Message` from operation return value/out parameters</span></span>|  
|<xref:System.ServiceModel.Dispatcher.IClientMessageFormatter>|<xref:System.ServiceModel.Dispatcher.IClientMessageFormatter.SerializeRequest%28System.ServiceModel.Channels.MessageVersion%2CSystem.Object%5B%5D%29>|<span data-ttu-id="0c334-406">Tworzy wychodzące `Message` z parametrów operacji</span><span class="sxs-lookup"><span data-stu-id="0c334-406">Creates an outgoing `Message` from operation parameters</span></span>|  
|<xref:System.ServiceModel.Dispatcher.IClientMessageFormatter>|<xref:System.ServiceModel.Dispatcher.IClientMessageFormatter.DeserializeReply%28System.ServiceModel.Channels.Message%2CSystem.Object%5B%5D%29>|<span data-ttu-id="0c334-407">Konwertuje przychodzące `Message` do wartości zwracanej/parametrów out</span><span class="sxs-lookup"><span data-stu-id="0c334-407">Converts an incoming `Message` to a return value/out parameters</span></span>|  
  
## <a name="serialization"></a><span data-ttu-id="0c334-408">Serializacja</span><span class="sxs-lookup"><span data-stu-id="0c334-408">Serialization</span></span>  
 <span data-ttu-id="0c334-409">Zawsze, gdy używasz kontraktów komunikatu lub parametrów do opisywania treść wiadomości, należy użyć serializacji w celu konwersji między [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] typy i reprezentacji XML typu Infoset.</span><span class="sxs-lookup"><span data-stu-id="0c334-409">Whenever you use message contracts or parameters to describe message contents, you must use serialization to convert between [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] types and XML Infoset representation.</span></span> <span data-ttu-id="0c334-410">Serializacja jest używana w innych miejscach w [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], na przykład <xref:System.ServiceModel.Channels.Message> ma ogólnego <xref:System.ServiceModel.Channels.Message.GetBody%2A> metodę, która służy do odczytu treści cały komunikat deserializacji do obiektu.</span><span class="sxs-lookup"><span data-stu-id="0c334-410">Serialization is used in other places in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], for example, <xref:System.ServiceModel.Channels.Message> has a Generic <xref:System.ServiceModel.Channels.Message.GetBody%2A> method that you can use to read the entire body of the message deserialized into an object.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="0c334-411">obsługuje dwie technologie serializacji "fabrycznej" serializację i deserializację parametrów i części wiadomości: <xref:System.Runtime.Serialization.DataContractSerializer> i `XmlSerializer`.</span><span class="sxs-lookup"><span data-stu-id="0c334-411"> supports two serialization technologies "out of the box" for serializing and deserializing parameters and message parts: the <xref:System.Runtime.Serialization.DataContractSerializer> and the `XmlSerializer`.</span></span> <span data-ttu-id="0c334-412">Ponadto można pisać niestandardowe serializatorów.</span><span class="sxs-lookup"><span data-stu-id="0c334-412">Additionally, you can write custom serializers.</span></span> <span data-ttu-id="0c334-413">Jednak inne części [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (takich jak ogólnego `GetBody` metody lub protokołu SOAP fault serializacji) może być ograniczony do użycia tylko <xref:System.Runtime.Serialization.XmlObjectSerializer> podklasy (<xref:System.Runtime.Serialization.DataContractSerializer> i <xref:System.Runtime.Serialization.NetDataContractSerializer>, ale nie <xref:System.Xml.Serialization.XmlSerializer>), lub może być ustalony używana będzie tylko <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="0c334-413">However, other parts of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] (such as the Generic `GetBody` method or SOAP fault serialization) may be restricted to use only the <xref:System.Runtime.Serialization.XmlObjectSerializer> subclasses (<xref:System.Runtime.Serialization.DataContractSerializer> and <xref:System.Runtime.Serialization.NetDataContractSerializer>, but not the <xref:System.Xml.Serialization.XmlSerializer>), or may even be hard-coded to use only the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span>  
  
 <span data-ttu-id="0c334-414">`XmlSerializer` Jest używany mechanizm serializacji w [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] usług sieci Web.</span><span class="sxs-lookup"><span data-stu-id="0c334-414">The `XmlSerializer` is the serialization engine used in [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web services.</span></span> <span data-ttu-id="0c334-415">`DataContractSerializer` Jest nowy aparat serializacji, która obsługuje usługę nowy model programowania kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="0c334-415">The `DataContractSerializer` is the new serialization engine that understands the new data contract programming model.</span></span> <span data-ttu-id="0c334-416">`DataContractSerializer`wybór domyślny i decyzja o korzystaniu z `XmlSerializer` można wprowadzić na podstawie na operację przy użyciu <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractFormatAttribute%2A> atrybutu.</span><span class="sxs-lookup"><span data-stu-id="0c334-416">`DataContractSerializer` is the default choice, and the choice to use the `XmlSerializer` can be made on a per-operation basis using the <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior.DataContractFormatAttribute%2A> attribute.</span></span>  
  
 <span data-ttu-id="0c334-417"><xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior>i <xref:System.ServiceModel.Description.XmlSerializerOperationBehavior> są zobowiązani do podłączania elementy formatujące komunikaty dla zachowania operacji `DataContractSerializer` i `XmlSerializer`odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="0c334-417"><xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> and <xref:System.ServiceModel.Description.XmlSerializerOperationBehavior> are the operation behaviors responsible for plugging in the message formatters for the `DataContractSerializer` and the `XmlSerializer`, respectively.</span></span> <span data-ttu-id="0c334-418"><xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> Zachowanie faktycznie mogą pracować z dowolnego serializator, która pochodzi z <xref:System.Runtime.Serialization.XmlObjectSerializer>, takie jak <xref:System.Runtime.Serialization.NetDataContractSerializer> (opisano szczegółowo w za pomocą serializacji autonomicznego).</span><span class="sxs-lookup"><span data-stu-id="0c334-418">The <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> behavior can actually operate with any serializer that derives from <xref:System.Runtime.Serialization.XmlObjectSerializer>, including the <xref:System.Runtime.Serialization.NetDataContractSerializer> (described in detail in Using Stand-Alone Serialization).</span></span> <span data-ttu-id="0c334-419">Jeden z wywołuje `CreateSerializer` przeciążenia metody wirtualnej uzyskanie serializatora.</span><span class="sxs-lookup"><span data-stu-id="0c334-419">The behavior calls one of the `CreateSerializer` virtual method overloads to obtain the serializer.</span></span> <span data-ttu-id="0c334-420">Aby dołączyć innego serializatora, Utwórz nową <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> podklasy i zastąpienie `CreateSerializer` przeciążenia.</span><span class="sxs-lookup"><span data-stu-id="0c334-420">To plug in a different serializer, create a new <xref:System.ServiceModel.Description.DataContractSerializerOperationBehavior> subclass and override both `CreateSerializer` overloads.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0c334-421">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0c334-421">See Also</span></span>  
 [<span data-ttu-id="0c334-422">Określanie transferu danych w kontraktach usług</span><span class="sxs-lookup"><span data-stu-id="0c334-422">Specifying Data Transfer in Service Contracts</span></span>](../../../../docs/framework/wcf/feature-details/specifying-data-transfer-in-service-contracts.md)
