---
title: Zagadnienia dotyczące zabezpieczeń obejmujące metadane
ms.date: 03/30/2017
ms.assetid: e78ef8ab-4f63-4656-ab93-b1deab2666d5
ms.openlocfilehash: c7a00d5abc9cc88b60208bd76fa8874f1fe00af9
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "96275999"
---
# <a name="security-considerations-with-metadata"></a><span data-ttu-id="f6662-102">Zagadnienia dotyczące zabezpieczeń obejmujące metadane</span><span class="sxs-lookup"><span data-stu-id="f6662-102">Security Considerations with Metadata</span></span>

<span data-ttu-id="f6662-103">Korzystając z funkcji metadanych w programie Windows Communication Foundation (WCF), należy wziąć pod uwagę implikacje zabezpieczeń publikowania, pobierania i używania metadanych usługi.</span><span class="sxs-lookup"><span data-stu-id="f6662-103">When using the metadata features in Windows Communication Foundation (WCF), consider the security implications of publishing, retrieving, and using service metadata.</span></span>  
  
## <a name="when-to-publish-metadata"></a><span data-ttu-id="f6662-104">Kiedy publikować metadane</span><span class="sxs-lookup"><span data-stu-id="f6662-104">When to Publish Metadata</span></span>  

 <span data-ttu-id="f6662-105">Usługi WCF domyślnie nie publikują metadanych.</span><span class="sxs-lookup"><span data-stu-id="f6662-105">WCF services do not publish metadata by default.</span></span> <span data-ttu-id="f6662-106">Aby opublikować metadane dla usługi WCF, należy jawnie włączyć Publikowanie metadanych poprzez dodanie punktów końcowych metadanych do usługi (zobacz [Publikowanie metadanych](publishing-metadata.md)).</span><span class="sxs-lookup"><span data-stu-id="f6662-106">To publish metadata for a WCF service you must explicitly enable metadata publishing by adding metadata endpoints to your service (see [Publishing Metadata](publishing-metadata.md)).</span></span> <span data-ttu-id="f6662-107">Pozostawienie wyłączonego publikowania metadanych zmniejsza obszar ataków dla usługi i obniża ryzyko przypadkowego ujawnienia informacji.</span><span class="sxs-lookup"><span data-stu-id="f6662-107">Leaving metadata publishing disabled reduces the attack surface for your service and lowers the risk of unintentional information disclosure.</span></span> <span data-ttu-id="f6662-108">Nie wszystkie usługi muszą publikować metadane.</span><span class="sxs-lookup"><span data-stu-id="f6662-108">Not all services must publish metadata.</span></span> <span data-ttu-id="f6662-109">Jeśli nie ma potrzeby publikowania metadanych, rozważ pozostawienie jej wyłączone.</span><span class="sxs-lookup"><span data-stu-id="f6662-109">If you do not have to publish metadata, consider leaving it turned off.</span></span> <span data-ttu-id="f6662-110">Należy pamiętać, że nadal można generować metadane i kod klienta bezpośrednio z zestawów usług przy użyciu [Narzędzia do obsługi metadanych ServiceModel (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="f6662-110">Note that you can still generate metadata and client code directly from your service assemblies using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="f6662-111">Aby uzyskać więcej informacji na temat używania Svcutil.exe do eksportowania metadanych, zobacz [How to: Use Svcutil.exe to Export Metadata from skompilowany kod usługi](how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span><span class="sxs-lookup"><span data-stu-id="f6662-111">For more information about using Svcutil.exe to export metadata, see [How to: Use Svcutil.exe to Export Metadata from Compiled Service Code](how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span></span>  
  
## <a name="publishing-metadata-using-a-secure-binding"></a><span data-ttu-id="f6662-112">Publikowanie metadanych przy użyciu bezpiecznego powiązania</span><span class="sxs-lookup"><span data-stu-id="f6662-112">Publishing Metadata Using a Secure Binding</span></span>  

 <span data-ttu-id="f6662-113">Domyślne powiązania metadanych udostępniane przez funkcję WCF nie są bezpieczne i umożliwiają dostęp anonimowy do metadanych.</span><span class="sxs-lookup"><span data-stu-id="f6662-113">The default metadata bindings that WCF provides are not secure and they allow anonymous access to the metadata.</span></span> <span data-ttu-id="f6662-114">Metadane usługi publikowane przez usługę WCF zawierają szczegółowy opis usługi i mogą celowo lub przypadkowo zawierać informacje poufne.</span><span class="sxs-lookup"><span data-stu-id="f6662-114">The service metadata that a WCF service publishes contains a detailed description about the service and may intentionally or unintentionally contain sensitive information.</span></span> <span data-ttu-id="f6662-115">Na przykład metadane usługi mogą zawierać informacje o operacjach infrastruktury, które nie zostały zamierzone publicznie.</span><span class="sxs-lookup"><span data-stu-id="f6662-115">For example, service metadata may contain information about infrastructure operations that was not intended to be broadcast publicly.</span></span> <span data-ttu-id="f6662-116">Aby chronić metadane usługi przed nieautoryzowanym dostępem, można użyć bezpiecznego powiązania dla punktu końcowego metadanych.</span><span class="sxs-lookup"><span data-stu-id="f6662-116">To protect service metadata from unauthorized access, you can use a secure binding for your metadata endpoint.</span></span> <span data-ttu-id="f6662-117">Punkty końcowe metadanych odpowiadają na żądania HTTP/GET, które mogą używać SSL (SSL) do zabezpieczania metadanych.</span><span class="sxs-lookup"><span data-stu-id="f6662-117">Metadata endpoints respond to HTTP/GET requests that can use Secure Sockets Layer (SSL) to secure the metadata.</span></span> <span data-ttu-id="f6662-118">Aby uzyskać więcej informacji, zobacz [jak: Zabezpieczanie punktów końcowych metadanych](how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="f6662-118">For more information, see [How to: Secure Metadata Endpoints](how-to-secure-metadata-endpoints.md).</span></span>  
  
 <span data-ttu-id="f6662-119">Zabezpieczanie punktów końcowych metadanych umożliwia żądającym bezpiecznego pobierania metadanych usługi bez ryzyka naruszenia lub fałszowania.</span><span class="sxs-lookup"><span data-stu-id="f6662-119">Securing your metadata endpoints also provides a way for requesters to securely retrieve service metadata without the risk of tampering or spoofing.</span></span>  
  
## <a name="using-only-trusted-metadata"></a><span data-ttu-id="f6662-120">Używanie tylko zaufanych metadanych</span><span class="sxs-lookup"><span data-stu-id="f6662-120">Using Only Trusted Metadata</span></span>  

 <span data-ttu-id="f6662-121">Metadanych usługi można użyć do automatycznego konstruowania składników czasu wykonywania wymaganych do wywołania usługi.</span><span class="sxs-lookup"><span data-stu-id="f6662-121">You can use service metadata to automatically construct the run-time components required to call the service.</span></span> <span data-ttu-id="f6662-122">Możesz również użyć metadanych w czasie projektowania, aby opracować aplikację kliencką lub w środowisku uruchomieniowym w celu dynamicznego aktualizowania powiązania używanego przez klienta do wywoływania usługi.</span><span class="sxs-lookup"><span data-stu-id="f6662-122">You can also use metadata at design time to develop a client application or at runtime to dynamically update the binding a client uses to call a service.</span></span>  
  
 <span data-ttu-id="f6662-123">Metadane usługi mogą zostać naruszone lub sfałszowane po pobraniu w sposób niebezpieczny.</span><span class="sxs-lookup"><span data-stu-id="f6662-123">Service metadata can be tampered with or spoofed when retrieved in an insecure manner.</span></span> <span data-ttu-id="f6662-124">Metadane naruszone mogą przekierować klienta do złośliwej usługi, zawierać ustawienia zabezpieczeń, które zostały naruszone, lub zawierają złośliwe struktury XML.</span><span class="sxs-lookup"><span data-stu-id="f6662-124">Tampered metadata can redirect your client to a malicious service, contain compromised security settings, or contain malicious XML structures.</span></span> <span data-ttu-id="f6662-125">Dokumenty metadanych mogą być duże i często zapisywane w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="f6662-125">Metadata documents can be large and are frequently saved to the file system.</span></span> <span data-ttu-id="f6662-126">Aby chronić przed manipulacją i fałszowaniem, należy użyć bezpiecznego powiązania do żądania metadanych usługi, gdy jest ona dostępna.</span><span class="sxs-lookup"><span data-stu-id="f6662-126">To protect against tampering and spoofing, use a secure binding to request service metadata when one is available.</span></span>  
  
## <a name="using-safe-techniques-for-processing-metadata"></a><span data-ttu-id="f6662-127">Używanie bezpiecznych technik przetwarzania metadanych</span><span class="sxs-lookup"><span data-stu-id="f6662-127">Using Safe Techniques for Processing Metadata</span></span>  

 <span data-ttu-id="f6662-128">Metadane usługi są często pobierane z usługi za pośrednictwem sieci przy użyciu standardowych protokołów, takich jak WS-MetadataExchange (MEX).</span><span class="sxs-lookup"><span data-stu-id="f6662-128">Service metadata is frequently retrieved from a service over a network using standardized protocols such as WS-MetadataExchange (MEX).</span></span> <span data-ttu-id="f6662-129">Wiele formatów metadanych obejmuje mechanizmy odwołujące się do dodatkowych metadanych.</span><span class="sxs-lookup"><span data-stu-id="f6662-129">Many metadata formats include referencing mechanisms for pointing to additional metadata.</span></span> <span data-ttu-id="f6662-130"><xref:System.ServiceModel.Description.MetadataExchangeClient>Typ automatycznie przetwarza odwołania w dokumentach Web Services Description Language (WSDL), schemacie XML i dokumentach Mex.</span><span class="sxs-lookup"><span data-stu-id="f6662-130">The <xref:System.ServiceModel.Description.MetadataExchangeClient> type automatically processes references for you in Web Services Description Language (WSDL) documents, XML Schema, and MEX documents.</span></span> <span data-ttu-id="f6662-131">Rozmiar <xref:System.ServiceModel.Description.MetadataSet> obiektu utworzonego na podstawie pobranych metadanych jest bezpośrednio proporcjonalny do <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> wartości <xref:System.ServiceModel.Description.MetadataExchangeClient> użytego wystąpienia oraz `MaxReceivedMessageSize` wartości powiązania używanej przez to <xref:System.ServiceModel.Description.MetadataExchangeClient> wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="f6662-131">The size of the <xref:System.ServiceModel.Description.MetadataSet> object created from the retrieved metadata is directly proportional to the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> value for the <xref:System.ServiceModel.Description.MetadataExchangeClient> instance that is used and the `MaxReceivedMessageSize` value for the binding being used by that <xref:System.ServiceModel.Description.MetadataExchangeClient> instance.</span></span> <span data-ttu-id="f6662-132">Ustaw te przydziały na odpowiednie wartości zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="f6662-132">Set these quotas to appropriate values as dictated by your scenario.</span></span>  
  
 <span data-ttu-id="f6662-133">W programie WCF metadane usługi są przetwarzane w formacie XML.</span><span class="sxs-lookup"><span data-stu-id="f6662-133">In WCF, service metadata is processed as XML.</span></span> <span data-ttu-id="f6662-134">W przypadku przetwarzania dokumentów XML aplikacje powinny chronić się przed złośliwymi strukturami XML.</span><span class="sxs-lookup"><span data-stu-id="f6662-134">When processing XML documents, applications should protect themselves against malicious XML structures.</span></span> <span data-ttu-id="f6662-135">Użyj programu <xref:System.Xml.XmlDictionaryReader> z odpowiednimi przydziałami podczas przetwarzania kodu XML, a także Ustaw <xref:System.Xml.XmlTextReader.DtdProcessing%2A> Właściwość na <xref:System.Xml.DtdProcessing.Prohibit> .</span><span class="sxs-lookup"><span data-stu-id="f6662-135">Use the <xref:System.Xml.XmlDictionaryReader> with appropriate quotas when processing XML and also set the <xref:System.Xml.XmlTextReader.DtdProcessing%2A> property to <xref:System.Xml.DtdProcessing.Prohibit>.</span></span>  
  
 <span data-ttu-id="f6662-136">System metadanych w programie WCF jest rozszerzalny, a rozszerzenia metadanych można zarejestrować w pliku konfiguracyjnym aplikacji (zobacz [Rozszerzanie systemu metadanych](../extending/extending-the-metadata-system.md)).</span><span class="sxs-lookup"><span data-stu-id="f6662-136">The metadata system in WCF is extensible and metadata extensions can be registered in your application configuration file (see [Extending the Metadata System](../extending/extending-the-metadata-system.md)).</span></span> <span data-ttu-id="f6662-137">Rozszerzenia metadanych mogą uruchamiać dowolny kod, więc należy chronić plik konfiguracyjny aplikacji przy użyciu odpowiednich list kontroli dostępu (ACL) i rejestrować tylko implementacje zaufanych rozszerzeń metadanych.</span><span class="sxs-lookup"><span data-stu-id="f6662-137">Metadata extensions can run arbitrary code, so you should protect your application configuration file with appropriate access control lists (ACLs) and register only trusted metadata extension implementations.</span></span>  
  
## <a name="validating-generated-clients"></a><span data-ttu-id="f6662-138">Weryfikowanie wygenerowanych klientów</span><span class="sxs-lookup"><span data-stu-id="f6662-138">Validating Generated Clients</span></span>  

 <span data-ttu-id="f6662-139">Podczas generowania kodu klienta z metadanych pobranych z niezaufanego źródła Sprawdź poprawność wygenerowanego kodu klienta, aby upewnić się, że wygenerowany klient jest zgodny z zasadami zabezpieczeń aplikacji klienckich.</span><span class="sxs-lookup"><span data-stu-id="f6662-139">When generating client code from metadata retrieved from a source that is not trusted, validate the generated client code to ensure that the generated client conforms to your client applications security policies.</span></span> <span data-ttu-id="f6662-140">Aby sprawdzić ustawienia powiązania klienta lub wizualnie zbadać kod generowany przez narzędzia, można użyć zachowania weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="f6662-140">You can use a validating behavior to check settings on your client binding or visually inspect code generated by tools.</span></span> <span data-ttu-id="f6662-141">Aby zapoznać się z przykładem sposobu implementacji klienta sprawdzającego zachowania, zobacz [Walidacja klienta](../samples/client-validation.md).</span><span class="sxs-lookup"><span data-stu-id="f6662-141">For an example of how to implement a client that validates behaviors, see [Client Validation](../samples/client-validation.md).</span></span>  
  
## <a name="protecting-application-configuration-files"></a><span data-ttu-id="f6662-142">Ochrona plików konfiguracji aplikacji</span><span class="sxs-lookup"><span data-stu-id="f6662-142">Protecting Application Configuration Files</span></span>  

 <span data-ttu-id="f6662-143">Plik konfiguracji aplikacji usługi może określać, jak i czy metadane są publikowane.</span><span class="sxs-lookup"><span data-stu-id="f6662-143">A service's application configuration file may control how and if metadata is published.</span></span> <span data-ttu-id="f6662-144">Dobrym pomysłem jest ochronę pliku konfiguracyjnego aplikacji przy użyciu odpowiednich list kontroli dostępu (ACL), aby upewnić się, że osoba atakująca nie może zmodyfikować takich ustawień.</span><span class="sxs-lookup"><span data-stu-id="f6662-144">It is a good idea to protect the application configuration file with appropriate access control lists (ACLs) to ensure an attacker cannot modify such settings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f6662-145">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="f6662-145">See also</span></span>

- [<span data-ttu-id="f6662-146">Instrukcje: bezpieczne punkty końcowe metadanych</span><span class="sxs-lookup"><span data-stu-id="f6662-146">How to: Secure Metadata Endpoints</span></span>](how-to-secure-metadata-endpoints.md)
- [<span data-ttu-id="f6662-147">Bezpieczeństwo</span><span class="sxs-lookup"><span data-stu-id="f6662-147">Security</span></span>](security.md)
