---
title: 'Porady: wyłączanie szyfrowanie podpisów cyfrowych'
ms.date: 03/30/2017
ms.assetid: fd174313-ad81-4dca-898a-016ccaff8187
ms.openlocfilehash: 074a32f6a69f8353568e76c99f4b65aece813f55
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
ms.locfileid: "33491663"
---
# <a name="how-to-disable-encryption-of-digital-signatures"></a><span data-ttu-id="6b308-102">Porady: wyłączanie szyfrowanie podpisów cyfrowych</span><span class="sxs-lookup"><span data-stu-id="6b308-102">How to: Disable Encryption of Digital Signatures</span></span>
<span data-ttu-id="6b308-103">Domyślnie komunikat jest podpisany i podpisu cyfrowego jest zaszyfrowany.</span><span class="sxs-lookup"><span data-stu-id="6b308-103">By default, a message is signed and the signature is digitally encrypted.</span></span> <span data-ttu-id="6b308-104">Jest to kontrolowane przez utworzenie niestandardowego powiązania z wystąpieniem <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> lub <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> i ustawienie `MessageProtectionOrder` właściwości każdej klasy do <xref:System.ServiceModel.Security.MessageProtectionOrder> wartości wyliczenia.</span><span class="sxs-lookup"><span data-stu-id="6b308-104">This is controlled by creating a custom binding with an instance of the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> and setting the `MessageProtectionOrder` property of either class to a <xref:System.ServiceModel.Security.MessageProtectionOrder> enumeration value.</span></span> <span data-ttu-id="6b308-105">Wartość domyślna to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="6b308-105">The default is <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="6b308-106">Ten proces wykorzystuje do 30% więcej czasu niż po prostu podpisywanie i szyfrowanie oparte na całkowity rozmiar wiadomości (mniejszych wiadomości, tym większy wpływ na wydajność).</span><span class="sxs-lookup"><span data-stu-id="6b308-106">This process consumes up to 30 percent more time than simply signing and encrypting based on the overall message size (the smaller the message, the greater the performance impact).</span></span> <span data-ttu-id="6b308-107">Wyłączenie szyfrowania podpisu, jednak osoba atakująca może mieć odgadnąć treści komunikatu.</span><span class="sxs-lookup"><span data-stu-id="6b308-107">Disabling encryption of the signature, however, might allow an attacker to guess the content of the message.</span></span> <span data-ttu-id="6b308-108">Jest to możliwe, ponieważ wartość skrótu zwykły tekst każdej części podpisanych wiadomości zawiera element podpisu.</span><span class="sxs-lookup"><span data-stu-id="6b308-108">This is possible because the signature element contains the hash code of the plain text of every signed part in the message.</span></span> <span data-ttu-id="6b308-109">Na przykład chociaż treść komunikatu jest domyślnie szyfrowane, niezaszyfrowane podpis zawiera skrótu przed szyfrowania treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="6b308-109">For example, although the message body is encrypted by default, the unencrypted signature contains the hash code of the message body before the encryption.</span></span> <span data-ttu-id="6b308-110">Jeśli zestaw możliwych wartości dla części podpisane i zaszyfrowane jest mały, osoba atakująca może mieć możliwość wywnioskować zawartość, sprawdzając wartość skrótu.</span><span class="sxs-lookup"><span data-stu-id="6b308-110">If the set of possible values for the signed and encrypted part is small, an attacker might be able to deduce the contents by looking at the hash value.</span></span> <span data-ttu-id="6b308-111">Szyfrowanie podpis zmniejsza zagrożenie tego ataku.</span><span class="sxs-lookup"><span data-stu-id="6b308-111">Encrypting the signature mitigates this attack vector.</span></span>  
  
 <span data-ttu-id="6b308-112">Dlatego należy wyłączyć szyfrowanie podpisu, tylko wtedy, gdy wartość zawartość jest niska lub zestaw możliwych wartości zawartości jest duża i niedeterministyczne i bardziej wydajne ma większe znaczenie niż zmniejszenia ataku opisane powyżej.</span><span class="sxs-lookup"><span data-stu-id="6b308-112">Therefore, disable encryption of the signature only when the value of the content is low or the set of possible content values is large and nondeterministic, and the performance gain is more important than mitigating the attack described above.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="6b308-113">Jeśli nie ma w wiadomości, która jest zaszyfrowany, element podpisu nie jest zaszyfrowany, nawet wtedy, gdy <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> właściwość jest ustawiona na <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span><span class="sxs-lookup"><span data-stu-id="6b308-113">If there is nothing in the message that is encrypted, the signature element is not encrypted, even when the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncryptAndEncryptSignature>.</span></span> <span data-ttu-id="6b308-114">Dzieje się tak nawet w przypadku powiązania dostarczane przez system; wszystkie powiązania dostarczane przez system ma porządku ochrony wiadomości ustawioną `SignBeforeEncryptAndEncryptSignature`.</span><span class="sxs-lookup"><span data-stu-id="6b308-114">This behavior occurs even with system-provided bindings; all system-provided bindings have the message protection order set to `SignBeforeEncryptAndEncryptSignature`.</span></span> <span data-ttu-id="6b308-115">Jednak Web Services Description Language (WSDL) WCF generuje będzie nadal zawierać `<sp:EncryptSignature>` potwierdzenia.</span><span class="sxs-lookup"><span data-stu-id="6b308-115">However, the Web Services Description Language (WSDL) WCF generates will still contain the `<sp:EncryptSignature>` assertion.</span></span>  
  
### <a name="to-disable-digital-signing"></a><span data-ttu-id="6b308-116">Aby wyłączyć podpisów cyfrowych</span><span class="sxs-lookup"><span data-stu-id="6b308-116">To disable digital signing</span></span>  
  
1.  <span data-ttu-id="6b308-117">Utwórz <xref:System.ServiceModel.Channels.CustomBinding>.</span><span class="sxs-lookup"><span data-stu-id="6b308-117">Create a <xref:System.ServiceModel.Channels.CustomBinding>.</span></span> <span data-ttu-id="6b308-118">Aby uzyskać więcej informacji, zobacz [porady: Tworzenie niestandardowego powiązania przy użyciu elementu SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span><span class="sxs-lookup"><span data-stu-id="6b308-118">For more information, see [How to: Create a Custom Binding Using the SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md).</span></span>  
  
2.  <span data-ttu-id="6b308-119">Dodaj albo <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> lub <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> do kolekcji powiązania.</span><span class="sxs-lookup"><span data-stu-id="6b308-119">Add either an <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> or a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> to the binding collection.</span></span>  
  
3.  <span data-ttu-id="6b308-120">Ustaw <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> właściwości <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, lub ustaw <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> właściwości <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span><span class="sxs-lookup"><span data-stu-id="6b308-120">Set the <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>, or set the <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement.MessageProtectionOrder%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.Security.MessageProtectionOrder.SignBeforeEncrypt>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="6b308-121">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="6b308-121">See Also</span></span>  
 [<span data-ttu-id="6b308-122">Możliwości zabezpieczeń powiązań niestandardowych</span><span class="sxs-lookup"><span data-stu-id="6b308-122">Security Capabilities with Custom Bindings</span></span>](../../../../docs/framework/wcf/feature-details/security-capabilities-with-custom-bindings.md)
