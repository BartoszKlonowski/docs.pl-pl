---
title: Uwierzytelnianie i tożsamość usług
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- authentication [WCF], specifying the identity of a service
ms.assetid: a4c8f52c-5b30-45c4-a545-63244aba82be
ms.openlocfilehash: 21184098f90be3b64cfccd5ab98a1824cee50e48
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
---
# <a name="service-identity-and-authentication"></a><span data-ttu-id="3a076-102">Uwierzytelnianie i tożsamość usług</span><span class="sxs-lookup"><span data-stu-id="3a076-102">Service Identity and Authentication</span></span>
<span data-ttu-id="3a076-103">Usługa *tożsamość punktu końcowego*jest wartość wygenerowaną przez usługę sieci Web Services Description Language (WSDL).</span><span class="sxs-lookup"><span data-stu-id="3a076-103">A service's *endpoint identity*is a value generated from the service Web Services Description Language (WSDL).</span></span> <span data-ttu-id="3a076-104">Ta wartość propagowane do dowolnego klienta jest używany do uwierzytelniania usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-104">This value, propagated to any client, is used to authenticate the service.</span></span> <span data-ttu-id="3a076-105">Po inicjowania przez klienta komunikatu do punktu końcowego i usługa samodzielnie przeprowadza uwierzytelnianie klienta, klient porównuje wartości tożsamości punktu końcowego z wartością rzeczywistą zwrócił procesu uwierzytelniania punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="3a076-105">After the client initiates a communication to an endpoint and the service authenticates itself to the client, the client compares the endpoint identity value with the actual value the endpoint authentication process returned.</span></span> <span data-ttu-id="3a076-106">Jeśli są zgodne, klient jest pewność, że ma nawiązać kontaktu z punktem końcowym usługi oczekiwanego.</span><span class="sxs-lookup"><span data-stu-id="3a076-106">If they match, the client is assured it has contacted the expected service endpoint.</span></span> <span data-ttu-id="3a076-107">Funkcja ta działa jako ochrony przed *phishing* zapobiegając nastąpi przekierowanie do punktu końcowego hostowanej przez usługę złośliwego klienta.</span><span class="sxs-lookup"><span data-stu-id="3a076-107">This functions as a protection against *phishing* by preventing a client from being redirected to an endpoint hosted by a malicious service.</span></span>  
  
 <span data-ttu-id="3a076-108">Przykładową aplikację prezentującą ustawienie tożsamości, zobacz [tożsamość usług — przykład](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-108">For a sample application that demonstrates identity setting, see [Service Identity Sample](../../../../docs/framework/wcf/samples/service-identity-sample.md).</span></span> <span data-ttu-id="3a076-109">Aby uzyskać więcej informacji na temat punktów końcowych i adresy punktów końcowych, zobacz [adresy](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-109">For more information about endpoints and endpoint addresses, see [Addresses](../../../../docs/framework/wcf/feature-details/endpoint-addresses.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3a076-110">Jeśli LanMan NT (NTLM) używany do uwierzytelniania, tożsamość usługi nie jest zaznaczone, ponieważ w obszarze NTLM, klient jest w stanie uwierzytelniania serwera.</span><span class="sxs-lookup"><span data-stu-id="3a076-110">When you use NT LanMan (NTLM) for authentication, the service identity is not checked because, under NTLM, the client is unable to authenticate the server.</span></span> <span data-ttu-id="3a076-111">Uwierzytelnianie NTLM jest używany, gdy komputery są częścią grupy roboczej systemu Windows lub zainstalowana starsza wersja systemu Windows, która nie obsługuje uwierzytelniania Kerberos.</span><span class="sxs-lookup"><span data-stu-id="3a076-111">NTLM is used when computers are part of a Windows workgroup, or when running an older version of Windows that does not support Kerberos authentication.</span></span>  
  
 <span data-ttu-id="3a076-112">Gdy klient inicjuje bezpiecznego kanału do wysyłania komunikatu do usługi nad nim, infrastruktury usług Windows Communication Foundation (WCF) uwierzytelnia usługi i wysyła wiadomość tylko, jeśli tożsamość określona w punkcie końcowym pasuje do tożsamości usługi adres klienta używa.</span><span class="sxs-lookup"><span data-stu-id="3a076-112">When the client initiates a secure channel to send a message to a service over it, the Windows Communication Foundation (WCF) infrastructure authenticates the service, and only sends the message if the service identity matches the identity specified in the endpoint address the client uses.</span></span>  
  
 <span data-ttu-id="3a076-113">Tożsamość przetwarzania składa się z następujących etapów:</span><span class="sxs-lookup"><span data-stu-id="3a076-113">Identity processing consists of the following stages:</span></span>  
  
-   <span data-ttu-id="3a076-114">W czasie projektowania deweloperowi klienta określa tożsamość usługi z punktu końcowego metadanych (za pośrednictwem WSDL).</span><span class="sxs-lookup"><span data-stu-id="3a076-114">At design time, the client developer determines the service's identity from the endpoint's metadata (exposed through WSDL).</span></span>  
  
-   <span data-ttu-id="3a076-115">W czasie wykonywania aplikacja klienta sprawdza oświadczenia poświadczenia zabezpieczeń przed wysłaniem komunikaty do usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-115">At runtime, the client application checks the claims of the service's security credentials before sending any messages to the service.</span></span>  
  
 <span data-ttu-id="3a076-116">Tożsamość przetwarzania na kliencie jest analogiczna do uwierzytelniania klientów w usłudze.</span><span class="sxs-lookup"><span data-stu-id="3a076-116">Identity processing on the client is analogous to client authentication on the service.</span></span> <span data-ttu-id="3a076-117">Usługa bezpiecznego nie wykonuje kodu, dopóki nie zostały uwierzytelnione poświadczenia klienta.</span><span class="sxs-lookup"><span data-stu-id="3a076-117">A secure service does not execute code until the client's credentials have been authenticated.</span></span> <span data-ttu-id="3a076-118">Podobnie klient nie wysyła komunikaty do usługi, dopóki poświadczenia zostały uwierzytelnione oparte na wcześniej określane z metadanych usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-118">Likewise, the client does not send messages to the service until the service's credentials have been authenticated based on what is known in advance from the service's metadata.</span></span>  
  
 <span data-ttu-id="3a076-119"><xref:System.ServiceModel.EndpointAddress.Identity%2A> Właściwość <xref:System.ServiceModel.EndpointAddress> klasa reprezentuje tożsamość usługi o nazwie przez klienta.</span><span class="sxs-lookup"><span data-stu-id="3a076-119">The <xref:System.ServiceModel.EndpointAddress.Identity%2A> property of the <xref:System.ServiceModel.EndpointAddress> class represents the identity of the service called by the client.</span></span> <span data-ttu-id="3a076-120">Opis usługi <xref:System.ServiceModel.EndpointAddress.Identity%2A> w metadanych.</span><span class="sxs-lookup"><span data-stu-id="3a076-120">The service publishes the <xref:System.ServiceModel.EndpointAddress.Identity%2A> in its metadata.</span></span> <span data-ttu-id="3a076-121">Jeśli jest uruchomiony deweloperowi klienta [narzędzie narzędzia metadanych elementu ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) względem punktu końcowego usługi wygenerowanego konfiguracji zawiera wartość usługi <xref:System.ServiceModel.EndpointAddress.Identity%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="3a076-121">When the client developer runs the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against the service endpoint, the generated configuration contains the value of the service's <xref:System.ServiceModel.EndpointAddress.Identity%2A> property.</span></span> <span data-ttu-id="3a076-122">Infrastruktura WCF (jeśli jest skonfigurowane z zabezpieczeniami) sprawdza, czy usługa posiada określono tożsamości.</span><span class="sxs-lookup"><span data-stu-id="3a076-122">The WCF infrastructure (if configured with security) verifies that the service possesses the identity specified.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="3a076-123">Metadane zawiera oczekiwaną tożsamość usługi, w związku z czym zaleca się uwidaczniać metadane usługi w sposób bezpieczny, na przykład, tworząc punkt końcowy HTTPS dla usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-123">The metadata contains the expected identity of the service, so it is recommended that you expose the service metadata through secure means, for example, by creating an HTTPS endpoint for the service.</span></span> <span data-ttu-id="3a076-124">Aby uzyskać więcej informacji, zobacz [porady: Zabezpieczanie punktów końcowych metadanych](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-124">For more information, see [How to: Secure Metadata Endpoints](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span></span>  
  
## <a name="identity-types"></a><span data-ttu-id="3a076-125">Typów tożsamości</span><span class="sxs-lookup"><span data-stu-id="3a076-125">Identity Types</span></span>  
 <span data-ttu-id="3a076-126">Usługa może zapewnić sześć typów tożsamości.</span><span class="sxs-lookup"><span data-stu-id="3a076-126">A service can provide six types of identities.</span></span> <span data-ttu-id="3a076-127">Każdy typ tożsamości odnosi się do elementu, który może zostać umieszczony w `<identity>` element w konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="3a076-127">Each identity type corresponds to an element that can be contained inside the `<identity>` element in configuration.</span></span> <span data-ttu-id="3a076-128">Typ użyty, zależy od scenariusza i wymagań dotyczących zabezpieczeń usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-128">The type used depends on the scenario and the service's security requirements.</span></span> <span data-ttu-id="3a076-129">W poniższej tabeli opisano każdy typ tożsamości.</span><span class="sxs-lookup"><span data-stu-id="3a076-129">The following table describes each identity type.</span></span>  
  
|<span data-ttu-id="3a076-130">Typ tożsamości</span><span class="sxs-lookup"><span data-stu-id="3a076-130">Identity type</span></span>|<span data-ttu-id="3a076-131">Opis</span><span class="sxs-lookup"><span data-stu-id="3a076-131">Description</span></span>|<span data-ttu-id="3a076-132">Typowy scenariusz</span><span class="sxs-lookup"><span data-stu-id="3a076-132">Typical scenario</span></span>|  
|-------------------|-----------------|----------------------|  
|<span data-ttu-id="3a076-133">System nazw domen (DNS)</span><span class="sxs-lookup"><span data-stu-id="3a076-133">Domain Name System (DNS)</span></span>|<span data-ttu-id="3a076-134">Użyj tego elementu z certyfikatami X.509 lub konta systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="3a076-134">Use this element with X.509 certificates or Windows accounts.</span></span> <span data-ttu-id="3a076-135">Porównuje nazwa DNS określona w poświadczeniu z wartością określoną w tym elemencie.</span><span class="sxs-lookup"><span data-stu-id="3a076-135">It compares the DNS name specified in the credential with the value specified in this element.</span></span>|<span data-ttu-id="3a076-136">Sprawdź DNS umożliwia korzystanie z certyfikatów w usłudze DNS lub nazwy podmiotu.</span><span class="sxs-lookup"><span data-stu-id="3a076-136">A DNS check enables you to use certificates with DNS or subject names.</span></span> <span data-ttu-id="3a076-137">Jeśli certyfikat jest utworzony ponownie z tym samym DNS lub nazwy podmiotu, sprawdzić tożsamości jest nadal ważny.</span><span class="sxs-lookup"><span data-stu-id="3a076-137">If a certificate is reissued with the same DNS or subject name, then the identity check is still valid.</span></span> <span data-ttu-id="3a076-138">Gdy certyfikat jest ponownie, pobiera nowego klucza RSA, ale zachowuje tego samego DNS lub nazwy podmiotu.</span><span class="sxs-lookup"><span data-stu-id="3a076-138">When a certificate is reissued, it gets a new RSA key but retains the same DNS or subject name.</span></span> <span data-ttu-id="3a076-139">Oznacza to, że klienci nie muszą zaktualizować swoje informacje o tożsamości o usłudze.</span><span class="sxs-lookup"><span data-stu-id="3a076-139">This means that clients do not have to update their identity information about the service.</span></span>|  
|<span data-ttu-id="3a076-140">Certyfikat.</span><span class="sxs-lookup"><span data-stu-id="3a076-140">Certificate.</span></span> <span data-ttu-id="3a076-141">Domyślnie gdy `ClientCredentialType` ma wartość Certificate.</span><span class="sxs-lookup"><span data-stu-id="3a076-141">The default when `ClientCredentialType` is set to Certificate.</span></span>|<span data-ttu-id="3a076-142">Ten element Określa certyfikat X.509 z kodowaniem Base64 wartość do porównania z klienta.</span><span class="sxs-lookup"><span data-stu-id="3a076-142">This element specifies a Base64-encoded X.509 certificate value to compare with the client.</span></span><br /><br /> <span data-ttu-id="3a076-143">Ten element służy również, korzystając z [!INCLUDE[infocard](../../../../includes/infocard-md.md)] jako poświadczeń do uwierzytelniania usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-143">Also use this element when using a [!INCLUDE[infocard](../../../../includes/infocard-md.md)] as a credential to authenticate the service.</span></span>|<span data-ttu-id="3a076-144">Ten element ogranicza uwierzytelniania jeden certyfikat na podstawie jego wartości odcisku palca.</span><span class="sxs-lookup"><span data-stu-id="3a076-144">This element restricts authentication to a single certificate based upon its thumbprint value.</span></span> <span data-ttu-id="3a076-145">Umożliwia użycie uwierzytelniania bardziej restrykcyjne, ponieważ wartości odcisku palca są unikatowe.</span><span class="sxs-lookup"><span data-stu-id="3a076-145">This enables stricter authentication because thumbprint values are unique.</span></span> <span data-ttu-id="3a076-146">To jest dostarczany z jedno zastrzeżenie:: Jeśli certyfikat jest utworzony ponownie z taką samą nazwę podmiotu, ma także nowy odcisk palca.</span><span class="sxs-lookup"><span data-stu-id="3a076-146">This comes with one caveat: If the certificate is reissued with the same Subject name, it also has a new Thumbprint.</span></span> <span data-ttu-id="3a076-147">W związku z tym klienci nie będą mogli zweryfikować usługę, chyba że jest on znany nowy odcisk palca.</span><span class="sxs-lookup"><span data-stu-id="3a076-147">Therefore, clients are not able to validate the service unless the new thumbprint is known.</span></span> <span data-ttu-id="3a076-148">Aby uzyskać więcej informacji na temat znajdowania odcisk palca certyfikatu, zobacz [porady: Pobieranie odcisku palca certyfikatu](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-148">For more information about finding a certificate's thumbprint, see [How to: Retrieve the Thumbprint of a Certificate](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md).</span></span>|  
|<span data-ttu-id="3a076-149">Odwołanie do certyfikatu</span><span class="sxs-lookup"><span data-stu-id="3a076-149">Certificate Reference</span></span>|<span data-ttu-id="3a076-150">Taki sam jak opcja certyfikat opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="3a076-150">Identical to the Certificate option described previously.</span></span> <span data-ttu-id="3a076-151">Jednak ten element umożliwia Określ nazwę certyfikatu i przechowywać lokalizację, z której można pobrać certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="3a076-151">However, this element enables you to specify a certificate name and store location from which to retrieve the certificate.</span></span>|<span data-ttu-id="3a076-152">Taka sama jak w scenariuszu certyfikatu opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="3a076-152">Same as the Certificate scenario described previously.</span></span><br /><br /> <span data-ttu-id="3a076-153">Korzyścią jest to, że można zmienić lokalizacji magazynu certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="3a076-153">The benefit is that the certificate store location can change.</span></span>|  
|<span data-ttu-id="3a076-154">RSA</span><span class="sxs-lookup"><span data-stu-id="3a076-154">RSA</span></span>|<span data-ttu-id="3a076-155">Ten element określa wartość klucza RSA do porównania z klienta.</span><span class="sxs-lookup"><span data-stu-id="3a076-155">This element specifies an RSA key value to compare with the client.</span></span> <span data-ttu-id="3a076-156">Przypomina to opcja certyfikat, ale zamiast przy użyciu odcisku palca certyfikatu, klucza RSA certyfikatu zamiast niego jest używana.</span><span class="sxs-lookup"><span data-stu-id="3a076-156">This is similar to the certificate option but rather than using the certificate's thumbprint, the certificate's RSA key is used instead.</span></span>|<span data-ttu-id="3a076-157">Sprawdź RSA umożliwia w szczególności ograniczyć uwierzytelnianie oparte na jego klucza RSA jeden certyfikat.</span><span class="sxs-lookup"><span data-stu-id="3a076-157">An RSA check enables you to specifically restrict authentication to a single certificate based upon its RSA key.</span></span> <span data-ttu-id="3a076-158">Umożliwia to bardziej restrykcyjne uwierzytelnianie przy użyciu określonego klucza RSA kosztem usługi, która nie działa z istniejących klientów, jeśli zmieni się wartość klucza RSA.</span><span class="sxs-lookup"><span data-stu-id="3a076-158">This enables stricter authentication of a specific RSA key at the expense of the service, which no longer works with existing clients if the RSA key value changes.</span></span>|  
|<span data-ttu-id="3a076-159">Główna nazwa użytkownika (UPN).</span><span class="sxs-lookup"><span data-stu-id="3a076-159">User principal name (UPN).</span></span> <span data-ttu-id="3a076-160">Domyślnie gdy `ClientCredentialType` jest ustawiony do systemu Windows i usługi procesu nie działa w ramach jednego z konta system.</span><span class="sxs-lookup"><span data-stu-id="3a076-160">The default when the `ClientCredentialType` is set to Windows and the service process is not running under one of the system accounts.</span></span>|<span data-ttu-id="3a076-161">Ten element Określa nazwę UPN, która jest uruchomiona w obszarze.</span><span class="sxs-lookup"><span data-stu-id="3a076-161">This element specifies the UPN that the service is running under.</span></span> <span data-ttu-id="3a076-162">Zobacz sekcję protokołu Kerberos i tożsamość [przesłanianie tożsamości usługi na potrzeby uwierzytelniania](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-162">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="3a076-163">Dzięki temu, że usługa jest uruchomiona przy użyciu określonego konta użytkownika systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="3a076-163">This ensures that the service is running under a specific Windows user account.</span></span> <span data-ttu-id="3a076-164">Konto użytkownika może być bieżącego zalogowanego użytkownika lub usługę do uruchamiania konta określonego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="3a076-164">The user account can be either the current logged-on user or the service running under a particular user account.</span></span><br /><br /> <span data-ttu-id="3a076-165">To ustawienie korzysta z zabezpieczeń systemu Windows, jeśli usługa jest uruchomiona w ramach konta domeny w środowisku usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3a076-165">This setting takes advantage of Windows Kerberos security if the service is running under a domain account within an Active Directory environment.</span></span>|  
|<span data-ttu-id="3a076-166">Główna nazwa usługi (SPN).</span><span class="sxs-lookup"><span data-stu-id="3a076-166">Service principal name (SPN).</span></span> <span data-ttu-id="3a076-167">Domyślnie gdy `ClientCredentialType` jest ustawiony do systemu Windows i usługi jest uruchomiony proces jedno z kont systemu — Usługa lokalna, LocalSystem lub NetworkService.</span><span class="sxs-lookup"><span data-stu-id="3a076-167">The default when the `ClientCredentialType` is set to Windows and the service process is running under one of the system accounts—LocalService, LocalSystem, or NetworkService.</span></span>|<span data-ttu-id="3a076-168">Ten element określa główną nazwę usługi skojarzone z kontem usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-168">This element specifies the SPN associated with the service's account.</span></span> <span data-ttu-id="3a076-169">Zobacz sekcję protokołu Kerberos i tożsamość [przesłanianie tożsamości usługi na potrzeby uwierzytelniania](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-169">See the Kerberos Protocol and Identity section of [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>|<span data-ttu-id="3a076-170">Dzięki temu, że nazwa SPN i określonego konta systemu Windows, skojarzone z główną nazwę usługi identyfikowania usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-170">This ensures that the SPN and the specific Windows account associated with the SPN identify the service.</span></span><br /><br /> <span data-ttu-id="3a076-171">Narzędzie Setspn.exe skojarzyć konto komputera dla konta użytkownika usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-171">You can use the Setspn.exe tool to associate a machine account for the service's user account.</span></span><br /><br /> <span data-ttu-id="3a076-172">To ustawienie korzysta z protokołu Kerberos systemu Windows, zabezpieczenia, jeśli usługa jest uruchomiona, zgodnie z jednym z kont systemowych lub przy użyciu konta domeny, które ma nazwę SPN skojarzone z go i komputer jest członkiem domeny w środowisku usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3a076-172">This setting takes advantage of Windows Kerberos security if the service is running under one of the system accounts or under a domain account that has an associated SPN name with it and the computer is a member of a domain within an Active Directory environment.</span></span>|  
  
## <a name="specifying-identity-at-the-service"></a><span data-ttu-id="3a076-173">Określanie tożsamości w usłudze</span><span class="sxs-lookup"><span data-stu-id="3a076-173">Specifying Identity at the Service</span></span>  
 <span data-ttu-id="3a076-174">Zazwyczaj nie trzeba ustawić tożsamość w usłudze, ponieważ typ tożsamości w metadanych usługi nakazują wybór typu poświadczeń klienta.</span><span class="sxs-lookup"><span data-stu-id="3a076-174">Typically, you do not have to set the identity on a service because the selection of a client credential type dictates the type of identity exposed in the service metadata.</span></span> <span data-ttu-id="3a076-175">Aby uzyskać więcej informacji o sposobie zastąpić, lub określ tożsamość usługi, zobacz [przesłanianie tożsamości usługi na potrzeby uwierzytelniania](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-175">For more information about how to override or specify service identity, see [Overriding the Identity of a Service for Authentication](../../../../docs/framework/wcf/extending/overriding-the-identity-of-a-service-for-authentication.md).</span></span>  
  
## <a name="using-the-identity-element-in-configuration"></a><span data-ttu-id="3a076-176">Przy użyciu \<tożsamości > Element w konfiguracji</span><span class="sxs-lookup"><span data-stu-id="3a076-176">Using the \<identity> Element in Configuration</span></span>  
 <span data-ttu-id="3a076-177">Jeśli zmienisz typ poświadczeń klienta w powiązaniu wcześniej wyświetlany `Certificate,` wygenerowanego WSDL zawiera seryjnych Base64 certyfikatu X.509 do wartości tożsamości, jak pokazano w poniższym kodzie.</span><span class="sxs-lookup"><span data-stu-id="3a076-177">If you change the client credential type in the binding previously shown to `Certificate,` then the generated WSDL contains a Base64 serialized X.509 certificate for the identity value as shown in the following code.</span></span> <span data-ttu-id="3a076-178">Jest to wartość domyślna dla wszystkich typów poświadczeń klienta innych niż Windows.</span><span class="sxs-lookup"><span data-stu-id="3a076-178">This is the default for all client credential types other than Windows.</span></span>  
  
  
  
 <span data-ttu-id="3a076-179">Możesz zmienić wartość domyślną tożsamość usługi lub zmień typ tożsamości za pomocą `<identity>` element w konfiguracji lub ustawiając tożsamość w kodzie.</span><span class="sxs-lookup"><span data-stu-id="3a076-179">You can change the value of the default service identity or change the type of the identity by using the `<identity>` element in configuration or by setting the identity in code.</span></span> <span data-ttu-id="3a076-180">Poniższy kod konfiguracji ustawia tożsamość systemu (nazw domen DNS) nazwy domeny, z wartością `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="3a076-180">The following configuration code sets a domain name system (DNS) identity with the value `contoso.com`.</span></span>  
  
  
  
## <a name="setting-identity-programmatically"></a><span data-ttu-id="3a076-181">Ustawienie programowo tożsamości</span><span class="sxs-lookup"><span data-stu-id="3a076-181">Setting Identity Programmatically</span></span>  
 <span data-ttu-id="3a076-182">Usługi nie trzeba jawnie określić tożsamości, ponieważ automatycznie określa WCF.</span><span class="sxs-lookup"><span data-stu-id="3a076-182">Your service does not have to explicitly specify an identity, because WCF automatically determines it.</span></span> <span data-ttu-id="3a076-183">Jednak WCF można określić tożsamości dla punktu końcowego, jeśli jest to wymagane.</span><span class="sxs-lookup"><span data-stu-id="3a076-183">However, WCF allows you to specify an identity on an endpoint, if required.</span></span> <span data-ttu-id="3a076-184">Poniższy kod dodaje nowy punkt końcowy usługi o określonej tożsamości DNS.</span><span class="sxs-lookup"><span data-stu-id="3a076-184">The following code adds a new service endpoint with a specific DNS identity.</span></span>  
  
 [!code-csharp[C_Identity#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#5)]
 [!code-vb[C_Identity#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#5)]  
  
## <a name="specifying-identity-at-the-client"></a><span data-ttu-id="3a076-185">Określanie tożsamości po stronie klienta</span><span class="sxs-lookup"><span data-stu-id="3a076-185">Specifying Identity at the Client</span></span>  
 <span data-ttu-id="3a076-186">W czasie projektowania, zwykle wykorzystuje deweloperowi klienta [narzędzie narzędzia metadanych elementu ServiceModel (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) do wygenerowania konfiguracji klienta.</span><span class="sxs-lookup"><span data-stu-id="3a076-186">At design time, a client developer typically uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to generate client configuration.</span></span> <span data-ttu-id="3a076-187">Wygenerowano plik konfiguracyjny (przeznaczone do użytku przez klienta) zawiera tożsamości serwera.</span><span class="sxs-lookup"><span data-stu-id="3a076-187">The generated configuration file (intended for use by the client) contains the server's identity.</span></span> <span data-ttu-id="3a076-188">Na przykład następujący kod jest generowany z usługą, która określa tożsamość DNS, jak pokazano w poprzednim przykładzie.</span><span class="sxs-lookup"><span data-stu-id="3a076-188">For example, the following code is generated from a service that specifies a DNS identity, as shown in the preceding example.</span></span> <span data-ttu-id="3a076-189">Należy pamiętać, że wartość tożsamości punktu końcowego klienta jest zgodny ze usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-189">Note that the client's endpoint identity value matches that of the service.</span></span> <span data-ttu-id="3a076-190">W takim przypadku, gdy klient odbierze poświadczeń systemu Windows (Kerberos) dla usługi, oczekuje, że wartość na `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="3a076-190">In this case, when the client receives the Windows (Kerberos) credentials for the service, it expects the value to be `contoso.com`.</span></span>  
  
  
  
 <span data-ttu-id="3a076-191">Jeśli, zamiast systemu Windows, usługi Określa certyfikat jako typu poświadczeń klienta, a następnie DNS we właściwości certyfikatu powinien być wartością `contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="3a076-191">If, instead of Windows, the service specifies a certificate as the client credential type, then the certificate's DNS property is expected to be the value `contoso.com`.</span></span> <span data-ttu-id="3a076-192">(Lub jeśli właściwość DNS jest `null`, nazwa podmiotu certyfikatu musi być `contoso.com`.)</span><span class="sxs-lookup"><span data-stu-id="3a076-192">(Or if the DNS property is `null`, the certificate's subject name must be `contoso.com`.)</span></span>  
  
#### <a name="using-a-specific-value-for-identity"></a><span data-ttu-id="3a076-193">Przy użyciu określonej wartości tożsamości</span><span class="sxs-lookup"><span data-stu-id="3a076-193">Using a Specific Value for Identity</span></span>  
 <span data-ttu-id="3a076-194">Następujący plik konfiguracji klienta pokazuje, jak powinna być określona wartość tożsamości usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-194">The following client configuration file shows how the service's identity is expected to be a specific value.</span></span> <span data-ttu-id="3a076-195">W poniższym przykładzie klient może komunikować się z dwoma punktami końcowymi.</span><span class="sxs-lookup"><span data-stu-id="3a076-195">In the following example, the client can communicate with two endpoints.</span></span> <span data-ttu-id="3a076-196">Pierwszy jest odcisk palca certyfikatu i drugiej identyfikowane za pomocą klucza RSA certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="3a076-196">The first is identified with a certificate thumbprint and the second with a certificate RSA key.</span></span> <span data-ttu-id="3a076-197">Oznacza to, że certyfikat, który zawiera tylko publiczny klucz/prywatnej parę kluczy, ale nie jest wystawiony przez zaufany urząd.</span><span class="sxs-lookup"><span data-stu-id="3a076-197">That is, a certificate that contains only a public key/private key pair, but is not issued by a trusted authority.</span></span>  
  
  
  
## <a name="identity-checking-at-run-time"></a><span data-ttu-id="3a076-198">Tożsamość sprawdzenie w czasie wykonywania</span><span class="sxs-lookup"><span data-stu-id="3a076-198">Identity Checking at Run Time</span></span>  
 <span data-ttu-id="3a076-199">W czasie projektowania deweloperowi klienta określa tożsamość serwera za pomocą jego metadanych.</span><span class="sxs-lookup"><span data-stu-id="3a076-199">At design time, a client developer determines the server's identity through its metadata.</span></span> <span data-ttu-id="3a076-200">W czasie wykonywania sprawdzić tożsamości jest wykonywane przed wywołaniem żadnych punktów końcowych w usłudze.</span><span class="sxs-lookup"><span data-stu-id="3a076-200">At runtime, the identity check is performed before calling any endpoints on the service.</span></span>  
  
 <span data-ttu-id="3a076-201">Wartość tożsamości jest powiązany typ uwierzytelniania, określony przez metadane; innymi słowy typ poświadczenia używane przez usługę.</span><span class="sxs-lookup"><span data-stu-id="3a076-201">The identity value is tied to the type of authentication specified by metadata; in other words, the type of credentials used for the service.</span></span>  
  
 <span data-ttu-id="3a076-202">Jeśli kanał jest skonfigurowany do uwierzytelniania za pomocą wiadomości lub poziomu transportu Secure Sockets Layer (SSL) za pomocą certyfikatów X.509 do uwierzytelniania, obowiązują następujące wartości tożsamości:</span><span class="sxs-lookup"><span data-stu-id="3a076-202">If the channel is configured to authenticate using message- or transport-level Secure Sockets Layer (SSL) with X.509 certificates for authentication, the following identity values are valid:</span></span>  
  
-   <span data-ttu-id="3a076-203">DNS.</span><span class="sxs-lookup"><span data-stu-id="3a076-203">DNS.</span></span> <span data-ttu-id="3a076-204">Usługi WCF gwarantuje, że certyfikat podczas uzgadniania protokołu SSL zawiera DNS lub `CommonName` atrybutu (CN) wartość określona w tożsamości DNS na kliencie.</span><span class="sxs-lookup"><span data-stu-id="3a076-204">WCF ensures that the certificate provided during the SSL handshake contains a DNS or `CommonName` (CN) attribute equal to the value specified in the DNS identity on the client.</span></span> <span data-ttu-id="3a076-205">Należy pamiętać, że te testy są wykonywane dodatkowo do określania okres ważności certyfikatu serwera.</span><span class="sxs-lookup"><span data-stu-id="3a076-205">Note that these checks are done in addition to determining the validity of the server certificate.</span></span> <span data-ttu-id="3a076-206">Domyślnie program WCF sprawdza, czy certyfikat serwera jest wystawiony przez zaufany główny urząd.</span><span class="sxs-lookup"><span data-stu-id="3a076-206">By default, WCF validates that the server certificate is issued by a trusted root authority.</span></span>  
  
-   <span data-ttu-id="3a076-207">Certyfikat.</span><span class="sxs-lookup"><span data-stu-id="3a076-207">Certificate.</span></span> <span data-ttu-id="3a076-208">Podczas uzgadniania protokołu SSL WCF gwarantuje, że zdalny punkt końcowy zapewnia dokładną certyfikatu wybrana w tożsamości.</span><span class="sxs-lookup"><span data-stu-id="3a076-208">During the SSL handshake, WCF ensures that the remote endpoint provides the exact certificate value specified in the identity.</span></span>  
  
-   <span data-ttu-id="3a076-209">Odwołanie do certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="3a076-209">Certificate Reference.</span></span> <span data-ttu-id="3a076-210">Wartość taka sama jak w przypadku certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="3a076-210">Same as Certificate.</span></span>  
  
-   <span data-ttu-id="3a076-211">RSA.</span><span class="sxs-lookup"><span data-stu-id="3a076-211">RSA.</span></span> <span data-ttu-id="3a076-212">Podczas uzgadniania protokołu SSL WCF gwarantuje, że zdalny punkt końcowy zapewnia dokładną klucza RSA, określona w tożsamości.</span><span class="sxs-lookup"><span data-stu-id="3a076-212">During the SSL handshake, WCF ensures that the remote endpoint provides the exact RSA key specified in the identity.</span></span>  
  
 <span data-ttu-id="3a076-213">Jeśli usługa jest uwierzytelniany przy użyciu poziomu transportu lub komunikat protokołu SSL z poświadczeniami systemu Windows do uwierzytelniania i negocjuje poświadczeń, obowiązują następujące wartości tożsamości:</span><span class="sxs-lookup"><span data-stu-id="3a076-213">If the service authenticates using message- or transport-level SSL with a Windows credential for authentication, and negotiates the credential, the following identity values are valid:</span></span>  
  
-   <span data-ttu-id="3a076-214">DNS.</span><span class="sxs-lookup"><span data-stu-id="3a076-214">DNS.</span></span> <span data-ttu-id="3a076-215">Negocjacji przekazuje usługi SPN, dzięki czemu można sprawdzić nazwę DNS.</span><span class="sxs-lookup"><span data-stu-id="3a076-215">The negotiation passes the service's SPN so that the DNS name can be checked.</span></span> <span data-ttu-id="3a076-216">Nazwa SPN jest w formie `host/<dns name>`.</span><span class="sxs-lookup"><span data-stu-id="3a076-216">The SPN is in the form `host/<dns name>`.</span></span>  
  
-   <span data-ttu-id="3a076-217">SPN.</span><span class="sxs-lookup"><span data-stu-id="3a076-217">SPN.</span></span> <span data-ttu-id="3a076-218">Jawne usługi SPN jest zwracany, na przykład `host/myservice`.</span><span class="sxs-lookup"><span data-stu-id="3a076-218">An explicit service SPN is returned, for example, `host/myservice`.</span></span>  
  
-   <span data-ttu-id="3a076-219">UPN.</span><span class="sxs-lookup"><span data-stu-id="3a076-219">UPN.</span></span> <span data-ttu-id="3a076-220">Nazwa UPN konta usługi.</span><span class="sxs-lookup"><span data-stu-id="3a076-220">The UPN of the service account.</span></span> <span data-ttu-id="3a076-221">Nazwa UPN jest w formie `username` @ `domain`.</span><span class="sxs-lookup"><span data-stu-id="3a076-221">The UPN is in the form `username`@`domain`.</span></span> <span data-ttu-id="3a076-222">Na przykład, gdy usługa jest uruchomiona na koncie użytkownika, może być `username@contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="3a076-222">For example, when the service is running in a user account, it may be `username@contoso.com`.</span></span>  
  
 <span data-ttu-id="3a076-223">Programowo określanie tożsamości (przy użyciu <xref:System.ServiceModel.EndpointAddress.Identity%2A> właściwości) jest opcjonalna.</span><span class="sxs-lookup"><span data-stu-id="3a076-223">Specifying the identity programmatically (using the <xref:System.ServiceModel.EndpointAddress.Identity%2A> property) is optional.</span></span> <span data-ttu-id="3a076-224">Jeśli tożsamości nie został określony i typu poświadczeń klienta jest systemu Windows, wartością domyślną jest nazwa SPN wartość nazwy hosta część adres punktu końcowego usługi jest poprzedzony prefiksem "host /" literału.</span><span class="sxs-lookup"><span data-stu-id="3a076-224">If no identity is specified, and the client credential type is Windows, the default is SPN with the value set to the hostname part of the service endpoint address prefixed with the "host/" literal.</span></span> <span data-ttu-id="3a076-225">Jeśli tożsamości nie został określony i typu poświadczeń klienta jest certyfikat, wartością domyślną jest `Certificate`.</span><span class="sxs-lookup"><span data-stu-id="3a076-225">If no identity is specified, and the client credential type is a certificate, the default is `Certificate`.</span></span> <span data-ttu-id="3a076-226">Dotyczy to zarówno zabezpieczenia na poziomie komunikatu i transportu.</span><span class="sxs-lookup"><span data-stu-id="3a076-226">This applies to both message- and transport-level security.</span></span>  
  
## <a name="identity-and-custom-bindings"></a><span data-ttu-id="3a076-227">Tożsamość i powiązania niestandardowe</span><span class="sxs-lookup"><span data-stu-id="3a076-227">Identity and Custom Bindings</span></span>  
 <span data-ttu-id="3a076-228">Ponieważ tożsamość usługi zależy od typu powiązania, używany, upewnij się, że odpowiednie tożsamości jest narażony, podczas tworzenia niestandardowego powiązania.</span><span class="sxs-lookup"><span data-stu-id="3a076-228">Because the identity of a service depends on the binding type used, ensure that an appropriate identity is exposed when creating a custom binding.</span></span> <span data-ttu-id="3a076-229">Na przykład w poniższym przykładzie kodu tożsamości widoczne nie jest zgodny z typem zabezpieczeń, ponieważ tożsamość ładowania początkowego powiązania bezpiecznej konwersacji nie pasuje do tożsamości dla powiązania w punkcie końcowym.</span><span class="sxs-lookup"><span data-stu-id="3a076-229">For example, in the following code example, the identity exposed is not compatible with the security type, because the identity for the secure conversation bootstrap binding does not match the identity for the binding on the endpoint.</span></span> <span data-ttu-id="3a076-230">Powiązania bezpiecznej konwersacji ustawia tożsamość DNS, podczas gdy <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> ustawia tożsamość nazwy UPN lub nazwy SPN.</span><span class="sxs-lookup"><span data-stu-id="3a076-230">The secure conversation binding sets the DNS identity, while the <xref:System.ServiceModel.Channels.WindowsStreamSecurityBindingElement> sets the UPN or SPN identity.</span></span>  
  
 [!code-csharp[C_Identity#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_identity/cs/source.cs#8)]
 [!code-vb[C_Identity#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_identity/vb/source.vb#8)]  
  
 <span data-ttu-id="3a076-231">Aby uzyskać więcej informacji o sposobie stack — wiązanie elementów poprawnie dla niestandardowego powiązania, zobacz [powiązania Creating User-Defined](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-231">For more information about how to stack binding elements correctly for a custom binding, see [Creating User-Defined Bindings](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md).</span></span> <span data-ttu-id="3a076-232">Aby uzyskać więcej informacji na temat tworzenia niestandardowego powiązania z <xref:System.ServiceModel.Channels.SecurityBindingElement>, zobacz [porady: Tworzenie elementu SecurityBindingElement dla trybu uwierzytelniania określone](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span><span class="sxs-lookup"><span data-stu-id="3a076-232">For more information about creating a custom binding with the <xref:System.ServiceModel.Channels.SecurityBindingElement>, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3a076-233">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="3a076-233">See Also</span></span>  
 [<span data-ttu-id="3a076-234">Instrukcje: tworzenie niestandardowego powiązania za pomocą elementu SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="3a076-234">How to: Create a Custom Binding Using the SecurityBindingElement</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-custom-binding-using-the-securitybindingelement.md)  
 [<span data-ttu-id="3a076-235">Instrukcje: tworzenie elementu SecurityBindingElement dla określonego trybu uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="3a076-235">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)  
 [<span data-ttu-id="3a076-236">Instrukcje: tworzenie niestandardowego weryfikatora tożsamości klienta</span><span class="sxs-lookup"><span data-stu-id="3a076-236">How to: Create a Custom Client Identity Verifier</span></span>](../../../../docs/framework/wcf/extending/how-to-create-a-custom-client-identity-verifier.md)  
 [<span data-ttu-id="3a076-237">Wybieranie typu poświadczeń</span><span class="sxs-lookup"><span data-stu-id="3a076-237">Selecting a Credential Type</span></span>](../../../../docs/framework/wcf/feature-details/selecting-a-credential-type.md)  
 [<span data-ttu-id="3a076-238">Praca z certyfikatami</span><span class="sxs-lookup"><span data-stu-id="3a076-238">Working with Certificates</span></span>](../../../../docs/framework/wcf/feature-details/working-with-certificates.md)  
 [<span data-ttu-id="3a076-239">Narzędzie do obsługi metadanych elementu ServiceModel (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="3a076-239">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)  
 [<span data-ttu-id="3a076-240">Tworzenie powiązań zdefiniowanych przez użytkownika</span><span class="sxs-lookup"><span data-stu-id="3a076-240">Creating User-Defined Bindings</span></span>](../../../../docs/framework/wcf/extending/creating-user-defined-bindings.md)  
 [<span data-ttu-id="3a076-241">Instrukcje: pobieranie odcisku palca certyfikatu</span><span class="sxs-lookup"><span data-stu-id="3a076-241">How to: Retrieve the Thumbprint of a Certificate</span></span>](../../../../docs/framework/wcf/feature-details/how-to-retrieve-the-thumbprint-of-a-certificate.md)
