---
title: 'Szczegóły usługi CustomPeerResolverService: Rejestracje klienta'
ms.date: 03/30/2017
ms.assetid: 40236953-a916-4236-84a6-928859e1331a
ms.openlocfilehash: b3b5e22ad29f465d82e3d925f7168745fc5d04a4
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/18/2019
ms.locfileid: "59095792"
---
# <a name="inside-the-custompeerresolverservice-client-registrations"></a><span data-ttu-id="0fbac-102">Szczegóły usługi CustomPeerResolverService: Rejestracje klienta</span><span class="sxs-lookup"><span data-stu-id="0fbac-102">Inside the CustomPeerResolverService: Client Registrations</span></span>
<span data-ttu-id="0fbac-103">Każdy węzeł w siatce publikuje swoje informacje o punkcie końcowym usługi rozpoznawania nazw za pośrednictwem `Register` funkcji.</span><span class="sxs-lookup"><span data-stu-id="0fbac-103">Each node in the mesh publishes its endpoint information to the resolver service through the `Register` function.</span></span> <span data-ttu-id="0fbac-104">Usługa rozpoznawania nazw przechowuje te informacje jako rekord rejestracji.</span><span class="sxs-lookup"><span data-stu-id="0fbac-104">The resolver service stores this information as a registration record.</span></span> <span data-ttu-id="0fbac-105">Ten rekord zawiera unikatowy identyfikator (identyfikator), a informacje o punkcie końcowym (PeerNodeAddress) dla węzła.</span><span class="sxs-lookup"><span data-stu-id="0fbac-105">This record contains a unique identifier (RegistrationID) and endpoint information (PeerNodeAddress) for the node.</span></span>  
  
## <a name="stale-records-and-expiration-time"></a><span data-ttu-id="0fbac-106">Stare rekordy i czas wygaśnięcia</span><span class="sxs-lookup"><span data-stu-id="0fbac-106">Stale Records and Expiration Time</span></span>  
 <span data-ttu-id="0fbac-107">Najlepiej, gdy węzeł opuści siatkę, jego wywoła `Unregister` funkcji, która powoduje, że usługa rozpoznawania nazw usunąć wpis rejestracji.</span><span class="sxs-lookup"><span data-stu-id="0fbac-107">Ideally, when a node leaves the mesh, it will call the `Unregister` function, which causes the resolver service to remove the registration entry.</span></span> <span data-ttu-id="0fbac-108">Czasami węzłów zamknięty lub stać się niedostępne, przed wywołaniem `Unregister`, opuścić za rekord starych rejestracji.</span><span class="sxs-lookup"><span data-stu-id="0fbac-108">Sometimes, nodes shut down or become inaccessible before calling `Unregister`, leaving behind a stale registration record.</span></span>  
  
 <span data-ttu-id="0fbac-109">Starych rekordów w usłudze rozpoznawania nazw może spowodować połączenia zakończone niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="0fbac-109">Stale records in your resolver service can cause failed connections.</span></span> <span data-ttu-id="0fbac-110">Jeśli węzeł podejmuje próbę nawiązania siatki otrzyma informacje o połączeniu starych z usługi rozpoznawania nazw, może potrwać dłużej pomyślnie dołączyć siatkę.</span><span class="sxs-lookup"><span data-stu-id="0fbac-110">If a node trying to connect to a mesh receives stale connection information from the resolver service, it can take longer to successfully join the mesh.</span></span> <span data-ttu-id="0fbac-111">Stare rekordy skorzystać z pamięci.</span><span class="sxs-lookup"><span data-stu-id="0fbac-111">Stale records also take up memory.</span></span> <span data-ttu-id="0fbac-112">Bez wydajny proces oczyszczania pamięci podręcznej, używane do przechowywania rejestracji po pewnym czasie można overflow i awarii usługi rozpoznawania nazw.</span><span class="sxs-lookup"><span data-stu-id="0fbac-112">Without an efficient clean up process, the cache used to store registrations could eventually overflow and crash the resolver service.</span></span>  
  
 <span data-ttu-id="0fbac-113"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> Oznacza każdy rekord z czasem wygaśnięcia (Data/godzina) i przechowuje te informacje jako część rekordu.</span><span class="sxs-lookup"><span data-stu-id="0fbac-113">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> marks each record with an expiration time (DateTime), and stores that information as part of the record.</span></span> <span data-ttu-id="0fbac-114">Usługa korzysta z czasu wygaśnięcia do identyfikowania starych rekordów.</span><span class="sxs-lookup"><span data-stu-id="0fbac-114">The service uses the expiration time to identify stale records.</span></span> <span data-ttu-id="0fbac-115">Niestandardowe implementacje powinien zrobić coś podobnego.</span><span class="sxs-lookup"><span data-stu-id="0fbac-115">Custom implementations should do something similar.</span></span>  
  
## <a name="refreshinterval-and-cleanupinterval"></a><span data-ttu-id="0fbac-116">RefreshInterval i CleanupInterval</span><span class="sxs-lookup"><span data-stu-id="0fbac-116">RefreshInterval and CleanupInterval</span></span>  
 <span data-ttu-id="0fbac-117">`RefreshInterval` Właściwość <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> definiuje, jak długo rejestracji rekordów flagi card_authenticate_ w tabeli odnośników rejestracji usługi.</span><span class="sxs-lookup"><span data-stu-id="0fbac-117">The `RefreshInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> defines how long registration records remain valid in the service's registration lookup table.</span></span> <span data-ttu-id="0fbac-118">Czas przekazany do tej właściwości został przekazany do danego rekordu, że rekord staje się nieaktualne i jest oznaczona do usunięcia.</span><span class="sxs-lookup"><span data-stu-id="0fbac-118">When the amount of time supplied to this property has passed for a given record, that record becomes stale and is marked for deletion.</span></span>  
  
 <span data-ttu-id="0fbac-119">`CleanupInterval` Właściwość <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> informuje, jak często usługa do wyszukiwania i usuwania starych rejestracji rekordów.</span><span class="sxs-lookup"><span data-stu-id="0fbac-119">The `CleanupInterval` property of the <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> tells the service how often to search for and delete stale registration records.</span></span> <span data-ttu-id="0fbac-120">`CleanupInterval` Powinna być ustawiona na czas, większa niż lub równa `RefreshInterval` ustawić w usłudze.</span><span class="sxs-lookup"><span data-stu-id="0fbac-120">The `CleanupInterval` should be set to a time greater than or equal to the `RefreshInterval` set on the service.</span></span>  
  
 <span data-ttu-id="0fbac-121">Aby zaimplementować usługi rozpoznawania nazw, należy napisać funkcję obsługi do usuwania przestarzałych rejestracji rekordów.</span><span class="sxs-lookup"><span data-stu-id="0fbac-121">To implement your own resolver service, you need to write a maintenance function to remove stale registration records.</span></span> <span data-ttu-id="0fbac-122">Istnieje kilka sposobów, aby to zrobić:</span><span class="sxs-lookup"><span data-stu-id="0fbac-122">There are several ways to do this:</span></span>  
  
-   <span data-ttu-id="0fbac-123">**Okresowej konserwacji**: Należy skonfigurować czasomierz go okresowo i przechodzą przez swoim magazynem danych, aby usunąć stare rekordy.</span><span class="sxs-lookup"><span data-stu-id="0fbac-123">**Periodic maintenance**: Set a timer to go off periodically, and go through your data store to delete old records.</span></span> <span data-ttu-id="0fbac-124"><xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> Korzysta z tej metody.</span><span class="sxs-lookup"><span data-stu-id="0fbac-124">The <xref:System.ServiceModel.PeerResolvers.CustomPeerResolverService> uses this approach.</span></span>  
  
-   <span data-ttu-id="0fbac-125">**Usuwanie pasywnym**: Zamiast aktywnie wyszukiwanie starych rekordów w regularnych odstępach czasu, można zidentyfikować i usuwania starych rekordów, gdy usługa działa już inna funkcja.</span><span class="sxs-lookup"><span data-stu-id="0fbac-125">**Passive deletion**: Instead of actively searching for stale records at regular intervals, you can identify and delete stale records when your service is already performing another function.</span></span> <span data-ttu-id="0fbac-126">To może spowodować spowolnienie czas odpowiedzi na żądania od klientów programu rozpoznawania nazw, ale eliminuje to potrzebę czasomierza i bardziej wydajne, jeśli kilka węzły są oczekiwane, aby pozostawić bez wywoływania `Unregister`.</span><span class="sxs-lookup"><span data-stu-id="0fbac-126">This may potentially slow down response time to requests from the resolver clients, but it eliminates the need for a timer, and may be more efficient if few nodes are expected to leave without calling `Unregister`.</span></span>  
  
## <a name="registrationlifetime-and-refresh"></a><span data-ttu-id="0fbac-127">RegistrationLifetime i odświeżanie</span><span class="sxs-lookup"><span data-stu-id="0fbac-127">RegistrationLifetime and Refresh</span></span>  
 <span data-ttu-id="0fbac-128">Gdy węzeł rejestruje się za pomocą usługi rozpoznawania nazw, otrzymuje <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> obiektu z usługi.</span><span class="sxs-lookup"><span data-stu-id="0fbac-128">When a node registers with a resolver service, it receives a <xref:System.ServiceModel.PeerResolvers.RegisterResponseInfo> object from the service.</span></span> <span data-ttu-id="0fbac-129">Ten obiekt zawiera `RegistrationLifetime` właściwości, które wskazuje na węzeł, czas, jaki ma przed rejestracją wygaśnie i zostanie usunięty w usłudze rozpoznawania nazw.</span><span class="sxs-lookup"><span data-stu-id="0fbac-129">This object has a `RegistrationLifetime` property which indicates to the node how much time it has before the registration expires and is removed by the resolver service.</span></span> <span data-ttu-id="0fbac-130">Jeśli na przykład `RegistrationLifetime` to 2 minuty, węzeł musi wywołać `Refresh` w mniej niż 2 minut zapewnienie rekord pozostaje od nowa i nie zostanie usunięta.</span><span class="sxs-lookup"><span data-stu-id="0fbac-130">If, for example, the `RegistrationLifetime` is 2 minutes, the node needs to call `Refresh` in under 2 minutes to ensure the record stays fresh and is not deleted.</span></span> <span data-ttu-id="0fbac-131">Po odebraniu usługi rozpoznawania nazw `Refresh` żądań wyszukuje rekord i resetuje czas wygaśnięcia.</span><span class="sxs-lookup"><span data-stu-id="0fbac-131">When the resolver service receives a `Refresh` request, it looks up the record and resets the expiration time.</span></span> <span data-ttu-id="0fbac-132">Odśwież zwraca <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> obiekt z `RegistrationLifetime` właściwości.</span><span class="sxs-lookup"><span data-stu-id="0fbac-132">Refresh returns a <xref:System.ServiceModel.PeerResolvers.RefreshResponseInfo> object with a `RegistrationLifetime` property.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0fbac-133">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="0fbac-133">See also</span></span>

- [<span data-ttu-id="0fbac-134">Mechanizmy rozpoznawania elementów równorzędnych</span><span class="sxs-lookup"><span data-stu-id="0fbac-134">Peer Resolvers</span></span>](../../../../docs/framework/wcf/feature-details/peer-resolvers.md)
