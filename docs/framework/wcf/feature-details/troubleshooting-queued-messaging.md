---
title: Rozwiązywanie problemów obsługi komunikatów kolejek
ms.date: 03/30/2017
ms.assetid: a5f2836f-018d-42f5-a571-1e97e64ea5b0
ms.openlocfilehash: b2193755beddd6c0d0eef4f95ca311b8e2b75b3c
ms.sourcegitcommit: 7156c0b9e4ce4ce5ecf48ce3d925403b638b680c
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/26/2019
ms.locfileid: "58463114"
---
# <a name="troubleshooting-queued-messaging"></a><span data-ttu-id="8e750-102">Rozwiązywanie problemów obsługi komunikatów kolejek</span><span class="sxs-lookup"><span data-stu-id="8e750-102">Troubleshooting Queued Messaging</span></span>
<span data-ttu-id="8e750-103">Ta sekcja zawiera typowe pytania i rozwiązywanie problemów z pomocy dotyczącej korzystania z kolejek w Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="8e750-103">This section contains common questions and troubleshooting help for using queues in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="common-questions"></a><span data-ttu-id="8e750-104">Często zadawane pytania</span><span class="sxs-lookup"><span data-stu-id="8e750-104">Common Questions</span></span>  
 <span data-ttu-id="8e750-105">**PYT.:** Czy mogę używać WCF Beta 1 i mam już zainstalowaną poprawkę usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="8e750-105">**Q:** I used WCF Beta 1 and I installed the MSMQ hotfix.</span></span> <span data-ttu-id="8e750-106">Należy usunąć poprawkę?</span><span class="sxs-lookup"><span data-stu-id="8e750-106">Do I need to remove the hotfix?</span></span>  
  
 <span data-ttu-id="8e750-107">**ODP.:** Tak.</span><span class="sxs-lookup"><span data-stu-id="8e750-107">**A:** Yes.</span></span> <span data-ttu-id="8e750-108">Ta poprawka nie jest już obsługiwana.</span><span class="sxs-lookup"><span data-stu-id="8e750-108">This hotfix is no longer supported.</span></span> <span data-ttu-id="8e750-109">Usługi WCF działa teraz w usłudze MSMQ bez wymogu poprawki.</span><span class="sxs-lookup"><span data-stu-id="8e750-109">WCF now works on MSMQ without a hotfix requirement.</span></span>  
  
 <span data-ttu-id="8e750-110">**PYT.:** Istnieją dwa powiązania dla usługi MSMQ: <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="8e750-110">**Q:** There are two bindings for MSMQ: <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span> <span data-ttu-id="8e750-111">Do czego mogę używać i kiedy?</span><span class="sxs-lookup"><span data-stu-id="8e750-111">What should I use and when?</span></span>  
  
 <span data-ttu-id="8e750-112">**ODP.:** Użyj <xref:System.ServiceModel.NetMsmqBinding> kiedy chcesz używać usługi MSMQ jako transportu dla komunikacji między dwiema aplikacjami usługi WCF z obsługą kolejek.</span><span class="sxs-lookup"><span data-stu-id="8e750-112">**A:** Use the <xref:System.ServiceModel.NetMsmqBinding> when you want to use MSMQ as a transport for queued communication between two WCF applications.</span></span> <span data-ttu-id="8e750-113">Użyj <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> kiedy chcesz korzystać z istniejących aplikacji usługi MSMQ do komunikowania się z nowych aplikacji WCF.</span><span class="sxs-lookup"><span data-stu-id="8e750-113">Use the <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> when you want to use existing MSMQ applications to communicate with new WCF applications.</span></span>  
  
 <span data-ttu-id="8e750-114">**PYT.:** Czy muszę uaktualnić usługi MSMQ, aby użyć <xref:System.ServiceModel.NetMsmqBinding> i `MsmqIntegration` powiązania?</span><span class="sxs-lookup"><span data-stu-id="8e750-114">**Q:** Do I have to upgrade MSMQ to use the <xref:System.ServiceModel.NetMsmqBinding> and `MsmqIntegration` bindings?</span></span>  
  
 <span data-ttu-id="8e750-115">**ODP.:** Nie.</span><span class="sxs-lookup"><span data-stu-id="8e750-115">**A:** No.</span></span> <span data-ttu-id="8e750-116">Zarówno powiązania pracować MSMQ 3.0 na [!INCLUDE[wxp](../../../../includes/wxp-md.md)] i [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8e750-116">Both bindings work with MSMQ 3.0 on [!INCLUDE[wxp](../../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)].</span></span> <span data-ttu-id="8e750-117">Niektóre funkcje powiązania stają się dostępne po uaktualnieniu do usługi MSMQ 4.0 w [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8e750-117">Certain features of the bindings become available when you upgrade to MSMQ 4.0 in [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span>  
  
 <span data-ttu-id="8e750-118">**PYT.:** Jakie funkcje <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> powiązania są dostępne w usłudze MSMQ 4.0, ale nie w usłudze MSMQ 3.0?</span><span class="sxs-lookup"><span data-stu-id="8e750-118">**Q:** What features of the <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> bindings are available in MSMQ 4.0 but not in MSMQ 3.0?</span></span>  
  
 <span data-ttu-id="8e750-119">**ODP.:** Następujące funkcje są dostępne w usłudze MSMQ 4.0, ale nie w usłudze MSMQ 3.0:</span><span class="sxs-lookup"><span data-stu-id="8e750-119">**A:** The following features are available in MSMQ 4.0 but not in MSMQ 3.0:</span></span>  
  
-   <span data-ttu-id="8e750-120">Niestandardowe kolejki utraconych wiadomości jest obsługiwana tylko w usłudze MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="8e750-120">Custom dead-letter queue is supported only on MSMQ 4.0.</span></span>  
  
-   <span data-ttu-id="8e750-121">Usługa MSMQ 3.0 i 4.0 obsłużyć inaczej skażone komunikaty.</span><span class="sxs-lookup"><span data-stu-id="8e750-121">MSMQ 3.0 and 4.0 handle poison messages differently.</span></span>  
  
-   <span data-ttu-id="8e750-122">Tylko usługi MSMQ 4.0 obsługuje odczyt transakcyjne zdalny.</span><span class="sxs-lookup"><span data-stu-id="8e750-122">Only MSMQ 4.0 supports remote transacted read.</span></span>  
  
 <span data-ttu-id="8e750-123">Aby uzyskać więcej informacji, zobacz [różnice w funkcjach kolejkowania w Windows Vista, Windows Server 2003 i Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="8e750-123">For more information, see [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>  
  
 <span data-ttu-id="8e750-124">**PYT.:** Czy można użyć usługa MSMQ 3.0, po jednej stronie komunikatu w kolejce i MSMQ 4.0 po drugiej stronie?</span><span class="sxs-lookup"><span data-stu-id="8e750-124">**Q:** Can I use MSMQ 3.0 on one side of a queued communication and MSMQ 4.0 on the other side?</span></span>  
  
 <span data-ttu-id="8e750-125">**ODP.:** Tak.</span><span class="sxs-lookup"><span data-stu-id="8e750-125">**A:** Yes.</span></span>  
  
 <span data-ttu-id="8e750-126">**PYT.:** Chcę integrowanie istniejących aplikacji usługi MSMQ z nowej usługi WCF klientów lub serwerów.</span><span class="sxs-lookup"><span data-stu-id="8e750-126">**Q:** I want to integrate existing MSMQ applications with new WCF clients or servers.</span></span> <span data-ttu-id="8e750-127">Należy uaktualnić obie strony mojej infrastruktury usługi MSMQ?</span><span class="sxs-lookup"><span data-stu-id="8e750-127">Do I need to upgrade both sides of my MSMQ infrastructure?</span></span>  
  
 <span data-ttu-id="8e750-128">**ODP.:** Nie.</span><span class="sxs-lookup"><span data-stu-id="8e750-128">**A:** No.</span></span> <span data-ttu-id="8e750-129">Jest konieczne uaktualnienie do usługi MSMQ 4.0 po obu stronach.</span><span class="sxs-lookup"><span data-stu-id="8e750-129">You do not have to upgrade to MSMQ 4.0 on either side.</span></span>  
  
## <a name="troubleshooting"></a><span data-ttu-id="8e750-130">Rozwiązywanie problemów</span><span class="sxs-lookup"><span data-stu-id="8e750-130">Troubleshooting</span></span>  
 <span data-ttu-id="8e750-131">Ta sekcja zawiera odpowiedzi na typowe problemy dotyczące rozwiązywania problemów.</span><span class="sxs-lookup"><span data-stu-id="8e750-131">This section contains answers to most common troubleshooting issues.</span></span> <span data-ttu-id="8e750-132">Niektóre problemy, które są znane ograniczenia są także opisane w informacjach o wersji.</span><span class="sxs-lookup"><span data-stu-id="8e750-132">Some issues that are known limitations are also described in the release notes.</span></span>  
  
 <span data-ttu-id="8e750-133">**PYT.:** Próbuję użyć kolejki prywatnej i pojawia się następujący wyjątek: `System.InvalidOperationException`: Adres URL jest nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="8e750-133">**Q:** I am trying to use a private queue and I get the following exception: `System.InvalidOperationException`: The URL is invalid.</span></span> <span data-ttu-id="8e750-134">Adres URL kolejki nie może zawierać znaku "$".</span><span class="sxs-lookup"><span data-stu-id="8e750-134">The URL for the queue cannot contain the '$' character.</span></span> <span data-ttu-id="8e750-135">Aby rozwiązać kolejki prywatnej, należy użyć składni net.msmq://machine/private/queueName.</span><span class="sxs-lookup"><span data-stu-id="8e750-135">Use the syntax in net.msmq://machine/private/queueName to address a private queue.</span></span>  
  
 <span data-ttu-id="8e750-136">**ODP.:** Sprawdź, czy kolejka identyfikator (URI) w swojej konfiguracji i kodu.</span><span class="sxs-lookup"><span data-stu-id="8e750-136">**A:** Please check the queue Uniform Resource Identifier (URI) in your configuration and code.</span></span> <span data-ttu-id="8e750-137">Nie używaj znaku "$" w identyfikatorze URI.</span><span class="sxs-lookup"><span data-stu-id="8e750-137">Do not use the "$" character in the URI.</span></span> <span data-ttu-id="8e750-138">Na przykład aby spełnić kolejki prywatnej o nazwie OrdersQueue, należy określić identyfikator URI jako net.msmq://localhost/private/ordersQueue.</span><span class="sxs-lookup"><span data-stu-id="8e750-138">For example, to address a private queue named OrdersQueue, specify the URI as net.msmq://localhost/private/ordersQueue.</span></span>  
  
 <span data-ttu-id="8e750-139">**PYT.:** Wywoływanie `ServiceHost.Open()` w mojej aplikacji umieszczonych w kolejce zgłasza następujący wyjątek: `System.ArgumentException`: Adres podstawowy nie może zawierać ciągu zapytania identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="8e750-139">**Q:** Calling `ServiceHost.Open()` on my queued application throws the following exception: `System.ArgumentException`: A base address cannot contain a URI query string.</span></span> <span data-ttu-id="8e750-140">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="8e750-140">Why?</span></span>  
  
 <span data-ttu-id="8e750-141">**ODP.:** Sprawdź kolejki identyfikator URI w pliku konfiguracji i w kodzie.</span><span class="sxs-lookup"><span data-stu-id="8e750-141">**A:** Check the queue URI in your configuration file and in your code.</span></span> <span data-ttu-id="8e750-142">Kolejki usługi MSMQ obsługują korzystanie z '?' znak, identyfikatorów URI interpretuje ten znak jako początek ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="8e750-142">While MSMQ queues support the use of the '?' character, URIs interpret this character as the beginning of a string query.</span></span> <span data-ttu-id="8e750-143">Aby uniknąć tego problemu, należy użyć nazwy kolejek, które nie zawierają "?" znaków.</span><span class="sxs-lookup"><span data-stu-id="8e750-143">To avoid this issue, use queue names that do not contain '?' characters.</span></span>  
  
 <span data-ttu-id="8e750-144">**PYT.:** Wyślij moje zakończyło się pomyślnie, ale żadna operacja usługi jest wywoływane na odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="8e750-144">**Q:** My send succeeded but no service operation is invoked on the receiver.</span></span> <span data-ttu-id="8e750-145">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="8e750-145">Why?</span></span>  
  
 <span data-ttu-id="8e750-146">**ODP.:** Aby ustalić, odpowiedź na pytanie, pracować przy użyciu poniższej liście kontrolnej:</span><span class="sxs-lookup"><span data-stu-id="8e750-146">**A:** To determine the answer, work through the following check list:</span></span>  
  
-   <span data-ttu-id="8e750-147">Upewnij się, że wymagania kolejkę transakcyjną są zgodne z gwarancji określony.</span><span class="sxs-lookup"><span data-stu-id="8e750-147">Check that the transactional queue requirements are compatible with the assurances specified.</span></span> <span data-ttu-id="8e750-148">Należy zwrócić uwagę następujących zasad:</span><span class="sxs-lookup"><span data-stu-id="8e750-148">Note the following principles:</span></span>  
  
    -   <span data-ttu-id="8e750-149">Komunikaty można wysyłać trwałe (datagramy i sesji) za pomocą "dokładnie jednokrotne" gwarancji (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`) tylko dla kolejek transakcyjnych.</span><span class="sxs-lookup"><span data-stu-id="8e750-149">You can send durable messages (datagrams and sessions) with "exactly once" assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`) only to a transactional queue.</span></span>  
  
    -   <span data-ttu-id="8e750-150">Możesz wysłać sesji tylko w przypadku zapewnienia "dokładnie jednokrotne".</span><span class="sxs-lookup"><span data-stu-id="8e750-150">You can send sessions only with "exactly once" assurances.</span></span>  
  
    -   <span data-ttu-id="8e750-151">Transakcja jest wymagany do odbierania komunikatów w sesji z kolejką transakcyjną.</span><span class="sxs-lookup"><span data-stu-id="8e750-151">A transaction is required to receive messages in a session from a transactional queue.</span></span>  
  
    -   <span data-ttu-id="8e750-152">Możesz wysyłać lub odbierać lotnych lub trwałe wiadomości (tylko datagramy) z żadnych zapewnień (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`) tylko do kolejki nietransakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="8e750-152">You can send or receive volatile or durable messages (datagrams only) with no assurances (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`) only to a non-transactional queue.</span></span>  
  
-   <span data-ttu-id="8e750-153">Sprawdź kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8e750-153">Check the dead-letter queue.</span></span> <span data-ttu-id="8e750-154">Jeśli znajdziesz tam wiadomości, należy ustalić, dlaczego one nie zostały dostarczone.</span><span class="sxs-lookup"><span data-stu-id="8e750-154">If you find the messages there, determine why they were not delivered.</span></span>  
  
-   <span data-ttu-id="8e750-155">Sprawdzanie kolejek wychodzących dla łączności lub odnoszący się problemy.</span><span class="sxs-lookup"><span data-stu-id="8e750-155">Check the outgoing queues for connectivity or addressing problems.</span></span>  
  
 <span data-ttu-id="8e750-156">**PYT.:** Określony niestandardowy kolejki utraconych wiadomości, ale po uruchomieniu aplikacji nadawcy, pojawia się wyjątek, który nie znajduje się kolejka utraconych lub aplikacji wysyłającej nie ma uprawnienia do kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8e750-156">**Q:** I have specified a custom dead-letter queue, but when I start the sender application, I get an exception that either the dead-letter queue is not found, or the sending application has no permission to the dead-letter queue.</span></span> <span data-ttu-id="8e750-157">Dlaczego tak się dzieje?</span><span class="sxs-lookup"><span data-stu-id="8e750-157">Why is this happening?</span></span>  
  
 <span data-ttu-id="8e750-158">**ODP.:** Niestandardowe kolejki utraconych wiadomości URI musi zawierać wartość "localhost" lub nazwa komputera pierwszy segment, na przykład net.msmq://localhost/private/myAppdead-letter kolejki.</span><span class="sxs-lookup"><span data-stu-id="8e750-158">**A:** The custom dead-letter queue URI must include a "localhost" or the computer name in the first segment, for example, net.msmq://localhost/private/myAppdead-letter queue.</span></span>  
  
 <span data-ttu-id="8e750-159">**PYT.:** Go zawsze jest konieczne do definiowania niestandardowej kolejki utraconych wiadomości, lub czy istnieje kolejka utraconych wiadomości domyślnej?</span><span class="sxs-lookup"><span data-stu-id="8e750-159">**Q:** Is it always necessary to define a custom dead-letter queue, or is there a default dead-letter queue?</span></span>  
  
 <span data-ttu-id="8e750-160">**ODP.:** W przypadku zapewnienia "dokładnie jednokrotne" (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`), a jeśli nie określisz niestandardowe kolejki utraconych wiadomości, wartością domyślną jest kolejki utraconych wiadomości transakcyjnych całego systemu.</span><span class="sxs-lookup"><span data-stu-id="8e750-160">**A:** If assurances are "exactly once" (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `true`), and if you do not specify a custom dead-letter queue, the default is a system-wide transactional dead-letter queue.</span></span>  
  
 <span data-ttu-id="8e750-161">W przypadku zapewnienia none (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`), a następnie wartość domyślna to żadnych funkcji kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8e750-161">If assurances are none (<xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> = `false`), then the default is no dead-letter queue functionality.</span></span>  
  
 <span data-ttu-id="8e750-162">**PYT.:** Moja usługa zgłoszenie SvcHost.Open za pomocą komunikatu "EndpointListener nie może spełnić wymagań przez ListenerFactory".</span><span class="sxs-lookup"><span data-stu-id="8e750-162">**Q:** My service throws on SvcHost.Open with a message "EndpointListener requirements cannot be met by the ListenerFactory".</span></span> <span data-ttu-id="8e750-163">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="8e750-163">Why?</span></span>  
  
 <span data-ttu-id="8e750-164">A.</span><span class="sxs-lookup"><span data-stu-id="8e750-164">A.</span></span> <span data-ttu-id="8e750-165">Sprawdź swoje kontraktu usługi.</span><span class="sxs-lookup"><span data-stu-id="8e750-165">Check your service contract.</span></span> <span data-ttu-id="8e750-166">Użytkownik zapomniał do umieszczenia "ustawienie właściwości IsOneWay =`true`" dla wszystkich operacji usługi.</span><span class="sxs-lookup"><span data-stu-id="8e750-166">You may have forgotten to put "IsOneWay=`true`" on all the service operations.</span></span> <span data-ttu-id="8e750-167">Kolejki obsługują tylko operacje jednokierunkowe usługi.</span><span class="sxs-lookup"><span data-stu-id="8e750-167">Queues support only one-way service operations.</span></span>  
  
 <span data-ttu-id="8e750-168">**PYT.:** Występują komunikaty w kolejce, ale jest wywoływana żadna operacja usługi.</span><span class="sxs-lookup"><span data-stu-id="8e750-168">**Q:** There are messages in the queue but no service operation is invoked.</span></span> <span data-ttu-id="8e750-169">Na czym polega problem?</span><span class="sxs-lookup"><span data-stu-id="8e750-169">What is the problem?</span></span>  
  
 <span data-ttu-id="8e750-170">**ODP.:** Określ, jeśli uległa awarii hosta usługi.</span><span class="sxs-lookup"><span data-stu-id="8e750-170">**A:** Determine if your service host is faulted.</span></span> <span data-ttu-id="8e750-171">Możesz sprawdzić, patrząc śledzenia lub implementacji `IErrorHandler`.</span><span class="sxs-lookup"><span data-stu-id="8e750-171">You can check by looking at the trace or implementing `IErrorHandler`.</span></span> <span data-ttu-id="8e750-172">Błędy hosta usługi domyślnie w przypadku wykrycia Zarządzanie skażonymi komunikatami.</span><span class="sxs-lookup"><span data-stu-id="8e750-172">Service host faults, by default, if a poison message is detected.</span></span>  
  
 <span data-ttu-id="8e750-173">**PYT.:** Występują komunikaty w kolejce, ale nie włączono wprowadzenie umieszczonych w kolejce usługi hostowanej w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="8e750-173">**Q:** There are messages in the queue but my Web-hosted queued service is not getting activated.</span></span> <span data-ttu-id="8e750-174">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="8e750-174">Why?</span></span>  
  
 <span data-ttu-id="8e750-175">**ODP.:** Najbardziej typową przyczyną jest uprawnień.</span><span class="sxs-lookup"><span data-stu-id="8e750-175">**A:** The most common reason is permissions.</span></span>  
  
1.  <span data-ttu-id="8e750-176">Upewnij się, że `NetMsmqActivator` proces jest uruchomiony i tożsamość `NetMsmqActivator` proces otrzymuje odczytu i wyszukiwanie uprawnień w kolejce.</span><span class="sxs-lookup"><span data-stu-id="8e750-176">Ensure that the `NetMsmqActivator` process is running and the identity of the `NetMsmqActivator` process is given read and seek permission on the queue.</span></span>  
  
2.  <span data-ttu-id="8e750-177">Jeśli `NetMsmqActivator` jest monitorowanie kolejek na komputerze zdalnym, upewnij się, że `NetMsmqActivator` nie jest uruchomiony tokenu ograniczone.</span><span class="sxs-lookup"><span data-stu-id="8e750-177">If the `NetMsmqActivator` is monitoring queues on a remote machine, ensure that `NetMsmqActivator` does not run under a restricted token.</span></span> <span data-ttu-id="8e750-178">Aby uruchomić `NetMsmqActivator` nieograniczony tokenem:</span><span class="sxs-lookup"><span data-stu-id="8e750-178">To run the `NetMsmqActivator` with an unrestricted token:</span></span>  
  
    ```  
    sc sidtype NetMsmqActivator unrestricted  
    ```  
  
 <span data-ttu-id="8e750-179">Powiązane zagadnienia hosta sieci Web niezwiązanych z zabezpieczeniami można znaleźć: [Web hostująca aplikację Zakolejkowaną](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md).</span><span class="sxs-lookup"><span data-stu-id="8e750-179">For non-security related Web host issues refer to: [Web Hosting a Queued Application](../../../../docs/framework/wcf/feature-details/web-hosting-a-queued-application.md).</span></span>  
  
 <span data-ttu-id="8e750-180">**PYT.:** Co to jest najłatwiejszym sposobem sesje dostępu?</span><span class="sxs-lookup"><span data-stu-id="8e750-180">**Q:** What is the easiest way to access sessions?</span></span>  
  
 <span data-ttu-id="8e750-181">**ODP.:** Ustaw autouzupełniania =`true` na operację, która odnosi się do ostatniego komunikatu w sesji, a następnie ustaw autouzupełniania =`false` dla wszystkich pozostałych operacji usługi.</span><span class="sxs-lookup"><span data-stu-id="8e750-181">**A:** Set AutoComplete=`true` on the operation that corresponds to the last message in the session, and set AutoComplete=`false` on all remaining service operations.</span></span>  
  
 <span data-ttu-id="8e750-182">**PYT.:** Gdzie znaleźć odpowiedzi na często zadawane pytania w usłudze MSMQ</span><span class="sxs-lookup"><span data-stu-id="8e750-182">**Q:** Where can I find answers to common questions on MSMQ?</span></span>  
  
 <span data-ttu-id="8e750-183">**ODP.:** Aby uzyskać więcej informacji na temat usługi MSMQ, zobacz [usługi kolejkowania komunikatów Microsoft](https://go.microsoft.com/fwlink/?LinkId=87810).</span><span class="sxs-lookup"><span data-stu-id="8e750-183">**A:** For more information about MSMQ, see [Microsoft Message Queuing](https://go.microsoft.com/fwlink/?LinkId=87810).</span></span>  
  
 <span data-ttu-id="8e750-184">**PYT.:** Dlaczego zgłosi Moja usługa `ProtocolException` podczas czytania z kolejki, który zawiera zarówno sesji wiadomości w kolejce i datagram wiadomości w kolejce?</span><span class="sxs-lookup"><span data-stu-id="8e750-184">**Q:** Why does my service throw a `ProtocolException` when reading from a queue that contains both queued session messages and queued datagram messages?</span></span>  
  
 <span data-ttu-id="8e750-185">**ODP.:** Jest główną różnicą w komunikatach umieszczonych w kolejce sposób sesji i składają się datagram umieszczonych w kolejce komunikatów.</span><span class="sxs-lookup"><span data-stu-id="8e750-185">**A:** There is a fundamental difference in the way queued session messages and queued datagram messages are composed.</span></span> <span data-ttu-id="8e750-186">W związku z tym usługa, która oczekuje na odczytywanie wiadomości w kolejce sesji nie może odbierać wiadomości w kolejce datagram i usługi oczekującej elementu do odczytu komunikatu w kolejce datagram nie może zostać wyświetlony komunikat sesji.</span><span class="sxs-lookup"><span data-stu-id="8e750-186">Because of this, a service that is expecting to read a queued session message cannot receive a queued datagram message and a service expecting to read a queued datagram message cannot receive a session message.</span></span> <span data-ttu-id="8e750-187">Podjęto próbę odczytu oba rodzaje komunikatów z tej samej kolejki zgłasza następujący wyjątek:</span><span class="sxs-lookup"><span data-stu-id="8e750-187">Attempting to read both types of messages from the same queue throws the following exception:</span></span>  
  
```  
System.ServiceModel.MsmqPoisonMessageException: The transport channel detected a poison message. This occurred because the message exceeded the maximum number of delivery attempts or because the channel detected a fundamental problem with the message. The inner exception may contain additional information.   
---> System.ServiceModel.ProtocolException: An incoming MSMQ message contained invalid or unexpected .NET Message Framing information in its body. The message cannot be received. Ensure that the sender is using a compatible service contract with a matching SessionMode.  
```  
  
 <span data-ttu-id="8e750-188">Kolejka utraconych wiadomości systemu, jak również wszelkie niestandardowe kolejka utraconych wiadomości jest szczególnie podatne na ten problem, jeśli aplikacja wysyła zarówno sesji wiadomości w kolejce i umieszczonych w kolejce komunikatów datagramów na tym samym komputerze.</span><span class="sxs-lookup"><span data-stu-id="8e750-188">The system dead-letter queue, as well as any custom dead-letter queue, is particularly susceptible to this issue if an application sends both queued session messages and queued datagram messages from the same computer.</span></span> <span data-ttu-id="8e750-189">Nie można pomyślnie wysłać komunikatu, jest przenoszony do kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8e750-189">If a message cannot be sent successfully, it is moved to the dead-letter queue.</span></span> <span data-ttu-id="8e750-190">W poniższych sytuacjach jest możliwość zarówno sesji i datagram wiadomości w kolejce wiadomości utraconych.</span><span class="sxs-lookup"><span data-stu-id="8e750-190">Under these circumstances, it is possible to have both session and datagram messages in the dead-letter queue.</span></span> <span data-ttu-id="8e750-191">Nie istnieje sposób, aby oddzielić oba rodzaje komunikatów w czasie wykonywania, podczas czytania z kolejki, dlatego aplikacje publiczni nie mogą wysyłać zarówno sesji wiadomości w kolejce i umieszczonych w kolejce komunikatów datagramów na tym samym komputerze.</span><span class="sxs-lookup"><span data-stu-id="8e750-191">There is no way to separate both types of messages at runtime when reading from a queue, therefore, applications should not send both queued session messages and queued datagram messages from the same computer.</span></span>  
  
### <a name="msmq-integration-specific-troubleshooting"></a><span data-ttu-id="8e750-192">Integracja usługi MSMQ: Rozwiązywanie określonych problemów</span><span class="sxs-lookup"><span data-stu-id="8e750-192">MSMQ Integration: Specific Troubleshooting</span></span>  
 <span data-ttu-id="8e750-193">**PYT.:** Przy wysyłaniu wiadomości lub podczas otwierania hosta usługi, pojawia się błąd, który wskazuje, że schemat jest nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="8e750-193">**Q:** When I send a message, or when I open the service host, I get an error that indicates the scheme is wrong.</span></span> <span data-ttu-id="8e750-194">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="8e750-194">Why?</span></span>  
  
 <span data-ttu-id="8e750-195">**ODP.:** Gdy używasz powiązanie integracji usługi MSMQ, musi używać schematu msmq.formatname.</span><span class="sxs-lookup"><span data-stu-id="8e750-195">**A:** When you use the MSMQ integration binding, you must use the msmq.formatname scheme.</span></span> <span data-ttu-id="8e750-196">Na przykład msmq.formatname:DIRECT=OS:.\private$\OrdersQueue.</span><span class="sxs-lookup"><span data-stu-id="8e750-196">For example, msmq.formatname:DIRECT=OS:.\private$\OrdersQueue.</span></span> <span data-ttu-id="8e750-197">Jednak podczas określania niestandardowych kolejki utraconych wiadomości musi używać schematu net.msmq.</span><span class="sxs-lookup"><span data-stu-id="8e750-197">But when you specify the custom dead-letter queue, you must use the net.msmq scheme.</span></span>  
  
 <span data-ttu-id="8e750-198">**PYT.:** Kiedy użyć nazwy formatu publicznych lub prywatnych i otworzyć hosta usługi na [!INCLUDE[wv](../../../../includes/wv-md.md)], występuje błąd.</span><span class="sxs-lookup"><span data-stu-id="8e750-198">**Q:** When I use a public or private format name and open the service host on [!INCLUDE[wv](../../../../includes/wv-md.md)], I get an error.</span></span> <span data-ttu-id="8e750-199">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="8e750-199">Why?</span></span>  
  
 <span data-ttu-id="8e750-200">**ODP.:** Kanał integracja WCF na [!INCLUDE[wv](../../../../includes/wv-md.md)] kontroli w celu sprawdzenia, jeśli kolejki podrzędnej będzie można otworzyć kolejki głównej aplikacji do obsługi wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8e750-200">**A:** The WCF integration channel on [!INCLUDE[wv](../../../../includes/wv-md.md)] checks to see if a sub-queue can be opened for the main application queue for handling poison messages.</span></span> <span data-ttu-id="8e750-201">Nazwa kolejki podrzędnej jest pochodną msmq.formatname przekazanych przez identyfikator URI do odbiornika.</span><span class="sxs-lookup"><span data-stu-id="8e750-201">The sub-queue name is derived from an msmq.formatname URI passed to the listener.</span></span> <span data-ttu-id="8e750-202">Nazwa kolejki podrzędnej, w usłudze MSMQ może zawierać tylko z bezpośrednią nazwą formatu.</span><span class="sxs-lookup"><span data-stu-id="8e750-202">The sub-queue name in MSMQ can only be a direct format name.</span></span> <span data-ttu-id="8e750-203">Dlatego zostanie wyświetlony błąd.</span><span class="sxs-lookup"><span data-stu-id="8e750-203">So you see the error.</span></span> <span data-ttu-id="8e750-204">Zmień URI kolejki z bezpośrednią nazwą formatu.</span><span class="sxs-lookup"><span data-stu-id="8e750-204">Change the queue URI to a direct format name.</span></span>  
  
 <span data-ttu-id="8e750-205">**PYT.:** Podczas odbierania komunikatu z aplikacji usługi MSMQ, wiadomość znajduje się w kolejce i nie został odczytany przez aplikację odbierającą WCF.</span><span class="sxs-lookup"><span data-stu-id="8e750-205">**Q:** When receiving a message from an MSMQ application, the message sits in the queue and is not read by the receiving WCF application.</span></span> <span data-ttu-id="8e750-206">Dlaczego?</span><span class="sxs-lookup"><span data-stu-id="8e750-206">Why?</span></span>  
  
 <span data-ttu-id="8e750-207">**ODP.:** Sprawdź, czy wiadomość zawiera treść.</span><span class="sxs-lookup"><span data-stu-id="8e750-207">**A:** Check to see whether the message has a body.</span></span> <span data-ttu-id="8e750-208">Jeśli wiadomość ma bez treści, kanał integracji usługi MSMQ ignoruje komunikat.</span><span class="sxs-lookup"><span data-stu-id="8e750-208">If the message has no body, the MSMQ integration channel ignores the message.</span></span> <span data-ttu-id="8e750-209">Implementowanie `IErrorHandler` otrzymywania wyjątków i sprawdź śladów.</span><span class="sxs-lookup"><span data-stu-id="8e750-209">Implement `IErrorHandler` to be notified of exceptions and check the traces.</span></span>  
  
### <a name="security-related-troubleshooting"></a><span data-ttu-id="8e750-210">Rozwiązywanie związanych z zabezpieczeniami</span><span class="sxs-lookup"><span data-stu-id="8e750-210">Security-Related Troubleshooting</span></span>  
 <span data-ttu-id="8e750-211">**PYT.:** Po uruchomieniu przykładu, który używa domyślnego powiązania w trybie grupy roboczej, wydaje się, że są wysyłane wiadomości, ale nigdy nie są odbierane przez odbiornik.</span><span class="sxs-lookup"><span data-stu-id="8e750-211">**Q:** When I run the sample that uses a default binding in workgroup mode, messages seem to get sent but are never received by the receiver.</span></span>  
  
 <span data-ttu-id="8e750-212">**ODP.:** Domyślnie komunikaty są podpisywane przy użyciu certyfikatu wewnętrznego MSMQ, która wymaga usługi katalogowej Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8e750-212">**A:** By default, messages are signed using an MSMQ internal certificate that requires the Active Directory directory service.</span></span> <span data-ttu-id="8e750-213">W trybie grupy roboczej ponieważ usługi Active Directory nie jest dostępna, podpisywania wiadomości kończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="8e750-213">In workgroup mode, because Active Directory is not available, signing the message fails.</span></span> <span data-ttu-id="8e750-214">Dlatego komunikat trafia do kolejki utraconych wiadomości i wskazuje przyczynę błędu, takie jak "Nieodpowiedni podpis".</span><span class="sxs-lookup"><span data-stu-id="8e750-214">So the message lands in the dead-letter queue and failure cause, such as "Bad signature", is indicated.</span></span>  
  
 <span data-ttu-id="8e750-215">Obejście polega na wyłączyć funkcję zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8e750-215">The workaround is to turn off security.</span></span> <span data-ttu-id="8e750-216">Jest to realizowane przez ustawienie <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A>  =  <xref:System.ServiceModel.NetMsmqSecurityMode.None> aby umożliwić jej pracę w trybie grupy roboczej.</span><span class="sxs-lookup"><span data-stu-id="8e750-216">This is done by setting <xref:System.ServiceModel.NetMsmqSecurity.Mode%2A> = <xref:System.ServiceModel.NetMsmqSecurityMode.None> to make it work in workgroup mode.</span></span>  
  
 <span data-ttu-id="8e750-217">Inne obejście jest uzyskanie <xref:System.ServiceModel.MsmqTransportSecurity> z <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> właściwości i ustaw ją na <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>i ustaw certyfikat klienta.</span><span class="sxs-lookup"><span data-stu-id="8e750-217">Another workaround is to get the <xref:System.ServiceModel.MsmqTransportSecurity> from the <xref:System.ServiceModel.NetMsmqSecurity.Transport%2A> property and set it to <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, and set the client certificate.</span></span>  
  
 <span data-ttu-id="8e750-218">Jeszcze inne obejście jest zainstalowanie usługi MSMQ z integracją usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8e750-218">Yet another workaround is to install MSMQ with Active Directory integration.</span></span>  
  
 <span data-ttu-id="8e750-219">**PYT.:** Gdy wysyłanie wiadomości przy użyciu domyślnego powiązania (transportu włączone zabezpieczeń) w usłudze Active Directory do kolejki, wyświetlany jest komunikat "nie można odnaleźć certyfikatu wewnętrznego".</span><span class="sxs-lookup"><span data-stu-id="8e750-219">**Q:** When I send a message with default binding (transport security turned on) in Active Directory to a queue, I get an "internal certificate not found" message.</span></span> <span data-ttu-id="8e750-220">Jak rozwiązać ten problem?</span><span class="sxs-lookup"><span data-stu-id="8e750-220">How do I fix this?</span></span>  
  
 <span data-ttu-id="8e750-221">**ODP.:** Oznacza to, czy należy odnawiać certyfikat w usłudze Active Directory dla nadawcy.</span><span class="sxs-lookup"><span data-stu-id="8e750-221">**A:** This means that the certificate in Active Directory for the sender must be renewed.</span></span> <span data-ttu-id="8e750-222">Aby to zrobić, otwórz **Panelu sterowania**, **narzędzia administracyjne**, **Zarządzanie komputerem**, kliknij prawym przyciskiem myszy **MSMQ**i wybierz **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="8e750-222">To do so, open **Control Panel**, **Administrative Tools**, **Computer Management**, right-click **MSMQ**, and select **Properties**.</span></span> <span data-ttu-id="8e750-223">Wybierz **certyfikatu użytkownika** kartę, a następnie kliknij przycisk **Odnów** przycisku.</span><span class="sxs-lookup"><span data-stu-id="8e750-223">Select the **User Certificate** tab and click the **Renew** button.</span></span>  
  
 <span data-ttu-id="8e750-224">**PYT.:** Kiedy mogę wysłać komunikat przy użyciu <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> i Określ certyfikat do użycia, wyświetlany jest komunikat "Nieprawidłowy certyfikat".</span><span class="sxs-lookup"><span data-stu-id="8e750-224">**Q:** When I send a message using <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and specify the certificate to use, I get an "Invalid certificate" message.</span></span> <span data-ttu-id="8e750-225">Jak rozwiązać ten problem?</span><span class="sxs-lookup"><span data-stu-id="8e750-225">How do I fix this?</span></span>  
  
 <span data-ttu-id="8e750-226">**ODP.:** Tryb certyfikatu nie można używać magazynu certyfikatów komputera lokalnego.</span><span class="sxs-lookup"><span data-stu-id="8e750-226">**A:** You cannot use a local machine certificate store with certificate mode.</span></span> <span data-ttu-id="8e750-227">Musisz skopiować certyfikat z magazynu certyfikatów komputera w magazynie bieżącego użytkownika za pomocą przystawki certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="8e750-227">You have to copy the certificate from the machine certificate store to the current user store using the Certificate snap-in.</span></span> <span data-ttu-id="8e750-228">Aby uzyskać certyfikat w przystawce:</span><span class="sxs-lookup"><span data-stu-id="8e750-228">To get the Certificate snap-in:</span></span>  
  
1.  <span data-ttu-id="8e750-229">Kliknij przycisk **Start**, wybierz opcję **Uruchom**, typ `mmc`i kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="8e750-229">Click **Start**, select **Run**, type `mmc`, and click **OK**.</span></span>  
  
2.  <span data-ttu-id="8e750-230">W **programu Microsoft Management Console**, otwórz **pliku** menu, a następnie wybierz **Dodaj/Usuń przystawkę**.</span><span class="sxs-lookup"><span data-stu-id="8e750-230">In the **Microsoft Management Console**, open the **File** menu and select **Add/Remove Snap-in**.</span></span>  
  
3.  <span data-ttu-id="8e750-231">W **Dodaj/Usuń przystawkę** okno dialogowe, kliknij przycisk **Dodaj** przycisku.</span><span class="sxs-lookup"><span data-stu-id="8e750-231">In the **Add/Remove Snap-in** dialog box, click the **Add** button.</span></span>  
  
4.  <span data-ttu-id="8e750-232">W **Dodawanie przystawki autonomicznej** okno dialogowe, wybierz opcję certyfikaty i kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="8e750-232">In the **Add Standalone Snap-in** dialog box, select Certificates and click **Add**.</span></span>  
  
5.  <span data-ttu-id="8e750-233">W **certyfikaty** przystawki okno dialogowe, zaznacz **Moje konto użytkownika** i kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="8e750-233">In the **Certificates** snap-in dialog box, select **My user account,** and click **Finish**.</span></span>  
  
6.  <span data-ttu-id="8e750-234">Następnie dodaj sekundy certyfikatów w przystawce przy użyciu poprzednich kroków, ale tym razem wybierz pozycję **konto komputera** i kliknij przycisk **dalej**.</span><span class="sxs-lookup"><span data-stu-id="8e750-234">Next, add a second Certificates snap-in using the previous steps, but this time select **Computer account** and click **Next**.</span></span>  
  
7.  <span data-ttu-id="8e750-235">Wybierz **komputera lokalnego** i kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="8e750-235">Select **Local Computer** and click **Finish**.</span></span> <span data-ttu-id="8e750-236">Możesz teraz przeciągać i upuszczać certyfikaty z magazynu certyfikatów komputera w magazynie bieżącego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="8e750-236">You can now drag and drop certificates from the machine certificate store to the current user store.</span></span>  
  
 <span data-ttu-id="8e750-237">**PYT.:** Kiedy Moja Usługa odczytuje z kolejki na inny komputer w trybie grupy roboczej, wyświetlany wyjątek "odmowa dostępu".</span><span class="sxs-lookup"><span data-stu-id="8e750-237">**Q:** When my service reads from a queue on another computer in workgroup mode, I get an "access denied" exception.</span></span>  
  
 <span data-ttu-id="8e750-238">**ODP.:** W trybie grupy roboczej, dla aplikacji zdalnej uzyskać dostęp do kolejki aplikacja musi mieć uprawnienia dostępu do kolejki.</span><span class="sxs-lookup"><span data-stu-id="8e750-238">**A:** In workgroup mode, for a remote application to gain access to the queue, the application must have permission to access the queue.</span></span> <span data-ttu-id="8e750-239">Dodaj "Logowanie anonimowe" do listy kontroli dostępu kolejki (ACL) i nadaj mu uprawnienia do odczytu.</span><span class="sxs-lookup"><span data-stu-id="8e750-239">Add "Anonymous login" to the queue's access control list (ACL) and give it read permission.</span></span>  
  
 <span data-ttu-id="8e750-240">**PYT.:** Klient usługi sieciowej (lub dowolnego klienta, który nie ma konta domeny) wysyła wiadomość w kolejce, Wyślij nie powiedzie się z nieprawidłowym certyfikatem.</span><span class="sxs-lookup"><span data-stu-id="8e750-240">**Q:** When a network service client (or any client that does not have a domain account) sends a queued message, the send fails with an invalid certificate.</span></span> <span data-ttu-id="8e750-241">Jak rozwiązać ten problem?</span><span class="sxs-lookup"><span data-stu-id="8e750-241">How do I fix this?</span></span>  
  
 <span data-ttu-id="8e750-242">**ODP.:** Sprawdź konfigurację powiązania.</span><span class="sxs-lookup"><span data-stu-id="8e750-242">**A:** Check the binding configuration.</span></span> <span data-ttu-id="8e750-243">Powiązanie domyślnej ma usługi MSMQ z zabezpieczeń transportu włączone do podpisywanie komunikatów.</span><span class="sxs-lookup"><span data-stu-id="8e750-243">The default binding has MSMQ transport security turned on to sign the message.</span></span> <span data-ttu-id="8e750-244">Wyłącz ją.</span><span class="sxs-lookup"><span data-stu-id="8e750-244">Turn it off.</span></span>  
  
### <a name="remote-transacted-receives"></a><span data-ttu-id="8e750-245">Odbiera zdalnego dokonana transakcja</span><span class="sxs-lookup"><span data-stu-id="8e750-245">Remote Transacted Receives</span></span>  
 <span data-ttu-id="8e750-246">**PYT.:** Jeśli mam kolejki dla komputera i usługi WCF, która odczytuje komunikaty z kolejki na komputerze B (zdalne transacted odbieranie scenariusz), wiadomości nie odczytany z kolejki.</span><span class="sxs-lookup"><span data-stu-id="8e750-246">**Q:** When I have a queue on machine A, and a WCF service that reads messages from a queue on machine B (the remote transacted receive scenario), messages are not read from the queue.</span></span> <span data-ttu-id="8e750-247">Informacje śledzenia wskazuje odbieranie nie powiodło się komunikat "transakcji nie można zaimportować."</span><span class="sxs-lookup"><span data-stu-id="8e750-247">Tracing information indicates the receive failed with the message "Transaction cannot be imported."</span></span> <span data-ttu-id="8e750-248">Co mogę zrobić, aby rozwiązać ten problem?</span><span class="sxs-lookup"><span data-stu-id="8e750-248">What can I do to fix this?</span></span>  
  
 <span data-ttu-id="8e750-249">**ODP.:** Istnieją trzy możliwe przyczyny to:</span><span class="sxs-lookup"><span data-stu-id="8e750-249">**A:** There are three possible reasons for this:</span></span>  
  
-   <span data-ttu-id="8e750-250">Jeśli jesteś w trybie domeny zdalne transacted otrzymywać wymaga dostępu do sieci transakcji Koordynator MSDTC (Microsoft Distributed).</span><span class="sxs-lookup"><span data-stu-id="8e750-250">If you are in domain mode, remote transacted receive requires Microsoft Distributed Transaction Coordinator (MSDTC) network access.</span></span> <span data-ttu-id="8e750-251">Możesz je włączyć za pomocą **Dodaj/Usuń składniki**.</span><span class="sxs-lookup"><span data-stu-id="8e750-251">You can enable this using **Add/Remove Components**.</span></span>  
  
     ![Zrzut ekranu przedstawiający Włączanie sieci usługi DTC dostępu.](./media/troubleshooting-queued-messaging/enable-distributed-transaction-coordinator-access.jpg)  
  
-   <span data-ttu-id="8e750-253">Sprawdź tryb uwierzytelniania podczas komunikowania się z menedżerem transakcji.</span><span class="sxs-lookup"><span data-stu-id="8e750-253">Check the authentication mode for communicating with the transaction manager.</span></span> <span data-ttu-id="8e750-254">Jeśli jesteś w trybie grupy roboczej, należy wybrać "Uwierzytelnienie niewymagane".</span><span class="sxs-lookup"><span data-stu-id="8e750-254">If you are in workgroup mode, "No Authentication Required" must be selected.</span></span> <span data-ttu-id="8e750-255">Jeśli jesteś w trybie domeny, należy wybrać "Wymagane uwierzytelnianie wzajemne".</span><span class="sxs-lookup"><span data-stu-id="8e750-255">If you are in domain mode, then "Mutual Authentication Required" must be selected.</span></span>  
  
     <span data-ttu-id="8e750-256">![Enabling XA transactions](../../../../docs/framework/wcf/feature-details/media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-fb0b-4c5b-afac-75f8860d2bb0")</span><span class="sxs-lookup"><span data-stu-id="8e750-256">![Enabling XA transactions](../../../../docs/framework/wcf/feature-details/media/4f3695e0-fb0b-4c5b-afac-75f8860d2bb0.jpg "4f3695e0-fb0b-4c5b-afac-75f8860d2bb0")</span></span>  
  
-   <span data-ttu-id="8e750-257">Upewnij się, że usługa MSDTC jest na liście wyjątków w **Zapora połączenia internetowego** ustawienia.</span><span class="sxs-lookup"><span data-stu-id="8e750-257">Make sure that MSDTC is in the list of exceptions in the **Internet Connection Firewall** settings.</span></span>  
  
-   <span data-ttu-id="8e750-258">Upewnij się, że używasz [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8e750-258">Ensure that you are using [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span> <span data-ttu-id="8e750-259">Usługa MSMQ na [!INCLUDE[wv](../../../../includes/wv-md.md)] obsługuje odczyt transakcyjne zdalny.</span><span class="sxs-lookup"><span data-stu-id="8e750-259">MSMQ on [!INCLUDE[wv](../../../../includes/wv-md.md)] supports remote transacted read.</span></span> <span data-ttu-id="8e750-260">Usługi MSMQ w starszych wersjach Windows nie obsługuje zdalnego odczytu transakcyjnego.</span><span class="sxs-lookup"><span data-stu-id="8e750-260">MSMQ on earlier Windows releases does not support remote transacted read.</span></span>  
  
 <span data-ttu-id="8e750-261">**PYT.:** Gdy usługa czytania z kolejki jest usługą sieciową, na przykład w sieci Web hosta, dlaczego jest zgłaszany wyjątek odmowy dostępu jest wywoływane podczas czytania z kolejki?</span><span class="sxs-lookup"><span data-stu-id="8e750-261">**Q:** When the service reading from the queue is a network service, for example, in a Web host, why do I get an access-denied exception is raised when reading from the queue?</span></span>  
  
 <span data-ttu-id="8e750-262">**ODP.:** Dostęp do odczytu usługi sieciowej należy dodać do kolejki, listy ACL, aby upewnić się, że Usługa sieciowa może odczytać z kolejki.</span><span class="sxs-lookup"><span data-stu-id="8e750-262">**A:** Network service read access must be added to the queue ACL to ensure that a network service can read from the queue.</span></span>  
  
 <span data-ttu-id="8e750-263">**PYT.:** Jednak aktywować aplikacje w oparciu o wiadomości w kolejce na komputerze zdalnym można używać usługi MSMQ aktywacji?</span><span class="sxs-lookup"><span data-stu-id="8e750-263">**Q:** Can I use the MSMQ activation service to activate applications based on messages in a queue on a remote machine?</span></span>  
  
 <span data-ttu-id="8e750-264">**ODP.:** Tak.</span><span class="sxs-lookup"><span data-stu-id="8e750-264">**A:** Yes.</span></span> <span data-ttu-id="8e750-265">Aby to zrobić, należy skonfigurować usługę Aktywacja usługi MSMQ, aby uruchomić jako usługę sieci i dodać dostęp do usługi sieciowej do kolejki na komputerze zdalnym.</span><span class="sxs-lookup"><span data-stu-id="8e750-265">To do this, you must configure the MSMQ activation service to run as a network service, and add network service access to the queue on the remote machine.</span></span>  
  
## <a name="using-custom-msmq-bindings-with-receivecontext-enabled"></a><span data-ttu-id="8e750-266">Przy użyciu usługi MSMQ niestandardowego powiązania za pomocą elementu ReceiveContext włączone</span><span class="sxs-lookup"><span data-stu-id="8e750-266">Using Custom MSMQ Bindings with ReceiveContext Enabled</span></span>  
 <span data-ttu-id="8e750-267">Korzystając z niestandardowego powiązania usługi MSMQ z <xref:System.ServiceModel.Channels.ReceiveContext> włączona, przetwarzanie wiadomości przychodzących będą używać wątku z puli wątków, ponieważ natywnej usługi MSMQ nie obsługuje zakończenia operacji We/Wy dla asynchronicznego <xref:System.ServiceModel.Channels.ReceiveContext> odbiera.</span><span class="sxs-lookup"><span data-stu-id="8e750-267">When using a custom MSMQ binding with <xref:System.ServiceModel.Channels.ReceiveContext> enabled processing an incoming message will use a thread pool thread because native MSMQ does not support I/O completion for asynchronous <xref:System.ServiceModel.Channels.ReceiveContext> receives.</span></span> <span data-ttu-id="8e750-268">Jest to spowodowane przetworzenia takiego komunikatu używa wewnętrzne transakcje w <xref:System.ServiceModel.Channels.ReceiveContext> i usługi MSMQ nie obsługuje przetwarzania asynchronicznego.</span><span class="sxs-lookup"><span data-stu-id="8e750-268">This is because processing such a message uses internal transactions for <xref:System.ServiceModel.Channels.ReceiveContext> and MSMQ does not support asynchronous processing.</span></span> <span data-ttu-id="8e750-269">Aby obejść ten problem, można dodać <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> do punktu końcowego, aby wymusić synchronicznego przetwarzania lub ustaw <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> na 1.</span><span class="sxs-lookup"><span data-stu-id="8e750-269">To work around this issue you can add a <xref:System.ServiceModel.Description.SynchronousReceiveBehavior> to the endpoint to force synchronous processing or set <xref:System.ServiceModel.Description.DispatcherSynchronizationBehavior.MaxPendingReceives%2A> to 1.</span></span>
