---
title: Ochrona komunikatów za pomocą zabezpieczeń transportu
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
ms.openlocfilehash: b3931d594b585a176be7a9a2e2779df5d844c56b
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "96288605"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="8a37d-102">Ochrona komunikatów za pomocą zabezpieczeń transportu</span><span class="sxs-lookup"><span data-stu-id="8a37d-102">Securing Messages Using Transport Security</span></span>

<span data-ttu-id="8a37d-103">W tej sekcji omówiono zabezpieczenia transportu usługi kolejkowania komunikatów (MSMQ), których można użyć do zabezpieczenia komunikatów wysyłanych do kolejki.</span><span class="sxs-lookup"><span data-stu-id="8a37d-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8a37d-104">Przed przeczytaniem z tego tematu zaleca się zapoznanie się z [pojęciami dotyczącymi zabezpieczeń](security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="8a37d-104">Before reading through this topic, it is recommended that you read [Security Concepts](security-concepts.md).</span></span>  
  
 <span data-ttu-id="8a37d-105">Poniższa ilustracja przedstawia model koncepcyjny komunikacji kolejkowanej przy użyciu Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="8a37d-105">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="8a37d-106">Ta ilustracja i terminologia są używane w celu wyjaśnienia pojęć związanych z zabezpieczeniami transportu.</span><span class="sxs-lookup"><span data-stu-id="8a37d-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="8a37d-107">![Diagram aplikacji znajdujących się w kolejce](media/distributed-queue-figure.jpg "Rozproszona-Queueed-Figure")</span><span class="sxs-lookup"><span data-stu-id="8a37d-107">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="8a37d-108">W przypadku wysyłania komunikatów umieszczonych w kolejce przy użyciu programu WCF z usługą <xref:System.ServiceModel.NetMsmqBinding> komunikat WCF jest dołączany jako treść komunikatu usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="8a37d-108">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="8a37d-109">Zabezpieczenia transportu zabezpieczają cały komunikat MSMQ (nagłówki lub właściwości wiadomości MSMQ oraz treść wiadomości).</span><span class="sxs-lookup"><span data-stu-id="8a37d-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="8a37d-110">Ponieważ jest to treść komunikatu MSMQ, przy użyciu zabezpieczenia transportu jest również zabezpieczony komunikatem WCF.</span><span class="sxs-lookup"><span data-stu-id="8a37d-110">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="8a37d-111">Kluczową koncepcją pod względem zabezpieczeń transportu jest to, że klient musi spełnić wymagania dotyczące zabezpieczeń, aby uzyskać komunikat do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="8a37d-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="8a37d-112">Jest to w przeciwieństwie do zabezpieczeń komunikatów, w przypadku których komunikat jest zabezpieczony dla aplikacji, która otrzymuje komunikat.</span><span class="sxs-lookup"><span data-stu-id="8a37d-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="8a37d-113">Zabezpieczenia transportu wykorzystujące <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> wpływające na sposób zabezpieczania komunikatów usługi MSMQ między kolejką transmisji i kolejką docelową, w której są zabezpieczone:</span><span class="sxs-lookup"><span data-stu-id="8a37d-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
- <span data-ttu-id="8a37d-114">Podpisywanie komunikatu w celu upewnienia się, że nie jest on naruszony.</span><span class="sxs-lookup"><span data-stu-id="8a37d-114">Signing the message to ensure it is not tampered with.</span></span>  
  
- <span data-ttu-id="8a37d-115">Szyfrowanie wiadomości w celu upewnienia się, że nie jest ona widoczna ani naruszona.</span><span class="sxs-lookup"><span data-stu-id="8a37d-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="8a37d-116">Jest to zalecane, ale opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="8a37d-116">This is recommended but optional.</span></span>  
  
- <span data-ttu-id="8a37d-117">Docelowy Menedżer kolejki, który identyfikuje nadawcę wiadomości dla odrzucania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="8a37d-118">W przypadku usługi MSMQ niezależnie od uwierzytelniania kolejka docelowa ma listę kontroli dostępu (ACL), aby sprawdzić, czy klient ma uprawnienia do wysyłania wiadomości do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="8a37d-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="8a37d-119">Aplikacja odbierająca jest również sprawdzana pod kątem uprawnień do odbierania wiadomości z kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="8a37d-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="8a37d-120">Właściwości zabezpieczeń transportu MSMQ usługi WCF</span><span class="sxs-lookup"><span data-stu-id="8a37d-120">WCF MSMQ Transport Security Properties</span></span>  

 <span data-ttu-id="8a37d-121">Usługa MSMQ używa zabezpieczeń systemu Windows do uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="8a37d-122">Używa identyfikatora zabezpieczeń systemu Windows (SID) do identyfikowania klienta i używa usługi katalogowej Active Directory jako urzędu certyfikacji podczas uwierzytelniania klienta.</span><span class="sxs-lookup"><span data-stu-id="8a37d-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="8a37d-123">Wymaga to zainstalowania usługi MSMQ z integracją Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a37d-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="8a37d-124">Ponieważ identyfikator SID domeny systemu Windows jest używany do identyfikowania klienta, ta opcja zabezpieczeń ma znaczenie tylko wtedy, gdy zarówno klient, jak i usługa są częścią tej samej domeny systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="8a37d-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="8a37d-125">Usługa MSMQ zapewnia również możliwość dołączenia certyfikatu do wiadomości, która nie jest zarejestrowana w Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a37d-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="8a37d-126">W takim przypadku gwarantuje to, że wiadomość została podpisana przy użyciu dołączonego certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="8a37d-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="8a37d-127">Program WCF udostępnia obie te opcje w ramach zabezpieczeń transportu usługi MSMQ i są kluczowymi składnikami do zabezpieczenia transportu.</span><span class="sxs-lookup"><span data-stu-id="8a37d-127">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="8a37d-128">Domyślnie zabezpieczenia transportu są włączone.</span><span class="sxs-lookup"><span data-stu-id="8a37d-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="8a37d-129">W poniższych sekcjach opisano szczegółowo właściwości zabezpieczeń transportu powiązane z <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> .</span><span class="sxs-lookup"><span data-stu-id="8a37d-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="8a37d-130">Tryb uwierzytelniania usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="8a37d-130">MSMQ Authentication Mode</span></span>  

 <span data-ttu-id="8a37d-131"><xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A>Określa, czy należy użyć zabezpieczeń domeny systemu Windows lub zabezpieczeń zewnętrznych opartych na certyfikatach w celu zabezpieczenia wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8a37d-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="8a37d-132">W obu trybach uwierzytelniania kanał transportu kolejkowanego WCF używa `CertificateValidationMode` określonego w konfiguracji usługi.</span><span class="sxs-lookup"><span data-stu-id="8a37d-132">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="8a37d-133">Tryb walidacji certyfikatu określa mechanizm służący do sprawdzania poprawności certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="8a37d-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="8a37d-134">Gdy zabezpieczenia transportu są włączone, ustawienie domyślne to <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> .</span><span class="sxs-lookup"><span data-stu-id="8a37d-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="8a37d-135">Tryb uwierzytelniania domeny systemu Windows</span><span class="sxs-lookup"><span data-stu-id="8a37d-135">Windows Domain Authentication Mode</span></span>  

 <span data-ttu-id="8a37d-136">Wybór korzystania z zabezpieczeń systemu Windows wymaga integracji Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a37d-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="8a37d-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> jest domyślnym trybem zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="8a37d-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="8a37d-138">Po ustawieniu tej opcji kanał WCF dołącza identyfikator SID systemu Windows do wiadomości MSMQ i używa certyfikatu wewnętrznego uzyskanego z Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a37d-138">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="8a37d-139">Usługa MSMQ używa tego certyfikatu wewnętrznego do zabezpieczenia wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8a37d-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="8a37d-140">Menedżer kolejki odbioru używa Active Directory do wyszukiwania i znajdowania zgodnego certyfikatu w celu uwierzytelnienia klienta i sprawdza, czy identyfikator SID również jest zgodny z klientem programu.</span><span class="sxs-lookup"><span data-stu-id="8a37d-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="8a37d-141">Ten krok uwierzytelniania jest wykonywany, jeśli certyfikat wewnętrznie wygenerowany w przypadku `WindowsDomain` trybu uwierzytelniania lub zewnętrznie wygenerowany w przypadku `Certificate` trybu uwierzytelniania jest dołączony do komunikatu, nawet jeśli kolejka docelowa nie jest oznaczona jako wymagająca uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8a37d-142">Podczas tworzenia kolejki można oznaczyć kolejkę jako kolejkę uwierzytelnioną, aby wskazać, że kolejka wymaga uwierzytelniania komunikatów wysyłanych przez klienta do kolejki.</span><span class="sxs-lookup"><span data-stu-id="8a37d-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="8a37d-143">Dzięki temu w kolejce nie są akceptowane nieuwierzytelnione komunikaty.</span><span class="sxs-lookup"><span data-stu-id="8a37d-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="8a37d-144">Identyfikator SID dołączony do wiadomości jest również używany do sprawdzania listy ACL kolejki docelowej, aby upewnić się, że klient ma uprawnienia do wysyłania komunikatów do kolejki.</span><span class="sxs-lookup"><span data-stu-id="8a37d-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="8a37d-145">Tryb uwierzytelniania certyfikatu</span><span class="sxs-lookup"><span data-stu-id="8a37d-145">Certificate Authentication Mode</span></span>  

 <span data-ttu-id="8a37d-146">Opcja używania trybu uwierzytelniania certyfikatów nie wymaga integracji Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a37d-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="8a37d-147">W niektórych przypadkach, na przykład gdy usługa MSMQ jest zainstalowana w trybie grupy roboczej (bez integracji Active Directory) lub gdy do wysyłania komunikatów do kolejki jest używany protokół transferu protokołu niezawodnej obsługi komunikatów SOAP (SRMP), tylko <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> działa.</span><span class="sxs-lookup"><span data-stu-id="8a37d-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="8a37d-148">W przypadku wysyłania komunikatu programu WCF z programem <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> kanał WCF nie dołącza identyfikatora SID systemu Windows do wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="8a37d-148">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="8a37d-149">W związku z tym lista ACL kolejki docelowej musi zezwalać na `Anonymous` dostęp użytkowników do kolejki.</span><span class="sxs-lookup"><span data-stu-id="8a37d-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="8a37d-150">Menedżer kolejki odbioru sprawdza, czy wiadomość MSMQ została podpisana przy użyciu certyfikatu, ale nie wykonuje żadnych operacji uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="8a37d-151">Certyfikat z informacjami o oświadczeniach i tożsamości jest wypełniany <xref:System.ServiceModel.ServiceSecurityContext> przez kanał transportowy w kolejce WCF.</span><span class="sxs-lookup"><span data-stu-id="8a37d-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="8a37d-152">Usługa ta może używać tych informacji do wykonywania własnego uwierzytelniania nadawcy.</span><span class="sxs-lookup"><span data-stu-id="8a37d-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="8a37d-153">Poziom ochrony MSMQ</span><span class="sxs-lookup"><span data-stu-id="8a37d-153">MSMQ Protection Level</span></span>  

 <span data-ttu-id="8a37d-154">Poziom ochrony wskazuje, jak chronić komunikat usługi MSMQ, aby upewnić się, że nie został naruszony.</span><span class="sxs-lookup"><span data-stu-id="8a37d-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="8a37d-155">Jest określony we <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="8a37d-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="8a37d-156">Wartość domyślna to <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="8a37d-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="8a37d-157">Podpisz poziom ochrony</span><span class="sxs-lookup"><span data-stu-id="8a37d-157">Sign Protection Level</span></span>  

 <span data-ttu-id="8a37d-158">Komunikat usługi MSMQ jest podpisywany przy użyciu wewnętrznie wygenerowanego certyfikatu podczas korzystania z `WindowsDomain` trybu uwierzytelniania lub certyfikatu wygenerowanego zewnętrznie podczas korzystania z `Certificate` trybu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="8a37d-159">Podpisywanie i szyfrowanie poziomu ochrony</span><span class="sxs-lookup"><span data-stu-id="8a37d-159">Sign and Encrypt Protection Level</span></span>  

 <span data-ttu-id="8a37d-160">Komunikat usługi MSMQ jest podpisywany przy użyciu wewnętrznego wygenerowanego certyfikatu podczas korzystania z `WindowsDomain` trybu uwierzytelniania lub certyfikatu wygenerowanego zewnętrznie podczas korzystania z `Certificate` trybu uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="8a37d-161">Oprócz podpisywania wiadomości komunikat usługi MSMQ jest szyfrowany przy użyciu klucza publicznego certyfikatu uzyskanego z Active Directory należącego do Menedżera kolejki odbioru, który hostuje kolejkę docelową.</span><span class="sxs-lookup"><span data-stu-id="8a37d-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="8a37d-162">Menedżer kolejki wysyłania gwarantuje, że komunikat MSMQ jest szyfrowany podczas przesyłania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="8a37d-163">Menedżer kolejki odbioru odszyfrowuje komunikat usługi MSMQ przy użyciu klucza prywatnego jego certyfikatu wewnętrznego i zapisuje komunikat w kolejce (jeśli jest uwierzytelniany i autoryzowany) w postaci zwykłego tekstu.</span><span class="sxs-lookup"><span data-stu-id="8a37d-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8a37d-164">Aby zaszyfrować komunikat, wymagany jest Active Directory dostęp ( `UseActiveDirectory` Właściwość <xref:System.ServiceModel.NetMsmqBinding> musi być ustawiona na `true` ) i może być używana z obydwoma <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> i <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> .</span><span class="sxs-lookup"><span data-stu-id="8a37d-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="8a37d-165">Brak poziomu ochrony</span><span class="sxs-lookup"><span data-stu-id="8a37d-165">None Protection Level</span></span>  

 <span data-ttu-id="8a37d-166">Jest to implikowane <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> , gdy jest ustawiony na <xref:System.Net.Security.ProtectionLevel.None> .</span><span class="sxs-lookup"><span data-stu-id="8a37d-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="8a37d-167">Nie może to być prawidłowa wartość dla żadnych innych trybów uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="8a37d-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="8a37d-168">Jeśli komunikat usługi MSMQ jest podpisany, usługa MSMQ sprawdza, czy komunikat jest podpisany za pomocą dołączonego certyfikatu (wewnętrznego lub zewnętrznego) niezależnie od stanu kolejki, czyli kolejki uwierzytelnionej.</span><span class="sxs-lookup"><span data-stu-id="8a37d-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="8a37d-169">Algorytm szyfrowania usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="8a37d-169">MSMQ Encryption Algorithm</span></span>  

 <span data-ttu-id="8a37d-170">Algorytm szyfrowania określa algorytm używany do szyfrowania wiadomości MSMQ w sieci.</span><span class="sxs-lookup"><span data-stu-id="8a37d-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="8a37d-171">Ta właściwość jest używana tylko wtedy <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> , gdy jest ustawiona na <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> .</span><span class="sxs-lookup"><span data-stu-id="8a37d-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="8a37d-172">Obsługiwane algorytmy to `RC4Stream` i `AES` i wartość domyślna to `RC4Stream` .</span><span class="sxs-lookup"><span data-stu-id="8a37d-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="8a37d-173">Algorytmu można używać `AES` tylko wtedy, gdy nadawca ma zainstalowaną usługę MSMQ 4,0.</span><span class="sxs-lookup"><span data-stu-id="8a37d-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="8a37d-174">Ponadto kolejka docelowa musi być również hostowana w usłudze MSMQ 4,0.</span><span class="sxs-lookup"><span data-stu-id="8a37d-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="8a37d-175">Algorytm wyznaczania wartości skrótu usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="8a37d-175">MSMQ Hash Algorithm</span></span>  

 <span data-ttu-id="8a37d-176">Algorytm wyznaczania wartości skrótu określa algorytm używany do tworzenia podpisu cyfrowego wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="8a37d-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="8a37d-177">Menedżer kolejki odbioru używa tego samego algorytmu do uwierzytelniania wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="8a37d-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="8a37d-178">Ta właściwość jest używana tylko wtedy <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> , gdy jest ustawiona na <xref:System.Net.Security.ProtectionLevel.Sign> lub <xref:System.Net.Security.ProtectionLevel.EncryptAndSign> .</span><span class="sxs-lookup"><span data-stu-id="8a37d-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="8a37d-179">Obsługiwane algorytmy to `MD5` , `SHA1` , `SHA256` i `SHA512` .</span><span class="sxs-lookup"><span data-stu-id="8a37d-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="8a37d-180">Wartość domyślna to `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="8a37d-180">The default is `SHA1`.</span></span>

 <span data-ttu-id="8a37d-181">Ze względu na kolizje problemów z algorytmem MD5/SHA1 firma Microsoft zaleca SHA256ą lub lepszą.</span><span class="sxs-lookup"><span data-stu-id="8a37d-181">Due to collision problems with MD5/SHA1, Microsoft recommends SHA256 or better.</span></span>
  
## <a name="see-also"></a><span data-ttu-id="8a37d-182">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="8a37d-182">See also</span></span>

- [<span data-ttu-id="8a37d-183">Omówienie kolejek</span><span class="sxs-lookup"><span data-stu-id="8a37d-183">Queues Overview</span></span>](queues-overview.md)
- [<span data-ttu-id="8a37d-184">Pojęcia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="8a37d-184">Security Concepts</span></span>](security-concepts.md)
- [<span data-ttu-id="8a37d-185">Zabezpieczanie usług i klientów</span><span class="sxs-lookup"><span data-stu-id="8a37d-185">Securing Services and Clients</span></span>](securing-services-and-clients.md)
