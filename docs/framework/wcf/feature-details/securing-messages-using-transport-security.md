---
title: Ochrona komunikatów za pomocą zabezpieczeń transportu
ms.date: 03/30/2017
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
author: BrucePerlerMS
manager: mbaldwin
ms.openlocfilehash: 0ab04326404a4b90e30036594a7152e6118c2138
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/04/2018
ms.locfileid: "43556341"
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="d6d1a-102">Ochrona komunikatów za pomocą zabezpieczeń transportu</span><span class="sxs-lookup"><span data-stu-id="d6d1a-102">Securing Messages Using Transport Security</span></span>
<span data-ttu-id="d6d1a-103">W tej sekcji omówiono zabezpieczenia transportu usługi kolejkowania komunikatów (MSMQ) używanego do zabezpieczenia komunikatów wysłanych do kolejki.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d6d1a-104">Przed odczytaniem za pośrednictwem tego tematu, zaleca się przeczytanie [pojęcia dotyczące zabezpieczeń](../../../../docs/framework/wcf/feature-details/security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="d6d1a-104">Before reading through this topic, it is recommended that you read [Security Concepts](../../../../docs/framework/wcf/feature-details/security-concepts.md).</span></span>  
  
 <span data-ttu-id="d6d1a-105">Następująca ilustracja przedstawia model koncepcyjny umieszczonych w kolejce komunikacji przy użyciu usługi Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="d6d1a-105">The following illustration provides a conceptual model of queued communication using Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="d6d1a-106">Ta ilustracja i terminologii służy do wyjaśnienia pojęcia dotyczące zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="d6d1a-107">![Diagram aplikacji w kolejce](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "rozproszonych kolejka rysunek")</span><span class="sxs-lookup"><span data-stu-id="d6d1a-107">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="d6d1a-108">Podczas wysyłania wiadomości w kolejce przy użyciu usługi WCF z <xref:System.ServiceModel.NetMsmqBinding>, wiadomości WCF jest dołączony jako treść wiadomości usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-108">When sending queued messages using WCF with <xref:System.ServiceModel.NetMsmqBinding>, the WCF message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="d6d1a-109">Zabezpieczenia transportu zabezpiecza całą wiadomości usługi MSMQ (nagłówków wiadomości usługi MSMQ lub właściwości i treść wiadomości).</span><span class="sxs-lookup"><span data-stu-id="d6d1a-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="d6d1a-110">Ponieważ jest ona treści wiadomości usługi MSMQ, również za pomocą zabezpieczeń transportu zabezpiecza komunikatów WCF.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-110">Because it is the body of the MSMQ message, using transport security also secures the WCF message.</span></span>  
  
 <span data-ttu-id="d6d1a-111">Kluczową koncepcją za zabezpieczenia transportu jest, że klient ma pod kątem wymagań zabezpieczeń jest wyświetlany komunikat do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="d6d1a-112">Jest to w przeciwieństwie do zabezpieczenia komunikatów, której wiadomość jest zabezpieczona dla aplikacji, która odbiera komunikaty.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="d6d1a-113">Za pomocą zabezpieczeń transportu <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> ma wpływ na sposób zabezpieczonych wiadomości usługi MSMQ w drodze między kolejki transmisji i kolejka docelowa w przypadku, gdy chronione oznacza:</span><span class="sxs-lookup"><span data-stu-id="d6d1a-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
-   <span data-ttu-id="d6d1a-114">Podpisywanie komunikat, aby upewnić się, że nie zostanie naruszony.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-114">Signing the message to ensure it is not tampered with.</span></span>  
  
-   <span data-ttu-id="d6d1a-115">Szyfrowanie wiadomości, aby upewnić się, że nie może być widoczny ani zmodyfikowane.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="d6d1a-116">Jest to zalecane, ale opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-116">This is recommended but optional.</span></span>  
  
-   <span data-ttu-id="d6d1a-117">Menedżer kolejki docelowej identyfikuje nadawcy wiadomości na wyłączność podpisu.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="d6d1a-118">W usłudze MSMQ niezależnie od uwierzytelniania, kolejka docelowa ma listy kontroli dostępu (ACL), aby sprawdzić, czy klient ma uprawnienia do wysyłania wiadomości do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="d6d1a-119">Aplikacja jest również sprawdzane pod kątem uprawnienia do odbierania wiadomości z kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="d6d1a-120">Właściwości zabezpieczeń transportu WCF MSMQ</span><span class="sxs-lookup"><span data-stu-id="d6d1a-120">WCF MSMQ Transport Security Properties</span></span>  
 <span data-ttu-id="d6d1a-121">Usługa MSMQ używa zabezpieczeń Windows do uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="d6d1a-122">Używa Windows identyfikator zabezpieczeń (SID) do identyfikacji klienta i używa usługi Active Directory jako urzędu certyfikacji podczas uwierzytelniania klienta.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="d6d1a-123">Wymaga to usługi MSMQ, które zostaną zainstalowane w integracji usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="d6d1a-124">Ponieważ identyfikator SID domeny Windows są używane do identyfikacji klienta, ta opcja zabezpieczeń jest przydatny tylko wtedy, gdy klient i usługa są częścią tej samej domenie Windows.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="d6d1a-125">Usługa MSMQ także możliwość dołączenia certyfikatu z komunikat, który nie jest zarejestrowany w usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="d6d1a-126">W tym przypadku gwarantuje, że komunikat został podpisany za pomocą dołączonego certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 <span data-ttu-id="d6d1a-127">WCF zapewnia obie te opcje, jako część zabezpieczenia transportu usługi MSMQ i są kluczowe pivot dla zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-127">WCF provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="d6d1a-128">Zabezpieczenia transportu jest domyślnie włączona.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="d6d1a-129">Biorąc pod uwagę te podstawy, następujące sekcje właściwości zabezpieczeń transportu szczegóły powiązane z <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="d6d1a-130">Tryb uwierzytelniania usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="d6d1a-130">MSMQ Authentication Mode</span></span>  
 <span data-ttu-id="d6d1a-131"><xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> Określa, czy ma być używany do zabezpieczenia wiadomości zabezpieczeń domeny Windows lub zewnętrznego zabezpieczenia oparte na certyfikatach.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="d6d1a-132">W obu trybach uwierzytelniania używa kanał transportowy umieszczonych w kolejce WCF `CertificateValidationMode` określony w konfiguracji usługi.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-132">In both authentication modes, the WCF queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="d6d1a-133">Tryb walidacji certyfikatu określa mechanizm służący do sprawdzania poprawności certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="d6d1a-134">Po włączeniu zabezpieczeń transportu jest ustawieniem domyślnym <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="d6d1a-135">Tryb uwierzytelniania systemu Windows domeny</span><span class="sxs-lookup"><span data-stu-id="d6d1a-135">Windows Domain Authentication Mode</span></span>  
 <span data-ttu-id="d6d1a-136">Wybór za pomocą zabezpieczeń Windows wymaga integracji usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="d6d1a-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> jest to domyślny tryb zabezpieczeń transport.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="d6d1a-138">Gdy ta opcja jest ustawiona, kanału WCF dołącza identyfikator SID Windows do wiadomości usługi MSMQ i używa swojego certyfikatu wewnętrznego uzyskane z usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-138">When this is set, the WCF channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="d6d1a-139">Usługa MSMQ używa tego certyfikatu wewnętrznego do zabezpieczenia wiadomości.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="d6d1a-140">Odbieranie Menedżer kolejki używa usługi Active Directory do wyszukiwania i znajdowania zgodnego certyfikatu do uwierzytelniania klienta i sprawdza, czy identyfikator SID również architekturze i językowi klienta.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="d6d1a-141">W tym kroku uwierzytelniania jest wykonywane, jeśli certyfikat, albo wewnętrznie generowane w przypadku właściwości `WindowsDomain` tryb uwierzytelniania lub zewnętrznie generowane w przypadku właściwości `Certificate` tryb uwierzytelniania jest dołączony do wiadomości, nawet jeśli jest kolejka docelowa nie jest oznaczony jako wymagające uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d6d1a-142">Podczas tworzenia kolejki, kolejki można oznaczyć jako uwierzytelniony kolejki, aby wskazać, że kolejka wymaga uwierzytelnienia klienta, wysyłanie komunikatów do kolejki.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="d6d1a-143">Daje to gwarancję, że żadne nieuwierzytelnionych wiadomości są akceptowane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="d6d1a-144">Dołączono identyfikator SID wiadomości służy także do sprawdzania listy ACL do kolejki docelowej, aby upewnić się, że klient ma uprawnienia do wysyłania komunikatów do kolejki.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="d6d1a-145">Tryb uwierzytelniania certyfikatów</span><span class="sxs-lookup"><span data-stu-id="d6d1a-145">Certificate Authentication Mode</span></span>  
 <span data-ttu-id="d6d1a-146">Do wyboru używania trybu uwierzytelniania certyfikatu nie wymaga integracji usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="d6d1a-147">W rzeczywistości w niektórych przypadkach, np. gdy usługa MSMQ jest zainstalowana w trybie grupy roboczej (bez integracji usługi Active Directory) lub przy użyciu protokołu SOAP Reliable Messaging Protocol (SRMP) podczas transferu protokołu, aby wysyłać komunikaty do kolejki, tylko <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> działa.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="d6d1a-148">Podczas wysyłania wiadomości WCF za pomocą <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, kanału usługi WCF nie dołączy Windows SID do wiadomości usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-148">When sending a WCF message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the WCF channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="d6d1a-149">W efekcie kolejka docelowa listy ACL musi umożliwiać korzystanie z `Anonymous` dostęp użytkowników do wysłania do kolejki.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="d6d1a-150">Menedżera kolejki odbierającej sprawdza, czy wiadomości usługi MSMQ została podpisana przy użyciu certyfikatu, ale nie wykonuje żadnego uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="d6d1a-151">Certyfikat z oświadczenia i informacje o tożsamości jest wypełniana w <xref:System.ServiceModel.ServiceSecurityContext> przez kanał transportowy umieszczonych w kolejce usługi WCF.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the WCF queued transport channel.</span></span> <span data-ttu-id="d6d1a-152">Usługa może wykorzystać te informacje do wykonania własnym uwierzytelnianiem nadawcy.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="d6d1a-153">Poziom ochrony usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="d6d1a-153">MSMQ Protection Level</span></span>  
 <span data-ttu-id="d6d1a-154">Jak chronić wiadomości usługi MSMQ, aby upewnić się, że nie jest modyfikowany od połączenia z opisywanym poziom ochrony.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="d6d1a-155">Jest ono określone w <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="d6d1a-156">Wartość domyślna to <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="d6d1a-157">Poziom ochrony logowania</span><span class="sxs-lookup"><span data-stu-id="d6d1a-157">Sign Protection Level</span></span>  
 <span data-ttu-id="d6d1a-158">Wiadomości usługi MSMQ jest podpisany przy użyciu certyfikatu wewnętrznie generowane, gdy za pomocą `WindowsDomain` tryb uwierzytelniania lub zewnętrznie wygenerowany certyfikat, korzystając z `Certificate` tryb uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="d6d1a-159">Podpisywanie i szyfrowanie poziom ochrony</span><span class="sxs-lookup"><span data-stu-id="d6d1a-159">Sign and Encrypt Protection Level</span></span>  
 <span data-ttu-id="d6d1a-160">Wiadomości usługi MSMQ jest podpisany przy użyciu certyfikatu wewnętrznie generowane, gdy za pomocą `WindowsDomain` tryb uwierzytelniania lub zewnętrznie wygenerowany certyfikat, korzystając z `Certificate` tryb uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="d6d1a-161">Oprócz podpisywania wiadomości, wiadomości usługi MSMQ są szyfrowane za pomocą klucza publicznego certyfikatu uzyskanego z usługi Active Directory, należącego do odbieranie menedżera kolejek, który jest hostem kolejka docelowa.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="d6d1a-162">Menedżer kolejki wysyłania gwarantuje, że wiadomości usługi MSMQ są szyfrowane podczas przesyłania.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="d6d1a-163">Odbieranie Menedżer kolejki odszyfrowuje wiadomości usługi MSMQ, za pomocą klucza prywatnego jego certyfikatu wewnętrznego i zapisuje komunikat w kolejce (Jeśli uwierzytelnianie i autoryzowanie) w postaci zwykłego tekstu.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d6d1a-164">Aby zaszyfrować wiadomości, wymagany jest dostęp usługi Active Directory (`UseActiveDirectory` właściwość <xref:System.ServiceModel.NetMsmqBinding> musi być równa `true`) i mogą być używane z obu <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> i <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="d6d1a-165">Brak poziomów ochrony</span><span class="sxs-lookup"><span data-stu-id="d6d1a-165">None Protection Level</span></span>  
 <span data-ttu-id="d6d1a-166">To jest implikowane przy <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> ustawiono <xref:System.Net.Security.ProtectionLevel.None>.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="d6d1a-167">Nie może to być prawidłową wartością dla innych trybów uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d6d1a-168">W przypadku wiadomości usługi MSMQ jest podpisany, MSMQ sprawdza, czy komunikat jest podpisany za pomocą dołączonego certyfikatu (wewnętrznego lub zewnętrznego), niezależnie od stanu, kolejki, czyli uwierzytelnianego kolejki lub nie.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="d6d1a-169">Algorytm szyfrowania usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="d6d1a-169">MSMQ Encryption Algorithm</span></span>  
 <span data-ttu-id="d6d1a-170">Algorytm szyfrowania określa algorytm używany do szyfrowania wiadomości usługi MSMQ na łączu.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="d6d1a-171">Ta właściwość jest używana tylko wtedy, gdy <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> ustawiono <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="d6d1a-172">Są obsługiwane algorytmy `RC4Stream` i `AES` i wartość domyślna to `RC4Stream`.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="d6d1a-173">Możesz użyć `AES` algorytm tylko wtedy, gdy nadawca został zainstalowany w usłudze MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="d6d1a-174">Ponadto kolejka docelowa musi być hostowany w usłudze MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="d6d1a-175">Algorytm wyznaczania wartości skrótu usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="d6d1a-175">MSMQ Hash Algorithm</span></span>  
 <span data-ttu-id="d6d1a-176">Algorytm wyznaczania wartości skrótu Określa algorytm używany do tworzenia podpisu cyfrowego wiadomości usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="d6d1a-177">Odbieranie Menedżer kolejki używa tego samego algorytmu do uwierzytelniania wiadomości usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="d6d1a-178">Ta właściwość jest używana tylko wtedy, gdy <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> ustawiono <xref:System.Net.Security.ProtectionLevel.Sign> lub <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="d6d1a-179">Są obsługiwane algorytmy `MD5`, `SHA1`, `SHA256`, i `SHA512`.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="d6d1a-180">Wartość domyślna to `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="d6d1a-180">The default is `SHA1`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d6d1a-181">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="d6d1a-181">See Also</span></span>  
 [<span data-ttu-id="d6d1a-182">Usługa kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="d6d1a-182">Message Queuing</span></span>](https://msdn.microsoft.com/library/ff917e87-05d5-478f-9430-0f560675ece1)  
 [<span data-ttu-id="d6d1a-183">Pojęcia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="d6d1a-183">Security Concepts</span></span>](../../../../docs/framework/wcf/feature-details/security-concepts.md)  
 [<span data-ttu-id="d6d1a-184">Zabezpieczanie usług i klientów</span><span class="sxs-lookup"><span data-stu-id="d6d1a-184">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
