---
title: "Ochrona komunikatów za pomocą zabezpieczeń transportu"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 9029771a-097e-448a-a13a-55d2878330b8
caps.latest.revision: "21"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload: dotnet
ms.openlocfilehash: 461ec7d3cda41194317054ca2413b99f39ebda2c
ms.sourcegitcommit: c0dd436f6f8f44dc80dc43b07f6841a00b74b23f
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/19/2018
---
# <a name="securing-messages-using-transport-security"></a><span data-ttu-id="89326-102">Ochrona komunikatów za pomocą zabezpieczeń transportu</span><span class="sxs-lookup"><span data-stu-id="89326-102">Securing Messages Using Transport Security</span></span>
<span data-ttu-id="89326-103">W tej sekcji omówiono zabezpieczenia transportu usługi kolejkowania komunikatów (MSMQ), który służy do zabezpieczania komunikatów wysłanych do kolejki.</span><span class="sxs-lookup"><span data-stu-id="89326-103">This section discusses Message Queuing (MSMQ) transport security that you can use to secure messages sent to a queue.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="89326-104">Przed przeczytaniem za pośrednictwem tego tematu, zaleca się przeczytanie [pojęcia dotyczące zabezpieczeń](../../../../docs/framework/wcf/feature-details/security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="89326-104">Before reading through this topic, it is recommended that you read [Security Concepts](../../../../docs/framework/wcf/feature-details/security-concepts.md).</span></span>  
  
 <span data-ttu-id="89326-105">Następująca ilustracja przedstawia model koncepcyjny umieszczonych w kolejce komunikacji przy użyciu [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="89326-105">The following illustration provides a conceptual model of queued communication using [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span> <span data-ttu-id="89326-106">Ta ilustracja i terminologia służy do opisano pojęcia zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="89326-106">This illustration and terminology is used to explain transport security concepts.</span></span>  
  
 <span data-ttu-id="89326-107">![Diagram aplikacji w kolejce](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "rozproszonych kolejki — rysunek")</span><span class="sxs-lookup"><span data-stu-id="89326-107">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="89326-108">Podczas wysyłania wiadomości z kolejki przy użyciu [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] z <xref:System.ServiceModel.NetMsmqBinding>, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] wiadomości jest dołączony jako treść wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="89326-108">When sending queued messages using [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] with <xref:System.ServiceModel.NetMsmqBinding>, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message is attached as a body of the MSMQ message.</span></span> <span data-ttu-id="89326-109">Zabezpieczenia transportu zabezpiecza cały wiadomości MSMQ (nagłówki wiadomości usługi MSMQ lub właściwości i treść komunikatu).</span><span class="sxs-lookup"><span data-stu-id="89326-109">Transport security secures the entire MSMQ message (MSMQ message headers or properties and the message body).</span></span> <span data-ttu-id="89326-110">Treść wiadomości MSMQ, dlatego też za pomocą zabezpieczeń transportu zabezpiecza [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] wiadomości.</span><span class="sxs-lookup"><span data-stu-id="89326-110">Because it is the body of the MSMQ message, using transport security also secures the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message.</span></span>  
  
 <span data-ttu-id="89326-111">Koncepcja klucza za zabezpieczeń transportu jest, że klient musi spełniać wymagania dotyczące zabezpieczeń na komunikat do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="89326-111">The key concept behind transport security is that the client has to meet security requirements to get the message to the target queue.</span></span> <span data-ttu-id="89326-112">W przeciwieństwie do zabezpieczenia komunikatów to, gdy wiadomość jest zabezpieczona dla aplikacji, która odbiera wiadomości.</span><span class="sxs-lookup"><span data-stu-id="89326-112">This is unlike Message security, where the message is secured for the application that receives the message.</span></span>  
  
 <span data-ttu-id="89326-113">Za pomocą zabezpieczeń transportu <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> ma wpływ na sposób zabezpieczonych wiadomości usługi MSMQ podczas przesyłania danych między kolejki transmisji i kolejki docelowej w przypadku, gdy zabezpieczone oznacza:</span><span class="sxs-lookup"><span data-stu-id="89326-113">Transport security using <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding> impacts how MSMQ messages are secured in-transit between the transmission queue and the target queue where secured implies:</span></span>  
  
-   <span data-ttu-id="89326-114">Podpisywanie komunikat, aby upewnić się, że nie jest modyfikowany.</span><span class="sxs-lookup"><span data-stu-id="89326-114">Signing the message to ensure it is not tampered with.</span></span>  
  
-   <span data-ttu-id="89326-115">Szyfrowanie wiadomości, aby upewnić się, że nie może być widoczne ani przez osoby niepowołane.</span><span class="sxs-lookup"><span data-stu-id="89326-115">Encrypting the message to ensure that it cannot be seen or tampered with.</span></span> <span data-ttu-id="89326-116">Jest to zalecane, ale opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="89326-116">This is recommended but optional.</span></span>  
  
-   <span data-ttu-id="89326-117">Menedżera kolejki docelowej identyfikuje nadawcy wiadomości na wyłączność podpisu.</span><span class="sxs-lookup"><span data-stu-id="89326-117">The target queue manager that identifies the sender of the message for non-repudiation.</span></span>  
  
 <span data-ttu-id="89326-118">W usłudze MSMQ niezależnie od uwierzytelniania, kolejka docelowa ma listy kontroli dostępu (ACL), aby sprawdzić, czy klient ma uprawnienia do wysyłania wiadomości do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="89326-118">In MSMQ, independent of authentication, the target queue has an access control list (ACL) to check whether the client has permission to send the message to the target queue.</span></span> <span data-ttu-id="89326-119">Aplikacja jest również sprawdzane pod kątem uprawnienia do odbierania wiadomości z kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="89326-119">The receiving application is also checked for permission to receive the message from the target queue.</span></span>  
  
## <a name="wcf-msmq-transport-security-properties"></a><span data-ttu-id="89326-120">Właściwości zabezpieczeń transportu WCF MSMQ</span><span class="sxs-lookup"><span data-stu-id="89326-120">WCF MSMQ Transport Security Properties</span></span>  
 <span data-ttu-id="89326-121">Usługa MSMQ do uwierzytelniania używa zabezpieczenia systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="89326-121">MSMQ uses Windows security for authentication.</span></span> <span data-ttu-id="89326-122">Używa identyfikatora zabezpieczeń systemu Windows (SID) w celu identyfikacji klienta, a używa usługi katalogowej Active Directory jako urząd certyfikacji do uwierzytelniania klienta.</span><span class="sxs-lookup"><span data-stu-id="89326-122">It uses the Windows security identifier (SID) to identify the client and uses Active Directory directory service as the certificate authority when authenticating the client.</span></span> <span data-ttu-id="89326-123">Wymaga usługi MSMQ, które zostaną zainstalowane w integracji usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="89326-123">This requires MSMQ to be installed with Active Directory integration.</span></span> <span data-ttu-id="89326-124">Ponieważ identyfikator SID domeny systemu Windows są używane do identyfikacji klienta, ta opcja zabezpieczeń jest przydatny tylko wtedy, gdy klient i usługa są częścią tej samej domeny systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="89326-124">Because the Windows domain SID is used to identify the client, this security option is only meaningful when both the client and service are part of the same Windows domain.</span></span>  
  
 <span data-ttu-id="89326-125">Usługa MSMQ także możliwość dołączenia certyfikatu z komunikat, który nie jest zarejestrowany w usłudze Active Directory.</span><span class="sxs-lookup"><span data-stu-id="89326-125">MSMQ also provides the ability to attach a certificate with the message that is not registered with Active Directory.</span></span> <span data-ttu-id="89326-126">W takim przypadku gwarantuje, że komunikat był podpisany przy użyciu certyfikatu dołączone.</span><span class="sxs-lookup"><span data-stu-id="89326-126">In this case, it ensures that the message was signed using the attached certificate.</span></span>  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="89326-127">udostępnia obie te opcje jako część usługi MSMQ transportu zabezpieczeń i są one klucza pivot zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="89326-127"> provides both these options as part of MSMQ transport security and they are the key pivot for transport security.</span></span>  
  
 <span data-ttu-id="89326-128">Zabezpieczenia transportu jest domyślnie włączona.</span><span class="sxs-lookup"><span data-stu-id="89326-128">By default, transport security is turned on.</span></span>  
  
 <span data-ttu-id="89326-129">Podana tych podstaw, w poniższych sekcjach przedstawiono właściwości zabezpieczeń transportu szczegółów powiązany z <xref:System.ServiceModel.NetMsmqBinding> i <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="89326-129">Given these basics, the following sections detail transport security properties bundled with <xref:System.ServiceModel.NetMsmqBinding> and <xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span>  
  
#### <a name="msmq-authentication-mode"></a><span data-ttu-id="89326-130">Tryb uwierzytelniania usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="89326-130">MSMQ Authentication Mode</span></span>  
 <span data-ttu-id="89326-131"><xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> Określa, czy ma być używany do zabezpieczenia wiadomości zabezpieczeń domeny systemu Windows lub zewnętrznego zabezpieczeń oparte na certyfikatach.</span><span class="sxs-lookup"><span data-stu-id="89326-131">The <xref:System.ServiceModel.MsmqTransportSecurity.MsmqAuthenticationMode%2A> dictates whether to use the Windows domain security or an external certificate-based security to secure the message.</span></span> <span data-ttu-id="89326-132">W obu tych trybach uwierzytelniania [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] używa kanał transportu umieszczonych w kolejce `CertificateValidationMode` określony w konfiguracji usługi.</span><span class="sxs-lookup"><span data-stu-id="89326-132">In both authentication modes, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] queued transport channel uses the `CertificateValidationMode` specified in the service configuration.</span></span> <span data-ttu-id="89326-133">Tryb walidacji certyfikatu określa mechanizm używany do sprawdzania poprawności certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="89326-133">The certificate validation mode specifies the mechanism used to check the validity of the certificate.</span></span>  
  
 <span data-ttu-id="89326-134">Po włączeniu zabezpieczeń transportu jest ustawieniem domyślnym <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="89326-134">When transport security is turned on, the default setting is <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="windows-domain-authentication-mode"></a><span data-ttu-id="89326-135">Tryb uwierzytelniania domeny systemu Windows</span><span class="sxs-lookup"><span data-stu-id="89326-135">Windows Domain Authentication Mode</span></span>  
 <span data-ttu-id="89326-136">Wybór przy użyciu zabezpieczeń systemu Windows wymaga integracji usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="89326-136">The choice of using Windows security requires Active Directory integration.</span></span> <span data-ttu-id="89326-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>jest to domyślny tryb zabezpieczeń transport.</span><span class="sxs-lookup"><span data-stu-id="89326-137"><xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain> is the default transport security mode.</span></span> <span data-ttu-id="89326-138">Gdy ta opcja jest ustawiona, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kanału dołącza do wiadomości MSMQ identyfikatora SID systemu Windows i używa swojego certyfikatu wewnętrznego uzyskane z usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="89326-138">When this is set, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel attaches the Windows SID to the MSMQ message and uses its internal certificate obtained from Active Directory.</span></span> <span data-ttu-id="89326-139">Usługa MSMQ używa tego certyfikatu wewnętrznego do zabezpieczenia wiadomości.</span><span class="sxs-lookup"><span data-stu-id="89326-139">MSMQ uses this internal certificate to secure the message.</span></span> <span data-ttu-id="89326-140">Odbierającego menedżera kolejek używa usługi Active Directory można wyszukiwać i znalezienia zgodnego certyfikatu uwierzytelniania klienta i sprawdza, czy identyfikator SID również zgodna z wersją klienta.</span><span class="sxs-lookup"><span data-stu-id="89326-140">The receiving queue manager uses Active Directory to search and find a matching certificate to authenticate the client and checks that the SID also matches that of the client.</span></span> <span data-ttu-id="89326-141">Ten krok uwierzytelniania jest wykonywana w przypadku certyfikatu, albo zostały wygenerowane wewnętrznie w odniesieniu `WindowsDomain` tryb uwierzytelniania lub zewnętrznie wygenerowanych w odniesieniu `Certificate` tryb uwierzytelniania jest dołączony do wiadomości, nawet jeśli jest kolejka docelowa nie jest oznaczone jako wymagające uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="89326-141">This authentication step is executed if a certificate, either internally generated in the case of `WindowsDomain` authentication mode or externally generated in the case of `Certificate` authentication mode, is attached to the message even if the target queue is not marked as requiring authentication.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="89326-142">Podczas tworzenia kolejki, kolejki można oznaczyć jako uwierzytelniony kolejki, aby wskazać, że kolejka wymaga uwierzytelnienia klienta, wysyłanie komunikatów do kolejki.</span><span class="sxs-lookup"><span data-stu-id="89326-142">When creating a queue, you can mark the queue as an authenticated queue to indicate that the queue requires authentication of the client sending messages to the queue.</span></span> <span data-ttu-id="89326-143">Dzięki temu, że nie nieuwierzytelnione komunikaty są akceptowane w kolejce.</span><span class="sxs-lookup"><span data-stu-id="89326-143">This ensures that no unauthenticated messages are accepted in the queue.</span></span>  
  
 <span data-ttu-id="89326-144">Identyfikator SID podłączonych do komunikatu służy również do sprawdzania zgodności ACL kolejki docelowej, aby upewnić się, że klient ma uprawnienia do wysyłania wiadomości do kolejki.</span><span class="sxs-lookup"><span data-stu-id="89326-144">The SID attached with the message is also used to check against the target queue's ACL to ensure that the client has the authority to send messages to the queue.</span></span>  
  
#### <a name="certificate-authentication-mode"></a><span data-ttu-id="89326-145">Tryb uwierzytelniania certyfikatów</span><span class="sxs-lookup"><span data-stu-id="89326-145">Certificate Authentication Mode</span></span>  
 <span data-ttu-id="89326-146">Wybór przy użyciu trybu uwierzytelniania certyfikatu nie wymaga integracji usługi Active Directory.</span><span class="sxs-lookup"><span data-stu-id="89326-146">The choice of using certificate authentication mode does not require Active Directory integration.</span></span> <span data-ttu-id="89326-147">W rzeczywistości w niektórych przypadkach, takich jak kiedy usługa MSMQ jest zainstalowana w trybie grupy roboczej (bez integracji usługi Active Directory) lub gdy przy użyciu protokołu SOAP Reliable Messaging Protocol (SRMP) transfer protocol do wysyłania wiadomości do kolejki, tylko <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> działa.</span><span class="sxs-lookup"><span data-stu-id="89326-147">In fact, in some cases, such as when MSMQ is installed in workgroup mode (without Active Directory integration) or when using the SOAP Reliable Messaging Protocol (SRMP) transfer protocol to send messages to the queue, only <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> works.</span></span>  
  
 <span data-ttu-id="89326-148">Podczas wysyłania [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] komunikatów z <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kanału nie dołączyć identyfikatora SID systemu Windows do wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="89326-148">When sending a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message with <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate>, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel does not attach a Windows SID to the MSMQ message.</span></span> <span data-ttu-id="89326-149">Tak, kolejka docelowa ACL musi umożliwić `Anonymous` użytkownikowi dostęp do wysyłania do kolejki.</span><span class="sxs-lookup"><span data-stu-id="89326-149">As such, the target queue ACL must allow for `Anonymous` user access to send to the queue.</span></span> <span data-ttu-id="89326-150">Odbierającego menedżera kolejek sprawdza, czy wiadomości MSMQ została podpisana przy użyciu certyfikatu, ale nie wykonuje żadnego uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="89326-150">The receiving queue manager checks whether the MSMQ message was signed with the certificate but does not perform any authentication.</span></span>  
  
 <span data-ttu-id="89326-151">Certyfikat z jego oświadczenia i informacje o tożsamości jest wypełniana w <xref:System.ServiceModel.ServiceSecurityContext> przez [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] w kolejce kanał transportu.</span><span class="sxs-lookup"><span data-stu-id="89326-151">The certificate with its claims and identity information is populated in the <xref:System.ServiceModel.ServiceSecurityContext> by the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] queued transport channel.</span></span> <span data-ttu-id="89326-152">Usługa może wykorzystać te informacje do jego własnej uwierzytelniania nadawcy.</span><span class="sxs-lookup"><span data-stu-id="89326-152">The service can use this information to perform its own authentication of the sender.</span></span>  
  
### <a name="msmq-protection-level"></a><span data-ttu-id="89326-153">Poziom ochrony usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="89326-153">MSMQ Protection Level</span></span>  
 <span data-ttu-id="89326-154">Poziom ochrony mówią, jak chronić wiadomości MSMQ, aby upewnić się, że nie jest modyfikowany od.</span><span class="sxs-lookup"><span data-stu-id="89326-154">The protection level dictates how to protect the MSMQ message to ensure that it is not tampered with.</span></span> <span data-ttu-id="89326-155">Jest on określony w <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="89326-155">It is specified in the <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> property.</span></span> <span data-ttu-id="89326-156">Wartość domyślna to <xref:System.Net.Security.ProtectionLevel.Sign>.</span><span class="sxs-lookup"><span data-stu-id="89326-156">The default value is <xref:System.Net.Security.ProtectionLevel.Sign>.</span></span>  
  
#### <a name="sign-protection-level"></a><span data-ttu-id="89326-157">Poziom ochrony logowania</span><span class="sxs-lookup"><span data-stu-id="89326-157">Sign Protection Level</span></span>  
 <span data-ttu-id="89326-158">Wiadomości MSMQ jest podpisany przy użyciu wewnętrznie wygenerowanego certyfikatu, używając `WindowsDomain` tryb uwierzytelniania lub zewnętrznie wygenerowany certyfikat, używając `Certificate` tryb uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="89326-158">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or an externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
#### <a name="sign-and-encrypt-protection-level"></a><span data-ttu-id="89326-159">Podpisywanie i szyfrowanie z poziomu ochrony</span><span class="sxs-lookup"><span data-stu-id="89326-159">Sign and Encrypt Protection Level</span></span>  
 <span data-ttu-id="89326-160">Wiadomości MSMQ jest podpisany przy użyciu wewnętrznie wygenerowanego certyfikatu, używając `WindowsDomain` tryb uwierzytelniania lub zewnętrznie wygenerowany certyfikat przy użyciu `Certificate` tryb uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="89326-160">The MSMQ message is signed using the internally generated certificate when using `WindowsDomain` authentication mode or externally generated certificate when using `Certificate` authentication mode.</span></span>  
  
 <span data-ttu-id="89326-161">Oprócz podpisywania wiadomości, wiadomości usługi MSMQ są szyfrowane za pomocą klucza publicznego certyfikatu uzyskanego z usługi Active Directory należy odbierającego menedżera kolejek obsługującego kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="89326-161">In addition to signing the message, the MSMQ message is encrypted using the public key of the certificate obtained from Active Directory that belongs to the receiving queue manager that hosts the target queue.</span></span> <span data-ttu-id="89326-162">Wysyłanie menedżera kolejek zapewnia, że wiadomości usługi MSMQ są szyfrowane podczas przesyłania.</span><span class="sxs-lookup"><span data-stu-id="89326-162">The sending queue manager ensures that the MSMQ message is encrypted in transit.</span></span> <span data-ttu-id="89326-163">Odbierającego menedżera kolejek odszyfrowuje wiadomości MSMQ przy użyciu klucza prywatnego jego wewnętrznego certyfikatu i przechowuje wiadomości w kolejce (jeśli uwierzytelnieniu i autoryzacji) w postaci zwykłego tekstu.</span><span class="sxs-lookup"><span data-stu-id="89326-163">The receiving queue manager decrypts the MSMQ message using the private key of its internal certificate and stores the message in the queue (if authenticated and authorized) in clear text.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="89326-164">Do szyfrowania wiadomości, wymagany jest dostęp do usługi Active Directory (`UseActiveDirectory` właściwość <xref:System.ServiceModel.NetMsmqBinding> musi mieć ustawioną `true`) i może być używany z obu <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> i <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span><span class="sxs-lookup"><span data-stu-id="89326-164">To encrypt the message, Active Directory access is required (`UseActiveDirectory` property of <xref:System.ServiceModel.NetMsmqBinding> must be set to `true`) and can be used with both <xref:System.ServiceModel.MsmqAuthenticationMode.Certificate> and <xref:System.ServiceModel.MsmqAuthenticationMode.WindowsDomain>.</span></span>  
  
#### <a name="none-protection-level"></a><span data-ttu-id="89326-165">Brak poziomu ochrony</span><span class="sxs-lookup"><span data-stu-id="89326-165">None Protection Level</span></span>  
 <span data-ttu-id="89326-166">Jest to domyślna podczas <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> ma ustawioną wartość <xref:System.Net.Security.ProtectionLevel.None>.</span><span class="sxs-lookup"><span data-stu-id="89326-166">This is implied when <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.None>.</span></span> <span data-ttu-id="89326-167">Nie może to być prawidłową wartością dla innych metod uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="89326-167">This cannot be a valid value for any other authentication modes.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="89326-168">Jeśli wiadomość MSMQ jest podpisana, MSMQ sprawdza, czy komunikat jest podpisany za pomocą dołączonego certyfikatu lub nie (wewnętrzne lub zewnętrzne) niezależnie od stan kolejki, czyli uwierzytelnianego kolejki.</span><span class="sxs-lookup"><span data-stu-id="89326-168">If the MSMQ message is signed, MSMQ checks whether the message is signed with the attached certificate (internal or external) independent of the state of the queue, that is, authenticated queue or not.</span></span>  
  
### <a name="msmq-encryption-algorithm"></a><span data-ttu-id="89326-169">Algorytm szyfrowania usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="89326-169">MSMQ Encryption Algorithm</span></span>  
 <span data-ttu-id="89326-170">Algorytm szyfrowania określa algorytm używany do szyfrowania wiadomości MSMQ w sieci.</span><span class="sxs-lookup"><span data-stu-id="89326-170">The encryption algorithm specifies the algorithm to use to encrypt the MSMQ message on the wire.</span></span> <span data-ttu-id="89326-171">Ta właściwość jest używana tylko wtedy, gdy <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> ma ustawioną wartość <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="89326-171">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="89326-172">Są obsługiwane algorytmy `RC4Stream` i `AES` , a wartość domyślna to `RC4Stream`.</span><span class="sxs-lookup"><span data-stu-id="89326-172">The supported algorithms are `RC4Stream` and `AES` and the default is `RC4Stream`.</span></span>  
  
 <span data-ttu-id="89326-173">Można użyć `AES` algorytm tylko wtedy, gdy nadawca zainstalowaną MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="89326-173">You can use the `AES` algorithm only if the sender has MSMQ 4.0 installed.</span></span> <span data-ttu-id="89326-174">Ponadto kolejka docelowa musi być hostowany na MSMQ 4.0.</span><span class="sxs-lookup"><span data-stu-id="89326-174">In addition, the target queue must also be hosted on MSMQ 4.0.</span></span>  
  
### <a name="msmq-hash-algorithm"></a><span data-ttu-id="89326-175">Algorytm wyznaczania wartości skrótu usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="89326-175">MSMQ Hash Algorithm</span></span>  
 <span data-ttu-id="89326-176">Algorytm wyznaczania wartości skrótu Określa algorytm używany do tworzenia podpisu cyfrowego wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="89326-176">The hash algorithm specifies the algorithm used to create a digital signature of the MSMQ message.</span></span> <span data-ttu-id="89326-177">Odbierającego menedżera kolejek używa tego samego algorytmu do uwierzytelniania wiadomości MSMQ.</span><span class="sxs-lookup"><span data-stu-id="89326-177">The receiving queue manager uses this same algorithm to authenticate the MSMQ message.</span></span> <span data-ttu-id="89326-178">Ta właściwość jest używana tylko wtedy, gdy <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> ustawiono <xref:System.Net.Security.ProtectionLevel.Sign> lub <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span><span class="sxs-lookup"><span data-stu-id="89326-178">This property is used only if <xref:System.ServiceModel.MsmqTransportSecurity.MsmqProtectionLevel%2A> is set to <xref:System.Net.Security.ProtectionLevel.Sign> or <xref:System.Net.Security.ProtectionLevel.EncryptAndSign>.</span></span>  
  
 <span data-ttu-id="89326-179">Są obsługiwane algorytmy `MD5`, `SHA1`, `SHA256`, i `SHA512`.</span><span class="sxs-lookup"><span data-stu-id="89326-179">The supported algorithms are `MD5`, `SHA1`, `SHA256`, and `SHA512`.</span></span> <span data-ttu-id="89326-180">Wartość domyślna to `SHA1`.</span><span class="sxs-lookup"><span data-stu-id="89326-180">The default is `SHA1`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="89326-181">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="89326-181">See Also</span></span>  
 [<span data-ttu-id="89326-182">Usługi kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="89326-182">Message Queuing</span></span>](http://msdn.microsoft.com/library/ff917e87-05d5-478f-9430-0f560675ece1)  
 [<span data-ttu-id="89326-183">Pojęcia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="89326-183">Security Concepts</span></span>](../../../../docs/framework/wcf/feature-details/security-concepts.md)  
 [<span data-ttu-id="89326-184">Zabezpieczanie usług i klientów</span><span class="sxs-lookup"><span data-stu-id="89326-184">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
