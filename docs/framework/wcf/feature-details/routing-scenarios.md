---
title: Scenariusze routingu
ms.date: 03/30/2017
helpviewer_keywords:
- routing [WCF], scenarios
ms.assetid: ec22f308-665a-413e-9f94-7267cb665dab
ms.openlocfilehash: 334e9fe7ca6931f87c75023f3322638b36001b6a
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/22/2019
ms.locfileid: "69923065"
---
# <a name="routing-scenarios"></a><span data-ttu-id="e2e55-102">Scenariusze routingu</span><span class="sxs-lookup"><span data-stu-id="e2e55-102">Routing Scenarios</span></span>
<span data-ttu-id="e2e55-103">Mimo że usługa routingu jest wysoce dostosowywana, może być wyzwaniem do projektowania wydajnej logiki routingu podczas tworzenia nowej konfiguracji od podstaw.</span><span class="sxs-lookup"><span data-stu-id="e2e55-103">While the Routing Service is highly customizable, it can be a challenge to design efficient routing logic when creating a new configuration from scratch.</span></span>  <span data-ttu-id="e2e55-104">Istnieje jednak kilka typowych scenariuszy, w których obowiązują większość konfiguracji usługi routingu.</span><span class="sxs-lookup"><span data-stu-id="e2e55-104">However, there are several common scenarios that most Routing Service configurations follow.</span></span> <span data-ttu-id="e2e55-105">Chociaż te scenariusze mogą nie dotyczyć konkretnej konfiguracji, zrozumienie, w jaki sposób usługa routingu może być skonfigurowana do obsługi tych scenariuszy, pomoże Ci w zrozumieniu usługi routingu.</span><span class="sxs-lookup"><span data-stu-id="e2e55-105">While these scenarios may not apply directly to your specific configuration, understanding how the Routing Service can be configured to handle these scenarios will aid you in understanding the Routing Service.</span></span>  
  
## <a name="common-scenarios"></a><span data-ttu-id="e2e55-106">Typowe scenariusze</span><span class="sxs-lookup"><span data-stu-id="e2e55-106">Common Scenarios</span></span>  
 <span data-ttu-id="e2e55-107">Najbardziej podstawowym zastosowaniem usługi routingu jest agregowanie wielu docelowych punktów końcowych w celu zmniejszenia liczby punktów końcowych narażonych na aplikacje klienckie, a następnie użycie filtrów komunikatów do kierowania poszczególnych komunikatów do właściwych miejsc docelowych.</span><span class="sxs-lookup"><span data-stu-id="e2e55-107">The most basic use of the Routing Service is to aggregate multiple destination endpoints to reduce the number of endpoints exposed to the client applications, and then use message filters to route each message to the correct destination.</span></span> <span data-ttu-id="e2e55-108">Komunikaty mogą być kierowane na podstawie wymagań związanych z przetwarzaniem logicznym lub fizycznym, takich jak typ komunikatu, który musi być przetwarzany przez określoną usługę lub na podstawie dowolnych potrzeb firmy, takich jak zapewnienie priorytetowego przetwarzania komunikatów z określonego źródła.</span><span class="sxs-lookup"><span data-stu-id="e2e55-108">Messages may be routed based on logical or physical processing requirements, such as a message type that must be processed by a specific service, or based on arbitrary business needs such as providing priority processing of messages from a specific source.</span></span> <span data-ttu-id="e2e55-109">W poniższej tabeli wymieniono niektóre typowe scenariusze i czas ich wystąpienia:</span><span class="sxs-lookup"><span data-stu-id="e2e55-109">The following table lists some of the common scenarios and when they are encountered:</span></span>  
  
|<span data-ttu-id="e2e55-110">Scenariusz</span><span class="sxs-lookup"><span data-stu-id="e2e55-110">Scenario</span></span>|<span data-ttu-id="e2e55-111">Użyj, gdy</span><span class="sxs-lookup"><span data-stu-id="e2e55-111">Use when</span></span>|  
|--------------|--------------|  
|<span data-ttu-id="e2e55-112">Przechowywanie wersji usługi</span><span class="sxs-lookup"><span data-stu-id="e2e55-112">Service versioning</span></span>|<span data-ttu-id="e2e55-113">Musisz obsługiwać wiele wersji usługi lub w przyszłości wdrożyć zaktualizowaną usługę</span><span class="sxs-lookup"><span data-stu-id="e2e55-113">You need to support multiple versions of a service or may deploy an updated service in the future</span></span>|  
|<span data-ttu-id="e2e55-114">Partycjonowanie danych usługi</span><span class="sxs-lookup"><span data-stu-id="e2e55-114">Service data partitioning</span></span>|<span data-ttu-id="e2e55-115">Należy podzielić na partycje usługi na wielu hostach</span><span class="sxs-lookup"><span data-stu-id="e2e55-115">You must partition a service across multiple hosts</span></span>|  
|<span data-ttu-id="e2e55-116">Aktualizacja dynamiczna</span><span class="sxs-lookup"><span data-stu-id="e2e55-116">Dynamic update</span></span>|<span data-ttu-id="e2e55-117">Należy dynamicznie ponownie skonfigurować logikę routingu w środowisku uruchomieniowym w celu obsługi zmieniających się wdrożeń usług</span><span class="sxs-lookup"><span data-stu-id="e2e55-117">You must dynamically reconfigure routing logic at runtime to handle changing service deployments</span></span>|  
|<span data-ttu-id="e2e55-118">Multicast</span><span class="sxs-lookup"><span data-stu-id="e2e55-118">Multicast</span></span>|<span data-ttu-id="e2e55-119">Należy wysłać jeden komunikat do wielu punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="e2e55-119">You must send one message to multiple endpoints</span></span>|  
|<span data-ttu-id="e2e55-120">Mostkowanie protokołów</span><span class="sxs-lookup"><span data-stu-id="e2e55-120">Protocol bridging</span></span>|<span data-ttu-id="e2e55-121">Odbierasz komunikaty za pośrednictwem jednego protokołu transportowego, a docelowy punkt końcowy używa innego protokołu</span><span class="sxs-lookup"><span data-stu-id="e2e55-121">You receive messages over one transport protocol, and the destination endpoint uses a different protocol</span></span>|  
|<span data-ttu-id="e2e55-122">Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="e2e55-122">Error Handling</span></span>|<span data-ttu-id="e2e55-123">Należy zapewnić odporność na awarie sieci i błędy komunikacji</span><span class="sxs-lookup"><span data-stu-id="e2e55-123">You need to provide resilience to network outages and communication failures</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="e2e55-124">Wiele z przedstawionych scenariuszy jest specyficznych dla pewnych potrzeb lub wymagań związanych z wymaganiami biznesowymi, dlatego Planowanie obsługi aktualizacji dynamicznych i korzystanie z obsługi błędów może być uważane za najlepsze rozwiązania, ponieważ umożliwiają one modyfikowanie logiki routingu w czasie wykonywania i odzyskiwanie po przejściowych błędach sieci i komunikacji.</span><span class="sxs-lookup"><span data-stu-id="e2e55-124">While many of the scenarios presented are specific to certain business needs or processing requirements, planning to support dynamic updates and utilizing error handling can often be considered as best practices as they allow you to modify routing logic at runtime and recover from transient network and communication failures.</span></span>  
  
### <a name="service-versioning"></a><span data-ttu-id="e2e55-125">Przechowywanie wersji usługi</span><span class="sxs-lookup"><span data-stu-id="e2e55-125">Service Versioning</span></span>  
 <span data-ttu-id="e2e55-126">Podczas wprowadzania nowej wersji usługi należy zachować poprzednią wersję do momentu przejścia wszystkich klientów do nowej usługi.</span><span class="sxs-lookup"><span data-stu-id="e2e55-126">When introducing a new version of a service, you must often maintain the previous version until all clients have transitioned to the new service.</span></span> <span data-ttu-id="e2e55-127">Jest to szczególnie ważne, jeśli usługa jest długotrwałym procesem, który pobiera dni, tygodnie lub nawet miesiące do ukończenia.</span><span class="sxs-lookup"><span data-stu-id="e2e55-127">This is especially critical if the service is a long-running process that takes days, weeks, or even months to complete.</span></span> <span data-ttu-id="e2e55-128">Zwykle wymaga to zaimplementowania nowego adresu punktu końcowego dla nowej usługi przy zachowaniu oryginalnego punktu końcowego dla poprzedniej wersji.</span><span class="sxs-lookup"><span data-stu-id="e2e55-128">Usually this requires implementing a new endpoint address for the new service while maintaining the original endpoint for the previous version.</span></span>  
  
 <span data-ttu-id="e2e55-129">Korzystając z usługi routingu, można uwidocznić jeden punkt końcowy do odbierania komunikatów z aplikacji klienckich, a następnie skierować każdy komunikat do odpowiedniej wersji usługi na podstawie zawartości komunikatu.</span><span class="sxs-lookup"><span data-stu-id="e2e55-129">By using the Routing Service, you can expose one endpoint to receive messages from client applications and then route each message to the correct service version based on the message content.</span></span> <span data-ttu-id="e2e55-130">Najbardziej podstawowa implementacja obejmuje dodanie niestandardowego nagłówka do wiadomości, która wskazuje wersję usługi, przez którą wiadomość ma być przetwarzana.</span><span class="sxs-lookup"><span data-stu-id="e2e55-130">The most basic implementation involves adding a custom header to the message that indicates the version of the service that the message is to be processed by.</span></span> <span data-ttu-id="e2e55-131">Usługa routingu może używać XPathMessageFilter, aby sprawdzić każdy komunikat dla obecności niestandardowego nagłówka i skierować komunikat do odpowiedniego docelowego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="e2e55-131">The Routing Service can use the XPathMessageFilter to inspect each message for the presence of the custom header and route the message to the appropriate destination endpoint.</span></span>  
  
 <span data-ttu-id="e2e55-132">Aby uzyskać instrukcje dotyczące tworzenia konfiguracji wersji usługi, zobacz [How to: Przechowywanie wersji](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)usługi.</span><span class="sxs-lookup"><span data-stu-id="e2e55-132">For the steps used to create a service versioning configuration, see [How To: Service Versioning](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md).</span></span>
  
### <a name="service-data-partitioning"></a><span data-ttu-id="e2e55-133">Partycjonowanie danych usługi</span><span class="sxs-lookup"><span data-stu-id="e2e55-133">Service Data Partitioning</span></span>  
 <span data-ttu-id="e2e55-134">Podczas projektowania środowiska rozproszonego często pożądane jest rozłożenie obciążenia przetwarzania na wielu komputerach w celu zapewnienia wysokiej dostępności, zmniejszenia obciążenia przetwarzania na poszczególnych komputerach lub zapewnienia dedykowanych zasobów dla określonego podzestawu komunikatów.</span><span class="sxs-lookup"><span data-stu-id="e2e55-134">When designing a distributed environment, it is often desirable to spread processing load across multiple computers in order to provide high availability, decrease processing load on individual computers, or to provide dedicated resources for a specific subset of messages.</span></span> <span data-ttu-id="e2e55-135">Chociaż usługa routingu nie zastępuje dedykowanego rozwiązania do równoważenia obciążenia, jego zdolność do wykonywania routingu opartego na zawartości może służyć do kierowania podobnych komunikatów do określonych miejsc docelowych.</span><span class="sxs-lookup"><span data-stu-id="e2e55-135">While the Routing Service does not replace a dedicated load balancing solution, its ability to perform content based routing can be used to route otherwise similar messages to specific destinations.</span></span> <span data-ttu-id="e2e55-136">Na przykład może istnieć wymóg przetworzenia komunikatów od określonego klienta osobno od komunikatów odebranych od innych klientów.</span><span class="sxs-lookup"><span data-stu-id="e2e55-136">For example, you may have a requirement to process messages from a specific client separately from messages received from other clients.</span></span>  
  
 <span data-ttu-id="e2e55-137">Aby uzyskać instrukcje dotyczące tworzenia konfiguracji partycjonowania danych usługi, zobacz [How to: Partycjonowanie](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)danych usługi.</span><span class="sxs-lookup"><span data-stu-id="e2e55-137">For the steps used to create a service data partitioning configuration, see [How To: Service Data Partitioning](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md).</span></span>  
  
### <a name="dynamic-routing"></a><span data-ttu-id="e2e55-138">Routing dynamiczny</span><span class="sxs-lookup"><span data-stu-id="e2e55-138">Dynamic Routing</span></span>  
 <span data-ttu-id="e2e55-139">Często należy zmodyfikować konfigurację routingu w celu zaspokojenia zmieniających się potrzeb firmy, takich jak dodawanie trasy do nowszej wersji usługi, zmiana kryteriów routingu lub zmiana docelowego punktu końcowego określonego komunikatu, do którego filtr trasy.</span><span class="sxs-lookup"><span data-stu-id="e2e55-139">Often it is desirable to modify the routing configuration to satisfy changing business needs, such as adding a route to a newer version of a service, changing routing criteria, or changing the destination endpoint a specific message that the filter routes to.</span></span> <span data-ttu-id="e2e55-140">Usługa routingu umożliwia wykonywanie tych czynności za pomocą programu <xref:System.ServiceModel.Routing.RoutingExtension>, co pozwala na zapewnienie nowego zastosowano w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="e2e55-140">The Routing Service allows you to do this through the <xref:System.ServiceModel.Routing.RoutingExtension>, which allows you to provide a new RoutingConfiguration during run time.</span></span> <span data-ttu-id="e2e55-141">Nowa konfiguracja zacznie obowiązywać natychmiast, ale ma wpływ tylko na wszystkie nowe sesje przetwarzane przez usługę routingu.</span><span class="sxs-lookup"><span data-stu-id="e2e55-141">The new configuration takes effect immediately, but only affects any new sessions processed by the Routing Service.</span></span>  
  
 <span data-ttu-id="e2e55-142">Aby zapoznać się z instrukcjami dotyczącymi implementacji dynamicznego routingu [, zobacz How to: Aktualizacja](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md)dynamiczna.</span><span class="sxs-lookup"><span data-stu-id="e2e55-142">For the steps used to implement dynamic routing, see [How To: Dynamic Update](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md).</span></span>
  
### <a name="multicast"></a><span data-ttu-id="e2e55-143">Multicast</span><span class="sxs-lookup"><span data-stu-id="e2e55-143">Multicast</span></span>  
 <span data-ttu-id="e2e55-144">Podczas routingu wiadomości, zazwyczaj kierowanie poszczególnych komunikatów do jednego określonego docelowego punktu końcowego.</span><span class="sxs-lookup"><span data-stu-id="e2e55-144">When routing messages, usually you routing each message to one specific destination endpoint.</span></span>  <span data-ttu-id="e2e55-145">Czasami może być konieczne kierowanie kopii wiadomości do wielu docelowych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="e2e55-145">However, you may occasionally need to route a copy of the message to multiple destination endpoints.</span></span> <span data-ttu-id="e2e55-146">Aby możliwe było przeprowadzenie routingu multiemisji, muszą być spełnione następujące warunki:</span><span class="sxs-lookup"><span data-stu-id="e2e55-146">To perform multicast routing, the following conditions must be true:</span></span>  
  
- <span data-ttu-id="e2e55-147">Kształt kanału nie może być odpowiedzią na żądanie (chociaż może być jednokierunkowa lub dupleks), ponieważ aplikacja kliencka może odebrać tylko jedną odpowiedź w odpowiedzi na żądanie.</span><span class="sxs-lookup"><span data-stu-id="e2e55-147">The channel shape must not be request-reply (though it may be one-way or duplex,) because request-reply mandates that only one reply can be received by the client application in response to the request.</span></span>  
  
- <span data-ttu-id="e2e55-148">Podczas oceny komunikatu wiele filtrów musi zwrócić **wartość true** .</span><span class="sxs-lookup"><span data-stu-id="e2e55-148">Multiple filters must return **true** when evaluating the message.</span></span>  
  
 <span data-ttu-id="e2e55-149">Jeśli te warunki są spełnione, każdy docelowy punkt końcowy, który jest skojarzony z filtrem zwracającym wartość true, otrzyma kopię komunikatu.</span><span class="sxs-lookup"><span data-stu-id="e2e55-149">If these conditions are met, each destination endpoint that is associated with a filter that returns true will receive a copy of the message.</span></span>  
  
### <a name="protocol-bridging"></a><span data-ttu-id="e2e55-150">Mostkowanie protokołów</span><span class="sxs-lookup"><span data-stu-id="e2e55-150">Protocol Bridging</span></span>  
 <span data-ttu-id="e2e55-151">Podczas routingu komunikatów między niepodobnymi protokołami SOAP usługa routingu używa interfejsów API WCF do konwersji komunikatów z jednego protokołu na drugi.</span><span class="sxs-lookup"><span data-stu-id="e2e55-151">When routing messages between dissimilar SOAP protocols, the Routing Service uses WCF APIs to convert the message from one protocol to the other.</span></span> <span data-ttu-id="e2e55-152">Jest to wykonywane automatycznie, gdy punkty końcowe usługi udostępniane przez usługę routingu używają innego protokołu niż punkty końcowe klienta, do których są kierowane komunikaty.</span><span class="sxs-lookup"><span data-stu-id="e2e55-152">This occurs automatically when the service endpoint(s) exposed by the Routing Service use a different protocol than the client endpoint(s) that messages are routed to.</span></span> <span data-ttu-id="e2e55-153">To zachowanie można wyłączyć, jeśli używane protokoły nie są standardowe. należy jednak podać własny kod łączący.</span><span class="sxs-lookup"><span data-stu-id="e2e55-153">It is possible to disable this behavior if the protocols in use are not standard; however, you must then provide your own bridging code.</span></span>
  
### <a name="error-handling"></a><span data-ttu-id="e2e55-154">Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="e2e55-154">Error Handling</span></span>  
 <span data-ttu-id="e2e55-155">W środowisku rozproszonym nierzadko występują błędy w sieci lub komunikacji.</span><span class="sxs-lookup"><span data-stu-id="e2e55-155">In a distributed environment, it is not uncommon to encounter transient network or communication failures.</span></span> <span data-ttu-id="e2e55-156">Bez usługi pośredniczącej, takiej jak usługa routingu, obciążenie związane z obsługą takich błędów znajduje się w aplikacji klienckiej.</span><span class="sxs-lookup"><span data-stu-id="e2e55-156">Without an intermediary service such as the Routing Service, the burden of handling such failures falls on the client application.</span></span> <span data-ttu-id="e2e55-157">Jeśli aplikacja kliencka nie zawiera konkretnej logiki do ponawiania próby w przypadku awarii sieci lub komunikacji oraz znajomości lokalizacji alternatywnych, użytkownik może napotkać scenariusze, w których komunikat musi zostać przesłany wiele razy przed pomyślnym przetwarzane przez usługę docelową.</span><span class="sxs-lookup"><span data-stu-id="e2e55-157">If the client application does not include specific logic to retry in the event of network or communication failures and knowledge of alternate locations, the user may encounter scenarios where a message must be submitted multiple times before it is successfully processed by the destination service.</span></span> <span data-ttu-id="e2e55-158">Może to prowadzić do niezadowolenia klientów w przypadku aplikacji, ponieważ mogą one być postrzegane jako niezawodne.</span><span class="sxs-lookup"><span data-stu-id="e2e55-158">This can lead to customer dissatisfaction with the application, as it may be perceived as unreliable.</span></span>  
  
 <span data-ttu-id="e2e55-159">Usługa routingu próbuje naprawić ten scenariusz, zapewniając niezawodne funkcje obsługi błędów dla komunikatów, które napotykają błędy sieci lub komunikacji.</span><span class="sxs-lookup"><span data-stu-id="e2e55-159">The Routing Service attempts to remedy this scenario by providing robust error handling capabilities for messages that encounter network or communication-related failures.</span></span> <span data-ttu-id="e2e55-160">Tworząc listę możliwych docelowych punktów końcowych i kojarząc tę listę z każdym filtrem komunikatów, należy usunąć single point of failure poniesione przez posiadanie tylko jednego możliwego miejsca docelowego.</span><span class="sxs-lookup"><span data-stu-id="e2e55-160">By creating a list of possible destination endpoints and associating this list with each message filter, you remove the single point of failure incurred by having only one possible destination.</span></span> <span data-ttu-id="e2e55-161">W przypadku awarii usługa routingu podejmie próbę dostarczenia komunikatu do następnego punktu końcowego na liście, dopóki nie zostanie dostarczony komunikat, wystąpił błąd braku komunikacji lub wszystkie punkty końcowe zostały wyczerpane.</span><span class="sxs-lookup"><span data-stu-id="e2e55-161">In the event of a failure, the Routing Service will attempt to deliver the message to the next endpoint in the list until the message has been delivered, a non-communication failure occurs, or all endpoints have been exhausted.</span></span>  
  
 <span data-ttu-id="e2e55-162">Aby uzyskać instrukcje dotyczące konfigurowania obsługi błędów, zobacz [How to: Obsługa](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)błędów.</span><span class="sxs-lookup"><span data-stu-id="e2e55-162">For the steps used to configure error handling, see [How To: Error Handling](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md).</span></span>
  
### <a name="in-this-section"></a><span data-ttu-id="e2e55-163">W tej sekcji</span><span class="sxs-lookup"><span data-stu-id="e2e55-163">In This Section</span></span>  
 [<span data-ttu-id="e2e55-164">Instrukcje: Przechowywanie wersji usługi</span><span class="sxs-lookup"><span data-stu-id="e2e55-164">How To: Service Versioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-versioning.md)  
  
 [<span data-ttu-id="e2e55-165">Instrukcje: Partycjonowanie danych usługi</span><span class="sxs-lookup"><span data-stu-id="e2e55-165">How To: Service Data Partitioning</span></span>](../../../../docs/framework/wcf/feature-details/how-to-service-data-partitioning.md)  
  
 [<span data-ttu-id="e2e55-166">Instrukcje: Aktualizacja dynamiczna</span><span class="sxs-lookup"><span data-stu-id="e2e55-166">How To: Dynamic Update</span></span>](../../../../docs/framework/wcf/feature-details/how-to-dynamic-update.md)  
  
 [<span data-ttu-id="e2e55-167">Instrukcje: Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="e2e55-167">How To: Error Handling</span></span>](../../../../docs/framework/wcf/feature-details/how-to-error-handling.md)  
  
## <a name="see-also"></a><span data-ttu-id="e2e55-168">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="e2e55-168">See also</span></span>

- [<span data-ttu-id="e2e55-169">Wprowadzenie do routingu</span><span class="sxs-lookup"><span data-stu-id="e2e55-169">Routing Introduction</span></span>](../../../../docs/framework/wcf/feature-details/routing-introduction.md)
