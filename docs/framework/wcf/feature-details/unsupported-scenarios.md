---
title: Scenariusze nieobsługiwane
ms.date: 03/30/2017
ms.assetid: 72027d0f-146d-40c5-9d72-e94392c8bb40
ms.openlocfilehash: a963b46d22f2103cddcc8fd080feefc39070690c
ms.sourcegitcommit: 7088f87e9a7da144266135f4b2397e611cf0a228
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/11/2020
ms.locfileid: "75901263"
---
# <a name="unsupported-scenarios"></a><span data-ttu-id="b5820-102">Nieobsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="b5820-102">Unsupported scenarios</span></span>

<span data-ttu-id="b5820-103">Z różnych powodów Windows Communication Foundation (WCF) nie obsługuje niektórych określonych scenariuszy zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="b5820-103">For various reasons, Windows Communication Foundation (WCF) does not support some specific security scenarios.</span></span> <span data-ttu-id="b5820-104">Na przykład [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition nie implementuje protokołów uwierzytelniania SSPI ani protokołu Kerberos, dlatego program WCF nie obsługuje uruchamiania usługi z uwierzytelnianiem systemu Windows na tej platformie.</span><span class="sxs-lookup"><span data-stu-id="b5820-104">For example, [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition does not implement the SSPI or Kerberos authentication protocols, and therefore WCF does not support running a service with Windows authentication on that platform.</span></span> <span data-ttu-id="b5820-105">Inne mechanizmy uwierzytelniania, takie jak nazwa użytkownika i hasło oraz zintegrowane uwierzytelnianie HTTP/HTTPS, są obsługiwane w przypadku uruchamiania programu WCF w systemie Windows XP Home Edition.</span><span class="sxs-lookup"><span data-stu-id="b5820-105">Other authentication mechanisms, such as username/password and HTTP/HTTPS integrated authentication are supported when running WCF under Windows XP Home Edition.</span></span>

## <a name="impersonation-scenarios"></a><span data-ttu-id="b5820-106">Scenariusze personifikacji</span><span class="sxs-lookup"><span data-stu-id="b5820-106">Impersonation scenarios</span></span>

### <a name="impersonated-identity-might-not-flow-when-clients-make-asynchronous-calls"></a><span data-ttu-id="b5820-107">Personifikowana tożsamość może nie przepływać, gdy klienci powodują wywołania asynchroniczne</span><span class="sxs-lookup"><span data-stu-id="b5820-107">Impersonated identity might not flow when clients make asynchronous calls</span></span>
 <span data-ttu-id="b5820-108">Gdy klient WCF wykonuje wywołania asynchroniczne do usługi WCF przy użyciu uwierzytelniania systemu Windows w ramach personifikacji, uwierzytelnianie może wystąpić w przypadku tożsamości procesu klienta zamiast personifikowanej tożsamości.</span><span class="sxs-lookup"><span data-stu-id="b5820-108">When a WCF client makes asynchronous calls to a WCF service using Windows authentication under impersonation, authentication might occur with the identity of the client process instead of the impersonated identity.</span></span>

### <a name="windows-xp-and-secure-context-token-cookie-enabled"></a><span data-ttu-id="b5820-109">Włączono plik cookie systemu Windows XP i bezpiecznego tokenu kontekstu</span><span class="sxs-lookup"><span data-stu-id="b5820-109">Windows XP and secure context token cookie enabled</span></span>

<span data-ttu-id="b5820-110">Funkcja WCF nie obsługuje personifikacji, a <xref:System.InvalidOperationException> jest zgłaszany, gdy istnieją następujące warunki:</span><span class="sxs-lookup"><span data-stu-id="b5820-110">WCF does not support impersonation and an <xref:System.InvalidOperationException> is thrown when the following conditions exist:</span></span>

- <span data-ttu-id="b5820-111">System operacyjny jest [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b5820-111">The operating system is [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>

- <span data-ttu-id="b5820-112">Tryb uwierzytelniania powoduje tożsamość systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="b5820-112">The authentication mode results in a Windows identity.</span></span>

- <span data-ttu-id="b5820-113">Właściwość <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> <xref:System.ServiceModel.OperationBehaviorAttribute> jest ustawiona na <xref:System.ServiceModel.ImpersonationOption.Required>.</span><span class="sxs-lookup"><span data-stu-id="b5820-113">The <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property of the <xref:System.ServiceModel.OperationBehaviorAttribute> is set to <xref:System.ServiceModel.ImpersonationOption.Required>.</span></span>

- <span data-ttu-id="b5820-114">Tworzony jest token kontekstu zabezpieczeń oparty na stanie (SCT) (domyślnie tworzenie jest wyłączone).</span><span class="sxs-lookup"><span data-stu-id="b5820-114">A state-based security context token (SCT) is created (by default, creation is disabled).</span></span>

 <span data-ttu-id="b5820-115">Plik SCT oparty na stanie można utworzyć tylko przy użyciu niestandardowego powiązania.</span><span class="sxs-lookup"><span data-stu-id="b5820-115">The state-based SCT can only be created using a custom binding.</span></span> <span data-ttu-id="b5820-116">Aby uzyskać więcej informacji, zobacz [jak: Tworzenie tokenu kontekstu zabezpieczeń dla bezpiecznej sesji](how-to-create-a-security-context-token-for-a-secure-session.md). W kodzie, token jest włączony przez utworzenie elementu powiązania zabezpieczeń (<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> lub <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) przy użyciu metody <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> lub <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> i ustawienie parametru `requireCancellation` na `false`.</span><span class="sxs-lookup"><span data-stu-id="b5820-116">For more information, see [How to: Create a Security Context Token for a Secure Session](how-to-create-a-security-context-token-for-a-secure-session.md).) In code, the token is enabled by creating a security binding element (either <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) using the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> or the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> method and setting the `requireCancellation` parameter to `false`.</span></span> <span data-ttu-id="b5820-117">Parametr odnosi się do buforowania SCT.</span><span class="sxs-lookup"><span data-stu-id="b5820-117">The parameter refers to the caching of the SCT.</span></span> <span data-ttu-id="b5820-118">Ustawienie wartości `false` włącza funkcję SCT na podstawie stanu.</span><span class="sxs-lookup"><span data-stu-id="b5820-118">Setting the value to `false` enables the state-based SCT feature.</span></span>

 <span data-ttu-id="b5820-119">Alternatywnie, w konfiguracji, token jest włączony, tworząc <`customBinding`>, a następnie dodając <`security`> elementu i ustawiając atrybut `authenticationMode` na SecureConversation i `requireSecurityContextCancellation` `true`.</span><span class="sxs-lookup"><span data-stu-id="b5820-119">Alternatively, in configuration, the token is enabled by creating a <`customBinding`>, then adding a <`security`> element, and setting the `authenticationMode` attribute to SecureConversation and the `requireSecurityContextCancellation` attribute to `true`.</span></span>

> [!NOTE]
> <span data-ttu-id="b5820-120">Powyższe wymagania są specyficzne.</span><span class="sxs-lookup"><span data-stu-id="b5820-120">The preceding requirements are specific.</span></span> <span data-ttu-id="b5820-121">Na przykład <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> tworzy element powiązania, który powoduje tożsamość systemu Windows, ale nie ustanawia SCT.</span><span class="sxs-lookup"><span data-stu-id="b5820-121">For example, the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> creates a binding element that results in a Windows identity, but does not establish an SCT.</span></span> <span data-ttu-id="b5820-122">W związku z tym można go użyć z opcją `Required` w [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="b5820-122">Therefore, you can use it with the `Required` option on [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>

### <a name="possible-aspnet-conflict"></a><span data-ttu-id="b5820-123">Możliwy konflikt ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b5820-123">Possible ASP.NET conflict</span></span>

<span data-ttu-id="b5820-124">Funkcje WCF i ASP.NET mogą włączać lub wyłączać personifikację.</span><span class="sxs-lookup"><span data-stu-id="b5820-124">WCF and ASP.NET can both enable or disable impersonation.</span></span> <span data-ttu-id="b5820-125">Gdy ASP.NET hostuje aplikację WCF, może istnieć konflikt między ustawieniami konfiguracji WCF i ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b5820-125">When ASP.NET hosts a WCF application, a conflict may exist between the WCF and ASP.NET configuration settings.</span></span> <span data-ttu-id="b5820-126">W przypadku konfliktu ustawienie WCF ma pierwszeństwo, chyba że właściwość <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> jest ustawiona na <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, w tym przypadku ustawienie personifikacji ASP.NET ma pierwszeństwo.</span><span class="sxs-lookup"><span data-stu-id="b5820-126">In case of conflict, the WCF setting takes precedence, unless the <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property is set to <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, in which case the ASP.NET impersonation setting takes precedence.</span></span>

### <a name="assembly-loads-may-fail-under-impersonation"></a><span data-ttu-id="b5820-127">Obciążenia zestawu mogą się nie powieść w ramach personifikacji</span><span class="sxs-lookup"><span data-stu-id="b5820-127">Assembly loads may fail under impersonation</span></span>

<span data-ttu-id="b5820-128">Jeśli personifikowany kontekst nie ma uprawnień dostępu do ładowania zestawu i jeśli jest to pierwszy raz, środowisko uruchomieniowe języka wspólnego (CLR) próbuje załadować zestaw dla tej domeny, <xref:System.AppDomain> buforuje awarię.</span><span class="sxs-lookup"><span data-stu-id="b5820-128">If the impersonated context does not have access rights to load an assembly and if it is the first time the common language runtime (CLR) is attempting to load the assembly for that AppDomain, the <xref:System.AppDomain> caches the failure.</span></span> <span data-ttu-id="b5820-129">Kolejne próby załadowania zestawu (lub zestawów) kończą się niepowodzeniem nawet po powróceniu personifikacji, a nawet jeśli cofnięty kontekst ma prawa dostępu do ładowania zestawu.</span><span class="sxs-lookup"><span data-stu-id="b5820-129">Subsequent attempts to load that assembly (or assemblies) fail, even after reverting the impersonation, and even if the reverted context has access rights to load the assembly.</span></span> <span data-ttu-id="b5820-130">Dzieje się tak, ponieważ środowisko CLR nie próbuje wykonać ładowania po zmianie kontekstu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b5820-130">This is because the CLR does not reattempt the load after the user context is changed.</span></span> <span data-ttu-id="b5820-131">Aby odzyskać sprawność po awarii, należy ponownie uruchomić domenę aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b5820-131">You must restart the application domain to recover from the failure.</span></span>

> [!NOTE]
> <span data-ttu-id="b5820-132">Wartość domyślna właściwości <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> klasy <xref:System.ServiceModel.Security.WindowsClientCredential> jest <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span><span class="sxs-lookup"><span data-stu-id="b5820-132">The default value for the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> property of the <xref:System.ServiceModel.Security.WindowsClientCredential> class is <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span></span> <span data-ttu-id="b5820-133">W większości przypadków kontekst personifikacji na poziomie tożsamości nie ma praw do ładowania żadnych dodatkowych zestawów.</span><span class="sxs-lookup"><span data-stu-id="b5820-133">In most cases, an identification-level impersonation context has no rights to load any additional assemblies.</span></span> <span data-ttu-id="b5820-134">Jest to wartość domyślna, więc jest to bardzo typowy warunek, z którym należy się zapoznać.</span><span class="sxs-lookup"><span data-stu-id="b5820-134">This is the default value, so this is a very common condition to be aware of.</span></span> <span data-ttu-id="b5820-135">Personifikacja na poziomie tożsamości występuje również wtedy, gdy proces personifikacji nie ma uprawnień `SeImpersonate`.</span><span class="sxs-lookup"><span data-stu-id="b5820-135">Identification-level impersonation also occurs when the impersonating process does not have the `SeImpersonate` privilege.</span></span> <span data-ttu-id="b5820-136">Aby uzyskać więcej informacji, zobacz [delegowanie i personifikacja](delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="b5820-136">For more information, see [Delegation and Impersonation](delegation-and-impersonation-with-wcf.md).</span></span>

### <a name="delegation-requires-credential-negotiation"></a><span data-ttu-id="b5820-137">Delegowanie wymaga negocjowania poświadczeń</span><span class="sxs-lookup"><span data-stu-id="b5820-137">Delegation requires credential negotiation</span></span>

<span data-ttu-id="b5820-138">Aby użyć protokołu uwierzytelniania Kerberos z delegowaniem, należy zaimplementować protokół Kerberos za pomocą negocjacji poświadczeń (czasami nazywany wieloetapowym lub wieloetapowym Kerberos).</span><span class="sxs-lookup"><span data-stu-id="b5820-138">To use the Kerberos authentication protocol with delegation, you must implement the Kerberos protocol with credential negotiation (sometimes called multi-leg or multi-step Kerberos).</span></span> <span data-ttu-id="b5820-139">W przypadku zaimplementowania uwierzytelniania przy użyciu protokołu Kerberos bez negocjowania poświadczeń (nazywanego czasem pojedynczym lub jednym etapem Kerberos) występuje wyjątek.</span><span class="sxs-lookup"><span data-stu-id="b5820-139">If you implement Kerberos authentication without credential negotiation (sometimes called one-shot or single-leg Kerberos), an exception is thrown.</span></span> <span data-ttu-id="b5820-140">Aby uzyskać więcej informacji na temat implementowania negocjacji poświadczeń, zobacz [Debugowanie błędów uwierzytelniania systemu Windows](debugging-windows-authentication-errors.md).</span><span class="sxs-lookup"><span data-stu-id="b5820-140">For more information about how to implement credential negotiation, see [Debugging Windows Authentication Errors](debugging-windows-authentication-errors.md).</span></span>

## <a name="cryptography"></a><span data-ttu-id="b5820-141">Kryptografia</span><span class="sxs-lookup"><span data-stu-id="b5820-141">Cryptography</span></span>

### <a name="sha-256-supported-only-for-symmetric-key-usages"></a><span data-ttu-id="b5820-142">Algorytm SHA-256 jest obsługiwany tylko w przypadku użycia klucza symetrycznego</span><span class="sxs-lookup"><span data-stu-id="b5820-142">SHA-256 supported only for symmetric key usages</span></span>

<span data-ttu-id="b5820-143">Usługa WCF obsługuje różne algorytmy szyfrowania i tworzenia podsumowania podpisów, które można określić przy użyciu pakietu algorytmów w powiązaniach dostarczonych przez system.</span><span class="sxs-lookup"><span data-stu-id="b5820-143">WCF supports a variety of encryption and signature digest creation algorithms that you can specify using the algorithm suite in the system-provided bindings.</span></span> <span data-ttu-id="b5820-144">W celu zwiększenia bezpieczeństwa Funkcja WCF obsługuje algorytmy SHA (Secure Hash Algorithm) 2, w tym SHA-256, do tworzenia skrótów skrótu sygnatur.</span><span class="sxs-lookup"><span data-stu-id="b5820-144">For improved security, WCF supports Secure Hash Algorithm (SHA) 2 algorithms, specifically SHA-256, for creating signature digest hashes.</span></span> <span data-ttu-id="b5820-145">Ta wersja obsługuje Algorytm SHA-256 tylko dla symetrycznego użycia klucza, takich jak klucze Kerberos, oraz miejsce, w którym certyfikat X. 509 nie jest używany do podpisywania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="b5820-145">This release supports SHA-256 only for symmetric key usages, such as Kerberos keys, and where an X.509 certificate is not used to sign the message.</span></span> <span data-ttu-id="b5820-146">Usługa WCF nie obsługuje podpisów RSA (używanych w certyfikatach X. 509) przy użyciu skrótu SHA-256 z powodu bieżącego braku obsługi dla algorytmu RSA-SHA256 w programie WinFX.</span><span class="sxs-lookup"><span data-stu-id="b5820-146">WCF does not support RSA signatures (used in X.509 certificates) using SHA-256 hash due to the current lack of support for RSA-SHA256 in the WinFX.</span></span>

### <a name="fips-compliant-sha-256-hashes-not-supported"></a><span data-ttu-id="b5820-147">Skróty SHA-256 zgodne ze standardem FIPS nie są obsługiwane</span><span class="sxs-lookup"><span data-stu-id="b5820-147">FIPS-compliant SHA-256 hashes not supported</span></span>

<span data-ttu-id="b5820-148">Funkcja WCF nie obsługuje skrótów zgodnych ze standardem FIPS-256, więc zestawy algorytmów używające algorytmu SHA-256 nie są obsługiwane przez funkcję WCF w systemach, w których wymagane są algorytmy zgodne ze standardem FIPS.</span><span class="sxs-lookup"><span data-stu-id="b5820-148">WCF does not support SHA-256 FIPS-compliant hashes, so algorithm suites that use SHA-256 are not supported by WCF on systems where use of FIPS-compliant algorithms is required.</span></span>

### <a name="fips-compliant-algorithms-may-fail-if-registry-is-edited"></a><span data-ttu-id="b5820-149">Algorytmy zgodne ze standardem FIPS mogą kończyć się niepowodzeniem, jeśli rejestr jest edytowany</span><span class="sxs-lookup"><span data-stu-id="b5820-149">FIPS-compliant algorithms may fail if registry is edited</span></span>

<span data-ttu-id="b5820-150">Algorytmy zgodne z ustawieniami FIPS (Federal Information Processing Standards) można włączać i wyłączać za pomocą przystawki ustawienia zabezpieczeń lokalnych programu Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="b5820-150">You can enable and disable Federal Information Processing Standards (FIPS)-compliant algorithms by using the Local Security Settings Microsoft Management Console (MMC) snap-in.</span></span> <span data-ttu-id="b5820-151">Możesz również uzyskać dostęp do ustawienia w rejestrze.</span><span class="sxs-lookup"><span data-stu-id="b5820-151">You can also access the setting in the registry.</span></span> <span data-ttu-id="b5820-152">Należy jednak pamiętać, że usługa WCF nie obsługuje resetowania ustawienia przy użyciu rejestru.</span><span class="sxs-lookup"><span data-stu-id="b5820-152">Note, however, that WCF does not support using the registry to reset the setting.</span></span> <span data-ttu-id="b5820-153">Jeśli wartość jest ustawiona na inne niż 1 lub 0, mogą wystąpić niespójne wyniki między środowiskiem CLR i systemem operacyjnym.</span><span class="sxs-lookup"><span data-stu-id="b5820-153">If the value is set to anything other than 1 or 0, inconsistent results can occur between the CLR and the operating system.</span></span>

### <a name="fips-compliant-aes-encryption-limitation"></a><span data-ttu-id="b5820-154">Ograniczenie szyfrowania AES zgodne ze standardem FIPS</span><span class="sxs-lookup"><span data-stu-id="b5820-154">FIPS-compliant AES encryption limitation</span></span>

<span data-ttu-id="b5820-155">Szyfrowanie AES zgodne ze standardem FIPS nie działa w dwustronnych wywołaniach zwrotnych pod personifikacją na poziomie tożsamości.</span><span class="sxs-lookup"><span data-stu-id="b5820-155">FIPS-compliant AES encryption does not work in duplex callbacks under identification level impersonation.</span></span>

### <a name="cngksp-certificates"></a><span data-ttu-id="b5820-156">Certyfikaty CNG/dostawcy magazynu kluczy</span><span class="sxs-lookup"><span data-stu-id="b5820-156">CNG/KSP certificates</span></span>

<span data-ttu-id="b5820-157">*Kryptografia API: Next Generation (CNG)* to długoterminowe zastąpienie interfejsu CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="b5820-157">*Cryptography API: Next Generation (CNG)* is the long-term replacement for the CryptoAPI.</span></span> <span data-ttu-id="b5820-158">Ten interfejs API jest dostępny w kodzie niezarządzanym w systemie Windows Vista, Windows Server 2008 i nowszych wersjach systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="b5820-158">This API is available in unmanaged code on Windows Vista, Windows Server 2008, and later Windows versions.</span></span>

 <span data-ttu-id="b5820-159">.NET Framework 4.6.1 i wcześniejsze wersje nie obsługują tych certyfikatów, ponieważ używają starszego interfejsu CryptoAPI do obsługi certyfikatów CNG/dostawcy magazynu kluczy.</span><span class="sxs-lookup"><span data-stu-id="b5820-159">.NET Framework 4.6.1 and earlier versions do not support these certificates because they use the legacy CryptoAPI to handle CNG/KSP certificates.</span></span> <span data-ttu-id="b5820-160">Użycie tych certyfikatów w .NET Framework 4.6.1 i wcześniejszych wersji spowoduje wystąpienie wyjątku.</span><span class="sxs-lookup"><span data-stu-id="b5820-160">The use of these certificates with   .NET Framework 4.6.1 and earlier versions will cause an exception.</span></span>

 <span data-ttu-id="b5820-161">Istnieją dwa sposoby, aby stwierdzić, czy certyfikat używa dostawcy magazynu kluczy:</span><span class="sxs-lookup"><span data-stu-id="b5820-161">There are two possible ways to tell if a certificate uses KSP:</span></span>

- <span data-ttu-id="b5820-162">Wykonaj `p/invoke` `CertGetCertificateContextProperty`i sprawdź `dwProvType` zwróconych `CertGetCertificateContextProperty`.</span><span class="sxs-lookup"><span data-stu-id="b5820-162">Do a `p/invoke` of `CertGetCertificateContextProperty`, and inspect `dwProvType` on the returned `CertGetCertificateContextProperty`.</span></span>

- <span data-ttu-id="b5820-163">Użyj `certutil` polecenia z wiersza polecenia w celu wykonywania zapytań dotyczących certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="b5820-163">Use the  `certutil` command from the command line for querying certificates.</span></span> <span data-ttu-id="b5820-164">Aby uzyskać więcej informacji, zobacz [zadania narzędzia Certutil dotyczące rozwiązywania problemów z certyfikatami](https://docs.microsoft.com/previous-versions/orphan-topics/ws.10/cc772619(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="b5820-164">For more information, see [Certutil tasks for troubleshooting certificates](https://docs.microsoft.com/previous-versions/orphan-topics/ws.10/cc772619(v=ws.10)).</span></span>

## <a name="message-security-fails-if-using-aspnet-impersonation-and-aspnet-compatibility-is-required"></a><span data-ttu-id="b5820-165">Bezpieczeństwo komunikatów kończy się niepowodzeniem, jeśli jest wymagane użycie personifikacji ASP.NET i zgodność ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b5820-165">Message security fails if using ASP.NET impersonation and ASP.NET compatibility is required</span></span>

<span data-ttu-id="b5820-166">Usługa WCF nie obsługuje następującej kombinacji ustawień, ponieważ mogą one uniemożliwiać uwierzytelnianie klienta:</span><span class="sxs-lookup"><span data-stu-id="b5820-166">WCF does not support the following combination of settings because they can prevent client authentication from occurring:</span></span>

- <span data-ttu-id="b5820-167">ASP.NET Personifikacja jest włączona.</span><span class="sxs-lookup"><span data-stu-id="b5820-167">ASP.NET Impersonation is enabled.</span></span> <span data-ttu-id="b5820-168">Jest to wykonywane w pliku Web. config przez ustawienie atrybutu `impersonate` <`identity`> elementu `true`.</span><span class="sxs-lookup"><span data-stu-id="b5820-168">This is done in the Web.config file by setting the `impersonate` attribute of the <`identity`> element to `true`.</span></span>

- <span data-ttu-id="b5820-169">Tryb zgodności ASP.NET jest włączony przez ustawienie atrybutu `aspNetCompatibilityEnabled` [\<serviceHostingEnvironment >](../../configure-apps/file-schema/wcf/servicehostingenvironment.md) na `true`.</span><span class="sxs-lookup"><span data-stu-id="b5820-169">ASP.NET compatibility mode is enabled by setting the `aspNetCompatibilityEnabled` attribute of the [\<serviceHostingEnvironment>](../../configure-apps/file-schema/wcf/servicehostingenvironment.md) to `true`.</span></span>

- <span data-ttu-id="b5820-170">Używane są zabezpieczenia w trybie komunikatów.</span><span class="sxs-lookup"><span data-stu-id="b5820-170">Message mode security is used.</span></span>

<span data-ttu-id="b5820-171">Obejście tego problemu polega na wyłączeniu trybu zgodności ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b5820-171">The work-around is to turn off the ASP.NET compatibility mode.</span></span> <span data-ttu-id="b5820-172">Jeśli jednak wymagany jest tryb zgodności ASP.NET, należy wyłączyć funkcję personifikacji ASP.NET i zamiast tego użyć personifikacji dostarczonej przez funkcję WCF.</span><span class="sxs-lookup"><span data-stu-id="b5820-172">Or, if the ASP.NET compatibility mode is required, disable the ASP.NET impersonation feature and use WCF-provided impersonation instead.</span></span> <span data-ttu-id="b5820-173">Aby uzyskać więcej informacji, zobacz [delegowanie i personifikacja](delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="b5820-173">For more information, see [Delegation and Impersonation](delegation-and-impersonation-with-wcf.md).</span></span>

## <a name="ipv6-literal-address-failure"></a><span data-ttu-id="b5820-174">Niepowodzenie adresu literału IPv6</span><span class="sxs-lookup"><span data-stu-id="b5820-174">IPv6 literal address failure</span></span>

<span data-ttu-id="b5820-175">Żądania zabezpieczeń kończą się niepowodzeniem, gdy klient i usługa znajdują się na tym samym komputerze, a dla usługi są używane adresy literałów IPv6.</span><span class="sxs-lookup"><span data-stu-id="b5820-175">Security requests fail when the client and service are on the same machine, and IPv6 literal addresses are used for the service.</span></span>

 <span data-ttu-id="b5820-176">Literały adresów IPv6 działają, jeśli usługa i klient znajdują się na różnych komputerach.</span><span class="sxs-lookup"><span data-stu-id="b5820-176">Literal IPv6 addresses work if the service and client are on different machines.</span></span>

## <a name="wsdl-retrieval-failures-with-federated-trust"></a><span data-ttu-id="b5820-177">Błędy pobierania WSDL z zaufaniem federacyjnym</span><span class="sxs-lookup"><span data-stu-id="b5820-177">WSDL retrieval failures with federated trust</span></span>

<span data-ttu-id="b5820-178">Funkcja WCF wymaga dokładnie jednego dokumentu WSDL dla każdego węzła w federacyjnym łańcuchu zaufania.</span><span class="sxs-lookup"><span data-stu-id="b5820-178">WCF requires exactly one WSDL document for each node in the federated trust chain.</span></span> <span data-ttu-id="b5820-179">Należy zachować ostrożność, aby nie konfigurować pętli podczas określania punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="b5820-179">Be careful not to set up a loop when specifying endpoints.</span></span> <span data-ttu-id="b5820-180">Jednym ze sposobów, w którym mogą wystąpić pętle, jest użycie WSDL pobrania łańcuchów zaufania federacyjnego z co najmniej dwoma łączami w tym samym dokumencie WSDL.</span><span class="sxs-lookup"><span data-stu-id="b5820-180">One way in which loops can arise is using a WSDL download of federated trust chains with two or more links in the same WSDL document.</span></span> <span data-ttu-id="b5820-181">Typowym scenariuszem, który może powodować ten problem, jest usługa federacyjna, w której serwer tokenów zabezpieczających i usługa znajdują się wewnątrz tego samego elementu ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="b5820-181">A common scenario that can produce this problem is a federated service where the Security Token Server and the service are contained inside the same ServiceHost.</span></span>

 <span data-ttu-id="b5820-182">Przykładem takiej sytuacji jest usługa z następującymi trzema adresami punktów końcowych:</span><span class="sxs-lookup"><span data-stu-id="b5820-182">An example of this situation is a service with the following three endpoint addresses:</span></span>

- <span data-ttu-id="b5820-183">`http://localhost/CalculatorService/service` (usługa)</span><span class="sxs-lookup"><span data-stu-id="b5820-183">`http://localhost/CalculatorService/service` (the service)</span></span>

- <span data-ttu-id="b5820-184">`http://localhost/CalculatorService/issue_ticket` (STS)</span><span class="sxs-lookup"><span data-stu-id="b5820-184">`http://localhost/CalculatorService/issue_ticket` (the STS)</span></span>

- <span data-ttu-id="b5820-185">`http://localhost/CalculatorService/mex` (punkt końcowy metadanych)</span><span class="sxs-lookup"><span data-stu-id="b5820-185">`http://localhost/CalculatorService/mex` (the metadata endpoint)</span></span>

 <span data-ttu-id="b5820-186">Powoduje to zgłoszenie wyjątku.</span><span class="sxs-lookup"><span data-stu-id="b5820-186">This throws an exception.</span></span>

 <span data-ttu-id="b5820-187">Ten scenariusz można wykonać, umieszczając punkt końcowy `issue_ticket` w innym miejscu.</span><span class="sxs-lookup"><span data-stu-id="b5820-187">You can make this scenario work by putting the `issue_ticket` endpoint elsewhere.</span></span>

## <a name="wsdl-import-attributes-can-be-lost"></a><span data-ttu-id="b5820-188">Atrybuty importu WSDL mogą zostać utracone</span><span class="sxs-lookup"><span data-stu-id="b5820-188">WSDL import attributes can be lost</span></span>

<span data-ttu-id="b5820-189">Funkcja WCF traci śledzenie atrybutów w `<wst:Claims>` elemencie w szablonie `RST` podczas importowania WSDL.</span><span class="sxs-lookup"><span data-stu-id="b5820-189">WCF loses track of the attributes on a `<wst:Claims>` element in an `RST` template when doing a WSDL import.</span></span> <span data-ttu-id="b5820-190">Dzieje się tak podczas importowania WSDL, jeśli określisz `<Claims>` bezpośrednio w `WSFederationHttpBinding.Security.Message.TokenRequestParameters` lub `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` zamiast bezpośrednio korzystać z kolekcji typu "Claims".</span><span class="sxs-lookup"><span data-stu-id="b5820-190">This happens during a WSDL import if you specify `<Claims>` directly in `WSFederationHttpBinding.Security.Message.TokenRequestParameters` or `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` instead of using the claim type collections directly.</span></span>  <span data-ttu-id="b5820-191">Ponieważ import utraci atrybuty, powiązanie nie jest prawidłowo przeszukiwane za pomocą języka WSDL i dlatego jest niepoprawne po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="b5820-191">Since the import loses the attributes, the binding does not round trip properly through WSDL and hence is incorrect on the client side.</span></span>

 <span data-ttu-id="b5820-192">Poprawka polega na zmodyfikowaniu powiązania bezpośrednio na kliencie po zaimportowaniu.</span><span class="sxs-lookup"><span data-stu-id="b5820-192">The fix is to modify the binding directly on the client after doing the import.</span></span>

## <a name="see-also"></a><span data-ttu-id="b5820-193">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="b5820-193">See also</span></span>

- [<span data-ttu-id="b5820-194">Zagadnienia dotyczące bezpieczeństwa</span><span class="sxs-lookup"><span data-stu-id="b5820-194">Security Considerations</span></span>](security-considerations-in-wcf.md)
- [<span data-ttu-id="b5820-195">Ujawnianie informacji</span><span class="sxs-lookup"><span data-stu-id="b5820-195">Information Disclosure</span></span>](information-disclosure.md)
- [<span data-ttu-id="b5820-196">Podniesienie uprawnień</span><span class="sxs-lookup"><span data-stu-id="b5820-196">Elevation of Privilege</span></span>](elevation-of-privilege.md)
- [<span data-ttu-id="b5820-197">Odmowa usługi</span><span class="sxs-lookup"><span data-stu-id="b5820-197">Denial of Service</span></span>](denial-of-service.md)
- [<span data-ttu-id="b5820-198">Manipulowanie</span><span class="sxs-lookup"><span data-stu-id="b5820-198">Tampering</span></span>](tampering.md)
- [<span data-ttu-id="b5820-199">Ataki oparte na metodzie powtórzeń</span><span class="sxs-lookup"><span data-stu-id="b5820-199">Replay Attacks</span></span>](replay-attacks.md)
