---
title: Nieobsługiwane scenariusze
ms.date: 03/30/2017
ms.assetid: 72027d0f-146d-40c5-9d72-e94392c8bb40
ms.openlocfilehash: 5cc4e65ce4f93a352b651203757a484a9d90a85d
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
ms.locfileid: "33507717"
---
# <a name="unsupported-scenarios"></a><span data-ttu-id="2e6ca-102">Nieobsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="2e6ca-102">Unsupported Scenarios</span></span>
<span data-ttu-id="2e6ca-103">Windows Communication Foundation (WCF) z różnych powodów, nie obsługuje niektóre scenariusze zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-103">For various reasons, Windows Communication Foundation (WCF) does not support some specific security scenarios.</span></span> <span data-ttu-id="2e6ca-104">Na przykład [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition nie obsługuje protokoły uwierzytelniania SSPI lub protokołu Kerberos i w związku z tym WCF nie obsługuje uruchamiania usługi z uwierzytelnianiem systemu Windows na tej platformie.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-104">For example, [!INCLUDE[wxp](../../../../includes/wxp-md.md)] Home Edition does not implement the SSPI or Kerberos authentication protocols, and therefore WCF does not support running a service with Windows authentication on that platform.</span></span> <span data-ttu-id="2e6ca-105">Innych mechanizmów uwierzytelniania, takich jak nazwy użytkownika i hasła i zintegrowane uwierzytelnianie HTTP i HTTPS są obsługiwane podczas uruchamiania usługi WCF w systemie Windows XP Home Edition.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-105">Other authentication mechanisms, such as username/password and HTTP/HTTPS integrated authentication are supported when running WCF under Windows XP Home Edition.</span></span>  
  
## <a name="impersonation-scenarios"></a><span data-ttu-id="2e6ca-106">Scenariusze personifikacji</span><span class="sxs-lookup"><span data-stu-id="2e6ca-106">Impersonation Scenarios</span></span>  
  
### <a name="impersonated-identity-might-not-flow-when-clients-make-asynchronous-calls"></a><span data-ttu-id="2e6ca-107">Personifikowanej tożsamości nie mogą przepływać wprowadzasz klientów wywołania asynchroniczne</span><span class="sxs-lookup"><span data-stu-id="2e6ca-107">Impersonated Identity Might Not Flow When Clients Make Asynchronous Calls</span></span>  
 <span data-ttu-id="2e6ca-108">Jeśli klient WCF wywołań asynchronicznych z usługą WCF za pomocą uwierzytelniania systemu Windows w ramach personifikacji, uwierzytelniania mogą wystąpić przy użyciu tożsamości procesu klienta zamiast personifikowanej tożsamości.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-108">When a WCF client makes asynchronous calls to a WCF service using Windows authentication under impersonation, authentication might occur with the identity of the client process instead of the impersonated identity.</span></span>  
  
### <a name="windows-xp-and-secure-context-token-cookie-enabled"></a><span data-ttu-id="2e6ca-109">Windows XP i tokenu pliku Cookie bezpiecznym kontekście włączone</span><span class="sxs-lookup"><span data-stu-id="2e6ca-109">Windows XP and Secure Context Token Cookie Enabled</span></span>  
 <span data-ttu-id="2e6ca-110">Usługi WCF nie obsługuje personifikacji i <xref:System.InvalidOperationException> jest generowany, gdy istnieją następujące warunki:</span><span class="sxs-lookup"><span data-stu-id="2e6ca-110">WCF does not support impersonation and an <xref:System.InvalidOperationException> is thrown when the following conditions exist:</span></span>  
  
-   <span data-ttu-id="2e6ca-111">System operacyjny jest [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2e6ca-111">The operating system is [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
-   <span data-ttu-id="2e6ca-112">Tryb uwierzytelniania powoduje tożsamości systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-112">The authentication mode results in a Windows identity.</span></span>  
  
-   <span data-ttu-id="2e6ca-113"><xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> Właściwość <xref:System.ServiceModel.OperationBehaviorAttribute> ma ustawioną wartość <xref:System.ServiceModel.ImpersonationOption.Required>.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-113">The <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property of the <xref:System.ServiceModel.OperationBehaviorAttribute> is set to <xref:System.ServiceModel.ImpersonationOption.Required>.</span></span>  
  
-   <span data-ttu-id="2e6ca-114">Utworzono token kontekstu zabezpieczeń oparte na stanie (SCT) (domyślnie tworzenie zostało wyłączone).</span><span class="sxs-lookup"><span data-stu-id="2e6ca-114">A state-based security context token (SCT) is created (by default, creation is disabled).</span></span>  
  
 <span data-ttu-id="2e6ca-115">Oparte na stanie SCT można tworzyć tylko za pomocą niestandardowego powiązania.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-115">The state-based SCT can only be created using a custom binding.</span></span> <span data-ttu-id="2e6ca-116">Aby uzyskać więcej informacji, zobacz [porady: Tworzenie tokenu kontekstu zabezpieczeń dla bezpieczną sesję](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).) W kodzie, token jest włączona, tworząc elementu powiązania zabezpieczeń (albo <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> lub <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) przy użyciu <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> lub <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> — metoda i ustawienie `requireCancellation` parametr `false`.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-116">For more information, see [How to: Create a Security Context Token for a Secure Session](../../../../docs/framework/wcf/feature-details/how-to-create-a-security-context-token-for-a-secure-session.md).) In code, the token is enabled by creating a security binding element (either <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> or <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>) using the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%28System.Boolean%29?displayProperty=nameWithType> or the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%28System.ServiceModel.Channels.SecurityBindingElement%2CSystem.Boolean%29?displayProperty=nameWithType> method and setting the `requireCancellation` parameter to `false`.</span></span> <span data-ttu-id="2e6ca-117">Parametr odwołuje się do buforowania SCT.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-117">The parameter refers to the caching of the SCT.</span></span> <span data-ttu-id="2e6ca-118">Ustawienie wartości `false` włącza funkcję SCT oparte na stanie.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-118">Setting the value to `false` enables the state-based SCT feature.</span></span>  
  
 <span data-ttu-id="2e6ca-119">Alternatywnie w konfiguracji, token jest włączona, tworząc <`customBinding`>, następnie dodając <`security`> elementu i ustawienie `authenticationMode` atrybutu SecureConversation i `requireSecurityContextCancellation` atrybutu `true`.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-119">Alternatively, in configuration, the token is enabled by creating a <`customBinding`>, then adding a <`security`> element, and setting the `authenticationMode` attribute to SecureConversation and the `requireSecurityContextCancellation` attribute to `true`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2e6ca-120">Specyficznych powyższych wymagań.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-120">The preceding requirements are specific.</span></span> <span data-ttu-id="2e6ca-121">Na przykład <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> tworzy element powiązania, który powoduje tożsamości systemu Windows, ale nie wprowadza SCT.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-121">For example, the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> creates a binding element that results in a Windows identity, but does not establish an SCT.</span></span> <span data-ttu-id="2e6ca-122">W związku z tym użytkownik może być używany z `Required` opcja [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2e6ca-122">Therefore, you can use it with the `Required` option on [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
### <a name="possible-aspnet-conflict"></a><span data-ttu-id="2e6ca-123">Możliwe konflikt ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2e6ca-123">Possible ASP.NET Conflict</span></span>  
 <span data-ttu-id="2e6ca-124">Usługi WCF i [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] jednocześnie włączyć lub wyłączyć personifikację.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-124">WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] can both enable or disable impersonation.</span></span> <span data-ttu-id="2e6ca-125">Gdy [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] aplikacja WCF hostuje konflikt mogą istnieć między usługi WCF i [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] ustawienia konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-125">When [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hosts an WCF application, a conflict may exist between the WCF and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] configuration settings.</span></span> <span data-ttu-id="2e6ca-126">W przypadku konfliktu, ustawienie WCF ma pierwszeństwo, chyba że <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> właściwość jest ustawiona na <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, w którym to przypadku [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] pierwszeństwo ma ustawienie personifikacji.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-126">In case of conflict, the WCF setting takes precedence, unless the <xref:System.ServiceModel.OperationBehaviorAttribute.Impersonation%2A> property is set to <xref:System.ServiceModel.ImpersonationOption.NotAllowed>, in which case the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] impersonation setting takes precedence.</span></span>  
  
### <a name="assembly-loads-may-fail-under-impersonation"></a><span data-ttu-id="2e6ca-127">Ładunki zestaw może zakończyć się niepowodzeniem w ramach personifikacji</span><span class="sxs-lookup"><span data-stu-id="2e6ca-127">Assembly Loads May Fail Under Impersonation</span></span>  
 <span data-ttu-id="2e6ca-128">Jeśli spersonifikowanym kontekście nie ma praw dostępu do załadowania zestawu, a jeśli po raz pierwszy środowisko uruchomieniowe języka wspólnego (CLR) próbuje załadować zestawu dla tego elementu AppDomain, <xref:System.AppDomain> buforuje awarii.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-128">If the impersonated context does not have access rights to load an assembly and if it is the first time the common language runtime (CLR) is attempting to load the assembly for that AppDomain, the <xref:System.AppDomain> caches the failure.</span></span> <span data-ttu-id="2e6ca-129">Niepowodzenie kolejnych prób załadować tego zestawu (lub zestawy), nawet po przywróceniu personifikacji, a nawet wtedy, gdy kontekst przywróconego ma prawa dostępu do ładowania zestawu.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-129">Subsequent attempts to load that assembly (or assemblies) fail, even after reverting the impersonation, and even if the reverted context has access rights to load the assembly.</span></span> <span data-ttu-id="2e6ca-130">Jest to spowodowane CLR nie ponów próbę obciążenia po zmianie kontekstu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-130">This is because the CLR does not re-attempt the load after the user context is changed.</span></span> <span data-ttu-id="2e6ca-131">Domeny aplikacji do odzyskiwania danych po awarii, należy ponownie.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-131">You must restart the application domain to recover from the failure.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="2e6ca-132">Wartość domyślna dla <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> właściwość <xref:System.ServiceModel.Security.WindowsClientCredential> jest klasa <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-132">The default value for the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowedImpersonationLevel%2A> property of the <xref:System.ServiceModel.Security.WindowsClientCredential> class is <xref:System.Security.Principal.TokenImpersonationLevel.Identification>.</span></span> <span data-ttu-id="2e6ca-133">W większości przypadków kontekstu identyfikacji poziom personifikacji nie ma praw do załadowania dowolnych dodatkowych zestawów.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-133">In most cases, an identification-level impersonation context has no rights to load any additional assemblies.</span></span> <span data-ttu-id="2e6ca-134">Wartością domyślną jest więc jest to bardzo powszechne pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-134">This is the default value, so this is a very common condition to be aware of.</span></span> <span data-ttu-id="2e6ca-135">Identyfikator poziomu personifikacji występuje także, gdy proces personifikacji nie ma `SeImpersonate` uprawnień.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-135">Identification-level impersonation also occurs when the impersonating process does not have the `SeImpersonate` privilege.</span></span> <span data-ttu-id="2e6ca-136">Aby uzyskać więcej informacji, zobacz [delegowanie i personifikacja](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="2e6ca-136">For more information, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
### <a name="delegation-requires-credential-negotiation"></a><span data-ttu-id="2e6ca-137">Delegowanie wymaga negocjowania poświadczeń</span><span class="sxs-lookup"><span data-stu-id="2e6ca-137">Delegation Requires Credential Negotiation</span></span>  
 <span data-ttu-id="2e6ca-138">Aby używać protokołu uwierzytelniania Kerberos z delegowania, musi implementować protokołu Kerberos z negocjowania poświadczeń (nazywane również wieloetapowego lub wieloetapowych protokołu Kerberos).</span><span class="sxs-lookup"><span data-stu-id="2e6ca-138">To use the Kerberos authentication protocol with delegation, you must implement the Kerberos protocol with credential negotiation (sometimes called multi-leg or multi-step Kerberos).</span></span> <span data-ttu-id="2e6ca-139">Uwierzytelnianie Kerberos w przypadku zastosowania bez negocjowania poświadczeń (nazywane również jednorazowej lub jeden etap protokołu Kerberos), jest zwracany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-139">If you implement Kerberos authentication without credential negotiation (sometimes called one-shot or single-leg Kerberos), an exception is thrown.</span></span> <span data-ttu-id="2e6ca-140">Aby uzyskać więcej informacji dotyczących sposobu wdrażania negocjowania poświadczeń, zobacz [Debugowanie błędów uwierzytelniania systemu Windows](../../../../docs/framework/wcf/feature-details/debugging-windows-authentication-errors.md).</span><span class="sxs-lookup"><span data-stu-id="2e6ca-140">For more information about how to implement credential negotiation, see [Debugging Windows Authentication Errors](../../../../docs/framework/wcf/feature-details/debugging-windows-authentication-errors.md).</span></span>  
  
## <a name="cryptography"></a><span data-ttu-id="2e6ca-141">Kryptografia</span><span class="sxs-lookup"><span data-stu-id="2e6ca-141">Cryptography</span></span>  
  
### <a name="sha-256-supported-only-for-symmetric-key-usages"></a><span data-ttu-id="2e6ca-142">Algorytm SHA-256 jest obsługiwane tylko w przypadku użycia klucza symetrycznego</span><span class="sxs-lookup"><span data-stu-id="2e6ca-142">SHA-256 Supported Only for Symmetric Key Usages</span></span>  
 <span data-ttu-id="2e6ca-143">Usługi WCF obsługuje wiele algorytmów szyfrowania i podpisywania szyfrowanego tworzenia, które można określić przy użyciu pakietu algorytmów powiązania dostarczane przez system.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-143">WCF supports a variety of encryption and signature digest creation algorithms that you can specify using the algorithm suite in the system-provided bindings.</span></span> <span data-ttu-id="2e6ca-144">Ze względów bezpieczeństwa WCF obsługuje algorytmy Secure Hash Algorithm (SHA) 2, w szczególności algorytmu SHA-256, służący do tworzenia skrótów skrótu podpisu.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-144">For improved security, WCF supports Secure Hash Algorithm (SHA) 2 algorithms, specifically SHA-256, for creating signature digest hashes.</span></span> <span data-ttu-id="2e6ca-145">Ta wersja obsługuje algorytm SHA-256, tylko w przypadku użycia klucza symetrycznego, takie jak klucze Kerberos i których certyfikat X.509 nie jest używany do podpisywania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-145">This release supports SHA-256 only for symmetric key usages, such as Kerberos keys, and where an X.509 certificate is not used to sign the message.</span></span> <span data-ttu-id="2e6ca-146">Usługi WCF nie obsługuje podpisów RSA (używane w certyfikatach X.509) przy użyciu skrótu SHA-256 ze względu na Brak bieżącej obsługi RSA-SHA256 w [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span><span class="sxs-lookup"><span data-stu-id="2e6ca-146">WCF does not support RSA signatures (used in X.509 certificates) using SHA-256 hash due to the current lack of support for RSA-SHA256 in the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span></span>  
  
### <a name="fips-compliant-sha-256-hashes-not-supported"></a><span data-ttu-id="2e6ca-147">Zgodne ze standardem FIPS skrótów algorytmu SHA-256, nie jest obsługiwane</span><span class="sxs-lookup"><span data-stu-id="2e6ca-147">FIPS-Compliant SHA-256 Hashes not Supported</span></span>  
 <span data-ttu-id="2e6ca-148">Usługi WCF nie obsługuje wartości skrótu SHA-256 zgodne ze standardem FIPS, więc mechanizmów algorytmu, które korzystają z algorytmu SHA-256 nie są obsługiwane przez usługi WCF w systemach, w którym wymagany jest Użyj zgodnych algorytmów FIPS.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-148">WCF does not support SHA-256 FIPS-compliant hashes, so algorithm suites that use SHA-256 are not supported by WCF on systems where use of FIPS compliant algorithms is required.</span></span>  
  
### <a name="fips-compliant-algorithms-may-fail-if-registry-is-edited"></a><span data-ttu-id="2e6ca-149">Zgodnych algorytmów FIPS może zakończyć się niepowodzeniem w przypadku modyfikacji rejestru</span><span class="sxs-lookup"><span data-stu-id="2e6ca-149">FIPS-Compliant Algorithms May Fail if Registry Is Edited</span></span>  
 <span data-ttu-id="2e6ca-150">Można włączyć i wyłączyć przetwarzania standardami FIPS (Federal Information) - algorytmów za pomocą przystawki lokalnych zabezpieczeń ustawienia programu Microsoft Management Console (MMC) - w.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-150">You can enable and disable Federal Information Processing Standards (FIPS)-compliant algorithms by using the Local Security Settings Microsoft Management Console (MMC) snap-in.</span></span> <span data-ttu-id="2e6ca-151">Można także przejść ustawienie w rejestrze.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-151">You can also access the setting in the registry.</span></span> <span data-ttu-id="2e6ca-152">Należy jednak pamiętać, że usługi WCF nie jest obsługiwana za pomocą rejestru, aby zresetować ustawienie.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-152">Note, however, that WCF does not support using the registry to reset the setting.</span></span> <span data-ttu-id="2e6ca-153">Jeśli wartość jest ustawiona na inny niż 1 lub 0, pomiędzy środowiska CLR i systemu operacyjnego mogą występować niespójne wyniki.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-153">If the value is set to anything other than 1 or 0, inconsistent results can occur between the CLR and the operating system.</span></span>  
  
### <a name="fips-compliant-aes-encryption-limitation"></a><span data-ttu-id="2e6ca-154">Ograniczenie szyfrowania AES zgodne ze standardem FIPS</span><span class="sxs-lookup"><span data-stu-id="2e6ca-154">FIPS-Compliant AES Encryption Limitation</span></span>  
 <span data-ttu-id="2e6ca-155">Szyfrowanie AES zgodne ze standardem FIPS nie działa w dupleksowego wywołania zwrotnego w obszarze identyfikacji poziomu personifikacji.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-155">FIPS compliant AES encryption does not work in duplex callbacks under identification level impersonation.</span></span>  
  
### <a name="cngksp-certificates"></a><span data-ttu-id="2e6ca-156">CNG/KLUCZY certyfikatów</span><span class="sxs-lookup"><span data-stu-id="2e6ca-156">CNG/KSP Certificates</span></span>  
 <span data-ttu-id="2e6ca-157">*Cryptography API: Next Generation (CNG)* długoterminowej zastępuje interfejsu CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-157">*Cryptography API: Next Generation (CNG)* is the long-term replacement for the CryptoAPI.</span></span> <span data-ttu-id="2e6ca-158">Ten interfejs API jest dostępny w niezarządzanym kodzie [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)] i nowszych wersjach systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-158">This API is available in unmanaged code on [!INCLUDE[wv](../../../../includes/wv-md.md)],  [!INCLUDE[lserver](../../../../includes/lserver-md.md)] and later Windows versions.</span></span>  
  
 <span data-ttu-id="2e6ca-159">.NET framework 4.6.1 i wcześniejsze wersje nie obsługują tych certyfikatów, ponieważ używają starszej wersji CryptoAPI do obsługi certyfikatów CNG/dostawcy magazynu KLUCZY.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-159">.NET Framework 4.6.1 and earlier versions do not support these certificates because they use the legacy CryptoAPI to handle CNG/KSP certificates.</span></span> <span data-ttu-id="2e6ca-160">Korzystanie z tych certyfikatów z platformy .NET Framework 4.6.1 i wcześniejszych wersjach spowoduje, że wystąpił wyjątek.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-160">The use of these certificates with   .NET Framework 4.6.1 and earlier versions will cause an exception.</span></span>  
  
 <span data-ttu-id="2e6ca-161">Istnieją dwa sposoby, aby sprawdzić, czy certyfikat używa dostawcy magazynu KLUCZY:</span><span class="sxs-lookup"><span data-stu-id="2e6ca-161">There are two possible ways to tell if a certificate uses KSP:</span></span>  
  
-   <span data-ttu-id="2e6ca-162">Czy `p/invoke` z `CertGetCertificateContextProperty`i sprawdzić `dwProvType` w zwróconym `CertGetCertificateContextProperty`.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-162">Do a `p/invoke` of `CertGetCertificateContextProperty`, and inspect `dwProvType` on the returned `CertGetCertificateContextProperty`.</span></span>  
  
-   <span data-ttu-id="2e6ca-163">Użyj `certutil` polecenie w wierszu polecenia na potrzeby zapytań certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-163">Use the  `certutil` command from the command line for querying certificates.</span></span> <span data-ttu-id="2e6ca-164">Aby uzyskać więcej informacji, zobacz [zadania narzędzia Certutil dotyczące rozwiązywania problemów z certyfikatami](http://go.microsoft.com/fwlink/?LinkId=120056).</span><span class="sxs-lookup"><span data-stu-id="2e6ca-164">For more information, see [Certutil tasks for troubleshooting certificates](http://go.microsoft.com/fwlink/?LinkId=120056).</span></span>  
  
## <a name="message-security-fails-if-using-aspnet-impersonation-and-aspnet-compatibility-is-required"></a><span data-ttu-id="2e6ca-165">Komunikat zabezpieczeń kończy się niepowodzeniem użycie personifikacji aplikacji ASP.NET i zgodności z platformą ASP.NET jest wymagana</span><span class="sxs-lookup"><span data-stu-id="2e6ca-165">Message Security Fails if Using ASP.NET Impersonation and ASP.NET Compatibility Is Required</span></span>  
 <span data-ttu-id="2e6ca-166">Usługi WCF nie obsługuje następujących kombinacji ustawień, ponieważ ich może uniemożliwić uwierzytelnienie klienta występowaniu:</span><span class="sxs-lookup"><span data-stu-id="2e6ca-166">WCF does not support the following combination of settings because they can prevent client authentication from occurring:</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="2e6ca-167"> Personifikacja jest włączona.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-167"> Impersonation is enabled.</span></span> <span data-ttu-id="2e6ca-168">Odbywa się w pliku Web.config przez ustawienie `impersonate` atrybut <`identity`> elementu `true`.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-168">This is done in the Web.config file by setting the `impersonate` attribute of the <`identity`> element to `true`.</span></span>  
  
-   [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="2e6ca-169"> Tryb zgodności jest włączony, ustawiając `aspNetCompatibilityEnabled` atrybutu [ \<serviceHostingEnvironment >](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) do `true`.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-169"> compatibility mode is enabled by setting the `aspNetCompatibilityEnabled` attribute of the [\<serviceHostingEnvironment>](../../../../docs/framework/configure-apps/file-schema/wcf/servicehostingenvironment.md) to `true`.</span></span>  
  
-   <span data-ttu-id="2e6ca-170">Zabezpieczenia komunikatów tryb jest używany.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-170">Message mode security is used.</span></span>  
  
 <span data-ttu-id="2e6ca-171">Obejście jest wyłączyć [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] w trybie zgodności.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-171">The work-around is to turn off the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] compatibility mode.</span></span> <span data-ttu-id="2e6ca-172">Lub, jeśli [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] wymagany jest w trybie zgodności, wyłącz [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] personifikacji funkcji i zamiast tego należy używać personifikacji dostarczonych do usługi WCF.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-172">Or, if the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] compatibility mode is required, disable the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] impersonation feature and use WCF-provided impersonation instead.</span></span> <span data-ttu-id="2e6ca-173">Aby uzyskać więcej informacji, zobacz [delegowanie i personifikacja](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="2e6ca-173">For more information, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="ipv6-literal-address-failure"></a><span data-ttu-id="2e6ca-174">Błąd literału adres IPv6</span><span class="sxs-lookup"><span data-stu-id="2e6ca-174">IPv6 Literal Address Failure</span></span>  
 <span data-ttu-id="2e6ca-175">Żądania zabezpieczeń zakończyć się niepowodzeniem, gdy klient i usługa są na tym samym komputerze, i literału adresy IPv6 są używane przez usługę.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-175">Security requests fail when the client and service are on the same machine, and IPv6 literal addresses are used for the service.</span></span>  
  
 <span data-ttu-id="2e6ca-176">Literał IPv6 rozwiązuje pracy, jeśli usługa i klient znajdują się na różnych komputerach.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-176">Literal IPv6 addresses work if the service and client are on different machines.</span></span>  
  
## <a name="wsdl-retrieval-failures-with-federated-trust"></a><span data-ttu-id="2e6ca-177">Błędy pobierania WSDL z zaufaniem federacyjnym</span><span class="sxs-lookup"><span data-stu-id="2e6ca-177">WSDL Retrieval Failures with Federated Trust</span></span>  
 <span data-ttu-id="2e6ca-178">Usługi WCF wymaga dokładnie jeden dokument WSDL dla każdego węzła w łańcuchu zaufania federacji.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-178">WCF requires exactly one WSDL document for each node in the federated trust chain.</span></span> <span data-ttu-id="2e6ca-179">Nie można więc skonfigurować pętlę w przypadku określania punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-179">Be careful not to set up a loop when specifying endpoints.</span></span> <span data-ttu-id="2e6ca-180">Jeden sposób, w którym mogą wystąpić pętle używa pobieranie WSDL łańcuchów zaufania federacyjnego z co najmniej dwóch łączy, w tym samym dokumencie WSDL.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-180">One way in which loops can arise is using a WSDL download of federated trust chains with two or more links in the same WSDL document.</span></span> <span data-ttu-id="2e6ca-181">Typowy scenariusz, który może utworzyć ten problem jest usługi federacyjnej, gdzie serwer tokenu zabezpieczeń i usługi znajdują się wewnątrz tego samego elementu ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-181">A common scenario that can produce this problem is a federated service where the Security Token Server and the service are contained inside the same ServiceHost.</span></span>  
  
 <span data-ttu-id="2e6ca-182">Przykładem takiej sytuacji jest usługi za pomocą następujących trzech adresy punktów końcowych:</span><span class="sxs-lookup"><span data-stu-id="2e6ca-182">An example of this situation is a service with the following three endpoint addresses:</span></span>  
  
-   <span data-ttu-id="2e6ca-183">http://localhost/CalculatorService/service (usługa)</span><span class="sxs-lookup"><span data-stu-id="2e6ca-183">http://localhost/CalculatorService/service (the service)</span></span>  
  
-   <span data-ttu-id="2e6ca-184">http://localhost/CalculatorService/issue_ticket (STS)</span><span class="sxs-lookup"><span data-stu-id="2e6ca-184">http://localhost/CalculatorService/issue_ticket (the STS)</span></span>  
  
-   <span data-ttu-id="2e6ca-185">http://localhost/CalculatorService/mex (punkt końcowy metadanych)</span><span class="sxs-lookup"><span data-stu-id="2e6ca-185">http://localhost/CalculatorService/mex (the metadata endpoint)</span></span>  
  
 <span data-ttu-id="2e6ca-186">To zgłasza wyjątek.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-186">This throws an exception.</span></span>  
  
 <span data-ttu-id="2e6ca-187">Możesz wprowadzić w tym scenariuszu działać przez umieszczenie `issue_ticket` punktu końcowego w innym miejscu.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-187">You can make this scenario work by putting the `issue_ticket` endpoint elsewhere.</span></span>  
  
## <a name="wsdl-import-attributes-can-be-lost"></a><span data-ttu-id="2e6ca-188">Atrybuty importu WSDL mogą być utracone</span><span class="sxs-lookup"><span data-stu-id="2e6ca-188">WSDL Import Attributes can be Lost</span></span>  
 <span data-ttu-id="2e6ca-189">WCF utraci Śledź atrybutów na `<wst:Claims>` element `RST` szablonu podczas importu WSDL.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-189">WCF loses track of the attributes on a `<wst:Claims>` element in an `RST` template when doing a WSDL import.</span></span> <span data-ttu-id="2e6ca-190">Jeśli określisz dzieje podczas importu WSDL `<Claims>` bezpośrednio w `WSFederationHttpBinding.Security.Message.TokenRequestParameters` lub `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` bezpośrednio zamiast kolekcji typów oświadczeń.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-190">This happens during a WSDL import if you specify `<Claims>` directly in `WSFederationHttpBinding.Security.Message.TokenRequestParameters` or `IssuedSecurityTokenRequestParameters.AdditionalRequestParameters` instead of using the claim type collections directly.</span></span>  <span data-ttu-id="2e6ca-191">Ponieważ importu utraci atrybuty, powiązania nie Rundy prawidłowo za pośrednictwem WSDL i dlatego jest nieprawidłowy po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-191">Since the import loses the attributes, the binding does not round trip properly through WSDL and hence is incorrect on the client side.</span></span>  
  
 <span data-ttu-id="2e6ca-192">Będzie można zmodyfikować powiązanie bezpośrednio na komputerze klienckim po wykonaniu importu.</span><span class="sxs-lookup"><span data-stu-id="2e6ca-192">The fix is to modify the binding directly on the client after doing the import.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2e6ca-193">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="2e6ca-193">See Also</span></span>  
 [<span data-ttu-id="2e6ca-194">Zagadnienia dotyczące bezpieczeństwa</span><span class="sxs-lookup"><span data-stu-id="2e6ca-194">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)  
 [<span data-ttu-id="2e6ca-195">Ujawnianie informacji</span><span class="sxs-lookup"><span data-stu-id="2e6ca-195">Information Disclosure</span></span>](../../../../docs/framework/wcf/feature-details/information-disclosure.md)  
 [<span data-ttu-id="2e6ca-196">Podniesienie uprawnień</span><span class="sxs-lookup"><span data-stu-id="2e6ca-196">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)  
 [<span data-ttu-id="2e6ca-197">Odmowa usługi</span><span class="sxs-lookup"><span data-stu-id="2e6ca-197">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)  
 [<span data-ttu-id="2e6ca-198">Manipulowanie</span><span class="sxs-lookup"><span data-stu-id="2e6ca-198">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)  
 [<span data-ttu-id="2e6ca-199">Ataki oparte na metodzie powtórzeń</span><span class="sxs-lookup"><span data-stu-id="2e6ca-199">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
