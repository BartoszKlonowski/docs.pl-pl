---
title: Praca z certyfikatami
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- certificates [WCF]
ms.assetid: 6ffb8682-8f07-4a45-afbb-8d2487e9dbc3
ms.openlocfilehash: 1b4451b11fed2fd138985824d5f139e192c51f45
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/18/2019
ms.locfileid: "59331718"
---
# <a name="working-with-certificates"></a><span data-ttu-id="fbd4c-102">Praca z certyfikatami</span><span class="sxs-lookup"><span data-stu-id="fbd4c-102">Working with Certificates</span></span>
<span data-ttu-id="fbd4c-103">Program Windows Communication Foundation (WCF) zabezpieczeń, certyfikaty cyfrowe X.509 często są używane do uwierzytelniania klientów i serwerów, szyfrowania i cyfrowego podpisywania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-103">To program Windows Communication Foundation (WCF) security, X.509 digital certificates are commonly used to authenticate clients and servers, encrypt, and digitally sign messages.</span></span> <span data-ttu-id="fbd4c-104">W tym temacie krótko opisano funkcje cyfrowego certyfikatu X.509 oraz sposobu ich używania w programie WCF i zawiera łącza do tematów, opisano te pojęcia dalsze lub które pokazują sposób wykonywania typowych zadań przy użyciu programu WCF i certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-104">This topic briefly explains X.509 digital certificate features and how to use them in WCF, and includes links to topics that explain these concepts further or that show how to accomplish common tasks using WCF and certificates.</span></span>  
  
 <span data-ttu-id="fbd4c-105">Krótko mówiąc, certyfikatu cyfrowego jest częścią *infrastruktury kluczy publicznych* (PKI), czyli system certyfikaty cyfrowe, urzędy certyfikacji i innych urzędów rejestracji, sprawdź, które uwierzytelniają Każdy biorącego udział w transakcji elektronicznej za pomocą kryptografii klucza publicznego.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-105">In brief, a digital certificate is a part of a *public key infrastructure* (PKI), which is a system of digital certificates, certificate authorities, and other registration authorities that verify and authenticate the validity of each party involved in an electronic transaction through the use of public key cryptography.</span></span> <span data-ttu-id="fbd4c-106">Urząd certyfikacji wystawia certyfikaty, a każdy certyfikat ma zestaw pól, które zawierają dane, takie jak *podmiotu* (jednostka dla których wystawiono certyfikat), dat ważności (gdy certyfikat jest ważny), wystawcy ( obiekt, który wystawił certyfikat), a klucz publiczny.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-106">A certification authority issues certificates and each certificate has a set of fields that contain data, such as *subject* (the entity to which the certificate is issued), validity dates (when the certificate is valid), issuer (the entity that issued the certificate), and a public key.</span></span> <span data-ttu-id="fbd4c-107">W programie WCF, każda z tych właściwości jest przetwarzany jako <xref:System.IdentityModel.Claims.Claim>, a każde oświadczenie jest podzielona na dwa typy: tożsamości i po prawej stronie.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-107">In WCF, each of these properties is processed as a <xref:System.IdentityModel.Claims.Claim>, and each claim is further divided into two types: identity and right.</span></span> <span data-ttu-id="fbd4c-108">Aby uzyskać więcej informacji na temat X.509 certyfikatów Zobacz [klucz publiczny certyfikatu X.509](https://go.microsoft.com/fwlink/?LinkId=209952).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-108">For more information about X.509 certificates see [X.509 Public Key Certificates](https://go.microsoft.com/fwlink/?LinkId=209952).</span></span> <span data-ttu-id="fbd4c-109">Aby uzyskać więcej informacji na temat oświadczeniami i autoryzacją w usłudze WCF zobacz [Zarządzanie oświadczeniami i autoryzacją za pomocą modelu tożsamości](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-109">For more information about Claims and Authorization in WCF see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span></span> <span data-ttu-id="fbd4c-110">Aby uzyskać więcej informacji na temat wdrażania infrastruktury kluczy publicznych, zobacz [systemu Windows Server 2008 R2 — usług certyfikatów w usłudze](https://go.microsoft.com/fwlink/?LinkId=209949).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-110">For more information about implementing a PKI, see [Windows Server 2008 R2 - Certificate Services](https://go.microsoft.com/fwlink/?LinkId=209949).</span></span>  
  
 <span data-ttu-id="fbd4c-111">Podstawową funkcją certyfikatu jest uwierzytelnianie tożsamość właściciela certyfikatu do innych osób.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-111">The primary function of a certificate is to authenticate the identity of the owner of the certificate to others.</span></span> <span data-ttu-id="fbd4c-112">Certyfikat zawiera *klucza publicznego* właściciela, podczas gdy właściciela przechowuje klucz prywatny.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-112">A certificate contains the *public key* of the owner, while the owner retains the private key.</span></span> <span data-ttu-id="fbd4c-113">Klucz publiczny może służyć do szyfrowania wiadomości wysyłane do właściciela certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-113">The public key can be used to encrypt messages sent to the owner of the certificate.</span></span> <span data-ttu-id="fbd4c-114">Tylko właściciel ma dostęp do klucza prywatnego, dlatego tylko właściciel może odszyfrować te komunikaty.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-114">Only the owner has access to the private key, so only the owner can decrypt those messages.</span></span>  
  
 <span data-ttu-id="fbd4c-115">Certyfikaty muszą być wystawiane przez urząd certyfikacji, które są często wystawcy certyfikatów innych firm.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-115">Certificates must be issued by a certification authority, which is often a third-party  issuer of certificates.</span></span> <span data-ttu-id="fbd4c-116">Domenę Windows urzędu certyfikacji jest zainstalowana na które może służyć do wystawiania certyfikatów dla komputerów w domenie.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-116">On a Windows domain, a certification authority is included that can be used to issue certificates to computers on the domain.</span></span>  
  
## <a name="viewing-certificates"></a><span data-ttu-id="fbd4c-117">Wyświetlanie certyfikatów</span><span class="sxs-lookup"><span data-stu-id="fbd4c-117">Viewing Certificates</span></span>  
 <span data-ttu-id="fbd4c-118">Do pracy z certyfikatami, często jest to konieczne je wyświetlić i sprawdzić ich właściwości.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-118">To work with certificates, it is often necessary to view them and examine their properties.</span></span> <span data-ttu-id="fbd4c-119">Łatwo to zrobić za pomocą narzędzia przystawkę Microsoft Management Console (MMC).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-119">This is easily done with the Microsoft Management Console (MMC) snap-in tool.</span></span> <span data-ttu-id="fbd4c-120">Aby uzyskać więcej informacji, zobacz [jak: Wyświetlanie certyfikatów za pomocą przystawki programu MMC](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-120">For more information, see [How to: View Certificates with the MMC Snap-in](../../../../docs/framework/wcf/feature-details/how-to-view-certificates-with-the-mmc-snap-in.md).</span></span>  
  
## <a name="certificate-stores"></a><span data-ttu-id="fbd4c-121">Magazyny certyfikatów</span><span class="sxs-lookup"><span data-stu-id="fbd4c-121">Certificate Stores</span></span>  
 <span data-ttu-id="fbd4c-122">Certyfikaty znajdują się w magazynach.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-122">Certificates are found in stores.</span></span> <span data-ttu-id="fbd4c-123">Dwie lokalizacje magazynu głównych istnieją, które są podzielone na magazynach podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-123">Two major store locations exist that are further divided into sub-stores.</span></span> <span data-ttu-id="fbd4c-124">Jeśli jesteś administratorem na komputerze, możesz wyświetlić obie magazynów głównych przy użyciu narzędzia przystawki programu MMC.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-124">If you are the administrator on a computer, you can view both major stores by using the MMC snap-in tool.</span></span> <span data-ttu-id="fbd4c-125">Użytkownicy niebędący administratorami mogą wyświetlać tylko bieżącego magazynu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-125">Non-administrators can view only the current user store.</span></span>  
  
-   <span data-ttu-id="fbd4c-126">**Magazynu komputer lokalny**.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-126">**The local machine store**.</span></span> <span data-ttu-id="fbd4c-127">Zawiera certyfikaty uzyskiwał dostęp do maszyny procesów, takich jak [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="fbd4c-127">This contains the certificates accessed by machine processes, such as [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="fbd4c-128">Użyj tej lokalizacji można przechowywać certyfikaty uwierzytelniania serwera wobec klientów.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-128">Use this location to store certificates that authenticate the server to clients.</span></span>  
  
-   <span data-ttu-id="fbd4c-129">**Bieżący magazyn użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-129">**The current user store**.</span></span> <span data-ttu-id="fbd4c-130">Interaktywne aplikacje zwykle umieść tutaj certyfikaty dla bieżącego użytkownika komputera.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-130">Interactive applications typically place certificates here for the computer's current user.</span></span> <span data-ttu-id="fbd4c-131">Jeśli tworzysz aplikację kliencką, to zwykle umieszczane są certyfikaty, które przeprowadzają uwierzytelnianie użytkownika do usługi.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-131">If you are creating a client application, this is where you typically place certificates that authenticate a user to a service.</span></span>  
  
 <span data-ttu-id="fbd4c-132">Te dwa magazyny są podzielone na magazynach podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-132">These two stores are further divided into sub-stores.</span></span> <span data-ttu-id="fbd4c-133">Najważniejsze z nich podczas programowania, korzystając z usługi WCF obejmują:</span><span class="sxs-lookup"><span data-stu-id="fbd4c-133">The most important of these when programming with WCF include:</span></span>  
  
-   <span data-ttu-id="fbd4c-134">**Zaufane główne urzędy certyfikacji**.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-134">**Trusted Root Certification Authorities**.</span></span> <span data-ttu-id="fbd4c-135">Certyfikaty można użyć w tym magazynie, aby utworzyć łańcuch certyfikatów, które można prześledzić do certyfikatu urzędu certyfikacji, w tym magazynie.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-135">You can use the certificates in this store to create a chain of certificates, which can be traced back to a certification authority certificate in this store.</span></span>  
  
    > [!IMPORTANT]
    >  <span data-ttu-id="fbd4c-136">Komputerze lokalnym domyślnie ufa wszystkich certyfikatów, umieszczane w tym magazynie nawet, jeśli certyfikat nie pochodzi z zaufanego firm urzędu certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-136">The local computer implicitly trusts any certificate placed in this store, even if the certificate does not come from a trusted third-party certification authority.</span></span> <span data-ttu-id="fbd4c-137">Z tego powodu nie należy umieszczać żadnych certyfikatów do tego magazynu chyba, że w pełni ufasz wystawcy i konsekwencje.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-137">For this reason, do not place any certificate into this store unless you fully trust the issuer and understand the consequences.</span></span>  
  
-   <span data-ttu-id="fbd4c-138">**Osobiste**.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-138">**Personal**.</span></span> <span data-ttu-id="fbd4c-139">Ten magazyn jest używany dla certyfikatów skojarzonych z użytkownikiem komputerze.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-139">This store is used for certificates associated with a user of a computer.</span></span> <span data-ttu-id="fbd4c-140">Zazwyczaj ten magazyn jest używany do certyfikatów wystawianych przez jeden z certyfikatów urzędów certyfikacji w magazynie zaufanych głównych urzędów certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-140">Typically this store is used for certificates issued by one of the certification authority certificates found in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="fbd4c-141">Alternatywnie tutaj certyfikat może być własnym wystawiony i zaufane przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-141">Alternatively, a certificate found here may be self-issued and trusted by an application.</span></span>  
  
 <span data-ttu-id="fbd4c-142">Aby uzyskać więcej informacji na temat magazynów certyfikatów Zobacz [magazynów certyfikatów](/windows/desktop/secauthn/certificate-stores).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-142">For more information about certificate stores, see [Certificate Stores](/windows/desktop/secauthn/certificate-stores).</span></span>  
  
### <a name="selecting-a-store"></a><span data-ttu-id="fbd4c-143">Wybieranie Store</span><span class="sxs-lookup"><span data-stu-id="fbd4c-143">Selecting a Store</span></span>  
 <span data-ttu-id="fbd4c-144">Wybieranie miejsce przechowywania certyfikatu zależy od sposobu i czasu uruchomienia usługi lub klienta.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-144">Selecting where to store a certificate depends how and when the service or client runs.</span></span> <span data-ttu-id="fbd4c-145">Obowiązują następujące reguły ogólne:</span><span class="sxs-lookup"><span data-stu-id="fbd4c-145">The following general rules apply:</span></span>  
  
-   <span data-ttu-id="fbd4c-146">Jeśli usługa WCF jest hostowana w użyciu usługi Windows **komputera lokalnego** przechowywania.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-146">If the WCF service is hosted in a Windows service use the **local machine** store.</span></span> <span data-ttu-id="fbd4c-147">Należy pamiętać, że wymagane są uprawnienia administratora, aby zainstalować certyfikaty w magazynie komputera lokalnego.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-147">Note that administrator privileges are required to install certificates into the local machine store.</span></span>  
  
-   <span data-ttu-id="fbd4c-148">Jeśli usługi lub klienta jest aplikacja, która jest uruchamiana na koncie użytkownika, użyj **bieżącego użytkownika** przechowywania.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-148">If the service or client is an application that runs under a user account, then use the **current user** store.</span></span>  
  
### <a name="accessing-stores"></a><span data-ttu-id="fbd4c-149">Uzyskiwanie dostępu do magazynów</span><span class="sxs-lookup"><span data-stu-id="fbd4c-149">Accessing Stores</span></span>  
 <span data-ttu-id="fbd4c-150">Magazyny są chronione przez listy kontroli dostępu (ACL), podobnie jak foldery na komputerze.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-150">Stores are protected by access control lists (ACLs), just like folders on a computer.</span></span> <span data-ttu-id="fbd4c-151">Podczas tworzenia usługi hostowanej przez Internetowe usługi informacyjne (IIS) [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] proces jest uruchamiany w ramach [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] konta.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-151">When creating a service hosted by Internet Information Services (IIS), the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] process runs under the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] account.</span></span> <span data-ttu-id="fbd4c-152">Konto musi mieć dostęp do magazynu który zawiera certyfikaty używane przez usługę.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-152">That account must have access to the store that contains the certificates a service uses.</span></span> <span data-ttu-id="fbd4c-153">Każdy z magazynów głównych jest chroniony za pomocą domyślnej listy dostępu, ale listy mogą być modyfikowane.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-153">Each of the major stores is protected with a default access list, but the lists can be modified.</span></span> <span data-ttu-id="fbd4c-154">Jeśli utworzysz rolę oddzielne dostępu do magazynu, należy przyznać uprawnienia dostępu do tej roli.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-154">If you create a separate role to access a store, you must grant that role access permission.</span></span> <span data-ttu-id="fbd4c-155">Aby dowiedzieć się, jak zmodyfikować listę dostępu za pomocą narzędzia WinHttpCertConfig.exe, zobacz [jak: Tworzenie certyfikatów tymczasowych do użycia podczas tworzenia](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-155">To learn how to modify the access list using the WinHttpCertConfig.exe tool, see [How to: Create Temporary Certificates for Use During Development](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span></span> <span data-ttu-id="fbd4c-156">Aby uzyskać więcej informacji o korzystaniu z certyfikatów klienta z programem IIS, zobacz [sposób wywoływania usługi sieci Web przy użyciu certyfikatu klienta do uwierzytelniania w aplikacji internetowej ASP.NET](https://go.microsoft.com/fwlink/?LinkId=88914).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-156">For more information about using client certificates with IIS, see [How to call a Web service by using a client certificate for authentication in an ASP.NET Web application](https://go.microsoft.com/fwlink/?LinkId=88914).</span></span>  
  
## <a name="chain-trust-and-certificate-authorities"></a><span data-ttu-id="fbd4c-157">Łańcuch zaufania i urzędy certyfikacji</span><span class="sxs-lookup"><span data-stu-id="fbd4c-157">Chain Trust and Certificate Authorities</span></span>  
 <span data-ttu-id="fbd4c-158">Certyfikaty są tworzone w hierarchii, w którym każdego indywidualnego certyfikatu jest połączony z urzędem certyfikacji, który wystawił ten certyfikat.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-158">Certificates are created in a hierarchy where each individual certificate is linked to the CA that issued the certificate.</span></span> <span data-ttu-id="fbd4c-159">Jest to łącze do certyfikatu urzędu certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-159">This link is to the CA’s certificate.</span></span> <span data-ttu-id="fbd4c-160">Urząd certyfikacji certyfikatu następnie łączy się z urzędem certyfikacji, który wystawił certyfikat oryginalnego urzędu certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-160">The CA’s certificate then links to the CA that issued the original CA’s certificate.</span></span> <span data-ttu-id="fbd4c-161">Ten proces jest powtarzany, aż do osiągnięcia certyfikat głównego urzędu certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-161">This process is repeated up until the Root CA’s certificate is reached.</span></span> <span data-ttu-id="fbd4c-162">Certyfikat głównego urzędu certyfikacji jest dodatkowo z natury zaufanych.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-162">The Root CA’s certificate is inherently trusted.</span></span>  
  
 <span data-ttu-id="fbd4c-163">Certyfikaty cyfrowe są używane do uwierzytelniania jednostki, opierając się na tej hierarchii, nazywany również *łańcuch zaufania*.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-163">Digital certificates are used to authenticate an entity by relying on this hierarchy, also called a *chain of trust*.</span></span> <span data-ttu-id="fbd4c-164">Możesz wyświetlić łańcuch dowolny certyfikat za pomocą przystawki programu MMC przez dwukrotne kliknięcie każdego certyfikatu, a następnie klikając **ścieżka certyfikatu** kartę. Aby uzyskać więcej informacji o importowaniu łańcuchów certyfikatów dla urzędu certyfikacji, zobacz [jak: Określanie łańcucha certyfikatu urzędu certyfikacji certyfikatu służącego do weryfikowania podpisów](../../../../docs/framework/wcf/feature-details/specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-164">You can view any certificate's chain using the MMC snap-in by double-clicking any certificate, then clicking the **Certificate Path** tab. For more information about importing certificate chains for a Certification authority, see [How to: Specify the Certificate Authority Certificate Chain Used to Verify Signatures](../../../../docs/framework/wcf/feature-details/specify-the-certificate-authority-chain-verify-signatures-wcf.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="fbd4c-165">Wszelkie wystawcy, może być wyznaczony zaufanego głównego urzędu certyfikacji, umieszczając wystawcy certyfikatu w magazynie certyfikatów zaufanego głównego urzędu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-165">Any issuer can be designated a trusted root authority by placing the issuer's certificate in the trusted root authority certificate store.</span></span>  
  
### <a name="disabling-chain-trust"></a><span data-ttu-id="fbd4c-166">Wyłączanie łańcuch zaufania</span><span class="sxs-lookup"><span data-stu-id="fbd4c-166">Disabling Chain Trust</span></span>  
 <span data-ttu-id="fbd4c-167">Podczas tworzenia nowej usługi, używasz certyfikatu, który nie jest wystawiony przez zaufany certyfikat główny lub sam certyfikat wystawiającego certyfikaty mogą nie być w magazynie zaufanych głównych urzędów certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-167">When creating a new service, you may be using a certificate that is not issued by a trusted root certificate, or the issuing certificate itself may not be in the Trusted Root Certification Authorities store.</span></span> <span data-ttu-id="fbd4c-168">Wyłącznie do celów programowania można tymczasowo wyłączyć mechanizm, który sprawdza, czy łańcuch zaufania certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-168">For development purposes only, you can temporarily disable the mechanism that checks the chain of trust for a certificate.</span></span> <span data-ttu-id="fbd4c-169">Aby to zrobić, należy ustawić `CertificateValidationMode` właściwości albo `PeerTrust` lub `PeerOrChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-169">To do this, set the `CertificateValidationMode` property to either `PeerTrust` or `PeerOrChainTrust`.</span></span> <span data-ttu-id="fbd4c-170">Albo tryb oznacza, że certyfikat może albo własnym wystawiony (relacja zaufania elementów równorzędnych) lub jej część całego łańcucha zaufania.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-170">Either mode specifies that the certificate can either be self-issued (peer trust) or part of a chain of trust.</span></span> <span data-ttu-id="fbd4c-171">Właściwość można ustawić na żadnym z następujących klas.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-171">You can set the property on any of the following classes.</span></span>  
  
|<span data-ttu-id="fbd4c-172">Class</span><span class="sxs-lookup"><span data-stu-id="fbd4c-172">Class</span></span>|<span data-ttu-id="fbd4c-173">Właściwość</span><span class="sxs-lookup"><span data-stu-id="fbd4c-173">Property</span></span>|  
|-----------|--------------|  
|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>|<xref:System.ServiceModel.Security.X509PeerCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>|<xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication.CertificateValidationMode%2A?displayProperty=nameWithType>|  
|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential>|<xref:System.ServiceModel.Security.IssuedTokenServiceCredential.CertificateValidationMode%2A?displayProperty=nameWithType>|  
  
 <span data-ttu-id="fbd4c-174">Można również ustawić właściwości, za pomocą konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-174">You can also set the property using configuration.</span></span> <span data-ttu-id="fbd4c-175">Następujące elementy są używane do określania tryb weryfikacji:</span><span class="sxs-lookup"><span data-stu-id="fbd4c-175">The following elements are used to specify the validation mode:</span></span>  
  
-   [<span data-ttu-id="fbd4c-176">\<Uwierzytelnianie ></span><span class="sxs-lookup"><span data-stu-id="fbd4c-176">\<authentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md)  
  
-   [<span data-ttu-id="fbd4c-177">\<peerAuthentication ></span><span class="sxs-lookup"><span data-stu-id="fbd4c-177">\<peerAuthentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/peerauthentication-element.md)  
  
-   [<span data-ttu-id="fbd4c-178">\<messageSenderAuthentication></span><span class="sxs-lookup"><span data-stu-id="fbd4c-178">\<messageSenderAuthentication></span></span>](../../../../docs/framework/configure-apps/file-schema/wcf/messagesenderauthentication-element.md)  
  
## <a name="custom-authentication"></a><span data-ttu-id="fbd4c-179">Uwierzytelnianie niestandardowe</span><span class="sxs-lookup"><span data-stu-id="fbd4c-179">Custom Authentication</span></span>  
 <span data-ttu-id="fbd4c-180">`CertificateValidationMode` Właściwość umożliwia także dostosować sposób uwierzytelniania certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-180">The `CertificateValidationMode` property also enables you to customize how certificates are authenticated.</span></span> <span data-ttu-id="fbd4c-181">Domyślnie ustawiono poziom `ChainTrust`.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-181">By default, the level is set to `ChainTrust`.</span></span> <span data-ttu-id="fbd4c-182">Aby użyć <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> wartości, należy także ustawić `CustomCertificateValidatorType` atrybutu do zestawu i typ używany do weryfikacji certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-182">To use the <xref:System.ServiceModel.Security.X509CertificateValidationMode.Custom> value, you must also set the `CustomCertificateValidatorType` attribute to an assembly and type used to validate the certificate.</span></span> <span data-ttu-id="fbd4c-183">Aby utworzyć niestandardowego modułu weryfikacji, musi dziedziczyć abstrakcyjnej <xref:System.IdentityModel.Selectors.X509CertificateValidator> klasy.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-183">To create a custom validator, you must inherit from the abstract <xref:System.IdentityModel.Selectors.X509CertificateValidator> class.</span></span>  
  
 <span data-ttu-id="fbd4c-184">Podczas tworzenia niestandardowego wystawcy uwierzytelnienia, jest najważniejszą metodą, aby zastąpić <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-184">When creating a custom authenticator, the most important method to override is the <xref:System.IdentityModel.Selectors.X509CertificateValidator.Validate%2A> method.</span></span> <span data-ttu-id="fbd4c-185">Na przykład niestandardowe uwierzytelnianie Zobacz [moduł weryfikacji certyfikatów X.509](../../../../docs/framework/wcf/samples/x-509-certificate-validator.md) próbki.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-185">For an example of custom authentication, see the [X.509 Certificate Validator](../../../../docs/framework/wcf/samples/x-509-certificate-validator.md) sample.</span></span> <span data-ttu-id="fbd4c-186">Aby uzyskać więcej informacji, zobacz [niestandardowe poświadczenia i Walidacja poświadczeń](../../../../docs/framework/wcf/extending/custom-credential-and-credential-validation.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-186">For more information, see [Custom Credential and Credential Validation](../../../../docs/framework/wcf/extending/custom-credential-and-credential-validation.md).</span></span>  
  
## <a name="using-the-powershell-new-selfsignedcertificate-cmdlet-to-build-a-certificate-chain"></a><span data-ttu-id="fbd4c-187">Za pomocą polecenia cmdlet programu Powershell New-SelfSignedCertificate, aby zbudować łańcucha certyfikatów</span><span class="sxs-lookup"><span data-stu-id="fbd4c-187">Using the Powershell New-SelfSignedCertificate Cmdlet to Build a Certificate Chain</span></span>  
 <span data-ttu-id="fbd4c-188">Polecenia cmdlet programu Powershell, New-SelfSignedCertificate tworzy certyfikaty X.509 i pary kluczy prywatnych klucza/publiczne.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-188">The Powershell New-SelfSignedCertificate cmdlet creates X.509 certificates and private key/public key pairs.</span></span> <span data-ttu-id="fbd4c-189">Można zapisać klucza prywatnego na dysku, a następnie użyć jej do wystawiania i Utwórz nowe certyfikaty, dlatego symulowania hierarchii certyfikatów połączonych.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-189">You can save the private key to disk and then use it to issue and sign new certificates, thus simulating a hierarchy of chained certificates.</span></span> <span data-ttu-id="fbd4c-190">Polecenie cmdlet jest przeznaczona do użytku tylko jako pomoc podczas opracowywania usługi i nigdy nie powinien być używany do tworzenia certyfikatów, aby uzyskać rzeczywiste wdrożenie.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-190">The cmdlet is intended for use only as an aid when developing services and should never be used to create certificates for actual deployment.</span></span> <span data-ttu-id="fbd4c-191">Podczas tworzenia usługi WCF, wykonaj następujące kroki, aby utworzyć łańcuch zaufania za pomocą polecenia cmdlet New-SelfSignedCertificate.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-191">When developing a WCF service, use the following steps to build a chain of trust with the New-SelfSignedCertificate cmdlet.</span></span>  
  
#### <a name="to-build-a-chain-of-trust-with-the-new-selfsignedcertificate-cmdlet"></a><span data-ttu-id="fbd4c-192">Aby utworzyć łańcuch zaufania za pomocą polecenia cmdlet New-SelfSignedCertificate</span><span class="sxs-lookup"><span data-stu-id="fbd4c-192">To build a chain of trust with the New-SelfSignedCertificate cmdlet</span></span>  
  
1. <span data-ttu-id="fbd4c-193">Tworzenie tymczasowego certyfikat głównego urzędu certyfikacji (podpisem) przy użyciu polecenia cmdlet New-SelfSignedCertificate.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-193">Create a temporary root authority (self-signed) certificate using the New-SelfSignedCertificate cmdlet.</span></span> <span data-ttu-id="fbd4c-194">Zapisz klucz prywatny do dysku.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-194">Save the private key to the disk.</span></span>  
  
2. <span data-ttu-id="fbd4c-195">Użyj nowego certyfikatu do wystawienia innego certyfikatu, który zawiera klucz publiczny.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-195">Use the new certificate to issue another certificate that contains the public key.</span></span>  
  
3. <span data-ttu-id="fbd4c-196">Zaimportuj certyfikat głównego urzędu certyfikacji do magazynu zaufanych głównych urzędów certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-196">Import the root authority certificate into the Trusted Root Certification Authorities store.</span></span>  
  
4. <span data-ttu-id="fbd4c-197">Aby uzyskać instrukcje krok po kroku, zobacz [jak: Tworzenie certyfikatów tymczasowych do użycia podczas tworzenia](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-197">For step-by-step instructions, see [How to: Create Temporary Certificates for Use During Development](../../../../docs/framework/wcf/feature-details/how-to-create-temporary-certificates-for-use-during-development.md).</span></span>  
  
## <a name="which-certificate-to-use"></a><span data-ttu-id="fbd4c-198">Który certyfikat do użycia?</span><span class="sxs-lookup"><span data-stu-id="fbd4c-198">Which Certificate to Use?</span></span>  
 <span data-ttu-id="fbd4c-199">Często zadawane pytania dotyczące certyfikatów są certyfikatu do użycia i dlaczego.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-199">Common questions about certificates are which certificate to use, and why.</span></span> <span data-ttu-id="fbd4c-200">Odpowiedź zależy od tego, czy programowania klienta lub usługę.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-200">The answer depends on whether you are programming a client or service.</span></span> <span data-ttu-id="fbd4c-201">Poniższe informacje zamieszczono ogólne wskazówki i nie jest wyczerpująca odpowiedzi na te pytania.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-201">The following information provides a general guideline and is not an exhaustive answer to these questions.</span></span>  
  
### <a name="service-certificates"></a><span data-ttu-id="fbd4c-202">Certyfikaty usługi</span><span class="sxs-lookup"><span data-stu-id="fbd4c-202">Service Certificates</span></span>  
 <span data-ttu-id="fbd4c-203">Certyfikaty usługi mają główne zadanie uwierzytelniania serwera wobec klientów.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-203">Service certificates have the primary task of authenticating the server to clients.</span></span> <span data-ttu-id="fbd4c-204">Jednym z sprawdzania początkowego, gdy klient uwierzytelnia serwer jest porównanie wartości **podmiotu** pole do jednolity identyfikator zasobów (URI) używane do kontaktu z usługą: DNS oba muszą być zgodne.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-204">One of the initial checks when a client authenticates a server is to compare the value of the **Subject** field to the Uniform Resource Identifier (URI) used to contact the service: the DNS of both must match.</span></span> <span data-ttu-id="fbd4c-205">Na przykład, jeśli identyfikator URI usługi jest `http://www.contoso.com/endpoint/` , a następnie **podmiotu** pole musi zawierać także wartość `www.contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-205">For example, if the URI of the service is `http://www.contoso.com/endpoint/` then the **Subject** field must also contain the value `www.contoso.com`.</span></span>  
  
 <span data-ttu-id="fbd4c-206">Należy pamiętać, że pole może zawierać kilka wartości każdego prefiksem inicjowania, aby wskazać wartość.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-206">Note that the field can contain several values, each prefixed with an initialization to indicate the value.</span></span> <span data-ttu-id="fbd4c-207">Najczęściej inicjowania jest "CN" dla nazwy pospolitej, na przykład `CN = www.contoso.com`.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-207">Most commonly, the initialization is "CN" for common name, for example, `CN = www.contoso.com`.</span></span> <span data-ttu-id="fbd4c-208">Istnieje również możliwość dla **podmiotu** pole to pole pozostanie puste, w którym to przypadku **alternatywna nazwa podmiotu** pole może zawierać **nazwy DNS** wartość.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-208">It is also possible for the **Subject** field to be blank, in which case the **Subject Alternative Name** field can contain the **DNS Name** value.</span></span>  
  
 <span data-ttu-id="fbd4c-209">Należy również zauważyć wartość **przeznaczone do celów** pole certyfikatu powinien zawierać odpowiednią wartość, takie jak "Uwierzytelnianie serwera" lub "Uwierzytelnienie klienta".</span><span class="sxs-lookup"><span data-stu-id="fbd4c-209">Also note the value of the **Intended Purposes** field of the certificate should include an appropriate value, such as "Server Authentication" or "Client Authentication".</span></span>  
  
### <a name="client-certificates"></a><span data-ttu-id="fbd4c-210">Certyfikaty klienta</span><span class="sxs-lookup"><span data-stu-id="fbd4c-210">Client Certificates</span></span>  
 <span data-ttu-id="fbd4c-211">Certyfikaty klienta nie są zwykle wydawane przez urząd certyfikacji innych firm.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-211">Client certificates are not typically issued by a third-party certification authority.</span></span> <span data-ttu-id="fbd4c-212">Zamiast tego w bieżącej lokalizacji użytkownika w magazynie osobistym zazwyczaj zawiera certyfikaty, umieszczone tam przez urząd główny, z przeznaczeniem "Uwierzytelnienie klienta".</span><span class="sxs-lookup"><span data-stu-id="fbd4c-212">Instead, the Personal store of the current user location typically contains certificates placed there by a root authority, with an intended purpose of "Client Authentication".</span></span> <span data-ttu-id="fbd4c-213">Klient może używać takich certyfikatów, gdy jest wymagane uwierzytelnianie wzajemne.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-213">The client can use such a certificate when mutual authentication is required.</span></span>  
  
## <a name="online-revocation-and-offline-revocation"></a><span data-ttu-id="fbd4c-214">Odwołań w trybie online i Offline odwołania</span><span class="sxs-lookup"><span data-stu-id="fbd4c-214">Online Revocation and Offline Revocation</span></span>  
  
### <a name="certificate-validity"></a><span data-ttu-id="fbd4c-215">Ważność certyfikatu</span><span class="sxs-lookup"><span data-stu-id="fbd4c-215">Certificate Validity</span></span>  
 <span data-ttu-id="fbd4c-216">Każdy certyfikat jest prawidłowy tylko dla danego okresu czasu, o nazwie *okres ważności*.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-216">Every certificate is valid only for a given period of time, called the *validity period*.</span></span> <span data-ttu-id="fbd4c-217">Okres ważności jest definiowany przez **ważny od** i **ważny do** pola certyfikatu X.509.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-217">The validity period is defined by the **Valid from** and **Valid to** fields of an X.509 certificate.</span></span> <span data-ttu-id="fbd4c-218">Podczas uwierzytelniania certyfikat jest sprawdzany w celu ustalenia, czy certyfikat jest nadal w okresie ważności.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-218">During authentication, the certificate is checked to determine whether the certificate is still within the validity period.</span></span>  
  
### <a name="certificate-revocation-list"></a><span data-ttu-id="fbd4c-219">Lista odwołania certyfikatów</span><span class="sxs-lookup"><span data-stu-id="fbd4c-219">Certificate Revocation List</span></span>  
 <span data-ttu-id="fbd4c-220">W dowolnym momencie podczas okresu ważności urzędu certyfikacji można odwołać się do certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-220">At any time during the validity period, the certification authority can revoke a certificate.</span></span> <span data-ttu-id="fbd4c-221">To może wystąpić wiele powodów, takich jak naruszenia bezpieczeństwa klucza prywatnego certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-221">This can occur for many reasons, such as a compromise of the private key of the certificate.</span></span>  
  
 <span data-ttu-id="fbd4c-222">W takiej sytuacji sieciowych, co do których jest elementem podrzędnym elementu odwołanego certyfikatu są również nieprawidłowe i nie są zaufane podczas uwierzytelniania procedury.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-222">When this occurs, any chains that descend from the revoked certificate are also invalid, and are not trusted during authentication procedures.</span></span> <span data-ttu-id="fbd4c-223">Aby dowiedzieć się o certyfikatach, które zostaną odwołane, a data sygnaturami czasowymi publikuje Każdy wystawca *listy odwołania certyfikatów* (CRL).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-223">To find out which certificates are revoked, each issuer publishes a time- and date-stamped *certificate revocation list* (CRL).</span></span> <span data-ttu-id="fbd4c-224">Lista może zostać sprawdzone za pomocą odwołań w trybie online lub offline odwołania, ustawiając `RevocationMode` lub `DefaultRevocationMode` właściwość następujące klasy do jednego z <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> wartości wyliczenia: <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>, <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>, <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication> , a <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> klasy.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-224">The list can be checked using either online revocation or offline revocation by setting the `RevocationMode` or `DefaultRevocationMode` property of the following classes to one of the <xref:System.Security.Cryptography.X509Certificates.X509RevocationMode> enumeration values: <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication>, <xref:System.ServiceModel.Security.X509PeerCertificateAuthentication>, <xref:System.ServiceModel.Security.X509ServiceCertificateAuthentication>, and the <xref:System.ServiceModel.Security.IssuedTokenServiceCredential> classes.</span></span> <span data-ttu-id="fbd4c-225">Jest wartością domyślną dla wszystkich właściwości `Online`.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-225">The default value for all properties is `Online`.</span></span>  
  
 <span data-ttu-id="fbd4c-226">Można również ustawić tryb, w konfiguracji przy użyciu `revocationMode` zarówno atrybut [ \<uwierzytelniania >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (z [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)) i [ \<uwierzytelniania >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (z [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-226">You can also set the mode in configuration using the `revocationMode` attribute of both the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md)) and the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-clientcertificate-element.md) (of the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md)).</span></span>  
  
## <a name="the-setcertificate-method"></a><span data-ttu-id="fbd4c-227">Metoda SetCertificate</span><span class="sxs-lookup"><span data-stu-id="fbd4c-227">The SetCertificate Method</span></span>  
 <span data-ttu-id="fbd4c-228">W programie WCF często należy określić certyfikat lub zbiór certyfikaty usługi lub klient znajduje się na potrzeby uwierzytelniania, szyfrowania i cyfrowego podpisywania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-228">In WCF, you must often specify a certificate or set of certificates a service or client is to use to authenticate, encrypt, or digitally sign a message.</span></span> <span data-ttu-id="fbd4c-229">Można to zrobić programowo przy użyciu `SetCertificate` metoda różnych zajęciach, które reprezentują certyfikaty X.509.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-229">You can do this programmatically by using the `SetCertificate` method of various classes that represent X.509 certificates.</span></span> <span data-ttu-id="fbd4c-230">Następujące klasy użyj `SetCertificate` metodę, aby określić certyfikat.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-230">The following classes use the `SetCertificate` method to specify a certificate.</span></span>  
  
|<span data-ttu-id="fbd4c-231">Class</span><span class="sxs-lookup"><span data-stu-id="fbd4c-231">Class</span></span>|<span data-ttu-id="fbd4c-232">Metoda</span><span class="sxs-lookup"><span data-stu-id="fbd4c-232">Method</span></span>|  
|-----------|------------|  
|<xref:System.ServiceModel.Security.PeerCredential>|<xref:System.ServiceModel.Security.PeerCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential>|<xref:System.ServiceModel.Security.X509CertificateInitiatorClientCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential>|<xref:System.ServiceModel.Security.X509CertificateRecipientServiceCredential.SetCertificate%2A>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential>|  
|<xref:System.ServiceModel.Security.X509CertificateInitiatorServiceCredential.SetCertificate%2A>|  
  
 <span data-ttu-id="fbd4c-233">`SetCertificate` Metoda działa poprzez podanie lokalizacji magazynu i Magazyn, typu "wyszukiwanie" (`x509FindType` parametru), który określa pole certyfikatu i wartość do znalezienia w polu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-233">The `SetCertificate` method works by designating a store location and store, a "find" type (`x509FindType` parameter) that specifies a field of the certificate, and a value to find in the field.</span></span> <span data-ttu-id="fbd4c-234">Na przykład, poniższy kod tworzy <xref:System.ServiceModel.ServiceHost> wystąpienia i ustawia certyfikat usługi, używany do uwierzytelniania usługi dla klientów z `SetCertificate` metody.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-234">For example, the following code creates a <xref:System.ServiceModel.ServiceHost> instance and sets the service certificate used to authenticate the service to clients with the `SetCertificate` method.</span></span>  
  
 [!code-csharp[c_WorkingWithCertificates#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_workingwithcertificates/cs/source.cs#1)]
 [!code-vb[c_WorkingWithCertificates#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_workingwithcertificates/vb/source.vb#1)]  
  
### <a name="multiple-certificates-with-the-same-value"></a><span data-ttu-id="fbd4c-235">Wiele certyfikatów z taką samą wartość</span><span class="sxs-lookup"><span data-stu-id="fbd4c-235">Multiple Certificates with the Same Value</span></span>  
 <span data-ttu-id="fbd4c-236">Magazyn może zawierać wiele certyfikatów o takiej samej nazwie podmiotu.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-236">A store may contain multiple certificates with the same subject name.</span></span> <span data-ttu-id="fbd4c-237">Oznacza to, że jeśli użytkownik określi, że `x509FindType` jest <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> lub <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName>i więcej niż jeden certyfikat ma taką samą wartość, jest zgłaszany wyjątek, ponieważ nie istnieje sposób do odróżniania, który certyfikat jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-237">This means that if you specify that the `x509FindType` is <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectName> or <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName>, and more than one certificate has the same value, an exception is thrown because there is no way to distinguish which certificate is required.</span></span> <span data-ttu-id="fbd4c-238">Można temu zaradzić, ustawiając `x509FindType` do <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint>.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-238">You can mitigate this by setting the `x509FindType` to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByThumbprint>.</span></span> <span data-ttu-id="fbd4c-239">Pole odcisk palca zawiera unikatową wartość, która może służyć do znalezienia określonego certyfikatu w magazynie.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-239">The thumbprint field contains a unique value that can be used to find a specific certificate in a store.</span></span> <span data-ttu-id="fbd4c-240">Jednak to ma swój własny wadą: Jeśli certyfikat jest odwołany lub odnowienia, `SetCertificate` metoda nie powiedzie się, ponieważ odcisk palca również został usunięty.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-240">However, this has its own disadvantage: if the certificate is revoked or renewed, the `SetCertificate` method fails because the thumbprint is also gone.</span></span> <span data-ttu-id="fbd4c-241">Lub, jeśli certyfikat nie jest już prawidłowy, uwierzytelnianie nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-241">Or, if the certificate is no longer valid, authentication fails.</span></span> <span data-ttu-id="fbd4c-242">Sposób, aby rozwiązać ten problem, jest ustalenie `x590FindType` parametr <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> i określ nazwę wystawcy.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-242">The way to mitigate this is to set the `x590FindType` parameter to <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByIssuerName> and specify the issuer's name.</span></span> <span data-ttu-id="fbd4c-243">Jeśli wymagana jest nie określonego wystawcę, można również ustawić jedną z innych <xref:System.Security.Cryptography.X509Certificates.X509FindType> wartości wyliczenia, takich jak <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid>.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-243">If no particular issuer is required, you can also set one of the other <xref:System.Security.Cryptography.X509Certificates.X509FindType> enumeration values, such as <xref:System.Security.Cryptography.X509Certificates.X509FindType.FindByTimeValid>.</span></span>  
  
## <a name="certificates-in-configuration"></a><span data-ttu-id="fbd4c-244">Certyfikaty w konfiguracji</span><span class="sxs-lookup"><span data-stu-id="fbd4c-244">Certificates in Configuration</span></span>  
 <span data-ttu-id="fbd4c-245">Certyfikaty można również ustawić za pomocą konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-245">You can also set certificates by using configuration.</span></span> <span data-ttu-id="fbd4c-246">Jeśli tworzysz usługę poświadczeń, takich jak certyfikaty, są określone w obszarze [ \<serviceBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-246">If you are creating a service, credentials, including certificates, are specified under the [\<serviceBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/servicebehaviors.md).</span></span> <span data-ttu-id="fbd4c-247">Podczas programowania klienta certyfikaty są określone w obszarze [ \<endpointBehaviors >](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-247">When you are programming a client, certificates are specified under the [\<endpointBehaviors>](../../../../docs/framework/configure-apps/file-schema/wcf/endpointbehaviors.md).</span></span>  
  
## <a name="mapping-a-certificate-to-a-user-account"></a><span data-ttu-id="fbd4c-248">Mapowanie certyfikatu do konta użytkownika</span><span class="sxs-lookup"><span data-stu-id="fbd4c-248">Mapping a Certificate to a User Account</span></span>  
 <span data-ttu-id="fbd4c-249">Funkcja usług IIS i usługi Active Directory jest zdolność do mapowania certyfikatu na konto użytkownika Windows.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-249">A feature of IIS and Active Directory is the ability to map a certificate to a Windows user account.</span></span> <span data-ttu-id="fbd4c-250">Aby uzyskać więcej informacji na temat tej funkcji, zobacz [mapowania certyfikatów do kont użytkowników](https://go.microsoft.com/fwlink/?LinkId=88917).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-250">For more information about the feature, see [Map certificates to user accounts](https://go.microsoft.com/fwlink/?LinkId=88917).</span></span>  
  
 <span data-ttu-id="fbd4c-251">Aby uzyskać więcej informacji o używaniu mapowanie usługi Active Directory, zobacz [mapowania certyfikatów klientów przy użyciu mapowanie usługi katalogowej](https://go.microsoft.com/fwlink/?LinkId=88918).</span><span class="sxs-lookup"><span data-stu-id="fbd4c-251">For more information about using Active Directory mapping, see [Mapping Client Certificates with Directory Service Mapping](https://go.microsoft.com/fwlink/?LinkId=88918).</span></span>  
  
 <span data-ttu-id="fbd4c-252">Dzięki tej możliwości jest włączone, można ustawić <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> właściwość <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> klasy `true`.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-252">With this capability enabled, you can set the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication.MapClientCertificateToWindowsAccount%2A> property of the <xref:System.ServiceModel.Security.X509ClientCertificateAuthentication> class to `true`.</span></span> <span data-ttu-id="fbd4c-253">W konfiguracji, można ustawić `mapClientCertificateToWindowsAccount` atrybutu [ \<uwierzytelniania >](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) elementu `true`, jak pokazano w poniższym kodzie.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-253">In configuration, you can set the `mapClientCertificateToWindowsAccount` attribute of the [\<authentication>](../../../../docs/framework/configure-apps/file-schema/wcf/authentication-of-servicecertificate-element.md) element to `true`, as shown in the following code.</span></span>  
  
```xml  
<serviceBehaviors>  
 <behavior name="MappingBehavior">  
  <serviceCredentials>  
   <clientCertificate>  
    <authentication certificateValidationMode="None" mapClientCertificateToWindowsAccount="true" />  
   </clientCertificate>  
  </serviceCredentials>  
 </behavior>  
</serviceBehaviors>  
```  
  
 <span data-ttu-id="fbd4c-254">Mapowania certyfikatu X.509 do tokenu, który reprezentuje konto użytkownika Windows uznaje podniesienie uprawnień, ponieważ po mapowane, tokenu Windows można użyć do uzyskania dostępu do chronionych zasobów.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-254">Mapping an X.509 certificate to the token that represents a Windows user account is considered an elevation of privilege because, once mapped, the Windows token can be used to gain access to protected resources.</span></span> <span data-ttu-id="fbd4c-255">W związku z tym zasady domeny wymaga certyfikatu X.509, zachowanie zgodności z zasadami, jego przed mapowania.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-255">Therefore, domain policy requires the X.509 certificate to comply with its policy prior to mapping.</span></span> <span data-ttu-id="fbd4c-256">*SChannel* pakiet zabezpieczeń wymusza to wymaganie.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-256">The *SChannel* security package enforces this requirement.</span></span>  
  
 <span data-ttu-id="fbd4c-257">Korzystając z [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] lub nowszej, WCF zapewnia certyfikat jest zgodny z zasad domeny, zanim jest mapowany do konta Windows.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-257">When using [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] or later, WCF ensures the certificate conforms to domain policy before it is mapped to a Windows account.</span></span>  
  
 <span data-ttu-id="fbd4c-258">W pierwszej wersji programu WCF mapowanie odbywa się bez konsultacji zasady domeny.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-258">In the first release of WCF, mapping is done without consulting the domain policy.</span></span> <span data-ttu-id="fbd4c-259">W związku z tym jest możliwe, że starsze aplikacje, które dawniej pracowałam podczas uruchamiania w pierwszej wersji zakończy się niepowodzeniem, jeśli mapowanie jest włączona, a certyfikat X.509 nie spełnia warunków zasady domeny.</span><span class="sxs-lookup"><span data-stu-id="fbd4c-259">Therefore it is possible that older applications that used to work when running under the first release, fails if the mapping is enabled and the X.509 certificate does not satisfy the domain policy.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="fbd4c-260">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="fbd4c-260">See also</span></span>

- <xref:System.ServiceModel.Channels>
- <xref:System.ServiceModel.Security>
- <xref:System.ServiceModel>
- <xref:System.Security.Cryptography.X509Certificates.X509FindType>
- [<span data-ttu-id="fbd4c-261">Zabezpieczanie usług i klientów</span><span class="sxs-lookup"><span data-stu-id="fbd4c-261">Securing Services and Clients</span></span>](../../../../docs/framework/wcf/feature-details/securing-services-and-clients.md)
