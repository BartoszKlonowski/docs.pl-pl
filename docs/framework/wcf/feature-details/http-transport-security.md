---
title: Zabezpieczenia transportu HTTP
ms.date: 03/30/2017
ms.assetid: d3439262-c58e-4d30-9f2b-a160170582bb
author: BrucePerlerMS
ms.openlocfilehash: c21769eed2f3040bf336860b5a9cd6cd450d5525
ms.sourcegitcommit: ea00c05e0995dae928d48ead99ddab6296097b4c
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/02/2018
ms.locfileid: "48035204"
---
# <a name="http-transport-security"></a><span data-ttu-id="51b49-102">Zabezpieczenia transportu HTTP</span><span class="sxs-lookup"><span data-stu-id="51b49-102">HTTP Transport Security</span></span>
<span data-ttu-id="51b49-103">Podczas korzystania z protokołu HTTP jako transportu zabezpieczeń jest dostarczana przez implementację protokołu Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="51b49-103">When using HTTP as the transport, security is provided by a Secure Sockets Layer (SSL) implementation.</span></span> <span data-ttu-id="51b49-104">Protokół SSL jest powszechnie używanych w Internecie uwierzytelniania usługi do klienta, a następnie, aby zapewnić poufność (szyfrowanie) do kanału.</span><span class="sxs-lookup"><span data-stu-id="51b49-104">SSL is widely used on the Internet to authenticate a service to a client, and then to provide confidentiality (encryption) to the channel.</span></span> <span data-ttu-id="51b49-105">W tym temacie wyjaśniono, jak działa protokół SSL oraz jego implementacji w Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="51b49-105">This topic explains how SSL works and how it is implemented in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="basic-ssl"></a><span data-ttu-id="51b49-106">Podstawowe protokołu SSL</span><span class="sxs-lookup"><span data-stu-id="51b49-106">Basic SSL</span></span>  
 <span data-ttu-id="51b49-107">Jak działa protokół SSL jest najlepsze wyjaśnione przez typowy scenariusz, w tym przypadku banku witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="51b49-107">How SSL works is best explained through a typical scenario, in this case, a bank's Web site.</span></span> <span data-ttu-id="51b49-108">Witryna pozwala klientowi logują się przy użyciu nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="51b49-108">The site allows a customer to log on with a user name and password.</span></span> <span data-ttu-id="51b49-109">Po uwierzytelniony, użytkownik może wykonywać transakcje, takie jak widok salda konta, opłacić rachunki i przenieść pieniądze z jednego konta do innego.</span><span class="sxs-lookup"><span data-stu-id="51b49-109">After being authenticated, the user can perform transactions, such as view account balances, pay bills, and move money from one account to another.</span></span>  
  
 <span data-ttu-id="51b49-110">Gdy użytkownik najpierw odwiedza witryny, mechanizm SSL rozpoczyna się szereg negocjacji o nazwie *uzgadnianie*, za pomocą klienta użytkownika (w tym przypadku program Internet Explorer).</span><span class="sxs-lookup"><span data-stu-id="51b49-110">When a user first visits the site, the SSL mechanism begins a series of negotiations, called a *handshake*, with the user's client (in this case, Internet Explorer).</span></span> <span data-ttu-id="51b49-111">SSL umożliwiają uwierzytelnienie najpierw bank lokacji klienta.</span><span class="sxs-lookup"><span data-stu-id="51b49-111">SSL first authenticates the bank site to the customer.</span></span> <span data-ttu-id="51b49-112">Jest to kluczowy etap, ponieważ klienci najpierw trzeba znać komunikują się przy użyciu rzeczywistej lokacji i nie fałszywe, który próbuje nakłonić do wpisując ich nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="51b49-112">This is an essential step because customers must first know that they are communicating with the actual site, and not a spoof that tries to lure them into typing in their user name and password.</span></span> <span data-ttu-id="51b49-113">Protokół SSL jest to uwierzytelnianie za pomocą certyfikatu SSL dostarczone przez zaufany urząd, takich jak VeriSign.</span><span class="sxs-lookup"><span data-stu-id="51b49-113">SSL does this authentication by using an SSL certificate provided by a trusted authority, such as VeriSign.</span></span> <span data-ttu-id="51b49-114">Logika przechodzi następująco: VeriSign poręcza tożsamość lokacji bank.</span><span class="sxs-lookup"><span data-stu-id="51b49-114">The logic goes like this: VeriSign vouches for the identity of the bank site.</span></span> <span data-ttu-id="51b49-115">Ponieważ program Internet Explorer ufa VeriSign, witryna jest zaufany.</span><span class="sxs-lookup"><span data-stu-id="51b49-115">Because Internet Explorer trusts VeriSign, the site is trusted.</span></span> <span data-ttu-id="51b49-116">Aby skontaktować się z VeriSign, należy więc również, klikając VeriSign logo.</span><span class="sxs-lookup"><span data-stu-id="51b49-116">If you want to check with VeriSign, you can do so as well by clicking on the VeriSign logo.</span></span> <span data-ttu-id="51b49-117">Instrukcja autentyczności przedstawiające daty wygaśnięcia i który jest wystawiony dla (lokacja bankowe).</span><span class="sxs-lookup"><span data-stu-id="51b49-117">That presents a statement of authenticity with its expiration date and who it is issued to (the bank site).</span></span>  
  
 <span data-ttu-id="51b49-118">Aby zainicjować bezpiecznej sesji, klient wysyła wielokrotność "hello" na serwerze z listą algorytmów kryptograficznych, można go użyć do podpisania, generowania skrótów i szyfrowania i odszyfrowywania za pomocą.</span><span class="sxs-lookup"><span data-stu-id="51b49-118">To initiate a secure session, the client sends the equivalent of a "hello" to the server along with a list of cryptographic algorithms it can use to sign, generate hashes, and encrypt and decrypt with.</span></span> <span data-ttu-id="51b49-119">W odpowiedzi witryny wysyła z powrotem po potwierdzeniu i wybór jednego z zestawów algorytmów.</span><span class="sxs-lookup"><span data-stu-id="51b49-119">In response, the site sends back an acknowledgment and its choice of one of the algorithms suites.</span></span> <span data-ttu-id="51b49-120">Podczas tej początkowej uzgadniania obie strony wysyłania i odbierania poprawni.</span><span class="sxs-lookup"><span data-stu-id="51b49-120">During this initial handshake, both parties send and receive nonces.</span></span> <span data-ttu-id="51b49-121">A *jednorazowego* to generowany losowo danych, który jest używany w połączeniu z klucza publicznego lokacji, aby utworzyć skrót.</span><span class="sxs-lookup"><span data-stu-id="51b49-121">A *nonce* is a randomly generated piece of data that is used, in combination with the site's public key, to create a hash.</span></span> <span data-ttu-id="51b49-122">A *skrótu* jest nowy numer, który jest tworzony na podstawie dwóch liczb, przy użyciu standardowego algorytmu, takie jak SHA1.</span><span class="sxs-lookup"><span data-stu-id="51b49-122">A *hash* is a new number that is derived from the two numbers using a standard algorithm, such as SHA1.</span></span> <span data-ttu-id="51b49-123">(Klient i lokacji również wymiany wiadomości zgody na algorytm wyznaczania wartości skrótu.) Wartość skrótu jest unikatowa i jest używana tylko dla sesji między klientem a lokacją, do szyfrowania i odszyfrowywania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="51b49-123">(The client and the site also exchange messages to agree which hash algorithm to use.) The hash is unique and is used only for the session between the client and the site to encrypt and decrypt messages.</span></span> <span data-ttu-id="51b49-124">Zarówno klient, jak i usługi mają oryginalnego identyfikatora jednorazowego i klucz publiczny certyfikatu, dlatego obie strony może wygenerować ten sam skrót.</span><span class="sxs-lookup"><span data-stu-id="51b49-124">Both client and service have the original nonce and the certificate's public key, so both sides can generate the same hash.</span></span> <span data-ttu-id="51b49-125">W związku z tym klient sprawdza poprawność wyznaczania wartości skrótu, wysłanych przez usługę, () przy użyciu uzgodnionych na algorytm obliczania skrótu z danych i (b) porównanie do wyznaczania wartości skrótu, wysłanych przez usługę; Jeśli dwa dopasowania, klient ma gwarancji, że skrót nie zostały naruszone.</span><span class="sxs-lookup"><span data-stu-id="51b49-125">Therefore, the client validates the hash sent by the service by (a) using the agreed upon algorithm to calculate the hash from the data, and (b) comparing it to the hash sent by the service; if the two match, then the client has assurance that the hash has not been tampered with.</span></span> <span data-ttu-id="51b49-126">Klient może następnie używać ten skrót jako klucz szyfrowania wiadomości, która zawiera kolejny nowy skrót.</span><span class="sxs-lookup"><span data-stu-id="51b49-126">The client can then use this hash as a key to encrypt a message that contains yet another new hash.</span></span> <span data-ttu-id="51b49-127">Usługi można odszyfrować wiadomości przy użyciu skrótu i odzyskać ten skrót second-final.</span><span class="sxs-lookup"><span data-stu-id="51b49-127">The service can decrypt the message using the hash, and recover this second-to-final hash.</span></span> <span data-ttu-id="51b49-128">Zebranych informacji (identyfikatorów jednorazowych, klucz publiczny i innych danych) jest teraz znane obie strony, a można utworzyć skrótu końcowego (lub klucz główny).</span><span class="sxs-lookup"><span data-stu-id="51b49-128">The accumulated information (nonces, public key, and other data) is now known to both sides, and a final hash (or master key) can be created.</span></span> <span data-ttu-id="51b49-129">Ten klucz końcowego jest szyfrowany i przesyłany przy użyciu skrótu dalej do ostatniego.</span><span class="sxs-lookup"><span data-stu-id="51b49-129">This final key is sent encrypted using the next-to-last hash.</span></span> <span data-ttu-id="51b49-130">Klucz główny jest następnie używany do szyfrowania i odszyfrowywania wiadomości w celu zresetowania sesji.</span><span class="sxs-lookup"><span data-stu-id="51b49-130">The master key is then used to encrypt and decrypt messages for the reset of the session.</span></span> <span data-ttu-id="51b49-131">Ponieważ zarówno klient, jak i usługi używają tego samego klucza, jest to również nazywane *klucza sesji*.</span><span class="sxs-lookup"><span data-stu-id="51b49-131">Because both client and service use the same key, this is also called a *session key*.</span></span>  
  
 <span data-ttu-id="51b49-132">Klucz sesji jest również określana jako klucza symetrycznego lub "wspólny klucz tajny."</span><span class="sxs-lookup"><span data-stu-id="51b49-132">The session key is also characterized as a symmetric key, or a "shared secret."</span></span> <span data-ttu-id="51b49-133">Klucz symetryczny jest ważne, ponieważ zwalnia obliczeń wymagana przez obie strony transakcji.</span><span class="sxs-lookup"><span data-stu-id="51b49-133">Having a symmetric key is important because it reduces the computation required by both sides of the transaction.</span></span> <span data-ttu-id="51b49-134">Każdej wiadomości na żądanie nowego wymiany poprawni i skróty może pogarszać wydajność.</span><span class="sxs-lookup"><span data-stu-id="51b49-134">If every message demanded a new exchange of nonces and hashes, performance would deteriorate.</span></span> <span data-ttu-id="51b49-135">W związku z tym ostatecznym celem jest protokół SSL jest używać kluczem symetrycznym, który pozwala łatwo przepływ między partnerami z większego stopnia bezpieczeństwa i wydajności.</span><span class="sxs-lookup"><span data-stu-id="51b49-135">Therefore, the ultimate goal of SSL is to use a symmetric key that allows messages to flow freely between the two sides with a greater degree of security and efficiency.</span></span>  
  
 <span data-ttu-id="51b49-136">Opis poprzedniego jest uproszczoną wersję, co się stanie, ponieważ protokół mogą się różnić od witryny.</span><span class="sxs-lookup"><span data-stu-id="51b49-136">The previous description is a simplified version of what happens, because the protocol may vary from site to site.</span></span> <span data-ttu-id="51b49-137">Istnieje również możliwość, że zarówno klient, jak i witryny zarówno generowanie identyfikatorów jednorazowych, które są łączone za algorithmically podczas uzgadniania, aby dodać więcej złożoność i w związku z tym ochrony, do procesu wymiany danych.</span><span class="sxs-lookup"><span data-stu-id="51b49-137">It is also possible that both the client and the site both generate nonces that are algorithmically combined during the handshake to add more complexity, and therefore protection, to the process of exchanging data.</span></span>  
  
### <a name="certificates-and-public-key-infrastructure"></a><span data-ttu-id="51b49-138">Certyfikaty i infrastruktury kluczy publicznych</span><span class="sxs-lookup"><span data-stu-id="51b49-138">Certificates and Public Key Infrastructure</span></span>  
 <span data-ttu-id="51b49-139">Podczas uzgadniania usługa wysyła swój certyfikat SSL do klienta.</span><span class="sxs-lookup"><span data-stu-id="51b49-139">During the handshake, the service also sends its SSL certificate to the client.</span></span> <span data-ttu-id="51b49-140">Certyfikat zawiera informacje, takie jak daty wygaśnięcia wydawania urzędu i jej identyfikator (URI).</span><span class="sxs-lookup"><span data-stu-id="51b49-140">The certificate contains information, such as its expiration date, issuing authority, and the site's Uniform Resource Identifier (URI).</span></span> <span data-ttu-id="51b49-141">Klient porównuje identyfikatora URI do identyfikatora URI pierwotnie skontaktowała się zapewnienie dopasowania i sprawdza również, datę i urząd wystawiający.</span><span class="sxs-lookup"><span data-stu-id="51b49-141">The client compares the URI to the URI it had originally contacted to ensure a match, and also checks the date and issuing authority.</span></span>  
  
 <span data-ttu-id="51b49-142">Każdy certyfikat ma dwa klucze, klucza prywatnego i kluczem publicznym i dwa są znane jako *wymiany pary kluczy*.</span><span class="sxs-lookup"><span data-stu-id="51b49-142">Every certificate has two keys, a private key and a public key, and the two are known as an *exchange key pair*.</span></span> <span data-ttu-id="51b49-143">Krótko mówiąc klucz prywatny jest znane tylko właścicielowi certyfikat, natomiast klucz publiczny jest do odczytu z certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="51b49-143">In brief, the private key is known only to the owner of the certificate while the public key is readable from the certificate.</span></span> <span data-ttu-id="51b49-144">Żadnego z nich może służyć do szyfrowania lub odszyfrowywania podsumowanie, skrót, lub inny klawisz, ale tylko jako sprzeczne operacje.</span><span class="sxs-lookup"><span data-stu-id="51b49-144">Either key can be used to encrypt or decrypt a digest, hash, or other key, but only as contrary operations.</span></span> <span data-ttu-id="51b49-145">Na przykład w klienta są szyfrowane przy użyciu klucza publicznego, tylko witryna może odszyfrować wiadomości przy użyciu klucza prywatnego.</span><span class="sxs-lookup"><span data-stu-id="51b49-145">For example, if the client encrypts with the public key, only the site can decrypt the message using the private key.</span></span> <span data-ttu-id="51b49-146">Podobnie jeśli w lokacji są szyfrowane przy użyciu klucza prywatnego, klient może odszyfrować przy użyciu klucza publicznego.</span><span class="sxs-lookup"><span data-stu-id="51b49-146">Similarly, if the site encrypts with the private key, the client can decrypt with the public key.</span></span> <span data-ttu-id="51b49-147">To zapewnia klientowi, komunikaty wymianie tylko w przypadku inicjator kluczem prywatnym ponieważ tylko wiadomości zaszyfrowane przy użyciu klucza prywatnego można odszyfrować przy użyciu klucza publicznego.</span><span class="sxs-lookup"><span data-stu-id="51b49-147">This provides assurance to the client that the messages are being exchanged only with the possessor of the private key because only messages encrypted with the private key can be decrypted with the public key.</span></span> <span data-ttu-id="51b49-148">Witryna ma pewność, że jest to wymiana komunikatów z klientem, który zawiera zaszyfrowane przy użyciu klucza publicznego.</span><span class="sxs-lookup"><span data-stu-id="51b49-148">The site is assured that it is exchanging messages with a client that has encrypted using the public key.</span></span> <span data-ttu-id="51b49-149">Ten program exchange jest bezpieczne tylko w przypadku początkowego uzgadniania, co jest dlaczego do tworzenia rzeczywistych klucz symetryczny odbywa się m.in.</span><span class="sxs-lookup"><span data-stu-id="51b49-149">This exchange is secure only for an initial handshake, however, which is why much more is done to create the actual symmetric key.</span></span> <span data-ttu-id="51b49-150">Niemniej jednak cała komunikacja zależą od usługę, której ważnego certyfikatu SSL.</span><span class="sxs-lookup"><span data-stu-id="51b49-150">Nevertheless, all communications depend on the service having a valid SSL certificate.</span></span>  
  
## <a name="implementing-ssl-with-wcf"></a><span data-ttu-id="51b49-151">Implementowanie protokołu SSL z usługą WCF</span><span class="sxs-lookup"><span data-stu-id="51b49-151">Implementing SSL with WCF</span></span>  
 <span data-ttu-id="51b49-152">Zabezpieczenia transportu HTTP (lub SSL) jest udostępniony zewnętrznie do programu WCF.</span><span class="sxs-lookup"><span data-stu-id="51b49-152">HTTP transport security (or SSL) is provided externally to WCF.</span></span> <span data-ttu-id="51b49-153">Można zaimplementować protokół SSL w jeden z dwóch sposobów; decydującym czynnikiem jest to, jak aplikacja jest hostowana:</span><span class="sxs-lookup"><span data-stu-id="51b49-153">You can implement SSL in one of two ways; the deciding factor is how your application is hosted:</span></span>  
  
-   <span data-ttu-id="51b49-154">Korzystania z usług Internet Information Services (IIS) jako host usługi WCF umożliwia konfigurowanie protokołu SSL usługi infrastruktury usługi IIS.</span><span class="sxs-lookup"><span data-stu-id="51b49-154">If you are using Internet Information Services (IIS) as your WCF host, use the IIS infrastructure to set up an SSL service.</span></span>  
  
-   <span data-ttu-id="51b49-155">W przypadku tworzenia własnego aplikacji WCF adresu za pomocą narzędzia HttpCfg.exe można powiązać certyfikatu SSL.</span><span class="sxs-lookup"><span data-stu-id="51b49-155">If you are creating a self-hosted WCF application, you can bind an SSL certificate to the address using the HttpCfg.exe tool.</span></span>  
  
### <a name="using-iis-for-transport-security"></a><span data-ttu-id="51b49-156">Korzystanie z usług IIS dla zabezpieczeń transportu</span><span class="sxs-lookup"><span data-stu-id="51b49-156">Using IIS for Transport Security</span></span>  
  
#### <a name="iis-70"></a><span data-ttu-id="51b49-157">IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="51b49-157">IIS 7.0</span></span>  
 <span data-ttu-id="51b49-158">Aby skonfigurować [!INCLUDE[iisver](../../../../includes/iisver-md.md)] jako bezpiecznego hosta (przy użyciu protokołu SSL), zobacz [IIS 7.0 Beta: Konfigurowanie Secure Sockets Layer w usługach IIS 7.0](https://go.microsoft.com/fwlink/?LinkId=88600).</span><span class="sxs-lookup"><span data-stu-id="51b49-158">To set up [!INCLUDE[iisver](../../../../includes/iisver-md.md)] as a secure host (using SSL), see [IIS 7.0 Beta: Configuring Secure Sockets Layer in IIS 7.0](https://go.microsoft.com/fwlink/?LinkId=88600).</span></span>  
  
 <span data-ttu-id="51b49-159">Konfigurowanie certyfikatów do użytku z programem [!INCLUDE[iisver](../../../../includes/iisver-md.md)], zobacz [IIS 7.0 Beta: Konfigurowanie certyfikatów serwera w usługach IIS 7.0](https://go.microsoft.com/fwlink/?LinkID=88595).</span><span class="sxs-lookup"><span data-stu-id="51b49-159">To configure certificates for use with [!INCLUDE[iisver](../../../../includes/iisver-md.md)], see [IIS 7.0 Beta: Configuring Server Certificates in IIS 7.0](https://go.microsoft.com/fwlink/?LinkID=88595).</span></span>  
  
#### <a name="iis-60"></a><span data-ttu-id="51b49-160">IIS 6,0</span><span class="sxs-lookup"><span data-stu-id="51b49-160">IIS 6.0</span></span>  
 <span data-ttu-id="51b49-161">Aby skonfigurować [!INCLUDE[iis601](../../../../includes/iis601-md.md)] jako bezpiecznego hosta (przy użyciu protokołu SSL), zobacz [Konfigurowanie Secure Sockets Layer](https://go.microsoft.com/fwlink/?LinkId=88601).</span><span class="sxs-lookup"><span data-stu-id="51b49-161">To set up [!INCLUDE[iis601](../../../../includes/iis601-md.md)] as a secure host (using SSL), see [Configuring Secure Sockets Layer](https://go.microsoft.com/fwlink/?LinkId=88601).</span></span>  
  
 <span data-ttu-id="51b49-162">Konfigurowanie certyfikatów do użytku z programem [!INCLUDE[iis601](../../../../includes/iis601-md.md)], zobacz [Certificates_IIS_SP1_Ops](https://go.microsoft.com/fwlink/?LinkId=88602).</span><span class="sxs-lookup"><span data-stu-id="51b49-162">To configure certificates for use with [!INCLUDE[iis601](../../../../includes/iis601-md.md)], see [Certificates_IIS_SP1_Ops](https://go.microsoft.com/fwlink/?LinkId=88602).</span></span>  
  
### <a name="using-httpcfg-for-ssl"></a><span data-ttu-id="51b49-163">Za pomocą tak dla protokołu SSL</span><span class="sxs-lookup"><span data-stu-id="51b49-163">Using HttpCfg for SSL</span></span>  
 <span data-ttu-id="51b49-164">W przypadku tworzenia własnego aplikacji WCF, Pobierz narzędzia HttpCfg.exe dostępne pod adresem [narzędzia obsługi systemu Windows XP Service Pack 2 lokacji](https://go.microsoft.com/fwlink/?LinkId=29002).</span><span class="sxs-lookup"><span data-stu-id="51b49-164">If you are creating a self-hosted WCF application, download the HttpCfg.exe tool, available at the [Windows XP Service Pack 2 Support Tools site](https://go.microsoft.com/fwlink/?LinkId=29002).</span></span>  
  
 <span data-ttu-id="51b49-165">Aby uzyskać więcej informacji o konfigurowaniu portów za pomocą certyfikatu X.509 przy użyciu narzędzia HttpCfg.exe, zobacz [porady: Konfigurowanie portu z certyfikatem SSL](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span><span class="sxs-lookup"><span data-stu-id="51b49-165">For more information about using the HttpCfg.exe tool to set up a port with an X.509 certificate, see [How to: Configure a Port with an SSL Certificate](../../../../docs/framework/wcf/feature-details/how-to-configure-a-port-with-an-ssl-certificate.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="51b49-166">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="51b49-166">See Also</span></span>  
 [<span data-ttu-id="51b49-167">Zabezpieczenia transportu</span><span class="sxs-lookup"><span data-stu-id="51b49-167">Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/transport-security.md)  
 [<span data-ttu-id="51b49-168">Zabezpieczenia komunikatów</span><span class="sxs-lookup"><span data-stu-id="51b49-168">Message Security</span></span>](../../../../docs/framework/wcf/feature-details/message-security-in-wcf.md)
