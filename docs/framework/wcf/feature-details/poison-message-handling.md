---
title: "Obsługa komunikatów zanieczyszczonych"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 8d1c5e5a-7928-4a80-95ed-d8da211b8595
caps.latest.revision: "29"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 609f53431e52da3629f5107adf91994a55eca89d
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/02/2017
---
# <a name="poison-message-handling"></a><span data-ttu-id="0e0e4-102">Obsługa komunikatów zanieczyszczonych</span><span class="sxs-lookup"><span data-stu-id="0e0e4-102">Poison Message Handling</span></span>
<span data-ttu-id="0e0e4-103">A *Trująca wiadomość* jest komunikat, który przekracza maksymalną liczbę prób dostarczenia do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-103">A *poison message* is a message that has exceeded the maximum number of delivery attempts to the application.</span></span> <span data-ttu-id="0e0e4-104">Taka sytuacja może wystąpić, gdy aplikacja kolejki nie może przetworzyć komunikatu z powodu błędów.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-104">This situation can arise when a queue-based application cannot process a message because of errors.</span></span> <span data-ttu-id="0e0e4-105">Aby spełnić wymagania niezawodności, aplikację zakolejkowaną odbiera komunikaty w ramach transakcji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-105">To meet reliability demands, a queued application receives messages under a transaction.</span></span> <span data-ttu-id="0e0e4-106">Przerywanie transakcji, w którym została odebrana wiadomość w kolejce pozostawia wiadomości w kolejce, tak, aby komunikat zostanie ponowiony w nowej transakcji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-106">Aborting the transaction in which a queued message was received leaves the message in the queue so that the message is retried under a new transaction.</span></span> <span data-ttu-id="0e0e4-107">Jeśli ten problem, który spowodował przerwanie transakcji nie zostanie rozwiązany, aplikacja odbierająca może zostać zablokowane w pętli otrzymywanie i przerywanie tę samą wiadomość do czasu przekroczyła maksymalną liczbę prób dostarczenia i wyniki Trująca wiadomość.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-107">If the problem that caused the transaction to abort is not corrected, the receiving application can get stuck in a loop receiving and aborting the same message until the maximum number of delivery attempts has been exceeded and a poison message results.</span></span>  
  
 <span data-ttu-id="0e0e4-108">Komunikat może stać się Trująca wiadomość wielu powodów.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-108">A message can become a poison message for many reasons.</span></span> <span data-ttu-id="0e0e4-109">Najbardziej typowe przyczyny są określone dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-109">The most common reasons are application specific.</span></span> <span data-ttu-id="0e0e4-110">Na przykład jeśli aplikacja odczytuje komunikat z kolejki i przetwarza niektóre bazy danych, aplikacja może się nie powieść uzyskać blokady w bazie danych, co powoduje przerwać transakcji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-110">For example, if an application reads a message from a queue and performs some database processing, the application may fail to get a lock on the database, causing it to abort the transaction.</span></span> <span data-ttu-id="0e0e4-111">Ponieważ transakcji bazy danych zostało przerwane, komunikat pozostaje w kolejce, co powoduje, że aplikacja odczytać wiadomość po raz drugi i wprowadzić kolejna próba uzyskania blokady w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-111">Because the database transaction was aborted, the message remains in the queue, which causes the application to reread the message a second time and make another attempt to acquire a lock on the database.</span></span> <span data-ttu-id="0e0e4-112">Komunikaty może również zostać skażone, które zawierają nieprawidłowe informacje.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-112">Messages can also become poison if they contain invalid information.</span></span> <span data-ttu-id="0e0e4-113">Na przykład zamówienia zakupu mogą zawierać nieprawidłowe odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-113">For example, a purchase order may contain an invalid customer number.</span></span> <span data-ttu-id="0e0e4-114">W takich przypadkach aplikacji dobrowolnie może przerwać transakcji i wymusić komunikat, który ma zostać Trująca wiadomość.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-114">In these cases, the application may voluntarily abort the transaction and force the message to become a poison message.</span></span>  
  
 <span data-ttu-id="0e0e4-115">W rzadkich przypadkach wiadomości może nie pobrać wysyłane do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-115">On rare occasions, messages can fail to get dispatched to the application.</span></span> <span data-ttu-id="0e0e4-116">[!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] Warstwa może się okazać problem z wiadomości, takie jak wiadomości ma nieprawidłową ramkę, poświadczenia nieprawidłowy komunikat dołączenie do lub nagłówka nieprawidłową akcję.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-116">The [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] layer may find a problem with the message, such as if the message has the wrong frame, invalid message credentials attached to it, or an invalid action header.</span></span> <span data-ttu-id="0e0e4-117">W takich przypadkach aplikacja nigdy nie odbiera wiadomości; Jednakże komunikat nadal może stać się Trująca wiadomość i ręczne przetwarzanie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-117">In these cases, the application never receives the message; however, the message can still become a poison message and be processed manually.</span></span>  
  
## <a name="handling-poison-messages"></a><span data-ttu-id="0e0e4-118">Obsługa wiadomości</span><span class="sxs-lookup"><span data-stu-id="0e0e4-118">Handling Poison Messages</span></span>  
 <span data-ttu-id="0e0e4-119">W [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], skażone komunikat — Obsługa udostępnia mechanizm aplikacja odbierająca na wypadek wiadomości, które nie mogą być wysyłane do aplikacji lub wiadomości, które są wysyłane do aplikacji, ale które nie można przetworzyć z powodu przyczyny specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-119">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], poison message handling provides a mechanism for a receiving application to deal with messages that cannot be dispatched to the application, or messages that are dispatched to the application but which fail to be processed because of application-specific reasons.</span></span> <span data-ttu-id="0e0e4-120">Obsługi uszkodzonych komunikatów jest konfigurowana za pomocą następujących właściwości w każdym z dostępnych powiązań umieszczonych w kolejce:</span><span class="sxs-lookup"><span data-stu-id="0e0e4-120">Poison message handling is configured by the following properties in each of the available queued bindings:</span></span>  
  
-   <span data-ttu-id="0e0e4-121">`ReceiveRetryCount`.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-121">`ReceiveRetryCount`.</span></span> <span data-ttu-id="0e0e4-122">Wartość całkowitą, która wskazuje maksymalną liczbę ponownych prób dostarczenia komunikatu z kolejki aplikacji do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-122">An integer value that indicates the maximum number of times to retry delivery of a message from the application queue to the application.</span></span> <span data-ttu-id="0e0e4-123">Wartość domyślna to 5.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-123">The default value is 5.</span></span> <span data-ttu-id="0e0e4-124">To jest odpowiednia w przypadku, gdy natychmiastowego ponawiania rozwiązuje problem, takich jak z tymczasowego zakleszczenie w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-124">This is sufficient in cases where an immediate retry fixes the problem, such as with a temporary deadlock on a database.</span></span>  
  
-   <span data-ttu-id="0e0e4-125">`MaxRetryCycles`.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-125">`MaxRetryCycles`.</span></span> <span data-ttu-id="0e0e4-126">Wartość całkowitą, która wskazuje maksymalną liczbę cykli ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-126">An integer value that indicates the maximum number of retry cycles.</span></span> <span data-ttu-id="0e0e4-127">Cykl składa się z przesyłania wiadomości z kolejki aplikacji do ponawiania i opóźnieniem można skonfigurować z ponawiania do kolejki aplikacji do dostarczania Ponów.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-127">A retry cycle consists of transferring a message from the application queue to the retry subqueue and, after a configurable delay, from the retry subqueue back into the application queue to reattempt delivery.</span></span> <span data-ttu-id="0e0e4-128">Wartość domyślna to 2.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-128">The default value is 2.</span></span> <span data-ttu-id="0e0e4-129">Na [!INCLUDE[wv](../../../../includes/wv-md.md)], komunikat zostanie podjęta próba maksymalnie (`ReceiveRetryCount` + 1) * (`MaxRetryCycles` + 1) razy.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-129">On [!INCLUDE[wv](../../../../includes/wv-md.md)], the message is tried a maximum of (`ReceiveRetryCount` +1) * (`MaxRetryCycles` + 1) times.</span></span> <span data-ttu-id="0e0e4-130">`MaxRetryCycles`jest ignorowany w [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-130">`MaxRetryCycles` is ignored on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
-   <span data-ttu-id="0e0e4-131">`RetryCycleDelay`.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-131">`RetryCycleDelay`.</span></span> <span data-ttu-id="0e0e4-132">Czas opóźnienia między liczbę cykli ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-132">The time delay between retry cycles.</span></span> <span data-ttu-id="0e0e4-133">Wartość domyślna to 30 minut.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-133">The default value is 30 minutes.</span></span> <span data-ttu-id="0e0e4-134">`MaxRetryCycles`i `RetryCycleDelay` razem udostępniają mechanizm rozwiązać problem, gdzie ponowna próba opóźnieniem okresowe rozwiązuje problem.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-134">`MaxRetryCycles` and `RetryCycleDelay` together provide a mechanism to address the problem where a retry after a periodic delay fixes the problem.</span></span> <span data-ttu-id="0e0e4-135">Na przykład obsługuje wierszem zablokowanym ustawiony w programie SQL Server oczekiwania zatwierdzania transakcji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-135">For example, this handles a locked row set in SQL Server pending transaction commit.</span></span>  
  
-   <span data-ttu-id="0e0e4-136">`ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-136">`ReceiveErrorHandling`.</span></span> <span data-ttu-id="0e0e4-137">Wyliczenie wskazujący akcję do wykonania dla komunikatu, której nie dostarczania po prób wykonania maksymalnej liczby ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-137">An enumeration that indicates the action to take for a message that has failed delivery after the maximum number of retries has been attempted.</span></span> <span data-ttu-id="0e0e4-138">Wartości można być Odrzuć usterka, Drop i przenieść.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-138">The values can be Fault, Drop, Reject, and Move.</span></span> <span data-ttu-id="0e0e4-139">Opcja domyślna jest błędem.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-139">The default option is Fault.</span></span>  
  
-   <span data-ttu-id="0e0e4-140">Błąd.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-140">Fault.</span></span> <span data-ttu-id="0e0e4-141">Ta opcja wysyła odbiornika, który spowodował błąd `ServiceHost` do błędów.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-141">This option sends a fault to the listener that caused the `ServiceHost` to fault.</span></span> <span data-ttu-id="0e0e4-142">Komunikat należy usunąć z kolejki aplikacji przez inny mechanizm zewnętrzny przed kontynuowaniem aplikacji do przetwarzania komunikatów z kolejki.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-142">The message must be removed from the application queue by some external mechanism before the application can continue to process messages from the queue.</span></span>  
  
-   <span data-ttu-id="0e0e4-143">Upuść.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-143">Drop.</span></span> <span data-ttu-id="0e0e4-144">Ta opcja powoduje Trująca wiadomość i komunikat nigdy nie jest dostarczany do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-144">This option drops the poison message and the message is never delivered to the application.</span></span> <span data-ttu-id="0e0e4-145">Jeśli komunikat `TimeToLive` właściwości wygasła w tym momencie, a następnie może zostać wyświetlony komunikat w kolejce wiadomości utraconych nadawcy.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-145">If the message's `TimeToLive` property has expired at this point, then the message may appear in the sender's dead-letter queue.</span></span> <span data-ttu-id="0e0e4-146">Jeśli nie, wiadomość nie jest wyświetlana z dowolnego miejsca.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-146">If not, the message does not appear anywhere.</span></span> <span data-ttu-id="0e0e4-147">Ta opcja oznacza, że użytkownik nie określił co zrobić, jeśli komunikat zostanie utracony.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-147">This option indicates that the user has not specified what to do if the message is lost.</span></span>  
  
-   <span data-ttu-id="0e0e4-148">Odrzuć.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-148">Reject.</span></span> <span data-ttu-id="0e0e4-149">Ta opcja jest dostępna tylko na [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-149">This option is available only on [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span> <span data-ttu-id="0e0e4-150">Powoduje to, że usługi kolejkowania komunikatów (MSMQ) do odesłania negatywnego potwierdzenia do wysyłania menedżera kolejek, że aplikacja nie może odebrać komunikatu.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-150">This instructs Message Queuing (MSMQ) to send a negative acknowledgement back to the sending queue manager that the application cannot receive the message.</span></span> <span data-ttu-id="0e0e4-151">Wiadomość jest umieszczana w kolejce wiadomości utraconych wysyłania menedżera kolejek.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-151">The message is placed in the sending queue manager's dead-letter queue.</span></span>  
  
-   <span data-ttu-id="0e0e4-152">Przenieś.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-152">Move.</span></span> <span data-ttu-id="0e0e4-153">Ta opcja jest dostępna tylko na [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-153">This option is available only on [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span> <span data-ttu-id="0e0e4-154">Spowoduje to przeniesienie Trująca wiadomość do kolejki komunikatów poison do późniejszego przetwarzania przez aplikację do obsługi komunikatów poison.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-154">This moves the poison message to a poison-message queue for later processing by a poison-message handling application.</span></span> <span data-ttu-id="0e0e4-155">Kolejka komunikatów poison jest podkolejki kolejki aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-155">The poison-message queue is a subqueue of the application queue.</span></span> <span data-ttu-id="0e0e4-156">Może być aplikacją poison komunikat — Obsługa [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługi, która odczytuje wiadomości z kolejki skażone.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-156">A poison-message handling application can be a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service that reads messages out of the poison queue.</span></span> <span data-ttu-id="0e0e4-157">Trująca kolejki jest podkolejki kolejki aplikacji i może zostać zlikwidowane jako net.msmq://\<*nazw komputerów*>/*applicationQueue*; skażone, gdzie  *Nazwa maszyny* to nazwa komputera, na którym znajduje się kolejka i *applicationQueue* jest nazwą kolejki specyficzne dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-157">The poison queue is a subqueue of the application queue and can be addressed as net.msmq://\<*machine-name*>/*applicationQueue*;poison, where *machine-name* is the name of the computer on which the queue resides and the *applicationQueue* is the name of the application-specific queue.</span></span>  
  
 <span data-ttu-id="0e0e4-158">Maksymalna liczba prób dostarczenia komunikatu są następujące:</span><span class="sxs-lookup"><span data-stu-id="0e0e4-158">The following are the maximum number of delivery attempts made for a message:</span></span>  
  
-   <span data-ttu-id="0e0e4-159">((ReceiveRetryCount+1) * (MaxRetryCycles + 1)) na [!INCLUDE[wv](../../../../includes/wv-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-159">((ReceiveRetryCount+1) * (MaxRetryCycles + 1)) on [!INCLUDE[wv](../../../../includes/wv-md.md)].</span></span>  
  
-   <span data-ttu-id="0e0e4-160">(ReceiveRetryCount + 1) na [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-160">(ReceiveRetryCount + 1) on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0e0e4-161">Brak ponownych prób są nawiązywane komunikatu, który jest dostarczany pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-161">No retries are made for a message that is delivered successfully.</span></span>  
  
 <span data-ttu-id="0e0e4-162">Aby śledzić liczbę razy, przeczytaj wiadomość zostanie podjęta, [!INCLUDE[wv](../../../../includes/wv-md.md)] przechowuje właściwości trwałe wiadomości, które zlicza liczbę przerwań i właściwość count przeniesienie, które zlicza liczbę razy komunikat są przenoszone między kolejki aplikacji i kolejki podrzędne.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-162">To keep track of the number of times a message read is attempted, [!INCLUDE[wv](../../../../includes/wv-md.md)] maintains a durable message property that counts the number of aborts and a move count property that counts the number of times the message moves between the application queue and subqueues.</span></span> <span data-ttu-id="0e0e4-163">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] Kanału wykorzystuje te można obliczyć liczby ponownych prób receive i liczby cykli ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-163">The [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel uses these to compute the receive retry count and the retry cycles count.</span></span> <span data-ttu-id="0e0e4-164">Na [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)], liczba przerwania jest przechowywana w pamięci przez [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kanału i jest resetowana, jeśli aplikacja nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-164">On [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)], the abort count is maintained in memory by the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel and is reset if the application fails.</span></span> <span data-ttu-id="0e0e4-165">Ponadto [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] kanału może przechowywać przerwanie liczby komunikatów do 256 w pamięci w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-165">Also, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] channel can hold the abort counts for up to 256 messages in memory at any time.</span></span> <span data-ttu-id="0e0e4-166">Jeśli 257th wiadomość zostanie odczytana, następnie najstarsze komunikat przerwania zostanie zresetowany.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-166">If a 257th message is read, then the oldest message's abort count is reset.</span></span>  
  
 <span data-ttu-id="0e0e4-167">Przerwanie liczba i Przenieś liczby właściwości są dostępne dla operacji usługi za pomocą kontekstu operacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-167">The abort count and move count properties are available to the service operation through the operation context.</span></span> <span data-ttu-id="0e0e4-168">Poniższy przykład kodu pokazuje, jak uzyskać do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-168">The following code example shows how to access them.</span></span>  
  
 [!code-csharp[S_UE_MSMQ_Poison#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_ue_msmq_poison/cs/service.cs#1)]  
  
 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="0e0e4-169">udostępnia dwa standardowe powiązania w kolejce:</span><span class="sxs-lookup"><span data-stu-id="0e0e4-169"> provides two standard queued bindings:</span></span>  
  
-   <span data-ttu-id="0e0e4-170"><xref:System.ServiceModel.NetMsmqBinding>.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-170"><xref:System.ServiceModel.NetMsmqBinding>.</span></span> <span data-ttu-id="0e0e4-171">A [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] powiązanie odpowiednie dla komunikacji z innymi kolejki wykonywania [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-171">A [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] binding suitable for performing queue-based communication with other [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] endpoints.</span></span>  
  
-   <span data-ttu-id="0e0e4-172"><xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-172"><xref:System.ServiceModel.MsmqIntegration.MsmqIntegrationBinding>.</span></span> <span data-ttu-id="0e0e4-173">Powiązanie odpowiednie dla komunikacji z istniejącymi aplikacjami usługi kolejkowania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-173">A binding suitable for communicating with existing Message Queuing applications.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0e0e4-174">Można zmienić właściwości w tych powiązań, w oparciu o wymagania Twojej [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługi.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-174">You can alter properties in these bindings based on the requirements of your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.</span></span> <span data-ttu-id="0e0e4-175">Cały Trująca wiadomość mechanizmu obsługi jest lokalny do aplikacji odbierającej.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-175">The entire poison message handling mechanism is local to the receiving application.</span></span> <span data-ttu-id="0e0e4-176">Proces jest niewidoczne aplikacja wysyłająca, chyba że aplikacja odbierająca ostatecznie zatrzymuje i wysyła potwierdzenie negatywne do nadawcy.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-176">The process is invisible to the sending application unless the receiving application ultimately stops and sends a negative acknowledgment back to the sender.</span></span> <span data-ttu-id="0e0e4-177">W takim przypadku wiadomość zostanie przeniesiona do kolejki utraconych wiadomości nadawcy.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-177">In that case, the message is moved to the sender's dead-letter queue.</span></span>  
  
## <a name="best-practice-handling-msmqpoisonmessageexception"></a><span data-ttu-id="0e0e4-178">Najlepsze rozwiązanie: Msmqpoisonmessageexception — Obsługa</span><span class="sxs-lookup"><span data-stu-id="0e0e4-178">Best Practice: Handling MsmqPoisonMessageException</span></span>  
 <span data-ttu-id="0e0e4-179">Gdy usługa określa, że wiadomość jest skażone, transport z kolejką zgłasza <xref:System.ServiceModel.MsmqPoisonMessageException> zawierający `LookupId` skażone wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-179">When the service determines that a message is poison, the queued transport throws a <xref:System.ServiceModel.MsmqPoisonMessageException> that contains the `LookupId` of the poison message.</span></span>  
  
 <span data-ttu-id="0e0e4-180">Aplikację można wdrożyć <xref:System.ServiceModel.Dispatcher.IErrorHandler> interfejs do obsługi błędów wymagane przez tę aplikację.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-180">A receiving application can implement the <xref:System.ServiceModel.Dispatcher.IErrorHandler> interface to handle any errors that the application requires.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="0e0e4-181">[Rozszerzanie kontroli obsługi i raportowania błędów](../../../../docs/framework/wcf/samples/extending-control-over-error-handling-and-reporting.md).</span><span class="sxs-lookup"><span data-stu-id="0e0e4-181"> [Extending Control Over Error Handling and Reporting](../../../../docs/framework/wcf/samples/extending-control-over-error-handling-and-reporting.md).</span></span>  
  
 <span data-ttu-id="0e0e4-182">Aplikacja może wymagać określonego rodzaju automatycznych Obsługa skażone wiadomości, który przenosi skażone wiadomości do kolejki Trująca wiadomość, dzięki czemu usługa dostęp pozostałej części wiadomości w kolejce.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-182">The application may require some kind of automated handling of poison messages that moves the poison messages to a poison message queue so that the service can access the rest of the messages in the queue.</span></span> <span data-ttu-id="0e0e4-183">Jest to tylko scenariusz przy użyciu mechanizmu obsługi błędów do nasłuchiwania wyjątki poison wiadomości, gdy <xref:System.ServiceModel.Configuration.MsmqBindingElementBase.ReceiveErrorHandling%2A> mają ustawioną wartość <xref:System.ServiceModel.ReceiveErrorHandling.Fault>.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-183">The only scenario for using the error-handler mechanism to listen for poison-message exceptions is when the <xref:System.ServiceModel.Configuration.MsmqBindingElementBase.ReceiveErrorHandling%2A> setting is set to <xref:System.ServiceModel.ReceiveErrorHandling.Fault>.</span></span> <span data-ttu-id="0e0e4-184">Przykładowy komunikat poison dla wersji 3.0 pokazano to zachowanie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-184">The poison-message sample for Message Queuing 3.0 demonstrates this behavior.</span></span> <span data-ttu-id="0e0e4-185">Poniżej opisano czynności wymagane do obsługi skażone komunikaty, w tym najlepsze rozwiązania:</span><span class="sxs-lookup"><span data-stu-id="0e0e4-185">The following outlines the steps to take to handle poison messages, including best practices:</span></span>  
  
1.  <span data-ttu-id="0e0e4-186">Upewnij się, że ustawienia skażone uwzględnić wymagania dotyczące aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-186">Ensure your poison settings reflect the requirements of your application.</span></span> <span data-ttu-id="0e0e4-187">Podczas pracy z ustawieniami, upewnij się, poznać różnice między możliwości usługi kolejkowania komunikatów na [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], i [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-187">When working with the settings, ensure that you understand the differences between the capabilities of Message Queuing on [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
2.  <span data-ttu-id="0e0e4-188">W razie potrzeby Implementowanie `IErrorHandler` do obsługi błędów poison wiadomości.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-188">If required, implement the `IErrorHandler` to handle poison-message errors.</span></span> <span data-ttu-id="0e0e4-189">Ponieważ ustawienie `ReceiveErrorHandling` do `Fault` wymaga ręcznego mechanizmu przenieść skażone wiadomości z kolejki lub skorygować zewnętrznego problemem zależnych, jest zaimplementowanie typowego użycia `IErrorHandler` podczas `ReceiveErrorHandling` ma ustawioną wartość `Fault`, jako pokazano w poniższym kodzie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-189">Because setting `ReceiveErrorHandling` to `Fault` requires a manual mechanism to move the poison message out of the queue or to correct an external dependent issue, the typical usage is to implement `IErrorHandler` when `ReceiveErrorHandling` is set to `Fault`, as shown in the following code.</span></span>  
  
     [!code-csharp[S_UE_MSMQ_Poison#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_ue_msmq_poison/cs/poisonerrorhandler.cs#2)]  
  
3.  <span data-ttu-id="0e0e4-190">Utwórz `PoisonBehaviorAttribute` używanego zachowanie usługi.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-190">Create a `PoisonBehaviorAttribute` that the service behavior can use.</span></span> <span data-ttu-id="0e0e4-191">Instaluje zachowanie `IErrorHandler` na Dyspozytor.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-191">The behavior installs the `IErrorHandler` on the dispatcher.</span></span> <span data-ttu-id="0e0e4-192">Zobacz poniższy przykład kodu.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-192">See the following code example.</span></span>  
  
     [!code-csharp[S_UE_MSMQ_Poison#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/s_ue_msmq_poison/cs/poisonbehaviorattribute.cs#3)]  
  
4.  <span data-ttu-id="0e0e4-193">Upewnij się, że usługa jest adnotowany przy użyciu atrybutu skażone zachowanie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-193">Ensure that your service is annotated with the poison behavior attribute.</span></span>  
  
  
  
 <span data-ttu-id="0e0e4-194">Ponadto jeśli `ReceiveErrorHandling` ustawiono `Fault`, `ServiceHost` błędów w przypadku napotkania Trująca wiadomość.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-194">In addition, if the `ReceiveErrorHandling` is set to `Fault`, the `ServiceHost` faults when encountering the poison message.</span></span> <span data-ttu-id="0e0e4-195">Można Podłączanie do zdarzeń błędnej i zamknąć usługę, wykonaj działania naprawcze i ponownie uruchomić.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-195">You can hook up to the faulted event and shut down the service, take corrective actions, and restart.</span></span> <span data-ttu-id="0e0e4-196">Na przykład `LookupId` w <xref:System.ServiceModel.MsmqPoisonMessageException> propagowane do `IErrorHandler` można zauważyć i kiedy błędów hosta usługi, można używać `System.Messaging` interfejsu API do odbierania wiadomości z kolejki przy użyciu `LookupId` można usunąć wiadomości z kolejki i zapisać komunikatu w niektórych zewnętrznym sklepie lub innej kolejki.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-196">For example, the `LookupId` in the <xref:System.ServiceModel.MsmqPoisonMessageException> propagated to the `IErrorHandler` can be noted and when the service host faults, you could use the `System.Messaging` API to receive the message from the queue using the `LookupId` to remove the message from the queue and store the message in some external store or another queue.</span></span> <span data-ttu-id="0e0e4-197">Następnie można ponownie uruchomić `ServiceHost` Wznowienie normalnego przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-197">You can then restart `ServiceHost` to resume normal processing.</span></span> <span data-ttu-id="0e0e4-198">[Zanieczyszczonych obsługi wiadomości MSMQ 4.0](../../../../docs/framework/wcf/samples/poison-message-handling-in-msmq-4-0.md) pokazano to zachowanie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-198">The [Poison Message Handling in MSMQ 4.0](../../../../docs/framework/wcf/samples/poison-message-handling-in-msmq-4-0.md) demonstrates this behavior.</span></span>  
  
## <a name="transaction-time-out-and-poison-messages"></a><span data-ttu-id="0e0e4-199">Limit czasu transakcji i skażone wiadomości</span><span class="sxs-lookup"><span data-stu-id="0e0e4-199">Transaction Time-Out and Poison Messages</span></span>  
 <span data-ttu-id="0e0e4-200">Klasa błędów, może wystąpić między kanał transportu umieszczonych w kolejce i kod użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-200">A class of errors can occur between the queued transport channel and the user code.</span></span> <span data-ttu-id="0e0e4-201">Błędy te mogą być wykrywane przez między nimi, takie jak warstwa zabezpieczeń wiadomości lub usługa wysyła logiki warstwy.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-201">These errors can be detected by layers in-between, such as the message security layer or the service dispatching logic.</span></span> <span data-ttu-id="0e0e4-202">Na przykład brakującego certyfikatu X.509 wykryto warstwy zabezpieczeń SOAP i Brak akcji są przypadki, w którym komunikat get wysyłane do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-202">For example, a missing X.509 certificate detected in the SOAP security layer and a missing action are cases where the message does get dispatched to the application.</span></span> <span data-ttu-id="0e0e4-203">W takim przypadku modelu usług odrzuca komunikat.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-203">When this happens, the service model drops the message.</span></span> <span data-ttu-id="0e0e4-204">Komunikat został odczytany w transakcji i wyniki dla tej transakcji nie może być podany limit czasu po pewnym czasie transakcji, dlatego przerwań i wiadomość jest przywracane do kolejki.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-204">Because the message is read in a transaction and an outcome for that transaction cannot be provided, the transaction eventually times out, aborts, and the message is put back into the queue.</span></span> <span data-ttu-id="0e0e4-205">Innymi słowy niektóre klasy błędów, transakcja nie przerwać natychmiast, ale oczekuje, aż upłynie limit czasu transakcji. Można zmodyfikować limitu czasu transakcji dla usługi przy użyciu <xref:System.ServiceModel.ServiceBehaviorAttribute>.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-205">In other words, for a certain class of errors, the transaction does not immediately abort but waits until the transaction times out. You can modify the transaction time-out for a service using <xref:System.ServiceModel.ServiceBehaviorAttribute>.</span></span>  
  
 <span data-ttu-id="0e0e4-206">Aby zmienić limit czasu transakcji na poziomie komputera, modyfikowania pliku machine.config i ustawiania limitu czasu transakcji odpowiednie. Należy pamiętać, że, w zależności od limit czasu ustawiony w transakcji, transakcji po pewnym czasie przerywa i wraca do kolejki i licznika przerwania jest zwiększany.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-206">To change the transaction time-out on a computer-wide basis, modify the machine.config file and set the appropriate transaction time-out. It is important to note that, depending on the time-out set in the transaction, the transaction eventually aborts and goes back to the queue and its abort count is incremented.</span></span> <span data-ttu-id="0e0e4-207">Po pewnym czasie komunikat staje się skażone i prawej dyspozycji staje się zgodnie z ustawieniami użytkownika.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-207">Eventually, the message becomes poison and the right disposition is made according to the user settings.</span></span>  
  
## <a name="sessions-and-poison-messages"></a><span data-ttu-id="0e0e4-208">Sesje i skażone wiadomości</span><span class="sxs-lookup"><span data-stu-id="0e0e4-208">Sessions and Poison Messages</span></span>  
 <span data-ttu-id="0e0e4-209">Sesja ulega poison komunikat — Obsługa procedur i ponów próbę wykonania tego samego jako pojedynczym komunikacie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-209">A session undergoes the same retry and poison-message handling procedures as a single message.</span></span> <span data-ttu-id="0e0e4-210">Właściwości wymienionego powyżej skażone komunikaty dotyczą całej sesji.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-210">The properties previously listed for poison messages apply to the entire session.</span></span> <span data-ttu-id="0e0e4-211">Oznacza to, że całej sesji próba zostanie ponowiona i przechodzi do końcowego kolejki komunikatów poison lub kolejki utraconych wiadomości nadawcy, jeśli komunikat zostanie odrzucony.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-211">This means that the entire session is retried and goes to a final poison-message queue or the sender’s dead-letter queue if the message is rejected.</span></span>  
  
## <a name="batching-and-poison-messages"></a><span data-ttu-id="0e0e4-212">Przetwarzanie wsadowe i skażone komunikaty</span><span class="sxs-lookup"><span data-stu-id="0e0e4-212">Batching and Poison Messages</span></span>  
 <span data-ttu-id="0e0e4-213">Jeśli wiadomość staje się Trująca wiadomość i jest częścią partii, całą partię zostanie wycofana i zwraca kanału do odczytywania jeden komunikat w czasie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-213">If a message becomes a poison message and is part of a batch, then the entire batch is rolled back and the channel returns to reading one message at a time.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="0e0e4-214">Przetwarzanie wsadowe, zobacz [tworzenie partii komunikatów w ramach transakcji](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)</span><span class="sxs-lookup"><span data-stu-id="0e0e4-214"> batching, see [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)</span></span>  
  
## <a name="poison-message-handling-for-messages-in-a-poison-queue"></a><span data-ttu-id="0e0e4-215">Obsługa komunikatów w kolejce skażone poison komunikatów</span><span class="sxs-lookup"><span data-stu-id="0e0e4-215">Poison-message Handling for Messages in a Poison Queue</span></span>  
 <span data-ttu-id="0e0e4-216">Obsługa komunikatów poison nie zakończy się wiadomość jest umieszczana w kolejce wiadomości poison.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-216">Poison-message handling does not end when a message is placed in the poison-message queue.</span></span> <span data-ttu-id="0e0e4-217">Wiadomości w kolejce wiadomości poison nadal musi być do odczytu i obsługi.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-217">Messages in the poison-message queue must still be read and handled.</span></span> <span data-ttu-id="0e0e4-218">Podzbiór ustawienia poison komunikat — Obsługa można użyć podczas odczytywania wiadomości z ostatnim trującej.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-218">You can use a subset of the poison-message handling settings when reading messages from the final poison subqueue.</span></span> <span data-ttu-id="0e0e4-219">Są stosowane ustawienia `ReceiveRetryCount` i `ReceiveErrorHandling`.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-219">The applicable settings are `ReceiveRetryCount` and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="0e0e4-220">Można ustawić `ReceiveErrorHandling` porzucić Odrzuć lub Fault.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-220">You can set `ReceiveErrorHandling` to Drop, Reject, or Fault.</span></span> <span data-ttu-id="0e0e4-221">`MaxRetryCycles`jest ignorowany i jest zwracany wyjątek, jeśli `ReceiveErrorHandling` ma wartość Move.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-221">`MaxRetryCycles` is ignored and an exception is thrown if `ReceiveErrorHandling` is set to Move.</span></span>  
  
## <a name="windows-vista-windows-server-2003-and-windows-xp-differences"></a><span data-ttu-id="0e0e4-222">Windows Vista, Windows Server 2003 i Windows XP różnic</span><span class="sxs-lookup"><span data-stu-id="0e0e4-222">Windows Vista, Windows Server 2003, and Windows XP Differences</span></span>  
 <span data-ttu-id="0e0e4-223">Jak wspomniano wcześniej, nie wszystkie ustawienia poison komunikat — Obsługa dotyczą [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-223">As noted earlier, not all poison-message handling settings apply to [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span> <span data-ttu-id="0e0e4-224">Poniższy klucz różnice między usługi kolejkowania komunikatów na [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], [!INCLUDE[wxp](../../../../includes/wxp-md.md)], i [!INCLUDE[wv](../../../../includes/wv-md.md)] mają zastosowanie do obsługi komunikatów poison:</span><span class="sxs-lookup"><span data-stu-id="0e0e4-224">The following key differences between Message Queuing on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)], [!INCLUDE[wxp](../../../../includes/wxp-md.md)], and [!INCLUDE[wv](../../../../includes/wv-md.md)] are relevant to poison-message handling:</span></span>  
  
-   <span data-ttu-id="0e0e4-225">Komunikatów usługi kolejkowania wiadomości w [!INCLUDE[wv](../../../../includes/wv-md.md)] obsługuje podkolejki, podczas gdy [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)] nie obsługują podkolejki.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-225">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports subqueues, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not support subqueues.</span></span> <span data-ttu-id="0e0e4-226">Kolejki podrzędne są używane w obsłudze poison komunikatów.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-226">Subqueues are used in poison-message handling.</span></span> <span data-ttu-id="0e0e4-227">Kolejki ponownych prób i skażone kolejki są podkolejki do kolejki aplikacji, która jest tworzona na podstawie ustawień poison komunikat — Obsługa.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-227">The retry queues and the poison queue are subqueues to the application queue that is created based on the poison-message handling settings.</span></span> <span data-ttu-id="0e0e4-228">`MaxRetryCycles` Określa, ile ponów podkolejki do utworzenia.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-228">The `MaxRetryCycles` dictates how many retry subqueues to create.</span></span> <span data-ttu-id="0e0e4-229">W związku z tym podczas uruchamiania [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] lub [!INCLUDE[wxp](../../../../includes/wxp-md.md)], `MaxRetryCycles` są ignorowane i `ReceiveErrorHandling.Move` jest niedozwolone.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-229">Therefore, when running on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] or [!INCLUDE[wxp](../../../../includes/wxp-md.md)], `MaxRetryCycles` are ignored and `ReceiveErrorHandling.Move` is not allowed.</span></span>  
  
-   <span data-ttu-id="0e0e4-230">Komunikatów usługi kolejkowania wiadomości w [!INCLUDE[wv](../../../../includes/wv-md.md)] obsługuje negatywną potwierdzenie, podczas gdy [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)] nie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-230">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports negative acknowledgment, while [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)] do not.</span></span> <span data-ttu-id="0e0e4-231">Potwierdzenie negatywne z odbierającego menedżera kolejek powoduje wysyłanie menedżera kolejek można umieścić odrzucone wiadomości w kolejce wiadomości utraconych.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-231">A negative acknowledgment from the receiving queue manager causes the sending queue manager to place the rejected message in the dead-letter queue.</span></span> <span data-ttu-id="0e0e4-232">W efekcie `ReceiveErrorHandling.Reject` jest niedozwolone w przypadku [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-232">As such, `ReceiveErrorHandling.Reject` is not allowed with [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span>  
  
-   <span data-ttu-id="0e0e4-233">Komunikatów usługi kolejkowania wiadomości w [!INCLUDE[wv](../../../../includes/wv-md.md)] obsługuje nastąpiła właściwości wiadomości, które zlicza liczbę dostarczanie komunikatów.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-233">Message Queuing in [!INCLUDE[wv](../../../../includes/wv-md.md)] supports a message property that keeps count of the number of times message delivery is attempted.</span></span> <span data-ttu-id="0e0e4-234">Ta właściwość count przerwania nie jest dostępny na [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] i [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0e0e4-234">This abort count property is not available on [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)] and [!INCLUDE[wxp](../../../../includes/wxp-md.md)].</span></span> [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]<span data-ttu-id="0e0e4-235">przechowuje liczby przerwania w pamięci, dlatego jest możliwe, że ta właściwość nie może zawierać dokładne wartości, gdy ten sam komunikat jest odczytywany przez więcej niż jeden [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usługę w farmie.</span><span class="sxs-lookup"><span data-stu-id="0e0e4-235"> maintains the abort count in memory, so it is possible that this property may not contain an accurate value when the same message is read by more than one [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service in a farm.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0e0e4-236">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0e0e4-236">See Also</span></span>  
 [<span data-ttu-id="0e0e4-237">Omówienie kolejek</span><span class="sxs-lookup"><span data-stu-id="0e0e4-237">Queues Overview</span></span>](../../../../docs/framework/wcf/feature-details/queues-overview.md)  
 [<span data-ttu-id="0e0e4-238">Różnice w funkcjach kolejkowania w systemach Windows Vista, Windows Server 2003 i Windows XP</span><span class="sxs-lookup"><span data-stu-id="0e0e4-238">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md)  
 [<span data-ttu-id="0e0e4-239">Określanie i obsługa błędów w kontraktach i usługach</span><span class="sxs-lookup"><span data-stu-id="0e0e4-239">Specifying and Handling Faults in Contracts and Services</span></span>](../../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md)
