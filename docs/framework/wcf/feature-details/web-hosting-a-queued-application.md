---
title: "Sieć Web hostująca aplikację zakolejkowaną"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
caps.latest.revision: "18"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 38edfcb1363e538295e1fb1a8b8fe0c5b2d34691
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/21/2017
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="01c21-102">Sieć Web hostująca aplikację zakolejkowaną</span><span class="sxs-lookup"><span data-stu-id="01c21-102">Web Hosting a Queued Application</span></span>
<span data-ttu-id="01c21-103">Usługa aktywacji procesów systemu Windows (WAS) zarządza aktywacji i okresem istnienia procesów roboczych, które zawierają aplikacji obsługujących [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] usług.</span><span class="sxs-lookup"><span data-stu-id="01c21-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services.</span></span> <span data-ttu-id="01c21-104">Stanowi uogólnienie modelu procesów WAS [!INCLUDE[iis601](../../../../includes/iis601-md.md)] model procesu dla serwera HTTP przez usunięcie zależności od protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="01c21-104">The WAS process model generalizes the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="01c21-105">Dzięki temu [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] usług jednoczesne używanie protokołów HTTP i protokołów innych niż HTTP, na przykład net.msmq i msmq.formatname w środowisku macierzystym, który obsługuje aktywacji opartej na komunikat i oferuje możliwość obsługi dużej liczby aplikacji na danym komputerze.</span><span class="sxs-lookup"><span data-stu-id="01c21-105">This allows [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="01c21-106">ZOSTAŁ obejmują usługę aktywacji usługi kolejkowania komunikatów (MSMQ), który uaktywnia umieszczonych w kolejce aplikacji, gdy jeden lub więcej komunikatów są umieszczane w jednym z kolejek używany przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="01c21-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="01c21-107">Usługa aktywacji usługi MSMQ jest usługi NT, który jest automatycznie uruchamiane domyślnie.</span><span class="sxs-lookup"><span data-stu-id="01c21-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="01c21-108">Usługa WAS i korzyści, zobacz [Hosting w usłudze aktywacji procesów systemu Windows](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="01c21-108"> WAS and its benefits, see [Hosting in Windows Process Activation Service](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="01c21-109">Usługa MSMQ, zobacz [omówienie kolejek](../../../../docs/framework/wcf/feature-details/queues-overview.md)</span><span class="sxs-lookup"><span data-stu-id="01c21-109"> MSMQ, see [Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md)</span></span>  
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="01c21-110">Kolejka adresowania usługi WAS</span><span class="sxs-lookup"><span data-stu-id="01c21-110">Queue Addressing in WAS</span></span>  
 <span data-ttu-id="01c21-111">ZOSTAŁ, że aplikacje mają adresy jednolity identyfikator zasobów (URI).</span><span class="sxs-lookup"><span data-stu-id="01c21-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="01c21-112">Adresy aplikacji ma dwie części: specyficzne dla aplikacji, względny adres (ścieżka) i podstawowa Prefiks URI.</span><span class="sxs-lookup"><span data-stu-id="01c21-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="01c21-113">Te dwie części Podaj adres zewnętrzny aplikację, jeśli połączone.</span><span class="sxs-lookup"><span data-stu-id="01c21-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="01c21-114">Podstawowy Prefiks URI jest tworzony z powiązania witryny i jest używany dla wszystkich aplikacji w witrynie, na przykład "net.msmq://localhost", "msmq.formatname://localhost" lub "NET.TCP://localhost".</span><span class="sxs-lookup"><span data-stu-id="01c21-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="01c21-115">Następnie zbudowanych aplikacji adresów wykonując fragmenty ścieżki specyficzne dla aplikacji (takich jak "/ applicationOne") i dodanie ich do podstawowego identyfikatora URI prefiksu na pełny identyfikator URI aplikacji, na przykład "net.msmq://localhost/applicationOne".</span><span class="sxs-lookup"><span data-stu-id="01c21-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="01c21-116">Usługa MSMQ activation używa identyfikator URI aplikacji w celu dopasowania kolejki usługi MSMQ activation service należy monitorować dla wiadomości.</span><span class="sxs-lookup"><span data-stu-id="01c21-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="01c21-117">Po uruchomieniu usługi MSMQ activation service wylicza wszystkich kolejek publicznych i prywatnych na komputerze jest skonfigurowana do odbierania z, a monitoruje je dla wiadomości.</span><span class="sxs-lookup"><span data-stu-id="01c21-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="01c21-118">Co 10 minut, usługi MSMQ activation service Odświeża listę kolejek do monitorowania.</span><span class="sxs-lookup"><span data-stu-id="01c21-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="01c21-119">Po znalezieniu komunikatu w kolejce z usługą aktywacji jest zgodna z nazwą kolejki, do aplikacji najdłuższy zgodny identyfikator URI dla powiązania net.msmq i aktywuje aplikację.</span><span class="sxs-lookup"><span data-stu-id="01c21-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="01c21-120">Trwa aktywowanie aplikacji muszą być zgodne (najdłuższe dopasowanie) prefiks nazwy kolejki.</span><span class="sxs-lookup"><span data-stu-id="01c21-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="01c21-121">Na przykład nazwa kolejki jest: msmqWebHost/orderProcessing/service.svc.</span><span class="sxs-lookup"><span data-stu-id="01c21-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="01c21-122">Jeśli 1 aplikacja nie ma /msmqWebHost/orderProcessing katalogu wirtualnego z service.svc w nim i 2 aplikacji jest /msmqWebHost katalogu wirtualnego z orderProcessing.svc w nim, 1 aplikacja została aktywowana.</span><span class="sxs-lookup"><span data-stu-id="01c21-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="01c21-123">Usunięcie aplikacji 1, 2 aplikacji jest aktywowane.</span><span class="sxs-lookup"><span data-stu-id="01c21-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="01c21-124">Podczas tworzenia kolejki komunikaty wysyłane do niego nie aktywować aplikacji, dopóki usługi MSMQ activation service spowoduje odświeżenie listy kolejki, która jest maksymalnie 10 minut od czasu utworzenia kolejki.</span><span class="sxs-lookup"><span data-stu-id="01c21-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="01c21-125">Ponowne uruchamianie usługi aktywacji odświeża na liście kolejki.</span><span class="sxs-lookup"><span data-stu-id="01c21-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="01c21-126">Efekt kolejek prywatnych i publicznych w rozwiązaniu</span><span class="sxs-lookup"><span data-stu-id="01c21-126">The Effect of Private and Public Queues on Addressing</span></span>  
 <span data-ttu-id="01c21-127">Usługa MSMQ activation nie rozróżnia monitorowania kolejki prywatnej i publicznej.</span><span class="sxs-lookup"><span data-stu-id="01c21-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="01c21-128">W efekcie nie może mieć kolejek publicznych i prywatnych o takiej samej nazwie.</span><span class="sxs-lookup"><span data-stu-id="01c21-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="01c21-129">Jeśli to zrobisz, aplikacji sieci Web hostowanych może pobrać aktywować odczytu z jednej z kolejki.</span><span class="sxs-lookup"><span data-stu-id="01c21-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="01c21-130">Konfiguracja kolejki dla aktywacji</span><span class="sxs-lookup"><span data-stu-id="01c21-130">Queue Configuration for Activation</span></span>  
 <span data-ttu-id="01c21-131">Usługa MSMQ activation działa jako usługa sieciowa.</span><span class="sxs-lookup"><span data-stu-id="01c21-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="01c21-132">To usługa, która monitoruje kolejki, aby aktywować aplikacje.</span><span class="sxs-lookup"><span data-stu-id="01c21-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="01c21-133">Na jej aktywowania aplikacji z kolejki należy podać kolejki usług sieci dostęp do wglądu dla wiadomości w listy kontroli dostępu (ACL).</span><span class="sxs-lookup"><span data-stu-id="01c21-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="01c21-134">Zanieczyszczonych komunikatów</span><span class="sxs-lookup"><span data-stu-id="01c21-134">Poison Messaging</span></span>  
 <span data-ttu-id="01c21-135">Trująca wiadomość została obsługa w [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] jest obsługiwany przez kanał nie tylko wykryje, że wiadomość jest intoksykowane, ale wybiera dyspozycji, na podstawie konfiguracji użytkownika.</span><span class="sxs-lookup"><span data-stu-id="01c21-135">Poison message handling in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="01c21-136">W związku z tym jest pojedynczą wiadomość w kolejce.</span><span class="sxs-lookup"><span data-stu-id="01c21-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="01c21-137">Aplikacja oparta na sieci Web przerywa razy w kolejnych i wiadomość zostanie przeniesiona do kolejki ponawiania.</span><span class="sxs-lookup"><span data-stu-id="01c21-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="01c21-138">W punkcie ustawieniem Opóźnienie ponownych prób cyklu wiadomość zostanie przeniesiona z kolejki ponawiania do kolejki głównej aby spróbować ponownie.</span><span class="sxs-lookup"><span data-stu-id="01c21-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="01c21-139">Ale wymaga to zwrócony jako aktywne.</span><span class="sxs-lookup"><span data-stu-id="01c21-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="01c21-140">Jeśli aplikacja jest ponownego przetworzenia przez WAS, następnie komunikat pozostaje w kolejka ponownych prób do momentu kolejną wiadomość dociera do kolejki głównej do aktywowania aplikacji w kolejce.</span><span class="sxs-lookup"><span data-stu-id="01c21-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="01c21-141">W takim przypadku obejście jest powrót komunikat ręcznie z kolejka ponownych prób do kolejki głównej do ponownego aktywowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="01c21-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="01c21-142">Podkolejki i zastrzeżenie systemu kolejki:</span><span class="sxs-lookup"><span data-stu-id="01c21-142">Subqueue and System Queue Caveat</span></span>  
 <span data-ttu-id="01c21-143">Nie można uaktywnić aplikacji usługi hostowanej WAS oparte na wiadomości w kolejce systemu, takich jak kolejki utraconych wiadomości systemowe lub podrzędnej kolejki, takie jak skażone kolejki podrzędne.</span><span class="sxs-lookup"><span data-stu-id="01c21-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="01c21-144">Jest to ograniczenie dla tej wersji produktu.</span><span class="sxs-lookup"><span data-stu-id="01c21-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="01c21-145">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="01c21-145">See Also</span></span>  
 [<span data-ttu-id="01c21-146">Obsługa komunikatów zanieczyszczonych</span><span class="sxs-lookup"><span data-stu-id="01c21-146">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)  
 [<span data-ttu-id="01c21-147">Punkty końcowe usługi i adresowanie kolejki</span><span class="sxs-lookup"><span data-stu-id="01c21-147">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
