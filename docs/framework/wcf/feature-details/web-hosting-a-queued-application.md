---
title: Sieć Web hostująca aplikację zakolejkowaną
ms.date: 03/30/2017
ms.assetid: c7a539fa-e442-4c08-a7f1-17b7f5a03e88
ms.openlocfilehash: 36c35fe0590ad9fc728641313d4175a432d7ccaa
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/22/2019
ms.locfileid: "69951577"
---
# <a name="web-hosting-a-queued-application"></a><span data-ttu-id="98205-102">Sieć Web hostująca aplikację zakolejkowaną</span><span class="sxs-lookup"><span data-stu-id="98205-102">Web Hosting a Queued Application</span></span>
<span data-ttu-id="98205-103">Usługa aktywacji procesów systemu Windows (WAS) zarządza aktywacją i okresem istnienia procesów roboczych, które zawierają aplikacje obsługujące usługi Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="98205-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="98205-104">Proces WAS przetwarza model procesów usług IIS 6,0 dla serwera HTTP, usuwając zależność od protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="98205-104">The WAS process model generalizes the IIS 6.0 process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="98205-105">Dzięki temu usługi WCF mogą korzystać zarówno z protokołu HTTP, jak i protokołów innych niż HTTP, takich jak net. MSMQ i MSMQ. formatname, w środowisku hostingu obsługującym aktywację opartą na komunikatach i oferuje możliwość hostowania dużej liczby aplikacji na danym komputerze.</span><span class="sxs-lookup"><span data-stu-id="98205-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as net.msmq and msmq.formatname, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given computer.</span></span>  
  
 <span data-ttu-id="98205-106">Obejmuje usługę aktywacji usługi kolejkowania komunikatów (MSMQ), która aktywuje aplikację w kolejce, gdy co najmniej jeden komunikat znajduje się w jednej z kolejek używanych przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="98205-106">WAS includes a Message Queuing (MSMQ) activation service that activates a queued application when one or more messages are placed in one of the queues used by the application.</span></span> <span data-ttu-id="98205-107">Usługa aktywacji usługi MSMQ to usługa NT, która domyślnie jest uruchamiana automatycznie.</span><span class="sxs-lookup"><span data-stu-id="98205-107">The MSMQ activation service is an NT service that is automatically started by default.</span></span>  
  
 <span data-ttu-id="98205-108">Aby uzyskać więcej informacji o usłudze WAS i jej korzyściach, zobacz [hosting w usłudze aktywacji procesów systemu Windows](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span><span class="sxs-lookup"><span data-stu-id="98205-108">For more information about WAS and its benefits, see [Hosting in Windows Process Activation Service](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span></span> <span data-ttu-id="98205-109">Aby uzyskać więcej informacji na temat usługi MSMQ, zobacz [Omówienie kolejek](../../../../docs/framework/wcf/feature-details/queues-overview.md).</span><span class="sxs-lookup"><span data-stu-id="98205-109">For more information about MSMQ, see [Queues Overview](../../../../docs/framework/wcf/feature-details/queues-overview.md).</span></span>
  
## <a name="queue-addressing-in-was"></a><span data-ttu-id="98205-110">Adresowanie kolejki w zostało</span><span class="sxs-lookup"><span data-stu-id="98205-110">Queue Addressing in WAS</span></span>  
 <span data-ttu-id="98205-111">Aplikacje mają adresy Uniform Resource Identifier (URI).</span><span class="sxs-lookup"><span data-stu-id="98205-111">WAS applications have Uniform Resource Identifier (URI) addresses.</span></span> <span data-ttu-id="98205-112">Adresy aplikacji mają dwie części: podstawowy prefiks identyfikatora URI i specyficzny dla aplikacji adres względny (ścieżka).</span><span class="sxs-lookup"><span data-stu-id="98205-112">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path).</span></span> <span data-ttu-id="98205-113">Te dwie części zapewniają adres zewnętrzny dla aplikacji, gdy jest sprzężony razem.</span><span class="sxs-lookup"><span data-stu-id="98205-113">These two parts provide the external address for an application when joined together.</span></span> <span data-ttu-id="98205-114">Podstawowy prefiks identyfikatora URI jest konstruowany z powiązania witryny i jest używany dla wszystkich aplikacji w lokacji, na przykład "net. MSMQ://localhost", "MSMQ. formatname://localhost", lub "net. TCP://localhost".</span><span class="sxs-lookup"><span data-stu-id="98205-114">The base URI prefix is constructed from the site binding and is used for all the applications under the site, for example, "net.msmq://localhost", "msmq.formatname://localhost", or "net.tcp://localhost".</span></span> <span data-ttu-id="98205-115">Następnie adresy aplikacji są tworzone przez pobranie fragmentów ścieżek specyficznych dla aplikacji (takich jak "/applicationOne") i dołączenie ich do podstawowego prefiksu URI w celu uzyskania pełnego identyfikatora URI aplikacji, na przykład "net. MSMQ://localhost/applicationOne".</span><span class="sxs-lookup"><span data-stu-id="98205-115">Application addresses are then constructed by taking application-specific path fragments (such as "/applicationOne") and appending them to the base URI prefix to arrive at the full application URI, for example, "net.msmq://localhost/applicationOne".</span></span>  
  
 <span data-ttu-id="98205-116">Usługa aktywacji usługi MSMQ używa identyfikatora URI aplikacji w celu dopasowania do kolejki, którą usługa aktywacji MSMQ musi monitorować w poszukiwaniu komunikatów.</span><span class="sxs-lookup"><span data-stu-id="98205-116">The MSMQ activation service uses the application URI to match the queue that the MSMQ activation service must monitor for messages.</span></span> <span data-ttu-id="98205-117">Po uruchomieniu usługa aktywacji usługi MSMQ wylicza wszystkie kolejki publiczne i prywatne na komputerze, który jest skonfigurowany do odbierania z i monitoruje je pod kątem komunikatów.</span><span class="sxs-lookup"><span data-stu-id="98205-117">When the MSMQ activation service starts, it enumerates all public and private queues on the computer it is configured to receive from and monitors them for messages.</span></span> <span data-ttu-id="98205-118">Co 10 minut usługa aktywacji MSMQ odświeża listę kolejek do monitorowania.</span><span class="sxs-lookup"><span data-stu-id="98205-118">Every 10 minutes, the MSMQ activation service refreshes the list of queues to monitor.</span></span> <span data-ttu-id="98205-119">Po znalezieniu komunikatu w kolejce usługa aktywacji dopasowuje nazwę kolejki do najdłuższego zgodnego identyfikatora URI aplikacji dla powiązania net. MSMQ i aktywuje aplikację.</span><span class="sxs-lookup"><span data-stu-id="98205-119">When a message is found in a queue, the activation service matches the queue name to the longest matching application URI for the net.msmq binding and activates the application.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="98205-120">Aktywowana aplikacja musi być zgodna z prefiksem nazwy kolejki (najdłuższym dopasowaniem).</span><span class="sxs-lookup"><span data-stu-id="98205-120">The application being activated must match (longest match) the prefix of the queue name.</span></span>  
  
 <span data-ttu-id="98205-121">Na przykład nazwa kolejki to: msmqWebHost/orderProcessing/Service. svc.</span><span class="sxs-lookup"><span data-stu-id="98205-121">For example, a queue name is: msmqWebHost/orderProcessing/service.svc.</span></span> <span data-ttu-id="98205-122">Jeśli aplikacja 1 ma katalog wirtualny/msmqWebHost/orderProcessing z usługą. svc w tym obszarze, a aplikacja 2 ma katalog wirtualny/msmqWebHost z orderProcessing. svc w tym obszarze, aktywowano aplikację 1.</span><span class="sxs-lookup"><span data-stu-id="98205-122">If Application 1 has a virtual directory /msmqWebHost/orderProcessing with a service.svc under it, and Application 2 has a virtual directory /msmqWebHost with an orderProcessing.svc under it, Application 1 is activated.</span></span> <span data-ttu-id="98205-123">Jeśli aplikacja 1 zostanie usunięta, zostanie uaktywniona aplikacja 2.</span><span class="sxs-lookup"><span data-stu-id="98205-123">If Application 1 is deleted, Application 2 is activated.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="98205-124">Po utworzeniu kolejki wszystkie wysyłane do niej wiadomości nie uaktywniają aplikacji do momentu odświeżenia listy kolejek przez usługę aktywacji usługi MSMQ, czyli maksymalnie 10 minut od momentu utworzenia kolejki.</span><span class="sxs-lookup"><span data-stu-id="98205-124">When a queue is created, any messages sent to it do not activate an application until the MSMQ activation service refreshes the queue list, which is, at most, 10 minutes from the time the queue was created.</span></span> <span data-ttu-id="98205-125">Ponowne uruchomienie usługi aktywacji spowoduje odświeżenie listy kolejek.</span><span class="sxs-lookup"><span data-stu-id="98205-125">Restarting the activation service refreshes the queue list as well.</span></span>  
  
### <a name="the-effect-of-private-and-public-queues-on-addressing"></a><span data-ttu-id="98205-126">Wpływ kolejek prywatnych i publicznych na adresowanie</span><span class="sxs-lookup"><span data-stu-id="98205-126">The Effect of Private and Public Queues on Addressing</span></span>  
 <span data-ttu-id="98205-127">Usługa aktywacji usługi MSMQ nie rozróżnia monitorowania kolejek prywatnych i publicznych.</span><span class="sxs-lookup"><span data-stu-id="98205-127">The MSMQ activation service does not distinguish between private and public queue monitoring.</span></span> <span data-ttu-id="98205-128">W związku z tym nie można mieć kolejek publicznych i prywatnych o tej samej nazwie.</span><span class="sxs-lookup"><span data-stu-id="98205-128">As such, you cannot have public and private queues with the same name.</span></span> <span data-ttu-id="98205-129">W takim przypadku aplikacja hostowana w sieci Web może uzyskać aktywację z jednej z kolejek.</span><span class="sxs-lookup"><span data-stu-id="98205-129">If you do, a Web-hosted application may get activated reading from either of the queues.</span></span>  
  
### <a name="queue-configuration-for-activation"></a><span data-ttu-id="98205-130">Konfiguracja kolejki na potrzeby aktywacji</span><span class="sxs-lookup"><span data-stu-id="98205-130">Queue Configuration for Activation</span></span>  
 <span data-ttu-id="98205-131">Usługa aktywacji usługi MSMQ działa jako usługa sieciowa.</span><span class="sxs-lookup"><span data-stu-id="98205-131">The MSMQ activation service runs as NETWORK SERVICE.</span></span> <span data-ttu-id="98205-132">Jest to usługa, która monitoruje kolejki w celu aktywowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="98205-132">It is the service that monitors queues to activate applications.</span></span> <span data-ttu-id="98205-133">Aby można było aktywować aplikacje z kolejki, kolejka musi zapewnić dostęp usługi sieciowej do wglądu w komunikaty na liście kontroli dostępu (ACL).</span><span class="sxs-lookup"><span data-stu-id="98205-133">For it to activate applications from the queue, the queue must provide for NETWORK SERVICE access to peek for messages in its access control list (ACL).</span></span>  
  
### <a name="poison-messaging"></a><span data-ttu-id="98205-134">Trująca obsługa komunikatów</span><span class="sxs-lookup"><span data-stu-id="98205-134">Poison Messaging</span></span>  
 <span data-ttu-id="98205-135">Obsługa skażonych komunikatów w programie WCF jest obsługiwana przez kanał, który nie tylko wykrywa, że komunikat jest trujący, ale wybiera dyspozycję opartą na konfiguracji użytkownika.</span><span class="sxs-lookup"><span data-stu-id="98205-135">Poison message handling in WCF is handled by the channel, which not only detects that a message is poisoned but selects a disposition based on user configuration.</span></span> <span data-ttu-id="98205-136">W związku z tym w kolejce znajduje się jeden komunikat.</span><span class="sxs-lookup"><span data-stu-id="98205-136">As a result, there is a single message in the queue.</span></span> <span data-ttu-id="98205-137">Aplikacja hostowana w sieci Web przerywa pracę po kolejnych godzinach, a komunikat jest przenoszony do kolejki ponawiania prób.</span><span class="sxs-lookup"><span data-stu-id="98205-137">The Web-hosted application aborts successive times and the message is moved to a retry queue.</span></span> <span data-ttu-id="98205-138">W punkcie podyktowanym opóźnieniem cyklu ponawiania komunikat jest przenoszony z kolejki ponownych prób do kolejki głównej, aby spróbować ponownie.</span><span class="sxs-lookup"><span data-stu-id="98205-138">At a point dictated by the retry cycle delay, the message is moved from the retry queue to the main queue to try again.</span></span> <span data-ttu-id="98205-139">Jednak wymaga to aktywności kanału znajdującego się w kolejce.</span><span class="sxs-lookup"><span data-stu-id="98205-139">But this requires the queued channel to be active.</span></span> <span data-ttu-id="98205-140">Jeśli aplikacja jest odtwarzana przez program, wówczas komunikat pozostaje w kolejce ponownych prób do momentu, aż inny komunikat zostanie umieszczony w kolejce głównej w celu aktywowania aplikacji znajdującej się w kolejce.</span><span class="sxs-lookup"><span data-stu-id="98205-140">If the application is recycled by WAS, then the message remains in the retry queue until another message arrives in the main queue to activate the queued application.</span></span> <span data-ttu-id="98205-141">Obejście w tym przypadku polega na przeniesieniu komunikatu ręcznie z kolejki ponownych prób z powrotem do kolejki głównej w celu ponownego aktywowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="98205-141">The workaround in this case is to move the message manually from the retry queue back to the main queue to reactivate the application.</span></span>  
  
### <a name="subqueue-and-system-queue-caveat"></a><span data-ttu-id="98205-142">Przeciwkolejka i przeciwsystemowe zastrzeżenie</span><span class="sxs-lookup"><span data-stu-id="98205-142">Subqueue and System Queue Caveat</span></span>  
 <span data-ttu-id="98205-143">Nie można aktywować aplikacji hostowanej na podstawie komunikatów w kolejce systemowej, takich jak Kolejka utraconych wiadomości w całej systemie, lub podkolejki, takie jak podkolejki trujące.</span><span class="sxs-lookup"><span data-stu-id="98205-143">A WAS-hosted application cannot be activated based on messages in a system queue, such as the system-wide dead-letter queue, or sub-queues, such as poison sub-queues.</span></span> <span data-ttu-id="98205-144">Jest to ograniczenie dla tej wersji produktu.</span><span class="sxs-lookup"><span data-stu-id="98205-144">This is a limitation for this version of the product.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="98205-145">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="98205-145">See also</span></span>

- [<span data-ttu-id="98205-146">Obsługa komunikatów zanieczyszczonych</span><span class="sxs-lookup"><span data-stu-id="98205-146">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)
- [<span data-ttu-id="98205-147">Punkty końcowe usługi i adresowanie kolejki</span><span class="sxs-lookup"><span data-stu-id="98205-147">Service Endpoints and Queue Addressing</span></span>](../../../../docs/framework/wcf/feature-details/service-endpoints-and-queue-addressing.md)
