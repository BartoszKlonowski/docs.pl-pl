---
title: Sesje, tworzenie wystąpień i współbieżność
ms.date: 03/30/2017
ms.assetid: 50797a3b-7678-44ed-8138-49ac1602f35b
ms.openlocfilehash: 19dedddadad2f27acdeeaceb2c186a731fa79c32
ms.sourcegitcommit: 7980a91f90ae5eca859db7e6bfa03e23e76a1a50
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/13/2020
ms.locfileid: "81243118"
---
# <a name="sessions-instancing-and-concurrency"></a><span data-ttu-id="d2ee2-102">Sesje, tworzenie wystąpień i współbieżność</span><span class="sxs-lookup"><span data-stu-id="d2ee2-102">Sessions, Instancing, and Concurrency</span></span>
<span data-ttu-id="d2ee2-103">*Sesja* jest korelacja wszystkich wiadomości wysyłanych między dwoma punktami końcowymi.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-103">A *session* is a correlation of all messages sent between two endpoints.</span></span> <span data-ttu-id="d2ee2-104">*Instancing* odnosi się do kontrolowania okresu istnienia obiektów <xref:System.ServiceModel.InstanceContext> usługi zdefiniowanych przez użytkownika i ich powiązanych obiektów.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-104">*Instancing* refers to controlling the lifetime of user-defined service objects and their related <xref:System.ServiceModel.InstanceContext> objects.</span></span> <span data-ttu-id="d2ee2-105">*Współbieżność* jest terminem nadanym kontroli liczby wątków wykonywanych w <xref:System.ServiceModel.InstanceContext> tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-105">*Concurrency* is the term given to the control of the number of threads executing in an <xref:System.ServiceModel.InstanceContext> at the same time.</span></span>  
  
 <span data-ttu-id="d2ee2-106">W tym temacie opisano te ustawienia, sposób ich używania i różne interakcje między nimi.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-106">This topic describes these settings, how to use them, and the various interactions between them.</span></span>  
  
## <a name="sessions"></a><span data-ttu-id="d2ee2-107">Sesje</span><span class="sxs-lookup"><span data-stu-id="d2ee2-107">Sessions</span></span>  
 <span data-ttu-id="d2ee2-108">Gdy umowa serwisowa <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> ustawia <xref:System.ServiceModel.SessionMode.Required?displayProperty=nameWithType>właściwość do , że umowa mówi, że wszystkie wywołania (czyli podstawowe wymiany komunikatów, które obsługują wywołania) musi być częścią tej samej konwersacji.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-108">When a service contract sets the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.SessionMode.Required?displayProperty=nameWithType>, that contract is saying that all calls (that is, the underlying message exchanges that support the calls) must be part of the same conversation.</span></span> <span data-ttu-id="d2ee2-109">Jeśli umowa określa, że zezwala na sesje, ale nie wymaga jednego, klienci mogą łączyć się i ustanawiać sesję, czy nie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-109">If a contract specifies that it allows sessions but does not require one, clients can connect and either establish a session or not.</span></span> <span data-ttu-id="d2ee2-110">Jeśli sesja kończy się i wiadomość jest wysyłana za ten sam kanał oparty na sesji wyjątek.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-110">If the session ends and a message is sent over the same session-based channel an exception is thrown.</span></span>  
  
 <span data-ttu-id="d2ee2-111">Sesje WCF mają następujące główne funkcje koncepcyjne:</span><span class="sxs-lookup"><span data-stu-id="d2ee2-111">WCF sessions have the following main conceptual features:</span></span>  
  
- <span data-ttu-id="d2ee2-112">Są one jawnie inicjowane i zakończone przez aplikację wywołującą.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-112">They are explicitly initiated and terminated by the calling application.</span></span>  
  
- <span data-ttu-id="d2ee2-113">Wiadomości dostarczane podczas sesji są przetwarzane w kolejności, w jakiej są odbierane.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-113">Messages delivered during a session are processed in the order in which they are received.</span></span>  
  
- <span data-ttu-id="d2ee2-114">Sesje skorelować grupę wiadomości do konwersacji.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-114">Sessions correlate a group of messages into a conversation.</span></span> <span data-ttu-id="d2ee2-115">Znaczenie tej korelacji jest abstrakcją.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-115">The meaning of that correlation is an abstraction.</span></span> <span data-ttu-id="d2ee2-116">Na przykład jeden kanał oparty na sesji może skorelować wiadomości na podstawie udostępnionego połączenia sieciowego, podczas gdy inny kanał oparty na sesji może skorelować wiadomości na podstawie udostępnionego tagu w treści wiadomości.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-116">For instance, one session-based channel may correlate messages based on a shared network connection while another session-based channel may correlate messages based on a shared tag in the message body.</span></span> <span data-ttu-id="d2ee2-117">Funkcje, które mogą pochodzić z sesji zależą od charakteru korelacji.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-117">The features that can be derived from the session depend on the nature of the correlation.</span></span>  
  
- <span data-ttu-id="d2ee2-118">Nie ma ogólnego magazynu danych skojarzonego z sesją WCF.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-118">There is no general data store associated with a WCF session.</span></span>  
  
 <span data-ttu-id="d2ee2-119">Jeśli znasz <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> klasę w ASP.NET aplikacji i funkcji, które zapewnia, można zauważyć następujące różnice między tego rodzaju sesji i WCF sesji:</span><span class="sxs-lookup"><span data-stu-id="d2ee2-119">If you are familiar with the <xref:System.Web.SessionState.HttpSessionState?displayProperty=nameWithType> class in ASP.NET applications and the functionality it provides, you might notice the following differences between that kind of session and WCF sessions:</span></span>  
  
- <span data-ttu-id="d2ee2-120">ASP.NET sesje są zawsze inicjowane przez serwer.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-120">ASP.NET sessions are always server-initiated.</span></span>  
  
- <span data-ttu-id="d2ee2-121">ASP.NET sesje są niejawnie nieuiarszane.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-121">ASP.NET sessions are implicitly unordered.</span></span>  
  
- <span data-ttu-id="d2ee2-122">ASP.NET sesji zapewniają ogólny mechanizm przechowywania danych między żądaniami.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-122">ASP.NET sessions provide a general data storage mechanism across requests.</span></span>  
  
 <span data-ttu-id="d2ee2-123">Aplikacje klienckie i aplikacje usług współdziałają z sesjami na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-123">Client applications and service applications interact with sessions in different ways.</span></span> <span data-ttu-id="d2ee2-124">Aplikacje klienckie inicjują sesje, a następnie odbierają i przetwarzają wiadomości wysłane w ramach sesji.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-124">Client applications initiate sessions and then receive and process the messages sent within the session.</span></span> <span data-ttu-id="d2ee2-125">Aplikacje usługi można użyć sesji jako punkt rozszerzalności, aby dodać dodatkowe zachowanie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-125">Service applications can use sessions as an extensibility point to add additional behavior.</span></span> <span data-ttu-id="d2ee2-126">Odbywa się to przez pracę <xref:System.ServiceModel.InstanceContext> bezpośrednio z dostawcą kontekstu wystąpienia niestandardowego lub zaimplementowanie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-126">This is done by working directly with the <xref:System.ServiceModel.InstanceContext> or implementing a custom instance context provider.</span></span>  
  
## <a name="instancing"></a><span data-ttu-id="d2ee2-127">Tworzenie wystąpienia</span><span class="sxs-lookup"><span data-stu-id="d2ee2-127">Instancing</span></span>  
 <span data-ttu-id="d2ee2-128">Zachowanie instancing (zestaw przy <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> użyciu właściwości) <xref:System.ServiceModel.InstanceContext> kontroluje sposób jest tworzony w odpowiedzi na wiadomości przychodzące.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-128">The instancing behavior (set by using the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property) controls how the <xref:System.ServiceModel.InstanceContext> is created in response to incoming messages.</span></span> <span data-ttu-id="d2ee2-129">Domyślnie każdy <xref:System.ServiceModel.InstanceContext> jest skojarzony z jednym obiektem usługi zdefiniowanym przez <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> użytkownika, więc (w przypadku domyślnym) ustawienie właściwości kontroluje również instancing obiektów usługi zdefiniowanej przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-129">By default, each <xref:System.ServiceModel.InstanceContext> is associated with one user-defined service object, so (in the default case) setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> property also controls the instancing of user-defined service objects.</span></span> <span data-ttu-id="d2ee2-130">Wyliczenie <xref:System.ServiceModel.InstanceContextMode> definiuje tryby instancing.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-130">The <xref:System.ServiceModel.InstanceContextMode> enumeration defines the instancing modes.</span></span>  
  
 <span data-ttu-id="d2ee2-131">Dostępne są następujące tryby instancingu:</span><span class="sxs-lookup"><span data-stu-id="d2ee2-131">The following instancing modes are available:</span></span>  
  
- <span data-ttu-id="d2ee2-132"><xref:System.ServiceModel.InstanceContextMode.PerCall>: Dla <xref:System.ServiceModel.InstanceContext> każdego żądania klienta tworzony jest nowy (i w związku z tym obiekt usługi).</span><span class="sxs-lookup"><span data-stu-id="d2ee2-132"><xref:System.ServiceModel.InstanceContextMode.PerCall>: A new <xref:System.ServiceModel.InstanceContext> (and therefore service object) is created for each client request.</span></span>  
  
- <span data-ttu-id="d2ee2-133"><xref:System.ServiceModel.InstanceContextMode.PerSession>: Nowy <xref:System.ServiceModel.InstanceContext> (i w związku z tym obiekt usługi) jest tworzony dla każdej nowej sesji klienta i utrzymywany przez cały okres istnienia tej sesji (wymaga to powiązania, które obsługuje sesje).</span><span class="sxs-lookup"><span data-stu-id="d2ee2-133"><xref:System.ServiceModel.InstanceContextMode.PerSession>: A new <xref:System.ServiceModel.InstanceContext> (and therefore service object) is created for each new client session and maintained for the lifetime of that session (this requires a binding that supports sessions).</span></span>  
  
- <span data-ttu-id="d2ee2-134"><xref:System.ServiceModel.InstanceContextMode.Single>: Pojedynczy <xref:System.ServiceModel.InstanceContext> (i dlatego obiekt usługi) obsługuje wszystkie żądania klienta przez cały okres istnienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-134"><xref:System.ServiceModel.InstanceContextMode.Single>: A single <xref:System.ServiceModel.InstanceContext> (and therefore service object) handles all client requests for the lifetime of the application.</span></span>  
  
 <span data-ttu-id="d2ee2-135">Poniższy przykład kodu <xref:System.ServiceModel.InstanceContextMode> pokazuje <xref:System.ServiceModel.InstanceContextMode.PerSession> wartość domyślną, jawnie ustawioną w klasie usługi.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-135">The following code example shows the default <xref:System.ServiceModel.InstanceContextMode> value, <xref:System.ServiceModel.InstanceContextMode.PerSession> being explicitly set on a service class.</span></span>  
  
```csharp  
[ServiceBehavior(InstanceContextMode=InstanceContextMode.PerSession)]
public class CalculatorService : ICalculatorInstance
{
    ...  
}  
```  
  
 <span data-ttu-id="d2ee2-136">I podczas <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> gdy właściwość <xref:System.ServiceModel.InstanceContext> kontroluje, <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> jak <xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A?displayProperty=nameWithType> często jest zwalniany, i właściwości kontroli, gdy obiekt usługi jest zwolniony.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-136">And while the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property controls how often the <xref:System.ServiceModel.InstanceContext> is released, the <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> and <xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A?displayProperty=nameWithType> properties control when the service object is released.</span></span>  
  
### <a name="well-known-singleton-services"></a><span data-ttu-id="d2ee2-137">Dobrze znane usługi Singleton</span><span class="sxs-lookup"><span data-stu-id="d2ee2-137">Well-Known Singleton Services</span></span>  
 <span data-ttu-id="d2ee2-138">Jedna odmiana obiektów usługi pojedynczego wystąpienia jest czasami przydatna: można utworzyć obiekt usługi samodzielnie i utworzyć hosta usługi przy użyciu tego obiektu.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-138">One variation on single instance service objects is sometimes useful: you can create a service object yourself and create the service host using that object.</span></span> <span data-ttu-id="d2ee2-139">Aby to zrobić, należy <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> również <xref:System.ServiceModel.InstanceContextMode.Single> ustawić właściwość lub wyjątek jest zgłaszany po otwarciu hosta usługi.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-139">To do so, you must also set the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property to <xref:System.ServiceModel.InstanceContextMode.Single> or an exception is thrown when the service host is opened.</span></span>  
  
 <span data-ttu-id="d2ee2-140">Użyj <xref:System.ServiceModel.ServiceHost.%23ctor%28System.Object%2CSystem.Uri%5B%5D%29> konstruktora, aby utworzyć taką usługę.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-140">Use the <xref:System.ServiceModel.ServiceHost.%23ctor%28System.Object%2CSystem.Uri%5B%5D%29> constructor to create such a service.</span></span> <span data-ttu-id="d2ee2-141">Stanowi alternatywę dla implementowania <xref:System.ServiceModel.Dispatcher.IInstanceContextInitializer?displayProperty=nameWithType> niestandardowego, gdy chcesz podać wystąpienie określonego obiektu do użycia przez usługę singleton.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-141">It provides an alternative to implementing a custom <xref:System.ServiceModel.Dispatcher.IInstanceContextInitializer?displayProperty=nameWithType> when you wish to provide a specific object instance for use by a singleton service.</span></span> <span data-ttu-id="d2ee2-142">Można użyć tego przeciążenia, gdy typ implementacji usługi jest trudne do skonstruowania (na przykład, jeśli nie implementuje bezwametrycznego konstruktora publicznego).</span><span class="sxs-lookup"><span data-stu-id="d2ee2-142">You can use this overload when your service implementation type is difficult to construct (for example, if it does not implement a parameterless public constructor).</span></span>  
  
 <span data-ttu-id="d2ee2-143">Należy zauważyć, że gdy obiekt jest dostarczany do tego konstruktora, niektóre funkcje związane z Windows Communication Foundation (WCF) zachowanie instancing działać inaczej.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-143">Note that when an object is provided to this constructor, some features related to the Windows Communication Foundation (WCF) instancing behavior work differently.</span></span> <span data-ttu-id="d2ee2-144">Na przykład <xref:System.ServiceModel.InstanceContext.ReleaseServiceInstance%2A?displayProperty=nameWithType> wywołanie nie ma wpływu, gdy jest podana wystąpienie obiektu pojedynczego.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-144">For example, calling <xref:System.ServiceModel.InstanceContext.ReleaseServiceInstance%2A?displayProperty=nameWithType> has no effect when a singleton object instance is provided.</span></span> <span data-ttu-id="d2ee2-145">Podobnie każdy inny mechanizm zwalniania wystąpienia jest ignorowany.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-145">Similarly, any other instance-release mechanism is ignored.</span></span> <span data-ttu-id="d2ee2-146">Zawsze <xref:System.ServiceModel.ServiceHost> zachowuje się tak, jakby <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> <xref:System.ServiceModel.ReleaseInstanceMode.None?displayProperty=nameWithType> właściwość jest ustawiona dla wszystkich operacji.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-146">The <xref:System.ServiceModel.ServiceHost> always behaves as if the <xref:System.ServiceModel.OperationBehaviorAttribute.ReleaseInstanceMode%2A?displayProperty=nameWithType> property is set to <xref:System.ServiceModel.ReleaseInstanceMode.None?displayProperty=nameWithType> for all operations.</span></span>  
  
### <a name="sharing-instancecontext-objects"></a><span data-ttu-id="d2ee2-147">Udostępnianie obiektów instancjowych</span><span class="sxs-lookup"><span data-stu-id="d2ee2-147">Sharing InstanceContext Objects</span></span>  
 <span data-ttu-id="d2ee2-148">Można również kontrolować, który sesyjny kanał <xref:System.ServiceModel.InstanceContext> lub wywołanie jest skojarzone z który obiekt, wykonując to skojarzenie samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-148">You can also control which sessionful channel or call is associated with which <xref:System.ServiceModel.InstanceContext> object by performing that association yourself.</span></span>  
  
## <a name="concurrency"></a><span data-ttu-id="d2ee2-149">Współbieżność</span><span class="sxs-lookup"><span data-stu-id="d2ee2-149">Concurrency</span></span>  
 <span data-ttu-id="d2ee2-150">Współbieżność jest kontrolą liczby wątków aktywnych <xref:System.ServiceModel.InstanceContext> w dowolnym momencie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-150">Concurrency is the control of the number of threads active in an <xref:System.ServiceModel.InstanceContext> at any one time.</span></span> <span data-ttu-id="d2ee2-151">Jest to kontrolowane <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> przy <xref:System.ServiceModel.ConcurrencyMode> użyciu z wyliczenia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-151">This is controlled by using the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A?displayProperty=nameWithType> with the <xref:System.ServiceModel.ConcurrencyMode> enumeration.</span></span>  
  
 <span data-ttu-id="d2ee2-152">Dostępne są następujące trzy tryby współbieżności:</span><span class="sxs-lookup"><span data-stu-id="d2ee2-152">The following three concurrency modes are available:</span></span>  
  
- <span data-ttu-id="d2ee2-153"><xref:System.ServiceModel.ConcurrencyMode.Single>: Każdy kontekst wystąpienia może mieć maksymalnie jeden wątek przetwarzania wiadomości w kontekście wystąpienia w czasie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-153"><xref:System.ServiceModel.ConcurrencyMode.Single>: Each instance context is allowed to have a maximum of one thread processing messages in the instance context at a time.</span></span> <span data-ttu-id="d2ee2-154">Inne wątki, które chcą użyć tego samego kontekstu wystąpienia musi zablokować, dopóki oryginalny wątek kończy kontekst wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-154">Other threads wishing to use the same instance context must block until the original thread exits the instance context.</span></span>  
  
- <span data-ttu-id="d2ee2-155"><xref:System.ServiceModel.ConcurrencyMode.Multiple>: Każde wystąpienie usługi może mieć wiele wątków przetwarzania wiadomości jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-155"><xref:System.ServiceModel.ConcurrencyMode.Multiple>: Each service instance can have multiple threads processing messages concurrently.</span></span> <span data-ttu-id="d2ee2-156">Implementacja usługi musi być bezpieczna dla wątków, aby używać tego trybu współbieżności.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-156">The service implementation must be thread-safe to use this concurrency mode.</span></span>  
  
- <span data-ttu-id="d2ee2-157"><xref:System.ServiceModel.ConcurrencyMode.Reentrant>: Każde wystąpienie usługi przetwarza po jednej wiadomości naraz, ale akceptuje ponowne wniesienie połączeń operacyjnych.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-157"><xref:System.ServiceModel.ConcurrencyMode.Reentrant>: Each service instance processes one message at a time, but accepts re-entrant operation calls.</span></span> <span data-ttu-id="d2ee2-158">Usługa akceptuje tylko te wywołania, gdy jest wywoływanie za pośrednictwem obiektu klienta WCF.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-158">The service only accepts these calls when it is calling out through a WCF client object.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="d2ee2-159">Zrozumienie i tworzenie kodu, który bezpiecznie używa więcej niż jednego wątku może być trudne do zapisania pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-159">Understanding and developing code that safely uses more than one thread can be difficult to write successfully.</span></span> <span data-ttu-id="d2ee2-160">Przed <xref:System.ServiceModel.ConcurrencyMode.Multiple> użyciem lub <xref:System.ServiceModel.ConcurrencyMode.Reentrant> wartości, upewnij się, że usługa jest prawidłowo zaprojektowany dla tych trybów.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-160">Before using <xref:System.ServiceModel.ConcurrencyMode.Multiple> or <xref:System.ServiceModel.ConcurrencyMode.Reentrant> values, ensure that your service is properly designed for these modes.</span></span> <span data-ttu-id="d2ee2-161">Aby uzyskać więcej informacji, zobacz <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-161">For more information, see <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A>.</span></span>  
  
 <span data-ttu-id="d2ee2-162">Użycie współbieżności jest związane z trybem instancing.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-162">The use of concurrency is related to the instancing mode.</span></span> <span data-ttu-id="d2ee2-163">W <xref:System.ServiceModel.InstanceContextMode.PerCall> instancing współbieżność nie jest istotne, ponieważ każda wiadomość <xref:System.ServiceModel.InstanceContext> jest przetwarzana przez nowy i dlatego <xref:System.ServiceModel.InstanceContext>nigdy więcej niż jeden wątek jest aktywny w .</span><span class="sxs-lookup"><span data-stu-id="d2ee2-163">In <xref:System.ServiceModel.InstanceContextMode.PerCall> instancing, concurrency is not relevant, because each message is processed by a new <xref:System.ServiceModel.InstanceContext> and, therefore, never more than one thread is active in the <xref:System.ServiceModel.InstanceContext>.</span></span>  
  
 <span data-ttu-id="d2ee2-164">Poniższy przykład kodu pokazuje <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> ustawienie <xref:System.ServiceModel.ConcurrencyMode.Multiple>właściwości na .</span><span class="sxs-lookup"><span data-stu-id="d2ee2-164">The following code example demonstrates setting the <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> property to <xref:System.ServiceModel.ConcurrencyMode.Multiple>.</span></span>  
  
```csharp
[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.Single)]
public class CalculatorService : ICalculatorConcurrency
{
    ...  
}  
```  
  
## <a name="sessions-interact-with-instancecontext-settings"></a><span data-ttu-id="d2ee2-165">Sesje współdziałają z ustawieniami intertekstu wystąpienia</span><span class="sxs-lookup"><span data-stu-id="d2ee2-165">Sessions Interact with InstanceContext Settings</span></span>  
 <span data-ttu-id="d2ee2-166">Sesje <xref:System.ServiceModel.InstanceContext> i interakcji w zależności od <xref:System.ServiceModel.SessionMode> kombinacji wartości wyliczenia <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> w umowie i właściwości na implementacji usługi, która kontroluje skojarzenie między kanałami i określonych obiektów usługi.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-166">Sessions and <xref:System.ServiceModel.InstanceContext> interact depending upon the combination of the value of the <xref:System.ServiceModel.SessionMode> enumeration in a contract and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property on the service implementation, which controls the association between channels and specific service objects.</span></span>  
  
 <span data-ttu-id="d2ee2-167">W poniższej tabeli przedstawiono wynik kanału przychodzącego obsługującego sesje lub nie obsługujące <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> sesji, <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> biorąc pod uwagę kombinację wartości właściwości i właściwości usługi.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-167">The following table shows the result of an incoming channel either supporting sessions or not supporting sessions given a service's combination of the values of the <xref:System.ServiceModel.ServiceContractAttribute.SessionMode%2A?displayProperty=nameWithType> property and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A?displayProperty=nameWithType> property.</span></span>  
  
|<span data-ttu-id="d2ee2-168">Wartość InstanceContextMode</span><span class="sxs-lookup"><span data-stu-id="d2ee2-168">InstanceContextMode value</span></span>|<xref:System.ServiceModel.SessionMode.Required>|<xref:System.ServiceModel.SessionMode.Allowed>|<xref:System.ServiceModel.SessionMode.NotAllowed>|  
|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------|  
|<span data-ttu-id="d2ee2-169">Percall</span><span class="sxs-lookup"><span data-stu-id="d2ee2-169">PerCall</span></span>|<span data-ttu-id="d2ee2-170">- Zachowanie z kanałem sesji: Sesja i <xref:System.ServiceModel.InstanceContext> dla każdego połączenia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-170">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each call.</span></span><br /><span data-ttu-id="d2ee2-171">- Zachowanie z kanału bez sesji: wyjątek jest generowany.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-171">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="d2ee2-172">- Zachowanie z kanałem sesji: Sesja i <xref:System.ServiceModel.InstanceContext> dla każdego połączenia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-172">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each call.</span></span><br /><span data-ttu-id="d2ee2-173">- Zachowanie z kanału <xref:System.ServiceModel.InstanceContext> bez sesji: Dla każdego połączenia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-173">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|<span data-ttu-id="d2ee2-174">- Zachowanie z kanału sesji: wyjątek jest generowany.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-174">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="d2ee2-175">- Zachowanie z kanału <xref:System.ServiceModel.InstanceContext> bez sesji: Dla każdego połączenia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-175">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|  
|<span data-ttu-id="d2ee2-176">Persession</span><span class="sxs-lookup"><span data-stu-id="d2ee2-176">PerSession</span></span>|<span data-ttu-id="d2ee2-177">- Zachowanie z kanałem sesji: Sesja i <xref:System.ServiceModel.InstanceContext> dla każdego kanału.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-177">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each channel.</span></span><br /><span data-ttu-id="d2ee2-178">- Zachowanie z kanału bez sesji: wyjątek jest generowany.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-178">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="d2ee2-179">- Zachowanie z kanałem sesji: Sesja i <xref:System.ServiceModel.InstanceContext> dla każdego kanału.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-179">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for each channel.</span></span><br /><span data-ttu-id="d2ee2-180">- Zachowanie z kanału <xref:System.ServiceModel.InstanceContext> bez sesji: Dla każdego połączenia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-180">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|<span data-ttu-id="d2ee2-181">- Zachowanie z kanału sesji: wyjątek jest generowany.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-181">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="d2ee2-182">- Zachowanie z kanału <xref:System.ServiceModel.InstanceContext> bez sesji: Dla każdego połączenia.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-182">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each call.</span></span>|  
|<span data-ttu-id="d2ee2-183">Single</span><span class="sxs-lookup"><span data-stu-id="d2ee2-183">Single</span></span>|<span data-ttu-id="d2ee2-184">- Zachowanie z kanałem sesji: <xref:System.ServiceModel.InstanceContext> Sesja i jeden dla wszystkich połączeń.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-184">-   Behavior with sessionful channel: A session and one <xref:System.ServiceModel.InstanceContext> for all calls.</span></span><br /><span data-ttu-id="d2ee2-185">- Zachowanie z kanału bez sesji: wyjątek jest generowany.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-185">-   Behavior with sessionless channel: An exception is thrown.</span></span>|<span data-ttu-id="d2ee2-186">- Zachowanie z kanałem sesji: Sesja i <xref:System.ServiceModel.InstanceContext> dla utworzonego lub określonego przez użytkownika singleton.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-186">-   Behavior with sessionful channel: A session and <xref:System.ServiceModel.InstanceContext> for the created or user-specified singleton.</span></span><br /><span data-ttu-id="d2ee2-187">- Zachowanie z kanału <xref:System.ServiceModel.InstanceContext> bez sesji: dla utworzonego lub określonego przez użytkownika singleton.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-187">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for the created or user-specified singleton.</span></span>|<span data-ttu-id="d2ee2-188">- Zachowanie z kanału sesji: wyjątek jest generowany.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-188">-   Behavior with sessionful channel: An exception is thrown.</span></span><br /><span data-ttu-id="d2ee2-189">- Zachowanie z kanału <xref:System.ServiceModel.InstanceContext> bez sesji: dla każdego utworzonego singleton lub dla użytkownika określonego singleton.</span><span class="sxs-lookup"><span data-stu-id="d2ee2-189">-   Behavior with sessionless channel: An <xref:System.ServiceModel.InstanceContext> for each created singleton or for the user-specified singleton.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="d2ee2-190">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="d2ee2-190">See also</span></span>

- [<span data-ttu-id="d2ee2-191">Korzystanie z sesji</span><span class="sxs-lookup"><span data-stu-id="d2ee2-191">Using Sessions</span></span>](../../../../docs/framework/wcf/using-sessions.md)
- [<span data-ttu-id="d2ee2-192">Instrukcje: tworzenie usługi wymagającej użycia sesji</span><span class="sxs-lookup"><span data-stu-id="d2ee2-192">How to: Create a Service That Requires Sessions</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-service-that-requires-sessions.md)
- [<span data-ttu-id="d2ee2-193">Instrukcje: tworzenie wystąpienia usługi kontroli</span><span class="sxs-lookup"><span data-stu-id="d2ee2-193">How to: Control Service Instancing</span></span>](../../../../docs/framework/wcf/feature-details/how-to-control-service-instancing.md)
- [<span data-ttu-id="d2ee2-194">Współbieżność</span><span class="sxs-lookup"><span data-stu-id="d2ee2-194">Concurrency</span></span>](../../../../docs/framework/wcf/samples/concurrency.md)
- [<span data-ttu-id="d2ee2-195">Tworzenie wystąpienia</span><span class="sxs-lookup"><span data-stu-id="d2ee2-195">Instancing</span></span>](../../../../docs/framework/wcf/samples/instancing.md)
- [<span data-ttu-id="d2ee2-196">Sesja</span><span class="sxs-lookup"><span data-stu-id="d2ee2-196">Session</span></span>](../../../../docs/framework/wcf/samples/session.md)
