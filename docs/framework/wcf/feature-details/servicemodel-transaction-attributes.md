---
title: Atrybuty transakcji elementu ServiceModel
ms.date: 03/30/2017
helpviewer_keywords:
- transactions [WCF], ServiceModel attributes
ms.assetid: 1e0d2436-6ae5-439b-9765-a448d6f60000
ms.openlocfilehash: d4b7482431404241577111d8dd3841319b65696e
ms.sourcegitcommit: d6e27023aeaffc4b5a3cb4b88685018d6284ada4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/09/2019
ms.locfileid: "67663697"
---
# <a name="servicemodel-transaction-attributes"></a><span data-ttu-id="f4ac3-102">Atrybuty transakcji elementu ServiceModel</span><span class="sxs-lookup"><span data-stu-id="f4ac3-102">ServiceModel Transaction Attributes</span></span>

<span data-ttu-id="f4ac3-103">Windows Communication Foundation (WCF) udostępnia właściwości na trzech standardowych <xref:System.ServiceModel> atrybutów, które umożliwiają skonfigurowanie zachowanie transakcji usługi WCF:</span><span class="sxs-lookup"><span data-stu-id="f4ac3-103">Windows Communication Foundation (WCF) provides properties on three standard <xref:System.ServiceModel> attributes that enable you to configure the behavior of transactions for a WCF service:</span></span>

- <xref:System.ServiceModel.TransactionFlowAttribute>

- <xref:System.ServiceModel.ServiceBehaviorAttribute>

- <xref:System.ServiceModel.OperationBehaviorAttribute>

## <a name="transactionflowattribute"></a><span data-ttu-id="f4ac3-104">TransactionFlowAttribute</span><span class="sxs-lookup"><span data-stu-id="f4ac3-104">TransactionFlowAttribute</span></span>

<span data-ttu-id="f4ac3-105"><xref:System.ServiceModel.TransactionFlowAttribute> Atrybut określa gotowość operacji kontraktu usługi do akceptowania przychodzących transakcji od klienta.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-105">The <xref:System.ServiceModel.TransactionFlowAttribute> attribute specifies the willingness of an operation in a service contract to accept incoming transactions from a client.</span></span> <span data-ttu-id="f4ac3-106">Ten atrybut zawiera tę kontrolkę z następującymi właściwościami: Użyj transakcji <xref:System.ServiceModel.TransactionFlowOption> wyliczeniu, aby określić, czy transakcja przychodzących jest <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, lub <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-106">The attribute provides this control with the following property: Transactions use the <xref:System.ServiceModel.TransactionFlowOption> enumeration to specify whether an incoming transaction is <xref:System.ServiceModel.TransactionFlowOption.Mandatory>, <xref:System.ServiceModel.TransactionFlowOption.Allowed>, or <xref:System.ServiceModel.TransactionFlowOption.NotAllowed>.</span></span>

<span data-ttu-id="f4ac3-107">Jest to jedyny atrybut, które odnoszą się operacji usługi do zewnętrznego interakcji z klientem.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-107">This is the only attribute that relates service operations to external interactions with a client.</span></span> <span data-ttu-id="f4ac3-108">Atrybutów opisanych w poniższych sekcjach odnoszą się do korzystania z transakcji w ramach wykonywania operacji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-108">The attributes described in the following sections relate to the use of transactions within the execution of the operation.</span></span>

## <a name="servicebehaviorattribute"></a><span data-ttu-id="f4ac3-109">ServiceBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="f4ac3-109">ServiceBehaviorAttribute</span></span>

<span data-ttu-id="f4ac3-110"><xref:System.ServiceModel.ServiceBehaviorAttribute> Atrybut określa zachowanie wykonywania wewnętrznej implementacji kontraktu usługi.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-110">The <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute specifies the internal execution behavior of a service contract implementation.</span></span> <span data-ttu-id="f4ac3-111">Właściwości specyficzne dla transakcji tego atrybutu to:</span><span class="sxs-lookup"><span data-stu-id="f4ac3-111">Transaction-specific properties of this attribute include:</span></span>

- <span data-ttu-id="f4ac3-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> Określa, czy do ukończenia niedokończonej transakcji po zamknięciu sesji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-112"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> specifies whether to complete an uncompleted transaction when the session closes.</span></span> <span data-ttu-id="f4ac3-113">Wartość domyślna tej właściwości to `false`.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-113">The default value for this property is `false`.</span></span> <span data-ttu-id="f4ac3-114">Jeśli ta właściwość jest `true`i Przychodząca sesja została zostanie poprawnie zamknięte zamiast zamykania, ze względu na klienta lub sieci, błędy, pomyślnym zakończeniu dowolnej niewykonanej transakcji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-114">If this property is `true`, and the incoming session was gracefully shut down instead of closing due to network or client faults, any uncompleted transaction is successfully completed.</span></span> <span data-ttu-id="f4ac3-115">W przeciwnym razie, jeśli ta właściwość jest `false` lub jeśli sesja nie została zamknięta bez problemu zmieniała, dowolnej niewykonanej transakcji jest wycofywany, a po zamknięciu sesji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-115">Otherwise, if this property is `false` or if the session was not gracefully closed, any uncompleted transaction is rolled back when the session closes.</span></span> <span data-ttu-id="f4ac3-116">Jeśli ta właściwość jest `true`, kanałów przychodzących muszą być oparte na sesji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-116">If this property is `true`, the incoming channel must be session-based.</span></span>

- <span data-ttu-id="f4ac3-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> Określa, czy podstawowe wystąpienie usługi jest wydane po zakończeniu transakcji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-117"><xref:System.ServiceModel.ServiceBehaviorAttribute.ReleaseServiceInstanceOnTransactionComplete%2A> specifies whether the underlying service instance is released when a transaction completes.</span></span> <span data-ttu-id="f4ac3-118">Wartość domyślna tej właściwości to `true`.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-118">The default value for this property is `true`.</span></span> <span data-ttu-id="f4ac3-119">Następny komunikat przychodzący powoduje, że nowe wystąpienie bazowego ma zostać utworzony, odrzucając stan każdej transakcji, który mogą być przechowywane poprzednie wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-119">The next inbound message causes a new underlying instance to be created, discarding any per-transaction state that the previous instance might have held.</span></span> <span data-ttu-id="f4ac3-120">Zwalnianie wystąpienie usługi jest akcję wewnętrzną usługę przyjmuje i nie ma wpływu na istniejące połączenia ani sesje, które klienci mogą utworzone.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-120">Releasing a service instance is an internal action the service takes and has no impact on any existing connections or sessions that clients might have established.</span></span> <span data-ttu-id="f4ac3-121">Ta funkcja jest odpowiednikiem funkcji aktywacji just-in-time, udostępnia modelu COM +.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-121">This functionality is equivalent to the just-in-time activation feature COM+ provides.</span></span> <span data-ttu-id="f4ac3-122">Jeśli właściwość jest `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> musi być równa <xref:System.ServiceModel.ConcurrencyMode.Single>.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-122">If the property is `true`, <xref:System.ServiceModel.ServiceBehaviorAttribute.ConcurrencyMode%2A> must be equal to <xref:System.ServiceModel.ConcurrencyMode.Single>.</span></span> <span data-ttu-id="f4ac3-123">W przeciwnym razie usługa zgłasza wyjątek nieprawidłowa konfiguracja sprawdzania poprawności podczas uruchamiania.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-123">Otherwise, the service throws an invalid configuration validation exception during startup.</span></span>

- <span data-ttu-id="f4ac3-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> Określa poziom izolacji dla transakcji w ramach usługi; Ta właściwość ma jedną z <xref:System.Transactions.IsolationLevel> wartości.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-124"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionIsolationLevel%2A> specifies the isolation level to use for transactions within the service; this property takes one of the <xref:System.Transactions.IsolationLevel> values.</span></span> <span data-ttu-id="f4ac3-125">Jeśli jest coś innego niż właściwość poziomu izolacji lokalnego <xref:System.Transactions.IsolationLevel.Unspecified>, poziom izolacji transakcji przychodzących musi odpowiadać ustawienie tej właściwości lokalnej.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-125">If the local isolation level property is anything other than <xref:System.Transactions.IsolationLevel.Unspecified>, the isolation level of an incoming transaction must match the setting of this local property.</span></span> <span data-ttu-id="f4ac3-126">W przeciwnym razie transakcji jest odrzucana i błędów są wysyłane z powrotem do klienta.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-126">Otherwise, the incoming transaction is rejected, and a fault is sent back to the client.</span></span> <span data-ttu-id="f4ac3-127">Jeśli <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> jest `true`, i braku transakcji jest przepływ, ta właściwość określa <xref:System.Transactions.IsolationLevel> wartość używaną dla transakcji utworzone lokalnie.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-127">If <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> is `true`, and no transaction is flowed, this property determines the <xref:System.Transactions.IsolationLevel> value to use for the locally created transaction.</span></span> <span data-ttu-id="f4ac3-128">Jeśli <xref:System.Transactions.IsolationLevel> ustawiono <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel> <xref:System.Transactions.IsolationLevel.Serializable> jest używany.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-128">If <xref:System.Transactions.IsolationLevel> is set to <xref:System.Transactions.IsolationLevel.Unspecified>, <xref:System.Transactions.IsolationLevel><xref:System.Transactions.IsolationLevel.Serializable> is used.</span></span>

- <span data-ttu-id="f4ac3-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> Określa okres czasu, w którym należy wykonać nową transakcję utworzono usługę.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-129"><xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> specifies the time period within which a new transaction created at the service must complete.</span></span> <span data-ttu-id="f4ac3-130">Jeśli ten czas, a transakcja nie została zakończona, zostanie przerwany.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-130">If this time is reached and the transaction has not been completed, it will abort.</span></span> <span data-ttu-id="f4ac3-131"><xref:System.TimeSpan> Służy jako <xref:System.Transactions.TransactionScope> limitu czasu dla wszystkich operacji, które mają <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> równa `true` i dla którego utworzono nową transakcję.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-131">The <xref:System.TimeSpan> is used as the <xref:System.Transactions.TransactionScope> time-out for any operations that have <xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> set to `true` and for which a new transaction was created.</span></span> <span data-ttu-id="f4ac3-132">Limit czasu jest maksymalny dozwolony czas trwania od utworzenia transakcji do wykonania fazy 1 w dwufazowy protokół zatwierdzania.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-132">The time-out is the maximum allowed duration from the creation of the transaction to the completion of phase 1 in the two-phase commit protocol.</span></span> <span data-ttu-id="f4ac3-133">Wartość limitu czasu, używana jest zawsze niższą wartość między <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> właściwości i `transactionTimeout` ustawienia konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-133">The time-out value used is always the lower value between the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionTimeout%2A> property and the `transactionTimeout` configuration setting.</span></span>

## <a name="operationbehaviorattribute"></a><span data-ttu-id="f4ac3-134">OperationBehaviorAttribute</span><span class="sxs-lookup"><span data-stu-id="f4ac3-134">OperationBehaviorAttribute</span></span>

<span data-ttu-id="f4ac3-135"><xref:System.ServiceModel.OperationBehaviorAttribute> Atrybut określa rodzajami zachowań tych metod w implementacji usługi.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-135">The <xref:System.ServiceModel.OperationBehaviorAttribute> attribute specifies the behaviors of the methods in the service implementation.</span></span> <span data-ttu-id="f4ac3-136">Służy do wskazania zachowanie wykonywania określonych operacji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-136">You can use it to indicate the operation's specific execution behavior.</span></span> <span data-ttu-id="f4ac3-137">Właściwości tego atrybutu nie ma wpływu na opis kontraktu usługi Web Service Description Language (WSDL) i są wyłącznie te elementy modelu programowania usługi WCF, które włączają typowe funkcje, w przeciwnym razie deweloperzy muszą implementować samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-137">Properties of this attribute do not affect the Web Service Description Language (WSDL) description of the service contract, and are purely elements of the WCF programming model that enable common features that developers otherwise have to implement themselves.</span></span>

<span data-ttu-id="f4ac3-138">Ten atrybut ma następujące właściwości specyficzne dla transakcji:</span><span class="sxs-lookup"><span data-stu-id="f4ac3-138">This attribute has the following transaction-specific properties:</span></span>

- <span data-ttu-id="f4ac3-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> Określa, czy metoda muszą być wykonywane w zakresie aktywnej transakcji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-139"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionScopeRequired%2A> specifies whether a method must execute within an active transaction scope.</span></span> <span data-ttu-id="f4ac3-140">Wartość domyślna to `false`.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-140">The default is `false`.</span></span> <span data-ttu-id="f4ac3-141">Jeśli <xref:System.ServiceModel.OperationBehaviorAttribute> atrybut nie jest ustawiony dla metody, również oznacza, że metody nie będą wykonywane w ramach transakcji.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-141">If the <xref:System.ServiceModel.OperationBehaviorAttribute> attribute is not set for a method, it also implies that the method will not execute in a transaction.</span></span> <span data-ttu-id="f4ac3-142">Jeśli zakres transakcji nie jest wymagane dla danej operacji, każdą transakcję, która znajduje się w nagłówku komunikatu nie została aktywowana i pozostaje jako element <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> z <xref:System.ServiceModel.OperationContext>.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-142">If a transaction scope is not required for an operation, any transaction that is present within the message header is not activated and remains as an element of the <xref:System.ServiceModel.OperationContext.IncomingMessageProperties%2A> of the <xref:System.ServiceModel.OperationContext>.</span></span> <span data-ttu-id="f4ac3-143">Jeśli zakres transakcji jest wymagane dla danej operacji, źródła dla transakcji jest tworzony na podstawie jednej z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="f4ac3-143">If a transaction scope is required for an operation, the source for the transaction is derived from one of the following:</span></span>

  - <span data-ttu-id="f4ac3-144">Jeśli transakcja jest przekazane przez klienta, metoda jest wykonywana w ramach zakresu transakcji utworzone za pomocą tej transakcji rozproszonej.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-144">If a transaction is flowed from the client, the method is executed under a transaction scope created using that distributed transaction.</span></span>

  - <span data-ttu-id="f4ac3-145">Za pomocą transportu umieszczonych w kolejce transakcji, używane do usuwania z kolejki wiadomości jest używany.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-145">With a queued transport, the transaction used to dequeue the message is used.</span></span> <span data-ttu-id="f4ac3-146">Należy zauważyć, że używane w transakcji nie jest przesłanej transakcji, w tym, że nie został dostarczony przez oryginalnego nadawcy wiadomości.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-146">Note that the transaction used is not a flowed transaction, in that it was not provided by the original sender of the message.</span></span>

  - <span data-ttu-id="f4ac3-147">Niestandardowe transportu może zapewnić transakcji za pośrednictwem `TransportTransactionProperty`.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-147">A custom transport can provide a transaction through the use of the `TransportTransactionProperty`.</span></span>

  - <span data-ttu-id="f4ac3-148">Jeśli żadne z powyższych udostępnia zewnętrznego źródła dla transakcji to nowy <xref:System.Transactions.Transaction> tworzone jest wystąpienie bezpośrednio przed wywołaniem metody.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-148">If none of the above provides an external source for a transaction, a new <xref:System.Transactions.Transaction> instance is created immediately prior to calling the method.</span></span>

- <span data-ttu-id="f4ac3-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> Określa, czy transakcji, w którym metoda jest wykonywana jest wprowadzana automatycznie, jeśli nie nieobsłużone wyjątki są zgłaszane.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-149"><xref:System.ServiceModel.OperationBehaviorAttribute.TransactionAutoComplete%2A> specifies whether the transaction in which the method executes is automatically completed if no unhandled exceptions are thrown.</span></span> <span data-ttu-id="f4ac3-150">Jeśli ta właściwość jest `true`, wywoływania infrastruktury automatycznie oznacza transakcji jako "ukończone", jeśli metoda użytkownika jest zwracane bez zostanie zgłoszony wyjątek.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-150">If this property is `true`, the calling infrastructure automatically marks the transaction as "completed" if the user method returns without throwing an exception.</span></span> <span data-ttu-id="f4ac3-151">Jeśli ta właściwość jest `false`, transakcja jest dołączony do wystąpienia, a tylko jest oznaczony jako "ukończone", jeśli klient wywołuje kolejnych metodę, która jest oznaczona za pomocą tej właściwości równa `true`, czy metoda kolejnych wywołań jawnie <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-151">If this property is `false`, the transaction is attached to the instance, and is only marked as "completed" if the client calls a subsequent method that is marked with this property equal to `true`, or if a subsequent method explicitly calls <xref:System.ServiceModel.OperationContext.SetTransactionComplete%2A>.</span></span> <span data-ttu-id="f4ac3-152">Nie można wykonać jedną z tych wersji wyniki w transakcji, nigdy nie jest "ukończone", a zawarte pracy nie zostanie zatwierdzony, chyba że <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> właściwość jest ustawiona na `true`.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-152">Failure to perform either of these results in the transaction never being "completed," and the contained work is not committed, unless the <xref:System.ServiceModel.ServiceBehaviorAttribute.TransactionAutoCompleteOnSessionClose%2A> property is set to `true`.</span></span> <span data-ttu-id="f4ac3-153">Jeśli ta właściwość jest ustawiona `true`, należy użyć kanału w sesji i <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> musi być równa <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span><span class="sxs-lookup"><span data-stu-id="f4ac3-153">If this property is set to `true`, you must use a channel with a session, and the <xref:System.ServiceModel.ServiceBehaviorAttribute.InstanceContextMode%2A> must be set to <xref:System.ServiceModel.InstanceContextMode.PerSession>.</span></span>
