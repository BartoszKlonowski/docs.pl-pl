---
title: Ujawnianie informacji
ms.date: 03/30/2017
ms.assetid: 4064c89f-afa6-444a-aa7e-807ef072131c
ms.openlocfilehash: 0e45a71855ecb172f36aae8139f89d4b8c8ffd0d
ms.sourcegitcommit: 9b1ac36b6c80176fd4e20eb5bfcbd9d56c3264cf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/28/2019
ms.locfileid: "67425310"
---
# <a name="information-disclosure"></a><span data-ttu-id="26d0f-102">Ujawnianie informacji</span><span class="sxs-lookup"><span data-stu-id="26d0f-102">Information Disclosure</span></span>

<span data-ttu-id="26d0f-103">Ujawnienie informacji umożliwia osobie atakującej uzyskanie cenne informacje o systemie.</span><span class="sxs-lookup"><span data-stu-id="26d0f-103">Information disclosure enables an attacker to gain valuable information about a system.</span></span> <span data-ttu-id="26d0f-104">W związku z tym zawsze należy wziąć pod uwagę jakie informacje są przedstawiania i czy mogą być używane przez złośliwego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="26d0f-104">Therefore, always consider what information you are revealing and whether it can be used by a malicious user.</span></span> <span data-ttu-id="26d0f-105">Poniżej wymieniono ataków ujawnienie informacji możliwych i zapewnia środki zaradcze dla każdego.</span><span class="sxs-lookup"><span data-stu-id="26d0f-105">The following lists possible information disclosure attacks and provides mitigations for each.</span></span>

## <a name="message-security-and-http"></a><span data-ttu-id="26d0f-106">Zabezpieczenia komunikatów i HTTP</span><span class="sxs-lookup"><span data-stu-id="26d0f-106">Message Security and HTTP</span></span>

<span data-ttu-id="26d0f-107">Jeśli używane są zabezpieczenia na poziomie komunikatu za pośrednictwem warstwy transportu HTTP, należy pamiętać, zabezpieczenia na poziomie komunikatu nie chroni nagłówków HTTP.</span><span class="sxs-lookup"><span data-stu-id="26d0f-107">If you are using message-level security over an HTTP transport layer, be aware that message-level security does not protect HTTP headers.</span></span> <span data-ttu-id="26d0f-108">Jedynym sposobem, aby chronić nagłówków HTTP jest użyj transportu HTTPS zamiast protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="26d0f-108">The only way to protect HTTP headers is to use HTTPS transport instead of HTTP.</span></span> <span data-ttu-id="26d0f-109">Transportu HTTPS powoduje, że cały komunikat, włącznie z nagłówkami HTTP, na szyfrowanie przy użyciu protokołu Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="26d0f-109">HTTPS transport causes the entire message, including the HTTP headers, to be encrypted using the Secure Sockets Layer (SSL) protocol.</span></span>

## <a name="policy-information"></a><span data-ttu-id="26d0f-110">Informacje o zasadach</span><span class="sxs-lookup"><span data-stu-id="26d0f-110">Policy Information</span></span>

<span data-ttu-id="26d0f-111">Zapewnienie bezpieczeństwa zasad jest ważne, szczególnie w scenariuszach Federacji, gdzie poufnych wymagania tokenu wystawionego lub informacji Wystawca tokenu jest uwidaczniany w zasadach.</span><span class="sxs-lookup"><span data-stu-id="26d0f-111">Keeping policy secure is important, especially in federation scenarios where sensitive issued-token requirements or token-issuer information is exposed in policy.</span></span> <span data-ttu-id="26d0f-112">W takich przypadkach zaleca się bezpieczny punkt końcowy zasad usługi federacyjnej, aby uniemożliwić osobom atakującym uzyskania informacji na temat usługi, takie jak typ oświadczenia, które należy umieścić w wystawiony token lub przekierowywania klientów do złośliwego wystawcy tokenów.</span><span class="sxs-lookup"><span data-stu-id="26d0f-112">In these cases, the recommendation is to secure the federated service's policy endpoint to prevent attackers from obtaining information about the service, such as the type of claims to put in the issued token, or redirecting clients to malicious token issuers.</span></span> <span data-ttu-id="26d0f-113">Na przykład osoba atakująca można wykryć pary nazwa/hasło użytkownika przez ponowne skonfigurowanie łańcuch zaufania federacyjnego można zakończyć w wystawcę wykonywanego atak typu man-in--middle.</span><span class="sxs-lookup"><span data-stu-id="26d0f-113">For example, an attacker could discover user name/password pairs by reconfiguring the federated trust chain to terminate in an issuer that executed a man-in-the-middle attack.</span></span> <span data-ttu-id="26d0f-114">Zalecane jest również federacyjnego klienci, którzy uzyskać ich powiązania za pomocą pobierania zasad Sprawdź, zaufanych wystawców w łańcuchu uzyskanej zaufania federacyjnego.</span><span class="sxs-lookup"><span data-stu-id="26d0f-114">It is also recommended that federated clients who obtain their bindings through policy retrieval verify that they trust the issuers in the obtained federated trust chain.</span></span> <span data-ttu-id="26d0f-115">Aby uzyskać więcej informacji o scenariuszach Federacji, zobacz [Federacji](../../../../docs/framework/wcf/feature-details/federation.md).</span><span class="sxs-lookup"><span data-stu-id="26d0f-115">For more information about federation scenarios, see [Federation](../../../../docs/framework/wcf/feature-details/federation.md).</span></span>

## <a name="memory-dumps-can-reveal-claim-information"></a><span data-ttu-id="26d0f-116">Zrzuty pamięci może ujawnić informacje o</span><span class="sxs-lookup"><span data-stu-id="26d0f-116">Memory Dumps Can Reveal Claim Information</span></span>

<span data-ttu-id="26d0f-117">Gdy aplikacja zakończy się niepowodzeniem, pliki dzienników, takich jak te utworzone przez odzyskiwania po awarii. Watson, mogą zawierać informacje oświadczenia.</span><span class="sxs-lookup"><span data-stu-id="26d0f-117">When an application fails, log files, such as those produced by Dr. Watson, can contain the claim information.</span></span> <span data-ttu-id="26d0f-118">Te informacje nie powinny być eksportowany do innych jednostek, takich jak zespoły pomocy technicznej; w przeciwnym razie eksportowane są również informacje oświadczenia, które zawiera dane prywatne.</span><span class="sxs-lookup"><span data-stu-id="26d0f-118">This information should not be exported to other entities, such as support teams; otherwise, the claim information that contains private data is also exported.</span></span> <span data-ttu-id="26d0f-119">Można temu zaradzić przez nie wysyłają pliki dziennika na nieznany jednostki.</span><span class="sxs-lookup"><span data-stu-id="26d0f-119">You can mitigate this by not sending the log files to unknown entities.</span></span> <span data-ttu-id="26d0f-120">Aby uzyskać więcej informacji, zobacz [systemu Windows Server 2003](https://go.microsoft.com/fwlink/?LinkId=89160).</span><span class="sxs-lookup"><span data-stu-id="26d0f-120">For more information, see [Windows Server 2003](https://go.microsoft.com/fwlink/?LinkId=89160).</span></span>

## <a name="endpoint-addresses"></a><span data-ttu-id="26d0f-121">Adresy punktów końcowych</span><span class="sxs-lookup"><span data-stu-id="26d0f-121">Endpoint Addresses</span></span>

<span data-ttu-id="26d0f-122">Adres punktu końcowego zawiera informacje potrzebne do komunikowania się z punktem końcowym.</span><span class="sxs-lookup"><span data-stu-id="26d0f-122">An endpoint address contains the information needed to communicate with an endpoint.</span></span> <span data-ttu-id="26d0f-123">Protokołu SOAP zabezpieczeń musi zawierać adres w całości w wiadomości negocjacji zabezpieczeń, które są wymieniane w celu negocjowania klucz symetryczny między klientem a serwerem.</span><span class="sxs-lookup"><span data-stu-id="26d0f-123">SOAP security must include the address in full in the security negotiation messages that are exchanged in order to negotiate a symmetric key between a client and a server.</span></span> <span data-ttu-id="26d0f-124">Ponieważ negocjowanie zabezpieczeń ładowania początkowego procesu, nagłówki adresów nie mogą być szyfrowane w trakcie tego procesu.</span><span class="sxs-lookup"><span data-stu-id="26d0f-124">Because security negotiation is a bootstrap process, the address headers cannot be encrypted during this process.</span></span> <span data-ttu-id="26d0f-125">Dlatego adres nie powinna zawierać żadnych poufnych danych; w przeciwnym razie prowadzi do ataków ujawnienie informacji.</span><span class="sxs-lookup"><span data-stu-id="26d0f-125">Therefore, the address should not contain any confidential data; otherwise, it leads to information disclosure attacks.</span></span>

## <a name="certificates-transferred-unencrypted"></a><span data-ttu-id="26d0f-126">Niezaszyfrowane przesłanych certyfikatów</span><span class="sxs-lookup"><span data-stu-id="26d0f-126">Certificates Transferred Unencrypted</span></span>

<span data-ttu-id="26d0f-127">Gdy używasz certyfikatu X.509 do uwierzytelnienia klienta, certyfikat jest przesyłany w Wyczyść, wewnątrz nagłówek SOAP.</span><span class="sxs-lookup"><span data-stu-id="26d0f-127">When you use an X.509 certificate to authenticate a client, the certificate is transferred in the clear, inside the SOAP header.</span></span> <span data-ttu-id="26d0f-128">Należy pamiętać o tym jako potencjalne ujawnienie identyfikowalne dane osobowe (PII).</span><span class="sxs-lookup"><span data-stu-id="26d0f-128">Be aware of this as a potential personally identifiable information (PII) disclosure.</span></span> <span data-ttu-id="26d0f-129">To nie jest problemem w przypadku `TransportWithMessageCredential` tryb, w którym cały komunikat jest szyfrowana za pomocą zabezpieczeń na poziomie transportu.</span><span class="sxs-lookup"><span data-stu-id="26d0f-129">This is not an issue for `TransportWithMessageCredential` mode, where the entire message is encrypted with transport-level security.</span></span>

## <a name="service-references"></a><span data-ttu-id="26d0f-130">Odwołania do usług</span><span class="sxs-lookup"><span data-stu-id="26d0f-130">Service References</span></span>

<span data-ttu-id="26d0f-131">Odwołanie do usługi jest odwołaniem do innej usługi.</span><span class="sxs-lookup"><span data-stu-id="26d0f-131">A service reference is a reference to another service.</span></span> <span data-ttu-id="26d0f-132">Na przykład usługa może przekazać odwołanie do klienta w trakcie operacji usługi.</span><span class="sxs-lookup"><span data-stu-id="26d0f-132">For example, a service may pass a service reference to a client in the course of an operation.</span></span> <span data-ttu-id="26d0f-133">Odwołanie do usługi jest również używany z *zaufania weryfikatora tożsamości*, wewnętrznych składników, które gwarantuje, że tożsamość docelowego podmiotu zabezpieczeń przed ujawnieniu informacji takich jak dane aplikacji lub poświadczeń do docelowego.</span><span class="sxs-lookup"><span data-stu-id="26d0f-133">The service reference is also used with a *trust identity verifier*, an internal component that ensures the identity of the target principal before disclosing information such as application data or credentials to the target.</span></span> <span data-ttu-id="26d0f-134">Jeśli tożsamość zdalnego zaufania nie można zweryfikować lub jest nieprawidłowa, nadawca należy upewnić się, że żadne dane nie została ujawniona, które mogą negatywnie wpłynąć na, aplikacji lub użytkownika.</span><span class="sxs-lookup"><span data-stu-id="26d0f-134">If the remote trust identity cannot be verified or is incorrect, the sender should ensure that no data was disclosed that could compromise itself, the application, or the user.</span></span>

<span data-ttu-id="26d0f-135">Środki zaradcze są następujące:</span><span class="sxs-lookup"><span data-stu-id="26d0f-135">Mitigations include the following:</span></span>

- <span data-ttu-id="26d0f-136">Odwołania do usług są rozpatrywane godne zaufania.</span><span class="sxs-lookup"><span data-stu-id="26d0f-136">Service references are assumed to be trustworthy.</span></span> <span data-ttu-id="26d0f-137">Zajmujemy się zawsze wtedy, gdy transfer wystąpień odwołanie do usługi, aby upewnić się, że ich nie zostały naruszone.</span><span class="sxs-lookup"><span data-stu-id="26d0f-137">Take care whenever transferring service reference instances to ensure that they have not been tampered with.</span></span>

- <span data-ttu-id="26d0f-138">Niektóre aplikacje mogą prezentować interfejs użytkownika, który umożliwia interakcyjne ustanowienia relacji zaufania, na podstawie danych z danych referencyjnych i zaufania usługi sprawdzone przez hosta zdalnego.</span><span class="sxs-lookup"><span data-stu-id="26d0f-138">Some applications can present a user experience that allows interactive establishment of trust based on data in the service reference and trust data proven by the remote host.</span></span> <span data-ttu-id="26d0f-139">Usługi WCF udostępniają punkty rozszerzeń dla takiego obiektu, ale użytkownik musi zaimplementować je.</span><span class="sxs-lookup"><span data-stu-id="26d0f-139">WCF provides extensibility points for such a facility, but the user must implemented them.</span></span>

## <a name="ntlm"></a><span data-ttu-id="26d0f-140">NTLM</span><span class="sxs-lookup"><span data-stu-id="26d0f-140">NTLM</span></span>

<span data-ttu-id="26d0f-141">Domyślnie w środowisku domeny Windows uwierzytelniania Windows używa protokołu Kerberos do uwierzytelniania i autoryzacji użytkowników.</span><span class="sxs-lookup"><span data-stu-id="26d0f-141">By default, in the Windows domain environment, Windows authentication uses the Kerberos protocol to authenticate and authorize users.</span></span> <span data-ttu-id="26d0f-142">Jeśli nie można użyć protokołu Kerberos jakiegoś powodu, NT LAN Manager (NTLM) jest używany jako rezerwowe.</span><span class="sxs-lookup"><span data-stu-id="26d0f-142">If the Kerberos protocol cannot be used for some reason, NT LAN Manager (NTLM) is used as a fallback.</span></span> <span data-ttu-id="26d0f-143">To zachowanie można wyłączyć, ustawiając <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> właściwość `false`.</span><span class="sxs-lookup"><span data-stu-id="26d0f-143">You can disable this behavior by setting the <xref:System.ServiceModel.Security.WindowsClientCredential.AllowNtlm%2A> property to `false`.</span></span> <span data-ttu-id="26d0f-144">Problemy, które należy wiedzieć podczas umożliwiając NTLM obejmują:</span><span class="sxs-lookup"><span data-stu-id="26d0f-144">Issues to be aware of when allowing NTLM include:</span></span>

- <span data-ttu-id="26d0f-145">NTLM przedstawia nazwę użytkownika klienta.</span><span class="sxs-lookup"><span data-stu-id="26d0f-145">NTLM exposes the client user name.</span></span> <span data-ttu-id="26d0f-146">Jeśli nazwa użytkownika musi być poufny, wartość `AllowNTLM` właściwość wiązania `false`.</span><span class="sxs-lookup"><span data-stu-id="26d0f-146">If the user name needs to be kept confidential, then set the `AllowNTLM` property on the binding to `false`.</span></span>

- <span data-ttu-id="26d0f-147">Uwierzytelnianie NTLM nie zapewnia uwierzytelniania serwera.</span><span class="sxs-lookup"><span data-stu-id="26d0f-147">NTLM does not provide server authentication.</span></span> <span data-ttu-id="26d0f-148">W związku z tym klient nie upewnij się, że jego komunikuje się z odpowiednią usługę podczas uwierzytelniania NTLM jest używany jako protokół uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="26d0f-148">Therefore, the client cannot ensure that it is communicating with the right service when you use NTLM as an authentication protocol.</span></span>

### <a name="specifying-client-credentials-or-invalid-identity-forces-ntlm-usage"></a><span data-ttu-id="26d0f-149">Określanie poświadczeń klienta lub nieprawidłową tożsamość wymusza użycia uwierzytelniania NTLM</span><span class="sxs-lookup"><span data-stu-id="26d0f-149">Specifying Client Credentials or Invalid Identity Forces NTLM Usage</span></span>

<span data-ttu-id="26d0f-150">Podczas tworzenia klienta, określając poświadczeń klienta bez nazwy domeny lub określanie tożsamości nieprawidłowy serwer, powoduje, że NTLM, ma być używana zamiast protokołu Kerberos (Jeśli `AllowNtlm` właściwość jest ustawiona na `true`).</span><span class="sxs-lookup"><span data-stu-id="26d0f-150">When creating a client, specifying client credentials without a domain name, or specifying an invalid server identity, causes NTLM to be used instead of the Kerberos protocol (if the `AllowNtlm` property is set to `true`).</span></span> <span data-ttu-id="26d0f-151">Ponieważ NTLM nie wykonuje uwierzytelniania serwera, informacji o potencjalnie może ujawnić.</span><span class="sxs-lookup"><span data-stu-id="26d0f-151">Because  NTLM does not do server authentication, information can potentially be disclosed.</span></span>

<span data-ttu-id="26d0f-152">Na przykład jest możliwe określenie poświadczeń klienta Windows bez nazwy domeny, jak pokazano w poniższym kodzie języka Visual C#.</span><span class="sxs-lookup"><span data-stu-id="26d0f-152">For example, it is possible to specify Windows client credentials without a domain name, as shown in the following Visual C# code.</span></span>

```csharp
MyChannelFactory.Credentials.Windows.ClientCredential = new System.Net.NetworkCredential("username", "password");
```

<span data-ttu-id="26d0f-153">Kod nie określa nazwy domeny, a zatem będą używane uwierzytelnianie NTLM.</span><span class="sxs-lookup"><span data-stu-id="26d0f-153">The code does not specify a domain name, and therefore NTLM will be used.</span></span>

<span data-ttu-id="26d0f-154">Jeśli określono domenę, ale nieprawidłowa główna nazwa usługi jest określony za pomocą funkcji tożsamości punktu końcowego, NTLM jest używany.</span><span class="sxs-lookup"><span data-stu-id="26d0f-154">If the domain is specified, but an invalid service principal name is specified using the endpoint identity feature, then NTLM is used.</span></span> <span data-ttu-id="26d0f-155">Aby uzyskać więcej informacji na temat sposobu tożsamość punktu końcowego jest określona, zobacz [uwierzytelnianie i tożsamość usług](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="26d0f-155">For more information about how endpoint identity is specified, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="26d0f-156">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="26d0f-156">See also</span></span>

- [<span data-ttu-id="26d0f-157">Zagadnienia dotyczące bezpieczeństwa</span><span class="sxs-lookup"><span data-stu-id="26d0f-157">Security Considerations</span></span>](../../../../docs/framework/wcf/feature-details/security-considerations-in-wcf.md)
- [<span data-ttu-id="26d0f-158">Podniesienie uprawnień</span><span class="sxs-lookup"><span data-stu-id="26d0f-158">Elevation of Privilege</span></span>](../../../../docs/framework/wcf/feature-details/elevation-of-privilege.md)
- [<span data-ttu-id="26d0f-159">Odmowa usługi</span><span class="sxs-lookup"><span data-stu-id="26d0f-159">Denial of Service</span></span>](../../../../docs/framework/wcf/feature-details/denial-of-service.md)
- [<span data-ttu-id="26d0f-160">Manipulowanie</span><span class="sxs-lookup"><span data-stu-id="26d0f-160">Tampering</span></span>](../../../../docs/framework/wcf/feature-details/tampering.md)
- [<span data-ttu-id="26d0f-161">Nieobsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="26d0f-161">Unsupported Scenarios</span></span>](../../../../docs/framework/wcf/feature-details/unsupported-scenarios.md)
- [<span data-ttu-id="26d0f-162">Ataki oparte na metodzie powtórzeń</span><span class="sxs-lookup"><span data-stu-id="26d0f-162">Replay Attacks</span></span>](../../../../docs/framework/wcf/feature-details/replay-attacks.md)
