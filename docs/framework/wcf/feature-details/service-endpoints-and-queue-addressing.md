---
title: Punkty końcowe usługi i adresowanie kolejki
ms.date: 03/30/2017
ms.assetid: 7d2d59d7-f08b-44ed-bd31-913908b83d97
ms.openlocfilehash: fb74ba52c0f08d9e9976ddc8dd6d59037ec32e4b
ms.sourcegitcommit: 27a15a55019f6b5f2733961738babe94aec0def3
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/15/2020
ms.locfileid: "90546292"
---
# <a name="service-endpoints-and-queue-addressing"></a><span data-ttu-id="5f5d0-102">Punkty końcowe usługi i adresowanie kolejki</span><span class="sxs-lookup"><span data-stu-id="5f5d0-102">Service Endpoints and Queue Addressing</span></span>
<span data-ttu-id="5f5d0-103">W tym temacie omówiono sposób, w jaki klienci adresów odczytywać z kolejek i jak punkty końcowe usługi mapują na kolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-103">This topic discusses how clients address services that read from queues and how service endpoints map to queues.</span></span> <span data-ttu-id="5f5d0-104">Na poniższej ilustracji przedstawiono wdrożenie klasycznej aplikacji Windows Communication Foundation (WCF) w kolejce.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-104">As a reminder, the following illustration shows the classic Windows Communication Foundation (WCF) queued application deployment.</span></span>  
  
 <span data-ttu-id="5f5d0-105">![Diagram aplikacji znajdujących się w kolejce](media/distributed-queue-figure.jpg "Rozproszona-Queueed-Figure")</span><span class="sxs-lookup"><span data-stu-id="5f5d0-105">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="5f5d0-106">Klient, który wysyła komunikat do usługi, kieruje komunikat do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-106">For the client to send the message to the service, the client addresses the message to the Target Queue.</span></span> <span data-ttu-id="5f5d0-107">Aby usługa mogła odczytywać wiadomości z kolejki, ustawia adres nasłuchu do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-107">For the service to read messages from the queue, it sets its listen address to the Target Queue.</span></span> <span data-ttu-id="5f5d0-108">Adresowanie w programie WCF odbywa się na podstawie Uniform Resource Identifier (URI), gdy nazwy kolejek usługi kolejkowania komunikatów (MSMQ) nie są oparte na identyfikatorze URI.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-108">Addressing in WCF is Uniform Resource Identifier (URI)-based while Message Queuing (MSMQ) queue names are not URI-based.</span></span> <span data-ttu-id="5f5d0-109">W związku z tym ważne jest, aby zrozumieć, jak rozadresować kolejki utworzone w usłudze MSMQ przy użyciu programu WCF.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-109">It is therefore essential to understand how to address queues created in MSMQ using WCF.</span></span>  
  
## <a name="msmq-addressing"></a><span data-ttu-id="5f5d0-110">Adresowanie MSMQ</span><span class="sxs-lookup"><span data-stu-id="5f5d0-110">MSMQ Addressing</span></span>  
 <span data-ttu-id="5f5d0-111">Usługa MSMQ używa ścieżek i nazw formatów do identyfikowania kolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-111">MSMQ uses paths and format names to identify a queue.</span></span> <span data-ttu-id="5f5d0-112">Ścieżki określają nazwę hosta i `QueueName` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-112">Paths specify a host name and a `QueueName`.</span></span> <span data-ttu-id="5f5d0-113">Opcjonalnie może istnieć `Private$` między nazwą hosta a a, `QueueName` Aby wskazać kolejkę prywatną, która nie została opublikowana w usłudze katalogowej Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-113">Optionally, there can be a `Private$` between the host name and the `QueueName` to indicate a private queue that is not published in the Active Directory directory service.</span></span>  
  
 <span data-ttu-id="5f5d0-114">Nazwy ścieżek są mapowane na "FormatNames" w celu określenia dodatkowych aspektów adresu, w tym routingu i protokołu transferu Menedżera kolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-114">Path names are mapped to "FormatNames" to determine additional aspects of the address, including routing and queue manager transfer protocol.</span></span> <span data-ttu-id="5f5d0-115">Menedżer kolejki obsługuje dwa protokoły transferu: natywny protokół MSMQ i protokół komunikacyjny protokołu SOAP (SRMP).</span><span class="sxs-lookup"><span data-stu-id="5f5d0-115">The Queue Manager supports two transfer protocols: native MSMQ protocol and SOAP Reliable Messaging Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="5f5d0-116">Aby uzyskać więcej informacji na temat nazwy ścieżki i formatu usługi MSMQ, zobacz [Informacje o kolejkach komunikatów](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="5f5d0-116">For more information about MSMQ path and format names, see [About Message Queuing](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span></span>  
  
## <a name="netmsmqbinding-and-service-addressing"></a><span data-ttu-id="5f5d0-117">Usługi Msmqbinding i adresowanie usługi</span><span class="sxs-lookup"><span data-stu-id="5f5d0-117">NetMsmqBinding and Service Addressing</span></span>  
 <span data-ttu-id="5f5d0-118">Podczas adresowania wiadomości do usługi, schemat w identyfikatorze URI jest wybierany w oparciu o transport używany do komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-118">When addressing a message to a service, the scheme in the URI is chosen based on the transport used for communication.</span></span> <span data-ttu-id="5f5d0-119">Każdy transport w usłudze WCF ma unikatowy schemat.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-119">Each transport in WCF has a unique scheme.</span></span> <span data-ttu-id="5f5d0-120">Schemat musi odzwierciedlać charakter transportu używany do komunikacji.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-120">The scheme must reflect the nature of transport used for communication.</span></span> <span data-ttu-id="5f5d0-121">Na przykład net. TCP, net. pipe, HTTP i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-121">For example, net.tcp, net.pipe, HTTP, and so on.</span></span>  
  
 <span data-ttu-id="5f5d0-122">Kolejkowanie w kolejce usługi MSMQ w programie WCF uwidacznia schemat net. MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-122">The MSMQ queued transport in WCF exposes a net.msmq scheme.</span></span> <span data-ttu-id="5f5d0-123">Każdy komunikat rozkierowany przy użyciu schematu net. MSMQ jest wysyłany za pośrednictwem `NetMsmqBinding` kanału transportu w kolejce usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-123">Any message addressed using the net.msmq scheme is sent using the `NetMsmqBinding` over the MSMQ queued transport channel.</span></span>  
  
 <span data-ttu-id="5f5d0-124">Adresowanie kolejki w programie WCF opiera się na następującym wzorcu:</span><span class="sxs-lookup"><span data-stu-id="5f5d0-124">The addressing of a queue in WCF is based on the following pattern:</span></span>  
  
 <span data-ttu-id="5f5d0-125">NET. MSMQ:// \<*host-name*> /[Private/] \<*queue-name*></span><span class="sxs-lookup"><span data-stu-id="5f5d0-125">net.msmq: // \<*host-name*> / [private/] \<*queue-name*></span></span>  
  
 <span data-ttu-id="5f5d0-126">gdzie:</span><span class="sxs-lookup"><span data-stu-id="5f5d0-126">where:</span></span>  
  
- <span data-ttu-id="5f5d0-127">\<*host-name*> to nazwa komputera, który hostuje kolejkę docelową.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-127">\<*host-name*> is the name of the machine that hosts the Target Queue.</span></span>  
  
- <span data-ttu-id="5f5d0-128">[Private] jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-128">[private] is optional.</span></span> <span data-ttu-id="5f5d0-129">Jest używany podczas adresowania kolejki docelowej, która jest kolejką prywatną.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-129">It is used when addressing a Target Queue that is a private queue.</span></span> <span data-ttu-id="5f5d0-130">Aby zająć się kolejką publiczną, nie należy określać elementu Private.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-130">To address a public queue, you must not specify private.</span></span> <span data-ttu-id="5f5d0-131">Należy pamiętać, że w przeciwieństwie do ścieżek MSMQ nie ma "$" w formularzu identyfikatora URI WCF.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-131">Note that, unlike MSMQ paths, there is no "$" in the WCF URI form.</span></span>  
  
- <span data-ttu-id="5f5d0-132">\<*queue-name*> jest nazwą kolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-132">\<*queue-name*> is the name of the queue.</span></span> <span data-ttu-id="5f5d0-133">Nazwa kolejki może również odwoływać się do podkolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-133">The queue name can also refer to a subqueue.</span></span> <span data-ttu-id="5f5d0-134">W tym celu \<*queue-name*>  =  \<*name-of-queue*> [;\* Nazwa kolejki podrzędnej\*].</span><span class="sxs-lookup"><span data-stu-id="5f5d0-134">Thus, \<*queue-name*> = \<*name-of-queue*>[;*sub-queue-name*].</span></span>  
  
 <span data-ttu-id="5f5d0-135">Example1: Aby rozwiązać kolejkę prywatną PurchaseOrders hostowaną na komputerze ABC atadatum.com, identyfikator URI będzie net. MSMQ://abc.adatum.com/private/PurchaseOrders.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-135">Example1: To address a private queue PurchaseOrders hosted on computer abc atadatum.com, the URI would be net.msmq://abc.adatum.com/private/PurchaseOrders.</span></span>  
  
 <span data-ttu-id="5f5d0-136">Example2: aby obsłużyć kolejkę publiczną AccountsPayable hostowaną na komputerze z interfejsem def atadatum.com, identyfikator URI będzie net. MSMQ://def.adatum.com/AccountsPayable.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-136">Example2: To address a public queue AccountsPayable hosted on computer def atadatum.com, the URI would be net.msmq://def.adatum.com/AccountsPayable.</span></span>  
  
 <span data-ttu-id="5f5d0-137">Adres kolejki jest używany jako identyfikator URI nasłuchiwania przez odbiornik do odczytywania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-137">The queue address is used as the Listen URI by the Listener to read messages from.</span></span> <span data-ttu-id="5f5d0-138">Inaczej mówiąc, adres kolejki jest równoważny portowi nasłuchiwania gniazda TCP.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-138">In other words, the queue address is equivalent to the listen port of TCP socket.</span></span>  
  
 <span data-ttu-id="5f5d0-139">Punkt końcowy, który odczytuje z kolejki, musi określać adres kolejki przy użyciu tego samego schematu określonego wcześniej podczas otwierania ServiceHost.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-139">An endpoint that reads from a queue must specify the address of the queue using the same scheme specified previously when opening the ServiceHost.</span></span> <span data-ttu-id="5f5d0-140">Aby zapoznać się z przykładami, zobacz [net MSMQ Binding](../samples/net-msmq-binding.md).</span><span class="sxs-lookup"><span data-stu-id="5f5d0-140">For examples, see [Net MSMQ Binding](../samples/net-msmq-binding.md).</span></span>  
  
### <a name="multiple-contracts-in-a-queue"></a><span data-ttu-id="5f5d0-141">Wiele kontraktów w kolejce</span><span class="sxs-lookup"><span data-stu-id="5f5d0-141">Multiple Contracts in a Queue</span></span>  
 <span data-ttu-id="5f5d0-142">Komunikaty w kolejce mogą implementować różne kontrakty.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-142">Messages in a queue can implement different contracts.</span></span> <span data-ttu-id="5f5d0-143">W takim przypadku ważne jest, aby jedna z następujących wartości była prawdziwa, aby pomyślnie odczytywać i przetwarzać wszystkie komunikaty:</span><span class="sxs-lookup"><span data-stu-id="5f5d0-143">In this case, it is essential that one of the following is true to successfully read and process all messages:</span></span>  
  
- <span data-ttu-id="5f5d0-144">Określ punkt końcowy usługi implementującej wszystkie umowy.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-144">Specify an endpoint for a service that implements all the contracts.</span></span> <span data-ttu-id="5f5d0-145">Jest to zalecane podejście.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-145">This is the recommended approach.</span></span>  
  
- <span data-ttu-id="5f5d0-146">Określ wiele punktów końcowych z różnymi kontraktami, ale upewnij się, że wszystkie punkty końcowe używają tego samego `NetMsmqBinding` obiektu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-146">Specify multiple endpoints with different contracts, but ensure that all the endpoints use the same `NetMsmqBinding` object.</span></span> <span data-ttu-id="5f5d0-147">Logika wysyłania w elemencie ServiceModel używa pompy komunikatów, która odczytuje komunikaty z kanału transportowego do wysłania, które ostatecznie demultipleksuje komunikaty na podstawie kontraktu do różnych punktów końcowych.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-147">The dispatching logic in ServiceModel uses a message pump that reads messages out of the transport channel for dispatch, which eventually de-multiplexes messages based on the contract to different endpoints.</span></span> <span data-ttu-id="5f5d0-148">Dla pary URI/powiązania nasłuchiwania jest tworzona pompa komunikatów.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-148">A message pump is created for a listen URI/Binding pair.</span></span> <span data-ttu-id="5f5d0-149">Adres kolejki jest używany jako identyfikator URI nasłuchiwania przez odbiornik umieszczony w kolejce.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-149">The queue address is used as the Listen URI by the queued listener.</span></span> <span data-ttu-id="5f5d0-150">Jeśli wszystkie punkty końcowe używają tego samego obiektu wiążącego, gwarantuje to, że jedna pompa komunikatów jest używana do odczytu komunikatu i demultipleksowania do odpowiednich punktów końcowych na podstawie kontraktu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-150">Having all the endpoints use the same binding object ensures that a single message pump is used to read the message and de-multiplex to relevant endpoints based on the contract.</span></span>  
  
### <a name="srmp-messaging"></a><span data-ttu-id="5f5d0-151">Wiadomości SRMP</span><span class="sxs-lookup"><span data-stu-id="5f5d0-151">SRMP Messaging</span></span>  
 <span data-ttu-id="5f5d0-152">Jak wspomniano wcześniej, można użyć protokołu SRMP do transferów kolejek do kolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-152">As previously discussed, you can use the SRMP protocol for queue-to-queue transfers.</span></span> <span data-ttu-id="5f5d0-153">Jest to często używane, gdy transport HTTP przesyła komunikaty między kolejką transmisji a kolejką docelową.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-153">This is commonly used when an HTTP transport transmits messages between the Transmission Queue and the Target Queue.</span></span>  
  
 <span data-ttu-id="5f5d0-154">Aby korzystać z protokołu transferu SRMP, adresowanie komunikatów przy użyciu schematu identyfikatora URI net. MSMQ, jak wspomniano wcześniej, i określić wybór protokołu SRMP lub zabezpieczonej metody SRMP we `QueueTransferProtocol` właściwości `NetMsmqBinding` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-154">To use the SRMP transfer protocol, address messages using the net.msmq URI scheme, as mentioned previously, and specify the choice of SRMP or Secured SRMP in the `QueueTransferProtocol` property of the `NetMsmqBinding`.</span></span>  
  
 <span data-ttu-id="5f5d0-155">Określanie `QueueTransferProtocol` właściwości jest funkcją tylko do wysyłania.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-155">Specifying the `QueueTransferProtocol` property is a send-only feature.</span></span> <span data-ttu-id="5f5d0-156">Jest to wskazanie przez klienta, którego rodzaju protokół transferu kolejki ma być używany.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-156">This is an indication by the client which kind of queue transfer protocol to use.</span></span>  
  
### <a name="using-active-directory"></a><span data-ttu-id="5f5d0-157">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="5f5d0-157">Using Active Directory</span></span>  
 <span data-ttu-id="5f5d0-158">Usługa MSMQ obsługuje integrację Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-158">MSMQ comes with support for Active Directory integration.</span></span> <span data-ttu-id="5f5d0-159">Gdy usługa MSMQ jest zainstalowana z integracją Active Directory, maszyna musi być częścią domeny systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-159">When MSMQ is installed with Active Directory integration, the machine must be part of a Windows domain.</span></span> <span data-ttu-id="5f5d0-160">Active Directory służy do publikowania kolejek do odnajdywania; kolejki te są nazywane *kolejkami publicznymi*.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-160">Active Directory is used to publish queues for discovery; such queues are called *public queues*.</span></span> <span data-ttu-id="5f5d0-161">Podczas rozwiązywania kolejki można rozpoznać kolejkę za pomocą Active Directory.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-161">When addressing a queue, the queue can be resolved using Active Directory.</span></span> <span data-ttu-id="5f5d0-162">Jest to podobne do sposobu, w jaki system nazw domen (DNS) jest używany do rozpoznawania adresu IP nazwy sieciowej.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-162">This is similar to how Domain Name System (DNS) is used to resolve the IP address of a network name.</span></span> <span data-ttu-id="5f5d0-163">`UseActiveDirectory`Właściwość w `NetMsmqBinding` jest wartością logiczną, która wskazuje, czy kanał umieszczony w kolejce musi używać Active Directory do rozpoznawania identyfikatora URI kolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-163">The `UseActiveDirectory` property in `NetMsmqBinding` is a Boolean that indicates whether the queued channel must use Active Directory to resolve the queue URI.</span></span> <span data-ttu-id="5f5d0-164">Domyślnie jest ono ustawione na wartość `false` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-164">By default it is set to `false`.</span></span> <span data-ttu-id="5f5d0-165">Jeśli `UseActiveDirectory` Właściwość jest ustawiona na `true` , kanał umieszczony w kolejce używa Active Directory do przekonwertowania nazwy net. MSMQ://URI na nazwę formatu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-165">If the `UseActiveDirectory` property is set to `true`, then the queued channel uses Active Directory to convert the net.msmq:// URI to format name.</span></span>  
  
 <span data-ttu-id="5f5d0-166">`UseActiveDirectory`Właściwość ma znaczenie tylko dla klienta wysyłającego wiadomość, ponieważ jest używana do rozpoznawania adresu kolejki podczas wysyłania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-166">The `UseActiveDirectory` property is meaningful only for the client that is sending the message because it is used to resolve the address of the queue when sending messages.</span></span>  
  
### <a name="mapping-netmsmq-uri-to-message-queuing-format-names"></a><span data-ttu-id="5f5d0-167">Mapowanie identyfikatora URI net. MSMQ na nazwy formatu usługi kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="5f5d0-167">Mapping net.msmq URI to Message Queuing Format Names</span></span>  
 <span data-ttu-id="5f5d0-168">Kanał umieszczony w kolejce obsługuje mapowanie nazwy URI net. MSMQ do kanału na nazwy formatu MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-168">The queued channel handles mapping the net.msmq URI name provided to the channel to MSMQ format names.</span></span> <span data-ttu-id="5f5d0-169">Poniższa tabela zawiera podsumowanie reguł używanych do mapowania między nimi.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-169">The following table summarizes the rules used to map between them.</span></span>  
  
|<span data-ttu-id="5f5d0-170">Adres kolejki oparty na identyfikatorze URI WCF</span><span class="sxs-lookup"><span data-stu-id="5f5d0-170">WCF URI-based queue address</span></span>|<span data-ttu-id="5f5d0-171">Użyj właściwości Active Directory</span><span class="sxs-lookup"><span data-stu-id="5f5d0-171">Use Active Directory property</span></span>|<span data-ttu-id="5f5d0-172">Właściwość protokołu transferu kolejki</span><span class="sxs-lookup"><span data-stu-id="5f5d0-172">Queue Transfer Protocol property</span></span>|<span data-ttu-id="5f5d0-173">Wypływające nazwy formatu usługi MSMQ</span><span class="sxs-lookup"><span data-stu-id="5f5d0-173">Resulting MSMQ format names</span></span>|  
|----------------------------------|-----------------------------------|--------------------------------------|---------------------------------|  
|`Net.msmq://<machine-name>/private/abc`|<span data-ttu-id="5f5d0-174">False (domyślnie)</span><span class="sxs-lookup"><span data-stu-id="5f5d0-174">False (default)</span></span>|<span data-ttu-id="5f5d0-175">Natywny (domyślny)</span><span class="sxs-lookup"><span data-stu-id="5f5d0-175">Native (default)</span></span>|`DIRECT=OS:machine-name\private$\abc`|  
|`Net.msmq://<machine-name>/private/abc`|<span data-ttu-id="5f5d0-176">Fałsz</span><span class="sxs-lookup"><span data-stu-id="5f5d0-176">False</span></span>|<span data-ttu-id="5f5d0-177">SRMP</span><span class="sxs-lookup"><span data-stu-id="5f5d0-177">SRMP</span></span>|`DIRECT=http://machine/msmq/private$/abc`|  
|`Net.msmq://<machine-name>/private/abc`|<span data-ttu-id="5f5d0-178">Prawda</span><span class="sxs-lookup"><span data-stu-id="5f5d0-178">True</span></span>|<span data-ttu-id="5f5d0-179">Natywna</span><span class="sxs-lookup"><span data-stu-id="5f5d0-179">Native</span></span>|<span data-ttu-id="5f5d0-180">`PUBLIC=some-guid` (identyfikator GUID kolejki)</span><span class="sxs-lookup"><span data-stu-id="5f5d0-180">`PUBLIC=some-guid` (the GUID of the queue)</span></span>|  
  
### <a name="reading-messages-from-the-dead-letter-queue-or-the-poison-message-queue"></a><span data-ttu-id="5f5d0-181">Odczytywanie wiadomości z kolejki utraconych wiadomości lub z kolejki trujących komunikatów</span><span class="sxs-lookup"><span data-stu-id="5f5d0-181">Reading Messages from the Dead-Letter Queue or the Poison-Message Queue</span></span>  
 <span data-ttu-id="5f5d0-182">Aby odczytać wiadomości z kolejki komunikatów trujących, która jest podkolejką kolejki docelowej, Otwórz `ServiceHost` z adresem podkolejki.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-182">To read messages from a poison-message queue that is a subqueue of the target queue, open the `ServiceHost` with the address of the subqueue.</span></span>  
  
 <span data-ttu-id="5f5d0-183">Przykład: usługa, która odczytuje z kolejki "Trująca wiadomość" kolejki prywatnej PurchaseOrders z komputera lokalnego, będzie mieć adres net. MSMQ://localhost/private/PurchaseOrders; trujące.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-183">Example: A service that reads from the poison-message queue of the PurchaseOrders private queue from the local machine would address net.msmq://localhost/private/PurchaseOrders;poison.</span></span>  
  
 <span data-ttu-id="5f5d0-184">Aby można było odczytać wiadomości z kolejki utraconych wiadomości transakcyjnych systemu, identyfikator URI musi mieć postać: net. MSMQ://localhost/system $;D eadXact.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-184">To read messages from a system transactional dead-letter queue, the URI must be of the form: net.msmq://localhost/system$;DeadXact.</span></span>  
  
 <span data-ttu-id="5f5d0-185">Aby można było odczytywać komunikaty z kolejki utraconych wiadomości w systemie, identyfikator URI musi mieć postać: net. MSMQ://localhost/system $;D eadLetter.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-185">To read messages from a system nontransactional dead-letter queue, the URI must be of the form: net.msmq://localhost/system$;DeadLetter.</span></span>  
  
 <span data-ttu-id="5f5d0-186">W przypadku korzystania z niestandardowej kolejki utraconych wiadomości należy zauważyć, że kolejka utraconych wiadomości musi znajdować się na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-186">When using a custom dead-letter queue, note that the dead-letter queue must reside on the local computer.</span></span> <span data-ttu-id="5f5d0-187">W związku z tym identyfikator URI dla kolejki utraconych wiadomości jest ograniczony do formularza:</span><span class="sxs-lookup"><span data-stu-id="5f5d0-187">As such, the URI for the dead-letter queue is restricted to the form:</span></span>  
  
 <span data-ttu-id="5f5d0-188">NET. MSMQ://localhost/[Private/]  \<*custom-dead-letter-queue-name*> .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-188">net.msmq: //localhost/ [private/]  \<*custom-dead-letter-queue-name*>.</span></span>  
  
 <span data-ttu-id="5f5d0-189">Usługa WCF sprawdza, czy wszystkie odebrane komunikaty zostały rozkierowane do określonej kolejki, na której nasłuchuje.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-189">A WCF service verifies that all messages it receives were addressed to the particular queue it is listening on.</span></span> <span data-ttu-id="5f5d0-190">Jeśli kolejka docelowa komunikatu nie jest zgodna z kolejką, w której znajduje się w, usługa nie przetwarza komunikatu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-190">If the message’s destination queue does not match the queue it is found in, the service does not process the message.</span></span> <span data-ttu-id="5f5d0-191">Jest to problem polegający na tym, że usługi nasłuchujące w kolejce utraconych wiadomości muszą być adresami, ponieważ każdy komunikat w kolejce utraconych wiadomości został przewidziany w innym miejscu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-191">This is an issue that services listening to a dead-letter queue must address because any message in the dead-letter queue was meant to be delivered elsewhere.</span></span> <span data-ttu-id="5f5d0-192">Aby odczytać wiadomości z kolejki utraconych wiadomości lub z kolejki trującej, `ServiceBehavior` <xref:System.ServiceModel.AddressFilterMode.Any> należy użyć parametru z parametrem.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-192">To read messages from a dead-letter queue, or from a poison queue, a `ServiceBehavior` with the <xref:System.ServiceModel.AddressFilterMode.Any> parameter must be used.</span></span> <span data-ttu-id="5f5d0-193">Aby zapoznać się z przykładem, zobacz [kolejki utraconych wiadomości](../samples/dead-letter-queues.md).</span><span class="sxs-lookup"><span data-stu-id="5f5d0-193">For an example, see [Dead Letter Queues](../samples/dead-letter-queues.md).</span></span>  
  
## <a name="msmqintegrationbinding-and-service-addressing"></a><span data-ttu-id="5f5d0-194">MsmqIntegrationBinding i adresowanie usług</span><span class="sxs-lookup"><span data-stu-id="5f5d0-194">MsmqIntegrationBinding and Service Addressing</span></span>  
 <span data-ttu-id="5f5d0-195">Służy `MsmqIntegrationBinding` do komunikacji z tradycyjnymi aplikacjami MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-195">The `MsmqIntegrationBinding` is used for communication with traditional MSMQ applications.</span></span> <span data-ttu-id="5f5d0-196">Aby ułatwić współdziałanie z istniejącą aplikacją MSMQ, WCF obsługuje tylko adresowanie nazw formatu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-196">To ease interoperation with an existing MSMQ application, WCF supports only format name addressing.</span></span> <span data-ttu-id="5f5d0-197">W ten sposób komunikaty wysyłane przy użyciu tego powiązania muszą być zgodne ze schematem identyfikatora URI:</span><span class="sxs-lookup"><span data-stu-id="5f5d0-197">Thus, messages sent using this binding must conform to the URI scheme:</span></span>  
  
 <span data-ttu-id="5f5d0-198">MSMQ. formatname:\<*MSMQ-format-name*>></span><span class="sxs-lookup"><span data-stu-id="5f5d0-198">msmq.formatname:\<*MSMQ-format-name*>></span></span>  
  
 <span data-ttu-id="5f5d0-199">Nazwa MSMQ-format-name ma postać określoną przez usługę MSMQ w [temacie Informacje o kolejkach komunikatów](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="5f5d0-199">The MSMQ-format-name is of the form specified by MSMQ in [About Message Queuing](/previous-versions/windows/desktop/legacy/ms706032(v=vs.85)).</span></span>  
  
 <span data-ttu-id="5f5d0-200">Należy pamiętać, że w przypadku otrzymywania wiadomości z kolejki przy użyciu programu można używać tylko bezpośrednich nazw formatu i nazw formatu publicznego i prywatnego (wymaga integracji Active Directory) `MsmqIntegrationBinding` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-200">Note that you can only use direct format names, and public and private format names (requires Active Directory integration) when receiving messages from a queue using `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="5f5d0-201">Zaleca się jednak używanie bezpośrednich nazw formatu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-201">However, it is advised that you use direct format names.</span></span> <span data-ttu-id="5f5d0-202">Na przykład w systemie Windows Vista użycie dowolnej innej nazwy formatu powoduje błąd, ponieważ system próbuje otworzyć podkolejkę, która może być otwierana tylko z bezpośrednimi nazwami formatu.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-202">For example, on Windows Vista, using any other format name causes an error because the system attempts to open a subqueue, which can only be opened with direct format names.</span></span>  
  
 <span data-ttu-id="5f5d0-203">W przypadku adresowania SRMP przy użyciu `MsmqIntegrationBinding` nie istnieje wymóg dodania/MSMQ/w nazwie formatu bezpośredniego, aby pomóc Internet Information Services (IIS) z wysyłaniem.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-203">When addressing SRMP using `MsmqIntegrationBinding`, there is no requirement to add /msmq/ in the direct format name to help Internet Information Services (IIS) with dispatching.</span></span> <span data-ttu-id="5f5d0-204">Na przykład: podczas adresowania kolejki ABC przy użyciu protokołu SRMP zamiast `DIRECT=http://adatum.com/msmq/private$/abc` , należy użyć `DIRECT=http://adatum.com/private$/abc` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-204">For example: When addressing a queue abc using the SRMP protocol, instead of `DIRECT=http://adatum.com/msmq/private$/abc`, you should use `DIRECT=http://adatum.com/private$/abc`.</span></span>  
  
 <span data-ttu-id="5f5d0-205">Należy pamiętać, że nie można użyć net. MSMQ://Addressing with `MsmqIntegrationBinding` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-205">Note that you cannot use net.msmq:// addressing with `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="5f5d0-206">Ponieważ `MsmqIntegrationBinding` obsługuje adresowanie nazw formatu usługi MSMQ, można użyć usługi WCF korzystającej z tego powiązania do korzystania z funkcji listy multiemisji i dystrybucji w usłudze MSMQ.</span><span class="sxs-lookup"><span data-stu-id="5f5d0-206">Because `MsmqIntegrationBinding` supports free-form MSMQ format name addressing, you can use a WCF service that uses this binding to use multicast and distribution list features in MSMQ.</span></span> <span data-ttu-id="5f5d0-207">Jeden wyjątek jest określany `CustomDeadLetterQueue` podczas korzystania z `MsmqIntegrationBinding` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-207">One exception is specifying `CustomDeadLetterQueue` when using the `MsmqIntegrationBinding`.</span></span> <span data-ttu-id="5f5d0-208">Musi mieć postać net. MSMQ://, podobnie jak w przypadku jej określenia przy użyciu `NetMsmqBinding` .</span><span class="sxs-lookup"><span data-stu-id="5f5d0-208">It must be of the form net.msmq://, similar to how it is specified using the `NetMsmqBinding`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5f5d0-209">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="5f5d0-209">See also</span></span>

- [<span data-ttu-id="5f5d0-210">Sieć Web hostująca aplikację zakolejkowaną</span><span class="sxs-lookup"><span data-stu-id="5f5d0-210">Web Hosting a Queued Application</span></span>](web-hosting-a-queued-application.md)
