---
title: "Obsługa błędów"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: c948841a-7db9-40ae-9b78-587d216cbcaf
caps.latest.revision: "3"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 215fb30772e4f1b25e20303b3f83d6fe0c00ebae
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/02/2017
---
# <a name="error-handling"></a><span data-ttu-id="e8d50-102">Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="e8d50-102">Error handling</span></span>
## <a name="error-handling-in-windows-communication-foundation"></a><span data-ttu-id="e8d50-103">Obsługa błędów w systemie Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="e8d50-103">Error Handling in Windows Communication Foundation</span></span>  
 <span data-ttu-id="e8d50-104">Gdy usługa napotka nieoczekiwany wyjątek lub błędu, istnieje wiele sposobów, aby zaprojektować rozwiązanie do obsługi wyjątków.</span><span class="sxs-lookup"><span data-stu-id="e8d50-104">When a service encounters an unexpected exception or error, there are multiple ways to design an exception-handling solution.</span></span> <span data-ttu-id="e8d50-105">Gdy nie jest jednym "Popraw" ani "najlepsze praktyki" Obsługa błędów rozwiązania, istnieje wiele ścieżek prawidłowy dla jednego wziąć pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="e8d50-105">While there is no single "correct" or "best practice" error-handling solution, there are multiple valid paths for one to consider.</span></span> <span data-ttu-id="e8d50-106">Zwykle zaleca się, że jeden wdrożyć rozwiązanie hybrydowe, które łączy wiele metod z listy poniżej, w zależności od złożoności implementacji usługi WCF, typ i częstotliwość wyjątków obsłużonych a nieobsługiwany rodzaj wyjątki i wszystkie skojarzone śledzenie, logowania lub wymagania dotyczące zasad.</span><span class="sxs-lookup"><span data-stu-id="e8d50-106">It is normally recommended that one implement a hybrid solution that combines multiple approaches from the list below, depending on the complexity of the WCF implementation, the type and frequency of the exceptions, the handled vs. unhandled nature of the exceptions, and any associated tracing, logging, or policy requirements.</span></span>  
  
 <span data-ttu-id="e8d50-107">Te rozwiązania głębsze opisano w dalszej części tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-107">These solutions are explained more deeply in the rest of this section.</span></span>  
  
### <a name="the-microsoft-enterprise-library"></a><span data-ttu-id="e8d50-108">Biblioteka Microsoft Enterprise</span><span class="sxs-lookup"><span data-stu-id="e8d50-108">The Microsoft Enterprise Library</span></span>  
 <span data-ttu-id="e8d50-109">Microsoft Enterprise biblioteki obsługi aplikacji bloku wyjątków ułatwia wdrożenie typowe wzorce projektowe oraz utworzenia spójnej strategii przetwarzania wyjątków, które występują w wszystkie warstwy architektury aplikacji przedsiębiorstwa.</span><span class="sxs-lookup"><span data-stu-id="e8d50-109">The Microsoft Enterprise Library Exception Handling Application Block helps implement common design patterns and create a consistent strategy for processing exceptions that occur in all architectural layers of an enterprise application.</span></span> <span data-ttu-id="e8d50-110">Zaprojektowano go do obsługi typowy kod źródłowy znajdujący się w instrukcji catch w składników aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-110">It is designed to support the typical code contained in catch statements in application components.</span></span> <span data-ttu-id="e8d50-111">Zamiast tego kodu (na przykład kodu, który rejestruje informacje o wyjątku) należy powtórzyć w blokach catch identyczne w całej aplikacji, bloku aplikacji obsługi wyjątków umożliwia deweloperom Hermetyzowanie tę logikę jako programów obsługi wyjątków do ponownego użycia.</span><span class="sxs-lookup"><span data-stu-id="e8d50-111">Instead of repeating this code (such as code that logs exception information) in identical catch blocks throughout an application, the Exception Handling Application Block allows developers to encapsulate this logic as reusable exception handlers.</span></span>  
  
 <span data-ttu-id="e8d50-112">Ta biblioteka zawiera out-of--box obsługi wyjątków kontraktu błędów.</span><span class="sxs-lookup"><span data-stu-id="e8d50-112">This Library includes out-of-the-box a Fault Contract Exception Handler.</span></span> <span data-ttu-id="e8d50-113">Ten program obsługi wyjątku jest przeznaczony do użytku na granicach usługi Windows® Communication Foundation (WCF), a następnie generuje nowy kontrakt błędu z wyjątkiem.</span><span class="sxs-lookup"><span data-stu-id="e8d50-113">This exception handler is designed for use at Windows® Communication Foundation (WCF) service boundaries, and generates a new Fault Contract from the exception.</span></span>  
  
 <span data-ttu-id="e8d50-114">Bloki aplikacja Staraj się zastosować często używane najlepszych rozwiązań i podaj typowym podejściem wyjątków, obsługa w całej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-114">Application blocks aim to incorporate commonly used best practices and provide a common approach for exception handling throughout your application.</span></span> <span data-ttu-id="e8d50-115">Z drugiej strony programy obsługi błędów niestandardowych i kontrakty usterki utworzone przy użyciu własnych może również być bardzo przydatne.</span><span class="sxs-lookup"><span data-stu-id="e8d50-115">On the other hand, custom error handlers and fault contracts developed on one’s own can also be very useful.</span></span> <span data-ttu-id="e8d50-116">Na przykład programy obsługi błędów niestandardowych Podaj doskonała okazja automatycznie Przenieś wszystkie wyjątki FaultExceptions i dodać możliwości rejestrowania zdarzeń do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-116">For instance, custom error handlers provide an excellent opportunity to automatically promote all exceptions to FaultExceptions and also to add logging capabilities to your application.</span></span>  
  
 <span data-ttu-id="e8d50-117">Aby uzyskać więcej informacji, zobacz [biblioteki Microsoft Enterprise](http://msdn.microsoft.com/library/ff632023.aspx).</span><span class="sxs-lookup"><span data-stu-id="e8d50-117">For more information, please see [Microsoft Enterprise Library](http://msdn.microsoft.com/library/ff632023.aspx).</span></span>  
  
### <a name="dealing-with-expected-exceptions"></a><span data-ttu-id="e8d50-118">Zajmujących się oczekiwane wyjątki</span><span class="sxs-lookup"><span data-stu-id="e8d50-118">Dealing with Expected Exceptions</span></span>  
 <span data-ttu-id="e8d50-119">Jest właściwy sposobu działania catch oczekiwane wyjątki w każdej operacji punkt odpowiednich rozszerzeń, zdecydować, czy ich można odzyskać od i zwróć prawidłowego błędów niestandardowych zgłoszenie wyjątku FaultException\<T ></span><span class="sxs-lookup"><span data-stu-id="e8d50-119">The proper course of action is to catch expected exceptions in every operation or relevant extensibility point, decide whether they can be recovered from, and return the proper custom fault in a FaultException\<T></span></span>  
  
### <a name="dealing-with-unexpected-exceptions-using-an-ierrorhandler"></a><span data-ttu-id="e8d50-120">Zajmujących się nieoczekiwane wyjątków przy użyciu interfejsy IErrorHandler</span><span class="sxs-lookup"><span data-stu-id="e8d50-120">Dealing with Unexpected Exceptions using an IErrorHandler</span></span>  
 <span data-ttu-id="e8d50-121">Na wypadek nieoczekiwanych wyjątków, zalecany sposób postępowania jest "Połącz" interfejsy IErrorHandler.</span><span class="sxs-lookup"><span data-stu-id="e8d50-121">To deal with unexpected exceptions, the recommended course of action is to "hook" an IErrorHandler.</span></span> <span data-ttu-id="e8d50-122">Programy obsługi błędów tylko przechwytywanie wyjątków na poziomie środowiska uruchomieniowego WCF (warstwa "model usługi"), a nie w warstwie kanału.</span><span class="sxs-lookup"><span data-stu-id="e8d50-122">Error handlers only catch exceptions at the WCF runtime level (the "service model" layer), not at the channel layer.</span></span> <span data-ttu-id="e8d50-123">Jedynym sposobem na utworzenie punktu zaczepienia interfejsy IErrorHandler na poziomie kanału jest tworzenie niestandardowych kanału, co nie jest zalecane w większości przypadków.</span><span class="sxs-lookup"><span data-stu-id="e8d50-123">The only way to hook an IErrorHandler at the channel level is to create a custom channel, which is not recommended in most scenarios.</span></span>  
  
 <span data-ttu-id="e8d50-124">"Nieoczekiwany wyjątek" zazwyczaj nie jest wystąpił nieodwracalny wyjątek ani wyjątku przetwarzania; jest, zamiast tego użytkownik nieoczekiwany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="e8d50-124">An "unexpected exception" is generally neither an irrecoverable exception nor a processing exception; it is, instead, an unexpected user exception.</span></span> <span data-ttu-id="e8d50-125">Wystąpił nieodwracalny wyjątek (np. wyjątek braku pamięci) — jeden ogólnie obsługiwane przez [obsługi wyjątków modelu usługi](http://msdn.microsoft.com/library/system.servicemodel.dispatcher.exceptionhandler.aspx) automatycznie — nie ogólnie można obsługiwać poprawnie i tylko Przyczyna do obsługi takich wyjątku może być w ogóle wykonaj dodatkowe rejestrowanie Aby przywrócić standardowego wyjątek do klienta.</span><span class="sxs-lookup"><span data-stu-id="e8d50-125">An irrecoverable exception (such as an out-of-memory exception) – one generally handled by the [Service Model Exception Handler](http://msdn.microsoft.com/library/system.servicemodel.dispatcher.exceptionhandler.aspx) automatically – cannot generally be handled gracefully, and the only reason to handle such an exception at all may be do additional logging or to return a standard exception to the client.</span></span> <span data-ttu-id="e8d50-126">Wyjątek przetwarzania występuje podczas przetwarzania komunikatu — na przykład na poziomie elementu formatującego — serializacji, koder lub zazwyczaj nie mogą być obsługiwane na interfejsy IErrorHandler, ponieważ jest zazwyczaj zbyt wcześnie albo za późno interweniować przez program obsługi błędów czas, będą wykonywane te wyjątki.</span><span class="sxs-lookup"><span data-stu-id="e8d50-126">A processing exception occurs in the processing of the message – for example, at the serialization, encoder, or formatter level – generally cannot be handled at an IErrorHandler, because it is generally either too early or too late for the error handler to intervene by the time these exceptions occur.</span></span> <span data-ttu-id="e8d50-127">Podobnie transportowanie wyjątków nie mogą być obsługiwane na interfejsy IErrorHandler.</span><span class="sxs-lookup"><span data-stu-id="e8d50-127">Similarly, transport exceptions cannot be handled at an IErrorHandler.</span></span>  
  
 <span data-ttu-id="e8d50-128">Z interfejsy IErrorHandler można jawnie kontrolować zachowanie aplikacji, gdy wyjątek.</span><span class="sxs-lookup"><span data-stu-id="e8d50-128">With an IErrorHandler, you can explicitly control the behavior of your application when an exception is thrown.</span></span> <span data-ttu-id="e8d50-129">Użytkownik może:</span><span class="sxs-lookup"><span data-stu-id="e8d50-129">You may:</span></span>  
  
1.  <span data-ttu-id="e8d50-130">Zdecyduj, czy należy wysłać do klienta błąd</span><span class="sxs-lookup"><span data-stu-id="e8d50-130">Decide whether or not to send a fault to the client</span></span>  
  
2.  <span data-ttu-id="e8d50-131">Zamień na błąd wystąpił wyjątek</span><span class="sxs-lookup"><span data-stu-id="e8d50-131">Replace an exception with a fault</span></span>  
  
3.  <span data-ttu-id="e8d50-132">Zamień na inny błąd usterki</span><span class="sxs-lookup"><span data-stu-id="e8d50-132">Replace a fault with another fault</span></span>  
  
4.  <span data-ttu-id="e8d50-133">Wykonaj rejestrowania i śledzenia</span><span class="sxs-lookup"><span data-stu-id="e8d50-133">Perform logging or tracing</span></span>  
  
5.  <span data-ttu-id="e8d50-134">Wykonywanie innych czynności niestandardowe</span><span class="sxs-lookup"><span data-stu-id="e8d50-134">Perform other custom activities</span></span>  
  
 <span data-ttu-id="e8d50-135">Co można zainstalować obsługi błędów niestandardowych, dodając ją do właściwości ErrorHandlers dyspozytorów kanał dla usługi.</span><span class="sxs-lookup"><span data-stu-id="e8d50-135">One can install a custom error handler by adding it to the ErrorHandlers property of the channel dispatchers for your service.</span></span>  <span data-ttu-id="e8d50-136">Użytkownik może mieć więcej niż jeden program obsługi błędów i są wywoływane w kolejności, są one dodawane do tej kolekcji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-136">It is possible to have more than one error handler and they are called in the order they are added to this collection.</span></span>  
  
 <span data-ttu-id="e8d50-137">IErrorHandler.ProvideFault Określa komunikat o błędzie, który jest wysyłany do klienta.</span><span class="sxs-lookup"><span data-stu-id="e8d50-137">IErrorHandler.ProvideFault controls the fault message that is sent to the client.</span></span> <span data-ttu-id="e8d50-138">Ta metoda jest wywoływana bez względu na typ wyjątku zgłoszonego przez operacji w usłudze.</span><span class="sxs-lookup"><span data-stu-id="e8d50-138">This method is called regardless of the type of the exception thrown by an operation in your service.</span></span> <span data-ttu-id="e8d50-139">Jeśli żadna operacja jest wykonywana w tym miejscu, WCF zakłada jego zachowania domyślnego i kontynuuje tak, jakby nie było żadnych programy obsługi błędów niestandardowych w miejscu.</span><span class="sxs-lookup"><span data-stu-id="e8d50-139">If no operation is performed here, WCF assumes its default behaviour and continues as if there were no custom error handlers in place.</span></span>  
  
 <span data-ttu-id="e8d50-140">Jednego obszaru można tego podejścia być może użyć jest, gdy chcesz utworzyć centralne miejsce do konwertowania wyjątków na błędy przed ich wysłaniem do klienta (zapewnienie, że wystąpienie nie zostanie usunięty, i kanał nie jest przenoszony do stan końcowy: Faulted).</span><span class="sxs-lookup"><span data-stu-id="e8d50-140">One area that you could perhaps use this approach is when you want to create a central place for converting exceptions to faults before they are sent to the client (ensuring that the instance is not disposed and the channel is not moved to the Faulted state).</span></span>  
  
 <span data-ttu-id="e8d50-141">Metoda IErrorHandler.HandleError zwykle jest używana do zaimplementowania błąd związany zachowań, takich jak rejestrowanie, błędów powiadomień systemowych, zamykanie aplikacji itp. IErrorHandler.HandleError można wywołać w wielu miejscach wewnątrz usługi, a w zależności od tego, gdzie zostanie zgłoszony błąd, metoda HandleError może lub nie można wywołać w tym samym wątku, co operację; gwarancje nie zostały wprowadzone w tym zakresie.</span><span class="sxs-lookup"><span data-stu-id="e8d50-141">The IErrorHandler.HandleError method is usually used to implement error-related behaviors such as error logging, system notifications, shutting down the application, etc. IErrorHandler.HandleError can be called at multiple places inside the service, and depending on where the error is thrown, the HandleError method may or may not be called by the same thread as the operation; no guarantees are made in this regard.</span></span>  
  
### <a name="dealing-with-exceptions-outside-wcf"></a><span data-ttu-id="e8d50-142">Postępowania z wyjątkami poza WCF</span><span class="sxs-lookup"><span data-stu-id="e8d50-142">Dealing with Exceptions outside WCF</span></span>  
 <span data-ttu-id="e8d50-143">Często, może wystąpić w kontekście aplikacji WCF konfiguracji wyjątków, wyjątki ciąg połączenia bazy danych i inne podobne wyjątki, ale same nie są wyjątki spowodowane przez model usługi lub samej usługi sieci web.</span><span class="sxs-lookup"><span data-stu-id="e8d50-143">Often, configuration exceptions, database connection string exceptions, and other similar exceptions may occur within the context of a WCF application, but are themselves are not exceptions caused by the service model or the web service itself.</span></span> <span data-ttu-id="e8d50-144">Te wyjątki są zewnętrzne względem usługi sieci web "regularne" wyjątki, a powinien zostać obsłużony, podobnie jak inne zewnętrznych wyjątki w środowisku powinny być traktowane.</span><span class="sxs-lookup"><span data-stu-id="e8d50-144">These exceptions are "regular" exceptions external to the web service, and should be handled just as other external exceptions in the environment are to be handled.</span></span>  
  
### <a name="tracing-exceptions"></a><span data-ttu-id="e8d50-145">Śledzenie wyjątków</span><span class="sxs-lookup"><span data-stu-id="e8d50-145">Tracing exceptions</span></span>  
 <span data-ttu-id="e8d50-146">Śledzenie jest miejsce tylko "wychwytywania", której jeden potencjalnie zobaczyć wszystkie wyjątki.</span><span class="sxs-lookup"><span data-stu-id="e8d50-146">Tracing is the only "catch-all" place where one can potentially see all exceptions.</span></span> <span data-ttu-id="e8d50-147">Aby uzyskać więcej informacji dotyczących śledzenia i rejestrowaniem wyjątków Zobacz Śledzenie i rejestrowanie.</span><span class="sxs-lookup"><span data-stu-id="e8d50-147">For more information on tracing and logging exceptions, see Tracing and Logging.</span></span>  
  
### <a name="uri-template-errors-when-using-webgetattribute-and-webinvokeattribute"></a><span data-ttu-id="e8d50-148">Identyfikator URI szablonu błędy podczas korzystania z obiektu WebGetAttribute i WebInvokeAttribute</span><span class="sxs-lookup"><span data-stu-id="e8d50-148">URI template errors when using WebGetAttribute and WebInvokeAttribute</span></span>  
 <span data-ttu-id="e8d50-149">Atrybuty WebGet i WebInvoke umożliwiają Określ szablon identyfikatora URI, który mapuje składniki adresu żądania do parametrów operacji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-149">The WebGet and WebInvoke attributes allow you to specify a URI template that maps components of the request address to operation parameters.</span></span> <span data-ttu-id="e8d50-150">Na przykład szablon identyfikatora URI "pogody / {stanu} / {Miasto}" mapuje adres żądania do tokenów literałów, parametr o nazwie stanu i parametr o nazwie miasta.</span><span class="sxs-lookup"><span data-stu-id="e8d50-150">For example, the URI template "weather/{state}/{city}" maps the request address into literal tokens, a parameter named state, and a parameter named city.</span></span> <span data-ttu-id="e8d50-151">Te parametry mogą następnie powiązać według nazwy niektórych parametrów formalnych operacji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-151">These parameters might then be bound by name to some of the formal parameters of the operation.</span></span>  
  
 <span data-ttu-id="e8d50-152">Parametry szablonu są wyświetlane w postaci ciągów w identyfikatorze URI podczas parametrów formalnych typu kontraktu może być typów innych niż ciąg.</span><span class="sxs-lookup"><span data-stu-id="e8d50-152">The template parameters appear in the form of strings within the URI while the formal parameters of a typed contract might be of non-string types.</span></span> <span data-ttu-id="e8d50-153">W związku z tym konwersji ma miejsce przed operację można wywołać.</span><span class="sxs-lookup"><span data-stu-id="e8d50-153">Therefore, a conversion needs to take place before the operation can be invoked.</span></span> <span data-ttu-id="e8d50-154">A [tabeli konwersji formatów](http://msdn.microsoft.com/library/bb412172.aspx) jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="e8d50-154">A [table of conversion formats](http://msdn.microsoft.com/library/bb412172.aspx) is available.</span></span>  
  
 <span data-ttu-id="e8d50-155">Jednak jeśli konwersji nie powiedzie się, to nie ma sposób umożliwić wiedzieć, że coś niepowodzenia operacji.</span><span class="sxs-lookup"><span data-stu-id="e8d50-155">However, if the conversion fails, then there's no way to let the operation know that something has gone wrong.</span></span> <span data-ttu-id="e8d50-156">Konwersja typów powierzchni zamiast tego w formie Błąd wysyłania.</span><span class="sxs-lookup"><span data-stu-id="e8d50-156">The type conversion instead surfaces in the form of a dispatch failure.</span></span>  
  
 <span data-ttu-id="e8d50-157">Błąd wysyłania konwersji typów może być taki sam, jak wiele innych typów błędy wysyłania inspekcji, instalując program obsługi błędów.</span><span class="sxs-lookup"><span data-stu-id="e8d50-157">A type conversion dispatch failure can be inspected the same as with many other types of dispatch failures by installing an error handler.</span></span> <span data-ttu-id="e8d50-158">Punkt rozszerzeń interfejsy IErrorHandler nazywa się do obsługi wyjątków na poziomie usługi.</span><span class="sxs-lookup"><span data-stu-id="e8d50-158">The IErrorHandler extensibility point is called to handle service-level exceptions.</span></span> <span data-ttu-id="e8d50-159">Z tego miejsca odpowiedzi na wysłane z powrotem do wywołującego — oraz wykonywać żadnych niestandardowych zadań i raportowania — może zostać wybrany.</span><span class="sxs-lookup"><span data-stu-id="e8d50-159">From there, the response to be sent back to the caller – as well as perform any custom tasks and reporting – may be chosen.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e8d50-160">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="e8d50-160">See Also</span></span>  
 [<span data-ttu-id="e8d50-161">Obsługa błędów podstawowe usługi WCF</span><span class="sxs-lookup"><span data-stu-id="e8d50-161">Basic WCF Error Handling</span></span>](http://msdn.microsoft.com/library/gg281715.aspx)
