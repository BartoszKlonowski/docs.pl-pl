---
title: Serializacja i deserializacja
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 3d71814c-bda7-424b-85b7-15084ff9377a
ms.openlocfilehash: 754b09b3b90399c242ddbaf968242f969cb27b8b
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
ms.locfileid: "33508617"
---
# <a name="serialization-and-deserialization"></a><span data-ttu-id="4de34-102">Serializacja i deserializacja</span><span class="sxs-lookup"><span data-stu-id="4de34-102">Serialization and Deserialization</span></span>
<span data-ttu-id="4de34-103">Windows Communication Foundation (WCF) obejmuje nowy aparat serializacji <xref:System.Runtime.Serialization.DataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="4de34-103">Windows Communication Foundation (WCF) includes a new serialization engine, the <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span> <span data-ttu-id="4de34-104"><xref:System.Runtime.Serialization.DataContractSerializer> Tłumaczy [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] obiektów i XML w obu kierunkach.</span><span class="sxs-lookup"><span data-stu-id="4de34-104">The <xref:System.Runtime.Serialization.DataContractSerializer> translates between [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects and XML, in both directions.</span></span> <span data-ttu-id="4de34-105">W tym temacie wyjaśniono, jak działa serializatora.</span><span class="sxs-lookup"><span data-stu-id="4de34-105">This topic explains how the serializer works.</span></span>  
  
 <span data-ttu-id="4de34-106">Podczas serializowania [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] obiektów, serializator zrozumienie różnych serializacji programowania modeli, w tym nowe *kontraktu danych* modelu.</span><span class="sxs-lookup"><span data-stu-id="4de34-106">When serializing [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] objects, the serializer understands a variety of serialization programming models, including the new *data contract* model.</span></span> <span data-ttu-id="4de34-107">Aby uzyskać pełną listę obsługiwanych typów, zobacz [typy obsługiwane przez serializator kontraktu danych](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span><span class="sxs-lookup"><span data-stu-id="4de34-107">For a full list of supported types, see [Types Supported by the Data Contract Serializer](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md).</span></span> <span data-ttu-id="4de34-108">Aby obejrzeć wprowadzenie do kontraktów danych, zobacz [za pomocą kontraktów danych](../../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="4de34-108">For an introduction to data contracts, see [Using Data Contracts](../../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
 <span data-ttu-id="4de34-109">Podczas deserializacji XML, używa serializator <xref:System.Xml.XmlReader> i <xref:System.Xml.XmlWriter> klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-109">When deserializing XML, the serializer uses the <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter> classes.</span></span> <span data-ttu-id="4de34-110">Obsługuje ona również <xref:System.Xml.XmlDictionaryReader> i <xref:System.Xml.XmlDictionaryWriter> klasy, aby włączyć go do produkcji zoptymalizowanych pod kątem XML w niektórych przypadkach, takich jak podczas formatowania przy użyciu programu WCF Binarny XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-110">It also supports the <xref:System.Xml.XmlDictionaryReader> and <xref:System.Xml.XmlDictionaryWriter> classes to enable it to produce optimized XML in some cases, such as when using the WCF binary XML format.</span></span>  
  
 <span data-ttu-id="4de34-111">WCF zawiera również element serializujący Pomocnika <xref:System.Runtime.Serialization.NetDataContractSerializer>.</span><span class="sxs-lookup"><span data-stu-id="4de34-111">WCF also includes a companion serializer, the <xref:System.Runtime.Serialization.NetDataContractSerializer>.</span></span> <span data-ttu-id="4de34-112"><xref:System.Runtime.Serialization.NetDataContractSerializer> Jest podobny do <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> i <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> serializatorów ponieważ również emituje [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] wpisz nazwy w ramach danych serializacji.</span><span class="sxs-lookup"><span data-stu-id="4de34-112">The <xref:System.Runtime.Serialization.NetDataContractSerializer> is similar to the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter> serializers because it also emits [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type names as part of the serialized data.</span></span> <span data-ttu-id="4de34-113">Jest używany, gdy te same typy są udostępniane na serializacja i deserializacja zakończenia.</span><span class="sxs-lookup"><span data-stu-id="4de34-113">It is used when the same types are shared on the serializing and the deserializing ends.</span></span> <span data-ttu-id="4de34-114">Zarówno <xref:System.Runtime.Serialization.DataContractSerializer> i <xref:System.Runtime.Serialization.NetDataContractSerializer> pochodzi od wspólna klasa podstawowa <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span><span class="sxs-lookup"><span data-stu-id="4de34-114">Both the <xref:System.Runtime.Serialization.DataContractSerializer> and the <xref:System.Runtime.Serialization.NetDataContractSerializer> derive from a common base class, the <xref:System.Runtime.Serialization.XmlObjectSerializer>.</span></span>  
  
> [!WARNING]
>  <span data-ttu-id="4de34-115"><xref:System.Runtime.Serialization.DataContractSerializer> Serializuje ciągi zawierające znaki kontrolne o wartości szesnastkowej poniżej 20 jako jednostki XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-115">The <xref:System.Runtime.Serialization.DataContractSerializer> serializes strings containing control characters with a hexadecimal value below 20 as XML entities.</span></span> <span data-ttu-id="4de34-116">Może to spowodować problem z klienta z systemem innym niż WCF podczas wysyłania tych danych do usługi WCF.</span><span class="sxs-lookup"><span data-stu-id="4de34-116">This may cause a problem with a non-WCF client when sending such data to a WCF service.</span></span>  
  
## <a name="creating-a-datacontractserializer-instance"></a><span data-ttu-id="4de34-117">Tworzenie wystąpienia elementu DataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="4de34-117">Creating a DataContractSerializer Instance</span></span>  
 <span data-ttu-id="4de34-118">Utworzenie wystąpienia <xref:System.Runtime.Serialization.DataContractSerializer> to ważny krok.</span><span class="sxs-lookup"><span data-stu-id="4de34-118">Constructing an instance of the <xref:System.Runtime.Serialization.DataContractSerializer> is an important step.</span></span> <span data-ttu-id="4de34-119">Po wykonaniu konstrukcji nie można zmienić dowolne z ustawień.</span><span class="sxs-lookup"><span data-stu-id="4de34-119">After construction, you cannot change any of the settings.</span></span>  
  
### <a name="specifying-the-root-type"></a><span data-ttu-id="4de34-120">Określanie typu głównego</span><span class="sxs-lookup"><span data-stu-id="4de34-120">Specifying the Root Type</span></span>  
 <span data-ttu-id="4de34-121">*Typ główny* jest to typ, którego serializowany lub deserializowany wystąpień.</span><span class="sxs-lookup"><span data-stu-id="4de34-121">The *root type* is the type of which instances are serialized or deserialized.</span></span> <span data-ttu-id="4de34-122"><xref:System.Runtime.Serialization.DataContractSerializer> Ma wiele przeciążeń konstruktora, ale co najmniej, należy podać typ główny przy użyciu `type` parametru.</span><span class="sxs-lookup"><span data-stu-id="4de34-122">The <xref:System.Runtime.Serialization.DataContractSerializer> has many constructor overloads, but, at a minimum, a root type must be supplied using the `type` parameter.</span></span>  
  
 <span data-ttu-id="4de34-123">Element serializujący utworzone dla określonego typu głównego nie można użyć do serializacji (lub deserializacji) innego typu, chyba że typ pochodzi od typu głównego.</span><span class="sxs-lookup"><span data-stu-id="4de34-123">A serializer created for a certain root type cannot be used to serialize (or deserialize) another type, unless the type is derived from the root type.</span></span> <span data-ttu-id="4de34-124">W poniższym przykładzie przedstawiono dwie klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-124">The following example shows two classes.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#1)]
 [!code-vb[c_StandaloneDataContractSerializer#1](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#1)]  
  
 <span data-ttu-id="4de34-125">Ten kod tworzy wystąpienie klasy `DataContractSerializer` który może służyć tylko do serializacji lub deserializacji wystąpienia `Person` klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-125">This code constructs an instance of the `DataContractSerializer` that can be used only to serialize or deserialize instances of the `Person` class.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#2)]
 [!code-vb[c_StandaloneDataContractSerializer#2](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#2)]  
  
### <a name="specifying-known-types"></a><span data-ttu-id="4de34-126">Określanie znanych typów</span><span class="sxs-lookup"><span data-stu-id="4de34-126">Specifying Known Types</span></span>  
 <span data-ttu-id="4de34-127">Jeśli polimorfizm uczestniczy w typach serializowana, które nie jest już obsługiwana za pomocą <xref:System.Runtime.Serialization.KnownTypeAttribute> atrybutu lub innych mechanizmu listę możliwych znane typy muszą być przekazywane do konstruktora serializatora za pomocą `knownTypes` parametru.</span><span class="sxs-lookup"><span data-stu-id="4de34-127">If polymorphism is involved in the types being serialized that is not already handled using the <xref:System.Runtime.Serialization.KnownTypeAttribute> attribute or some other mechanism, a list of possible known types must be passed to the serializer’s constructor using the `knownTypes` parameter.</span></span> <span data-ttu-id="4de34-128">Aby uzyskać więcej informacji na temat znanych typów, zobacz [znane typy kontraktu danych](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span><span class="sxs-lookup"><span data-stu-id="4de34-128">For more information about known types, see [Data Contract Known Types](../../../../docs/framework/wcf/feature-details/data-contract-known-types.md).</span></span>  
  
 <span data-ttu-id="4de34-129">W poniższym przykładzie przedstawiono klasę, `LibraryPatron`, który zawiera kolekcję określonego typu `LibraryItem`.</span><span class="sxs-lookup"><span data-stu-id="4de34-129">The following example shows a class, `LibraryPatron`, that includes a collection of a specific type, the `LibraryItem`.</span></span> <span data-ttu-id="4de34-130">Definiuje klasę sekundę `LibraryItem` typu.</span><span class="sxs-lookup"><span data-stu-id="4de34-130">The second class defines the `LibraryItem` type.</span></span> <span data-ttu-id="4de34-131">Trzeci i cztery klasy (`Book` i `Newspaper`) dziedziczyć `LibraryItem` klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-131">The third and four classes (`Book` and `Newspaper`) inherit from the `LibraryItem` class.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#3)]  
 [!code-vb[c_StandaloneDataContractSerializer#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#3)]  
  
 <span data-ttu-id="4de34-132">Poniższy kod tworzy wystąpienie klasy przy użyciu serializatora `knownTypes` parametru.</span><span class="sxs-lookup"><span data-stu-id="4de34-132">The following code constructs an instance of the serializer using the `knownTypes` parameter.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#4](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#4)]
 [!code-vb[c_StandaloneDataContractSerializer#4](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#4)]  
  
### <a name="specifying-the-default-root-name-and-namespace"></a><span data-ttu-id="4de34-133">Określanie domyślną nazwę katalogu głównego i Namespace</span><span class="sxs-lookup"><span data-stu-id="4de34-133">Specifying the Default Root Name and Namespace</span></span>  
 <span data-ttu-id="4de34-134">Zwykle podczas serializowany jest obiekt, domyślną nazwę i przestrzeń nazw elementu XML najbardziej zewnętrznego są określane zgodnie z nazwą kontraktu danych i przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="4de34-134">Normally, when an object is serialized, the default name and namespace of the outermost XML element are determined according to the data contract name and namespace.</span></span> <span data-ttu-id="4de34-135">Nazwy wszystkich elementów wewnętrzny zależą od nazw elementów członkowskich danych i ich przestrzeń nazw jest przestrzeń nazw kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="4de34-135">The names of all inner elements are determined from data member names, and their namespace is the data contract’s namespace.</span></span> <span data-ttu-id="4de34-136">W poniższym przykładzie `Name` i `Namespace` wartości konstruktorów <xref:System.Runtime.Serialization.DataContractAttribute> i <xref:System.Runtime.Serialization.DataMemberAttribute> klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-136">The following example sets `Name` and `Namespace` values in the constructors of the <xref:System.Runtime.Serialization.DataContractAttribute> and <xref:System.Runtime.Serialization.DataMemberAttribute> classes.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#5)]
 [!code-vb[c_StandaloneDataContractSerializer#5](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#5)]  
  
 <span data-ttu-id="4de34-137">Serializacji wystąpienia `Person` klasę XML podobny do następującego.</span><span class="sxs-lookup"><span data-stu-id="4de34-137">Serializing an instance of the `Person` class produces XML similar to the following.</span></span>  
  
```xml  
<PersonContract xmlns="http://schemas.contoso.com">  
  <AddressMember>  
    <StreetMember>123 Main Street</StreetMember>  
   </AddressMember>  
</PersonContract>  
```  
  
 <span data-ttu-id="4de34-138">Jednak można dostosować domyślną nazwę i przestrzeń nazw głównego elementu przez przekazanie wartości `rootName` i `rootNamespace` parametry <xref:System.Runtime.Serialization.DataContractSerializer> konstruktora.</span><span class="sxs-lookup"><span data-stu-id="4de34-138">However, you can customize the default name and namespace of the root element by passing the values of the `rootName` and `rootNamespace` parameters to the <xref:System.Runtime.Serialization.DataContractSerializer> constructor.</span></span> <span data-ttu-id="4de34-139">Należy pamiętać, że `rootNamespace` nie ma wpływu na przestrzeń nazw zawartych w niej elementów, które odnoszą się do elementów członkowskich danych.</span><span class="sxs-lookup"><span data-stu-id="4de34-139">Note that the `rootNamespace` does not affect the namespace of the contained elements that correspond to data members.</span></span> <span data-ttu-id="4de34-140">Wpływa on tylko przestrzeń nazw elementu najbardziej zewnętrznego.</span><span class="sxs-lookup"><span data-stu-id="4de34-140">It affects only the namespace of the outermost element.</span></span>  
  
 <span data-ttu-id="4de34-141">Te wartości mogą być przekazywane jako parametry lub wystąpień <xref:System.Xml.XmlDictionaryString> klasy, aby umożliwić ich Optymalizacja za pomocą binarny format XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-141">These values can be passed as strings or instances of the <xref:System.Xml.XmlDictionaryString> class to allow for their optimization using the binary XML format.</span></span>  
  
### <a name="setting-the-maximum-objects-quota"></a><span data-ttu-id="4de34-142">Ustawienie limitu przydziału maksymalnej obiektów</span><span class="sxs-lookup"><span data-stu-id="4de34-142">Setting the Maximum Objects Quota</span></span>  
 <span data-ttu-id="4de34-143">Niektóre `DataContractSerializer` mają przeciążenia konstruktora `maxItemsInObjectGraph` parametru.</span><span class="sxs-lookup"><span data-stu-id="4de34-143">Some `DataContractSerializer` constructor overloads have a `maxItemsInObjectGraph` parameter.</span></span> <span data-ttu-id="4de34-144">Ten parametr określa maksymalną liczbę obiektów serializator serializuje i deserializuje w jednej <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> wywołania metody.</span><span class="sxs-lookup"><span data-stu-id="4de34-144">This parameter determines the maximum number of objects the serializer serializes or deserializes in a single <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> method call.</span></span> <span data-ttu-id="4de34-145">(Metoda odczytuje zawsze jednego obiektu głównego, ale ten obiekt może mieć inne obiekty w jej elementów członkowskich danych.</span><span class="sxs-lookup"><span data-stu-id="4de34-145">(The method always reads one root object, but this object may have other objects in its data members.</span></span> <span data-ttu-id="4de34-146">Te obiekty mogą mieć inne obiekty itd.) Wartość domyślna to 65536.</span><span class="sxs-lookup"><span data-stu-id="4de34-146">Those objects may have other objects, and so on.) The default is 65536.</span></span> <span data-ttu-id="4de34-147">Należy pamiętać, że podczas serializacji lub deserializacji tablic, każdy wpis tablicy jest traktowana jako oddzielny obiekt.</span><span class="sxs-lookup"><span data-stu-id="4de34-147">Note that when serializing or deserializing arrays, every array entry counts as a separate object.</span></span> <span data-ttu-id="4de34-148">Należy również zauważyć, że niektóre obiekty mogą ma reprezentacji w postaci dużej ilości pamięci, a więc tego samego przydziału nie może być wystarczające, aby zapobiec typu "odmowa usługi".</span><span class="sxs-lookup"><span data-stu-id="4de34-148">Also, note that some objects may have a large memory representation, and so this quota alone may not be sufficient to prevent a denial of service attack.</span></span> <span data-ttu-id="4de34-149">Aby uzyskać więcej informacji, zobacz [zagadnienia dotyczące zabezpieczeń dla danych](../../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span><span class="sxs-lookup"><span data-stu-id="4de34-149">For more information, see [Security Considerations for Data](../../../../docs/framework/wcf/feature-details/security-considerations-for-data.md).</span></span> <span data-ttu-id="4de34-150">Jeśli potrzebujesz zwiększyć ten przydział ponad wartość domyślną, należy to zrobić zarówno na wysyłanie (serializację) i odbieranie strony (deserializacji), ponieważ dotyczy zarówno podczas odczytywania i zapisywania danych.</span><span class="sxs-lookup"><span data-stu-id="4de34-150">If you need to increase this quota beyond the default value, it is important to do so both on the sending (serializing) and receiving (deserializing) sides because it applies to both when reading and writing data.</span></span>  
  
### <a name="round-trips"></a><span data-ttu-id="4de34-151">Rund</span><span class="sxs-lookup"><span data-stu-id="4de34-151">Round Trips</span></span>  
 <span data-ttu-id="4de34-152">A *Rundy* występuje, gdy obiekt jest zdeserializować i ponownie zserializowane w jednej operacji.</span><span class="sxs-lookup"><span data-stu-id="4de34-152">A *round trip* occurs when an object is deserialized and re-serialized in one operation.</span></span> <span data-ttu-id="4de34-153">W związku z tym z pliku XML do wystąpienia obiektu i z powrotem ponownie umieszczanej w kodzie to strumień XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-153">Thus, it goes from XML to an object instance, and back again into an XML stream.</span></span>  
  
 <span data-ttu-id="4de34-154">Niektóre `DataContractSerializer` mają przeciążenia konstruktora `ignoreExtensionDataObject` parametr, który ma ustawioną wartość `false` domyślnie.</span><span class="sxs-lookup"><span data-stu-id="4de34-154">Some `DataContractSerializer` constructor overloads have an `ignoreExtensionDataObject` parameter, which is set to `false` by default.</span></span> <span data-ttu-id="4de34-155">W tym trybie domyślne można wysyłać dane na podróż z nowszej wersji kontraktu danych za pomocą starszej wersji i z powrotem do nowszej wersji bez utraty, jak długo implementuje kontraktu danych <xref:System.Runtime.Serialization.IExtensibleDataObject> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4de34-155">In this default mode, data can be sent on a round trip from a newer version of a data contract through an older version and back to the newer version without loss, as long as the data contract implements the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="4de34-156">Na przykład, załóżmy, że wersja 1 `Person` zawiera kontrakt danych `Name` i `PhoneNumber` elementów członkowskich danych i w wersji 2 dodaje `Nickname` elementu członkowskiego.</span><span class="sxs-lookup"><span data-stu-id="4de34-156">For example, suppose version 1 of the `Person` data contract contains the `Name` and `PhoneNumber` data members, and version 2 adds a `Nickname` member.</span></span> <span data-ttu-id="4de34-157">Jeśli `IExtensibleDataObject` zaimplementowano podczas wysyłania informacji z wersji 2 do wersji 1, `Nickname` dane są przechowywane i następnie ponownie wysyłanego, gdy dane są serializowane ponownie; w związku z tym nie dane zostaną utracone w obiegu.</span><span class="sxs-lookup"><span data-stu-id="4de34-157">If `IExtensibleDataObject` is implemented, when sending information from version 2 to version 1, the `Nickname` data is stored, and then re-emitted when the data is serialized again; therefore, no data is lost in the round trip.</span></span> <span data-ttu-id="4de34-158">Aby uzyskać więcej informacji, zobacz [kontrakty danych zgodne z nowszymi](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) i [przechowywanie wersji kontraktów danych](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="4de34-158">For more information, see [Forward-Compatible Data Contracts](../../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) and [Data Contract Versioning](../../../../docs/framework/wcf/feature-details/data-contract-versioning.md).</span></span>  
  
#### <a name="security-and-schema-validity-concerns-with-round-trips"></a><span data-ttu-id="4de34-159">Zabezpieczenia i problemy ważności schematu z wystąpień komunikacji dwustronnej</span><span class="sxs-lookup"><span data-stu-id="4de34-159">Security and Schema Validity Concerns with Round Trips</span></span>  
 <span data-ttu-id="4de34-160">Rund może mieć wpływ na bezpieczeństwo.</span><span class="sxs-lookup"><span data-stu-id="4de34-160">Round trips may have security implications.</span></span> <span data-ttu-id="4de34-161">Na przykład podczas deserializacji i przechowywania dużych ilości danych nadmiarowe może stanowić zagrożenie bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="4de34-161">For example, deserializing and storing large amounts of extraneous data may be a security risk.</span></span> <span data-ttu-id="4de34-162">Może być ponownie emitowanie te dane, że nie istnieje sposób, aby sprawdzić, zwłaszcza jeśli podpisy cyfrowe są związane z punktu widzenia bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="4de34-162">There may be security concerns about re-emitting this data that there is no way to verify, especially if digital signatures are involved.</span></span> <span data-ttu-id="4de34-163">Na przykład w poprzednim scenariuszu punkt końcowy w wersji 1 można podpisać `Nickname` wartość, która zawiera dane złośliwe.</span><span class="sxs-lookup"><span data-stu-id="4de34-163">For example, in the previous scenario, the version 1 endpoint could be signing a `Nickname` value that contains malicious data.</span></span> <span data-ttu-id="4de34-164">Ponadto może być zastrzeżenia co do poprawności schematu: punkt końcowy może być zawsze Emituj danych zgodną ściśle jej podane kontrakt i nie wszystkie dodatkowe wartości.</span><span class="sxs-lookup"><span data-stu-id="4de34-164">Finally, there may be schema validity concerns: an endpoint may want to always emit data that strictly adheres to its stated contract and not any extra values.</span></span> <span data-ttu-id="4de34-165">W poprzednim przykładzie kontraktu punktu końcowego w wersji 1 mówi tylko emituje `Name` i `PhoneNumber`i jeśli sprawdzanie poprawności schematu jest używana, emitowanie nadmiarowe `Nickname` wartość powoduje niepowodzenie sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="4de34-165">In the previous example, the version 1 endpoint’s contract says that it emits only `Name` and `PhoneNumber`, and if schema validation is being used, emitting the extra `Nickname` value causes validation to fail.</span></span>  
  
#### <a name="enabling-and-disabling-round-trips"></a><span data-ttu-id="4de34-166">Włączanie i wyłączanie rund</span><span class="sxs-lookup"><span data-stu-id="4de34-166">Enabling and Disabling Round Trips</span></span>  
 <span data-ttu-id="4de34-167">Aby wyłączyć rund, nie należy implementować <xref:System.Runtime.Serialization.IExtensibleDataObject> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4de34-167">To turn off round trips, do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface.</span></span> <span data-ttu-id="4de34-168">Jeśli użytkownik nie kontrolują typy, ustaw `ignoreExtensionDataObject` parametr `true` osiągnąć ten sam efekt.</span><span class="sxs-lookup"><span data-stu-id="4de34-168">If you have no control over the types, set the `ignoreExtensionDataObject` parameter to `true` to achieve the same effect.</span></span>  
  
### <a name="object-graph-preservation"></a><span data-ttu-id="4de34-169">Obiekt wykresu konserwacji</span><span class="sxs-lookup"><span data-stu-id="4de34-169">Object Graph Preservation</span></span>  
 <span data-ttu-id="4de34-170">Zwykle Serializator nie interesujących tożsamości obiektu, zgodnie z poniższym kodem.</span><span class="sxs-lookup"><span data-stu-id="4de34-170">Normally, the serializer does not care about object identity, as in the following code.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#6](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#6)]
 [!code-vb[c_StandaloneDataContractSerializer#6](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#6)]  
  
 <span data-ttu-id="4de34-171">Poniższy kod tworzy zamówienia zakupu.</span><span class="sxs-lookup"><span data-stu-id="4de34-171">The following code creates a purchase order.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#7](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#7)]
 [!code-vb[c_StandaloneDataContractSerializer#7](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#7)]  
  
 <span data-ttu-id="4de34-172">Zwróć uwagę, że `billTo` i `shipTo` pola są ustawione w tym samym wystąpieniu obiektu.</span><span class="sxs-lookup"><span data-stu-id="4de34-172">Notice that `billTo` and `shipTo` fields are set to the same object instance.</span></span> <span data-ttu-id="4de34-173">Jednak XML wygenerowanych duplikaty zduplikowane informacje i wygląda podobnie do następującego pliku XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-173">However, the generated XML duplicates the information duplicated, and looks similar to the following XML.</span></span>  
  
```xml  
<PurchaseOrder>  
  <billTo><street>123 Main St.</street></billTo>  
  <shipTo><street>123 Main St.</street></shipTo>  
</PurchaseOrder>  
```  
  
 <span data-ttu-id="4de34-174">Jednak takie podejście ma następujące właściwości, które mogą być niepożądane:</span><span class="sxs-lookup"><span data-stu-id="4de34-174">However, this approach has the following characteristics, which may be undesirable:</span></span>  
  
-   <span data-ttu-id="4de34-175">Wydajność.</span><span class="sxs-lookup"><span data-stu-id="4de34-175">Performance.</span></span> <span data-ttu-id="4de34-176">Replikowanie danych jest nieefektywne.</span><span class="sxs-lookup"><span data-stu-id="4de34-176">Replicating data is inefficient.</span></span>  
  
-   <span data-ttu-id="4de34-177">Odwołania cykliczne.</span><span class="sxs-lookup"><span data-stu-id="4de34-177">Circular references.</span></span> <span data-ttu-id="4de34-178">Jeśli obiekty odwołują się do siebie, nawet za pośrednictwem innych obiektów serializacji za pomocą replikacji powoduje nieskończoną pętlę.</span><span class="sxs-lookup"><span data-stu-id="4de34-178">If objects refer to themselves, even through other objects, serializing by replication results in an infinite loop.</span></span> <span data-ttu-id="4de34-179">(Serializator zgłasza <xref:System.Runtime.Serialization.SerializationException> w takim przypadku.)</span><span class="sxs-lookup"><span data-stu-id="4de34-179">(The serializer throws a <xref:System.Runtime.Serialization.SerializationException> if this happens.)</span></span>  
  
-   <span data-ttu-id="4de34-180">Semantyki.</span><span class="sxs-lookup"><span data-stu-id="4de34-180">Semantics.</span></span> <span data-ttu-id="4de34-181">Czasami jest ważne zachować fakt, że są dwa odwołania do tego samego obiektu, a nie dwa obiekty identyczne.</span><span class="sxs-lookup"><span data-stu-id="4de34-181">Sometimes it is important to preserve the fact that two references are to the same object, and not to two identical objects.</span></span>  
  
 <span data-ttu-id="4de34-182">Te powodów, niektóre `DataContractSerializer` mają przeciążenia konstruktora `preserveObjectReferences` parametr (wartość domyślna to `false`).</span><span class="sxs-lookup"><span data-stu-id="4de34-182">For these reasons, some `DataContractSerializer` constructor overloads have a `preserveObjectReferences` parameter (the default is `false`).</span></span> <span data-ttu-id="4de34-183">Jeśli ten parametr jest równa `true`, specjalnej metody kodowania odwołania do obiektów, które rozumie tylko WCF, jest używany.</span><span class="sxs-lookup"><span data-stu-id="4de34-183">When this parameter is set to `true`, a special method of encoding object references, which only WCF understands, is used.</span></span> <span data-ttu-id="4de34-184">Jeśli wartość `true`, przykładowy kod XML jest teraz podobny do następującego.</span><span class="sxs-lookup"><span data-stu-id="4de34-184">When set to `true`, the XML code example now resembles the following.</span></span>  
  
```xml  
<PurchaseOrder ser:id="1">  
  <billTo ser:id="2"><street ser:id="3">123 Main St.</street></billTo>  
  <shipTo ser:ref="2"/>  
</PurchaseOrder>  
```  
  
 <span data-ttu-id="4de34-185">Przestrzeń nazw "ser" odwołuje się do przestrzeni nazw standardowe serializacji, http://schemas.microsoft.com/2003/10/Serialization/.</span><span class="sxs-lookup"><span data-stu-id="4de34-185">The "ser" namespace refers to the standard serialization namespace, http://schemas.microsoft.com/2003/10/Serialization/.</span></span> <span data-ttu-id="4de34-186">Każdy element danych jest serializować tylko raz i podany identyfikator i kolejne używa wynik odwołanie do danych już serializacji.</span><span class="sxs-lookup"><span data-stu-id="4de34-186">Each piece of data is serialized only once and given an ID number, and subsequent uses result in a reference to the already serialized data.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="4de34-187">Jeśli atrybuty zarówno "id" i "ref" są obecne w kontraktu danych `XMLElement`, jest honorowane atrybutu "ref" i "id" atrybut jest ignorowany.</span><span class="sxs-lookup"><span data-stu-id="4de34-187">If both "id" and "ref" attributes are present in the data contract `XMLElement`, then the "ref" attribute is honored and the "id" attribute is ignored.</span></span>  
  
 <span data-ttu-id="4de34-188">Należy pamiętać o ograniczeniach ten tryb:</span><span class="sxs-lookup"><span data-stu-id="4de34-188">It is important to understand the limitations of this mode:</span></span>  
  
-   <span data-ttu-id="4de34-189">Kod XML `DataContractSerializer` tworzy z `preserveObjectReferences` ustawioną `true` nie jest współpraca z innymi technologiami i jest możliwy tylko przez inną `DataContractSerializer` wystąpienia, także z `preserveObjectReferences` ustawioną `true`.</span><span class="sxs-lookup"><span data-stu-id="4de34-189">The XML the `DataContractSerializer` produces with `preserveObjectReferences` set to `true` is not interoperable with any other technologies, and can be accessed only by another `DataContractSerializer` instance, also with `preserveObjectReferences` set to `true`.</span></span>  
  
-   <span data-ttu-id="4de34-190">Brak obsługi metadanych (schemat) dla tej funkcji.</span><span class="sxs-lookup"><span data-stu-id="4de34-190">There is no metadata (schema) support for this feature.</span></span> <span data-ttu-id="4de34-191">Schemat, który jest tworzony jest prawidłowe tylko w przypadku gdy `preserveObjectReferences` ma ustawioną wartość `false`.</span><span class="sxs-lookup"><span data-stu-id="4de34-191">The schema that is produced is valid only for the case when `preserveObjectReferences` is set to `false`.</span></span>  
  
-   <span data-ttu-id="4de34-192">Ta funkcja może spowodować serializacji i deserializacji procesu działać wolniej.</span><span class="sxs-lookup"><span data-stu-id="4de34-192">This feature may cause the serialization and deserialization process to run slower.</span></span> <span data-ttu-id="4de34-193">Mimo że dane muszą zostać zreplikowane, należy wykonać dodatkowy obiekt porównania w tym trybie.</span><span class="sxs-lookup"><span data-stu-id="4de34-193">Although data does not have to be replicated, extra object comparisons must be performed in this mode.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="4de34-194">Gdy `preserveObjectReferences` jest włączony tryb, jest szczególnie ważne, aby ustawić `maxItemsInObjectGraph` wartość przydziału poprawne.</span><span class="sxs-lookup"><span data-stu-id="4de34-194">When the `preserveObjectReferences` mode is enabled, it is especially important to set the `maxItemsInObjectGraph` value to the correct quota.</span></span> <span data-ttu-id="4de34-195">Ze względu na sposób tablice są obsługiwane w tym trybie jest łatwe osobie atakującej do skonstruowania małych niebezpieczną wiadomość, która powoduje zużycie pamięci dużych ograniczone tylko przez `maxItemsInObjectGraph` przydziału.</span><span class="sxs-lookup"><span data-stu-id="4de34-195">Due to the way arrays are handled in this mode, it is easy for an attacker to construct a small malicious message that results in large memory consumption limited only by the `maxItemsInObjectGraph` quota.</span></span>  
  
### <a name="specifying-a-data-contract-surrogate"></a><span data-ttu-id="4de34-196">Określanie Surogat kontraktu danych</span><span class="sxs-lookup"><span data-stu-id="4de34-196">Specifying a Data Contract Surrogate</span></span>  
 <span data-ttu-id="4de34-197">Niektóre `DataContractSerializer` mają przeciążenia konstruktora `dataContractSurrogate` parametr, który może być ustawiony na `null`.</span><span class="sxs-lookup"><span data-stu-id="4de34-197">Some `DataContractSerializer` constructor overloads have a `dataContractSurrogate` parameter, which may be set to `null`.</span></span> <span data-ttu-id="4de34-198">W przeciwnym razie go użyć do określenia *Surogat kontraktu danych*, który jest typem, który implementuje <xref:System.Runtime.Serialization.IDataContractSurrogate> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4de34-198">Otherwise, you can use it to specify a *data contract surrogate*, which is a type that implements the <xref:System.Runtime.Serialization.IDataContractSurrogate> interface.</span></span> <span data-ttu-id="4de34-199">Interfejs umożliwia następnie dostosować serializacji i deserializacji procesu.</span><span class="sxs-lookup"><span data-stu-id="4de34-199">You can then use the interface to customize the serialization and deserialization process.</span></span> <span data-ttu-id="4de34-200">Aby uzyskać więcej informacji, zobacz [surogaty kontraktu danych](../../../../docs/framework/wcf/extending/data-contract-surrogates.md).</span><span class="sxs-lookup"><span data-stu-id="4de34-200">For more information, see [Data Contract Surrogates](../../../../docs/framework/wcf/extending/data-contract-surrogates.md).</span></span>  
  
## <a name="serialization"></a><span data-ttu-id="4de34-201">Serializacja</span><span class="sxs-lookup"><span data-stu-id="4de34-201">Serialization</span></span>  
 <span data-ttu-id="4de34-202">Poniższe informacje dotyczą dowolnej klasy, która dziedziczy <xref:System.Runtime.Serialization.XmlObjectSerializer>, takie jak <xref:System.Runtime.Serialization.DataContractSerializer> i <xref:System.Runtime.Serialization.NetDataContractSerializer> klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-202">The following information applies to any class that inherits from the <xref:System.Runtime.Serialization.XmlObjectSerializer>, including the <xref:System.Runtime.Serialization.DataContractSerializer> and <xref:System.Runtime.Serialization.NetDataContractSerializer> classes.</span></span>  
  
### <a name="simple-serialization"></a><span data-ttu-id="4de34-203">Proste serializacji</span><span class="sxs-lookup"><span data-stu-id="4de34-203">Simple Serialization</span></span>  
 <span data-ttu-id="4de34-204">Najprostszym sposobem szeregowania obiektu jest przekazywany do <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="4de34-204">The most basic way to serialize an object is to pass it to the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> method.</span></span> <span data-ttu-id="4de34-205">Istnieją trzy przeciążenia, jeden dla zapisywania <xref:System.IO.Stream>, <xref:System.Xml.XmlWriter>, lub <xref:System.Xml.XmlDictionaryWriter>.</span><span class="sxs-lookup"><span data-stu-id="4de34-205">There are three overloads, one each for writing to a <xref:System.IO.Stream>, an <xref:System.Xml.XmlWriter>, or an <xref:System.Xml.XmlDictionaryWriter>.</span></span> <span data-ttu-id="4de34-206">Z <xref:System.IO.Stream> przeciążenia, dane wyjściowe jest XML przy użyciu kodowania UTF-8.</span><span class="sxs-lookup"><span data-stu-id="4de34-206">With the <xref:System.IO.Stream> overload, the output is XML in the UTF-8 encoding.</span></span> <span data-ttu-id="4de34-207">Z <xref:System.Xml.XmlDictionaryWriter> przeciążenia, serializator optymalizuje dane wyjściowe dla Binarny XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-207">With the <xref:System.Xml.XmlDictionaryWriter> overload, the serializer optimizes its output for binary XML.</span></span>  
  
 <span data-ttu-id="4de34-208">Korzystając z <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> metoda, serializator domyślną nazwę i przestrzeń nazw dla elementu otoki i zapisuje go wraz z zawartością (zobacz poprzednią sekcję "Określenie domyślnego głównego Name i Namespace").</span><span class="sxs-lookup"><span data-stu-id="4de34-208">When using the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> method, the serializer uses the default name and namespace for the wrapper element and writes it out along with the contents (see the previous "Specifying the Default Root Name and Namespace" section).</span></span>  
  
 <span data-ttu-id="4de34-209">W poniższym przykładzie pokazano zapisu z <xref:System.Xml.XmlDictionaryWriter>.</span><span class="sxs-lookup"><span data-stu-id="4de34-209">The following example demonstrates writing with an <xref:System.Xml.XmlDictionaryWriter>.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#8](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#8)]
 [!code-vb[c_StandaloneDataContractSerializer#8](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#8)]  
  
 <span data-ttu-id="4de34-210">Daje to XML podobny do następującego.</span><span class="sxs-lookup"><span data-stu-id="4de34-210">This produces XML similar to the following.</span></span>  
  
```xml  
<Person>  
  <Name>Jay Hamlin</Name>  
  <Address>123 Main St.</Address>  
</Person>  
```  
  
### <a name="step-by-step-serialization"></a><span data-ttu-id="4de34-211">Serializacja krok po kroku</span><span class="sxs-lookup"><span data-stu-id="4de34-211">Step-By-Step Serialization</span></span>  
 <span data-ttu-id="4de34-212">Użyj <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A>, <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObjectContent%2A>, i <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> metod można zapisać elementu końcowego zapis zawartości obiektu i odpowiednio Zamknij element otoki.</span><span class="sxs-lookup"><span data-stu-id="4de34-212">Use the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A>, <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObjectContent%2A>, and <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> methods to write the end element, write the object contents, and close the wrapper element, respectively.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="4de34-213">Istnieją nie <xref:System.IO.Stream> przeciążenia tych metod.</span><span class="sxs-lookup"><span data-stu-id="4de34-213">There are no <xref:System.IO.Stream> overloads of these methods.</span></span>  
  
 <span data-ttu-id="4de34-214">Ten krok serializacji ma dwa typowych zastosowań.</span><span class="sxs-lookup"><span data-stu-id="4de34-214">This step-by-step serialization has two common uses.</span></span> <span data-ttu-id="4de34-215">Jedna jest do wstawiania zawartości, takich jak atrybuty lub komentarzy między `WriteStartObject` i `WriteObjectContent`, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="4de34-215">One is to insert contents such as attributes or comments between `WriteStartObject` and `WriteObjectContent`,  as shown in the following example.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#9](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#9)]
 [!code-vb[c_StandaloneDataContractSerializer#9](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#9)]  
  
 <span data-ttu-id="4de34-216">Daje to XML podobny do następującego.</span><span class="sxs-lookup"><span data-stu-id="4de34-216">This produces XML similar to the following.</span></span>  
  
```xml  
<Person serializedBy="myCode">  
  <Name>Jay Hamlin</Name>  
  <Address>123 Main St.</Address>  
</Person>  
```  
  
 <span data-ttu-id="4de34-217">Inny zazwyczaj jest używane, aby uniknąć używania <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A> i <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> całkowicie, napisać własny element otoki niestandardowe (lub nawet Pomiń zapisywanie otoka całkowicie), jak pokazano w poniższym kodzie.</span><span class="sxs-lookup"><span data-stu-id="4de34-217">Another common use is to avoid using <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteStartObject%2A> and <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteEndObject%2A> entirely, and to write your own custom wrapper element (or even skip writing a wrapper altogether), as shown in the following code.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#10)]
 [!code-vb[c_StandaloneDataContractSerializer#10](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#10)]  
  
 <span data-ttu-id="4de34-218">Daje to XML podobny do następującego.</span><span class="sxs-lookup"><span data-stu-id="4de34-218">This produces XML similar to the following.</span></span>  
  
```xml  
<MyCustomWrapper>  
  <Name>Jay Hamlin</Name>  
  <Address>123 Main St.</Address>  
</MyCustomWrapper>  
```  
  
> [!NOTE]
>  <span data-ttu-id="4de34-219">Za pomocą serializacji krok może spowodować nieprawidłowe schematu XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-219">Using step-by-step serialization may result in schema-invalid XML.</span></span>  
  
## <a name="deserialization"></a><span data-ttu-id="4de34-220">Deserializacja</span><span class="sxs-lookup"><span data-stu-id="4de34-220">Deserialization</span></span>  
 <span data-ttu-id="4de34-221">Poniższe informacje dotyczą dowolnej klasy, która dziedziczy <xref:System.Runtime.Serialization.XmlObjectSerializer>, takie jak <xref:System.Runtime.Serialization.DataContractSerializer> i <xref:System.Runtime.Serialization.NetDataContractSerializer> klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-221">The following information applies to any class that inherits from the <xref:System.Runtime.Serialization.XmlObjectSerializer>, including the <xref:System.Runtime.Serialization.DataContractSerializer> and <xref:System.Runtime.Serialization.NetDataContractSerializer> classes.</span></span>  
  
 <span data-ttu-id="4de34-222">Najprostszym sposobem deserializacji obiektu jest wywoływanie jednego z <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> przeciążenia metody.</span><span class="sxs-lookup"><span data-stu-id="4de34-222">The most basic way to deserialize an object is to call one of the <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> method overloads.</span></span> <span data-ttu-id="4de34-223">Istnieją trzy przeciążenia, jeden dla odczytu z <xref:System.Xml.XmlDictionaryReader>, `XmlReader`, lub `Stream`.</span><span class="sxs-lookup"><span data-stu-id="4de34-223">There are three overloads, one each for reading with a <xref:System.Xml.XmlDictionaryReader>, an `XmlReader`, or a `Stream`.</span></span> <span data-ttu-id="4de34-224">Należy pamiętać, że `Stream` przeciążenia tworzy tekstową <xref:System.Xml.XmlDictionaryReader> nie jest chroniony przez dowolnego przydziałów i powinien być używany tylko do odczytu danych zaufanych.</span><span class="sxs-lookup"><span data-stu-id="4de34-224">Note that the `Stream` overload creates a textual <xref:System.Xml.XmlDictionaryReader> that is not protected by any quotas, and should be used only to read trusted data.</span></span>  
  
 <span data-ttu-id="4de34-225">Należy również zauważyć, że obiekt `ReadObject` metoda zwróci wartość musi być rzutowane na odpowiedniego typu.</span><span class="sxs-lookup"><span data-stu-id="4de34-225">Also note that the object the `ReadObject` method returns must be cast to the appropriate type.</span></span>  
  
 <span data-ttu-id="4de34-226">Poniższy kod tworzy wystąpienie klasy <xref:System.Runtime.Serialization.DataContractSerializer> i <xref:System.Xml.XmlDictionaryReader>, następnie deserializuje `Person` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="4de34-226">The following code constructs an instance of the <xref:System.Runtime.Serialization.DataContractSerializer> and an <xref:System.Xml.XmlDictionaryReader>, then deserializes a `Person` instance.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#11](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#11)]
 [!code-vb[c_StandaloneDataContractSerializer#11](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#11)]  
  
 <span data-ttu-id="4de34-227">Przed wywołaniem <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> metodę, umieść modułu odczytującego XML na element otoki lub węzłem z systemem innym niż zawartości, który poprzedza element otoki.</span><span class="sxs-lookup"><span data-stu-id="4de34-227">Before calling the <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> method, position the XML reader on the wrapper element or on a non-content node that precedes the wrapper element.</span></span> <span data-ttu-id="4de34-228">Można to zrobić przez wywołanie metody <xref:System.Xml.XmlReader.Read%2A> metody <xref:System.Xml.XmlReader> ani jego pochodnym i testowania <xref:System.Xml.XmlReader.NodeType%2A>, jak pokazano w poniższym kodzie.</span><span class="sxs-lookup"><span data-stu-id="4de34-228">You can do this by calling the <xref:System.Xml.XmlReader.Read%2A> method of the <xref:System.Xml.XmlReader> or its derivation, and testing the <xref:System.Xml.XmlReader.NodeType%2A>, as shown in the following code.</span></span>  
  
 [!code-csharp[c_StandaloneDataContractSerializer#12](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_standalonedatacontractserializer/cs/source.cs#12)]
 [!code-vb[c_StandaloneDataContractSerializer#12](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_standalonedatacontractserializer/vb/source.vb#12)]  
  
 <span data-ttu-id="4de34-229">Należy pamiętać, że mogą odczytywać atrybuty w tym elemencie otoki, przed przekazaniem czytelnika `ReadObject`.</span><span class="sxs-lookup"><span data-stu-id="4de34-229">Note that you can read attributes on this wrapper element before handing the reader to `ReadObject`.</span></span>  
  
 <span data-ttu-id="4de34-230">Korzystając z jednego miejsca proste `ReadObject` przeciążenia, Deserializator szuka domyślną nazwę i przestrzeń nazw dla elementu otoki (zobacz poprzednią sekcję "Określenie domyślnego głównego Name i Namespace") i zgłasza wyjątek, jeśli znajdzie nieznany element.</span><span class="sxs-lookup"><span data-stu-id="4de34-230">When using one of the simple `ReadObject` overloads, the deserializer looks for the default name and namespace on the wrapper element (see the preceding section, "Specifying the Default Root Name and Namespace") and throws an exception if it finds an unknown element.</span></span> <span data-ttu-id="4de34-231">W powyższym przykładzie `<Person>` oczekuje elementu otoki.</span><span class="sxs-lookup"><span data-stu-id="4de34-231">In the preceding example, the `<Person>` wrapper element is expected.</span></span> <span data-ttu-id="4de34-232"><xref:System.Runtime.Serialization.XmlObjectSerializer.IsStartObject%2A> Metoda jest wywoływana, aby sprawdzić, czy czytnik jest umieszczony w elemencie o nazwie zgodnie z oczekiwaniami.</span><span class="sxs-lookup"><span data-stu-id="4de34-232">The <xref:System.Runtime.Serialization.XmlObjectSerializer.IsStartObject%2A> method is called to verify that the reader is positioned on an element that is named as expected.</span></span>  
  
 <span data-ttu-id="4de34-233">Nie istnieje sposób, aby wyłączyć to sprawdzenie nazwa elementu otoki; Niektóre przeciążeń `ReadObject` metoda przyjmować parametrów typu Boolean `verifyObjectName`, która ma wartość `true` domyślnie.</span><span class="sxs-lookup"><span data-stu-id="4de34-233">There is a way to disable this wrapper element name check; some overloads of the `ReadObject` method take the Boolean parameter `verifyObjectName`, which is set to `true` by default.</span></span> <span data-ttu-id="4de34-234">Jeśli wartość `false`, nazwę i przestrzeń nazw elementu otoki jest ignorowana.</span><span class="sxs-lookup"><span data-stu-id="4de34-234">When set to `false`, the name and namespace of the wrapper element is ignored.</span></span> <span data-ttu-id="4de34-235">Jest to przydatne podczas odczytywania pliku XML, napisane przy użyciu mechanizmu serializacji krok po kroku opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="4de34-235">This is useful for reading XML that was written using the step-by-step serialization mechanism described previously.</span></span>  
  
## <a name="using-the-netdatacontractserializer"></a><span data-ttu-id="4de34-236">Przy użyciu NetDataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="4de34-236">Using the NetDataContractSerializer</span></span>  
 <span data-ttu-id="4de34-237">Główną różnicą między `DataContractSerializer` i <xref:System.Runtime.Serialization.NetDataContractSerializer> jest to, że `DataContractSerializer` używa nazwy kontraktu danych, podczas gdy `NetDataContractSerializer` generuje pełny [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nazwy zestawu i typu serializacji XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-237">The primary difference between the `DataContractSerializer` and the <xref:System.Runtime.Serialization.NetDataContractSerializer> is that the `DataContractSerializer` uses data contract names, whereas the `NetDataContractSerializer` outputs full [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] assembly and type names in the serialized XML.</span></span> <span data-ttu-id="4de34-238">Oznacza to, że dokładnie takie same typy muszą być udostępniane między punktami końcowymi serializacji i deserializacji.</span><span class="sxs-lookup"><span data-stu-id="4de34-238">This means that the exact same types must be shared between the serialization and deserialization endpoints.</span></span> <span data-ttu-id="4de34-239">Oznacza to mechanizm znanych typów nie jest wymagane w przypadku `NetDataContractSerializer` ponieważ znane są zawsze dokładnie typów do zdeserializowania.</span><span class="sxs-lookup"><span data-stu-id="4de34-239">This means that the known types mechanism is not required with the `NetDataContractSerializer` because the exact types to be deserialized are always known.</span></span>  
  
 <span data-ttu-id="4de34-240">Jednak może wystąpić pewne problemy:</span><span class="sxs-lookup"><span data-stu-id="4de34-240">However, several problems can occur:</span></span>  
  
-   <span data-ttu-id="4de34-241">Zabezpieczenia.</span><span class="sxs-lookup"><span data-stu-id="4de34-241">Security.</span></span> <span data-ttu-id="4de34-242">Załadowano dowolnego typu w pliku XML deserializacji.</span><span class="sxs-lookup"><span data-stu-id="4de34-242">Any type found in the XML being deserialized is loaded.</span></span> <span data-ttu-id="4de34-243">Można to wykorzystać, aby wymusić ładowania typów złośliwego.</span><span class="sxs-lookup"><span data-stu-id="4de34-243">This can be exploited to force the loading of malicious types.</span></span> <span data-ttu-id="4de34-244">Przy użyciu `NetDataContractSerializer` z niezaufanych danych należy przypisywać tylko wtedy, gdy *wiążącego serializacji* jest używana (przy użyciu <xref:System.Runtime.Serialization.NetDataContractSerializer.Binder%2A> parametrów właściwości lub konstruktora).</span><span class="sxs-lookup"><span data-stu-id="4de34-244">Using the `NetDataContractSerializer` with untrusted data should be done only if a *Serialization Binder* is used (using the <xref:System.Runtime.Serialization.NetDataContractSerializer.Binder%2A> property or constructor parameter).</span></span> <span data-ttu-id="4de34-245">Obiekt wiążący zezwala na tylko bezpiecznych typów do załadowania.</span><span class="sxs-lookup"><span data-stu-id="4de34-245">The binder permits only safe types to be loaded.</span></span> <span data-ttu-id="4de34-246">Mechanizm integratora jest taki sam jak ten, który typy w <xref:System.Runtime.Serialization> Użyj przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="4de34-246">The Binder mechanism is identical to the one that types in the <xref:System.Runtime.Serialization> namespace use.</span></span>  
  
-   <span data-ttu-id="4de34-247">Przechowywanie wersji.</span><span class="sxs-lookup"><span data-stu-id="4de34-247">Versioning.</span></span> <span data-ttu-id="4de34-248">Przy użyciu pełnej nazwy typ i zestaw w pliku XML znacznie ogranicza jak typy mogą być numerów wersji.</span><span class="sxs-lookup"><span data-stu-id="4de34-248">Using full type and assembly names in the XML severely restricts how types can be versioned.</span></span> <span data-ttu-id="4de34-249">Nie można zmienić następujących: wpisz nazwy przestrzeni nazw, nazw zestawów i wersji zestawu.</span><span class="sxs-lookup"><span data-stu-id="4de34-249">The following cannot be changed: type names, namespaces, assembly names, and assembly versions.</span></span> <span data-ttu-id="4de34-250">Ustawienie <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> właściwości lub konstruktora parametr <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple> zamiast wartość domyślną <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Full> umożliwia zmiany wersji zestawu, ale nie dla typów parametrów ogólnych.</span><span class="sxs-lookup"><span data-stu-id="4de34-250">Setting the <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> property or constructor parameter to <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Simple> instead of the default value of <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle.Full> allows for assembly version changes, but not for generic parameter types.</span></span>  
  
-   <span data-ttu-id="4de34-251">Współdziałanie.</span><span class="sxs-lookup"><span data-stu-id="4de34-251">Interoperability.</span></span> <span data-ttu-id="4de34-252">Ponieważ [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nazwy typ i zestaw są dołączane do pliku XML, platform innych niż [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] nie może uzyskać dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="4de34-252">Because [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type and assembly names are included in the XML, platforms other than the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] cannot access the resulting data.</span></span>  
  
-   <span data-ttu-id="4de34-253">Wydajność.</span><span class="sxs-lookup"><span data-stu-id="4de34-253">Performance.</span></span> <span data-ttu-id="4de34-254">Wypisywanie typ i zestaw nazwy znacznie zwiększa rozmiar wynikowy kod XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-254">Writing out the type and assembly names significantly increases the size of the resulting XML.</span></span>  
  
 <span data-ttu-id="4de34-255">Mechanizm ten jest podobny do pliku binarnego lub serializacji SOAP używane przez [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] zdalnych (w szczególności <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> i <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>).</span><span class="sxs-lookup"><span data-stu-id="4de34-255">This mechanism is similar to binary or SOAP serialization used by [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] remoting (specifically, the <xref:System.Runtime.Serialization.Formatters.Binary.BinaryFormatter> and the <xref:System.Runtime.Serialization.Formatters.Soap.SoapFormatter>).</span></span>  
  
 <span data-ttu-id="4de34-256">Przy użyciu `NetDataContractSerializer` jest podobny do sposobu używania `DataContractSerializer`, z następującymi różnicami:</span><span class="sxs-lookup"><span data-stu-id="4de34-256">Using the `NetDataContractSerializer` is similar to using the `DataContractSerializer`, with the following differences:</span></span>  
  
-   <span data-ttu-id="4de34-257">Konstruktory nie wymagają określenia typu głównego.</span><span class="sxs-lookup"><span data-stu-id="4de34-257">The constructors do not require you to specify a root type.</span></span> <span data-ttu-id="4de34-258">Może wykonywać serializację dowolnego typu tego samego wystąpienia `NetDataContractSerializer`.</span><span class="sxs-lookup"><span data-stu-id="4de34-258">You can serialize any type with the same instance of the `NetDataContractSerializer`.</span></span>  
  
-   <span data-ttu-id="4de34-259">Konstruktory nie akceptują listy znanych typów.</span><span class="sxs-lookup"><span data-stu-id="4de34-259">The constructors do not accept a list of known types.</span></span> <span data-ttu-id="4de34-260">Mechanizm znanych typów nie jest konieczne, jeśli nazwy typów są serializowane w pliku XML.</span><span class="sxs-lookup"><span data-stu-id="4de34-260">The known types mechanism is unnecessary if type names are serialized into the XML.</span></span>  
  
-   <span data-ttu-id="4de34-261">Konstruktory nie akceptują Surogat kontraktu danych.</span><span class="sxs-lookup"><span data-stu-id="4de34-261">The constructors do not accept a data contract surrogate.</span></span> <span data-ttu-id="4de34-262">Zamiast tego należy zaakceptować <xref:System.Runtime.Serialization.ISurrogateSelector> parametr o nazwie `surrogateSelector` (który mapuje <xref:System.Runtime.Serialization.NetDataContractSerializer.SurrogateSelector%2A> właściwości).</span><span class="sxs-lookup"><span data-stu-id="4de34-262">Instead, they accept an <xref:System.Runtime.Serialization.ISurrogateSelector> parameter called `surrogateSelector` (which maps to the <xref:System.Runtime.Serialization.NetDataContractSerializer.SurrogateSelector%2A> property).</span></span> <span data-ttu-id="4de34-263">Jest to mechanizm Surogat starszej wersji.</span><span class="sxs-lookup"><span data-stu-id="4de34-263">This is a legacy surrogate mechanism.</span></span>  
  
-   <span data-ttu-id="4de34-264">Konstruktory akceptuje parametr o nazwie `assemblyFormat` z <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> mapujący do <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="4de34-264">The constructors accept a parameter called `assemblyFormat` of the <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> that maps to the <xref:System.Runtime.Serialization.NetDataContractSerializer.AssemblyFormat%2A> property.</span></span> <span data-ttu-id="4de34-265">Jak wspomniano wcześniej, może być używany w celu zwiększenia możliwości przechowywania wersji serializator.</span><span class="sxs-lookup"><span data-stu-id="4de34-265">As discussed previously, this can be used to enhance the versioning capabilities of the serializer.</span></span> <span data-ttu-id="4de34-266">Jest to identyczne <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> mechanizm w pliku binarnego lub serializacji SOAP.</span><span class="sxs-lookup"><span data-stu-id="4de34-266">This is identical to the <xref:System.Runtime.Serialization.Formatters.FormatterAssemblyStyle> mechanism in binary or SOAP serialization.</span></span>  
  
-   <span data-ttu-id="4de34-267">Zaakceptuj konstruktorów <xref:System.Runtime.Serialization.StreamingContext> parametr o nazwie `context` mapujący do <xref:System.Runtime.Serialization.NetDataContractSerializer.Context%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="4de34-267">The constructors accept a <xref:System.Runtime.Serialization.StreamingContext> parameter called `context` that maps to the <xref:System.Runtime.Serialization.NetDataContractSerializer.Context%2A> property.</span></span> <span data-ttu-id="4de34-268">Służy to do przekazywania informacji do serializacji typów.</span><span class="sxs-lookup"><span data-stu-id="4de34-268">You can use this to pass information into types being serialized.</span></span> <span data-ttu-id="4de34-269">Użycie tego jest identyczna ze <xref:System.Runtime.Serialization.StreamingContext> mechanizmem używanym w innych <xref:System.Runtime.Serialization> klasy.</span><span class="sxs-lookup"><span data-stu-id="4de34-269">This usage is identical to that of the <xref:System.Runtime.Serialization.StreamingContext> mechanism used in other <xref:System.Runtime.Serialization> classes.</span></span>  
  
-   <span data-ttu-id="4de34-270"><xref:System.Runtime.Serialization.NetDataContractSerializer.Serialize%2A> i <xref:System.Runtime.Serialization.NetDataContractSerializer.Deserialize%2A> metody są aliasami <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> i <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="4de34-270">The <xref:System.Runtime.Serialization.NetDataContractSerializer.Serialize%2A> and <xref:System.Runtime.Serialization.NetDataContractSerializer.Deserialize%2A> methods are aliases for the <xref:System.Runtime.Serialization.XmlObjectSerializer.WriteObject%2A> and <xref:System.Runtime.Serialization.XmlObjectSerializer.ReadObject%2A> methods.</span></span> <span data-ttu-id="4de34-271">Istnieją one w celu zapewnienia bardziej spójny model programowania z pliku binarnego lub serializacji SOAP.</span><span class="sxs-lookup"><span data-stu-id="4de34-271">These exist to provide a more consistent programming model with binary or SOAP serialization.</span></span>  
  
 <span data-ttu-id="4de34-272">Aby uzyskać więcej informacji o tych funkcjach, zobacz [szeregowanie binarne](../../../../docs/standard/serialization/binary-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="4de34-272">For more information about these features, see [Binary Serialization](../../../../docs/standard/serialization/binary-serialization.md).</span></span>  
  
 <span data-ttu-id="4de34-273">Formatów XML, który `NetDataContractSerializer` i `DataContractSerializer` użycia zazwyczaj nie są zgodne.</span><span class="sxs-lookup"><span data-stu-id="4de34-273">The XML formats that the `NetDataContractSerializer` and the `DataContractSerializer` use are normally not compatible.</span></span> <span data-ttu-id="4de34-274">Oznacza to, że próby serializacji jednego z tych serializatorów i deserializacji z innym nie jest obsługiwanym scenariuszem.</span><span class="sxs-lookup"><span data-stu-id="4de34-274">That is, attempting to serialize with one of these serializers and deserialize with the other is not a supported scenario.</span></span>  
  
 <span data-ttu-id="4de34-275">Ponadto należy pamiętać, że `NetDataContractSerializer` Wyprowadza pełny [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] typ i nazwa zestawu dla każdego węzła na wykresie obiektu.</span><span class="sxs-lookup"><span data-stu-id="4de34-275">Also, note that the `NetDataContractSerializer` does not output the full [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] type and assembly name for each node in the object graph.</span></span> <span data-ttu-id="4de34-276">Generuje on te informacje, tylko gdy jest niejednoznaczna.</span><span class="sxs-lookup"><span data-stu-id="4de34-276">It outputs that information only where it is ambiguous.</span></span> <span data-ttu-id="4de34-277">Oznacza to generuje na poziomie obiektu głównego i dla innych przypadków polimorficznym.</span><span class="sxs-lookup"><span data-stu-id="4de34-277">That is, it outputs at the root object level and for any polymorphic cases.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4de34-278">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="4de34-278">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractSerializer>  
 <xref:System.Runtime.Serialization.NetDataContractSerializer>  
 <xref:System.Runtime.Serialization.XmlObjectSerializer>  
 [<span data-ttu-id="4de34-279">Serializacja binarna</span><span class="sxs-lookup"><span data-stu-id="4de34-279">Binary Serialization</span></span>](../../../../docs/standard/serialization/binary-serialization.md)  
 [<span data-ttu-id="4de34-280">Typy obsługiwane przez serializator kontraktu danych</span><span class="sxs-lookup"><span data-stu-id="4de34-280">Types Supported by the Data Contract Serializer</span></span>](../../../../docs/framework/wcf/feature-details/types-supported-by-the-data-contract-serializer.md)
