---
title: Ataki oparte na metodzie powtórzeń
ms.date: 03/30/2017
ms.assetid: 7a17e040-93cd-4432-81b9-9f62fec78c8f
ms.openlocfilehash: 47a4726859605415b4e3e1b4d523f2f8059a3989
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/09/2020
ms.locfileid: "84586302"
---
# <a name="replay-attacks"></a><span data-ttu-id="57425-102">Ataki oparte na metodzie powtórzeń</span><span class="sxs-lookup"><span data-stu-id="57425-102">Replay Attacks</span></span>
<span data-ttu-id="57425-103">*Ataku powtarzania* występuje, gdy osoba atakująca kopiuje strumień komunikatów między dwiema stronami i odtwarza strumień do co najmniej jednej ze stron.</span><span class="sxs-lookup"><span data-stu-id="57425-103">A *replay attack* occurs when an attacker copies a stream of messages between two parties and replays the stream to one or more of the parties.</span></span> <span data-ttu-id="57425-104">O ile nie zostanie to skorygowane, komputery, które podlegają atakom, przetwarzają strumień jako wiarygodne wiadomości, co skutkuje zakresem nieprawidłowych skutków, takich jak nadmiarowe zamówienia elementu.</span><span class="sxs-lookup"><span data-stu-id="57425-104">Unless mitigated, the computers subject to the attack process the stream as legitimate messages, resulting in a range of bad consequences, such as redundant orders of an item.</span></span>  
  
## <a name="bindings-may-be-subject-to-reflection-attacks"></a><span data-ttu-id="57425-105">Powiązania mogą podlegać atakom odbicia</span><span class="sxs-lookup"><span data-stu-id="57425-105">Bindings May Be Subject to Reflection Attacks</span></span>  
 <span data-ttu-id="57425-106">*Ataki odbicia* to odtwarzanie komunikatów z powrotem do nadawcy tak, jakby znajdowały się one w odbiorcy jako odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="57425-106">*Reflection attacks* are replays of messages back to a sender as if they came from the receiver as the reply.</span></span> <span data-ttu-id="57425-107">Standardowe *wykrywanie powtarzania* w mechanizmie Windows Communication Foundation (WCF) nie obsługuje tego automatycznie.</span><span class="sxs-lookup"><span data-stu-id="57425-107">The standard *replay detection* in the Windows Communication Foundation (WCF) mechanism does not automatically handle this.</span></span>  
  
 <span data-ttu-id="57425-108">Ataki odbicia są domyślnie zmniejszane, ponieważ model usługi WCF dodaje podpisany identyfikator wiadomości do żądania komunikatów i oczekuje podpisanego `relates-to` nagłówka w komunikatach odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="57425-108">Reflection attacks are mitigated by default because the WCF service model adds a signed message ID to request messages and expects a signed `relates-to` header on response messages.</span></span> <span data-ttu-id="57425-109">W związku z tym komunikat żądania nie może zostać odtworzony jako odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="57425-109">Consequently, the request message cannot be replayed as a response.</span></span> <span data-ttu-id="57425-110">W scenariuszach z bezpiecznym niezawodnym komunikatem (RM) ataki na odbicie są ograniczane, ponieważ:</span><span class="sxs-lookup"><span data-stu-id="57425-110">In secure reliable message (RM) scenarios, reflection attacks are mitigated because:</span></span>  
  
- <span data-ttu-id="57425-111">Schematy tworzenia sekwencji i tworzenia komunikatów odpowiedzi są różne.</span><span class="sxs-lookup"><span data-stu-id="57425-111">The create sequence and create sequence response message schemas are different.</span></span>  
  
- <span data-ttu-id="57425-112">W przypadku sekwencji jednostronnych wiadomości sekwencji wysyłane przez klienta nie mogą być ponownie odtwarzane, ponieważ klient nie może zrozumieć takich komunikatów.</span><span class="sxs-lookup"><span data-stu-id="57425-112">For simplex sequences, sequence messages the client sends cannot be replayed back to it because the client cannot understand such messages.</span></span>  
  
- <span data-ttu-id="57425-113">W przypadku sekwencji dupleksowych dwa identyfikatory sekwencji muszą być unikatowe.</span><span class="sxs-lookup"><span data-stu-id="57425-113">For duplex sequences, the two sequence IDs must be unique.</span></span> <span data-ttu-id="57425-114">W związku z tym nie można odtworzyć wychodzącego komunikatu sekwencji jako wiadomości przychodzącej sekwencji (wszystkie nagłówki sekwencji i treści są również podpisane).</span><span class="sxs-lookup"><span data-stu-id="57425-114">Thus, an outgoing sequence message cannot be replayed back as an incoming sequence message (all sequence headers and bodies are signed, too).</span></span>  
  
 <span data-ttu-id="57425-115">Jedynymi powiązaniami, które są podatne na ataki odbicia, są te bez adresów WS-Addressing: niestandardowe powiązania, które mają wyłączone adresy WS-Addressing i używają zabezpieczeń opartych na kluczach symetrycznych.</span><span class="sxs-lookup"><span data-stu-id="57425-115">The only bindings that are susceptible to reflection attacks are those without WS-Addressing: custom bindings that have WS-Addressing disabled and use the symmetric key-based security.</span></span> <span data-ttu-id="57425-116">Program nie <xref:System.ServiceModel.BasicHttpBinding> korzysta z protokołu WS-Addressing domyślnie, ale nie korzysta z zabezpieczeń opartych na kluczach symetrycznych w taki sposób, aby mógł on być narażony na ataki.</span><span class="sxs-lookup"><span data-stu-id="57425-116">The <xref:System.ServiceModel.BasicHttpBinding> does not use WS-Addressing by default, but it does not use symmetric key-based security in a way that allows it to be vulnerable to this attack.</span></span>  
  
 <span data-ttu-id="57425-117">Środki zaradcze dla powiązań niestandardowych nie ustanawiają kontekstu zabezpieczeń ani nie wymagają nagłówków WS-Addressing.</span><span class="sxs-lookup"><span data-stu-id="57425-117">The mitigation for custom bindings is to not establish security context or to require WS-Addressing headers.</span></span>  
  
## <a name="web-farm-attacker-replays-request-to-multiple-nodes"></a><span data-ttu-id="57425-118">Farma sieci Web: osoba atakująca odtwarza żądanie do wielu węzłów</span><span class="sxs-lookup"><span data-stu-id="57425-118">Web Farm: Attacker Replays Request to Multiple Nodes</span></span>  
 <span data-ttu-id="57425-119">Klient korzysta z usługi, która jest zaimplementowana w kolektywie serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="57425-119">A client uses a service that is implemented on a Web farm.</span></span> <span data-ttu-id="57425-120">Osoba atakująca odtwarza żądanie, które zostało wysłane do jednego węzła w farmie, do innego węzła w farmie.</span><span class="sxs-lookup"><span data-stu-id="57425-120">An attacker replays a request that was sent to one node in the farm to another node in the farm.</span></span> <span data-ttu-id="57425-121">Ponadto, jeśli usługa zostanie ponownie uruchomiona, pamięć podręczna powtarzania zostanie opróżniona, co umożliwi atakującemu odtworzenie żądania.</span><span class="sxs-lookup"><span data-stu-id="57425-121">In addition, if a service is restarted, the replay cache is flushed, allowing an attacker to replay the request.</span></span> <span data-ttu-id="57425-122">(Pamięć podręczna zawiera używane, wcześniej widoczne wartości sygnatur komunikatów i uniemożliwia ponowne odtwarzanie, aby te sygnatury mogły być używane tylko raz.</span><span class="sxs-lookup"><span data-stu-id="57425-122">(The cache contains used, previously seen message signature values and prevents replays so those signatures can be used only once.</span></span> <span data-ttu-id="57425-123">Pamięć podręczna powtarzania nie jest udostępniana w kolektywie serwerów sieci Web.</span><span class="sxs-lookup"><span data-stu-id="57425-123">Replay caches are not shared across a Web farm.)</span></span>  
  
 <span data-ttu-id="57425-124">Środki zaradcze obejmują:</span><span class="sxs-lookup"><span data-stu-id="57425-124">Mitigations include:</span></span>  
  
- <span data-ttu-id="57425-125">Korzystanie z zabezpieczeń trybu komunikatów ze stanowymi tokenami kontekstu zabezpieczeń (z włączoną obsługą bezpiecznej konwersacji lub bez niej).</span><span class="sxs-lookup"><span data-stu-id="57425-125">Use message mode security with stateful security context tokens (with or without secure conversation enabled).</span></span> <span data-ttu-id="57425-126">Aby uzyskać więcej informacji, zobacz [jak: Tworzenie tokenu kontekstu zabezpieczeń dla bezpiecznej sesji](how-to-create-a-security-context-token-for-a-secure-session.md).</span><span class="sxs-lookup"><span data-stu-id="57425-126">For more information, see [How to: Create a Security Context Token for a Secure Session](how-to-create-a-security-context-token-for-a-secure-session.md).</span></span>  
  
- <span data-ttu-id="57425-127">Skonfiguruj usługę tak, aby korzystała z zabezpieczeń na poziomie transportu.</span><span class="sxs-lookup"><span data-stu-id="57425-127">Configure the service to use transport-level security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="57425-128">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="57425-128">See also</span></span>

- [<span data-ttu-id="57425-129">Zagadnienia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="57425-129">Security Considerations</span></span>](security-considerations-in-wcf.md)
- [<span data-ttu-id="57425-130">Ujawnianie informacji</span><span class="sxs-lookup"><span data-stu-id="57425-130">Information Disclosure</span></span>](information-disclosure.md)
- [<span data-ttu-id="57425-131">Podniesienie uprawnień</span><span class="sxs-lookup"><span data-stu-id="57425-131">Elevation of Privilege</span></span>](elevation-of-privilege.md)
- [<span data-ttu-id="57425-132">Odmowa usługi</span><span class="sxs-lookup"><span data-stu-id="57425-132">Denial of Service</span></span>](denial-of-service.md)
- [<span data-ttu-id="57425-133">Manipulowanie</span><span class="sxs-lookup"><span data-stu-id="57425-133">Tampering</span></span>](tampering.md)
- [<span data-ttu-id="57425-134">Nieobsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="57425-134">Unsupported Scenarios</span></span>](unsupported-scenarios.md)
