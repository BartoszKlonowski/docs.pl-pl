---
title: "Wysyłanie i odbieranie błędów"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: handling faults [WCF], sending
ms.assetid: 7be6fb96-ce2a-450b-aebe-f932c6a4bc5d
caps.latest.revision: "10"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 5897d107fc27b56ffd1eb476dff1fa1d507f5de5
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/02/2017
---
# <a name="sending-and-receiving-faults"></a><span data-ttu-id="f2230-102">Wysyłanie i odbieranie błędów</span><span class="sxs-lookup"><span data-stu-id="f2230-102">Sending and Receiving Faults</span></span>
<span data-ttu-id="f2230-103">Błędach SOAP przedstawienia warunku informacje o błędzie z usługi do klienta, a w przypadku dupleksu od klienta do usługi w sposób interoperacyjne.</span><span class="sxs-lookup"><span data-stu-id="f2230-103">SOAP faults convey error condition information from a service to a client and in the duplex case from a client to a service in an interoperable way.</span></span> <span data-ttu-id="f2230-104">Zazwyczaj usługa definiuje zawartość błędów niestandardowych i określa, jakie operacje może zwracać je.</span><span class="sxs-lookup"><span data-stu-id="f2230-104">Typically a service defines custom fault content and specifies which operations can return them.</span></span> <span data-ttu-id="f2230-105">(Aby uzyskać więcej informacji, zobacz [definiowanie i określanie usterek](../../../docs/framework/wcf/defining-and-specifying-faults.md).) W tym temacie omówiono sposób usługi lub dupleks klienta może wysyłać te błędy wystąpił odpowiedniego warunku błędu sposób i klienta lub usługę aplikacji obsługi tych błędów.</span><span class="sxs-lookup"><span data-stu-id="f2230-105">(For more information, see [Defining and Specifying Faults](../../../docs/framework/wcf/defining-and-specifying-faults.md).) This topic discusses how a service or duplex client can send those faults when the corresponding error condition has occurred and how a client or service application handles these faults.</span></span> <span data-ttu-id="f2230-106">Omówienie obsługi błędów w [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] aplikacji, zobacz [określanie i obsługa błędów w kontraktach i usługach](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="f2230-106">For an overview of error handling in [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] applications, see [Specifying and Handling Faults in Contracts and Services](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
## <a name="sending-soap-faults"></a><span data-ttu-id="f2230-107">Wysyłanie błędów SOAP</span><span class="sxs-lookup"><span data-stu-id="f2230-107">Sending SOAP Faults</span></span>  
 <span data-ttu-id="f2230-108">Zadeklarowany w błędach SOAP są te, w których ma operacji <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> , który określa typ niestandardowy błędu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="f2230-108">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="f2230-109">Niezadeklarowany błędach SOAP są tymi, które nie są określone w umowie dla operacji.</span><span class="sxs-lookup"><span data-stu-id="f2230-109">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span>  
  
### <a name="sending-declared-faults"></a><span data-ttu-id="f2230-110">Wysyłanie błędów zadeklarowana</span><span class="sxs-lookup"><span data-stu-id="f2230-110">Sending Declared Faults</span></span>  
 <span data-ttu-id="f2230-111">Aby wysłać zadeklarowane błędu protokołu SOAP, wykrywanie warunku błędu, dla którego jest błędu protokołu SOAP i zgłosić nową <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> gdzie parametr typu jest nowy obiekt typu określonego w <xref:System.ServiceModel.FaultContractAttribute> dla tej operacji.</span><span class="sxs-lookup"><span data-stu-id="f2230-111">To send a declared SOAP fault, detect the error condition for which the SOAP fault is appropriate and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> where the type parameter is a new object of the type specified in the <xref:System.ServiceModel.FaultContractAttribute> for that operation.</span></span> <span data-ttu-id="f2230-112">W poniższym przykładzie pokazano sposób użycia <xref:System.ServiceModel.FaultContractAttribute> Aby określić, że `SampleMethod` operacji może zwrócić błąd SOAP z typem szczegółów `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="f2230-112">The following code example shows the use of <xref:System.ServiceModel.FaultContractAttribute> to specify that the `SampleMethod` operation can return a SOAP fault with the detail type of `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#4](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#4)]
 [!code-vb[FaultContractAttribute#4](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#4)]  
  
 <span data-ttu-id="f2230-113">W celu przekazania `GreetingFault` informacje o błędzie do klienta, catch warunku błędu odpowiednie i zgłosić nową <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> typu `GreetingFault` o nowe `GreetingFault` obiektu jako argument, jak w poniższym przykładzie kodu.</span><span class="sxs-lookup"><span data-stu-id="f2230-113">To convey the `GreetingFault` error information to the client, catch the appropriate error condition and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault` with a new `GreetingFault` object as the argument, as in the following code example.</span></span> <span data-ttu-id="f2230-114">Jeśli klient jest [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplikacji klienckiej go napotka to jako zarządzanym wyjątku, której typ jest <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> typu `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="f2230-114">If the client is an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client application, it experiences this as a managed exception where the type is <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#5](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#5)]
 [!code-vb[FaultContractAttribute#5](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#5)]  
  
### <a name="sending-undeclared-faults"></a><span data-ttu-id="f2230-115">Wysyłanie błędów niezadeklarowany</span><span class="sxs-lookup"><span data-stu-id="f2230-115">Sending Undeclared Faults</span></span>  
 <span data-ttu-id="f2230-116">Wysyłanie błędów niezadeklarowany może być bardzo przydatne szybkie diagnozowanie i debugowania problemów w [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplikacje, ale jego użyteczności jako narzędzie do debugowania jest ograniczona.</span><span class="sxs-lookup"><span data-stu-id="f2230-116">Sending undeclared faults can be very useful to quickly diagnose and debug problems in [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] applications, but its usefulness as a debugging tool is limited.</span></span> <span data-ttu-id="f2230-117">Ogólnie rzecz biorąc, gdy jej debugowanie jest zalecane używanie <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="f2230-117">More generally, when debugging it is recommended that you use the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="f2230-118">Gdy ta wartość jest ustawiona na wartość true, klienci wystąpić błędów, takich jak <xref:System.ServiceModel.FaultException%601> wyjątki typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="f2230-118">When you set this value to true, clients experience such faults as <xref:System.ServiceModel.FaultException%601> exceptions of type <xref:System.ServiceModel.ExceptionDetail>.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="f2230-119">Ponieważ zarządzane wyjątki może ujawnić informacje o wewnętrznych aplikacji, ustawianie <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> do `true` zezwolić na [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientów, aby uzyskać informacje dotyczące wyjątków operacji wewnętrzny usługi, w tym osobiście do zidentyfikowania lub inne poufne informacje.</span><span class="sxs-lookup"><span data-stu-id="f2230-119">Because managed exceptions can expose internal application information, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` can permit [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients to obtain information about internal service operation exceptions, including personally identifiable or other sensitive information.</span></span>  
>   
>  <span data-ttu-id="f2230-120">W związku z tym ustawienie <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> do `true` jest zalecane tylko w sposób tymczasowo debugowania aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="f2230-120">Therefore, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` is only recommended as a way of temporarily debugging a service application.</span></span> <span data-ttu-id="f2230-121">Ponadto WSDL dla metody, która zwraca nieobsługiwanych wyjątków w ten sposób zarządzanych nie zawiera kontraktu dla <xref:System.ServiceModel.FaultException%601> typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="f2230-121">In addition, the WSDL for a method that returns unhandled managed exceptions in this way does not contain the contract for the <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="f2230-122">Klienci muszą oczekują możliwości nieznany błąd protokołu SOAP (Powrót do [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientów jako <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> obiektów) można uzyskać informacji o debugowaniu poprawnie.</span><span class="sxs-lookup"><span data-stu-id="f2230-122">Clients must expect the possibility of an unknown SOAP fault (returned to [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients as <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objects) to obtain the debugging information properly.</span></span>  
  
 <span data-ttu-id="f2230-123">Aby wysłać niezadeklarowany błędu protokołu SOAP, throw <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> obiektu (to znaczy nie typ ogólny <xref:System.ServiceModel.FaultException%601>) i przekazać ciąg do konstruktora.</span><span class="sxs-lookup"><span data-stu-id="f2230-123">To send an undeclared SOAP fault, throw a <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> object (that is, not the generic type <xref:System.ServiceModel.FaultException%601>) and pass the string to the constructor.</span></span> <span data-ttu-id="f2230-124">To jest narażony na [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] aplikacji klienckich jako element zgłaszany <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> wyjątku, której ten ciąg jest dostępna przez wywołanie metody <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="f2230-124">This is exposed to the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client applications as a thrown <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> exception where the string is available by calling the <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f2230-125">Jeśli zadeklarować typu ciąg błędu protokołu SOAP i zgłosić to w usłudze jako <xref:System.ServiceModel.FaultException%601> gdzie parametr typu jest <xref:System.String?displayProperty=nameWithType> wartość ciągu jest przypisany do <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> właściwości i nie jest dostępny z <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2230-125">If you declare a SOAP fault of type string, and then throw this in your service as a <xref:System.ServiceModel.FaultException%601> where the type parameter is a <xref:System.String?displayProperty=nameWithType> the string value is assigned to the <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> property, and is not available from <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span></span>  
  
## <a name="handling-faults"></a><span data-ttu-id="f2230-126">Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="f2230-126">Handling Faults</span></span>  
 <span data-ttu-id="f2230-127">W [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klientów i błędach SOAP występujących podczas komunikacji interesujące dla aplikacji klienckich są zgłaszane jako zarządzane wyjątki.</span><span class="sxs-lookup"><span data-stu-id="f2230-127">In [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] clients, SOAP faults that occur during communication that are of interest to client applications are raised as managed exceptions.</span></span> <span data-ttu-id="f2230-128">Gdy istnieje wiele wyjątków, które mogą wystąpić podczas wykonywania programu, aplikacje przy użyciu [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] model programowania klienta można oczekiwać, że do obsługi wyjątków następujące dwa typy wyniku komunikacji.</span><span class="sxs-lookup"><span data-stu-id="f2230-128">While there are many exceptions that can occur during the execution of any program, applications using the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client programming model can expect to handle exceptions of the following two types as a result of communication.</span></span>  
  
-   <xref:System.TimeoutException>  
  
-   <xref:System.ServiceModel.CommunicationException>  
  
 <span data-ttu-id="f2230-129"><xref:System.TimeoutException>obiekty są zgłaszane, gdy operacja przekroczy określony limit czasu.</span><span class="sxs-lookup"><span data-stu-id="f2230-129"><xref:System.TimeoutException> objects are thrown when an operation exceeds the specified timeout period.</span></span>  
  
 <span data-ttu-id="f2230-130"><xref:System.ServiceModel.CommunicationException>obiekty są zgłaszane po warunku błędu niektóre możliwe do odzyskania komunikacji na usługi lub klienta.</span><span class="sxs-lookup"><span data-stu-id="f2230-130"><xref:System.ServiceModel.CommunicationException> objects are thrown when there is some recoverable communication error condition on either the service or the client.</span></span>  
  
 <span data-ttu-id="f2230-131"><xref:System.ServiceModel.CommunicationException> Klasa ma dwie ważne typy pochodne <xref:System.ServiceModel.FaultException> i ogólnych <xref:System.ServiceModel.FaultException%601> typu.</span><span class="sxs-lookup"><span data-stu-id="f2230-131">The <xref:System.ServiceModel.CommunicationException> class has two important derived types, <xref:System.ServiceModel.FaultException> and the generic <xref:System.ServiceModel.FaultException%601> type.</span></span>  
  
 <span data-ttu-id="f2230-132"><xref:System.ServiceModel.FaultException>wyjątki są zgłaszane odebrania odbiornik błędów, który nie jest oczekiwany lub określone w umowie operacji; Zazwyczaj ten błąd występuje podczas debugowania aplikacji i usługa ma <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> ustawioną właściwość `true`.</span><span class="sxs-lookup"><span data-stu-id="f2230-132"><xref:System.ServiceModel.FaultException> exceptions are thrown when a listener receives a fault that is not expected or specified in the operation contract; usually this occurs when the application is being debugged and the service has the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true`.</span></span>  
  
 <span data-ttu-id="f2230-133"><xref:System.ServiceModel.FaultException%601>Po odebraniu w odpowiedzi na operację dwukierunkowe usterek, określonego w kontrakt operacji na komputerze klienckim są zgłaszane wyjątki (czyli metody z <xref:System.ServiceModel.OperationContractAttribute> atrybutem <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> ustawioną `false`).</span><span class="sxs-lookup"><span data-stu-id="f2230-133"><xref:System.ServiceModel.FaultException%601> exceptions are thrown on the client when a fault that is specified in the operation contract is received in response to a two-way operation (that is, a method with an <xref:System.ServiceModel.OperationContractAttribute> attribute with <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> set to `false`).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f2230-134">Gdy [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] usługa ma <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> ustawioną właściwość `true` klienta napotka to jako niezadeklarowany <xref:System.ServiceModel.FaultException%601> typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="f2230-134">When an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service has the <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true` the client experiences this as an undeclared <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="f2230-135">Klientów można przechwycić tego określonego błędu lub obsługi błędów w bloku catch dla <xref:System.ServiceModel.FaultException>.</span><span class="sxs-lookup"><span data-stu-id="f2230-135">Clients can either catch this specific fault or handle the fault in a catch block for <xref:System.ServiceModel.FaultException>.</span></span>  
  
 <span data-ttu-id="f2230-136">Zwykle tylko <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, i <xref:System.ServiceModel.CommunicationException> wyjątki są przydatne do klientów i usług.</span><span class="sxs-lookup"><span data-stu-id="f2230-136">Typically, only <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, and <xref:System.ServiceModel.CommunicationException> exceptions are of interest to clients and services.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f2230-137">Oczywiście wystąpić inne wyjątki.</span><span class="sxs-lookup"><span data-stu-id="f2230-137">Other exceptions, of course, do occur.</span></span> <span data-ttu-id="f2230-138">Nieoczekiwany wyjątków należą poważnej awarii, takich jak <xref:System.OutOfMemoryException?displayProperty=nameWithType>; zazwyczaj aplikacje nie należy przechwytywać tych metod.</span><span class="sxs-lookup"><span data-stu-id="f2230-138">Unexpected exceptions include catastrophic failures like <xref:System.OutOfMemoryException?displayProperty=nameWithType>; typically applications should not catch such methods.</span></span>  
  
### <a name="catch-fault-exceptions-in-the-correct-order"></a><span data-ttu-id="f2230-139">Przechwytywanie wyjątków błędów w odpowiedniej kolejności</span><span class="sxs-lookup"><span data-stu-id="f2230-139">Catch Fault Exceptions in the Correct Order</span></span>  
 <span data-ttu-id="f2230-140">Ponieważ <xref:System.ServiceModel.FaultException%601> pochodną <xref:System.ServiceModel.FaultException>, i <xref:System.ServiceModel.FaultException> pochodną <xref:System.ServiceModel.CommunicationException>, ważne jest, aby przechwytywać tych wyjątków w prawidłowej kolejności.</span><span class="sxs-lookup"><span data-stu-id="f2230-140">Because <xref:System.ServiceModel.FaultException%601> derives from <xref:System.ServiceModel.FaultException>, and <xref:System.ServiceModel.FaultException> derives from <xref:System.ServiceModel.CommunicationException>, it is important to catch these exceptions in the proper order.</span></span> <span data-ttu-id="f2230-141">Jeśli na przykład masz try/catch bloku, w którym najpierw catch <xref:System.ServiceModel.CommunicationException>, wszystkie określone i nieokreślony błędach SOAP są obsługiwane istnieje; bloków catch kolejnych do obsługi niestandardowej <xref:System.ServiceModel.FaultException%601> wyjątek nigdy nie są wywoływane.</span><span class="sxs-lookup"><span data-stu-id="f2230-141">If, for example, you have a try/catch block in which you first catch <xref:System.ServiceModel.CommunicationException>, all specified and unspecified SOAP faults are handled there; any subsequent catch blocks to handle a custom <xref:System.ServiceModel.FaultException%601> exception are never invoked.</span></span>  
  
 <span data-ttu-id="f2230-142">Należy pamiętać, że jedna operacja może zwrócić dowolną liczbę błędów określonego.</span><span class="sxs-lookup"><span data-stu-id="f2230-142">Remember that one operation can return any number of specified faults.</span></span> <span data-ttu-id="f2230-143">Każdy awarii jest typem unikatowy i muszą być obsługiwane oddzielnie.</span><span class="sxs-lookup"><span data-stu-id="f2230-143">Each fault is a unique type and must be handled separately.</span></span>  
  
### <a name="handle-exceptions-when-closing-the-channel"></a><span data-ttu-id="f2230-144">Obsługa wyjątków podczas zamykania kanału</span><span class="sxs-lookup"><span data-stu-id="f2230-144">Handle Exceptions When Closing the Channel</span></span>  
 <span data-ttu-id="f2230-145">Większość poprzedniego dyskusji związana z błędy wysyłane w trakcie przetwarzania komunikatów aplikacji, czyli wiadomości jawnie wysłane przez klienta, gdy aplikacja klient wywołuje operacje na [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta.</span><span class="sxs-lookup"><span data-stu-id="f2230-145">Most of the preceding discussion has to do with faults sent in the course of processing application messages, that is, messages explicitly sent by the client when the client application calls operations on the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object.</span></span>  
  
 <span data-ttu-id="f2230-146">Nawet w przypadku lokalnych obiektów usuwania obiektu można wywołać lub maskować wyjątki, które występują w trakcie odtwarzania procesu.</span><span class="sxs-lookup"><span data-stu-id="f2230-146">Even with local objects disposing the object can either raise or mask exceptions that occur during the recycling process.</span></span> <span data-ttu-id="f2230-147">Podobnie może wystąpić, gdy używasz [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektów klienta.</span><span class="sxs-lookup"><span data-stu-id="f2230-147">Something similar can occur when you use [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client objects.</span></span> <span data-ttu-id="f2230-148">Podczas wywoływania operacji wysyłania wiadomości przez nawiązane połączenie.</span><span class="sxs-lookup"><span data-stu-id="f2230-148">When you call operations you are sending messages over an established connection.</span></span> <span data-ttu-id="f2230-149">Zamknięcie kanału można generują wyjątki, jeśli połączenie nie można prawidłowo zamknięty lub jest już zamknięty, nawet jeśli wszystkie operacje zwrócił poprawnie.</span><span class="sxs-lookup"><span data-stu-id="f2230-149">Closing the channel can throw exceptions if the connection cannot be cleanly closed or is already closed, even if all the operations returned properly.</span></span>  
  
 <span data-ttu-id="f2230-150">Zazwyczaj kanały obiektu klienta są zamknięte w jednym z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="f2230-150">Typically, client object channels are closed in one of the following ways:</span></span>  
  
-   <span data-ttu-id="f2230-151">Gdy [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] obiektu klienta zostanie odtworzony.</span><span class="sxs-lookup"><span data-stu-id="f2230-151">When the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client object is recycled.</span></span>  
  
-   <span data-ttu-id="f2230-152">Gdy aplikacja kliencka wywołuje <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2230-152">When the client application calls <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="f2230-153">Gdy aplikacja kliencka wywołuje <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="f2230-153">When the client application calls <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span></span>  
  
-   <span data-ttu-id="f2230-154">Gdy aplikacja kliencka wywołuje operację który jest operacją zakończenia sesji.</span><span class="sxs-lookup"><span data-stu-id="f2230-154">When the client application calls an operation that is a terminating operation for a session.</span></span>  
  
 <span data-ttu-id="f2230-155">We wszystkich przypadkach zamknięcie kanału nakazuje kanału, aby zamknąć wszystkie podstawowej kanałów, które może wysyłać wiadomości do obsługi złożonych funkcji na poziomie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f2230-155">In all cases, closing the channel instructs the channel to begin closing any underlying channels that may be sending messages to support complex functionality at the application level.</span></span> <span data-ttu-id="f2230-156">Na przykład gdy kontrakt wymaga sesje powiązania próbuje ustanowić sesję przez wymianę komunikaty z kanału usługi, dopóki nie zostanie nawiązane sesji.</span><span class="sxs-lookup"><span data-stu-id="f2230-156">For example, when a contract requires sessions a binding attempts to establish a session by exchanging messages with the service channel until a session is established.</span></span> <span data-ttu-id="f2230-157">Podczas zamykania kanał podstawowego kanału sesji powiadamia usługę zakończenia sesji.</span><span class="sxs-lookup"><span data-stu-id="f2230-157">When the channel is closed, the underlying session channel notifies the service that the session is terminated.</span></span> <span data-ttu-id="f2230-158">W tym przypadku jeśli kanału już została przerwana, zamknięta, lub jest bezużyteczne (na przykład, gdy jest odłączony kabel sieciowy), kanału klienta nie może poinformować kanału usługi, sesja zostanie zakończona, który może spowodować wyjątek.</span><span class="sxs-lookup"><span data-stu-id="f2230-158">In this case, if the channel has already aborted, closed, or is otherwise unusable (for example, when a network cable is unplugged), the client channel cannot inform the service channel that the session is terminated and an exception can result.</span></span>  
  
### <a name="abort-the-channel-if-necessary"></a><span data-ttu-id="f2230-159">Przerwij kanału w razie potrzeby</span><span class="sxs-lookup"><span data-stu-id="f2230-159">Abort the Channel If Necessary</span></span>  
 <span data-ttu-id="f2230-160">Ponieważ zamknięcie kanału można zgłaszają wyjątki, następnie, zalecane jest aby oprócz przechwytywanie wyjątków błędów we właściwej kolejności, ważne jest, aby przerwać kanału, który został użyty w wywołania w bloku catch.</span><span class="sxs-lookup"><span data-stu-id="f2230-160">Because closing the channel can also throw exceptions, then, it is recommended that in addition to catching fault exceptions in the correct order, it is important to abort the channel that was used in making the call in the catch block.</span></span>  
  
 <span data-ttu-id="f2230-161">Jeśli usterki przekazuje informacje o błędach specyficznych dla operacji i będzie możliwe, że inne może być używany, jest niepotrzebna przerwania kanał (mimo że te przypadki są rzadko).</span><span class="sxs-lookup"><span data-stu-id="f2230-161">If the fault conveys error information specific to an operation and it remains possible that others can use it, there is no need to abort the channel (although these cases are rare).</span></span> <span data-ttu-id="f2230-162">We wszystkich innych przypadkach zaleca się, że przerwać kanału.</span><span class="sxs-lookup"><span data-stu-id="f2230-162">In all other cases, it is recommended that you abort the channel.</span></span> <span data-ttu-id="f2230-163">Dla przykładu, która przedstawia wszystkie punkty, zobacz [oczekiwane wyjątki](../../../docs/framework/wcf/samples/expected-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="f2230-163">For a sample that demonstrates all of these points, see [Expected Exceptions](../../../docs/framework/wcf/samples/expected-exceptions.md).</span></span>  
  
 <span data-ttu-id="f2230-164">Poniższy przykład kodu pokazuje sposób obsługi wyjątków błędu protokołu SOAP w podstawowej aplikacji klienckiej, w tym zadeklarowane usterek i błędów niezadeklarowany.</span><span class="sxs-lookup"><span data-stu-id="f2230-164">The following code example shows how to handle SOAP fault exceptions in a basic client application, including a declared fault and an undeclared fault.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="f2230-165">Ten przykładowy kod nie używa `using` utworzenia.</span><span class="sxs-lookup"><span data-stu-id="f2230-165">This sample code does not use the `using` construct.</span></span> <span data-ttu-id="f2230-166">Ponieważ zamykania kanałów może zgłaszać wyjątki, zaleca się aplikacje tworzą [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klienta pierwszy, a następnie otwórz, używania i Zamknij [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] klienta, w tym samym bloku try.</span><span class="sxs-lookup"><span data-stu-id="f2230-166">Because closing channels can throw exceptions, it is recommended that applications create a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client first, and then open, use, and close the [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] client in the same try block.</span></span> <span data-ttu-id="f2230-167">Aby uzyskać więcej informacji, zobacz [Przegląd klienta programu WCF](../../../docs/framework/wcf/wcf-client-overview.md) i [unikanie problemów z instrukcją Using](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span><span class="sxs-lookup"><span data-stu-id="f2230-167">For details, see [WCF Client Overview](../../../docs/framework/wcf/wcf-client-overview.md) and [Avoiding Problems with the Using Statement](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md).</span></span>  
  
 [!code-csharp[FaultContractAttribute#3](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/client.cs#3)]
 [!code-vb[FaultContractAttribute#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/client.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="f2230-168">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="f2230-168">See Also</span></span>  
 <xref:System.ServiceModel.FaultException>  
 <xref:System.ServiceModel.FaultException%601>  
 <xref:System.ServiceModel.CommunicationException?displayProperty=nameWithType>  
 [<span data-ttu-id="f2230-169">Oczekiwane wyjątki</span><span class="sxs-lookup"><span data-stu-id="f2230-169">Expected Exceptions</span></span>](../../../docs/framework/wcf/samples/expected-exceptions.md)  
 [<span data-ttu-id="f2230-170">Unikanie problemów z instrukcją Using</span><span class="sxs-lookup"><span data-stu-id="f2230-170">Avoiding Problems with the Using Statement</span></span>](../../../docs/framework/wcf/samples/avoiding-problems-with-the-using-statement.md)
