---
title: Wysyłanie i odbieranie błędów
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- handling faults [WCF], sending
ms.assetid: 7be6fb96-ce2a-450b-aebe-f932c6a4bc5d
ms.openlocfilehash: 2757f98066931ca1b5e3ef147cee2c819ee22606
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "61949607"
---
# <a name="sending-and-receiving-faults"></a><span data-ttu-id="11027-102">Wysyłanie i odbieranie błędów</span><span class="sxs-lookup"><span data-stu-id="11027-102">Sending and Receiving Faults</span></span>
<span data-ttu-id="11027-103">Błędach SOAP obejmują warunku informacje o błędzie z usługi do klienta, a w przypadku dwukierunkowego od klienta do usługi w sposób interoperacyjny.</span><span class="sxs-lookup"><span data-stu-id="11027-103">SOAP faults convey error condition information from a service to a client and in the duplex case from a client to a service in an interoperable way.</span></span> <span data-ttu-id="11027-104">Zazwyczaj usługa definiuje zawartość błędów niestandardowych i określa, jakie operacje można przywrócić je.</span><span class="sxs-lookup"><span data-stu-id="11027-104">Typically a service defines custom fault content and specifies which operations can return them.</span></span> <span data-ttu-id="11027-105">(Aby uzyskać więcej informacji, zobacz [definiowanie i określanie błędów](../../../docs/framework/wcf/defining-and-specifying-faults.md).) W tym temacie omówiono, jak usługi lub klienta dwukierunkowego może wysyłać te błędy Jeśli nastąpiła odpowiadającego warunku błędu i jak klient lub aplikacja usługi obsługuje te błędy.</span><span class="sxs-lookup"><span data-stu-id="11027-105">(For more information, see [Defining and Specifying Faults](../../../docs/framework/wcf/defining-and-specifying-faults.md).) This topic discusses how a service or duplex client can send those faults when the corresponding error condition has occurred and how a client or service application handles these faults.</span></span> <span data-ttu-id="11027-106">Aby uzyskać omówienie obsługi błędów w aplikacji Windows Communication Foundation (WCF), zobacz [określanie i obsługa błędów w kontraktach i usługach](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="11027-106">For an overview of error handling in Windows Communication Foundation (WCF) applications, see [Specifying and Handling Faults in Contracts and Services](../../../docs/framework/wcf/specifying-and-handling-faults-in-contracts-and-services.md).</span></span>  
  
## <a name="sending-soap-faults"></a><span data-ttu-id="11027-107">Wysyłanie błędów SOAP</span><span class="sxs-lookup"><span data-stu-id="11027-107">Sending SOAP Faults</span></span>  
 <span data-ttu-id="11027-108">Zadeklarowane w błędach SOAP są te, w których jest operacją <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> , który określa typ niestandardowy błędu protokołu SOAP.</span><span class="sxs-lookup"><span data-stu-id="11027-108">Declared SOAP faults are those in which an operation has a <xref:System.ServiceModel.FaultContractAttribute?displayProperty=nameWithType> that specifies a custom SOAP fault type.</span></span> <span data-ttu-id="11027-109">Niezadeklarowany błędach SOAP są te, które nie zostały określone w umowie dla danej operacji.</span><span class="sxs-lookup"><span data-stu-id="11027-109">Undeclared SOAP faults are those that are not specified in the contract for an operation.</span></span>  
  
### <a name="sending-declared-faults"></a><span data-ttu-id="11027-110">Wysyłanie błędów zadeklarowanych</span><span class="sxs-lookup"><span data-stu-id="11027-110">Sending Declared Faults</span></span>  
 <span data-ttu-id="11027-111">Do wysyłania zadeklarowane błąd protokołu SOAP, wykrywanie warunku błędu, dla którego jest błąd protokołu SOAP i zgłosić nową <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> gdzie parametr typu jest nowy obiekt o typie określonym w <xref:System.ServiceModel.FaultContractAttribute> dla tej operacji.</span><span class="sxs-lookup"><span data-stu-id="11027-111">To send a declared SOAP fault, detect the error condition for which the SOAP fault is appropriate and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> where the type parameter is a new object of the type specified in the <xref:System.ServiceModel.FaultContractAttribute> for that operation.</span></span> <span data-ttu-id="11027-112">Poniższy przykład kodu pokazuje użycie <xref:System.ServiceModel.FaultContractAttribute> Aby określić, że `SampleMethod` operacji może zwrócić błąd protokołu SOAP z typem szczegółów `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="11027-112">The following code example shows the use of <xref:System.ServiceModel.FaultContractAttribute> to specify that the `SampleMethod` operation can return a SOAP fault with the detail type of `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#4](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#4)]
 [!code-vb[FaultContractAttribute#4](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#4)]  
  
 <span data-ttu-id="11027-113">W celu przekazania `GreetingFault` informacje o błędzie do klienta, przechwytywać warunek odpowiedni komunikat o błędzie i zgłaszać nowe <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> typu `GreetingFault` dzięki nowemu `GreetingFault` obiekt jako argumentu, jak w poniższym przykładzie kodu.</span><span class="sxs-lookup"><span data-stu-id="11027-113">To convey the `GreetingFault` error information to the client, catch the appropriate error condition and throw a new <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault` with a new `GreetingFault` object as the argument, as in the following code example.</span></span> <span data-ttu-id="11027-114">Jeśli klient znajduje się aplikacja klienta WCF, go to napotyka jako zarządzanego wyjątku, gdy typ jest <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> typu `GreetingFault`.</span><span class="sxs-lookup"><span data-stu-id="11027-114">If the client is an WCF client application, it experiences this as a managed exception where the type is <xref:System.ServiceModel.FaultException%601?displayProperty=nameWithType> of type `GreetingFault`.</span></span>  
  
 [!code-csharp[FaultContractAttribute#5](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/services.cs#5)]
 [!code-vb[FaultContractAttribute#5](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/services.vb#5)]  
  
### <a name="sending-undeclared-faults"></a><span data-ttu-id="11027-115">Wysyłanie błędów niezadeklarowany</span><span class="sxs-lookup"><span data-stu-id="11027-115">Sending Undeclared Faults</span></span>  
 <span data-ttu-id="11027-116">Wysyłanie błędów niezadeklarowany może być bardzo przydatne szybko zdiagnozować i debugowanie problemów w aplikacji WCF, ale jego użyteczność, jako narzędzie debugowania jest ograniczona.</span><span class="sxs-lookup"><span data-stu-id="11027-116">Sending undeclared faults can be very useful to quickly diagnose and debug problems in WCF applications, but its usefulness as a debugging tool is limited.</span></span> <span data-ttu-id="11027-117">Ogólnie rzecz biorąc, jeśli debugowanie jest zaleca się używanie <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="11027-117">More generally, when debugging it is recommended that you use the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="11027-118">Ta wartość jest ustawiona na wartość true, klienci wystąpić takie błędy jako <xref:System.ServiceModel.FaultException%601> wyjątków typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="11027-118">When you set this value to true, clients experience such faults as <xref:System.ServiceModel.FaultException%601> exceptions of type <xref:System.ServiceModel.ExceptionDetail>.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="11027-119">Ponieważ zarządzane wyjątki mogą ujawniać informacje o wewnętrznych aplikacji, ustawienie <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> do `true` może pozwolić na WCF klientom uzyskanie informacji o wyjątkach operację usługi wewnętrznej, w tym osobiście danych osobowych lub inne poufne informacje.</span><span class="sxs-lookup"><span data-stu-id="11027-119">Because managed exceptions can expose internal application information, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` can permit WCF clients to obtain information about internal service operation exceptions, including personally identifiable or other sensitive information.</span></span>  
>   
>  <span data-ttu-id="11027-120">W związku z tym, ustawienie <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> do `true` jest zalecane tylko jako sposób tymczasowo debugowania aplikacji usługi.</span><span class="sxs-lookup"><span data-stu-id="11027-120">Therefore, setting <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> to `true` is only recommended as a way of temporarily debugging a service application.</span></span> <span data-ttu-id="11027-121">Ponadto pliku WSDL dla zarządzanych przy użyciu metody, która zwraca nieobsługiwanych wyjątków w ten sposób nie zawiera kontrakt dla <xref:System.ServiceModel.FaultException%601> typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="11027-121">In addition, the WSDL for a method that returns unhandled managed exceptions in this way does not contain the contract for the <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="11027-122">Klienci muszą oczekują możliwości nieznany błąd protokołu SOAP (zwracane do klientów programu WCF jako <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> obiektów) Aby uzyskać informacje o debugowaniu prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="11027-122">Clients must expect the possibility of an unknown SOAP fault (returned to WCF clients as <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> objects) to obtain the debugging information properly.</span></span>  
  
 <span data-ttu-id="11027-123">Aby wysłać niezadeklarowany błąd protokołu SOAP, throw <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> obiektu (oznacza to, że nie ogólny typ <xref:System.ServiceModel.FaultException%601>) i przekazać ciągu do konstruktora.</span><span class="sxs-lookup"><span data-stu-id="11027-123">To send an undeclared SOAP fault, throw a <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> object (that is, not the generic type <xref:System.ServiceModel.FaultException%601>) and pass the string to the constructor.</span></span> <span data-ttu-id="11027-124">To jest widoczna dla aplikacji klienckich programu WCF jako zgłoszenia <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> wyjątków, na których ten ciąg jest dostępny, wywołując <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="11027-124">This is exposed to the WCF client applications as a thrown <xref:System.ServiceModel.FaultException?displayProperty=nameWithType> exception where the string is available by calling the <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType> method.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="11027-125">Jeśli zadeklarować typu ciąg błędu protokołu SOAP, a następnie generują to w usłudze jako <xref:System.ServiceModel.FaultException%601> gdzie parametr typu jest <xref:System.String?displayProperty=nameWithType> wartość ciągu jest przypisywana do <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> właściwości i nie jest dostępny z <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="11027-125">If you declare a SOAP fault of type string, and then throw this in your service as a <xref:System.ServiceModel.FaultException%601> where the type parameter is a <xref:System.String?displayProperty=nameWithType> the string value is assigned to the <xref:System.ServiceModel.FaultException%601.Detail%2A?displayProperty=nameWithType> property, and is not available from <xref:System.ServiceModel.FaultException%601.ToString%2A?displayProperty=nameWithType>.</span></span>  
  
## <a name="handling-faults"></a><span data-ttu-id="11027-126">Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="11027-126">Handling Faults</span></span>  
 <span data-ttu-id="11027-127">Klienci WCF błędach SOAP, które występują podczas komunikacji, które mają znaczenie w odniesieniu do aplikacji klienckich są zgłaszane jako zarządzane wyjątki.</span><span class="sxs-lookup"><span data-stu-id="11027-127">In WCF clients, SOAP faults that occur during communication that are of interest to client applications are raised as managed exceptions.</span></span> <span data-ttu-id="11027-128">Dostępnych jest wiele wyjątków, które mogą wystąpić podczas wykonywania programu, aplikacje za pomocą modelu programowania klienta WCF można oczekiwać, że obsłużyć wyjątki następujących dwóch typów komunikacji w wyniku.</span><span class="sxs-lookup"><span data-stu-id="11027-128">While there are many exceptions that can occur during the execution of any program, applications using the WCF client programming model can expect to handle exceptions of the following two types as a result of communication.</span></span>  
  
- <xref:System.TimeoutException>  
  
- <xref:System.ServiceModel.CommunicationException>  
  
 <span data-ttu-id="11027-129"><xref:System.TimeoutException> obiekty są zgłaszane, gdy operacja przekracza określony limit czasu.</span><span class="sxs-lookup"><span data-stu-id="11027-129"><xref:System.TimeoutException> objects are thrown when an operation exceeds the specified timeout period.</span></span>  
  
 <span data-ttu-id="11027-130"><xref:System.ServiceModel.CommunicationException> obiekty są zgłaszane po jakiegoś warunku błędu komunikacji możliwe do odzyskania na usługi lub klienta.</span><span class="sxs-lookup"><span data-stu-id="11027-130"><xref:System.ServiceModel.CommunicationException> objects are thrown when there is some recoverable communication error condition on either the service or the client.</span></span>  
  
 <span data-ttu-id="11027-131"><xref:System.ServiceModel.CommunicationException> Klasa ma dwie ważne typy pochodne <xref:System.ServiceModel.FaultException> i ogólnego <xref:System.ServiceModel.FaultException%601> typu.</span><span class="sxs-lookup"><span data-stu-id="11027-131">The <xref:System.ServiceModel.CommunicationException> class has two important derived types, <xref:System.ServiceModel.FaultException> and the generic <xref:System.ServiceModel.FaultException%601> type.</span></span>  
  
 <span data-ttu-id="11027-132"><xref:System.ServiceModel.FaultException> są zgłaszane wyjątki, gdy odbiornik otrzymuje błędów, nie jest oczekiwana lub określone w umowie operacji; Zwykle dzieje się tak podczas debugowania aplikacji i usługa ma <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> właściwością `true`.</span><span class="sxs-lookup"><span data-stu-id="11027-132"><xref:System.ServiceModel.FaultException> exceptions are thrown when a listener receives a fault that is not expected or specified in the operation contract; usually this occurs when the application is being debugged and the service has the <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true`.</span></span>  
  
 <span data-ttu-id="11027-133"><xref:System.ServiceModel.FaultException%601> Po odebraniu błędów, który jest określony w kontrakt operacji w odpowiedzi na dwukierunkowe operacji na komputerze klienckim są zgłaszane wyjątki (czyli metody z <xref:System.ServiceModel.OperationContractAttribute> atrybutem <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> równa `false`).</span><span class="sxs-lookup"><span data-stu-id="11027-133"><xref:System.ServiceModel.FaultException%601> exceptions are thrown on the client when a fault that is specified in the operation contract is received in response to a two-way operation (that is, a method with an <xref:System.ServiceModel.OperationContractAttribute> attribute with <xref:System.ServiceModel.OperationContractAttribute.IsOneWay%2A> set to `false`).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="11027-134">Gdy usługa WCF ma <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> właściwością `true` klienta napotka to jako niezadeklarowany <xref:System.ServiceModel.FaultException%601> typu <xref:System.ServiceModel.ExceptionDetail>.</span><span class="sxs-lookup"><span data-stu-id="11027-134">When an WCF service has the <xref:System.ServiceModel.ServiceBehaviorAttribute.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> or <xref:System.ServiceModel.Description.ServiceDebugBehavior.IncludeExceptionDetailInFaults%2A?displayProperty=nameWithType> property set to `true` the client experiences this as an undeclared <xref:System.ServiceModel.FaultException%601> of type <xref:System.ServiceModel.ExceptionDetail>.</span></span> <span data-ttu-id="11027-135">Klientów można przechwytywać tego określonego błędu lub obsługi błędów w bloku catch dla <xref:System.ServiceModel.FaultException>.</span><span class="sxs-lookup"><span data-stu-id="11027-135">Clients can either catch this specific fault or handle the fault in a catch block for <xref:System.ServiceModel.FaultException>.</span></span>  
  
 <span data-ttu-id="11027-136">Zwykle tylko <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, i <xref:System.ServiceModel.CommunicationException> wyjątki mają znaczenie w odniesieniu do klientów i usług.</span><span class="sxs-lookup"><span data-stu-id="11027-136">Typically, only <xref:System.ServiceModel.FaultException%601>, <xref:System.TimeoutException>, and <xref:System.ServiceModel.CommunicationException> exceptions are of interest to clients and services.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="11027-137">Oczywiście wystąpić inne wyjątki.</span><span class="sxs-lookup"><span data-stu-id="11027-137">Other exceptions, of course, do occur.</span></span> <span data-ttu-id="11027-138">Nieoczekiwane wyjątki obejmują katastrofalnych awarii, takich jak <xref:System.OutOfMemoryException?displayProperty=nameWithType>; zazwyczaj aplikacje nie należy przechwytywać tych metod.</span><span class="sxs-lookup"><span data-stu-id="11027-138">Unexpected exceptions include catastrophic failures like <xref:System.OutOfMemoryException?displayProperty=nameWithType>; typically applications should not catch such methods.</span></span>  
  
### <a name="catch-fault-exceptions-in-the-correct-order"></a><span data-ttu-id="11027-139">Przechwytuj wyjątki błędów w odpowiedniej kolejności</span><span class="sxs-lookup"><span data-stu-id="11027-139">Catch Fault Exceptions in the Correct Order</span></span>  
 <span data-ttu-id="11027-140">Ponieważ <xref:System.ServiceModel.FaultException%601> pochodzi od klasy <xref:System.ServiceModel.FaultException>, i <xref:System.ServiceModel.FaultException> pochodzi od klasy <xref:System.ServiceModel.CommunicationException>, ważne jest, aby przechwytywać te wyjątki w odpowiedniej kolejności.</span><span class="sxs-lookup"><span data-stu-id="11027-140">Because <xref:System.ServiceModel.FaultException%601> derives from <xref:System.ServiceModel.FaultException>, and <xref:System.ServiceModel.FaultException> derives from <xref:System.ServiceModel.CommunicationException>, it is important to catch these exceptions in the proper order.</span></span> <span data-ttu-id="11027-141">Jeśli na przykład, posiadasz try/catch block, w którym najpierw catch <xref:System.ServiceModel.CommunicationException>, wszystkie określone i są obsługiwane w błędach SOAP nieokreślony do obsługi niestandardowej istnieje; wszelkich bloków catch kolejnych <xref:System.ServiceModel.FaultException%601> wyjątek nigdy nie są wywoływane.</span><span class="sxs-lookup"><span data-stu-id="11027-141">If, for example, you have a try/catch block in which you first catch <xref:System.ServiceModel.CommunicationException>, all specified and unspecified SOAP faults are handled there; any subsequent catch blocks to handle a custom <xref:System.ServiceModel.FaultException%601> exception are never invoked.</span></span>  
  
 <span data-ttu-id="11027-142">Należy pamiętać, że jedna operacja może zwrócić dowolną liczbę błędów określony.</span><span class="sxs-lookup"><span data-stu-id="11027-142">Remember that one operation can return any number of specified faults.</span></span> <span data-ttu-id="11027-143">Każdy błąd to unikatowy typ i musi być obsługiwane osobno.</span><span class="sxs-lookup"><span data-stu-id="11027-143">Each fault is a unique type and must be handled separately.</span></span>  
  
### <a name="handle-exceptions-when-closing-the-channel"></a><span data-ttu-id="11027-144">Obsługa wyjątków podczas zamykania kanał</span><span class="sxs-lookup"><span data-stu-id="11027-144">Handle Exceptions When Closing the Channel</span></span>  
 <span data-ttu-id="11027-145">Większość poprzednich dyskusji związana z błędów wysyłanych w trakcie przetwarzania komunikatów aplikacji, oznacza to, że komunikaty jawnie wysłane przez klienta, gdy aplikacja kliencka wywołuje operacje na obiekcie klienta WCF.</span><span class="sxs-lookup"><span data-stu-id="11027-145">Most of the preceding discussion has to do with faults sent in the course of processing application messages, that is, messages explicitly sent by the client when the client application calls operations on the WCF client object.</span></span>  
  
 <span data-ttu-id="11027-146">Nawet w przypadku obiektów lokalnych usuwania obiektu można zgłosić lub maskować wyjątki, które występują podczas odtwarzania procesu.</span><span class="sxs-lookup"><span data-stu-id="11027-146">Even with local objects disposing the object can either raise or mask exceptions that occur during the recycling process.</span></span> <span data-ttu-id="11027-147">Podobne może wystąpić, gdy używasz obiekty klienta programu WCF.</span><span class="sxs-lookup"><span data-stu-id="11027-147">Something similar can occur when you use WCF client objects.</span></span> <span data-ttu-id="11027-148">Podczas wywoływania operacji są wysyłane komunikaty za pośrednictwem nawiązane połączenie.</span><span class="sxs-lookup"><span data-stu-id="11027-148">When you call operations you are sending messages over an established connection.</span></span> <span data-ttu-id="11027-149">Zamknięcie kanału może generować wyjątki, jeśli połączenie nie może prawidłowo zamknięte lub jest już zamknięty, nawet, jeśli wszystkie operacje zwracana prawidłowo.</span><span class="sxs-lookup"><span data-stu-id="11027-149">Closing the channel can throw exceptions if the connection cannot be cleanly closed or is already closed, even if all the operations returned properly.</span></span>  
  
 <span data-ttu-id="11027-150">Zazwyczaj kanały obiektu klienta są zamknięte w jednej z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="11027-150">Typically, client object channels are closed in one of the following ways:</span></span>  
  
- <span data-ttu-id="11027-151">Gdy obiekt klienta WCF zostanie odtworzony.</span><span class="sxs-lookup"><span data-stu-id="11027-151">When the WCF client object is recycled.</span></span>  
  
- <span data-ttu-id="11027-152">Kiedy aplikacja kliencka wywołuje <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="11027-152">When the client application calls <xref:System.ServiceModel.ClientBase%601.Close%2A?displayProperty=nameWithType>.</span></span>  
  
- <span data-ttu-id="11027-153">Kiedy aplikacja kliencka wywołuje <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="11027-153">When the client application calls <xref:System.ServiceModel.ICommunicationObject.Close%2A?displayProperty=nameWithType>.</span></span>  
  
- <span data-ttu-id="11027-154">Kiedy aplikacja kliencka wywołuje operacją, jest operacją powodujący zakończenie sesji.</span><span class="sxs-lookup"><span data-stu-id="11027-154">When the client application calls an operation that is a terminating operation for a session.</span></span>  
  
 <span data-ttu-id="11027-155">We wszystkich przypadkach zamknięcie kanału powoduje, że kanał, aby zamknąć bazowego kanały, które może wysyłać komunikaty do obsługi złożonych funkcji na poziomie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="11027-155">In all cases, closing the channel instructs the channel to begin closing any underlying channels that may be sending messages to support complex functionality at the application level.</span></span> <span data-ttu-id="11027-156">Na przykład gdy kontrakt wymaga użycia sesji powiązanie podejmuje próbę ustanowienia sesji przez wymianę wiadomości z kanału usługi, dopóki nie zostanie utworzona sesja.</span><span class="sxs-lookup"><span data-stu-id="11027-156">For example, when a contract requires sessions a binding attempts to establish a session by exchanging messages with the service channel until a session is established.</span></span> <span data-ttu-id="11027-157">Podczas zamykania kanał podstawowego kanału sesji powiadamia usługę, sesja zostanie zakończona.</span><span class="sxs-lookup"><span data-stu-id="11027-157">When the channel is closed, the underlying session channel notifies the service that the session is terminated.</span></span> <span data-ttu-id="11027-158">W tym przypadku Jeśli kanał już została przerwana, zamknięta, lub w przeciwnym razie nie nadaje się (na przykład, gdy kabel sieciowy jest odłączony), kanału klienta nie informuje o kanału usługi, który sesja zostanie zakończona, i może spowodować wyjątek.</span><span class="sxs-lookup"><span data-stu-id="11027-158">In this case, if the channel has already aborted, closed, or is otherwise unusable (for example, when a network cable is unplugged), the client channel cannot inform the service channel that the session is terminated and an exception can result.</span></span>  
  
### <a name="abort-the-channel-if-necessary"></a><span data-ttu-id="11027-159">Przerwij kanału, w razie potrzeby</span><span class="sxs-lookup"><span data-stu-id="11027-159">Abort the Channel If Necessary</span></span>  
 <span data-ttu-id="11027-160">Ponieważ zamknięcie kanału może generować wyjątki, następnie zalecane jest, oprócz przechwytywania wyjątków błędów w odpowiedniej kolejności, ważne jest, aby przerwać kanału, który był używany w wywołania w bloku catch.</span><span class="sxs-lookup"><span data-stu-id="11027-160">Because closing the channel can also throw exceptions, then, it is recommended that in addition to catching fault exceptions in the correct order, it is important to abort the channel that was used in making the call in the catch block.</span></span>  
  
 <span data-ttu-id="11027-161">Jeśli będzie to możliwe, że inne ich używać błędu powoduje błąd informacje specyficzne dla operacji, nie ma potrzeby przerwania kanału (mimo że te przypadki występują rzadko).</span><span class="sxs-lookup"><span data-stu-id="11027-161">If the fault conveys error information specific to an operation and it remains possible that others can use it, there is no need to abort the channel (although these cases are rare).</span></span> <span data-ttu-id="11027-162">We wszystkich innych przypadkach zalecane jest, aby przerwać kanału.</span><span class="sxs-lookup"><span data-stu-id="11027-162">In all other cases, it is recommended that you abort the channel.</span></span> <span data-ttu-id="11027-163">Dla przykładu, który pokazuje wszystkie te punkty, zobacz [oczekiwane wyjątki](../../../docs/framework/wcf/samples/expected-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="11027-163">For a sample that demonstrates all of these points, see [Expected Exceptions](../../../docs/framework/wcf/samples/expected-exceptions.md).</span></span>  
  
 <span data-ttu-id="11027-164">Poniższy przykład kodu pokazuje sposób obsługi wyjątków błędu protokołu SOAP w podstawowej aplikacji klienckiej, tym zadeklarowane błędów i niezadeklarowany błędów.</span><span class="sxs-lookup"><span data-stu-id="11027-164">The following code example shows how to handle SOAP fault exceptions in a basic client application, including a declared fault and an undeclared fault.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="11027-165">Ten przykładowy kod nie używać `using` konstruowania.</span><span class="sxs-lookup"><span data-stu-id="11027-165">This sample code does not use the `using` construct.</span></span> <span data-ttu-id="11027-166">Ponieważ zamykania kanałów mogą zgłaszać wyjątki, zaleca się, że aplikacje tworzą kliencie WCF Użyj pierwszego, a następnie otwórz i zamknij blok try klienta WCF, w tym samym.</span><span class="sxs-lookup"><span data-stu-id="11027-166">Because closing channels can throw exceptions, it is recommended that applications create a WCF client first, and then open, use, and close the WCF client in the same try block.</span></span> <span data-ttu-id="11027-167">Aby uzyskać więcej informacji, zobacz [Przegląd klienta programu WCF](../../../docs/framework/wcf/wcf-client-overview.md) i [Użyj Zamknij i Abort, aby zwolnić zasoby klienta WCF](../../../docs/framework/wcf/samples/use-close-abort-release-wcf-client-resources.md).</span><span class="sxs-lookup"><span data-stu-id="11027-167">For details, see [WCF Client Overview](../../../docs/framework/wcf/wcf-client-overview.md) and [Use Close and Abort to release WCF client resources](../../../docs/framework/wcf/samples/use-close-abort-release-wcf-client-resources.md).</span></span>  
  
 [!code-csharp[FaultContractAttribute#3](../../../samples/snippets/csharp/VS_Snippets_CFX/faultcontractattribute/cs/client.cs#3)]
 [!code-vb[FaultContractAttribute#3](../../../samples/snippets/visualbasic/VS_Snippets_CFX/faultcontractattribute/vb/client.vb#3)]  
  
## <a name="see-also"></a><span data-ttu-id="11027-168">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="11027-168">See also</span></span>

- <xref:System.ServiceModel.FaultException>
- <xref:System.ServiceModel.FaultException%601>
- <xref:System.ServiceModel.CommunicationException?displayProperty=nameWithType>
- [<span data-ttu-id="11027-169">Oczekiwane wyjątki</span><span class="sxs-lookup"><span data-stu-id="11027-169">Expected Exceptions</span></span>](../../../docs/framework/wcf/samples/expected-exceptions.md)
- [<span data-ttu-id="11027-170">Użyj Zamknij i Przerwij, aby zwolnić zasoby klienta WCF</span><span class="sxs-lookup"><span data-stu-id="11027-170">Use Close and Abort to release WCF client resources</span></span>](../../../docs/framework/wcf/samples/use-close-abort-release-wcf-client-resources.md)
