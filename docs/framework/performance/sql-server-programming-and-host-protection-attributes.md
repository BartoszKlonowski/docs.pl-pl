---
title: Atrybuty ochrony hosta i programowanie SQL Server
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- SQL Server [.NET Framework]
- permission sets, SQL Server
- SQL Server Programming and Host Protection Attributes
- managed code, SQL Server
- reliability [.NET Framework]
- writing reliable code
- hosts, reliability
- host protection attributes
- HostProtectionAttribute class, reliability
ms.assetid: 7dfa36b4-e773-4c75-a3ff-ff1af3ce4c4f
caps.latest.revision: "13"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: a775b1c4f8446e756301650dcc61e3ef378408f6
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="sql-server-programming-and-host-protection-attributes"></a>Atrybuty ochrony hosta i programowanie SQL Server
Możliwość załadowania i wykonania kodu zarządzanego na hoście programu SQL Server wymaga spełnienia wymagań hosta dla zabezpieczenia dostępu kodu i ochrony zasobów hosta.  Wymagania dotyczące zabezpieczeń dostępu kodu są określane przez jeden z trzech zestawów uprawnień programu SQL Server: bezpieczne, dostępu zewnętrznego lub NIEBEZPIECZNA. Kod wykonywania w SAFE lub zestawy uprawnień dostępu zewnętrznego należy unikać niektórych typów albo elementów członkowskich, które mają <xref:System.Security.Permissions.HostProtectionAttribute> atrybut zastosowany. <xref:System.Security.Permissions.HostProtectionAttribute> Nie jest uprawnienie zabezpieczeń jak gwarancje niezawodności w identyfikuje kod tworzy typy lub metody, czy host może uniemożliwić.  Korzystanie z <xref:System.Security.Permissions.HostProtectionAttribute> wymusza modelu programowania, który pomaga chronić stabilności hosta.  
  
## <a name="host-protection-attributes"></a>Atrybuty ochrony hosta  
 Atrybuty ochrony hosta identyfikacji typów albo elementów członkowskich, które nie mieści się model programowania hosta i reprezentują następujące poziomy zwiększa niezawodność zagrożeń:  
  
-   W przeciwnym razie są niegroźne.  
  
-   Może prowadzić do destabilization kodu zarządzanego serwera użytkownika.  
  
-   Może prowadzić do destabilization samego procesu serwera.  
  
 SQL Server nie zezwala na używanie typu lub elementu członkowskiego, który ma <xref:System.Security.Permissions.HostProtectionAttribute> , który określa <xref:System.Security.Permissions.HostProtectionResource> wartość <xref:System.Security.Permissions.HostProtectionResource.SharedState>, <xref:System.Security.Permissions.HostProtectionResource.Synchronization>, <xref:System.Security.Permissions.HostProtectionResource.MayLeakOnAbort>, lub <xref:System.Security.Permissions.HostProtectionResource.ExternalProcessMgmt>. Zapobiega to zestawy z wywoływania elementów członkowskich, które włączyć stan udostępniania, wykonać synchronizację, może spowodować przecieków zasobów na zakończenie lub wpływa na integralność procesu programu SQL Server.  
  
### <a name="disallowed-types-and-members"></a>Niedozwolone typy i składniki  
 W poniższej tabeli przedstawiono typy i składniki którego <xref:System.Security.Permissions.HostProtectionResource> wartości są niedozwolone w programie SQL Server.  
  
|Przestrzeń nazw|Typ lub element członkowski|  
|---------------|--------------------|  
|`Microsoft.Win32`|<xref:Microsoft.Win32.PowerModeChangedEventArgs>klasy<br /><br /> <xref:Microsoft.Win32.PowerModeChangedEventHandler>Delegowanie<br /><br /> <xref:Microsoft.Win32.SessionEndedEventArgs>klasy<br /><br /> <xref:Microsoft.Win32.SessionEndedEventHandler>Delegowanie<br /><br /> <xref:Microsoft.Win32.SessionEndingEventArgs>klasy<br /><br /> <xref:Microsoft.Win32.SessionEndingEventHandler>Delegowanie<br /><br /> <xref:Microsoft.Win32.SessionSwitchEventArgs>klasy<br /><br /> <xref:Microsoft.Win32.SessionSwitchEventHandler>Delegowanie<br /><br /> <xref:Microsoft.Win32.SystemEvents>klasy<br /><br /> <xref:Microsoft.Win32.TimerElapsedEventArgs>klasy<br /><br /> <xref:Microsoft.Win32.TimerElapsedEventHandler>Delegowanie<br /><br /> <xref:Microsoft.Win32.UserPreferenceChangedEventArgs>klasy<br /><br /> <xref:Microsoft.Win32.UserPreferenceChangingEventArgs>klasy|  
|`System.Collections`|<xref:System.Collections.ArrayList.Synchronized%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Collections.Hashtable.Synchronized%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Collections.Queue.Synchronized%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Collections.SortedList.Synchronized%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Collections.Stack.Synchronized%2A?displayProperty=nameWithType>— Metoda|  
|`System.ComponentModel`|<xref:System.ComponentModel.AddingNewEventArgs>klasy<br /><br /> <xref:System.ComponentModel.AddingNewEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.ArrayConverter>klasy<br /><br /> <xref:System.ComponentModel.AsyncCompletedEventArgs>klasy<br /><br /> <xref:System.ComponentModel.AsyncCompletedEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.AsyncOperation>klasy<br /><br /> <xref:System.ComponentModel.AsyncOperationManager>klasy<br /><br /> <xref:System.ComponentModel.AttributeCollection>klasy<br /><br /> <xref:System.ComponentModel.BackgroundWorker>klasy<br /><br /> <xref:System.ComponentModel.BaseNumberConverter>klasy<br /><br /> <xref:System.ComponentModel.BindingList%601>klasy<br /><br /> <xref:System.ComponentModel.BooleanConverter>klasy<br /><br /> <xref:System.ComponentModel.ByteConverter>klasy<br /><br /> <xref:System.ComponentModel.CancelEventArgs>klasy<br /><br /> <xref:System.ComponentModel.CancelEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.CharConverter>klasy<br /><br /> <xref:System.ComponentModel.CollectionChangeEventArgs>klasy<br /><br /> <xref:System.ComponentModel.CollectionChangeEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.CollectionConverter>klasy<br /><br /> <xref:System.ComponentModel.ComponentCollection>klasy<br /><br /> <xref:System.ComponentModel.ComponentConverter>klasy<br /><br /> <xref:System.ComponentModel.ComponentEditor>klasy<br /><br /> <xref:System.ComponentModel.ComponentResourceManager>klasy<br /><br /> <xref:System.ComponentModel.Container>klasy<br /><br /> <xref:System.ComponentModel.ContainerFilterService>klasy<br /><br /> <xref:System.ComponentModel.CultureInfoConverter>klasy<br /><br /> <xref:System.ComponentModel.CustomTypeDescriptor>klasy<br /><br /> <xref:System.ComponentModel.DateTimeConverter>klasy<br /><br /> <xref:System.ComponentModel.DecimalConverter>klasy<br /><br /> <xref:System.ComponentModel.Design.ActiveDesignerEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.ActiveDesignerEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.CheckoutException>klasy<br /><br /> <xref:System.ComponentModel.Design.CommandID>klasy<br /><br /> <xref:System.ComponentModel.Design.ComponentChangedEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.ComponentChangedEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.ComponentChangingEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.ComponentChangingEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.ComponentEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.ComponentEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.ComponentRenameEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.ComponentRenameEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.DesignerCollection>klasy<br /><br /> <xref:System.ComponentModel.Design.DesignerEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.DesignerEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.DesignerOptionService>klasy<br /><br /> <xref:System.ComponentModel.Design.DesignerTransaction>klasy<br /><br /> <xref:System.ComponentModel.Design.DesignerTransactionCloseEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.DesignerTransactionCloseEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.DesignerVerb>klasy<br /><br /> <xref:System.ComponentModel.Design.DesignerVerbCollection>klasy<br /><br /> <xref:System.ComponentModel.Design.DesigntimeLicenseContext>klasy<br /><br /> <xref:System.ComponentModel.Design.DesigntimeLicenseContextSerializer>klasy<br /><br /> <xref:System.ComponentModel.Design.MenuCommand>klasy<br /><br /> <xref:System.ComponentModel.Design.Serialization.ComponentSerializationService>klasy<br /><br /> <xref:System.ComponentModel.Design.Serialization.ContextStack>klasy<br /><br /> <xref:System.ComponentModel.Design.Serialization.DesignerLoader>klasy<br /><br /> <xref:System.ComponentModel.Design.Serialization.InstanceDescriptor>klasy<br /><br /> <xref:System.ComponentModel.Design.Serialization.MemberRelationshipService>klasy<br /><br /> <xref:System.ComponentModel.Design.Serialization.ResolveNameEventArgs>klasy<br /><br /> <xref:System.ComponentModel.Design.Serialization.ResolveNameEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.Serialization.SerializationStore>klasy<br /><br /> <xref:System.ComponentModel.Design.ServiceContainer>klasy<br /><br /> <xref:System.ComponentModel.Design.ServiceCreatorCallback>Delegowanie<br /><br /> <xref:System.ComponentModel.Design.StandardCommands>klasy<br /><br /> <xref:System.ComponentModel.Design.StandardToolWindows>klasy<br /><br /> <xref:System.ComponentModel.DoubleConverter>klasy<br /><br /> <xref:System.ComponentModel.DoWorkEventArgs>klasy<br /><br /> <xref:System.ComponentModel.DoWorkEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.EnumConverter>klasy<br /><br /> <xref:System.ComponentModel.EventDescriptor>klasy<br /><br /> <xref:System.ComponentModel.EventDescriptorCollection>klasy<br /><br /> <xref:System.ComponentModel.EventHandlerList>klasy<br /><br /> <xref:System.ComponentModel.ExpandableObjectConverter>klasy<br /><br /> <xref:System.ComponentModel.HandledEventArgs>klasy<br /><br /> <xref:System.ComponentModel.HandledEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.InstanceCreationEditor>klasy<br /><br /> <xref:System.ComponentModel.Int16Converter>klasy<br /><br /> <xref:System.ComponentModel.Int32Converter>klasy<br /><br /> <xref:System.ComponentModel.Int64Converter>klasy<br /><br /> <xref:System.ComponentModel.InvalidAsynchronousStateException>klasy<br /><br /> <xref:System.ComponentModel.InvalidEnumArgumentException>klasy<br /><br /> <xref:System.ComponentModel.ISynchronizeInvoke.BeginInvoke%2A>— Metoda<br /><br /> <xref:System.ComponentModel.License>klasy<br /><br /> <xref:System.ComponentModel.LicenseContext>klasy<br /><br /> <xref:System.ComponentModel.LicenseException>klasy<br /><br /> <xref:System.ComponentModel.LicenseManager>klasy<br /><br /> <xref:System.ComponentModel.LicenseProvider>klasy<br /><br /> <xref:System.ComponentModel.LicFileLicenseProvider>klasy<br /><br /> <xref:System.ComponentModel.ListChangedEventArgs>klasy<br /><br /> <xref:System.ComponentModel.ListChangedEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.ListSortDescription>klasy<br /><br /> <xref:System.ComponentModel.ListSortDescriptionCollection>klasy<br /><br /> <xref:System.ComponentModel.MaskedTextProvider>klasy<br /><br /> <xref:System.ComponentModel.MemberDescriptor>klasy<br /><br /> <xref:System.ComponentModel.MultilineStringConverter>klasy<br /><br /> <xref:System.ComponentModel.NestedContainer>klasy<br /><br /> <xref:System.ComponentModel.NullableConverter>klasy<br /><br /> <xref:System.ComponentModel.ProgressChangedEventArgs>klasy<br /><br /> <xref:System.ComponentModel.ProgressChangedEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.PropertyChangedEventArgs>klasy<br /><br /> <xref:System.ComponentModel.PropertyChangedEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.PropertyDescriptor>klasy<br /><br /> <xref:System.ComponentModel.PropertyDescriptorCollection>klasy<br /><br /> <xref:System.ComponentModel.ReferenceConverter>klasy<br /><br /> <xref:System.ComponentModel.RefreshEventArgs>klasy<br /><br /> <xref:System.ComponentModel.RefreshEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.RunWorkerCompletedEventArgs>klasy<br /><br /> <xref:System.ComponentModel.RunWorkerCompletedEventHandler>Delegowanie<br /><br /> <xref:System.ComponentModel.SByteConverter>klasy<br /><br /> <xref:System.ComponentModel.SingleConverter>klasy<br /><br /> <xref:System.ComponentModel.StringConverter>klasy<br /><br /> <xref:System.ComponentModel.SyntaxCheck>klasy<br /><br /> <xref:System.ComponentModel.TimeSpanConverter>klasy<br /><br /> <xref:System.ComponentModel.TypeConverter>klasy<br /><br /> <xref:System.ComponentModel.TypeDescriptionProvider>klasy<br /><br /> <xref:System.ComponentModel.TypeDescriptor>klasy<br /><br /> <xref:System.ComponentModel.TypeListConverter>klasy<br /><br /> <xref:System.ComponentModel.UInt16Converter>klasy<br /><br /> <xref:System.ComponentModel.UInt32Converter>klasy<br /><br /> <xref:System.ComponentModel.UInt64Converter>klasy<br /><br /> <xref:System.ComponentModel.WarningException>klasy<br /><br /> <xref:System.ComponentModel.Win32Exception>klasy|  
|`System.Diagnostics`|<xref:System.Diagnostics.Debug.Listeners%2A?displayProperty=nameWithType>Właściwość<br /><br /> <xref:System.Diagnostics.Trace.Listeners%2A?displayProperty=nameWithType>Właściwość<br /><br /> <xref:System.Diagnostics.EventLog.SynchronizingObject%2A?displayProperty=nameWithType>Właściwość<br /><br /> <xref:System.Diagnostics.ConsoleTraceListener>klasy<br /><br /> <xref:System.Diagnostics.DefaultTraceListener>klasy<br /><br /> <xref:System.Diagnostics.DelimitedListTraceListener>klasy<br /><br /> <xref:System.Diagnostics.EventLogTraceListener>klasy<br /><br /> <xref:System.Diagnostics.PerformanceCounter>klasy<br /><br /> <xref:System.Diagnostics.PerformanceCounterCategory>klasy<br /><br /> <xref:System.Diagnostics.Process>klasy<br /><br /> <xref:System.Diagnostics.ProcessStartInfo>klasy<br /><br /> <xref:System.Diagnostics.TextWriterTraceListener>klasy<br /><br /> <xref:System.Diagnostics.TraceListener>klasy<br /><br /> <xref:System.Diagnostics.XmlWriterTraceListener>klasy<br /><br /> <xref:System.Diagnostics.TraceSource.Listeners%2A?displayProperty=nameWithType>Właściwość|  
|`System.IO`|<xref:System.IO.Stream.Synchronized%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.IO.TextReader.Synchronized%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.IO.TextWriter.Synchronized%2A?displayProperty=nameWithType>— Metoda|  
|`System.Reflection.Emit`|<xref:System.Reflection.Emit.ConstructorBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.EventBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.FieldBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.MethodBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.CustomAttributeBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.MethodRental>klasy<br /><br /> <xref:System.Reflection.Emit.ModuleBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.PropertyBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.TypeBuilder>klasy<br /><br /> <xref:System.Reflection.Emit.UnmanagedMarshal>klasy|  
|`System.Text`|<xref:System.Text.RegularExpressions.Group.Synchronized%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Text.RegularExpressions.Match.Synchronized%2A?displayProperty=nameWithType>— Metoda|  
|`System.Threading`|<xref:System.Threading.AutoResetEvent>klasy<br /><br /> <xref:System.Threading.EventWaitHandle>klasy<br /><br /> <xref:System.Threading.ManualResetEvent>klasy<br /><br /> <xref:System.Threading.Monitor>klasy<br /><br /> <xref:System.Threading.Mutex>klasy<br /><br /> <xref:System.Threading.ReaderWriterLock>klasy<br /><br /> <xref:System.Threading.Semaphore>klasy<br /><br /> <xref:System.Threading.Thread.AllocateNamedDataSlot%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.BeginCriticalRegion%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.EndCriticalRegion%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.FreeNamedDataSlot%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.GetData%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.SetApartmentState%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.SetData%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.SpinWait%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.Thread.TrySetApartmentState%2A?displayProperty=nameWithType>— Metoda<br /><br /> <xref:System.Threading.ThreadPool>klasy<br /><br /> <xref:System.Threading.Timer>klasy|  
|`System.Timers`|<xref:System.Timers.Timer>klasy|  
|`System.Web.Configuration`|<xref:System.Web.Configuration.MachineKeyValidationConverter>klasy|  
|`System.Windows.Forms`|<xref:System.Windows.Forms.AutoCompleteStringCollection.SyncRoot%2A?displayProperty=nameWithType>Właściwość|  
  
## <a name="sql-server-permission-sets"></a>Zestawy uprawnień serwera SQL  
 SQL Server zezwala użytkownikom na określenie wymagań w zakresie niezawodność kodu wdrożone w bazie danych. Gdy zestawy są przekazywane do bazy danych, autorem zestawu można określić jeden z trzech zestawów uprawnień dla tego zestawu: bezpieczne, dostępu zewnętrznego lub NIEBEZPIECZNA.  
  
|Zestaw uprawnień|BEZPIECZNE|DOSTĘP DO ZEWNĘTRZNYCH|UNSAFE|  
|--------------------|----------|----------------------|------------|  
|Zabezpieczenia dostępu kodu|Tylko do wykonywania|Wykonanie + dostęp do zasobów zewnętrznych|Bez ograniczeń|  
|Ograniczenia modelu programowania|Tak|Tak|Bez ograniczeń|  
|Możliwość weryfikacji wymagań|Tak|Tak|Nie|  
|Możliwość wywołania kodu natywnego|Nie|Nie|Tak|  
  
 BEZPIECZNE jest najbardziej niezawodne i bezpieczne tryb z ograniczeniami skojarzone pod względem dozwolonych modelu programowania. BEZPIECZNE kod ma wysoka niezawodność i funkcje zabezpieczeń. Zestawy bezpieczne podane są wystarczające uprawnienia do uruchamiania, wykonać obliczenia i mieć dostęp do lokalnej bazy danych. Zestawy bezpieczne muszą być sprawdzalnie wpisz bezpieczne i nie mogą wywoływać kodu niezarządzanego.  
  
 Dostęp do zewnętrznych udostępnia opcji zabezpieczeń pośredniego, dzięki czemu kod dostępu do zasobów zewnętrznych do bazy danych, ale zachowaniu bezpieczeństwa bezpieczeństwa i niezawodności.  
  
 UNSAFE jest wysoce zaufanych kod, który można tworzyć tylko przez administratorów bazy danych. Ten kod zaufany nie ma żadnych ograniczeń dostępu kodu i mogą wywoływać kodu niezarządzanego (natywna).  
  
 Program SQL Server używa warstwa zasad zabezpieczeń dostępu kodu na poziomie hosta, aby skonfigurować zasady hosta, która udziela jeden z trzech zestawów uprawnień na podstawie uprawnienia ustawić przechowywanych w wykazach programu SQL Server. Zarządzany kod zawsze uruchomiona w bazie danych pobiera jeden z tych zestawów uprawnień dostępu do kodu.  
  
## <a name="programming-model-restrictions"></a>Ograniczenia modelu programowania  
 Model programowania dla kodu zarządzanego w programie SQL Server wymaga funkcji, procedury i typy, które nie wymagają użycia stanu przechowywanych w wielu wywołań lub udostępniania stanu wiele sesji użytkownika. Co więcej zgodnie z wcześniejszym opisem obecności udostępniania stanu może spowodować wyjątków krytycznych, które mają wpływ na skalowalność i niezawodność aplikacji.  
  
 Biorąc pod uwagę następujące zagadnienia, program SQL Server nie zezwala na użycie zmiennych statycznych i statyczne elementy członkowskie danych. BEZPIECZNE i dostęp do zewnętrznych zestawów SQL Server sprawdza metadanych zestawu w czasie tworzenia zestawu i tworzenie takie zestawy nie powiedzie się w przypadku odnalezienia użycie danych statycznych elementów członkowskich i zmiennych.  
  
## <a name="see-also"></a>Zobacz też  
 <xref:System.Security.Permissions.HostProtectionAttribute>  
 <xref:System.Security.Permissions.HostProtectionResource>
