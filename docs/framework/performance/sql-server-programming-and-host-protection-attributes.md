---
title: Atrybuty ochrony hosta i programowanie SQL Server
ms.date: 03/30/2017
helpviewer_keywords:
- SQL Server [.NET Framework]
- permission sets, SQL Server
- SQL Server Programming and Host Protection Attributes
- managed code, SQL Server
- reliability [.NET Framework]
- writing reliable code
- hosts, reliability
- host protection attributes
- HostProtectionAttribute class, reliability
ms.assetid: 7dfa36b4-e773-4c75-a3ff-ff1af3ce4c4f
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 6300195cafeedd8823e0b10b4ee0ebf9ff8e2055
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/23/2019
ms.locfileid: "54528072"
---
# <a name="sql-server-programming-and-host-protection-attributes"></a>Atrybuty ochrony hosta i programowanie SQL Server
Możliwość załadowanie i wykonanie kodu zarządzanego hosta programu SQL Server wymaga spełniających wymagania dotyczące zabezpieczeń dostępu kodu i ochrona zasobów hosta hostów.  Wymagania dotyczące zabezpieczeń dostępu kodu są określone przez jeden z trzech zestawów uprawnień programu SQL Server: BEZPIECZNY dostęp do zewnętrznych lub UNSAFE. Wykonywanie kodu w SEJFIE lub zestawy uprawnień dostępu zewnętrznego należy unikać niektórych typów ani elementów członkowskich, które mają <xref:System.Security.Permissions.HostProtectionAttribute> zastosowany. <xref:System.Security.Permissions.HostProtectionAttribute> Nie jest uprawnienia zabezpieczeń jak gwarancje niezawodności w identyfikuje konkretny kod tworzy typy lub metody, że host może nie zezwalać.  Korzystanie z <xref:System.Security.Permissions.HostProtectionAttribute> wymusza modelu programowania, która pomaga chronić stabilności hosta.  
  
## <a name="host-protection-attributes"></a>Atrybuty ochrony hosta  
 Atrybuty ochrony hosta określić typy lub elementy członkowskie, które nie mieści się model programowania hosta i reprezentują następujące poziomy zwiększa niezawodność zagrożenia:  
  
-   W przeciwnym razie są niegroźne.  
  
-   Może spowodować destabilization kodu zarządzanego serwera użytkownika.  
  
-   Może spowodować destabilization z sam proces serwera.  
  
 Program SQL Server nie zezwala na korzystanie z typu lub elementu członkowskiego, który ma <xref:System.Security.Permissions.HostProtectionAttribute> określający <xref:System.Security.Permissions.HostProtectionResource> wartość <xref:System.Security.Permissions.HostProtectionResource.SharedState>, <xref:System.Security.Permissions.HostProtectionResource.Synchronization>, <xref:System.Security.Permissions.HostProtectionResource.MayLeakOnAbort>, lub <xref:System.Security.Permissions.HostProtectionResource.ExternalProcessMgmt>. Zapobiega to zestawy z wywołania elementów członkowskich, które Włączanie udostępniania stanu, przeprowadzić synchronizację, mogą spowodować wyciek zasobów na zakończenie i wpływa na integralność procesu programu SQL Server.  
  
### <a name="disallowed-types-and-members"></a>Niedozwolone typy i elementy członkowskie  
 W poniższej tabeli przedstawiono typy i elementy członkowskie którego <xref:System.Security.Permissions.HostProtectionResource> wartości są niedozwolone w programie SQL Server.  
  
|Przestrzeń nazw|Typ lub element członkowski|  
|---------------|--------------------|  
|`Microsoft.Win32`|<xref:Microsoft.Win32.PowerModeChangedEventArgs> Klasa<br /><br /> <xref:Microsoft.Win32.PowerModeChangedEventHandler> Delegat<br /><br /> <xref:Microsoft.Win32.SessionEndedEventArgs> Klasa<br /><br /> <xref:Microsoft.Win32.SessionEndedEventHandler> Delegat<br /><br /> <xref:Microsoft.Win32.SessionEndingEventArgs> Klasa<br /><br /> <xref:Microsoft.Win32.SessionEndingEventHandler> Delegat<br /><br /> <xref:Microsoft.Win32.SessionSwitchEventArgs> Klasa<br /><br /> <xref:Microsoft.Win32.SessionSwitchEventHandler> Delegat<br /><br /> <xref:Microsoft.Win32.SystemEvents> Klasa<br /><br /> <xref:Microsoft.Win32.TimerElapsedEventArgs> Klasa<br /><br /> <xref:Microsoft.Win32.TimerElapsedEventHandler> Delegat<br /><br /> <xref:Microsoft.Win32.UserPreferenceChangedEventArgs> Klasa<br /><br /> <xref:Microsoft.Win32.UserPreferenceChangingEventArgs> Klasa|  
|`System.Collections`|<xref:System.Collections.ArrayList.Synchronized%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Collections.Hashtable.Synchronized%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Collections.Queue.Synchronized%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Collections.SortedList.Synchronized%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Collections.Stack.Synchronized%2A?displayProperty=nameWithType> — Metoda|  
|`System.ComponentModel`|<xref:System.ComponentModel.AddingNewEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.AddingNewEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.ArrayConverter> Klasa<br /><br /> <xref:System.ComponentModel.AsyncCompletedEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.AsyncCompletedEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.AsyncOperation> Klasa<br /><br /> <xref:System.ComponentModel.AsyncOperationManager> Klasa<br /><br /> <xref:System.ComponentModel.AttributeCollection> Klasa<br /><br /> <xref:System.ComponentModel.BackgroundWorker> Klasa<br /><br /> <xref:System.ComponentModel.BaseNumberConverter> Klasa<br /><br /> <xref:System.ComponentModel.BindingList%601> Klasa<br /><br /> <xref:System.ComponentModel.BooleanConverter> Klasa<br /><br /> <xref:System.ComponentModel.ByteConverter> Klasa<br /><br /> <xref:System.ComponentModel.CancelEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.CancelEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.CharConverter> Klasa<br /><br /> <xref:System.ComponentModel.CollectionChangeEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.CollectionChangeEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.CollectionConverter> Klasa<br /><br /> <xref:System.ComponentModel.ComponentCollection> Klasa<br /><br /> <xref:System.ComponentModel.ComponentConverter> Klasa<br /><br /> <xref:System.ComponentModel.ComponentEditor> Klasa<br /><br /> <xref:System.ComponentModel.ComponentResourceManager> Klasa<br /><br /> <xref:System.ComponentModel.Container> Klasa<br /><br /> <xref:System.ComponentModel.ContainerFilterService> Klasa<br /><br /> <xref:System.ComponentModel.CultureInfoConverter> Klasa<br /><br /> <xref:System.ComponentModel.CustomTypeDescriptor> Klasa<br /><br /> <xref:System.ComponentModel.DateTimeConverter> Klasa<br /><br /> <xref:System.ComponentModel.DecimalConverter> Klasa<br /><br /> <xref:System.ComponentModel.Design.ActiveDesignerEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.ActiveDesignerEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.CheckoutException> Klasa<br /><br /> <xref:System.ComponentModel.Design.CommandID> Klasa<br /><br /> <xref:System.ComponentModel.Design.ComponentChangedEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.ComponentChangedEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.ComponentChangingEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.ComponentChangingEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.ComponentEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.ComponentEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.ComponentRenameEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.ComponentRenameEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.DesignerCollection> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesignerEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesignerEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.DesignerOptionService> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesignerTransaction> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesignerTransactionCloseEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesignerTransactionCloseEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.DesignerVerb> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesignerVerbCollection> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesigntimeLicenseContext> Klasa<br /><br /> <xref:System.ComponentModel.Design.DesigntimeLicenseContextSerializer> Klasa<br /><br /> <xref:System.ComponentModel.Design.MenuCommand> Klasa<br /><br /> <xref:System.ComponentModel.Design.Serialization.ComponentSerializationService> Klasa<br /><br /> <xref:System.ComponentModel.Design.Serialization.ContextStack> Klasa<br /><br /> <xref:System.ComponentModel.Design.Serialization.DesignerLoader> Klasa<br /><br /> <xref:System.ComponentModel.Design.Serialization.InstanceDescriptor> Klasa<br /><br /> <xref:System.ComponentModel.Design.Serialization.MemberRelationshipService> Klasa<br /><br /> <xref:System.ComponentModel.Design.Serialization.ResolveNameEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.Design.Serialization.ResolveNameEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.Design.Serialization.SerializationStore> Klasa<br /><br /> <xref:System.ComponentModel.Design.ServiceContainer> Klasa<br /><br /> <xref:System.ComponentModel.Design.ServiceCreatorCallback> Delegat<br /><br /> <xref:System.ComponentModel.Design.StandardCommands> Klasa<br /><br /> <xref:System.ComponentModel.Design.StandardToolWindows> Klasa<br /><br /> <xref:System.ComponentModel.DoubleConverter> Klasa<br /><br /> <xref:System.ComponentModel.DoWorkEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.DoWorkEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.EnumConverter> Klasa<br /><br /> <xref:System.ComponentModel.EventDescriptor> Klasa<br /><br /> <xref:System.ComponentModel.EventDescriptorCollection> Klasa<br /><br /> <xref:System.ComponentModel.EventHandlerList> Klasa<br /><br /> <xref:System.ComponentModel.ExpandableObjectConverter> Klasa<br /><br /> <xref:System.ComponentModel.HandledEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.HandledEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.InstanceCreationEditor> Klasa<br /><br /> <xref:System.ComponentModel.Int16Converter> Klasa<br /><br /> <xref:System.ComponentModel.Int32Converter> Klasa<br /><br /> <xref:System.ComponentModel.Int64Converter> Klasa<br /><br /> <xref:System.ComponentModel.InvalidAsynchronousStateException> Klasa<br /><br /> <xref:System.ComponentModel.InvalidEnumArgumentException> Klasa<br /><br /> <xref:System.ComponentModel.ISynchronizeInvoke.BeginInvoke%2A> — Metoda<br /><br /> <xref:System.ComponentModel.License> Klasa<br /><br /> <xref:System.ComponentModel.LicenseContext> Klasa<br /><br /> <xref:System.ComponentModel.LicenseException> Klasa<br /><br /> <xref:System.ComponentModel.LicenseManager> Klasa<br /><br /> <xref:System.ComponentModel.LicenseProvider> Klasa<br /><br /> <xref:System.ComponentModel.LicFileLicenseProvider> Klasa<br /><br /> <xref:System.ComponentModel.ListChangedEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.ListChangedEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.ListSortDescription> Klasa<br /><br /> <xref:System.ComponentModel.ListSortDescriptionCollection> Klasa<br /><br /> <xref:System.ComponentModel.MaskedTextProvider> Klasa<br /><br /> <xref:System.ComponentModel.MemberDescriptor> Klasa<br /><br /> <xref:System.ComponentModel.MultilineStringConverter> Klasa<br /><br /> <xref:System.ComponentModel.NestedContainer> Klasa<br /><br /> <xref:System.ComponentModel.NullableConverter> Klasa<br /><br /> <xref:System.ComponentModel.ProgressChangedEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.ProgressChangedEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.PropertyChangedEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.PropertyChangedEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.PropertyDescriptor> Klasa<br /><br /> <xref:System.ComponentModel.PropertyDescriptorCollection> Klasa<br /><br /> <xref:System.ComponentModel.ReferenceConverter> Klasa<br /><br /> <xref:System.ComponentModel.RefreshEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.RefreshEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.RunWorkerCompletedEventArgs> Klasa<br /><br /> <xref:System.ComponentModel.RunWorkerCompletedEventHandler> Delegat<br /><br /> <xref:System.ComponentModel.SByteConverter> Klasa<br /><br /> <xref:System.ComponentModel.SingleConverter> Klasa<br /><br /> <xref:System.ComponentModel.StringConverter> Klasa<br /><br /> <xref:System.ComponentModel.SyntaxCheck> Klasa<br /><br /> <xref:System.ComponentModel.TimeSpanConverter> Klasa<br /><br /> <xref:System.ComponentModel.TypeConverter> Klasa<br /><br /> <xref:System.ComponentModel.TypeDescriptionProvider> Klasa<br /><br /> <xref:System.ComponentModel.TypeDescriptor> Klasa<br /><br /> <xref:System.ComponentModel.TypeListConverter> Klasa<br /><br /> <xref:System.ComponentModel.UInt16Converter> Klasa<br /><br /> <xref:System.ComponentModel.UInt32Converter> Klasa<br /><br /> <xref:System.ComponentModel.UInt64Converter> Klasa<br /><br /> <xref:System.ComponentModel.WarningException> Klasa<br /><br /> <xref:System.ComponentModel.Win32Exception> Klasa|  
|`System.Diagnostics`|<xref:System.Diagnostics.Debug.Listeners%2A?displayProperty=nameWithType> Właściwość<br /><br /> <xref:System.Diagnostics.Trace.Listeners%2A?displayProperty=nameWithType> Właściwość<br /><br /> <xref:System.Diagnostics.EventLog.SynchronizingObject%2A?displayProperty=nameWithType> Właściwość<br /><br /> <xref:System.Diagnostics.ConsoleTraceListener> Klasa<br /><br /> <xref:System.Diagnostics.DefaultTraceListener> Klasa<br /><br /> <xref:System.Diagnostics.DelimitedListTraceListener> Klasa<br /><br /> <xref:System.Diagnostics.EventLogTraceListener> Klasa<br /><br /> <xref:System.Diagnostics.PerformanceCounter> Klasa<br /><br /> <xref:System.Diagnostics.PerformanceCounterCategory> Klasa<br /><br /> <xref:System.Diagnostics.Process> Klasa<br /><br /> <xref:System.Diagnostics.ProcessStartInfo> Klasa<br /><br /> <xref:System.Diagnostics.TextWriterTraceListener> Klasa<br /><br /> <xref:System.Diagnostics.TraceListener> Klasa<br /><br /> <xref:System.Diagnostics.XmlWriterTraceListener> Klasa<br /><br /> <xref:System.Diagnostics.TraceSource.Listeners%2A?displayProperty=nameWithType> Właściwość|  
|`System.IO`|<xref:System.IO.Stream.Synchronized%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.IO.TextReader.Synchronized%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.IO.TextWriter.Synchronized%2A?displayProperty=nameWithType> — Metoda|  
|`System.Reflection.Emit`|<xref:System.Reflection.Emit.ConstructorBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.EventBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.FieldBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.MethodBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.CustomAttributeBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.MethodRental> Klasa<br /><br /> <xref:System.Reflection.Emit.ModuleBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.PropertyBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.TypeBuilder> Klasa<br /><br /> <xref:System.Reflection.Emit.UnmanagedMarshal> Klasa|  
|`System.Text`|<xref:System.Text.RegularExpressions.Group.Synchronized%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Text.RegularExpressions.Match.Synchronized%2A?displayProperty=nameWithType> — Metoda|  
|`System.Threading`|<xref:System.Threading.AutoResetEvent> Klasa<br /><br /> <xref:System.Threading.EventWaitHandle> Klasa<br /><br /> <xref:System.Threading.ManualResetEvent> Klasa<br /><br /> <xref:System.Threading.Monitor> Klasa<br /><br /> <xref:System.Threading.Mutex> Klasa<br /><br /> <xref:System.Threading.ReaderWriterLock> Klasa<br /><br /> <xref:System.Threading.Semaphore> Klasa<br /><br /> <xref:System.Threading.Thread.AllocateNamedDataSlot%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.BeginCriticalRegion%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.EndCriticalRegion%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.FreeNamedDataSlot%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.GetData%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.Join%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.SetApartmentState%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.SetData%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.SpinWait%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.Start%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.Thread.TrySetApartmentState%2A?displayProperty=nameWithType> — Metoda<br /><br /> <xref:System.Threading.ThreadPool> Klasa<br /><br /> <xref:System.Threading.Timer> Klasa|  
|`System.Timers`|<xref:System.Timers.Timer> Klasa|  
|`System.Web.Configuration`|<xref:System.Web.Configuration.MachineKeyValidationConverter> Klasa|  
|`System.Windows.Forms`|<xref:System.Windows.Forms.AutoCompleteStringCollection.SyncRoot%2A?displayProperty=nameWithType> Właściwość|  
  
## <a name="sql-server-permission-sets"></a>Zestawy uprawnień serwera SQL  
 Program SQL Server pozwala użytkownikom na określenie wymagań w zakresie niezawodności kodu wdrożone w bazie danych. Zestawy są przekazywane do bazy danych, autor zestawu można określić jedną z trzech zestawy uprawnień dla tego zestawu: BEZPIECZNY dostęp do zewnętrznych lub UNSAFE.  
  
|Zestaw uprawnień|BEZPIECZNE|DOSTĘP DO ZEWNĘTRZNYCH|UNSAFE|  
|--------------------|----------|----------------------|------------|  
|Zabezpieczenia dostępu kodu|Tylko do wykonywania|Wykonywanie i uzyskać dostęp do zasobów zewnętrznych|Bez ograniczeń|  
|Ograniczenia dotyczące modelu programowania|Tak|Tak|Brak ograniczeń|  
|Możliwość weryfikacji wymagań|Tak|Yes|Nie|  
|Wywoływanie kodu natywnego|Nie|Nie|Tak|  
  
 BEZPIECZNE jest najbardziej niezawodną i bezpieczną trybu z ograniczeniami skojarzone zakresie dozwolonych modelu programowania. BEZPIECZNY kod ma wysoką niezawodność i funkcje zabezpieczeń. Zestawy bezpieczne podane są wystarczające uprawnienia, aby uruchomić, wykonywanie obliczeń i mają dostęp do lokalnej bazy danych. BEZPIECZNE zestawy muszą być i wpisz bezpieczne i nie mogą wywoływać kod niezarządzany.  
  
 Dostęp do zewnętrznych udostępnia opcję pośrednich zabezpieczeń, co kod, aby uzyskiwać dostęp do zasobów zewnętrznych do bazy danych, ale nadal będziesz mieć niezawodność i bezpieczeństwo bezpieczny.  
  
 UNSAFE jest wysoce zaufanym kodem, które mogą być tworzone tylko przez administratorów baz danych. Ten kod zaufany nie ma żadnych ograniczeń dostępu kodu, a następnie go wywoływać kod niezarządzany (natywny).  
  
 Program SQL Server używa warstwa zasady zabezpieczeń dostępu kodu na poziomie hosta, aby skonfigurować zasady hosta, która udziela jeden z trzech zestawy uprawnień w oparciu o uprawnienia przechowywanych w wykazach programu SQL Server. Zarządzanym kodzie działającym wewnątrz bazy danych zawsze pobiera jeden z tych zestawów uprawnień dostępu do kodu.  
  
## <a name="programming-model-restrictions"></a>Ograniczenia dotyczące modelu programowania  
 Model programowania dla kodu zarządzanego w programie SQL Server wymaga funkcji, procedury i typy, które nie wymagają użycia stanie przechowywanych w wielu wywołań lub udostępnianie stanu w wielu sesjach użytkowników. Co więcej zgodnie z wcześniejszym opisem obecności udostępnionego stanu może spowodować wyjątki krytyczne, które mają wpływ na skalowalność i niezawodność aplikacji.  
  
 Biorąc pod uwagę powyższe zagadnienia, programu SQL Server nie zezwala na użycie statycznych zmiennych i statycznych składowych danych. BEZPIECZNE i dostęp do zewnętrznych zestawów programu SQL Server analizuje metadane zestawu w czasie tworzenia zestawu, a nie powiodło się tworzenie takie zestawy, jeśli znajdzie użycie zmiennych i statycznych składowych danych.  
  
## <a name="see-also"></a>Zobacz także
- <xref:System.Security.Permissions.HostProtectionAttribute>
- <xref:System.Security.Permissions.HostProtectionResource>
