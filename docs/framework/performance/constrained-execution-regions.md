---
title: Ograniczone regiony wykonania
ms.date: 03/30/2017
helpviewer_keywords:
- constrained execution regions
- CERs
ms.assetid: 99354547-39c1-4b0b-8553-938e8f8d1808
ms.openlocfilehash: 3161f77399030c287649ee5757814963b6afb7cf
ms.sourcegitcommit: 358a28048f36a8dca39a9fe6e6ac1f1913acadd5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/23/2020
ms.locfileid: "85247730"
---
# <a name="constrained-execution-regions"></a><span data-ttu-id="a8a15-102">Ograniczone regiony wykonania</span><span class="sxs-lookup"><span data-stu-id="a8a15-102">Constrained Execution Regions</span></span>
<span data-ttu-id="a8a15-103">Ograniczony region wykonywania (CER) jest częścią mechanizmu tworzenia niezawodnego kodu zarządzanego.</span><span class="sxs-lookup"><span data-stu-id="a8a15-103">A constrained execution region (CER) is part of a mechanism for authoring reliable managed code.</span></span> <span data-ttu-id="a8a15-104">CER definiuje obszar, w którym środowisko uruchomieniowe języka wspólnego (CLR) jest ograniczone od zgłaszania wyjątków poza pasmem, które mogłyby uniemożliwić wykonywanie kodu w obszarze w całości.</span><span class="sxs-lookup"><span data-stu-id="a8a15-104">A CER defines an area in which the common language runtime (CLR) is constrained from throwing out-of-band exceptions that would prevent the code in the area from executing in its entirety.</span></span> <span data-ttu-id="a8a15-105">W tym regionie kod użytkownika jest ograniczony do wykonywania kodu, który mógłby spowodować Przerzucanie wyjątków poza pasmem.</span><span class="sxs-lookup"><span data-stu-id="a8a15-105">Within that region, user code is constrained from executing code that would result in the throwing of out-of-band exceptions.</span></span> <span data-ttu-id="a8a15-106"><xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A>Metoda musi bezpośrednio poprzedzać `try` blok i znaczniki `catch` , `finally` i `fault` bloki jako ograniczone regiony wykonywania.</span><span class="sxs-lookup"><span data-stu-id="a8a15-106">The <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> method must immediately precede a `try` block and marks `catch`, `finally`, and `fault` blocks as constrained execution regions.</span></span> <span data-ttu-id="a8a15-107">Po oznaczeniu jako regionu ograniczonego kod musi wywoływać inny kod tylko z silną umową niezawodności, a kod nie powinien przydzielać ani wykonywać połączeń wirtualnych do nieprzygotowanych lub wiarygodnych metod, chyba że kod jest przygotowany do obsługi błędów.</span><span class="sxs-lookup"><span data-stu-id="a8a15-107">Once marked as a constrained region, code must only call other code with strong reliability contracts, and code should not allocate or make virtual calls to unprepared or unreliable methods unless the code is prepared to handle failures.</span></span> <span data-ttu-id="a8a15-108">Wątek CLR opóźnia przerwanie dla kodu, który jest wykonywany w CER.</span><span class="sxs-lookup"><span data-stu-id="a8a15-108">The CLR delays thread aborts for code that is executing in a CER.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="a8a15-109">CER jest obsługiwana tylko w .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a8a15-109">CER is only supported in .NET Framework.</span></span> <span data-ttu-id="a8a15-110">Ten artykuł nie dotyczy platformy .NET Core lub .NET 5 i nowszych.</span><span class="sxs-lookup"><span data-stu-id="a8a15-110">This article doesn't apply to .NET Core or .NET 5 and above.</span></span>

 <span data-ttu-id="a8a15-111">Ograniczone regiony wykonywania są używane w różnych formularzach środowiska CLR oprócz bloku z adnotacjami `try` , szczególnie dla kluczowych finalizatorów wykonywanych w klasach pochodnych <xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject> klasy i kodu wykonywanych przy użyciu <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="a8a15-111">Constrained execution regions are used in different forms in the CLR in addition to an annotated `try` block, notably critical finalizers executing in classes derived from the <xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject> class and code executed using the <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> method.</span></span>  
  
## <a name="cer-advance-preparation"></a><span data-ttu-id="a8a15-112">Zaawansowane przygotowanie do CER</span><span class="sxs-lookup"><span data-stu-id="a8a15-112">CER Advance Preparation</span></span>  
 <span data-ttu-id="a8a15-113">Środowisko CLR przygotuje CERs z wyprzedzeniem, aby uniknąć braku pamięci.</span><span class="sxs-lookup"><span data-stu-id="a8a15-113">The CLR prepares CERs in advance to avoid out-of-memory conditions.</span></span> <span data-ttu-id="a8a15-114">Przygotowywanie z wyprzedzeniem jest wymagane, aby środowisko CLR nie powodowało braku pamięci w czasie kompilacji just in Time lub typu ładowania.</span><span class="sxs-lookup"><span data-stu-id="a8a15-114">Advance preparation is required so the CLR does not cause an out of memory condition during just-in-time compilation or type loading.</span></span>  
  
 <span data-ttu-id="a8a15-115">Deweloper jest zobowiązany do wskazania, że region kodu jest CER:</span><span class="sxs-lookup"><span data-stu-id="a8a15-115">The developer is required to indicate that a code region is a CER:</span></span>  
  
- <span data-ttu-id="a8a15-116">Region i metody CER najwyższego poziomu w grafie pełnego wywołania z <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> zastosowanym atrybutem są przygotowywane z wyprzedzeniem.</span><span class="sxs-lookup"><span data-stu-id="a8a15-116">The top level CER region and methods in the full call graph that have the <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> attribute applied are prepared in advance.</span></span> <span data-ttu-id="a8a15-117"><xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute>Tylko gwarancje stanu <xref:System.Runtime.ConstrainedExecution.Cer.Success> lub <xref:System.Runtime.ConstrainedExecution.Cer.MayFail> .</span><span class="sxs-lookup"><span data-stu-id="a8a15-117">The <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> can only state guarantees of <xref:System.Runtime.ConstrainedExecution.Cer.Success> or <xref:System.Runtime.ConstrainedExecution.Cer.MayFail>.</span></span>  
  
- <span data-ttu-id="a8a15-118">Nie można wykonać przygotowania zaawansowania dla wywołań, które nie mogą być określane statycznie, takie jak wysyłanie wirtualne.</span><span class="sxs-lookup"><span data-stu-id="a8a15-118">Advance preparation cannot be performed for calls that cannot be statically determined, such as virtual dispatch.</span></span> <span data-ttu-id="a8a15-119">Użyj <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod%2A> metody w takich przypadkach.</span><span class="sxs-lookup"><span data-stu-id="a8a15-119">Use the <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod%2A> method in these cases.</span></span> <span data-ttu-id="a8a15-120">W przypadku korzystania z <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> metody <xref:System.Runtime.ConstrainedExecution.PrePrepareMethodAttribute> atrybut powinien zostać zastosowany do kodu czyszczącego.</span><span class="sxs-lookup"><span data-stu-id="a8a15-120">When using the <xref:System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup%2A> method, the <xref:System.Runtime.ConstrainedExecution.PrePrepareMethodAttribute> attribute should be applied to the clean up code.</span></span>  
  
## <a name="constraints"></a><span data-ttu-id="a8a15-121">Ograniczenia</span><span class="sxs-lookup"><span data-stu-id="a8a15-121">Constraints</span></span>  
 <span data-ttu-id="a8a15-122">Użytkownicy są ograniczeniami w typie kodu, który można napisać w CER.</span><span class="sxs-lookup"><span data-stu-id="a8a15-122">Users are constrained in the type of code they can write in a CER.</span></span> <span data-ttu-id="a8a15-123">Kod nie może spowodować wyjątku poza pasmem, na przykład może wynikać z następujących operacji:</span><span class="sxs-lookup"><span data-stu-id="a8a15-123">The code cannot cause an out-of-band exception, such as might result from the following operations:</span></span>  
  
- <span data-ttu-id="a8a15-124">Jawna alokacja.</span><span class="sxs-lookup"><span data-stu-id="a8a15-124">Explicit allocation.</span></span>  
  
- <span data-ttu-id="a8a15-125">Opakowanie.</span><span class="sxs-lookup"><span data-stu-id="a8a15-125">Boxing.</span></span>  
  
- <span data-ttu-id="a8a15-126">Uzyskiwanie blokady.</span><span class="sxs-lookup"><span data-stu-id="a8a15-126">Acquiring a lock.</span></span>  
  
- <span data-ttu-id="a8a15-127">Wywoływanie nieprzygotowanych metod praktycznie.</span><span class="sxs-lookup"><span data-stu-id="a8a15-127">Calling unprepared methods virtually.</span></span>  
  
- <span data-ttu-id="a8a15-128">Wywoływanie metod z słabym lub nieistniejącym kontraktem niezawodności.</span><span class="sxs-lookup"><span data-stu-id="a8a15-128">Calling methods with a weak or nonexistent reliability contract.</span></span>  
  
 <span data-ttu-id="a8a15-129">W .NET Framework w wersji 2,0 te ograniczenia są wskazówkami.</span><span class="sxs-lookup"><span data-stu-id="a8a15-129">In the .NET Framework version 2.0, these constraints are guidelines.</span></span> <span data-ttu-id="a8a15-130">Diagnostyka jest świadczona za poorednictwem narzędzi do analizy kodu.</span><span class="sxs-lookup"><span data-stu-id="a8a15-130">Diagnostics are provided through code analysis tools.</span></span>  
  
## <a name="reliability-contracts"></a><span data-ttu-id="a8a15-131">Kontrakty niezawodności</span><span class="sxs-lookup"><span data-stu-id="a8a15-131">Reliability Contracts</span></span>  
 <span data-ttu-id="a8a15-132"><xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute>Jest atrybutem niestandardowym, który dokumentuje gwarancje niezawodności i stan uszkodzenia danej metody.</span><span class="sxs-lookup"><span data-stu-id="a8a15-132">The <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> is a custom attribute that documents the reliability guarantees and the corruption state of a given method.</span></span>  
  
### <a name="reliability-guarantees"></a><span data-ttu-id="a8a15-133">Gwarancje niezawodności</span><span class="sxs-lookup"><span data-stu-id="a8a15-133">Reliability Guarantees</span></span>  
 <span data-ttu-id="a8a15-134">Gwarancje niezawodności, reprezentowane przez <xref:System.Runtime.ConstrainedExecution.Cer> wartości wyliczenia, wskazują stopień niezawodności danej metody:</span><span class="sxs-lookup"><span data-stu-id="a8a15-134">Reliability guarantees, represented by <xref:System.Runtime.ConstrainedExecution.Cer> enumeration values, indicate the degree of reliability of a given method:</span></span>  
  
- <span data-ttu-id="a8a15-135"><xref:System.Runtime.ConstrainedExecution.Cer.MayFail>.</span><span class="sxs-lookup"><span data-stu-id="a8a15-135"><xref:System.Runtime.ConstrainedExecution.Cer.MayFail>.</span></span> <span data-ttu-id="a8a15-136">W przypadku wyjątkowych warunków Metoda może zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="a8a15-136">Under exceptional conditions, the method might fail.</span></span> <span data-ttu-id="a8a15-137">W tym przypadku Metoda raportuje z powrotem do metody wywołującej, czy zakończyła się powodzeniem, czy niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="a8a15-137">In this case, the method reports back to the calling method whether it succeeded or failed.</span></span> <span data-ttu-id="a8a15-138">Metoda musi być zawarta w CER, aby można było zgłosić wartość zwracaną.</span><span class="sxs-lookup"><span data-stu-id="a8a15-138">The method must be contained in a CER to ensure that it can report the return value.</span></span>  
  
- <span data-ttu-id="a8a15-139"><xref:System.Runtime.ConstrainedExecution.Cer.None>.</span><span class="sxs-lookup"><span data-stu-id="a8a15-139"><xref:System.Runtime.ConstrainedExecution.Cer.None>.</span></span> <span data-ttu-id="a8a15-140">Metoda, typ lub zestaw nie ma koncepcji CER i najprawdopodobniej nie jest to bezpieczne do wywołania w programie CER bez znacznego ograniczenia uszkodzenia stanu.</span><span class="sxs-lookup"><span data-stu-id="a8a15-140">The method, type, or assembly has no concept of a CER and is most likely not safe to call within a CER without substantial mitigation from state corruption.</span></span> <span data-ttu-id="a8a15-141">Nie wykorzystuje ona gwarancji CER.</span><span class="sxs-lookup"><span data-stu-id="a8a15-141">It does not take advantage of CER guarantees.</span></span> <span data-ttu-id="a8a15-142">Oznacza to następujące kwestie:</span><span class="sxs-lookup"><span data-stu-id="a8a15-142">This implies the following:</span></span>  
  
    1. <span data-ttu-id="a8a15-143">W wyjątkowych warunkach Metoda może zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="a8a15-143">Under exceptional conditions the method might fail.</span></span>  
  
    2. <span data-ttu-id="a8a15-144">Metoda może lub nie zgłasza, że zakończyła się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="a8a15-144">The method might or might not report that it failed.</span></span>  
  
    3. <span data-ttu-id="a8a15-145">Metoda nie jest zapisywana, aby używać CER, najbardziej prawdopodobną przyczyną.</span><span class="sxs-lookup"><span data-stu-id="a8a15-145">The method is not written to use a CER, the most likely scenario.</span></span>  
  
    4. <span data-ttu-id="a8a15-146">Jeśli metoda, typ lub zestaw nie został jawnie zidentyfikowany do sukcesu, jest on niejawnie zidentyfikowany jako <xref:System.Runtime.ConstrainedExecution.Cer.None> .</span><span class="sxs-lookup"><span data-stu-id="a8a15-146">If a method, type, or assembly is not explicitly identified to succeed, it is implicitly identified as <xref:System.Runtime.ConstrainedExecution.Cer.None>.</span></span>  
  
- <span data-ttu-id="a8a15-147"><xref:System.Runtime.ConstrainedExecution.Cer.Success>.</span><span class="sxs-lookup"><span data-stu-id="a8a15-147"><xref:System.Runtime.ConstrainedExecution.Cer.Success>.</span></span> <span data-ttu-id="a8a15-148">W wyjątkowych warunkach Metoda ma gwarancję pomyślnego zakończenia.</span><span class="sxs-lookup"><span data-stu-id="a8a15-148">Under exceptional conditions, the method is guaranteed to succeed.</span></span> <span data-ttu-id="a8a15-149">Aby osiągnąć ten poziom niezawodności, należy zawsze skonstruować plik CER wokół metody, która jest wywoływana, nawet gdy jest wywoływana z poziomu regionu innego niż CER.</span><span class="sxs-lookup"><span data-stu-id="a8a15-149">To achieve this level of reliability you should always construct a CER around the method that is called, even when it is called from within a non-CER region.</span></span> <span data-ttu-id="a8a15-150">Metoda zakończyła się powodzeniem, jeśli osiąga to zamierzone, chociaż sukces może być przeglądany w sposób subiektywny.</span><span class="sxs-lookup"><span data-stu-id="a8a15-150">A method is successful if it accomplishes what is intended, although success can be viewed subjectively.</span></span> <span data-ttu-id="a8a15-151">Na przykład liczba oznaczania z `ReliabilityContractAttribute(Cer.Success)` oznacza, że gdy jest uruchamiany w ramach cer, zawsze zwraca liczbę elementów w <xref:System.Collections.ArrayList> i nigdy nie pozostawia pól wewnętrznych w stanie nieokreślonym.</span><span class="sxs-lookup"><span data-stu-id="a8a15-151">For example, marking Count with `ReliabilityContractAttribute(Cer.Success)` implies that when it is run under a CER, it always returns a count of the number of elements in the <xref:System.Collections.ArrayList> and it can never leave the internal fields in an undetermined state.</span></span>  <span data-ttu-id="a8a15-152">Jednak <xref:System.Threading.Interlocked.CompareExchange%2A> Metoda jest oznaczona jako sukces, a zrozumienie, że powodzenie może oznaczać, że wartość nie może zostać zastąpiona nową wartością ze względu na sytuację wyścigu.</span><span class="sxs-lookup"><span data-stu-id="a8a15-152">However, the <xref:System.Threading.Interlocked.CompareExchange%2A> method is marked as success as well, with the understanding that success may mean the value could not be replaced with a new value due to a race condition.</span></span>  <span data-ttu-id="a8a15-153">Kluczowym punktem jest to, że metoda zachowuje się w sposób, w jaki jest zachowywać się, a kod CER nie musi być zapisany, aby oczekiwać dowolnego nietypowego zachowania poza zakresem prawidłowym, ale kod niezawodny.</span><span class="sxs-lookup"><span data-stu-id="a8a15-153">The key point is that the method behaves in the way it is documented to behave, and CER code does not need to be written to expect any unusual behavior beyond what correct but unreliable code would look like.</span></span>  
  
### <a name="corruption-levels"></a><span data-ttu-id="a8a15-154">Poziomy uszkodzeń</span><span class="sxs-lookup"><span data-stu-id="a8a15-154">Corruption levels</span></span>  
 <span data-ttu-id="a8a15-155">Poziomy uszkodzeń reprezentowane przez <xref:System.Runtime.ConstrainedExecution.Consistency> wartości wyliczenia, wskazują, ile stanu może być uszkodzony w danym środowisku:</span><span class="sxs-lookup"><span data-stu-id="a8a15-155">Corruption levels, represented by <xref:System.Runtime.ConstrainedExecution.Consistency> enumeration values, indicate how much state may be corrupted in a given environment:</span></span>  
  
- <span data-ttu-id="a8a15-156"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>.</span><span class="sxs-lookup"><span data-stu-id="a8a15-156"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>.</span></span> <span data-ttu-id="a8a15-157">W wyjątkowych warunkach środowisko uruchomieniowe języka wspólnego (CLR) nie gwarantuje spójności stanu w bieżącej domenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a8a15-157">Under exceptional conditions, the common language runtime (CLR) makes no guarantees regarding state consistency in the current application domain.</span></span>  
  
- <span data-ttu-id="a8a15-158"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptInstance>.</span><span class="sxs-lookup"><span data-stu-id="a8a15-158"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptInstance>.</span></span> <span data-ttu-id="a8a15-159">W ramach wyjątkowych warunków Metoda ma ograniczyć uszkodzenie stanu do bieżącego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="a8a15-159">Under exceptional conditions, the method is guaranteed to limit state corruption to the current instance.</span></span>  
  
- <span data-ttu-id="a8a15-160"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>W warunkach wyjątkowych środowisko CLR nie gwarantuje spójności stanu. oznacza to, że warunek może uszkodzić proces.</span><span class="sxs-lookup"><span data-stu-id="a8a15-160"><xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, Under exceptional conditions, the CLR makes no guarantees regarding state consistency; that is, the condition might corrupt the process.</span></span>  
  
- <span data-ttu-id="a8a15-161"><xref:System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState>.</span><span class="sxs-lookup"><span data-stu-id="a8a15-161"><xref:System.Runtime.ConstrainedExecution.Consistency.WillNotCorruptState>.</span></span> <span data-ttu-id="a8a15-162">W warunkach wyjątkowych Metoda ma gwarancję nieuszkodzenia stanu.</span><span class="sxs-lookup"><span data-stu-id="a8a15-162">Under exceptional conditions, the method is guaranteed not to corrupt state.</span></span>  
  
## <a name="reliability-trycatchfinally"></a><span data-ttu-id="a8a15-163">Niezawodność try/catch/finally</span><span class="sxs-lookup"><span data-stu-id="a8a15-163">Reliability try/catch/finally</span></span>  
 <span data-ttu-id="a8a15-164">Niezawodność `try/catch/finally` to mechanizm obsługi wyjątków o tym samym poziomie gwarancji przewidywalności jako wersja niezarządzana.</span><span class="sxs-lookup"><span data-stu-id="a8a15-164">The reliability `try/catch/finally` is an exception handling mechanism with the same level of predictability guarantees as the unmanaged version.</span></span> <span data-ttu-id="a8a15-165">`catch/finally`Blok jest CER.</span><span class="sxs-lookup"><span data-stu-id="a8a15-165">The `catch/finally` block is the CER.</span></span> <span data-ttu-id="a8a15-166">Metody w bloku wymagają przygotowania z wyprzedzeniem i muszą być noninterruptible.</span><span class="sxs-lookup"><span data-stu-id="a8a15-166">Methods in the block require advance preparation and must be noninterruptible.</span></span>  
  
 <span data-ttu-id="a8a15-167">W .NET Framework w wersji 2,0 kod informuje środowisko uruchomieniowe, że próbka jest niezawodna, wywołując <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> bezpośrednio poprzedzające blok try.</span><span class="sxs-lookup"><span data-stu-id="a8a15-167">In the .NET Framework version 2.0, code informs the runtime that a try is reliable by calling <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> immediately preceding a try block.</span></span> <span data-ttu-id="a8a15-168"><xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A>jest członkiem <xref:System.Runtime.CompilerServices.RuntimeHelpers> klasy obsługi kompilatora.</span><span class="sxs-lookup"><span data-stu-id="a8a15-168"><xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> is a member of <xref:System.Runtime.CompilerServices.RuntimeHelpers>, a compiler support class.</span></span> <span data-ttu-id="a8a15-169">Wywoływanie <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> bezpośrednio w oczekiwany sposób za jego dostępność za poorednictwem kompilatorów.</span><span class="sxs-lookup"><span data-stu-id="a8a15-169">Call <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> directly pending its availability through compilers.</span></span>  
  
## <a name="noninterruptible-regions"></a><span data-ttu-id="a8a15-170">Regiony Noninterruptible</span><span class="sxs-lookup"><span data-stu-id="a8a15-170">Noninterruptible Regions</span></span>  
 <span data-ttu-id="a8a15-171">Region noninterruptible grupuje zestaw instrukcji do CER.</span><span class="sxs-lookup"><span data-stu-id="a8a15-171">A noninterruptible region groups a set of instructions into a CER.</span></span>  
  
 <span data-ttu-id="a8a15-172">W .NET Framework wersja 2,0, oczekująca dostępność za pomocą obsługi kompilatora, kod użytkownika tworzy regiony inne niż przerywania z niezawodną instrukcją try/catch/finally, która zawiera pusty blok try/catch poprzedzony <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> wywołaniem metody.</span><span class="sxs-lookup"><span data-stu-id="a8a15-172">In .NET Framework version 2.0, pending availability through compiler support, user code creates non-interruptible regions with a reliable try/catch/finally that contains an empty try/catch block preceded by a <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareConstrainedRegions%2A> method call.</span></span>  
  
## <a name="critical-finalizer-object"></a><span data-ttu-id="a8a15-173">Krytyczny obiekt finalizatora</span><span class="sxs-lookup"><span data-stu-id="a8a15-173">Critical Finalizer Object</span></span>  
 <span data-ttu-id="a8a15-174"><xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject>Gwarantuje, że wyrzucanie elementów bezużytecznych wykona finalizator.</span><span class="sxs-lookup"><span data-stu-id="a8a15-174">A <xref:System.Runtime.ConstrainedExecution.CriticalFinalizerObject> guarantees that garbage collection will execute the finalizer.</span></span> <span data-ttu-id="a8a15-175">Po przydzieleniu, finalizator i jego Graf wywołań są przygotowane z wyprzedzeniem.</span><span class="sxs-lookup"><span data-stu-id="a8a15-175">Upon allocation, the finalizer and its call graph are prepared in advance.</span></span> <span data-ttu-id="a8a15-176">Metoda finalizatora jest wykonywana przez program CER i musi przestrzegać wszystkich ograniczeń dotyczących CERs i finalizatorów.</span><span class="sxs-lookup"><span data-stu-id="a8a15-176">The finalizer method executes in a CER, and must obey all the constraints on CERs and finalizers.</span></span>  
  
 <span data-ttu-id="a8a15-177">Wszystkie typy dziedziczenia z <xref:System.Runtime.InteropServices.SafeHandle> i <xref:System.Runtime.InteropServices.CriticalHandle> są gwarantowane, że finalizator jest wykonywany w ramach CER.</span><span class="sxs-lookup"><span data-stu-id="a8a15-177">Any types inheriting from <xref:System.Runtime.InteropServices.SafeHandle> and <xref:System.Runtime.InteropServices.CriticalHandle> are guaranteed to have their finalizer execute within a CER.</span></span> <span data-ttu-id="a8a15-178">Zaimplementuj <xref:System.Runtime.InteropServices.SafeHandle.ReleaseHandle%2A> w <xref:System.Runtime.InteropServices.SafeHandle> klasach pochodnych, aby wykonać dowolny kod, który jest wymagany do zwolnienia dojścia.</span><span class="sxs-lookup"><span data-stu-id="a8a15-178">Implement <xref:System.Runtime.InteropServices.SafeHandle.ReleaseHandle%2A> in <xref:System.Runtime.InteropServices.SafeHandle> derived classes to execute any code that is required to free the handle.</span></span>  
  
## <a name="code-not-permitted-in-cers"></a><span data-ttu-id="a8a15-179">Kod nie jest dozwolony w CERs</span><span class="sxs-lookup"><span data-stu-id="a8a15-179">Code Not Permitted in CERs</span></span>  
 <span data-ttu-id="a8a15-180">Następujące operacje są niedozwolone w CERs:</span><span class="sxs-lookup"><span data-stu-id="a8a15-180">The following operations are not permitted in CERs:</span></span>  
  
- <span data-ttu-id="a8a15-181">Jawne alokacje.</span><span class="sxs-lookup"><span data-stu-id="a8a15-181">Explicit allocations.</span></span>  
  
- <span data-ttu-id="a8a15-182">Uzyskiwanie blokady.</span><span class="sxs-lookup"><span data-stu-id="a8a15-182">Acquiring a lock.</span></span>  
  
- <span data-ttu-id="a8a15-183">Opakowanie.</span><span class="sxs-lookup"><span data-stu-id="a8a15-183">Boxing.</span></span>  
  
- <span data-ttu-id="a8a15-184">Dostęp do tablicy wielowymiarowej.</span><span class="sxs-lookup"><span data-stu-id="a8a15-184">Multidimensional array access.</span></span>  
  
- <span data-ttu-id="a8a15-185">Wywołania metody poprzez odbicie.</span><span class="sxs-lookup"><span data-stu-id="a8a15-185">Method calls through reflection.</span></span>  
  
- <span data-ttu-id="a8a15-186"><xref:System.Threading.Monitor.Enter%2A> lub <xref:System.IO.FileStream.Lock%2A>.</span><span class="sxs-lookup"><span data-stu-id="a8a15-186"><xref:System.Threading.Monitor.Enter%2A> or <xref:System.IO.FileStream.Lock%2A>.</span></span>  
  
- <span data-ttu-id="a8a15-187">Sprawdzanie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="a8a15-187">Security checks.</span></span> <span data-ttu-id="a8a15-188">Nie wykonuj wymagań, tylko w przypadku żądań linków.</span><span class="sxs-lookup"><span data-stu-id="a8a15-188">Do not perform demands, only link demands.</span></span>  
  
- <span data-ttu-id="a8a15-189"><xref:System.Reflection.Emit.OpCodes.Isinst>i <xref:System.Reflection.Emit.OpCodes.Castclass> dla obiektów com i serwerów proxy</span><span class="sxs-lookup"><span data-stu-id="a8a15-189"><xref:System.Reflection.Emit.OpCodes.Isinst> and <xref:System.Reflection.Emit.OpCodes.Castclass> for COM objects and proxies</span></span>  
  
- <span data-ttu-id="a8a15-190">Pobieranie lub Ustawianie pól na przezroczystym serwerze proxy.</span><span class="sxs-lookup"><span data-stu-id="a8a15-190">Getting or setting fields on a transparent proxy.</span></span>  
  
- <span data-ttu-id="a8a15-191">Serializacji.</span><span class="sxs-lookup"><span data-stu-id="a8a15-191">Serialization.</span></span>  
  
- <span data-ttu-id="a8a15-192">Wskaźniki funkcji i delegatów.</span><span class="sxs-lookup"><span data-stu-id="a8a15-192">Function pointers and delegates.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a8a15-193">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="a8a15-193">See also</span></span>

- [<span data-ttu-id="a8a15-194">Najlepsze rozwiązania dotyczące niezawodności</span><span class="sxs-lookup"><span data-stu-id="a8a15-194">Reliability Best Practices</span></span>](reliability-best-practices.md)
