---
title: Problemy przy migracji programu .NET framework 4
ms.date: 05/02/2017
helpviewer_keywords:
- .NET Framework 4, migration
- application compatibility
ms.assetid: df478548-8c05-4de2-8ba7-adcdbe1c2a60
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: aa8cbe0cc87e656eeb8cd0234875a87ade9c05f5
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
ms.locfileid: "33393604"
---
# <a name="net-framework-4-migration-issues"></a>Problemy przy migracji programu .NET framework 4

W tym temacie opisano problemy przy migracji między wersją .NET Framework 3.5 z dodatkiem Service Pack 1 i .NET Framework w wersji 4, w tym poprawek, zmian dotyczących zgodności ze standardami i zabezpieczeń i zmian na podstawie opinii klientów. Większość tych zmian nie wymaga żadnych modyfikacji programistycznych w aplikacjach. Dla tych, które mogą powodować zmiany Zobacz zalecane zmiany kolumny tabeli.

W tym temacie opisano znaczące zmiany w następujących obszarach:

* [ASP.NET i sieć Web](#asp-net-and-web)

* [Funkcje podstawowe](#core)

* [Dane](#data)

* [Windows Communication Foundation (WCF)](#windows-communication-foundation-wcf)

* [Windows Presentation Foundation (WPF)](#windows-presentation-foundation-wpf)

* [XML](#xml)

Omówienie wyższego poziomu problemów występujących w tym temacie, zobacz [Przewodnik po migracji do programu .NET Framework 4](https://msdn.microsoft.com/library/ff657133(v=vs.100).aspx).

W przypadku migracji problemów po Beta 2, zobacz [problemy przy migracji aplikacji programu .NET Framework 4: 2 Beta do wersji RTM](http://go.microsoft.com/fwlink/?LinkId=191505).

Aby uzyskać informacje o nowych funkcjach, zobacz [What's New in programu .NET Framework 4](https://msdn.microsoft.com/library/ms171868(v=vs.100).aspx).

## <a name="aspnet-and-web"></a>ASP.NET i Internet

Przestrzenie nazw: <xref:System.Web>, <xref:System.Web.Mobile>, <xref:System.Web.Security>, <xref:System.Web.UI.WebControls>; zestaw: System.Web (w System.Web.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Pliki definicji przeglądarki** | Aby dołączyć informacje o nowych i zaktualizowanych przeglądarki i urządzenia zostały zaktualizowane pliki definicji przeglądarki. Starszych przeglądarek i urządzeń, takich jak Netscape Navigator zostały usunięte i nowszych przeglądarkach i urządzeniach, takich jak Google Chrome i Apple iPhone zostały dodane.<br><br>Jeśli aplikacja zawiera definicje przeglądarki niestandardowych, które dziedziczą z jednej z definicji przeglądarki, które zostały usunięte, zostanie wyświetlony błąd.<br><br><xref:System.Web.HttpBrowserCapabilities> Obiektu (który jest uwidaczniany przez stronę `Request.Browse` właściwości) jest wymuszany przez pliki definicji przeglądarki. W związku z tym informacje zwracane przez uzyskiwania dostępu do właściwości tego obiektu w ASP.NET 4 może różnić się od informacji zwrócony w poprzednich wersjach programu ASP.NET. | Jeśli aplikacja opiera się na starych plików definicji przeglądarki, można je skopiować z folderu:<br><br>*Windows\\Microsoft.NET\\Framework\\v2.0.50727\\CONFIG\\przeglądarki*<br><br>Skopiuj pliki do odpowiadającego  *\\CONFIG\\przeglądarki* folderu dla programu ASP.NET 4. Po skopiowaniu plików, uruchom [Aspnet_regbrowsers.exe](https://msdn.microsoft.com/library/ms229858.aspx) narzędzia wiersza polecenia. Aby uzyskać więcej informacji, zobacz [ http://www.asp.net/mobile ](http://go.microsoft.com/fwlink/?LinkId=182900) witryny sieci Web. |
| **Mieszane wersji platformy ASP.NET do uruchamiania aplikacji podrzędnych** | ASP.NET 4 aplikacje, które są skonfigurowane jako elementy podrzędne aplikacji ze starszymi wersjami programu ASP.NET może się nie uruchomić z powodu błędów kompilacji lub konfiguracji. Błędu, który występuje zależy od tego, czy aplikacja zostanie uruchomiona w ramach usług IIS 6.0, lub IIS 7 i IIS 7.5. | Wprowadzić zmiany w plikach konfiguracji aplikacji, których dotyczy, aby system konfiguracji poprawnie rozpoznaje aplikacji programu ASP.NET 4. Aby uzyskać informacje o zmianach, należy się upewnić, zobacz sekcję "4 podrzędnych aplikacji zakończyć się niepowodzeniem do uruchomić po w obszarze ASP.NET 2.0 lub ASP.NET 3.5 aplikacji ASP.NET" w dokumencie [ASP.NET 4 fundamentalne zmiany](http://go.microsoft.com/fwlink/?LinkId=182908) w witrynie sieci Web programu ASP.NET. |
| **ClientID zmiany** | Nowy `clientIDMode` ustawienie platformy ASP.NET 4 pozwala określić, jak program ASP.NET generuje `id` atrybutów elementów HTML. W poprzednich wersjach programu ASP.NET została odpowiednikiem domyślne zachowanie `AutoID` ustawienie `clientIDMode`. Ustawieniem domyślnym jest teraz `Predictable`. Aby uzyskać więcej informacji, zobacz [Identyfikacja kontrolki serwera sieci Web ASP.NET](https://msdn.microsoft.com/library/1d04y8ss(v=vs.100).aspx). | Jeśli używasz programu Visual Studio 2010 do uaktualniania aplikacji programu ASP.NET w wersji 2.0 lub ASP.NET 3.5, narzędzie automatycznie dodaje ustawienie do pliku Web.config, która zachowuje zachowanie wcześniejszych wersji programu .NET Framework. Jednak jeśli aplikacja jest uaktualniana przez zmianę puli aplikacji w usługach IIS pod kątem programu .NET Framework 4, program ASP.NET używa domyślnie nowy tryb. Aby wyłączyć trybu Identyfikatora klienta, Dodaj następujące ustawienie do pliku Web.config:<br><br>`<pages clientIDMode="AutoID" />` |
| **Zabezpieczenia dostępu kodu (CAS)** | Platforma ASP.NET 2.0 NET funkcje, które zostały dodane w programie ASP.NET 3.5 użyj .NET Framework 1.1 i .NET Framework 2.0 kod dostępu (CAS) modelu zabezpieczeń. Jednak implementacja urzędy certyfikacji w ASP.NET 4 została znacząco overhauled. W związku z tym aplikacji ASP.NET częściowego zaufania, które zależą od zaufanego kodu uruchamianego w globalnej pamięci podręcznej zestawów może zakończyć się niepowodzeniem z różnych wyjątki zabezpieczeń. Aplikacje częściowo zaufane, które opierają się na rozległych modyfikacji na komputerze zasad CAS również mogą zakończyć się niepowodzeniem i zgłaszać wyjątki zabezpieczeń. | Częściowo zaufane aplikacje programu ASP.NET 4 do zachowania ASP.NET 1.1 i 2.0 można przywrócić przy użyciu nowej `legacyCasModel` atrybutu w `trust` element konfiguracji, jak pokazano w poniższym przykładzie:<br><br>`<trust level= "Medium" legacyCasModel="true" />`<br><br>Ważne: Przywrócenie starszej modelu urzędów certyfikacji może reprezentować zmniejszenie zabezpieczeń.<br><br>Aby uzyskać więcej informacji o nowy model zabezpieczeń dostępu kodu platformy ASP.NET 4, zobacz [zabezpieczenia dostępu kodu w aplikacjach ASP.NET 4](https://msdn.microsoft.com/library/dd984947.aspx). |
| **Pliki konfiguracji** | Pliki (pliku machine.config i głównego pliku Web.config) konfiguracji głównego programu .NET Framework i programu ASP.NET 4 zostały zaktualizowane większość niezmienne informacje konfiguracji został znaleziony w plikach Web.config aplikacji w programie ASP.NET 3.5. Ze względu na złożoność zarządzanego IIS 7 i IIS 7.5 konfiguracji systemów uruchamiania aplikacji ASP.NET 3.5 w ASP.NET 4 oraz w usługach IIS 7 i IIS 7.5 może spowodować błędy programu ASP.NET lub błędy usług IIS. | Uaktualnienie aplikacji programu ASP.NET 4 ASP.NET 3.5 za pomocą narzędzia uaktualniania projektu w programie Visual Studio 2010. Program Visual Studio 2010 automatycznie modyfikuje plik Web.config aplikacji ASP.NET 3.5 zawiera odpowiednie ustawienia dla programu ASP.NET 4.<br><br>Jednak można uruchamiać aplikacje ASP.NET 3.5 przy użyciu programu .NET Framework 4 bez ponownej kompilacji. W takim przypadku trzeba będzie ręcznie zmodyfikować plik Web.config aplikacji przed uruchomieniem aplikacji w obszarze programu .NET Framework 4 i w usługach IIS 7 i IIS 7.5. Określone zmiany, które należy wykonać zależy od kombinację oprogramowania, w którym pracujesz, łącznie z wersji Service Pack (SP). Informacje kombinacji możliwe oprogramowania, których dotyczy ta zmiana i jak rozwiązać problemy z określonej kombinacji, zobacz sekcję "Błędy powiązane do nowego programu ASP.NET 4 głównego Konfiguracja" w dokumencie [ Zmienia podziału ASP.NET 4](http://go.microsoft.com/fwlink/?LinkId=182908) w witrynie sieci Web programu ASP.NET. |
| **Renderowania formantu** | W poprzednich wersjach programu ASP.NET niektóre formanty emitowane kod znaczników, który nie można wyłączyć. Domyślnie ten typ znacznika już jest generowana w ASP.NET 4. Zmiany renderowania wpływają na następujące sterowniki:<br><br>* `Image` i `ImageButton` formanty już renderować `border="0"` atrybutu.<br>* `BaseValidator` Klasy i sprawdzanie poprawności formantów, które dziedziczą z niego renderowania czerwony tekst nie jest już domyślnie.<br>* `HtmlForm` Formantu nie jest renderowana `name` atrybutu.<br>* `Table` Kontrolować już renderuje `border="0"` atrybutu.<br><br>Formanty, które nie są przeznaczone dla danych wejściowych użytkownika (na przykład `Label` kontroli) nie jest już renderowania `disabled="disabled"` atrybut, jeśli ich `Enabled` właściwość jest ustawiona na `false` (lub jeśli to ustawienie, dziedziczą z formantu kontenera). | Jeśli używasz programu Visual Studio 2010 do uaktualniania aplikacji programu ASP.NET w wersji 2.0 lub ASP.NET 3.5, narzędzie automatycznie dodaje ustawienie do pliku Web.config, która zachowuje renderowania starszej wersji. Jednak jeśli aplikacja jest uaktualniana przez zmianę puli aplikacji w usługach IIS pod kątem programu .NET Framework 4, program ASP.NET używa domyślnie nowy tryb renderowania. Aby wyłączyć nowy tryb renderowania, Dodaj następujące ustawienie do pliku Web.config:<br><br>`<pages controlRenderingCompatibilityVersion="3.5" />` |
| **Programy obsługi zdarzeń w domyślnym dokumentów** | Platforma ASP.NET 4 renderuje HTML `form` elementu `action` wartość atrybutu jako pustego ciągu, po wysłaniu żądania bez rozszerzenia adresu URL, który ma do niej przyporządkowany dokument domyślny. We wcześniejszych wersjach programu ASP.NET, żądanie `http://contoso.com` spowodowałoby żądanie do Default.aspx. W tym dokumencie, otwarcie `form` tag będzie renderowany jak w poniższym przykładzie:<br><br>`<form action="Default.aspx" />`<br><br>W ASP.NET 4 żądanie `http://contoso.com` również wyników w żądaniu Default.aspx, ale program ASP.NET teraz powoduje otwarcie HTML `form` tag, jak w poniższym przykładzie:<br><br>`<form action="" />`<br><br>Gdy `action` atrybut jest pusty ciąg, usługi IIS `DefaultDocumentModule` żądania podrzędnego Default.aspx tworzy obiekt. W większości okolicznościach tego żądania podrzędnego jest niewidoczny dla kodu aplikacji, a strona Default.aspx działa normalnie. Potencjalne interakcji między kodu zarządzanego i IIS 7 i IIS 7.5 zintegrowanego trybu może jednak spowodować strony .aspx zarządzanych do przestają działać prawidłowo podczas żądania podrzędnego. Jeśli występują następujące warunki, żądania podrzędnego do dokumentu domyślnego .aspx spowoduje błąd lub nieoczekiwane zachowanie:<br><br>* Strony .aspx jest wysyłany do przeglądarki z `form` elementu `action` określić dla atrybutu "".<br>* Formularza jest przesłane do programu ASP.NET.<br>* HTTP moduł zarządzany odczytuje część treści jednostki, takich jak `Request.Form` lub `Request.Params`. Powoduje to treści jednostki żądania POST do odczytu do pamięci zarządzanej. W związku z tym treści jednostki nie jest już dostępny do wszelkich modułów kodu natywnego, które działają w trybie IIS 7 lub usług IIS 7.5 zintegrowanego.<br>* IIS `DefaultDocumentModule` obiektu ostatecznie działa i tworzy żądania podrzędnego w dokumencie Default.aspx. Jednakże ponieważ została już odczytana treść jednostki przez fragment kodu zarządzanego, brak treści jednostki dostępne do wysyłania do żądania podrzędnego.<br>* Po uruchomieniu potoku HTTP dla żądania podrzędnego obsługi plików aspx działa w fazie handler-execute.<br><br>Ponieważ nie ma żadnych treść jednostki, istnieją żadnych zmiennych formularza i bez stanu widoku. W związku z tym nie ma żadnych informacji dostępnych do określenia, jakie zdarzenia (jeśli istnieją) powinien być wywoływany obsługi strony .aspx. W związku z tym brak obsługi zdarzenia odświeżania strony dla strony .aspx dotyczy Uruchom. | Aby uzyskać informacje dotyczące sposobów obejścia problemów, które mogą wystąpić w wyniku tej zmiany, zobacz "Zdarzeń obsługi może nie być nie wywoływane w domyślne dokumentu w usług IIS 7 lub usług IIS 7.5 zintegrowane tryb" w dokumencie [ASP.NET 4 fundamentalne zmiany](http://go.microsoft.com/fwlink/?LinkId=182908)w witrynie sieci Web programu ASP.NET. |
| **Algorytm wyznaczania wartości skrótu** | Program ASP.NET używa szyfrowania i algorytmów mieszania do ułatwia zabezpieczenie danych, takich jak pliki cookie uwierzytelniania formularzy oraz stanu widoku. Domyślnie korzysta z platformy ASP.NET 4 <xref:System.Security.Cryptography.HMACSHA256> algorytm wyznaczania wartości skrótu operacje na pliki cookie i stan widoku. Starsze wersje programu ASP.NET używane starszej <xref:System.Security.Cryptography.HMACSHA1> algorytmu. | Po uruchomieniu aplikacji, które mieszać ASP.NET 2.0 i programu ASP.NET 4, gdzie dane, takie jak pliki cookie uwierzytelniania formularzy musi działać przez wersje programu .NET Framework, należy skonfigurować aplikację sieci Web programu ASP.NET 4 do używania starszej <xref:System.Security.Cryptography.HMACSHA1> algorytmu, dodając następujące ustawienie w plik Web.config:<br><br>`<machineKey validation="SHA1" />` |
| **Hosting formantów w programie Internet Explorer** | Nie można hosta formanty formularzy systemu Windows w programie Internet Explorer, ponieważ istnieją lepsze rozwiązania do obsługi formantów w sieci Web. W związku z tym zestawy IEHost.dll i IEExec.exe zostały usunięte z programu .NET Framework. | Następujące technologie służy do tworzenia kontrolki niestandardowej w aplikacji sieci Web:<br><br>* Można utworzyć aplikację Silverlight i skonfigurować go, aby uruchomić aplikację poza przeglądarką. Aby uzyskać więcej informacji, zobacz [Obsługa Out-of-Browser](https://msdn.microsoft.com/library/dd550721(v=vs.100).aspx).<br>* Można tworzyć aplikacja przeglądarki XAML (XBAP), aby skorzystać z możliwości WPF (wymaga programu .NET Framework na komputerach klienckich). Aby uzyskać więcej informacji, zobacz [przeglądu aplikacje przeglądarki XAML w WPF](/dotnet/framework/wpf/app-development/wpf-xaml-browser-applications-overview). |
| **Metody HtmlEncode i UrlEncode** | `HtmlEncode` i `UrlEncode` metody <xref:System.Web.HttpUtility> i <xref:System.Web.HttpServerUtility> klasy zostały zaktualizowane do kodowania znaków pojedynczego cudzysłowu (') w następujący sposób:<br><br>* `HtmlEncode` Wystąpień pojedynczy cudzysłów jako koduje — metoda `&#39;`<br>* `UrlEncode` Wystąpień pojedynczy cudzysłów jako koduje — metoda `%27` | Sprawdź kod dla miejsc, w których są używane `HtmlEncode` i `UrlEncode` metody i upewnij się, że zmianę w kodowaniu nie powoduje zmiany, które będą wpływać na aplikację. |
| **Błędy HttpException w aplikacjach ASP.NET 2.0** | Po włączeniu programu ASP.NET 4 w usługach IIS 6, aplikacje programu ASP.NET 2.0, które działają w usługach IIS 6 (w systemie Windows Server 2003 lub Windows Server 2003 R2) może generować błędy podobne do poniższych: `System.Web.HttpException: Path '/[yourApplicationRoot]/eurl.axd/[Value]' was not found.` | * Jeśli ASP.NET 4 nie jest wymagana, aby można było uruchomić witrynę sieci Web, należy ponownie zamapować lokacji zamiast tego użyć programu ASP.NET 2.0.<br><br>—lub—<br><br>* Jeśli ASP.NET 4 jest wymagany w celu uruchamiania witryny sieci Web, należy przenieść wszystkie katalogi wirtualne ASP.NET 2.0 podrzędnych do innej witryny sieci Web, który jest zamapowany na platformie ASP.NET 2.0.<br><br>—lub—<br><br>* Wyłączyć adresy URL bez rozszerzeń. Aby uzyskać więcej informacji, zobacz "aplikacje programu ASP.NET 2.0 mogą generować błędy HttpException tego odwołania eurl.axd" w dokumencie [ASP.NET 4 fundamentalne zmiany](http://go.microsoft.com/fwlink/?LinkId=182908) w witrynie sieci Web programu ASP.NET. |
| **Typy członkostwa** | Niektóre typy (na przykład <xref:System.Web.Security.MembershipProvider>) używanych w programie ASP.NET członkostwa zostały przeniesione z System.Web.dll do zestawu System.Web.ApplicationServices.dll. Typy zostało przeniesione, aby rozpoznać zależności warstwy architektury między typami w klienta i rozszerzone .NET Framework w wersji produktu. | Biblioteki klas zostały uaktualnione z wcześniejszych wersji programu ASP.NET, które korzystają z członkostwa typy, które zostały przeniesione może zakończyć się niepowodzeniem do kompilowania, gdy jest używany w projekcie platformy ASP.NET 4. Jeśli tak, Dodaj odwołanie do projektu biblioteki klas do System.Web.ApplicationServices.dll. |
| **Zmiany formant menu** | Zmienia się na <xref:System.Web.UI.WebControls.Menu> kontrolować wynikiem są następujące działania:<br><br>* Jeśli <xref:System.Web.UI.WebControls.MenuRenderingMode> ustawiono `List`, lub jeśli <xref:System.Web.UI.WebControls.MenuRenderingMode> ma ustawioną wartość `Default` i <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> ma ustawioną wartość `4.0` lub nowszym, <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> właściwość nie ma wpływu.<br>* Jeśli ścieżki, które są ustawione w <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> i <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> właściwości zawiera ukośnik odwrotny (\\), nie są obrazy. (We wcześniejszych wersjach programu ASP.NET, nazwa ścieżki może zawierać ukośnik odwrotny.) | * Zamiast elementu ustawienie <xref:System.Web.UI.WebControls.MenuItem.PopOutImageUrl> ustawić właściwości dla poszczególnych elementów menu, <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> lub <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> elementu nadrzędnego <xref:System.Web.UI.WebControls.Menu> formantu.<br><br>—lub—<br><br>Ustaw <xref:System.Web.UI.WebControls.MenuRenderingMode> do `Table`, lub ustaw <xref:System.Web.UI.WebControls.MenuRenderingMode> do `Default` i ustaw <xref:System.Web.Configuration.PagesSection.ControlRenderingCompatibilityVersion> do `3.5`. Te ustawienia powodują <xref:System.Web.UI.WebControls.Menu> formant do użycia na podstawie tabeli układ HTML używany w starszych wersjach programu ASP.NET.<br>* Jeśli ścieżka w <xref:System.Web.UI.WebControls.Menu.StaticPopOutImageUrl%2A> lub <xref:System.Web.UI.WebControls.Menu.DynamicPopOutImageUrl> właściwość zawiera ukośnik odwrotny (\\), Zastąp znaku ukośnika (/). |
| **Przenośne zestawu w pliku Web.config** | W poprzednich wersjach programu ASP.NET, odwołanie do zestawu System.Web.Mobile.dll została uwzględniona w pliku głównym Web.config w `assemblies` w obszarze `system.web` / `compilation`. Aby zwiększyć wydajność, usunięto odwołanie do tego zestawu.<br><br>Uwaga: Zestaw System.Web.Mobile.dll i formantów przenośnych ASP.NET są uwzględnione w ASP.NET 4, ale są traktowane jako przestarzałe. | Jeśli chcesz użyć typów z tego zestawu, Dodaj odwołanie do zestawu, w obu głównego pliku Web.config lub w pliku Web.config aplikacji. |
| **Buforowanie danych wyjściowych** | W programie ASP.NET 1.0 spowodował błąd w pamięci podręcznej stron, które określono `Location="ServerAndClient"` jako dane wyjściowe€ "ustawienie, aby emitować pamięci podręcznej `Vary:*` nagłówka HTTP w odpowiedzi. To w efekcie informuje przeglądarki klienta nigdy nie buforowania strony lokalnie. W ASP.NET 1.1 <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> metody zostało dodane, może być wywoływana w celu pomijania `Vary:*` nagłówka. Jednak umieszczania raportów o błędach wskazujące, deweloperzy i znają istniejącej `SetOmitVaryStar` zachowanie.<br><br>W przypadku programu ASP.NET 4 `Vary:*` nagłówka HTTP nie jest emitowany z odpowiedzi, które określają następujące dyrektywy:<br><br>`<%@ OutputCache Location="ServerAndClient" %>`<br><br>W związku z tym <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A> metoda jest już potrzebne, aby pominąć `Vary:*` nagłówka. W aplikacjach, które określają "ServerAndClient" dla `Location` atrybut będzie stron buforowalnej w przeglądarce bez konieczności wywołania <xref:System.Web.HttpCachePolicy.SetOmitVaryStar%2A>. | Jeśli stron w aplikacji musi wysyłać `Vary:*`, wywołaj <xref:System.Web.HttpResponse.AppendHeader%2A> metody, jak pokazano w poniższym przykładzie:<br><br>`System.Web.HttpResponse.AppendHeader("Vary","*");`<br><br>Alternatywnie można zmienić wartości buforowanie danych wyjściowych `Location` atrybutu "Server". |
| **Strona analizy** | Analizator strony dla stron sieci Web platformy ASP.NET (plikach aspx) i kontrolki użytkownika (plikach ascx) jest bardziej restrykcyjne w ASP.NET 4 niż we wcześniejszych wersjach programu ASP.NET, a jej flagi więcej znaczników jako niepoprawne niż we wcześniejszych wersjach. | Sprawdź komunikaty o błędach, które są tworzone po uruchomieniu strony i błędy wynikające z nieprawidłowych znaczników. |
| **Typy Passport** | Obsługa usługi Passport wbudowanych w programie ASP.NET 2.0 jest przestarzały i nie jest obsługiwany z powodu zmian w Passport (teraz Live ID zestawu SDK). W związku z tym typy związane z usługą Passport w <xref:System.Web.Security> teraz są oznaczone ikoną z `ObsoleteAttribute` atrybutu. | Zmień kod masz używający typów Passport w <xref:System.Web.Security> przestrzeni nazw (na przykład <xref:System.Web.Security.PassportIdentity>) do użycia [SDK](http://go.microsoft.com/fwlink/?LinkId=106346). |
| **PATHINFO zawiera informacje we właściwości FilePath** | ASP.NET 4 nie zawiera już `PathInfo` wartość w zwracany wartości z właściwości, takie jak <xref:System.Web.HttpRequest.FilePath>, <xref:System.Web.HttpRequest.AppRelativeCurrentExecutionFilePath>, i <xref:System.Web.HttpRequest.CurrentExecutionFilePath>. Zamiast tego `PathInfo` informacje są dostępne w <xref:System.Web.HttpRequest.PathInfo>. Załóżmy na przykład następujące fragmentu adresu URL:<br><br>`/testapp/Action.mvc/SomeAction`<br><br>We wcześniejszych wersjach programu ASP.NET <xref:System.Web.HttpRequest> właściwości mieć następujące wartości:<br><br>* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc/SomeAction`<br>* <xref:System.Web.HttpRequest.PathInfo>: (pusty)<br><br>W przypadku programu ASP.NET 4 <xref:System.Web.HttpRequest> właściwości zamiast mieć następujące wartości:<br><br>* <xref:System.Web.HttpRequest.FilePath>: `/testapp/Action.mvc`<br>* <xref:System.Web.HttpRequest.PathInfo>: `SomeAction` | Sprawdź kod dla miejsca, w którym użytkownik korzysta z właściwości <xref:System.Web.HttpRequest> klasy do zwracania informacji ścieżka; Zmień kod w celu odzwierciedlenia zmian w sposób zwrotu informacje o ścieżce. |
| **Sprawdzanie poprawności żądań** | Aby zwiększyć weryfikacji żądań, weryfikacja żądań ASP.NET jest wywoływana wcześniej w cyklu życia żądania. W związku z tym Weryfikacja żądania jest uruchamiany dla żądań, które nie są plików aspx, takie jak wywołania usługi sieci Web oraz niestandardowe programy obsługi. Weryfikacja żądania również będzie aktywny, uruchamiając niestandardowe moduły HTTP w potoku przetwarzania żądań.<br><br>W wyniku tej zmiany żądania zasobów innych niż pliki aspx może zgłosić błędy sprawdzania poprawności żądania. Niestandardowy kod, który jest uruchamiany z potokiem żądań (na przykład niestandardowe moduły HTTP) również może zgłosić błędy sprawdzania poprawności żądania. | W razie potrzeby można przywrócić poprzednie działanie o tylko strony .aspx wyzwalania weryfikacji żądań przy użyciu następującego ustawienia w pliku konfiguracji sieci Web:<br><br>`<httpRuntime requestValidationMode="2.0" />`<br><br>Ostrzeżenie: Po przywróceniu poprzednie działanie, upewnij się, czy cały kod w istniejących programów obsługi, moduły i innych niestandardowych kodów sprawdza ją dla potencjalnie niebezpiecznych danych wejściowych HTTP, które mogą być XSS ataki wektorów. " |
| **Routing** | Tworzenie witryny sieci Web systemu plików w Visual Studio 2010, witryny sieci Web znajduje się w folderze, który zawiera kropkę (.) w nazwie folderu routingu adresów URL nie będzie działać prawidłowo. Błąd HTTP 404, jest zwracana z niektórych ścieżek wirtualnych. Dzieje się tak, ponieważ program Visual Studio 2010 uruchamia serwera programu Visual Studio Programowanie (Cassini) przy użyciu niepoprawną ścieżkę dla katalogu wirtualnego katalogu głównego. | * W **właściwości** strony witryny sieci Web opartych na plikach powoduje, że zmiany **ścieżki wirtualnej** atrybutu "/".<br><br>—lub—<br><br>* Utwórz projekt aplikacji sieci Web zamiast projekt witryny sieci Web. Projekty aplikacji sieci Web ma ten problem, a routingu adresów URL działa nawet wtedy, gdy nazwa folderu projektu zawiera kropkę.<br><br>—lub—<br><br>* Utworzyć oparty na protokole HTTP witryny sieci Web, która jest obsługiwana w usługach IIS. Witryny sieci Web hostowanych przez usługi IIS mogą mieć kropki w ścieżki wirtualnej oraz jak folder pliku projektu. |
| **Witryny programu SharePoint** | Jeśli zostanie podjęta próba uruchomienia witryny sieci Web programu ASP.NET 4, która została wdrożona jako element podrzędny witryny sieci Web programu SharePoint, która zawiera niestandardowe częściowym zaufaniem poziomu o nazwie `WSS_Minimal`, zostanie wyświetlony następujący błąd:<br><br>`Could not find permission set named 'ASP.Net'.` | Obecnie nie wersji programu SharePoint są zgodne z platformy ASP.NET. W związku z tym nie należy podejmować uruchomić witryny sieci Web programu ASP.NET 4 jako element podrzędny witryny sieci Web programu SharePoint. |
| **Standardy XHTML 1.1** | Aby włączyć XHTML 1.1 zgodności dla nowych witryn sieci Web, kontrolek ASP.NET w .NET Framework 4 wygeneruje HTML zgodne XHTML 1.1. Ten renderowania jest włączona, przy użyciu następujących opcji w pliku Web.config wewnątrz `<system.Web>` elementu:<br><br>`<pages controlRenderingCompatibilityVersion="4.0"/>`<br><br>Ta opcja jest domyślnie 4.0. Projekty sieci Web, które zostaną uaktualnione do programu Visual Studio z programu Visual Studio 2008 ma ustawienie 3.5 włączone zgodności. | Brak. |

## <a name="core"></a>Core

### <a name="general-features"></a>Funkcje ogólne

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Program CardSpace** | Program Windows CardSpace nie jest już uwzględniona w programie .NET Framework; podano oddzielnie. | Pobierz program Windows CardSpace z [Centrum pobierania Microsoft](http://go.microsoft.com/fwlink/?LinkId=199868). |
| **Pliki konfiguracji** | Poprawki zostały wprowadzone w sposób programu .NET Framework uzyskuje dostęp do plików konfiguracji aplikacji. | Jeśli nosi nazwę pliku konfiguracji aplikacji *name.config aplikacji*, zmienić jego nazwę na *name.exe.config aplikacji*. Na przykład zmienić nazwę *MyApp.config* do *MyApp.exe.config*. |
| **Kompilator kodu C#** | `Compiler`, `CompilerError`, I `ErrorLevel` klasy, które znajdowały się w <xref:Microsoft.CSharp> przestrzeni nazw nie będą już dostępne, a ich zestawu (cscompmgd.dll) nie jest już uwzględniona w programie .NET Framework. | Użyj <xref:System.CodeDom.Compiler.CodeDomProvider> klasy i innych klas w <xref:System.CodeDom.Compiler> przestrzeni nazw. Aby uzyskać więcej informacji, zobacz [za pomocą modelu CodeDOM](https://msdn.microsoft.com/library/y2k85ax6(v=vs.100).aspx). |
| **Hosting** (niezarządzanych API) | Aby zwiększyć możliwości hostingu, niektóre aktywacji hostingu interfejsów API są przestarzałe. W trakcie wykonywania side-by-side funkcje umożliwiają aplikacji do ładowania i uruchomić wiele wersji .NET Framework w tym samym procesie. Na przykład można uruchamiać aplikacje, które ładują dodatków (lub składników) opartych na programie .NET Framework 2.0 z dodatkiem SP1 i dodatków, które są oparte na .NET Framework 4, w tym samym procesie. Starsze składniki nadal używać starszej wersji .NET Framework i nowych składników użycie nowej wersji .NET Framework. | Użyj konfiguracji opisanych w [w trakcie wykonywania Side-by-Side](/dotnet/framework/deployment/in-process-side-by-side-execution). |
| **Nowy model zabezpieczeń** | Zasady zabezpieczeń (CAS) kodu dostępu zostało wyłączone i zastąpione uproszczony model, zgodnie z opisem w [zmiany zabezpieczeń w .NET Framework 4](https://msdn.microsoft.com/library/dd233103(v=vs.100).aspx). | Zmiany mogą być wymagane, jeśli są zależne od urzędów certyfikacji w aplikacji. Aby uzyskać więcej informacji, zobacz [zgodności zasad zabezpieczeń dostępu kodu i migracji](/dotnet/framework/misc/code-access-security-policy-compatibility-and-migration). |

### <a name="date-and-time"></a>Data i godzina

Namespace: <xref:System>; zestaw: mscorlib (w bibliotece mscorlib.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Letniego.** | Być zgodne z zegarem systemowym, czas właściwości (takie jak <xref:System.TimeZoneInfo.Local> i <xref:System.DateTime.Now>) teraz używać reguł systemu operacyjnego zamiast innych danych .NET Framework dla operacji czasu letniego. | Brak. |
| **Ciągi formatujące** | Do obsługi formatowania zależne od kultury, <xref:System.TimeSpan> struktura zawiera nowe przeciążeń `ToString`, `Parse`, i `TryParse` dodatkowo do nowej metody `ParseExact` i `TryParseExact` metody. | Brak. |


### <a name="globalization"></a>Globalizacja

Aby uzyskać listę nowych kultury neutralnej i określonych, zobacz [What's New in lokalizacja i globalizacja](https://msdn.microsoft.com/library/dd997383(v=vs.100).aspx).

Namespace: <xref:System.Globalization>; zestaw: mscorlib (w bibliotece mscorlib.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Nazwy kultury** | Następujące zmiany nazw wpływać kultur niemiecki, Malediwski i Afryki:<br><br>* <xref:System.Globalization.CultureAndRegionInfoBuilder.CurrencyEnglishName>: Nazwa waluty na język niemiecki (de-CH) (Switizerland) kultury został zmieniony z "sFr." Aby "Fr.".<br>* <xref:System.Globalization.DateTimeFormatInfo.LongDatePattern>Wzorzec Data długa dla Malediwski (Malediwy) (cyfrowej MV) kultury został zmieniony z "MMMM/dd/rrrr" na "dd/MM/RRRR".<br>* <xref:System.Globalization.DateTimeFormatInfo.PMDesignator>Godziny desygnator z Afrikaans (Republika Południowej Afryki) (af ZA) kultury został zmieniony z "nm" na "PM". | Należy pamiętać, zmiany nazwy kultury. |
| **Parametr LCID** | Aby było spójne z oczekiwane zachowanie ustawień serwera automatyzacji, CLR nie przekazuje bieżącej kultury na `LCID` parametr niezarządzane aplikacje oparte na modelu COM. Zamiast tego przechodzą 1033 (en-us) dla kultury. | Nie zmiany w z wyjątkiem natywnych aplikacji, które wymagają określonej kultury. |
| **Kultura przestarzałe typy** | <xref:System.Globalization.CultureTypes> i <xref:System.Globalization.CultureTypes> kultury typy są obecnie przestarzałe.<br><br>W celu zapewnienia zgodności z poprzednimi wersjami <xref:System.Globalization.CultureTypes> teraz zwraca neutralnych i określonej kultury dołączonych poprzedni .NET Framework i <xref:System.Globalization.CultureTypes> teraz zwraca pustej listy. | Użyj innych wartości <xref:System.Globalization.CultureTypes> wyliczenia. |
| **Trwa pobieranie kultury** | Począwszy od systemu Windows 7, .NET Framework 4 pobiera informacje o ustawieniach kulturowych z systemu operacyjnego zamiast przechowywania samych danych. Ponadto .NET Framework synchronizuje z systemu Windows do sortowania i wielkość liter danych. | Brak. |
| **Standardów Unicode 5.1** | .NET Framework obsługuje teraz wszystkie znaki Unicode 5.1 — dodatek około 1400 znaków. Dodatkowe znaki obejmują nowych symboli, strzałki, znaków diakrytycznych, znaki interpunkcyjne, symbole matematyczne, pociągnięć CJK i ideogramy, dodatkowe malajalam i Telugu znaków alfanumerycznych i różnych Myanmaru, Latin, arabskiego, grecki, mongolski i cyrylicy znaki. Następujące nowe skrypty są obsługiwane z Unicode 5.1: Sundanese, znaki Lepcha, Ol Chiki, Vai, Saurashtra, Kayah Li, Rejang, Gurmukhi, Orija, tamilski, Telugu i malajalam i Cham. | Brak. |

### <a name="exceptions"></a>Wyjątki

Przestrzenie nazw: <xref:System>, <xref:System.Runtime.ExceptionServices>; zestaw: mscorlib (w bibliotece mscorlib.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Wyjątki dla stan uszkodzony procesu** | CLR nie jest już dostarcza wyjątki dla stan uszkodzony procesu do obsługi wyjątków w kodzie zarządzanym. | Te wyjątki wskazują stan procesu jest uszkodzony. Nie zaleca się uruchomienie aplikacji w tym stanie.<br><br>Aby uzyskać więcej informacji, zobacz <xref:System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute> i wpis [obsługi wyjątków stan uszkodzony](http://go.microsoft.com/fwlink/?LinkID=179681) w blogu CLR Inside Out. |
| **Wykonywanie aparatu wyjątków** | <xref:System.ExecutionEngineException> jest już nieaktualny, ponieważ wyjątek przechwytywalne umożliwi niestabilny procesu mogło działać. Modyfikacja ta poprawia przewidywalności i niezawodności w czasie wykonywania. | Użyj <xref:System.InvalidOperationException> sygnalizują warunku. |

### <a name="reflection"></a>Odbicie

Namespace: <xref:System.Reflection>; zestaw: mscorlib (w bibliotece mscorlib.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Algorytmy wyznaczania wartości skrótu zestawu** | <xref:System.Reflection.AssemblyName.HashAlgorithm> Zwraca teraz właściwości <xref:System.Configuration.Assemblies.AssemblyHashAlgorithm>, ponieważ środowisko uruchomieniowe nie może określić algorytm wyznaczania wartości skrótu przywoływanego zestawu, gdy zestaw nie został załadowany. (Dotyczy to przy użyciu właściwości na przywoływanego zestawu, takim jak zwracany przez <xref:System.Reflection.Assembly.GetReferencedAssemblies%2A> metody.) | Brak. |
| **Podczas ładowania zestawu** | Aby zapobiec nadmiarowe ładowania zestawów i zapisać wirtualnej przestrzeni adresowej, CLR teraz ładuje zestawów przy użyciu tylko Win32 `MapViewOfFile` funkcji. Nie będzie również wywołuje `LoadLibrary` funkcji.<br><br>Ta zmiana wpływa na aplikacje do diagnozowania w następujący sposób:<br><br>* A <xref:System.Diagnostics.ProcessModuleCollection> nie będzie zawierać wszystkie moduły z biblioteki klas (plik dll), uzyskany w wyniku wywołania `Process.GetCurrentProcess().Modules`.<br>* Win32 — aplikacje używające `EnumProcessModules` funkcji nie będą widzieć wszystkie zarządzane moduły wymienione na liście. | Brak. |
| **Deklarowanie typu** | <xref:System.Type.DeclaringType> Właściwość teraz prawidłowo zwraca wartość null, jeśli typ nie ma typ deklarujący. | Brak. |
| **Delegaci** | Delegat teraz zgłasza <xref:System.ArgumentNullException> zamiast <xref:System.NullReferenceException> po wartości null jest przekazywany do konstruktora delegata. | Upewnij się, że wszystkie wyjątki obsługi działania catch <xref:System.ArgumentNullException>. |
| **Zmień lokalizację pamięci podręcznej GAC** | Dla zestawów platformy .NET Framework 4 Globalna pamięć podręczna zestawów został przeniesiony z katalogu systemu Windows (% WINDIR %) w podkatalogu Microsoft.Net (*% WINDIR %\\Microsoft.Net*). Zestawy z wcześniejszych wersji pozostają w starszych katalogu.<br><br>Niezarządzane [asm_cache_flags —](https://msdn.microsoft.com/library/ms231621(v=vs.100).aspx) wyliczenie zawiera nowe `ASM_CACHE_ROOT_EX` flagi. Ta flaga pobiera lokalizację pamięci podręcznej dla zestawów platformy .NET Framework 4, których można uzyskać przez [GetCachePath](/dotnet/framework/unmanaged-api/fusion/getcachepath-function) funkcji. | Brak, przy założeniu, że aplikacje nie używają jawne ścieżek do zestawów, który nie jest zalecanym rozwiązaniem. |
| **Narzędzie Global assembly cache** | [Gacutil.exe (narzędzie globalnej pamięci podręcznej zestawów)](https://msdn.microsoft.com/library/ex0ss12c(v=vs.100).aspx) nie obsługuje już podglądu wtyczki powłoki. | Brak. |

### <a name="interoperability"></a>Współdziałanie

Namespace: <xref:System.Runtime.InteropServices>; zestaw: mscorlib (w bibliotece mscorlib.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Długość buforu** (niezarządzanych API) | Aby zapisać pamięci, funkcja `pBufferLengthOffset` parametr [ICorProfilerInfo2::GetStringLayout](/dotnet/framework/unmanaged-api/profiling/icorprofilerinfo2-getstringlayout-method) metoda została zmieniona do dopasowania `pStringLengthOffset` parametru. Oba parametry teraz wskaż lokalizację przesunięcia długość ciągu. Długość buforu został usunięty z reprezentacji ciągu klasy. | Usuń jej zależności od długości buforu. |
| **Debugowanie JIT** | Aby ułatwić rejestrację just in time (JIT) debugowania, debuger .NET Framework używa tylko AeDebug klucz rejestru, który kontroluje JIT debugowania zachowanie dla kodu natywnego. Ta zmiana powoduje zwrócenie następujących czynności:<br><br>* Można już zarejestrować dwóch różnych debugerów dla kodu zarządzanego i natywnego.<br>* Można nie można uruchomić debugera automatycznie dla innego nieinteraktywnego procesu, ale może monitować użytkownika o procesu interaktywnego.<br>* Użytkownik nie jest powiadamiany, gdy debuger nie można uruchomić lub po nie zarejestrowanych debuger, który ma być uruchamiany.<br>* Automatyczne uruchamianie zasad, które są zależne od interakcyjności aplikacji nie są już obsługiwane. | Dostosuj debugowania operacji zgodnie z potrzebami. |
| **Wywołanie platformy** | Aby zwiększyć wydajność w współdziałanie z kodem niezarządzanym, niepoprawny konwencji wywoływania na platformie wywołania Przyczyna teraz awarię aplikacji. W poprzednich wersjach kierowania warstwy rozwiązać te błędy w górę stosu. | Debugowanie aplikacji w programie Microsoft Visual Studio 2010 wyświetli alert te błędy, należy je poprawić.<br><br>Jeśli masz nie można zaktualizować pliki binarne mogą obejmować [ \<netfx40_pinvokestackresilience — >](/dotnet/framework/configure-apps/file-schema/runtime/netfx40-pinvokestackresilience-element) w pliku konfiguracji aplikacji, aby umożliwić wywołującym błędy zostać rozwiązany w górę stosu, podobnie jak w wcześniejszych wersjach. Może to jednak wpłynąć na wydajność aplikacji. |
| **Usunięte interfejsy** (niezarządzanych API) | Aby uniknąć nieporozumień developer, następujące interfejsy zostały usunięte, ponieważ nie dostarczył żadnych przydatne w scenariuszach czasu wykonywania, a nie zapewniają ani akceptować implementacjami CLR:<br><br>* **INativeImageINativeImageDependency**<br>* **INativeImageInstallInfo**<br>* **INativeImageEvaluate**<br>* **INativeImageConverter**<br>* **ICorModule**<br>* **IMetaDataConverter** | Brak. |

## <a name="data"></a>Dane

W tej sekcji opisano zagadnienia migracji dla przy użyciu zestawów danych i klientom SQL, programu Entity Framework składnika LINQ to SQL i serwery danych WCF (wcześniej znane jako ADO.NET Data Services).

### <a name="dataset-and-sql-client"></a>Zestaw danych, a klient SQL

W poniższej tabeli opisano ulepszenia funkcji, które poprzednio ograniczenia lub inne problemy.

Przestrzenie nazw: <xref:System.Data>, <xref:System.Data.Objects.DataClasses>, <xref:System.Data.SqlClient>; zestawów: dane systemowe (w System.Data.dll), System.Data.Entity (w System.Data.Entity.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Obiektów POCO scenariuszy** | <xref:System.Data.Objects.DataClasses.IRelatedEnd> Interfejs ma nowych metod, aby zwiększyć zgodność w scenariuszach zwykłego obiektu CLR stary (POCO). Te nowe metody przyjmują <xref:System.Object> zamiast <xref:System.Data.Objects.DataClasses.IEntityWithRelationships> jednostki jako parametr. |
| **Edytowanie wierszy** | <xref:System.Collections.IList.IndexOf%2A> — Metoda zaimplementowanego przez <xref:System.Data.DataView> klasy, teraz prawidłowo zwraca wartość na wiersz, który jest edytowany, zamiast zwracać wartość -1. |
| **Zdarzenia** | <xref:System.Data.DataRowView.PropertyChanged> Zdarzenie jest wywoływane teraz, gdy wiersz jest w stanie zmodyfikowany i <xref:System.Data.DataRow.RejectChanges%2A> metoda jest wywoływana. Ta zmiana ułatwia tworzenie formantów interfejsu użytkownika, które udostępniają zawartość <xref:System.Data.DataSet> obiektu. |
| **Wyjątki** | <xref:System.Data.SqlClient.SqlCommand.Prepare%2A> Metoda zgłasza teraz <xref:System.InvalidOperationException> podczas połączenia nie jest ustawiona lub Otwórz zamiast <xref:System.NullReferenceException>. |
| **Widoki mapowania** | Błędy mapowania widoku zapytania teraz są przechwytywane w czasie projektowania, zamiast zgłaszanie <xref:System.NullReferenceException> w czasie wykonywania.<br><br>Teraz weryfikacji mapowania połowy błąd, w których skojarzenie dwóch zestawów w schematu koncepcyjnego (CSDL) są mapowane w tej samej kolumnie. |
| **Transakcje** | Jeśli aplikacja próbuje wykonać instrukcję połączenia po zakończeniu transakcji (w tym przerwane lub walcowanego wstecz) <xref:System.InvalidOperationException> generowany jest teraz. Poprzednie wersje jest zgłosić wyjątek i umożliwiają wykonywanie dodatkowych poleceń, nawet wtedy, gdy transakcja została przerwana. |

### <a name="entity-framework"></a>Entity Framework

W poniższej tabeli opisano ulepszenia funkcji, które poprzednio ograniczenia lub inne problemy.

Przestrzenie nazw: <xref:System.Data>, <xref:System.Data.Objects>, <xref:System.Data.Objects.DataClasses>; zestaw: System.Data.Entity (w System.Data.Entity.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Obiekty obiektów** | Teraz jest parzystość platformy <xref:System.Data.Objects.ObjectContext.Detach%2A> — metoda i stan obiektu jednostki po <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> metoda jest wywoływana. Ta ulepszona spójność zapobiega nieoczekiwany wyjątki od został zgłoszony. |
| **Jednostki SQL** | Ulepszono reguły dla rozdzielczości identyfikator jednostki SQL.<br><br>Analizator składni SQL jednostki ulepszono logikę rozpoznawania wieloczęściowych identyfikatorów. |
| **Adnotacje strukturalnych** | Entity Framework rozpoznaje teraz strukturalnych adnotacji. |
| **Zapytania** | W zapytaniach wprowadzono następujące ulepszenia:<br><br>* A `GroupBy` zapytania za pomocą klucza o wartości null za pośrednictwem pustą kolekcję nie zwróci żadnych wierszy, niezależnie od tego, jeśli ma żadnych dodatkowych wybiera w zapytaniu.<br>* Wygenerowanego zapytań SQL, w LINQ i SQL jednostki parametrów ciągu Traktuj teraz jako wartości z systemem innym niż Unicode domyślnie. |

### <a name="linq-to-sql"></a>LINQ do SQL

W poniższej tabeli opisano ulepszenia funkcji, które poprzednio ograniczenia lub inne problemy.

Namespace: <xref:System.Data.Linq>; zestaw: System.Data.Linq (w System.Data.Linq.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Zdarzenia** | A <xref:System.Data.Linq.EntitySet%601> zgłasza teraz kolekcji <xref:System.Data.Linq.EntitySet%601.ListChanged> zdarzenia dla Dodaj i Usuń operacje, jeśli <xref:System.Data.Linq.EntitySet%601> jest zwolniony, oprócz wywoływanie zdarzeń po załadowaniu kolekcji. |
| **Zapytania** | `Skip(0)` kwerendy SQL nie jest ignorowana w składniku LINQ. W związku z tym zapytań, które mają tę metodę mogą zachowywać się inaczej. Na przykład w niektórych przypadkach `OrderBy` klauzuli jest wymagany w przypadku `Skip(0)`, i teraz zgłosi zapytanie <xref:System.NotSupportedException> wyjątek Jeśli `OrderBy` klauzuli nie został dołączony. |

### <a name="wcf-data-services"></a>Usługi danych WCF

W poniższej tabeli opisano ulepszenia funkcji, które poprzednio ograniczenia lub inne problemy.

Przestrzenie nazw: <xref:System.Data.Services>, <xref:System.Data.Services.Client>, <xref:System.Data.Services.Common>, <xref:System.Data.Services.Providers>; zestawów: System.Data.Services (w System.Data.Services.dll), obiektu System.Data.Services.Client (w System.Data.Services.Client.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Zawartość binarna wsadów** | Usługi danych WCF obsługuje teraz wsadów zawartość binarną w żądań i odpowiedzi. |
| **Zmień interceptory** | Zmień interceptory teraz są wykonywane na żądanie usunięcia.<br><br>Interceptora zmian to metoda, która jest uruchamiana za każdym razem, gdy żądanie zostanie odebrane przez serwer do zmodyfikowania jednostki w zestawie jednostek. Jest ono wykonywane przed wykonaniem żądania przychodzącego. Interceptora zmian zapewnia dostęp do jednostki, która jest zmieniane i operacji, która jest wykonywana na nim. |
| **Wyjątki** | Poniższe warunki teraz zgłaszają wyjątki bardziej użyteczna, zamiast <xref:System.NullReferenceException>:<br><br>* A <xref:System.ServiceProcess.TimeoutException> po wywołaniu usługi danych upłynie limit czasu.<br>* A <xref:System.Data.Services.Client.DataServiceRequestException> nawiązaniem nieprawidłowe żądanie do usługi danych.<br><br>W aplikacji należy zmienić obsługi wyjątków przechwytują wyjątki nowe. |
| **Nagłówki** | Nagłówki wprowadzono następujące ulepszenia:<br><br>* Usługi danych WCF teraz prawidłowo odrzuca `eTag` nagłówek, który ma wartość nieokreślony.<br>* Usługi danych WCF teraz zwraca błąd i nie wykonuj żądania dla żądania usunięcia łącza podczas `if-*` jest nagłówka w żądaniu.<br>* Usługi danych WCF teraz zwraca błąd do klienta w formacie (Atom, JSON), który klienta określony w nagłówku Accept. |
| **Czytnik JSON** | Czytnik JavaScript Object Notation (JSON) teraz prawidłowo zwraca błąd, jeśli jest odczytywana pojedynczego ukośnika odwrotnego ("\\") zmiany znaczenia podczas przetwarzania ładunek JSON wysyłane do usługi danych WCF. |
| **Scala** | Wprowadzono następujące ulepszenia <xref:System.Data.Services.Client.MergeOption> wyliczenie:<br><br>* <xref:System.Data.Services.Client.MergeOption> Opcji scalania nie modyfikuje jednostki na kliencie w wyniku kolejnych odpowiedzi z usługi danych.<br>* <xref:System.Data.Services.Client.MergeOption> Jest teraz jednolita dynamiczne SQL i aktualizacje na podstawie procedury składowanej. |
| **żądania** | <xref:System.Data.Services.DataService%601.OnStartProcessingRequest%2A> Wywoływana jest metoda teraz przed przetworzeniem żądania usług danych. Dzięki temu żądania do prawidłowego działania <xref:System.Data.Services.Providers.ServiceOperation> usług. |
| **Strumienie** | Usługi danych WCF nie jest już zamknięciu odpowiadającego strumienia do odczytu i zapisu. |
| **Identyfikatory URI** | Anulowanie identyfikatorów URI przez klienta usługi danych WCF został rozwiązany. |

## <a name="windows-communication-foundation-wcf"></a>Windows Communication Foundation (WCF)

W poniższej tabeli opisano ulepszenia funkcji, które poprzednio ograniczenia lub inne problemy.

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Pliki konfiguracji** | Aby włączyć dziedziczenie zachowania przez hierarchię pliku konfiguracji, WCF obsługuje teraz, scalanie w plikach konfiguracji.<br><br>Model dziedziczenia konfiguracji jest teraz znacznie większe pozwala użytkownikom na Definiowanie zachowania, które będą stosowane do wszystkich usług, które są uruchomione na komputerze.<br><br>Zmiany zachowania mogą wystąpić, jeśli istnieją zachowania o takiej samej nazwie na różnych poziomach hierarchii. |
| **Usługa hostingu** | Nie można określić `<serviceHostingEnvironment>` elementu konfiguracji na poziomie usługi, dodając atrybut `allowDefinition="MachineToApplication"` do definicji elementu.<br><br>Określanie `<serviceHostingEnvironment>` element na poziomie usługi jest technicznie niepoprawny i powodując niespójne zachowanie. |

## <a name="windows-presentation-foundation-wpf"></a>Windows Presentation Foundation (WPF)

### <a name="applications"></a>Aplikacje

Przestrzenie nazw: <xref:System.Windows>, <xref:System.Windows.Controls>; zestaw: PresentationFramework (w PresentationFramework.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Obsługa wyjątków** | Aby włączyć błędów można było wykryć wcześniej, zgłasza WPF <xref:System.Reflection.TargetInvocationException> i ustawia <xref:System.Exception.InnerException> właściwości wyjątków krytycznych, takich jak <xref:System.NullReferenceException>, <xref:System.OutOfMemoryException>, <xref:System.StackOverflowException>, i <xref:System.Security.SecurityException>, zamiast Przechwytywanie pierwotny wyjątek. | Brak. |
| **Połączonych zasobów** | Aby połączeń łatwiejsze, zasobów plików (takich jak obrazy), które znajdują się w lokalizacji innej niż struktury folderów projektu użyj Pełna ścieżka pliku zasobu zamiast tylko nazwy pliku jako identyfikator zasobu podczas tworzenia aplikacji. Aplikacja będzie mogła zlokalizować plików w czasie wykonywania. | Brak. |
| **Aplikacje częściowo zaufane** | Ze względów bezpieczeństwa aplikacje oparte na systemie Windows, uruchamiane w częściowego zaufania i zawierać <xref:System.Windows.Controls.WebBrowser> kontroli lub <xref:System.Windows.Controls.Frame> formant, który zawiera kod HTML będzie zgłaszać wyjątek <xref:System.Security.SecurityException> utworzenia formantu.<br><br>Aplikacje przeglądarki będzie zgłosić wyjątek i wyświetli komunikat, jeśli są spełnione wszystkie następujące warunki:<br><br>* Aplikacja działa w programie Firefox.<br>* Aplikacja działa w częściowej relacji zaufania w strefie Internet z niezaufanej lokacji.<br>* Ta aplikacja zawiera <xref:System.Windows.Controls.WebBrowser> kontroli lub <xref:System.Windows.Controls.Frame> formant, który zawiera kod HTML.<br><br>Należy pamiętać, że nie będzie to miało wpływu aplikacji, które korzystają z zaufanych witryn lub ze strefy intranetowej. | W aplikacjach przeglądarki może ułatwić tę zmianę, wykonując jedną z następujących czynności:<br><br>* Uruchom aplikację przeglądarki w trybie pełnego zaufania.<br>* Ma klientów Dodaj witrynę aplikacji do strefy Zaufane witryny.<br>* Ma klientów uruchomić aplikację w programie Internet Explorer. |
| **Słowniki zasobów** | Aby zwiększyć słowniki zasobów poziom motywu i uniemożliwić zmianę, obiektu freezable zasobów, które są zdefiniowane w słowniku zasobów i została scalona z elementem słownika poziom motywu teraz są zawsze oznaczone jako zablokowany i są niezmienne. Jest to oczekiwane zachowanie obiektu freezable zasobów. | Aplikacje, które zmodyfikować z zasobem, który jest zdefiniowany w słowniku scalonych motywu poziom powinien sklonować zasobu i zmodyfikuj sklonowanej kopii. Alternatywnie można oznaczyć zasobu `x:Shared="false"` , aby <xref:System.Windows.ResourceDictionary> tworzy nową kopię za każdym razem, gdy zasób jest poddawany kwerendzie. |
| **Windows 7** | Aby aplikacje WPF działa lepiej w systemie Windows 7, skorygować zachowanie okna wprowadzono następujące ulepszenia:<br><br>* Dock i gestów stanów teraz pracy jako oczekiwanego użytkownika na podstawie interakcji.<br>* Polecenia zadań **kaskadowo systemu windows, wyświetlanie okien skumulowany**, i **wyświetlanie okien side-by-side** teraz ma poprawne zachowanie i zaktualizuj odpowiednie właściwości.<br>* `Top`, `Left`, `Width`, I `Height` właściwości zmaksymalizowane lub zminimalizowanego okna zawierają teraz lokalizacji przywracania poprawne okna zamiast inne wartości, w zależności od tego monitora. | Brak. |
| **Styl systemu Windows i przezroczystości** | <xref:System.InvalidOperationException> Jest generowany, Jeśli spróbujesz ustawić <xref:System.Windows.Window.WindowStyle> wartość inną niż <xref:System.Windows.WindowStyle> podczas <xref:System.Windows.Window.AllowsTransparency> jest `true` i <xref:System.Windows.WindowState> jest <xref:System.Windows.WindowState>. | Jeśli musisz zmienić <xref:System.Windows.Window.WindowStyle> podczas <xref:System.Windows.Window.AllowsTransparency> jest `true`, należy wywołać Win32 `SetWindowLongPtr` funkcji. |
| **Przeglądarka plików XPS** | WPF nie obejmuje Microsoft XML Paper Specification Essentials pakietu (XPSEP). XPSEP jest dołączony do systemu Windows 7 i Windows Vista.<br><br>Na komputerze z systemem Windows XP bez .NET Framework 3.5 SP1 zainstalowane, drukowania przy użyciu interfejsu API WPF inne niż w <xref:System.Windows.Controls.PrintDialog> będzie zależeć WINSPOOL. Niektóre funkcje drukarki nie będą raportowane i niektóre ustawienia nie zostaną zastosowane podczas drukowania. | Jeśli to konieczne, zainstaluj [Microsoft XML Paper specyfikacji Essentials pakiet](http://go.microsoft.com/fwlink/?LinkId=178895). |

### <a name="controls"></a>Formanty

Przestrzenie nazw: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; zestawów: PresentationFramework (w PresentationFramework.dll), PresentationCore (w plików PresentationCore.dll), WindowsBase (w WindowsBase.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Okna dialogowe** | Aby zwiększyć niezawodność, <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> metoda jest wywoływana w tym samym wątku, który utworzony <xref:Microsoft.Win32.FileDialog> formantu. | Należy utworzyć <xref:Microsoft.Win32.FileDialog> kontroli i wywołać <xref:Microsoft.Win32.CommonDialog.ShowDialog%2A> metody w tym samym wątku. |
| **Liczby zmiennoprzecinkowe systemu windows** | Ustalenie logiki przywracania fokus niepoprawnie śledzi ponowne uaktywnianie przestawne okno (co widoczna jako modalne okno dialogowe), przywracanie fokus nie teraz Jeśli kandydata nie jest elementem podrzędnym okna. | Brak. |
| **Elementy w kolekcji** | Gdy element przeniesiony lub dodać do kolekcji źródłowej, pojawi się w <xref:System.Windows.Data.CollectionView> w tej samej lokalizacji względnej Jeśli <xref:System.Windows.Data.CollectionView> nie jest posortowana. Zapewnia to spójność położenie elementu w kolekcji i w skojarzonym <xref:System.Windows.Data.CollectionView>. | Użyj <xref:System.Windows.Controls.ItemContainerGenerator.ContainerFromItem%2A> lub <xref:System.Windows.Data.CollectionView.IndexOf%2A> metody, aby znaleźć lokalizację element <xref:System.Windows.Data.CollectionView> zamiast polegania na stałe lokalizacji elementu. |
| **Układy** | Aby wyeliminować niepotrzebne re układów, zmiana <xref:System.Windows.Controls.Page.ShowsNavigationUI> już unieważnia układ lub powoduje, że inny przebieg układu. | Jeśli przypuszczasz, że zmiana <xref:System.Windows.Controls.Page.ShowsNavigationUI> spowoduje, że inny układ przekazywania, należy wywołać <xref:System.Windows.UIElement.InvalidateVisual%2A> po ustawieniu właściwości. |
| **Menu** | Aby włączyć w menu wyskakujących okienek tekstu ClearType, zostały wprowadzone zmiany <xref:System.Windows.Controls.ControlTemplate> klasy i <xref:System.Windows.Controls.MenuItem> kontroli i innych kontrolek. | Aplikacje nie miały struktury visual szablony formantu. Tylko o nazwie części <xref:System.Windows.Controls.ControlTemplate> stanowią część publicznego kontraktu. Jeśli aplikacja musi znaleźć niektórych obiektu w <xref:System.Windows.Controls.ControlTemplate>, przeszukać drzewo wizualne dla określonego typu zamiast polegania na stałe lokalizacji obiektu w drzewie. |
| **Nawigowanie po** | Jeśli <xref:System.Windows.Controls.Frame> bezpośrednio prowadzi do lokalizacji, <xref:System.Windows.Navigation.NavigatingCancelEventArgs.IsNavigationInitiator> właściwość jest `true` po początkowej nawigacji. Ta zmiana zapobiega dodatkowych zdarzeń zgłaszanych podczas uruchamiania scenariuszy. | Brak. |
| **Wyskakujące okienka** | <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> Delegata można teraz wywołać wielokrotnie przebiegu układ, a nie tylko raz. | Jeśli Twoje <xref:System.Windows.Controls.Primitives.CustomPopupPlacementCallback> delegata oblicza pozycję <xref:System.Windows.Controls.Primitives.Popup> na podstawie jego poprzedniej pozycji, ponownie Oblicz pozycji tylko wtedy, gdy wartości `popupSize`, `targetSize`, lub `offset` Zmień parametry. |
| **Wartości właściwości** | <xref:System.Windows.DependencyObject.SetCurrentValue%2A> Metody umożliwia teraz ustawioną właściwość efektywną wartość, mimo że nadal uwzględnia wszystkie powiązania, styl i wyzwalaczy, które ma wpływ na właściwość. | Formant Autorzy powinni używać <xref:System.Windows.DependencyObject.SetCurrentValue%2A> przy każdej zmianie wartości właściwości jako efekt uboczny innych działań w tym manipulowanie użytkownika. |
| **Pola tekstowe** | Ze względów bezpieczeństwa <xref:System.Windows.Forms.TextBoxBase.Copy%2A> i <xref:System.Windows.Forms.TextBoxBase.Cut%2A> metody dyskretnie nie wywołanego w częściowej relacji zaufania.<br><br>Ponadto programowe wykonywanie <xref:System.Windows.Input.ApplicationCommands.Copy> lub <xref:System.Windows.Input.ApplicationCommands.Cut> właściwości formantu, który dziedziczy z <xref:System.Windows.Controls.Primitives.TextBoxBase> zostanie zablokowane w częściowej relacji zaufania. Jednak użytkownik zainicjował kopiowania i wycinania poleceń, takich jak kliknięcie przycisku którego <xref:System.Windows.Controls.Primitives.ButtonBase.Command> właściwość jest powiązana z jednego z tych poleceń, będzie działać. Kopiuj standardowe i wycinania poprzez skróty klawiaturowe i menu kontekstowego będą nadal działać jak wcześniej w częściowej relacji zaufania. | Powiąż <xref:System.Windows.Input.ApplicationCommands.Copy> lub <xref:System.Windows.Input.ApplicationCommands.Cut> polecenia do akcji zainicjowanej przez użytkownika, takie jak kliknięcie przycisku. |

### <a name="graphics"></a>Grafika

Przestrzenie nazw: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Media.Effects>; zestawów: PresentationFramework (w PresentationFramework.dll), PresentationCore (w plików PresentationCore.dll), WindowsBase (w WindowsBase.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Efekty mapy bitowej** | Aby zwiększyć wydajność, <xref:System.Windows.Media.Effects.BitmapEffect> klasa i klasy, które dziedziczą z <xref:System.Windows.Media.Effects.BitmapEffect> klasy, mimo że nadal się tam, są wyłączone. Efekt spowoduje, że za pomocą potoku renderowanie przyspieszane sprzętowo, jeśli są spełnione następujące warunki:<br><br>* Aplikacja używa <xref:System.Windows.Media.Effects.DropShadowBitmapEffect> lub <xref:System.Windows.Media.Effects.BlurBitmapEffect> czy właściwość radius ustawił DIU mniej niż 100.<br>* Karty wideo na komputerze, na którym działa aplikacja obsługuje program do cieniowania pikseli 2.0.<br><br>Jeśli te warunki nie są spełnione, <xref:System.Windows.Media.Effects.BitmapEffect> obiektu nie odniesie żadnego skutku.<br><br>Ponadto programu Visual Studio 2010 powodują ostrzeżenia kompilatora po napotkaniu <xref:System.Windows.Media.Effects.BitmapEffect> obiektu ani jej podklasy.<br><br><xref:System.Windows.Media.DrawingContext.PushEffect%2A> Metody jest oznaczony jako przestarzały. | Przerwanie za pomocą starszego <xref:System.Windows.Media.Effects.BitmapEffect> i klasy pochodne — zamiast tego użyj nowych klas pochodnych <xref:System.Windows.Media.Effects.Effect>: <xref:System.Windows.Media.Effects.BlurEffect>, <xref:System.Windows.Media.Effects.DropShadowEffect>, i <xref:System.Windows.Media.Effects.ShaderEffect>.<br><br>Można również tworzyć własne efekty przez dziedziczenie z <xref:System.Windows.Media.Effects.ShaderEffect> klasy. |
| **Mapa bitowa ramki** | Sklonowany <xref:System.Windows.Media.Imaging.BitmapFrame> obiektów teraz odbierać <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, i <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> zdarzenia. Dzięki temu obrazów, które są pobierane z sieci Web i zastosowane do <xref:System.Windows.Controls.Image> kontrolować za pośrednictwem <xref:System.Windows.Style> działała prawidłowo.<br><br>Zmiany w zachowaniu zostanie wyświetlony tylko wtedy, gdy spełnione są wszystkie następujące instrukcje:<br><br>* Zasubskrybowaniu <xref:System.Windows.Media.Imaging.BitmapSource.DownloadProgress>, <xref:System.Windows.Media.Imaging.BitmapSource.DownloadCompleted>, lub <xref:System.Windows.Media.Imaging.BitmapSource.DownloadFailed> zdarzeń.<br>* Źródło <xref:System.Windows.Media.Imaging.BitmapFrame> z sieci Web.<br>* <xref:System.Windows.Media.Imaging.BitmapFrame> Został sklonowany podczas pobierania jest nadal w toku. | Sprawdź nadawcy w obsłudze zdarzeń i podejmij działania, tylko wtedy, gdy nadawca jest oryginalnym <xref:System.Windows.Media.Imaging.BitmapFrame>. |
| **Dekodowaniu obrazów** | Aby zapobiec <xref:System.IO.IOException> z nie jest obsługiwane w przypadku obrazów nie może zdekodować, <xref:System.Windows.Media.Imaging.BitmapSource> zgłosi klasy <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> zdarzenie, gdy nie dekoduje obrazu. | Usuń wszelkie wyjątki obsługi <xref:System.IO.IOException>i użyj <xref:System.Windows.Media.Imaging.BitmapSource.DecodeFailed> błąd dekodowania zdarzeń do sprawdzenia. |

### <a name="input"></a>Dane wejściowe

Przestrzenie nazw: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; zestawów: PresentationFramework (w PresentationFramework.dll), PresentationCore (w plików PresentationCore.dll), WindowsBase (w WindowsBase.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Powiązanie polecenia wystąpień** | Zapewnienie mechanizmu powiązać wystąpień na podstawie modelu widoku polecenia na podstawie widoku wejściowych gestów <xref:System.Windows.Input.InputBinding> teraz dziedziczy klasa <xref:System.Windows.Freezable> zamiast <xref:System.Windows.DependencyObject>. Właściwości zależności są teraz następujące właściwości:<br><br>* <xref:System.Windows.Input.InputBinding.Command><br>* <xref:System.Windows.Input.InputBinding.CommandParameter><br>* <xref:System.Windows.Input.InputBinding.CommandTarget><br><br>Ta zmiana powoduje zwrócenie następujących czynności:<br><br>* <xref:System.Windows.Input.InputBinding> Obiektu teraz jest zablokowana, gdy jest on zarejestrowany zamiast pozostałych modyfikowalną.<br>* Nie można przejść poziomie wystąpienia <xref:System.Windows.Input.InputBinding> obiektów z wielu wątków, z powodu ograniczeń <xref:System.Windows.DependencyObject> klasy.<br>* Należy nie można zmodyfikować powiązania wejściowe poziomie klasy po ich rejestracji, z powodu ograniczeń <xref:System.Windows.Freezable> klasy.<br>* Powiązania wejściowe nie można określić w wystąpieniach polecenia, które są tworzone w modelu widoku. | Utwórz oddzielne wystąpienia <xref:System.Windows.Input.InputBinding> klasy w oddzielnych wątkach powiązania mają być modyfikowalne lub zablokować je w przeciwnym razie wartość. Nie zmodyfikować statycznego poziomie klasy <xref:System.Windows.Input.InputBinding> po jego zarejestrowaniu. |
| **Aplikacje przeglądarki** | Aplikacje przeglądarki WPF (. Zdarzenia klucza procesu teraz XBAP) podobnie jak aplikacje autonomiczne WPF, aby obiekty odbierać kierowane zdarzenia klucza w odpowiedniej kolejności. | Brak. |
| **Kombinacje martwy klawisz** | WPF zaciemnia martwy klucze, które tworzy żadne znaki widoczne, ale zamiast tego wskazuje, czy klucz znajduje się łączyć z klawisza Następna litera wygenerowało jeden znak. Klucz wejściowych zdarzenia, takie jak <xref:System.Windows.Input.Keyboard.KeyDownEvent> zdarzeń, raport po klucz jest martwy klawisz przez ustawienie <xref:System.Windows.Input.KeyEventArgs.Key> właściwości <xref:System.Windows.Input.Key> wartość. Jest to zazwyczaj oczekiwane zachowanie, ponieważ aplikacje zwykle nie będą odpowiadać na wprowadzanie z klawiatury tworzy Scalonej znak. | Przy użyciu aplikacji, w których jest oczekiwany odczyt kluczy, które były częścią znaki łączone można uzyskać klucz teraz zaciemnionego <xref:System.Windows.Input.KeyEventArgs.DeadCharProcessedKey> właściwości. |
| **Menedżer fokus** | Gdy <xref:System.Windows.Input.FocusManager.GetFocusedElement(System.Windows.DependencyObject)?displayProperty=nameWithType> metody jest przekazywany element, który ma [IsFocusScope](https://msdn.microsoft.com/library/system.windows.input.focusmanager.isfocusscope.aspx) dołączona właściwość `true`, metoda zwraca element, który jest ostatnim elementem fokus klawiatury w ramach tego zakresu fokus i tylko wtedy, gdy Zwrócony element należy do tej samej <xref:System.Windows.PresentationSource> obiektu jako element, który jest przekazywany do metody. | Brak. |

### <a name="ui-automation"></a>Automatyzacja interfejsu użytkownika

Namespace: <xref:System.Windows>, <xref:System.Windows.Automation.Peers>, <xref:System.Windows.Automation.Provider>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>; zestawów: PresentationFramework (w PresentationFramework.dll), PresentationCore (w plików PresentationCore.dll), UIAutomationProvider (w UIAutomationProvider.dll), WindowsBase (w WindowsBase.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Hierarchia klas widoków** | <xref:System.Windows.Automation.Peers.TreeViewAutomationPeer> i <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> klasy dziedziczą <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer> zamiast <xref:System.Windows.Automation.Peers.FrameworkElementAutomationPeer>. | Jeśli dziedziczą z <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer> klasy i zastąpienie <xref:System.Windows.Automation.Peers.TreeViewItemAutomationPeer.GetChildrenCore%2A> metody, należy wziąć pod uwagę, zwracając obiekt, który dziedziczy z nową <xref:System.Windows.Automation.Peers.TreeViewDataItemAutomationPeer> klasy. |
| **Kontenery ekranie** | Aby naprawić nieprawidłową wartość zwracany, <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.IsOffscreenCore%2A> metoda teraz prawidłowo zwraca `false` dla kontenerów elementów, które jest przewijane poza widoku. Ponadto wartość metody, nie dotyczy okluzji przez inne okna lub czy element jest widoczny w konkretnego monitora. | Brak. |
| **Menu i obiektów podrzędnych** | Aby włączyć automatyzacji interfejsu użytkownika z menu, które zawierają elementy podrzędne na innych niż <xref:System.Windows.Controls.MenuItem> obiektów, <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer.GetChildrenCore%2A> zwraca teraz — metoda <xref:System.Windows.Automation.Peers.AutomationPeer> obiekt podrzędny <xref:System.Windows.UIElement> obiektu, zamiast <xref:System.Windows.Automation.Peers.MenuItemAutomationPeer> obiektu. | Brak. |
| **Nowe interfejsy i zestawu** | Aby włączyć nowe funkcje automatyzacji interfejsu użytkownika, następujące interfejsy zostały dodane:<br><br>* <xref:System.Windows.Automation.Provider.IItemContainerProvider><br>* <xref:System.Windows.Automation.Provider.ISynchronizedInputProvider><br>* <xref:System.Windows.Automation.Provider.IVirtualizedItemProvider> | Wszelkie projektu, który tworzy elementów równorzędnych automatyzacji WPF należy dodać jawnego odwołania do UIAutomationProvider.dll. |
| **Kciuki** | <xref:System.Windows.Automation.Peers.ThumbAutomationPeer.GetClassNameCore%2A> Metoda zwróci wartość, a nie wartość null. W związku z tym określa formanty, takie jak <xref:System.Windows.Controls.GridSplitter> który dziedziczyć <xref:System.Windows.Controls.Primitives.Thumb> klasy będzie podlegać nazwę automatyzacji interfejsu użytkownika. | Brak. |
| **Zwirtualizowane elementy** | Aby zwiększyć wydajność, <xref:System.Windows.Automation.Peers.UIElementAutomationPeer.GetChildrenCore%2A> metoda zwraca tylko podrzędnych obiektów, które są rzeczywiście w drzewie wizualnym, zamiast wszystkich obiektów podrzędnych, niezależnie od tego, czy są one zwirtualizowanych. | Użyj <xref:System.Windows.Automation.ItemContainerPattern> do wykonywania iteracji wszystkich elementów <xref:System.Windows.Automation.Peers.ItemsControlAutomationPeer>. |

### <a name="xaml"></a>XAML

Przestrzenie nazw: <xref:System.Windows>, <xref:System.Windows.Controls>, <xref:System.Windows.Data>, <xref:System.Windows.Input>, <xref:System.Windows.Markup>; zestawów: PresentationFramework (w PresentationFramework.dll), PresentationCore (w plików PresentationCore.dll), WindowsBase (w WindowsBase.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 | Zalecanych zmianach |
| ------- | ------------------------ | ------------------- |
| **Rozszerzenie znaczników** | WPF teraz prawidłowo zawsze używa wartości z <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A> metody zamiast zwracać <xref:System.Windows.Markup.MarkupExtension> obiektu w niektórych przypadkach, gdy rozszerzenie znaczników jest używany do ustawiania właściwości lub utworzyć nowy element w kolekcji. Rozszerzenie znacznika może zwrócić się w niektórych przypadkach. | Jeśli aplikacja uzyskuje dostęp do zasobu, który zwrócił <xref:System.Windows.Markup.MarkupExtension> obiektów w starszych wersjach, odwołuje się do obiektu, który jest zwracany z <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, zamiast <xref:System.Windows.Markup.MarkupExtension> obiektu. |
| **Podczas analizowania atrybutów** | Atrybuty w języku XAML teraz mogą mieć tylko jedną kropkę. Na przykład poniżej przedstawiono prawidłowe:<br><br>`<Button Background="Red"/>` (nie kropki)<br><br>`<Button Button.Background = "Red"/>` (jedną kropkę)<br><br>Następujące nie jest już prawidłowy:<br><br>`<Button Control.Button.Background = "Red"/>` (więcej niż jedną kropkę) | Prawidłowe atrybuty XAML mające więcej niż jeden okres. |

## <a name="xml"></a>XML

Wiersze w tej tabeli opisano ulepszenia funkcji, które poprzednio ograniczenia lub inne problemy.

### <a name="schema-and-transforms"></a>Schemat i przekształcenia

Przestrzenie nazw: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; zestawów: System.Xml (w System.Xml.dll), System.Xml.Linq (w System.Xml.Linq.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Schematy Chameleon** | Aby zapobiec uszkodzeniu danych, schematów chameleon są teraz sklonować poprawnie, gdy są one dołączone do wielu schematach.<br><br>Schematy Chameleon są schematów, które nie mają docelowego obszaru nazw, a umieszczone w innym pliku XSD, podejmują na docelowy obszar nazw importowania schematu. Często służą one do dołączenia popularne typy do schematu. |
| **Identyfikator funkcji** | Przekształcenie XSLT [identyfikator funkcji](/sql/xquery/functions-on-sequences-id) teraz zwraca poprawną wartość zamiast wartości null w przypadku <xref:System.Xml.XmlReader> obiekt jest przekazywany do XLST.<br><br>Jeśli użytkownik utworzył <xref:System.Xml.XmlReader> obiektu ze składnika LINQ do XML klasy przy użyciu <xref:System.Xml.Linq.XNode.CreateReader%2A> — metoda i to <xref:System.Xml.XmlReader> obiekt został przekazany do przekształcenia XSLT, wszystkie wystąpienia `id` funkcja XSLT wcześniej zwróciła wartość null. To nie jest dozwolone wartości zwracanej przez `id` funkcji. |
| **Atrybut Namespace** | Aby zapobiec uszkodzeniu danych <xref:System.Xml.XPath.XPathNavigator> obiektu teraz zwraca nazwę lokalnego `x:xmlns` atrybutu nieprawidłowo. |
| **Deklaracje Namespace** | <xref:System.Xml.XmlReader> Obiektu podrzędnego drzewa nie tworzy już deklaracji zduplikowanych nazw w obrębie jednego elementu XML. |
| **Sprawdzanie poprawności schematu** | Aby zapobiec sprawdzanie poprawności schematu błędne, <xref:System.Xml.Schema.XmlSchemaSet> klasa umożliwia schematów XSD ma być kompilowana poprawnej i spójnej. Schematy te mogą obejmować inne schematy; na przykład `A.xsd` mogą obejmować `B.xsd`, który może obejmować `C.xsd`. Kompilowanie jedno z tych przyczyn ten wykres zależności, które można przechodzić. |
| **Funkcje skryptu** | [Funkcja dostępna funkcja](https://msdn.microsoft.com/library/ms256124(v=vs.110).aspx) już niepoprawnie zwraca `false` kiedy funkcja jest rzeczywiście dostępny. |
| **Identyfikatory URI** | <xref:System.Xml.Linq.XElement.Load%2A> Metoda zwraca teraz poprawne BaseURI w zapytaniach LINQ. |

### <a name="validation"></a>Walidacja

Przestrzenie nazw: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; zestawów: System.Xml (w System.Xml.dll), System.Xml.Linq (w System.Xml.Linq.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Programy rozpoznawania nazw Namespace** | <xref:System.Xml.XmlReader.ReadContentAs%2A> — Metoda nie jest już ignoruje <xref:System.Xml.IXmlNamespaceResolver> przekazywania rozpoznawania nazw.<br><br>W poprzednich wersjach programu rozpoznawania nazw określonego obszaru nazw został zignorowany, a <xref:System.Xml.XmlReader> zamiast niego użyto. |
| **Biały znak** | Aby zapobiec utracie danych podczas tworzenia czytnika <xref:System.Xml.XmlReader.Create%2A> — metoda nie jest już odrzuca znaczący biały znak.<br><br>Sprawdzanie poprawności kodu XML rozpoznaje tryb zawartością mieszaną, gdy tekst może być mieszany — z znaczników XML. W trybie mieszanym wszystkie biały znak jest znacząca i powinny być zgłaszane. |

### <a name="writing"></a>Zapisywanie

Przestrzenie nazw: <xref:System.Xml.Linq>; <xref:System.Xml.Schema>, <xref:System.Xml.XPath>; zestawów: System.Xml (w System.Xml.dll), System.Xml.Linq (w System.Xml.Linq.dll)

| Funkcja | Różnice z 3.5 z dodatkiem SP1 |
| ------- | ------------------------ |
| **Odwołania do jednostek** | Aby zapobiec uszkodzeniu danych, odwołania do jednostek nie są entitized dwa razy w atrybutów XML.<br><br>Jeśli użytkownik podjął próbę zapisu jednostki do `xmlns` atrybutu lub `xml:lang` lub `xml:space` atrybutu przy użyciu <xref:System.Xml.XmlWriter.WriteEntityRef%2A> metodę, obiekt został entitized dwa razy w danych wyjściowych, w związku z tym uszkodzenia danych. |
| **Obsługę nowego wiersza** | Aby zapobiec uszkodzeniu danych <xref:System.Xml.XmlWriter> obiekty względem <xref:System.Xml.NewLineHandling> opcji. |

## <a name="see-also"></a>Zobacz także

### <a name="reference"></a>Tematy pomocy

[Nowe typy i składniki w programie .NET Framework 4](https://msdn.microsoft.com/library/ff641764(v=vs.100).aspx)

### <a name="concepts"></a>Pojęcia

[Przewodnik po migracji do programu .NET Framework 4](https://msdn.microsoft.com/library/ff657133(v=vs.100).aspx)   
[Co to jest nowe w programie .NET Framework 4](https://msdn.microsoft.com/library/ms171868(v=vs.100).aspx)   
[Zgodność wersji w programie .NET Framework](../../../docs/framework/migration-guide/version-compatibility.md)   
[Migracja rozwiązań Office do programu .NET Framework 4](https://msdn.microsoft.com/library/ee207231.aspx)

### <a name="other-resources"></a>Inne zasoby

[Co to jest przestarzała w programie .NET Framework](https://msdn.microsoft.com/library/ee461502(v=vs.110).aspx)   
[Problemy przy migracji aplikacji programu .NET Framework 4: w wersji Beta 2 do wersji RTM](http://go.microsoft.com/fwlink/?LinkId=191505)
