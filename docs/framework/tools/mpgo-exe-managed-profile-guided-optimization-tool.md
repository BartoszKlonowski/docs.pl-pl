---
title: Mpgo.exe (narzędzie optymalizacji sterowania zarządzanym profilem)
description: Użyj Mpgo.exe, narzędzia do optymalizacji z przewodnikiem zarządzanym profilem. Za pomocą tego narzędzia Optymalizuj zestawy obrazów natywnych utworzone przez generator obrazu natywnego (Ngen.exe).
ms.date: 03/30/2017
helpviewer_keywords:
- Mpgo.exe
- training scenarios, generating profiles with
- Managed Profile Guided Optimization Tool
- Ngen.exe
- Ngen.exe, profilers and native images
ms.assetid: f6976502-a000-4fbe-aaf5-a7aab9ce4ec2
ms.openlocfilehash: 18a379447e1d5ba97090eca299c59cc161c7be71
ms.sourcegitcommit: b4f8849c47c1a7145eb26ce68bc9f9976e0dbec3
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/03/2020
ms.locfileid: "87517285"
---
# <a name="mpgoexe-managed-profile-guided-optimization-tool"></a><span data-ttu-id="0dd9c-104">Mpgo.exe (narzędzie optymalizacji sterowania zarządzanym profilem)</span><span class="sxs-lookup"><span data-stu-id="0dd9c-104">Mpgo.exe (Managed Profile Guided Optimization Tool)</span></span>

<span data-ttu-id="0dd9c-105">Zarządzane profilowanie narzędzia do optymalizacji z przewodnikiem (Mpgo.exe) to narzędzie wiersza polecenia, które używa typowych scenariuszy użytkowników końcowych do optymalizowania zestawów obrazów natywnych, które są tworzone przez [Generator obrazu natywnego (Ngen.exe)](ngen-exe-native-image-generator.md).</span><span class="sxs-lookup"><span data-stu-id="0dd9c-105">The Managed Profile Guided Optimization Tool (Mpgo.exe) is a command-line tool that uses common end-user scenarios to optimize the native image assemblies that are created by the [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md).</span></span> <span data-ttu-id="0dd9c-106">To narzędzie umożliwia uruchamianie scenariuszy szkoleniowych, które generują dane profilu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-106">This tool enables you to run training scenarios that generate profile data.</span></span> <span data-ttu-id="0dd9c-107">[Generator obrazu natywnego (Ngen.exe)](ngen-exe-native-image-generator.md) używa tych danych do optymalizowania wygenerowanych zestawów aplikacji obrazu natywnego.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-107">The [Native Image Generator (Ngen.exe)](ngen-exe-native-image-generator.md) uses this data to optimize its generated native image application assemblies.</span></span> <span data-ttu-id="0dd9c-108">Scenariusz szkoleniowy jest próbnym uruchomieniem oczekiwanego użycia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-108">A training scenario is a trial run of an expected use of your application.</span></span> <span data-ttu-id="0dd9c-109">Mpgo.exe jest dostępny w programie Visual Studio Ultimate 2012 i jego nowszych wersjach.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-109">Mpgo.exe is available in Visual Studio Ultimate 2012 and later versions.</span></span> <span data-ttu-id="0dd9c-110">Począwszy od Visual Studio 2013, można także użyć Mpgo.exe do optymalizowania aplikacji ze sklepu Windows 8. x.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-110">Starting with Visual Studio 2013, you can also use Mpgo.exe to optimize Windows 8.x Store apps.</span></span>  
  
<span data-ttu-id="0dd9c-111">Profilowana optymalizacja poprawia czas uruchamiania aplikacji, wykorzystanie pamięci (rozmiar zestawu roboczego) i przepustowość przez zbieranie danych ze scenariuszy szkoleniowych i używanie ich do optymalizowania układu obrazów natywnych.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-111">Profile-guided optimization improves application startup time, memory utilization (working set size), and throughput by gathering data from training scenarios and using it to optimize the layout of native images.</span></span>  
  
<span data-ttu-id="0dd9c-112">Jeśli wystąpią problemy z wydajnością czasu uruchamiania i rozmiarem zestawu roboczego dla zestawów języka pośredniego (IL), zaleca się użyć w pierwszej kolejności Ngen.exe, aby wyeliminować koszty kompilacji JIT oraz umożliwić udostępnianie kodu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-112">When you encounter performance issues with startup time and working set size for Intermediate Language (IL) assemblies, we recommend that you first use Ngen.exe to eliminate just-in-time (JIT) compilation costs and to facilitate code sharing.</span></span> <span data-ttu-id="0dd9c-113">Jeśli potrzebujesz dodatkowych usprawnień, możesz użyć Mpgo.exe do dalszej optymalizacji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-113">If you need additional improvements, you can then use Mpgo.exe to further optimize your application.</span></span> <span data-ttu-id="0dd9c-114">Dane dotyczące wydajności z zestawów niezoptymalizowanego obrazu natywnego można zastosować jako podstawę do oszacowania wzrostu wydajności.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-114">You can use the performance data from the un-optimized native image assemblies as a baseline to evaluate the performance gains.</span></span> <span data-ttu-id="0dd9c-115">Użycie Mpgo.exe może spowodować przyspieszenie zimnego uruchamiania i zmniejszenie rozmiaru zestawu roboczego.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-115">Using Mpgo.exe may result in faster cold startup times and a smaller working set size.</span></span> <span data-ttu-id="0dd9c-116">Mpgo.exe dodaje informacje do zestawów IL, których Ngen.exe używa do tworzenia zoptymalizowanych zestawów obrazu natywnego.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-116">Mpgo.exe adds information to IL assemblies that Ngen.exe uses to create optimized native image assemblies.</span></span> <span data-ttu-id="0dd9c-117">Aby uzyskać więcej informacji, zobacz wpis [Poprawianie wydajności uruchamiania aplikacji klasycznych](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) w blogu platformy .NET.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-117">For more information, see the entry [Improving Launch Performance for your Desktop Applications](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/) in the .NET blog.</span></span>  
  
<span data-ttu-id="0dd9c-118">To narzędzie jest instalowane automatycznie z programem Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-118">This tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="0dd9c-119">Aby uruchomić narzędzie, użyj wiersz polecenia dla deweloperów dla programu Visual Studio (lub wiersza polecenia programu Visual Studio w systemie Windows 7) z poświadczeniami administratora, a następnie wpisz następujące polecenie w wierszu polecenia.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-119">To run the tool, use the Developer Command Prompt for Visual Studio (or the Visual Studio Command Prompt in Windows 7) with administrator credentials, and type the following at the command prompt.</span></span> <span data-ttu-id="0dd9c-120">Aby uzyskać więcej informacji, zobacz [wiersza polecenia](developer-command-prompt-for-vs.md).</span><span class="sxs-lookup"><span data-stu-id="0dd9c-120">For more information, see [Command Prompts](developer-command-prompt-for-vs.md).</span></span>  
  
<span data-ttu-id="0dd9c-121">W przypadku aplikacji klasycznych:</span><span class="sxs-lookup"><span data-stu-id="0dd9c-121">For desktop apps:</span></span>  
  
```console  
mpgo –Scenario <command> [-Import <directory>] –AssemblyList <assembly1>  <assembly2> ... -OutDir <directory> [options]  
```  
  
<span data-ttu-id="0dd9c-122">W przypadku aplikacji ze sklepu Windows 8. x:</span><span class="sxs-lookup"><span data-stu-id="0dd9c-122">For Windows 8.x Store apps:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="0dd9c-123">Składnia</span><span class="sxs-lookup"><span data-stu-id="0dd9c-123">Syntax</span></span>  
  
```console  
mpgo –Scenario <packageName> -AppID <appId> -Timeout <seconds>  
```  
  
## <a name="parameters"></a><span data-ttu-id="0dd9c-124">Parametry</span><span class="sxs-lookup"><span data-stu-id="0dd9c-124">Parameters</span></span>  
 <span data-ttu-id="0dd9c-125">We wszystkich argumentach programu Mpgo.exe nie jest rozróżniana wielkość liter.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-125">All arguments to Mpgo.exe are case-insensitive.</span></span> <span data-ttu-id="0dd9c-126">Polecenia są poprzedzone kreską.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-126">Commands are prefixed with a dash.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="0dd9c-127">Możesz użyć albo `–Scenario` `–Import` jako wymaganego polecenia, ale nie obu jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-127">You can use either `–Scenario` or `–Import` as a required command, but not both.</span></span> <span data-ttu-id="0dd9c-128">Jeśli określisz opcję, żaden z wymaganych parametrów nie jest używany `–Reset` .</span><span class="sxs-lookup"><span data-stu-id="0dd9c-128">None of the required parameters are used if you specify the `–Reset` option.</span></span>

|<span data-ttu-id="0dd9c-129">Wymagany parametr</span><span class="sxs-lookup"><span data-stu-id="0dd9c-129">Required parameter</span></span>|<span data-ttu-id="0dd9c-130">Opis</span><span class="sxs-lookup"><span data-stu-id="0dd9c-130">Description</span></span>|
|------------------------|-----------------|
|<span data-ttu-id="0dd9c-131">`-Scenario` \<*command*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-131">`-Scenario` \<*command*></span></span><br /><br /> <span data-ttu-id="0dd9c-132">—lub—</span><span class="sxs-lookup"><span data-stu-id="0dd9c-132">—or—</span></span><br /><br /> <span data-ttu-id="0dd9c-133">`-Scenario` \<*packageName*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-133">`-Scenario` \<*packageName*></span></span><br /><br /> <span data-ttu-id="0dd9c-134">-lub-</span><span class="sxs-lookup"><span data-stu-id="0dd9c-134">-or-</span></span><br /><br /> <span data-ttu-id="0dd9c-135">`-Import` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-135">`-Import` \<*directory*></span></span>|<span data-ttu-id="0dd9c-136">W przypadku aplikacji klasycznych Użyj `–Scenario` polecenia, aby określić polecenie uruchomienia aplikacji, którą chcesz zoptymalizować, w tym wszystkie argumenty wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-136">For desktop apps, use `–Scenario` to specify the command to run the application you want to optimize, including any command-line arguments.</span></span> <span data-ttu-id="0dd9c-137">Użyj trzech zestawów podwójnych cudzysłowów wokół *polecenia* , jeśli określa ścieżkę obejmującą spacje; na przykład: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"` .</span><span class="sxs-lookup"><span data-stu-id="0dd9c-137">Use three sets of double quotation marks around *command* if it specifies a path that includes spaces; for example: `mpgo.exe -scenario """C:\My App\myapp.exe""" -assemblylist """C:\My App\myapp.exe""" -outdir "C:\optimized files"`.</span></span> <span data-ttu-id="0dd9c-138">Nie należy używać podwójnych cudzysłowów; nie będą one działały prawidłowo, jeśli *polecenie* zawiera spacje.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-138">Do not use double quotation marks; they will not work correctly if *command* includes spaces.</span></span><br /><br /> <span data-ttu-id="0dd9c-139">-lub-</span><span class="sxs-lookup"><span data-stu-id="0dd9c-139">-or-</span></span><br /><br /> <span data-ttu-id="0dd9c-140">W przypadku aplikacji ze sklepu Windows 8. x Użyj, `–Scenario` Aby określić pakiet, dla którego chcesz wygenerować informacje o profilu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-140">For Windows 8.x Store apps, use `–Scenario` to specify the package that you want to generate profile information for.</span></span> <span data-ttu-id="0dd9c-141">Jeśli określisz nazwę wyświetlaną pakietu lub nazwę rodziny pakietów zamiast pełnej nazwy pakietu, Mpgo.exe wybierze pakiet, który pasuje do podanej nazwy, pod warunkiem, że istnieje tylko jedno dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-141">If you specify the package display name or the package family name instead of the full package name, Mpgo.exe will select the package that matches the name you provided if there is only one match.</span></span> <span data-ttu-id="0dd9c-142">Jeśli kilka pakietów odpowiada określonej nazwie, Mpgo.exe wyświetli monit o wybrania pakietu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-142">If multiple packages match the specified name, Mpgo.exe will prompt you to choose a package.</span></span><br /><br /> <span data-ttu-id="0dd9c-143">—lub—</span><span class="sxs-lookup"><span data-stu-id="0dd9c-143">—or—</span></span><br /><br /> <span data-ttu-id="0dd9c-144">Użyj `-Import` , aby określić, że dane optymalizacji z wcześniej zoptymalizowanych zestawów powinny być używane do optymalizowania zestawów w programie `-AssemblyList` .</span><span class="sxs-lookup"><span data-stu-id="0dd9c-144">Use `-Import` to specify that optimization data from previously optimized assemblies should be used to optimize the assemblies in `-AssemblyList`.</span></span> <span data-ttu-id="0dd9c-145">*katalog* określa katalog, który zawiera poprzednio zoptymalizowane pliki.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-145">*directory* specifies the directory that contains the previously optimized files.</span></span> <span data-ttu-id="0dd9c-146">Zestawy określone w `–AssemblyList` lub `–AssemblyListFile` są nowymi wersjami zestawów, które mają zostać zoptymalizowane przy użyciu danych z zaimportowanych plików.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-146">The assemblies specified in `–AssemblyList` or `–AssemblyListFile` are the new versions of the assemblies to be optimized using the data from the imported files.</span></span> <span data-ttu-id="0dd9c-147">Używanie danych optymalizacji ze starszych wersji zestawów pozwala zoptymalizować nowsze wersje zestawów bez ponownego uruchamiania scenariusza.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-147">Using optimization data from older version of assemblies enables you to optimize newer versions of assemblies without re-running the scenario.</span></span>  <span data-ttu-id="0dd9c-148">Jednakże, jeśli zaimportowany i docelowy zestaw zawierają znacznie różniący się kod, dane optymalizacji będą nieskuteczne.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-148">However, if the imported and target assemblies include significantly different code, the optimization data will be ineffective.</span></span> <span data-ttu-id="0dd9c-149">Nazwy zestawów określone w `–AssemblyList` lub `–AssemblyListFile` muszą znajdować się w katalogu określonym przez `–Import` *katalog*.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-149">The assembly names specified in `–AssemblyList` or `–AssemblyListFile` must be present in the directory specified by `–Import`*directory*.</span></span> <span data-ttu-id="0dd9c-150">Użyj trzech zestawów podwójnych cudzysłowów wokół *katalogu* , jeśli określa ścieżkę obejmującą spacje.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-150">Use three sets of double quotation marks around *directory* if it specifies a path that includes spaces.</span></span><br /><br /> <span data-ttu-id="0dd9c-151">Należy określić albo `–Scenario` `–Import` , ale nie oba parametry.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-151">You must specify either `–Scenario` or `–Import`, but not both parameters.</span></span>|
|<span data-ttu-id="0dd9c-152">`-OutDir` \<*directory*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-152">`-OutDir` \<*directory*></span></span>|<span data-ttu-id="0dd9c-153">Katalog, w którym będą umieszczone zoptymalizowane zestawy.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-153">The directory in which to place the optimized assemblies.</span></span> <span data-ttu-id="0dd9c-154">Jeśli zestaw już istnieje w folderze katalogu wyjściowego, tworzona jest nowa kopia, a do jego nazwy jest dołączany numer indeksu. na przykład: *assemblyname*-1.exe.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-154">If an assembly already exists in the output directory folder, a new copy is created and an index number is appended to its name; for example: *assemblyname*-1.exe.</span></span> <span data-ttu-id="0dd9c-155">Użyj podwójnych cudzysłowów wokół *katalogu* , jeśli określa ścieżkę zawierającą spacje.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-155">Use double quotation marks around *directory* if it specifies a path that contains spaces.</span></span>|
|<span data-ttu-id="0dd9c-156">`-AssemblyList` \<*assembly1 assembly2 ...*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-156">`-AssemblyList` \<*assembly1 assembly2 ...*></span></span><br /><br /> <span data-ttu-id="0dd9c-157">—lub—</span><span class="sxs-lookup"><span data-stu-id="0dd9c-157">—or—</span></span><br /><br /> <span data-ttu-id="0dd9c-158">`-AssemblyListFile` \<*file*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-158">`-AssemblyListFile` \<*file*></span></span>|<span data-ttu-id="0dd9c-159">Lista zestawów (w tym pliki exe i dll) rozdzielonych spacjami, dla których chcesz zbierać informacje profilowe.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-159">A list of assemblies (including .exe and .dll files), separated by spaces, that you want collect profile information about.</span></span> <span data-ttu-id="0dd9c-160">Możesz określić `C:\Dir\*.dll` lub `*.dll` wybrać wszystkie zestawy w wydzielonym lub bieżącym katalogu roboczym.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-160">You can specify `C:\Dir\*.dll` or `*.dll` to select all the assemblies in the designated or current working directory.</span></span> <span data-ttu-id="0dd9c-161">Zobacz sekcję Spostrzeżenia, aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-161">See the Remarks section for more information.</span></span><br /><br /> <span data-ttu-id="0dd9c-162">—lub—</span><span class="sxs-lookup"><span data-stu-id="0dd9c-162">—or—</span></span><br /><br /> <span data-ttu-id="0dd9c-163">Plik tekstowy, który zawiera listę zestawów, dla których chcesz zebrać informacje o profilu. W każdym wierszu wymieniony jest jeden zestaw.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-163">A text file that contains the list of assemblies you want to collect profile information about, listed one assembly per line.</span></span> <span data-ttu-id="0dd9c-164">Jeśli nazwa zestawu rozpoczyna się łącznikiem (-), użyj listy plików zestawów lub zmień nazwę zestawu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-164">If an assembly name begins with a hyphen (-), use an assembly file list or rename the assembly.</span></span>|
|<span data-ttu-id="0dd9c-165">`-AppID` \<*appId*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-165">`-AppID` \<*appId*></span></span>|<span data-ttu-id="0dd9c-166">Identyfikator aplikacji w określonym pakiecie.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-166">The ID of the application in the specified package.</span></span> <span data-ttu-id="0dd9c-167">Jeśli używasz symbolu wieloznacznego ( \* ), Mpgo.exe spróbuje wyliczyć identyfikatory aplikacji w pakiecie i nastąpi powrót do \<*package_family_name*> ! Aplikacja w przypadku niepowodzenia.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-167">If you use the wildcard (\*), Mpgo.exe will try to enumerate the AppIDs in the package and will fall back to \<*package_family_name*>!App if it fails.</span></span> <span data-ttu-id="0dd9c-168">Jeżeli określono ciąg, który jest poprzedzony znakiem wykrzyknika (!), Mpgo.exe będzie łączyć nazwę rodziny pakietu z dostarczonym argumentem.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-168">If you specify a string that is prefixed by an exclamation point (!), Mpgo.exe will concatenate the package family name with the argument provided.</span></span>|
|<span data-ttu-id="0dd9c-169">`-Timeout` \<*seconds*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-169">`-Timeout` \<*seconds*></span></span>|<span data-ttu-id="0dd9c-170">Ilość czasu zezwalająca na uruchomienie aplikacji ze sklepu Windows 8. x przed zakończeniem działania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-170">The amount of time to allow the Windows 8.x Store app to run before the app exits.</span></span>|

|<span data-ttu-id="0dd9c-171">Parametr opcjonalny</span><span class="sxs-lookup"><span data-stu-id="0dd9c-171">Optional parameter</span></span>|<span data-ttu-id="0dd9c-172">Opis</span><span class="sxs-lookup"><span data-stu-id="0dd9c-172">Description</span></span>|
|------------------------|-----------------|
|`-64bit`|<span data-ttu-id="0dd9c-173">Instrumentuje zestawy do systemów 64-bitowych.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-173">Instruments the assemblies for 64-bit systems.</span></span>  <span data-ttu-id="0dd9c-174">Nawet jeśli zestaw jest zadeklarowany jako 64-bitowy, należy określić ten parametr dla zestawów 64-bitowych.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-174">You must specify this parameter for 64-bit assemblies, even if your assembly declares itself as 64 bit.</span></span>|
|<span data-ttu-id="0dd9c-175">`-ExeConfig` \<*filename*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-175">`-ExeConfig` \<*filename*></span></span>|<span data-ttu-id="0dd9c-176">Określa plik konfiguracji używany przez scenariusz do określenia informacje o wersji i module ładującym.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-176">Specifies the configuration file that your scenario uses to provide version and loader information.</span></span>|
|`-f`|<span data-ttu-id="0dd9c-177">Wymusza umieszczenie danych profilu w zestawie binarnym, nawet jeśli jest podpisany.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-177">Forces the inclusion of the profile data in a binary assembly, even if it's signed.</span></span>  <span data-ttu-id="0dd9c-178">Jeśli zestaw jest podpisany, musi zostać ponownie podpisany; w przeciwnym razie zestawu nie będzie można załadować i uruchomić.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-178">If the assembly is signed, it must be re-signed; otherwise, the assembly will fail to load and run.</span></span>|
|`-Reset`|<span data-ttu-id="0dd9c-179">Resetuje środowisko, aby była pewność, że przerwane sesje profilowania nie mają wpływu na swoje zestawy, a następnie kończy działanie.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-179">Resets the environment to make certain that an aborted profiling session doesn't affect your assemblies, and then quits.</span></span> <span data-ttu-id="0dd9c-180">Środowisko jest resetowane domyślnie przed i po sesji profilowania.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-180">The environment is reset by default before and after a profiling session.</span></span>|
|<span data-ttu-id="0dd9c-181">`-Timeout` \<*time in seconds*></span><span class="sxs-lookup"><span data-stu-id="0dd9c-181">`-Timeout` \<*time in seconds*></span></span>|<span data-ttu-id="0dd9c-182">Określa czas profilowania w sekundach.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-182">Specifies the profiling duration in seconds.</span></span> <span data-ttu-id="0dd9c-183">Użyj wartości, która jest nieco większa niż obserwowane czasy uruchamiania aplikacji GUI.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-183">Use a value that is slightly more than your observed startup times for GUI applications.</span></span> <span data-ttu-id="0dd9c-184">Na koniec limitu czasu dane profilu są rejestrowana, mimo że aplikacja kontynuuje działanie.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-184">At the end of the time-out period, the profile data is recorded although the application continues to run.</span></span> <span data-ttu-id="0dd9c-185">Jeśli ta opcja nie zostanie ustawiona, profilowanie będzie kontynuowane do czasu zamknięcia aplikacji, w czasie którym dane będą rejestrowane.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-185">If you don't set this option, profiling will continue until application shutdown, at which time the data will be recorded.</span></span>|
|`-LeaveNativeImages`|<span data-ttu-id="0dd9c-186">Określa, że zinstrumentowane obrazy natywne nie powinny zostać usunięte po uruchomieniu tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-186">Specifies that the instrumented native images shouldn't be removed after running the scenario.</span></span> <span data-ttu-id="0dd9c-187">Ta opcja jest używana przede wszystkim, gdy uzyskujesz aplikację, którą określono dla działającego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-187">This option is primarily used when you're getting the application that you specified for the scenario running.</span></span> <span data-ttu-id="0dd9c-188">Uniemożliwi to odtworzenie obrazów natywnych dla kolejnych uruchomień Mpgo.exe.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-188">It will prevent the recreation of native images for subsequent runs of Mpgo.exe.</span></span> <span data-ttu-id="0dd9c-189">W przypadku użycia tej opcji opcję w pamięci podręcznej po zakończeniu działania aplikacji mogą znajdować się oddzielone obrazy natywne.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-189">When you have finished running your application, there may be orphaned native images in the cache if you specify this option.</span></span> <span data-ttu-id="0dd9c-190">W takim przypadku należy uruchomić Mpgo.exe z tym samym scenariuszem i listą zestawów i użyć `–RemoveNativeImages` parametru, aby usunąć te obrazy natywne.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-190">In this case, run Mpgo.exe with the same scenario and assembly list and use the `–RemoveNativeImages` parameter to remove these native images.</span></span>|
|`-RemoveNativeImages`|<span data-ttu-id="0dd9c-191">Czyści z przebiegu, gdzie `–LeaveNativeImages` został określony.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-191">Cleans up from a run where `–LeaveNativeImages` was specified.</span></span> <span data-ttu-id="0dd9c-192">Jeśli określisz `-RemoveNativeImages` , Mpgo.exe ignoruje wszelkie argumenty z wyjątkiem `-64bit` i i `–AssemblyList` opuszcza po usunięciu wszystkich obrazów natywnych Instrumentacji.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-192">If you specify `-RemoveNativeImages`, Mpgo.exe ignores any arguments except `-64bit` and `–AssemblyList`, and exits after removing all instrumented native images.</span></span>|

## <a name="remarks"></a><span data-ttu-id="0dd9c-193">Uwagi</span><span class="sxs-lookup"><span data-stu-id="0dd9c-193">Remarks</span></span>
 <span data-ttu-id="0dd9c-194">`–AssemblyList` `- AssemblyListFile` W wierszu polecenia można wielokrotnie używać obu tych wartości.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-194">You can use both `–AssemblyList` and `- AssemblyListFile` multiple times on the command line.</span></span>

 <span data-ttu-id="0dd9c-195">Jeśli nie określisz pełnych ścieżek podczas określania zestawów, Mpgo.exe będzie ich szukać w bieżącym katalogu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-195">If you do not specify full path names when specifying assemblies, Mpgo.exe looks in the current directory.</span></span> <span data-ttu-id="0dd9c-196">Jeśli określona ścieżka jest niepoprawna, Mpgo.exe wyświetla komunikat o błędzie, ale kontynuuje generowanie danych dla innych zestawów.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-196">If you specify an incorrect path, Mpgo.exe displays an error message but continues to generate data for other assemblies.</span></span> <span data-ttu-id="0dd9c-197">Jeśli określisz zestaw, który nie jest ładowany podczas scenariusza szkoleniowego, żadne dane szkoleniowe nie są generowane dla tego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-197">If you specify an assembly that is not loaded during the training scenario, no training data is generated for that assembly.</span></span>

 <span data-ttu-id="0dd9c-198">Jeśli zestaw na liście jest w globalnej pamięci podręcznej zestawów, nie będzie można zaktualizować go, aby zawierał informacje o profilu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-198">If an assembly in the list is in the global assembly cache, it will not be updated to contain the profile information.</span></span>  <span data-ttu-id="0dd9c-199">Usuń go z globalnej pamięci podręcznej zestawów, aby zebrać informacje o profilu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-199">Remove it from the global assembly cache to collect profile information.</span></span>

 <span data-ttu-id="0dd9c-200">Użycie Ngen.exe i Mpgo.exe jest zalecane tylko dla dużych zarządzanych aplikacji, ponieważ korzyści wynikające ze wstępnie skompilowanym obrazów natywnych zazwyczaj są widoczne tylko wtedy, gdy eliminuje dużą część kompilacji JIT w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-200">The use of Ngen.exe and Mpgo.exe is recommended only for large managed applications, because the benefit of precompiled native images is typically seen only when it eliminates significant JIT compilation at run time.</span></span> <span data-ttu-id="0dd9c-201">Uruchamianie Mpgo.exe w aplikacjach w stylu "Hello world", które nie działają w znacznym stopniu, nie zapewnia żadnych korzyści i Mpgo.exe może nawet nie być możliwe zebranie danych profilu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-201">Running Mpgo.exe on "Hello World" style applications that aren’t working-set intensive will not provide any benefits, and Mpgo.exe may even fail to gather profile data.</span></span>

> [!NOTE]
> <span data-ttu-id="0dd9c-202">Nie zaleca się stosowania Ngen.exe i Mpgo.exe w odniesieniu do aplikacji ASP.NET i usług Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="0dd9c-202">Ngen.exe and Mpgo.exe are not recommended for ASP.NET applications and Windows Communication Foundation (WCF) services.</span></span>  
  
## <a name="to-use-mpgoexe"></a><span data-ttu-id="0dd9c-203">Aby użyć Mpgo.exe</span><span class="sxs-lookup"><span data-stu-id="0dd9c-203">To Use Mpgo.exe</span></span>  
  
1. <span data-ttu-id="0dd9c-204">Użyj komputera, na którym zainstalowano Visual Studio Ultimate 2012 i aplikację.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-204">Use a computer that has the Visual Studio Ultimate 2012 and your application installed.</span></span>  
  
2. <span data-ttu-id="0dd9c-205">Uruchom Mpgo.exe jako administrator z wymaganymi parametrami.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-205">Run Mpgo.exe as an administrator with the necessary parameters.</span></span>  <span data-ttu-id="0dd9c-206">W następnej sekcji znajdują się przykładowe polecenia.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-206">See the next section for sample commands.</span></span>  
  
     <span data-ttu-id="0dd9c-207">Zoptymalizowane zestawy języka pośredniego (IL) są tworzone w folderze określonym przez `–OutDir` parametr (w przykładach jest to `C:\Optimized` folder).</span><span class="sxs-lookup"><span data-stu-id="0dd9c-207">The optimized intermediate language (IL) assemblies are created in the folder specified by the `–OutDir` parameter (in the examples, this is the `C:\Optimized` folder).</span></span>  
  
3. <span data-ttu-id="0dd9c-208">Zastąp zestawy IL używane na potrzeby Ngen.exe z nowymi zestawami IL zawierającymi informacje o profilu z katalogu określonego przez `–OutDir` .</span><span class="sxs-lookup"><span data-stu-id="0dd9c-208">Replace the IL assemblies you used for Ngen.exe  with the new IL assemblies that contain the profile information from the directory specified by `–OutDir`.</span></span>  
  
4. <span data-ttu-id="0dd9c-209">Instalator aplikacji (przy użyciu obrazów dostarczonych przez Mpgo.exe) zainstaluje zoptymalizowane obrazy natywne.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-209">The application setup (using the images provided by Mpgo.exe) will install optimized native images.</span></span>  
  
## <a name="suggested-workflow"></a><span data-ttu-id="0dd9c-210">Sugerowany przebieg pracy</span><span class="sxs-lookup"><span data-stu-id="0dd9c-210">Suggested Workflow</span></span>  
  
1. <span data-ttu-id="0dd9c-211">Utwórz zestaw zoptymalizowanych zestawów IL przy użyciu Mpgo.exe z `–Scenario` parametrem.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-211">Create a set of optimized IL assemblies by using Mpgo.exe with the `–Scenario` parameter.</span></span>  
  
2. <span data-ttu-id="0dd9c-212">Sprawdź zoptymalizowane zestawy IL w kontroli źródła.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-212">Check the optimized IL assemblies into source control.</span></span>  
  
3. <span data-ttu-id="0dd9c-213">W procesie kompilacji Wywołaj Mpgo.exe z `–Import` parametrem jako krok po kompilacji, aby generować zoptymalizowane obrazy Il do przekazania do Ngen.exe.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-213">In the build process, call Mpgo.exe with the `–Import` parameter as a post-build step to generate optimized IL images to pass to Ngen.exe.</span></span>  
  
 <span data-ttu-id="0dd9c-214">Ten proces daje pewność, że wszystkie zestawy posiadają dane optymalizacji.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-214">This process ensures that all assemblies have optimization data.</span></span> <span data-ttu-id="0dd9c-215">Jeśli ewidencjonujesz zaktualizowane zoptymalizowane zestawy (kroki 1 i 2) częściej, wydajności będą spójniejsze w całym procesie tworzenia produktu.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-215">If you check in updated optimized assemblies (steps 1 and 2) more frequently, the performance numbers will be more consistent throughout product development.</span></span>  
  
## <a name="using-mpgoexe-from-visual-studio"></a><span data-ttu-id="0dd9c-216">Przy użyciu Mpgo.exe z Visual Studio</span><span class="sxs-lookup"><span data-stu-id="0dd9c-216">Using Mpgo.exe from Visual Studio</span></span>  
 <span data-ttu-id="0dd9c-217">Mpgo.exe można uruchomić z programu Visual Studio (Zobacz artykuł [How to: Określanie zdarzeń kompilacji (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) z następującymi ograniczeniami:</span><span class="sxs-lookup"><span data-stu-id="0dd9c-217">You can run Mpgo.exe from Visual Studio (see the article [How to: Specify Build Events (C#)](/visualstudio/ide/how-to-specify-build-events-csharp)) with the following restrictions:</span></span>  
  
- <span data-ttu-id="0dd9c-218">Nie można używać ścieżek w cudzysłowie ze znakami ukośnika na końcu, ponieważ makra Visual Studio również domyślnie używają końcowych ukośników.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-218">You cannot use quoted paths with trailing slash marks, because Visual Studio macros also use trailing slash marks by default.</span></span> <span data-ttu-id="0dd9c-219">(Na przykład `–OutDir "C:\Output Folder\"` jest nieprawidłowy). Aby obejść to ograniczenie, można wyjść z końcowym ukośnikiem.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-219">(For example, `–OutDir "C:\Output Folder\"` is invalid.) To work around this restriction, you can escape the trailing slash.</span></span> <span data-ttu-id="0dd9c-220">(Na przykład użyj `-OutDir "$(OutDir)\"` zamiast tego).</span><span class="sxs-lookup"><span data-stu-id="0dd9c-220">(For example, use `-OutDir "$(OutDir)\"` instead.)</span></span>  
  
- <span data-ttu-id="0dd9c-221">Domyślnie program Mpgo.exe nie znajduje się w ścieżce kompilacji programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-221">By default, Mpgo.exe is not on the Visual Studio build path.</span></span> <span data-ttu-id="0dd9c-222">Możesz dodać ścieżkę do programu Visual Studio lub podać pełną ścieżkę w wierszu polecenia Mpgo.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-222">You must either add the path to Visual Studio or specify the full path on the Mpgo command line.</span></span> <span data-ttu-id="0dd9c-223">Możesz użyć albo `–Scenario` `–Import` parametru w zdarzeniu po kompilacji w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="0dd9c-223">You can use either the `–Scenario` or the `–Import` parameter in the post-build event in Visual Studio.</span></span> <span data-ttu-id="0dd9c-224">Typowym procesem jest jednak użycie `–Scenario` jednego czasu z wiersz polecenia dla deweloperów dla programu Visual Studio, a następnie użycie `–Import` go do zaktualizowania zoptymalizowanych zestawów po każdej kompilacji; na przykład: `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"` .</span><span class="sxs-lookup"><span data-stu-id="0dd9c-224">However, the typical process is to use `–Scenario` one time from a Developer Command Prompt for Visual Studio, and then use `–Import` to update the optimized assemblies after each build; for example:  `"C:\Program Files\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\mpgo.exe" -import "$(OutDir)tmp" -assemblylist "$(TargetPath)" -outdir "$(OutDir)\"`.</span></span>  
  
<a name="samples"></a>
## <a name="examples"></a><span data-ttu-id="0dd9c-225">Przykłady</span><span class="sxs-lookup"><span data-stu-id="0dd9c-225">Examples</span></span>  
 <span data-ttu-id="0dd9c-226">Następujące polecenie Mpgo.exe z wiersz polecenia dla deweloperów dla programu Visual Studio optymalizuje aplikację podatkową:</span><span class="sxs-lookup"><span data-stu-id="0dd9c-226">The following Mpgo.exe command from a Developer Command Prompt for Visual Studio optimizes a tax application:</span></span>  
  
```console  
mpgo –scenario "C:\MyApp\MyTax.exe /params par" –AssemblyList Mytax.dll MyTaxUtil2011.dll –OutDir C:\Optimized –TimeOut 15  
```  
  
 <span data-ttu-id="0dd9c-227">Następujące polecenie Mpgo.exe optymalizuje zdrową aplikację:</span><span class="sxs-lookup"><span data-stu-id="0dd9c-227">The following Mpgo.exe command optimizes a sound application:</span></span>  
  
```console  
mpgo –scenario "C:\MyApp\wav2wma.exe –input song1.wav –output song1.wma" –AssemblyList transcode.dll –OutDir C:\Optimized –TimeOut 15  
```  
  
 <span data-ttu-id="0dd9c-228">Następujące polecenie Mpgo.exe korzysta z danych z zestawów wcześniej zoptymalizowanych do optymalizacji nowszych wersji zestawów:</span><span class="sxs-lookup"><span data-stu-id="0dd9c-228">The following Mpgo.exe command uses data from previously optimized assemblies to optimize newer versions of the assemblies:</span></span>  
  
```console  
mpgo.exe -import "C:\Optimized" -assemblylist "C:\MyApp\MyTax.dll" "C:\MyApp\MyTaxUtil2011.dll" -outdir C:\ReOptimized  
```  
  
## <a name="see-also"></a><span data-ttu-id="0dd9c-229">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="0dd9c-229">See also</span></span>

- [<span data-ttu-id="0dd9c-230">Ngen.exe (Generator obrazu natywnego)</span><span class="sxs-lookup"><span data-stu-id="0dd9c-230">Ngen.exe (Native Image Generator)</span></span>](ngen-exe-native-image-generator.md)
- [<span data-ttu-id="0dd9c-231">Wiersze poleceń</span><span class="sxs-lookup"><span data-stu-id="0dd9c-231">Command Prompts</span></span>](developer-command-prompt-for-vs.md)
- [<span data-ttu-id="0dd9c-232">Poprawianie wydajności uruchamiania aplikacji klasycznych</span><span class="sxs-lookup"><span data-stu-id="0dd9c-232">Improving Launch Performance for your Desktop Applications</span></span>](https://devblogs.microsoft.com/dotnet/improving-launch-performance-for-your-desktop-applications/)
- [<span data-ttu-id="0dd9c-233">Omówienie ulepszeń wydajności w programie .NET 4,5</span><span class="sxs-lookup"><span data-stu-id="0dd9c-233">An Overview of Performance Improvements in .NET 4.5</span></span>](https://docs.microsoft.com/archive/msdn-magazine/2012/april/clr-an-overview-of-performance-improvements-in-net-4-5)
