---
title: "Problemy związane z zabezpieczeniami w emisji odbicia"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- partially trusted code
- emitting dynamic assemblies, security
- reflection emit, security
- reflection emit, partial trust scenarios
- partial trust,emitting dynamic methods
- anonymously hosted dynamic methods [.NET Framework]
- emitting dynamic assemblies,partial trust scenarios
- dynamic assemblies, security
ms.assetid: 0f8bf8fa-b993-478f-87ab-1a1a7976d298
caps.latest.revision: "18"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: d143798c4344b385d954cc64bd63c8f81eb48750
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/21/2017
---
# <a name="security-issues-in-reflection-emit"></a><span data-ttu-id="64f1b-102">Problemy związane z zabezpieczeniami w emisji odbicia</span><span class="sxs-lookup"><span data-stu-id="64f1b-102">Security Issues in Reflection Emit</span></span>
<span data-ttu-id="64f1b-103">[!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] Udostępnia trzy sposoby Emituj Microsoft pośredniego language (MSIL), każdy z własną problemy z zabezpieczeniami:</span><span class="sxs-lookup"><span data-stu-id="64f1b-103">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] provides three ways to emit Microsoft intermediate language (MSIL), each with its own security issues:</span></span>  
  
-   [<span data-ttu-id="64f1b-104">Dynamiczne zestawy</span><span class="sxs-lookup"><span data-stu-id="64f1b-104">Dynamic assemblies</span></span>](#Dynamic_Assemblies)  
  
-   [<span data-ttu-id="64f1b-105">Anonimowo hostowane metody dynamiczne</span><span class="sxs-lookup"><span data-stu-id="64f1b-105">Anonymously hosted dynamic methods</span></span>](#Anonymously_Hosted_Dynamic_Methods)  
  
-   [<span data-ttu-id="64f1b-106">Metody dynamiczne skojarzone z istniejących zestawów</span><span class="sxs-lookup"><span data-stu-id="64f1b-106">Dynamic methods associated with existing assemblies</span></span>](#Dynamic_Methods_Associated_with_Existing_Assemblies)  
  
 <span data-ttu-id="64f1b-107">Niezależnie od sposobu generowania kodu dynamicznych wykonywania wygenerowany kod wymaga wszystkie uprawnienia, które są wymagane przez typy i metody, który korzysta z wygenerowanego kodu.</span><span class="sxs-lookup"><span data-stu-id="64f1b-107">Regardless of the way you generate dynamic code, executing the generated code requires all the permissions that are required by the types and methods the generated code uses.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-108">Uprawnienia, które są wymagane dla odbicia dla kodu i emitowanie kodu zostały zmienione z pomyślne wersje [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="64f1b-108">The permissions that are required for reflecting on code and emitting code have changed with succeeding releases of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span></span> <span data-ttu-id="64f1b-109">Zobacz [informacje o wersji](#Version_Information)w dalszej części tego tematu.</span><span class="sxs-lookup"><span data-stu-id="64f1b-109">See [Version Information](#Version_Information), later in this topic.</span></span>  
  
<a name="Dynamic_Assemblies"></a>   
## <a name="dynamic-assemblies"></a><span data-ttu-id="64f1b-110">Dynamiczne zestawy</span><span class="sxs-lookup"><span data-stu-id="64f1b-110">Dynamic Assemblies</span></span>  
 <span data-ttu-id="64f1b-111">Dynamiczne zestawy są tworzone za pomocą przeciążenia metody <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType> metody.</span><span class="sxs-lookup"><span data-stu-id="64f1b-111">Dynamic assemblies are created by using overloads of the <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="64f1b-112">Większość przeciążenie tej metody nie są używane w [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], z powodu eliminacji zasad zabezpieczeń komputera.</span><span class="sxs-lookup"><span data-stu-id="64f1b-112">Most overloads of this method are deprecated in the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], because of the elimination of machine-wide security policy.</span></span> <span data-ttu-id="64f1b-113">(Zobacz [zmiany zabezpieczeń](../../../docs/framework/security/security-changes.md).) Pozostałe przeciążeń mogą być wykonywane przez kod, niezależnie od poziomu zaufania.</span><span class="sxs-lookup"><span data-stu-id="64f1b-113">(See [Security Changes](../../../docs/framework/security/security-changes.md).) The remaining overloads can be executed by any code, regardless of trust level.</span></span> <span data-ttu-id="64f1b-114">Te przeciążenia można podzielić na dwie grupy: te, które określają listę atrybutów, które mają zastosowanie do zestawu dynamicznego podczas jego tworzenia oraz te, które nie.</span><span class="sxs-lookup"><span data-stu-id="64f1b-114">These overloads fall into two groups: those that specify a list of attributes to apply to the dynamic assembly when it is created, and those that do not.</span></span> <span data-ttu-id="64f1b-115">Jeśli nie określisz modelu przezroczystości dla zestawu, stosując <xref:System.Security.SecurityRulesAttribute> atrybutu podczas tworzenia go modelu przezroczystości jest dziedziczona z zestawu emisji.</span><span class="sxs-lookup"><span data-stu-id="64f1b-115">If you do not specify the transparency model for the assembly, by applying the <xref:System.Security.SecurityRulesAttribute> attribute when you create it, the transparency model is inherited from the emitting assembly.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-116">Atrybuty stosowane do zestawu dynamicznego, po utworzeniu, za pomocą <xref:System.Reflection.Emit.AssemblyBuilder.SetCustomAttribute%2A> metody, nie zostały wprowadzone, dopóki zestawu został zapisany na dysku i ponownie załadowana do pamięci.</span><span class="sxs-lookup"><span data-stu-id="64f1b-116">Attributes that you apply to the dynamic assembly after it is created, by using the <xref:System.Reflection.Emit.AssemblyBuilder.SetCustomAttribute%2A> method, do not take effect until the assembly has been saved to disk and loaded into memory again.</span></span>  
  
 <span data-ttu-id="64f1b-117">Kod w zestawie dynamicznym są dostępne typy widoczne i elementów członkowskich w innych zestawów.</span><span class="sxs-lookup"><span data-stu-id="64f1b-117">Code in a dynamic assembly can access visible types and members in other assemblies.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-118">Zestawy dynamiczne nie należy używać <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> i <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flagi, które umożliwia dynamiczne metody dostępu do niepubliczne typów i członków.</span><span class="sxs-lookup"><span data-stu-id="64f1b-118">Dynamic assemblies do not use the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> and <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flags that allow dynamic methods to access nonpublic types and members.</span></span>  
  
 <span data-ttu-id="64f1b-119">Przejściowa dynamiczne zestawy są tworzone w pamięci i nigdy nie zapisano na dysku, więc niezbędnych nie uprawnienia dostępu do pliku.</span><span class="sxs-lookup"><span data-stu-id="64f1b-119">Transient dynamic assemblies are created in memory and never saved to disk, so they require no file access permissions.</span></span> <span data-ttu-id="64f1b-120">Zapisanie zestawu dynamicznego dysku wymaga <xref:System.Security.Permissions.FileIOPermission> przy użyciu odpowiednich flag.</span><span class="sxs-lookup"><span data-stu-id="64f1b-120">Saving a dynamic assembly to disk requires <xref:System.Security.Permissions.FileIOPermission> with the appropriate flags.</span></span>  
  
### <a name="generating-dynamic-assemblies-from-partially-trusted-code"></a><span data-ttu-id="64f1b-121">Generowanie zestawów dynamicznych pochodzących z częściowo zaufanego kodu</span><span class="sxs-lookup"><span data-stu-id="64f1b-121">Generating Dynamic Assemblies from Partially Trusted Code</span></span>  
 <span data-ttu-id="64f1b-122">Należy wziąć pod uwagę warunki, w których zestaw z uprawnieniami Internet można wygenerować zestawu przejściowego dynamiczne i wykonaj jego kod:</span><span class="sxs-lookup"><span data-stu-id="64f1b-122">Consider the conditions in which an assembly with Internet permissions can generate a transient dynamic assembly and execute its code:</span></span>  
  
-   <span data-ttu-id="64f1b-123">Zestaw dynamiczny używa tylko typy publiczne i elementów członkowskich innych zestawów.</span><span class="sxs-lookup"><span data-stu-id="64f1b-123">The dynamic assembly uses only public types and members of other assemblies.</span></span>  
  
-   <span data-ttu-id="64f1b-124">Uprawnienia wymagane przez te typy i składniki znajdują się w zestawie grant częściowo zaufanym zestawie.</span><span class="sxs-lookup"><span data-stu-id="64f1b-124">The permissions demanded by those types and members are included in the grant set of the partially trusted assembly.</span></span>  
  
-   <span data-ttu-id="64f1b-125">Zestaw nie jest zapisywany na dysku.</span><span class="sxs-lookup"><span data-stu-id="64f1b-125">The assembly is not saved to disk.</span></span>  
  
-   <span data-ttu-id="64f1b-126">Debugowanie symbole nie zostały wygenerowane.</span><span class="sxs-lookup"><span data-stu-id="64f1b-126">Debug symbols are not generated.</span></span> <span data-ttu-id="64f1b-127">(`Internet` i `LocalIntranet` zestawów uprawnień nie ma wystarczających uprawnień.)</span><span class="sxs-lookup"><span data-stu-id="64f1b-127">(`Internet` and `LocalIntranet` permission sets do not include the necessary permissions.)</span></span>  
  
<a name="Anonymously_Hosted_Dynamic_Methods"></a>   
## <a name="anonymously-hosted-dynamic-methods"></a><span data-ttu-id="64f1b-128">Anonimowo hostowane metody dynamiczne</span><span class="sxs-lookup"><span data-stu-id="64f1b-128">Anonymously Hosted Dynamic Methods</span></span>  
 <span data-ttu-id="64f1b-129">Hostowanej anonimowo metody dynamicznej są tworzone za pomocą dwóch <xref:System.Reflection.Emit.DynamicMethod> konstruktorów, które nie określają skojarzony typ lub moduł, <xref:System.Reflection.Emit.DynamicMethod.%23ctor%28System.String%2CSystem.Type%2CSystem.Type%5B%5D%29> i <xref:System.Reflection.Emit.DynamicMethod.%23ctor%28System.String%2CSystem.Type%2CSystem.Type%5B%5D%2CSystem.Boolean%29>.</span><span class="sxs-lookup"><span data-stu-id="64f1b-129">Anonymously hosted dynamic methods are created by using the two <xref:System.Reflection.Emit.DynamicMethod> constructors that do not specify an associated type or module, <xref:System.Reflection.Emit.DynamicMethod.%23ctor%28System.String%2CSystem.Type%2CSystem.Type%5B%5D%29> and <xref:System.Reflection.Emit.DynamicMethod.%23ctor%28System.String%2CSystem.Type%2CSystem.Type%5B%5D%2CSystem.Boolean%29>.</span></span> <span data-ttu-id="64f1b-130">Te konstruktorów umieść metod dynamicznych w zestawie dostarczane przez system, pełni zaufany, przezroczystym poziomie bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="64f1b-130">These constructors place the dynamic methods in a system-provided, fully trusted, security-transparent assembly.</span></span> <span data-ttu-id="64f1b-131">Nie uprawnienia są wymagane, użyć tych konstruktorów lub wyemitować kodu dla metod dynamicznych.</span><span class="sxs-lookup"><span data-stu-id="64f1b-131">No permissions are required to use these constructors or to emit code for the dynamic methods.</span></span>  
  
 <span data-ttu-id="64f1b-132">Zamiast tego podczas tworzenia hostowanej anonimowo metody dynamicznej stosu wywołań są przechwytywane.</span><span class="sxs-lookup"><span data-stu-id="64f1b-132">Instead, when an anonymously hosted dynamic method is created, the call stack is captured.</span></span> <span data-ttu-id="64f1b-133">Metoda jest tworzony, żądania kontroli zabezpieczeń są wprowadzane na stosie wywołań przechwycony.</span><span class="sxs-lookup"><span data-stu-id="64f1b-133">When the method is constructed, security demands are made against the captured call stack.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-134">Koncepcyjnie żądania są wprowadzane podczas konstruowania metody.</span><span class="sxs-lookup"><span data-stu-id="64f1b-134">Conceptually, demands are made during the construction of the method.</span></span> <span data-ttu-id="64f1b-135">Oznacza to wymagań można się jak jest emitowany każda instrukcja MSIL.</span><span class="sxs-lookup"><span data-stu-id="64f1b-135">That is, demands could be made as each MSIL instruction is emitted.</span></span> <span data-ttu-id="64f1b-136">W bieżącej implementacji wszystkich potrzeb są wprowadzane podczas <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A?displayProperty=nameWithType> metoda jest wywoływana lub po wywołaniu kompilatora just-in-time (JIT), jeśli metoda jest wywoływana bez wywoływania elementu <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A>.</span><span class="sxs-lookup"><span data-stu-id="64f1b-136">In the current implementation, all demands are made when the <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A?displayProperty=nameWithType> method is called or when the just-in-time (JIT) compiler is invoked, if the method is invoked without calling <xref:System.Reflection.Emit.DynamicMethod.CreateDelegate%2A>.</span></span>  
  
 <span data-ttu-id="64f1b-137">Domeny aplikacji to dopuszczalne, hostowanej anonimowo metody dynamicznej można pominąć sprawdzanie widoczność JIT, mogą ulec następujące ograniczenia: niepubliczne typów i członków dostęp do hostowanej anonimowo metody dynamicznej musi być w zestawy, których grant ustawia są równe lub podzbiór zestawu emisji stosu wywołań.</span><span class="sxs-lookup"><span data-stu-id="64f1b-137">If the application domain permits it, anonymously hosted dynamic methods can skip JIT visibility checks, subject to the following restriction: The nonpublic types and members accessed by an anonymously hosted dynamic method must be in assemblies whose grant sets are equal to, or subsets of, the grant set of the emitting call stack.</span></span> <span data-ttu-id="64f1b-138">Ograniczona możliwość pominąć widoczność JIT sprawdza jest włączone, jeśli domena aplikacji daje <xref:System.Security.Permissions.ReflectionPermission> z <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flagi.</span><span class="sxs-lookup"><span data-stu-id="64f1b-138">This restricted ability to skip JIT visibility checks is enabled if the application domain grants <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag.</span></span>  
  
-   <span data-ttu-id="64f1b-139">Jeśli stosowana metoda używa tylko typy publiczne i elementów członkowskich, żadne uprawnienia są wymagane podczas konstruowania.</span><span class="sxs-lookup"><span data-stu-id="64f1b-139">If your method uses only public types and members, no permissions are required during construction.</span></span>  
  
-   <span data-ttu-id="64f1b-140">Jeśli określono, że widoczność JIT sprawdza ma być pomijana, żądanie, które są wysyłane w przypadku metody jest tworzony obejmuje <xref:System.Security.Permissions.ReflectionPermission> z <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flagi wraz z zestawem grant zestawu, który zawiera niepubliczny element członkowski, który jest dostępny.</span><span class="sxs-lookup"><span data-stu-id="64f1b-140">If you specify that JIT visibility checks should be skipped, the demand that is made when the method is constructed includes <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag and the grant set of the assembly that contains the nonpublic member that is being accessed.</span></span>  
  
 <span data-ttu-id="64f1b-141">Ponieważ zestaw grant niepubliczny element członkowski jest brana pod uwagę, częściowo zaufany kod, który został udzielony <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> nie podniesienia uprawnień jego wykonując członkowie niepubliczni zaufanych zestawów.</span><span class="sxs-lookup"><span data-stu-id="64f1b-141">Because the grant set of the nonpublic member is taken into consideration, partially trusted code that has been granted <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> cannot elevate its privileges by executing nonpublic members of trusted assemblies.</span></span>  
  
 <span data-ttu-id="64f1b-142">Z innego emitowany kodu, wykonanie metody dynamicznej wymaga wszelkie uprawnienia są wymagane przez metody, które używa metody dynamicznej.</span><span class="sxs-lookup"><span data-stu-id="64f1b-142">As with any other emitted code, executing the dynamic method requires whatever permissions are demanded by the methods the dynamic method uses.</span></span>  
  
 <span data-ttu-id="64f1b-143">Zestaw system, który jest hostem anonimowo hostowane metody dynamiczne używa <xref:System.Security.SecurityRuleSet.Level1?displayProperty=nameWithType> modelu przezroczystości, który jest modelu przezroczystości, który był używany w programie .NET Framework, przed [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="64f1b-143">The system assembly that hosts anonymously-hosted dynamic methods uses the <xref:System.Security.SecurityRuleSet.Level1?displayProperty=nameWithType> transparency model, which is the transparency model that was used in the .NET Framework before the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)].</span></span>  
  
 <span data-ttu-id="64f1b-144">Aby uzyskać więcej informacji, zobacz <xref:System.Reflection.Emit.DynamicMethod> klasy.</span><span class="sxs-lookup"><span data-stu-id="64f1b-144">For more information, see the <xref:System.Reflection.Emit.DynamicMethod> class.</span></span>  
  
### <a name="generating-anonymously-hosted-dynamic-methods-from-partially-trusted-code"></a><span data-ttu-id="64f1b-145">Generowanie anonimowo hostowane metody dynamiczne pochodzących z częściowo zaufanego kodu</span><span class="sxs-lookup"><span data-stu-id="64f1b-145">Generating Anonymously Hosted Dynamic Methods from Partially Trusted Code</span></span>  
 <span data-ttu-id="64f1b-146">Należy wziąć pod uwagę warunki, w których można wygenerować hostowanej anonimowo metody dynamicznej zestawu z uprawnieniami Internet i wykonaj go:</span><span class="sxs-lookup"><span data-stu-id="64f1b-146">Consider the conditions in which an assembly with Internet permissions can generate an anonymously hosted dynamic method and execute it:</span></span>  
  
-   <span data-ttu-id="64f1b-147">Dynamiczne metody używa tylko typy publiczne i elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="64f1b-147">The dynamic method uses only public types and members.</span></span> <span data-ttu-id="64f1b-148">Jeśli jej zestaw uprawnień zawiera <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>, można użyć typów niepubliczne i elementów członkowskich zestawu grant, którego wartość jest równy lub podzbiór, grant zbiór emisji zestawu.</span><span class="sxs-lookup"><span data-stu-id="64f1b-148">If its grant set includes <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>, it can use nonpublic types and members of any assembly whose grant set is equal to, or a subset of, the grant set of the emitting assembly.</span></span>  
  
-   <span data-ttu-id="64f1b-149">Uprawnienia, które są wymagane dla wszystkich typów i członków używany przez metodę dynamicznego znajdują się w zestawie grant częściowo zaufanym zestawie.</span><span class="sxs-lookup"><span data-stu-id="64f1b-149">The permissions that are required by all the types and members used by the dynamic method are included in the grant set of the partially trusted assembly.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-150">Metody dynamiczne nie obsługują symboli debugowania.</span><span class="sxs-lookup"><span data-stu-id="64f1b-150">Dynamic methods do not support debug symbols.</span></span>  
  
<a name="Dynamic_Methods_Associated_with_Existing_Assemblies"></a>   
## <a name="dynamic-methods-associated-with-existing-assemblies"></a><span data-ttu-id="64f1b-151">Metody dynamiczne skojarzone z istniejących zestawów</span><span class="sxs-lookup"><span data-stu-id="64f1b-151">Dynamic Methods Associated with Existing Assemblies</span></span>  
 <span data-ttu-id="64f1b-152">Aby skojarzyć dynamiczna metoda z typu lub modułu w istniejącego zestawu, należy użyć dowolnego z <xref:System.Reflection.Emit.DynamicMethod> konstruktorów, które określają skojarzonego typu lub modułu.</span><span class="sxs-lookup"><span data-stu-id="64f1b-152">To associate a dynamic method with a type or module in an existing assembly, use any of the <xref:System.Reflection.Emit.DynamicMethod> constructors that specify the associated type or module.</span></span> <span data-ttu-id="64f1b-153">Uprawnienia, które są wymagane do wywołania konstruktorów te zmieniają się, ponieważ skojarzenie metody dynamicznej z istniejącym typem lub moduł zapewnia dostęp metody dynamicznej do niepubliczne typy i składniki:</span><span class="sxs-lookup"><span data-stu-id="64f1b-153">The permissions that are required to call these constructors vary, because associating a dynamic method with an existing type or module gives the dynamic method access to nonpublic types and members:</span></span>  
  
-   <span data-ttu-id="64f1b-154">Dynamiczne metody, która jest skojarzona z typem ma dostęp do wszystkich elementów członkowskich tego typu, a nawet prywatne elementy członkowskie, oraz do wszystkich typów wewnętrznych i elementów członkowskich w zestawie zawiera skojarzonego typu.</span><span class="sxs-lookup"><span data-stu-id="64f1b-154">A dynamic method that is associated with a type has access to all members of that type, even private members, and to all internal types and members in the assembly that contains the associated type.</span></span>  
  
-   <span data-ttu-id="64f1b-155">Dynamiczne metody, która jest skojarzona z modułem ma dostęp do wszystkich `internal` typy i składniki (`Friend` w języku Visual Basic `assembly` w metadane środowiska wykonawczego języka wspólnego) w module.</span><span class="sxs-lookup"><span data-stu-id="64f1b-155">A dynamic method that is associated with a module has access to all the `internal` types and members (`Friend` in Visual Basic, `assembly` in common language runtime metadata) in the module.</span></span>  
  
 <span data-ttu-id="64f1b-156">Ponadto można użyć konstruktora, który określa, że możliwość pominąć widoczność sprawdza kompilatora JIT.</span><span class="sxs-lookup"><span data-stu-id="64f1b-156">In addition, you can use a constructor that specifies the ability to skip the visibility checks of the JIT compiler.</span></span> <span data-ttu-id="64f1b-157">W ten sposób umożliwia dynamiczne metody dostępu do wszystkich typów i członków do wszystkich zestawów, niezależnie od poziomu dostępu.</span><span class="sxs-lookup"><span data-stu-id="64f1b-157">Doing so gives your dynamic method access to all types and members in all assemblies, regardless of access level.</span></span>  
  
 <span data-ttu-id="64f1b-158">Uprawnienia wymagane przez konstruktora uzależnione dostępu ile zdecydujesz się podać metodę dynamicznego:</span><span class="sxs-lookup"><span data-stu-id="64f1b-158">The permissions demanded by the constructor depend on how much access you decide to give your dynamic method:</span></span>  
  
-   <span data-ttu-id="64f1b-159">Jeśli stosowana metoda używa tylko publiczne typy i składniki i skojarzyć go z własnego typu lub własny moduł, żadne uprawnienia są wymagane.</span><span class="sxs-lookup"><span data-stu-id="64f1b-159">If your method uses only public types and members, and you associate it with your own type or your own module, no permissions are required.</span></span>  
  
-   <span data-ttu-id="64f1b-160">Jeśli określisz JIT widoczność kontroli ma być pomijana, wymaga konstruktora <xref:System.Security.Permissions.ReflectionPermission> z <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flagi.</span><span class="sxs-lookup"><span data-stu-id="64f1b-160">If you specify that JIT visibility checks should be skipped, the constructor demands <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag.</span></span>  
  
-   <span data-ttu-id="64f1b-161">Metody dynamicznej można skojarzyć z innego typu, nawet innego typu w własny zestaw wymaga konstruktora <xref:System.Security.Permissions.ReflectionPermission> z <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flagę i <xref:System.Security.Permissions.SecurityPermission> z <xref:System.Security.Permissions.SecurityPermissionFlag.ControlEvidence?displayProperty=nameWithType> flagi.</span><span class="sxs-lookup"><span data-stu-id="64f1b-161">If you associate the dynamic method with another type, even another type in your own assembly, the constructor demands <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag and <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.ControlEvidence?displayProperty=nameWithType> flag.</span></span>  
  
-   <span data-ttu-id="64f1b-162">Jeśli skojarzysz metody dynamicznej z typu lub modułu w innym zestawie konstruktora wymaga dwóch sytuacji: <xref:System.Security.Permissions.ReflectionPermission> z <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flagi wraz z zestawem grant zestawu, który zawiera inny moduł.</span><span class="sxs-lookup"><span data-stu-id="64f1b-162">If you associate the dynamic method with a type or module in another assembly, the constructor demands two things: <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag, and the grant set of the assembly that contains the other module.</span></span> <span data-ttu-id="64f1b-163">Oznacza to, stos wywołań musi zawierać wszystkie uprawnienia w zestawie grant modułu docelowej oraz <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="64f1b-163">That is, your call stack must include all the permissions in the grant set of the target module, plus <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType>.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="64f1b-164">Dla zgodności z poprzednimi wersjami, jeśli żądanie dla obiekt docelowy zestaw uprawnień oraz <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> zakończy się niepowodzeniem, zapotrzebowanie konstruktora <xref:System.Security.Permissions.SecurityPermission> z <xref:System.Security.Permissions.SecurityPermissionFlag.ControlEvidence?displayProperty=nameWithType> flagi.</span><span class="sxs-lookup"><span data-stu-id="64f1b-164">For backward compatibility, if the demand for the target grant set plus <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> fails, the constructor demands <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.ControlEvidence?displayProperty=nameWithType> flag.</span></span>  
  
 <span data-ttu-id="64f1b-165">Mimo że pod względem zestawu emisji zestawu opisano elementy na tej liście, należy pamiętać, że zapotrzebowanie będą względem stosu wywołań pełne, w tym granice domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="64f1b-165">Although the items in this list are described in terms of the grant set of the emitting assembly, remember that the demands are made against the full call stack, including the application domain boundary.</span></span>  
  
 <span data-ttu-id="64f1b-166">Aby uzyskać więcej informacji, zobacz <xref:System.Reflection.Emit.DynamicMethod> klasy.</span><span class="sxs-lookup"><span data-stu-id="64f1b-166">For more information, see the <xref:System.Reflection.Emit.DynamicMethod> class.</span></span>  
  
### <a name="generating-dynamic-methods-from-partially-trusted-code"></a><span data-ttu-id="64f1b-167">Generowanie metod dynamicznych pochodzących z częściowo zaufanego kodu</span><span class="sxs-lookup"><span data-stu-id="64f1b-167">Generating Dynamic Methods from Partially Trusted Code</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-168">Zalecanym sposobem Generowanie metod dynamicznych pochodzących z częściowo zaufanego kodu jest użycie [anonimowo hostowane metody dynamiczne](#Anonymously_Hosted_Dynamic_Methods).</span><span class="sxs-lookup"><span data-stu-id="64f1b-168">The recommended way to generate dynamic methods from partially trusted code is to use [anonymously hosted dynamic methods](#Anonymously_Hosted_Dynamic_Methods).</span></span>  
  
 <span data-ttu-id="64f1b-169">Należy wziąć pod uwagę warunki, w których można wygenerować dynamiczne metody i wykonaj go zestawu z uprawnieniami Internet:</span><span class="sxs-lookup"><span data-stu-id="64f1b-169">Consider the conditions in which an assembly with Internet permissions can generate a dynamic method and execute it:</span></span>  
  
-   <span data-ttu-id="64f1b-170">Metody dynamicznej jest skojarzony z modułu lub typu, który emituje go albo obejmuje zestaw uprawnień, jego <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> i są skojarzone z modułu w zestawie, do którego grant zestaw jest równa lub podzbiór, grant zbiór emisji zestawu.</span><span class="sxs-lookup"><span data-stu-id="64f1b-170">Either the dynamic method is associated with the module or type that emits it, or its grant set includes <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> and it is associated with a module in an assembly whose grant set is equal to, or a subset of, the grant set of the emitting assembly.</span></span>  
  
-   <span data-ttu-id="64f1b-171">Dynamiczne metody używa tylko typy publiczne i elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="64f1b-171">The dynamic method uses only public types and members.</span></span> <span data-ttu-id="64f1b-172">Jeśli jej zestaw uprawnień zawiera <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> i są skojarzone z modułu w zestawie, do którego grant zestaw jest równa lub podzbiór, grant zbiór emisji zestawu, można użyć, typy i elementy członkowskie oznaczone `internal` (`Friend` w języku Visual Basic `assembly`w metadane środowiska wykonawczego języka wspólnego) w module skojarzone.</span><span class="sxs-lookup"><span data-stu-id="64f1b-172">If its grant set includes <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> and it is associated with a module in an assembly whose grant set is equal to, or a subset of, the grant set of the emitting assembly, it can use types and members marked `internal` (`Friend` in Visual Basic, `assembly` in common language runtime metadata) in the associated module.</span></span>  
  
-   <span data-ttu-id="64f1b-173">Uprawnienia wymagane przez wszystkie typy i używany przez metodę dynamicznych elementów członkowskich są uwzględnione w zestawie grant częściowo zaufanym zestawie.</span><span class="sxs-lookup"><span data-stu-id="64f1b-173">The permissions demanded by all the types and members used by the dynamic method are included in the grant set of the partially trusted assembly.</span></span>  
  
-   <span data-ttu-id="64f1b-174">Metody dynamicznej nie pomijać kontroli widoczność JIT.</span><span class="sxs-lookup"><span data-stu-id="64f1b-174">The dynamic method does not skip JIT visibility checks.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-175">Metody dynamiczne nie obsługują symboli debugowania.</span><span class="sxs-lookup"><span data-stu-id="64f1b-175">Dynamic methods do not support debug symbols.</span></span>  
  
<a name="Version_Information"></a>   
## <a name="version-information"></a><span data-ttu-id="64f1b-176">Informacje o wersji</span><span class="sxs-lookup"><span data-stu-id="64f1b-176">Version Information</span></span>  
 <span data-ttu-id="64f1b-177">Począwszy od [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)]przezroczystość zabezpieczeń staje się domyślnego mechanizmu wymuszania i wyeliminowania zasad zabezpieczeń komputera.</span><span class="sxs-lookup"><span data-stu-id="64f1b-177">Starting with the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)], machine-wide security policy is eliminated and security transparency becomes the default enforcement mechanism.</span></span> <span data-ttu-id="64f1b-178">Zobacz [zmiany zabezpieczeń](../../../docs/framework/security/security-changes.md).</span><span class="sxs-lookup"><span data-stu-id="64f1b-178">See [Security Changes](../../../docs/framework/security/security-changes.md).</span></span>  
  
 <span data-ttu-id="64f1b-179">Począwszy od [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], <xref:System.Security.Permissions.ReflectionPermission> z <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit?displayProperty=nameWithType> flaga nie jest już wymagany podczas emitowanie dynamicznych zestawów i metod dynamicznych.</span><span class="sxs-lookup"><span data-stu-id="64f1b-179">Starting with the [!INCLUDE[net_v20SP1_long](../../../includes/net-v20sp1-long-md.md)], <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit?displayProperty=nameWithType> flag is no longer required when emitting dynamic assemblies and dynamic methods.</span></span> <span data-ttu-id="64f1b-180">Ta flaga jest wymagane we wszystkich wcześniejszych wersjach [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="64f1b-180">This flag is required in all earlier versions of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="64f1b-181"><xref:System.Security.Permissions.ReflectionPermission>z <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit?displayProperty=nameWithType> flaga jest domyślnie włączone w `FullTrust` i `LocalIntranet` ustawia uprawnienia nazwanego, ale nie w `Internet` zestaw uprawnień.</span><span class="sxs-lookup"><span data-stu-id="64f1b-181"><xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit?displayProperty=nameWithType> flag is included by default in the `FullTrust` and `LocalIntranet` named permission sets, but not in the `Internet` permission set.</span></span> <span data-ttu-id="64f1b-182">W związku z tym w starszych wersjach [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)], biblioteki mogą być używane z Internetu uprawnienia tylko w przypadku wykonywania <xref:System.Security.PermissionSet.Assert%2A> dla <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit>.</span><span class="sxs-lookup"><span data-stu-id="64f1b-182">Therefore, in earlier versions of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)], a library can be used with Internet permissions only if it executes an <xref:System.Security.PermissionSet.Assert%2A> for <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit>.</span></span> <span data-ttu-id="64f1b-183">Takie biblioteki wymagają przeglądu zabezpieczeń zachować ostrożność, ponieważ błędy kodowania może skutkować luk w zabezpieczeniach.</span><span class="sxs-lookup"><span data-stu-id="64f1b-183">Such libraries require careful security review because coding errors could result in security holes.</span></span> <span data-ttu-id="64f1b-184">[!INCLUDE[net_v20SP1_short](../../../includes/net-v20sp1-short-md.md)] Umożliwia kod, aby emitować w scenariuszach częściowo zaufanych bez wystawiania wszystkie żądania kontroli zabezpieczeń, ponieważ generowanie kodu nie jest z założenia uprzywilejowanych operacji.</span><span class="sxs-lookup"><span data-stu-id="64f1b-184">The [!INCLUDE[net_v20SP1_short](../../../includes/net-v20sp1-short-md.md)] allows code to be emitted in partial trust scenarios without issuing any security demands, because generating code is not inherently a privileged operation.</span></span> <span data-ttu-id="64f1b-185">Oznacza to, że wygenerowany kod nie ma więcej uprawnień niż zestaw, który emituje go.</span><span class="sxs-lookup"><span data-stu-id="64f1b-185">That is, the generated code has no more permissions than the assembly that emits it.</span></span> <span data-ttu-id="64f1b-186">Dzięki temu biblioteki, w których Emituj kod jest przezroczysta pod względem zabezpieczeń i eliminuje potrzebę do potwierdzenia <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit>, który upraszcza zapisywanie bezpiecznego biblioteki.</span><span class="sxs-lookup"><span data-stu-id="64f1b-186">This allows libraries that emit code to be security transparent and removes the need to assert <xref:System.Security.Permissions.ReflectionPermissionFlag.ReflectionEmit>, which simplifies the task of writing a secure library.</span></span>  
  
 <span data-ttu-id="64f1b-187">Ponadto [!INCLUDE[net_v20SP1_short](../../../includes/net-v20sp1-short-md.md)] wprowadza <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flagi do uzyskiwania dostępu do niepubliczne typy i składniki z częściowo zaufanego metod dynamicznych.</span><span class="sxs-lookup"><span data-stu-id="64f1b-187">In addition, the [!INCLUDE[net_v20SP1_short](../../../includes/net-v20sp1-short-md.md)] introduces the <xref:System.Security.Permissions.ReflectionPermissionFlag.RestrictedMemberAccess?displayProperty=nameWithType> flag for accessing nonpublic types and members from partially trusted dynamic methods.</span></span> <span data-ttu-id="64f1b-188">Starsze niż [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] wymagają <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flagę dla metod dynamicznych, których dostęp niepubliczne typy i składniki; to uprawnienia, które nigdy nie może być przyznany elementowi częściowo zaufany kod.</span><span class="sxs-lookup"><span data-stu-id="64f1b-188">Earlier versions of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] require the <xref:System.Security.Permissions.ReflectionPermissionFlag.MemberAccess?displayProperty=nameWithType> flag for dynamic methods that access nonpublic types and members; this is a permission that should never be granted to partially trusted code.</span></span>  
  
 <span data-ttu-id="64f1b-189">Na koniec [!INCLUDE[net_v20SP1_short](../../../includes/net-v20sp1-short-md.md)] wprowadza hostowanej anonimowo metody.</span><span class="sxs-lookup"><span data-stu-id="64f1b-189">Finally, the [!INCLUDE[net_v20SP1_short](../../../includes/net-v20sp1-short-md.md)] introduces anonymously hosted methods.</span></span>  
  
### <a name="obtaining-information-on-types-and-members"></a><span data-ttu-id="64f1b-190">Uzyskiwanie informacji dotyczących typów i członków</span><span class="sxs-lookup"><span data-stu-id="64f1b-190">Obtaining Information on Types and Members</span></span>  
 <span data-ttu-id="64f1b-191">Począwszy od [!INCLUDE[dnprdnlong](../../../includes/dnprdnlong-md.md)], aby uzyskać informacje o niepubliczne typy i składniki są wymagane żadne uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="64f1b-191">Starting with the [!INCLUDE[dnprdnlong](../../../includes/dnprdnlong-md.md)], no permissions are required to obtain information about nonpublic types and members.</span></span> <span data-ttu-id="64f1b-192">Odbicie służy do uzyskiwania informacji potrzebnych do emitowanie metod dynamicznych.</span><span class="sxs-lookup"><span data-stu-id="64f1b-192">Reflection is used to obtain information needed to emit dynamic methods.</span></span> <span data-ttu-id="64f1b-193">Na przykład <xref:System.Reflection.MethodInfo> obiekty służą do emisji wywołania metody.</span><span class="sxs-lookup"><span data-stu-id="64f1b-193">For example, <xref:System.Reflection.MethodInfo> objects are used to emit method calls.</span></span> <span data-ttu-id="64f1b-194">Starsze niż [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] wymagają <xref:System.Security.Permissions.ReflectionPermission> z <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType> flagi.</span><span class="sxs-lookup"><span data-stu-id="64f1b-194">Earlier versions of the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] require <xref:System.Security.Permissions.ReflectionPermission> with the <xref:System.Security.Permissions.ReflectionPermissionFlag.TypeInformation?displayProperty=nameWithType> flag.</span></span> <span data-ttu-id="64f1b-195">Aby uzyskać więcej informacji, zobacz [zagadnienia dotyczące zabezpieczeń dla odbicia](../../../docs/framework/reflection-and-codedom/security-considerations-for-reflection.md).</span><span class="sxs-lookup"><span data-stu-id="64f1b-195">For more information, see [Security Considerations for Reflection](../../../docs/framework/reflection-and-codedom/security-considerations-for-reflection.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="64f1b-196">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="64f1b-196">See Also</span></span>  
 [<span data-ttu-id="64f1b-197">Zagadnienia dotyczące zabezpieczeń dla odbicia</span><span class="sxs-lookup"><span data-stu-id="64f1b-197">Security Considerations for Reflection</span></span>](../../../docs/framework/reflection-and-codedom/security-considerations-for-reflection.md)  
 [<span data-ttu-id="64f1b-198">Emitowanie dynamicznych metod i zestawów</span><span class="sxs-lookup"><span data-stu-id="64f1b-198">Emitting Dynamic Methods and Assemblies</span></span>](../../../docs/framework/reflection-and-codedom/emitting-dynamic-methods-and-assemblies.md)
