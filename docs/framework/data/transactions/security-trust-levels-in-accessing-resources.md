---
title: Poziomy zaufania zabezpieczeń podczas uzyskiwania dostępu do zasobów
description: Informacje o poziomach zaufania zabezpieczeń w przypadku uzyskiwania dostępu do zasobów w programie .NET. Istnieją trzy główne poziomy zaufania dla elementu System. Transactions.
ms.date: 03/30/2017
ms.assetid: fb5be924-317d-4d69-b33a-3d18ecfb9d6e
ms.openlocfilehash: 64f298460bde99181ab8dc8be13ae95aaa846299
ms.sourcegitcommit: 6219b1e1feccb16d88656444210fed3297f5611e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/22/2020
ms.locfileid: "85141955"
---
# <a name="security-trust-levels-in-accessing-resources"></a><span data-ttu-id="e1c04-104">Poziomy zaufania zabezpieczeń podczas uzyskiwania dostępu do zasobów</span><span class="sxs-lookup"><span data-stu-id="e1c04-104">Security Trust Levels in Accessing Resources</span></span>
<span data-ttu-id="e1c04-105">W tym temacie opisano, jak dostęp jest ograniczony do typów zasobów, które <xref:System.Transactions> przedstawia.</span><span class="sxs-lookup"><span data-stu-id="e1c04-105">This topic discusses how access is restricted on the types of resources that <xref:System.Transactions> exposes.</span></span>  
  
 <span data-ttu-id="e1c04-106">Istnieją trzy główne poziomy zaufania <xref:System.Transactions>.</span><span class="sxs-lookup"><span data-stu-id="e1c04-106">There are three main levels of trust for <xref:System.Transactions>.</span></span> <span data-ttu-id="e1c04-107">Poziomy zaufania są definiowane w oparciu o typy zasobów który <xref:System.Transactions> ujawnia i poziom zaufania, który powinien uzyskać dostęp do tych zasobów.</span><span class="sxs-lookup"><span data-stu-id="e1c04-107">The trust levels are defined based on the types of resources that <xref:System.Transactions> exposes, and the level of trust that should be required to access those resources.</span></span> <span data-ttu-id="e1c04-108">Zasoby który <xref:System.Transactions> zapewnia dostęp do pamięci systemowej, zasoby całego procesu współużytkowanego i międzynarodowe zasoby systemowe.</span><span class="sxs-lookup"><span data-stu-id="e1c04-108">The resources that <xref:System.Transactions> provides access to are system memory, shared process wide resources, and system wide resources.</span></span> <span data-ttu-id="e1c04-109">Dostępne są następujące poziomy:</span><span class="sxs-lookup"><span data-stu-id="e1c04-109">The levels are:</span></span>  
  
- <span data-ttu-id="e1c04-110">**AllowPartiallyTrustedCallers** (APTCA) dla aplikacji korzystających z transakcji w ramach jednej domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e1c04-110">**AllowPartiallyTrustedCallers** (APTCA) for applications using transactions within a single application domain.</span></span>  
  
- <span data-ttu-id="e1c04-111">**DistributedTransactionPermission** (DTP) dla aplikacji korzystających z transakcji rozproszonych.</span><span class="sxs-lookup"><span data-stu-id="e1c04-111">**DistributedTransactionPermission** (DTP) for applications using distributed transactions.</span></span>  
  
- <span data-ttu-id="e1c04-112">Pełne zaufanie do trwałych zasobów, aplikacji do zarządzania konfiguracją i starszych aplikacji międzyoperacyjnych.</span><span class="sxs-lookup"><span data-stu-id="e1c04-112">Full trust for durable resources, configuration management applications, and legacy interop applications.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="e1c04-113">Nie należy wywołać wszystkich interfejsów rejestracja przy użyciu personifikowanej kontekstów.</span><span class="sxs-lookup"><span data-stu-id="e1c04-113">You should not call any of the enlistment interfaces with impersonated contexts.</span></span>  
  
## <a name="trust-levels"></a><span data-ttu-id="e1c04-114">Poziomy zaufania</span><span class="sxs-lookup"><span data-stu-id="e1c04-114">Trust Levels</span></span>  
  
### <a name="aptca-partial-trust"></a><span data-ttu-id="e1c04-115">APTCA (częściowej relacji zaufania)</span><span class="sxs-lookup"><span data-stu-id="e1c04-115">APTCA (Partial Trust)</span></span>  
 <span data-ttu-id="e1c04-116"><xref:System.Transactions>Zestaw może być wywoływany przez częściowo zaufany kod, ponieważ został oznaczony przy użyciu atrybutu **ALLOWPARTIALLYTRUSTEDCALLERS** (APTCA).</span><span class="sxs-lookup"><span data-stu-id="e1c04-116">The <xref:System.Transactions> assembly can be called by partially trusted code because it has been marked with the **AllowPartiallyTrustedCallers** attribute (APTCA).</span></span> <span data-ttu-id="e1c04-117">Ten atrybut zasadniczo usuwa niejawny <xref:System.Security.Permissions.SecurityAction.LinkDemand> dla zestawu uprawnień **FullTrust** , który jest w inny sposób automatycznie umieszczany w każdej publicznie dostępnej metodzie w każdym typie.</span><span class="sxs-lookup"><span data-stu-id="e1c04-117">This attribute essentially removes the implicit <xref:System.Security.Permissions.SecurityAction.LinkDemand> for the **FullTrust** permission set that is otherwise automatically placed on each publicly accessible method in each type.</span></span> <span data-ttu-id="e1c04-118">Niektóre typy i elementy członkowskie nadal wymaga jednak lepsze gwarancje uprawnień.</span><span class="sxs-lookup"><span data-stu-id="e1c04-118">However, some types and members still require stronger permissions.</span></span>  
  
 <span data-ttu-id="e1c04-119">Atrybut APTCA umożliwia aplikacjom używanie transakcji w częściowej relacji zaufania w ramach jednej domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="e1c04-119">The APTCA attribute enables applications to use transactions in partial trust within a single application domain.</span></span> <span data-ttu-id="e1c04-120">Umożliwia to-eskalowany transakcji i nietrwałe, które mogą być używane do obsługi błędów.</span><span class="sxs-lookup"><span data-stu-id="e1c04-120">This enables non-escalated transactions and volatile enlistments that can be used for error handling.</span></span> <span data-ttu-id="e1c04-121">Przykładem jest tabela skrótów transakcyjnych i aplikacja, która go używa.</span><span class="sxs-lookup"><span data-stu-id="e1c04-121">One example of this is a transacted hash table and an application that uses it.</span></span> <span data-ttu-id="e1c04-122">Dane mogą być dodawane do lub usunięte z tabeli skrótu w pojedynczą transakcję.</span><span class="sxs-lookup"><span data-stu-id="e1c04-122">Data can be added to and removed from the hash table under a single transaction.</span></span> <span data-ttu-id="e1c04-123">Jeśli transakcja jest później wycofana, wszystkie zmiany wprowadzone w tabeli wyznaczania wartości skrótu, w tym transakcji można cofnąć.</span><span class="sxs-lookup"><span data-stu-id="e1c04-123">If the transaction is later rolled back, all of the changes made to the hash table under that transaction can be undone.</span></span>  
  
### <a name="distributedtransactionpermission-dtp"></a><span data-ttu-id="e1c04-124">DistributedTransactionPermission (DTP)</span><span class="sxs-lookup"><span data-stu-id="e1c04-124">DistributedTransactionPermission (DTP)</span></span>  
 <span data-ttu-id="e1c04-125">Gdy <xref:System.Transactions> eskalacji transakcji, aby były zarządzane przez MSDTC, <xref:System.Transactions> wymagań <xref:System.Transactions.DistributedTransactionPermission> (DTP), aby utworzyć transakcji rozproszonych.</span><span class="sxs-lookup"><span data-stu-id="e1c04-125">When a <xref:System.Transactions> transaction is escalated to be managed by MSDTC, <xref:System.Transactions> demands the <xref:System.Transactions.DistributedTransactionPermission> (DTP) to create the distributed transaction.</span></span> <span data-ttu-id="e1c04-126">Oznacza to, że transakcje mogą być przekazany kod (takie jak za pomocą serializacji lub dodatkowe trwałych rejestracji) musi otrzymać DTP.</span><span class="sxs-lookup"><span data-stu-id="e1c04-126">This means that the code that causes the transaction to be escalated (such as through serialization or additional durable enlistments) would need to be granted DTP.</span></span> <span data-ttu-id="e1c04-127">Kod, który pierwotnie został utworzony <xref:System.Transactions> transakcji nie trzeba mieć to uprawnienie.</span><span class="sxs-lookup"><span data-stu-id="e1c04-127">The code that originally created the <xref:System.Transactions> transaction does not necessarily need to possess this permission.</span></span>  
  
### <a name="fulltrust-link-demands"></a><span data-ttu-id="e1c04-128">Wymaga FullTrust łącza</span><span class="sxs-lookup"><span data-stu-id="e1c04-128">FullTrust Link Demands</span></span>  
 <span data-ttu-id="e1c04-129">Ten poziom uprawnień jest przeznaczony do ograniczania aplikacji, które są zapisywane w trwałych zasobach.</span><span class="sxs-lookup"><span data-stu-id="e1c04-129">This permission level is intended to restrict applications that are writing to durable resources.</span></span> <span data-ttu-id="e1c04-130">W przypadku niepowodzenia aplikacja musi mieć możliwość odzyskania przy użyciu Menedżera transakcji, aby określić końcowy wynik transakcji, dzięki czemu może ona zaktualizować stałe dane.</span><span class="sxs-lookup"><span data-stu-id="e1c04-130">Upon failure, the application needs to be able to recover with the transaction manager to determine the final outcome of the transaction, so that it can update permanent data.</span></span> <span data-ttu-id="e1c04-131">Ten typ aplikacji jest znany jako Menedżer trwałego źródła.</span><span class="sxs-lookup"><span data-stu-id="e1c04-131">This type of application is known as a durable source manager.</span></span> <span data-ttu-id="e1c04-132">Klasycznym przykładem tego typu aplikacji jest SQL.</span><span class="sxs-lookup"><span data-stu-id="e1c04-132">A classic example of this type of application is SQL.</span></span>  
  
 <span data-ttu-id="e1c04-133">Aby włączyć odzyskiwanie, ten typ aplikacji umożliwia trwałe korzystanie z zasobów systemowych.</span><span class="sxs-lookup"><span data-stu-id="e1c04-133">To enable recovery, this type of application has the ability to permanently consume system resources.</span></span> <span data-ttu-id="e1c04-134">Jest to spowodowane Menedżer transakcji do odzyskania musi zapamiętać transakcje, które mają wykonywane, dopóki nie można potwierdzić, że otrzymane wyniki wszystkich menedżerów trwałe zasobów, które uczestniczą w transakcji.</span><span class="sxs-lookup"><span data-stu-id="e1c04-134">This is because the recoverable transaction manager must remember transactions that have committed until it can confirm that all durable resource managers that are participating in the transaction have received the outcome.</span></span> <span data-ttu-id="e1c04-135">W związku z tym ten typ aplikacji wymaga pełnego zaufania i nie należy go uruchamiać, chyba że zostanie udzielony ten poziom zaufania.</span><span class="sxs-lookup"><span data-stu-id="e1c04-135">Therefore, this type of application requires full trust and should not be run unless that level of trust has been granted.</span></span>  
  
 <span data-ttu-id="e1c04-136">Aby uzyskać więcej informacji na temat trwałych rejestracji i odzyskiwania, zobacz temat [Rejestrowanie zasobów jako uczestników transakcji](enlisting-resources-as-participants-in-a-transaction.md) i [wykonywanie odzyskiwania](performing-recovery.md) .</span><span class="sxs-lookup"><span data-stu-id="e1c04-136">For more information on durable enlistments and recovery, see the [Enlisting Resources as Participants in a Transaction](enlisting-resources-as-participants-in-a-transaction.md) and [Performing Recovery](performing-recovery.md) topics.</span></span>  
  
 <span data-ttu-id="e1c04-137">Aplikacje korzystające ze starszej współdziałania z modelem COM+ również muszą mieć pełne zaufanie.</span><span class="sxs-lookup"><span data-stu-id="e1c04-137">Applications that perform legacy interop work with COM+ are also required to have full trust.</span></span>  
  
 <span data-ttu-id="e1c04-138">Poniżej znajduje się lista typów i elementów członkowskich, które nie są wywoływane przez częściowo zaufany kod, ponieważ są one uzupełnione atrybutem zabezpieczeń deklaratywnych **FullTrust** :</span><span class="sxs-lookup"><span data-stu-id="e1c04-138">The following is a list of types and members that are not callable by partially trusted code because they are decorated with the **FullTrust** declarative security attribute:</span></span>  
  
 `PermissionSetAttribute(SecurityAction.LinkDemand, Name := "FullTrust")`  
  
- <xref:System.Transactions.Transaction.EnlistDurable%2A?displayProperty=nameWithType>  
  
- <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A>  
  
- <xref:System.Transactions.TransactionInterop>  
  
- <xref:System.Transactions.TransactionManager.DistributedTransactionStarted>  
  
- <xref:System.Transactions.HostCurrentTransactionCallback>  
  
- <xref:System.Transactions.TransactionManager.Reenlist%2A>  
  
- <xref:System.Transactions.TransactionManager.RecoveryComplete%2A>  
  
- <xref:System.Transactions.TransactionScope.%23ctor%28System.Transactions.TransactionScopeOption%2CSystem.Transactions.TransactionOptions%2CSystem.Transactions.EnterpriseServicesInteropOption%29>  
  
 <span data-ttu-id="e1c04-139">Tylko bezpośredni obiekt wywołujący jest wymagany do posiadania zestawu uprawnień **FullTrust** , aby używać powyższych typów lub metod.</span><span class="sxs-lookup"><span data-stu-id="e1c04-139">Only the immediate caller is required to possess the **FullTrust** permission set to use the above types or methods.</span></span>
