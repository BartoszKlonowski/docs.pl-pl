---
title: Optymalizacja za pomocą zatwierdzania jednofazowego i umożliwiającego awansowanie powiadomienia jednofazowego
description: Zoptymalizuj wydajność przy użyciu jednofazowego zatwierdzania i powiadomienia o pojedynczej fazie. Dowiedz się więcej o infrastrukturze system. Transactions w programie .NET.
ms.date: 03/30/2017
ms.assetid: 57beaf1a-fb4d-441a-ab1d-bc0c14ce7899
ms.openlocfilehash: 89ce82e673340c93254983c078f78a2501129383
ms.sourcegitcommit: 6219b1e1feccb16d88656444210fed3297f5611e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/22/2020
ms.locfileid: "85141981"
---
# <a name="optimization-using-single-phase-commit-and-promotable-single-phase-notification"></a><span data-ttu-id="5b00e-104">Optymalizacja za pomocą zatwierdzania jednofazowego i umożliwiającego awansowanie powiadomienia jednofazowego</span><span class="sxs-lookup"><span data-stu-id="5b00e-104">Optimization using Single Phase Commit and Promotable Single Phase Notification</span></span>

<span data-ttu-id="5b00e-105">W tym temacie opisano mechanizmy udostępnione przez <xref:System.Transactions> infrastruktury w celu optymalizacji wydajności.</span><span class="sxs-lookup"><span data-stu-id="5b00e-105">This topic describes the mechanisms provided by the <xref:System.Transactions> infrastructure to optimize performance.</span></span>

## <a name="promotable-single-phase-enlistment"></a><span data-ttu-id="5b00e-106">Rejestracja awansowanie jedna faza</span><span class="sxs-lookup"><span data-stu-id="5b00e-106">Promotable Single Phase Enlistment</span></span>

<span data-ttu-id="5b00e-107"><xref:System.Transactions>Infrastruktura administruje transakcją w jednej domenie aplikacji, która obejmuje co najwyżej jeden trwały zasób lub wiele zasobów lotnych.</span><span class="sxs-lookup"><span data-stu-id="5b00e-107">The <xref:System.Transactions> infrastructure administrates a transaction inside a single application domain that involves at most a single durable resource or multiple volatile resources.</span></span> <span data-ttu-id="5b00e-108">Ponieważ <xref:System.Transactions> infrastruktura używa tylko wywołań domeny wewnątrz aplikacji, zapewnia najlepszą przepływność i wydajność.</span><span class="sxs-lookup"><span data-stu-id="5b00e-108">Since the <xref:System.Transactions> infrastructure uses only intra-application domain calls, it yields the best throughput and performance.</span></span>

<span data-ttu-id="5b00e-109">Jeśli jednak transakcja jest udostępniana innemu obiektowi w innej domenie aplikacji (w tym między granicami procesów i maszyn) na tym samym komputerze lub jeśli zarejestrowana jest inna usługa trwałego Menedżera zasobów, <xref:System.Transactions> infrastruktura automatycznie przeniesie transakcję, która ma być zarządzana przez usługę MSDTC.</span><span class="sxs-lookup"><span data-stu-id="5b00e-109">However, if the transaction is provided to another object in another application domain (including across process and machine boundaries) on the same computer, or if you were to enlist another durable resource manager, the <xref:System.Transactions> infrastructure automatically escalates the transaction to be managed by the MSDTC.</span></span> <span data-ttu-id="5b00e-110">Zarządzane przez MSDTC transakcji nie jest performance-wise jako jeden zarządzane przez <xref:System.Transactions> infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="5b00e-110">A transaction managed by MSDTC is not as performance-wise as one managed by the <xref:System.Transactions> infrastructure.</span></span>

<span data-ttu-id="5b00e-111">W celu zoptymalizowania wydajności <xref:System.Transactions> infrastruktura zapewnia rejestrację z jednym etapem promocji (PSPE), która umożliwia pojedynczy zdalny zasób trwały, znajdujący się w innej domenie aplikacji, procesie lub maszynie, aby uczestniczył w <xref:System.Transactions> transakcji bez powodowania jego eskalacji do transakcji MSDTC.</span><span class="sxs-lookup"><span data-stu-id="5b00e-111">To optimize performance, the <xref:System.Transactions> infrastructure provides the Promotable Single Phase Enlistment (PSPE) that allows a single remote durable resource, located in a different application domain, process or machine, to participate in a <xref:System.Transactions> transaction without causing it to be escalated to an MSDTC transaction.</span></span> <span data-ttu-id="5b00e-112">Ten Menedżer zasobu (MB) umożliwia przechowywanie i "własnością" transakcji, która później można przekazany do transakcji rozproszonych (lub transakcji MSDTC), jeśli to konieczne.</span><span class="sxs-lookup"><span data-stu-id="5b00e-112">This resource manager (RM) can host and "own" a transaction that can later be escalated to a distributed transaction (or MSDTC transaction) if necessary.</span></span> <span data-ttu-id="5b00e-113">Zmniejsza to prawdopodobieństwo za pomocą MSDTC.</span><span class="sxs-lookup"><span data-stu-id="5b00e-113">This reduces the chance of using the MSDTC.</span></span>

<span data-ttu-id="5b00e-114">Ten Menedżer określonego zasobu, zwykle ma własne wewnętrzne transakcje rozproszone bez i należy go obsługuje konwertowania tych transakcji na transakcje rozproszone w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="5b00e-114">This specific resource manager usually has its own internal non distributed transactions and it needs to support converting those transactions to distributed transactions at runtime.</span></span> <span data-ttu-id="5b00e-115">Na przykład SQL Server 2005 to Menedżer zasobów.</span><span class="sxs-lookup"><span data-stu-id="5b00e-115">For example, SQL Server 2005 is such a resource manager.</span></span> <span data-ttu-id="5b00e-116">W takim przypadku <xref:System.Transactions> infrastruktury przyjmuje rolę Zarządzanie bierne po prostu Monitoruj transakcji na potrzeby eskalacji.</span><span class="sxs-lookup"><span data-stu-id="5b00e-116">In such case, the <xref:System.Transactions> infrastructure takes a passive management role by just monitoring the transaction for a need for escalation.</span></span> <span data-ttu-id="5b00e-117">Aby zapewnić obsługę interakcji między usługą <xref:System.Transactions> infrastruktury i menedżerem zasobów, ta ostatnia musi implementować interfejs <xref:System.Transactions.IPromotableSinglePhaseNotification> .</span><span class="sxs-lookup"><span data-stu-id="5b00e-117">To support the interaction between the <xref:System.Transactions> infrastructure and resource manager, the latter needs to implement the interface <xref:System.Transactions.IPromotableSinglePhaseNotification>.</span></span>

<span data-ttu-id="5b00e-118"><xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> Metoda służy do zarejestrować pojedynczy trwałe zasób, który może zostać przekazany później.</span><span class="sxs-lookup"><span data-stu-id="5b00e-118">The <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> method is used to enlist a single durable resource that can be escalated later.</span></span> <span data-ttu-id="5b00e-119">Ta metoda zapewnia, że rejestracja może być przekazany zgodnie z potrzebami.</span><span class="sxs-lookup"><span data-stu-id="5b00e-119">This method ensures that the enlistment can be escalated as needed.</span></span> <span data-ttu-id="5b00e-120">Jeśli rejestracja zakończy się powodzeniem, Menedżer zasobów tworzy jego wewnętrznego transakcji i kojarzy ją z <xref:System.Transactions> transakcji.</span><span class="sxs-lookup"><span data-stu-id="5b00e-120">If the enlistment succeeds, the RM creates its internal transaction and associates it with the <xref:System.Transactions> transaction.</span></span> <span data-ttu-id="5b00e-121">W przypadku niepowodzenia rejestracji PSPE Menedżera zasobów zamiast tego należy zarejestrować przy użyciu <xref:System.Transactions.Transaction.EnlistDurable%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="5b00e-121">If the PSPE enlistment fails, the RM should instead enlist using the <xref:System.Transactions.Transaction.EnlistDurable%2A> method.</span></span> <span data-ttu-id="5b00e-122">Błędów, aby zarejestrować PSPE może się zdarzyć, gdy transakcja została już transakcja rozproszona lub innego menedżera zasobów przeprowadził już rejestracji PSPE</span><span class="sxs-lookup"><span data-stu-id="5b00e-122">Failures to enlist in PSPE might happen when the transaction is already a distributed transaction, or when another RM has already performed a PSPE enlistment</span></span>

<span data-ttu-id="5b00e-123">Gdy zarejestrowana, wywołuje przez klientów, aby zatwierdzić lub przerwać <xref:System.Transactions> transakcji są konwertowane na wywołania na Menedżera zasobów, wywołując <xref:System.Transactions.IPromotableSinglePhaseNotification.SinglePhaseCommit%2A> metody lub <xref:System.Transactions.IPromotableSinglePhaseNotification.Rollback%2A> odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="5b00e-123">Once enlisted, calls by clients to commit or abort the <xref:System.Transactions> transaction are converted to calls on the Resource Manager by invoking the <xref:System.Transactions.IPromotableSinglePhaseNotification.SinglePhaseCommit%2A> method, or the <xref:System.Transactions.IPromotableSinglePhaseNotification.Rollback%2A> respectively.</span></span>

<span data-ttu-id="5b00e-124">Jeśli <xref:System.Transactions> transakcji nigdy nie wymaga eskalacji, gdy transakcja zostanie zatwierdzone, Menedżer zasobów odbiera <xref:System.Transactions.IPromotableSinglePhaseNotification.SinglePhaseCommit%2A> powiadomienia.</span><span class="sxs-lookup"><span data-stu-id="5b00e-124">If the <xref:System.Transactions> transaction never requires escalation, when the transaction is committed, the RM receives a <xref:System.Transactions.IPromotableSinglePhaseNotification.SinglePhaseCommit%2A> notification.</span></span> <span data-ttu-id="5b00e-125">Można ją następnie Zatwierdź wewnętrzny transakcji, która została początkowo utworzona.</span><span class="sxs-lookup"><span data-stu-id="5b00e-125">It can then commit the internal transaction that was initially created.</span></span>

<span data-ttu-id="5b00e-126">Jeśli <xref:System.Transactions> transakcja musi zostać przeeskalacjna (np. w celu obsługi wielu usług RMS), program <xref:System.Transactions> informuje Menedżera zasobów przez wywołanie <xref:System.Transactions.ITransactionPromoter.Promote%2A> metody w <xref:System.Transactions.ITransactionPromoter> interfejsie, z którego <xref:System.Transactions.IPromotableSinglePhaseNotification> pochodzi interfejs.</span><span class="sxs-lookup"><span data-stu-id="5b00e-126">If the <xref:System.Transactions> transaction needs to be escalated (e.g., to support multiple RMs), <xref:System.Transactions> informs the resource manager by calling the <xref:System.Transactions.ITransactionPromoter.Promote%2A> method on the <xref:System.Transactions.ITransactionPromoter> interface, from which the <xref:System.Transactions.IPromotableSinglePhaseNotification> interface derives.</span></span> <span data-ttu-id="5b00e-127">Menedżer zasobów następnie konwertuje transakcji wewnętrznie z lokalnym transakcji (które nie wymagają rejestrowania) obiekt transakcji, który jest w stanie udział w transakcji usługi i kojarzy ją z już pracy.</span><span class="sxs-lookup"><span data-stu-id="5b00e-127">The resource manager then converts the transaction internally from a local transaction (which does not require logging) to a transaction object that is capable of participating in a DTC transaction, and associates it with the work already done.</span></span> <span data-ttu-id="5b00e-128">Gdy transakcja jest proszony o zatwierdzania, Menedżer transakcji nadal wysyła <xref:System.Transactions.IPromotableSinglePhaseNotification.SinglePhaseCommit%2A> powiadomienia do Menedżera zasobów, które zatwierdzeń transakcji rozproszonych, utworzony podczas eskalacji.</span><span class="sxs-lookup"><span data-stu-id="5b00e-128">When the transaction is asked to commit, the transaction manager still sends the <xref:System.Transactions.IPromotableSinglePhaseNotification.SinglePhaseCommit%2A> notification to the resource manager, which commits the distributed transaction that it created during escalation.</span></span>

> [!NOTE]
> <span data-ttu-id="5b00e-129">Ślady **TransactionCommitted** (które są generowane w przypadku wywołania zatwierdzenia dla transakcji eskalacji) zawierają identyfikator działania transakcji usługi DTC.</span><span class="sxs-lookup"><span data-stu-id="5b00e-129">The **TransactionCommitted** traces (that are generated when a Commit is invoked on the escalated transaction) contain the activity ID of the DTC transaction.</span></span>

<span data-ttu-id="5b00e-130">Aby uzyskać więcej informacji na temat eskalacji zarządzania, zobacz [Eskalacja zarządzania transakcjami](transaction-management-escalation.md).</span><span class="sxs-lookup"><span data-stu-id="5b00e-130">For more information on management escalation, see [Transaction Management Escalation](transaction-management-escalation.md).</span></span>

## <a name="transaction-management-escalation-scenario"></a><span data-ttu-id="5b00e-131">W tym scenariuszu eskalacji zarządzania transakcji</span><span class="sxs-lookup"><span data-stu-id="5b00e-131">Transaction Management Escalation Scenario</span></span>

<span data-ttu-id="5b00e-132">Następujący scenariusz pokazuje kontaktu z transakcji rozproszonych za pomocą <xref:System.Data> nazw jako "proxy" Menedżera zasobów.</span><span class="sxs-lookup"><span data-stu-id="5b00e-132">The following scenario demonstrates an escalation to a distributed transaction using the <xref:System.Data> namespace as the ‘proxy’ for the resource manager.</span></span> <span data-ttu-id="5b00e-133">W tym scenariuszu przyjęto założenie, że istnieje już jedno <xref:System.Data> połączenie z bazą danych, CN1, biorąc udział w transakcji, a aplikacja chce zaangażować inne <xref:System.Data> połączenie, CN2.</span><span class="sxs-lookup"><span data-stu-id="5b00e-133">This scenario assumes that there is already one <xref:System.Data> connection to the database, CN1, involved in the transaction, and the application wants to involve another <xref:System.Data> connection, CN2.</span></span> <span data-ttu-id="5b00e-134">Transakcji musi zostać przekazany do usługi, jako transakcja pełną rozproszonej dwufazowe.</span><span class="sxs-lookup"><span data-stu-id="5b00e-134">The transaction must be escalated to DTC, as a full distributed two-phase commit transaction.</span></span>

<span data-ttu-id="5b00e-135">W tym scenariuszu</span><span class="sxs-lookup"><span data-stu-id="5b00e-135">In this scenario,</span></span>

1. <span data-ttu-id="5b00e-136">Wywołania CN1 <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> metodę, aby zarejestrować transakcji.</span><span class="sxs-lookup"><span data-stu-id="5b00e-136">CN1 calls the <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> method to enlist in the transaction.</span></span> <span data-ttu-id="5b00e-137">Następnie transakcja jest nadal lokalnego i nie ma żadnych awansowanie rejestracji w transakcji, więc <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> połączenie zakończy się powodzeniem.</span><span class="sxs-lookup"><span data-stu-id="5b00e-137">Then, the transaction is still local and there are no other promotable enlistments on the transaction, so the <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A> call succeeds.</span></span>

2. <span data-ttu-id="5b00e-138">Po drugie połączenie, CN2 <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A>, połączenie nie powiedzie się, ponieważ jest zaangażowane innego awansowanie rejestracji.</span><span class="sxs-lookup"><span data-stu-id="5b00e-138">When the second connection, CN2 calls <xref:System.Transactions.Transaction.EnlistPromotableSinglePhase%2A>, the call fails because there is another promotable enlistment involved.</span></span> <span data-ttu-id="5b00e-139">W związku z tym CN2 musi uzyskać transakcję usługi, aby można było przekazać je do programu SQL.</span><span class="sxs-lookup"><span data-stu-id="5b00e-139">Because of this, CN2 must get a DTC transaction in order to pass it to SQL.</span></span> <span data-ttu-id="5b00e-140">W tym celu używa jednej z metod dostarczonych przez <xref:System.Transactions.TransactionInterop> klasy w celu uzyskania formatu transakcji, która może być SQL.</span><span class="sxs-lookup"><span data-stu-id="5b00e-140">To do this, it uses one of the methods provided by the <xref:System.Transactions.TransactionInterop> class to produce a format of the transaction that can be given to SQL.</span></span>

3. <span data-ttu-id="5b00e-141"><xref:System.Transactions>wywołuje <xref:System.Transactions.ITransactionPromoter.Promote%2A> metodę w <xref:System.Transactions.ITransactionPromoter> interfejsie zaimplementowanym przez CN1.</span><span class="sxs-lookup"><span data-stu-id="5b00e-141"><xref:System.Transactions> calls the <xref:System.Transactions.ITransactionPromoter.Promote%2A> method on the <xref:System.Transactions.ITransactionPromoter> interface implemented by CN1.</span></span>

4. <span data-ttu-id="5b00e-142">W tym momencie CN1 Eskalowanie transakcji, niektóre mechanizm specyficzne dla SQL 2005 i <xref:System.Data>.</span><span class="sxs-lookup"><span data-stu-id="5b00e-142">At this point, CN1 escalates the transaction, using some mechanism specific to SQL 2005 and <xref:System.Data>.</span></span>

5. <span data-ttu-id="5b00e-143">Wartość zwrócona przez <xref:System.Transactions.ITransactionPromoter.Promote%2A> metoda jest zawierający tokenu propagacji transakcji tablicy bajtów.</span><span class="sxs-lookup"><span data-stu-id="5b00e-143">The return value from the <xref:System.Transactions.ITransactionPromoter.Promote%2A> method is a byte array that contains a propagation token for the transaction.</span></span> <span data-ttu-id="5b00e-144"><xref:System.Transactions>używa tego tokenu propagacji, aby utworzyć transakcję usługi DTC, którą może uwzględnić w transakcji lokalnej.</span><span class="sxs-lookup"><span data-stu-id="5b00e-144"><xref:System.Transactions> uses this propagation token to create a DTC transaction that it can incorporate into the local transaction.</span></span>

6. <span data-ttu-id="5b00e-145">W tym momencie CN2 można użyć dane otrzymane z jednej z metod przez wywołanie <xref:System.Transactions.TransactionInterop> do przekazania transakcji SQL.</span><span class="sxs-lookup"><span data-stu-id="5b00e-145">At this point, CN2 can use the data received from calling one of the methods by <xref:System.Transactions.TransactionInterop> to pass the transaction to SQL.</span></span>

7. <span data-ttu-id="5b00e-146">Teraz zarówno biorących udział w transakcji rozproszonych usługi.</span><span class="sxs-lookup"><span data-stu-id="5b00e-146">Now, both are enlisted in a DTC distributed transaction.</span></span>

## <a name="single-phase-commit-optimization"></a><span data-ttu-id="5b00e-147">Jedna faza zatwierdzania optymalizacji</span><span class="sxs-lookup"><span data-stu-id="5b00e-147">Single Phase Commit Optimization</span></span>

<span data-ttu-id="5b00e-148">Protokół zatwierdzania pojedynczej fazy jest bardziej wydajny w czasie wykonywania, ponieważ wszystkie aktualizacje są wykonywane bez żadnej bezpośredniej koordynacji.</span><span class="sxs-lookup"><span data-stu-id="5b00e-148">The Single Phase Commit protocol is more efficient at runtime as all updates are done without any explicit coordination.</span></span> <span data-ttu-id="5b00e-149">Aby skorzystać z tej optymalizacji, należy zaimplementować usługę Resource Manager za pomocą <xref:System.Transactions.ISinglePhaseNotification> interfejsu dla zasobu i zarejestrować w transakcji przy użyciu <xref:System.Transactions.Transaction.EnlistDurable%2A> <xref:System.Transactions.Transaction.EnlistVolatile%2A> metody lub.</span><span class="sxs-lookup"><span data-stu-id="5b00e-149">To take advantage of this optimization, you should implement a resource manager using <xref:System.Transactions.ISinglePhaseNotification> interface for the resource and enlist in a transaction using the <xref:System.Transactions.Transaction.EnlistDurable%2A> or <xref:System.Transactions.Transaction.EnlistVolatile%2A> method.</span></span> <span data-ttu-id="5b00e-150">W odniesieniu do parametru *EnlistmentOptions* należy <xref:System.Transactions.EnlistmentOptions.None> upewnić się, że zostanie wykonane zatwierdzenie pojedynczej fazy.</span><span class="sxs-lookup"><span data-stu-id="5b00e-150">Specifically, the *EnlistmentOptions* parameter should equal to <xref:System.Transactions.EnlistmentOptions.None> to ensure that a single phase commit would be performed.</span></span>

<span data-ttu-id="5b00e-151">Ponieważ <xref:System.Transactions.ISinglePhaseNotification> pochodzi od klasy interfejs <xref:System.Transactions.IEnlistmentNotification> interfejsu, jeśli Twój Menedżera zasobów jest nieodpowiedni dla jednego etapu zatwierdzania, może nadal odbierać fazy dwa powiadomienia zatwierdzania.</span><span class="sxs-lookup"><span data-stu-id="5b00e-151">Since the <xref:System.Transactions.ISinglePhaseNotification> interface derives from the <xref:System.Transactions.IEnlistmentNotification> interface, if your RM is not eligible for single phase commit, it can still receive the two phase commit notifications.</span></span> <span data-ttu-id="5b00e-152">W przypadku otrzymania swojego menedżera zasobów <xref:System.Transactions.ISinglePhaseNotification.SinglePhaseCommit%2A> powiadomienie z Menedżer transakcji, jego starać się wykonują pracę niezbędne do zatwierdzania i odpowiednio informują menedżera transakcji, jeśli transakcja ma zostać przekazana lub wycofana przez wywołanie metody <xref:System.Transactions.SinglePhaseEnlistment.Committed%2A>, <xref:System.Transactions.SinglePhaseEnlistment.Aborted%2A>, lub <xref:System.Transactions.SinglePhaseEnlistment.InDoubt%2A> metody w <xref:System.Transactions.SinglePhaseEnlistment> parametru.</span><span class="sxs-lookup"><span data-stu-id="5b00e-152">If your RM receives a <xref:System.Transactions.ISinglePhaseNotification.SinglePhaseCommit%2A> notification from the TM, it should try to do the work necessary for it to commit and correspondingly inform the transaction manager if the transaction is to be committed or rolled back by calling the <xref:System.Transactions.SinglePhaseEnlistment.Committed%2A>, <xref:System.Transactions.SinglePhaseEnlistment.Aborted%2A>, or <xref:System.Transactions.SinglePhaseEnlistment.InDoubt%2A> method on the <xref:System.Transactions.SinglePhaseEnlistment> parameter.</span></span> <span data-ttu-id="5b00e-153">Odpowiedź <xref:System.Transactions.Enlistment.Done%2A> na rejestrację na tym etapie oznacza semantykę tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="5b00e-153">A response of <xref:System.Transactions.Enlistment.Done%2A> on the enlistment at this stage implies ReadOnly semantics.</span></span> <span data-ttu-id="5b00e-154">W związku z tym nie należy wysyłać odpowiedzi <xref:System.Transactions.Enlistment.Done%2A> oprócz innych metod.</span><span class="sxs-lookup"><span data-stu-id="5b00e-154">Therefore, you should not reply <xref:System.Transactions.Enlistment.Done%2A> in addition to any of the other methods.</span></span>

<span data-ttu-id="5b00e-155">Jeśli istnieje tylko jedna nietrwała Rejestracja i nie ma trwałej rejestracji, nietrwała Rejestracja odbiera powiadomienie SPC.</span><span class="sxs-lookup"><span data-stu-id="5b00e-155">If there is only one volatile enlistment and no durable enlistment, the volatile enlistment receives SPC notification.</span></span> <span data-ttu-id="5b00e-156">Jeśli istnieją jakieś nietrwałe rejestracje i tylko jedna trwała rejestracja, nietrwałe rejestracji odbierają 2PC.</span><span class="sxs-lookup"><span data-stu-id="5b00e-156">If there are any volatile enlistments and only one durable enlistment, the volatile enlistments receive 2PC.</span></span> <span data-ttu-id="5b00e-157">Po zakończeniu trwałej rejestracji odbiera SPC.</span><span class="sxs-lookup"><span data-stu-id="5b00e-157">When it is completed, the durable enlistment receives SPC.</span></span>

## <a name="see-also"></a><span data-ttu-id="5b00e-158">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="5b00e-158">See also</span></span>

- [<span data-ttu-id="5b00e-159">Rejestrowanie zasobów jako uczestników transakcji</span><span class="sxs-lookup"><span data-stu-id="5b00e-159">Enlisting Resources as Participants in a Transaction</span></span>](enlisting-resources-as-participants-in-a-transaction.md)
- [<span data-ttu-id="5b00e-160">Zatwierdzanie transakcji jednofazowe i wielofazowe</span><span class="sxs-lookup"><span data-stu-id="5b00e-160">Committing a Transaction in Single-Phase and Multi-Phase</span></span>](committing-a-transaction-in-single-phase-and-multi-phase.md)
