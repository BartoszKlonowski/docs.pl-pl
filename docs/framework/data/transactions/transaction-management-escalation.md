---
title: "Eskalacja zarządzania transakcji"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 1e96331e-31b6-4272-bbbd-29ed1e110460
caps.latest.revision: "3"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 0ac45390d78f4fbce15c8910fcdcc95713c5898a
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/18/2017
---
# <a name="transaction-management-escalation"></a><span data-ttu-id="f1b70-102">Eskalacja zarządzania transakcji</span><span class="sxs-lookup"><span data-stu-id="f1b70-102">Transaction Management Escalation</span></span>
<span data-ttu-id="f1b70-103">System Windows obsługuje zestaw usług i moduły, które razem stanowią Menedżera transakcji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-103">Windows hosts a set of services and modules that together constitute a transaction manager.</span></span> <span data-ttu-id="f1b70-104">Eskalacja zarządzania transakcji opisano proces migrację transakcji z jeden ze składników Menedżera transakcji na inny.</span><span class="sxs-lookup"><span data-stu-id="f1b70-104">Transaction management escalation describes the process of migrating a transaction from one of the transaction manager's components to another.</span></span>  
  
 <span data-ttu-id="f1b70-105"><xref:System.Transactions>zawiera składnik menedżera transakcji, która koordynuje transakcji związanej z co najwyżej jednego zasobu trwałe lub wiele zasobów volatile.</span><span class="sxs-lookup"><span data-stu-id="f1b70-105"><xref:System.Transactions> includes a transaction manager component that coordinates a transaction involving at most, a single durable resource or multiple volatile resources.</span></span> <span data-ttu-id="f1b70-106">Ponieważ menedżera transakcji używa tylko wywołania domeny należącymi do tej aplikacji, zapewni najlepszą wydajność.</span><span class="sxs-lookup"><span data-stu-id="f1b70-106">Because the transaction manager uses only intra-application domain calls, it yields the best performance.</span></span> <span data-ttu-id="f1b70-107">Deweloperzy muszą nie komunikują się z menedżerem transakcji bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="f1b70-107">Developers need not interact with the transaction manager directly.</span></span> <span data-ttu-id="f1b70-108">Zamiast tego wspólnej infrastruktury, definiujący interfejsów, wspólnego zachowania i klasy pomocy są dostarczane przez <xref:System.Transactions> przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="f1b70-108">Instead, a common infrastructure that defines interfaces, common behavior, and helper classes is provided by the <xref:System.Transactions> namespace.</span></span>  
  
 <span data-ttu-id="f1b70-109">Jeśli chcesz podać transakcji do obiektu w innej domenie aplikacji (w tym w granicach procesu i komputera) na tym samym komputerze <xref:System.Transactions> infrastruktury automatycznie Eskalowanie transakcji, które mają być zarządzane przez firmę Microsoft Koordynator transakcji rozproszonych (MSDTC).</span><span class="sxs-lookup"><span data-stu-id="f1b70-109">When you want to provide the transaction to an object in another application domain (including across process and machine boundaries) on the same computer, the <xref:System.Transactions> infrastructure automatically escalates the transaction to be managed by the Microsoft Distributed Transaction Coordinator (MSDTC).</span></span> <span data-ttu-id="f1b70-110">Eskalacji ma miejsce, gdy zarejestrować innego menedżera zasobów trwałe.</span><span class="sxs-lookup"><span data-stu-id="f1b70-110">The escalation also occurs if you enlist another durable resource manager.</span></span> <span data-ttu-id="f1b70-111">Gdy przekazany, transakcja pozostaje zarządzanych w stanie z podwyższonym poziomem uprawnień do momentu jego zakończenia.</span><span class="sxs-lookup"><span data-stu-id="f1b70-111">When escalated, the transaction remains managed in its elevated state until its completion.</span></span>  
  
 <span data-ttu-id="f1b70-112">Między <xref:System.Transactions> transakcji i transakcji MSDTC nie pośredniczące typu transakcji, które są udostępniane za pośrednictwem awansowanie jednego etapu rejestracji (PSPE).</span><span class="sxs-lookup"><span data-stu-id="f1b70-112">Between the <xref:System.Transactions> transaction and MSDTC transaction, there is an intermediary type of transaction that is made available through the Promotable Single Phase Enlistment (PSPE).</span></span> <span data-ttu-id="f1b70-113">PSPE jest inny mechanizm ważne w <xref:System.Transactions> dla optymalizacji wydajności.</span><span class="sxs-lookup"><span data-stu-id="f1b70-113">PSPE is another important mechanism in <xref:System.Transactions> for performance optimization.</span></span> <span data-ttu-id="f1b70-114">Umożliwia trwałe zasób zdalny, znajduje się w domenie innej aplikacji, proces lub komputera, aby uczestniczyć w <xref:System.Transactions> transakcji bez powodowania, która ma zostać przekazany do transakcji usługi MSDTC.</span><span class="sxs-lookup"><span data-stu-id="f1b70-114">It allows a remote durable resource, located in a different application domain, process or computer, to participate in a <xref:System.Transactions> transaction without causing it to be escalated to an MSDTC transaction.</span></span> <span data-ttu-id="f1b70-115">Aby uzyskać więcej informacji o PSPE, zobacz [rejestrowanie zasobów jako uczestnicy transakcji](../../../../docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md).</span><span class="sxs-lookup"><span data-stu-id="f1b70-115">For more information about PSPE, see [Enlisting Resources as Participants in a Transaction](../../../../docs/framework/data/transactions/enlisting-resources-as-participants-in-a-transaction.md).</span></span>  
  
## <a name="how-escalation-is-initiated"></a><span data-ttu-id="f1b70-116">Jak jest inicjowane eskalacji</span><span class="sxs-lookup"><span data-stu-id="f1b70-116">How Escalation is Initiated</span></span>  
 <span data-ttu-id="f1b70-117">Ponieważ MSDTC znajduje się w osobnym procesie i zamocowaniem transakcji MSDTC wyniki w wiadomości przesyłanych przez proces eskalacji transakcji powoduje zmniejszenie wydajności.</span><span class="sxs-lookup"><span data-stu-id="f1b70-117">Transaction escalation reduces performance because the MSDTC resides in a separate process, and escalating a transaction to the MSDTC results in messages being sent across process.</span></span> <span data-ttu-id="f1b70-118">Aby zwiększyć wydajność, należy opóźnienie lub zapobiec eskalacji do usługi MSDTC; w związku z tym musisz wiedzieć, jak i kiedy eskalacji jest inicjowana.</span><span class="sxs-lookup"><span data-stu-id="f1b70-118">To improve performance, you should delay or avoid escalation to MSDTC; thus, you need to know how and when the escalation is initiated.</span></span>  
  
 <span data-ttu-id="f1b70-119">Tak długo, jak <xref:System.Transactions> infrastruktury obsługi lotnych zasobów i co najwyżej jeden trwały zasób, który obsługuje jednofazowy powiadomień, pozostanie transakcji w prawo własności <xref:System.Transactions> infrastruktury.</span><span class="sxs-lookup"><span data-stu-id="f1b70-119">As long as the <xref:System.Transactions> infrastructure handles volatile resources and at most one durable resource that supports single-phase notifications, the transaction remains in the ownership of the <xref:System.Transactions> infrastructure.</span></span> <span data-ttu-id="f1b70-120">Menedżer transakcji korzysta tylko do tych zasobów, że na żywo, w tej samej domenie aplikacji i dla których rejestrowania (zapisywania wyniku transakcji na dysku) nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="f1b70-120">The transaction manager avails itself only to those resources that live in the same application domain and for which logging (writing the transaction outcome to disk) is not required.</span></span> <span data-ttu-id="f1b70-121">Eskalację, które spowodowało, że <xref:System.Transactions> infrastruktury transferowania własność transakcji na MSDTC się stanie po:</span><span class="sxs-lookup"><span data-stu-id="f1b70-121">An escalation that results in the <xref:System.Transactions> infrastructure transferring the ownership of the transaction to MSDTC happens when:</span></span>  
  
-   <span data-ttu-id="f1b70-122">Co najmniej jeden trwały zasobem, który nie obsługuje jednofazowy powiadomień jest zarejestrowany w transakcji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-122">At least one durable resource that does not support single-phase notifications is enlisted in the transaction.</span></span>  
  
-   <span data-ttu-id="f1b70-123">Co najmniej dwa trwałe zasobów, które obsługują jednofazowy powiadomienia biorących udział w transakcji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-123">At least two durable resources that support single-phase notifications are enlisted in the transaction.</span></span> <span data-ttu-id="f1b70-124">Na przykład rejestrowanie pojedynczego połączenia z [!INCLUDE[sqprsqlong](../../../../includes/sqprsqlong-md.md)] powoduje, że nie można podwyższyć poziomu transakcji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-124">For example, enlisting a single connection with [!INCLUDE[sqprsqlong](../../../../includes/sqprsqlong-md.md)] does not cause a transaction to be promoted.</span></span> <span data-ttu-id="f1b70-125">Jednak zawsze przy otwieraniu drugie połączenie z [!INCLUDE[sqprsqlong](../../../../includes/sqprsqlong-md.md)] bazy danych, co powoduje bazy danych zarejestrować, <xref:System.Transactions> infrastruktury wykrywa on jest drugi trwałe zasobów w transakcji, a Eskalowanie go do transakcji MSDTC.</span><span class="sxs-lookup"><span data-stu-id="f1b70-125">However, whenever you open a second connection to a [!INCLUDE[sqprsqlong](../../../../includes/sqprsqlong-md.md)] database causing the database to enlist, the <xref:System.Transactions> infrastructure detects that it is the second durable resource in the transaction, and escalates it to an MSDTC transaction.</span></span>  
  
-   <span data-ttu-id="f1b70-126">Żądanie do transakcji do domeny innej aplikacji lub inny proces "organizowania" jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="f1b70-126">A request to "marshal" the transaction to a different application domain or different process is invoked.</span></span> <span data-ttu-id="f1b70-127">Na przykład serializacji obiektu transakcji granicy domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-127">For example, the serialization of the transaction object across an application domain boundary.</span></span> <span data-ttu-id="f1b70-128">Obiekt transakcji jest przekazywane przez wartość, co oznacza, że każda próba przekazania go granicy domeny aplikacji (nawet w tym samym procesie) powoduje serializacji obiektu transakcji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-128">The transaction object is marshaled-by-value, meaning that any attempt to pass it across an application domain boundary (even in the same process) results in serialization of the transaction object.</span></span> <span data-ttu-id="f1b70-129">Można przekazać obiektów transakcji przez wywołania zdalnej metody pobierającej <xref:System.Transactions.Transaction> jako parametr lub możesz wykonać następujące czynności dostępu zdalnego składników transakcyjnych obsługiwany.</span><span class="sxs-lookup"><span data-stu-id="f1b70-129">You can pass the transaction objects by making a call on a remote method that takes a <xref:System.Transactions.Transaction> as a parameter or you can try to access a remote transactional-serviced component.</span></span> <span data-ttu-id="f1b70-130">Serializuje obiekt transakcji i powoduje eskalacji jako podczas transakcji jest serializowany w domenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-130">This serializes the transaction object and results in an escalation, as when a transaction is serialized across an application domain.</span></span> <span data-ttu-id="f1b70-131">Jest dystrybuowany i lokalny Menedżer transakcji nie jest już odpowiednie.</span><span class="sxs-lookup"><span data-stu-id="f1b70-131">It is being distributed and the local transaction manager is no longer adequate.</span></span>  
  
 <span data-ttu-id="f1b70-132">Poniższa tabela zawiera listę wszystkich możliwych wyjątków, które mogą być generowane podczas eskalacji.</span><span class="sxs-lookup"><span data-stu-id="f1b70-132">The following table lists all the possible exceptions that can be thrown during escalation.</span></span>  
  
|<span data-ttu-id="f1b70-133">Typ wyjątku</span><span class="sxs-lookup"><span data-stu-id="f1b70-133">Exception type</span></span>|<span data-ttu-id="f1b70-134">Warunek</span><span class="sxs-lookup"><span data-stu-id="f1b70-134">Condition</span></span>|  
|--------------------|---------------|  
|<xref:System.InvalidOperationException>|<span data-ttu-id="f1b70-135">Podjęto próbę eskalować transakcji z poziomu izolacji jest taki sam, <xref:System.Transactions.IsolationLevel.Snapshot>.</span><span class="sxs-lookup"><span data-stu-id="f1b70-135">An attempt to escalate a transaction with isolation level equal to <xref:System.Transactions.IsolationLevel.Snapshot>.</span></span>|  
|<xref:System.Transactions.TransactionAbortedException>|<span data-ttu-id="f1b70-136">Menedżer transakcji nie działa.</span><span class="sxs-lookup"><span data-stu-id="f1b70-136">The transaction manager is down.</span></span>|  
|<xref:System.Transactions.TransactionException>|<span data-ttu-id="f1b70-137">Eskalacji kończy się niepowodzeniem i aplikacji zostało przerwane.</span><span class="sxs-lookup"><span data-stu-id="f1b70-137">The escalation fails and the application is aborted.</span></span>|
