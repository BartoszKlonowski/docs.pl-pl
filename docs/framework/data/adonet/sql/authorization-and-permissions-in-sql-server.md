---
title: Autoryzacja i uprawnienia w programie SQL Server
description: Dowiedz się, jak jawnie przyznać uprawnienia do tworzenia obiektów bazy danych, które są dostępne dla użytkowników w SQL Server z ADO.NET.
ms.date: 03/30/2017
ms.assetid: d340405c-91f4-4837-a3cc-a238ee89888a
ms.openlocfilehash: 748d40ff2c64ae59f43e6296ef591efcb5ff9831
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/24/2020
ms.locfileid: "91197498"
---
# <a name="authorization-and-permissions-in-sql-server"></a><span data-ttu-id="7352d-103">Autoryzacja i uprawnienia w programie SQL Server</span><span class="sxs-lookup"><span data-stu-id="7352d-103">Authorization and Permissions in SQL Server</span></span>

<span data-ttu-id="7352d-104">Podczas tworzenia obiektów bazy danych należy jawnie udzielić uprawnień, aby były dostępne dla użytkowników.</span><span class="sxs-lookup"><span data-stu-id="7352d-104">When you create database objects, you must explicitly grant permissions to make them accessible to users.</span></span> <span data-ttu-id="7352d-105">Każdy zabezpieczany obiekt ma uprawnienia, które mogą zostać przyznane podmiotowi zabezpieczeń przy użyciu instrukcji uprawnień.</span><span class="sxs-lookup"><span data-stu-id="7352d-105">Every securable object has permissions that can be granted to a principal using permission statements.</span></span>  
  
## <a name="the-principle-of-least-privilege"></a><span data-ttu-id="7352d-106">Zasada najniższych uprawnień</span><span class="sxs-lookup"><span data-stu-id="7352d-106">The Principle of Least Privilege</span></span>  

 <span data-ttu-id="7352d-107">Opracowywanie aplikacji przy użyciu podejścia z najniższymi uprawnieniami konta użytkownika (LUA) to ważna część obrony, szczegółowej strategii dotyczącej liczników zagrożeń zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="7352d-107">Developing an application using a least-privileged user account (LUA) approach is an important part of a defensive, in-depth strategy for countering security threats.</span></span> <span data-ttu-id="7352d-108">Podejście LUA gwarantuje, że użytkownicy będą przestrzegać zasad najniższych uprawnień i zawsze logować się z ograniczonymi kontami użytkowników.</span><span class="sxs-lookup"><span data-stu-id="7352d-108">The LUA approach ensures that users follow the principle of least privilege and always log on with limited user accounts.</span></span> <span data-ttu-id="7352d-109">Zadania administracyjne są rozbite przy użyciu stałych ról serwera, a korzystanie z `sysadmin` stałej roli serwera jest poważnie ograniczone.</span><span class="sxs-lookup"><span data-stu-id="7352d-109">Administrative tasks are broken out using fixed server roles, and the use of the `sysadmin` fixed server role is severely restricted.</span></span>  
  
 <span data-ttu-id="7352d-110">Zawsze stosuj zasadę najniższych uprawnień podczas udzielania uprawnień użytkownikom bazy danych.</span><span class="sxs-lookup"><span data-stu-id="7352d-110">Always follow the principle of least privilege when granting permissions to database users.</span></span> <span data-ttu-id="7352d-111">Przyznaj użytkownikowi lub roli minimalne uprawnienia wymagane do wykonania danego zadania.</span><span class="sxs-lookup"><span data-stu-id="7352d-111">Grant the minimum permissions necessary to a user or role to accomplish a given task.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="7352d-112">Opracowywanie i testowanie aplikacji przy użyciu podejścia LUA powoduje dodanie stopnia trudności w procesie opracowywania.</span><span class="sxs-lookup"><span data-stu-id="7352d-112">Developing and testing an application using the LUA approach adds a degree of difficulty to the development process.</span></span> <span data-ttu-id="7352d-113">Łatwiej jest tworzyć obiekty i pisać kod podczas logowania jako administrator systemu lub właściciel bazy danych niż przy użyciu konta LUA.</span><span class="sxs-lookup"><span data-stu-id="7352d-113">It is easier to create objects and write code while logged on as a system administrator or database owner than it is using a LUA account.</span></span> <span data-ttu-id="7352d-114">Aplikacje korzystające z wysoce uprzywilejowanego konta mogą jednak zasłaniać wpływ ograniczonej funkcjonalności w przypadku próby uruchomienia aplikacji wymagającej podwyższonego poziomu uprawnień w celu poprawnego działania.</span><span class="sxs-lookup"><span data-stu-id="7352d-114">However, developing applications using a highly privileged account can obfuscate the impact of reduced functionality when least privileged users attempt to run an application that requires elevated permissions in order to function correctly.</span></span> <span data-ttu-id="7352d-115">Przyznawanie nadmiernych uprawnień użytkownikom w celu ponownego uzyskania utraconych funkcji może spowodować, że aplikacja będzie narażona na ataki.</span><span class="sxs-lookup"><span data-stu-id="7352d-115">Granting excessive permissions to users in order to reacquire lost functionality can leave your application vulnerable to attack.</span></span> <span data-ttu-id="7352d-116">Projektowanie, opracowywanie i testowanie aplikacji zalogowanej przy użyciu konta LUA wymusza podejście do planowania zabezpieczeń, które eliminuje nieprzyjemne nieprzyjemny i Temptation, aby udzielić podwyższonych uprawnień jako szybkiej poprawki.</span><span class="sxs-lookup"><span data-stu-id="7352d-116">Designing, developing and testing your application logged on with a LUA account enforces a disciplined approach to security planning that eliminates unpleasant surprises and the temptation to grant elevated privileges as a quick fix.</span></span> <span data-ttu-id="7352d-117">Możesz użyć SQL Server logowania do testowania, nawet jeśli aplikacja jest przeznaczona do wdrożenia przy użyciu uwierzytelniania systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="7352d-117">You can use a SQL Server login for testing even if your application is intended to deploy using Windows authentication.</span></span>  
  
## <a name="role-based-permissions"></a><span data-ttu-id="7352d-118">Uprawnienia oparte na rolach</span><span class="sxs-lookup"><span data-stu-id="7352d-118">Role-Based Permissions</span></span>  

 <span data-ttu-id="7352d-119">Przyznanie uprawnień rolom, a nie użytkownikom, upraszcza administrację zabezpieczeniami.</span><span class="sxs-lookup"><span data-stu-id="7352d-119">Granting permissions to roles rather than to users simplifies security administration.</span></span> <span data-ttu-id="7352d-120">Zestawy uprawnień przypisane do ról są dziedziczone przez wszystkich członków roli.</span><span class="sxs-lookup"><span data-stu-id="7352d-120">Permission sets that are assigned to roles are inherited by all members of the role.</span></span> <span data-ttu-id="7352d-121">Łatwiej jest dodawać i usuwać użytkowników z roli niż w przypadku ponownego tworzenia oddzielnych zestawów uprawnień dla poszczególnych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="7352d-121">It is easier to add or remove users from a role than it is to recreate separate permission sets for individual users.</span></span> <span data-ttu-id="7352d-122">Role mogą być zagnieżdżane; jednak zbyt wiele poziomów zagnieżdżenia może obniżyć wydajność.</span><span class="sxs-lookup"><span data-stu-id="7352d-122">Roles can be nested; however, too many levels of nesting can degrade performance.</span></span> <span data-ttu-id="7352d-123">Możesz również dodać użytkowników do stałych ról bazy danych, aby uprościć przypisywanie uprawnień.</span><span class="sxs-lookup"><span data-stu-id="7352d-123">You can also add users to fixed database roles to simplify assigning permissions.</span></span>  
  
 <span data-ttu-id="7352d-124">Można udzielić uprawnień na poziomie schematu.</span><span class="sxs-lookup"><span data-stu-id="7352d-124">You can grant permissions at the schema level.</span></span> <span data-ttu-id="7352d-125">Użytkownicy automatycznie dziedziczą uprawnienia do wszystkich nowych obiektów utworzonych w schemacie. nie trzeba przyznawać uprawnień w miarę tworzenia nowych obiektów.</span><span class="sxs-lookup"><span data-stu-id="7352d-125">Users automatically inherit permissions on all new objects created in the schema; you do not need to grant permissions as new objects are created.</span></span>  
  
## <a name="permissions-through-procedural-code"></a><span data-ttu-id="7352d-126">Uprawnienia poprzez kod proceduralny</span><span class="sxs-lookup"><span data-stu-id="7352d-126">Permissions Through Procedural Code</span></span>  

 <span data-ttu-id="7352d-127">Hermetyzowanie dostępu do danych za poorednictwem modułów, takich jak procedury składowane i funkcje zdefiniowane przez użytkownika, zapewnia dodatkową warstwę ochrony aplikacji.</span><span class="sxs-lookup"><span data-stu-id="7352d-127">Encapsulating data access through modules such as stored procedures and user-defined functions provides an additional layer of protection around your application.</span></span> <span data-ttu-id="7352d-128">Można uniemożliwić użytkownikom bezpośrednią współpracę z obiektami bazy danych przez przyznanie uprawnień tylko do procedur składowanych lub funkcji przy odmowie uprawnień do obiektów bazowych, takich jak tabele.</span><span class="sxs-lookup"><span data-stu-id="7352d-128">You can prevent users from directly interacting with database objects by granting permissions only to stored procedures or functions while denying permissions to underlying objects such as tables.</span></span> <span data-ttu-id="7352d-129">SQL Server osiąga to przez tworzenie łańcucha własności.</span><span class="sxs-lookup"><span data-stu-id="7352d-129">SQL Server achieves this by ownership chaining.</span></span>  
  
## <a name="permission-statements"></a><span data-ttu-id="7352d-130">Instrukcje dotyczące uprawnień</span><span class="sxs-lookup"><span data-stu-id="7352d-130">Permission Statements</span></span>  

 <span data-ttu-id="7352d-131">W poniższej tabeli opisano trzy instrukcje dotyczące uprawnień języka Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="7352d-131">The three Transact-SQL permission statements are described in the following table.</span></span>  
  
|<span data-ttu-id="7352d-132">Oświadczenie dotyczące uprawnień</span><span class="sxs-lookup"><span data-stu-id="7352d-132">Permission Statement</span></span>|<span data-ttu-id="7352d-133">Opis</span><span class="sxs-lookup"><span data-stu-id="7352d-133">Description</span></span>|  
|--------------------------|-----------------|  
|<span data-ttu-id="7352d-134">DAWAĆ</span><span class="sxs-lookup"><span data-stu-id="7352d-134">GRANT</span></span>|<span data-ttu-id="7352d-135">Przyznaje uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="7352d-135">Grants a permission.</span></span>|  
|<span data-ttu-id="7352d-136">ODWOŁANIA</span><span class="sxs-lookup"><span data-stu-id="7352d-136">REVOKE</span></span>|<span data-ttu-id="7352d-137">Odwołuje uprawnienie.</span><span class="sxs-lookup"><span data-stu-id="7352d-137">Revokes a permission.</span></span> <span data-ttu-id="7352d-138">Jest to domyślny stan nowego obiektu.</span><span class="sxs-lookup"><span data-stu-id="7352d-138">This is the default state of a new object.</span></span> <span data-ttu-id="7352d-139">Uprawnienie odwołane od użytkownika lub roli można nadal dziedziczyć z innych grup lub ról, do których jest przypisany podmiot zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="7352d-139">A permission revoked from a user or role can still be inherited from other groups or roles to which the principal is assigned.</span></span>|  
|<span data-ttu-id="7352d-140">DENY</span><span class="sxs-lookup"><span data-stu-id="7352d-140">DENY</span></span>|<span data-ttu-id="7352d-141">Odmów unieważnia uprawnienia, aby nie można było dziedziczyć.</span><span class="sxs-lookup"><span data-stu-id="7352d-141">DENY revokes a permission so that it cannot be inherited.</span></span> <span data-ttu-id="7352d-142">Odmów ma pierwszeństwo przed wszystkimi uprawnieniami, z wyjątkiem Odmów nie ma zastosowania do właścicieli obiektów lub członków `sysadmin` .</span><span class="sxs-lookup"><span data-stu-id="7352d-142">DENY takes precedence over all permissions, except DENY does not apply to object owners or members of `sysadmin`.</span></span> <span data-ttu-id="7352d-143">Jeśli odmówisz uprawnień do obiektu do `public` roli, odmówiono wszystkim użytkownikom i rolom, z wyjątkiem właścicieli obiektów i `sysadmin` członków.</span><span class="sxs-lookup"><span data-stu-id="7352d-143">If you DENY permissions on an object to the `public` role it is denied to all users and roles except for object owners and `sysadmin` members.</span></span>|  
  
- <span data-ttu-id="7352d-144">Instrukcja GRANT może przypisywać uprawnienia do grupy lub roli, które mogą być dziedziczone przez użytkowników bazy danych.</span><span class="sxs-lookup"><span data-stu-id="7352d-144">The GRANT statement can assign permissions to a group or role that can be inherited by database users.</span></span> <span data-ttu-id="7352d-145">Jednakże instrukcja DENY ma pierwszeństwo przed wszystkimi innymi instrukcjami uprawnień.</span><span class="sxs-lookup"><span data-stu-id="7352d-145">However, the DENY statement takes precedence over all other permission statements.</span></span> <span data-ttu-id="7352d-146">W związku z tym użytkownik, który odmówił uprawnienia, nie może dziedziczyć go z innej roli.</span><span class="sxs-lookup"><span data-stu-id="7352d-146">Therefore, a user who has been denied a permission cannot inherit it from another role.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="7352d-147">Członkom `sysadmin` stałej roli serwera i właścicieli obiektów nie można odmówić uprawnień.</span><span class="sxs-lookup"><span data-stu-id="7352d-147">Members of the `sysadmin` fixed server role and object owners cannot be denied permissions.</span></span>  
  
## <a name="ownership-chains"></a><span data-ttu-id="7352d-148">Łańcuchy własności</span><span class="sxs-lookup"><span data-stu-id="7352d-148">Ownership Chains</span></span>  

 <span data-ttu-id="7352d-149">SQL Server zapewnia, że tylko podmioty zabezpieczeń, którym udzielono uprawnień, mogą uzyskiwać dostęp do obiektów.</span><span class="sxs-lookup"><span data-stu-id="7352d-149">SQL Server ensures that only principals that have been granted permission can access objects.</span></span> <span data-ttu-id="7352d-150">Gdy wiele obiektów bazy danych uzyskuje dostęp nawzajem, sekwencja jest znana jako łańcuch.</span><span class="sxs-lookup"><span data-stu-id="7352d-150">When multiple database objects access each other, the sequence is known as a chain.</span></span> <span data-ttu-id="7352d-151">Gdy SQL Server przechodzą linki w łańcuchu, szacuje uprawnienia inaczej niż w przypadku uzyskiwania dostępu do poszczególnych elementów osobno.</span><span class="sxs-lookup"><span data-stu-id="7352d-151">When SQL Server is traversing the links in the chain, it evaluates permissions differently than it would if it were accessing each item separately.</span></span> <span data-ttu-id="7352d-152">Gdy dostęp do obiektu odbywa się za pomocą łańcucha, SQL Server najpierw porównuje właściciela obiektu z właścicielem obiektu wywołującego (poprzedni link w łańcuchu).</span><span class="sxs-lookup"><span data-stu-id="7352d-152">When an object is accessed through a chain, SQL Server first compares the object's owner to the owner of the calling object (the previous link in the chain).</span></span> <span data-ttu-id="7352d-153">Jeśli oba obiekty mają tego samego właściciela, uprawnienia do obiektu, do którego się odwoływano, nie są sprawdzane.</span><span class="sxs-lookup"><span data-stu-id="7352d-153">If both objects have the same owner, permissions on the referenced object are not checked.</span></span> <span data-ttu-id="7352d-154">Za każdym razem, gdy obiekt uzyskuje dostęp do innego obiektu, który ma innego właściciela, łańcuch własności jest przerwany i SQL Server musi sprawdzić kontekst zabezpieczeń obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="7352d-154">Whenever an object accesses another object that has a different owner, the ownership chain is broken and SQL Server must check the caller's security context.</span></span>  
  
## <a name="procedural-code-and-ownership-chaining"></a><span data-ttu-id="7352d-155">Kod proceduralny i tworzenie łańcucha własności</span><span class="sxs-lookup"><span data-stu-id="7352d-155">Procedural Code and Ownership Chaining</span></span>  

 <span data-ttu-id="7352d-156">Załóżmy, że użytkownik ma przyznane uprawnienia do wykonywania w procedurze składowanej, która wybiera dane z tabeli.</span><span class="sxs-lookup"><span data-stu-id="7352d-156">Suppose that a user is granted execute permissions on a stored procedure that selects data from a table.</span></span> <span data-ttu-id="7352d-157">Jeśli procedura składowana i tabela mają tego samego właściciela, użytkownik nie musi mieć uprawnień do tabeli i może nawet odmówić uprawnień.</span><span class="sxs-lookup"><span data-stu-id="7352d-157">If the stored procedure and the table have the same owner, the user doesn't need to be granted any permissions on the table and can even be denied permissions.</span></span> <span data-ttu-id="7352d-158">Jeśli jednak procedura składowana i tabela mają różnych właścicieli, SQL Server musi sprawdzić uprawnienia użytkownika w tabeli przed zezwoleniem na dostęp do danych.</span><span class="sxs-lookup"><span data-stu-id="7352d-158">However, if the stored procedure and the table have different owners, SQL Server must check the user's permissions on the table before allowing access to the data.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="7352d-159">Tworzenie łańcucha własności nie ma zastosowania w przypadku dynamicznych instrukcji SQL.</span><span class="sxs-lookup"><span data-stu-id="7352d-159">Ownership chaining does not apply in the case of dynamic SQL statements.</span></span> <span data-ttu-id="7352d-160">Aby wywołać procedurę, która wykonuje instrukcję SQL, obiekt wywołujący musi mieć przyznane uprawnienia do odpowiednich tabel, pozostawiając aplikacji narażonych na ataki z iniekcją SQL.</span><span class="sxs-lookup"><span data-stu-id="7352d-160">To call a procedure that executes an SQL statement, the caller must be granted permissions on the underlying tables, leaving your application vulnerable to SQL Injection attack.</span></span> <span data-ttu-id="7352d-161">SQL Server udostępnia nowe mechanizmy, takie jak personifikacja i moduły podpisywania z certyfikatami, które nie wymagają przyznawania uprawnień w tabelach bazowych.</span><span class="sxs-lookup"><span data-stu-id="7352d-161">SQL Server provides new mechanisms, such as impersonation and signing modules with certificates, that do not require granting permissions on the underlying tables.</span></span> <span data-ttu-id="7352d-162">Mogą one być również używane z procedurami składowanymi CLR.</span><span class="sxs-lookup"><span data-stu-id="7352d-162">These can also be used with CLR stored procedures.</span></span>  
  
## <a name="external-resources"></a><span data-ttu-id="7352d-163">Zasoby zewnętrzne</span><span class="sxs-lookup"><span data-stu-id="7352d-163">External Resources</span></span>  

 <span data-ttu-id="7352d-164">Więcej informacji zawierają poniższe zasoby.</span><span class="sxs-lookup"><span data-stu-id="7352d-164">For more information, see the following resources.</span></span>  
  
|<span data-ttu-id="7352d-165">Zasób</span><span class="sxs-lookup"><span data-stu-id="7352d-165">Resource</span></span>|<span data-ttu-id="7352d-166">Opis</span><span class="sxs-lookup"><span data-stu-id="7352d-166">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="7352d-167">Uprawnienia</span><span class="sxs-lookup"><span data-stu-id="7352d-167">Permissions</span></span>](/sql/relational-databases/security/permissions-database-engine)|<span data-ttu-id="7352d-168">Zawiera tematy opisujące hierarchię uprawnień, widoki wykazu i uprawnienia stałych ról serwera i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="7352d-168">Contains topics describing permissions hierarchy, catalog views, and permissions of fixed server and database roles.</span></span>|
  
## <a name="see-also"></a><span data-ttu-id="7352d-169">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="7352d-169">See also</span></span>

- [<span data-ttu-id="7352d-170">Zabezpieczanie aplikacji ADO.NET</span><span class="sxs-lookup"><span data-stu-id="7352d-170">Securing ADO.NET Applications</span></span>](../securing-ado-net-applications.md)
- [<span data-ttu-id="7352d-171">Scenariusze zabezpieczeń aplikacji w programie SQL Server</span><span class="sxs-lookup"><span data-stu-id="7352d-171">Application Security Scenarios in SQL Server</span></span>](application-security-scenarios-in-sql-server.md)
- [<span data-ttu-id="7352d-172">Uwierzytelnianie w programie SQL Server</span><span class="sxs-lookup"><span data-stu-id="7352d-172">Authentication in SQL Server</span></span>](authentication-in-sql-server.md)
- [<span data-ttu-id="7352d-173">Serwer i role bazy danych w programie SQL Server</span><span class="sxs-lookup"><span data-stu-id="7352d-173">Server and Database Roles in SQL Server</span></span>](server-and-database-roles-in-sql-server.md)
- [<span data-ttu-id="7352d-174">Własność i oddzielenie schematu użytkownika w programie SQL Server</span><span class="sxs-lookup"><span data-stu-id="7352d-174">Ownership and User-Schema Separation in SQL Server</span></span>](ownership-and-user-schema-separation-in-sql-server.md)
- [<span data-ttu-id="7352d-175">Omówienie ADO.NET</span><span class="sxs-lookup"><span data-stu-id="7352d-175">ADO.NET Overview</span></span>](../ado-net-overview.md)
