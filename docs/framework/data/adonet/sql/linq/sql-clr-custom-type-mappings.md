---
title: Mapowanie niestandardowego typu SQL CLR
ms.date: 03/30/2017
ms.assetid: d916c7fb-4b56-4214-acbe-5e23365047b2
ms.openlocfilehash: 14d7f8409f93a5414a37a8b1c8e172f53478e817
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/24/2020
ms.locfileid: "91155708"
---
# <a name="sql-clr-custom-type-mappings"></a><span data-ttu-id="884c2-102">Mapowanie niestandardowego typu SQL CLR</span><span class="sxs-lookup"><span data-stu-id="884c2-102">SQL-CLR Custom Type Mappings</span></span>

<span data-ttu-id="884c2-103">Mapowanie typu między SQL Server i środowiska uruchomieniowego języka wspólnego (CLR) jest automatycznie określane przy użyciu narzędzia wiersza polecenia SQLMetal Object Relational Designer (Projektant O/R).</span><span class="sxs-lookup"><span data-stu-id="884c2-103">Type mapping between SQL Server and the common language runtime (CLR) is automatically specified when you use the SQLMetal command-line tool, Object Relational Designer (O/R Designer).</span></span>  
  
 <span data-ttu-id="884c2-104">Gdy nie jest wykonywane żadne dostosowane mapowanie, te narzędzia przypisują domyślne mapowania typów zgodnie z opisem w [mapowaniu typu SQL-CLR](sql-clr-type-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="884c2-104">When no customized mapping is performed, these tools assign default type mappings as described in [SQL-CLR Type Mapping](sql-clr-type-mapping.md).</span></span> <span data-ttu-id="884c2-105">Jeśli chcesz pisać mapowania inaczej niż te wartości domyślne, musisz wykonać pewne dostosowania mapowań typów.</span><span class="sxs-lookup"><span data-stu-id="884c2-105">If you want to type mappings differently from these defaults, you need to do some customization of the type mappings.</span></span>  
  
 <span data-ttu-id="884c2-106">W przypadku dostosowywania mapowań typów Zalecanym podejściem jest wprowadzenie zmian w pliku DBML pośrednim.</span><span class="sxs-lookup"><span data-stu-id="884c2-106">When customizing type mappings, the recommended approach is to make the changes in an intermediary DBML file.</span></span> <span data-ttu-id="884c2-107">Następnie dostosowany plik DBML powinien być używany podczas tworzenia kodu i mapowania plików za pomocą projektanta SQLMetal lub O/R.</span><span class="sxs-lookup"><span data-stu-id="884c2-107">Then, your customized DBML file should be used when you create you code and mapping files with SQLMetal or O/R Designer.</span></span>  
  
 <span data-ttu-id="884c2-108">Po utworzeniu wystąpienia <xref:System.Data.Linq.DataContext> obiektu z plików kodu i mapowania <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> Metoda tworzy bazę danych w oparciu o określone mapowania typu.</span><span class="sxs-lookup"><span data-stu-id="884c2-108">Once you instantiate the <xref:System.Data.Linq.DataContext> object from the code and mapping files, the <xref:System.Data.Linq.DataContext.CreateDatabase%2A?displayProperty=nameWithType> method creates a database based on the type mappings that are specified.</span></span> <span data-ttu-id="884c2-109">Jeśli `type` w mapowaniu nie określono żadnych atrybutów CLR, zostaną użyte domyślne mapowania typu.</span><span class="sxs-lookup"><span data-stu-id="884c2-109">If there are no CLR `type` attributes specified in the mappings, the default type mappings will be used.</span></span>  
  
## <a name="customization-with-sqlmetal-or-or-designer"></a><span data-ttu-id="884c2-110">Dostosowywanie za pomocą projektanta SQLMetal lub O/R</span><span class="sxs-lookup"><span data-stu-id="884c2-110">Customization with SQLMetal or O/R Designer</span></span>  

 <span data-ttu-id="884c2-111">Za pomocą narzędzia SQLMetal i projektanta O/R można automatycznie utworzyć model obiektów, który zawiera informacje o mapowaniu typu wewnątrz lub na zewnątrz pliku kodu.</span><span class="sxs-lookup"><span data-stu-id="884c2-111">With SQLMetal and O/R Designer, you can automatically create an object model that includes the type mapping information inside or outside the code file.</span></span> <span data-ttu-id="884c2-112">Ponieważ te pliki są zastępowane przez projektanta SQLMetal lub O/R, za każdym razem, gdy utworzysz mapowania, Zalecanym podejściem do określenia mapowań typów niestandardowych jest dostosowanie pliku DBML.</span><span class="sxs-lookup"><span data-stu-id="884c2-112">Because these files are overwritten by SQLMetal or O/R Designer, each time you recreate your mappings, the recommended approach to specifying custom type mappings is to customize a DBML file.</span></span>  
  
 <span data-ttu-id="884c2-113">Aby dostosować mapowania typów za pomocą projektanta SQLMetal lub O/R, najpierw wygeneruj plik DBML.</span><span class="sxs-lookup"><span data-stu-id="884c2-113">To customize type mappings with SQLMetal or O/R Designer, first generate a DBML file.</span></span> <span data-ttu-id="884c2-114">Następnie przed wygenerowaniem pliku kodu lub pliku mapowania zmodyfikuj plik DBML, aby zidentyfikować żądane mapowania typu.</span><span class="sxs-lookup"><span data-stu-id="884c2-114">Then, before generating the code file or mapping file, modify the DBML file to identify the desired type mappings.</span></span> <span data-ttu-id="884c2-115">W przypadku SQLMetal należy ręcznie zmienić `Type` `DbType` atrybuty i w pliku DBML, aby umożliwić dostosowanie mapowania typu.</span><span class="sxs-lookup"><span data-stu-id="884c2-115">With SQLMetal, you have to manually change the `Type` and `DbType` attributes in the DBML file to make your type mapping customizations.</span></span> <span data-ttu-id="884c2-116">Za pomocą projektanta O/R można wprowadzać zmiany w projektancie.</span><span class="sxs-lookup"><span data-stu-id="884c2-116">With O/R Designer, you can make your changes within the Designer.</span></span> <span data-ttu-id="884c2-117">Aby uzyskać więcej informacji o korzystaniu z projektanta O/R, zobacz [narzędzia LINQ to SQL w programie Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span><span class="sxs-lookup"><span data-stu-id="884c2-117">For more information about using the O/R Designer, see [LINQ to SQL Tools in Visual Studio](/visualstudio/data-tools/linq-to-sql-tools-in-visual-studio2).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="884c2-118">Niektóre mapowania typów mogą spowodować przepełnienie lub wyjątki utraty danych podczas tłumaczenia do bazy danych lub z niej.</span><span class="sxs-lookup"><span data-stu-id="884c2-118">Some type mappings may result in overflow or data loss exceptions while translating to or from the database.</span></span> <span data-ttu-id="884c2-119">Uważnie Przejrzyj macierz zachowania w czasie wykonywania mapowania typów w [mapowaniu typu SQL-CLR](sql-clr-type-mapping.md) przed wprowadzeniem jakichkolwiek dostosowań.</span><span class="sxs-lookup"><span data-stu-id="884c2-119">Carefully review the Type Mapping Run-time Behavior Matrix in [SQL-CLR Type Mapping](sql-clr-type-mapping.md) before making any customizations.</span></span>  
  
 <span data-ttu-id="884c2-120">Aby dostosowanie mapowania typu zostało rozpoznane przez projektanta SQLMetal lub O/R, należy się upewnić, że te narzędzia są dostarczane ze ścieżką do niestandardowego pliku DBML podczas generowania pliku kodu lub zewnętrznego pliku mapowania.</span><span class="sxs-lookup"><span data-stu-id="884c2-120">In order for your type mapping customizations to be recognized by SQLMetal or O/R Designer, you need to make sure that these tools are supplied with the path to your custom DBML file when you generate your code file or external mapping file.</span></span> <span data-ttu-id="884c2-121">Chociaż nie jest to wymagane do dostosowywania mapowania typów, zaleca się, aby zawsze oddzielić informacje o mapowaniu typu z pliku kodu i wygenerować dodatkowy plik mapowania typu zewnętrznego.</span><span class="sxs-lookup"><span data-stu-id="884c2-121">Although not required for type mapping customization, it is recommended that you always separate your type mapping information from your code file and generate the additional external type mapping file.</span></span> <span data-ttu-id="884c2-122">Wykonanie tej czynności pozostawi pewnej elastyczności, nie wymagając, aby plik kodu został ponownie skompilowany.</span><span class="sxs-lookup"><span data-stu-id="884c2-122">Doing so will leave some flexibility by not requiring that the code file be recompiled.</span></span>  
  
## <a name="incorporating-database-changes"></a><span data-ttu-id="884c2-123">Uwzględnianie zmian w bazie danych</span><span class="sxs-lookup"><span data-stu-id="884c2-123">Incorporating Database Changes</span></span>  

 <span data-ttu-id="884c2-124">Gdy baza danych ulegnie zmianie, należy zaktualizować plik DBML w celu odzwierciedlenia tych zmian.</span><span class="sxs-lookup"><span data-stu-id="884c2-124">When your database changes, you will need to update your DBML file to reflect those changes.</span></span> <span data-ttu-id="884c2-125">Jednym ze sposobów jest automatyczne utworzenie nowego pliku DBML, a następnie ponowne przeprowadzenie dostosowań mapowania typu.</span><span class="sxs-lookup"><span data-stu-id="884c2-125">One way to do this is to automatically create a new DBML file and then re-do your type mapping customizations.</span></span> <span data-ttu-id="884c2-126">Alternatywnie można porównać różnice między nowym plikiem DBML i dostosowanym plikiem DBML i ręcznie zaktualizować niestandardowy plik DBML w celu odzwierciedlenia zmian w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="884c2-126">Alternatively, you could compare the differences between your new DBML file and your customized DBML file and update your custom DBML file manually to reflect the database change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="884c2-127">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="884c2-127">See also</span></span>

- [<span data-ttu-id="884c2-128">Mapowania typów środowiska SQL-CLR</span><span class="sxs-lookup"><span data-stu-id="884c2-128">SQL-CLR Type Mapping</span></span>](sql-clr-type-mapping.md)
- [<span data-ttu-id="884c2-129">Generowanie kodu w składniku LINQ to SQL</span><span class="sxs-lookup"><span data-stu-id="884c2-129">Code Generation in LINQ to SQL</span></span>](code-generation-in-linq-to-sql.md)
