---
title: LINQ to SQL N-warstwowa przy użyciu usługi sieci Web
ms.date: 03/30/2017
ms.assetid: 9cb10eb8-957f-4beb-a271-5f682016fed2
ms.openlocfilehash: bf13c34a058d33d240e780cb1ce0e665bd1322d2
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/04/2018
ms.locfileid: "43532803"
---
# <a name="linq-to-sql-n-tier-with-web-services"></a>LINQ to SQL N-warstwowa przy użyciu usługi sieci Web
[!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] przeznaczone dla użycia w warstwie środkowej luźno powiązane warstwie dostępu do danych (DAL) takich jak usługi sieci Web. Jeśli Warstwa prezentacji jest to strona sieci Web platformy ASP.NET, a następnie używasz <xref:System.Web.UI.WebControls.LinqDataSource> formant serwera do zarządzania przesyłaniem danych między interfejsu użytkownika sieci Web i [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] w warstwie środkowej. Jeśli Warstwa prezentacji nie jest to strona programu ASP.NET, następnie warstwy środkowej i warstwy prezentacji należy wykonać wykonania dodatkowych czynności, aby zarządzać serializacji i deserializacji obiektu danych.  
  
## <a name="setting-up-linq-to-sql-on-the-middle-tier"></a>Konfigurowanie składnika LINQ to SQL w warstwie środkowej  
 Usługa sieci Web lub aplikacji n warstwowej warstwy środkowej zawiera kontekstu danych i klas jednostek. Te klasy można utworzyć ręcznie lub za pomocą obu SQLMetal.exe lub [!INCLUDE[vs_ordesigner_long](../../../../../../includes/vs-ordesigner-long-md.md)] zgodnie z opisem w innym miejscu w dokumentacji. W czasie projektowania masz możliwość klas obiektów możliwych do serializacji. Aby uzyskać więcej informacji, zobacz [jak: utworzyć serializacji jednostek](../../../../../../docs/framework/data/adonet/sql/linq/how-to-make-entities-serializable.md). Innym rozwiązaniem jest utworzenie oddzielnych zestaw klas, które obejmują dane, które mają być serializowane i projekt do tych typów możliwych do serializacji, po powrocie danych w Twojej [!INCLUDE[vbteclinq](../../../../../../includes/vbteclinq-md.md)] zapytania.  
  
 Następnie zdefiniuj interfejs za pomocą metod wywołujących klientów do pobrania, wstawiania i aktualizowania danych. OPAKOWYWANIE metod interfejsu użytkownika [!INCLUDE[vbteclinq](../../../../../../includes/vbteclinq-md.md)] zapytania. Do obsługi wywołania zdalnej metody i serializacja danych, można użyć dowolnego rodzaju mechanizm serializacji. Jedynym wymaganiem jest, czy w przypadku cykliczne lub dwukierunkowej relacji w modelu obiektu, takim między klienci i zamówienia w modelu obiektów programu standardowa Northwind to należy użyć serializatora, która go obsługuje. Windows Communication Foundation (WCF) <xref:System.Runtime.Serialization.DataContractSerializer> obsługuje relacje dwukierunkowe, ale element XmlSerializer, który jest używany z usługi internetowej WCF nie jest. Jeśli wybrano opcję Użyj elementu XmlSerializer musi upewnij się, że model obiektu nie ma żadnych relacji cyklicznej.  
  
 Aby uzyskać więcej informacji na temat programu Windows Communication Foundation, zobacz [Windows Communication Foundation i usługi danych WCF w programie Visual Studio](/visualstudio/data-tools/windows-communication-foundation-services-and-wcf-data-services-in-visual-studio).  
  
 Implementowanie reguł biznesowych lub inna logika specyficznego dla domeny przy użyciu klasy częściowe i metody na <xref:System.Data.Linq.DataContext> i klas jednostek do podłączenia do [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] zdarzeniach środowiska uruchomieniowego. Aby uzyskać więcej informacji, zobacz [Implementowanie N-warstwowej logiki biznesowej](../../../../../../docs/framework/data/adonet/sql/linq/implementing-business-logic-linq-to-sql.md).  
  
## <a name="defining-the-serializable-types"></a>Definiowanie typów możliwych do serializacji  
 Warstwa prezentacji lub klient musi mieć definicji typu dla klasy, które będą otrzymywać z warstwy środkowej. Te typy można klas jednostek, samodzielnie lub specjalne klasy, które umieszczają w otoce tylko niektóre pola z klas jednostek dla niego komunikację zdalną. W każdym przypadku [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] jest całkowicie unconcerned o jak Warstwa prezentacji uzyskuje te definicje typów. Na przykład Warstwa prezentacji wystarczą WCF można automatycznie wygenerować typy mają kopii biblioteki DLL, w którym zdefiniowano tych typów lub tylko zdefiniować własne wersji typów.  
  
## <a name="retrieving-and-inserting-data"></a>Pobieranie i wstawianie danych  
 Warstwa środkowa definiuje interfejs, który określa, jak Warstwa prezentacji uzyskuje dostęp do danych. Na przykład `GetProductByID(int productID)`, lub `GetCustomers()`. W warstwie środkowej treści metody zazwyczaj tworzy nowe wystąpienie klasy <xref:System.Data.Linq.DataContext>, wykonuje zapytanie względem co najmniej jeden z jego tabeli. Warstwa środkowa następnie zwraca wynik w postaci <xref:System.Collections.Generic.IEnumerable%601>, gdzie `T` jest klasą jednostki lub inny typ, który jest używany do serializacji. Warstwa prezentacji nigdy nie wysyłane lub odbierane zmiennych zapytania bezpośrednio do lub z warstwy środkowej. Dwie warstwy wymiany wartości, obiekty i kolekcje konkretnych danych. Po odebraniu kolekcji, można użyć Warstwa prezentacji [!INCLUDE[vbteclinq](../../../../../../includes/vbteclinq-md.md)] do obiektów i badać je w razie potrzeby.  
  
 Podczas wstawiania danych, warstwy prezentacji, można utworzyć nowy obiekt oraz wysyłać je do warstwy środkowej lub może mieć warstwy środkowej konstruowania obiektu na podstawie wartości, które zawiera. Ogólnie rzecz biorąc pobieranie i wstawianie danych w aplikacjach n warstwowa nie różni się znacznie od procesu w aplikacji warstwy 2. Aby uzyskać więcej informacji, zobacz [zapytanie do bazy danych](../../../../../../docs/framework/data/adonet/sql/linq/querying-the-database.md) i [podejmowanie i przesyłanie zmian danych](../../../../../../docs/framework/data/adonet/sql/linq/making-and-submitting-data-changes.md).  
  
## <a name="tracking-changes-for-updates-and-deletes"></a>Śledzenie zmian aktualizacji i usuwania  
 [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] obsługuje optymistycznej współbieżności na podstawie sygnatur czasowych (zwaną również RowVersions) a oryginalnych wartości. W przypadku tabel bazy danych mają sygnatury czasowe, następnie aktualizacje i usunięcia wymagać wykonaniu dodatkowych czynności w ramach warstwy do warstwy środkowej lub prezentacji. Jednak jeśli oryginalne wartości musi być używany w celu pomyślnych kontroli współbieżności, następnie Warstwa prezentacji jest odpowiedzialny za śledzenie tych wartości i wysyłania ich ponownie w przypadku, gdy to sprawia, że aktualizacje. Jest to spowodowane zmiany wprowadzone do jednostek w ramach warstwy prezentacji nie są śledzone w warstwie środkowej. W rzeczywistości oryginalnego pobierania jednostki i ostateczną aktualizacji, wprowadzone do niego są zazwyczaj wykonywane przez dwa osobne wystąpienia <xref:System.Data.Linq.DataContext>.  
  
 Większa liczba zmian, które sprawia, że warstwa prezentacji, tym bardziej złożone, który staje się do śledzenia tych zmian i pakiet, który je z powrotem do warstwy środkowej. Implementacja mechanizmu komunikacji zmiany zależy wyłącznie od aplikacji. Jedynym wymaganiem jest to, że [!INCLUDE[vbtecdlinq](../../../../../../includes/vbtecdlinq-md.md)] należy zachować szczególną tych oryginalnych wartości, które są wymagane w celu pomyślnych kontroli współbieżności.  
  
 Aby uzyskać więcej informacji, zobacz [pobierania danych i operacje CUD w aplikacjach N-warstwowych (LINQ to SQL)](../../../../../../docs/framework/data/adonet/sql/linq/data-retrieval-and-cud-operations-in-n-tier-applications.md).  
  
## <a name="see-also"></a>Zobacz też  
 [N-warstwowe i zdalne aplikacje z użyciem LINQ to SQL](../../../../../../docs/framework/data/adonet/sql/linq/n-tier-and-remote-applications-with-linq-to-sql.md)  
 [NIB: LinqDataSource Web Server kontrolka — omówienie](https://msdn.microsoft.com/library/104cfc3f-7385-47d3-8a51-830dfa791136)
