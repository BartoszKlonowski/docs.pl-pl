---
title: Wystąpienia użytkownika programu SQL Server Express
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 00c12376-cb26-4317-86ad-e6e9c089be57
ms.openlocfilehash: 2bd67a9315eda4161d4b76e1638f5c08f9598a52
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/12/2020
ms.locfileid: "79174488"
---
# <a name="sql-server-express-user-instances"></a><span data-ttu-id="ae0d8-102">Wystąpienia użytkownika programu SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="ae0d8-102">SQL Server Express User Instances</span></span>
<span data-ttu-id="ae0d8-103">Program Microsoft SQL Server Express Edition (SQL Server Express) obsługuje funkcję wystąpienia użytkownika, która jest`SqlClient`dostępna tylko w przypadku korzystania z dostawcy danych programu .NET Framework dla programu SQL Server ( ).</span><span class="sxs-lookup"><span data-stu-id="ae0d8-103">Microsoft SQL Server Express Edition (SQL Server Express) supports the user instance feature, which is only available when using the .NET Framework Data Provider for SQL Server (`SqlClient`).</span></span> <span data-ttu-id="ae0d8-104">Wystąpienie użytkownika jest osobnym wystąpieniem aparatu bazy danych programu SQL Server Express, które jest generowane przez wystąpienie nadrzędne.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-104">A user instance is a separate instance of the SQL Server Express Database Engine that is generated by a parent instance.</span></span> <span data-ttu-id="ae0d8-105">Wystąpienia użytkowników umożliwiają użytkownikom, którzy nie są administratorami na komputerach lokalnych, dołączanie baz danych programu SQL Server Express i łączenie się z nim.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-105">User instances allow users who are not administrators on their local computers to attach and connect to SQL Server Express databases.</span></span> <span data-ttu-id="ae0d8-106">Każde wystąpienie jest uruchamiane w kontekście zabezpieczeń poszczególnych użytkowników na zasadzie jednego wystąpienia na użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-106">Each instance runs under the security context of the individual user, on a one-instance-per-user basis.</span></span>  
  
## <a name="user-instance-capabilities"></a><span data-ttu-id="ae0d8-107">Możliwości wystąpienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="ae0d8-107">User Instance Capabilities</span></span>  
 <span data-ttu-id="ae0d8-108">Wystąpienia użytkowników są przydatne dla użytkowników, którzy korzystają z systemu Windows przy koncie użytkownika o najniższych uprawnieniach (LUA).</span><span class="sxs-lookup"><span data-stu-id="ae0d8-108">User instances are useful for users who are running Windows under a least-privilege user account (LUA).</span></span> <span data-ttu-id="ae0d8-109">Każdy użytkownik ma uprawnienia`sysadmin`administratora systemu programu SQL Server ( ) nad wystąpieniem uruchomionym na komputerze bez konieczności uruchamiania jako administrator systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-109">Each user has SQL Server system administrator (`sysadmin`) privileges over the instance running on their computer without needing to run as a Windows administrator as well.</span></span> <span data-ttu-id="ae0d8-110">Oprogramowanie wykonujące w wystąpieniu użytkownika z ograniczonymi uprawnieniami nie może wprowadzać zmian w całym systemie, ponieważ wystąpienie programu SQL Server Express jest uruchomione na nie-administratorowym koncie systemu Windows użytkownika, a nie jako usługa.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-110">Software executing on a user instance with limited permissions cannot make system-wide changes because the instance of SQL Server Express is running under the non-administrator Windows account of the user, not as a service.</span></span> <span data-ttu-id="ae0d8-111">Każde wystąpienie użytkownika jest izolowane od jego wystąpienia nadrzędnego i od innych wystąpień użytkownika uruchomionych na tym samym komputerze.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-111">Each user instance is isolated from its parent instance and from any other user instances running on the same computer.</span></span> <span data-ttu-id="ae0d8-112">Bazy danych uruchomione w wystąpieniu użytkownika są otwierane tylko w trybie pojedynczego użytkownika i nie jest możliwe dla wielu użytkowników, aby połączyć się z bazami danych uruchomionymi w wystąpieniu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-112">Databases running on a user instance are opened in single-user mode only, and it is not possible for multiple users to connect to databases running on a user instance.</span></span> <span data-ttu-id="ae0d8-113">Replikacja i zapytania rozproszone są również wyłączone dla wystąpień użytkowników.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-113">Replication and distributed queries are also disabled for user instances.</span></span>
  
> [!NOTE]
> <span data-ttu-id="ae0d8-114">Wystąpienia użytkowników nie są potrzebne użytkownikom, którzy są już administratorami na własnych komputerach lub w scenariuszach obejmujących wielu użytkowników bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-114">User instances are not needed for users who are already administrators on their own computers, or for scenarios involving multiple database users.</span></span>  
  
## <a name="enabling-user-instances"></a><span data-ttu-id="ae0d8-115">Włączanie wystąpień użytkowników</span><span class="sxs-lookup"><span data-stu-id="ae0d8-115">Enabling User Instances</span></span>  
 <span data-ttu-id="ae0d8-116">Aby wygenerować wystąpienia użytkowników, musi być uruchomione wystąpienie nadrzędne programu SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-116">To generate user instances, a parent instance of SQL Server Express must be running.</span></span> <span data-ttu-id="ae0d8-117">Wystąpienia użytkowników są domyślnie włączone po zainstalowaniu programu SQL Server Express i mogą być jawnie włączone lub wyłączone przez administratora systemu wykonującego procedurę składowaną systemu **sp_configure** w wystąpieniu nadrzędnym.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-117">User instances are enabled by default when SQL Server Express is installed, and they can be explicitly enabled or disabled by a system administrator executing the **sp_configure** system stored procedure on the parent instance.</span></span>  
  
```sql  
-- Enable user instances.  
sp_configure 'user instances enabled','1'
  
-- Disable user instances.  
sp_configure 'user instances enabled','0'  
```  
  
 <span data-ttu-id="ae0d8-118">Protokół sieciowy dla wystąpień użytkowników musi być lokalnymi nazwanymi potokami.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-118">The network protocol for user instances must be local Named Pipes.</span></span> <span data-ttu-id="ae0d8-119">Nie można uruchomić wystąpienia użytkownika na zdalnym wystąpieniu programu SQL Server, a logowania programu SQL Server nie są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-119">A user instance cannot be started on a remote instance of SQL Server, and SQL Server logins are not allowed.</span></span>  
  
## <a name="connecting-to-a-user-instance"></a><span data-ttu-id="ae0d8-120">Łączenie się z wystąpieniem użytkownika</span><span class="sxs-lookup"><span data-stu-id="ae0d8-120">Connecting to a User Instance</span></span>  
 <span data-ttu-id="ae0d8-121">I `User Instance` `AttachDBFilename` słowa kluczowe <xref:System.Data.SqlClient.SqlConnection> umożliwiają łączenie się z wystąpieniem użytkownika. <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A></span><span class="sxs-lookup"><span data-stu-id="ae0d8-121">The `User Instance` and `AttachDBFilename`<xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> keywords allow a <xref:System.Data.SqlClient.SqlConnection> to connect to a user instance.</span></span> <span data-ttu-id="ae0d8-122">Wystąpienia użytkownika są również obsługiwane <xref:System.Data.SqlClient.SqlConnectionStringBuilder> `UserInstance` `AttachDBFilename` przez i właściwości.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-122">User instances are also supported by the <xref:System.Data.SqlClient.SqlConnectionStringBuilder>`UserInstance` and `AttachDBFilename` properties.</span></span>  
  
 <span data-ttu-id="ae0d8-123">Zwróć uwagę na następujące informacje na temat przykładowego ciągu połączenia pokazanego poniżej:</span><span class="sxs-lookup"><span data-stu-id="ae0d8-123">Note the following about the sample connection string shown below:</span></span>  
  
- <span data-ttu-id="ae0d8-124">Słowo `Data Source` kluczowe odnosi się do nadrzędnego wystąpienia programu SQL Server Express, które generuje wystąpienie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-124">The `Data Source` keyword refers to the parent instance of SQL Server Express that is generating the user instance.</span></span> <span data-ttu-id="ae0d8-125">Domyślnym wystąpieniem jest .\sqlexpress.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-125">The default instance is .\sqlexpress.</span></span>  
  
- <span data-ttu-id="ae0d8-126">`Integrated Security`jest ustawiona na `true`.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-126">`Integrated Security` is set to `true`.</span></span> <span data-ttu-id="ae0d8-127">Aby połączyć się z wystąpieniem użytkownika, wymagane jest uwierzytelnianie systemu Windows; Logowania programu SQL Server nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-127">To connect to a user instance, Windows Authentication is required; SQL Server logins are not supported.</span></span>  
  
- <span data-ttu-id="ae0d8-128">Jest `User Instance` ustawiona `true`na , która wywołuje wystąpienie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-128">The `User Instance` is set to `true`, which invokes a user instance.</span></span> <span data-ttu-id="ae0d8-129">(Wartość domyślna to `false`.)</span><span class="sxs-lookup"><span data-stu-id="ae0d8-129">(The default is `false`.)</span></span>  
  
- <span data-ttu-id="ae0d8-130">Słowo `AttachDbFileName` kluczowe parametry połączenia jest używane do dołączania pliku podstawowej bazy danych (.mdf), który musi zawierać pełną nazwę ścieżki.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-130">The `AttachDbFileName` connection string keyword is used to attach the primary database file (.mdf), which must include the full path name.</span></span> <span data-ttu-id="ae0d8-131">`AttachDbFileName`odpowiada również kluczom "właściwości rozszerzone" i "nazwa pliku <xref:System.Data.SqlClient.SqlConnection> początkowego" w ciągu połączenia.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-131">`AttachDbFileName` also corresponds to the "extended properties" and "initial file name" keys within a <xref:System.Data.SqlClient.SqlConnection> connection string.</span></span>  
  
- <span data-ttu-id="ae0d8-132">Ciąg `|DataDirectory|` podstawiania ujęty w symbolach potoku odnosi się do katalogu danych aplikacji otwierającej połączenie i zapewnia względną ścieżkę wskazującą lokalizację plików bazy danych i dziennika .mdf i .ldf.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-132">The `|DataDirectory|` substitution string enclosed in the pipe symbols refers to the data directory of the application opening the connection and provides a relative path indicating the location of the .mdf and .ldf database and log files.</span></span> <span data-ttu-id="ae0d8-133">Jeśli chcesz zlokalizować te pliki w innym miejscu, musisz podać pełną ścieżkę do plików.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-133">If you want to locate these files elsewhere, you must provide the full path to the files.</span></span>  
  
```text
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;AttachDBFilename=|DataDirectory|\InstanceDB.mdf;  
Initial Catalog=InstanceDB;  
```  
  
> [!NOTE]
> <span data-ttu-id="ae0d8-134">Można również użyć <xref:System.Data.SqlClient.SqlConnectionStringBuilder> <xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> i właściwości do tworzenia ciągu połączenia w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-134">You can also use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder><xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> and <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> properties to build a connection string at run time.</span></span>  
  
### <a name="using-the-124datadirectory124-substitution-string"></a><span data-ttu-id="ae0d8-135">Używanie ciągu&#124;&#124; &#124;DataDirectory</span><span class="sxs-lookup"><span data-stu-id="ae0d8-135">Using the &#124;DataDirectory&#124; Substitution String</span></span>  
 <span data-ttu-id="ae0d8-136">`AttachDbFileName`został rozszerzony w ADO.NET 2.0 z wprowadzeniem `|DataDirectory|` (zamkniętego w symbolach rur) ciągu podstawienia.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-136">`AttachDbFileName` was extended in ADO.NET 2.0 with the introduction of the `|DataDirectory|` (enclosed in pipe symbols) substitution string.</span></span> <span data-ttu-id="ae0d8-137">`DataDirectory`jest używany w `AttachDbFileName` połączeniu z wskazać względną ścieżkę do pliku danych, umożliwiając deweloperom tworzenie ciągów połączeń, które są oparte na względnej ścieżce do źródła danych, zamiast być wymagane do określenia pełnej ścieżki.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-137">`DataDirectory` is used in conjunction with `AttachDbFileName` to indicate a relative path to a data file, allowing developers to create connection strings that are based on a relative path to the data source instead of being required to specify a full path.</span></span>  
  
 <span data-ttu-id="ae0d8-138">Lokalizacja fizyczna, która `DataDirectory` wskazuje zależy od typu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-138">The physical location that `DataDirectory` points to depends on the type of application.</span></span> <span data-ttu-id="ae0d8-139">W tym przykładzie plik Northwind.mdf, który ma zostać dołączony, znajduje się w folderze \app_data aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-139">In this example, the Northwind.mdf file to be attached is located in the application's \app_data folder.</span></span>  
  
```text
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;  
AttachDBFilename=|DataDirectory|\app_data\Northwind.mdf;  
Initial Catalog=Northwind;  
```  
  
 <span data-ttu-id="ae0d8-140">Gdy `DataDirectory` jest używana, wynikowa ścieżka pliku nie może być wyższa w strukturze katalogów niż katalog wskazany przez ciąg podstawiania.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-140">When `DataDirectory` is used, the resulting file path cannot be higher in the directory structure than the directory pointed to by the substitution string.</span></span> <span data-ttu-id="ae0d8-141">Na przykład jeśli w `DataDirectory` pełni rozwinięty jest C:\AppDirectory\app_data, a następnie przykładowy ciąg połączenia pokazano powyżej działa, ponieważ jest poniżej c:\AppDirectory.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-141">For example, if the fully expanded `DataDirectory` is C:\AppDirectory\app_data, then the sample connection string shown above works because it is below c:\AppDirectory.</span></span> <span data-ttu-id="ae0d8-142">Jednak próba określenia, `DataDirectory` `|DataDirectory|\..\data` jak spowoduje błąd, ponieważ \data nie jest podkatalogiem \AppDirectory.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-142">However, attempting to specify `DataDirectory` as `|DataDirectory|\..\data` will result in an error because \data is not a subdirectory of \AppDirectory.</span></span>  
  
 <span data-ttu-id="ae0d8-143">Jeśli ciąg połączenia ma nieprawidłowo sformatowany <xref:System.ArgumentException> ciąg podstawiania, zostanie ono odrzucone.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-143">If the connection string has an improperly formatted substitution string, an <xref:System.ArgumentException> will be thrown.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ae0d8-144"><xref:System.Data.SqlClient>rozwiązuje ciągi podstawiania na pełne ścieżki względem lokalnego systemu plików komputerowych.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-144"><xref:System.Data.SqlClient> resolves the substitution strings into full paths against the local computer file system.</span></span> <span data-ttu-id="ae0d8-145">W związku z tym nazwy ścieżek serwera zdalnego, HTTP i UNC nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-145">Therefore, remote server, HTTP, and UNC path names are not supported.</span></span> <span data-ttu-id="ae0d8-146">Wyjątek jest zgłaszany po otwarciu połączenia, jeśli serwer nie znajduje się na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-146">An exception is thrown when the connection is opened if the server is not located on the local computer.</span></span>  
  
 <span data-ttu-id="ae0d8-147">Po <xref:System.Data.SqlClient.SqlConnection> otwarciu jest przekierowywane z domyślnego wystąpienia programu SQL Server Express do inicjowanego wystąpienia w czasie wykonywania uruchomionego na koncie wywołującego.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-147">When the <xref:System.Data.SqlClient.SqlConnection> is opened, it is redirected from the default SQL Server Express instance to a run-time initiated instance running under the caller's account.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ae0d8-148">Może być konieczne zwiększenie <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> wartości, ponieważ wystąpienia użytkownika może trwać dłużej niż regularne wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-148">It may be necessary to increase the <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> value since user instances may take longer to load than regular instances.</span></span>  
  
 <span data-ttu-id="ae0d8-149">Poniższy fragment kodu `SqlConnection`otwiera nowy , wyświetla parametry połączenia w oknie konsoli, a `using` następnie zamyka połączenie po zamknięciu bloku kodu.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-149">The following code fragment opens a new `SqlConnection`, displays the connection string in the console window, and then closes the connection when exiting the `using` code block.</span></span>  
  
```vb  
Private Sub OpenSqlConnection()  
    ' Retrieve the connection string.  
    Dim connectionString As String = GetConnectionString()  
  
    Using connection As New SqlConnection(connectionString)  
        connection.Open()  
        Console.WriteLine("ConnectionString: {0}", _  
           connection.ConnectionString)  
    End Using  
End Sub  
```  
  
```csharp  
private static void OpenSqlConnection()  
{  
    // Retrieve the connection string.  
    string connectionString = GetConnectionString();  
  
    using (SqlConnection connection =
        new SqlConnection(connectionString))  
    {  
        connection.Open();  
        Console.WriteLine("ConnectionString: {0}",
             connection.ConnectionString);  
    }  
}  
```  
  
> [!NOTE]
> <span data-ttu-id="ae0d8-150">Wystąpienia użytkowników nie są obsługiwane w kodzie środowiska wykonawczego języka wspólnego (CLR), który jest uruchomiony wewnątrz programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-150">User instances are not supported in common language runtime (CLR) code that is running inside of SQL Server.</span></span> <span data-ttu-id="ae0d8-151">Jest <xref:System.InvalidOperationException> generowany, `Open` jeśli jest <xref:System.Data.SqlClient.SqlConnection> wywoływana na który ma `User Instance=true` w ciągu połączenia.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-151">An <xref:System.InvalidOperationException> is thrown if `Open` is called on a <xref:System.Data.SqlClient.SqlConnection> that has `User Instance=true` in the connection string.</span></span>  
  
## <a name="lifetime-of-a-user-instance-connection"></a><span data-ttu-id="ae0d8-152">Okres istnienia połączenia wystąpienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="ae0d8-152">Lifetime of a User Instance Connection</span></span>  
 <span data-ttu-id="ae0d8-153">W przeciwieństwie do wersji programu SQL Server, które są uruchamiane jako usługa, wystąpienia programu SQL Server Express nie muszą być uruchamiane ręcznie i zatrzymywane.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-153">Unlike versions of SQL Server that run as a service, SQL Server Express instances do not need to be manually started and stopped.</span></span> <span data-ttu-id="ae0d8-154">Za każdym razem, gdy użytkownik loguje się i łączy się z wystąpieniem użytkownika, wystąpienie użytkownika jest uruchamiane, jeśli nie jest jeszcze uruchomione.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-154">Each time a user logs in and connects to a user instance, the user instance is started if it is not already running.</span></span> <span data-ttu-id="ae0d8-155">Bazy danych wystąpień `AutoClose` użytkowników mają ustawioną opcję, dzięki czemu baza danych jest automatycznie zamykana po okresie braku aktywności.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-155">User instance databases have the `AutoClose` option set so that the database is automatically shut down after a period of inactivity.</span></span> <span data-ttu-id="ae0d8-156">Proces sqlservr.exe, który jest uruchamiany jest utrzymywany przez ograniczony okres czasu po zamknięciu ostatniego połączenia z wystąpieniem, więc nie trzeba go ponownie uruchamiać, jeśli inne połączenie zostanie otwarte przed upływem czasu.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-156">The sqlservr.exe process that is started is kept running for a limited time-out period after the last connection to the instance is closed, so it does not need to be restarted if another connection is opened before the time-out has expired.</span></span> <span data-ttu-id="ae0d8-157">Wystąpienie użytkownika zostanie automatycznie zamknięte, jeśli żadne nowe połączenie nie zostanie otwarte przed upływem tego okresu.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-157">The user instance automatically shuts down if no new connection opens before that time-out period has expired.</span></span> <span data-ttu-id="ae0d8-158">Administrator systemu w wystąpieniu nadrzędnym może ustawić czas trwania limitu czasu dla wystąpienia użytkownika za pomocą **sp_configure,** aby zmienić opcję **limitu czasu wystąpienia użytkownika.**</span><span class="sxs-lookup"><span data-stu-id="ae0d8-158">A system administrator on the parent instance can set the duration of the time-out period for a user instance by using **sp_configure** to change the **user instance timeout** option.</span></span> <span data-ttu-id="ae0d8-159">Wartość domyślna to 60 minut.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-159">The default is 60 minutes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ae0d8-160">Jeśli `Min Pool Size` jest używany w ciągu połączenia o wartości większej niż zero, pooler połączenia zawsze będzie obsługiwać kilka otwartych połączeń, a wystąpienie użytkownika nie zostanie automatycznie zamknięty.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-160">If `Min Pool Size` is used in the connection string with a value greater than zero, the connection pooler will always maintain a few opened connections, and the user instance will not automatically shut down.</span></span>  
  
## <a name="how-user-instances-work"></a><span data-ttu-id="ae0d8-161">Jak działają wystąpienia użytkowników</span><span class="sxs-lookup"><span data-stu-id="ae0d8-161">How User Instances Work</span></span>  
 <span data-ttu-id="ae0d8-162">Przy pierwszym generowaniu wystąpienia użytkownika dla każdego użytkownika, **główne** i **msdb** system baz danych są kopiowane z folderu Dane szablonu do ścieżki w katalogu repozytorium danych aplikacji lokalnej użytkownika do wyłącznego użytku przez wystąpienie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-162">The first time a user instance is generated for each user, the **master** and **msdb** system databases are copied from the Template Data folder to a path under the user's local application data repository directory for exclusive use by the user instance.</span></span> <span data-ttu-id="ae0d8-163">Ta ścieżka jest `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`zazwyczaj .</span><span class="sxs-lookup"><span data-stu-id="ae0d8-163">This path is typically `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span></span> <span data-ttu-id="ae0d8-164">Po uruchomieniu wystąpienia użytkownika, **tempdb**, dziennik i pliki śledzenia są również zapisywane w tym katalogu.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-164">When a user instance starts up, the **tempdb**, log, and trace files are also written to this directory.</span></span> <span data-ttu-id="ae0d8-165">Nazwa jest generowana dla wystąpienia, które jest gwarantowane jako unikatowe dla każdego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-165">A name is generated for the instance, which is guaranteed to be unique for each user.</span></span>  
  
 <span data-ttu-id="ae0d8-166">Domyślnie wszyscy członkowie grupy Wbudowane\Użytkownicy systemu Windows mają uprawnienia do łączenia się w wystąpieniu lokalnym, a także do odczytu i wykonywania uprawnień w plikach binarnych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-166">By default all members of the Windows Builtin\Users group are granted permissions to connect on the local instance as well as read and execute permissions on the SQL Server binaries.</span></span> <span data-ttu-id="ae0d8-167">Po zweryfikowaniu poświadczeń użytkownika wywołującego hostowania wystąpienia `sysadmin` użytkownika, ten użytkownik staje się w tym wystąpieniu.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-167">Once the credentials of the calling user hosting the user instance have been verified, that user becomes the `sysadmin` on that instance.</span></span> <span data-ttu-id="ae0d8-168">Tylko pamięć współużytkowana jest włączona dla wystąpień użytkownika, co oznacza, że możliwe są tylko operacje na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-168">Only shared memory is enabled for user instances, which means that only operations on the local machine are possible.</span></span>  
  
 <span data-ttu-id="ae0d8-169">Użytkownikom należy przyznać uprawnienia do odczytu i zapisu w plikach .mdf i .ldf określonych w ciągu połączenia.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-169">Users must be granted both read and write permissions on the .mdf and .ldf files specified in the connection string.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ae0d8-170">Pliki .mdf i .ldf reprezentują odpowiednio pliki bazy danych i dziennika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-170">The .mdf and .ldf files represent the database and log files, respectively.</span></span> <span data-ttu-id="ae0d8-171">Te dwa pliki są dopasowane zestaw, więc należy uważać podczas wykonywania kopii zapasowych i przywracania operacji.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-171">These two files are a matched set, so care must be taken during backup and restore operations.</span></span> <span data-ttu-id="ae0d8-172">Plik bazy danych zawiera informacje o dokładnej wersji pliku dziennika, a baza danych nie zostanie otwarta, jeśli jest połączona z niewłaściwym plikiem dziennika.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-172">The database file contains information about the exact version of the log file, and the database will not open if it is coupled with the wrong log file.</span></span>  
  
 <span data-ttu-id="ae0d8-173">Aby uniknąć uszkodzenia danych, baza danych w wystąpieniu użytkownika jest otwierana z wyłącznym dostępem.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-173">To avoid data corruption, a database in the user instance is opened with exclusive access.</span></span> <span data-ttu-id="ae0d8-174">Jeśli dwa różne wystąpienia użytkownika współużytkuje tę samą bazę danych na tym samym komputerze, użytkownik w pierwszym wystąpieniu musi zamknąć bazę danych, zanim będzie można otworzyć w drugim wystąpieniu.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-174">If two different user instances share the same database on the same computer, the user on the first instance must close the database before it can be opened in a second instance.</span></span>  
  
## <a name="user-instance-scenarios"></a><span data-ttu-id="ae0d8-175">Scenariusze wystąpienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="ae0d8-175">User Instance Scenarios</span></span>  
 <span data-ttu-id="ae0d8-176">Wystąpienia użytkowników zapewniają deweloperom aplikacji bazy danych magazyn danych programu SQL Server, który nie zależy od deweloperów posiadających konta administracyjne na swoich komputerach deweloperskich.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-176">User instances provide developers of database applications with a SQL Server data store that does not depend on developers having administrative accounts on their development computers.</span></span> <span data-ttu-id="ae0d8-177">Wystąpienia użytkowników są oparte na modelu programu Access/Jet, w którym aplikacja bazy danych po prostu łączy się z plikiem, a użytkownik automatycznie ma pełne uprawnienia do wszystkich obiektów bazy danych bez konieczności interwencji administratora systemu w celu przyznania uprawnień.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-177">User instances are based on the Access/Jet model, where the database application simply connects to a file, and the user automatically has full permissions on all of the database objects without needing the intervention of a system administrator to grant permissions.</span></span> <span data-ttu-id="ae0d8-178">Jest przeznaczony do pracy w sytuacjach, gdy użytkownik jest uruchomiony przy koncie użytkownika o najniższych uprawnieniach (LUA) i nie ma uprawnień administracyjnych na serwerze lub komputerze lokalnym, ale musi utworzyć obiekty i aplikacje bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-178">It is intended to work in situations where the user is running under a least-privilege user account (LUA) and does not have administrative privileges on the server or local machine, yet needs to create database objects and applications.</span></span> <span data-ttu-id="ae0d8-179">Wystąpienia użytkowników umożliwiają użytkownikom tworzenie wystąpień w czasie wykonywania, które są uruchamiane w kontekście zabezpieczeń użytkownika, a nie w kontekście zabezpieczeń bardziej uprzywilejowanej usługi systemowej.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-179">User instances allow users to create instances at run time that run under the user's own security context, and not in the security context of a more privileged system service.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="ae0d8-180">Wystąpienia użytkownika powinny być używane tylko w scenariuszach, w których wszystkie aplikacje korzystające z niego są w pełni zaufane.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-180">User instances should only be used in scenarios where all the applications using it are fully trusted.</span></span>  
  
 <span data-ttu-id="ae0d8-181">Scenariusze wystąpienia użytkownika obejmują:</span><span class="sxs-lookup"><span data-stu-id="ae0d8-181">User instance scenarios include:</span></span>  
  
- <span data-ttu-id="ae0d8-182">Każda aplikacja dla jednego użytkownika, w której udostępnianie danych nie jest wymagane.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-182">Any single-user application where sharing data is not required.</span></span>  
  
- <span data-ttu-id="ae0d8-183">Kliknij pozycjęWładne wdrożenie.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-183">ClickOnce deployment.</span></span> <span data-ttu-id="ae0d8-184">Jeśli program .NET Framework 2.0 (lub nowszy) i SQL Server Express są już zainstalowane na komputerze docelowym, pakiet instalacyjny pobrany w wyniku akcji ClickOnce może być zainstalowany i używany przez użytkowników niebędących administratorami.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-184">If .NET Framework 2.0 (or later) and SQL Server Express are already installed on the target computer, the installation package downloaded as a result of a ClickOnce action can be installed and used by non-administrator users.</span></span> <span data-ttu-id="ae0d8-185">Należy zauważyć, że administrator musi zainstalować program SQL Server Express, jeśli jest to część instalacji.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-185">Note that an administrator must install SQL Server Express if that is part of the setup.</span></span> <span data-ttu-id="ae0d8-186">Aby uzyskać więcej informacji, zobacz [ClickOnce Deployment for Windows Forms](../../../winforms/clickonce-deployment-for-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="ae0d8-186">For more information, see [ClickOnce Deployment for Windows Forms](../../../winforms/clickonce-deployment-for-windows-forms.md).</span></span>
  
- <span data-ttu-id="ae0d8-187">Dedykowany hosting ASP.NET przy użyciu uwierzytelniania systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-187">Dedicated ASP.NET hosting using Windows Authentication.</span></span> <span data-ttu-id="ae0d8-188">Pojedyncze wystąpienie programu SQL Server Express może być hostowane w intranecie.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-188">A single SQL Server Express instance can be hosted on an intranet.</span></span> <span data-ttu-id="ae0d8-189">Aplikacja łączy się przy użyciu konta ASPNET Systemu Windows, a nie przy użyciu personifikacji.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-189">The application connects using the ASPNET Windows account, not by using impersonation.</span></span> <span data-ttu-id="ae0d8-190">Wystąpienia użytkowników nie powinny być używane w scenariuszach hostingu innych firm lub udostępniania, w których wszystkie aplikacje współużytkują to samo wystąpienie użytkownika i nie będą już odizolowane od siebie.</span><span class="sxs-lookup"><span data-stu-id="ae0d8-190">User instances should not be used for third-party or shared hosting scenarios where all applications would share the same user instance and would no longer remain isolated from each other.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ae0d8-191">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="ae0d8-191">See also</span></span>

- [<span data-ttu-id="ae0d8-192">SQL Server i ADO.NET</span><span class="sxs-lookup"><span data-stu-id="ae0d8-192">SQL Server and ADO.NET</span></span>](index.md)
- [<span data-ttu-id="ae0d8-193">Parametry połączenia</span><span class="sxs-lookup"><span data-stu-id="ae0d8-193">Connection Strings</span></span>](../connection-strings.md)
- [<span data-ttu-id="ae0d8-194">Łączenie się ze źródłem danych</span><span class="sxs-lookup"><span data-stu-id="ae0d8-194">Connecting to a Data Source</span></span>](../connecting-to-a-data-source.md)
- [<span data-ttu-id="ae0d8-195">Omówienie ADO.NET</span><span class="sxs-lookup"><span data-stu-id="ae0d8-195">ADO.NET Overview</span></span>](../ado-net-overview.md)
