---
title: Wystąpienia użytkownika programu SQL Server Express
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 00c12376-cb26-4317-86ad-e6e9c089be57
ms.openlocfilehash: 7cd02a0a315ffdb155af09ac4e4fabbea1724a4d
ms.sourcegitcommit: d2e1dfa7ef2d4e9ffae3d431cf6a4ffd9c8d378f
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/07/2019
ms.locfileid: "70780832"
---
# <a name="sql-server-express-user-instances"></a><span data-ttu-id="1f1ac-102">Wystąpienia użytkownika programu SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="1f1ac-102">SQL Server Express User Instances</span></span>
<span data-ttu-id="1f1ac-103">Microsoft SQL Server Express Edition (SQL Server Express) obsługuje funkcję wystąpienia użytkownika, która jest dostępna tylko w przypadku używania .NET Framework Dostawca danych dla SQL Server (`SqlClient`).</span><span class="sxs-lookup"><span data-stu-id="1f1ac-103">Microsoft SQL Server Express Edition (SQL Server Express) supports the user instance feature, which is only available when using the .NET Framework Data Provider for SQL Server (`SqlClient`).</span></span> <span data-ttu-id="1f1ac-104">Wystąpienie użytkownika jest osobnym wystąpieniem aparatu bazy danych SQL Server Express, który jest generowany przez wystąpienie nadrzędne.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-104">A user instance is a separate instance of the SQL Server Express Database Engine that is generated by a parent instance.</span></span> <span data-ttu-id="1f1ac-105">Wystąpienia użytkowników umożliwiają użytkownikom, którzy nie są administratorami na swoich komputerach lokalnych, dołączania do SQL Server Express baz danych i łączenia się z nimi.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-105">User instances allow users who are not administrators on their local computers to attach and connect to SQL Server Express databases.</span></span> <span data-ttu-id="1f1ac-106">Każde wystąpienie jest uruchamiane w kontekście zabezpieczeń poszczególnych użytkowników, na podstawie jednego wystąpienia na użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-106">Each instance runs under the security context of the individual user, on a one-instance-per-user basis.</span></span>  
  
## <a name="user-instance-capabilities"></a><span data-ttu-id="1f1ac-107">Możliwości wystąpienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="1f1ac-107">User Instance Capabilities</span></span>  
 <span data-ttu-id="1f1ac-108">Wystąpienia użytkownika są przydatne w przypadku użytkowników, którzy używają systemu Windows w ramach konta użytkownika z najniższymi uprawnieniami (LUA), ponieważ każdy użytkownik`sysadmin`ma uprawnienia administratora systemu SQL Server () względem wystąpienia uruchomionego na jego komputerze bez konieczności uruchamiania jako Windows również administratora.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-108">User instances are useful for users who are running Windows under a least-privilege user account (LUA) because each user has SQL Server system administrator (`sysadmin`) privileges over the instance running on her computer without needing to run as a Windows administrator as well.</span></span> <span data-ttu-id="1f1ac-109">Oprogramowanie wykonywane w wystąpieniu użytkownika z ograniczonymi uprawnieniami nie może wprowadzać zmian na poziomie systemu, ponieważ wystąpienie SQL Server Express jest uruchomione na koncie systemu Windows niebędącym administratorem użytkownika, a nie jako usługa.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-109">Software executing on a user instance with limited permissions cannot make system-wide changes because the instance of SQL Server Express is running under the non-administrator Windows account of the user, not as a service.</span></span> <span data-ttu-id="1f1ac-110">Każde wystąpienie użytkownika jest odizolowane od jego wystąpienia nadrzędnego oraz z dowolnego innego wystąpienia użytkownika działającego na tym samym komputerze.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-110">Each user instance is isolated from its parent instance and from any other user instances running on the same computer.</span></span> <span data-ttu-id="1f1ac-111">Bazy danych działające w wystąpieniu użytkownika są otwierane tylko w trybie jednego użytkownika i nie jest możliwe, aby wielu użytkowników łączyło się z bazami danych działającymi w wystąpieniu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-111">Databases running on a user instance are opened in single-user mode only, and it is not possible for multiple users to connect to databases running on a user instance.</span></span> <span data-ttu-id="1f1ac-112">Replikacja i rozproszone zapytania są również wyłączone dla wystąpień użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-112">Replication and distributed queries are also disabled for user instances.</span></span>  
  
 <span data-ttu-id="1f1ac-113">Aby uzyskać więcej informacji, zobacz "wystąpienia użytkownika" w temacie SQL Server Books Online.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-113">For more information, see "User Instances" in SQL Server Books Online.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1f1ac-114">Wystąpienia użytkownika nie są konieczne dla użytkowników, którzy są już administratorami na swoich komputerach, lub scenariuszy obejmujących wielu użytkowników bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-114">User instances are not needed for users who are already administrators on their own computers, or for scenarios involving multiple database users.</span></span>  
  
## <a name="enabling-user-instances"></a><span data-ttu-id="1f1ac-115">Włączanie wystąpień użytkownika</span><span class="sxs-lookup"><span data-stu-id="1f1ac-115">Enabling User Instances</span></span>  
 <span data-ttu-id="1f1ac-116">Aby wygenerować wystąpienia użytkownika, musi być uruchomione wystąpienie nadrzędne SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-116">To generate user instances, a parent instance of SQL Server Express must be running.</span></span> <span data-ttu-id="1f1ac-117">Wystąpienia użytkownika są domyślnie włączone po zainstalowaniu SQL Server Express i mogą być jawnie włączane lub wyłączane przez administratora systemu, wykonując procedurę składowaną systemu **sp_configure** w wystąpieniu nadrzędnym.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-117">User instances are enabled by default when SQL Server Express is installed, and they can be explicitly enabled or disabled by a system administrator executing the **sp_configure** system stored procedure on the parent instance.</span></span>  
  
```  
-- Enable user instances.  
sp_configure 'user instances enabled','1'   
  
-- Disable user instances.  
sp_configure 'user instances enabled','0'  
```  
  
 <span data-ttu-id="1f1ac-118">Protokół sieciowy dla wystąpień użytkownika musi być lokalnymi nazwanymi potokami.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-118">The network protocol for user instances must be local Named Pipes.</span></span> <span data-ttu-id="1f1ac-119">Wystąpienie użytkownika nie może zostać uruchomione na zdalnym wystąpieniu SQL Server, a logowania SQL Server nie są dozwolone.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-119">A user instance cannot be started on a remote instance of SQL Server, and SQL Server logins are not allowed.</span></span>  
  
## <a name="connecting-to-a-user-instance"></a><span data-ttu-id="1f1ac-120">Nawiązywanie połączenia z wystąpieniem użytkownika</span><span class="sxs-lookup"><span data-stu-id="1f1ac-120">Connecting to a User Instance</span></span>  
 <span data-ttu-id="1f1ac-121">Słowa kluczowe `User Instance` i `AttachDBFilename` <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> umożliwiają nawiązywanie<xref:System.Data.SqlClient.SqlConnection> połączenia z wystąpieniem użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-121">The `User Instance` and `AttachDBFilename`<xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> keywords allow a <xref:System.Data.SqlClient.SqlConnection> to connect to a user instance.</span></span> <span data-ttu-id="1f1ac-122">Wystąpienia użytkownika są również obsługiwane przez <xref:System.Data.SqlClient.SqlConnectionStringBuilder> `UserInstance` właściwości i `AttachDBFilename` .</span><span class="sxs-lookup"><span data-stu-id="1f1ac-122">User instances are also supported by the <xref:System.Data.SqlClient.SqlConnectionStringBuilder>`UserInstance` and `AttachDBFilename` properties.</span></span>  
  
 <span data-ttu-id="1f1ac-123">Zwróć uwagę na następujące informacje dotyczące przykładowych parametrów połączenia przedstawionych poniżej:</span><span class="sxs-lookup"><span data-stu-id="1f1ac-123">Note the following about the sample connection string shown below:</span></span>  
  
- <span data-ttu-id="1f1ac-124">`Data Source` Słowo kluczowe odwołuje się do wystąpienia nadrzędnego SQL Server Express, które generuje wystąpienie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-124">The `Data Source` keyword refers to the parent instance of SQL Server Express that is generating the user instance.</span></span> <span data-ttu-id="1f1ac-125">Wystąpienie domyślne to .\SQLEXPRESS.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-125">The default instance is .\sqlexpress.</span></span>  
  
- <span data-ttu-id="1f1ac-126">`Integrated Security`jest ustawiony na `true`.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-126">`Integrated Security` is set to `true`.</span></span> <span data-ttu-id="1f1ac-127">Aby nawiązać połączenie z wystąpieniem użytkownika, wymagane jest uwierzytelnianie systemu Windows; Nazwy logowania SQL Server nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-127">To connect to a user instance, Windows Authentication is required; SQL Server logins are not supported.</span></span>  
  
- <span data-ttu-id="1f1ac-128">Jest ustawiona na `true`, która wywołuje wystąpienie użytkownika. `User Instance`</span><span class="sxs-lookup"><span data-stu-id="1f1ac-128">The `User Instance` is set to `true`, which invokes a user instance.</span></span> <span data-ttu-id="1f1ac-129">(Wartość domyślna to `false`).</span><span class="sxs-lookup"><span data-stu-id="1f1ac-129">(The default is `false`.)</span></span>  
  
- <span data-ttu-id="1f1ac-130">Słowo kluczowe parametrów połączenia służy do dołączania podstawowego pliku bazy danych (. mdf), który musi zawierać pełną nazwę ścieżki. `AttachDbFileName`</span><span class="sxs-lookup"><span data-stu-id="1f1ac-130">The `AttachDbFileName` connection string keyword is used to attach the primary database file (.mdf), which must include the full path name.</span></span> <span data-ttu-id="1f1ac-131">`AttachDbFileName`odnosi się również do kluczy "właściwości rozszerzone" i "początkowa nazwa pliku" w <xref:System.Data.SqlClient.SqlConnection> parametrach połączenia.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-131">`AttachDbFileName` also corresponds to the "extended properties" and "initial file name" keys within a <xref:System.Data.SqlClient.SqlConnection> connection string.</span></span>  
  
- <span data-ttu-id="1f1ac-132">Ciąg `|DataDirectory|` podstawienia ujęty w symbole potoku odwołuje się do katalogu danych aplikacji otwierającej połączenie i udostępnia ścieżkę względną wskazującą lokalizację plików. mdf i. ldf.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-132">The `|DataDirectory|` substitution string enclosed in the pipe symbols refers to the data directory of the application opening the connection and provides a relative path indicating the location of the .mdf and .ldf database and log files.</span></span> <span data-ttu-id="1f1ac-133">Jeśli chcesz zlokalizować te pliki w innym miejscu, musisz podać pełną ścieżkę do plików.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-133">If you want to locate these files elsewhere, you must provide the full path to the files.</span></span>  
  
```  
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;AttachDBFilename=|DataDirectory|\InstanceDB.mdf;  
Initial Catalog=InstanceDB;  
```  
  
> [!NOTE]
> <span data-ttu-id="1f1ac-134">Można również użyć <xref:System.Data.SqlClient.SqlConnectionStringBuilder> <xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> właściwości i <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> , aby utworzyć parametry połączenia w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-134">You can also use the <xref:System.Data.SqlClient.SqlConnectionStringBuilder><xref:System.Data.SqlClient.SqlConnectionStringBuilder.UserInstance%2A> and <xref:System.Data.SqlClient.SqlConnectionStringBuilder.AttachDBFilename%2A> properties to build a connection string at run time.</span></span>  
  
### <a name="using-the-124datadirectory124-substitution-string"></a><span data-ttu-id="1f1ac-135">Korzystanie z &#124;ciągu podstawiania usługi DataDirectory&#124;</span><span class="sxs-lookup"><span data-stu-id="1f1ac-135">Using the &#124;DataDirectory&#124; Substitution String</span></span>  
 <span data-ttu-id="1f1ac-136">`AttachDbFileName`Program został rozszerzony w ADO.NET 2,0, wprowadzając `|DataDirectory|` ciąg podstawienia (ujęty w nawiasy potoku).</span><span class="sxs-lookup"><span data-stu-id="1f1ac-136">`AttachDbFileName` was extended in ADO.NET 2.0 with the introduction of the `|DataDirectory|` (enclosed in pipe symbols) substitution string.</span></span> <span data-ttu-id="1f1ac-137">`DataDirectory`Program jest używany w połączeniu `AttachDbFileName` z programem w celu wskazania ścieżki względnej do pliku danych, dzięki czemu deweloperzy mogą tworzyć parametry połączenia oparte na ścieżce względnej do źródła danych, a nie są wymagane do określenia pełnej ścieżki.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-137">`DataDirectory` is used in conjunction with `AttachDbFileName` to indicate a relative path to a data file, allowing developers to create connection strings that are based on a relative path to the data source instead of being required to specify a full path.</span></span>  
  
 <span data-ttu-id="1f1ac-138">Fizyczna lokalizacja, `DataDirectory` która wskazuje, zależy od typu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-138">The physical location that `DataDirectory` points to depends on the type of application.</span></span> <span data-ttu-id="1f1ac-139">W tym przykładzie plik Northwind. mdf, który ma zostać dołączony, znajduje się w folderze \app_data aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-139">In this example, the Northwind.mdf file to be attached is located in the application's \app_data folder.</span></span>  
  
```  
Data Source=.\\SQLExpress;Integrated Security=true;  
User Instance=true;  
AttachDBFilename=|DataDirectory|\app_data\Northwind.mdf;  
Initial Catalog=Northwind;  
```  
  
 <span data-ttu-id="1f1ac-140">Gdy `DataDirectory` jest używany, ścieżka pliku wyników nie może być wyższa w strukturze katalogów niż katalog wskazany przez ciąg podstawienia.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-140">When `DataDirectory` is used, the resulting file path cannot be higher in the directory structure than the directory pointed to by the substitution string.</span></span> <span data-ttu-id="1f1ac-141">Jeśli na przykład w pełni rozwinięto `DataDirectory` C:\AppDirectory\app_data, następnie przykładowe parametry połączenia wyświetlane powyżej działają, ponieważ są poniżej c:\AppDirectory.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-141">For example, if the fully expanded `DataDirectory` is C:\AppDirectory\app_data, then the sample connection string shown above works because it is below c:\AppDirectory.</span></span> <span data-ttu-id="1f1ac-142">Jednak próba określenia `DataDirectory` jako spowoduje wystąpienie błędu `|DataDirectory|\..\data` , ponieważ \data nie jest podkatalogiem \AppDirectory.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-142">However, attempting to specify `DataDirectory` as `|DataDirectory|\..\data` will result in an error because \data is not a subdirectory of \AppDirectory.</span></span>  
  
 <span data-ttu-id="1f1ac-143">Jeśli parametry połączenia mają nieprawidłowo sformatowane ciągi podstawienia, <xref:System.ArgumentException> zostanie zgłoszony.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-143">If the connection string has an improperly formatted substitution string, an <xref:System.ArgumentException> will be thrown.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1f1ac-144"><xref:System.Data.SqlClient>rozpoznaje ciągi podstawienia w pełnych ścieżkach do lokalnego systemu plików komputera.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-144"><xref:System.Data.SqlClient> resolves the substitution strings into full paths against the local computer file system.</span></span> <span data-ttu-id="1f1ac-145">W związku z tym, nazwy serwera zdalnego, protokołu HTTP i ścieżki UNC nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-145">Therefore, remote server, HTTP, and UNC path names are not supported.</span></span> <span data-ttu-id="1f1ac-146">Wyjątek jest zgłaszany podczas otwierania połączenia, jeśli serwer nie znajduje się na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-146">An exception is thrown when the connection is opened if the server is not located on the local computer.</span></span>  
  
 <span data-ttu-id="1f1ac-147"><xref:System.Data.SqlClient.SqlConnection> Gdy jest otwarty, zostaje przekierowany z domyślnego wystąpienia SQL Server Express do wystąpienia zainicjowanego w czasie wykonywania uruchomionego na koncie wywołującym.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-147">When the <xref:System.Data.SqlClient.SqlConnection> is opened, it is redirected from the default SQL Server Express instance to a run-time initiated instance running under the caller's account.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1f1ac-148">Może być konieczne zwiększenie wartości, <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> ponieważ wystąpienia użytkownika mogą trwać dłużej niż zwykłe wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-148">It may be necessary to increase the <xref:System.Data.SqlClient.SqlConnection.ConnectionTimeout%2A> value since user instances may take longer to load than regular instances.</span></span>  
  
 <span data-ttu-id="1f1ac-149">Poniższy fragment kodu otwiera nowy `SqlConnection`, wyświetla parametry połączenia w oknie konsoli, a następnie zamyka połączenie podczas zamykania `using` bloku kodu.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-149">The following code fragment opens a new `SqlConnection`, displays the connection string in the console window, and then closes the connection when exiting the `using` code block.</span></span>  
  
```vb  
Private Sub OpenSqlConnection()  
    ' Retrieve the connection string.  
    Dim connectionString As String = GetConnectionString()  
  
    Using connection As New SqlConnection(connectionString)  
        connection.Open()  
        Console.WriteLine("ConnectionString: {0}", _  
           connection.ConnectionString)  
    End Using  
End Sub  
```  
  
```csharp  
private static void OpenSqlConnection()  
{  
    // Retrieve the connection string.  
    string connectionString = GetConnectionString();  
  
    using (SqlConnection connection =   
        new SqlConnection(connectionString))  
    {  
        connection.Open();  
        Console.WriteLine("ConnectionString: {0}",   
             connection.ConnectionString);  
    }  
}  
```  
  
> [!NOTE]
> <span data-ttu-id="1f1ac-150">Wystąpienia użytkownika nie są obsługiwane w kodzie środowiska uruchomieniowego języka wspólnego (CLR), który działa wewnątrz SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-150">User instances are not supported in common language runtime (CLR) code that is running inside of SQL Server.</span></span> <span data-ttu-id="1f1ac-151">Jest zgłaszany <xref:System.Data.SqlClient.SqlConnection> , `Open` jeśli jest wywoływana dla, który `User Instance=true` ma w parametrach połączenia. <xref:System.InvalidOperationException></span><span class="sxs-lookup"><span data-stu-id="1f1ac-151">An <xref:System.InvalidOperationException> is thrown if `Open` is called on a <xref:System.Data.SqlClient.SqlConnection> that has `User Instance=true` in the connection string.</span></span>  
  
## <a name="lifetime-of-a-user-instance-connection"></a><span data-ttu-id="1f1ac-152">Okres istnienia połączenia wystąpienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="1f1ac-152">Lifetime of a User Instance Connection</span></span>  
 <span data-ttu-id="1f1ac-153">W przeciwieństwie do wersji SQL Server, które są uruchamiane jako usługa, wystąpienia SQL Server Express nie muszą być uruchamiane ręcznie ani zatrzymywane.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-153">Unlike versions of SQL Server that run as a service, SQL Server Express instances do not need to be manually started and stopped.</span></span> <span data-ttu-id="1f1ac-154">Za każdym razem, gdy użytkownik loguje się i nawiązuje połączenie z wystąpieniem użytkownika, wystąpienie użytkownika zostanie uruchomione, jeśli nie zostało jeszcze uruchomione.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-154">Each time a user logs in and connects to a user instance, the user instance is started if it is not already running.</span></span> <span data-ttu-id="1f1ac-155">Bazy danych wystąpień użytkownika mają `AutoClose` ustawioną opcję, dzięki czemu baza danych jest automatycznie zamykana po okresie braku aktywności.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-155">User instance databases have the `AutoClose` option set so that the database is automatically shut down after a period of inactivity.</span></span> <span data-ttu-id="1f1ac-156">Uruchomiony proces SqlServer. exe jest uruchomiony przez ograniczony limit czasu od momentu zamknięcia ostatniego połączenia z wystąpieniem, dlatego nie trzeba go ponownie uruchomić, jeśli inne połączenie zostanie otwarte przed upływem limitu czasu.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-156">The sqlservr.exe process that is started is kept running for a limited time-out period after the last connection to the instance is closed, so it does not need to be restarted if another connection is opened before the time-out has expired.</span></span> <span data-ttu-id="1f1ac-157">Wystąpienie użytkownika zostaje automatycznie zamknięte, jeśli nie zostanie otwarte nowe połączenie przed upływem limitu czasu.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-157">The user instance automatically shuts down if no new connection opens before that time-out period has expired.</span></span> <span data-ttu-id="1f1ac-158">Administrator systemu w wystąpieniu nadrzędnym może ustawić czas trwania okresu dla wystąpienia użytkownika przy użyciu **procedury składowanej sp_configure** , aby zmienić opcję **limitu czasu wystąpienia użytkownika** .</span><span class="sxs-lookup"><span data-stu-id="1f1ac-158">A system administrator on the parent instance can set the duration of the time-out period for a user instance by using **sp_configure** to change the **user instance timeout** option.</span></span> <span data-ttu-id="1f1ac-159">Wartość domyślna to 60 min.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-159">The default is 60 minutes.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1f1ac-160">Jeśli `Min Pool Size` jest używany w parametrach połączenia o wartości większej niż zero, połączenie pulę będzie zawsze obsługiwać kilka otwartych połączeń, a wystąpienie użytkownika nie zostanie automatycznie zamknięte.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-160">If `Min Pool Size` is used in the connection string with a value greater than zero, the connection pooler will always maintain a few opened connections, and the user instance will not automatically shut down.</span></span>  
  
## <a name="how-user-instances-work"></a><span data-ttu-id="1f1ac-161">Jak działają wystąpienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="1f1ac-161">How User Instances Work</span></span>  
 <span data-ttu-id="1f1ac-162">Podczas pierwszego generowania wystąpienia użytkownika dla każdego użytkownika bazy danych **Master** i **msdb** są kopiowane z folderu dane szablonu do ścieżki w katalogu repozytorium danych aplikacji lokalnych użytkownika do wyłącznego użytku przez wystąpienie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-162">The first time a user instance is generated for each user, the **master** and **msdb** system databases are copied from the Template Data folder to a path under the user's local application data repository directory for exclusive use by the user instance.</span></span> <span data-ttu-id="1f1ac-163">Ta ścieżka jest zwykle `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-163">This path is typically `C:\Documents and Settings\<UserName>\Local Settings\Application Data\Microsoft\Microsoft SQL Server Data\SQLEXPRESS`.</span></span> <span data-ttu-id="1f1ac-164">Po uruchomieniu wystąpienia użytkownika pliki **tempdb**, log i Trace są również zapisywane w tym katalogu.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-164">When a user instance starts up, the **tempdb**, log, and trace files are also written to this directory.</span></span> <span data-ttu-id="1f1ac-165">Dla tego wystąpienia jest generowana nazwa, która gwarantuje unikalność dla każdego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-165">A name is generated for the instance, which is guaranteed to be unique for each user.</span></span>  
  
 <span data-ttu-id="1f1ac-166">Domyślnie wszyscy członkowie grupy Builtin\Users systemu Windows uzyskują uprawnienia do nawiązywania połączeń na lokalnym wystąpieniu oraz uprawnienia Odczyt i wykonywanie w plikach binarnych SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-166">By default all members of the Windows Builtin\Users group are granted permissions to connect on the local instance as well as read and execute permissions on the SQL Server binaries.</span></span> <span data-ttu-id="1f1ac-167">Po zweryfikowaniu poświadczeń użytkownika wywołującego, który hostuje wystąpienie użytkownika, ten użytkownik zostanie przypisany do `sysadmin` tego wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-167">Once the credentials of the calling user hosting the user instance have been verified, that user becomes the `sysadmin` on that instance.</span></span> <span data-ttu-id="1f1ac-168">Tylko pamięć udostępniona jest włączona dla wystąpień użytkownika, co oznacza, że możliwe jest tylko wykonywanie operacji na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-168">Only shared memory is enabled for user instances, which means that only operations on the local machine are possible.</span></span>  
  
 <span data-ttu-id="1f1ac-169">Użytkownicy muszą mieć uprawnienia do odczytu i zapisu w plikach MDF i ldf określonych w parametrach połączenia.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-169">Users must be granted both read and write permissions on the .mdf and .ldf files specified in the connection string.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1f1ac-170">Pliki MDF i ldf reprezentują odpowiednio bazę danych i pliki dziennika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-170">The .mdf and .ldf files represent the database and log files, respectively.</span></span> <span data-ttu-id="1f1ac-171">Te dwa pliki są zgodne z zestawem, dlatego należy zachować ostrożność podczas operacji wykonywania kopii zapasowych i przywracania.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-171">These two files are a matched set, so care must be taken during backup and restore operations.</span></span> <span data-ttu-id="1f1ac-172">Plik bazy danych zawiera informacje o dokładnej wersji pliku dziennika, a baza danych nie zostanie otwarta, jeśli zostanie ona połączona z nieprawidłowym plikiem dziennika.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-172">The database file contains information about the exact version of the log file, and the database will not open if it is coupled with the wrong log file.</span></span>  
  
 <span data-ttu-id="1f1ac-173">Aby uniknąć uszkodzenia danych, baza danych w wystąpieniu użytkownika jest otwierana z wyłącznym dostępem.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-173">To avoid data corruption, a database in the user instance is opened with exclusive access.</span></span> <span data-ttu-id="1f1ac-174">Jeśli dwa różne wystąpienia użytkownika współużytkują tę samą bazę danych na tym samym komputerze, użytkownik pierwszego wystąpienia musi zamknąć bazę danych, zanim będzie można ją otworzyć w drugim wystąpieniu.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-174">If two different user instances share the same database on the same computer, the user on the first instance must close the database before it can be opened in a second instance.</span></span>  
  
## <a name="user-instance-scenarios"></a><span data-ttu-id="1f1ac-175">Scenariusze wystąpienia użytkownika</span><span class="sxs-lookup"><span data-stu-id="1f1ac-175">User Instance Scenarios</span></span>  
 <span data-ttu-id="1f1ac-176">Wystąpienia użytkowników zapewniają deweloperom aplikacji baz danych SQL Server magazynem danych, który nie zależy od deweloperów mających konta administracyjne na swoich komputerach deweloperskich.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-176">User instances provide developers of database applications with a SQL Server data store that does not depend on developers having administrative accounts on their development computers.</span></span> <span data-ttu-id="1f1ac-177">Wystąpienia użytkowników są oparte na modelu dostępu/aparatu Jet, w którym aplikacja bazy danych po prostu nawiązuje połączenie z plikiem, a użytkownik automatycznie ma pełne uprawnienia do wszystkich obiektów bazy danych bez konieczności interwencji administratora systemu do udzielenia uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-177">User instances are based on the Access/Jet model, where the database application simply connects to a file, and the user automatically has full permissions on all of the database objects without needing the intervention of a system administrator to grant permissions.</span></span> <span data-ttu-id="1f1ac-178">Jest przeznaczony do pracy w sytuacjach, w których użytkownik jest uruchomiony przy użyciu konta użytkownika z najniższymi uprawnieniami (LUA) i nie ma uprawnień administracyjnych na serwerze lub na komputerze lokalnym, ale musi utworzyć obiekty i aplikacje bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-178">It is intended to work in situations where the user is running under a least-privilege user account (LUA) and does not have administrative privileges on the server or local machine, yet needs to create database objects and applications.</span></span> <span data-ttu-id="1f1ac-179">Wystąpienia użytkowników umożliwiają użytkownikom tworzenie wystąpień w czasie wykonywania, które są uruchamiane w kontekście zabezpieczeń użytkownika, a nie w kontekście zabezpieczeń bardziej uprzywilejowanej usługi systemowej.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-179">User instances allow users to create instances at run time that run under the user's own security context, and not in the security context of a more privileged system service.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="1f1ac-180">Wystąpienia użytkowników powinny być używane tylko w scenariuszach, w których wszystkie używane aplikacje są w pełni zaufane.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-180">User instances should only be used in scenarios where all the applications using it are fully trusted.</span></span>  
  
 <span data-ttu-id="1f1ac-181">Scenariusze wystąpienia użytkownika obejmują:</span><span class="sxs-lookup"><span data-stu-id="1f1ac-181">User instance scenarios include:</span></span>  
  
- <span data-ttu-id="1f1ac-182">Dowolna aplikacja pojedynczego użytkownika, gdzie udostępnianie danych nie jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-182">Any single-user application where sharing data is not required.</span></span>  
  
- <span data-ttu-id="1f1ac-183">Wdrożenie ClickOnce.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-183">ClickOnce deployment.</span></span> <span data-ttu-id="1f1ac-184">Jeśli .NET Framework 2,0 (lub nowszy) i SQL Server Express są już zainstalowane na komputerze docelowym, pakiet instalacyjny pobrany w wyniku akcji ClickOnce może być instalowany i używany przez użytkowników innych niż administratorzy.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-184">If the .NET Framework 2.0 (or later) and SQL Server Express are already installed on the target computer, the installation package downloaded as a result of a ClickOnce action can be installed and used by non-administrator users.</span></span> <span data-ttu-id="1f1ac-185">Należy pamiętać, że administrator musi zainstalować SQL Server Express, jeśli jest częścią instalacji.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-185">Note that an administrator must install SQL Server Express if that is part of the setup.</span></span> <span data-ttu-id="1f1ac-186">Aby uzyskać więcej informacji, zobacz [wdrażanie ClickOnce dla Windows Forms](../../../winforms/clickonce-deployment-for-windows-forms.md).</span><span class="sxs-lookup"><span data-stu-id="1f1ac-186">For more information, see [ClickOnce Deployment for Windows Forms](../../../winforms/clickonce-deployment-for-windows-forms.md).</span></span>
  
- <span data-ttu-id="1f1ac-187">Dedykowane hosting ASP.NET przy użyciu uwierzytelniania systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-187">Dedicated ASP.NET hosting using Windows Authentication.</span></span> <span data-ttu-id="1f1ac-188">Pojedyncze wystąpienie SQL Server Express może być hostowane w intranecie.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-188">A single SQL Server Express instance can be hosted on an intranet.</span></span> <span data-ttu-id="1f1ac-189">Aplikacja nawiązuje połączenie przy użyciu konta systemu Windows ASPNET, a nie przy użyciu personifikacji.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-189">The application connects using the ASPNET Windows account, not by using impersonation.</span></span> <span data-ttu-id="1f1ac-190">Wystąpienia użytkownika nie powinny być używane w scenariuszach hostingu innych firm ani udostępnionych, w których wszystkie aplikacje współużytkują to samo wystąpienie użytkownika i nie będą już od siebie odizolowane.</span><span class="sxs-lookup"><span data-stu-id="1f1ac-190">User instances should not be used for third-party or shared hosting scenarios where all applications would share the same user instance and would no longer remain isolated from each other.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1f1ac-191">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="1f1ac-191">See also</span></span>

- [<span data-ttu-id="1f1ac-192">SQL Server i ADO.NET</span><span class="sxs-lookup"><span data-stu-id="1f1ac-192">SQL Server and ADO.NET</span></span>](index.md)
- [<span data-ttu-id="1f1ac-193">Parametry połączeń</span><span class="sxs-lookup"><span data-stu-id="1f1ac-193">Connection Strings</span></span>](../connection-strings.md)
- [<span data-ttu-id="1f1ac-194">Nawiązywanie połączenia ze źródłem danych</span><span class="sxs-lookup"><span data-stu-id="1f1ac-194">Connecting to a Data Source</span></span>](../connecting-to-a-data-source.md)
- [<span data-ttu-id="1f1ac-195">Omówienie ADO.NET</span><span class="sxs-lookup"><span data-stu-id="1f1ac-195">ADO.NET Overview</span></span>](../ado-net-overview.md)
