---
title: Obsługa SqlClient wysokiej dostępności, odzyskiwania po awarii
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-ado
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 61e0b396-09d7-4e13-9711-7dcbcbd103a0
caps.latest.revision: 13
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.workload:
- dotnet
ms.openlocfilehash: aab233fca7754f154166778646acba8d8df7de83
ms.sourcegitcommit: 86adcc06e35390f13c1e372c36d2e044f1fc31ef
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/26/2018
---
# <a name="sqlclient-support-for-high-availability-disaster-recovery"></a><span data-ttu-id="77e32-102">Obsługa SqlClient wysokiej dostępności, odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="77e32-102">SqlClient Support for High Availability, Disaster Recovery</span></span>
<span data-ttu-id="77e32-103">W tym temacie omówiono SqlClient pomocy technicznej (dodany w [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]) wysokiej dostępności, odzyskiwania po awarii — zawsze włączonych grup dostępności.</span><span class="sxs-lookup"><span data-stu-id="77e32-103">This topic discusses SqlClient support (added in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]) for high-availability, disaster recovery -- AlwaysOn Availability Groups.</span></span>  <span data-ttu-id="77e32-104">Funkcja zawsze włączonych grup dostępności zostało dodane do programu SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="77e32-104">AlwaysOn Availability Groups feature was added to SQL Server 2012.</span></span> <span data-ttu-id="77e32-105">Aby uzyskać więcej informacji na temat zawsze włączonych grup dostępności zobacz dokumentację SQL Server — książki Online.</span><span class="sxs-lookup"><span data-stu-id="77e32-105">For more information about AlwaysOn Availability Groups, see SQL Server Books Online.</span></span>  
  
 <span data-ttu-id="77e32-106">Możesz teraz określić odbiornika grupy dostępności programu (wysokiej dostępności, odzyskiwania po awarii) grupy dostępności (grupy dostępności) lub SQL Server 2012 wystąpienia klastra trybu Failover we właściwości połączenia.</span><span class="sxs-lookup"><span data-stu-id="77e32-106">You can now specify the availability group listener of a (high-availability, disaster-recovery) availability group (AG) or SQL Server 2012 Failover Cluster Instance in the connection property.</span></span> <span data-ttu-id="77e32-107">Jeśli aplikacja SqlClient jest podłączony do bazy danych programu AlwaysOn awaryjnie, oryginalne połączenie zostanie przerwane i aplikacji, należy otworzyć nowe połączenie, aby kontynuować pracę po przejściu w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="77e32-107">If a SqlClient application is connected to an AlwaysOn database that fails over, the original connection is broken and the application must open a new connection to continue work after the failover.</span></span>  
  
 <span data-ttu-id="77e32-108">Jeśli nie są łączone z odbiornika grupy dostępności lub wystąpienie klastra pracy awaryjnej programu SQL Server 2012, a wiele adresów IP skojarzonych z nazwą hosta, SqlClient iteracji sekwencyjnie przez wszystkie adresy IP skojarzone z wpisu DNS.</span><span class="sxs-lookup"><span data-stu-id="77e32-108">If you are not connecting to an availability group listener or SQL Server 2012 Failover Cluster Instance, and if multiple IP addresses are associated with a hostname, SqlClient will iterate sequentially through all IP addresses associated with DNS entry.</span></span> <span data-ttu-id="77e32-109">To może zająć dużo czasu, jeśli pierwszy adres IP zwrócony przez serwer DNS nie jest powiązany z dowolnej karty interfejsu sieciowego (NIC).</span><span class="sxs-lookup"><span data-stu-id="77e32-109">This can be time consuming if the first IP address returned by DNS server is not bound to any network interface card (NIC).</span></span> <span data-ttu-id="77e32-110">Podczas nawiązywania połączenia odbiornika grupy dostępności lub wystąpienie klastra pracy awaryjnej programu SQL Server 2012, SqlClient podejmuje próbę nawiązania połączenia dla wszystkich adresów IP równolegle i jeśli próba połączenia zakończy się powodzeniem, sterownik spowoduje odrzucenie wszelkie oczekujące połączenia prób.</span><span class="sxs-lookup"><span data-stu-id="77e32-110">When connecting to an availability group listener or SQL Server 2012 Failover Cluster Instance, SqlClient attempts to establish connections to all IP addresses in parallel and if a connection attempt succeeds, the driver will discard any pending connection attempts.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="77e32-111">Zwiększenie limitu czasu połączenia i wykonania logiki ponawiania próby połączenia zwiększy prawdopodobieństwo, że aplikacja będzie łączyć się z grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="77e32-111">Increasing connection timeout and implementing connection retry logic will increase the probability that an application will connect to an availability group.</span></span> <span data-ttu-id="77e32-112">Ponadto ponieważ połączenie może zakończyć się niepowodzeniem z powodu pracy awaryjnej, należy zaimplementować logiki ponawiania próby połączenia, ponawianie próby połączenia nie powiodło się, dopóki ponownie nawiązuje połączenie.</span><span class="sxs-lookup"><span data-stu-id="77e32-112">Also, because a connection can fail because of a failover, you should implement connection retry logic, retrying a failed connection until it reconnects.</span></span>  
  
 <span data-ttu-id="77e32-113">Następujące właściwości połączenia zostały dodane do SqlClient w [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="77e32-113">The following connection properties were added to SqlClient in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]:</span></span>  
  
-   `ApplicationIntent`  
  
-   `MultiSubnetFailover`  
  
 <span data-ttu-id="77e32-114">Te słowa kluczowe parametrów połączenia z można modyfikować programowo:</span><span class="sxs-lookup"><span data-stu-id="77e32-114">You can programmatically modify these connection string keywords with:</span></span>  
  
1.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.ApplicationIntent%2A>  
  
2.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A>  

> [!NOTE]
>  <span data-ttu-id="77e32-115">Ustawienie `MultiSubnetFailover` do `true` nie jest wymagane w przypadku [!INCLUDE[net_v461](../../../../../includes/net-v461-md.md)]) lub nowszy.</span><span class="sxs-lookup"><span data-stu-id="77e32-115">Setting `MultiSubnetFailover` to `true` isn't required with [!INCLUDE[net_v461](../../../../../includes/net-v461-md.md)]) or later versions.</span></span>
  
## <a name="connecting-with-multisubnetfailover"></a><span data-ttu-id="77e32-116">Łączenie z MultiSubnetFailover</span><span class="sxs-lookup"><span data-stu-id="77e32-116">Connecting With MultiSubnetFailover</span></span>  
 <span data-ttu-id="77e32-117">Określ zawsze `MultiSubnetFailover=True` podczas nawiązywania połączenia odbiornika grupy dostępności programu SQL Server 2012 lub wystąpienie klastra pracy awaryjnej programu SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="77e32-117">Always specify `MultiSubnetFailover=True` when connecting to a SQL Server 2012 availability group listener or SQL Server 2012 Failover Cluster Instance.</span></span> <span data-ttu-id="77e32-118">`MultiSubnetFailover` Umożliwia przyspieszyć tryb failover dla wszystkich grup dostępności i wystąpienie klastra pracy awaryjnej programu SQL Server 2012 i będzie znacznie ograniczyć czas pracy awaryjnej dla pojedynczych i wielu podsieci topologie AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="77e32-118">`MultiSubnetFailover` enables faster failover for all Availability Groups and or Failover Cluster Instance in SQL Server 2012 and will significantly reduce failover time for single and multi-subnet AlwaysOn topologies.</span></span> <span data-ttu-id="77e32-119">Podczas pracy awaryjnej wielu podsieci klient podejmie próbę połączenia równolegle.</span><span class="sxs-lookup"><span data-stu-id="77e32-119">During a multi-subnet failover, the client will attempt connections in parallel.</span></span> <span data-ttu-id="77e32-120">Podczas pracy awaryjnej podsieci agresywnie ponowi próbę połączenia TCP.</span><span class="sxs-lookup"><span data-stu-id="77e32-120">During a subnet failover, will aggressively retry the TCP connection.</span></span>  
  
 <span data-ttu-id="77e32-121">`MultiSubnetFailover` Właściwości połączenia wskazuje, że aplikacja jest wdrażany w grupie dostępności lub wystąpienie klastra pracy awaryjnej programu SQL Server 2012 i SqlClient podejmie próbę połączenia z bazą danych w wystąpieniu serwera SQL głównej próbując Połącz z adresami IP.</span><span class="sxs-lookup"><span data-stu-id="77e32-121">The `MultiSubnetFailover` connection property indicates that the application is being deployed in an availability group or SQL Server 2012 Failover Cluster Instance and that SqlClient will try to connect to the database on the primary SQL Server instance by trying to connect to all the IP addresses.</span></span> <span data-ttu-id="77e32-122">Gdy `MultiSubnetFailover=True` jest określony dla połączenia, klient ponawia próby połączenia TCP szybciej niż przy użyciu protokołu TCP retransmisji systemu operacyjnego domyślne.</span><span class="sxs-lookup"><span data-stu-id="77e32-122">When `MultiSubnetFailover=True` is specified for a connection, the client retries TCP connection attempts faster than the operating system’s default TCP retransmit intervals.</span></span> <span data-ttu-id="77e32-123">Umożliwia szybsze ponowne nawiązanie połączenia po trybu failover grupy dostępności funkcji AlwaysOn lub zawsze włączone wystąpienia klastra trybu Failover i dotyczy zarówno subnet jednym i wielu grup dostępności i wystąpienia klastra trybu Failover.</span><span class="sxs-lookup"><span data-stu-id="77e32-123">This enables faster reconnection after failover of either an AlwaysOn Availability Group or an AlwaysOn Failover Cluster Instance, and is applicable to both single- and multi-subnet Availability Groups and Failover Cluster Instances.</span></span>  
  
 <span data-ttu-id="77e32-124">Aby uzyskać więcej informacji na temat słowa kluczowe parametrów połączenia w SqlClient zobacz <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span><span class="sxs-lookup"><span data-stu-id="77e32-124">For more information about connection string keywords in SqlClient, see <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span></span>  
  
 <span data-ttu-id="77e32-125">Określanie `MultiSubnetFailover=True` podczas nawiązywania połączenia z coś innego niż odbiornika grupy dostępności lub wystąpienie klastra pracy awaryjnej programu SQL Server 2012 może spowodować negatywny wpływ na wydajność, a nie jest obsługiwana.</span><span class="sxs-lookup"><span data-stu-id="77e32-125">Specifying `MultiSubnetFailover=True` when connecting to something other than a availability group listener or SQL Server 2012 Failover Cluster Instance may result in a negative performance impact, and is not supported.</span></span>  
  
 <span data-ttu-id="77e32-126">Do łączenia się z serwerem w grupie dostępności lub wystąpienie klastra pracy awaryjnej programu SQL Server 2012, należy użyć następujących wytycznych:</span><span class="sxs-lookup"><span data-stu-id="77e32-126">Use the following guidelines to connect to a server in an availability group or SQL Server 2012 Failover Cluster Instance:</span></span>  
  
-   <span data-ttu-id="77e32-127">Użyj `MultiSubnetFailover` właściwości połączenia podczas łączenia się z jednej podsieci lub wielu podsieci; poprawi wydajność ich obu.</span><span class="sxs-lookup"><span data-stu-id="77e32-127">Use the `MultiSubnetFailover` connection property when connecting to a single subnet or multi-subnet; it will improve performance for both.</span></span>  
  
-   <span data-ttu-id="77e32-128">Aby połączyć się z grupy dostępności, określ odbiornika grupy dostępności grupy dostępności jako serwer w ciągu połączenia.</span><span class="sxs-lookup"><span data-stu-id="77e32-128">To connect to an availability group, specify the availability group listener of the availability group as the server in your connection string.</span></span>  
  
-   <span data-ttu-id="77e32-129">Łączenie z serwerem SQL wystąpienia skonfigurowano więcej niż 64 adresy IP spowoduje błąd połączenia.</span><span class="sxs-lookup"><span data-stu-id="77e32-129">Connecting to a SQL Server instance configured with more than 64 IP addresses will cause a connection failure.</span></span>  
  
-   <span data-ttu-id="77e32-130">Zachowanie aplikacji, która używa `MultiSubnetFailover` właściwość connection nie ma wpływu na podstawie typu uwierzytelniania: uwierzytelnianie programu SQL Server, uwierzytelnianie Kerberos lub uwierzytelnianie systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="77e32-130">Behavior of an application that uses the `MultiSubnetFailover` connection property is not affected based on the type of authentication: SQL Server Authentication, Kerberos Authentication, or Windows Authentication.</span></span>  
  
-   <span data-ttu-id="77e32-131">Zwiększ wartość `Connect Timeout` przyjmować czas pracy awaryjnej i zmniejsza aplikacji połączenia ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="77e32-131">Increase the value of `Connect Timeout` to accommodate for failover time and reduce application connection retry attempts.</span></span>  
  
-   <span data-ttu-id="77e32-132">Transakcje rozproszone nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="77e32-132">Distributed transactions are not supported.</span></span>  
  
 <span data-ttu-id="77e32-133">Jeśli routingu tylko do odczytu nie jest włączone, połączenie z lokalizacją replika pomocnicza nie powiedzie się w następujących sytuacjach:</span><span class="sxs-lookup"><span data-stu-id="77e32-133">If read-only routing is not in effect, connecting to a secondary replica location will fail in the following situations:</span></span>  
  
1.  <span data-ttu-id="77e32-134">Jeśli lokalizacji replika pomocnicza nie jest skonfigurowany do akceptowania połączeń.</span><span class="sxs-lookup"><span data-stu-id="77e32-134">If the secondary replica location is not configured to accept connections.</span></span>  
  
2.  <span data-ttu-id="77e32-135">Jeśli aplikacja używa `ApplicationIntent=ReadWrite` (opisanych poniżej) i lokalizacja replika pomocnicza jest skonfigurowana dla dostępu tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-135">If an application uses `ApplicationIntent=ReadWrite` (discussed below) and the secondary replica location is configured for read-only access.</span></span>  
  
 <span data-ttu-id="77e32-136"><xref:System.Data.SqlClient.SqlDependency> nie jest obsługiwane w trybie tylko do odczytu replikach pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="77e32-136"><xref:System.Data.SqlClient.SqlDependency> is not supported on read-only secondary replicas.</span></span>  
  
 <span data-ttu-id="77e32-137">Połączenia zakończy się niepowodzeniem, jeśli replika podstawowa jest skonfigurowany do odrzucania obciążeń tylko do odczytu i parametry połączenia zawierają `ApplicationIntent=ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="77e32-137">A connection will fail if a primary replica is configured to reject read-only workloads and the connection string contains `ApplicationIntent=ReadOnly`.</span></span>  
  
## <a name="upgrading-to-use-multi-subnet-clusters-from-database-mirroring"></a><span data-ttu-id="77e32-138">Uaktualnianie do użycia wielu podsieci klastrów z dublowania bazy danych</span><span class="sxs-lookup"><span data-stu-id="77e32-138">Upgrading to Use Multi-Subnet Clusters from Database Mirroring</span></span>  
 <span data-ttu-id="77e32-139">Błąd połączenia (<xref:System.ArgumentException>) zostanie przeprowadzona, jeśli `MultiSubnetFailover` i `Failover Partner` słowa kluczowe połączenia znajdują się w ciągu połączenia, lub jeśli `MultiSubnetFailover=True` i protokołu innego niż TCP jest używany.</span><span class="sxs-lookup"><span data-stu-id="77e32-139">A connection error (<xref:System.ArgumentException>) will occur if the `MultiSubnetFailover` and `Failover Partner` connection keywords are present in the connection string, or if `MultiSubnetFailover=True` and a protocol other than TCP is used.</span></span> <span data-ttu-id="77e32-140">Wystąpił błąd (<xref:System.Data.SqlClient.SqlException>) również wystąpić, jeśli `MultiSubnetFailover` jest używany i SQL Server zwraca odpowiedź partnera pracy awaryjnej wskazujący, że jest częścią pary dublowania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="77e32-140">An error (<xref:System.Data.SqlClient.SqlException>) will also occur if `MultiSubnetFailover` is used and the SQL Server returns a failover partner response indicating it is part of a database mirroring pair.</span></span>  
  
 <span data-ttu-id="77e32-141">W przypadku uaktualniania aplikacji SqlClient który aktualnie używa funkcji dublowania baz danych na potrzeby scenariusza wielu podsieci, należy usunąć `Failover Partner` właściwości połączenia i zastąpić go ciągiem `MultiSubnetFailover` ustawioną `True` i zastąp nazwę serwera w Parametry połączenia z odbiornika grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="77e32-141">If you upgrade a SqlClient application that currently uses database mirroring to a multi-subnet scenario, you should remove the `Failover Partner` connection property and replace it with `MultiSubnetFailover` set to `True` and replace the server name in the connection string with an availability group listener.</span></span> <span data-ttu-id="77e32-142">Jeśli parametry połączenia używane `Failover Partner` i `MultiSubnetFailover=True`, sterownik zostanie wygenerowany błąd.</span><span class="sxs-lookup"><span data-stu-id="77e32-142">If a connection string uses `Failover Partner` and `MultiSubnetFailover=True`, the driver will generate an error.</span></span> <span data-ttu-id="77e32-143">Jednak jeśli parametry połączenia używane `Failover Partner` i `MultiSubnetFailover=False` (lub `ApplicationIntent=ReadWrite`), aplikacja będzie używać funkcji dublowania baz danych.</span><span class="sxs-lookup"><span data-stu-id="77e32-143">However, if a connection string uses `Failover Partner` and `MultiSubnetFailover=False` (or `ApplicationIntent=ReadWrite`), the application will use database mirroring.</span></span>  
  
 <span data-ttu-id="77e32-144">Sterownik zwróci błąd, jeśli funkcja dublowania bazy danych jest używany w podstawowej bazy danych w grupy dostępności, a `MultiSubnetFailover=True` jest używany w parametrach połączenia, w którym łączy się z podstawowej bazy danych zamiast do odbiornika grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="77e32-144">The driver will return an error if database mirroring is used on the primary database in the AG, and if `MultiSubnetFailover=True` is used in the connection string that connects to a primary database instead of to an availability group listener.</span></span>  
  
## <a name="specifying-application-intent"></a><span data-ttu-id="77e32-145">Określanie przeznaczenia aplikacji</span><span class="sxs-lookup"><span data-stu-id="77e32-145">Specifying Application Intent</span></span>  
 <span data-ttu-id="77e32-146">Gdy `ApplicationIntent=ReadOnly`, klient żąda odczytu obciążenie podczas łączenia się z bazą danych z włączoną funkcją AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="77e32-146">When `ApplicationIntent=ReadOnly`, the client requests a read workload when connecting to an AlwaysOn enabled database.</span></span> <span data-ttu-id="77e32-147">Serwer będzie wymuszać zamiar w czasie połączenia i podczas użycie instrukcji bazy danych, ale tylko do zawsze włączone bazy danych.</span><span class="sxs-lookup"><span data-stu-id="77e32-147">The server will enforce the intent at connection time and during a USE database statement but only to an Always On enabled database.</span></span>  
  
 <span data-ttu-id="77e32-148">`ApplicationIntent` — Słowo kluczowe nie działa z bazami danych starszy, tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-148">The `ApplicationIntent` keyword does not work with legacy, read-only databases.</span></span>  
  
 <span data-ttu-id="77e32-149">Bazy danych można Zezwalaj lub nie zezwalaj odczytu obciążenie w docelowej bazie danych AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="77e32-149">A database can allow or disallow read workloads on the targeted AlwaysOn database.</span></span> <span data-ttu-id="77e32-150">(Jest to zrobić za pomocą `ALLOW_CONNECTIONS` klauzuli `PRIMARY_ROLE` i `SECONDARY_ROLE` [!INCLUDE[tsql](../../../../../includes/tsql-md.md)] instrukcji.)</span><span class="sxs-lookup"><span data-stu-id="77e32-150">(This is done with the `ALLOW_CONNECTIONS` clause of the `PRIMARY_ROLE` and `SECONDARY_ROLE`[!INCLUDE[tsql](../../../../../includes/tsql-md.md)] statements.)</span></span>  
  
 <span data-ttu-id="77e32-151">`ApplicationIntent` Słowo kluczowe jest używane, aby włączyć routing tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-151">The `ApplicationIntent` keyword is used to enable read-only routing.</span></span>  
  
## <a name="read-only-routing"></a><span data-ttu-id="77e32-152">Tylko do odczytu routingu</span><span class="sxs-lookup"><span data-stu-id="77e32-152">Read-Only Routing</span></span>  
 <span data-ttu-id="77e32-153">Tylko do odczytu routing jest funkcją, która może zapewnić dostępność odczytu tylko repliki bazy danych.</span><span class="sxs-lookup"><span data-stu-id="77e32-153">Read-only routing is a feature that can ensure the availability of a read only replica of a database.</span></span> <span data-ttu-id="77e32-154">Aby włączyć routing tylko do odczytu:</span><span class="sxs-lookup"><span data-stu-id="77e32-154">To enable read-only routing:</span></span>  
  
1.  <span data-ttu-id="77e32-155">Należy nawiązać odbiornik grupy dostępności zawsze włączonej grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="77e32-155">You must connect to an Always On Availability Group availability group listener.</span></span>  
  
2.  <span data-ttu-id="77e32-156">`ApplicationIntent` Słowo kluczowe parametrów połączenia musi mieć ustawioną `ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="77e32-156">The `ApplicationIntent` connection string keyword must be set to `ReadOnly`.</span></span>  
  
3.  <span data-ttu-id="77e32-157">Grupa dostępności musi być skonfigurowany przez administratora bazy danych, aby włączyć routing tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-157">The Availability Group must be configured by the database administrator to enable read-only routing.</span></span>  
  
 <span data-ttu-id="77e32-158">Istnieje możliwość, że wiele połączeń przy użyciu routingu tylko do odczytu nie wszystkie będą łączyć się sam repliki tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-158">It is possible that multiple connections using read-only routing will not all connect to the same read-only replica.</span></span> <span data-ttu-id="77e32-159">Zmiany w synchronizacji bazy danych lub zmiany w konfiguracji routingu serwera może spowodować połączeń klientów z innej repliki tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-159">Changes in database synchronization or changes in the server's routing configuration can result in client connections to different read-only replicas.</span></span> <span data-ttu-id="77e32-160">Aby upewnić się, że wszystkie żądania tylko do odczytu połączyć się z tej samej repliki tylko do odczytu, nie przekazuj odbiornika grupy dostępności, aby `Data Source` słowo kluczowe parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="77e32-160">To ensure that all read-only requests connect to the same read-only replica, do not pass an availability group listener to the `Data Source` connection string keyword.</span></span> <span data-ttu-id="77e32-161">Zamiast tego należy określić nazwę wystąpienia tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-161">Instead, specify the name of the read-only instance.</span></span>  
  
 <span data-ttu-id="77e32-162">Tylko do odczytu routingu może trwać dłużej niż łączenie z serwera podstawowego, ponieważ odczytu tylko routing pierwszy raz łączy się serwerem podstawowym, a następnie szuka najlepiej dostępne dodatkowego do odczytu.</span><span class="sxs-lookup"><span data-stu-id="77e32-162">Read-only routing may take longer than connecting to the primary because read only routing first connects to the primary and then looks for the best available readable secondary.</span></span> <span data-ttu-id="77e32-163">W związku z tym należy zwiększyć limit czasu użytkownika logowania.</span><span class="sxs-lookup"><span data-stu-id="77e32-163">Because of this, you should increase your login timeout.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="77e32-164">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="77e32-164">See Also</span></span>  
 [<span data-ttu-id="77e32-165">Funkcje Serwera SQL i ADO.NET</span><span class="sxs-lookup"><span data-stu-id="77e32-165">SQL Server Features and ADO.NET</span></span>](../../../../../docs/framework/data/adonet/sql/sql-server-features-and-adonet.md)  
 [<span data-ttu-id="77e32-166">ADO.NET zarządzanego dostawcy i zestawu danych w Centrum deweloperów</span><span class="sxs-lookup"><span data-stu-id="77e32-166">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
