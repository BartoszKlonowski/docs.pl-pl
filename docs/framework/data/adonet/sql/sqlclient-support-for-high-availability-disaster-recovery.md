---
title: "Obsługa SqlClient wysokiej dostępności, odzyskiwania po awarii"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 61e0b396-09d7-4e13-9711-7dcbcbd103a0
caps.latest.revision: "13"
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.workload: dotnet
ms.openlocfilehash: d2a444440af9dfaa2b084a55db9348fa48df7b54
ms.sourcegitcommit: ed26cfef4e18f6d93ab822d8c29f902cff3519d1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/17/2018
---
# <a name="sqlclient-support-for-high-availability-disaster-recovery"></a><span data-ttu-id="32002-102">Obsługa SqlClient wysokiej dostępności, odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="32002-102">SqlClient Support for High Availability, Disaster Recovery</span></span>
<span data-ttu-id="32002-103">W tym temacie omówiono SqlClient pomocy technicznej (dodany w [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]) wysokiej dostępności, odzyskiwania po awarii — zawsze włączonych grup dostępności.</span><span class="sxs-lookup"><span data-stu-id="32002-103">This topic discusses SqlClient support (added in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]) for high-availability, disaster recovery -- AlwaysOn Availability Groups.</span></span>  <span data-ttu-id="32002-104">Funkcja zawsze włączonych grup dostępności zostało dodane do [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012.</span><span class="sxs-lookup"><span data-stu-id="32002-104">AlwaysOn Availability Groups feature was added to [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012.</span></span> <span data-ttu-id="32002-105">Aby uzyskać więcej informacji na temat zawsze włączonych grup dostępności, zobacz [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] — książki Online.</span><span class="sxs-lookup"><span data-stu-id="32002-105">For more information about AlwaysOn Availability Groups, see [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Books Online.</span></span>  
  
 <span data-ttu-id="32002-106">Możesz teraz określić odbiornika grupy dostępności programu (wysokiej dostępności, odzyskiwania po awarii) grupy dostępności (grupy dostępności) lub [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 wystąpienia klastra trybu Failover we właściwości połączenia.</span><span class="sxs-lookup"><span data-stu-id="32002-106">You can now specify the availability group listener of a (high-availability, disaster-recovery) availability group (AG) or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance in the connection property.</span></span> <span data-ttu-id="32002-107">Jeśli aplikacja SqlClient jest podłączony do bazy danych programu AlwaysOn awaryjnie, oryginalne połączenie zostanie przerwane i aplikacji, należy otworzyć nowe połączenie, aby kontynuować pracę po przejściu w tryb failover.</span><span class="sxs-lookup"><span data-stu-id="32002-107">If a SqlClient application is connected to an AlwaysOn database that fails over, the original connection is broken and the application must open a new connection to continue work after the failover.</span></span>  
  
 <span data-ttu-id="32002-108">Jeśli nie łączysz się odbiornik grupy dostępności lub [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 wystąpienia klastra trybu Failover, a jeśli wiele adresów IP skojarzonych z nazwą hosta, SqlClient sekwencyjnie iteracji przez wszystkie adresy IP skojarzone z wpisu DNS.</span><span class="sxs-lookup"><span data-stu-id="32002-108">If you are not connecting to an availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance, and if multiple IP addresses are associated with a hostname, SqlClient will iterate sequentially through all IP addresses associated with DNS entry.</span></span> <span data-ttu-id="32002-109">To może zająć dużo czasu, jeśli pierwszy adres IP zwrócony przez serwer DNS nie jest powiązany z dowolnej karty interfejsu sieciowego (NIC).</span><span class="sxs-lookup"><span data-stu-id="32002-109">This can be time consuming if the first IP address returned by DNS server is not bound to any network interface card (NIC).</span></span> <span data-ttu-id="32002-110">Podczas nawiązywania połączenia odbiornika grupy dostępności lub [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 wystąpienia klastra trybu Failover, SqlClient podejmuje próbę nawiązania połączenia dla wszystkich adresów IP równolegle i jeśli próba połączenia zakończy się powodzeniem, sterownik spowoduje odrzucenie wszystkich oczekujących połączeń prób.</span><span class="sxs-lookup"><span data-stu-id="32002-110">When connecting to an availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance, SqlClient attempts to establish connections to all IP addresses in parallel and if a connection attempt succeeds, the driver will discard any pending connection attempts.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="32002-111">Zwiększenie limitu czasu połączenia i wykonania logiki ponawiania próby połączenia zwiększy prawdopodobieństwo, że aplikacja będzie łączyć się z grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="32002-111">Increasing connection timeout and implementing connection retry logic will increase the probability that an application will connect to an availability group.</span></span> <span data-ttu-id="32002-112">Ponadto ponieważ połączenie może zakończyć się niepowodzeniem z powodu pracy awaryjnej, należy zaimplementować logiki ponawiania próby połączenia, ponawianie próby połączenia nie powiodło się, dopóki ponownie nawiązuje połączenie.</span><span class="sxs-lookup"><span data-stu-id="32002-112">Also, because a connection can fail because of a failover, you should implement connection retry logic, retrying a failed connection until it reconnects.</span></span>  
  
 <span data-ttu-id="32002-113">Następujące właściwości połączenia zostały dodane do SqlClient w [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]:</span><span class="sxs-lookup"><span data-stu-id="32002-113">The following connection properties were added to SqlClient in [!INCLUDE[net_v45](../../../../../includes/net-v45-md.md)]:</span></span>  
  
-   `ApplicationIntent`  
  
-   `MultiSubnetFailover`  
  
 <span data-ttu-id="32002-114">Te słowa kluczowe parametrów połączenia z można modyfikować programowo:</span><span class="sxs-lookup"><span data-stu-id="32002-114">You can programmatically modify these connection string keywords with:</span></span>  
  
1.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.ApplicationIntent%2A>  
  
2.  <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A>  
  
## <a name="connecting-with-multisubnetfailover"></a><span data-ttu-id="32002-115">Łączenie z MultiSubnetFailover</span><span class="sxs-lookup"><span data-stu-id="32002-115">Connecting With MultiSubnetFailover</span></span>  
 <span data-ttu-id="32002-116">Określ zawsze `MultiSubnetFailover=True` podczas nawiązywania połączenia [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] odbiornika grupy dostępności 2012 lub [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] wystąpienia klastra trybu Failover 2012.</span><span class="sxs-lookup"><span data-stu-id="32002-116">Always specify `MultiSubnetFailover=True` when connecting to a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance.</span></span> <span data-ttu-id="32002-117">`MultiSubnetFailover`Włącza przyspieszyć tryb failover dla wszystkich grup dostępności i wystąpienia klastra trybu Failover w [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 i znacznie zmniejsza czas pracy awaryjnej dla pojedynczych i wielu podsieci topologie AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="32002-117">`MultiSubnetFailover` enables faster failover for all Availability Groups and or Failover Cluster Instance in [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 and will significantly reduce failover time for single and multi-subnet AlwaysOn topologies.</span></span> <span data-ttu-id="32002-118">Podczas pracy awaryjnej wielu podsieci klient podejmie próbę połączenia równolegle.</span><span class="sxs-lookup"><span data-stu-id="32002-118">During a multi-subnet failover, the client will attempt connections in parallel.</span></span> <span data-ttu-id="32002-119">Podczas pracy awaryjnej podsieci agresywnie ponowi próbę połączenia TCP.</span><span class="sxs-lookup"><span data-stu-id="32002-119">During a subnet failover, will aggressively retry the TCP connection.</span></span>  
  
 <span data-ttu-id="32002-120">`MultiSubnetFailover` Połączenia właściwość wskazuje, że aplikacja jest wdrażany w grupie dostępności lub [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] wystąpienia klastra trybu Failover 2012 i SqlClient podejmie próbę połączenia z bazą danych na serwerze podstawowym [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] wystąpienia przez próby nawiązania połączenia z adresami IP.</span><span class="sxs-lookup"><span data-stu-id="32002-120">The `MultiSubnetFailover` connection property indicates that the application is being deployed in an availability group or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance and that SqlClient will try to connect to the database on the primary [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance by trying to connect to all the IP addresses.</span></span> <span data-ttu-id="32002-121">Gdy `MultiSubnetFailover=True` jest określony dla połączenia, klient ponawia próby połączenia TCP szybciej niż przy użyciu protokołu TCP retransmisji systemu operacyjnego domyślne.</span><span class="sxs-lookup"><span data-stu-id="32002-121">When `MultiSubnetFailover=True` is specified for a connection, the client retries TCP connection attempts faster than the operating system’s default TCP retransmit intervals.</span></span> <span data-ttu-id="32002-122">Umożliwia szybsze ponowne nawiązanie połączenia po trybu failover grupy dostępności funkcji AlwaysOn lub zawsze włączone wystąpienia klastra trybu Failover i dotyczy zarówno subnet jednym i wielu grup dostępności i wystąpienia klastra trybu Failover.</span><span class="sxs-lookup"><span data-stu-id="32002-122">This enables faster reconnection after failover of either an AlwaysOn Availability Group or an AlwaysOn Failover Cluster Instance, and is applicable to both single- and multi-subnet Availability Groups and Failover Cluster Instances.</span></span>  
  
 <span data-ttu-id="32002-123">Aby uzyskać więcej informacji na temat słowa kluczowe parametrów połączenia w SqlClient zobacz <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span><span class="sxs-lookup"><span data-stu-id="32002-123">For more information about connection string keywords in SqlClient, see <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span></span>  
  
 <span data-ttu-id="32002-124">Określanie `MultiSubnetFailover=True` podczas nawiązywania połączenia z inną niż odbiornika grupy dostępności lub [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] wystąpienia klastra trybu Failover 2012 może spowodować negatywny wpływ na wydajność i nie jest obsługiwany.</span><span class="sxs-lookup"><span data-stu-id="32002-124">Specifying `MultiSubnetFailover=True` when connecting to something other than a availability group listener or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance may result in a negative performance impact, and is not supported.</span></span>  
  
 <span data-ttu-id="32002-125">Skorzystaj z poniższych wskazówek, aby połączyć się z serwerem w grupie dostępności lub [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] wystąpienia klastra trybu Failover 2012:</span><span class="sxs-lookup"><span data-stu-id="32002-125">Use the following guidelines to connect to a server in an availability group or [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] 2012 Failover Cluster Instance:</span></span>  
  
-   <span data-ttu-id="32002-126">Użyj `MultiSubnetFailover` właściwości połączenia podczas łączenia się z jednej podsieci lub wielu podsieci; poprawi wydajność ich obu.</span><span class="sxs-lookup"><span data-stu-id="32002-126">Use the `MultiSubnetFailover` connection property when connecting to a single subnet or multi-subnet; it will improve performance for both.</span></span>  
  
-   <span data-ttu-id="32002-127">Aby połączyć się z grupy dostępności, określ odbiornika grupy dostępności grupy dostępności jako serwer w ciągu połączenia.</span><span class="sxs-lookup"><span data-stu-id="32002-127">To connect to an availability group, specify the availability group listener of the availability group as the server in your connection string.</span></span>  
  
-   <span data-ttu-id="32002-128">Łączenie z [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] wystąpienia skonfigurowano więcej niż 64 adresy IP spowoduje błąd połączenia.</span><span class="sxs-lookup"><span data-stu-id="32002-128">Connecting to a [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] instance configured with more than 64 IP addresses will cause a connection failure.</span></span>  
  
-   <span data-ttu-id="32002-129">Zachowanie aplikacji, która używa `MultiSubnetFailover` właściwość connection nie ma wpływu na podstawie typu uwierzytelniania: [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] uwierzytelniania, uwierzytelnianie Kerberos lub uwierzytelnianie systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="32002-129">Behavior of an application that uses the `MultiSubnetFailover` connection property is not affected based on the type of authentication: [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] Authentication, Kerberos Authentication, or Windows Authentication.</span></span>  
  
-   <span data-ttu-id="32002-130">Zwiększ wartość `Connect Timeout` przyjmować czas pracy awaryjnej i zmniejsza aplikacji połączenia ponownych prób.</span><span class="sxs-lookup"><span data-stu-id="32002-130">Increase the value of `Connect Timeout` to accommodate for failover time and reduce application connection retry attempts.</span></span>  
  
-   <span data-ttu-id="32002-131">Transakcje rozproszone nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="32002-131">Distributed transactions are not supported.</span></span>  
  
 <span data-ttu-id="32002-132">Jeśli routingu tylko do odczytu nie jest włączone, połączenie z lokalizacją replika pomocnicza nie powiedzie się w następujących sytuacjach:</span><span class="sxs-lookup"><span data-stu-id="32002-132">If read-only routing is not in effect, connecting to a secondary replica location will fail in the following situations:</span></span>  
  
1.  <span data-ttu-id="32002-133">Jeśli lokalizacji replika pomocnicza nie jest skonfigurowany do akceptowania połączeń.</span><span class="sxs-lookup"><span data-stu-id="32002-133">If the secondary replica location is not configured to accept connections.</span></span>  
  
2.  <span data-ttu-id="32002-134">Jeśli aplikacja używa `ApplicationIntent=ReadWrite` (opisanych poniżej) i lokalizacja replika pomocnicza jest skonfigurowana dla dostępu tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-134">If an application uses `ApplicationIntent=ReadWrite` (discussed below) and the secondary replica location is configured for read-only access.</span></span>  
  
 <span data-ttu-id="32002-135"><xref:System.Data.SqlClient.SqlDependency>nie jest obsługiwane w trybie tylko do odczytu replikach pomocniczych.</span><span class="sxs-lookup"><span data-stu-id="32002-135"><xref:System.Data.SqlClient.SqlDependency> is not supported on read-only secondary replicas.</span></span>  
  
 <span data-ttu-id="32002-136">Połączenia zakończy się niepowodzeniem, jeśli replika podstawowa jest skonfigurowany do odrzucania obciążeń tylko do odczytu i parametry połączenia zawierają `ApplicationIntent=ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="32002-136">A connection will fail if a primary replica is configured to reject read-only workloads and the connection string contains `ApplicationIntent=ReadOnly`.</span></span>  
  
## <a name="upgrading-to-use-multi-subnet-clusters-from-database-mirroring"></a><span data-ttu-id="32002-137">Uaktualnianie do użycia wielu podsieci klastrów z dublowania bazy danych</span><span class="sxs-lookup"><span data-stu-id="32002-137">Upgrading to Use Multi-Subnet Clusters from Database Mirroring</span></span>  
 <span data-ttu-id="32002-138">Błąd połączenia (<xref:System.ArgumentException>) zostanie przeprowadzona, jeśli `MultiSubnetFailover` i `Failover Partner` słowa kluczowe połączenia znajdują się w ciągu połączenia, lub jeśli `MultiSubnetFailover=True` i protokołu innego niż TCP jest używany.</span><span class="sxs-lookup"><span data-stu-id="32002-138">A connection error (<xref:System.ArgumentException>) will occur if the `MultiSubnetFailover` and `Failover Partner` connection keywords are present in the connection string, or if `MultiSubnetFailover=True` and a protocol other than TCP is used.</span></span> <span data-ttu-id="32002-139">Wystąpił błąd (<xref:System.Data.SqlClient.SqlException>) również wystąpić, jeśli `MultiSubnetFailover` jest używany i [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] zwraca odpowiedź partnera pracy awaryjnej wskazujący, że jest częścią pary dublowania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="32002-139">An error (<xref:System.Data.SqlClient.SqlException>) will also occur if `MultiSubnetFailover` is used and the [!INCLUDE[ssNoVersion](../../../../../includes/ssnoversion-md.md)] returns a failover partner response indicating it is part of a database mirroring pair.</span></span>  
  
 <span data-ttu-id="32002-140">W przypadku uaktualniania aplikacji SqlClient który aktualnie używa funkcji dublowania baz danych na potrzeby scenariusza wielu podsieci, należy usunąć `Failover Partner` właściwości połączenia i zastąpić go ciągiem `MultiSubnetFailover` ustawioną `True` i zastąp nazwę serwera w Parametry połączenia z odbiornika grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="32002-140">If you upgrade a SqlClient application that currently uses database mirroring to a multi-subnet scenario, you should remove the `Failover Partner` connection property and replace it with `MultiSubnetFailover` set to `True` and replace the server name in the connection string with an availability group listener.</span></span> <span data-ttu-id="32002-141">Jeśli parametry połączenia używane `Failover Partner` i `MultiSubnetFailover=True`, sterownik zostanie wygenerowany błąd.</span><span class="sxs-lookup"><span data-stu-id="32002-141">If a connection string uses `Failover Partner` and `MultiSubnetFailover=True`, the driver will generate an error.</span></span> <span data-ttu-id="32002-142">Jednak jeśli parametry połączenia używane `Failover Partner` i `MultiSubnetFailover=False` (lub `ApplicationIntent=ReadWrite`), aplikacja będzie używać funkcji dublowania baz danych.</span><span class="sxs-lookup"><span data-stu-id="32002-142">However, if a connection string uses `Failover Partner` and `MultiSubnetFailover=False` (or `ApplicationIntent=ReadWrite`), the application will use database mirroring.</span></span>  
  
 <span data-ttu-id="32002-143">Sterownik zwróci błąd, jeśli funkcja dublowania bazy danych jest używany w podstawowej bazy danych w grupy dostępności, a `MultiSubnetFailover=True` jest używany w parametrach połączenia, w którym łączy się z podstawowej bazy danych zamiast do odbiornika grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="32002-143">The driver will return an error if database mirroring is used on the primary database in the AG, and if `MultiSubnetFailover=True` is used in the connection string that connects to a primary database instead of to an availability group listener.</span></span>  
  
## <a name="specifying-application-intent"></a><span data-ttu-id="32002-144">Określanie przeznaczenia aplikacji</span><span class="sxs-lookup"><span data-stu-id="32002-144">Specifying Application Intent</span></span>  
 <span data-ttu-id="32002-145">Gdy `ApplicationIntent=ReadOnly`, klient żąda odczytu obciążenie podczas łączenia się z bazą danych z włączoną funkcją AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="32002-145">When `ApplicationIntent=ReadOnly`, the client requests a read workload when connecting to an AlwaysOn enabled database.</span></span> <span data-ttu-id="32002-146">Serwer będzie wymuszać zamiar w czasie połączenia i podczas użycie instrukcji bazy danych, ale tylko do zawsze włączone bazy danych.</span><span class="sxs-lookup"><span data-stu-id="32002-146">The server will enforce the intent at connection time and during a USE database statement but only to an Always On enabled database.</span></span>  
  
 <span data-ttu-id="32002-147">`ApplicationIntent` — Słowo kluczowe nie działa z bazami danych starszy, tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-147">The `ApplicationIntent` keyword does not work with legacy, read-only databases.</span></span>  
  
 <span data-ttu-id="32002-148">Bazy danych można Zezwalaj lub nie zezwalaj odczytu obciążenie w docelowej bazie danych AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="32002-148">A database can allow or disallow read workloads on the targeted AlwaysOn database.</span></span> <span data-ttu-id="32002-149">(Jest to zrobić za pomocą `ALLOW_CONNECTIONS` klauzuli `PRIMARY_ROLE` i `SECONDARY_ROLE` [!INCLUDE[tsql](../../../../../includes/tsql-md.md)] instrukcji.)</span><span class="sxs-lookup"><span data-stu-id="32002-149">(This is done with the `ALLOW_CONNECTIONS` clause of the `PRIMARY_ROLE` and `SECONDARY_ROLE`[!INCLUDE[tsql](../../../../../includes/tsql-md.md)] statements.)</span></span>  
  
 <span data-ttu-id="32002-150">`ApplicationIntent` Słowo kluczowe jest używane, aby włączyć routing tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-150">The `ApplicationIntent` keyword is used to enable read-only routing.</span></span>  
  
## <a name="read-only-routing"></a><span data-ttu-id="32002-151">Tylko do odczytu routingu</span><span class="sxs-lookup"><span data-stu-id="32002-151">Read-Only Routing</span></span>  
 <span data-ttu-id="32002-152">Tylko do odczytu routing jest funkcją, która może zapewnić dostępność odczytu tylko repliki bazy danych.</span><span class="sxs-lookup"><span data-stu-id="32002-152">Read-only routing is a feature that can ensure the availability of a read only replica of a database.</span></span> <span data-ttu-id="32002-153">Aby włączyć routing tylko do odczytu:</span><span class="sxs-lookup"><span data-stu-id="32002-153">To enable read-only routing:</span></span>  
  
1.  <span data-ttu-id="32002-154">Należy nawiązać odbiornik grupy dostępności zawsze włączonej grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="32002-154">You must connect to an Always On Availability Group availability group listener.</span></span>  
  
2.  <span data-ttu-id="32002-155">`ApplicationIntent` Słowo kluczowe parametrów połączenia musi mieć ustawioną `ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="32002-155">The `ApplicationIntent` connection string keyword must be set to `ReadOnly`.</span></span>  
  
3.  <span data-ttu-id="32002-156">Grupa dostępności musi być skonfigurowany przez administratora bazy danych, aby włączyć routing tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-156">The Availability Group must be configured by the database administrator to enable read-only routing.</span></span>  
  
 <span data-ttu-id="32002-157">Istnieje możliwość, że wiele połączeń przy użyciu routingu tylko do odczytu nie wszystkie będą łączyć się sam repliki tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-157">It is possible that multiple connections using read-only routing will not all connect to the same read-only replica.</span></span> <span data-ttu-id="32002-158">Zmiany w synchronizacji bazy danych lub zmiany w konfiguracji routingu serwera może spowodować połączeń klientów z innej repliki tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-158">Changes in database synchronization or changes in the server's routing configuration can result in client connections to different read-only replicas.</span></span> <span data-ttu-id="32002-159">Aby upewnić się, że wszystkie żądania tylko do odczytu połączyć się z tej samej repliki tylko do odczytu, nie przekazuj odbiornika grupy dostępności, aby `Data Source` słowo kluczowe parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="32002-159">To ensure that all read-only requests connect to the same read-only replica, do not pass an availability group listener to the `Data Source` connection string keyword.</span></span> <span data-ttu-id="32002-160">Zamiast tego należy określić nazwę wystąpienia tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-160">Instead, specify the name of the read-only instance.</span></span>  
  
 <span data-ttu-id="32002-161">Tylko do odczytu routingu może trwać dłużej niż łączenie z serwera podstawowego, ponieważ odczytu tylko routing pierwszy raz łączy się serwerem podstawowym, a następnie szuka najlepiej dostępne dodatkowego do odczytu.</span><span class="sxs-lookup"><span data-stu-id="32002-161">Read-only routing may take longer than connecting to the primary because read only routing first connects to the primary and then looks for the best available readable secondary.</span></span> <span data-ttu-id="32002-162">W związku z tym należy zwiększyć limit czasu użytkownika logowania.</span><span class="sxs-lookup"><span data-stu-id="32002-162">Because of this, you should increase your login timeout.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="32002-163">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="32002-163">See Also</span></span>  
 [<span data-ttu-id="32002-164">Funkcje Serwera SQL i ADO.NET</span><span class="sxs-lookup"><span data-stu-id="32002-164">SQL Server Features and ADO.NET</span></span>](../../../../../docs/framework/data/adonet/sql/sql-server-features-and-adonet.md)  
 [<span data-ttu-id="32002-165">ADO.NET zarządzanego dostawcy i zestawu danych w Centrum deweloperów</span><span class="sxs-lookup"><span data-stu-id="32002-165">ADO.NET Managed Providers and DataSet Developer Center</span></span>](http://go.microsoft.com/fwlink/?LinkId=217917)
