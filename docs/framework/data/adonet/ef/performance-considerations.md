---
title: "Zagadnienia dotyczące wydajności (Entity Framework)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-ado
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 61913f3b-4f42-4d9b-810f-2a13c2388a4a
caps.latest.revision: "6"
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.workload: dotnet
ms.openlocfilehash: 0f03a82c2164eac489a568ff4c0f3f9c55cf4326
ms.sourcegitcommit: ed26cfef4e18f6d93ab822d8c29f902cff3519d1
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/17/2018
---
# <a name="performance-considerations-entity-framework"></a><span data-ttu-id="41caf-102">Zagadnienia dotyczące wydajności (Entity Framework)</span><span class="sxs-lookup"><span data-stu-id="41caf-102">Performance Considerations (Entity Framework)</span></span>
<span data-ttu-id="41caf-103">W tym temacie opisano charakterystyki wydajności programu ADO.NET Entity Framework oraz przedstawiono pewne kwestie dotyczące pomagają zwiększyć wydajność aplikacji programu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="41caf-103">This topic describes performance characteristics of the ADO.NET Entity Framework and provides some considerations to help improve the performance of Entity Framework applications.</span></span>  
  
## <a name="stages-of-query-execution"></a><span data-ttu-id="41caf-104">Etapy wykonywania zapytania</span><span class="sxs-lookup"><span data-stu-id="41caf-104">Stages of Query Execution</span></span>  
 <span data-ttu-id="41caf-105">Aby lepiej zrozumieć wydajności zapytań w programie Entity Framework, warto informacje o operacjach, które wystąpić, gdy zapytanie wykonuje względem modelu koncepcyjnego i zwraca dane jako obiekty.</span><span class="sxs-lookup"><span data-stu-id="41caf-105">In order to better understand the performance of queries in the Entity Framework, it is helpful to understand the operations that occur when a query executes against a conceptual model and returns data as objects.</span></span> <span data-ttu-id="41caf-106">W poniższej tabeli opisano następujące operacje.</span><span class="sxs-lookup"><span data-stu-id="41caf-106">The following table describes this series of operations.</span></span>  
  
|<span data-ttu-id="41caf-107">Operacja</span><span class="sxs-lookup"><span data-stu-id="41caf-107">Operation</span></span>|<span data-ttu-id="41caf-108">Względny koszt</span><span class="sxs-lookup"><span data-stu-id="41caf-108">Relative Cost</span></span>|<span data-ttu-id="41caf-109">Częstotliwość</span><span class="sxs-lookup"><span data-stu-id="41caf-109">Frequency</span></span>|<span data-ttu-id="41caf-110">Komentarze</span><span class="sxs-lookup"><span data-stu-id="41caf-110">Comments</span></span>|  
|---------------|-------------------|---------------|--------------|  
|<span data-ttu-id="41caf-111">Ładowanie metadanych</span><span class="sxs-lookup"><span data-stu-id="41caf-111">Loading metadata</span></span>|<span data-ttu-id="41caf-112">Umiarkowany</span><span class="sxs-lookup"><span data-stu-id="41caf-112">Moderate</span></span>|<span data-ttu-id="41caf-113">Raz w każdej domenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="41caf-113">Once in each application domain.</span></span>|<span data-ttu-id="41caf-114">Metadane modelu i mapowania używane przez program Entity Framework jest ładowany do <xref:System.Data.Metadata.Edm.MetadataWorkspace>.</span><span class="sxs-lookup"><span data-stu-id="41caf-114">Model and mapping metadata used by the Entity Framework is loaded into a <xref:System.Data.Metadata.Edm.MetadataWorkspace>.</span></span> <span data-ttu-id="41caf-115">Te metadane są buforowane globalnie i jest dostępny dla innych wystąpień <xref:System.Data.Objects.ObjectContext> w tej samej domenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="41caf-115">This metadata is cached globally and is available to other instances of <xref:System.Data.Objects.ObjectContext> in the same application domain.</span></span>|  
|<span data-ttu-id="41caf-116">Otwieranie połączenia z bazą danych</span><span class="sxs-lookup"><span data-stu-id="41caf-116">Opening the database connection</span></span>|<span data-ttu-id="41caf-117">Umiarkowany<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-117">Moderate<sup>1</sup></span></span>|<span data-ttu-id="41caf-118">w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="41caf-118">As needed.</span></span>|<span data-ttu-id="41caf-119">Ponieważ Otwieranie połączenia z bazą danych zużywa cenne zasobu [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] otwiera i zamyka połączenie z bazą danych tylko w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="41caf-119">Because an open connection to the database consumes a valuable resource, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] opens and closes the database connection only as needed.</span></span> <span data-ttu-id="41caf-120">Można również jawnie otworzyć połączenia.</span><span class="sxs-lookup"><span data-stu-id="41caf-120">You can also explicitly open the connection.</span></span> <span data-ttu-id="41caf-121">Aby uzyskać więcej informacji, zobacz [Zarządzanie połączeniami i transakcje](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span><span class="sxs-lookup"><span data-stu-id="41caf-121">For more information, see [Managing Connections and Transactions](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span></span>|  
|<span data-ttu-id="41caf-122">Generowanie widoków</span><span class="sxs-lookup"><span data-stu-id="41caf-122">Generating views</span></span>|<span data-ttu-id="41caf-123">Wysoka</span><span class="sxs-lookup"><span data-stu-id="41caf-123">High</span></span>|<span data-ttu-id="41caf-124">Raz w każdej domenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="41caf-124">Once in each application domain.</span></span> <span data-ttu-id="41caf-125">(Można wstępnie wygenerować.)</span><span class="sxs-lookup"><span data-stu-id="41caf-125">(Can be pre-generated.)</span></span>|<span data-ttu-id="41caf-126">Zanim programu Entity Framework można wykonać zapytania względem modelu koncepcyjnego lub zapisać zmian w źródle danych, go wygenerować zestaw widoków zapytań lokalnego dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-126">Before the Entity Framework can execute a query against a conceptual model or save changes to the data source, it must generate a set of local query views to access the database.</span></span> <span data-ttu-id="41caf-127">Z powodu wysokiego kosztu generowania tych widoków można wstępnego wygenerowania widoków i dodaj je do projektu w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="41caf-127">Because of the high cost of generating these views, you can pre-generate the views and add them to the project at design-time.</span></span> <span data-ttu-id="41caf-128">Aby uzyskać więcej informacji, zobacz [porady: Pre-Generate widoków, aby poprawić wydajność kwerend](http://msdn.microsoft.com/en-us/b18a9d16-e10b-4043-ba91-b632f85a2579).</span><span class="sxs-lookup"><span data-stu-id="41caf-128">For more information, see [How to: Pre-Generate Views to Improve Query Performance](http://msdn.microsoft.com/en-us/b18a9d16-e10b-4043-ba91-b632f85a2579).</span></span>|  
|<span data-ttu-id="41caf-129">Trwa przygotowywanie zapytania</span><span class="sxs-lookup"><span data-stu-id="41caf-129">Preparing the query</span></span>|<span data-ttu-id="41caf-130">Umiarkowany<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-130">Moderate<sup>2</sup></span></span>|<span data-ttu-id="41caf-131">Tylko jeden raz dla każdego zapytania unikatowy.</span><span class="sxs-lookup"><span data-stu-id="41caf-131">Once for each unique query.</span></span>|<span data-ttu-id="41caf-132">Obejmuje koszty tworzą polecenia query Generowanie poziomu drzewa poleceń na podstawie modelu i mapowania metadanych i zdefiniuj kształt danych zwracanych.</span><span class="sxs-lookup"><span data-stu-id="41caf-132">Includes the costs to compose the query command, generate a command tree based on model and mapping metadata, and define the shape of the returned data.</span></span> <span data-ttu-id="41caf-133">Ponieważ teraz są buforowane zarówno w poleceniach zapytań SQL jednostki i zapytań LINQ, nowsze wykonania tego samego zapytania zająć mniej czasu.</span><span class="sxs-lookup"><span data-stu-id="41caf-133">Because now both Entity SQL query commands and LINQ queries are cached, later executions of the same query take less time.</span></span> <span data-ttu-id="41caf-134">Skompilowane zapytania LINQ nadal służy do tego kosztów w późniejszym wykonaniami i skompilowane zapytania może być skuteczniejsza niż zapytań LINQ, które są automatycznie buforowane.</span><span class="sxs-lookup"><span data-stu-id="41caf-134">You can still use compiled LINQ queries to reduce this cost in later executions and compiled queries can be more efficient than LINQ queries that are automatically cached.</span></span> <span data-ttu-id="41caf-135">Aby uzyskać więcej informacji, zobacz [skompilowane zapytania (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/compiled-queries-linq-to-entities.md).</span><span class="sxs-lookup"><span data-stu-id="41caf-135">For more information, see [Compiled Queries  (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/compiled-queries-linq-to-entities.md).</span></span> <span data-ttu-id="41caf-136">Aby uzyskać ogólne informacje na temat wykonywania zapytań LINQ, zobacz [LINQ to Entities](../../../../../docs/framework/data/adonet/ef/language-reference/linq-to-entities.md).</span><span class="sxs-lookup"><span data-stu-id="41caf-136">For general information about LINQ query execution, see [LINQ to Entities](../../../../../docs/framework/data/adonet/ef/language-reference/linq-to-entities.md).</span></span> <span data-ttu-id="41caf-137">**Uwaga:** LINQ do jednostek zapytań, które są stosowane `Enumerable.Contains` operator do kolekcji w pamięci nie są automatycznie buforowane.</span><span class="sxs-lookup"><span data-stu-id="41caf-137">**Note:**  LINQ to Entities queries that apply the `Enumerable.Contains` operator to in-memory collections are not automatically cached.</span></span> <span data-ttu-id="41caf-138">Parametryzacja również kolekcji w pamięci w skompilowanych zapytań LINQ jest niedozwolone.</span><span class="sxs-lookup"><span data-stu-id="41caf-138">Also parameterizing in-memory collections in compiled LINQ queries is not allowed.</span></span>|  
|<span data-ttu-id="41caf-139">Wykonywanie zapytania</span><span class="sxs-lookup"><span data-stu-id="41caf-139">Executing the query</span></span>|<span data-ttu-id="41caf-140">Low<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-140">Low<sup>2</sup></span></span>|<span data-ttu-id="41caf-141">Tylko jeden raz dla każdego zapytania.</span><span class="sxs-lookup"><span data-stu-id="41caf-141">Once for each query.</span></span>|<span data-ttu-id="41caf-142">Koszt wykonywania polecenia względem źródła danych przy użyciu dostawcy danych ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="41caf-142">The cost of executing the command against the data source by using the ADO.NET data provider.</span></span> <span data-ttu-id="41caf-143">Ponieważ większość źródeł danych pamięci podręcznej planów kwerend, nowsze wykonania tego samego zapytania może potrwać nawet mniej czasu.</span><span class="sxs-lookup"><span data-stu-id="41caf-143">Because most data sources cache query plans, later executions of the same query may take even less time.</span></span>|  
|<span data-ttu-id="41caf-144">Ładowanie i sprawdzanie poprawności typów</span><span class="sxs-lookup"><span data-stu-id="41caf-144">Loading and validating types</span></span>|<span data-ttu-id="41caf-145">Niski<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-145">Low<sup>3</sup></span></span>|<span data-ttu-id="41caf-146">Tylko jeden raz dla każdego <xref:System.Data.Objects.ObjectContext> wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="41caf-146">Once for each <xref:System.Data.Objects.ObjectContext> instance.</span></span>|<span data-ttu-id="41caf-147">Typów są ładowane ani weryfikowana pod kątem typy, które definiuje modelu koncepcyjnego.</span><span class="sxs-lookup"><span data-stu-id="41caf-147">Types are loaded and validated against the types that the conceptual model defines.</span></span>|  
|<span data-ttu-id="41caf-148">Śledzenie</span><span class="sxs-lookup"><span data-stu-id="41caf-148">Tracking</span></span>|<span data-ttu-id="41caf-149">Niski<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-149">Low<sup>3</sup></span></span>|<span data-ttu-id="41caf-150">Tylko jeden raz dla każdego obiektu, który zwraca zapytanie.</span><span class="sxs-lookup"><span data-stu-id="41caf-150">Once for each object that a query returns.</span></span> <span data-ttu-id="41caf-151"><sup>4</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-151"><sup>4</sup></span></span>|<span data-ttu-id="41caf-152">Jeśli zapytanie używa <xref:System.Data.Objects.MergeOption.NoTracking> opcji scalania, tym etapie nie wpływa na wydajność.</span><span class="sxs-lookup"><span data-stu-id="41caf-152">If a query uses the <xref:System.Data.Objects.MergeOption.NoTracking> merge option, this stage does not affect performance.</span></span><br /><br /> <span data-ttu-id="41caf-153">Jeśli zapytanie używa <xref:System.Data.Objects.MergeOption.AppendOnly>, <xref:System.Data.Objects.MergeOption.PreserveChanges>, lub <xref:System.Data.Objects.MergeOption.OverwriteChanges> merge — opcja, zapytania wyniki są śledzone w <xref:System.Data.Objects.ObjectStateManager>.</span><span class="sxs-lookup"><span data-stu-id="41caf-153">If the query uses the <xref:System.Data.Objects.MergeOption.AppendOnly>, <xref:System.Data.Objects.MergeOption.PreserveChanges>, or <xref:System.Data.Objects.MergeOption.OverwriteChanges> merge option, query results are tracked in the <xref:System.Data.Objects.ObjectStateManager>.</span></span> <span data-ttu-id="41caf-154"><xref:System.Data.EntityKey> Jest generowany dla każdego śledzonego obiektu zapytanie zwracające i jest używany do tworzenia <xref:System.Data.Objects.ObjectStateEntry> w <xref:System.Data.Objects.ObjectStateManager>.</span><span class="sxs-lookup"><span data-stu-id="41caf-154">An <xref:System.Data.EntityKey> is generated for each tracked object that the query returns and is used to create an <xref:System.Data.Objects.ObjectStateEntry> in the <xref:System.Data.Objects.ObjectStateManager>.</span></span> <span data-ttu-id="41caf-155">Jeśli istniejące <xref:System.Data.Objects.ObjectStateEntry> można znaleźć <xref:System.Data.EntityKey>, istniejący obiekt jest zwracany.</span><span class="sxs-lookup"><span data-stu-id="41caf-155">If an existing <xref:System.Data.Objects.ObjectStateEntry> can be found for the <xref:System.Data.EntityKey>, the existing object is returned.</span></span> <span data-ttu-id="41caf-156">Jeśli <xref:System.Data.Objects.MergeOption.PreserveChanges>, lub <xref:System.Data.Objects.MergeOption.OverwriteChanges> jest używana opcja, przed jego zwróceniem aktualizacji obiektu.</span><span class="sxs-lookup"><span data-stu-id="41caf-156">If the <xref:System.Data.Objects.MergeOption.PreserveChanges>, or <xref:System.Data.Objects.MergeOption.OverwriteChanges> option is used, the object is updated before it is returned.</span></span><br /><br /> <span data-ttu-id="41caf-157">Aby uzyskać więcej informacji, zobacz [rozpoznawania tożsamości, zarządzanie stanem i śledzenia zmian](http://msdn.microsoft.com/en-us/3bd49311-0e72-4ea4-8355-38fe57036ba0).</span><span class="sxs-lookup"><span data-stu-id="41caf-157">For more information, see [Identity Resolution, State Management, and Change Tracking](http://msdn.microsoft.com/en-us/3bd49311-0e72-4ea4-8355-38fe57036ba0).</span></span>|  
|<span data-ttu-id="41caf-158">Materializowania obiektów</span><span class="sxs-lookup"><span data-stu-id="41caf-158">Materializing the objects</span></span>|<span data-ttu-id="41caf-159">Umiarkowany<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-159">Moderate<sup>3</sup></span></span>|<span data-ttu-id="41caf-160">Tylko jeden raz dla każdego obiektu, który zwraca zapytanie.</span><span class="sxs-lookup"><span data-stu-id="41caf-160">Once for each object that a query returns.</span></span> <span data-ttu-id="41caf-161"><sup>4</sup></span><span class="sxs-lookup"><span data-stu-id="41caf-161"><sup>4</sup></span></span>|<span data-ttu-id="41caf-162">Proces odczytu zwróconego <xref:System.Data.Common.DbDataReader> obiektu i tworzenia obiektów i ustawiania wartości właściwości, które są oparte na wartościach każde wystąpienie <xref:System.Data.Common.DbDataRecord> klasy.</span><span class="sxs-lookup"><span data-stu-id="41caf-162">The process of reading the returned <xref:System.Data.Common.DbDataReader> object and creating objects and setting property values that are based on the values in each instance of the <xref:System.Data.Common.DbDataRecord> class.</span></span> <span data-ttu-id="41caf-163">Jeśli ten obiekt już istnieje w <xref:System.Data.Objects.ObjectContext> i zapytanie używa <xref:System.Data.Objects.MergeOption.AppendOnly> lub <xref:System.Data.Objects.MergeOption.PreserveChanges> opcji scalania, tym etapie nie wpływa na wydajność.</span><span class="sxs-lookup"><span data-stu-id="41caf-163">If the object already exists in the <xref:System.Data.Objects.ObjectContext> and the query uses the <xref:System.Data.Objects.MergeOption.AppendOnly> or <xref:System.Data.Objects.MergeOption.PreserveChanges> merge options, this stage does not affect performance.</span></span> <span data-ttu-id="41caf-164">Aby uzyskać więcej informacji, zobacz [rozpoznawania tożsamości, zarządzanie stanem i śledzenia zmian](http://msdn.microsoft.com/en-us/3bd49311-0e72-4ea4-8355-38fe57036ba0).</span><span class="sxs-lookup"><span data-stu-id="41caf-164">For more information, see [Identity Resolution, State Management, and Change Tracking](http://msdn.microsoft.com/en-us/3bd49311-0e72-4ea4-8355-38fe57036ba0).</span></span>|  
  
 <span data-ttu-id="41caf-165"><sup>1</sup> gdy dostawca źródła danych implementuje buforowanie połączeń, kosztów otwarcia połączenia jest dystrybuowana do puli.</span><span class="sxs-lookup"><span data-stu-id="41caf-165"><sup>1</sup> When a data source provider implements connection pooling, the cost of opening a connection is distributed across the pool.</span></span> <span data-ttu-id="41caf-166">Dostawcy .NET dla programu SQL Server obsługuje puli połączeń.</span><span class="sxs-lookup"><span data-stu-id="41caf-166">The .NET Provider for SQL Server supports connection pooling.</span></span>  
  
 <span data-ttu-id="41caf-167"><sup>2</sup> koszt zwiększa się wraz z zapytania zwiększenia złożoności.</span><span class="sxs-lookup"><span data-stu-id="41caf-167"><sup>2</sup> Cost increases with increased query complexity.</span></span>  
  
 <span data-ttu-id="41caf-168"><sup>3</sup> całkowity koszt zwiększa proporcjonalna do liczby obiektów zwróconych przez kwerendę.</span><span class="sxs-lookup"><span data-stu-id="41caf-168"><sup>3</sup> Total cost increases proportional to the number of objects returned by the query.</span></span>  
  
 <span data-ttu-id="41caf-169"><sup>4</sup> ten narzut nie jest wymagane dla EntityClient zapytania, ponieważ return wysyła zapytanie do dostawcy EntityClient <xref:System.Data.EntityClient.EntityDataReader> zamiast obiektów.</span><span class="sxs-lookup"><span data-stu-id="41caf-169"><sup>4</sup> This overhead is not required for EntityClient queries because EntityClient queries return an <xref:System.Data.EntityClient.EntityDataReader> instead of objects.</span></span> <span data-ttu-id="41caf-170">Aby uzyskać więcej informacji, zobacz [dostawcy EntityClient Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).</span><span class="sxs-lookup"><span data-stu-id="41caf-170">For more information, see [EntityClient Provider for the Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).</span></span>  
  
## <a name="additional-considerations"></a><span data-ttu-id="41caf-171">Dodatkowe uwagi</span><span class="sxs-lookup"><span data-stu-id="41caf-171">Additional Considerations</span></span>  
 <span data-ttu-id="41caf-172">Poniżej przedstawiono innych kwestii, które mogą wpływać na wydajność aplikacji programu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="41caf-172">The following are other considerations that may affect the performance of Entity Framework applications.</span></span>  
  
### <a name="query-execution"></a><span data-ttu-id="41caf-173">Wykonywanie zapytania</span><span class="sxs-lookup"><span data-stu-id="41caf-173">Query Execution</span></span>  
 <span data-ttu-id="41caf-174">Zapytania mogą być ilości zasobów, należy wziąć pod uwagę w momencie, jakie w kodzie i na komputerze, jakie zapytanie jest wykonywane.</span><span class="sxs-lookup"><span data-stu-id="41caf-174">Because queries can be resource intensive, consider at what point in your code and on what computer a query is executed.</span></span>  
  
#### <a name="deferred-versus-immediate-execution"></a><span data-ttu-id="41caf-175">Odroczone i natychmiastowego wykonania</span><span class="sxs-lookup"><span data-stu-id="41caf-175">Deferred versus immediate execution</span></span>  
 <span data-ttu-id="41caf-176">Po utworzeniu <xref:System.Data.Objects.ObjectQuery%601> lub zapytań LINQ zapytania nie może być wykonane natychmiast.</span><span class="sxs-lookup"><span data-stu-id="41caf-176">When you create an <xref:System.Data.Objects.ObjectQuery%601> or LINQ query, the query may not be executed immediately.</span></span> <span data-ttu-id="41caf-177">Wykonywanie zapytania została odroczona dopóki wyniki są potrzebne, takich jak podczas `foreach` (C#) lub `For Each` wyliczenia (Visual Basic) lub gdy jest przypisany do wypełnienia <xref:System.Collections.Generic.List%601> kolekcji.</span><span class="sxs-lookup"><span data-stu-id="41caf-177">Query execution is deferred until the results are needed, such as during a `foreach` (C#) or `For Each` (Visual Basic) enumeration or when it is assigned to fill a <xref:System.Collections.Generic.List%601> collection.</span></span> <span data-ttu-id="41caf-178">Wykonywanie zapytania rozpocznie się natychmiast po wywołaniu <xref:System.Data.Objects.ObjectQuery%601.Execute%2A> metoda <xref:System.Data.Objects.ObjectQuery%601> lub po wywołaniu metody LINQ zwraca pojedynczych zapytań, takich jak <xref:System.Linq.Enumerable.First%2A> lub <xref:System.Linq.Enumerable.Any%2A>.</span><span class="sxs-lookup"><span data-stu-id="41caf-178">Query execution begins immediately when you call the <xref:System.Data.Objects.ObjectQuery%601.Execute%2A> method on an <xref:System.Data.Objects.ObjectQuery%601> or when you call a LINQ method that returns a singleton query, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Any%2A>.</span></span> <span data-ttu-id="41caf-179">Aby uzyskać więcej informacji, zobacz [zapytań obiektu](http://msdn.microsoft.com/en-us/0768033c-876f-471d-85d5-264884349276) i [wykonywanie zapytania (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span><span class="sxs-lookup"><span data-stu-id="41caf-179">For more information, see [Object Queries](http://msdn.microsoft.com/en-us/0768033c-876f-471d-85d5-264884349276) and [Query Execution (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span></span>  
  
#### <a name="client-side-execution-of-linq-queries"></a><span data-ttu-id="41caf-180">Po stronie klienta wykonywania zapytań LINQ</span><span class="sxs-lookup"><span data-stu-id="41caf-180">Client-side execution of LINQ queries</span></span>  
 <span data-ttu-id="41caf-181">Mimo że wykonywanie zapytań LINQ występuje na komputerze, który obsługuje źródła danych, niektórych części zapytania LINQ może być oceniana na komputerze klienckim.</span><span class="sxs-lookup"><span data-stu-id="41caf-181">Although the execution of a LINQ query occurs on the computer that hosts the data source, some parts of a LINQ query may be evaluated on the client computer.</span></span> <span data-ttu-id="41caf-182">Aby uzyskać więcej informacji, zobacz sekcję wykonywania magazynu [wykonywanie zapytania (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span><span class="sxs-lookup"><span data-stu-id="41caf-182">For more information, see the Store Execution section of [Query Execution (LINQ to Entities)](../../../../../docs/framework/data/adonet/ef/language-reference/query-execution.md).</span></span>  
  
### <a name="query-and-mapping-complexity"></a><span data-ttu-id="41caf-183">Zapytania i mapowanie złożoności</span><span class="sxs-lookup"><span data-stu-id="41caf-183">Query and Mapping Complexity</span></span>  
 <span data-ttu-id="41caf-184">Złożoność poszczególnych kwerend i mapowanie w modelu jednostki będzie mieć znaczący wpływ na wydajność kwerend.</span><span class="sxs-lookup"><span data-stu-id="41caf-184">The complexity of individual queries and of the mapping in the entity model will have a significant effect on query performance.</span></span>  
  
#### <a name="mapping-complexity"></a><span data-ttu-id="41caf-185">Mapowanie złożoności</span><span class="sxs-lookup"><span data-stu-id="41caf-185">Mapping complexity</span></span>  
 <span data-ttu-id="41caf-186">Modele, które są bardziej skomplikowane niż proste mapowanie jeden do jednego między jednostek w modelu koncepcyjnym i tabele w modelu magazynu wygenerować polecenia bardziej złożone niż modeli mapowanie jeden do jednego.</span><span class="sxs-lookup"><span data-stu-id="41caf-186">Models that are more complex than a simple one-to-one mapping between entities in the conceptual model and tables in the storage model generate more complex commands than models that have a one-to-one mapping.</span></span>  
  
#### <a name="query-complexity"></a><span data-ttu-id="41caf-187">Złożoność zapytania</span><span class="sxs-lookup"><span data-stu-id="41caf-187">Query complexity</span></span>  
 <span data-ttu-id="41caf-188">Zapytania wymagające dużą liczbę sprzężeń w poleceń, które są wykonywane w źródle danych lub dużej ilości danych, które zwracają mogą wpływać na wydajność w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="41caf-188">Queries that require a large number of joins in the commands that are executed against the data source or that return a large amount of data may affect performance in the following ways:</span></span>  
  
-   <span data-ttu-id="41caf-189">Zapytań dotyczących modelu koncepcyjnego, które wydają się proste może spowodować wykonanie bardziej złożonych zapytań względem źródła danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-189">Queries against a conceptual model that seem simple may result in the execution of more complex queries against the data source.</span></span> <span data-ttu-id="41caf-190">Może to wystąpić, ponieważ zapytanie model koncepcyjny programu Entity Framework przekłada się na równoważne zapytania względem źródła danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-190">This can occur because the Entity Framework translates a query against a conceptual model into an equivalent query against the data source.</span></span> <span data-ttu-id="41caf-191">Po ustawieniu pojedynczej jednostki modelu koncepcyjnym mapy do więcej niż jednej tabeli w źródle danych, lub gdy relacji między obiektami jest mapowany na tabelę sprzężenia, polecenie zapytanie wykonane na kwerendy źródła danych mogą wymagać sprzężenia jeden lub więcej.</span><span class="sxs-lookup"><span data-stu-id="41caf-191">When a single entity set in the conceptual model maps to more than one table in the data source, or when a relationship between entities is mapped to a join table, the query command executed against the data source query may require one or more joins.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="41caf-192">Użyj <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> metody <xref:System.Data.Objects.ObjectQuery%601> lub <xref:System.Data.EntityClient.EntityCommand> klasy mogą wyświetlać polecenia, które są wykonywane względem źródła danych dla określonego zapytania.</span><span class="sxs-lookup"><span data-stu-id="41caf-192">Use the <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> method of the <xref:System.Data.Objects.ObjectQuery%601> or <xref:System.Data.EntityClient.EntityCommand> classes to view the commands that are executed against the data source for a given query.</span></span> <span data-ttu-id="41caf-193">Aby uzyskać więcej informacji, zobacz [porady: wyświetlanie poleceń magazynu](http://msdn.microsoft.com/en-us/f9771c6e-3b62-4b24-a5d4-55d68e14fa79).</span><span class="sxs-lookup"><span data-stu-id="41caf-193">For more information, see [How to: View the Store Commands](http://msdn.microsoft.com/en-us/f9771c6e-3b62-4b24-a5d4-55d68e14fa79).</span></span>  
  
-   <span data-ttu-id="41caf-194">Zapytania SQL jednostki zagnieżdżone może tworzyć sprzężenia na serwerze i może zwrócić dużą liczbę wierszy.</span><span class="sxs-lookup"><span data-stu-id="41caf-194">Nested Entity SQL queries may create joins on the server and can return a large number of rows.</span></span>  
  
     <span data-ttu-id="41caf-195">Poniżej przedstawiono przykładowe zapytanie zagnieżdżone w klauzuli projekcji:</span><span class="sxs-lookup"><span data-stu-id="41caf-195">The following is an example of a nested query in a projection clause:</span></span>  
  
    ```  
    SELECT c, (SELECT c, (SELECT c FROM AdventureWorksModel.Vendor AS c  ) As Inner2   
        FROM AdventureWorksModel.JobCandidate AS c  ) As Inner1   
        FROM AdventureWorksModel.EmployeeDepartmentHistory AS c  
    ```  
  
     <span data-ttu-id="41caf-196">Ponadto takie kwerendy powoduje potoku zapytania można wygenerować pojedynczego zapytania zduplikowanie obiektów między zapytania zagnieżdżone.</span><span class="sxs-lookup"><span data-stu-id="41caf-196">In addition, such queries cause the query pipeline to generate a single query with duplication of objects across nested queries.</span></span> <span data-ttu-id="41caf-197">W związku z tym pojedynczej kolumny mogą być zduplikowane wiele razy.</span><span class="sxs-lookup"><span data-stu-id="41caf-197">Because of this, a single column may be duplicated multiple times.</span></span> <span data-ttu-id="41caf-198">W niektórych baz danych, w tym program SQL Server może to spowodować tabeli bazy danych TempDB rośnie bardzo duży, która może obniżyć wydajność serwera.</span><span class="sxs-lookup"><span data-stu-id="41caf-198">On some databases, including SQL Server, this can cause the TempDB table to grow very large, which can decrease server performance.</span></span> <span data-ttu-id="41caf-199">Należy zachować ostrożność podczas wykonywania zapytania zagnieżdżone.</span><span class="sxs-lookup"><span data-stu-id="41caf-199">Care should be taken when you execute nested queries.</span></span>  
  
-   <span data-ttu-id="41caf-200">Wszelkie zapytań, które zwracają dużej ilości danych może spowodować obniżenie wydajności, jeśli klient wykonuje operacje, których użycie zasobów w taki sposób, który jest proporcjonalny do rozmiaru zestawu wyników.</span><span class="sxs-lookup"><span data-stu-id="41caf-200">Any queries that return a large amount of data can cause decreased performance if the client is performing operations that consume resources in a way that is proportional to the size of the result set.</span></span> <span data-ttu-id="41caf-201">W takim przypadku należy rozważyć ograniczenie ilości danych zwróconych przez kwerendę.</span><span class="sxs-lookup"><span data-stu-id="41caf-201">In such cases, you should consider limiting the amount of data returned by the query.</span></span> <span data-ttu-id="41caf-202">Aby uzyskać więcej informacji, zobacz [porady: strona za pośrednictwem wyników zapytania](http://msdn.microsoft.com/en-us/ffc0f920-e7de-42e0-9b12-ef356421d030).</span><span class="sxs-lookup"><span data-stu-id="41caf-202">For more information, see [How to: Page Through Query Results](http://msdn.microsoft.com/en-us/ffc0f920-e7de-42e0-9b12-ef356421d030).</span></span>  
  
 <span data-ttu-id="41caf-203">Wszystkie polecenia generowane automatycznie przez program Entity Framework mogą być bardziej skomplikowane niż podobnych poleceń jawnie zapisanych przez dewelopera bazy danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-203">Any commands automatically generated by the Entity Framework may be more complex than similar commands written explicitly by a database developer.</span></span> <span data-ttu-id="41caf-204">Jawne kontrolę nad polecenia wykonywane względem źródła danych, należy wziąć pod uwagę Definiowanie mapowania do procedury składowanej lub funkcji zwracającej tabelę.</span><span class="sxs-lookup"><span data-stu-id="41caf-204">If you need explicit control over the commands executed against your data source, consider defining a mapping to a table-valued function or stored procedure.</span></span>  
  
#### <a name="relationships"></a><span data-ttu-id="41caf-205">Relacje</span><span class="sxs-lookup"><span data-stu-id="41caf-205">Relationships</span></span>  
 <span data-ttu-id="41caf-206">Dla zapytania optymalną wydajność należy zdefiniować relacje między obiektami skojarzenia w modelu jednostki oraz w relacje logiczne w źródle danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-206">For optimal query performance, you must define relationships between entities both as associations in the entity model and as logical relationships in the data source.</span></span>  
  
### <a name="query-paths"></a><span data-ttu-id="41caf-207">Ścieżki zapytania</span><span class="sxs-lookup"><span data-stu-id="41caf-207">Query Paths</span></span>  
 <span data-ttu-id="41caf-208">Domyślnie podczas wykonywania <xref:System.Data.Objects.ObjectQuery%601>, powiązane obiekty nie są zwracane (mimo że obiekty, które reprezentują same relacje są).</span><span class="sxs-lookup"><span data-stu-id="41caf-208">By default, when you execute an <xref:System.Data.Objects.ObjectQuery%601>, related objects are not returned (although objects that represent the relationships themselves are).</span></span> <span data-ttu-id="41caf-209">Można ładować powiązanych obiektów w jednym z trzech sposobów:</span><span class="sxs-lookup"><span data-stu-id="41caf-209">You can load related objects in one of three ways:</span></span>  
  
1.  <span data-ttu-id="41caf-210">Ustaw ścieżkę zapytania przed <xref:System.Data.Objects.ObjectQuery%601> jest wykonywana.</span><span class="sxs-lookup"><span data-stu-id="41caf-210">Set the query path before the <xref:System.Data.Objects.ObjectQuery%601> is executed.</span></span>  
  
2.  <span data-ttu-id="41caf-211">Wywołanie `Load` metody dla obiekt ujawniający właściwość nawigacji.</span><span class="sxs-lookup"><span data-stu-id="41caf-211">Call the `Load` method on the navigation property that the object exposes.</span></span>  
  
3.  <span data-ttu-id="41caf-212">Ustaw <xref:System.Data.Objects.ObjectContextOptions.LazyLoadingEnabled%2A> opcja <xref:System.Data.Objects.ObjectContext> do `true`.</span><span class="sxs-lookup"><span data-stu-id="41caf-212">Set the <xref:System.Data.Objects.ObjectContextOptions.LazyLoadingEnabled%2A> option on the <xref:System.Data.Objects.ObjectContext> to `true`.</span></span> <span data-ttu-id="41caf-213">Należy pamiętać, że odbywa się to automatycznie podczas generowania kodu warstwy obiektu z [Projektant modelu danych jednostki](http://msdn.microsoft.com/en-us/4ccd7ad6-b934-4f7c-82a0-cfd2d4a95faf).</span><span class="sxs-lookup"><span data-stu-id="41caf-213">Note that this is done automatically when you generate object-layer code with the [Entity Data Model Designer](http://msdn.microsoft.com/en-us/4ccd7ad6-b934-4f7c-82a0-cfd2d4a95faf).</span></span> <span data-ttu-id="41caf-214">Aby uzyskać więcej informacji, zobacz [wygenerowany Przegląd kodu](http://msdn.microsoft.com/en-us/6a88ea38-6a90-4107-bc33-531b79ce5b6a).</span><span class="sxs-lookup"><span data-stu-id="41caf-214">For more information see [Generated Code Overview](http://msdn.microsoft.com/en-us/6a88ea38-6a90-4107-bc33-531b79ce5b6a).</span></span>  
  
 <span data-ttu-id="41caf-215">Gdy należy wziąć pod uwagę opcji, należy pamiętać, Brak zależności od liczby żądań w bazie danych i ilość danych zwróconych w jednym zapytaniu.</span><span class="sxs-lookup"><span data-stu-id="41caf-215">When you consider which option to use, be aware that there is a tradeoff between the number of requests against the database and the amount of data returned in a single query.</span></span> <span data-ttu-id="41caf-216">Aby uzyskać więcej informacji, zobacz [ładowanie powiązanych obiektów](http://msdn.microsoft.com/en-us/452347d2-7b3b-44cd-9001-231299a28cb1).</span><span class="sxs-lookup"><span data-stu-id="41caf-216">For more information, see [Loading Related Objects](http://msdn.microsoft.com/en-us/452347d2-7b3b-44cd-9001-231299a28cb1).</span></span>  
  
#### <a name="using-query-paths"></a><span data-ttu-id="41caf-217">Używając ścieżek zapytania</span><span class="sxs-lookup"><span data-stu-id="41caf-217">Using query paths</span></span>  
 <span data-ttu-id="41caf-218">Ścieżki zapytania zdefiniuj Graf obiektów zwracanych przez zapytanie.</span><span class="sxs-lookup"><span data-stu-id="41caf-218">Query paths define the graph of objects that a query returns.</span></span> <span data-ttu-id="41caf-219">Podczas definiowania ścieżki zapytania tylko jedno żądanie w bazie danych jest wymagany do zwrócenia wszystkich obiektów, które określa ścieżkę.</span><span class="sxs-lookup"><span data-stu-id="41caf-219">When you define a query path, only a single request against the database is required to return all objects that the path defines.</span></span> <span data-ttu-id="41caf-220">Używając ścieżek zapytania może spowodować złożonych polecenia wykonywane względem źródła danych z zapytania pozornie prostego obiektu.</span><span class="sxs-lookup"><span data-stu-id="41caf-220">Using query paths can result in complex commands being executed against the data source from seemingly simple object queries.</span></span> <span data-ttu-id="41caf-221">Dzieje się tak, ponieważ co najmniej jeden sprzężenia są wymagane do zwrócenia powiązanych obiektów w jednym zapytaniu.</span><span class="sxs-lookup"><span data-stu-id="41caf-221">This occurs because one or more joins are required to return related objects in a single query.</span></span> <span data-ttu-id="41caf-222">Taki poziom złożoności jest większa w kwerendach do modelu jednostki złożonych, takich jak jednostki z dziedziczenia lub ścieżki, która zawiera relacje wiele do wielu.</span><span class="sxs-lookup"><span data-stu-id="41caf-222">This complexity is greater in queries against a complex entity model, such as an entity with inheritance or a path that includes many-to-many relationships.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="41caf-223">Użyj <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> metody, aby wyświetlić polecenie, które będą generowane przez <xref:System.Data.Objects.ObjectQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="41caf-223">Use the <xref:System.Data.Objects.ObjectQuery.ToTraceString%2A> method to see the command that will be generated by an <xref:System.Data.Objects.ObjectQuery%601>.</span></span> <span data-ttu-id="41caf-224">Aby uzyskać więcej informacji, zobacz [porady: wyświetlanie poleceń magazynu](http://msdn.microsoft.com/en-us/f9771c6e-3b62-4b24-a5d4-55d68e14fa79).</span><span class="sxs-lookup"><span data-stu-id="41caf-224">For more information, see [How to: View the Store Commands](http://msdn.microsoft.com/en-us/f9771c6e-3b62-4b24-a5d4-55d68e14fa79).</span></span>  
  
 <span data-ttu-id="41caf-225">Ścieżka zapytania zawiera zbyt wiele powiązanych obiektów lub obiekty zawierają zbyt dużej ilości danych wiersza, źródła danych może być nie może wykonać zapytania.</span><span class="sxs-lookup"><span data-stu-id="41caf-225">When a query path includes too many related objects or the objects contain too much row data, the data source might be unable to complete the query.</span></span> <span data-ttu-id="41caf-226">Dzieje się tak, jeśli zapytanie wymaga pośredni magazyn tymczasowy, które przekraczają możliwości źródła danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-226">This occurs if the query requires intermediate temporary storage that exceeds the capabilities of the data source.</span></span> <span data-ttu-id="41caf-227">W takim przypadku można zmniejszyć złożoność kwerendy źródła danych przez jawnego ładowania powiązanych obiektów.</span><span class="sxs-lookup"><span data-stu-id="41caf-227">When this occurs, you can reduce the complexity of the data source query by explicitly loading related objects.</span></span>  
  
#### <a name="explicitly-loading-related-objects"></a><span data-ttu-id="41caf-228">Jawnie ładowanie powiązanych obiektów</span><span class="sxs-lookup"><span data-stu-id="41caf-228">Explicitly loading related objects</span></span>  
 <span data-ttu-id="41caf-229">Można jawnie ładować powiązanych obiektów przez wywołanie metody `Load` metody dla właściwości nawigacji, która zwraca <xref:System.Data.Objects.DataClasses.EntityCollection%601> lub <xref:System.Data.Objects.DataClasses.EntityReference%601>.</span><span class="sxs-lookup"><span data-stu-id="41caf-229">You can explicitly load related objects by calling the `Load` method on a navigation property that returns an <xref:System.Data.Objects.DataClasses.EntityCollection%601> or <xref:System.Data.Objects.DataClasses.EntityReference%601>.</span></span> <span data-ttu-id="41caf-230">Jawnie ładowanie obiektów wymaga przesłania danych do bazy danych zawsze `Load` jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="41caf-230">Explicitly loading objects requires a round-trip to the database every time `Load` is called.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="41caf-231">wywołanie `Load` podczas zapętlenie przez kolekcję zwracanych obiektów, na przykład przy użyciu `foreach` instrukcji (`For Each` w języku Visual Basic), dostawca specyficzne dla źródła danych musi obsługiwać wiele zestawów wyników active w ramach jednej połączenie.</span><span class="sxs-lookup"><span data-stu-id="41caf-231">if you call `Load` while looping through a collection of returned objects, such as when you use the `foreach` statement (`For Each` in Visual Basic), the data source-specific provider must support multiple active results sets on a single connection.</span></span> <span data-ttu-id="41caf-232">Dla bazy danych programu SQL Server, należy określić wartość `MultipleActiveResultSets = true` w parametrach połączenia dostawcy.</span><span class="sxs-lookup"><span data-stu-id="41caf-232">For a SQL Server database, you must specify a value of `MultipleActiveResultSets = true` in the provider connection string.</span></span>  
  
 <span data-ttu-id="41caf-233">Można również użyć <xref:System.Data.Objects.ObjectContext.LoadProperty%2A> przypadku nie <xref:System.Data.Objects.DataClasses.EntityCollection%601> lub <xref:System.Data.Objects.DataClasses.EntityReference%601> właściwości jednostki.</span><span class="sxs-lookup"><span data-stu-id="41caf-233">You can also use the <xref:System.Data.Objects.ObjectContext.LoadProperty%2A> method when there is no <xref:System.Data.Objects.DataClasses.EntityCollection%601> or <xref:System.Data.Objects.DataClasses.EntityReference%601> properties on entities.</span></span> <span data-ttu-id="41caf-234">Jest to przydatne w przypadku korzystania z jednostki POCO.</span><span class="sxs-lookup"><span data-stu-id="41caf-234">This is useful when you are using POCO entities.</span></span>  
  
 <span data-ttu-id="41caf-235">Mimo że jawnego ładowania powiązane obiekty zmniejsza liczbę sprzężeń i zmniejszyć ilość nadmiarowych danych `Load` wymaga powtarzane połączeń z bazą danych, może być kosztowne podczas jawnego ładowania dużą liczbę obiektów.</span><span class="sxs-lookup"><span data-stu-id="41caf-235">Although explicitly loading related objects will reduce the number of joins and reduced the amount of redundant data, `Load` requires repeated connections to the database, which can become costly when explicitly loading a large number of objects.</span></span>  
  
### <a name="saving-changes"></a><span data-ttu-id="41caf-236">Trwa zapisywanie zmian</span><span class="sxs-lookup"><span data-stu-id="41caf-236">Saving Changes</span></span>  
 <span data-ttu-id="41caf-237">Podczas wywoływania <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> metoda <xref:System.Data.Objects.ObjectContext>, Utwórz oddzielne, aktualizacji lub polecenia delete zostanie wygenerowany dla każdy obiekt dodany, zaktualizowanych lub usuniętych, w tym kontekście.</span><span class="sxs-lookup"><span data-stu-id="41caf-237">When you call the <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> method on an <xref:System.Data.Objects.ObjectContext>, a separate create, update, or delete command is generated for every added, updated, or deleted object in the context.</span></span> <span data-ttu-id="41caf-238">Te polecenia są wykonywane w źródle danych w ramach jednej transakcji.</span><span class="sxs-lookup"><span data-stu-id="41caf-238">These commands are executed on the data source in a single transaction.</span></span> <span data-ttu-id="41caf-239">Zgodnie z zapytaniami, wydajność tworzenia, aktualizowania i usuwania działań zależy od stopnia złożoności mapowania w modelu koncepcyjnym.</span><span class="sxs-lookup"><span data-stu-id="41caf-239">As with queries, the performance of create, update, and delete operations depends on the complexity of the mapping in the conceptual model.</span></span>  
  
### <a name="distributed-transactions"></a><span data-ttu-id="41caf-240">Transakcje rozproszone</span><span class="sxs-lookup"><span data-stu-id="41caf-240">Distributed Transactions</span></span>  
 <span data-ttu-id="41caf-241">Operacje w jawnych transakcji, które wymagają zasobów, które są zarządzane przez koordynatora transakcji rozproszonych (DTC) będzie znacznie droższe niż podobna operacja, która nie wymaga usługi DTC.</span><span class="sxs-lookup"><span data-stu-id="41caf-241">Operations in an explicit transaction that require resources that are managed by the distributed transaction coordinator (DTC) will be much more expensive than a similar operation that does not require the DTC.</span></span> <span data-ttu-id="41caf-242">Podwyższanie poziomu do usługi DTC nastąpi w następujących sytuacjach:</span><span class="sxs-lookup"><span data-stu-id="41caf-242">Promotion to the DTC will occur in the following situations:</span></span>  
  
-   <span data-ttu-id="41caf-243">Transakcja jawne operacji względem bazy danych programu SQL Server 2000 lub innego źródła danych, która zawsze wspierania jawnych transakcji usługi DTC.</span><span class="sxs-lookup"><span data-stu-id="41caf-243">An explicit transaction with an operation against a SQL Server 2000 database or other data source that always promote explicit transactions to the DTC.</span></span>  
  
-   <span data-ttu-id="41caf-244">Jawne transakcji z operacji programu SQL Server 2005, gdy połączenie jest zarządzana przez [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span><span class="sxs-lookup"><span data-stu-id="41caf-244">An explicit transaction with an operation against SQL Server 2005 when the connection is managed by the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span> <span data-ttu-id="41caf-245">Dzieje się tak, ponieważ program SQL Server 2005 wspiera do DTC zawsze, gdy połączenie jest zamknięte i otworzyć ponownie w ramach jednej transakcji, która jest domyślne zachowanie [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span><span class="sxs-lookup"><span data-stu-id="41caf-245">This occurs because SQL Server 2005 promotes to a DTC whenever a connection is closed and reopened within a single transaction, which is the default behavior of the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span> <span data-ttu-id="41caf-246">Podwyższanie poziomu tej usługi DTC nie występuje, gdy za pomocą programu SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="41caf-246">This DTC promotion does not occur when using SQL Server 2008.</span></span> <span data-ttu-id="41caf-247">Aby uniknąć tego podwyższania poziomu, używając programu SQL Server 2005, musisz jawnie otwierać i zamykać połączenia w obrębie transakcji.</span><span class="sxs-lookup"><span data-stu-id="41caf-247">To avoid this promotion when using SQL Server 2005, you must explicitly open and close the connection within the transaction.</span></span> <span data-ttu-id="41caf-248">Aby uzyskać więcej informacji, zobacz [Zarządzanie połączeniami i transakcje](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span><span class="sxs-lookup"><span data-stu-id="41caf-248">For more information, see [Managing Connections and Transactions](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span></span>  
  
 <span data-ttu-id="41caf-249">Transakcji jawnej jest używany, gdy co najmniej jeden operacje są wykonywane w <xref:System.Transactions> transakcji.</span><span class="sxs-lookup"><span data-stu-id="41caf-249">An explicit transaction is used when one or more operations are executed inside a <xref:System.Transactions> transaction.</span></span> <span data-ttu-id="41caf-250">Aby uzyskać więcej informacji, zobacz [Zarządzanie połączeniami i transakcje](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span><span class="sxs-lookup"><span data-stu-id="41caf-250">For more information, see [Managing Connections and Transactions](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span></span>  
  
## <a name="strategies-for-improving-performance"></a><span data-ttu-id="41caf-251">Strategie zwiększania wydajności</span><span class="sxs-lookup"><span data-stu-id="41caf-251">Strategies for Improving Performance</span></span>  
 <span data-ttu-id="41caf-252">Można zwiększyć ogólną wydajność zapytań w programie Entity Framework za pomocą następujących strategii.</span><span class="sxs-lookup"><span data-stu-id="41caf-252">You can improve the overall performance of queries in the Entity Framework by using the following strategies.</span></span>  
  
#### <a name="pre-generate-views"></a><span data-ttu-id="41caf-253">Wstępnego wygenerowania widoków</span><span class="sxs-lookup"><span data-stu-id="41caf-253">Pre-generate views</span></span>  
 <span data-ttu-id="41caf-254">Generowanie widoki oparte na modelu jednostki jest znaczącą czy aplikacja wykonuje zapytanie po raz pierwszy.</span><span class="sxs-lookup"><span data-stu-id="41caf-254">Generating views based on an entity model is a significant cost the first time that an application executes a query.</span></span> <span data-ttu-id="41caf-255">Użyj narzędzia EdmGen.exe do wstępnego wygenerowania widoków jako plik kodu Visual Basic lub C#, który może być dodany do projektu podczas projektowania.</span><span class="sxs-lookup"><span data-stu-id="41caf-255">Use the EdmGen.exe utility to pre-generate views as a Visual Basic or C# code file that can be added to the project during design.</span></span> <span data-ttu-id="41caf-256">Toolkit transformacji szablonu tekstowego można użyć również do generowania wstępnie skompilowanym widoków.</span><span class="sxs-lookup"><span data-stu-id="41caf-256">You could also use the Text Template Transformation Toolkit to generate pre-compiled views.</span></span> <span data-ttu-id="41caf-257">Wstępnie wygenerowanych widoków są weryfikowane w czasie wykonywania, aby upewnić się, że są one zgodne z bieżącą wersją modelu określonej jednostki.</span><span class="sxs-lookup"><span data-stu-id="41caf-257">Pre-generated views are validated at runtime to ensure that they are consistent with the current version of the specified entity model.</span></span> <span data-ttu-id="41caf-258">Aby uzyskać więcej informacji, zobacz [porady: Pre-Generate widoków, aby poprawić wydajność kwerend](http://msdn.microsoft.com/en-us/b18a9d16-e10b-4043-ba91-b632f85a2579) i [izolowanie wydajności przy użyciu Prekompilowanego/wstępnie przygotowany-generated widoki programu Entity Framework 4](http://go.microsoft.com/fwlink/?LinkID=201337&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="41caf-258">For more information, see [How to: Pre-Generate Views to Improve Query Performance](http://msdn.microsoft.com/en-us/b18a9d16-e10b-4043-ba91-b632f85a2579) and [Isolating Performance with Precompiled/Pre-generated Views in the Entity Framework 4](http://go.microsoft.com/fwlink/?LinkID=201337&clcid=0x409).</span></span>  
  
 <span data-ttu-id="41caf-259">Podczas pracy z bardzo dużych modeli, stosowane są następujące brany pod uwagę:</span><span class="sxs-lookup"><span data-stu-id="41caf-259">When working with very large models, the following consideration applies:</span></span>  
  
 <span data-ttu-id="41caf-260">Format metadanych .NET ogranicza liczbę znaków ciągu użytkownika danego pliku binarnego do 16 777 215 (0xFFFFFF).</span><span class="sxs-lookup"><span data-stu-id="41caf-260">The .NET metadata format limits the number of user string characters in a given binary to 16,777,215 (0xFFFFFF).</span></span> <span data-ttu-id="41caf-261">Jeśli jest generowany widoków dla bardzo dużych modelu i Wyświetl plik osiągnie ten limit, zostanie wyświetlona "nie pozostawiono logicznego miejsca do utworzenia większej liczby ciągów użytkownika."</span><span class="sxs-lookup"><span data-stu-id="41caf-261">If you are generating views for a very large model and the view file reaches this size limit, you will get the "No logical space left to create more user strings."</span></span> <span data-ttu-id="41caf-262">Błąd kompilacji.</span><span class="sxs-lookup"><span data-stu-id="41caf-262">compile error.</span></span> <span data-ttu-id="41caf-263">Ten rozmiar ograniczenie ma zastosowanie do wszystkich zarządzanych plików binarnych.</span><span class="sxs-lookup"><span data-stu-id="41caf-263">This size limitation applies to all managed binaries.</span></span> <span data-ttu-id="41caf-264">Aby uzyskać więcej informacji, zobacz [blogu](http://go.microsoft.com/fwlink/?LinkId=201476) który demonstruje sposób uniknąć tego błędu, gdy praca z modelami dużych i złożonych.</span><span class="sxs-lookup"><span data-stu-id="41caf-264">For more information see the [blog](http://go.microsoft.com/fwlink/?LinkId=201476) that demonstrates how to avoid the error when working with large and complex models.</span></span>  
  
#### <a name="consider-using-the-notracking-merge-option-for-queries"></a><span data-ttu-id="41caf-265">Należy wziąć pod uwagę przy użyciu opcji scalania NoTracking zapytań</span><span class="sxs-lookup"><span data-stu-id="41caf-265">Consider using the NoTracking merge option for queries</span></span>  
 <span data-ttu-id="41caf-266">Brak koszt wymaganych do śledzenia zwracanych obiektów w kontekście obiektu.</span><span class="sxs-lookup"><span data-stu-id="41caf-266">There is a cost required to track returned objects in the object context.</span></span> <span data-ttu-id="41caf-267">Wykrywanie zmian do obiektów oraz zapewnienie, że wiele żądań dla tej samej jednostki logicznej zwracać tego samego wystąpienia obiektu wymaga, aby obiekty można dołączyć do <xref:System.Data.Objects.ObjectContext> wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="41caf-267">Detecting changes to objects and ensuring that multiple requests for the same logical entity return the same object instance requires that objects be attached to an <xref:System.Data.Objects.ObjectContext> instance.</span></span> <span data-ttu-id="41caf-268">Jeśli nie zamierzasz wprowadzić aktualizacji lub usuwania obiektów i nie wymagają zarządzania tożsamościami, rozważ użycie <xref:System.Data.Objects.MergeOption.NoTracking> opcje scalania podczas wykonywania zapytania.</span><span class="sxs-lookup"><span data-stu-id="41caf-268">If you do not plan to make updates or deletes to objects and do not require identity management , consider using the <xref:System.Data.Objects.MergeOption.NoTracking> merge options when you execute queries.</span></span>  
  
#### <a name="return-the-correct-amount-of-data"></a><span data-ttu-id="41caf-269">Zwraca poprawnej ilości danych</span><span class="sxs-lookup"><span data-stu-id="41caf-269">Return the correct amount of data</span></span>  
 <span data-ttu-id="41caf-270">W niektórych scenariuszach, określając ścieżkę zapytania za pomocą <xref:System.Data.Objects.ObjectQuery%601.Include%2A> metoda jest znacznie szybsza, ponieważ wymaga mniejszej liczby rund do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-270">In some scenarios, specifying a query path using the <xref:System.Data.Objects.ObjectQuery%601.Include%2A> method is much faster because it requires fewer round trips to the database.</span></span> <span data-ttu-id="41caf-271">Jednak w innych scenariuszach dodatkowe rund do bazy danych można załadować powiązanych obiektów może być szybsze prostsze zapytania za pomocą sprzężeń mniej powodować mniej nadmiarowości danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-271">However, in other scenarios, additional round trips to the database to load related objects may be faster because the simpler queries with fewer joins result in less redundancy of data.</span></span> <span data-ttu-id="41caf-272">W związku z tym zaleca się, należy przetestować wydajność różnych sposobów, aby pobrać powiązanych obiektów.</span><span class="sxs-lookup"><span data-stu-id="41caf-272">Because of this, we recommend that you test the performance of various ways to retrieve related objects.</span></span> <span data-ttu-id="41caf-273">Aby uzyskać więcej informacji, zobacz [ładowanie powiązanych obiektów](http://msdn.microsoft.com/en-us/452347d2-7b3b-44cd-9001-231299a28cb1).</span><span class="sxs-lookup"><span data-stu-id="41caf-273">For more information, see [Loading Related Objects](http://msdn.microsoft.com/en-us/452347d2-7b3b-44cd-9001-231299a28cb1).</span></span>  
  
 <span data-ttu-id="41caf-274">Aby uniknąć zwróceniem zbyt dużej ilości danych w jednym zapytaniu, należy wziąć pod uwagę stronicowania wyników kwerendy w grupy łatwiejsze w zarządzaniu.</span><span class="sxs-lookup"><span data-stu-id="41caf-274">To avoid returning too much data in a single query, consider paging the results of the query into more manageable groups.</span></span> <span data-ttu-id="41caf-275">Aby uzyskać więcej informacji, zobacz [porady: strona za pośrednictwem wyników zapytania](http://msdn.microsoft.com/en-us/ffc0f920-e7de-42e0-9b12-ef356421d030).</span><span class="sxs-lookup"><span data-stu-id="41caf-275">For more information, see [How to: Page Through Query Results](http://msdn.microsoft.com/en-us/ffc0f920-e7de-42e0-9b12-ef356421d030).</span></span>  
  
#### <a name="limit-the-scope-of-the-objectcontext"></a><span data-ttu-id="41caf-276">Ograniczenie zakresu tego obiektu ObjectContext</span><span class="sxs-lookup"><span data-stu-id="41caf-276">Limit the scope of the ObjectContext</span></span>  
 <span data-ttu-id="41caf-277">W większości przypadków należy utworzyć <xref:System.Data.Objects.ObjectContext> wystąpienie w ramach `using` instrukcji (`Using…End Using` w języku Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="41caf-277">In most cases, you should create an <xref:System.Data.Objects.ObjectContext> instance within a `using` statement (`Using…End Using` in Visual Basic).</span></span> <span data-ttu-id="41caf-278">Umożliwia to zwiększenie wydajności przez zapewnienie, że zasoby skojarzone z kontekstu obiektu są usuwane automatycznie, gdy kod opuszcza blok instrukcji.</span><span class="sxs-lookup"><span data-stu-id="41caf-278">This can increase performance by ensuring that the resources associated with the object context are disposed automatically when the code exits the statement block.</span></span> <span data-ttu-id="41caf-279">Jednak jeśli formanty są powiązane z obiekty zarządzane przez kontekst obiektu <xref:System.Data.Objects.ObjectContext> wystąpienia należy utrzymywać tak długo, jak wiązanie jest potrzebne i usunąć ręcznie.</span><span class="sxs-lookup"><span data-stu-id="41caf-279">However, when controls are bound to objects managed by the object context, the <xref:System.Data.Objects.ObjectContext> instance should be maintained as long as the binding is needed and disposed of manually.</span></span> <span data-ttu-id="41caf-280">Aby uzyskać więcej informacji, zobacz [Zarządzanie połączeniami i transakcje](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span><span class="sxs-lookup"><span data-stu-id="41caf-280">For more information, see [Managing Connections and Transactions](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span></span>  
  
#### <a name="consider-opening-the-database-connection-manually"></a><span data-ttu-id="41caf-281">Należy wziąć pod uwagę ręcznie Otwieranie połączenia z bazą danych</span><span class="sxs-lookup"><span data-stu-id="41caf-281">Consider opening the database connection manually</span></span>  
 <span data-ttu-id="41caf-282">Gdy aplikacja wykonuje szereg zapytania obiektu lub często wywołuje <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> utrwalanie do tworzenia, aktualizacji i usuwania działań ze źródłem danych [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] stale należy otworzyć i zamknąć połączenia ze źródłem danych.</span><span class="sxs-lookup"><span data-stu-id="41caf-282">When your application executes a series of object queries or frequently calls <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> to persist create, update, and delete operations to the data source, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] must continuously open and close the connection to the data source.</span></span> <span data-ttu-id="41caf-283">W takich sytuacjach należy wziąć pod uwagę ręcznie otwierania połączenia na początku tych operacji i zamknięcie lub usuwanie połączenie po zakończeniu operacji.</span><span class="sxs-lookup"><span data-stu-id="41caf-283">In these situations, consider manually opening the connection at the start of these operations and either closing or disposing of the connection when the operations are complete.</span></span> <span data-ttu-id="41caf-284">Aby uzyskać więcej informacji, zobacz [Zarządzanie połączeniami i transakcje](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span><span class="sxs-lookup"><span data-stu-id="41caf-284">For more information, see [Managing Connections and Transactions](http://msdn.microsoft.com/en-us/b6659d2a-9a45-4e98-acaa-d7a8029e5b99).</span></span>  
  
## <a name="performance-data"></a><span data-ttu-id="41caf-285">Dane wydajności</span><span class="sxs-lookup"><span data-stu-id="41caf-285">Performance Data</span></span>  
 <span data-ttu-id="41caf-286">Niektóre dane dotyczące wydajności Entity Framework jest opublikowany w następujących wpisach w [blogu zespołu programu ADO.NET](http://go.microsoft.com/fwlink/?LinkId=91905):</span><span class="sxs-lookup"><span data-stu-id="41caf-286">Some performance data for the Entity Framework is published in the following posts on the [ADO.NET team blog](http://go.microsoft.com/fwlink/?LinkId=91905):</span></span>  
  
-   [<span data-ttu-id="41caf-287">Eksploracja wydajności programu ADO.NET Entity Framework — część 1</span><span class="sxs-lookup"><span data-stu-id="41caf-287">Exploring the Performance of the ADO.NET Entity Framework - Part 1</span></span>](http://go.microsoft.com/fwlink/?LinkId=123907)  
  
-   [<span data-ttu-id="41caf-288">Eksploracja wydajności programu ADO.NET Entity Framework — część 2</span><span class="sxs-lookup"><span data-stu-id="41caf-288">Exploring the Performance of the ADO.NET Entity Framework – Part 2</span></span>](http://go.microsoft.com/fwlink/?LinkId=123909)  
  
-   [<span data-ttu-id="41caf-289">Porównanie wydajności programu ADO.NET Entity Framework</span><span class="sxs-lookup"><span data-stu-id="41caf-289">ADO.NET Entity Framework Performance Comparison</span></span>](http://go.microsoft.com/fwlink/?LinkID=123913)  
  
## <a name="see-also"></a><span data-ttu-id="41caf-290">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="41caf-290">See Also</span></span>  
 [<span data-ttu-id="41caf-291">Projektowanie i zagadnienia dotyczące wdrażania</span><span class="sxs-lookup"><span data-stu-id="41caf-291">Development and Deployment Considerations</span></span>](../../../../../docs/framework/data/adonet/ef/development-and-deployment-considerations.md)
