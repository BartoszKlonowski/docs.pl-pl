---
title: Śledzenie danych w ADO.NET
ms.date: 03/30/2017
ms.assetid: a6a752a5-d2a9-4335-a382-b58690ccb79f
ms.openlocfilehash: 037db6f4e5695e00401c81e1490953efe2fc9b99
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/04/2018
ms.locfileid: "43522423"
---
# <a name="data-tracing-in-adonet"></a><span data-ttu-id="794e7-102">Śledzenie danych w ADO.NET</span><span class="sxs-lookup"><span data-stu-id="794e7-102">Data Tracing in ADO.NET</span></span>
<span data-ttu-id="794e7-103">ADO.NET funkcji funkcja śledzenia danych wbudowane, który jest obsługiwany przez dostawcę danych .NET dla programu SQL Server, Oracle, OLE DB i ODBC, a także ADO.NET <xref:System.Data.DataSet>i protokoły sieciowe programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="794e7-103">ADO.NET features built-in data tracing functionality that is supported by the .NET data providers for SQL Server, Oracle, OLE DB and ODBC, as well as the ADO.NET <xref:System.Data.DataSet>, and the SQL Server network protocols.</span></span>  
  
 <span data-ttu-id="794e7-104">Śledzenie danych dostęp do interfejsu API może pomóc w diagnozowaniu następujące problemy:</span><span class="sxs-lookup"><span data-stu-id="794e7-104">Tracing data access API calls can help diagnose the following problems:</span></span>  
  
-   <span data-ttu-id="794e7-105">Niezgodność schematów między program kliencki a bazą danych.</span><span class="sxs-lookup"><span data-stu-id="794e7-105">Schema mismatch between client program and the database.</span></span>  
  
-   <span data-ttu-id="794e7-106">Baza danych niedostępność lub biblioteka problemów z siecią.</span><span class="sxs-lookup"><span data-stu-id="794e7-106">Database unavailability or network library problems.</span></span>  
  
-   <span data-ttu-id="794e7-107">Niepoprawne SQL czy ciężko kodowanego generowanych przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="794e7-107">Incorrect SQL whether hard coded or generated by an application.</span></span>  
  
-   <span data-ttu-id="794e7-108">Niepoprawne logikę programistyczną.</span><span class="sxs-lookup"><span data-stu-id="794e7-108">Incorrect programming logic.</span></span>  
  
-   <span data-ttu-id="794e7-109">Problemów wynikających z interakcji między wieloma składnikami ADO.NET lub między ADO.NET i własnych składników.</span><span class="sxs-lookup"><span data-stu-id="794e7-109">Issues resulting from the interaction between multiple ADO.NET components or between ADO.NET and your own components.</span></span>  
  
 <span data-ttu-id="794e7-110">Aby zapewnić obsługę śledzenia różne technologie, śledzenia jest rozszerzalny, więc deweloper śledzenia problemu na dowolnym poziomie stosu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="794e7-110">To support different trace technologies, tracing is extensible, so a developer can trace a problem at any level of the application stack.</span></span> <span data-ttu-id="794e7-111">Chociaż śledzenia nie jest to funkcja przeznaczona tylko do ADO.NET, dostawców firmy Microsoft zalet uogólnionego śledzenie i Instrumentacja interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="794e7-111">Although tracing is not an ADO.NET-only feature, Microsoft providers take advantage of generalized tracing and instrumentation APIs.</span></span>  
  
 <span data-ttu-id="794e7-112">Aby uzyskać więcej informacji na temat i konfigurowanie zarządzanych śledzenia w ADO.NET, zobacz [dostęp do danych śledzenia](https://msdn.microsoft.com/library/hh880086.aspx).</span><span class="sxs-lookup"><span data-stu-id="794e7-112">For more information about setting and configuring managed tracing in ADO.NET, see [Tracing Data Access](https://msdn.microsoft.com/library/hh880086.aspx).</span></span>  
  
## <a name="accessing-diagnostic-information-in-the-extended-events-log"></a><span data-ttu-id="794e7-113">Uzyskiwanie dostępu do informacji diagnostycznych w dzienniku zdarzeń rozszerzonych</span><span class="sxs-lookup"><span data-stu-id="794e7-113">Accessing Diagnostic Information in the Extended Events Log</span></span>  
 <span data-ttu-id="794e7-114">W [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] Data Provider for SQL Server, dostępu do danych śledzenia ([śledzenie dostępu do danych](https://msdn.microsoft.com/library/hh880086.aspx)) został zaktualizowany, aby ułatwić ułatwia korelowanie zdarzeń klienta z informacje diagnostyczne, takie jak błędy połączenia z łączność serwera cyklicznego buforu i aplikacji informacje o wydajności w dzienniku zdarzeń rozszerzonych.</span><span class="sxs-lookup"><span data-stu-id="794e7-114">In the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] Data Provider for SQL Server, data access tracing ([Data Access Tracing](https://msdn.microsoft.com/library/hh880086.aspx)) has been updated to make it easier to easier to correlate client events with diagnostic information, such as connection failures, from the server's connectivity ring buffer and application performance information in the extended events log.</span></span> <span data-ttu-id="794e7-115">Aby uzyskać informacje o odczytywaniu dziennika zdarzeń rozszerzonych, zobacz [dane sesji zdarzeń widoku](https://msdn.microsoft.com/library/hh710068\(SQL.110\).aspx).</span><span class="sxs-lookup"><span data-stu-id="794e7-115">For information about reading the extended events log, see [View Event Session Data](https://msdn.microsoft.com/library/hh710068\(SQL.110\).aspx).</span></span>  
  
 <span data-ttu-id="794e7-116">W przypadku operacji połączenia ADO.NET wyśle klientowi identyfikator połączenia.</span><span class="sxs-lookup"><span data-stu-id="794e7-116">For connection operations, ADO.NET will send a client connection ID.</span></span> <span data-ttu-id="794e7-117">Jeśli połączenie nie powiedzie się, możesz uzyskać dostęp bufor cykliczny łączności ([rozwiązywania problemów z łącznością w programie SQL Server 2008 buforem pierścienia łączności](https://go.microsoft.com/fwlink/?LinkId=207752)) i Znajdź `ClientConnectionID` pola, a następnie uzyskaj informacje diagnostyczne o Błąd połączenia.</span><span class="sxs-lookup"><span data-stu-id="794e7-117">If the connection fails, you can access the connectivity ring buffer ([Connectivity troubleshooting in SQL Server 2008 with the Connectivity Ring Buffer](https://go.microsoft.com/fwlink/?LinkId=207752)) and find the `ClientConnectionID` field and get diagnostic information about the connection failure.</span></span> <span data-ttu-id="794e7-118">Identyfikatory połączenia klienta są rejestrowane w bufor cykliczny, tylko wtedy, gdy wystąpi błąd.</span><span class="sxs-lookup"><span data-stu-id="794e7-118">Client connection IDs are logged in the ring buffer only if an error occurs.</span></span> <span data-ttu-id="794e7-119">(Jeśli połączenie nie powiedzie się przed wysłaniem identyfikatora pakietu, identyfikator połączenia klienta nie będą generowane.) Identyfikator połączenia klienta jest 16-bajtowy identyfikator GUID.</span><span class="sxs-lookup"><span data-stu-id="794e7-119">(If a connection fails before sending the prelogin packet, a client connection ID will not be generated.) The client connection ID is a 16-byte GUID.</span></span> <span data-ttu-id="794e7-120">Połączenia klienta można także znaleźć IDENTYFIKATORA w danych wyjściowych docelowej rozszerzonych zdarzeń, jeśli `client_connection_id` akcja zostanie dodany do zdarzenia w sesji zdarzeń rozszerzonych.</span><span class="sxs-lookup"><span data-stu-id="794e7-120">You can also find the client connection ID in the extended events target output, if the `client_connection_id` action is added to events in an extended events session.</span></span> <span data-ttu-id="794e7-121">Można włączyć śledzenie dostępu do danych i uruchom ponownie polecenie połączenia i obserwować `ClientConnectionID` pole Śledzenie dostępu do danych, jeśli potrzebujesz dodatkowej pomocy diagnostycznych sterownika klienta.</span><span class="sxs-lookup"><span data-stu-id="794e7-121">You can enable data access tracing and rerun the connection command and observe the `ClientConnectionID` field in the data access trace, if you need further client driver diagnostic assistance.</span></span>  
  
 <span data-ttu-id="794e7-122">Klienta można uzyskać Identyfikatora połączenia programowo przy użyciu `SqlConnection.ClientConnectionID` właściwości.</span><span class="sxs-lookup"><span data-stu-id="794e7-122">You can get the client connection ID programmatically by using the `SqlConnection.ClientConnectionID` property.</span></span>  
  
 <span data-ttu-id="794e7-123">`ClientConnectionID` Jest dostępna dla <xref:System.Data.SqlClient.SqlConnection> obiekt, który pomyślnie nawiąże połączenie.</span><span class="sxs-lookup"><span data-stu-id="794e7-123">The `ClientConnectionID` is available for a <xref:System.Data.SqlClient.SqlConnection> object that successfully establishes  a connection.</span></span> <span data-ttu-id="794e7-124">Jeśli próba połączenia zakończy się niepowodzeniem, `ClientConnectionID` mogą być dostępne za pośrednictwem `SqlException.ToString`.</span><span class="sxs-lookup"><span data-stu-id="794e7-124">If a connection attempt fails, `ClientConnectionID` may be available via `SqlException.ToString`.</span></span>  
  
 <span data-ttu-id="794e7-125">ADO.NET wysyła również identyfikator działania właściwe dla wątków.</span><span class="sxs-lookup"><span data-stu-id="794e7-125">ADO.NET also sends a thread-specific activity ID.</span></span> <span data-ttu-id="794e7-126">Jeśli sesje są uruchamiane z włączoną opcją TRACK_CAUSAILITY, identyfikator działania są przechwytywane w sesji zdarzeń rozszerzonych.</span><span class="sxs-lookup"><span data-stu-id="794e7-126">The activity ID is captured in the extended events sessions if the sessions are started with the TRACK_CAUSAILITY option enabled.</span></span> <span data-ttu-id="794e7-127">Problemy z wydajnością z aktywnym połączeniem, możesz uzyskać identyfikator działania od śledzenie dostępu do danych klienta (`ActivityID` pole) i zlokalizuj identyfikator działania w danych wyjściowych zdarzeń rozszerzonych.</span><span class="sxs-lookup"><span data-stu-id="794e7-127">For performance issues with an active connection, you can get the activity ID from the client's data access trace (`ActivityID` field) and then locate the activity ID in the extended events output.</span></span> <span data-ttu-id="794e7-128">Identyfikator działania w ramach zdarzeń rozszerzonych jest 16-bajtowy identyfikator GUID (nie taka sama jak identyfikator GUID dla Identyfikatora połączenia klienta) dołączany wraz z liczbą sekwencji czwartego bajtu.</span><span class="sxs-lookup"><span data-stu-id="794e7-128">The activity ID in extended events is a 16-byte GUID (not the same as the GUID for the client connection ID) appended with a four-byte sequence number.</span></span> <span data-ttu-id="794e7-129">Numer sekwencyjny reprezentuje kolejność żądania w wątku i wskazuje względną kolejność usługi batch oraz instrukcje RPC dla wątku.</span><span class="sxs-lookup"><span data-stu-id="794e7-129">The sequence number represents the order of a request within a thread and indicates the relative ordering of batch and RPC statements for the thread.</span></span> <span data-ttu-id="794e7-130">`ActivityID` Obecnie opcjonalnie jest wysyłana dla instrukcji przetwarzania wsadowego SQL i żądania RPC, gdy jest włączone śledzenie dostępu do danych i 18 bitu dostępu do danych, śledzenie konfiguracji w programie word jest włączona.</span><span class="sxs-lookup"><span data-stu-id="794e7-130">The `ActivityID` is currently optionally sent for SQL batch statements and RPC requests when data access tracing is enabled on and the 18th bit in the data access tracing configuration word is turned ON.</span></span>  
  
 <span data-ttu-id="794e7-131">Oto przykład, który używa [!INCLUDE[tsql](../../../../includes/tsql-md.md)] można uruchomić sesji zdarzeń rozszerzonych, będą przechowywane w bufor cykliczny, która zarejestruje identyfikator działania wysłane przez klienta na operacje RPC i usługi batch.</span><span class="sxs-lookup"><span data-stu-id="794e7-131">The following is a sample that uses [!INCLUDE[tsql](../../../../includes/tsql-md.md)] to start an extended events session that will be stored in a ring buffer and will record the activity ID sent from a client on RPC and batch operations.</span></span>  
  
```  
create event session MySession on server   
add event connectivity_ring_buffer_recorded,   
add event sql_statement_starting (action (client_connection_id)),   
add event sql_statement_completed (action (client_connection_id)),   
add event rpc_starting (action (client_connection_id)),   
add event rpc_completed (action (client_connection_id))  
add target ring_buffer with (track_causality=on)  
```  
  
## <a name="see-also"></a><span data-ttu-id="794e7-132">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="794e7-132">See Also</span></span>  
 [<span data-ttu-id="794e7-133">Śledzenie sieci w programie .NET Framework</span><span class="sxs-lookup"><span data-stu-id="794e7-133">Network Tracing in the .NET Framework</span></span>](../../../../docs/framework/network-programming/network-tracing.md)  
 [<span data-ttu-id="794e7-134">Śledzenie i instrumentacja aplikacji</span><span class="sxs-lookup"><span data-stu-id="794e7-134">Tracing and Instrumenting Applications</span></span>](../../../../docs/framework/debug-trace-profile/tracing-and-instrumenting-applications.md)  
 [<span data-ttu-id="794e7-135">ADO.NET zarządzanego dostawcy i Centrum deweloperów zestawu danych</span><span class="sxs-lookup"><span data-stu-id="794e7-135">ADO.NET Managed Providers and DataSet Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=217917)
