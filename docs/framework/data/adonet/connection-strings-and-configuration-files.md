---
title: Parametry połączenia i pliki konfiguracji
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 37df2641-661e-407a-a3fb-7bf9540f01e8
ms.openlocfilehash: 5e83d13d24a0b17fd886995e552dd0a7e2cf8ff4
ms.sourcegitcommit: 3630c2515809e6f4b7dbb697a3354efec105a5cd
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/25/2019
ms.locfileid: "58409955"
---
# <a name="connection-strings-and-configuration-files"></a><span data-ttu-id="ead87-102">Parametry połączenia i pliki konfiguracji</span><span class="sxs-lookup"><span data-stu-id="ead87-102">Connection Strings and Configuration Files</span></span>
<span data-ttu-id="ead87-103">Osadzanie ciągów połączenia w kodzie twojej aplikacji może prowadzić do problemów konserwacji i luk w zabezpieczeniach.</span><span class="sxs-lookup"><span data-stu-id="ead87-103">Embedding connection strings in your application's code can lead to security vulnerabilities and maintenance problems.</span></span> <span data-ttu-id="ead87-104">Parametry połączenia nieszyfrowanego kompilowane do kodu źródłowego aplikacji można przeglądać za pomocą [Ildasm.exe (dezasembler IL)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) narzędzia.</span><span class="sxs-lookup"><span data-stu-id="ead87-104">Unencrypted connection strings compiled into an application's source code can be viewed using the [Ildasm.exe (IL Disassembler)](../../../../docs/framework/tools/ildasm-exe-il-disassembler.md) tool.</span></span> <span data-ttu-id="ead87-105">Ponadto jeśli nigdy nie zmieni się parametry połączenia, aplikacji musi być ponownie kompilowana.</span><span class="sxs-lookup"><span data-stu-id="ead87-105">Moreover, if the connection string ever changes, your application must be recompiled.</span></span> <span data-ttu-id="ead87-106">Z tego względu zalecamy przechowywanie parametrów połączenia w pliku konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-106">For these reasons, we recommend storing connection strings in an application configuration file.</span></span>  
  
## <a name="working-with-application-configuration-files"></a><span data-ttu-id="ead87-107">Praca z plikami konfiguracji aplikacji</span><span class="sxs-lookup"><span data-stu-id="ead87-107">Working with Application Configuration Files</span></span>  
 <span data-ttu-id="ead87-108">Pliki konfiguracyjne aplikacji zawierają ustawienia, które są specyficzne dla określonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-108">Application configuration files contain settings that are specific to a particular application.</span></span> <span data-ttu-id="ead87-109">Na przykład aplikacja ASP.NET może mieć jedną lub więcej **web.config** plików i aplikacji Windows może mieć opcjonalną **app.config** pliku.</span><span class="sxs-lookup"><span data-stu-id="ead87-109">For example, an ASP.NET application can have one or more **web.config** files, and a Windows application can have an optional **app.config** file.</span></span> <span data-ttu-id="ead87-110">Pliki konfiguracji udostępniać typowe elementy, chociaż nazwę i lokalizację pliku konfiguracji różnią się w zależności od aplikacji hosta.</span><span class="sxs-lookup"><span data-stu-id="ead87-110">Configuration files share common elements, although the name and location of a configuration file vary depending on the application's host.</span></span>  
  
### <a name="the-connectionstrings-section"></a><span data-ttu-id="ead87-111">ConnectionStrings sekcji</span><span class="sxs-lookup"><span data-stu-id="ead87-111">The connectionStrings Section</span></span>  
 <span data-ttu-id="ead87-112">Parametry połączenia mogą być przechowywane jako pary klucz/wartość w **connectionStrings** części **konfiguracji** element pliku konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-112">Connection strings can be stored as key/value pairs in the **connectionStrings** section of the **configuration** element of an application configuration file.</span></span> <span data-ttu-id="ead87-113">Elementy podrzędne zawierają **Dodaj**, **wyczyść**, i **Usuń**.</span><span class="sxs-lookup"><span data-stu-id="ead87-113">Child elements include **add**, **clear**, and **remove**.</span></span>  
  
 <span data-ttu-id="ead87-114">Poniższy fragment plik konfiguracji pokazuje schematu i składni, do przechowywania parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="ead87-114">The following configuration file fragment demonstrates the schema and syntax for storing a connection string.</span></span> <span data-ttu-id="ead87-115">**Nazwa** atrybut jest nazwą, która zapewnia do unikatowego identyfikowania parametry połączenia, dzięki czemu mogą być pobierane w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="ead87-115">The **name** attribute is a name that you provide to uniquely identify a connection string so that it can be retrieved at run time.</span></span> <span data-ttu-id="ead87-116">**ProviderName** to niezmienna Nazwa dostawcy danych .NET Framework, który jest zarejestrowany w pliku machine.config.</span><span class="sxs-lookup"><span data-stu-id="ead87-116">The **providerName** is the invariant name of the .NET Framework data provider, which is registered in the machine.config file.</span></span>  
  
```xml  
<?xml version='1.0' encoding='utf-8'?>  
  <configuration>  
    <connectionStrings>  
      <clear />  
      <add name="Name"   
       providerName="System.Data.ProviderName"   
       connectionString="Valid Connection String;" />  
    </connectionStrings>  
  </configuration>  
```  
  
> [!NOTE]
>  <span data-ttu-id="ead87-117">Możesz zapisać części ciągu połączenia w pliku konfiguracji i używać <xref:System.Data.Common.DbConnectionStringBuilder> klasy do jego wykonania w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="ead87-117">You can save part of a connection string in a configuration file and use the <xref:System.Data.Common.DbConnectionStringBuilder> class to complete it at run time.</span></span> <span data-ttu-id="ead87-118">Jest to przydatne w scenariuszach, w których nie znasz elementy ciągu połączenia wcześniej, lub gdy nie chcesz zapisać poufnych informacji w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-118">This is useful in scenarios where you do not know elements of the connection string ahead of time, or when you do not want to save sensitive information in a configuration file.</span></span> <span data-ttu-id="ead87-119">Aby uzyskać więcej informacji, zobacz [Konstruktorzy parametrów połączeń](../../../../docs/framework/data/adonet/connection-string-builders.md).</span><span class="sxs-lookup"><span data-stu-id="ead87-119">For more information, see [Connection String Builders](../../../../docs/framework/data/adonet/connection-string-builders.md).</span></span>  
  
### <a name="using-external-configuration-files"></a><span data-ttu-id="ead87-120">Za pomocą plików konfiguracji zewnętrznego</span><span class="sxs-lookup"><span data-stu-id="ead87-120">Using External Configuration Files</span></span>  
 <span data-ttu-id="ead87-121">Konfiguracja zewnętrzna pliki są oddzielne pliki, które zawierają fragmenty składające się z jednej sekcji pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-121">External configuration files are separate files that contain a fragment of a configuration file consisting of a single section.</span></span> <span data-ttu-id="ead87-122">Plik konfiguracyjny zewnętrznych następnie odwołuje się to główny plik konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-122">The external configuration file is then referenced by the main configuration file.</span></span> <span data-ttu-id="ead87-123">Przechowywanie **connectionStrings** sekcji w pliku fizycznie oddzielnymi jest przydatne w sytuacjach, w której parametry połączenia można edytować po wdrożeniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-123">Storing the **connectionStrings** section in a physically separate file is useful in situations where connection strings may be edited after the application is deployed.</span></span> <span data-ttu-id="ead87-124">Na przykład standardowe zachowanie programu ASP.NET jest ponowne uruchomienie domenę aplikacji, gdy zmodyfikowane pliki konfiguracyjne, które powoduje utratę informacji o stanie.</span><span class="sxs-lookup"><span data-stu-id="ead87-124">For example, the standard ASP.NET behavior is to restart an application domain when configuration files are modified, which results in state information being lost.</span></span> <span data-ttu-id="ead87-125">Modyfikowanie pliku konfiguracji zewnętrznego nie spowoduje jednak ponowne uruchomienie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-125">However, modifying an external configuration file does not cause an application restart.</span></span> <span data-ttu-id="ead87-126">Pliki konfiguracji zewnętrznych nie są ograniczone do platformy ASP.NET; one może również przez aplikacje Windows.</span><span class="sxs-lookup"><span data-stu-id="ead87-126">External configuration files are not limited to ASP.NET; they can also be used by Windows applications.</span></span> <span data-ttu-id="ead87-127">Ponadto zabezpieczenia dostępu do pliku i uprawnienia może służyć do ograniczania dostępu do plików zewnętrznych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-127">In addition, file access security and permissions can be used to restrict access to external configuration files.</span></span> <span data-ttu-id="ead87-128">Praca z plikami konfiguracji zewnętrznych w czasie wykonywania jest niewidoczna i wymaga bez kodowania.</span><span class="sxs-lookup"><span data-stu-id="ead87-128">Working with external configuration files at run time is transparent, and requires no special coding.</span></span>  
  
 <span data-ttu-id="ead87-129">Aby przechowywać parametry połączenia w pliku konfiguracji zewnętrznej, należy utworzyć oddzielny plik, zawierający tylko **connectionStrings** sekcji.</span><span class="sxs-lookup"><span data-stu-id="ead87-129">To store connection strings in an external configuration file, create a separate file that contains only the **connectionStrings** section.</span></span> <span data-ttu-id="ead87-130">Nie dołączaj żadnych dodatkowych elementów, sekcji lub atrybutów.</span><span class="sxs-lookup"><span data-stu-id="ead87-130">Do not include any additional elements, sections, or attributes.</span></span> <span data-ttu-id="ead87-131">Ten przykład przedstawia składnię plik konfiguracji zewnętrznego.</span><span class="sxs-lookup"><span data-stu-id="ead87-131">This example shows the syntax for an external configuration file.</span></span>  
  
```xml  
<connectionStrings>  
  <add name="Name"   
   providerName="System.Data.ProviderName"   
   connectionString="Valid Connection String;" />  
</connectionStrings>  
```  
  
 <span data-ttu-id="ead87-132">W pliku konfiguracji aplikacji głównej, użyj **configSource** atrybutu, aby określić w pełni kwalifikowaną nazwę i lokalizację pliku zewnętrznego.</span><span class="sxs-lookup"><span data-stu-id="ead87-132">In the main application configuration file, you use the **configSource** attribute to specify the fully qualified name and location of the external file.</span></span> <span data-ttu-id="ead87-133">W tym przykładzie odwołuje się do pliku zewnętrznego konfiguracji o nazwie `connections.config`.</span><span class="sxs-lookup"><span data-stu-id="ead87-133">This example refers to an external configuration file named `connections.config`.</span></span>  
  
```xml  
<?xml version='1.0' encoding='utf-8'?>  
<configuration>  
    <connectionStrings configSource="connections.config"/>  
</configuration>  
```  
  
## <a name="retrieving-connection-strings-at-run-time"></a><span data-ttu-id="ead87-134">Pobieranie parametrów połączenia w czasie wykonywania</span><span class="sxs-lookup"><span data-stu-id="ead87-134">Retrieving Connection Strings at Run Time</span></span>  
 <span data-ttu-id="ead87-135">.NET Framework 2.0 wprowadzono nowe klasy w <xref:System.Configuration> przestrzeni nazw w celu uproszczenia podczas pobierania parametrów połączenia z plików konfiguracji w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="ead87-135">The .NET Framework 2.0 introduced new classes in the <xref:System.Configuration> namespace to simplify retrieving connection strings from configuration files at run time.</span></span> <span data-ttu-id="ead87-136">Według nazwy lub nazwa dostawcy, można programowo pobrać parametry połączenia.</span><span class="sxs-lookup"><span data-stu-id="ead87-136">You can programmatically retrieve a connection string by name or by provider name.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ead87-137">**Machine.config** plik zawiera także **connectionStrings** sekcję, która zawiera parametry połączenia używane przez program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ead87-137">The **machine.config** file also contains a **connectionStrings** section, which contains connection strings used by Visual Studio.</span></span> <span data-ttu-id="ead87-138">Podczas pobierania parametrów połączenia, nazwa dostawcy z **app.config** pliku w aplikacji Windows, parametry połączenia w **machine.config** uzyskiwanie pierwszezaładowane,anastępniepozycje**app.config**. Dodawanie **wyczyść** natychmiast po **connectionStrings** elementu usuwa wszystkie odziedziczone odwołania ze struktury danych w pamięci, tak aby tylko parametry połączenia zdefiniowane w lokalnym **app.config** pliku są traktowane jako.</span><span class="sxs-lookup"><span data-stu-id="ead87-138">When retrieving connection strings by provider name from the **app.config** file in a Windows application, the connection strings in **machine.config** get loaded first, and then the entries from **app.config**. Adding **clear** immediately after the **connectionStrings** element removes all inherited references from the data structure in memory, so that only the connection strings defined in the local **app.config** file are considered.</span></span>  
  
### <a name="working-with-the-configuration-classes"></a><span data-ttu-id="ead87-139">Praca z klas konfiguracji</span><span class="sxs-lookup"><span data-stu-id="ead87-139">Working with the Configuration Classes</span></span>  
 <span data-ttu-id="ead87-140">Począwszy od programu .NET Framework 2.0, <xref:System.Configuration.ConfigurationManager> jest używany podczas pracy z plikami konfiguracji na komputerze lokalnym, zastępując przestarzałego <xref:System.Configuration.ConfigurationSettings>.</span><span class="sxs-lookup"><span data-stu-id="ead87-140">Starting with the .NET Framework 2.0, <xref:System.Configuration.ConfigurationManager> is used when working with configuration files on the local computer, replacing the deprecated <xref:System.Configuration.ConfigurationSettings>.</span></span> <span data-ttu-id="ead87-141"><xref:System.Web.Configuration.WebConfigurationManager> Służy do pracy z plikami konfiguracji platformy ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ead87-141"><xref:System.Web.Configuration.WebConfigurationManager> is used to work with ASP.NET configuration files.</span></span> <span data-ttu-id="ead87-142">Jest przeznaczona do pracy z plikami konfiguracji na serwerze sieci Web i umożliwia dostęp programistyczny do sekcji w pliku konfiguracji, takich jak **system.web**.</span><span class="sxs-lookup"><span data-stu-id="ead87-142">It is designed to work with configuration files on a Web server, and allows programmatic access to configuration file sections such as **system.web**.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ead87-143">Uzyskiwanie dostępu do plików konfiguracji w czasie wykonywania wymaga udzielanie uprawnień do obiektu wywołującego wymagane uprawnienia zależą od typu aplikacji, pliku konfiguracji i lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-143">Accessing configuration files at run time requires granting permissions to the caller; the required permissions depend on the type of application, configuration file, and location.</span></span> <span data-ttu-id="ead87-144">Aby uzyskać więcej informacji, zobacz [przy użyciu klas konfiguracji](https://docs.microsoft.com/previous-versions/aspnet/ms228063(v=vs.100)) i <xref:System.Web.Configuration.WebConfigurationManager> dla aplikacji ASP.NET i <xref:System.Configuration.ConfigurationManager> dla aplikacji Windows.</span><span class="sxs-lookup"><span data-stu-id="ead87-144">For more information, see [Using the Configuration Classes](https://docs.microsoft.com/previous-versions/aspnet/ms228063(v=vs.100)) and <xref:System.Web.Configuration.WebConfigurationManager> for ASP.NET applications, and <xref:System.Configuration.ConfigurationManager> for Windows applications.</span></span>  
  
 <span data-ttu-id="ead87-145">Możesz użyć <xref:System.Configuration.ConnectionStringSettingsCollection> można pobrać parametry połączenia z plików konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-145">You can use the <xref:System.Configuration.ConnectionStringSettingsCollection> to retrieve connection strings from application configuration files.</span></span> <span data-ttu-id="ead87-146">Zawiera on zbiór <xref:System.Configuration.ConnectionStringSettings> obiektów, z których każdy reprezentuje jeden wpis **connectionStrings** sekcji.</span><span class="sxs-lookup"><span data-stu-id="ead87-146">It contains a collection of <xref:System.Configuration.ConnectionStringSettings> objects, each of which represents a single entry in the **connectionStrings** section.</span></span> <span data-ttu-id="ead87-147">Jego właściwości są mapowane na atrybuty ciągu połączenia, dzięki czemu możesz pobrać parametry połączenia, określając nazwę lub nazwę dostawcy.</span><span class="sxs-lookup"><span data-stu-id="ead87-147">Its properties map to connection string attributes, allowing you to retrieve a connection string by specifying the name or the provider name.</span></span>  
  
|<span data-ttu-id="ead87-148">Właściwość</span><span class="sxs-lookup"><span data-stu-id="ead87-148">Property</span></span>|<span data-ttu-id="ead87-149">Opis</span><span class="sxs-lookup"><span data-stu-id="ead87-149">Description</span></span>|  
|--------------|-----------------|  
|<xref:System.Configuration.ConnectionStringSettings.Name%2A>|<span data-ttu-id="ead87-150">Nazwa parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="ead87-150">The name of the connection string.</span></span> <span data-ttu-id="ead87-151">Mapuje **nazwa** atrybutu.</span><span class="sxs-lookup"><span data-stu-id="ead87-151">Maps to the **name** attribute.</span></span>|  
|<xref:System.Configuration.ConnectionStringSettings.ProviderName%2A>|<span data-ttu-id="ead87-152">Nazwa FQDN dostawcy.</span><span class="sxs-lookup"><span data-stu-id="ead87-152">The fully qualified provider name.</span></span> <span data-ttu-id="ead87-153">Mapuje **providerName** atrybutu.</span><span class="sxs-lookup"><span data-stu-id="ead87-153">Maps to the **providerName** attribute.</span></span>|  
|<xref:System.Configuration.ConnectionStringSettings.ConnectionString%2A>|<span data-ttu-id="ead87-154">Parametry połączenia.</span><span class="sxs-lookup"><span data-stu-id="ead87-154">The connection string.</span></span> <span data-ttu-id="ead87-155">Mapuje **connectionString** atrybutu.</span><span class="sxs-lookup"><span data-stu-id="ead87-155">Maps to the **connectionString** attribute.</span></span>|  
  
### <a name="example-listing-all-connection-strings"></a><span data-ttu-id="ead87-156">Przykład: Wyświetlanie listy wszystkich parametrów połączenia</span><span class="sxs-lookup"><span data-stu-id="ead87-156">Example: Listing All Connection Strings</span></span>  
 <span data-ttu-id="ead87-157">Ten przykład wykonuje iterację przez <xref:System.Configuration.ConnectionStringSettingsCollection> i wyświetla <xref:System.Configuration.ConnectionStringSettings.Name%2A?displayProperty=nameWithType>, <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A?displayProperty=nameWithType>, i <xref:System.Configuration.ConnectionStringSettings.ConnectionString%2A?displayProperty=nameWithType> właściwości w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="ead87-157">This example iterates through the <xref:System.Configuration.ConnectionStringSettingsCollection> and displays the <xref:System.Configuration.ConnectionStringSettings.Name%2A?displayProperty=nameWithType>, <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A?displayProperty=nameWithType>, and <xref:System.Configuration.ConnectionStringSettings.ConnectionString%2A?displayProperty=nameWithType> properties in the console window.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ead87-158">System.Configuration.dll nie są objęte wszystkich typów projektów i może być konieczne Ustaw odwołanie do niej, aby można było używać klas konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-158">System.Configuration.dll is not included in all project types, and you may need to set a reference to it in order to use the configuration classes.</span></span> <span data-ttu-id="ead87-159">Nazwę i lokalizację pliku konfiguracji określonej aplikacji jest zależna od typu aplikacji i proces hostingu.</span><span class="sxs-lookup"><span data-stu-id="ead87-159">The name and location of a particular application configuration file varies by the type of application and the hosting process.</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringSettings.RetrieveFromConfig#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfig/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringSettings.RetrieveFromConfig#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfig/VB/source.vb#1)]  
  
### <a name="example-retrieving-a-connection-string-by-name"></a><span data-ttu-id="ead87-160">Przykład: Pobieranie parametrów połączenia o nazwie</span><span class="sxs-lookup"><span data-stu-id="ead87-160">Example: Retrieving a Connection String by Name</span></span>  
 <span data-ttu-id="ead87-161">W tym przykładzie pokazano, jak pobrać parametry połączenia z pliku konfiguracji, określając jej nazwę.</span><span class="sxs-lookup"><span data-stu-id="ead87-161">This example demonstrates how to retrieve a connection string from a configuration file by specifying its name.</span></span> <span data-ttu-id="ead87-162">Ten kod tworzy <xref:System.Configuration.ConnectionStringSettings> obiektem, dostarczony parametr danych wejściowych do dopasowania <xref:System.Configuration.ConfigurationManager.ConnectionStrings%2A> nazwy.</span><span class="sxs-lookup"><span data-stu-id="ead87-162">The code creates a <xref:System.Configuration.ConnectionStringSettings> object, matching the supplied input parameter to the <xref:System.Configuration.ConfigurationManager.ConnectionStrings%2A> name.</span></span> <span data-ttu-id="ead87-163">Jeśli nie pasującej nazwie zostanie znaleziony, funkcja zwraca `null` (`Nothing` w języku Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="ead87-163">If no matching name is found, the function returns `null` (`Nothing` in Visual Basic).</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringSettings.RetrieveFromConfigByName#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByName/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringSettings.RetrieveFromConfigByName#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByName/VB/source.vb#1)]  
  
### <a name="example-retrieving-a-connection-string-by-provider-name"></a><span data-ttu-id="ead87-164">Przykład: Pobieranie parametrów połączenia, nazwa dostawcy</span><span class="sxs-lookup"><span data-stu-id="ead87-164">Example: Retrieving a Connection String by Provider Name</span></span>  
 <span data-ttu-id="ead87-165">W tym przykładzie pokazano, jak pobrać parametry połączenia, określając nazwę dostawcy we wszystkich kulturach w formacie *System.Data.ProviderName*.</span><span class="sxs-lookup"><span data-stu-id="ead87-165">This example demonstrates how to retrieve a connection string by specifying the provider-invariant name in the format *System.Data.ProviderName*.</span></span> <span data-ttu-id="ead87-166">Kod wykonuje iterację przez <xref:System.Configuration.ConnectionStringSettingsCollection> i zwraca ciąg połączenia dla pierwszego <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A> znaleziono.</span><span class="sxs-lookup"><span data-stu-id="ead87-166">The code iterates through the <xref:System.Configuration.ConnectionStringSettingsCollection> and returns the connection string for the first <xref:System.Configuration.ConnectionStringSettings.ProviderName%2A> found.</span></span> <span data-ttu-id="ead87-167">Jeśli nazwa dostawcy nie zostanie znaleziony, funkcja zwraca `null` (`Nothing` w języku Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="ead87-167">If the provider name is not found, the function returns `null` (`Nothing` in Visual Basic).</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringSettings.RetrieveFromConfigByProvider/VB/source.vb#1)]  
  
## <a name="encrypting-configuration-file-sections-using-protected-configuration"></a><span data-ttu-id="ead87-168">Szyfrowanie przy użyciu sekcji pliku konfiguracji chronionych konfiguracji</span><span class="sxs-lookup"><span data-stu-id="ead87-168">Encrypting Configuration File Sections Using Protected Configuration</span></span>  
 <span data-ttu-id="ead87-169">ASP.NET 2.0 wprowadzono nową funkcję o nazwie *chronione konfiguracji*, która umożliwia szyfrowanie poufnych informacji w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-169">ASP.NET 2.0 introduced a new feature, called *protected configuration*, that enables you to encrypt sensitive information in a configuration file.</span></span> <span data-ttu-id="ead87-170">Mimo że przeznaczony głównie dla platformy ASP.NET, konfiguracji chronionych można również zaszyfrować sekcji pliku konfiguracji w aplikacji Windows.</span><span class="sxs-lookup"><span data-stu-id="ead87-170">Although primarily designed for ASP.NET, protected configuration can also be used to encrypt configuration file sections in Windows applications.</span></span> <span data-ttu-id="ead87-171">Aby uzyskać szczegółowy opis możliwości konfiguracji chronionych, zobacz [szyfrowania informacji przy użyciu chronione Konfiguracja](https://docs.microsoft.com/previous-versions/aspnet/53tyfkaw(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="ead87-171">For a detailed description of the protected configuration capabilities, see [Encrypting Configuration Information Using Protected Configuration](https://docs.microsoft.com/previous-versions/aspnet/53tyfkaw(v=vs.100)).</span></span>  
  
 <span data-ttu-id="ead87-172">Następujący plik konfiguracji fragment przedstawia **connectionStrings** sekcji po został zaszyfrowany.</span><span class="sxs-lookup"><span data-stu-id="ead87-172">The following configuration file fragment shows the **connectionStrings** section after it has been encrypted.</span></span> <span data-ttu-id="ead87-173">**ConfigProtectionProvider** określa dostawcę konfiguracji chronionych, używany do szyfrowania i odszyfrowywania parametry połączenia.</span><span class="sxs-lookup"><span data-stu-id="ead87-173">The **configProtectionProvider** specifies the protected configuration provider used to encrypt and decrypt the connection strings.</span></span> <span data-ttu-id="ead87-174">**Element EncryptedData** sekcja zawiera zaszyfrowanego tekstu.</span><span class="sxs-lookup"><span data-stu-id="ead87-174">The **EncryptedData** section contains the cipher text.</span></span>  
  
```xml  
<connectionStrings configProtectionProvider="DataProtectionConfigurationProvider">  
  <EncryptedData>  
    <CipherData>  
      <CipherValue>AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAAH2... </CipherValue>  
    </CipherData>  
  </EncryptedData>  
</connectionStrings>  
```  
  
 <span data-ttu-id="ead87-175">Po pobraniu zaszyfrowanego połączenia w czasie wykonywania programu .NET Framework używa określonego dostawcy do odszyfrowania **element CipherValue** i udostępnić je do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-175">When the encrypted connection string is retrieved at run time, the .NET Framework uses the specified provider to decrypt the **CipherValue** and make it available to your application.</span></span> <span data-ttu-id="ead87-176">Nie ma potrzeby pisania dodatkowego kodu do zarządzania procesem odszyfrowywanie.</span><span class="sxs-lookup"><span data-stu-id="ead87-176">You do not need to write any additional code to manage the decryption process.</span></span>  
  
### <a name="protected-configuration-providers"></a><span data-ttu-id="ead87-177">Dostawcy konfiguracji chronionych</span><span class="sxs-lookup"><span data-stu-id="ead87-177">Protected Configuration Providers</span></span>  
 <span data-ttu-id="ead87-178">Dostawcy konfiguracji chronionych są zarejestrowane w usłudze **configProtectedData** części **machine.config** pliku na komputerze lokalnym, jak pokazano w poniższy fragment przedstawia dwa chronione dostawcy konfiguracji dostarczone z programem .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="ead87-178">Protected configuration providers are registered in the **configProtectedData** section of the **machine.config** file on the local computer, as shown in the following fragment, which shows the two protected configuration providers supplied with the .NET Framework.</span></span> <span data-ttu-id="ead87-179">Aby zwiększyć czytelność zostały obcięte pokazanych tu wartości.</span><span class="sxs-lookup"><span data-stu-id="ead87-179">The values shown here have been truncated for readability.</span></span>  
  
```xml  
<configProtectedData defaultProvider="RsaProtectedConfigurationProvider">  
  <providers>  
    <add name="RsaProtectedConfigurationProvider"   
      type="System.Configuration.RsaProtectedConfigurationProvider, ... />  
    <add name="DataProtectionConfigurationProvider"   
      type="System.Configuration.DpapiProtectedConfigurationProvider, ... />  
  </providers>  
</configProtectedData>  
```  
  
 Możesz skonfigurować dostawców dodatkowej konfiguracji chronionych przez dodanie ich do **machine.config** pliku. Możesz również utworzyć własnego dostawcę konfiguracji chronionych przez dziedziczenie z <xref:System.Configuration.ProtectedConfigurationProvider> abstrakcyjna klasa bazowa. <span data-ttu-id="ead87-182">W poniższej tabeli opisano pliki dwóch konfiguracji dołączone do programu .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="ead87-182">The following table describes the two configuration files included with the .NET Framework.</span></span>  
  
|<span data-ttu-id="ead87-183">Dostawca</span><span class="sxs-lookup"><span data-stu-id="ead87-183">Provider</span></span>|<span data-ttu-id="ead87-184">Opis</span><span class="sxs-lookup"><span data-stu-id="ead87-184">Description</span></span>|  
|--------------|-----------------|  
|<xref:System.Configuration.RsaProtectedConfigurationProvider>|<span data-ttu-id="ead87-185">Używa algorytmu szyfrowania RSA do szyfrowania i odszyfrowywania danych.</span><span class="sxs-lookup"><span data-stu-id="ead87-185">Uses the RSA encryption algorithm to encrypt and decrypt data.</span></span> <span data-ttu-id="ead87-186">Algorytm RSA może służyć do szyfrowanie kluczem publicznym i podpisy cyfrowe.</span><span class="sxs-lookup"><span data-stu-id="ead87-186">The RSA algorithm can be used for both public key encryption and digital signatures.</span></span> <span data-ttu-id="ead87-187">Jest także znana jako "klucz publiczny" lub szyfrowanie asymetryczne ponieważ wykorzystuje on dwa różne klucze.</span><span class="sxs-lookup"><span data-stu-id="ead87-187">It is also known as "public key" or asymmetrical encryption because it employs two different keys.</span></span> <span data-ttu-id="ead87-188">Możesz użyć [narzędzie rejestracji programu ASP.NET usług IIS (Aspnet_regiis.exe)](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90)) do szyfrowania sekcji w pliku Web.config i zarządzać kluczami szyfrowania.</span><span class="sxs-lookup"><span data-stu-id="ead87-188">You can use the [ASP.NET IIS Registration Tool (Aspnet_regiis.exe)](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90)) to encrypt sections in a Web.config file and manage the encryption keys.</span></span> <span data-ttu-id="ead87-189">ASP.NET odszyfrowuje plik konfiguracyjny podczas przetwarzania pliku.</span><span class="sxs-lookup"><span data-stu-id="ead87-189">ASP.NET decrypts the configuration file when it processes the file.</span></span> <span data-ttu-id="ead87-190">Tożsamość aplikacji ASP.NET musi mieć dostęp do odczytu do klucza szyfrowania, który jest używany do szyfrowania i odszyfrowywania zaszyfrowanych sekcje.</span><span class="sxs-lookup"><span data-stu-id="ead87-190">The identity of the ASP.NET application must have read access to the encryption key that is used to encrypt and decrypt the encrypted sections.</span></span>|  
|<xref:System.Configuration.DpapiProtectedConfigurationProvider>|<span data-ttu-id="ead87-191">Używa interfejsu API ochrony danych Windows (DPAPI) do szyfrowania sekcji konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-191">Uses the Windows Data Protection API (DPAPI) to encrypt configuration sections.</span></span> <span data-ttu-id="ead87-192">Używa wbudowanych usług kryptograficznych Windows i mogą być skonfigurowane dla ochrony specyficzny dla komputera lub konta — specyficzne dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ead87-192">It uses the Windows built-in cryptographic services and can be configured for either machine-specific or user-account-specific protection.</span></span> <span data-ttu-id="ead87-193">Ochrona specyficzny dla komputera jest przydatne w przypadku wielu aplikacji na tym samym serwerze, który muszą udostępniać informacje.</span><span class="sxs-lookup"><span data-stu-id="ead87-193">Machine-specific protection is useful for multiple applications on the same server that need to share information.</span></span> <span data-ttu-id="ead87-194">Ochrona konta — specyficzne dla użytkownika może być stosowana z usługami, które działają z określona tożsamość użytkownika, takie jak udostępnione Środowisko hostingu.</span><span class="sxs-lookup"><span data-stu-id="ead87-194">User-account-specific protection can be used with services that run with a specific user identity, such as a shared hosting environment.</span></span> <span data-ttu-id="ead87-195">Każda aplikacja uruchamiana osobne tożsamości, która ogranicza dostęp do zasobów, takich jak pliki i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ead87-195">Each application runs under a separate identity which restricts access to resources such as files and databases.</span></span>|  
  
 <span data-ttu-id="ead87-196">Obaj dostawcy oferują silnego szyfrowania danych.</span><span class="sxs-lookup"><span data-stu-id="ead87-196">Both providers offer strong encryption of data.</span></span> <span data-ttu-id="ead87-197">Jednakże jeśli planujesz użyć tego samego pliku konfiguracji zaszyfrowane na wielu serwerach, np. kolektywu serwerów sieci Web, tylko <xref:System.Configuration.RsaProtectedConfigurationProvider> umożliwia eksportowanie kluczy szyfrowania używany do szyfrowania danych i zaimportuj je na innym serwerze.</span><span class="sxs-lookup"><span data-stu-id="ead87-197">However, if you are planning to use the same encrypted configuration file on multiple servers, such as a Web farm, only the <xref:System.Configuration.RsaProtectedConfigurationProvider> enables you to export the encryption keys used to encrypt the data and import them on another server.</span></span> <span data-ttu-id="ead87-198">Aby uzyskać więcej informacji, zobacz [importowanie i eksportowanie chronione Konfiguracja RSA kontenery kluczy](https://docs.microsoft.com/previous-versions/aspnet/yxw286t2(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="ead87-198">For more information, see [Importing and Exporting Protected Configuration RSA Key Containers](https://docs.microsoft.com/previous-versions/aspnet/yxw286t2(v=vs.100)).</span></span>  
  
### <a name="using-the-configuration-classes"></a><span data-ttu-id="ead87-199">Przy użyciu klas konfiguracji</span><span class="sxs-lookup"><span data-stu-id="ead87-199">Using the Configuration Classes</span></span>  
 <span data-ttu-id="ead87-200"><xref:System.Configuration> Przestrzeń nazwy udostępnia klasy do pracy z ustawieniami konfiguracji programowo.</span><span class="sxs-lookup"><span data-stu-id="ead87-200">The <xref:System.Configuration> namespace provides classes to work with configuration settings programmatically.</span></span> <span data-ttu-id="ead87-201"><xref:System.Configuration.ConfigurationManager> Klasy zapewnia dostęp do plików konfiguracji komputera, aplikacji i użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ead87-201">The <xref:System.Configuration.ConfigurationManager> class provides access to machine, application, and user configuration files.</span></span> <span data-ttu-id="ead87-202">Jeśli tworzysz aplikację ASP.NET, możesz użyć <xref:System.Web.Configuration.WebConfigurationManager> klasy, która zawiera te same funkcje, podczas umożliwiającego dostęp do ustawień, które są unikatowe dla aplikacji ASP.NET, takich jak znajdują się w  **\< System.Web >**.</span><span class="sxs-lookup"><span data-stu-id="ead87-202">If you are creating an ASP.NET application, you can use the <xref:System.Web.Configuration.WebConfigurationManager> class, which provides the same functionality while also allowing you to access settings that are unique to ASP.NET applications, such as those found in **\<system.web>**.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ead87-203"><xref:System.Security.Cryptography> Przestrzeń nazw zawiera klasy, które zapewniają dodatkowe opcje dotyczące szyfrowania i odszyfrowywania danych.</span><span class="sxs-lookup"><span data-stu-id="ead87-203">The <xref:System.Security.Cryptography> namespace contains classes that provide additional options for encrypting and decrypting data.</span></span> <span data-ttu-id="ead87-204">Korzystając z tych klas, w razie potrzeby usługi kryptograficzne, które nie są dostępne za pośrednictwem chronioną konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ead87-204">Use these classes if you require cryptographic services that are not available using protected configuration.</span></span> <span data-ttu-id="ead87-205">Niektóre z tych klas są otoki dla niezarządzanych CryptoAPI firmy Microsoft, a inne wyłącznie zarządzanej implementacji.</span><span class="sxs-lookup"><span data-stu-id="ead87-205">Some of these classes are wrappers for the unmanaged Microsoft CryptoAPI, while others are purely managed implementations.</span></span> <span data-ttu-id="ead87-206">Aby uzyskać więcej informacji, zobacz [usługi kryptograficzne](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/93bskf9z(v=vs.90)).</span><span class="sxs-lookup"><span data-stu-id="ead87-206">For more information, see [Cryptographic Services](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/93bskf9z(v=vs.90)).</span></span>  
  
### <a name="appconfig-example"></a><span data-ttu-id="ead87-207">Przykład pliku App.config</span><span class="sxs-lookup"><span data-stu-id="ead87-207">App.config Example</span></span>  
 <span data-ttu-id="ead87-208">W tym przykładzie pokazano, jak przełączać szyfrowania **connectionStrings** sekcji **app.config** pliku dla aplikacji Windows.</span><span class="sxs-lookup"><span data-stu-id="ead87-208">This example demonstrates how to toggle encrypting the **connectionStrings** section in an **app.config** file for a Windows application.</span></span> <span data-ttu-id="ead87-209">W tym przykładzie nazwa aplikacji jako argument, na przykład "MyApplication.exe" przyjmowane przez procedurę.</span><span class="sxs-lookup"><span data-stu-id="ead87-209">In this example, the procedure takes the name of the application as an argument, for example, "MyApplication.exe".</span></span> <span data-ttu-id="ead87-210">**App.config** plik zostanie następnie zaszyfrowana i kopiowane do folderu, który zawiera plik wykonywalny pod nazwą "MyApplication.exe.config".</span><span class="sxs-lookup"><span data-stu-id="ead87-210">The **app.config** file will then be encrypted and copied to the folder that contains the executable under the name of "MyApplication.exe.config".</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ead87-211">Parametry połączenia odszyfrować je mogą tylko na komputerze, na którym został zaszyfrowany.</span><span class="sxs-lookup"><span data-stu-id="ead87-211">The connection string can only be decrypted on the computer on which it was encrypted.</span></span>  
  
 <span data-ttu-id="ead87-212">Kod używa <xref:System.Configuration.ConfigurationManager.OpenExeConfiguration%2A> metodę, aby otworzyć **app.config** plik do edycji, a <xref:System.Configuration.ConfigurationManager.GetSection%2A> metoda zwraca **connectionStrings** sekcji.</span><span class="sxs-lookup"><span data-stu-id="ead87-212">The code uses the <xref:System.Configuration.ConfigurationManager.OpenExeConfiguration%2A> method to open the **app.config** file for editing, and the <xref:System.Configuration.ConfigurationManager.GetSection%2A> method returns the **connectionStrings** section.</span></span> <span data-ttu-id="ead87-213">Kodzie następnie sprawdza <xref:System.Configuration.SectionInformation.IsProtected%2A> właściwość, wywoływania <xref:System.Configuration.SectionInformation.ProtectSection%2A> do szyfrowania w sekcji, jeśli nie jest zaszyfrowany.</span><span class="sxs-lookup"><span data-stu-id="ead87-213">The code then checks the <xref:System.Configuration.SectionInformation.IsProtected%2A> property, calling the <xref:System.Configuration.SectionInformation.ProtectSection%2A> to encrypt the section if it is not encrypted.</span></span> <span data-ttu-id="ead87-214"><xref:System.Configuration.SectionInformation.UnprotectSection%2A> Metoda jest wywoływana w celu odszyfrowania w sekcji.</span><span class="sxs-lookup"><span data-stu-id="ead87-214">The <xref:System.Configuration.SectionInformation.UnprotectSection%2A> method is invoked to decrypt the section.</span></span> <span data-ttu-id="ead87-215"><xref:System.Configuration.Configuration.Save%2A> Metoda wykonuje operację i zapisuje zmiany.</span><span class="sxs-lookup"><span data-stu-id="ead87-215">The <xref:System.Configuration.Configuration.Save%2A> method completes the operation and saves the changes.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="ead87-216">Należy ustawić odwołanie `System.Configuration.dll` w projekcie kodu do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="ead87-216">You must set a reference to `System.Configuration.dll` in your project for the code to run.</span></span>  
  
 [!code-csharp[DataWorks ConnectionStrings.Encrypt#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStrings.Encrypt/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStrings.Encrypt#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStrings.Encrypt/VB/source.vb#1)]  
  
### <a name="webconfig-example"></a><span data-ttu-id="ead87-217">Przykład pliku Web.config</span><span class="sxs-lookup"><span data-stu-id="ead87-217">Web.config Example</span></span>  
 <span data-ttu-id="ead87-218">W tym przykładzie użyto <xref:System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration%2A> metody `WebConfigurationManager`.</span><span class="sxs-lookup"><span data-stu-id="ead87-218">This example uses the <xref:System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration%2A> method of the `WebConfigurationManager`.</span></span> <span data-ttu-id="ead87-219">Należy pamiętać, że w takim przypadku można podać ścieżkę względną do **Web.config** plików przy użyciu tyldy.</span><span class="sxs-lookup"><span data-stu-id="ead87-219">Note that in this case you can supply the relative path to the **Web.config** file by using a tilde.</span></span> <span data-ttu-id="ead87-220">Kod wymaga odwołania do `System.Web.Configuration` klasy.</span><span class="sxs-lookup"><span data-stu-id="ead87-220">The code requires a reference to the `System.Web.Configuration` class.</span></span>  
  
 [!code-csharp[DataWorks ConnectionStringsWeb.Encrypt#1](../../../../samples/snippets/csharp/VS_Snippets_ADO.NET/DataWorks ConnectionStringsWeb.Encrypt/CS/source.cs#1)]
 [!code-vb[DataWorks ConnectionStringsWeb.Encrypt#1](../../../../samples/snippets/visualbasic/VS_Snippets_ADO.NET/DataWorks ConnectionStringsWeb.Encrypt/VB/source.vb#1)]  
  
 <span data-ttu-id="ead87-221">Aby uzyskać więcej informacji na temat zabezpieczania aplikacji ASP.NET, zobacz [witryn sieci web ASP.NET Zabezpieczanie](https://docs.microsoft.com/previous-versions/aspnet/91f66yxt(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="ead87-221">For more information about securing ASP.NET applications, see [Securing ASP.NET web sites](https://docs.microsoft.com/previous-versions/aspnet/91f66yxt(v=vs.100)).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ead87-222">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="ead87-222">See also</span></span>
- [<span data-ttu-id="ead87-223">Konstruktorzy parametrów połączeń</span><span class="sxs-lookup"><span data-stu-id="ead87-223">Connection String Builders</span></span>](../../../../docs/framework/data/adonet/connection-string-builders.md)
- [<span data-ttu-id="ead87-224">Ochrona informacji o połączeniu</span><span class="sxs-lookup"><span data-stu-id="ead87-224">Protecting Connection Information</span></span>](../../../../docs/framework/data/adonet/protecting-connection-information.md)
- <span data-ttu-id="ead87-225">[Przy użyciu klas konfiguracji](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/ms228063(v=vs.90))</span><span class="sxs-lookup"><span data-stu-id="ead87-225">[Using the Configuration Classes](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2008/ms228063(v=vs.90))</span></span>
- [<span data-ttu-id="ead87-226">Konfigurowanie aplikacji</span><span class="sxs-lookup"><span data-stu-id="ead87-226">Configuring Apps</span></span>](../../../../docs/framework/configure-apps/index.md)
- <span data-ttu-id="ead87-227">[Administrowanie witryną sieci Web platformy ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/6hy1xzbw(v=vs.100))</span><span class="sxs-lookup"><span data-stu-id="ead87-227">[ASP.NET Web Site Administration](https://docs.microsoft.com/previous-versions/aspnet/6hy1xzbw(v=vs.100))</span></span>
- [<span data-ttu-id="ead87-228">ADO.NET zarządzanego dostawcy i Centrum deweloperów zestawu danych</span><span class="sxs-lookup"><span data-stu-id="ead87-228">ADO.NET Managed Providers and DataSet Developer Center</span></span>](https://go.microsoft.com/fwlink/?LinkId=217917)
