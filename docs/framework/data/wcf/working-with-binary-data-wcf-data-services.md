---
title: Praca z danych binarnych (usługi danych WCF)
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, binary data
- WCF Data Services, streams
ms.assetid: aeccc45c-d5c5-4671-ad63-a492ac8043ac
caps.latest.revision: 7
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 99143200b8135d5737454de325a95399c62fd506
ms.sourcegitcommit: 86adcc06e35390f13c1e372c36d2e044f1fc31ef
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/26/2018
---
# <a name="working-with-binary-data-wcf-data-services"></a><span data-ttu-id="34053-102">Praca z danych binarnych (usługi danych WCF)</span><span class="sxs-lookup"><span data-stu-id="34053-102">Working with Binary Data (WCF Data Services)</span></span>
<span data-ttu-id="34053-103">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Biblioteki klienta umożliwia pobieranie i aktualizowanie danych binarnych z [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] źródła danych w jednym z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="34053-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to retrieve and update binary data from an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in one of the following ways:</span></span>  
  
-   <span data-ttu-id="34053-104">Jako właściwość typu pierwotnego jednostki.</span><span class="sxs-lookup"><span data-stu-id="34053-104">As a primitive type property of an entity.</span></span> <span data-ttu-id="34053-105">Jest to zalecana metoda pracy z danych binarnych małych obiektów, które mogą być łatwo załadowanych do pamięci.</span><span class="sxs-lookup"><span data-stu-id="34053-105">This is the recommended method for working with small binary data objects that can be easily loaded into memory.</span></span> <span data-ttu-id="34053-106">W takim przypadku właściwości binarnej jest właściwością jednostki udostępnianych przez model danych i usługi data serializuje dane binarne w formacie base-64 Binarny XML zakodowany w komunikacie odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="34053-106">In this case, the binary property is an entity property exposed by the data model, and the data service serializes the binary data as base-64 binary encoded XML in the response message.</span></span>  
  
-   <span data-ttu-id="34053-107">Jako strumień oddzielne zasobu binarnego.</span><span class="sxs-lookup"><span data-stu-id="34053-107">As a separate binary resource stream.</span></span> <span data-ttu-id="34053-108">Jest to zalecana metoda uzyskiwania dostępu do oraz zmienianie danych dużego obiektu binarnego (BLOB), może reprezentować fotografii, wideo lub innego typu danych binarnych zakodowany.</span><span class="sxs-lookup"><span data-stu-id="34053-108">This is the recommended method for accessing and changing binary large object (BLOB) data that may represent a photo, video, or any other type of binary encoded data.</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="34053-109"> implementuje przesyłanie strumieniowe danych binarnych przy użyciu protokołu HTTP, zgodnie z definicją w [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="34053-109"> implements the streaming of binary data by using HTTP as defined in the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)].</span></span> <span data-ttu-id="34053-110">W ten mechanizm danych binarnych jest traktowane jako zasób nośnika, który różni się od, ale związane z jednostki, która jest wywoływana wpisu media link entry.</span><span class="sxs-lookup"><span data-stu-id="34053-110">In this mechanism, binary data is treated as a media resource that is separate from but related to an entity, which is called a media link entry.</span></span> <span data-ttu-id="34053-111">Aby uzyskać więcej informacji, zobacz [przesyłania strumieniowego dostawcy](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="34053-111">For more information, see [Streaming Provider](../../../../docs/framework/data/wcf/streaming-provider-wcf-data-services.md).</span></span>  
  
> [!TIP]
>  <span data-ttu-id="34053-112">Krok po kroku przykład sposobu tworzenia aplikacji klienckiej Windows Presentation Foundation (WPF), która pobiera pliki binarny z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] usługi, która przechowuje zdjęć, zobacz wpis [danych usługi przesyłania strumieniowego dostawcy serii części 2: uzyskiwanie dostępu do zasobu multimediów strumieniowych z klienta](http://go.microsoft.com/fwlink/?LinkId=201637).</span><span class="sxs-lookup"><span data-stu-id="34053-112">For a step-by-step example of how to create a Windows Presentation Foundation (WPF) client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637).</span></span> <span data-ttu-id="34053-113">Aby pobrać przykładowy kod umieszczony w blogu usługi danych strumienia zdjęć, zobacz [przesyłanie strumieniowe zdjęć danych usługi próbki](http://go.microsoft.com/fwlink/?LinkId=198988) w galerii kodu MSDN.</span><span class="sxs-lookup"><span data-stu-id="34053-113">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.</span></span>  
  
## <a name="entity-metadata"></a><span data-ttu-id="34053-114">Metadane jednostki</span><span class="sxs-lookup"><span data-stu-id="34053-114">Entity Metadata</span></span>  
 <span data-ttu-id="34053-115">Określonej jednostki, która ma powiązanych multimediów strumieniowych zasobów w metadanych usługi danych przez `HasStream` atrybut zastosowany do typu jednostki, który jest wpisu łącza nośnika.</span><span class="sxs-lookup"><span data-stu-id="34053-115">An entity that has a related media resource stream is indicated in the data service metadata by the `HasStream` attribute applied to an entity type that is the media link entry.</span></span> <span data-ttu-id="34053-116">W poniższym przykładzie `PhotoInfo` jednostka jest wpisem media link entry z zasobem multimediów powiązane, wskazane przez `HasStream` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="34053-116">In the following example, the `PhotoInfo` entity is a media link entry that has a related media resource, indicated by the `HasStream` attribute.</span></span>  
  
 [!code-xml[Astoria Photo Streaming Service#HasStream](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria photo streaming service/xml/photodata.edmx#hasstream)]  
  
 <span data-ttu-id="34053-117">Pozostałe przykłady w tym temacie przedstawiają sposób dostępu i zmiany strumienia zasobu multimediów.</span><span class="sxs-lookup"><span data-stu-id="34053-117">The remaining examples in this topic show how to access and change the media resource stream.</span></span> <span data-ttu-id="34053-118">Pełny przykład można korzystać z multimediów strumieniowych zasobów w aplikacji klienta .NET Framework za pomocą [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] biblioteki klienta, zobacz wpis [podczas uzyskiwania dostępu do zasobu multimediów strumieniowych z klienta](http://go.microsoft.com/fwlink/?LinkID=201637).</span><span class="sxs-lookup"><span data-stu-id="34053-118">For a complete example of how to consume a media resource stream in a .NET Framework client application by using the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library, see the post [Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkID=201637).</span></span>  
  
## <a name="accessing-the-binary-resource-stream"></a><span data-ttu-id="34053-119">Uzyskiwanie dostępu do strumienia zasobów binarnych</span><span class="sxs-lookup"><span data-stu-id="34053-119">Accessing the Binary Resource Stream</span></span>  
 <span data-ttu-id="34053-120">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] Biblioteki klienta dostarcza metod dostępu do zasobów binarnych strumieni z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]— na podstawie danych usługi.</span><span class="sxs-lookup"><span data-stu-id="34053-120">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library provides methods for accessing binary resource streams from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based data service.</span></span> <span data-ttu-id="34053-121">Podczas pobierania zasobów nośnika, możesz użyć identyfikatora URI zasobu multimediów lub można uzyskać strumienia binarnego zawiera samych danych zasobu multimediów.</span><span class="sxs-lookup"><span data-stu-id="34053-121">When downloading a media resource, you can either use the URI of the media resource or you can get a binary stream that contains the media resource data itself.</span></span> <span data-ttu-id="34053-122">Możesz również przekazywać dane zasobów nośnika jako strumienia binarnego.</span><span class="sxs-lookup"><span data-stu-id="34053-122">You can also upload media resource data as a binary stream.</span></span>  
  
> [!TIP]
>  <span data-ttu-id="34053-123">Krok po kroku przykład sposobu tworzenia aplikacji klienckiej Windows Presentation Foundation (WPF), która pobiera pliki binarny z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] usługi, która przechowuje zdjęć, zobacz wpis [danych usługi przesyłania strumieniowego dostawcy serii części 2: uzyskiwanie dostępu do zasobu multimediów strumieniowych z klienta](http://go.microsoft.com/fwlink/?LinkId=201637).</span><span class="sxs-lookup"><span data-stu-id="34053-123">For a step-by-step example of how to create a Windows Presentation Foundation (WPF) client application that downloads binary image files from an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service that stores photos, see the post [Data Services Streaming Provider Series-Part 2: Accessing a Media Resource Stream from the Client](http://go.microsoft.com/fwlink/?LinkId=201637).</span></span> <span data-ttu-id="34053-124">Aby pobrać przykładowy kod umieszczony w blogu usługi danych strumienia zdjęć, zobacz [przesyłanie strumieniowe zdjęć danych usługi próbki](http://go.microsoft.com/fwlink/?LinkId=198988) w galerii kodu MSDN.</span><span class="sxs-lookup"><span data-stu-id="34053-124">To download the sample code for the stream photo data service featured in the blog post, see the [Streaming Photo Data Service Sample](http://go.microsoft.com/fwlink/?LinkId=198988) in MSDN Code Gallery.</span></span>  
  
### <a name="getting-the-uri-of-the-binary-stream"></a><span data-ttu-id="34053-125">Pobieranie identyfikatora URI strumienia danych binarnych</span><span class="sxs-lookup"><span data-stu-id="34053-125">Getting the URI of the Binary Stream</span></span>  
 <span data-ttu-id="34053-126">Podczas pobierania niektórych typów zasobów nośników, takich jak obrazy i inne pliki multimedialne często jest łatwiejsze do użycia w aplikacji niż Obsługa sam strumień danych binarnych identyfikator URI zasobu multimediów.</span><span class="sxs-lookup"><span data-stu-id="34053-126">When retrieving certain types of media resources, such as images and other media files, it is often easier to use the URI of the media resource in your application than handling the binary data stream itself.</span></span> <span data-ttu-id="34053-127">Aby uzyskać identyfikator URI skojarzony z wpisu łącza nośnika zapewnia strumienia zasobów, należy wywołać <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> metoda <xref:System.Data.Services.Client.DataServiceContext> wystąpienia, który służy do śledzenia jednostki.</span><span class="sxs-lookup"><span data-stu-id="34053-127">To get the URI of a resource stream associated with a give media link entry, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="34053-128">Poniższy przykład przedstawia sposób wywołania <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> metody, aby uzyskać identyfikator URI strumień zasobów nośnika, który służy do tworzenia nowego obrazu na komputerze klienckim:</span><span class="sxs-lookup"><span data-stu-id="34053-128">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStreamUri%2A> method to get the URI of a media resource stream that is used to create a new image on the client:</span></span>  
  
 [!code-csharp[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photowindow.xaml.cs#getreadstreamuri)]
 [!code-vb[Astoria Photo Streaming Client#GetReadStreamUri](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photowindow.xaml.vb#getreadstreamuri)]  
  
### <a name="downloading-the-binary-resource-stream"></a><span data-ttu-id="34053-129">Pobieranie zasobu binarnego strumienia</span><span class="sxs-lookup"><span data-stu-id="34053-129">Downloading the Binary Resource Stream</span></span>  
 <span data-ttu-id="34053-130">Podczas pobierania strumienia zasobu binarnego, należy wywołać <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> metoda <xref:System.Data.Services.Client.DataServiceContext> wystąpienia, który służy do śledzenia wpisu media link entry.</span><span class="sxs-lookup"><span data-stu-id="34053-130">When retrieving a binary resource stream, you must call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the media link entry.</span></span> <span data-ttu-id="34053-131">Ta metoda wysyła żądanie do usługi danych, która zwraca <xref:System.Data.Services.Client.DataServiceStreamResponse> obiektu, który odwołuje się do strumienia, który zawiera zasób.</span><span class="sxs-lookup"><span data-stu-id="34053-131">This method sends a request to the data service that returns a <xref:System.Data.Services.Client.DataServiceStreamResponse> object, which has a reference to the stream that contains the resource.</span></span> <span data-ttu-id="34053-132">Użyj tej metody, gdy aplikacja wymaga zasobów binarnych jako <xref:System.IO.Stream>.</span><span class="sxs-lookup"><span data-stu-id="34053-132">Use this method when your application requires the binary resource as a <xref:System.IO.Stream>.</span></span> <span data-ttu-id="34053-133">Poniższy przykład przedstawia sposób wywołania <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> metoda pobierania strumienia, który służy do tworzenia nowego obrazu na komputerze klienckim:</span><span class="sxs-lookup"><span data-stu-id="34053-133">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method to retrieve a stream that is used to create a new image on the client:</span></span>  
  
 [!code-csharp[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria streaming client/cs/customerphotowindow.xaml.cs#getreadstreamclient)]
 [!code-vb[Astoria Streaming Client#GetReadStreamClient](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria streaming client/vb/customerphotowindow.xaml.vb#getreadstreamclient)]  
  
> [!NOTE]
>  <span data-ttu-id="34053-134">Nagłówek Content-Length w komunikacie odpowiedzi, który zawiera pary binarny nie jest ustawiany przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="34053-134">The Content-Length header in the response message that contains the binary steam is not set by the data service.</span></span> <span data-ttu-id="34053-135">Ta wartość może nie odzwierciedlać rzeczywista długość strumienia danych binarnych.</span><span class="sxs-lookup"><span data-stu-id="34053-135">This value may not reflect the actual length of the binary data stream.</span></span>  
  
### <a name="uploading-a-media-resource-as-a-stream"></a><span data-ttu-id="34053-136">Przekazywanie jako strumień zasobem multimediów</span><span class="sxs-lookup"><span data-stu-id="34053-136">Uploading a Media Resource as a Stream</span></span>  
 <span data-ttu-id="34053-137">Aby wstawić lub zaktualizować zasobu multimedialnego, należy wywołać <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> metoda <xref:System.Data.Services.Client.DataServiceContext> wystąpienia, który służy do śledzenia jednostki.</span><span class="sxs-lookup"><span data-stu-id="34053-137">To insert or update a media resource, call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance that is tracking the entity.</span></span> <span data-ttu-id="34053-138">Ta metoda wysyła żądanie do usługi danych zawierający czytać ze strumienia dostarczonego zasobu multimediów.</span><span class="sxs-lookup"><span data-stu-id="34053-138">This method sends a request to the data service that contains the media resource read from the supplied stream.</span></span> <span data-ttu-id="34053-139">Poniższy przykład przedstawia sposób wywołania <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> do wysyłania obrazu z usługą danych:</span><span class="sxs-lookup"><span data-stu-id="34053-139">The following example shows how to call the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to send an image to the data service:</span></span>  
  
 [!code-csharp[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria photo streaming client/cs/photodetailswindow.xaml.cs#setsavestream)]
 [!code-vb[Astoria Photo Streaming Client#SetSaveStream](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria photo streaming client/vb/photodetailswindow.xaml.vb#setsavestream)]  
  
 <span data-ttu-id="34053-140">W tym przykładzie <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> metoda jest wywoływana przez podanie wartości `true` dla `closeStream` parametru.</span><span class="sxs-lookup"><span data-stu-id="34053-140">In this example, the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method is called by supplying a value of `true` for the `closeStream` parameter.</span></span> <span data-ttu-id="34053-141">Gwarantuje to, że <xref:System.Data.Services.Client.DataServiceContext> zamyka strumień po danych binarnych jest przekazywany do usługi danych.</span><span class="sxs-lookup"><span data-stu-id="34053-141">This guarantees that the <xref:System.Data.Services.Client.DataServiceContext> closes the stream after the binary data is uploaded to the data service.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="34053-142">Podczas wywoływania <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, strumienia nie są wysyłane do usługi danych do <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="34053-142">When you call <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A>, the stream is not sent to the data service until <xref:System.Data.Services.Client.DataServiceContext.SaveChanges%2A> is called.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="34053-143">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="34053-143">See Also</span></span>  
 [<span data-ttu-id="34053-144">Biblioteka klienta usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="34053-144">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)  
 [<span data-ttu-id="34053-145">Wiązanie danych do kontrolki</span><span class="sxs-lookup"><span data-stu-id="34053-145">Binding Data to Controls</span></span>](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md)
