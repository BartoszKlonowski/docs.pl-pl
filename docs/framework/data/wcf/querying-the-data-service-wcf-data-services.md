---
title: Wykonywanie zapytania dotyczącego usługi danych (Usługi danych programu WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
- WCF Data Services, accessing data
ms.assetid: 823e9444-27aa-4f1f-be8e-0486d67f54c0
ms.openlocfilehash: 50dc56a3c4c87bf9ac197b127c036c41ac833a88
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/22/2019
ms.locfileid: "69931123"
---
# <a name="querying-the-data-service-wcf-data-services"></a><span data-ttu-id="f70e9-102">Wykonywanie zapytania dotyczącego usługi danych (Usługi danych programu WCF)</span><span class="sxs-lookup"><span data-stu-id="f70e9-102">Querying the Data Service (WCF Data Services)</span></span>

<span data-ttu-id="f70e9-103">Biblioteka [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] klienta umożliwia wykonywanie zapytań dotyczących usługi danych za pomocą znanych .NET Framework wzorców programistycznych, w tym przy użyciu języka Integrated Language Query (LINQ).</span><span class="sxs-lookup"><span data-stu-id="f70e9-103">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library enables you to execute queries against a data service by using familiar .NET Framework programming patterns, including using language integrated query (LINQ).</span></span> <span data-ttu-id="f70e9-104">Biblioteka klienta tłumaczy zapytanie, które jest zdefiniowane na kliencie jako wystąpienie <xref:System.Data.Services.Client.DataServiceQuery%601> klasy w komunikacie żądania HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="f70e9-104">The client library translates a query, which is defined on the client as an instance of the <xref:System.Data.Services.Client.DataServiceQuery%601> class, into an HTTP GET request message.</span></span> <span data-ttu-id="f70e9-105">Biblioteka otrzymuje komunikat odpowiedzi i tłumaczy ją na wystąpienia klas usługi danych klienta.</span><span class="sxs-lookup"><span data-stu-id="f70e9-105">The library receives the response message and translates it into instances of client data service classes.</span></span> <span data-ttu-id="f70e9-106">Te klasy są śledzone przez <xref:System.Data.Services.Client.DataServiceContext> , do <xref:System.Data.Services.Client.DataServiceQuery%601> których należy.</span><span class="sxs-lookup"><span data-stu-id="f70e9-106">These classes are tracked by the <xref:System.Data.Services.Client.DataServiceContext> to which the <xref:System.Data.Services.Client.DataServiceQuery%601> belongs.</span></span>

## <a name="data-service-queries"></a><span data-ttu-id="f70e9-107">Zapytania dotyczące usługi danych</span><span class="sxs-lookup"><span data-stu-id="f70e9-107">Data Service Queries</span></span>

<span data-ttu-id="f70e9-108">Klasa <xref:System.Data.Services.Client.DataServiceQuery%601> generyczna reprezentuje zapytanie, które zwraca kolekcję składającą się z zero lub więcej wystąpień typu jednostki.</span><span class="sxs-lookup"><span data-stu-id="f70e9-108">The <xref:System.Data.Services.Client.DataServiceQuery%601> generic class represents a query that returns a collection of zero or more entity type instances.</span></span> <span data-ttu-id="f70e9-109">Zapytanie usługi danych zawsze należy do istniejącego kontekstu usługi danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-109">A data service query always belongs to an existing data service context.</span></span> <span data-ttu-id="f70e9-110">Ten kontekst przechowuje informacje o identyfikatorze URI usługi i metadanych, które są wymagane do tworzenia i wykonywania zapytania.</span><span class="sxs-lookup"><span data-stu-id="f70e9-110">This context maintains the service URI and metadata information that is required to compose and execute the query.</span></span>

<span data-ttu-id="f70e9-111">W przypadku dodawania usługi danych do aplikacji klienckiej opartej na .NET Framework przy użyciu okna dialogowego **Dodaj odwołanie do usługi** zostanie utworzona Klasa kontenera jednostki, która dziedziczy z <xref:System.Data.Services.Client.DataServiceContext> klasy.</span><span class="sxs-lookup"><span data-stu-id="f70e9-111">When you use the **Add Service Reference** dialog to add a data service to a .NET Framework-based client application, an entity container class is created that inherits from the <xref:System.Data.Services.Client.DataServiceContext> class.</span></span> <span data-ttu-id="f70e9-112">Ta klasa zawiera właściwości, które zwracają <xref:System.Data.Services.Client.DataServiceQuery%601> wystąpienia wpisane.</span><span class="sxs-lookup"><span data-stu-id="f70e9-112">This class includes properties that return typed <xref:System.Data.Services.Client.DataServiceQuery%601> instances.</span></span> <span data-ttu-id="f70e9-113">Istnieje jedna właściwość dla każdego zestawu jednostek, który jest udostępniany przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-113">There is one property for each entity set that the data service exposes.</span></span> <span data-ttu-id="f70e9-114">Te właściwości ułatwiają tworzenie wystąpienia typu <xref:System.Data.Services.Client.DataServiceQuery%601>.</span><span class="sxs-lookup"><span data-stu-id="f70e9-114">These properties make it easier to create an instance of a typed <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

<span data-ttu-id="f70e9-115">Zapytanie jest wykonywane w następujących scenariuszach:</span><span class="sxs-lookup"><span data-stu-id="f70e9-115">A query is executed in the following scenarios:</span></span>

- <span data-ttu-id="f70e9-116">Gdy wyniki są wyliczane niejawnie, na przykład:</span><span class="sxs-lookup"><span data-stu-id="f70e9-116">When results are enumerated implicitly, such as:</span></span>

  - <span data-ttu-id="f70e9-117">Gdy właściwość w <xref:System.Data.Services.Client.DataServiceContext> programie, która reprezentuje i zostanie wyliczona, `foreach` na przykład w pętli (C#) lub `For Each` (Visual Basic).</span><span class="sxs-lookup"><span data-stu-id="f70e9-117">When a property on the <xref:System.Data.Services.Client.DataServiceContext> that represents and entity set is enumerated, such as during a `foreach` (C#) or `For Each` (Visual Basic) loop.</span></span>

  - <span data-ttu-id="f70e9-118">Po przypisaniu zapytania do `List` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="f70e9-118">When the query is assigned to a `List` collection.</span></span>

- <span data-ttu-id="f70e9-119">Gdy metoda <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> or jest jawnie wywoływana. <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A></span><span class="sxs-lookup"><span data-stu-id="f70e9-119">When the <xref:System.Data.Services.Client.DataServiceQuery%601.Execute%2A> or <xref:System.Data.Services.Client.DataServiceQuery%601.BeginExecute%2A> method is explicitly called.</span></span>

- <span data-ttu-id="f70e9-120">Gdy operator wykonywania zapytania LINQ, taki jak <xref:System.Linq.Enumerable.First%2A> lub <xref:System.Linq.Enumerable.Single%2A> jest wywoływany.</span><span class="sxs-lookup"><span data-stu-id="f70e9-120">When a LINQ query execution operator, such as <xref:System.Linq.Enumerable.First%2A> or <xref:System.Linq.Enumerable.Single%2A> is called.</span></span>

<span data-ttu-id="f70e9-121">Następujące zapytanie, gdy jest wykonywane, zwraca wszystkie `Customers` jednostki w usłudze danych Northwind:</span><span class="sxs-lookup"><span data-stu-id="f70e9-121">The following query, when it is executed, returns all `Customers` entities in the Northwind data service:</span></span>

[!code-csharp[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getallcustomersspecific)]
[!code-vb[Astoria Northwind Client#GetAllCustomersSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getallcustomersspecific)]

<span data-ttu-id="f70e9-122">Aby uzyskać więcej informacji, zobacz [jak: Wykonaj zapytania](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md)dotyczące usługi danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-122">For more information, see [How to: Execute Data Service Queries](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md).</span></span>

<span data-ttu-id="f70e9-123">Klient obsługuje zapytania dotyczące obiektów z późnym wiązaniem, na przykład w przypadku użycia typu *dynamicznego* w C# [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]</span><span class="sxs-lookup"><span data-stu-id="f70e9-123">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client supports queries for late-bound objects, such as when you use the *dynamic* type in C#.</span></span> <span data-ttu-id="f70e9-124">Jednak ze względu na wydajność należy zawsze tworzyć zapytania o jednoznacznie określonym typie względem usługi danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-124">However, for performance reasons you should always compose strongly-typed queries against the data service.</span></span> <span data-ttu-id="f70e9-125"><xref:System.Tuple> Typ i obiekty dynamiczne nie są obsługiwane przez klienta.</span><span class="sxs-lookup"><span data-stu-id="f70e9-125">The <xref:System.Tuple> type and dynamic objects are not supported by the client.</span></span>

## <a name="linq-queries"></a><span data-ttu-id="f70e9-126">Zapytania LINQ</span><span class="sxs-lookup"><span data-stu-id="f70e9-126">LINQ Queries</span></span>

<span data-ttu-id="f70e9-127">Ponieważ klasa implementuje interfejs zdefiniowany przez LINQ, biblioteka klienckamożeprzetwarzaćzapytaniaLINQwzględemdanychzestawujednostekdoidentyfikatoraURI,któryreprezentujewyrażeniezapytania,którejestocenianewzględemusługidanych[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <xref:System.Linq.IQueryable%601> <xref:System.Data.Services.Client.DataServiceQuery%601> zasoby.</span><span class="sxs-lookup"><span data-stu-id="f70e9-127">Because the <xref:System.Data.Services.Client.DataServiceQuery%601> class implements the <xref:System.Linq.IQueryable%601> interface defined by LINQ, the [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client library is able to transform LINQ queries against entity set data into a URI that represents a query expression evaluated against a data service resource.</span></span> <span data-ttu-id="f70e9-128">Poniższy przykład to zapytanie LINQ, które jest równoważne poprzedniemu <xref:System.Data.Services.Client.DataServiceQuery%601> , które zwraca `Orders` , że koszt frachtu przekracza $30 i porządkuje wyniki według kosztu frachtu:</span><span class="sxs-lookup"><span data-stu-id="f70e9-128">The following example is a LINQ query that is equivalent to the previous <xref:System.Data.Services.Client.DataServiceQuery%601> that returns `Orders` that have a freight cost of more than $30 and orders the results by the freight cost:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionslinqspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsLinqSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionslinqspecific)]

<span data-ttu-id="f70e9-129">To zapytanie LINQ jest tłumaczone na następujący identyfikator URI zapytania, który jest wykonywany względem usługi danych [szybkiego startu](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md) opartego na bazie Northwind:</span><span class="sxs-lookup"><span data-stu-id="f70e9-129">This LINQ query is translated into the following query URI that is executed against the Northwind-based [quickstart](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md) data service:</span></span>

```
http://localhost:12345/Northwind.svc/Orders?Orderby=ShippedDate&?filter=Freight gt 30
```

> [!NOTE]
> <span data-ttu-id="f70e9-130">Zestaw zapytań można wyrazić elementu w składni LINQ jest szerszy niż te włączone w składni identyfikatorów URI opartych na reprezentacji stanu (REST), które są używane przez usługi danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-130">The set of queries expressible in the LINQ syntax is broader than those enabled in the representational state transfer (REST)-based URI syntax that is used by data services.</span></span> <span data-ttu-id="f70e9-131">Występuje <xref:System.NotSupportedException> , gdy nie można zamapować zapytania na identyfikator URI w docelowej usłudze danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-131">A <xref:System.NotSupportedException> is raised when the query cannot be mapped to a URI in the target data service.</span></span>

<span data-ttu-id="f70e9-132">Aby uzyskać więcej informacji, zobacz temat zagadnienia dotyczące [LINQ](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="f70e9-132">For more information, see [LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span></span>

## <a name="adding-query-options"></a><span data-ttu-id="f70e9-133">Dodawanie opcji zapytania</span><span class="sxs-lookup"><span data-stu-id="f70e9-133">Adding Query Options</span></span>

<span data-ttu-id="f70e9-134">Zapytania dotyczące usługi danych obsługują wszystkie opcje zapytania, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]które zapewnia.</span><span class="sxs-lookup"><span data-stu-id="f70e9-134">Data service queries support all the query options that [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]s provides.</span></span> <span data-ttu-id="f70e9-135">Wywoływana jest <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> Metoda dołączania opcji zapytania <xref:System.Data.Services.Client.DataServiceQuery%601> do wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="f70e9-135">You call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method to append query options to a <xref:System.Data.Services.Client.DataServiceQuery%601> instance.</span></span> <span data-ttu-id="f70e9-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A>Zwraca nowe <xref:System.Data.Services.Client.DataServiceQuery%601> wystąpienie, które jest równoważne z oryginalnym zapytaniem, ale z ustawioną nową opcją zapytania.</span><span class="sxs-lookup"><span data-stu-id="f70e9-136"><xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> returns a new <xref:System.Data.Services.Client.DataServiceQuery%601> instance that is equivalent to the original query but with the new query option set.</span></span> <span data-ttu-id="f70e9-137">Następujące zapytanie, gdy wykonywane, zwraca `Orders` , które są filtrowane `Freight` według `OrderID`wartości i uporządkowane według, malejąco:</span><span class="sxs-lookup"><span data-stu-id="f70e9-137">The following query, when executed, returns `Orders` that are filtered by the `Freight` value and ordered by the `OrderID`, descending:</span></span>

[!code-csharp[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#addqueryoptionsspecific)]
[!code-vb[Astoria Northwind Client#AddQueryOptionsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#addqueryoptionsspecific)]

<span data-ttu-id="f70e9-138">Można użyć `$orderby` opcji zapytania do porządkowania i filtrowania zapytania na podstawie pojedynczej właściwości, tak jak w poniższym przykładzie, który filtruje i porządkuje zwracane `Orders` obiekty na podstawie wartości `Freight` właściwości:</span><span class="sxs-lookup"><span data-stu-id="f70e9-138">You can use the `$orderby` query option to both order and filter a query based on a single property, as in the following example that filters and orders the returned `Orders` objects based on the value of the `Freight` property:</span></span>

[!code-csharp[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#orderwithfilter)]
[!code-vb[Astoria Northwind Client#OrderWithFilter](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#orderwithfilter)]

<span data-ttu-id="f70e9-139">Można wywołać metodę po <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> kolei, aby skonstruować złożone wyrażenia zapytań.</span><span class="sxs-lookup"><span data-stu-id="f70e9-139">You can call the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method consecutively to construct complex query expressions.</span></span> <span data-ttu-id="f70e9-140">Aby uzyskać więcej informacji, zobacz [jak: Dodaj opcje zapytania do zapytania](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)usługi danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-140">For more information, see [How to: Add Query Options to a Data Service Query](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md).</span></span>

<span data-ttu-id="f70e9-141">Opcje zapytania dają inny sposób na wyrażenie składników składni zapytania LINQ.</span><span class="sxs-lookup"><span data-stu-id="f70e9-141">Query options give you another way to express the syntactic components of a LINQ query.</span></span> <span data-ttu-id="f70e9-142">Aby uzyskać więcej informacji, zobacz temat zagadnienia dotyczące [LINQ](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="f70e9-142">For more information, see [LINQ Considerations](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md).</span></span>

> [!NOTE]
> <span data-ttu-id="f70e9-143">Nie można dodać opcji <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> zapytaniadoidentyfikatoraURIzapytaniaprzyużyciumetody.`$select`</span><span class="sxs-lookup"><span data-stu-id="f70e9-143">The `$select` query option cannot be added to a query URI by using the <xref:System.Data.Services.Client.DataServiceQuery%601.AddQueryOption%2A> method.</span></span> <span data-ttu-id="f70e9-144">Zalecamy użycie metody LINQ <xref:System.Linq.Enumerable.Select%2A> , aby klient `$select` generował opcję zapytania w identyfikatorze URI żądania.</span><span class="sxs-lookup"><span data-stu-id="f70e9-144">We recommend that you use the LINQ <xref:System.Linq.Enumerable.Select%2A> method to have the client generate the `$select` query option in the request URI.</span></span>

<a name="executingQueries"></a>

## <a name="client-versus-server-execution"></a><span data-ttu-id="f70e9-145">Klient a wykonywanie serwera</span><span class="sxs-lookup"><span data-stu-id="f70e9-145">Client versus Server Execution</span></span>

<span data-ttu-id="f70e9-146">Klient wykonuje zapytanie w dwóch częściach.</span><span class="sxs-lookup"><span data-stu-id="f70e9-146">The client executes a query in two parts.</span></span> <span data-ttu-id="f70e9-147">W miarę możliwości wyrażenia w zapytaniu są najpierw oceniane na kliencie, a następnie generowane jest zapytanie oparte na identyfikatorze URI i wysyłane do usługi danych w celu oceny danych w usłudze.</span><span class="sxs-lookup"><span data-stu-id="f70e9-147">Whenever possible, expressions in a query are first evaluated on the client, and then a URI-based query is generated and sent to the data service for evaluation against data in the service.</span></span> <span data-ttu-id="f70e9-148">Weź pod uwagę następujące zapytanie LINQ:</span><span class="sxs-lookup"><span data-stu-id="f70e9-148">Consider the following LINQ query:</span></span>

[!code-csharp[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#linqqueryclientevalspecific)]
[!code-vb[Astoria Northwind Client#LinqQueryClientEvalSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#linqqueryclientevalspecific)]

<span data-ttu-id="f70e9-149">W tym przykładzie wyrażenie `(basePrice – (basePrice * discount))` jest oceniane na kliencie.</span><span class="sxs-lookup"><span data-stu-id="f70e9-149">In this example, the expression `(basePrice – (basePrice * discount))` is evaluated on the client.</span></span> <span data-ttu-id="f70e9-150">W związku z tym rzeczywisty identyfikator URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` zapytania, który jest wysyłany do usługi danych, zawiera już obliczoną `90` wartość dziesiętną w klauzuli Filter.</span><span class="sxs-lookup"><span data-stu-id="f70e9-150">Because of this, the actual query URI `http://localhost:12345/northwind.svc/Products()?$filter=(UnitPrice gt 90.00M) and substringof('bike',ProductName)` that is sent to the data service contains the already calculated decimal value of `90` in the filter clause.</span></span> <span data-ttu-id="f70e9-151">Pozostałe części wyrażenia filtrowania, w tym wyrażenie podciągu, są oceniane przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-151">The other parts of the filtering expression, including the substring expression, are evaluated by the data service.</span></span> <span data-ttu-id="f70e9-152">Wyrażenia, które są oceniane na kliencie, są zgodne z semantyką środowiska uruchomieniowego języka wspólnego (CLR), podczas gdy wyrażenia wysyłane do usługi danych korzystają z implementacji [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protokołu usługi danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-152">Expressions that are evaluated on the client follow common language runtime (CLR) semantics, while expressions sent to the data service rely on the data service implementation of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] Protocol.</span></span> <span data-ttu-id="f70e9-153">Należy również wziąć pod uwagę scenariusze, w których ta oddzielna Ocena może spowodować nieoczekiwane wyniki, na przykład kiedy klient i usługa przeprowadzają oceny oparte na czasie w różnych strefach czasowych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-153">You should also be aware of scenarios where this separate evaluation may cause unexpected results, such as when both the client and service perform time-based evaluations in different time zones.</span></span>

## <a name="query-responses"></a><span data-ttu-id="f70e9-154">Odpowiedzi na zapytania</span><span class="sxs-lookup"><span data-stu-id="f70e9-154">Query Responses</span></span>

<span data-ttu-id="f70e9-155">Gdy wykonywane, <xref:System.Collections.Generic.IEnumerable%601> zwraca <xref:System.Data.Services.Client.DataServiceQuery%601> a dla żądanego typu jednostki.</span><span class="sxs-lookup"><span data-stu-id="f70e9-155">When executed, the <xref:System.Data.Services.Client.DataServiceQuery%601> returns an <xref:System.Collections.Generic.IEnumerable%601> of the requested entity type.</span></span> <span data-ttu-id="f70e9-156">Ten wynik zapytania może być rzutowany do <xref:System.Data.Services.Client.QueryOperationResponse%601> obiektu, jak w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="f70e9-156">This query result can be cast to a <xref:System.Data.Services.Client.QueryOperationResponse%601> object, as in the following example:</span></span>

[!code-csharp[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#getresponsespecific)]
[!code-vb[Astoria Northwind Client#GetResponseSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#getresponsespecific)]

<span data-ttu-id="f70e9-157">Wystąpienia typu jednostki reprezentujące jednostki w usłudze danych są tworzone na kliencie przez proces o nazwie Object materializację.</span><span class="sxs-lookup"><span data-stu-id="f70e9-157">The entity type instances that represent entities in the data service are created on the client by a process called object materialization.</span></span> <span data-ttu-id="f70e9-158">Aby uzyskać więcej informacji, zobacz [obiekt materializację](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="f70e9-158">For more information, see [Object Materialization](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md).</span></span> <span data-ttu-id="f70e9-159"><xref:System.Data.Services.Client.QueryOperationResponse%601> Obiekt implementuje<xref:System.Collections.Generic.IEnumerable%601> , aby zapewnić dostęp do wyników zapytania.</span><span class="sxs-lookup"><span data-stu-id="f70e9-159">The <xref:System.Data.Services.Client.QueryOperationResponse%601> object implements <xref:System.Collections.Generic.IEnumerable%601> to provide access to the results of the query.</span></span>

<span data-ttu-id="f70e9-160"><xref:System.Data.Services.Client.QueryOperationResponse%601> Ponadto ma następujących członków, którzy umożliwiają dostęp do dodatkowych informacji na temat wyniku zapytania:</span><span class="sxs-lookup"><span data-stu-id="f70e9-160">The <xref:System.Data.Services.Client.QueryOperationResponse%601> also has the following members that enable you to access additional information about a query result:</span></span>

- <span data-ttu-id="f70e9-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A>-Pobiera błąd wygenerowany przez operację, jeśli wystąpił.</span><span class="sxs-lookup"><span data-stu-id="f70e9-161"><xref:System.Data.Services.Client.OperationResponse.Error%2A> - gets an error thrown by the operation, if any has occurred.</span></span>

- <span data-ttu-id="f70e9-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A>-zawiera kolekcję nagłówków odpowiedzi HTTP skojarzonych z odpowiedzią na zapytanie.</span><span class="sxs-lookup"><span data-stu-id="f70e9-162"><xref:System.Data.Services.Client.OperationResponse.Headers%2A> - contains the collection of HTTP response headers associated with the query response.</span></span>

- <span data-ttu-id="f70e9-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A>-Pobiera oryginalną <xref:System.Data.Services.Client.DataServiceQuery%601> , wygenerowaną <xref:System.Data.Services.Client.QueryOperationResponse%601>przez.</span><span class="sxs-lookup"><span data-stu-id="f70e9-163"><xref:System.Data.Services.Client.QueryOperationResponse.Query%2A> - gets the original <xref:System.Data.Services.Client.DataServiceQuery%601> that generated the <xref:System.Data.Services.Client.QueryOperationResponse%601>.</span></span>

- <span data-ttu-id="f70e9-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A>-Pobiera kod odpowiedzi HTTP dla odpowiedzi na zapytanie.</span><span class="sxs-lookup"><span data-stu-id="f70e9-164"><xref:System.Data.Services.Client.OperationResponse.StatusCode%2A> - gets the HTTP response code for the query response.</span></span>

- <span data-ttu-id="f70e9-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A>-Pobiera łączną liczbę jednostek w zestawie jednostek, gdy <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> Metoda została wywołana <xref:System.Data.Services.Client.DataServiceQuery%601>w.</span><span class="sxs-lookup"><span data-stu-id="f70e9-165"><xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> - gets the total number of entities in the entity set when the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method was called on the <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span>

- <span data-ttu-id="f70e9-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A>-zwraca <xref:System.Data.Services.Client.DataServiceQueryContinuation> obiekt, który zawiera identyfikator URI następnej strony wyników.</span><span class="sxs-lookup"><span data-stu-id="f70e9-166"><xref:System.Data.Services.Client.QueryOperationResponse.GetContinuation%2A> - returns a <xref:System.Data.Services.Client.DataServiceQueryContinuation> object that contains the URI of the next page of results.</span></span>

<span data-ttu-id="f70e9-167">Domyślnie [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] zwraca tylko dane, które są jawnie wybrane przez identyfikator URI zapytania.</span><span class="sxs-lookup"><span data-stu-id="f70e9-167">By default, [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] only returns data that is explicitly selected by the query URI.</span></span> <span data-ttu-id="f70e9-168">Dzięki temu można jawnie ładować dodatkowe dane z usługi danych, gdy jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="f70e9-168">This gives you the option to explicitly load additional data from the data service when it is needed.</span></span> <span data-ttu-id="f70e9-169">Żądanie jest wysyłane do usługi danych przy każdym jawnie załadowaniu danych z usługi danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-169">A request is sent to the data service each time you explicitly load data from the data service.</span></span> <span data-ttu-id="f70e9-170">Dane, które mogą zostać załadowane jawnie obejmują powiązane jednostki, stronicowane dane odpowiedzi i strumienie danych binarnych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-170">Data that can be explicitly loaded includes related entities, paged response data, and binary data streams.</span></span>

> [!NOTE]
> <span data-ttu-id="f70e9-171">Ponieważ usługa danych może zwrócić stronicowaną odpowiedź, zalecamy, aby aplikacja korzystała ze wzorca programowania do obsługi odpowiedzi na stronicowaną usługę danych.</span><span class="sxs-lookup"><span data-stu-id="f70e9-171">Because a data service may return a paged response, we recommend that your application use the programming pattern to handle a paged data service response.</span></span> <span data-ttu-id="f70e9-172">Aby uzyskać więcej informacji, zobacz [ładowanie odroczonej zawartości](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="f70e9-172">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>

<span data-ttu-id="f70e9-173">Ilość danych zwracanych przez zapytanie może być również zmniejszana przez określenie, że tylko niektóre właściwości jednostki są zwracane w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="f70e9-173">The amount of data returned by a query can also be reduced by specifying that only certain properties of an entity are returned in the response.</span></span> <span data-ttu-id="f70e9-174">Aby uzyskać więcej informacji, zobacz [projekcje zapytań](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="f70e9-174">For more information, see [Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span></span>

## <a name="getting-a-count-of-the-total-number-of-entities-in-the-set"></a><span data-ttu-id="f70e9-175">Pobieranie liczby łącznej liczby jednostek w zestawie</span><span class="sxs-lookup"><span data-stu-id="f70e9-175">Getting a Count of the Total Number of Entities in the Set</span></span>

<span data-ttu-id="f70e9-176">W niektórych scenariuszach warto znać łączną liczbę jednostek w zestawie jednostek, a nie tylko liczbę zwróconą przez zapytanie.</span><span class="sxs-lookup"><span data-stu-id="f70e9-176">In some scenarios, it is helpful to know the total number of entities in an entity set and not merely the number returned by the query.</span></span> <span data-ttu-id="f70e9-177">Wywołaj <xref:System.Data.Services.Client.DataServiceQuery%601> metodę w programie, aby zażądać, aby całkowita liczba jednostek w zestawie była uwzględniona w wyniku zapytania. <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A></span><span class="sxs-lookup"><span data-stu-id="f70e9-177">Call the <xref:System.Data.Services.Client.DataServiceQuery%601.IncludeTotalCount%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to request that this total count of entities in the set be included with the query result.</span></span> <span data-ttu-id="f70e9-178">W takim przypadku <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> Właściwość <xref:System.Data.Services.Client.QueryOperationResponse%601> zwracanej wartości zwraca łączną liczbę jednostek w zestawie.</span><span class="sxs-lookup"><span data-stu-id="f70e9-178">In this case, the <xref:System.Data.Services.Client.QueryOperationResponse%601.TotalCount%2A> property of the returned <xref:System.Data.Services.Client.QueryOperationResponse%601> returns the total number of entities in the set.</span></span>

<span data-ttu-id="f70e9-179">Możesz również uzyskać tylko całkowitą liczbę jednostek w zestawie <xref:System.Int32> jako lub <xref:System.Int64> jako wartość, wywołując <xref:System.Linq.Enumerable.Count%2A> odpowiednio metody lub <xref:System.Linq.Enumerable.LongCount%2A> .</span><span class="sxs-lookup"><span data-stu-id="f70e9-179">You can also get only the total count of entities in the set either as an <xref:System.Int32> or as a <xref:System.Int64> value by calling the <xref:System.Linq.Enumerable.Count%2A> or <xref:System.Linq.Enumerable.LongCount%2A> methods respectively.</span></span> <span data-ttu-id="f70e9-180">Gdy te metody są wywoływane, element <xref:System.Data.Services.Client.QueryOperationResponse%601> nie jest zwracany; zwracana jest tylko wartość Count.</span><span class="sxs-lookup"><span data-stu-id="f70e9-180">When these methods are called, a <xref:System.Data.Services.Client.QueryOperationResponse%601> is not returned; only the count value is returned.</span></span> <span data-ttu-id="f70e9-181">Aby uzyskać więcej informacji, zobacz [jak: Określ liczbę jednostek zwróconych przez zapytanie](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="f70e9-181">For more information, see [How to: Determine the Number of Entities Returned by a Query](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md).</span></span>

## <a name="in-this-section"></a><span data-ttu-id="f70e9-182">W tej sekcji</span><span class="sxs-lookup"><span data-stu-id="f70e9-182">In This Section</span></span>

- [<span data-ttu-id="f70e9-183">Projekcje zapytania</span><span class="sxs-lookup"><span data-stu-id="f70e9-183">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)

- [<span data-ttu-id="f70e9-184">Materializacja obiektu</span><span class="sxs-lookup"><span data-stu-id="f70e9-184">Object Materialization</span></span>](../../../../docs/framework/data/wcf/object-materialization-wcf-data-services.md)

- [<span data-ttu-id="f70e9-185">Zagadnienia dotyczące LINQ</span><span class="sxs-lookup"><span data-stu-id="f70e9-185">LINQ Considerations</span></span>](../../../../docs/framework/data/wcf/linq-considerations-wcf-data-services.md)

- [<span data-ttu-id="f70e9-186">Instrukcje: Wykonaj zapytania dotyczące usługi danych</span><span class="sxs-lookup"><span data-stu-id="f70e9-186">How to: Execute Data Service Queries</span></span>](../../../../docs/framework/data/wcf/how-to-execute-data-service-queries-wcf-data-services.md)

- [<span data-ttu-id="f70e9-187">Instrukcje: Dodawanie opcji zapytania do zapytania usługi danych</span><span class="sxs-lookup"><span data-stu-id="f70e9-187">How to: Add Query Options to a Data Service Query</span></span>](../../../../docs/framework/data/wcf/how-to-add-query-options-to-a-data-service-query-wcf-data-services.md)

- [<span data-ttu-id="f70e9-188">Instrukcje: Określanie liczby jednostek zwróconych przez zapytanie</span><span class="sxs-lookup"><span data-stu-id="f70e9-188">How to: Determine the Number of Entities Returned by a Query</span></span>](../../../../docs/framework/data/wcf/number-of-entities-returned-by-a-query-wcf.md)

- [<span data-ttu-id="f70e9-189">Instrukcje: Określ poświadczenia klienta dla żądania usługi danych</span><span class="sxs-lookup"><span data-stu-id="f70e9-189">How to: Specify Client Credentials for a Data Service Request</span></span>](../../../../docs/framework/data/wcf/specify-client-creds-for-a-data-service-request-wcf.md)

- [<span data-ttu-id="f70e9-190">Instrukcje: Ustawianie nagłówków w żądaniu klienta</span><span class="sxs-lookup"><span data-stu-id="f70e9-190">How to: Set Headers in the Client Request</span></span>](../../../../docs/framework/data/wcf/how-to-set-headers-in-the-client-request-wcf-data-services.md)

- [<span data-ttu-id="f70e9-191">Instrukcje: Wyniki zapytania projektu</span><span class="sxs-lookup"><span data-stu-id="f70e9-191">How to: Project Query Results</span></span>](../../../../docs/framework/data/wcf/how-to-project-query-results-wcf-data-services.md)

## <a name="see-also"></a><span data-ttu-id="f70e9-192">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="f70e9-192">See also</span></span>

- [<span data-ttu-id="f70e9-193">Biblioteka klienta usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="f70e9-193">WCF Data Services Client Library</span></span>](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)
