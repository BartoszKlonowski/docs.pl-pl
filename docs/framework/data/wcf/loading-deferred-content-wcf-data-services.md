---
title: Ładowanie odroczonej zawartości (Usługi danych programu WCF)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, deferred content
- WCF Data Services, loading data
ms.assetid: 32f9b588-c832-44c4-a7e0-fcce635df59a
ms.openlocfilehash: 6eff454bf4f79f7fe215828956ffe79d0c1f6757
ms.sourcegitcommit: 5b475c1855b32cf78d2d1bbb4295e4c236f39464
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/24/2020
ms.locfileid: "91194326"
---
# <a name="loading-deferred-content-wcf-data-services"></a><span data-ttu-id="5d9d4-102">Ładowanie odroczonej zawartości (Usługi danych programu WCF)</span><span class="sxs-lookup"><span data-stu-id="5d9d4-102">Loading Deferred Content (WCF Data Services)</span></span>

<span data-ttu-id="5d9d4-103">Domyślnie Usługi danych programu WCF ogranicza ilość danych zwracanych przez zapytanie.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-103">By default, WCF Data Services limits the amount of data that a query returns.</span></span> <span data-ttu-id="5d9d4-104">Można jednak jawnie ładować dodatkowe dane, w tym powiązane jednostki, stronicowane dane odpowiedzi i strumienie danych binarnych, z usługi danych, gdy jest to potrzebne.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-104">However, you can explicitly load additional data, including related entities, paged response data, and binary data streams, from the data service when it is needed.</span></span> <span data-ttu-id="5d9d4-105">W tym temacie opisano sposób ładowania wywnioskowanej zawartości do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-105">This topic describes how to load such deferred content into your application.</span></span>  
  
## <a name="related-entities"></a><span data-ttu-id="5d9d4-106">Powiązane jednostki</span><span class="sxs-lookup"><span data-stu-id="5d9d4-106">Related Entities</span></span>  

 <span data-ttu-id="5d9d4-107">Po wykonaniu zapytania zwracane są tylko jednostki w zestawie jednostek.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-107">When you execute a query, only entities in the addressed entity set are returned.</span></span> <span data-ttu-id="5d9d4-108">Na przykład gdy zapytanie względem usługi danych Northwind zwraca `Customers` jednostki, domyślnie powiązane `Orders` jednostki nie są zwracane, nawet jeśli istnieje relacja między `Customers` i `Orders` .</span><span class="sxs-lookup"><span data-stu-id="5d9d4-108">For example, when a query against the Northwind data service returns `Customers` entities, by default the related `Orders` entities are not returned, even though there is a relationship between `Customers` and `Orders`.</span></span> <span data-ttu-id="5d9d4-109">Ponadto po włączeniu stronicowania w usłudze danych należy jawnie załadować kolejne strony danych z usługi.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-109">Also, when paging is enabled in the data service, you must explicitly load subsequent data pages from the service.</span></span> <span data-ttu-id="5d9d4-110">Istnieją dwa sposoby ładowania powiązanych jednostek:</span><span class="sxs-lookup"><span data-stu-id="5d9d4-110">There are two ways to load related entities:</span></span>  
  
- <span data-ttu-id="5d9d4-111">**Eager ładowanie**: możesz użyć `$expand` opcji zapytania, aby zażądać, aby zapytanie zwracało jednostki, które są powiązane ze skojarzeniem z zestawem jednostek, którego żądał zapytanie.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-111">**Eager loading**: You can use the `$expand` query option to request that the query return entities that are related by an association to the entity set that the query requested.</span></span> <span data-ttu-id="5d9d4-112">Użyj <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> metody z, <xref:System.Data.Services.Client.DataServiceQuery%601> Aby dodać `$expand` opcję do zapytania, które jest wysyłane do usługi danych.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-112">Use the <xref:System.Data.Services.Client.DataServiceQuery%601.Expand%2A> method on the <xref:System.Data.Services.Client.DataServiceQuery%601> to add the `$expand` option to the query that is sent to the data service.</span></span> <span data-ttu-id="5d9d4-113">Można zażądać wielu powiązanych zestawów jednostek, rozdzielając je przecinkami, tak jak w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-113">You can request multiple related entity sets by separating them by a comma, as in the following example.</span></span> <span data-ttu-id="5d9d4-114">Wszystkie jednostki żądane przez zapytanie są zwracane w pojedynczej odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-114">All entities requested by the query are returned in a single response.</span></span> <span data-ttu-id="5d9d4-115">Poniższy przykład zwraca `Order_Details` i `Customers` wraz z `Orders` zestawem jednostek:</span><span class="sxs-lookup"><span data-stu-id="5d9d4-115">The following example returns `Order_Details` and `Customers` together with the `Orders` entity set:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#expandorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#ExpandOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#expandorderdetailsspecific)]  
  
     <span data-ttu-id="5d9d4-116">Usługi danych programu WCF limity do 12 liczby zestawów jednostek, które mogą być uwzględnione w pojedynczym zapytaniu przy użyciu `$expand` opcji zapytania.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-116">WCF Data Services limits to 12 the number of entity sets that can be included in a single query by using the `$expand` query option.</span></span>  
  
- <span data-ttu-id="5d9d4-117">**Jawne ładowanie**: można wywołać <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> metodę dla <xref:System.Data.Services.Client.DataServiceContext> wystąpienia, aby jawnie załadować powiązane jednostki.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-117">**Explicit loading**: You can call the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method on the <xref:System.Data.Services.Client.DataServiceContext> instance to explicitly load related entities.</span></span> <span data-ttu-id="5d9d4-118">Każde wywołanie <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> metody tworzy oddzielne żądanie do usługi danych.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-118">Each call to the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method creates a separate request to the data service.</span></span> <span data-ttu-id="5d9d4-119">Poniższy przykład jest jawnie ładowany `Order_Details` dla `Orders` jednostki:</span><span class="sxs-lookup"><span data-stu-id="5d9d4-119">The following example explicitly loads `Order_Details` for an `Orders` entity:</span></span>  
  
     [!code-csharp[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadrelatedorderdetailsspecific)]
     [!code-vb[Astoria Northwind Client#LoadRelatedOrderDetailsSpecific](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadrelatedorderdetailsspecific)]  
  
 <span data-ttu-id="5d9d4-120">Kiedy należy wziąć pod uwagę, której opcji użyć, należy pamiętać, że istnieje kompromis między liczbą żądań do usługi danych i ilością danych zwracanych w ramach jednej odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-120">When you consider which option to use, realize that there is a tradeoff between the number of requests to the data service and the amount of data that is returned in a single response.</span></span> <span data-ttu-id="5d9d4-121">Użyj eager ładowania, gdy aplikacja wymaga skojarzonych obiektów i chcesz uniknąć dodanych opóźnień dodatkowych żądań, aby je jawnie pobrać.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-121">Use eager loading when your application requires associated objects and you want to avoid the added latency of additional requests to explicitly retrieve them.</span></span> <span data-ttu-id="5d9d4-122">Jeśli jednak w przypadku aplikacji potrzebne są tylko dane dla konkretnych powiązanych wystąpień jednostek, należy rozważyć jawne załadowanie tych jednostek przez wywołanie <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-122">However, if there are cases when the application only needs the data for specific related entity instances, you should consider explicitly loading those entities by calling the <xref:System.Data.Services.Client.DataServiceContext.LoadProperty%2A> method.</span></span> <span data-ttu-id="5d9d4-123">Aby uzyskać więcej informacji, zobacz [How to: Load pokrewnych jednostek](how-to-load-related-entities-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5d9d4-123">For more information, see [How to: Load Related Entities](how-to-load-related-entities-wcf-data-services.md).</span></span>  
  
## <a name="paged-content"></a><span data-ttu-id="5d9d4-124">Zawartość stronicowana</span><span class="sxs-lookup"><span data-stu-id="5d9d4-124">Paged Content</span></span>  

 <span data-ttu-id="5d9d4-125">Po włączeniu stronicowania w usłudze danych Liczba wpisów w źródle danych zwracanych przez usługę dane jest ograniczona przez konfigurację usługi danych.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-125">When paging is enabled in the data service, the number of entries in the feed that the data service returns is limited by the configuration of the data service.</span></span> <span data-ttu-id="5d9d4-126">Limity stron można ustawić osobno dla każdego zestawu jednostek.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-126">Page limits can be set separately for each entity set.</span></span> <span data-ttu-id="5d9d4-127">Aby uzyskać więcej informacji, zobacz [Konfigurowanie usługi danych](configuring-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5d9d4-127">For more information, see [Configuring the Data Service](configuring-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="5d9d4-128">Po włączeniu stronicowania końcowy wpis w kanale informacyjnym zawiera link do następnej strony danych.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-128">When paging is enabled, the final entry in the feed contains a link to the next page of data.</span></span> <span data-ttu-id="5d9d4-129">Ten link jest zawarty w <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> obiekcie.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-129">This link is contained in a <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object.</span></span> <span data-ttu-id="5d9d4-130">Aby uzyskać identyfikator URI na następnej stronie danych, należy wywołać <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> metodę na <xref:System.Data.Services.Client.QueryOperationResponse%601> zwracanym czasie <xref:System.Data.Services.Client.DataServiceQuery%601> .</span><span class="sxs-lookup"><span data-stu-id="5d9d4-130">You obtain the URI to the next page of data by calling the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method on the <xref:System.Data.Services.Client.QueryOperationResponse%601> returned when the <xref:System.Data.Services.Client.DataServiceQuery%601> is executed.</span></span> <span data-ttu-id="5d9d4-131">Zwrócony <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> obiekt jest następnie używany do załadowania następnej strony wyników.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-131">The returned <xref:System.Data.Services.Client.DataServiceQueryContinuation%601> object is then used to load the next page of results.</span></span> <span data-ttu-id="5d9d4-132">Przed wywołaniem metody należy wyliczyć wynik zapytania <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> .</span><span class="sxs-lookup"><span data-stu-id="5d9d4-132">You must enumerate the query result before you call the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method.</span></span> <span data-ttu-id="5d9d4-133">Rozważ użycie `do…while` pętli, aby najpierw wyliczyć wynik zapytania, a następnie wyszukać `non-null` następną wartość linku.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-133">Consider using a `do…while` loop to first enumerate the query result and then check for a `non-null` next link value.</span></span> <span data-ttu-id="5d9d4-134">Gdy <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> Metoda zwróci wartość `null` ( `Nothing` w Visual Basic), nie ma dodatkowych stron wynikowych dla oryginalnego zapytania.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-134">When the <xref:System.Data.Services.Client.QueryOperationResponse%601.GetContinuation%2A> method returns `null` (`Nothing` in Visual Basic), there are no additional result pages for the original query.</span></span> <span data-ttu-id="5d9d4-135">W poniższym przykładzie przedstawiono `do…while` pętlę, która ładuje dane klienta stronicowanego z przykładowej usługi danych Northwind.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-135">The following example shows a `do…while` loop that loads paged customer data from the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadnextlink)]
 [!code-vb[Astoria Northwind Client#LoadNextLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadnextlink)]  
  
 <span data-ttu-id="5d9d4-136">Gdy zapytanie żąda, że powiązane jednostki są zwracane w pojedynczej odpowiedzi wraz z żądanym zestawem jednostek, limity stronicowania mogą mieć wpływ na zagnieżdżone źródła, które są zawarte w tekście odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-136">When a query requests that related entities are returned in a single response together with the requested entity set, paging limits may affect nested feeds that are included inline with the response.</span></span> <span data-ttu-id="5d9d4-137">Na przykład po ustawieniu limitu stronicowania w usłudze danych przykładowych Northwind dla `Customers` zestawu jednostek można również ustawić niezależny limit stronicowania dla powiązanego `Orders` zestawu jednostek, tak jak w poniższym przykładzie z pliku Northwind.svc.cs, który definiuje przykładową usługę danych Northwind.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-137">For example, when a paging limit is set in the Northwind sample data service for the `Customers` entity set, an independent paging limit can also be set for the related `Orders` entity set, as in the following example from the Northwind.svc.cs file that defines the Northwind sample data service.</span></span>  
  
 [!code-csharp[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_service/cs/northwind.svc.cs#dataserviceconfigpaging)]
 [!code-vb[Astoria Northwind Service#DataServiceConfigPaging](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_service/vb/northwind.svc.vb#dataserviceconfigpaging)]  
  
 <span data-ttu-id="5d9d4-138">W takim przypadku należy zaimplementować stronicowanie zarówno dla źródła danych najwyższego poziomu, `Customers` jak i zagnieżdżonych `Orders` .</span><span class="sxs-lookup"><span data-stu-id="5d9d4-138">In this case, you must implement paging for both the top-level `Customers` and the nested `Orders` entity feeds.</span></span> <span data-ttu-id="5d9d4-139">Poniższy przykład pokazuje `while` pętlę używaną do ładowania stron `Orders` jednostek powiązanych z wybraną `Customers` jednostką.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-139">The following example shows the `while` loop used to load pages of `Orders` entities related to a selected `Customers` entity.</span></span>  
  
 [!code-csharp[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria_northwind_client/cs/source.cs#loadnextorderslink)]
 [!code-vb[Astoria Northwind Client#LoadNextOrdersLink](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria_northwind_client/vb/source.vb#loadnextorderslink)]  
  
 <span data-ttu-id="5d9d4-140">Aby uzyskać więcej informacji, zobacz [instrukcje: ładowanie wyników stronicowanych](how-to-load-paged-results-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5d9d4-140">For more information, see [How to: Load Paged Results](how-to-load-paged-results-wcf-data-services.md).</span></span>  
  
## <a name="binary-data-streams"></a><span data-ttu-id="5d9d4-141">Strumienie danych binarnych</span><span class="sxs-lookup"><span data-stu-id="5d9d4-141">Binary Data Streams</span></span>  

 <span data-ttu-id="5d9d4-142">Usługi danych programu WCF umożliwia dostęp do danych binarnych obiektów BLOB jako strumienia danych.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-142">WCF Data Services enables you to access binary large object (BLOB) data as a data stream.</span></span> <span data-ttu-id="5d9d4-143">Przesyłanie strumieniowe polega na załadowaniu danych binarnych, dopóki nie jest to konieczne, a klient może efektywniej przetwarzać te dane.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-143">Streaming defers the loading of binary data until it is needed, and the client can more efficiently process this data.</span></span> <span data-ttu-id="5d9d4-144">Aby można było skorzystać z tej funkcji, usługa danych musi implementować <xref:System.Data.Services.Providers.IDataServiceStreamProvider> dostawcę.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-144">In order to take advantage of this functionality, the data service must implement the <xref:System.Data.Services.Providers.IDataServiceStreamProvider> provider.</span></span> <span data-ttu-id="5d9d4-145">Aby uzyskać więcej informacji, zobacz [dostawca przesyłania strumieniowego](streaming-provider-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5d9d4-145">For more information, see [Streaming Provider](streaming-provider-wcf-data-services.md).</span></span> <span data-ttu-id="5d9d4-146">Po włączeniu przesyłania strumieniowego typy jednostek są zwracane bez pokrewnych danych binarnych.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-146">When streaming is enabled, entity types are returned without the related binary data.</span></span> <span data-ttu-id="5d9d4-147">W takim przypadku należy użyć <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> metody <xref:System.Data.Services.Client.DataServiceContext> klasy, aby uzyskać dostęp do strumienia danych danych binarnych z usługi.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-147">In this case, you must use the <xref:System.Data.Services.Client.DataServiceContext.GetReadStream%2A> method of the <xref:System.Data.Services.Client.DataServiceContext> class to access the data stream for the binary data from the service.</span></span> <span data-ttu-id="5d9d4-148">Podobnie Użyj metody, <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> Aby dodać lub zmienić dane binarne dla jednostki jako strumień.</span><span class="sxs-lookup"><span data-stu-id="5d9d4-148">Similarly, use the <xref:System.Data.Services.Client.DataServiceContext.SetSaveStream%2A> method to add or change binary data for an entity as a stream.</span></span> <span data-ttu-id="5d9d4-149">Aby uzyskać więcej informacji, zobacz [Praca z danymi binarnymi](working-with-binary-data-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="5d9d4-149">For more information, see [Working with Binary Data](working-with-binary-data-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5d9d4-150">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="5d9d4-150">See also</span></span>

- [<span data-ttu-id="5d9d4-151">Biblioteka klienta usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="5d9d4-151">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
- [<span data-ttu-id="5d9d4-152">Wykonywanie zapytań do usługi danych</span><span class="sxs-lookup"><span data-stu-id="5d9d4-152">Querying the Data Service</span></span>](querying-the-data-service-wcf-data-services.md)
