---
title: Materializacja obiektu (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
ms.openlocfilehash: bf75e126c2a44b6b9d151269046d2cb8110815cc
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/18/2019
ms.locfileid: "59335397"
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="b9fc4-102">Materializacja obiektu (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="b9fc4-102">Object Materialization (WCF Data Services)</span></span>
<span data-ttu-id="b9fc4-103">Kiedy używasz **Dodaj odwołanie do usługi** okno dialogowe, aby używać [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] źródła danych w aplikacji klienta opartego na programie .NET Framework, klas danych równoważne są generowane dla każdego typu jednostki w modelu danych udostępnianych przez źródło danych.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-103">When you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="b9fc4-104">Aby uzyskać więcej informacji, zobacz [Generowanie biblioteki klienta usługi danych](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="b9fc4-104">For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="b9fc4-105">Jednostki danych zwracanych przez zapytanie jest zmaterializowany do wystąpienia jednego z tych klas usługi danych wygenerowanego klienta.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="b9fc4-106">Aby uzyskać informacji na temat opcji scalania i rozwiązanie tożsamości dla śledzonych obiektów, zobacz [zarządzanie kontekstem usługi danych](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="b9fc4-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="b9fc4-107">Umożliwia także zdefiniować własne klas usługi danych klienta, a nie przy użyciu klas danych generowanych przez narzędzie.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-107">also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="b9fc4-108">Dzięki temu można użyć własnych klas danych, nazywane również "old zwykłego obiektu CLR" klas danych (POCO).</span><span class="sxs-lookup"><span data-stu-id="b9fc4-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="b9fc4-109">Korzystając z tych typów danych niestandardowych klas, powinien atrybutu klasy danych z oboma <xref:System.Data.Services.Common.DataServiceKeyAttribute> lub <xref:System.Data.Services.Common.DataServiceEntityAttribute> i upewnij się, że typ nazwy o nazwach klienta dopasowanie typu w modelu danych usługi danych.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>  
  
 <span data-ttu-id="b9fc4-110">Gdy biblioteka otrzyma komunikat odpowiedzi zapytania, go materializuje dane zwrócone z [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] źródła danych do wystąpień danych klienta, klas usług, które są typu zapytania.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-110">After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="b9fc4-111">Ogólny proces materializowanie tych obiektów, jest następujący:</span><span class="sxs-lookup"><span data-stu-id="b9fc4-111">The general process for materializing these objects is as follows:</span></span>  
  
1. <span data-ttu-id="b9fc4-112">Biblioteka klienta odczytuje typu serializacji z `entry` element komunikat odpowiedzi z kanału informacyjnego i próbuje utworzyć nowe wystąpienie poprawnego typu w jednym z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="b9fc4-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>  
  
    -   <span data-ttu-id="b9fc4-113">Gdy typ zadeklarowany w źródle danych ma taką samą nazwę jak typ <xref:System.Data.Services.Client.DataServiceQuery%601>, nowe wystąpienie tego typu jest tworzona przy użyciu pustego konstruktora.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="b9fc4-114">Gdy typ zadeklarowany w źródle danych ma taką samą nazwę jak typ, który jest tworzony na podstawie typu <xref:System.Data.Services.Client.DataServiceQuery%601>, nowe wystąpienie tego typu pochodnego jest tworzona przy użyciu pustego konstruktora.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="b9fc4-115">Gdy typ zadeklarowany w źródle danych nie można dopasować do typu <xref:System.Data.Services.Client.DataServiceQuery%601> lub dowolne typy pochodne, nowe wystąpienie typu kwerendy jest tworzona przy użyciu pustego konstruktora.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="b9fc4-116">Gdy <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> właściwość jest ustawiona, podane delegata jest wywoływana, aby zastąpić domyślne mapowanie na podstawie nazwy typu i nowe wystąpienie klasy typ zwracany przez <xref:System.Func%602> zostanie utworzona.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="b9fc4-117">Jeśli ten delegat zwraca wartość null, tworzone jest nowe wystąpienie, typu kwerendy.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="b9fc4-118">Może być wymagane do zastąpienia domyślnego mapowania nazwy na podstawie nazwy typu do obsługi scenariuszy dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>  
  
2. <span data-ttu-id="b9fc4-119">Biblioteka klienta odczytuje wartość identyfikatora URI z `id` elementu `entry`, czyli wartość tożsamości podmiotu.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="b9fc4-120">Chyba że <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> wartość <xref:System.Data.Services.Client.MergeOption.NoTracking> jest używany, wartość tożsamości jest używane do śledzenia obiektu w <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="b9fc4-121">Wartość tożsamości umożliwia również zagwarantować, że tylko pojedynczy element tworzone jest wystąpienie, nawet wtedy, gdy jednostki są zwracane wielokrotnie w odpowiedzi na zapytanie.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>  
  
3. <span data-ttu-id="b9fc4-122">Biblioteka klienta odczytuje właściwości z kanału informacyjnego wpisu i ustaw odpowiednie właściwości nowo utworzony obiekt.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="b9fc4-123">Jeśli obiekt, który ma taką samą wartość tożsamość, już występuje w <xref:System.Data.Services.Client.DataServiceContext>, właściwości są ustawione na podstawie <xref:System.Data.Services.Client.MergeOption> ustawienie <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="b9fc4-124">Odpowiedź może zawierać wartości właściwości, dla których odpowiadającą właściwość nie występuje w typ klienta.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="b9fc4-125">W takiej sytuacji działania zależą od wartości <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> właściwość <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="b9fc4-126">Jeśli ta właściwość jest równa `true`, brakująca właściwość jest ignorowana.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="b9fc4-127">W przeciwnym wypadku zgłaszany jest błąd.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="b9fc4-128">Właściwości są ustawione w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="b9fc4-128">Properties are set as follows:</span></span>  
  
    -   <span data-ttu-id="b9fc4-129">Właściwości skalarne są ustawione na wartość odpowiadająca we wpisie w komunikacie odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>  
  
    -   <span data-ttu-id="b9fc4-130">Złożonych właściwości można ustawić nowe wystąpienie typu złożonego, które są konfigurowane przy użyciu właściwości typu złożonego z odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>  
  
    -   <span data-ttu-id="b9fc4-131">Właściwości nawigacji, które zwracają zbiór powiązanych jednostek są ustawiane w ramach nowego lub istniejącego wystąpienia <xref:System.Collections.Generic.ICollection%601>, gdzie `T` jest typem powiązanej jednostki.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="b9fc4-132">Ta kolekcja jest pusta, chyba że powiązane obiekty zostały załadowane do <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="b9fc4-133">Aby uzyskać więcej informacji, zobacz [ładowanie zawartości odroczone](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="b9fc4-133">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="b9fc4-134">Gdy klas danych wygenerowanego klienta obsługuje powiązanie danych, właściwości nawigacji zwrócić wystąpienia <xref:System.Data.Services.Client.DataServiceCollection%601> klasy zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="b9fc4-135">Aby uzyskać więcej informacji, zobacz [powiązanie danych z kontrolkami](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="b9fc4-135">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
4. <span data-ttu-id="b9fc4-136"><xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> Zdarzenie jest wywoływane.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>  
  
5. <span data-ttu-id="b9fc4-137">Biblioteka klienta dołącza obiekt do <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="b9fc4-138">Obiekt nie jest dołączony, kiedy <xref:System.Data.Services.Client.MergeOption> jest <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span><span class="sxs-lookup"><span data-stu-id="b9fc4-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b9fc4-139">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="b9fc4-139">See also</span></span>

- [<span data-ttu-id="b9fc4-140">Wykonywanie zapytań do usługi danych</span><span class="sxs-lookup"><span data-stu-id="b9fc4-140">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="b9fc4-141">Projekcje zapytania</span><span class="sxs-lookup"><span data-stu-id="b9fc4-141">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)
