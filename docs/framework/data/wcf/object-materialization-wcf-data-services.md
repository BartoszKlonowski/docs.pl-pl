---
title: Obiekt materializację (Usługi danych programu WCF)
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
ms.openlocfilehash: 7a2b201e5690c4304e663e9429c54f377e05f556
ms.sourcegitcommit: 79a2d6a07ba4ed08979819666a0ee6927bbf1b01
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/28/2019
ms.locfileid: "74568909"
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="65c80-102">Obiekt materializację (Usługi danych programu WCF)</span><span class="sxs-lookup"><span data-stu-id="65c80-102">Object Materialization (WCF Data Services)</span></span>

<span data-ttu-id="65c80-103">W przypadku korzystania z okna dialogowego **Dodaj odwołanie do usługi** do korzystania z kanału informacyjnego protokołu OData (Open Data Protocol) w aplikacji klienckiej opartej na .NET Framework są generowane równoważne klasy danych dla każdego typu jednostki w modelu danych udostępnionym przez kanał informacyjny.</span><span class="sxs-lookup"><span data-stu-id="65c80-103">When you use the **Add Service Reference** dialog to consume an Open Data Protocol (OData) feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="65c80-104">Aby uzyskać więcej informacji, zobacz [generowanie biblioteki klienta usługi danych](generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="65c80-104">For more information, see [Generating the Data Service Client Library](generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="65c80-105">Dane jednostki, które są zwracane przez zapytanie, są uwzględniane w wystąpieniu jednej z wygenerowanych klas usługi danych klienta.</span><span class="sxs-lookup"><span data-stu-id="65c80-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="65c80-106">Aby uzyskać informacje na temat opcji scalania i rozpoznawania tożsamości dla śledzonych obiektów, zobacz [zarządzanie kontekstem usługi danych](managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="65c80-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](managing-the-data-service-context-wcf-data-services.md).</span></span>

<span data-ttu-id="65c80-107">Usługi danych programu WCF pozwala także definiować własne klasy usługi danych klienta zamiast używać klas danych generowanych przez narzędzie.</span><span class="sxs-lookup"><span data-stu-id="65c80-107">WCF Data Services also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="65c80-108">Umożliwia to korzystanie z własnych klas danych, nazywanych również "zwykłymi klasami danych CLR" (POCO).</span><span class="sxs-lookup"><span data-stu-id="65c80-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="65c80-109">W przypadku korzystania z tych typów niestandardowych klas danych należy odwzorować klasę danych na <xref:System.Data.Services.Common.DataServiceKeyAttribute> lub <xref:System.Data.Services.Common.DataServiceEntityAttribute> i upewnić się, że nazwy typów na klientach są zgodne z nazwami typów w modelu danych usługi danych.</span><span class="sxs-lookup"><span data-stu-id="65c80-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>

<span data-ttu-id="65c80-110">Gdy biblioteka otrzyma komunikat odpowiedzi na zapytanie, materializuje zwrócone dane ze strumieniowego źródła danych OData do wystąpień klas usługi danych klienta, które są typu zapytania.</span><span class="sxs-lookup"><span data-stu-id="65c80-110">After the library receives the query response message, it materializes the returned data from the OData feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="65c80-111">Ogólny proces materializacji tych obiektów jest następujący:</span><span class="sxs-lookup"><span data-stu-id="65c80-111">The general process for materializing these objects is as follows:</span></span>

1. <span data-ttu-id="65c80-112">Biblioteka kliencka odczytuje serializowany typ z elementu `entry` w kanale informacyjnym komunikatu odpowiedzi i próbuje utworzyć nowe wystąpienie poprawnego typu w jeden z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="65c80-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>

    - <span data-ttu-id="65c80-113">Gdy typ zadeklarowany w źródle danych ma taką samą nazwę jak typ <xref:System.Data.Services.Client.DataServiceQuery%601>, nowe wystąpienie tego typu jest tworzone za pomocą pustego konstruktora.</span><span class="sxs-lookup"><span data-stu-id="65c80-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>

    - <span data-ttu-id="65c80-114">Gdy typ zadeklarowany w kanale informacyjnym ma taką samą nazwę jak typ, który pochodzi od typu <xref:System.Data.Services.Client.DataServiceQuery%601>, nowe wystąpienie tego typu pochodnego jest tworzone za pomocą pustego konstruktora.</span><span class="sxs-lookup"><span data-stu-id="65c80-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>

    - <span data-ttu-id="65c80-115">Gdy typ zadeklarowany w kanale informacyjnym nie może być dopasowany do typu <xref:System.Data.Services.Client.DataServiceQuery%601> lub żadnego typu pochodnego, nowe wystąpienie typu zapytania jest tworzone za pomocą pustego konstruktora.</span><span class="sxs-lookup"><span data-stu-id="65c80-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>

    - <span data-ttu-id="65c80-116">Gdy właściwość <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> jest ustawiona, dostarczony delegat jest wywoływany, aby zastąpić domyślne mapowanie typu opartego na nazwie i utworzyć nowe wystąpienie typu zwróconego przez <xref:System.Func%602>.</span><span class="sxs-lookup"><span data-stu-id="65c80-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="65c80-117">Jeśli delegat zwraca wartość null, zamiast tego zostanie utworzone nowe wystąpienie typu zapytania.</span><span class="sxs-lookup"><span data-stu-id="65c80-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="65c80-118">Może być wymagane przesłonięcie domyślnego mapowania nazw typów opartych na nazwach w celu obsługi scenariuszy dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="65c80-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>

2. <span data-ttu-id="65c80-119">Biblioteka kliencka odczytuje wartość identyfikatora URI z `id` elementu `entry`, który jest wartością tożsamości jednostki.</span><span class="sxs-lookup"><span data-stu-id="65c80-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="65c80-120">O ile <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> wartość <xref:System.Data.Services.Client.MergeOption.NoTracking> nie jest używana, wartość tożsamości służy do śledzenia obiektu w <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="65c80-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="65c80-121">Wartość tożsamości jest również używana do zagwarantowania, że jest tworzone tylko pojedyncze wystąpienie jednostki, nawet jeśli jednostka jest zwracana wiele razy w odpowiedzi na zapytanie.</span><span class="sxs-lookup"><span data-stu-id="65c80-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>

3. <span data-ttu-id="65c80-122">Biblioteka kliencka odczytuje właściwości z wpisu kanału informacyjnego i ustawia odpowiednie właściwości dla nowo utworzonego obiektu.</span><span class="sxs-lookup"><span data-stu-id="65c80-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="65c80-123">Gdy obiekt, który ma taką samą wartość tożsamości, występuje już w <xref:System.Data.Services.Client.DataServiceContext>, właściwości są ustawiane na podstawie ustawienia <xref:System.Data.Services.Client.MergeOption> <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="65c80-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="65c80-124">Odpowiedź może zawierać wartości właściwości, dla których odpowiednia właściwość nie występuje w typie klienta.</span><span class="sxs-lookup"><span data-stu-id="65c80-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="65c80-125">W takim przypadku akcja zależy od wartości właściwości <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="65c80-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="65c80-126">Gdy ta właściwość ma wartość `true`, Brakująca właściwość jest ignorowana.</span><span class="sxs-lookup"><span data-stu-id="65c80-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="65c80-127">W przeciwnym razie zostanie zgłoszony błąd.</span><span class="sxs-lookup"><span data-stu-id="65c80-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="65c80-128">Właściwości są ustawiane w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="65c80-128">Properties are set as follows:</span></span>

    - <span data-ttu-id="65c80-129">Właściwości skalarne są ustawiane na odpowiadającą jej wartość we wpisie w komunikacie odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="65c80-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>

    - <span data-ttu-id="65c80-130">Właściwości złożone są ustawiane na nowe wystąpienie typu złożonego, które są ustawiane przy użyciu właściwości typu złożonego z odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="65c80-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>

    - <span data-ttu-id="65c80-131">Właściwości nawigacji, które zwracają kolekcję powiązanych jednostek, są ustawiane na nowe lub istniejące wystąpienie <xref:System.Collections.Generic.ICollection%601>, gdzie `T` jest typem powiązanej jednostki.</span><span class="sxs-lookup"><span data-stu-id="65c80-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="65c80-132">Ta kolekcja jest pusta, chyba że powiązane obiekty zostały załadowane do <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="65c80-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="65c80-133">Aby uzyskać więcej informacji, zobacz [ładowanie odroczonej zawartości](loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="65c80-133">For more information, see [Loading Deferred Content](loading-deferred-content-wcf-data-services.md).</span></span>

      > [!NOTE]
      > <span data-ttu-id="65c80-134">Gdy wygenerowane klasy danych klienta obsługują powiązanie danych, właściwości nawigacji zwracają wystąpienia klasy <xref:System.Data.Services.Client.DataServiceCollection%601>.</span><span class="sxs-lookup"><span data-stu-id="65c80-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="65c80-135">Aby uzyskać więcej informacji, zobacz [Powiązywanie danych z kontrolkami](binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="65c80-135">For more information, see [Binding Data to Controls](binding-data-to-controls-wcf-data-services.md).</span></span>

4. <span data-ttu-id="65c80-136">Zostanie zgłoszone zdarzenie <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity>.</span><span class="sxs-lookup"><span data-stu-id="65c80-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>

5. <span data-ttu-id="65c80-137">Biblioteka klienta dołącza obiekt do <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="65c80-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="65c80-138">Obiekt nie jest dołączany, gdy <xref:System.Data.Services.Client.MergeOption> jest <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span><span class="sxs-lookup"><span data-stu-id="65c80-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>

## <a name="see-also"></a><span data-ttu-id="65c80-139">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="65c80-139">See also</span></span>

- [<span data-ttu-id="65c80-140">Wykonywanie zapytań do usługi danych</span><span class="sxs-lookup"><span data-stu-id="65c80-140">Querying the Data Service</span></span>](querying-the-data-service-wcf-data-services.md)
- [<span data-ttu-id="65c80-141">Projekcje zapytania</span><span class="sxs-lookup"><span data-stu-id="65c80-141">Query Projections</span></span>](query-projections-wcf-data-services.md)
