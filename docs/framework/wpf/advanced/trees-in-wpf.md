---
title: Drzewa w WPF
ms.date: 03/30/2017
helpviewer_keywords:
- logical tree [WPF]
- element tree [WPF]
- visual tree [WPF]
ms.assetid: e83f25e5-d66b-4fc7-92d2-50130c9a6649
ms.openlocfilehash: e6173916ad64a60d3727b5d35bb2a2302b881b38
ms.sourcegitcommit: 5bbfe34a9a14e4ccb22367e57b57585c208cf757
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/18/2018
ms.locfileid: "46004487"
---
# <a name="trees-in-wpf"></a>Drzewa w WPF
W wielu technologii elementów i składników są zorganizowane w strukturze drzewa, w którym deweloperzy bezpośrednio manipulowania węzły obiektów w drzewie wpływać na renderowanie lub zachowanie aplikacji. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] używa także kilku metafory strukturę drzewa do zdefiniowania relacji między elementami program. W większości deweloperów WPF można utworzyć aplikację w kodzie lub zdefiniować części aplikacji w XAML podczas zastanawiać się pod względem koncepcyjnym obiektu drzewa metaphor, ale będzie można wywołanie interfejsu API lub za pomocą oznaczenia zrobić tak, a nie niektóre ogólne manipulowanie drzewa obiektem API takich jak możesz wykorzystać w XML modelu DOM. WPF udostępnia dwie klasy pomocnika, które zapewniają widoku drzewa metaphor <xref:System.Windows.LogicalTreeHelper> i <xref:System.Windows.Media.VisualTreeHelper>. Drzewo wizualne warunki i drzewo logiczne są również używane w dokumentacji programu WPF, ponieważ te sam drzewa są przydatne dla zrozumienia, działanie niektórych kluczowych funkcji WPF. W tym temacie Określa, co reprezentuje drzewo wizualne i drzewo logiczne, w tym artykule omówiono, jak takie drzew odnoszą się do ogólnej koncepcji drzewa obiektów i wprowadza <xref:System.Windows.LogicalTreeHelper> i <xref:System.Windows.Media.VisualTreeHelper>s.  
  

  
<a name="element_tree"></a>   
## <a name="trees-in-wpf"></a>Drzewa w WPF  
 Najbardziej zaawansowane struktury drzewa w [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] jest drzewa obiektów. Jeśli zdefiniujesz strony aplikacji w [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] , a następnie załadować [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], struktura drzewa jest oparta na relacji zagnieżdżenia elementów w znaczniku. Jeśli definiujesz aplikację lub części aplikacji w kodzie, a następnie struktury drzewa jest tworzony na podstawie przypisywanie wartości właściwości dla właściwości, które implementują model zawartości dla danego obiektu. W [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], istnieją dwa sposoby, które drzewa kompletnego obiektu jest conceptualized i mogą zostać zgłoszone do jego publiczny interfejs API: jako drzewo logiczne i drzewo wizualne. Różnice między drzewo logiczne i drzewa wizualnego nie zawsze są zawsze ważne, ale od czasu do czasu może spowodować problemy z niektórymi [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] podsystemów i wpływ wybieranych w znaczników lub innego kodu.  
  
 Chociaż nie zawsze manipulować drzewo logiczne lub drzewo wizualne bezpośrednio, Zrozumienie pojęć dotyczących sposobu interakcji drzewa jest przydatne dla zrozumienia, WPF jako technologia. Myśląc o WPF, ponieważ drzewie metaphor pewnego rodzaju również jest niezwykle istotne dla zrozumienia, jak dziedziczenie właściwości i zdarzenia, routing działa w [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].  
  
> [!NOTE]
>  Ponieważ drzewa obiektów jest więcej koncepcji od rzeczywistego interfejsu API, pomyśl o pojęcie w inny sposób jest jako wykresu obiektu. W praktyce istnieją relacje między obiektami w czasie wykonywania, w którym będzie podziału drzewa metaphor. Niemniej jednak szczególnie przy użyciu interfejsu użytkownika zdefiniowane w XAML, drzewa metaphor dotyczy wystarczająco większość dokumentacji WPF użyje drzewa obiektów termin podczas odwoływania się do tego ogólna koncepcja.  
  
<a name="logical_tree"></a>   
## <a name="the-logical-tree"></a>Drzewo logiczne  
 W [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], możesz dodać zawartość do elementów interfejsu użytkownika przez ustawienie właściwości obiektów, które wykonują kopie tych elementów. Na przykład dodać elementy do <xref:System.Windows.Controls.ListBox> kontrola manipulowanie jego <xref:System.Windows.Controls.ItemsControl.Items%2A> właściwości. W ten sposób umieszcza się elementy do <xref:System.Windows.Controls.ItemCollection> czyli <xref:System.Windows.Controls.ItemsControl.Items%2A> wartości właściwości. Podobnie, aby dodać obiekty do <xref:System.Windows.Controls.DockPanel>, manipulować jego <xref:System.Windows.Controls.Panel.Children%2A> wartości właściwości. W tym miejscu, w przypadku dodawania obiektów do <xref:System.Windows.Controls.UIElementCollection>. Dla przykładu kodu zobacz [Element dynamiczne dodawanie](https://msdn.microsoft.com/library/d00f258a-7973-4de7-bc54-a3fc1f638419).  
  
 W [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)], po umieszczeniu wyświetlanie listy elementów we <xref:System.Windows.Controls.ListBox> lub kontrolki lub inne elementy interfejsu użytkownika w <xref:System.Windows.Controls.DockPanel>, możesz także użyć <xref:System.Windows.Controls.ItemsControl.Items%2A> i <xref:System.Windows.Controls.Panel.Children%2A> właściwości, jawnie lub niejawnie, jak w poniższym przykładzie.  
  
 [!code-xaml[TreeOvwsSupport#AllCode](../../../../samples/snippets/csharp/VS_Snippets_Wpf/TreeOvwsSupport/CS/page1.xaml#allcode)]  
  
 Jeśli zostały do przetworzenia tego XAML jako kod XML w obszarze model obiektu dokumentu, i jeśli było uwzględniane tagi komentarzem out jako niejawne (które mogłyby zostać prawne), a następnie wynikowe drzewo XML DOM będzie uwzględniony elementy `<ListBox.Items>` i inne niejawne elementy. Ale XAML nie przetwarza w ten sposób, gdy użytkownik znaczników do odczytu i zapisu obiektów, nie ma dosłownie wynikowy wykres obiektu `ListBox.Items`. Jednak mieć <xref:System.Windows.Controls.ListBox> właściwość o nazwie `Items` zawierający <xref:System.Windows.Controls.ItemCollection>oraz że <xref:System.Windows.Controls.ItemCollection> został zainicjowany, ale pusta, jeśli <xref:System.Windows.Controls.ListBox> XAML jest przetwarzany. Następnie każdego podrzędnego obiekt elementu, który istnieje jako zawartość dla <xref:System.Windows.Controls.ListBox> jest dodawany do <xref:System.Windows.Controls.ItemCollection> przez analizator składni wywołania `ItemCollection.Add`. Ten przykład przetwarzania XAML do drzewa obiektów jest do tej pory pozornie przykład gdzie drzewa utworzony obiekt jest zasadniczo drzewo logiczne.  
  
 Drzewo logiczne nie jest jednak wykresu cały obiekt, który istnieje dla swojej aplikacji, które interfejsu użytkownika w czasie wykonywania, nawet w przypadku elementów niejawne składnia XAML brana pod uwagę limit. Głównym powodem tego jest wizualizacji i szablony. Rozważmy na przykład <xref:System.Windows.Controls.Button>. Raporty drzewo logiczne <xref:System.Windows.Controls.Button> obiektu, a także jej ciąg `Content`. Ale ma więcej do tego przycisku w drzewie obiektów czasu wykonywania. W szczególności przycisk pojawia się tylko na ekranie sposób robi, ponieważ określony <xref:System.Windows.Controls.Button> szablonu kontrolki została zastosowana. Elementy wizualne, które pochodzą z szablonem zastosowane (np. szablon zdefiniowany <xref:System.Windows.Controls.Border> z ciemnoszary wokół przycisku visual) nie są zgłaszane w drzewie logicznym, nawet jeśli przeglądasz drzewo logiczne w czasie wykonywania (takich jak obsługa zdarzeń wejściowych z widoczne w interfejsie użytkownika, a następnie odczytując drzewo logiczne). Aby znaleźć elementy wizualne szablonu, zamiast tego należy zbadać drzewo wizualne.  
  
 Aby uzyskać więcej informacji o tym, jak [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] mapy składni utworzony obiekt wykresu i niejawne składni XAML, zobacz [składnia XAML w szczegółów](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md) lub [Przegląd XAML (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md).  
  
<a name="tree_property_inheritance_event_routing"></a>   
### <a name="the-purpose-of-the-logical-tree"></a>Celem drzewo logiczne  
 Drzewo logiczne istnieje w celu modele zawartości może łatwo przejść przez ich obiektów podrzędnych możliwe i tak, aby modele zawartości może być rozszerzalne. Ponadto drzewa logicznego zapewnia platformę dla niektórych powiadomień, np. gdy są ładowane wszystkich obiektów w drzewie logicznym. Po prostu drzewo logiczne jest przybliżeniem wykres obiektu czas wykonywania na poziomie framework, który wyklucza wizualizacji, ale jest odpowiednia dla wielu operacji tworzenie zapytań względem własnego czasu wykonywania kompozycję aplikacji.  
  
 Ponadto, odwołania do obu zasobów statycznych i dynamicznych są rozwiązywane przeglądając górę drzewa logicznego dla <xref:System.Windows.FrameworkElement.Resources%2A> kolekcji na początkowego obiektu żądającego, a następnie kontynuowanie w górę drzewa logicznego i sprawdzania każdego <xref:System.Windows.FrameworkElement> (lub <xref:System.Windows.FrameworkContentElement>) przez następne `Resources` wartość, która zawiera <xref:System.Windows.ResourceDictionary>, prawdopodobnie zawierającej tego klucza. Drzewo logiczne jest używana do wyszukiwania zasobów, gdy obecne są oba drzewo logiczne, jak i drzewa wizualnego. Aby uzyskać więcej informacji na temat słownikach zasobów i wyszukiwania, zobacz [zasoby XAML](../../../../docs/framework/wpf/advanced/xaml-resources.md).  
  
<a name="composition"></a>   
### <a name="composition-of-the-logical-tree"></a>Kompozycja drzewo logiczne  
 Drzewo logiczne jest zdefiniowana na poziomie WPF framework, co oznacza, że WPF podstawowy element, który jest najbardziej odpowiednie dla operacji drzewo logiczne jest <xref:System.Windows.FrameworkElement> lub <xref:System.Windows.FrameworkContentElement>. Jednak jak zobaczyć faktycznie użycie <xref:System.Windows.LogicalTreeHelper> interfejsu API, drzewo logiczne czasami zawiera węzły, które nie są albo <xref:System.Windows.FrameworkElement> lub <xref:System.Windows.FrameworkContentElement>. Na przykład raporty drzewo logiczne <xref:System.Windows.Controls.TextBlock.Text%2A> wartość <xref:System.Windows.Controls.TextBlock>, który jest ciągiem.  
  
<a name="override_logical_tree"></a>   
### <a name="overriding-the-logical-tree"></a>Zastępowanie drzewa logicznego  
 Autorzy formantu zaawansowanego zastąpić drzewo logiczne, zastępując kilka [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] definiują sposób obiekt ogólny lub model zawartości dodaje lub usuwa obiektów w drzewie logicznym. Na przykład jak zastąpić drzewo logiczne zobacz [przesłanianie drzewa logicznego](../../../../docs/framework/wpf/advanced/how-to-override-the-logical-tree.md).  
  
<a name="pvi"></a>   
### <a name="property-value-inheritance"></a>Przejęcie wartości właściwości  
 Dziedziczenie wartości właściwości działa za pośrednictwem drzewa hybrydowych. Rzeczywiste metadanych, który zawiera <xref:System.Windows.FrameworkPropertyMetadata.Inherits%2A> właściwość, która umożliwia dziedziczenia jest WPF poziomie struktury <xref:System.Windows.FrameworkPropertyMetadata> klasy. W związku z tym, zarówno element nadrzędny, który zawiera oryginalną wartość i obiektu podrzędnego, który dziedziczy wartości być <xref:System.Windows.FrameworkElement> lub <xref:System.Windows.FrameworkContentElement>, i muszą one zarówno być częścią niektórych drzewo logiczne. Jednak dla istniejących właściwości WPF, które obsługują dziedziczenia, przejęcie wartości właściwości jest w stanie widoczny przy obsłudze często przez pośredniczące obiekt, który nie znajduje się w drzewie logicznym. Przede wszystkim jest istotne, występowania elementów szablonu, użyj wartości właściwości dziedziczonych nastavit albo wystąpienia, które jest oparte na szablonach lub w nadal wyższego poziomu kompozycji na poziomie strony i w związku z tym wyżej w drzewie logicznym. Aby dziedziczenie wartości właściwości działać spójnie takich granicę dziedziczącej właściwość musi być zarejestrowana jako dołączoną właściwość, a tego wzorca należy stosować, jeśli zamierzasz zdefiniować właściwość zależności niestandardowej za pomocą właściwości zachowanie dziedziczenia. Dokładne drzewa, używane do obsługi dziedziczenia właściwości nie można całkowicie oczekiwać przez metodę pomocnika klasy narzędzie nawet w czasie wykonywania. Aby uzyskać więcej informacji, zobacz [dziedziczenie wartości właściwości](../../../../docs/framework/wpf/advanced/property-value-inheritance.md).  
  
<a name="two_trees"></a>   
## <a name="the-visual-tree"></a>Drzewo wizualne  
 Oprócz koncepcji drzewo logiczne, dostępna jest również pojęcie drzewo wizualne w programie [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]. Drzewa wizualnego w tym artykule opisano strukturę obiektów wizualnych, reprezentowane przez <xref:System.Windows.Media.Visual> klasy bazowej. Podczas pisania szablonu kontrolki są Definiowanie lub drzewa wizualnego, który ma zastosowanie dla tej kontrolki, definiują na nowo. Drzewo wizualne jest również dla deweloperów, którzy chcą niższego poziomu kontroli nad rysowania względów wydajność i Optymalizacja. Jeden narażenia poziomu drzewa wizualnego w ramach konwencjonalnej [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] programowania aplikacji jest, że trasy zdarzeń dla zdarzenia trasowanego przede wszystkim podróży wzdłuż drzewo wizualne drzewo logiczne. Ten subtlety zdarzenia trasowanego zachowanie może nie być oczywista, chyba że jesteś autorem formantu. Routing zdarzeń za pomocą drzewa wizualnego umożliwia formantów, które implementują kompozycji na poziomie wizualizacji do obsługi zdarzeń lub utworzyć zdarzenia metod ustawiających.  
  
<a name="trees_content"></a>   
## <a name="trees-content-elements-and-content-hosts"></a>Drzewa, elementy zawartości i hosty zawartości  
 Elementy zawartości (klas, które wynikają z <xref:System.Windows.ContentElement>) nie są częścią drzewa wizualnego; nie dziedziczą z <xref:System.Windows.Media.Visual> i nie mają wizualnej reprezentacji. Aby można było wyświetlane w interfejsie użytkownika w ogóle <xref:System.Windows.ContentElement> musi być hostowany na hoście zawartości, która jest <xref:System.Windows.Media.Visual> i uczestnika drzewo logiczne. Taki obiekt jest zazwyczaj <xref:System.Windows.FrameworkElement>. Można wyobrażenie, że host zawartości jest nieco, takich jak "Przeglądarka" zawartości i wybiera sposób wyświetlania zawartości w obrębie regionu ekran, który kontroluje hosta. Jeżeli hostowana jest zawartość, zawartość może być wykonany uczestnika niektóre procesy drzewa, które są zwykle skojarzone z drzewa wizualnego. Ogólnie rzecz biorąc <xref:System.Windows.FrameworkElement> klasy obsługującej zawiera kod implementacji, który dodaje dowolnej hostowanej <xref:System.Windows.ContentElement> do trasy zdarzeń za pomocą węzłów podrzędnych logicznego drzewa zawartości, mimo że hostowana zawartość nie jest częścią true drzewo wizualne. Jest to konieczne, aby <xref:System.Windows.ContentElement> można źródła zdarzenia trasowanego, który przekierowuje do dowolnego elementu innego niż sam.  
  
<a name="tree_traversal"></a>   
## <a name="tree-traversal"></a>Przechodzenie drzewa  
 <xref:System.Windows.LogicalTreeHelper> Klasa udostępnia <xref:System.Windows.LogicalTreeHelper.GetChildren%2A>, <xref:System.Windows.LogicalTreeHelper.GetParent%2A>, i <xref:System.Windows.LogicalTreeHelper.FindLogicalNode%2A> metody przechodzenia drzewo logiczne. W większości przypadków nie trzeba przechodzić przez drzewo logiczne istniejących formantów, ponieważ te formanty zmieniają prawie zawsze ich elementów podrzędnych logicznego jako właściwość dedykowany kolekcji, która obsługuje dostępu do kolekcji, takie jak `Add`, indeksator i tak dalej. Przechodzenie drzewa jest głównie scenariusz, w którym jest używana przez formant autorów, którzy nie zdecydowali się pochodzić od wzorców kontrolek zamierzony, takich jak <xref:System.Windows.Controls.ItemsControl> lub <xref:System.Windows.Controls.Panel> gdzie zostały już zdefiniowane właściwości kolekcji i którzy mają w celu zapewnienia ich własnych kolekcji właściwości pomocy technicznej.  
  
 Drzewo wizualne obsługuje również klasy pomocnika przechodzenie drzewa wizualnego <xref:System.Windows.Media.VisualTreeHelper>. Drzewo wizualne nie jest dostępna jako wygodny sposób za pośrednictwem właściwości specyficzne dla formantu, więc <xref:System.Windows.Media.VisualTreeHelper> klasa jest zalecanym sposobem przechodzenie drzewa wizualnego, jeżeli jest to konieczne w przypadku danego scenariusza programowania. Aby uzyskać więcej informacji, zobacz [Przegląd Renderowanie grafiki WPF](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md).  
  
> [!NOTE]
>  Czasami jest konieczne badanie drzewie wizualnym zastosowany szablon. Należy zachować ostrożność, korzystając z tej techniki. Nawet wtedy, gdy są przechodzenie drzewa wizualnego, kontrolki, gdzie definiowania szablonu, konsumentów formantu zawsze można zmienić szablonu, ustawiając <xref:System.Windows.Controls.Control.Template%2A> właściwości wystąpienia, a nawet użytkownik końcowy może mieć wpływ na zastosowany szablon, zmieniając motyw systemu.  
  
<a name="routes"></a>   
## <a name="routes-for-routed-events-as-a-tree"></a>Trasy dla zdarzeń trasowanych jako "Drzewa"  
 Jak wspomniano wcześniej, trasy danego zdarzenia trasowane porusza się wzdłuż ścieżki pojedynczych i wstępnie drzewa, na których jest hybrydą reprezentacje drzewa wizualnego i logicznych. Trasy zdarzenia mogą być przesyłane w górę lub dół kierunki, w obrębie drzewa, w zależności od tego, czy jest tunelowanie lub Propagacja kierowane zdarzeń. Koncepcja trasy zdarzeń nie ma bezpośrednio pomocnicze klasa pomocnika, która może służyć do "szczegółowe" trasy zdarzeń niezależnie od podnoszenie zdarzenia, które faktycznie przekazuje. Brak klasy, która reprezentuje trasy, <xref:System.Windows.EventRoute>, ale metody tej klasy są zwykle tylko do użytku wewnętrznego.  
  
<a name="resourcesandtrees"></a>   
## <a name="resource-dictionaries-and-trees"></a>Słowniki zasobów i drzew  
 Wyszukiwania słownika zasobów dla wszystkich `Resources` zdefiniowane na stronie jest przesyłany w zasadzie drzewo logiczne. Obiekty, które nie znajdują się w drzewie logicznym można odwoływać się do zasobów z kluczem, ale kolejność wyszukiwania zasobów rozpoczyna się od punktu, w której ten obiekt jest podłączony do drzewa logicznego. W środowisku WPF można mieć tylko węzły drzewa logicznego `Resources` właściwość, która zawiera <xref:System.Windows.ResourceDictionary>, w związku z tym nie ma żadnych korzyści w przechodzenie drzewa wizualnego, wyszukiwanie zasobów kluczem <xref:System.Windows.ResourceDictionary>.  
  
 Jednak wyszukiwania zasobów także mogą wykraczać poza natychmiastowego drzewo logiczne. W przypadku zaznaczaniu aplikacji wyszukiwania zasobów można następnie nadal są słowniki zasobów na poziomie aplikacji, a następnie wartościom motywu systemu i pomocy technicznej, które są określone jako właściwości statyczne lub klucze. Motywy się również odwoływać się do wartości systemu poza drzewo logiczne motyw Jeśli odwołania do zasobów są dynamiczne. Aby uzyskać więcej informacji na temat słownikach zasobów i logiki wyszukiwania, zobacz [zasoby XAML](../../../../docs/framework/wpf/advanced/xaml-resources.md).  
  
## <a name="see-also"></a>Zobacz też  
 [Przegląd danych wejściowych](../../../../docs/framework/wpf/advanced/input-overview.md)  
 [Renderowanie grafiki WPF — przegląd](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md)  
 [Przegląd zdarzeń trasowanych](../../../../docs/framework/wpf/advanced/routed-events-overview.md)  
 [Inicjowanie elementów obiektu poza drzewem obiektu](../../../../docs/framework/wpf/advanced/initialization-for-object-elements-not-in-an-object-tree.md)  
 [Architektura WPF](../../../../docs/framework/wpf/advanced/wpf-architecture.md)
