---
title: Przegląd Obiekty Freezable
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Freezable objects [WPF], description
- unfreezing Freezable objects [WPF]
- classes [WPF], Freezable
ms.assetid: 89c71692-4f43-4057-b611-67c6a8a863a2
ms.openlocfilehash: b1887afd19407898d8de1d92252e29778899fb89
ms.sourcegitcommit: 011314e0c8eb4cf4a11d92078f58176c8c3efd2d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 02/09/2020
ms.locfileid: "77095193"
---
# <a name="freezable-objects-overview"></a><span data-ttu-id="bac57-102">Przegląd Obiekty Freezable</span><span class="sxs-lookup"><span data-stu-id="bac57-102">Freezable Objects Overview</span></span>

<span data-ttu-id="bac57-103">W tym temacie opisano sposób efektywnego używania i tworzenia obiektów <xref:System.Windows.Freezable>, które udostępniają specjalne funkcje, które mogą pomóc w zwiększeniu wydajności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bac57-103">This topic describes how to effectively use and create <xref:System.Windows.Freezable> objects, which provide special features that can help improve application performance.</span></span> <span data-ttu-id="bac57-104">Przykłady obiektów Freezable obejmują pędzle, pióra, przekształcenia, geometrie i animacje.</span><span class="sxs-lookup"><span data-stu-id="bac57-104">Examples of freezable objects include brushes, pens, transformations, geometries, and animations.</span></span>

<a name="whatisafreezable"></a>

## <a name="what-is-a-freezable"></a><span data-ttu-id="bac57-105">Co to jest Freezable?</span><span class="sxs-lookup"><span data-stu-id="bac57-105">What Is a Freezable?</span></span>

<span data-ttu-id="bac57-106"><xref:System.Windows.Freezable> jest specjalnym typem obiektu, który ma dwa stany: Niezamrożone i zamrożone.</span><span class="sxs-lookup"><span data-stu-id="bac57-106">A <xref:System.Windows.Freezable> is a special type of object that has two states: unfrozen and frozen.</span></span> <span data-ttu-id="bac57-107">Gdy nie zamrożono, <xref:System.Windows.Freezable> wygląda tak jak każdy inny obiekt.</span><span class="sxs-lookup"><span data-stu-id="bac57-107">When unfrozen, a <xref:System.Windows.Freezable> appears to behave like any other object.</span></span> <span data-ttu-id="bac57-108">Po zamrożoniu nie można już modyfikować <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="bac57-108">When frozen, a <xref:System.Windows.Freezable> can no longer be modified.</span></span>

<span data-ttu-id="bac57-109"><xref:System.Windows.Freezable> zawiera zdarzenie <xref:System.Windows.Freezable.Changed>, które powiadamia obserwatorów o wszelkich modyfikacjach obiektu.</span><span class="sxs-lookup"><span data-stu-id="bac57-109">A <xref:System.Windows.Freezable> provides a <xref:System.Windows.Freezable.Changed> event to notify observers of any modifications to the object.</span></span> <span data-ttu-id="bac57-110">Zamrożenie <xref:System.Windows.Freezable> może zwiększyć jego wydajność, ponieważ nie trzeba już poświęcać zasobów na powiadomienia o zmianach.</span><span class="sxs-lookup"><span data-stu-id="bac57-110">Freezing a <xref:System.Windows.Freezable> can improve its performance, because it no longer needs to spend resources on change notifications.</span></span> <span data-ttu-id="bac57-111">Zamrożone <xref:System.Windows.Freezable> mogą być również współużytkowane przez wątki, podczas gdy nie zamrożone <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="bac57-111">A frozen <xref:System.Windows.Freezable> can also be shared across threads, while an unfrozen <xref:System.Windows.Freezable> cannot.</span></span>

<span data-ttu-id="bac57-112">Chociaż Klasa <xref:System.Windows.Freezable> ma wiele aplikacji, większość <xref:System.Windows.Freezable> obiektów w [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] jest związana z podsystemem graficznym.</span><span class="sxs-lookup"><span data-stu-id="bac57-112">Although the <xref:System.Windows.Freezable> class has many applications, most <xref:System.Windows.Freezable> objects in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] are related to the graphics sub-system.</span></span>

<span data-ttu-id="bac57-113">Klasa <xref:System.Windows.Freezable> ułatwia korzystanie z pewnych obiektów systemu grafiki i pozwala zwiększyć wydajność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="bac57-113">The <xref:System.Windows.Freezable> class makes it easier to use certain graphics system objects and can help improve application performance.</span></span> <span data-ttu-id="bac57-114">Przykłady typów, które dziedziczą z <xref:System.Windows.Freezable> zawierają klasy <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>i <xref:System.Windows.Media.Geometry>.</span><span class="sxs-lookup"><span data-stu-id="bac57-114">Examples of types that inherit from <xref:System.Windows.Freezable> include the <xref:System.Windows.Media.Brush>, <xref:System.Windows.Media.Transform>, and <xref:System.Windows.Media.Geometry> classes.</span></span> <span data-ttu-id="bac57-115">Ponieważ zawierają one niezarządzane zasoby, system musi monitorować te obiekty do modyfikacji, a następnie aktualizować odpowiednie zasoby niezarządzane w przypadku zmiany oryginalnego obiektu.</span><span class="sxs-lookup"><span data-stu-id="bac57-115">Because they contain unmanaged resources, the system must monitor these objects for modifications, and then update their corresponding unmanaged resources when there is a change to the original object.</span></span> <span data-ttu-id="bac57-116">Nawet jeśli nie modyfikujesz obiektu systemowego Graphics, system musi nadal spędzać niektóre z zasobów monitorujących obiekt, w przypadku jego zmiany.</span><span class="sxs-lookup"><span data-stu-id="bac57-116">Even if you don't actually modify a graphics system object, the system must still spend some of its resources monitoring the object, in case you do change it.</span></span>

<span data-ttu-id="bac57-117">Załóżmy na przykład, że tworzysz pędzel <xref:System.Windows.Media.SolidColorBrush> i użyjesz go do malowania tła przycisku.</span><span class="sxs-lookup"><span data-stu-id="bac57-117">For example, suppose you create a <xref:System.Windows.Media.SolidColorBrush> brush and use it to paint the background of a button.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart1)]
[!code-vb[freezablesample_procedural#FrozenExamplePart1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart1)]

<span data-ttu-id="bac57-118">Gdy przycisk jest renderowany, podsystem [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Graphics używa dostarczonych informacji do malowania grupy pikseli w celu utworzenia wyglądu przycisku.</span><span class="sxs-lookup"><span data-stu-id="bac57-118">When the button is rendered, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] graphics sub-system uses the information you provided to paint a group of pixels to create the appearance of a button.</span></span> <span data-ttu-id="bac57-119">Mimo że używasz pełnego pędzla kolorów do opisywania, w jaki sposób przycisk powinien być namalowany, Pędzel pełnego koloru nie jest w rzeczywistości używany do malowania.</span><span class="sxs-lookup"><span data-stu-id="bac57-119">Although you used a solid color brush to describe how the button should be painted, your solid color brush doesn't actually do the painting.</span></span> <span data-ttu-id="bac57-120">System grafiki generuje szybkie i niskiego poziomu obiekty dla przycisku i pędzla. są to obiekty, które faktycznie pojawiają się na ekranie.</span><span class="sxs-lookup"><span data-stu-id="bac57-120">The graphics system generates fast, low-level objects for the button and the brush, and it is those objects that actually appear on the screen.</span></span>

<span data-ttu-id="bac57-121">W przypadku zmodyfikowania pędzla należy ponownie wygenerować te obiekty niskiego poziomu.</span><span class="sxs-lookup"><span data-stu-id="bac57-121">If you were to modify the brush, those low-level objects would have to be regenerated.</span></span> <span data-ttu-id="bac57-122">Klasa Freezable to co daje pędzlowi możliwość znalezienia odpowiednich, wygenerowanych obiektów niskiego poziomu i zaktualizowania ich w momencie zmiany.</span><span class="sxs-lookup"><span data-stu-id="bac57-122">The freezable class is what gives a brush the ability to find its corresponding generated, low-level objects and to update them when it changes.</span></span> <span data-ttu-id="bac57-123">Gdy ta możliwość jest włączona, Pędzel jest określany jako "Niezamrożone".</span><span class="sxs-lookup"><span data-stu-id="bac57-123">When this ability is enabled, the brush is said to be "unfrozen."</span></span>

<span data-ttu-id="bac57-124">Freezable Metoda <xref:System.Windows.Freezable.Freeze%2A> umożliwia wyłączenie tej możliwości samoaktualizacji.</span><span class="sxs-lookup"><span data-stu-id="bac57-124">A freezable's <xref:System.Windows.Freezable.Freeze%2A> method enables you to disable this self-updating ability.</span></span> <span data-ttu-id="bac57-125">Możesz użyć tej metody, aby pędzel stał się "zablokowany" lub nie można go modyfikować.</span><span class="sxs-lookup"><span data-stu-id="bac57-125">You can use this method to make the brush become "frozen," or unmodifiable.</span></span>

> [!NOTE]
> <span data-ttu-id="bac57-126">Nie każdy obiekt Freezable można zablokować.</span><span class="sxs-lookup"><span data-stu-id="bac57-126">Not every Freezable object can be frozen.</span></span> <span data-ttu-id="bac57-127">Aby uniknąć zgłaszania <xref:System.InvalidOperationException>, sprawdź wartość właściwości <xref:System.Windows.Freezable.CanFreeze%2A> obiektu Freezable, aby ustalić, czy można ją zamrozić przed podjęciem próby jego zablokowania.</span><span class="sxs-lookup"><span data-stu-id="bac57-127">To avoid throwing an <xref:System.InvalidOperationException>, check the value of the Freezable object's <xref:System.Windows.Freezable.CanFreeze%2A> property to determine whether it can be frozen before attempting to freeze it.</span></span>

[!code-csharp[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#frozenexamplepart2)]
[!code-vb[freezablesample_procedural#FrozenExamplePart2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#frozenexamplepart2)]

<span data-ttu-id="bac57-128">Gdy nie musisz już modyfikować Freezable, zamrażanie zapewnia korzyści z wydajności.</span><span class="sxs-lookup"><span data-stu-id="bac57-128">When you no longer need to modify a freezable, freezing it provides performance benefits.</span></span> <span data-ttu-id="bac57-129">W przypadku zablokowania pędzla w tym przykładzie system grafiki nie musi już monitorować go pod kątem zmian.</span><span class="sxs-lookup"><span data-stu-id="bac57-129">If you were to freeze the brush in this example, the graphics system would no longer need to monitor it for changes.</span></span> <span data-ttu-id="bac57-130">System grafiki może również wykonywać inne optymalizacje, ponieważ wie, że pędzel nie ulegnie zmianie.</span><span class="sxs-lookup"><span data-stu-id="bac57-130">The graphics system can also make other optimizations, because it knows the brush won't change.</span></span>

> [!NOTE]
> <span data-ttu-id="bac57-131">Dla wygody Obiekty Freezable pozostają Niezamrożone, chyba że zostaną jawnie zablokowane.</span><span class="sxs-lookup"><span data-stu-id="bac57-131">For convenience, freezable objects remain unfrozen unless you explicitly freeze them.</span></span>

<a name="frozenfreezables"></a>

## <a name="using-freezables"></a><span data-ttu-id="bac57-132">Korzystanie z obiektów Freezable platformie</span><span class="sxs-lookup"><span data-stu-id="bac57-132">Using Freezables</span></span>

<span data-ttu-id="bac57-133">Użycie niezablokowanego Freezable przypomina użycie dowolnego innego typu obiektu.</span><span class="sxs-lookup"><span data-stu-id="bac57-133">Using an unfrozen freezable is like using any other type of object.</span></span> <span data-ttu-id="bac57-134">W poniższym przykładzie kolor <xref:System.Windows.Media.SolidColorBrush> został zmieniony z żółtego na czerwony, gdy jest używany do rysowania tła przycisku.</span><span class="sxs-lookup"><span data-stu-id="bac57-134">In the following example, the color of a <xref:System.Windows.Media.SolidColorBrush> is changed from yellow to red after it's used to paint the background of a button.</span></span> <span data-ttu-id="bac57-135">System grafiki działa w tle, aby automatycznie zmienić przycisk z żółtego na czerwony, przy następnym odświeżeniu ekranu.</span><span class="sxs-lookup"><span data-stu-id="bac57-135">The graphics system works behind the scenes to automatically change the button from yellow to red the next time the screen is refreshed.</span></span>

[!code-csharp[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#unfrozenexampleshort)]
[!code-vb[freezablesample_procedural#UnFrozenExampleShort](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#unfrozenexampleshort)]

### <a name="freezing-a-freezable"></a><span data-ttu-id="bac57-136">Zamrażanie elementu Freezable</span><span class="sxs-lookup"><span data-stu-id="bac57-136">Freezing a Freezable</span></span>

<span data-ttu-id="bac57-137">Aby nie modyfikować <xref:System.Windows.Freezable>, należy wywołać metodę <xref:System.Windows.Freezable.Freeze%2A>.</span><span class="sxs-lookup"><span data-stu-id="bac57-137">To make a <xref:System.Windows.Freezable> unmodifiable, you call its <xref:System.Windows.Freezable.Freeze%2A> method.</span></span> <span data-ttu-id="bac57-138">Po zablokowaniu obiektu, który zawiera obiekty Freezable, te obiekty również są zamrożone.</span><span class="sxs-lookup"><span data-stu-id="bac57-138">When you freeze an object that contains freezable objects, those objects are frozen as well.</span></span> <span data-ttu-id="bac57-139">Na przykład jeśli zablokujesz <xref:System.Windows.Media.PathGeometry>, dane i segmenty, które zawiera, byłyby również zablokowane.</span><span class="sxs-lookup"><span data-stu-id="bac57-139">For example, if you freeze a <xref:System.Windows.Media.PathGeometry>, the figures and segments it contains would be frozen too.</span></span>

<span data-ttu-id="bac57-140">**Nie** można zamrozić elementu Freezable, jeśli którykolwiek z następujących warunków jest spełniony:</span><span class="sxs-lookup"><span data-stu-id="bac57-140">A Freezable **can't** be frozen if any of the following are true:</span></span>

- <span data-ttu-id="bac57-141">Ma właściwości animowane lub powiązane z danymi.</span><span class="sxs-lookup"><span data-stu-id="bac57-141">It has animated or data bound properties.</span></span>

- <span data-ttu-id="bac57-142">Ma właściwości ustawione przez zasób dynamiczny.</span><span class="sxs-lookup"><span data-stu-id="bac57-142">It has properties set by a dynamic resource.</span></span> <span data-ttu-id="bac57-143">(Zobacz [zasoby XAML](../../../desktop-wpf/fundamentals/xaml-resources-define.md) , aby uzyskać więcej informacji na temat zasobów dynamicznych).</span><span class="sxs-lookup"><span data-stu-id="bac57-143">(See the [XAML Resources](../../../desktop-wpf/fundamentals/xaml-resources-define.md) for more information about dynamic resources.)</span></span>

- <span data-ttu-id="bac57-144">Zawiera <xref:System.Windows.Freezable> obiektów podrzędnych, które nie mogą być zamrożone.</span><span class="sxs-lookup"><span data-stu-id="bac57-144">It contains <xref:System.Windows.Freezable> sub-objects that can't be frozen.</span></span>

<span data-ttu-id="bac57-145">Jeśli te warunki mają wartość FAŁSZ i nie zamierzasz modyfikować <xref:System.Windows.Freezable>, należy zamrozić go, aby uzyskać korzyści wynikające z wydajności opisane wcześniej.</span><span class="sxs-lookup"><span data-stu-id="bac57-145">If these conditions are false, and you don't intend to modify the <xref:System.Windows.Freezable>, then you should freeze it to gain the performance benefits described earlier.</span></span>

<span data-ttu-id="bac57-146">Po wywołaniu metody <xref:System.Windows.Freezable.Freeze%2A> Freezable nie można już jej modyfikować.</span><span class="sxs-lookup"><span data-stu-id="bac57-146">Once you call a freezable's <xref:System.Windows.Freezable.Freeze%2A> method, it can no longer be modified.</span></span> <span data-ttu-id="bac57-147">Próba zmodyfikowania zablokowanego obiektu powoduje zgłoszenie <xref:System.InvalidOperationException>.</span><span class="sxs-lookup"><span data-stu-id="bac57-147">Attempting to modify a frozen object causes an <xref:System.InvalidOperationException> to be thrown.</span></span> <span data-ttu-id="bac57-148">Poniższy kod zgłasza wyjątek, ponieważ próbujemy zmodyfikować pędzel po jego zamrożoniu.</span><span class="sxs-lookup"><span data-stu-id="bac57-148">The following code throws an exception, because we attempt to modify the brush after it's been frozen.</span></span>

[!code-csharp[freezablesample_procedural#ExceptionExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#exceptionexample)]
[!code-vb[freezablesample_procedural#ExceptionExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#exceptionexample)]

<span data-ttu-id="bac57-149">Aby uniknąć zgłaszania tego wyjątku, można użyć metody <xref:System.Windows.Freezable.IsFrozen%2A>, aby określić, czy <xref:System.Windows.Freezable> jest zamrożona.</span><span class="sxs-lookup"><span data-stu-id="bac57-149">To avoid throwing this exception, you can use the <xref:System.Windows.Freezable.IsFrozen%2A> method to determine whether a <xref:System.Windows.Freezable> is frozen.</span></span>

[!code-csharp[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#checkisfrozenexample)]
[!code-vb[freezablesample_procedural#CheckIsFrozenExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#checkisfrozenexample)]

<span data-ttu-id="bac57-150">W poprzednim przykładzie kodu, modyfikowalna kopia została wykonana z zamrożonego obiektu za pomocą metody <xref:System.Windows.Freezable.Clone%2A>.</span><span class="sxs-lookup"><span data-stu-id="bac57-150">In the preceding code example, a modifiable copy was made of a frozen object using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="bac57-151">W następnej sekcji omówiono klonowanie bardziej szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="bac57-151">The next section discusses cloning in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="bac57-152">Ponieważ zamrożony Freezable nie może być animowany, system animacji automatycznie tworzy modyfikowalne klony zamrożonych obiektów <xref:System.Windows.Freezable> podczas próby animowania ich przy użyciu <xref:System.Windows.Media.Animation.Storyboard>.</span><span class="sxs-lookup"><span data-stu-id="bac57-152">Because a frozen freezable cannot be animated, the animation system will automatically create modifiable clones of frozen <xref:System.Windows.Freezable> objects when you try to animate them with a <xref:System.Windows.Media.Animation.Storyboard>.</span></span> <span data-ttu-id="bac57-153">Aby wyeliminować narzuty wydajności wynikające z klonowania, pozostaw obiekt niezamrożony, jeśli zamierzasz go animować.</span><span class="sxs-lookup"><span data-stu-id="bac57-153">To eliminate the performance overhead caused by cloning, leave an object unfrozen if you intend to animate it.</span></span> <span data-ttu-id="bac57-154">Aby uzyskać więcej informacji na temat animacji przy użyciu scenorysów, zobacz [Omówienie scenorysów](../graphics-multimedia/storyboards-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bac57-154">For more information about animating with storyboards, see the [Storyboards Overview](../graphics-multimedia/storyboards-overview.md).</span></span>

### <a name="freezing-from-markup"></a><span data-ttu-id="bac57-155">Zamrażanie z adjustacji</span><span class="sxs-lookup"><span data-stu-id="bac57-155">Freezing from Markup</span></span>

<span data-ttu-id="bac57-156">Aby zablokować obiekt <xref:System.Windows.Freezable> zadeklarowany w znacznikach, należy użyć atrybutu `PresentationOptions:Freeze`.</span><span class="sxs-lookup"><span data-stu-id="bac57-156">To freeze a <xref:System.Windows.Freezable> object declared in markup, you use the `PresentationOptions:Freeze` attribute.</span></span> <span data-ttu-id="bac57-157">W poniższym przykładzie <xref:System.Windows.Media.SolidColorBrush> jest zadeklarowana jako zasób strony i zamrożona.</span><span class="sxs-lookup"><span data-stu-id="bac57-157">In the following example, a <xref:System.Windows.Media.SolidColorBrush> is declared as a page resource and frozen.</span></span> <span data-ttu-id="bac57-158">Jest on następnie używany do ustawiania tła przycisku.</span><span class="sxs-lookup"><span data-stu-id="bac57-158">It is then used to set the background of a button.</span></span>

[!code-xaml[FreezableSample#FreezeFromMarkupWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/FreezableSample/CS/FreezeFromMarkupExample.xaml#freezefrommarkupwholepage)]

<span data-ttu-id="bac57-159">Aby użyć atrybutu `Freeze`, należy zmapować do obszaru nazw opcji prezentacji: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span><span class="sxs-lookup"><span data-stu-id="bac57-159">To use the `Freeze` attribute, you must map to the presentation options namespace: `http://schemas.microsoft.com/winfx/2006/xaml/presentation/options`.</span></span> <span data-ttu-id="bac57-160">`PresentationOptions` jest zalecanym prefiksem do mapowania tej przestrzeni nazw:</span><span class="sxs-lookup"><span data-stu-id="bac57-160">`PresentationOptions` is the recommended prefix for mapping this namespace:</span></span>

```xaml
xmlns:PresentationOptions="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
```

<span data-ttu-id="bac57-161">Ponieważ nie wszyscy czytelnicy XAML rozpoznają ten atrybut, zaleca się użycie [atrybutu MC:](mc-ignorable-attribute.md) , który można zignorować, aby oznaczyć atrybut `Presentation:Freeze` jako ignorowany:</span><span class="sxs-lookup"><span data-stu-id="bac57-161">Because not all XAML readers recognize this attribute, it's recommended that you use the [mc:Ignorable Attribute](mc-ignorable-attribute.md) to mark the `Presentation:Freeze` attribute as ignorable:</span></span>

```xaml
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="PresentationOptions"
```

<span data-ttu-id="bac57-162">Aby uzyskać więcej informacji, zobacz stronę z [atrybutem MC: ignorowany](mc-ignorable-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="bac57-162">For more information, see the [mc:Ignorable Attribute](mc-ignorable-attribute.md) page.</span></span>

### <a name="unfreezing-a-freezable"></a><span data-ttu-id="bac57-163">"Odmrożenie" a Freezable</span><span class="sxs-lookup"><span data-stu-id="bac57-163">"Unfreezing" a Freezable</span></span>

<span data-ttu-id="bac57-164">Po zamrożoniu <xref:System.Windows.Freezable> nie może być modyfikowany ani niezamrożony; można jednak utworzyć niezablokowany klon przy użyciu metody <xref:System.Windows.Freezable.Clone%2A> lub <xref:System.Windows.Freezable.CloneCurrentValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="bac57-164">Once frozen, a <xref:System.Windows.Freezable> can never be modified or unfrozen; however, you can create an unfrozen clone using the <xref:System.Windows.Freezable.Clone%2A> or <xref:System.Windows.Freezable.CloneCurrentValue%2A> method.</span></span>

<span data-ttu-id="bac57-165">W poniższym przykładzie tło przycisku jest ustawione przy użyciu pędzla, a następnie Pędzel jest zablokowany.</span><span class="sxs-lookup"><span data-stu-id="bac57-165">In the following example, the button's background is set with a brush and that brush is then frozen.</span></span> <span data-ttu-id="bac57-166">Niezablokowana kopia pędzla przy użyciu metody <xref:System.Windows.Freezable.Clone%2A>.</span><span class="sxs-lookup"><span data-stu-id="bac57-166">An unfrozen copy is made of the brush using the <xref:System.Windows.Freezable.Clone%2A> method.</span></span> <span data-ttu-id="bac57-167">Klon jest modyfikowany i używany do zmiany tła przycisku z żółtego na czerwony.</span><span class="sxs-lookup"><span data-stu-id="bac57-167">The clone is modified and used to change the button's background from yellow to red.</span></span>

[!code-csharp[freezablesample_procedural#CloneExample](~/samples/snippets/csharp/VS_Snippets_Wpf/freezablesample_procedural/CSharp/freezablesample.cs#cloneexample)]
[!code-vb[freezablesample_procedural#CloneExample](~/samples/snippets/visualbasic/VS_Snippets_Wpf/freezablesample_procedural/visualbasic/freezablesample.vb#cloneexample)]

> [!NOTE]
> <span data-ttu-id="bac57-168">Niezależnie od używanej metody klonowania animacje nie są nigdy kopiowane do nowego <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="bac57-168">Regardless of which clone method you use, animations are never copied to the new <xref:System.Windows.Freezable>.</span></span>

<span data-ttu-id="bac57-169">Metody <xref:System.Windows.Freezable.Clone%2A> i <xref:System.Windows.Freezable.CloneCurrentValue%2A> dają głębokie kopie Freezable.</span><span class="sxs-lookup"><span data-stu-id="bac57-169">The <xref:System.Windows.Freezable.Clone%2A> and <xref:System.Windows.Freezable.CloneCurrentValue%2A> methods produce deep copies of the freezable.</span></span> <span data-ttu-id="bac57-170">Jeśli Freezable zawiera inne zamrożone Obiekty Freezable, są one również klonowane i modyfikowane.</span><span class="sxs-lookup"><span data-stu-id="bac57-170">If the freezable contains other frozen freezable objects, they are also cloned and made modifiable.</span></span> <span data-ttu-id="bac57-171">Na przykład w przypadku sklonowania zamrożonego <xref:System.Windows.Media.PathGeometry> w celu zmodyfikowania go elementy i segmenty, które zawiera, są również kopiowane i modyfikowane.</span><span class="sxs-lookup"><span data-stu-id="bac57-171">For example, if you clone a frozen <xref:System.Windows.Media.PathGeometry> to make it modifiable, the figures and segments it contains are also copied and made modifiable.</span></span>

<a name="createyourownfreezableclass"></a>

## <a name="creating-your-own-freezable-class"></a><span data-ttu-id="bac57-172">Tworzenie własnej klasy Freezable</span><span class="sxs-lookup"><span data-stu-id="bac57-172">Creating Your Own Freezable Class</span></span>

<span data-ttu-id="bac57-173">Klasa, która pochodzi od <xref:System.Windows.Freezable>, ma następujące funkcje.</span><span class="sxs-lookup"><span data-stu-id="bac57-173">A class that derives from <xref:System.Windows.Freezable> gains the following features.</span></span>

- <span data-ttu-id="bac57-174">Specjalne Stany: tylko do odczytu (zamrożony) i zapisywalny.</span><span class="sxs-lookup"><span data-stu-id="bac57-174">Special states: a read-only (frozen) and a writable state.</span></span>

- <span data-ttu-id="bac57-175">Bezpieczeństwo wątków: zamrożone <xref:System.Windows.Freezable> mogą być współużytkowane przez wątki.</span><span class="sxs-lookup"><span data-stu-id="bac57-175">Thread safety: a frozen <xref:System.Windows.Freezable> can be shared across threads.</span></span>

- <span data-ttu-id="bac57-176">Szczegółowe powiadomienie o zmianie: w przeciwieństwie do innych <xref:System.Windows.DependencyObject>s, Obiekty Freezable zapewniają powiadomienia o zmianach w przypadku zmiany wartości właściwości podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="bac57-176">Detailed change notification: Unlike other <xref:System.Windows.DependencyObject>s, Freezable objects provide change notifications when sub-property values change.</span></span>

- <span data-ttu-id="bac57-177">Łatwe Klonowanie: Klasa Freezable już wdrożyła kilka metod, które tworzą głębokie klony.</span><span class="sxs-lookup"><span data-stu-id="bac57-177">Easy cloning: the Freezable class has already implemented several methods that produce deep clones.</span></span>

<span data-ttu-id="bac57-178"><xref:System.Windows.Freezable> jest typem <xref:System.Windows.DependencyObject>i w związku z tym używa systemu właściwości zależności.</span><span class="sxs-lookup"><span data-stu-id="bac57-178">A <xref:System.Windows.Freezable> is a type of <xref:System.Windows.DependencyObject>, and therefore uses the dependency property system.</span></span> <span data-ttu-id="bac57-179">Właściwości klasy nie muszą być właściwościami zależności, ale użycie właściwości zależności spowoduje zmniejszenie ilości kodu, który trzeba napisać, ponieważ Klasa <xref:System.Windows.Freezable> została zaprojektowana z uwzględnieniem właściwości zależności.</span><span class="sxs-lookup"><span data-stu-id="bac57-179">Your class properties don't have to be dependency properties, but using dependency properties will reduce the amount of code you have to write, because the <xref:System.Windows.Freezable> class was designed with dependency properties in mind.</span></span> <span data-ttu-id="bac57-180">Aby uzyskać więcej informacji na temat systemu właściwości zależności, zobacz [Omówienie właściwości zależności](dependency-properties-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bac57-180">For more information about the dependency property system, see the [Dependency Properties Overview](dependency-properties-overview.md).</span></span>

<span data-ttu-id="bac57-181">Każda podklasa <xref:System.Windows.Freezable> musi zastąpić metodę <xref:System.Windows.Freezable.CreateInstanceCore%2A>.</span><span class="sxs-lookup"><span data-stu-id="bac57-181">Every <xref:System.Windows.Freezable> subclass must override the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method.</span></span> <span data-ttu-id="bac57-182">Jeśli Klasa używa właściwości zależności dla wszystkich danych, zostanie zakończona.</span><span class="sxs-lookup"><span data-stu-id="bac57-182">If your class uses dependency properties for all its data, you're finished.</span></span>

<span data-ttu-id="bac57-183">Jeśli Klasa zawiera elementy członkowskie danych niezależności, należy również zastąpić następujące metody:</span><span class="sxs-lookup"><span data-stu-id="bac57-183">If your class contains non-dependency property data members, you must also override the following methods:</span></span>

- <xref:System.Windows.Freezable.CloneCore%2A>

- <xref:System.Windows.Freezable.CloneCurrentValueCore%2A>

- <xref:System.Windows.Freezable.GetAsFrozenCore%2A>

- <xref:System.Windows.Freezable.GetCurrentValueAsFrozenCore%2A>

- <xref:System.Windows.Freezable.FreezeCore%2A>

<span data-ttu-id="bac57-184">Należy również przestrzegać następujących reguł dostępu i zapisu do elementów członkowskich danych, które nie są właściwościami zależności:</span><span class="sxs-lookup"><span data-stu-id="bac57-184">You must also observe the following rules for accessing and writing to data members that are not dependency properties:</span></span>

- <span data-ttu-id="bac57-185">Na początku dowolnego interfejsu API, który odczytuje elementy członkowskie danych niezależności, wywołaj metodę <xref:System.Windows.Freezable.ReadPreamble%2A>.</span><span class="sxs-lookup"><span data-stu-id="bac57-185">At the beginning of any API that reads non-dependency property data members, call the <xref:System.Windows.Freezable.ReadPreamble%2A> method.</span></span>

- <span data-ttu-id="bac57-186">Na początku dowolnego interfejsu API, który zapisuje elementy członkowskie danych właściwości niezależności, wywołaj metodę <xref:System.Windows.Freezable.WritePreamble%2A>.</span><span class="sxs-lookup"><span data-stu-id="bac57-186">At the beginning of any API that writes non-dependency property data members, call the <xref:System.Windows.Freezable.WritePreamble%2A> method.</span></span> <span data-ttu-id="bac57-187">(Po wywołaniu <xref:System.Windows.Freezable.WritePreamble%2A> w interfejsie API nie trzeba wykonywać dodatkowego wywołania do <xref:System.Windows.Freezable.ReadPreamble%2A>, jeśli odczytasz również elementy członkowskie danych niezależności.)</span><span class="sxs-lookup"><span data-stu-id="bac57-187">(Once you've called <xref:System.Windows.Freezable.WritePreamble%2A> in an API, you don't need to make an additional call to <xref:System.Windows.Freezable.ReadPreamble%2A> if you also read non-dependency property data members.)</span></span>

- <span data-ttu-id="bac57-188">Wywołaj metodę <xref:System.Windows.Freezable.WritePostscript%2A> przed wyjściem z metod, które zapisują elementy członkowskie danych właściwości niezależności.</span><span class="sxs-lookup"><span data-stu-id="bac57-188">Call the <xref:System.Windows.Freezable.WritePostscript%2A> method before exiting methods that write to non-dependency property data members.</span></span>

<span data-ttu-id="bac57-189">Jeśli Klasa zawiera elementy członkowskie danych niezależnych, które są <xref:System.Windows.DependencyObject> obiektów, należy również wywołać metodę <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> za każdym razem, gdy zmieniasz jedną z wartości, nawet jeśli ustawiasz element członkowski na `null`.</span><span class="sxs-lookup"><span data-stu-id="bac57-189">If your class contains non-dependency-property data members that are <xref:System.Windows.DependencyObject> objects, you must also call the <xref:System.Windows.Freezable.OnFreezablePropertyChanged%2A> method each time you change one of their values, even if you're setting the member to `null`.</span></span>

> [!NOTE]
> <span data-ttu-id="bac57-190">Bardzo ważne jest, aby rozpocząć każdą metodę <xref:System.Windows.Freezable> przesłonięcia wywołania do implementacji podstawowej.</span><span class="sxs-lookup"><span data-stu-id="bac57-190">It's very important that you begin each <xref:System.Windows.Freezable> method you override with a call to the base implementation.</span></span>

<span data-ttu-id="bac57-191">Przykład niestandardowej klasy <xref:System.Windows.Freezable> można znaleźć w [przykładowej animacji niestandardowej](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation).</span><span class="sxs-lookup"><span data-stu-id="bac57-191">For an example of a custom <xref:System.Windows.Freezable> class, see the [Custom Animation Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation).</span></span>

## <a name="see-also"></a><span data-ttu-id="bac57-192">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="bac57-192">See also</span></span>

- <xref:System.Windows.Freezable>
- [<span data-ttu-id="bac57-193">Przykład animacji niestandardowej</span><span class="sxs-lookup"><span data-stu-id="bac57-193">Custom Animation Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)
- [<span data-ttu-id="bac57-194">Przegląd właściwości zależności</span><span class="sxs-lookup"><span data-stu-id="bac57-194">Dependency Properties Overview</span></span>](dependency-properties-overview.md)
- [<span data-ttu-id="bac57-195">Niestandardowe właściwości zależności</span><span class="sxs-lookup"><span data-stu-id="bac57-195">Custom Dependency Properties</span></span>](custom-dependency-properties.md)
