---
title: Przegląd Przeciąganie i upuszczanie
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- drag-and-drop [WPF], implementing
- drag sources [WPF], drag-and-drop
- data transfer [WPF], drag-and-drop
- drag-and-drop [WPF], about
- drag-and-drop [WPF], events
- drop targets [WPF], drag-and-drop
ms.assetid: 1a5b27b0-0ac5-4cdf-86c0-86ac0271fa64
ms.openlocfilehash: dd42af77300a7a93bbcbfa4c8f1fc365fc3f5da1
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/12/2020
ms.locfileid: "79185983"
---
# <a name="drag-and-drop-overview"></a><span data-ttu-id="b5e6b-102">Przegląd Przeciąganie i upuszczanie</span><span class="sxs-lookup"><span data-stu-id="b5e6b-102">Drag and Drop Overview</span></span>
<span data-ttu-id="b5e6b-103">Ten temat zawiera omówienie obsługi przeciągania i upuszczania w [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] aplikacjach.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-103">This topic provides an overview of drag-and-drop support in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] applications.</span></span> <span data-ttu-id="b5e6b-104">Przeciąganie i upuszczanie często odnosi się do metody transferu danych, która polega na użyciu myszy (lub innego urządzenia wskazującego), aby [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)]zaznaczyć jeden lub więcej obiektów, przeciągając te obiekty nad żądanym celem upuszczania w urządzeniu , i upuszczając je.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-104">Drag-and-drop commonly refers to a method of data transfer that involves using a mouse (or some other pointing device) to select one or more objects, dragging these objects over some desired drop target in the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], and dropping them.</span></span>  

<a name="Drag_and_Drop_Support"></a>
## <a name="drag-and-drop-support-in-wpf"></a><span data-ttu-id="b5e6b-105">Obsługa przeciągania i upuszczania w WPF</span><span class="sxs-lookup"><span data-stu-id="b5e6b-105">Drag-and-Drop Support in WPF</span></span>  
 <span data-ttu-id="b5e6b-106">Operacje przeciągania i upuszczania zazwyczaj obejmują dwie strony: źródło przeciągania, z którego pochodzi przeciągany obiekt, oraz miejsce docelowe upuszczania, które odbiera upuszczony obiekt.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-106">Drag-and-drop operations typically involve two parties: a drag source from which the dragged object originates and a drop target which receives the dropped object.</span></span>  <span data-ttu-id="b5e6b-107">Miejsce docelowe źródła przeciągania i upuszczania może być elementami interfejsu użytkownika w tej samej aplikacji lub innej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-107">The drag source and drop target may be UI elements in the same application or a different application.</span></span>  
  
 <span data-ttu-id="b5e6b-108">Typ i liczba obiektów, którymi można manipulować za pomocą przeciągania i upuszczania, jest całkowicie dowolna.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-108">The type and number of objects that can be manipulated with drag-and-drop is completely arbitrary.</span></span> <span data-ttu-id="b5e6b-109">Na przykład pliki, foldery i zaznaczenia zawartości to niektóre z bardziej typowych obiektów manipulowanych za pomocą operacji przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-109">For example, files, folders, and selections of content are some of the more common objects manipulated through drag-and-drop operations.</span></span>  
  
 <span data-ttu-id="b5e6b-110">Określone akcje wykonywane podczas operacji przeciągania i upuszczania są specyficzne dla aplikacji i często określane przez kontekst.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-110">The particular actions performed during a drag-and-drop operation are application specific, and often determined by context.</span></span>  <span data-ttu-id="b5e6b-111">Na przykład przeciąganie zaznaczenia plików z jednego folderu do drugiego na tym samym urządzeniu magazynującym domyślnie powoduje przeniesienie plików, podczas gdy przeciąganie plików z udziału Powszechnej Konwencji nazewnictwa (UNC) do folderu lokalnego domyślnie kopiuje pliki.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-111">For example, dragging a selection of files from one folder to another on the same storage device moves the files by default, whereas dragging files from a Universal Naming Convention (UNC) share to a local folder copies the files by default.</span></span>  
  
 <span data-ttu-id="b5e6b-112">Oferowane przez [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] urządzenia typu "przeciągnij i upuść" zostały zaprojektowane tak, aby były bardzo elastyczne i konfigurowalne, aby obsługiwać szeroką gamę scenariuszy przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-112">The drag-and-drop facilities provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] are designed to be highly flexible and customizable to support a wide variety of drag-and-drop scenarios.</span></span>  <span data-ttu-id="b5e6b-113">Funkcję przeciągania i upuszczania można manipulować obiektami w ramach jednej aplikacji lub między różnymi aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-113">Drag-and-drop supports manipulating objects within a single application, or between different applications.</span></span> <span data-ttu-id="b5e6b-114">Przeciąganie i upuszczanie między aplikacjami i innymi aplikacjami [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] systemu Windows jest również w pełni obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-114">Dragging-and-dropping between [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications and other Windows applications is also fully supported.</span></span>  
  
 <span data-ttu-id="b5e6b-115">W [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]programie <xref:System.Windows.UIElement> <xref:System.Windows.ContentElement> , dowolnym lub może uczestniczyć w przeciąganiu i upuszczaniu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-115">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], any <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> can participate in drag-and-drop.</span></span> <span data-ttu-id="b5e6b-116">Zdarzenia i metody wymagane dla operacji przeciągania i <xref:System.Windows.DragDrop> upuszczania są zdefiniowane w klasie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-116">The events and methods required for drag-and-drop operations are defined in the <xref:System.Windows.DragDrop> class.</span></span> <span data-ttu-id="b5e6b-117">Klasy <xref:System.Windows.UIElement> <xref:System.Windows.ContentElement> i zawierają aliasy <xref:System.Windows.DragDrop> dla dołączonych zdarzeń, tak aby zdarzenia <xref:System.Windows.UIElement> pojawiały się na liście członków klasy, gdy lub <xref:System.Windows.ContentElement> jest dziedziczona jako element podstawowy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-117">The <xref:System.Windows.UIElement> and <xref:System.Windows.ContentElement> classes contain aliases for the <xref:System.Windows.DragDrop> attached events so that the events appear in the class members list when a <xref:System.Windows.UIElement> or <xref:System.Windows.ContentElement> is inherited as a base element.</span></span> <span data-ttu-id="b5e6b-118">Programy obsługi zdarzeń, które są dołączone do tych <xref:System.Windows.DragDrop> zdarzeń są dołączone do źródłowego dołączonego zdarzenia i odbierają to samo wystąpienie danych zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-118">Event handlers that are attached to these events are attached to the underlying <xref:System.Windows.DragDrop> attached event and receive the same event data instance.</span></span> <span data-ttu-id="b5e6b-119">Aby uzyskać więcej <xref:System.Windows.UIElement.Drop?displayProperty=nameWithType> informacji, zobacz zdarzenie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-119">For more information, see the <xref:System.Windows.UIElement.Drop?displayProperty=nameWithType> event.</span></span>  
  
> [!IMPORTANT]
> <span data-ttu-id="b5e6b-120">Ole przeciągania i upuszczania nie działa w strefie Internet.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-120">OLE drag-and-drop does not work while in the Internet zone.</span></span>  
  
<a name="Data_Transfer"></a>
## <a name="data-transfer"></a><span data-ttu-id="b5e6b-121">Transfer danych</span><span class="sxs-lookup"><span data-stu-id="b5e6b-121">Data Transfer</span></span>  
 <span data-ttu-id="b5e6b-122">Przeciąganie i upuszczanie jest częścią bardziej ogólnego obszaru transferu danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-122">Drag-and-drop is part of the more general area of data transfer.</span></span> <span data-ttu-id="b5e6b-123">Transfer danych obejmuje operacje przeciągania i upuszczania oraz kopiowania i wklejania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-123">Data transfer includes drag-and-drop and copy-and-paste operations.</span></span> <span data-ttu-id="b5e6b-124">Operacja przeciągania i upuszczania jest analogiczna do operacji kopiowania i wklejania lub wycinania i wklejania, która służy do przesyłania danych z jednego obiektu lub aplikacji do innego przy użyciu schowka systemowego.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-124">A drag-and-drop operation is analogous to a copy-and-paste or cut-and-paste operation that is used to transfer data from one object or application to another by using the system clipboard.</span></span> <span data-ttu-id="b5e6b-125">Oba rodzaje operacji wymagają:</span><span class="sxs-lookup"><span data-stu-id="b5e6b-125">Both types of operations require:</span></span>  
  
- <span data-ttu-id="b5e6b-126">Obiekt źródłowy, który dostarcza dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-126">A source object that provides the data.</span></span>  
  
- <span data-ttu-id="b5e6b-127">Sposób tymczasowego przechowywania przesłanych danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-127">A way to temporarily store the transferred data.</span></span>  
  
- <span data-ttu-id="b5e6b-128">Obiekt docelowy, który odbiera dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-128">A target object that receives the data.</span></span>  
  
 <span data-ttu-id="b5e6b-129">W operacji kopiowania i wklejania schowek systemowy jest używany do tymczasowego przechowywania przesłanych danych; w operacji przeciągania i <xref:System.Windows.DataObject> upuszczania a jest używany do przechowywania danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-129">In a copy-and-paste operation, the system clipboard is used to temporarily store the transferred data; in a drag-and-drop operation, a <xref:System.Windows.DataObject> is used to store the data.</span></span> <span data-ttu-id="b5e6b-130">Koncepcyjnie obiekt danych składa się z <xref:System.Object> jednej lub więcej par, która zawiera rzeczywiste dane i odpowiedni identyfikator formatu danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-130">Conceptually, a data object consists of one or more pairs of an <xref:System.Object> that contains the actual data, and a corresponding data format identifier.</span></span>  
  
 <span data-ttu-id="b5e6b-131">Źródło przeciągania inicjuje operację przeciągania <xref:System.Windows.DragDrop.DoDragDrop%2A?displayProperty=nameWithType> i upuszczania, wywołując metodę statyczną i przekazując do niej przesłane dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-131">The drag source initiates a drag-and-drop operation by calling the static <xref:System.Windows.DragDrop.DoDragDrop%2A?displayProperty=nameWithType> method and passing the transferred data to it.</span></span> <span data-ttu-id="b5e6b-132">Metoda <xref:System.Windows.DragDrop.DoDragDrop%2A> automatycznie zawija dane <xref:System.Windows.DataObject> w, jeśli to konieczne.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-132">The <xref:System.Windows.DragDrop.DoDragDrop%2A> method will automatically wrap the data in a <xref:System.Windows.DataObject> if necessary.</span></span> <span data-ttu-id="b5e6b-133">Aby uzyskać większą kontrolę nad formatem danych, <xref:System.Windows.DataObject> można zawinąć <xref:System.Windows.DragDrop.DoDragDrop%2A> dane w przed przekazaniem go do metody.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-133">For greater control over the data format, you can wrap the data in a <xref:System.Windows.DataObject> before passing it to the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="b5e6b-134">Cel upuszczania jest odpowiedzialny za <xref:System.Windows.DataObject>wyodrębnianie danych z pliku .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-134">The drop target is responsible for extracting the data from the <xref:System.Windows.DataObject>.</span></span> <span data-ttu-id="b5e6b-135">Aby uzyskać więcej informacji na temat pracy z obiektami danych, zobacz [Obiekty danych i danych](data-and-data-objects.md).</span><span class="sxs-lookup"><span data-stu-id="b5e6b-135">For more information about working with data objects, see [Data and Data Objects](data-and-data-objects.md).</span></span>  
  
 <span data-ttu-id="b5e6b-136">Źródłem i celem operacji przeciągania i upuszczania są elementy interfejsu użytkownika; jednak dane, które są faktycznie przesyłane zazwyczaj nie ma wizualnej reprezentacji.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-136">The source and target of a drag-and-drop operation are UI elements; however, the data that is actually being transferred typically does not have a visual representation.</span></span> <span data-ttu-id="b5e6b-137">Można napisać kod, aby zapewnić wizualną reprezentację przeciąganych danych, na przykład podczas przeciągania plików w Eksploratorze Windows.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-137">You can write code to provide a visual representation of the data that is dragged, such as occurs when dragging files in Windows Explorer.</span></span> <span data-ttu-id="b5e6b-138">Domyślnie opinie są dostarczane do użytkownika, zmieniając kursor, aby reprezentować wpływ, że operacja przeciągania i upuszczania będzie miała na danych, takich jak czy dane zostaną przeniesione lub skopiowane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-138">By default, feedback is provided to the user by changing the cursor to represent the effect that the drag-and-drop operation will have on the data, such as whether the data will be moved or copied.</span></span>  
  
### <a name="drag-and-drop-effects"></a><span data-ttu-id="b5e6b-139">Efekty przeciągania i upuszczania</span><span class="sxs-lookup"><span data-stu-id="b5e6b-139">Drag-and-Drop Effects</span></span>  
 <span data-ttu-id="b5e6b-140">Operacje przeciągania i upuszczania mogą mieć różny wpływ na przesyłane dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-140">Drag-and-drop operations can have different effects on the transferred data.</span></span> <span data-ttu-id="b5e6b-141">Na przykład można skopiować dane lub przenieść dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-141">For example, you can copy the data or you can move the data.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="b5e6b-142">definiuje wyliczenie, <xref:System.Windows.DragDropEffects> którego można użyć do określenia efektu operacji przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-142">defines a <xref:System.Windows.DragDropEffects> enumeration that you can use to specify the effect of a drag-and-drop operation.</span></span> <span data-ttu-id="b5e6b-143">W źródle przeciągania można określić efekty, które <xref:System.Windows.DragDrop.DoDragDrop%2A> źródło pozwoli w metodzie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-143">In the drag source, you can specify the effects that the source will allow in the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="b5e6b-144">W miejsce docelowe upuszczania można określić <xref:System.Windows.DragEventArgs.Effects%2A> efekt, <xref:System.Windows.DragEventArgs> który zamierza cel we właściwości klasy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-144">In the drop target, you can specify the effect that the target intends in the <xref:System.Windows.DragEventArgs.Effects%2A> property of the <xref:System.Windows.DragEventArgs> class.</span></span> <span data-ttu-id="b5e6b-145">Gdy miejsce docelowe upuszczania <xref:System.Windows.DragDrop.DragOver> określa jego zamierzony efekt w zdarzeniu, informacje te są przekazywane z powrotem do źródła przeciągania w zdarzeniu. <xref:System.Windows.DragDrop.GiveFeedback></span><span class="sxs-lookup"><span data-stu-id="b5e6b-145">When the drop target specifies its intended effect in the <xref:System.Windows.DragDrop.DragOver> event, that information is passed back to the drag source in the <xref:System.Windows.DragDrop.GiveFeedback> event.</span></span> <span data-ttu-id="b5e6b-146">Źródło przeciągania używa tych informacji, aby poinformować użytkownika, jaki wpływ docelowy upuszczania zamierza mieć na dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-146">The drag source uses this information to inform the user what effect the drop target intends to have on the data.</span></span> <span data-ttu-id="b5e6b-147">Gdy dane są usuwane, miejsce docelowe upuszczania określa jego rzeczywisty efekt w zdarzeniu. <xref:System.Windows.DragDrop.Drop></span><span class="sxs-lookup"><span data-stu-id="b5e6b-147">When the data is dropped, the drop target specifies its actual effect in the <xref:System.Windows.DragDrop.Drop> event.</span></span> <span data-ttu-id="b5e6b-148">Te informacje są przekazywane z powrotem do <xref:System.Windows.DragDrop.DoDragDrop%2A> źródła przeciągania jako wartość zwracaną metody.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-148">That information is passed back to the drag source as the return value of the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="b5e6b-149">Jeśli obiekt docelowy upuszczania zwraca efekt, którego `allowedEffects`nie ma na liście źródeł przeciągania, operacja przeciągania i upuszczania jest anulowana bez konieczności przesyłania danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-149">If the drop target returns an effect that is not in the drag sources list of `allowedEffects`, the drag-and-drop operation is cancelled without any data transfer occurring.</span></span>  
  
 <span data-ttu-id="b5e6b-150">Należy pamiętać, że [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]w <xref:System.Windows.DragDropEffects> programie Wartości są używane tylko do komunikacji między źródłem przeciągania a celem upuszczania w odniesieniu do efektów operacji przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-150">It is important to remember that in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], the <xref:System.Windows.DragDropEffects> values are only used to provide communication between the drag source and the drop target regarding the effects of the drag-and-drop operation.</span></span> <span data-ttu-id="b5e6b-151">Rzeczywisty efekt operacji przeciągania i upuszczania zależy od tego, czy chcesz napisać odpowiedni kod w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-151">The actual effect of the drag-and-drop operation depends on you to write the appropriate code in your application.</span></span>  
  
 <span data-ttu-id="b5e6b-152">Na przykład miejsce docelowe upuszczania może określić, że efektem upuszczania danych na nim jest przeniesienie danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-152">For example, the drop target might specify that the effect of dropping data on it is to move the data.</span></span> <span data-ttu-id="b5e6b-153">Jednak aby przenieść dane, musi być zarówno dodane do elementu docelowego i usunięte z elementu źródłowego.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-153">However, to move the data, it must be both added to the target element and removed from the source element.</span></span> <span data-ttu-id="b5e6b-154">Element źródłowy może wskazywać, że umożliwia przenoszenie danych, ale jeśli nie podasz kodu, aby usunąć dane z elementu źródłowego, wynikiem końcowym będzie, że dane są kopiowane, a nie przenoszone.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-154">The source element might indicate that it allows moving the data, but if you do not provide the code to remove the data from the source element, the end result will be that the data is copied, and not moved.</span></span>  
  
<a name="Drag_and_Drop_Events"></a>
## <a name="drag-and-drop-events"></a><span data-ttu-id="b5e6b-155">Zdarzenia przeciągania i upuszczania</span><span class="sxs-lookup"><span data-stu-id="b5e6b-155">Drag-and-Drop Events</span></span>  
 <span data-ttu-id="b5e6b-156">Operacje przeciągania i upuszczania obsługują model oparty na zdarzeniach.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-156">Drag-and-drop operations support an event driven model.</span></span>  <span data-ttu-id="b5e6b-157">Zarówno źródło przeciągania, jak i miejsce docelowe upuszczania używają standardowego zestawu zdarzeń do obsługi operacji przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-157">Both the drag source and the drop target use a standard set of events to handle drag-and-drop operations.</span></span>  <span data-ttu-id="b5e6b-158">W poniższych tabelach podsumowano standardowe zdarzenia przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-158">The following tables summarize the standard drag-and-drop events.</span></span> <span data-ttu-id="b5e6b-159">Są to dołączone zdarzenia <xref:System.Windows.DragDrop> w klasie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-159">These are attached events on the <xref:System.Windows.DragDrop> class.</span></span> <span data-ttu-id="b5e6b-160">Aby uzyskać więcej informacji na temat załączonych zdarzeń, zobacz [Omówienie załączonych zdarzeń](attached-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b5e6b-160">For more information about attached events, see [Attached Events Overview](attached-events-overview.md).</span></span>  
  
### <a name="drag-source-events"></a><span data-ttu-id="b5e6b-161">Przeciągnij zdarzenia źródłowe</span><span class="sxs-lookup"><span data-stu-id="b5e6b-161">Drag Source Events</span></span>  
  
|<span data-ttu-id="b5e6b-162">Wydarzenie</span><span class="sxs-lookup"><span data-stu-id="b5e6b-162">Event</span></span>|<span data-ttu-id="b5e6b-163">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="b5e6b-163">Summary</span></span>|  
|-----------|-------------|  
|<xref:System.Windows.DragDrop.GiveFeedback>|<span data-ttu-id="b5e6b-164">To zdarzenie występuje w sposób ciągły podczas operacji przeciągania i upuszczania i umożliwia źródło upuszczania, aby przekazać informacje zwrotne do użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-164">This event occurs continuously during a drag-and-drop operation, and enables the drop source to give feedback information to the user.</span></span> <span data-ttu-id="b5e6b-165">Ta informacja zwrotna jest często przez zmianę wyglądu wskaźnika myszy, aby wskazać efekty dozwolone przez miejsce docelowe upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-165">This feedback is commonly given by changing the appearance of the mouse pointer to indicate the effects allowed by the drop target.</span></span>  <span data-ttu-id="b5e6b-166">Jest to wydarzenie bulgotanie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-166">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.QueryContinueDrag>|<span data-ttu-id="b5e6b-167">To zdarzenie występuje, gdy występuje zmiana w stanach klawiatury lub myszy podczas operacji przeciągania i upuszczania i umożliwia źródło upuszczania anulowanie operacji przeciągania i upuszczania w zależności od stanów klawiszy/przycisków.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-167">This event occurs when there is a change in the keyboard or mouse button states during a drag-and-drop operation, and enables the drop source to cancel the drag-and-drop operation depending on the key/button states.</span></span> <span data-ttu-id="b5e6b-168">Jest to wydarzenie bulgotanie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-168">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewGiveFeedback>|<span data-ttu-id="b5e6b-169">Tunelowanie wersji <xref:System.Windows.DragDrop.GiveFeedback>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-169">Tunneling version of <xref:System.Windows.DragDrop.GiveFeedback>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewQueryContinueDrag>|<span data-ttu-id="b5e6b-170">Tunelowanie wersji <xref:System.Windows.DragDrop.QueryContinueDrag>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-170">Tunneling version of <xref:System.Windows.DragDrop.QueryContinueDrag>.</span></span>|  
  
### <a name="drop-target-events"></a><span data-ttu-id="b5e6b-171">Upuszczanie zdarzeń celu</span><span class="sxs-lookup"><span data-stu-id="b5e6b-171">Drop Target Events</span></span>  
  
|<span data-ttu-id="b5e6b-172">Wydarzenie</span><span class="sxs-lookup"><span data-stu-id="b5e6b-172">Event</span></span>|<span data-ttu-id="b5e6b-173">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="b5e6b-173">Summary</span></span>|  
|-----------|-------------|  
|<xref:System.Windows.DragDrop.DragEnter>|<span data-ttu-id="b5e6b-174">To zdarzenie występuje, gdy obiekt jest przeciągany do granicy celu upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-174">This event occurs when an object is dragged into the drop target's boundary.</span></span> <span data-ttu-id="b5e6b-175">Jest to wydarzenie bulgotanie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-175">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.DragLeave>|<span data-ttu-id="b5e6b-176">To zdarzenie występuje, gdy obiekt jest przeciągany poza granicę celu upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-176">This event occurs when an object is dragged out of the drop target's boundary.</span></span>  <span data-ttu-id="b5e6b-177">Jest to wydarzenie bulgotanie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-177">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.DragOver>|<span data-ttu-id="b5e6b-178">To zdarzenie występuje w sposób ciągły, gdy obiekt jest przeciągany (przenoszony) w granicach celu upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-178">This event occurs continuously while an object is dragged (moved) within the drop target's boundary.</span></span> <span data-ttu-id="b5e6b-179">Jest to wydarzenie bulgotanie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-179">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.Drop>|<span data-ttu-id="b5e6b-180">To zdarzenie występuje, gdy obiekt jest upuszczony na miejsce docelowe upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-180">This event occurs when an object is dropped on the drop target.</span></span>  <span data-ttu-id="b5e6b-181">Jest to wydarzenie bulgotanie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-181">This is a bubbling event.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDragEnter>|<span data-ttu-id="b5e6b-182">Tunelowanie wersji <xref:System.Windows.DragDrop.DragEnter>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-182">Tunneling version of <xref:System.Windows.DragDrop.DragEnter>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDragLeave>|<span data-ttu-id="b5e6b-183">Tunelowanie wersji <xref:System.Windows.DragDrop.DragLeave>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-183">Tunneling version of <xref:System.Windows.DragDrop.DragLeave>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDragOver>|<span data-ttu-id="b5e6b-184">Tunelowanie wersji <xref:System.Windows.DragDrop.DragOver>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-184">Tunneling version of <xref:System.Windows.DragDrop.DragOver>.</span></span>|  
|<xref:System.Windows.DragDrop.PreviewDrop>|<span data-ttu-id="b5e6b-185">Tunelowanie wersji <xref:System.Windows.DragDrop.Drop>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-185">Tunneling version of <xref:System.Windows.DragDrop.Drop>.</span></span>|  
  
 <span data-ttu-id="b5e6b-186">Aby obsłużyć zdarzenia przeciągania i upuszczania dla wystąpień obiektu, dodaj programy obsługi dla zdarzeń wymienionych w poprzednich tabelach.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-186">To handle drag-and-drop events for instances of an object, add handlers for the events listed in the preceding tables.</span></span> <span data-ttu-id="b5e6b-187">Aby obsłużyć zdarzenia przeciągania i upuszczania na poziomie\*klasy, należy zastąpić odpowiednie wirtualne metody On\*Event i On PreviewEvent.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-187">To handle drag-and-drop events at the class level, override the corresponding virtual On\*Event and On\*PreviewEvent methods.</span></span> <span data-ttu-id="b5e6b-188">Aby uzyskać więcej informacji, zobacz [Obsługa klas kierowanych zdarzeń według klas podstawowych sterowania](marking-routed-events-as-handled-and-class-handling.md#Class_Handling_of_Routed_Events).</span><span class="sxs-lookup"><span data-stu-id="b5e6b-188">For more information, see [Class Handling of Routed Events by Control Base Classes](marking-routed-events-as-handled-and-class-handling.md#Class_Handling_of_Routed_Events).</span></span>  
  
<a name="Implementing_Drag_And_Drop"></a>
## <a name="implementing-drag-and-drop"></a><span data-ttu-id="b5e6b-189">Implementowanie przeciągania i upuszczania</span><span class="sxs-lookup"><span data-stu-id="b5e6b-189">Implementing Drag-and-Drop</span></span>  
 <span data-ttu-id="b5e6b-190">Element interfejsu użytkownika może być źródłem przeciągania, celem upuszczania lub obu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-190">A UI element can be a drag source, a drop target, or both.</span></span> <span data-ttu-id="b5e6b-191">Aby zaimplementować podstawowe przeciąganie i upuszczanie, należy napisać kod, aby zainicjować operację przeciągania i upuszczania i przetwarzać porzucone dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-191">To implement basic drag-and-drop, you write code to initiate the drag-and-drop operation and to process the dropped data.</span></span> <span data-ttu-id="b5e6b-192">Można poprawić środowisko przeciągania i upuszczania, obsługując opcjonalne zdarzenia przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-192">You can enhance the drag-and-drop experience by handling optional drag-and-drop events.</span></span>  
  
 <span data-ttu-id="b5e6b-193">Aby zaimplementować podstawowe przeciąganie i upuszczanie, należy wykonać następujące zadania:</span><span class="sxs-lookup"><span data-stu-id="b5e6b-193">To implement basic drag-and-drop, you will complete the following tasks:</span></span>  
  
- <span data-ttu-id="b5e6b-194">Zidentyfikuj element, który będzie źródłem przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-194">Identify the element that will be a drag source.</span></span> <span data-ttu-id="b5e6b-195">Źródłem przeciągania <xref:System.Windows.UIElement> może <xref:System.Windows.ContentElement>być lub .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-195">A drag source can be a <xref:System.Windows.UIElement> or a <xref:System.Windows.ContentElement>.</span></span>  
  
- <span data-ttu-id="b5e6b-196">Utwórz program obsługi zdarzeń w źródle przeciągania, który zainicjuje operację przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-196">Create an event handler on the drag source that will initiate the drag-and-drop operation.</span></span> <span data-ttu-id="b5e6b-197">Zdarzenie jest zazwyczaj <xref:System.Windows.UIElement.MouseMove> zdarzenie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-197">The event is typically the <xref:System.Windows.UIElement.MouseMove> event.</span></span>  
  
- <span data-ttu-id="b5e6b-198">W programie obsługi zdarzeń źródła <xref:System.Windows.DragDrop.DoDragDrop%2A> przeciągania wywołaj metodę, aby zainicjować operację przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-198">In the drag source event handler, call the <xref:System.Windows.DragDrop.DoDragDrop%2A> method to initiate the drag-and-drop operation.</span></span> <span data-ttu-id="b5e6b-199">W <xref:System.Windows.DragDrop.DoDragDrop%2A> wywołaniu określ źródło przeciągania, dane, które mają zostać przesłane, oraz dozwolone efekty.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-199">In the <xref:System.Windows.DragDrop.DoDragDrop%2A> call, specify the drag source, the data to be transferred, and the allowed effects.</span></span>  
  
- <span data-ttu-id="b5e6b-200">Zidentyfikuj element, który będzie celem upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-200">Identify the element that will be a drop target.</span></span> <span data-ttu-id="b5e6b-201">Cel upuszczania <xref:System.Windows.UIElement> może <xref:System.Windows.ContentElement>być lub .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-201">A drop target can be <xref:System.Windows.UIElement> or a <xref:System.Windows.ContentElement>.</span></span>  
  
- <span data-ttu-id="b5e6b-202">Na docelowym upuszczaniu `true`ustaw właściwość na <xref:System.Windows.UIElement.AllowDrop%2A> .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-202">On the drop target, set the <xref:System.Windows.UIElement.AllowDrop%2A> property to `true`.</span></span>  
  
- <span data-ttu-id="b5e6b-203">W miejsce docelowe <xref:System.Windows.DragDrop.Drop> upuszczania utwórz program obsługi zdarzeń do przetwarzania porzuconych danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-203">In the drop target, create a <xref:System.Windows.DragDrop.Drop> event handler to process the dropped data.</span></span>  
  
- <span data-ttu-id="b5e6b-204">W <xref:System.Windows.DragDrop.Drop> programie obsługi zdarzeń wyodrębnić <xref:System.Windows.DragEventArgs> dane <xref:System.Windows.DataObject.GetDataPresent%2A> z <xref:System.Windows.DataObject.GetData%2A> przy użyciu i metody.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-204">In the <xref:System.Windows.DragDrop.Drop> event handler, extract the data from the <xref:System.Windows.DragEventArgs> by using the <xref:System.Windows.DataObject.GetDataPresent%2A> and <xref:System.Windows.DataObject.GetData%2A> methods.</span></span>  
  
- <span data-ttu-id="b5e6b-205">W <xref:System.Windows.DragDrop.Drop> programie obsługi zdarzeń użyj danych, aby wykonać żądaną operację przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-205">In the <xref:System.Windows.DragDrop.Drop> event handler, use the data to perform the desired drag-and-drop operation.</span></span>  
  
 <span data-ttu-id="b5e6b-206">Implementację przeciągania i upuszczania można <xref:System.Windows.DataObject> poprawić, tworząc niestandardowe i obsługując opcjonalne zdarzenia docelowe źródła przeciągania i upuszczania, jak pokazano w następujących zadaniach:</span><span class="sxs-lookup"><span data-stu-id="b5e6b-206">You can enhance your drag-and-drop implementation by creating a custom <xref:System.Windows.DataObject> and by handling optional drag source and drop target events, as shown in the following tasks:</span></span>  
  
- <span data-ttu-id="b5e6b-207">Aby przenieść dane niestandardowe lub <xref:System.Windows.DataObject> wiele elementów danych, utwórz do przekazania do <xref:System.Windows.DragDrop.DoDragDrop%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-207">To transfer custom data or multiple data items, create a <xref:System.Windows.DataObject> to pass to the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span>  
  
- <span data-ttu-id="b5e6b-208">Aby wykonać dodatkowe akcje podczas <xref:System.Windows.DragDrop.DragEnter>przeciągania, obsłużyć <xref:System.Windows.DragDrop.DragOver>, i <xref:System.Windows.DragDrop.DragLeave> zdarzenia na celu upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-208">To perform additional actions during a drag, handle the <xref:System.Windows.DragDrop.DragEnter>, <xref:System.Windows.DragDrop.DragOver>, and <xref:System.Windows.DragDrop.DragLeave> events on the drop target.</span></span>  
  
- <span data-ttu-id="b5e6b-209">Aby zmienić wygląd wskaźnika myszy, obsłuż <xref:System.Windows.DragDrop.GiveFeedback> zdarzenie w źródle przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-209">To change the appearance of the mouse pointer, handle the <xref:System.Windows.DragDrop.GiveFeedback> event on the drag source.</span></span>  
  
- <span data-ttu-id="b5e6b-210">Aby zmienić sposób anulowania operacji przeciągania <xref:System.Windows.DragDrop.QueryContinueDrag> i upuszczania, obsłuż zdarzenie w źródle przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-210">To change how the drag-and-drop operation is canceled, handle the <xref:System.Windows.DragDrop.QueryContinueDrag> event on the drag source.</span></span>  
  
<a name="Drag_And_Drop_Example"></a>
## <a name="drag-and-drop-example"></a><span data-ttu-id="b5e6b-211">Przykład przeciągania i upuszczania</span><span class="sxs-lookup"><span data-stu-id="b5e6b-211">Drag-and-Drop Example</span></span>  
 <span data-ttu-id="b5e6b-212">W tej sekcji opisano sposób implementacji <xref:System.Windows.Shapes.Ellipse> przeciągania i upuszczania dla elementu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-212">This section describes how to implement drag-and-drop for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="b5e6b-213">Jest <xref:System.Windows.Shapes.Ellipse> zarówno źródłem przeciągania, jak i celem upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-213">The <xref:System.Windows.Shapes.Ellipse> is both a drag source and a drop target.</span></span> <span data-ttu-id="b5e6b-214">Przekazane dane są reprezentacją ciągu właściwości elipsy. <xref:System.Windows.Shapes.Shape.Fill%2A></span><span class="sxs-lookup"><span data-stu-id="b5e6b-214">The transferred data is the string representation of the ellipse’s <xref:System.Windows.Shapes.Shape.Fill%2A> property.</span></span> <span data-ttu-id="b5e6b-215">Poniższy kod XAML pokazuje <xref:System.Windows.Shapes.Ellipse> element i zdarzenia związane z przeciągania i upuszczania, które obsługuje.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-215">The following XAML shows the <xref:System.Windows.Shapes.Ellipse> element and the drag-and-drop related events that it handles.</span></span> <span data-ttu-id="b5e6b-216">Aby uzyskać pełne kroki dotyczące implementowania przeciągania i upuszczania, zobacz [Przewodnik: Włączanie przeciągania i upuszczania na formancie użytkownika](walkthrough-enabling-drag-and-drop-on-a-user-control.md).</span><span class="sxs-lookup"><span data-stu-id="b5e6b-216">For complete steps on how to implement drag-and-drop, see [Walkthrough: Enabling Drag and Drop on a User Control](walkthrough-enabling-drag-and-drop-on-a-user-control.md).</span></span>  
  
 [!code-xaml[DragDropSnippets#EllipseXaml](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml#ellipsexaml)]  
  
### <a name="enabling-an-element-to-be-a-drag-source"></a><span data-ttu-id="b5e6b-217">Włączanie, że element jest źródłem przeciągania</span><span class="sxs-lookup"><span data-stu-id="b5e6b-217">Enabling an Element to be a Drag Source</span></span>  
 <span data-ttu-id="b5e6b-218">Obiekt, który jest źródłem przeciągania jest odpowiedzialny za:</span><span class="sxs-lookup"><span data-stu-id="b5e6b-218">An object that is a drag source is responsible for:</span></span>  
  
- <span data-ttu-id="b5e6b-219">Identyfikowanie, kiedy następuje przeciąganie.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-219">Identifying when a drag occurs.</span></span>  
  
- <span data-ttu-id="b5e6b-220">Inicjowanie operacji przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-220">Initiating the drag-and-drop operation.</span></span>  
  
- <span data-ttu-id="b5e6b-221">Identyfikacja danych, które mają zostać przesłane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-221">Identifying the data to be transferred.</span></span>  
  
- <span data-ttu-id="b5e6b-222">Określanie efektów, jakie operacja przeciągania i upuszczania może mieć na przesyłanych danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-222">Specifying the effects that the drag-and-drop operation is allowed to have on the transferred data.</span></span>  
  
 <span data-ttu-id="b5e6b-223">Źródło przeciągania może również przekazywać użytkownikowi informacje zwrotne dotyczące dozwolonych akcji (przenoszenie, kopiowanie, brak) i może anulować operację przeciągania i upuszczania na podstawie dodatkowych danych wejściowych użytkownika, takich jak naciśnięcie klawisza ESC podczas przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-223">The drag source may also give feedback to the user regarding the allowed actions (move, copy, none), and can cancel the drag-and-drop operation based on additional user input, such as pressing the ESC key during the drag.</span></span>  
  
 <span data-ttu-id="b5e6b-224">Jest odpowiedzialny za aplikację, aby określić, kiedy nastąpi przeciąganie, a następnie <xref:System.Windows.DragDrop.DoDragDrop%2A> zainicjować operację przeciągania i upuszczania przez wywołanie metody.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-224">It is the responsibility of your application to determine when a drag occurs, and then initiate the drag-and-drop operation by calling the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="b5e6b-225">Zazwyczaj jest to, <xref:System.Windows.UIElement.MouseMove> gdy zdarzenie występuje nad elementem, który ma być przeciągany podczas naciskania przycisku myszy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-225">Typically, this is when a <xref:System.Windows.UIElement.MouseMove> event occurs over the element to be dragged while a mouse button is pressed.</span></span> <span data-ttu-id="b5e6b-226">W poniższym przykładzie pokazano, jak zainicjować operację <xref:System.Windows.UIElement.MouseMove> przeciągania <xref:System.Windows.Shapes.Ellipse> i upuszczania z obsługi zdarzeń elementu, aby uczynić go źródłem przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-226">The following example shows how to initiate a drag-and-drop operation from the <xref:System.Windows.UIElement.MouseMove> event handler of an <xref:System.Windows.Shapes.Ellipse> element to make it a drag source.</span></span> <span data-ttu-id="b5e6b-227">Przekazane dane są reprezentacją ciągu właściwości elipsy. <xref:System.Windows.Shapes.Shape.Fill%2A></span><span class="sxs-lookup"><span data-stu-id="b5e6b-227">The transferred data is the string representation of the ellipse’s <xref:System.Windows.Shapes.Shape.Fill%2A> property.</span></span>  
  
 [!code-csharp[DragDropSnippets#DoDragDrop](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dodragdrop)]
 [!code-vb[DragDropSnippets#DoDragDrop](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dodragdrop)]  
  
 <span data-ttu-id="b5e6b-228">Wewnątrz programu <xref:System.Windows.UIElement.MouseMove> obsługi zdarzeń <xref:System.Windows.DragDrop.DoDragDrop%2A> wywołać metodę, aby zainicjować operację przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-228">Inside of the <xref:System.Windows.UIElement.MouseMove> event handler, call the <xref:System.Windows.DragDrop.DoDragDrop%2A> method to initiate the drag-and-drop operation.</span></span> <span data-ttu-id="b5e6b-229">Metoda <xref:System.Windows.DragDrop.DoDragDrop%2A> przyjmuje trzy parametry:</span><span class="sxs-lookup"><span data-stu-id="b5e6b-229">The <xref:System.Windows.DragDrop.DoDragDrop%2A> method takes three parameters:</span></span>  
  
- <span data-ttu-id="b5e6b-230">`dragSource`– odwołanie do obiektu zależności, który jest źródłem przesyłanych danych; jest to zazwyczaj źródło <xref:System.Windows.UIElement.MouseMove> zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-230">`dragSource` – A reference to the dependency object that is the source of the transferred data; this is typically the source of the <xref:System.Windows.UIElement.MouseMove> event.</span></span>  
  
- <span data-ttu-id="b5e6b-231">`data`- Obiekt, który zawiera przesłane dane, zawinięte w <xref:System.Windows.DataObject>plik .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-231">`data` - An object that contains the transferred data, wrapped in a <xref:System.Windows.DataObject>.</span></span>  
  
- <span data-ttu-id="b5e6b-232">`allowedEffects`- Jedna <xref:System.Windows.DragDropEffects> z wartości wyliczenia, która określa dozwolone efekty operacji przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-232">`allowedEffects` - One of the <xref:System.Windows.DragDropEffects> enumeration values that specifies the permitted effects of the drag-and-drop operation.</span></span>  
  
 <span data-ttu-id="b5e6b-233">Dowolny obiekt serializowalny `data` może być przekazywany w parametrze.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-233">Any serializable object can be passed in the `data` parameter.</span></span> <span data-ttu-id="b5e6b-234">Jeśli dane nie są jeszcze <xref:System.Windows.DataObject>zawinięte w program , <xref:System.Windows.DataObject>zostaną automatycznie zawinięte w nowy plik .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-234">If the data is not already wrapped in a <xref:System.Windows.DataObject>, it will automatically be wrapped in a new <xref:System.Windows.DataObject>.</span></span> <span data-ttu-id="b5e6b-235">Aby przekazać wiele elementów danych, należy utworzyć <xref:System.Windows.DataObject> samodzielnie <xref:System.Windows.DragDrop.DoDragDrop%2A> i przekazać go do metody.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-235">To pass multiple data items, you must create the <xref:System.Windows.DataObject> yourself, and pass it to the <xref:System.Windows.DragDrop.DoDragDrop%2A> method.</span></span> <span data-ttu-id="b5e6b-236">Aby uzyskać więcej informacji, zobacz [Obiekty danych i danych](data-and-data-objects.md).</span><span class="sxs-lookup"><span data-stu-id="b5e6b-236">For more information, see [Data and Data Objects](data-and-data-objects.md).</span></span>  
  
 <span data-ttu-id="b5e6b-237">Parametr `allowedEffects` jest używany do określenia, co źródło przeciągania pozwoli miejsce docelowe upuszczania zrobić z przesyłanych danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-237">The `allowedEffects` parameter is used to specify what the drag source will allow the drop target to do with the transferred data.</span></span> <span data-ttu-id="b5e6b-238">Wspólne wartości źródła przeciągania <xref:System.Windows.DragDropEffects.Move>to <xref:System.Windows.DragDropEffects.All> <xref:System.Windows.DragDropEffects.Copy>, i .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-238">The common values for a drag source are <xref:System.Windows.DragDropEffects.Copy>, <xref:System.Windows.DragDropEffects.Move>, and <xref:System.Windows.DragDropEffects.All>.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="b5e6b-239">Miejsce docelowe upuszczania jest również w stanie określić, jakie efekty zamierza w odpowiedzi na porzucone dane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-239">The drop target is also able to specify what effects it intends in response to the dropped data.</span></span> <span data-ttu-id="b5e6b-240">Jeśli na przykład obiekt docelowy upuszczania nie rozpoznaje typu danych, który ma <xref:System.Windows.DragDropEffects.None>zostać upuszczony, może odrzucić dane, ustawiając dozwolone efekty na .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-240">For example, if the drop target does not recognize the data type to be dropped, it can refuse the data by setting its allowed effects to <xref:System.Windows.DragDropEffects.None>.</span></span> <span data-ttu-id="b5e6b-241">Zazwyczaj robi to w <xref:System.Windows.DragDrop.DragOver> jego obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-241">It typically does this in its <xref:System.Windows.DragDrop.DragOver> event handler.</span></span>  
  
 <span data-ttu-id="b5e6b-242">Źródło przeciągania może <xref:System.Windows.DragDrop.GiveFeedback> opcjonalnie obsługiwać zdarzenia i <xref:System.Windows.DragDrop.QueryContinueDrag> zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-242">A drag source can optionally handle the <xref:System.Windows.DragDrop.GiveFeedback> and <xref:System.Windows.DragDrop.QueryContinueDrag> events.</span></span> <span data-ttu-id="b5e6b-243">Te zdarzenia mają domyślne programy obsługi, które są używane, chyba że oznaczysz zdarzenia jako obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-243">These events have default handlers that are used unless you mark the events as handled.</span></span> <span data-ttu-id="b5e6b-244">Zazwyczaj ignorujesz te zdarzenia, chyba że masz określoną potrzebę zmiany ich domyślnego zachowania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-244">You will typically ignore these events unless you have a specific need to change their default behavior.</span></span>  
  
 <span data-ttu-id="b5e6b-245">Zdarzenie <xref:System.Windows.DragDrop.GiveFeedback> jest wywoływane w sposób ciągły podczas przeciągania źródła przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-245">The <xref:System.Windows.DragDrop.GiveFeedback> event is raised continuously while the drag source is being dragged.</span></span> <span data-ttu-id="b5e6b-246">Domyślny program obsługi dla tego zdarzenia sprawdza, czy źródło przeciągania jest zaowidencjonować miejsce docelowe upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-246">The default handler for this event checks whether the drag source is over a valid drop target.</span></span> <span data-ttu-id="b5e6b-247">Jeśli tak jest, sprawdza dozwolone efekty docelowego upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-247">If it is, it checks the allowed effects of the drop target.</span></span> <span data-ttu-id="b5e6b-248">Następnie przekazuje informacje zwrotne do użytkownika końcowego dotyczące dozwolonych efektów upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-248">It then gives feedback to the end user regarding the allowed drop effects.</span></span> <span data-ttu-id="b5e6b-249">Zazwyczaj odbywa się to przez zmianę kursora myszy na kursor bez upuszczania, kopiowania lub przenoszenia.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-249">This is typically done by changing the mouse cursor to a no-drop, copy, or move cursor.</span></span> <span data-ttu-id="b5e6b-250">To zdarzenie należy obsługiwać tylko wtedy, gdy trzeba użyć kursorów niestandardowych, aby przekazać opinię do użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-250">You should only handle this event if you need to use custom cursors to provide feedback to the user.</span></span> <span data-ttu-id="b5e6b-251">Jeśli obsługujesz to zdarzenie, należy oznaczyć go jako obsługiwane, tak aby domyślny program obsługi nie zastępuje obsługi.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-251">If you handle this event, be sure to mark it as handled so that the default handler does not override your handler.</span></span>  
  
 <span data-ttu-id="b5e6b-252">Zdarzenie <xref:System.Windows.DragDrop.QueryContinueDrag> jest wywoływane w sposób ciągły podczas przeciągania źródła przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-252">The <xref:System.Windows.DragDrop.QueryContinueDrag> event is raised continuously while the drag source is being dragged.</span></span> <span data-ttu-id="b5e6b-253">Można obsłużyć to zdarzenie, aby określić, jaka akcja kończy operację przeciągania i upuszczania na podstawie stanu klawiszy ESC, SHIFT, CTRL i ALT, a także stanu przycisków myszy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-253">You can handle this event to determine what action ends the drag-and-drop operation based on the state of the ESC, SHIFT, CTRL, and ALT keys, as well as the state of the mouse buttons.</span></span> <span data-ttu-id="b5e6b-254">Domyślny program obsługi dla tego zdarzenia anuluje operację przeciągania i upuszczania, jeśli zostanie naciśnięty klawisz ESC, i upuszcza dane, jeśli zostanie zwolniony przycisk myszy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-254">The default handler for this event cancels the drag-and-drop operation if the ESC key is pressed, and drops the data if the mouse button is released.</span></span>  
  
> [!CAUTION]
> <span data-ttu-id="b5e6b-255">Zdarzenia te są wywoływane w sposób ciągły podczas operacji przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-255">These events are raised continuously during the drag-and-drop operation.</span></span> <span data-ttu-id="b5e6b-256">W związku z tym należy unikać zadań intensywnie korzystających z zasobów w programach obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-256">Therefore, you should avoid resource-intensive tasks in the event handlers.</span></span>  <span data-ttu-id="b5e6b-257">Na przykład użyj buforowanego kursora zamiast tworzenia nowego kursora za <xref:System.Windows.DragDrop.GiveFeedback> każdym razem, gdy zdarzenie jest wywoływane.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-257">For example, use a cached cursor instead of creating a new cursor each time the <xref:System.Windows.DragDrop.GiveFeedback> event is raised.</span></span>  
  
### <a name="enabling-an-element-to-be-a-drop-target"></a><span data-ttu-id="b5e6b-258">Włączanie elementu jako celu upuszczania</span><span class="sxs-lookup"><span data-stu-id="b5e6b-258">Enabling an Element to be a Drop Target</span></span>  
 <span data-ttu-id="b5e6b-259">Obiekt, który jest celem upuszczania jest odpowiedzialny za:</span><span class="sxs-lookup"><span data-stu-id="b5e6b-259">An object that is a drop target is responsible for:</span></span>  
  
- <span data-ttu-id="b5e6b-260">Określanie, że jest to prawidłowy obiekt docelowy upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-260">Specifying that it is a valid drop target.</span></span>  
  
- <span data-ttu-id="b5e6b-261">Odpowiadanie na źródło przeciągania, gdy przeciąga się nad obiektem docelowym.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-261">Responding to the drag source when it drags over the target.</span></span>  
  
- <span data-ttu-id="b5e6b-262">Sprawdzanie, czy przesłane dane są w formacie, który może odbierać.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-262">Checking that the transferred data is in a format that it can receive.</span></span>  
  
- <span data-ttu-id="b5e6b-263">Przetwarzanie porzuconych danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-263">Processing the dropped data.</span></span>  
  
 <span data-ttu-id="b5e6b-264">Aby określić, że element jest obiektem docelowym upuszczania, należy ustawić jego <xref:System.Windows.UIElement.AllowDrop%2A> właściwość na `true`.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-264">To specify that an element is a drop target, you set its <xref:System.Windows.UIElement.AllowDrop%2A> property to `true`.</span></span> <span data-ttu-id="b5e6b-265">Zdarzenia docelowe upuszczania zostaną następnie podniesione na elemencie, dzięki czemu można je obsługiwać.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-265">The drop target events will then be raised on the element so that you can handle them.</span></span> <span data-ttu-id="b5e6b-266">Podczas operacji przeciągania i upuszczania na docelowym upuszczaniu występuje następująca sekwencja zdarzeń:</span><span class="sxs-lookup"><span data-stu-id="b5e6b-266">During a drag-and-drop operation, the following sequence of events occurs on the drop target:</span></span>  
  
1. <xref:System.Windows.DragDrop.DragEnter>  
  
2. <xref:System.Windows.DragDrop.DragOver>  
  
3. <span data-ttu-id="b5e6b-267"><xref:System.Windows.DragDrop.DragLeave> lub <xref:System.Windows.DragDrop.Drop></span><span class="sxs-lookup"><span data-stu-id="b5e6b-267"><xref:System.Windows.DragDrop.DragLeave> or <xref:System.Windows.DragDrop.Drop></span></span>  
  
 <span data-ttu-id="b5e6b-268">Zdarzenie <xref:System.Windows.DragDrop.DragEnter> występuje, gdy dane są przeciągane do granicy docelowego upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-268">The <xref:System.Windows.DragDrop.DragEnter> event occurs when the data is dragged into the drop target's boundary.</span></span> <span data-ttu-id="b5e6b-269">Zazwyczaj obsługuje to zdarzenie, aby zapewnić podgląd efektów operacji przeciągania i upuszczania, jeśli jest to właściwe dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-269">You typically handle this event to provide a preview of the effects of the drag-and-drop operation, if appropriate for your application.</span></span> <span data-ttu-id="b5e6b-270">Nie należy <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> ustawiać <xref:System.Windows.DragDrop.DragEnter> właściwość w przypadku, ponieważ zostanie <xref:System.Windows.DragDrop.DragOver> ona zastąpiona w zdarzeniu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-270">Do not set the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property in the <xref:System.Windows.DragDrop.DragEnter> event, as it will be overwritten in the <xref:System.Windows.DragDrop.DragOver> event.</span></span>  
  
 <span data-ttu-id="b5e6b-271">W poniższym <xref:System.Windows.DragDrop.DragEnter> przykładzie pokazano <xref:System.Windows.Shapes.Ellipse> program obsługi zdarzeń dla elementu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-271">The following example shows the <xref:System.Windows.DragDrop.DragEnter> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="b5e6b-272">Ten kod wyświetla podgląd efektów operacji przeciągania i <xref:System.Windows.Shapes.Shape.Fill%2A> upuszczania przez zapisanie bieżącego pędzla.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-272">This code previews the effects of the drag-and-drop operation by saving the current <xref:System.Windows.Shapes.Shape.Fill%2A> brush.</span></span> <span data-ttu-id="b5e6b-273">Następnie używa metody, <xref:System.Windows.DataObject.GetDataPresent%2A> aby sprawdzić, <xref:System.Windows.DataObject> czy przeciągane przez elipsę zawiera dane ciągu, które można przekonwertować na <xref:System.Windows.Media.Brush>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-273">It then uses the <xref:System.Windows.DataObject.GetDataPresent%2A> method to check whether the <xref:System.Windows.DataObject> being dragged over the ellipse contains string data that can be converted to a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="b5e6b-274">Jeśli tak, dane są wyodrębniane przy użyciu <xref:System.Windows.DataObject.GetData%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-274">If so, the data is extracted using the <xref:System.Windows.DataObject.GetData%2A> method.</span></span> <span data-ttu-id="b5e6b-275">Następnie jest konwertowany na <xref:System.Windows.Media.Brush> i stosowany do elipsy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-275">It is then converted to a <xref:System.Windows.Media.Brush> and applied to the ellipse.</span></span> <span data-ttu-id="b5e6b-276">Zmiana jest przywracana <xref:System.Windows.DragDrop.DragLeave> w programie obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-276">The change is reverted in the <xref:System.Windows.DragDrop.DragLeave> event handler.</span></span> <span data-ttu-id="b5e6b-277">Jeśli danych nie można przekonwertować na <xref:System.Windows.Media.Brush>, nie jest wykonywana żadna akcja.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-277">If the data cannot be converted to a <xref:System.Windows.Media.Brush>, no action is performed.</span></span>  
  
 [!code-csharp[DragDropSnippets#DragEnter](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dragenter)]
 [!code-vb[DragDropSnippets#DragEnter](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dragenter)]  
  
 <span data-ttu-id="b5e6b-278">Zdarzenie <xref:System.Windows.DragDrop.DragOver> występuje w sposób ciągły, gdy dane są przeciągane nad miejsce docelowe upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-278">The <xref:System.Windows.DragDrop.DragOver> event occurs continuously while the data is dragged over the drop target.</span></span> <span data-ttu-id="b5e6b-279">To zdarzenie jest sparowane ze zdarzeniem <xref:System.Windows.DragDrop.GiveFeedback> w źródle przeciągania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-279">This event is paired with the <xref:System.Windows.DragDrop.GiveFeedback> event on the drag source.</span></span> <span data-ttu-id="b5e6b-280">W <xref:System.Windows.DragDrop.DragOver> programie obsługi zdarzeń zazwyczaj <xref:System.Windows.DataObject.GetDataPresent%2A> używasz i <xref:System.Windows.DataObject.GetData%2A> metody, aby sprawdzić, czy przesyłane dane są w formacie, który można przetworzyć miejsce docelowe upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-280">In the <xref:System.Windows.DragDrop.DragOver> event handler, you typically use the <xref:System.Windows.DataObject.GetDataPresent%2A> and <xref:System.Windows.DataObject.GetData%2A> methods to check whether the transferred data is in a format that the drop target can process.</span></span> <span data-ttu-id="b5e6b-281">Można również sprawdzić, czy wszystkie klawisze modyfikatora są naciśnięte, które zazwyczaj wskazują, czy użytkownik zamierza przenieść lub skopiować akcję.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-281">You can also check whether any modifier keys are pressed, which will typically indicate whether the user intends a move or copy action.</span></span> <span data-ttu-id="b5e6b-282">Po wykonaniu tych kontroli, <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> należy ustawić właściwość, aby powiadomić źródło przeciągania, jaki efekt upuszczanie danych będzie miało.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-282">After these checks are performed, you set the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property to notify the drag source what effect dropping the data will have.</span></span> <span data-ttu-id="b5e6b-283">Źródło przeciągania odbiera <xref:System.Windows.DragDrop.GiveFeedback> te informacje w args zdarzenia i można ustawić odpowiedni kursor, aby przekazać opinię do użytkownika.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-283">The drag source receives this information in the <xref:System.Windows.DragDrop.GiveFeedback> event args, and can set an appropriate cursor to give feedback to the user.</span></span>  
  
 <span data-ttu-id="b5e6b-284">W poniższym <xref:System.Windows.DragDrop.DragOver> przykładzie pokazano <xref:System.Windows.Shapes.Ellipse> program obsługi zdarzeń dla elementu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-284">The following example shows the <xref:System.Windows.DragDrop.DragOver> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="b5e6b-285">Ten kod sprawdza, <xref:System.Windows.DataObject> czy przeciągane przez elipsę zawiera dane ciągu, <xref:System.Windows.Media.Brush>które można przekonwertować na .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-285">This code checks to see if the <xref:System.Windows.DataObject> being dragged over the ellipse contains string data that can be converted to a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="b5e6b-286">Jeśli tak, ustawia <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> właściwość na <xref:System.Windows.DragDropEffects.Copy>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-286">If so, it sets the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property to <xref:System.Windows.DragDropEffects.Copy>.</span></span> <span data-ttu-id="b5e6b-287">Oznacza to dla źródła przeciągania, że dane mogą być kopiowane do elipsy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-287">This indicates to the drag source that the data can be copied to the ellipse.</span></span> <span data-ttu-id="b5e6b-288">Jeśli danych nie można przekonwertować na <xref:System.Windows.Media.Brush>, właściwość jest ustawiona <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> na <xref:System.Windows.DragDropEffects.None>.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-288">If the data cannot be converted to a <xref:System.Windows.Media.Brush>, the <xref:System.Windows.DragEventArgs.Effects%2A?displayProperty=nameWithType> property is set to <xref:System.Windows.DragDropEffects.None>.</span></span> <span data-ttu-id="b5e6b-289">Oznacza to źródło przeciągania, że elipsa nie jest prawidłowym celem upuszczania danych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-289">This indicates to the drag source that the ellipse is not a valid drop target for the data.</span></span>  
  
 [!code-csharp[DragDropSnippets#DragOver](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dragover)]
 [!code-vb[DragDropSnippets#DragOver](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dragover)]  
  
 <span data-ttu-id="b5e6b-290">Zdarzenie <xref:System.Windows.DragDrop.DragLeave> występuje, gdy dane są przeciągane poza granicę obiektu docelowego bez porzucanych.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-290">The <xref:System.Windows.DragDrop.DragLeave> event occurs when the data is dragged out of the target's boundary without being dropped.</span></span> <span data-ttu-id="b5e6b-291">Obsługi tego zdarzenia, aby cofnąć wszystko, co zostało zrobioną <xref:System.Windows.DragDrop.DragEnter> w programie obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-291">You handle this event to undo anything that you did in the <xref:System.Windows.DragDrop.DragEnter> event handler.</span></span>  
  
 <span data-ttu-id="b5e6b-292">W poniższym <xref:System.Windows.DragDrop.DragLeave> przykładzie pokazano <xref:System.Windows.Shapes.Ellipse> program obsługi zdarzeń dla elementu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-292">The following example shows the <xref:System.Windows.DragDrop.DragLeave> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="b5e6b-293">Ten kod cofa podgląd wykonywane <xref:System.Windows.DragDrop.DragEnter> w programie obsługi zdarzeń, stosując zapisane <xref:System.Windows.Media.Brush> do elipsy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-293">This code undoes the preview performed in the <xref:System.Windows.DragDrop.DragEnter> event handler by applying the saved <xref:System.Windows.Media.Brush> to the ellipse.</span></span>  
  
 [!code-csharp[DragDropSnippets#DragLeave](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#dragleave)]
 [!code-vb[DragDropSnippets#DragLeave](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#dragleave)]  
  
 <span data-ttu-id="b5e6b-294">Zdarzenie <xref:System.Windows.DragDrop.Drop> występuje, gdy dane są upuszczane nad celem upuszczania; domyślnie dzieje się tak po zwolnieniu przycisku myszy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-294">The <xref:System.Windows.DragDrop.Drop> event occurs when the data is dropped over the drop target; by default, this happens when the mouse button is released.</span></span> <span data-ttu-id="b5e6b-295">W <xref:System.Windows.DragDrop.Drop> programie obsługi zdarzeń <xref:System.Windows.DataObject.GetData%2A> należy użyć metody wyodrębnić <xref:System.Windows.DataObject> przesłane dane z i wykonać wszelkie przetwarzanie danych, które wymaga aplikacji.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-295">In the <xref:System.Windows.DragDrop.Drop> event handler, you use the <xref:System.Windows.DataObject.GetData%2A> method to extract the transferred data from the <xref:System.Windows.DataObject> and perform any data processing that your application requires.</span></span> <span data-ttu-id="b5e6b-296">Zdarzenie <xref:System.Windows.DragDrop.Drop> kończy operację przeciągania i upuszczania.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-296">The <xref:System.Windows.DragDrop.Drop> event ends the drag-and-drop operation.</span></span>  
  
 <span data-ttu-id="b5e6b-297">W poniższym <xref:System.Windows.DragDrop.Drop> przykładzie pokazano <xref:System.Windows.Shapes.Ellipse> program obsługi zdarzeń dla elementu.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-297">The following example shows the <xref:System.Windows.DragDrop.Drop> event handler for an <xref:System.Windows.Shapes.Ellipse> element.</span></span> <span data-ttu-id="b5e6b-298">Ten kod stosuje skutki operacji przeciągania i upuszczania i jest <xref:System.Windows.DragDrop.DragEnter> podobny do kodu w programie obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-298">This code applies the effects of the drag-and-drop operation, and is similar to the code in the <xref:System.Windows.DragDrop.DragEnter> event handler.</span></span> <span data-ttu-id="b5e6b-299">Sprawdza, czy <xref:System.Windows.DataObject> przeciągane przez elipsę zawiera dane ciągu, które można <xref:System.Windows.Media.Brush>przekonwertować na .</span><span class="sxs-lookup"><span data-stu-id="b5e6b-299">It checks to see if the <xref:System.Windows.DataObject> being dragged over the ellipse contains string data that can be converted to a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="b5e6b-300">Jeśli tak, <xref:System.Windows.Media.Brush> jest stosowany do elipsy.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-300">If so, the <xref:System.Windows.Media.Brush> is applied to the ellipse.</span></span> <span data-ttu-id="b5e6b-301">Jeśli danych nie można przekonwertować na <xref:System.Windows.Media.Brush>, nie jest wykonywana żadna akcja.</span><span class="sxs-lookup"><span data-stu-id="b5e6b-301">If the data cannot be converted to a <xref:System.Windows.Media.Brush>, no action is performed.</span></span>  
  
 [!code-csharp[DragDropSnippets#Drop](~/samples/snippets/csharp/VS_Snippets_Wpf/dragdropsnippets/cs/mainwindow.xaml.cs#drop)]
 [!code-vb[DragDropSnippets#Drop](~/samples/snippets/visualbasic/VS_Snippets_Wpf/dragdropsnippets/vb/mainwindow.xaml.vb#drop)]  
  
## <a name="see-also"></a><span data-ttu-id="b5e6b-302">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="b5e6b-302">See also</span></span>

- <xref:System.Windows.Clipboard>
- [<span data-ttu-id="b5e6b-303">Przewodnik: włączanie przeciągania i upuszczania w kontrolce użytkownika</span><span class="sxs-lookup"><span data-stu-id="b5e6b-303">Walkthrough: Enabling Drag and Drop on a User Control</span></span>](walkthrough-enabling-drag-and-drop-on-a-user-control.md)
- [<span data-ttu-id="b5e6b-304">Tematy in jakże</span><span class="sxs-lookup"><span data-stu-id="b5e6b-304">How-to Topics</span></span>](drag-and-drop-how-to-topics.md)
- [<span data-ttu-id="b5e6b-305">Przeciąganie i upuszczanie</span><span class="sxs-lookup"><span data-stu-id="b5e6b-305">Drag and Drop</span></span>](drag-and-drop.md)
