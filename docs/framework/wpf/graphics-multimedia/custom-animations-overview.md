---
title: Przegląd Niestandardowe animacje
ms.date: 03/30/2017
helpviewer_keywords:
- custom classes [WPF], animation
- key frames [WPF], custom
- custom key frames [WPF]
- animation [WPF], custom classes
- custom animation classes [WPF]
ms.assetid: 9be69d50-3384-4938-886f-08ce00e4a7a6
ms.openlocfilehash: 5a9ca51b87f73a24b90d0bd843ee306f8a1b970a
ms.sourcegitcommit: 700ea803fb06c5ce98de017c7f76463ba33ff4a9
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 02/19/2020
ms.locfileid: "77453094"
---
# <a name="custom-animations-overview"></a><span data-ttu-id="0352c-102">Przegląd Niestandardowe animacje</span><span class="sxs-lookup"><span data-stu-id="0352c-102">Custom Animations Overview</span></span>
<span data-ttu-id="0352c-103">W tym temacie opisano, jak i kiedy należy rozłożyć system animacji [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], tworząc niestandardowe ramki kluczowe, klasy animacji lub używając wywołania zwrotnego dla ramki, aby je pominąć.</span><span class="sxs-lookup"><span data-stu-id="0352c-103">This topic describes how and when to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system by creating custom key frames, animation classes, or by using per-frame callback to bypass it.</span></span>  
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="0352c-104">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="0352c-104">Prerequisites</span></span>  
 <span data-ttu-id="0352c-105">Aby zrozumieć ten temat, należy zapoznać się z różnymi typami animacji udostępnianymi przez [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0352c-105">To understand this topic, you should be familiar with the different types of animations provided by the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="0352c-106">Aby uzyskać więcej informacji, zobacz Omówienie animacji "od/do/z [", omówienie animacji klatek kluczowych](key-frame-animations-overview.md)i [Podgląd animacji ścieżki](path-animations-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0352c-106">For more information, see the From/To/By Animations Overview, the [Key-Frame Animations Overview](key-frame-animations-overview.md), and the [Path Animations Overview](path-animations-overview.md).</span></span>  
  
 <span data-ttu-id="0352c-107">Ponieważ klasy animacji dziedziczą z klasy <xref:System.Windows.Freezable>, należy znać <xref:System.Windows.Freezable> obiektów i sposób dziedziczenia <xref:System.Windows.Freezable>.</span><span class="sxs-lookup"><span data-stu-id="0352c-107">Because the animation classes inherit from the <xref:System.Windows.Freezable> class, you should be familiar with <xref:System.Windows.Freezable> objects and how to inherit from <xref:System.Windows.Freezable>.</span></span> <span data-ttu-id="0352c-108">Aby uzyskać więcej informacji, zobacz [Omówienie obiektów Freezable](../advanced/freezable-objects-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0352c-108">For more information, see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md).</span></span>  
  
<a name="extendingtheanimationsystem"></a>   
## <a name="extending-the-animation-system"></a><span data-ttu-id="0352c-109">Rozszerzanie systemu animacji</span><span class="sxs-lookup"><span data-stu-id="0352c-109">Extending the Animation System</span></span>  
 <span data-ttu-id="0352c-110">Istnieje kilka sposobów na rozszerzenie systemu animacji [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], w zależności od poziomu wbudowanych funkcji, których chcesz użyć.</span><span class="sxs-lookup"><span data-stu-id="0352c-110">There are a number of ways to extend the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system, depending on the level of built-in functionality you want to use.</span></span>  <span data-ttu-id="0352c-111">W aparacie animacji [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] znajdują się trzy podstawowe punkty rozszerzalności:</span><span class="sxs-lookup"><span data-stu-id="0352c-111">There are three primary extensibility points in the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine:</span></span>  
  
- <span data-ttu-id="0352c-112">Utwórz obiekt niestandardowego ramki klucza przez dziedziczenie z jednego z *\<typu >* klas klatek kluczowych, takich jak <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span><span class="sxs-lookup"><span data-stu-id="0352c-112">Create a custom key frame object by inheriting from one of the *\<Type>* KeyFrame classes, such as <xref:System.Windows.Media.Animation.DoubleKeyFrame>.</span></span> <span data-ttu-id="0352c-113">To podejście używa większości wbudowanych funkcji aparatu animacji [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0352c-113">This approach uses most of the built-in functionality of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine.</span></span>  
  
- <span data-ttu-id="0352c-114">Utwórz własną klasę animacji, dziedzicząc <xref:System.Windows.Media.Animation.AnimationTimeline> lub jeden z *typów\<>* klas podstawy animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-114">Create your own animation class by inheriting from <xref:System.Windows.Media.Animation.AnimationTimeline> or one of the *\<Type>* AnimationBase classes.</span></span>  
  
- <span data-ttu-id="0352c-115">Użyj wywołania zwrotnego dla ramki, aby generować animacje dla poszczególnych klatek.</span><span class="sxs-lookup"><span data-stu-id="0352c-115">Use per-frame callback to generate animations on a per-frame basis.</span></span> <span data-ttu-id="0352c-116">To podejście całkowicie pomija animację i system chronometrażu.</span><span class="sxs-lookup"><span data-stu-id="0352c-116">This approach completely bypasses the animation and timing system.</span></span>  
  
 <span data-ttu-id="0352c-117">W poniższej tabeli opisano niektóre scenariusze rozszerzania systemu animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-117">The following table describes some the scenarios for extending the animation system.</span></span>  
  
|<span data-ttu-id="0352c-118">Gdy chcesz...</span><span class="sxs-lookup"><span data-stu-id="0352c-118">When you want to...</span></span>|<span data-ttu-id="0352c-119">Użyj tego podejścia</span><span class="sxs-lookup"><span data-stu-id="0352c-119">Use this approach</span></span>|  
|-------------------------|-----------------------|  
|<span data-ttu-id="0352c-120">Dostosuj interpolację między wartościami typu, które mają odpowiedni *typ\<>* AnimationUsingKeyFrames</span><span class="sxs-lookup"><span data-stu-id="0352c-120">Customize the interpolation between values of a type that has a corresponding *\<Type>* AnimationUsingKeyFrames</span></span>|<span data-ttu-id="0352c-121">Utwórz niestandardową ramkę kluczową.</span><span class="sxs-lookup"><span data-stu-id="0352c-121">Create a custom key frame.</span></span> <span data-ttu-id="0352c-122">Aby uzyskać więcej informacji, zobacz sekcję [Tworzenie niestandardowej ramki klucza](#createacustomkeyframe) .</span><span class="sxs-lookup"><span data-stu-id="0352c-122">For more information, see the [Create a Custom Key Frame](#createacustomkeyframe) section.</span></span>|  
|<span data-ttu-id="0352c-123">Dostosuj więcej niż tylko interpolację między wartościami typu, które mają odpowiedni *typ\<>* animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-123">Customize more than just the interpolation between values of a type that has a corresponding *\<Type>* Animation.</span></span>|<span data-ttu-id="0352c-124">Utwórz niestandardową klasę animacji, która dziedziczy z *typu\<>* klasy podstawy animacji, która odnosi się do typu, który ma być animowany.</span><span class="sxs-lookup"><span data-stu-id="0352c-124">Create a custom animation class that inherits from the *\<Type>* AnimationBase class that corresponds to the type you want to animate.</span></span> <span data-ttu-id="0352c-125">Aby uzyskać więcej informacji, zobacz sekcję [Tworzenie niestandardowej klasy animacji](#createacustomanimationtype) .</span><span class="sxs-lookup"><span data-stu-id="0352c-125">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="0352c-126">Animuj typ, który nie ma odpowiedniej animacji [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]</span><span class="sxs-lookup"><span data-stu-id="0352c-126">Animate a type that has no corresponding [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation</span></span>|<span data-ttu-id="0352c-127">Użyj <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> lub Utwórz klasę, która dziedziczy z <xref:System.Windows.Media.Animation.AnimationTimeline>.</span><span class="sxs-lookup"><span data-stu-id="0352c-127">Use an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> or create a class that inherits from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="0352c-128">Aby uzyskać więcej informacji, zobacz sekcję [Tworzenie niestandardowej klasy animacji](#createacustomanimationtype) .</span><span class="sxs-lookup"><span data-stu-id="0352c-128">For more information, see the [Create a Custom Animation Class](#createacustomanimationtype) section.</span></span>|  
|<span data-ttu-id="0352c-129">Animuj wiele obiektów o wartościach, które są obliczane dla każdej ramki i są oparte na ostatnim zestawie interakcji obiektów</span><span class="sxs-lookup"><span data-stu-id="0352c-129">Animate multiple objects with values that are computed each frame and are based on the last set of object interactions</span></span>|<span data-ttu-id="0352c-130">Użyj wywołania zwrotnego dla ramki.</span><span class="sxs-lookup"><span data-stu-id="0352c-130">Use per-frame callback.</span></span> <span data-ttu-id="0352c-131">Aby uzyskać więcej informacji, zapoznaj się z sekcją [Utwórz użycie wywołania zwrotnego na ramkę](#useperframecallback) .</span><span class="sxs-lookup"><span data-stu-id="0352c-131">For more information, see the [Create a Use Per-Frame Callback](#useperframecallback) section.</span></span>|  
  
<a name="createacustomkeyframe"></a>   
## <a name="create-a-custom-key-frame"></a><span data-ttu-id="0352c-132">Utwórz niestandardową ramkę kluczową</span><span class="sxs-lookup"><span data-stu-id="0352c-132">Create a Custom Key Frame</span></span>  
 <span data-ttu-id="0352c-133">Tworzenie niestandardowej klasy klatek kluczowych jest najprostszym sposobem na rozszerzenie systemu animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-133">Creating a custom key frame class is the simplest way to extend the animation system.</span></span> <span data-ttu-id="0352c-134">Użyj tej metody, jeśli chcesz użyć innej metody interpolacji dla animacji klatek kluczowych.</span><span class="sxs-lookup"><span data-stu-id="0352c-134">Use this approach when you want to a different interpolation method for a key-frame animation.</span></span>  <span data-ttu-id="0352c-135">Zgodnie z opisem w temacie [animacje kluczowych klatek](key-frame-animations-overview.md), animacja klatek kluczowych używa obiektów klatek kluczowych do generowania wartości wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="0352c-135">As described in the [Key-Frame Animations Overview](key-frame-animations-overview.md), a key-frame animation uses key frame objects to generate its output values.</span></span> <span data-ttu-id="0352c-136">Każdy obiekt klatek kluczowych wykonuje trzy funkcje:</span><span class="sxs-lookup"><span data-stu-id="0352c-136">Each key frame object performs three functions:</span></span>  
  
- <span data-ttu-id="0352c-137">Określa wartość docelową przy użyciu jej właściwości <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A>.</span><span class="sxs-lookup"><span data-stu-id="0352c-137">Specifies a target value using its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
- <span data-ttu-id="0352c-138">Określa godzinę, o której ta wartość powinna zostać osiągnięta przy użyciu właściwości <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A>.</span><span class="sxs-lookup"><span data-stu-id="0352c-138">Specifies the time at which that value should be reached using its <xref:System.Windows.Media.Animation.IKeyFrame.KeyTime%2A> property.</span></span>  
  
- <span data-ttu-id="0352c-139">Interpoluje między wartością poprzedniej klatki kluczowej i własną wartością przez implementację metody InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="0352c-139">Interpolates between the value of the previous key frame and its own value by implementing the InterpolateValueCore method.</span></span>  
  
 <span data-ttu-id="0352c-140">**Instrukcje implementacji**</span><span class="sxs-lookup"><span data-stu-id="0352c-140">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="0352c-141">Pochodny od *typu\<>* klasy abstrakcyjnej klatki kluczowej i Implementuj metodę InterpolateValueCore.</span><span class="sxs-lookup"><span data-stu-id="0352c-141">Derive from the *\<Type>* KeyFrame abstract class and implement the InterpolateValueCore method.</span></span> <span data-ttu-id="0352c-142">Metoda InterpolateValueCore zwraca bieżącą wartość ramki klucza.</span><span class="sxs-lookup"><span data-stu-id="0352c-142">The InterpolateValueCore method returns the current value of the key frame.</span></span> <span data-ttu-id="0352c-143">Przyjmuje dwa parametry: wartość poprzedniej klatki kluczowej i wartość postępu, która mieści się w zakresie od 0 do 1.</span><span class="sxs-lookup"><span data-stu-id="0352c-143">It takes two parameters: the value of the previous key frame and a progress value that ranges from 0 to 1.</span></span> <span data-ttu-id="0352c-144">Postęp 0 wskazuje, że klatka kluczowa została właśnie rozpoczęta, a wartość 1 oznacza, że klatka kluczowa została właśnie zakończona i powinna zwracać wartość określoną przez właściwość <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A>.</span><span class="sxs-lookup"><span data-stu-id="0352c-144">A progress of 0 indicates the key frame has just started, and a value of 1 indicates that the key frame has just completed and should return the value specified by its <xref:System.Windows.Media.Animation.IKeyFrame.Value%2A> property.</span></span>  
  
 <span data-ttu-id="0352c-145">Ponieważ *\<typ >* klasy klatek kluczowych dziedziczy z klasy <xref:System.Windows.Freezable>, należy również przesłonić <xref:System.Windows.Freezable.CreateInstanceCore%2A> rdzeń, aby zwracało nowe wystąpienie klasy.</span><span class="sxs-lookup"><span data-stu-id="0352c-145">Because the *\<Type>* KeyFrame classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="0352c-146">Jeśli Klasa nie używa właściwości zależności do przechowywania danych lub wymaga dodatkowej inicjalizacji po utworzeniu, może być konieczne przesłonięcie dodatkowych metod; Aby uzyskać więcej informacji, zobacz [Omówienie obiektów Freezable](../advanced/freezable-objects-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="0352c-146">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="0352c-147">Po utworzeniu niestandardowego *typu\<>* animacji klatek kluczowych można użyć go z *\<Type >* dla tego typu.</span><span class="sxs-lookup"><span data-stu-id="0352c-147">After you've created your custom *\<Type>* KeyFrame animation, you can use it with the *\<Type>* AnimationUsingKeyFrames for that type.</span></span>  
  
<a name="createacustomanimationtype"></a>   
## <a name="create-a-custom-animation-class"></a><span data-ttu-id="0352c-148">Utwórz niestandardową klasę animacji</span><span class="sxs-lookup"><span data-stu-id="0352c-148">Create a Custom Animation Class</span></span>  
 <span data-ttu-id="0352c-149">Tworzenie własnego typu animacji daje większą kontrolę nad sposobem animowania obiektu.</span><span class="sxs-lookup"><span data-stu-id="0352c-149">Creating your own animation type gives you more control over how an object in animated.</span></span> <span data-ttu-id="0352c-150">Istnieją dwa zalecane sposoby tworzenia własnego typu animacji: można utworzyć z klasy <xref:System.Windows.Media.Animation.AnimationTimeline> lub *typu\<>* klasie podstawy animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-150">There are two recommended ways to create your own animation type: you can derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class or the *\<Type>* AnimationBase class.</span></span> <span data-ttu-id="0352c-151">Wyprowadzanie z *typu\<>* animacji lub *\<typu >* klasy AnimationUsingKeyFrames nie jest zalecane.</span><span class="sxs-lookup"><span data-stu-id="0352c-151">Deriving from the *\<Type>* Animation or *\<Type>* AnimationUsingKeyFrames classes is not recommended.</span></span>  
  
### <a name="derive-from-typeanimationbase"></a><span data-ttu-id="0352c-152">Pochodny od typu \<> Podstawy animacji</span><span class="sxs-lookup"><span data-stu-id="0352c-152">Derive from \<Type>AnimationBase</span></span>  
 <span data-ttu-id="0352c-153">Wyprowadzanie z *typu\<>* klasy podstawy animacji jest najprostszym sposobem tworzenia nowego typu animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-153">Deriving from a *\<Type>* AnimationBase class is the simplest way to create a new animation type.</span></span> <span data-ttu-id="0352c-154">Użyj tej metody, jeśli chcesz utworzyć nową animację dla typu, który ma już odpowiedni *typ\<>* klasie podstawy animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-154">Use this approach when you want to create a new animation for type that already has a corresponding *\<Type>* AnimationBase class.</span></span>  
  
 <span data-ttu-id="0352c-155">**Instrukcje implementacji**</span><span class="sxs-lookup"><span data-stu-id="0352c-155">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="0352c-156">Pochodny od *typu\<>* klasie animacji i Implementuj metodę GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="0352c-156">Derive from a *\<Type>* Animation class and implement the GetCurrentValueCore method.</span></span> <span data-ttu-id="0352c-157">Metoda GetCurrentValueCore zwraca bieżącą wartość animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-157">The GetCurrentValueCore method returns the current value of the animation.</span></span> <span data-ttu-id="0352c-158">Przyjmuje trzy parametry: Sugerowana wartość początkowa, sugerowana wartość końcowa i <xref:System.Windows.Media.Animation.AnimationClock>, których można użyć do określenia postępu animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-158">It takes three parameters: a suggested starting value, a suggested ending value, and an <xref:System.Windows.Media.Animation.AnimationClock>, which you use to determine the progress of the animation.</span></span>  
  
 <span data-ttu-id="0352c-159">Ponieważ *typ\<>* klasy podstawy animacji dziedziczy z klasy <xref:System.Windows.Freezable>, należy również przesłonić rdzeń <xref:System.Windows.Freezable.CreateInstanceCore%2A>, aby zwracał nowe wystąpienie klasy.</span><span class="sxs-lookup"><span data-stu-id="0352c-159">Because the *\<Type>* AnimationBase classes inherit from the <xref:System.Windows.Freezable> class, you must also override <xref:System.Windows.Freezable.CreateInstanceCore%2A> core to return a new instance of your class.</span></span> <span data-ttu-id="0352c-160">Jeśli Klasa nie używa właściwości zależności do przechowywania danych lub wymaga dodatkowej inicjalizacji po utworzeniu, może być konieczne przesłonięcie dodatkowych metod; Aby uzyskać więcej informacji, zobacz [Omówienie obiektów Freezable](../advanced/freezable-objects-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="0352c-160">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="0352c-161">Aby uzyskać więcej informacji, zobacz dokumentację metody GetCurrentValueCore dla *typu\<>* klasy podstawy animacji dla typu, który ma być animowany.</span><span class="sxs-lookup"><span data-stu-id="0352c-161">For more information, see the GetCurrentValueCore method documentation for the *\<Type>* AnimationBase class for the type that you want to animate.</span></span> <span data-ttu-id="0352c-162">Aby zapoznać się z przykładem, zobacz przykład [animacji niestandardowej](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)</span><span class="sxs-lookup"><span data-stu-id="0352c-162">For an example, see the [Custom Animation Sample](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)</span></span>  
  
 <span data-ttu-id="0352c-163">**Alternatywne podejścia**</span><span class="sxs-lookup"><span data-stu-id="0352c-163">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="0352c-164">Jeśli po prostu chcesz zmienić sposób interpolacji wartości animacji, rozważanie pochodne jednego z *typów\<>* klas klatek kluczowych.</span><span class="sxs-lookup"><span data-stu-id="0352c-164">If you simply want to change how animation values are interpolated, considering deriving from one of the *\<Type>* KeyFrame classes.</span></span> <span data-ttu-id="0352c-165">Utworzona przez Ciebie klatkę kluczową może być używana z odpowiednim *typem\<>* AnimationUsingKeyFrames udostępnionym przez [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0352c-165">The key frame you create can be used with the corresponding *\<Type>* AnimationUsingKeyFrames provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  
  
### <a name="derive-from-animationtimeline"></a><span data-ttu-id="0352c-166">Pochodny od AnimationTimeline</span><span class="sxs-lookup"><span data-stu-id="0352c-166">Derive from AnimationTimeline</span></span>  
 <span data-ttu-id="0352c-167">Pochodzi z klasy <xref:System.Windows.Media.Animation.AnimationTimeline>, gdy chcesz utworzyć animację dla typu, który nie ma jeszcze pasującej animacji [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] lub chcesz utworzyć animację, która nie jest silnie wpisana.</span><span class="sxs-lookup"><span data-stu-id="0352c-167">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class when you want to create an animation for a type that doesn't already have a matching [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation, or you want to create an animation that is not strongly typed.</span></span>  
  
 <span data-ttu-id="0352c-168">**Instrukcje implementacji**</span><span class="sxs-lookup"><span data-stu-id="0352c-168">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="0352c-169">Pochodny od klasy <xref:System.Windows.Media.Animation.AnimationTimeline> i Przesłoń następujące elementy członkowskie:</span><span class="sxs-lookup"><span data-stu-id="0352c-169">Derive from the <xref:System.Windows.Media.Animation.AnimationTimeline> class and override the following members:</span></span>  
  
- <span data-ttu-id="0352c-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A> — Jeśli nowa klasa jest konkretna, należy zastąpić <xref:System.Windows.Freezable.CreateInstanceCore%2A>, aby zwrócić nowe wystąpienie klasy.</span><span class="sxs-lookup"><span data-stu-id="0352c-170"><xref:System.Windows.Freezable.CreateInstanceCore%2A> – If your new class is concrete, you must override <xref:System.Windows.Freezable.CreateInstanceCore%2A> to return a new instance of your class.</span></span>  
  
- <span data-ttu-id="0352c-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> — Przesłoń tę metodę, aby zwrócić bieżącą wartość animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-171"><xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> – Override this method to return the current value of your animation.</span></span> <span data-ttu-id="0352c-172">Przyjmuje trzy parametry: domyślną wartość pierwotną, domyślną wartość docelową i <xref:System.Windows.Media.Animation.AnimationClock>.</span><span class="sxs-lookup"><span data-stu-id="0352c-172">It takes three parameters: a default origin value, a default destination value, and an <xref:System.Windows.Media.Animation.AnimationClock>.</span></span> <span data-ttu-id="0352c-173">Użyj <xref:System.Windows.Media.Animation.AnimationClock>, aby uzyskać bieżącą godzinę lub postęp dla animacji.</span><span class="sxs-lookup"><span data-stu-id="0352c-173">Use the <xref:System.Windows.Media.Animation.AnimationClock> to obtain the current time or progress for the animation.</span></span> <span data-ttu-id="0352c-174">Można wybrać, czy mają być używane domyślne wartości źródłowe i docelowe.</span><span class="sxs-lookup"><span data-stu-id="0352c-174">You can choose whether to use the default origin and destination values.</span></span>  
  
- <span data-ttu-id="0352c-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> — Przesłoń tę właściwość, aby wskazać, czy animacja używa domyślnej wartości docelowej określonej przez metodę <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="0352c-175"><xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> – Override this property to indicate whether your animation uses the default destination value specified by the <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> method.</span></span>  
  
- <span data-ttu-id="0352c-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> — Przesłoń tę właściwość, aby wskazać <xref:System.Type> danych wyjściowych wytwarzanych przez Twoją animację.</span><span class="sxs-lookup"><span data-stu-id="0352c-176"><xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> – Override this property to indicate the <xref:System.Type> of output your animation produces.</span></span>  
  
 <span data-ttu-id="0352c-177">Jeśli Klasa nie używa właściwości zależności do przechowywania danych lub wymaga dodatkowej inicjalizacji po utworzeniu, może być konieczne przesłonięcie dodatkowych metod; Aby uzyskać więcej informacji, zobacz [Omówienie obiektów Freezable](../advanced/freezable-objects-overview.md) .</span><span class="sxs-lookup"><span data-stu-id="0352c-177">If the class does not use dependency properties to store its data or it requires extra initialization after creation, you might need to override additional methods; see the [Freezable Objects Overview](../advanced/freezable-objects-overview.md) for more information.</span></span>  
  
 <span data-ttu-id="0352c-178">Zalecanym modelem (używanym przez [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animacje) jest użycie dwóch poziomów dziedziczenia:</span><span class="sxs-lookup"><span data-stu-id="0352c-178">The recommended paradigm (used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animations) is to use two inheritance levels:</span></span>  
  
1. <span data-ttu-id="0352c-179">Utwórz abstrakcyjny *typ\<>* klasy podstawy animacji, która pochodzi od <xref:System.Windows.Media.Animation.AnimationTimeline>.</span><span class="sxs-lookup"><span data-stu-id="0352c-179">Create an abstract *\<Type>* AnimationBase class that derives from <xref:System.Windows.Media.Animation.AnimationTimeline>.</span></span> <span data-ttu-id="0352c-180">Ta klasa powinna zastąpić metodę <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A>.</span><span class="sxs-lookup"><span data-stu-id="0352c-180">This class should override the <xref:System.Windows.Media.Animation.AnimationTimeline.TargetPropertyType%2A> method.</span></span> <span data-ttu-id="0352c-181">Należy również wprowadzić nową metodę abstrakcyjną, GetCurrentValueCore i zastąpić <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> tak, aby sprawdzał poprawność typów domyślnej wartości pierwotnej i domyślnych parametrów wartości docelowej, a następnie wywołuje GetCurrentValueCore.</span><span class="sxs-lookup"><span data-stu-id="0352c-181">It should also introduce a new abstract method, GetCurrentValueCore, and override <xref:System.Windows.Media.Animation.AnimationTimeline.GetCurrentValue%2A> so that it validates the types of the default origin value and default destination value parameters, then calls GetCurrentValueCore.</span></span>  
  
2. <span data-ttu-id="0352c-182">Utwórz inną klasę, która dziedziczy z nowego *typu\<>* klasie podstawy animacji i zastępuje metodę <xref:System.Windows.Freezable.CreateInstanceCore%2A>, wprowadzoną przez Ciebie metodę GetCurrentValueCore i Właściwość <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A>.</span><span class="sxs-lookup"><span data-stu-id="0352c-182">Create another class that inherits from your new *\<Type>* AnimationBase class and overrides the <xref:System.Windows.Freezable.CreateInstanceCore%2A> method, the GetCurrentValueCore method that you introduced, and the <xref:System.Windows.Media.Animation.AnimationTimeline.IsDestinationDefault%2A> property.</span></span>  
  
 <span data-ttu-id="0352c-183">**Alternatywne podejścia**</span><span class="sxs-lookup"><span data-stu-id="0352c-183">**Alternative Approaches**</span></span>  
  
 <span data-ttu-id="0352c-184">Jeśli chcesz animować typ, który nie jest zgodny z animacją lub animacją klatek kluczowych, rozważ użycie <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span><span class="sxs-lookup"><span data-stu-id="0352c-184">If you want to animate a type that has no corresponding From/To/By animation or key-frame animation, consider using an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames>.</span></span> <span data-ttu-id="0352c-185">Ponieważ jest to słabo wpisane, <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> może animować dowolny typ wartości.</span><span class="sxs-lookup"><span data-stu-id="0352c-185">Because it is weakly typed, an <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> can animate any type of value.</span></span> <span data-ttu-id="0352c-186">Wadą tego podejścia jest to, że <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> obsługuje tylko dyskretne interpolacje.</span><span class="sxs-lookup"><span data-stu-id="0352c-186">The drawback to this approach is that <xref:System.Windows.Media.Animation.ObjectAnimationUsingKeyFrames> only supports discrete interpolation.</span></span>  
  
<a name="useperframecallback"></a>   
## <a name="use-per-frame-callback"></a><span data-ttu-id="0352c-187">Użyj wywołania zwrotnego dla ramki</span><span class="sxs-lookup"><span data-stu-id="0352c-187">Use Per-Frame Callback</span></span>  
 <span data-ttu-id="0352c-188">Użyj tej metody, jeśli chcesz całkowicie ominąć system animacji [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0352c-188">Use this approach when you need to completely bypass the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation system.</span></span> <span data-ttu-id="0352c-189">Jednym z scenariuszy tego podejścia są animacje fizyki, w których każdy krok animacji ma nowy kierunek lub położenie animowanych obiektów, które należy ponownie obliczyć na podstawie ostatniego zestawu interakcji z obiektem.</span><span class="sxs-lookup"><span data-stu-id="0352c-189">One scenario for this approach is physics animations, where at each animation step a new direction or position of animated objects needs to be recomputed based on the  last set of object interactions.</span></span>  
  
 <span data-ttu-id="0352c-190">**Instrukcje implementacji**</span><span class="sxs-lookup"><span data-stu-id="0352c-190">**Implementation Instructions**</span></span>  
  
 <span data-ttu-id="0352c-191">W przeciwieństwie do innych metod opisanych w tym omówieniu, aby użyć wywołania zwrotnego dla ramki, nie trzeba tworzyć niestandardowej animacji ani klasy klatek kluczowych.</span><span class="sxs-lookup"><span data-stu-id="0352c-191">Unlike the other approaches described in this overview, to use per-frame callback you don't need to create a custom animation or key frame class.</span></span>  
  
 <span data-ttu-id="0352c-192">Zamiast tego rejestruje się dla zdarzenia <xref:System.Windows.Media.CompositionTarget.Rendering> obiektu, który zawiera obiekty, które mają być animowane.</span><span class="sxs-lookup"><span data-stu-id="0352c-192">Instead, you register for the <xref:System.Windows.Media.CompositionTarget.Rendering> event of the object that contains the objects you want to animate.</span></span> <span data-ttu-id="0352c-193">Ta metoda obsługi zdarzeń jest wywoływana raz na klatkę.</span><span class="sxs-lookup"><span data-stu-id="0352c-193">This event handler method gets called once per frame.</span></span> <span data-ttu-id="0352c-194">Za każdym razem, gdy [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] organizowana utrwalone dane renderowania w drzewie wizualnym w drzewie kompozycji, wywoływana jest metoda obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="0352c-194">Each time that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshals the persisted rendering data in the visual tree across to the composition tree, your event handler method is called.</span></span>  
  
 <span data-ttu-id="0352c-195">W programie obsługi zdarzeń należy wykonać dowolne obliczenia niezbędne dla efektu animacji i ustawić właściwości obiektów, które mają być animowane przy użyciu tych wartości.</span><span class="sxs-lookup"><span data-stu-id="0352c-195">In your event handler, perform your whatever calculations necessary for your animation effect and set the properties of the objects you want to animate with these values.</span></span>  
  
 <span data-ttu-id="0352c-196">Aby uzyskać czas prezentacji bieżącej ramki, <xref:System.EventArgs> skojarzona z tym zdarzeniem może być rzutowana jako <xref:System.Windows.Media.RenderingEventArgs>, który udostępnia Właściwość <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A>, której można użyć w celu uzyskania czasu renderowania bieżącej ramki.</span><span class="sxs-lookup"><span data-stu-id="0352c-196">To obtain the presentation time of the current frame, the <xref:System.EventArgs> associated with this event can be cast as <xref:System.Windows.Media.RenderingEventArgs>, which provide a <xref:System.Windows.Media.RenderingEventArgs.RenderingTime%2A> property that you can use to obtain the current frame's rendering time.</span></span>  
  
 <span data-ttu-id="0352c-197">Aby uzyskać więcej informacji, zobacz stronę <xref:System.Windows.Media.CompositionTarget.Rendering>.</span><span class="sxs-lookup"><span data-stu-id="0352c-197">For more information, see the <xref:System.Windows.Media.CompositionTarget.Rendering> page.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0352c-198">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0352c-198">See also</span></span>

- <xref:System.Windows.Media.Animation.AnimationTimeline>
- <xref:System.Windows.Media.Animation.IKeyFrame>
- [<span data-ttu-id="0352c-199">Techniki animacji właściwości — przegląd</span><span class="sxs-lookup"><span data-stu-id="0352c-199">Property Animation Techniques Overview</span></span>](property-animation-techniques-overview.md)
- [<span data-ttu-id="0352c-200">Przegląd obiektów Freezable</span><span class="sxs-lookup"><span data-stu-id="0352c-200">Freezable Objects Overview</span></span>](../advanced/freezable-objects-overview.md)
- [<span data-ttu-id="0352c-201">Animacje kluczowych klatek — przegląd</span><span class="sxs-lookup"><span data-stu-id="0352c-201">Key-Frame Animations Overview</span></span>](key-frame-animations-overview.md)
- [<span data-ttu-id="0352c-202">Animacje ścieżki — przegląd</span><span class="sxs-lookup"><span data-stu-id="0352c-202">Path Animations Overview</span></span>](path-animations-overview.md)
- [<span data-ttu-id="0352c-203">Animacja — przegląd</span><span class="sxs-lookup"><span data-stu-id="0352c-203">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="0352c-204">Animacja i system chronometrażu — przegląd</span><span class="sxs-lookup"><span data-stu-id="0352c-204">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="0352c-205">Przykład animacji niestandardowej</span><span class="sxs-lookup"><span data-stu-id="0352c-205">Custom Animation Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/CustomAnimation)
