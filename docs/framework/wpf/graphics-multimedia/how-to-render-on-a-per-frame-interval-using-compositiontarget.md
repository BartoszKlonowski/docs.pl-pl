---
title: 'Instrukcje: Renderuj w interwałach klatek z użyciem CompositionTarget'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- CompositionTarget objects [WPF], rendering per frame
- rendering per frame using CompositionTarget objects [WPF]
ms.assetid: 701246cd-66b7-4d69-ada9-17b3b433d95d
ms.openlocfilehash: afbaf6652351e056fb0ce31ffd9e69cf98a90e85
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/23/2019
ms.locfileid: "54511228"
---
# <a name="how-to-render-on-a-per-frame-interval-using-compositiontarget"></a><span data-ttu-id="3eaf4-102">Instrukcje: Renderuj w interwałach klatek z użyciem CompositionTarget</span><span class="sxs-lookup"><span data-stu-id="3eaf4-102">How to: Render on a Per Frame Interval Using CompositionTarget</span></span>
<span data-ttu-id="3eaf4-103">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] Aparat animacji udostępnia wiele funkcji do tworzenia opartych na klatkach animacji.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-103">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] animation engine provides many features for creating frame-based animation.</span></span> <span data-ttu-id="3eaf4-104">Istnieją jednak scenariuszy aplikacji, w których potrzebujesz bardziej szczegółowej kontroli nad renderowania na zasadzie na ramki.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-104">However, there are application scenarios in which you need finer-grained control over rendering on a per frame basis.</span></span> <span data-ttu-id="3eaf4-105"><xref:System.Windows.Media.CompositionTarget> Obiekt zapewnia możliwość tworzenia niestandardowe animacje oparte na wywołanie zwrotne poszczególnych klatkach.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-105">The <xref:System.Windows.Media.CompositionTarget> object provides the ability to create custom animations based on a per-frame callback.</span></span>  
  
 <span data-ttu-id="3eaf4-106"><xref:System.Windows.Media.CompositionTarget> jest klasą statyczną, który reprezentuje powierzchni ekranu, na którym jest rysowana aplikacji.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-106"><xref:System.Windows.Media.CompositionTarget> is a static class which represents the display surface on which your application is being drawn.</span></span> <span data-ttu-id="3eaf4-107"><xref:System.Windows.Media.CompositionTarget.Rendering> Zdarzenie jest zgłaszane w każdym sceny aplikacji rysowania.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-107">The <xref:System.Windows.Media.CompositionTarget.Rendering> event is raised each time the application's scene is drawn.</span></span> <span data-ttu-id="3eaf4-108">Szybkość klatek renderowania jest to liczba razy na sekundę rysowania sceny.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-108">The rendering frame rate is the number of times the scene is drawn per second.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3eaf4-109">Na przykład kompletny kod przy użyciu <xref:System.Windows.Media.CompositionTarget>, zobacz [przy użyciu przykładu CompositionTarget](https://go.microsoft.com/fwlink/?LinkID=160045).</span><span class="sxs-lookup"><span data-stu-id="3eaf4-109">For a complete code sample using <xref:System.Windows.Media.CompositionTarget>, see [Using the CompositionTarget Sample](https://go.microsoft.com/fwlink/?LinkID=160045).</span></span>  
  
## <a name="example"></a><span data-ttu-id="3eaf4-110">Przykład</span><span class="sxs-lookup"><span data-stu-id="3eaf4-110">Example</span></span>  
 <span data-ttu-id="3eaf4-111"><xref:System.Windows.Media.CompositionTarget.Rendering> Zdarzenia generowane podczas [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] proces renderowania.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-111">The <xref:System.Windows.Media.CompositionTarget.Rendering> event fires during the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] rendering process.</span></span> <span data-ttu-id="3eaf4-112">W poniższym przykładzie pokazano, jak zarejestrować <xref:System.EventHandler> delegować statycznej <xref:System.Windows.Media.CompositionTarget.Rendering> metody <xref:System.Windows.Media.CompositionTarget>.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-112">The following example shows how you register an <xref:System.EventHandler> delegate to the static <xref:System.Windows.Media.CompositionTarget.Rendering> method on <xref:System.Windows.Media.CompositionTarget>.</span></span>  
  
 [!code-csharp[CompositionTargetSample#CompositionTarget1](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CompositionTargetSample/CSharp/Window1.xaml.cs#compositiontarget1)]
 [!code-vb[CompositionTargetSample#CompositionTarget1](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CompositionTargetSample/visualbasic/window1.xaml.vb#compositiontarget1)]  
  
 <span data-ttu-id="3eaf4-113">Twoja metoda programu obsługi zdarzeń renderowania służy do tworzenia niestandardowego rysowania zawartości.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-113">You can use your rendering event handler method to create custom drawing content.</span></span> <span data-ttu-id="3eaf4-114">Ta metoda obsługi zdarzeń jest wywoływana raz na klatkę.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-114">This event handler method gets called once per frame.</span></span> <span data-ttu-id="3eaf4-115">Każdym razem, gdy program [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshals danych utrwalonych renderowania, w drzewie wizualnym między do składu wykres scen, Twoja metoda programu obsługi zdarzeń jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-115">Each time that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] marshals the persisted rendering data in the visual tree across to the composition scene graph, your event handler method is called.</span></span> <span data-ttu-id="3eaf4-116">Ponadto zmiany do drzewa wizualnego wymuszenia aktualizacji do wykresu sceny kompozycji, jest również nazywany metodę programu obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-116">In addition, if changes to the visual tree force updates to the composition scene graph, your event handler method is also called.</span></span> <span data-ttu-id="3eaf4-117">Należy pamiętać, że Twoja metoda programu obsługi zdarzeń jest wywoływana po obliczeniu układu.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-117">Note that your event handler method is called after layout has been computed.</span></span> <span data-ttu-id="3eaf4-118">Jednak można modyfikować układ w metodzie obsługi zdarzeń, co oznacza, że taki układ zostanie obliczona ponownie przed renderowaniem.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-118">However, you can modify layout in your event handler method, which means that layout will be computed once more before rendering.</span></span>  
  
 <span data-ttu-id="3eaf4-119">Poniższy przykład pokazuje, jak możesz podać niestandardowy Rysowanie w <xref:System.Windows.Media.CompositionTarget> metody obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-119">The following example shows how you can provide custom drawing in a <xref:System.Windows.Media.CompositionTarget> event handler method.</span></span> <span data-ttu-id="3eaf4-120">W tym przypadku kolor tła <xref:System.Windows.Controls.Canvas> jest rysowany przy użyciu wartości koloru w oparciu o współrzędnych położenie kursora myszy.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-120">In this case, the background color of the <xref:System.Windows.Controls.Canvas> is drawn with a color value based on the coordinate position of the mouse.</span></span> <span data-ttu-id="3eaf4-121">Po przesunięciu myszy wewnątrz <xref:System.Windows.Controls.Canvas>, jego zmiany kolorów w tle.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-121">If you move the mouse inside the <xref:System.Windows.Controls.Canvas>, its background color changes.</span></span> <span data-ttu-id="3eaf4-122">Ponadto średnia szybkość klatek jest obliczana, na podstawie bieżący czas i całkowitą liczbę ramek renderowany.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-122">In addition, the average frame rate is calculated, based on the current elapsed time and the total number of rendered frames.</span></span>  
  
 [!code-csharp[CompositionTargetSample#CompositionTarget2](../../../../samples/snippets/csharp/VS_Snippets_Wpf/CompositionTargetSample/CSharp/Window1.xaml.cs#compositiontarget2)]
 [!code-vb[CompositionTargetSample#CompositionTarget2](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/CompositionTargetSample/visualbasic/window1.xaml.vb#compositiontarget2)]  
  
 <span data-ttu-id="3eaf4-123">Użytkownik może stwierdzić, uruchamia niestandardowy rysunek przy różnych prędkościach na różnych komputerach.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-123">You may discover that your custom drawing runs at different speeds on different computers.</span></span> <span data-ttu-id="3eaf4-124">Jest to spowodowane niestandardowy rysunek nie jest szybkość klatek niezależne.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-124">This is because your custom drawing is not frame-rate independent.</span></span> <span data-ttu-id="3eaf4-125">W zależności od systemu, są uruchomione i obciążenie systemu <xref:System.Windows.Media.CompositionTarget.Rendering> zdarzeń może zostać wywołana różną liczbę razy na sekundę.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-125">Depending on the system you are running and the workload of that system, the <xref:System.Windows.Media.CompositionTarget.Rendering> event may be called a different number of times per second.</span></span> <span data-ttu-id="3eaf4-126">Aby uzyskać informacje na temat określania możliwości sprzętu grafiki i wydajności na urządzeniu z systemem [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] aplikacji, zobacz [poziomy renderowania grafiki](../../../../docs/framework/wpf/advanced/graphics-rendering-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="3eaf4-126">For information on determining the graphics hardware capability and performance for a device that runs a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application, see [Graphics Rendering Tiers](../../../../docs/framework/wpf/advanced/graphics-rendering-tiers.md).</span></span>  
  
 <span data-ttu-id="3eaf4-127">Dodawanie lub usuwanie renderowania <xref:System.EventHandler> po zakończeniu zdarzenia delegata, gdy zdarzenie jest uruchamiana zostanie opóźnione aż do wyzwalania.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-127">Adding or removing a rendering <xref:System.EventHandler> delegate while the event is firing will be delayed until after the event is finished firing.</span></span> <span data-ttu-id="3eaf4-128">Jest to zgodne z jak <xref:System.MulticastDelegate>— na podstawie zdarzenia są obsługiwane w środowiska uruchomieniowego języka wspólnego (CLR).</span><span class="sxs-lookup"><span data-stu-id="3eaf4-128">This is consistent with how <xref:System.MulticastDelegate>-based events are handled in the Common Language Runtime (CLR).</span></span> <span data-ttu-id="3eaf4-129">Należy również zauważyć, że renderowanie zdarzeń nie ma gwarancji, można wywołać w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-129">Also note that rendering events are not guaranteed to be called in any particular order.</span></span> <span data-ttu-id="3eaf4-130">Jeśli masz wiele <xref:System.EventHandler> delegatów, które zależą od określonej kolejności, należy zarejestrować pojedynczy <xref:System.Windows.Media.CompositionTarget.Rendering> zdarzeń i multipleksować delegatów prawidłowo kolejność samodzielnie.</span><span class="sxs-lookup"><span data-stu-id="3eaf4-130">If you have multiple <xref:System.EventHandler> delegates that rely on a particular order, you should register a single <xref:System.Windows.Media.CompositionTarget.Rendering> event and multiplex the delegates in the correct order yourself.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3eaf4-131">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="3eaf4-131">See also</span></span>
- <xref:System.Windows.Media.CompositionTarget>
- [<span data-ttu-id="3eaf4-132">Renderowanie grafiki WPF — przegląd</span><span class="sxs-lookup"><span data-stu-id="3eaf4-132">WPF Graphics Rendering Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md)
