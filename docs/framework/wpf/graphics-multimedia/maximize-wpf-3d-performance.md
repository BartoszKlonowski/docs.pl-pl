---
title: Maksymalizuj wydajność 3D WPF
ms.date: 03/30/2017
helpviewer_keywords:
- 3-D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 8629748c37aae8e35bb928c5a8d5a9caa7046942
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/08/2019
ms.locfileid: "59147527"
---
# <a name="maximize-wpf-3d-performance"></a>Maksymalizuj wydajność 3D WPF
Ponieważ używasz [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] do tworzenia kontrolki 3D i obejmują scen 3D w swoich aplikacjach, warto wziąć pod uwagę optymalizacji wydajności. Ten temat zawiera listę 3D klas i właściwości, które mają wpływ na wydajność aplikacji, wraz z zaleceniami dotyczącymi optymalizacji wydajności podczas korzystania z nich.  
  
 W tym temacie założono większą wiedzę na temat [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] funkcje 3D. Sugestie w tym dokumencie dotyczą "renderowania warstwy 2" — około zdefiniowany jako sprzętu, które obsługuje program do cieniowania pikseli w wersji 2.0 i programu do cieniowania wierzchołków w wersji 2.0. Aby uzyskać więcej informacji, zobacz [poziomy renderowania grafiki](../advanced/graphics-rendering-tiers.md).  
  
## <a name="performance-impact-high"></a>Wpływ na wydajność: Wysoka  
  
|Właściwość|Zalecenie|  
|-|-|  
|<xref:System.Windows.Media.Brush>|Szybkość pędzla (najszybciej do najwolniejsze):<br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (buforowanej)<br /><br /> <xref:System.Windows.Media.VisualBrush> (buforowanej)<br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <xref:System.Windows.Media.DrawingBrush> (bez buforowania)<br /><br /> <xref:System.Windows.Media.VisualBrush> (bez buforowania)|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|Ustaw `Viewport3D.ClipToBounds` na wartość false, gdy nie musisz mieć [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] jawnie przyciąć zawartość <xref:System.Windows.Controls.Viewport3D> w Viewport3D prostokąt. [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] wycinka antialiased może być bardzo wolno i `ClipToBounds` jest domyślnie (wolno) na <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|Ustaw `Viewport3D.IsHitTestVisible` na wartość false, gdy nie ma potrzeby [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] wziąć pod uwagę zawartość <xref:System.Windows.Controls.Viewport3D> podczas wykonywania myszy test trafienia.  Trafień testowania zawartości 3D odbywa się w oprogramowaniu i może działać powoli z dużych siatki. <xref:System.Windows.UIElement.IsHitTestVisible%2A> jest domyślnie (wolno) na <xref:System.Windows.Controls.Viewport3D>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|Utwórz różne modele, tylko wtedy, gdy potrzebują inne materiały lub przekształcenia.  W przeciwnym razie próby coalesce wiele <xref:System.Windows.Media.Media3D.GeometryModel3D> wystąpień z tego samego materiałami i przekształceń w większych kilka <xref:System.Windows.Media.Media3D.GeometryModel3D> i <xref:System.Windows.Media.Media3D.MeshGeometry3D> wystąpień.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Siatki animacji — zmiana poszczególnych wierzchołki siatki na podstawie poszczególnych klatkach — nie zawsze jest efektywne w [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].  Aby zminimalizować wpływ na wydajność powiadomienia o zmianie po zmodyfikowaniu każdy wierzchołek, należy odłączyć siatki z drzewa wizualnego przed przystąpieniem do wykonywania modyfikacji wierzchołków.  Gdy siatkę został zmodyfikowany, należy dołączyć go do drzewa wizualnego.  Spróbuj również zminimalizować rozmiar siatki, które będzie animowana w ten sposób.|  
|Antyaliasing 3D|W celu zwiększenia szybkości renderowania, wyłącz multisampling na <xref:System.Windows.Controls.Viewport3D> przez ustawienie właściwości dołączonych <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> do `Aliased`.  Domyślnie 3D antialiasingu jest wyłączona na [!INCLUDE[TLA#tla_winxp](../../../../includes/tlasharptla-winxp-md.md)] i włączony na [!INCLUDE[TLA#tla_longhorn](../../../../includes/tlasharptla-longhorn-md.md)] z 4 próbki na piksel.|  
|Tekst|Tekst na żywo w scenie 3D (live, ponieważ jest on <xref:System.Windows.Media.DrawingBrush> lub <xref:System.Windows.Media.VisualBrush>) może działać powoli. Zamiast tego użyć obrazów, tekstu (za pośrednictwem <xref:System.Windows.Media.Imaging.RenderTargetBitmap>), chyba że ulegnie zmianie tekstu.|  
|<xref:System.Windows.Media.TileBrush>|Jeśli musisz użyć <xref:System.Windows.Media.VisualBrush> lub <xref:System.Windows.Media.DrawingBrush> w scenie 3D pędzla zawartość nie jest statyczne, spróbuj buforowania pędzla (ustawienie dołączonych właściwości <xref:System.Windows.Media.RenderOptions.CachingHint%2A> do `Cache`).  Ustaw minimalną i maksymalną skalę progi unieważniania (przy użyciu właściwości dołączone <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> i <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) tak, aby pędzle pamięci podręcznej nie zostać ponownie wygenerowane zbyt często, przy jednoczesnym zachowaniu żądany poziom jakości.  Domyślnie <xref:System.Windows.Media.DrawingBrush> i <xref:System.Windows.Media.VisualBrush> nie są buforowane, co oznacza, że za każdym razem, gdy coś o pędzel musi zostać ponownie renderowany, całą zawartość pędzla musi najpierw ponownie renderowania pośrednich powierzchnię.|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<xref:System.Windows.Media.Effects.BitmapEffect> Wymusza całą zawartość dotyczy bez przyspieszania sprzętowego.  Aby uzyskać najlepszą wydajność, nie używaj <xref:System.Windows.Media.Effects.BitmapEffect>.|  
  
## <a name="performance-impact-medium"></a>Wpływ na wydajność: Średni  
  
|Właściwość|Zalecenie|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Jeśli te wierzchołki mają tę samą pozycję, normal i współrzędne tekstury siatki jest zdefiniowany jako sąsiednich trójkąty z udostępnionego wierzchołki, zdefiniować każdy wierzchołek udostępniony tylko raz, a następnie zdefiniować trójkąty za pomocą indeksu z <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.|  
|<xref:System.Windows.Media.ImageBrush>|Należy zminimalizować rozmiary tekstury w przypadku jawną kontrolę nad tym rozmiaru (Jeśli używasz <xref:System.Windows.Media.Imaging.RenderTargetBitmap> i/lub <xref:System.Windows.Media.ImageBrush>).  Należy pamiętać, że niższych rozdzielczości tekstura można obniżyć jakość wizualną, więc spróbuj znaleźć równowagę między jakości i wydajności.|  
|Nieprzezroczystość|Podczas renderowania 3W półprzezroczyste zawartości (takiej jak odbić), należy użyć właściwości nieprzezroczystość Pędzle lub materiałów (za pośrednictwem <xref:System.Windows.Media.Brush.Opacity%2A> lub <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) zamiast tworzenia oddzielnego półprzezroczyste <xref:System.Windows.Controls.Viewport3D> , ustawiając `Viewport3D.Opacity` do wartości mniejszej niż 1.|  
|<xref:System.Windows.Controls.Viewport3D>|Ogranicz liczbę <xref:System.Windows.Controls.Viewport3D> obiekty używane w scenie.  Umieść wiele modeli 3D w tej samej Viewport3D zamiast tworzenia osobnych wystąpieniach Viewport3D dla każdego modelu.|  
|<xref:System.Windows.Freezable>|Zazwyczaj korzystne jest ponownie użyć <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, pędzli i materiałów.  Wszystkie są multiparentable, ponieważ jest pochodną `Freezable`.|  
|<xref:System.Windows.Freezable>|Wywołaj <xref:System.Windows.Freezable.Freeze%2A> metody obiektów Freezable podczas ich właściwości pozostaną bez zmian w aplikacji.  Zamrażanie może zmniejszyć zestaw roboczy i zwiększyć szybkość.|  
|<xref:System.Windows.Media.Brush>|Użyj <xref:System.Windows.Media.ImageBrush> zamiast <xref:System.Windows.Media.VisualBrush> lub <xref:System.Windows.Media.DrawingBrush> po zawartości pędzla, który nie ulegnie zmianie.  2D zawartości mogą być konwertowane na <xref:System.Windows.Controls.Image> za pośrednictwem <xref:System.Windows.Media.Imaging.RenderTargetBitmap> i następnie używane w <xref:System.Windows.Media.ImageBrush>.|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|Nie używaj <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> o ile nie trzeba faktycznie obejrzenie powierzchni wstecz swoje <xref:System.Windows.Media.Media3D.GeometryModel3D>.|  
|<xref:System.Windows.Media.Media3D.Light>|Szybkość światła (najszybciej do najwolniejsze):<br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Próbuje zachować rozmiary siatki w ramach tych limitów:<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20 001 <xref:System.Windows.Media.Media3D.Point3D> wystąpień<br /><br /> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60,003 <xref:System.Int32> wystąpień|  
|<xref:System.Windows.Media.Media3D.Material>|Szybkość materiału (najszybciej do najwolniejsze):<br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3W nie zrezygnować z niewidoczne pędzle (czarne pędzle otoczenia, wyczyść pędzle itp.) w spójny sposób.  Należy wziąć pod uwagę, pomijając je z sceny.|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|Każdy <xref:System.Windows.Media.Media3D.Material> w <xref:System.Windows.Media.Media3D.MaterialGroup> powoduje, że inny renderowania — dostęp próbny, więc w tym wiele materiałów, nawet proste materiałów, mogą znacznie zwiększyć wzrostu wypełnienia procesor GPU.  Ogranicz liczbę materiałów w swojej <xref:System.Windows.Media.Media3D.MaterialGroup>.|  
  
## <a name="performance-impact-low"></a>Wpływ na wydajność: Małe  
  
|Właściwość|Zalecenie|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|Gdy nie ma potrzeby animacji lub wiązania danych, zamiast przy użyciu transformacji grupy zawierające wiele przekształceń, używaj pojedynczej <xref:System.Windows.Media.Media3D.MatrixTransform3D>, zostanie ustawiona jako produkt przekształcenia, które w przeciwnym razie istniałby niezależnie w grupie transformacji.|  
|<xref:System.Windows.Media.Media3D.Light>|Ogranicz liczbę światła w scenie usługi. Spowoduje to wymuszenie zbyt wiele światła w scenie [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] powrotu do renderowania oprogramowania.  Ograniczenia są w przybliżeniu 110 <xref:System.Windows.Media.Media3D.DirectionalLight> obiektów, 70 <xref:System.Windows.Media.Media3D.PointLight> obiektów lub 40 <xref:System.Windows.Media.Media3D.SpotLight> obiektów.|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|Oddziel przenoszenia obiektów z obiektów statycznych przez umieszczenie ich w oddzielnych <xref:System.Windows.Media.Media3D.ModelVisual3D> wystąpień.  ModelVisual3D jest "bardziej rozbudowanej" niż <xref:System.Windows.Media.Media3D.GeometryModel3D> ponieważ go zapisuje w pamięci podręcznej po przekształceniu granic.  GeometryModel3D jest zoptymalizowany do modelu; ModelVisual3D jest zoptymalizowany do węzła sceny.  Użyj ModelVisual3D, aby umieścić udostępnionego wystąpienia elementu GeometryModel3D w scenie.|  
|<xref:System.Windows.Media.Media3D.Light>|Ogranicz liczbę razy, możesz zmienić liczbę światła w scenie.  Każda zmiana liczby niewielkich wymusza ponowne generowanie programu do cieniowania i ponownej kompilacji, chyba że konfiguracji istniało wcześniej (i dlatego ma jego programu do cieniowania pamięci podręcznej).|  
|Światła|Czarne światła nie będzie widoczny, ale dodają do renderowania w czasie. należy wziąć pod uwagę, pomijając je.|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|Aby zminimalizować czas konstrukcji dużych kolekcji w [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], takich jak MeshGeometry3D <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>, i <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, wstępnie rozmiar kolekcji przed wartością populacji. Jeśli to możliwe należy przekazać struktury danych wstępnie wypełnionych konstruktory kolekcji, takich jak tablice i listy.|  
  
## <a name="see-also"></a>Zobacz także

- [Przegląd Grafika 3-D](3-d-graphics-overview.md)
