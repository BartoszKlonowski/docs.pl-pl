---
title: Sposoby lokalizowania zestawów przez środowisko uruchomieniowe
ms.date: 03/30/2017
helpviewer_keywords:
- app.config files, assembly locations
- deploying applications [.NET Framework], assembly locations
- application configuration files, locating assemblies
- .NET Framework application deployment, locating assemblies
- locating assemblies
- assemblies [.NET Framework], location
ms.assetid: 772ac6f4-64d2-4cfb-92fd-58096dcd6c34
author: mairaw
ms.author: mairaw
ms.openlocfilehash: 073cb8c13f6bf94ad6f0276b76e6bd1a3d35eb41
ms.sourcegitcommit: 586dbdcaef9767642436b1e4efbe88fb15473d6f
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/06/2018
ms.locfileid: "48841642"
---
# <a name="how-the-runtime-locates-assemblies"></a><span data-ttu-id="0b7ab-102">Sposoby lokalizowania zestawów przez środowisko uruchomieniowe</span><span class="sxs-lookup"><span data-stu-id="0b7ab-102">How the Runtime Locates Assemblies</span></span>
<span data-ttu-id="0b7ab-103">Aby pomyślnie wdrożyć aplikacji środowiska .NET Framework, trzeba zrozumieć, jak środowisko uruchomieniowe języka wspólnego lokalizuje i wiąże się do zestawów, które składają się na aplikację.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-103">To successfully deploy your .NET Framework application, you must understand how the common language runtime locates and binds to the assemblies that make up your application.</span></span> <span data-ttu-id="0b7ab-104">Domyślnie środowisko uruchomieniowe podejmuje próbę powiązania z dokładną wersją zestawu, który aplikacja została skompilowana przy użyciu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-104">By default, the runtime attempts to bind with the exact version of an assembly that the application was built with.</span></span> <span data-ttu-id="0b7ab-105">To zachowanie domyślne można przesłonić, ustawień pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-105">This default behavior can be overridden by configuration file settings.</span></span>  
  
 <span data-ttu-id="0b7ab-106">Środowisko uruchomieniowe języka wspólnego wykonuje kilka kroków, podczas próby zlokalizowania zestawu i rozwiązać odwołania do zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-106">The common language runtime performs a number of steps when attempting to locate an assembly and resolve an assembly reference.</span></span> <span data-ttu-id="0b7ab-107">Każdy krok jest szczegółowo opisane w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-107">Each step is explained in the following sections.</span></span> <span data-ttu-id="0b7ab-108">Sondowanie termin jest często używana, gdy opisujące, jak środowisko uruchomieniowe lokalizuje zestawy; odwołuje się do zestawu algorytmów heurystycznych używana do lokalizowania zestawów na podstawie jego nazwy i kultury.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-108">The term probing is often used when describing how the runtime locates assemblies; it refers to the set of heuristics used to locate the assembly based on its name and culture.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0b7ab-109">Informacje o powiązaniu można wyświetlić w pliku dziennika, używając [Assembly Binding Log Viewer (Fuslogvw.exe)](../../../docs/framework/tools/fuslogvw-exe-assembly-binding-log-viewer.md), który znajduje się w [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b7ab-109">You can view binding information in the log file using the [Assembly Binding Log Viewer (Fuslogvw.exe)](../../../docs/framework/tools/fuslogvw-exe-assembly-binding-log-viewer.md), which is included in the [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].</span></span>  
  
## <a name="initiating-the-bind"></a><span data-ttu-id="0b7ab-110">Inicjowanie powiązania</span><span class="sxs-lookup"><span data-stu-id="0b7ab-110">Initiating the Bind</span></span>  
 <span data-ttu-id="0b7ab-111">Rozpocznie się proces lokalizowania i powiązanie zestawu, gdy środowisko uruchomieniowe próbuje rozpoznać odwołania do innego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-111">The process of locating and binding to an assembly begins when the runtime attempts to resolve a reference to another assembly.</span></span> <span data-ttu-id="0b7ab-112">Ta dokumentacja może być statyczne lub dynamiczne.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-112">This reference can be either static or dynamic.</span></span> <span data-ttu-id="0b7ab-113">Kompilator odwołań statycznych rekordów w metadanych manifestu zestawu w czasie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-113">The compiler records static references in the assembly manifest's metadata at build time.</span></span> <span data-ttu-id="0b7ab-114">Odwołania dynamiczne są zbudowane na bieżąco w wyniku wywołania różnych metod, takich jak <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-114">Dynamic references are constructed on the fly as a result of calling various methods, such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="0b7ab-115">Preferowanym sposobem odwołanie do zestawu jest używać pełną dokumentację, w tym nazwę zestawu, wersji, kulturę i token klucza publicznego (jeśli istnieje).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-115">The preferred way to reference an assembly is to use a full reference, including the assembly name, version, culture, and public key token (if one exists).</span></span> <span data-ttu-id="0b7ab-116">Środowisko wykonawcze używa tych informacji do lokalizowania zestawów, wykonując kroki opisane w dalszej części w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-116">The runtime uses this information to locate the assembly, following the steps described later in this section.</span></span> <span data-ttu-id="0b7ab-117">Środowisko wykonawcze używa tego samego procesu rozpoznawania niezależnie od tego, czy odwołanie do zestawu statyczne lub dynamiczne.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-117">The runtime uses the same resolution process regardless of whether the reference is for a static or dynamic assembly.</span></span>  
  
 <span data-ttu-id="0b7ab-118">Należy również wybrać dynamiczny odwołania do zestawu, udostępniając wywoływania metody tylko częściowe informacje o zestawie, takich jak określanie tylko nazwę zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-118">You can also make a dynamic reference to an assembly by providing the calling method with only partial information about the assembly, such as specifying only the assembly name.</span></span> <span data-ttu-id="0b7ab-119">W tym przypadku katalogu aplikacji jest wyszukiwana w zestawie, a nie inne sprawdzanie jest wykonywane.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-119">In this case, only the application directory is searched for the assembly, and no other checking occurs.</span></span> <span data-ttu-id="0b7ab-120">Wprowadzić częściowe odwołanie przy użyciu dowolnej z różnych metod, takich jak ładowanie zestawów <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> lub <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-120">You make a partial reference using any of the various methods for loading assemblies such as <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType> or <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>.</span></span>  
  
 <span data-ttu-id="0b7ab-121">Na koniec można zrobić Odnośnik dynamicznych przy użyciu metody, takie jak <xref:System.Reflection.Assembly.Load*?displayProperty=nameWithType> i zapewnia tylko częściowe informacje; następnie kwalifikujesz się do odwołania, za pomocą [ \<qualifyassembly — >](../../../docs/framework/configure-apps/file-schema/runtime/qualifyassembly-element.md) elementu w aplikacji plik konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-121">Finally, you can make a dynamic reference using a method such as <xref:System.Reflection.Assembly.Load*?displayProperty=nameWithType> and provide only partial information; you then qualify the reference using the [\<qualifyAssembly>](../../../docs/framework/configure-apps/file-schema/runtime/qualifyassembly-element.md) element in the application configuration file.</span></span> <span data-ttu-id="0b7ab-122">Ten element umożliwia podanie pełne informacje (nazwę, wersję, kulturę i, jeśli ma to zastosowanie, token klucza publicznego) w pliku konfiguracyjnym aplikacji zamiast w kodzie.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-122">This element allows you to provide the full reference information (name, version, culture and, if applicable, the public key token) in your application configuration file instead of in your code.</span></span> <span data-ttu-id="0b7ab-123">Należy użyć tej techniki Chcąc pełnej kwalifikacji odwołania do zestawu poza katalogiem aplikacji lub jeśli chcesz odwołać się do zestawu w globalnej pamięci podręcznej, ale potrzebowała wygodę określający pełną dokumentację w plik konfiguracji zamiast w kodzie.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-123">You would use this technique if you wanted to fully qualify a reference to an assembly outside the application directory, or if you wanted to reference an assembly in the global assembly cache but you wanted the convenience of specifying the full reference in the configuration file instead of in your code.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0b7ab-124">Nie można używać tego rodzaju częściowe odwołanie za pomocą zestawów, które są współużytkowane przez kilka aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-124">This type of partial reference should not be used with assemblies that are shared among several applications.</span></span> <span data-ttu-id="0b7ab-125">Ponieważ ustawienia konfiguracji są stosowane na aplikację, a nie zestaw, zestaw współużytkowany przy użyciu tego typu częściowe odwołanie wymagałoby każdej aplikacji przy użyciu zestaw współużytkowany kwalifikacji informacje znajdują się w jego pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-125">Because configuration settings are applied per application and not per assembly, a shared assembly using this type of partial reference would require each application using the shared assembly to have the qualifying information in its configuration file.</span></span>  
  
 <span data-ttu-id="0b7ab-126">Środowisko wykonawcze używa następujące kroki, aby rozwiązać odwołania do zestawu:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-126">The runtime uses the following steps to resolve an assembly reference:</span></span>  
  
1.  <span data-ttu-id="0b7ab-127">[Określa wersję poprawny zestaw](#step1) , sprawdzając właściwych plików konfiguracji, w tym pliku konfiguracji aplikacji, plik zasad wydawcy i plik konfiguracji komputera.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-127">[Determines the correct assembly version](#step1) by examining applicable configuration files, including the application configuration file, publisher policy file, and machine configuration file.</span></span> <span data-ttu-id="0b7ab-128">Jeśli plik konfiguracji znajduje się na komputerze zdalnym, środowisko uruchomieniowe należy zlokalizować i najpierw pobrać plik konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-128">If the configuration file is located on a remote machine, the runtime must locate and download the application configuration file first.</span></span>  
  
2.  <span data-ttu-id="0b7ab-129">[Sprawdza, czy nazwa zestawu została powiązana z przed](#step2) i jeśli tak, korzysta z wcześniej załadowanych zestawów.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-129">[Checks whether the assembly name has been bound to before](#step2) and, if so, uses the previously loaded assembly.</span></span> <span data-ttu-id="0b7ab-130">Jeśli poprzednie żądanie załadowania zestawu nie powiodło się żądanie nie powiodło się natychmiast bez próby załadowania zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-130">If a previous request to load the assembly failed, the request is failed immediately without attempting to load the assembly.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="0b7ab-131">Buforowanie niepowodzenia powiązań zestawu jest nowa w .NET Framework w wersji 2.0.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-131">The caching of assembly binding failures is new in the .NET Framework version 2.0.</span></span>  
  
3.  <span data-ttu-id="0b7ab-132">[Sprawdza, czy global assembly cache](#step3).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-132">[Checks the global assembly cache](#step3).</span></span> <span data-ttu-id="0b7ab-133">Jeśli zestaw zostanie znaleziony istnieje, środowisko wykonawcze używa tego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-133">If the assembly is found there, the runtime uses this assembly.</span></span>  
  
4.  <span data-ttu-id="0b7ab-134">[Sondy dla zestawu](#step4) wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-134">[Probes for the assembly](#step4) using the following steps:</span></span>  
  
    1.  <span data-ttu-id="0b7ab-135">Jeśli zasady konfiguracji i wydawca nie wpływają na pierwotne odniesienie, a żądania powiązania został utworzony przy użyciu <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> metody, środowisko uruchomieniowe sprawdza, czy wskazówki dotyczące lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-135">If configuration and publisher policy do not affect the original reference and if the bind request was created using the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method, the runtime checks for location hints.</span></span>  
  
    2.  <span data-ttu-id="0b7ab-136">Jeśli baza kodu znajduje się w plikach konfiguracji, środowisko uruchomieniowe sprawdza tylko w tej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-136">If a codebase is found in the configuration files, the runtime checks only this location.</span></span> <span data-ttu-id="0b7ab-137">Jeśli sonda nie powiedzie się, środowisko wykonawcze określa, że żądania powiązania nie powiodło się, a nie inne sondowanie występuje.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-137">If this probe fails, the runtime determines that the binding request failed and no other probing occurs.</span></span>  
  
    3.  <span data-ttu-id="0b7ab-138">Sondy dla zestawu przy użyciu algorytmów heurystycznych opisanego w [sondowania, sekcja](#step4).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-138">Probes for the assembly using the heuristics described in the [probing section](#step4).</span></span> <span data-ttu-id="0b7ab-139">Jeśli zestaw nie zostanie znaleziony po badania, środowisko uruchomieniowe zażąda Instalatora Windows, aby zapewnić zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-139">If the assembly is not found after probing, the runtime requests the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="0b7ab-140">Jest to zabezpieczenie jako funkcja instalacji na żądanie.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-140">This acts as an install-on-demand feature.</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="0b7ab-141">Wersja sprawdzania pod kątem zestawy bez silnej nazwy nie jest ani środowisko uruchomieniowe sprawdza w globalnej pamięci podręcznej zestawy bez silnej nazwy.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-141">There is no version checking for assemblies without strong names, nor does the runtime check in the global assembly cache for assemblies without strong names.</span></span>  
  
<a name="step1"></a>   
## <a name="step-1-examining-the-configuration-files"></a><span data-ttu-id="0b7ab-142">Krok 1. Badanie plików konfiguracji</span><span class="sxs-lookup"><span data-stu-id="0b7ab-142">Step 1: Examining the Configuration Files</span></span>  
 <span data-ttu-id="0b7ab-143">Zachowanie powiązań zestawów, można skonfigurować na różnych poziomach w oparciu o trzy pliki XML:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-143">Assembly binding behavior can be configured at different levels based on three XML files:</span></span>  
  
-   <span data-ttu-id="0b7ab-144">Plik konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-144">Application configuration file.</span></span>  
  
-   <span data-ttu-id="0b7ab-145">Plik zasad wydawcy.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-145">Publisher policy file.</span></span>  
  
-   <span data-ttu-id="0b7ab-146">Plik konfiguracji komputera.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-146">Machine configuration file.</span></span>  
  
 <span data-ttu-id="0b7ab-147">Te pliki, postępuj zgodnie z tej samej składni i podać informacje takie jak przekierowania, lokalizację kodu, powiązań i powiązania tryby dla danego zestawów.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-147">These files follow the same syntax and provide information such as binding redirects, the location of code, and binding modes for particular assemblies.</span></span> <span data-ttu-id="0b7ab-148">Każdy plik konfiguracji może zawierać [ \<assemblyBinding > element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) który przekierowuje proces wiązania.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-148">Each configuration file can contain an [\<assemblyBinding> element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) that redirects the binding process.</span></span> <span data-ttu-id="0b7ab-149">Elementy podrzędne [ \<assemblyBinding > element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) obejmują [ \<dependentAssembly > element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-149">The child elements of the [\<assemblyBinding> element](../../../docs/framework/configure-apps/file-schema/runtime/assemblybinding-element-for-runtime.md) include the [\<dependentAssembly> element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md).</span></span> <span data-ttu-id="0b7ab-150">Elementy podrzędne [ \<dependentAssembly > element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md) obejmują [ \<assemblyIdentity > element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), [ \<bindingRedirect > element](../../../docs/framework/configure-apps/file-schema/runtime/bindingredirect-element.md)i [ \<codeBase > element](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-150">The children of [\<dependentAssembly> element](../../../docs/framework/configure-apps/file-schema/runtime/dependentassembly-element.md) include the [\<assemblyIdentity> element](/visualstudio/deployment/assemblyidentity-element-clickonce-deployment), the [\<bindingRedirect> element](../../../docs/framework/configure-apps/file-schema/runtime/bindingredirect-element.md), and the [\<codeBase> element](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0b7ab-151">Informacje o konfiguracji można znaleźć w plikach konfiguracyjnych trzy; nie wszystkie elementy są prawidłowe we wszystkich plikach konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-151">Configuration information can be found in the three configuration files; not all elements are valid in all configuration files.</span></span> <span data-ttu-id="0b7ab-152">Na przykład powiązanie tryb i informacje o ścieżce prywatnej można tylko w pliku konfiguracyjnym aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-152">For example, binding mode and private path information can only be in the application configuration file.</span></span> <span data-ttu-id="0b7ab-153">Aby uzyskać pełną listę informacji, który znajduje się w każdym pliku, zobacz [Konfigurowanie aplikacji przy użyciu plików konfiguracyjnych](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-153">For a complete list of the information that is contained in each file, see [Configuring Apps by Using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
### <a name="application-configuration-file"></a><span data-ttu-id="0b7ab-154">Plik konfiguracji aplikacji</span><span class="sxs-lookup"><span data-stu-id="0b7ab-154">Application Configuration File</span></span>  
 <span data-ttu-id="0b7ab-155">Środowisko uruchomieniowe języka wspólnego sprawdza najpierw, pliku konfiguracji aplikacji, aby uzyskać informacje, które zastępuje informacje o wersji przechowywanych w manifeście zestawu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-155">First, the common language runtime checks the application configuration file for information that overrides the version information stored in the calling assembly's manifest.</span></span> <span data-ttu-id="0b7ab-156">Plik konfiguracji aplikacji można wdrożyć za pomocą aplikacji, ale nie jest wymagany do wykonania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-156">The application configuration file can be deployed with an application, but is not required for application execution.</span></span> <span data-ttu-id="0b7ab-157">Pobieranie tego pliku jest zazwyczaj niemal natychmiast, ale w sytuacjach, gdzie podstawa aplikacji jest na komputerze zdalnym, takie jak w scenariuszu z programu Internet Explorer na podstawie pliku konfiguracji należy go najpierw pobrać.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-157">Usually the retrieval of this file is almost instantaneous, but in situations where the application base is on a remote computer, such as in an Internet Explorer Web-based scenario, the configuration file must be downloaded.</span></span>  
  
 <span data-ttu-id="0b7ab-158">Dla plików wykonywalnych klienta pliku konfiguracji aplikacji znajduje się w tym samym katalogu co plik wykonywalny aplikacji i ma taką samą nazwę jak plik wykonywalny z dołączonym rozszerzeniem .config.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-158">For client executables, the application configuration file resides in the same directory as the application's executable and has the same base name as the executable with a .config extension.</span></span> <span data-ttu-id="0b7ab-159">Na przykład plik konfiguracji C:\Program Files\Myapp\Myapp.exe jest C:\Program Files\Myapp\Myapp.exe.config. W przypadku scenariusza opartego na przeglądarce, należy użyć pliku HTML  **\<link >** element, aby jawnie wskazać plik konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-159">For example, the configuration file for C:\Program Files\Myapp\Myapp.exe is C:\Program Files\Myapp\Myapp.exe.config. In a browser-based scenario, the HTML file must use the **\<link>** element to explicitly point to the configuration file.</span></span>  
  
 <span data-ttu-id="0b7ab-160">Poniższy kod stanowi prosty przykład plik konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-160">The following code provides a simple example of an application configuration file.</span></span> <span data-ttu-id="0b7ab-161">Ten przykład dodaje <xref:System.Diagnostics.TextWriterTraceListener> do <xref:System.Diagnostics.Debug.Listeners%2A> kolekcji, aby włączyć rejestrowanie informacji debugowania do pliku.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-161">This example adds a <xref:System.Diagnostics.TextWriterTraceListener> to the <xref:System.Diagnostics.Debug.Listeners%2A> collection to enable recording debug information to a file.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <trace useGlobalLock="false" autoflush="true" indentsize="0">  
         <listeners>  
            <add name="myListener" type="System.Diagnostics.TextWriterTraceListener, system version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" initializeData="c:\myListener.log" />  
         </listeners>  
      </trace>  
   </system.diagnostics>  
</configuration>  
```  
  
### <a name="publisher-policy-file"></a><span data-ttu-id="0b7ab-162">Plik zasad wydawcy</span><span class="sxs-lookup"><span data-stu-id="0b7ab-162">Publisher Policy File</span></span>  
 <span data-ttu-id="0b7ab-163">Po drugie środowisko uruchomieniowe sprawdza, czy plik zasad wydawcy, jeśli taka istnieje.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-163">Second, the runtime examines the publisher policy file, if one exists.</span></span> <span data-ttu-id="0b7ab-164">Pliki zasad wydawcy są dystrybuowane przez wydawcę składnika jako poprawki lub aktualizacji, aby współużytkowanego składnika.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-164">Publisher policy files are distributed by a component publisher as a fix or update to a shared component.</span></span> <span data-ttu-id="0b7ab-165">Te pliki zawierają informacje o zgodności wydany przez wydawcę współużytkowanego składnika, który kieruje odwołania do zestawu do nowej wersji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-165">These files contain compatibility information issued by the publisher of the shared component that directs an assembly reference to a new version.</span></span> <span data-ttu-id="0b7ab-166">W przeciwieństwie do aplikacji i plików konfiguracji maszyny pliki zasad wydawcy znajdują się w ich własnych zestawu, który musi być zainstalowany w globalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-166">Unlike application and machine configuration files, publisher policy files are contained in their own assembly that must be installed in the global assembly cache.</span></span>  
  
 <span data-ttu-id="0b7ab-167">Oto przykładowy plik konfiguracji zasad wydawcy:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-167">The following is an example of a Publisher Policy configuration file:</span></span>  
  
```xml  
<configuration>  
    <runtime>  
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">  
  
            <dependentAssembly>  
                <assemblyIdentity name="asm6" publicKeyToken="c0305c36380ba429" />   
                <bindingRedirect oldVersion="3.0.0.0" newVersion="2.0.0.0"/>    
            </dependentAssembly>  
  
        </assemblyBinding>  
    </runtime>  
</configuration>  
```  
  
 <span data-ttu-id="0b7ab-168">Aby utworzyć zespół, można użyć [Al.exe (Assembly Linker)](../../../docs/framework/tools/al-exe-assembly-linker.md) narzędzie za pomocą polecenia podobny do następującego:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-168">To create an assembly, you can use the [Al.exe (Assembly Linker)](../../../docs/framework/tools/al-exe-assembly-linker.md) tool with a command such as the following:</span></span>  
  
```  
Al.exe /link:asm6.exe.config /out:policy.3.0.asm6.dll /keyfile: compatkey.dat /v:3.0.0.0  
```  
  
 <span data-ttu-id="0b7ab-169">`compatkey.dat` jest plik klucza o silnej nazwie.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-169">`compatkey.dat` is a strong-name key file.</span></span> <span data-ttu-id="0b7ab-170">To polecenie tworzy zestaw o silnej nazwie, który można umieścić w globalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-170">This command creates a strong-named assembly you can place in the global assembly cache.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0b7ab-171">Zasady wydawcy ma wpływ na wszystkie aplikacje, które używają składnika współużytkowanego.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-171">Publisher policy affects all applications that use a shared component.</span></span>  
  
 <span data-ttu-id="0b7ab-172">Plik konfiguracji zasad wydawcy zastępuje informacje o wersji, który pochodzi z aplikacji (czyli z manifestu zestawu lub pliku konfiguracji aplikacji).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-172">The publisher policy configuration file overrides version information that comes from the application (that is, from the assembly manifest or from the application configuration file).</span></span> <span data-ttu-id="0b7ab-173">Jeśli nie ma żadnego oświadczenia w pliku konfiguracyjnym aplikacji, aby przekierować wersja określona w manifeście zestawu, plik zasad wydawcy zastępuje wersja określona w manifeście zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-173">If there is no statement in the application configuration file to redirect the version specified in the assembly manifest, the publisher policy file overrides the version specified in the assembly manifest.</span></span> <span data-ttu-id="0b7ab-174">Jednak w przypadku przekierowania instrukcja w pliku konfiguracyjnym aplikacji, zasady wydawcy zastępuje tę wersję, a nie określona w manifeście.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-174">However, if there is a redirecting statement in the application configuration file, publisher policy overrides that version rather than the one specified in the manifest.</span></span>  
  
 <span data-ttu-id="0b7ab-175">Plik zasad wydawcy jest używany, gdy współużytkowany składnik jest aktualizowana, a nową wersję składnika współużytkowanego powinny zostać pobrana przez wszystkie aplikacje używające tego składnika.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-175">A publisher policy file is used when a shared component is updated and the new version of the shared component should be picked up by all applications using that component.</span></span> <span data-ttu-id="0b7ab-176">Ustawienia w pliku zasad wydawcy przesłonić ustawienia w pliku konfiguracyjnym aplikacji, chyba, że plik konfiguracyjny aplikacji wymusza tryb awaryjny.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-176">The settings in the publisher policy file override settings in the application configuration file, unless the application configuration file enforces safe mode.</span></span>  
  
#### <a name="safe-mode"></a><span data-ttu-id="0b7ab-177">Tryb awaryjny</span><span class="sxs-lookup"><span data-stu-id="0b7ab-177">Safe Mode</span></span>  
 <span data-ttu-id="0b7ab-178">Pliki zasad wydawcy zazwyczaj jawnie są instalowane w ramach usługi aktualizacji pakietu lub programu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-178">Publisher policy files are usually explicitly installed as part of a service pack or program update.</span></span> <span data-ttu-id="0b7ab-179">Jeśli występuje problem z uaktualnionego współużytkowanego składnika, możesz zignorować przesłonięć w trybie awaryjnym plik zasad wydawcy.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-179">If there is any problem with the upgraded shared component, you can ignore the overrides in the publisher policy file using safe mode.</span></span> <span data-ttu-id="0b7ab-180">Tryb awaryjny jest określana przez  **\<zastosować publisherPolicy = "tak**&#124;**nie" / >** elementu, znajduje się tylko w pliku konfiguracyjnym aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-180">Safe mode is determined by the **\<publisherPolicy apply="yes**&#124;**no"/>** element, located only in the application configuration file.</span></span> <span data-ttu-id="0b7ab-181">Określa, czy informacje o konfiguracji zasad wydawcy, powinny zostać usunięte z proces wiązania.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-181">It specifies whether the publisher policy configuration information should be removed from the binding process.</span></span>  
  
 <span data-ttu-id="0b7ab-182">Tryb awaryjny można ustawić dla całej aplikacji lub dla wybranych zestawów.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-182">Safe mode can be set for the entire application or for selected assemblies.</span></span> <span data-ttu-id="0b7ab-183">Oznacza to możesz wyłączyć zasady dla wszystkich zestawów, które tworzą aplikację lub włącz ją dla niektórych zestawów, ale innych nie.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-183">That is, you can turn off the policy for all assemblies that make up the application, or turn it on for some assemblies but not others.</span></span> <span data-ttu-id="0b7ab-184">Aby wybiórczo zastosować zasady wydawcy do zestawów tworzących aplikację, należy ustawić  **\<zastosować publisherPolicy\=nie / >** i określić zestawy, które mają zostać zmienione, za pomocą \< **dependentAssembly**> element.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-184">To selectively apply publisher policy to assemblies that make up an application, set **\<publisherPolicy apply\=no/>** and specify which assemblies you want to be affected using the \<**dependentAssembly**> element.</span></span> <span data-ttu-id="0b7ab-185">Aby zastosować zasady wydawcy do wszystkich zestawów, które tworzą aplikację, należy ustawić  **\<zastosować publisherPolicy\=nie / >** bez elementów zestawu zależnego.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-185">To apply publisher policy to all assemblies that make up the application, set **\<publisherPolicy apply\=no/>** with no dependent assembly elements.</span></span> <span data-ttu-id="0b7ab-186">Aby uzyskać więcej informacji o konfiguracji, zobacz [Konfigurowanie aplikacji za pomocą plików konfiguracji](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-186">For more about configuration, see [Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
### <a name="machine-configuration-file"></a><span data-ttu-id="0b7ab-187">Plik konfiguracji komputera</span><span class="sxs-lookup"><span data-stu-id="0b7ab-187">Machine Configuration File</span></span>  
 <span data-ttu-id="0b7ab-188">Po trzecie środowisko uruchomieniowe sprawdza, czy plik konfiguracji komputera.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-188">Third, the runtime examines the machine configuration file.</span></span> <span data-ttu-id="0b7ab-189">Ten plik o nazwie Machine.config — znajduje się na komputerze lokalnym w podkatalogu Config katalog główny, w którym zainstalowano środowiska wykonawczego.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-189">This file, called Machine.config, resides on the local computer in the Config subdirectory of the root directory where the runtime is installed.</span></span> <span data-ttu-id="0b7ab-190">Ten plik może służyć przez administratorów do określenia zestawu powiązania ograniczenia, które są lokalne na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-190">This file can be used by administrators to specify assembly binding restrictions that are local to that computer.</span></span> <span data-ttu-id="0b7ab-191">Ustawienia w pliku konfiguracji komputera mają pierwszeństwo przed wszystkie inne ustawienia konfiguracji; jednak oznacza to, że wszystkie ustawienia konfiguracji należy umieścić w tym pliku.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-191">The settings in the machine configuration file take precedence over all other configuration settings; however, this does not mean that all configuration settings should be put in this file.</span></span> <span data-ttu-id="0b7ab-192">Wersja określona przez plik zasad administrator jest ostateczne i nie może być zastąpiona.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-192">The version determined by the administrator policy file is final, and cannot be overridden.</span></span> <span data-ttu-id="0b7ab-193">Określone w pliku Machine.config zastąpienia wpływają na wszystkie aplikacje.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-193">Overrides specified in the Machine.config file affect all applications.</span></span> <span data-ttu-id="0b7ab-194">Aby uzyskać więcej informacji na temat plików konfiguracyjnych, zobacz [Konfigurowanie aplikacji za pomocą plików konfiguracji](../../../docs/framework/configure-apps/index.md).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-194">For more information about configuration files, see [Configuring Apps by using Configuration Files](../../../docs/framework/configure-apps/index.md).</span></span>  
  
<a name="step2"></a>   
## <a name="step-2-checking-for-previously-referenced-assemblies"></a><span data-ttu-id="0b7ab-195">Krok 2. Sprawdzanie zestawów poprzednio występujących w odwołaniu</span><span class="sxs-lookup"><span data-stu-id="0b7ab-195">Step 2: Checking for Previously Referenced Assemblies</span></span>  
 <span data-ttu-id="0b7ab-196">Jeśli żądany zestaw zażądano również w poprzednich wywołań, środowisko uruchomieniowe języka wspólnego używa zestawu, który jest już załadowany.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-196">If the requested assembly has also been requested in previous calls, the common language runtime uses the assembly that is already loaded.</span></span> <span data-ttu-id="0b7ab-197">Podczas nadawania nazw zestawów tworzących aplikację, może to mieć konsekwencje.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-197">This can have ramifications when naming assemblies that make up an application.</span></span> <span data-ttu-id="0b7ab-198">Aby uzyskać więcej informacji na temat nazewnictwa zestawów, zobacz [nazw zestawów](../../../docs/framework/app-domains/assembly-names.md).</span><span class="sxs-lookup"><span data-stu-id="0b7ab-198">For more information about naming assemblies, see [Assembly Names](../../../docs/framework/app-domains/assembly-names.md).</span></span>  
  
 <span data-ttu-id="0b7ab-199">Jeśli poprzednie żądanie dla zestawu nie powiodło się, kolejne żądania dla zestawu są nie powiodło się natychmiast bez próby załadowania zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-199">If a previous request for the assembly failed, subsequent requests for the assembly are failed immediately without attempting to load the assembly.</span></span> <span data-ttu-id="0b7ab-200">Począwszy od programu .NET Framework w wersji 2.0, niepowodzenia powiązań zestawu są buforowane i buforowane informacje są używane do określenia, czy podejmie próbę załadowania zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-200">Starting with the .NET Framework version 2.0, assembly binding failures are cached, and the cached information is used to determine whether to attempt to load the assembly.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0b7ab-201">Aby przywrócić działanie programu .NET Framework w wersji 1.0 i 1.1, który nie pamięci podręcznej niepowodzenia powiązań, należy dołączyć [ \<disablecachingbindingfailures — > Element](../../../docs/framework/configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-201">To revert to the behavior of the .NET Framework versions 1.0 and 1.1, which did not cache binding failures, include the [\<disableCachingBindingFailures> Element](../../../docs/framework/configure-apps/file-schema/runtime/disablecachingbindingfailures-element.md) in your configuration file.</span></span>  
  
<a name="step3"></a>   
## <a name="step-3-checking-the-global-assembly-cache"></a><span data-ttu-id="0b7ab-202">Krok 3. Sprawdzanie globalnej pamięci podręcznej zestawów</span><span class="sxs-lookup"><span data-stu-id="0b7ab-202">Step 3: Checking the Global Assembly Cache</span></span>  
 <span data-ttu-id="0b7ab-203">W przypadku zestawów o silnych nazwach powiązania proces jest kontynuowany przez wyszukiwanie w globalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-203">For strong-named assemblies, the binding process continues by looking in the global assembly cache.</span></span> <span data-ttu-id="0b7ab-204">Global assembly cache przechowuje zestawy, które mogą być używane przez kilka aplikacji na komputerze.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-204">The global assembly cache stores assemblies that can be used by several applications on a computer.</span></span> <span data-ttu-id="0b7ab-205">Wszystkie zestawy w globalnej pamięci podręcznej muszą mieć silnej nazwy.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-205">All assemblies in the global assembly cache must have strong names.</span></span>  
  
<a name="step4"></a>   
## <a name="step-4-locating-the-assembly-through-codebases-or-probing"></a><span data-ttu-id="0b7ab-206">Krok 4. Lokalizowanie zestawu za pośrednictwem ścieżek bazowych kodu lub sondowania</span><span class="sxs-lookup"><span data-stu-id="0b7ab-206">Step 4: Locating the Assembly through Codebases or Probing</span></span>  
 <span data-ttu-id="0b7ab-207">Po określeniu wersji poprawny zestaw, korzystając z informacji w odwołaniu do wywołującego zestawu i w plikach konfiguracji, a po jego zaewidencjonowanego w globalnej pamięci podręcznej (tylko w przypadku zestawu o silnych nazwach), języka wspólnego środowisko uruchomieniowe próbuje znaleźć zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-207">After the correct assembly version has been determined by using the information in the calling assembly's reference and in the configuration files, and after it has checked in the global assembly cache (only for strong-named assemblies), the common language runtime attempts to find the assembly.</span></span> <span data-ttu-id="0b7ab-208">Proces lokalizowania zestawów obejmuje następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-208">The process of locating an assembly involves the following steps:</span></span>  
  
1.  <span data-ttu-id="0b7ab-209">Jeśli [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element zostanie znaleziony w pliku konfiguracyjnym aplikacji, środowisko uruchomieniowe sprawdza określonej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-209">If a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is found in the application configuration file, the runtime checks the specified location.</span></span> <span data-ttu-id="0b7ab-210">Jeśli zostanie znalezione dopasowanie, że zestaw jest używany i badania nie występuje.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-210">If a match is found, that assembly is used and no probing occurs.</span></span> <span data-ttu-id="0b7ab-211">Jeśli zestaw nie zostaną znalezione, żądania powiązania nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-211">If the assembly is not found there, the binding request fails.</span></span>  
  
2.  <span data-ttu-id="0b7ab-212">Środowisko uruchomieniowe następnie sondy dla przywoływanego zestawu za pomocą reguł określonych w dalszej części w tej sekcji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-212">The runtime then probes for the referenced assembly using the rules specified later in this section.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0b7ab-213">Jeśli masz wiele wersji zestawu w katalogu i chcesz odwoływać się do konkretnej wersji tego zestawu, należy użyć [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu zamiast `privatePath` atrybutu [ \<sondowanie >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) elementu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-213">If you have multiple versions of an assembly in a directory and you want to reference a particular version of that assembly, you must use the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element instead of the `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="0b7ab-214">Jeśli używasz [ \<sondowanie >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) elementu, środowisko uruchomieniowe zatrzymuje sondowanie znajdzie zestawu, który jest zgodna z nazwą prostego zestawu, do których odwołuje się, czy jest poprawny dopasowania po raz pierwszy.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-214">If you use the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element, the runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="0b7ab-215">Jeśli jest to poprawne dopasowanie, tego zestawu jest używana.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-215">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="0b7ab-216">Jeśli nie ma prawidłowego dopasowania sondowanie zatrzymuje i powiązanie kończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-216">If it is not a correct match, probing stops and binding fails.</span></span>  
  
### <a name="locating-the-assembly-through-codebases"></a><span data-ttu-id="0b7ab-217">Lokalizowanie zestawu za pośrednictwem ścieżek bazowych kodu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-217">Locating the Assembly through Codebases</span></span>  
 <span data-ttu-id="0b7ab-218">Codebase informacje mogą być dostępne za pomocą [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu w pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-218">Codebase information can be provided by using a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in a configuration file.</span></span> <span data-ttu-id="0b7ab-219">Ta baza kodu zawsze jest sprawdzany, zanim spróbuje sondowania dla przywoływanego zestawu środowisko uruchomieniowe.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-219">This codebase is always checked before the runtime attempts to probe for the referenced assembly.</span></span> <span data-ttu-id="0b7ab-220">Jeśli zawiera plik zasad wydawcy, która zawiera także przekierowania ostatecznej wersji [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu, który [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element jest ten, który jest używany.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-220">If a publisher policy file containing the final version redirect also contains a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, that [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is the one that is used.</span></span> <span data-ttu-id="0b7ab-221">Na przykład, jeśli plik konfiguracji aplikacji Określa [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu, a plik zasad wydawcy, która zastępuje informacje o aplikacji określa również [ \< codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element w pliku zasad wydawcy, który jest używany.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-221">For example, if your application configuration file specifies a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, and a publisher policy file that is overriding the application information also specifies a [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in the publisher policy file is used.</span></span>  
  
 <span data-ttu-id="0b7ab-222">Jeśli nie zostanie znalezione dopasowanie w lokalizacji określonej przez [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu, żądanie powiązania nie powiedzie się i nie trzeba wykonywać dalszych czynności są wykonywane.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-222">If no match is found at the location specified by the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element, the bind request fails and no further steps are taken.</span></span> <span data-ttu-id="0b7ab-223">Jeśli środowisko wykonawcze określa, czy zestaw odpowiadającego kryteriom zestawu wywołującego, używa tego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-223">If the runtime determines that an assembly matches the calling assembly's criteria, it uses that assembly.</span></span> <span data-ttu-id="0b7ab-224">Gdy plik określony przez dany [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element jest załadowany, środowisko uruchomieniowe sprawdza, aby upewnić się, czy nazwy, wersji, kultury i klucza publicznego były zgodne z wywołującym zestawem przez odwołanie.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-224">When the file specified by the given [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element is loaded, the runtime checks to make sure that the name, version, culture, and public key match the calling assembly's reference.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="0b7ab-225">Przywoływanych zestawach poza katalog główny aplikacji musi mieć silne nazwy i muszą być zainstalowane w globalnej pamięci podręcznej lub określony za pomocą [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-225">Referenced assemblies outside the application's root directory must have strong names and must either be installed in the global assembly cache or specified using the [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element.</span></span>  
  
### <a name="locating-the-assembly-through-probing"></a><span data-ttu-id="0b7ab-226">Lokalizowanie zestawów za pomocą sondowania</span><span class="sxs-lookup"><span data-stu-id="0b7ab-226">Locating the Assembly through Probing</span></span>  
 <span data-ttu-id="0b7ab-227">W przypadku nie [ \<codeBase >](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) elementu w pliku konfiguracyjnym aplikacji, środowisko uruchomieniowe sondy dla zestawu przy użyciu czterech kryteriów:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-227">If there is no [\<codeBase>](../../../docs/framework/configure-apps/file-schema/runtime/codebase-element.md) element in the application configuration file, the runtime probes for the assembly using four criteria:</span></span>  
  
-   <span data-ttu-id="0b7ab-228">Podstawy aplikacji, czyli lokalizację katalogu głównego, w którym aplikacja jest wykonywana.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-228">Application base, which is the root location where the application is being executed.</span></span>  
  
-   <span data-ttu-id="0b7ab-229">Kultura, co jest atrybut kultury przywoływanego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-229">Culture, which is the culture attribute of the assembly being referenced.</span></span>  
  
-   <span data-ttu-id="0b7ab-230">Nazwa, która jest nazwą przywoływanego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-230">Name, which is the name of the referenced assembly.</span></span>  
  
-   <span data-ttu-id="0b7ab-231">`privatePath` Atrybutu [ \<sondowanie >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element, który jest zdefiniowany przez użytkownika lista podkatalogach lokalizację katalogu głównego.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-231">The `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element, which is the user-defined list of subdirectories under the root location.</span></span> <span data-ttu-id="0b7ab-232">Tę lokalizację można określić w pliku konfiguracji aplikacji i przy użyciu kodu zarządzanego <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> właściwości domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-232">This location can be specified in the application configuration file and in managed code using the <xref:System.AppDomainSetup.PrivateBinPath?displayProperty=nameWithType> property for an application domain.</span></span> <span data-ttu-id="0b7ab-233">Po określeniu w kodzie zarządzanym kodzie zarządzanym `privatePath` jest sondowany najpierw, a następnie ścieżka określona w pliku konfiguracyjnym aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-233">When specified in managed code, the managed code `privatePath` is probed first, followed by the path specified in the application configuration file.</span></span>  
  
#### <a name="probing-the-application-base-and-culture-directories"></a><span data-ttu-id="0b7ab-234">Sondowanie podstawy aplikacji i katalogów kultury</span><span class="sxs-lookup"><span data-stu-id="0b7ab-234">Probing the Application Base and Culture Directories</span></span>  
 <span data-ttu-id="0b7ab-235">Środowisko uruchomieniowe zawsze rozpoczyna się, sondowanie w podstawowym aplikacji, który może być adresem URL lub katalogu głównego aplikacji na komputerze.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-235">The runtime always begins probing in the application's base, which can be either a URL or the application's root directory on a computer.</span></span> <span data-ttu-id="0b7ab-236">Jeśli przywoływany zestaw nie znajduje się w aplikacji, a podano nie informacji o kulturze, środowisko uruchomieniowe przeszukuje podkatalogów z nazwą zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-236">If the referenced assembly is not found in the application base and no culture information is provided, the runtime searches any subdirectories with the assembly name.</span></span> <span data-ttu-id="0b7ab-237">Katalogi sondowany obejmują:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-237">The directories probed include:</span></span>  
  
 <span data-ttu-id="0b7ab-238">[baza aplikacji] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-238">[application base] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="0b7ab-239">[baza aplikacji] / [Nazwa zestawu] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-239">[application base] / [assembly name] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="0b7ab-240">Jeśli informacje o ustawieniach kulturowych jest określony dla przywoływanego zestawu, sondowany są tylko następujące katalogi:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-240">If culture information is specified for the referenced assembly, only the following directories are probed:</span></span>  
  
 <span data-ttu-id="0b7ab-241">[baza aplikacji] / [kulturze] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-241">[application base] / [culture] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="0b7ab-242">[baza aplikacji] / [kulturze] / [Nazwa zestawu] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-242">[application base] / [culture] / [assembly name] / [assembly name].dll</span></span>  
  
#### <a name="probing-with-the-privatepath-attribute"></a><span data-ttu-id="0b7ab-243">Sondowanie z privatePath atrybutu</span><span class="sxs-lookup"><span data-stu-id="0b7ab-243">Probing with the privatePath Attribute</span></span>  
 <span data-ttu-id="0b7ab-244">Oprócz podkatalogów kultury i podkatalogi, o nazwie dla przywoływanego zestawu, środowisko uruchomieniowe również sondy katalogi określone za pomocą `privatePath` atrybutu [ \<sondowanie >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) elementu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-244">In addition to the culture subdirectories and the subdirectories named for the referenced assembly, the runtime also probes directories specified using the `privatePath` attribute of the [\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element.</span></span> <span data-ttu-id="0b7ab-245">Katalogi określone za pomocą `privatePath` atrybut musi być podkatalogi katalogu głównego aplikacji.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-245">The directories specified using the `privatePath` attribute must be subdirectories of the application's root directory.</span></span> <span data-ttu-id="0b7ab-246">Katalogi sondowany różnią się w zależności od tego, czy informacje o ustawieniach kulturowych znajduje się w żądaniu przywoływanego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-246">The directories probed vary depending on whether culture information is included in the referenced assembly request.</span></span>  
  
 <span data-ttu-id="0b7ab-247">Środowisko uruchomieniowe zatrzymuje sondowanie znajdzie zestawu, który jest zgodna z nazwą prostego zestawu, do których odwołuje się, czy jest poprawny dopasowania po raz pierwszy.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-247">The runtime stops probing the first time it finds an assembly that matches the simple assembly name referenced, whether it is a correct match or not.</span></span> <span data-ttu-id="0b7ab-248">Jeśli jest to poprawne dopasowanie, tego zestawu jest używana.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-248">If it is a correct match, that assembly is used.</span></span> <span data-ttu-id="0b7ab-249">Jeśli nie ma prawidłowego dopasowania sondowanie zatrzymuje i powiązanie kończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-249">If it is not a correct match, probing stops and binding fails.</span></span>  
  
 <span data-ttu-id="0b7ab-250">Jeśli kultury, sondowany są następujące katalogi:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-250">If culture is included, the following directories are probed:</span></span>  
  
 <span data-ttu-id="0b7ab-251">[baza aplikacji] / [binpath] / [kulturze] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-251">[application base] / [binpath] / [culture] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="0b7ab-252">[baza aplikacji] / [binpath] / [kulturze] / [Nazwa zestawu] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-252">[application base] / [binpath] / [culture] / [assembly name] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="0b7ab-253">Jeśli nie dołączono informacje o ustawieniach kulturowych, sondowany są następujące katalogi:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-253">If culture information is not included, the following directories are probed:</span></span>  
  
 <span data-ttu-id="0b7ab-254">[baza aplikacji] / [binpath] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-254">[application base] / [binpath] / [assembly name].dll</span></span>  
  
 <span data-ttu-id="0b7ab-255">[baza aplikacji] / [binpath] / [Nazwa zestawu] / [Nazwa zestawu] .dll</span><span class="sxs-lookup"><span data-stu-id="0b7ab-255">[application base] / [binpath] / [assembly name] / [assembly name].dll</span></span>  
  
#### <a name="probing-examples"></a><span data-ttu-id="0b7ab-256">Sondowanie przykłady</span><span class="sxs-lookup"><span data-stu-id="0b7ab-256">Probing Examples</span></span>  
 <span data-ttu-id="0b7ab-257">Biorąc pod uwagę następujące informacje:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-257">Given the following information:</span></span>  
  
-   <span data-ttu-id="0b7ab-258">Nazwa zestawu odwołania: myAssembly</span><span class="sxs-lookup"><span data-stu-id="0b7ab-258">Referenced assembly name: myAssembly</span></span>  
  
-   <span data-ttu-id="0b7ab-259">Katalog główny aplikacji: `http://www.code.microsoft.com`</span><span class="sxs-lookup"><span data-stu-id="0b7ab-259">Application root directory: `http://www.code.microsoft.com`</span></span>  
  
-   <span data-ttu-id="0b7ab-260">[\<sondowanie >](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) określa element w pliku konfiguracyjnym: pojemnika</span><span class="sxs-lookup"><span data-stu-id="0b7ab-260">[\<probing>](../../../docs/framework/configure-apps/file-schema/runtime/probing-element.md) element in configuration file specifies: bin</span></span>  
  
-   <span data-ttu-id="0b7ab-261">Kultura: Niemcy</span><span class="sxs-lookup"><span data-stu-id="0b7ab-261">Culture: de</span></span>  
  
 <span data-ttu-id="0b7ab-262">Środowisko uruchomieniowe sondy następujące adresy URL:</span><span class="sxs-lookup"><span data-stu-id="0b7ab-262">The runtime probes the following URLs:</span></span>  
  
 `http://www.code.microsoft.com/de/myAssembly.dll`
  
 `http://www.code.microsoft.com/de/myAssembly/myAssembly.dll`
  
 `http://www.code.microsoft.com/bin/de/myAssembly.dll`
  
 `http://www.code.microsoft.com/bin/de/myAssembly/myAssembly.dll`
  
##### <a name="multiple-assemblies-with-the-same-name"></a><span data-ttu-id="0b7ab-263">Wiele zestawów o takiej samej nazwie</span><span class="sxs-lookup"><span data-stu-id="0b7ab-263">Multiple Assemblies with the Same Name</span></span>  
 <span data-ttu-id="0b7ab-264">Poniższy przykład pokazuje, jak skonfigurować wiele zestawów o takiej samej nazwie.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-264">The following example shows how to configure multiple assemblies with the same name.</span></span>  
  
```xml  
<dependentAssembly>  
   <assemblyIdentity name="Server" publicKeyToken="c0305c36380ba429" />   
   <codeBase version="1.0.0.0" href="v1/Server.dll" />  
   <codeBase version="2.0.0.0" href="v2/Server.dll" />  
</dependentAssembly>  
```  
  
#### <a name="other-locations-probed"></a><span data-ttu-id="0b7ab-265">Inne lokalizacje sondowany</span><span class="sxs-lookup"><span data-stu-id="0b7ab-265">Other Locations Probed</span></span>  
 <span data-ttu-id="0b7ab-266">Lokalizacja zestawu można również określić, przy użyciu bieżącego kontekstu powiązania.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-266">Assembly location can also be determined using the current binding context.</span></span> <span data-ttu-id="0b7ab-267">Najczęstszą przyczyną tego błędu podczas <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> metoda jest używana w scenariuszach międzyoperacyjne COM.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-267">This most often occurs when the <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType> method is used and in COM interop scenarios.</span></span> <span data-ttu-id="0b7ab-268">Jeśli zespół korzysta z <xref:System.Reflection.Assembly.LoadFrom%2A> metodę, aby odwoływać się do innego zestawu lokalizacji zestawu wywołującego jest uważany za wskazówkę o tym, gdzie można znaleźć przywoływanego zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-268">If an assembly uses the <xref:System.Reflection.Assembly.LoadFrom%2A> method to reference another assembly, the calling assembly's location is considered to be a hint about where to find the referenced assembly.</span></span> <span data-ttu-id="0b7ab-269">Jeśli zostanie znalezione dopasowanie, że zestaw jest ładowany.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-269">If a match is found, that assembly is loaded.</span></span> <span data-ttu-id="0b7ab-270">Jeśli nie zostanie znalezione dopasowanie, środowisko uruchomieniowe będzie kontynuowane przy użyciu jego semantyka wyszukiwania, a następnie kwerendy Instalatora Windows, aby zapewnić zestawu.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-270">If no match is found, the runtime continues with its search semantics and then queries the Windows Installer to provide the assembly.</span></span> <span data-ttu-id="0b7ab-271">Jeśli zestawy nie zostanie podana, które odpowiadają żądania powiązania, jest zgłaszany wyjątek.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-271">If no assembly is provided that matches the binding request, an exception is thrown.</span></span> <span data-ttu-id="0b7ab-272">Ten wyjątek jest <xref:System.TypeLoadException> w kodzie zarządzanym, jeśli odwołanie do typu, lub <xref:System.IO.FileNotFoundException> Jeśli ładowany zestaw nie został znaleziony.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-272">This exception is a <xref:System.TypeLoadException> in managed code if a type was referenced, or a <xref:System.IO.FileNotFoundException> if an assembly being loaded was not found.</span></span>  
  
 <span data-ttu-id="0b7ab-273">Na przykład, jeśli odwołuje się Assembly1 Assembly2 i Assembly1 została pobrana z `http://www.code.microsoft.com/utils`, czy lokalizacja jest uważany za wskazówkę o tym, gdzie można znaleźć Assembly2.dll.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-273">For example, if Assembly1 references Assembly2 and Assembly1 was downloaded from `http://www.code.microsoft.com/utils`, that location is considered to be a hint about where to find Assembly2.dll.</span></span> <span data-ttu-id="0b7ab-274">Środowisko uruchomieniowe, a następnie sondy dla zestawu w `http://www.code.microsoft.com/utils/Assembly2.dll` i `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-274">The runtime then probes for the assembly in `http://www.code.microsoft.com/utils/Assembly2.dll` and `http://www.code.microsoft.com/utils/Assembly2/Assembly2.dll`.</span></span> <span data-ttu-id="0b7ab-275">Jeśli Assembly2 nie zostanie znaleziony w jednej z tych lokalizacji, środowisko uruchomieniowe wysyła zapytanie do Instalatora Windows.</span><span class="sxs-lookup"><span data-stu-id="0b7ab-275">If Assembly2 is not found at either of those locations, the runtime queries the Windows Installer.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0b7ab-276">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="0b7ab-276">See Also</span></span>  
 [<span data-ttu-id="0b7ab-277">Najlepsze praktyki dotyczące ładowania zestawu</span><span class="sxs-lookup"><span data-stu-id="0b7ab-277">Best Practices for Assembly Loading</span></span>](../../../docs/framework/deployment/best-practices-for-assembly-loading.md)  
 [<span data-ttu-id="0b7ab-278">Wdrażanie</span><span class="sxs-lookup"><span data-stu-id="0b7ab-278">Deployment</span></span>](../../../docs/framework/deployment/index.md)
