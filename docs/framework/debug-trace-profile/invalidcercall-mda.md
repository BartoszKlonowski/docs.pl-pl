---
title: invalidCERCall MDA
description: Przejrzyj invalidCERCall Managed Debug Assistant (MDA), który jest aktywowany, jeśli istnieje nieprawidłowe wywołanie w grafie ograniczonego regionu wykonywania (CER).
ms.date: 03/30/2017
helpviewer_keywords:
- invalid CER calls
- InvalidCERCall MDA
- MDAs (managed debugging assistants), CER calls
- constrained execution regions
- CER calls
- managed debugging assistants (MDAs), CER calls
ms.assetid: c4577410-602e-44e5-9dab-fea7c55bcdfe
ms.openlocfilehash: 6f0d9d8e3059729098975080224999d0c0fac46e
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "96272660"
---
# <a name="invalidcercall-mda"></a><span data-ttu-id="d634e-103">invalidCERCall MDA</span><span class="sxs-lookup"><span data-stu-id="d634e-103">invalidCERCall MDA</span></span>

<span data-ttu-id="d634e-104">`invalidCERCall`Asystent debugowania zarządzanego (MDA) jest uaktywniany w przypadku wywołania w ramach wykresu ograniczonego wykonawcy (CER) do metody, która nie ma umowy dotyczącej niezawodności lub nadmiernie słabego kontraktu.</span><span class="sxs-lookup"><span data-stu-id="d634e-104">The `invalidCERCall` managed debugging assistant (MDA) is activated when there is a call within the constrained execution region (CER) graph to a method that has no reliability contract or an excessively weak contract.</span></span> <span data-ttu-id="d634e-105">Słaby kontrakt jest umową, która deklaruje, że najgorszy przypadek uszkodzenia stanu jest większy niż wystąpienie przesłane do wywołania, to oznacza, że <xref:System.AppDomain> lub stan procesu może ulec uszkodzeniu lub jego wynik nie zawsze jest deterministyczny obliczanej po wywołaniu w CER.</span><span class="sxs-lookup"><span data-stu-id="d634e-105">A weak contract is a contract that declares that the worst case state corruption is of greater scope than the instance passed to the call, that is, the <xref:System.AppDomain> or process state may become corrupted or that its result is not always deterministically computable when called within a CER.</span></span>  
  
## <a name="symptoms"></a><span data-ttu-id="d634e-106">Objawy</span><span class="sxs-lookup"><span data-stu-id="d634e-106">Symptoms</span></span>  

 <span data-ttu-id="d634e-107">Nieoczekiwane wyniki podczas wykonywania kodu w CER.</span><span class="sxs-lookup"><span data-stu-id="d634e-107">Unexpected results when executing code in a CER.</span></span> <span data-ttu-id="d634e-108">Objawy nie są określone.</span><span class="sxs-lookup"><span data-stu-id="d634e-108">The symptoms are not specific.</span></span> <span data-ttu-id="d634e-109">Mogą to być nieoczekiwane <xref:System.OutOfMemoryException> , a <xref:System.Threading.ThreadAbortException> lub inne wyjątki w wywołaniu metody zawodowej, ponieważ środowisko uruchomieniowe nie przygotowało go wcześniej ani nie chroni go przed <xref:System.Threading.ThreadAbortException> wyjątkami w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="d634e-109">They could be an unexpected <xref:System.OutOfMemoryException>, a <xref:System.Threading.ThreadAbortException>, or other exceptions at the call into the unreliable method because the runtime did not prepare it ahead of time or protect it from <xref:System.Threading.ThreadAbortException> exceptions at run time.</span></span> <span data-ttu-id="d634e-110">Większe zagrożenie polega na tym, że każdy wyjątek wynikający z metody w czasie wykonywania może opuścić <xref:System.AppDomain> proces lub w niestabilnym stanie, który jest niezgodny z celem CER.</span><span class="sxs-lookup"><span data-stu-id="d634e-110">A greater threat is that any exception resulting from the method at run time could leave the <xref:System.AppDomain> or process in an unstable state, which is contrary to the objective of a CER.</span></span> <span data-ttu-id="d634e-111">Przyczyną jest to, że jest tworzone CER, aby uniknąć uszkodzenia stanu.</span><span class="sxs-lookup"><span data-stu-id="d634e-111">The reason a CER is created is to avoid state corruptions such as this.</span></span> <span data-ttu-id="d634e-112">Objawy uszkodzenia stanu są specyficzne dla aplikacji, ponieważ definicja spójnego stanu różni się między aplikacjami.</span><span class="sxs-lookup"><span data-stu-id="d634e-112">The symptoms of corrupt state are application specific because the definition of consistent state is different between applications.</span></span>  
  
## <a name="cause"></a><span data-ttu-id="d634e-113">Przyczyna</span><span class="sxs-lookup"><span data-stu-id="d634e-113">Cause</span></span>  

 <span data-ttu-id="d634e-114">Kod w elemencie CER wywołuje funkcję z opcją nie <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> lub słabej <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> , która nie jest zgodna z uruchomionym programem CER.</span><span class="sxs-lookup"><span data-stu-id="d634e-114">Code within a CER is calling a function with no <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> or with a weak <xref:System.Runtime.ConstrainedExecution.ReliabilityContractAttribute> that is not compatible with running in a CER.</span></span>  
  
 <span data-ttu-id="d634e-115">W odniesieniu do składni kontraktu niezawodności słaby kontrakt jest kontraktem, który nie określa <xref:System.Runtime.ConstrainedExecution.Consistency> wartości wyliczenia lub określa <xref:System.Runtime.ConstrainedExecution.Consistency> wartość <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess> , <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain> lub <xref:System.Runtime.ConstrainedExecution.Cer.None> .</span><span class="sxs-lookup"><span data-stu-id="d634e-115">In terms of reliability contract syntax, a weak contract is a contract that does not specify a <xref:System.Runtime.ConstrainedExecution.Consistency> enumeration value or specifies a <xref:System.Runtime.ConstrainedExecution.Consistency> value of <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptProcess>, <xref:System.Runtime.ConstrainedExecution.Consistency.MayCorruptAppDomain>, or <xref:System.Runtime.ConstrainedExecution.Cer.None>.</span></span> <span data-ttu-id="d634e-116">Każdy z tych warunków wskazuje, że wywoływany kod może utrudniać wysiłki innego kodu w CER, aby zachować spójny stan.</span><span class="sxs-lookup"><span data-stu-id="d634e-116">Any of these conditions indicates that the code called may impede the efforts of the other code in the CER to maintain consistent state.</span></span>  <span data-ttu-id="d634e-117">CERs dopuszczaj kod, aby traktować błędy w bardzo deterministyczny sposób, utrzymując wewnętrzne nieposiadające znaczące znaczenie dla aplikacji i umożliwiając jej kontynuowanie działania w przypadku błędów przejściowych, takich jak wyjątki braku pamięci.</span><span class="sxs-lookup"><span data-stu-id="d634e-117">CERs allow code to treat errors in a very deterministic manner, maintaining internal invariants that are important to the application and allowing it to continue running in the face of transient errors such as out-of-memory exceptions.</span></span>  
  
 <span data-ttu-id="d634e-118">Aktywacja tego elementu MDA wskazuje na to, że metoda wywoływana w CER może zakończyć się niepowodzeniem w taki sposób, że obiekt wywołujący nie oczekiwał lub który opuszcza stan procesu lub nie można go <xref:System.AppDomain> odzyskać.</span><span class="sxs-lookup"><span data-stu-id="d634e-118">The activation of this MDA indicates a possibility the method being called in the CER can fail in a way that the caller did not expect or that leaves the <xref:System.AppDomain> or process state corrupted or unrecoverable.</span></span> <span data-ttu-id="d634e-119">Oczywiście wywoływany kod może działać poprawnie, a problem jest po prostu nieobecnym kontraktem.</span><span class="sxs-lookup"><span data-stu-id="d634e-119">Of course, the called code might execute correctly and the problem is simply a missing contract.</span></span> <span data-ttu-id="d634e-120">Jednak problemy związane z pisaniem niezawodnego kodu są delikatne i brak kontraktu jest dobrym wskaźnikiem, że kod może nie działać poprawnie.</span><span class="sxs-lookup"><span data-stu-id="d634e-120">However, the issues involved in writing reliable code are subtle and the absence of a contract is a good indicator the code might not execute correctly.</span></span> <span data-ttu-id="d634e-121">Umowy są wskaźnikami, że programista zakodowano niezawodnie, a także niesie obietnice zwiększenia, że te gwarancje nie zmienią się w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="d634e-121">The contracts are indicators that the programmer has coded reliably and also promises that these guarantees will not change in future revisions of the code.</span></span>  <span data-ttu-id="d634e-122">Oznacza to, że umowy są deklaracjami intencji, a nie tylko szczegółami implementacji.</span><span class="sxs-lookup"><span data-stu-id="d634e-122">That is, the contracts are declarations of intent and not just implementation details.</span></span>  
  
 <span data-ttu-id="d634e-123">Ponieważ jakakolwiek metoda z nieoczekiwanym lub nieistniejącym kontraktem może zakończyć się niepowodzeniem na wiele nieprzewidywalnych sposobów, środowisko uruchomieniowe nie podejmuje próby usunięcia jakichkolwiek nieprzewidywalnych nieoczekiwanych błędów z metody, które są wprowadzane przez kompilację JIT z opóźnieniem, populacja słownika generycznego lub przerwania wątku, na przykład.</span><span class="sxs-lookup"><span data-stu-id="d634e-123">Because any method with a weak or nonexistent contract can potentially fail in many unpredictable ways, the runtime does not attempt to remove any of its own unpredictable failures from the method  that are introduced by lazy JIT-compiling, generics dictionary population, or thread aborts, for example.</span></span> <span data-ttu-id="d634e-124">Oznacza to, że po aktywowaniu tego MDA wskazuje, że środowisko uruchomieniowe nie uwzględnia wywołanej metody w zdefiniowanym elemencie CER. Wykres wywołań został przerwany w tym węźle, ponieważ kontynuowanie przygotowania tego poddrzewa ułatwi zamaskowanie potencjalnego błędu.</span><span class="sxs-lookup"><span data-stu-id="d634e-124">That is, when this MDA is activated, it indicates that the runtime did not include the called method in the CER being defined; the call graph was terminated at this node because continuing to prepare this subtree would help mask the potential error.</span></span>  
  
## <a name="resolution"></a><span data-ttu-id="d634e-125">Rozwiązanie</span><span class="sxs-lookup"><span data-stu-id="d634e-125">Resolution</span></span>  

 <span data-ttu-id="d634e-126">Dodaj prawidłowy kontrakt niezawodności do funkcji lub Unikaj korzystania z tego wywołania funkcji.</span><span class="sxs-lookup"><span data-stu-id="d634e-126">Add a valid reliability contract to the function or avoid using that function call.</span></span>  
  
## <a name="effect-on-the-runtime"></a><span data-ttu-id="d634e-127">Wpływ na środowisko uruchomieniowe</span><span class="sxs-lookup"><span data-stu-id="d634e-127">Effect on the Runtime</span></span>  

 <span data-ttu-id="d634e-128">Efekt wywołania słabego kontraktu z CER może być błędem CER, aby zakończyć jego operacje.</span><span class="sxs-lookup"><span data-stu-id="d634e-128">The effect of calling a weak contract from a CER could be the CER failure to complete its operations.</span></span> <span data-ttu-id="d634e-129">Może to prowadzić do uszkodzenia <xref:System.AppDomain> stanu procesu.</span><span class="sxs-lookup"><span data-stu-id="d634e-129">This could lead to corruption of the <xref:System.AppDomain> process state.</span></span>  
  
## <a name="output"></a><span data-ttu-id="d634e-130">Dane wyjściowe</span><span class="sxs-lookup"><span data-stu-id="d634e-130">Output</span></span>  

 <span data-ttu-id="d634e-131">Poniżej przedstawiono przykładowe dane wyjściowe z tego MDA.</span><span class="sxs-lookup"><span data-stu-id="d634e-131">The following is sample output from this MDA.</span></span>  
  
 `Method 'MethodWithCer', while executing within a constrained execution region, makes a call at IL offset 0x000C to 'MethodWithWeakContract', which does not have a sufficiently strong reliability contract and might cause non-deterministic results.`  
  
## <a name="configuration"></a><span data-ttu-id="d634e-132">Konfigurowanie</span><span class="sxs-lookup"><span data-stu-id="d634e-132">Configuration</span></span>  
  
```xml  
<mdaConfig>  
  <assistants>  
    <invalidCERCall />  
  </assistants>  
</mdaConfig>  
```  
  
## <a name="see-also"></a><span data-ttu-id="d634e-133">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="d634e-133">See also</span></span>

- <xref:System.Runtime.CompilerServices.RuntimeHelpers.PrepareMethod%2A>
- <xref:System.Runtime.ConstrainedExecution>
- [<span data-ttu-id="d634e-134">Diagnozowanie błędów przy użyciu asystentów zarządzanego debugowania</span><span class="sxs-lookup"><span data-stu-id="d634e-134">Diagnosing Errors with Managed Debugging Assistants</span></span>](diagnosing-errors-with-managed-debugging-assistants.md)
