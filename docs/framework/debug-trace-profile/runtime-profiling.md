---
title: Profilowanie środowiska uruchomieniowego
description: Poznaj profilowanie środowiska uruchomieniowego w programie .NET, który jest metodą zbierania danych o wydajności w dowolnym scenariuszu opracowywania i wdrażania.
ms.date: 03/30/2017
helpviewer_keywords:
- performance counters
- common language runtime, profiling
- Perfmon.exe
- System Monitor
- profiling
- runtime, profiling
- profiling applications
- Performance Console
ms.assetid: ccd68284-f3a8-47b8-bc3f-92e5fe3a1640
ms.openlocfilehash: 5d1542c7f6afa2d683240d6d5cca837b961eb3be
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "96267107"
---
# <a name="runtime-profiling"></a><span data-ttu-id="9d4c3-103">Profilowanie środowiska uruchomieniowego</span><span class="sxs-lookup"><span data-stu-id="9d4c3-103">Runtime Profiling</span></span>

<span data-ttu-id="9d4c3-104">Profilowanie to metoda zbierania danych wydajności w dowolnym scenariuszu opracowywania i wdrażania.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-104">Profiling is a method of gathering performance data in any development or deployment scenario.</span></span> <span data-ttu-id="9d4c3-105">Ta sekcja jest przeznaczony dla deweloperów i administratorów systemu, którzy chcą zbierać informacje o wydajności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-105">This section is for developers and system administrators who want to gather information about application performance.</span></span>  
  
## <a name="tracking-performance-using-the-performance-monitor-perfmonexe"></a><span data-ttu-id="9d4c3-106">Śledzenie wydajności przy użyciu Monitora wydajności (Perfmon.exe)</span><span class="sxs-lookup"><span data-stu-id="9d4c3-106">Tracking Performance Using the Performance Monitor (Perfmon.exe)</span></span>  

 <span data-ttu-id="9d4c3-107">Monitor wydajności jest najłatwiejszym narzędziem służącym do profilowania aplikacji .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-107">The Performance Monitor is the easiest tool to use to profile your .NET Framework application.</span></span> <span data-ttu-id="9d4c3-108">Monitor wydajności graficzny przedstawia dane znajdujące się w .NET Framework licznikach wydajności, które są instalowane przy użyciu środowiska uruchomieniowego języka wspólnego i Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-108">The Performance Monitor graphically represents data found in the .NET Framework performance counters that are installed with the common language runtime and the Windows SDK.</span></span> <span data-ttu-id="9d4c3-109">Te liczniki mogą służyć do monitorowania wszystkiego od zarządzania pamięcią do wydajności kompilatora just-in-Time (JIT).</span><span class="sxs-lookup"><span data-stu-id="9d4c3-109">These counters can be used to monitor everything from memory management to just-in-time (JIT) compiler performance.</span></span> <span data-ttu-id="9d4c3-110">Poinformują o zasobach używanych przez aplikację, które są pośrednią miarą wydajności aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-110">They tell you about the resources your application uses, which is an indirect measure of your application's performance.</span></span> <span data-ttu-id="9d4c3-111">Użyj tych liczników, aby zrozumieć, w jaki sposób aplikacja działa wewnętrznie.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-111">Use these counters to understand how your application works internally.</span></span>  
  
#### <a name="to-run-perfmonexe-on-windows-vista-and-later-versions"></a><span data-ttu-id="9d4c3-112">Aby uruchomić Perfmon.exe w systemie Windows Vista i jego nowszych wersjach</span><span class="sxs-lookup"><span data-stu-id="9d4c3-112">To run Perfmon.exe on Windows Vista and later versions</span></span>  
  
1. <span data-ttu-id="9d4c3-113">W wierszu polecenia wpisz polecenie **perfmon**.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-113">At the command prompt, type **perfmon**.</span></span> <span data-ttu-id="9d4c3-114">Zostanie wyświetlona konsola **monitora wydajności** .</span><span class="sxs-lookup"><span data-stu-id="9d4c3-114">The **Performance Monitor** console appears.</span></span>  
  
2. <span data-ttu-id="9d4c3-115">W folderze **narzędzia monitorowania** kliknij przycisk **Monitor wydajności**.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-115">In the **Monitoring Tools** folder, click **Performance Monitor**.</span></span>  
  
3. <span data-ttu-id="9d4c3-116">Na pasku narzędzi monitora wydajności kliknij ikonę **Dodaj** (znak plus), jeśli jest obecny.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-116">In the Performance Monitor toolbar, click the **Add** icon (the plus sign), if it is present.</span></span> <span data-ttu-id="9d4c3-117">Jeśli go nie ma, kliknij prawym przyciskiem myszy w oknie monitorowanie i wybierz opcję **Dodaj liczniki** .</span><span class="sxs-lookup"><span data-stu-id="9d4c3-117">If it is not present, right-click in the monitor window and select the **Add Counters** option.</span></span>  
  
     <span data-ttu-id="9d4c3-118">Spowoduje to otwarcie okna dialogowego **Dodawanie liczników** .</span><span class="sxs-lookup"><span data-stu-id="9d4c3-118">This opens the **Add Counters** dialog box.</span></span> <span data-ttu-id="9d4c3-119">W polu listy **dostępne liczniki** są wyświetlane dostępne obiekty wydajności.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-119">The **Available counters** list box displays the available performance objects.</span></span> <span data-ttu-id="9d4c3-120">Istnieje wiele wstępnie zdefiniowanych obiektów dla .NET Framework aplikacji, w tym tych dla zarządzania pamięcią (**pamięć programu .NET CLR**), współdziałanie (**Architektura .NET CLR Interop**), obsługa wyjątków (**wyjątki .NET CLR**) i wielowątkowość (**.NET CLR LocksAndThreads**).</span><span class="sxs-lookup"><span data-stu-id="9d4c3-120">There are a number of predefined objects for .NET Framework applications, including those for memory management (**.NET CLR Memory**), interoperability (**.NET CLR Interop**), exception handling (**.NET CLR Exceptions**), and multithreading (**.NET CLR LocksAndThreads**).</span></span> <span data-ttu-id="9d4c3-121">Każdy obiekt wydajności zawiera szereg poszczególnych liczników wydajności.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-121">Each performance object includes a number of individual performance counters.</span></span> <span data-ttu-id="9d4c3-122">Listę liczników wydajności dostępnych w Monitorze wydajności można znaleźć w temacie [liczniki wydajności](performance-counters.md).</span><span class="sxs-lookup"><span data-stu-id="9d4c3-122">For a list of the performance counters available in Performance Monitor, see [Performance Counters](performance-counters.md).</span></span>  
  
4. <span data-ttu-id="9d4c3-123">Zaznacz pole wyboru obok nazwy obiektu wydajności, aby wyświetlić listę poszczególnych obsługiwanych liczników wydajności.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-123">Select the check box next to a performance object's name to view the list of individual performance counters that it supports.</span></span>  
  
5. <span data-ttu-id="9d4c3-124">Kliknij licznik wydajności, który chcesz wyświetlić.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-124">Click the performance counter you want to view.</span></span>  
  
6. <span data-ttu-id="9d4c3-125">W polu listy **wystąpienia wybranego obiektu** kliknij, **\<All instances>** Aby określić, że chcesz monitorować licznik wydajności dla środowiska uruchomieniowego CLR globalnie (to znaczy na poziomie całego systemu).</span><span class="sxs-lookup"><span data-stu-id="9d4c3-125">In the **Instances of selected object** list box, click **\<All instances>** to specify that you want to monitor the performance counter for the common language runtime globally (that is, on a system-wide basis).</span></span>  
  
     <span data-ttu-id="9d4c3-126">-lub-</span><span class="sxs-lookup"><span data-stu-id="9d4c3-126">-or-</span></span>  
  
     <span data-ttu-id="9d4c3-127">W polu listy **wystąpienia wybranego obiektu** kliknij nazwę aplikacji, aby monitorować licznik wydajności dla tej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-127">In the **Instances of selected object** list box, click an application name to monitor the performance counter for that application.</span></span>  
  
     <span data-ttu-id="9d4c3-128">Aby rozróżnić wiele wersji środowiska uruchomieniowego lub aby odróżnić wiele aplikacji o tej samej nazwie, należy również zmodyfikować klucz rejestru.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-128">To differentiate multiple versions of the runtime, or to disambiguate multiple applications with the same name, you must also modify a registry key.</span></span> <span data-ttu-id="9d4c3-129">Aby uzyskać więcej informacji, zobacz [liczniki wydajności i In-Process aplikacje równoległe](performance-counters-and-in-process-side-by-side-applications.md).</span><span class="sxs-lookup"><span data-stu-id="9d4c3-129">For more information, see [Performance Counters and In-Process Side-By-Side Applications](performance-counters-and-in-process-side-by-side-applications.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9d4c3-130">Gdy podczas działania konsoli wydajności są instalowane nowe liczniki wydajności, Zatrzymaj i ponownie uruchom konsolę wydajności, aby wyświetlić nowe liczniki.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-130">When new performance counters are installed while the Performance console is running, stop and restart the Performance console to make the new counters visible.</span></span>  
  
 <span data-ttu-id="9d4c3-131">Jeśli chcesz utworzyć profil zestawu, który istnieje w strefie lub w udziale zdalnym, upewnij się, że zestaw zdalny ma pełne zaufanie na komputerze, na którym są uruchomione liczniki wydajności.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-131">If you want to profile an assembly that exists in a zone or on a remote share, make sure that the remote assembly has full trust on the computer that runs the performance counters.</span></span> <span data-ttu-id="9d4c3-132">Jeśli zestaw nie ma wystarczających relacji zaufania, liczniki wydajności nie będą działały.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-132">If the assembly does not have sufficient trust, the performance counters will not work.</span></span> <span data-ttu-id="9d4c3-133">Aby uzyskać informacje dotyczące przyznawania zaufania do różnych stref, zobacz [Caspol.exe (Narzędzie zasad zabezpieczeń dostępu kodu)](../tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="9d4c3-133">For information about granting trust to different zones, see [Caspol.exe (Code Access Security Policy Tool)](../tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="9d4c3-134">W systemach, w których zainstalowano .NET Framework 4, Monitor wydajności może nie wyświetlać danych dla liczników wydajności w niektórych kategoriach, takich jak **dane środowiska .NET CLR** i **sieci CLR platformy .NET**, dla aplikacji, które zostały opracowane przy użyciu .NET Framework 1,1.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-134">On systems on which the .NET Framework 4 is installed, the Performance Monitor may not display data for performance counters in some categories, such as **.NET CLR Data** and **.NET CLR Networking**, for applications that were developed using the .NET Framework 1.1.</span></span> <span data-ttu-id="9d4c3-135">W takim przypadku można skonfigurować Monitor wydajności do wyświetlania tych danych przez dodanie [\<forcePerformanceCounterUniqueSharedMemoryReads>](../configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) elementu do pliku konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-135">If this is the case, you can configure Performance Monitor to display this data by adding the [\<forcePerformanceCounterUniqueSharedMemoryReads>](../configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) element to the application's configuration file.</span></span>  
  
## <a name="reading-and-creating-performance-counters-programmatically"></a><span data-ttu-id="9d4c3-136">Programowe odczytywanie i tworzenie liczników wydajności</span><span class="sxs-lookup"><span data-stu-id="9d4c3-136">Reading and Creating Performance Counters Programmatically</span></span>  

 <span data-ttu-id="9d4c3-137">.NET Framework zawiera klasy, których można użyć, aby programowo uzyskać dostęp do tych samych informacji o wydajności, które są dostępne w konsoli wydajności.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-137">The .NET Framework provides classes you can use to programmatically access the same performance information that is available in the Performance console.</span></span> <span data-ttu-id="9d4c3-138">Można również użyć tych klas do tworzenia niestandardowych liczników wydajności.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-138">You can also use these classes to create custom performance counters.</span></span> <span data-ttu-id="9d4c3-139">W poniższej tabeli opisano niektóre klasy monitorowania wydajności, które są dostępne w .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-139">The following table describes some of the performance monitoring classes that are provided in the .NET Framework.</span></span>  
  
|<span data-ttu-id="9d4c3-140">Klasa</span><span class="sxs-lookup"><span data-stu-id="9d4c3-140">Class</span></span>|<span data-ttu-id="9d4c3-141">Opis</span><span class="sxs-lookup"><span data-stu-id="9d4c3-141">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.Diagnostics.PerformanceCounter?displayProperty=nameWithType>|<span data-ttu-id="9d4c3-142">Reprezentuje składnik licznika wydajności systemu Windows NT.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-142">Represents a Windows NT performance counter component.</span></span> <span data-ttu-id="9d4c3-143">Ta klasa umożliwia odczytywanie istniejących wstępnie zdefiniowanych lub niestandardowych liczników oraz publikowanie (zapisywanie) danych wydajności do liczników niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-143">Use this class to read existing predefined or custom counters and publish (write) performance data to custom counters.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterCategory?displayProperty=nameWithType>|<span data-ttu-id="9d4c3-144">Program udostępnia kilka metod współpracy z licznikami i kategoriami liczników na komputerze.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-144">Provides several methods for interacting with counters and categories of counters on the computer.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterInstaller?displayProperty=nameWithType>|<span data-ttu-id="9d4c3-145">Określa Instalatora `PerformanceCounter` składnika.</span><span class="sxs-lookup"><span data-stu-id="9d4c3-145">Specifies an installer for the `PerformanceCounter` component.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterType?displayProperty=nameWithType>|<span data-ttu-id="9d4c3-146">Określa formułę, w której ma zostać obliczona `NextValue` Metoda `PerformanceCounter` .</span><span class="sxs-lookup"><span data-stu-id="9d4c3-146">Specifies the formula to calculate the `NextValue` method for a `PerformanceCounter`.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="9d4c3-147">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="9d4c3-147">See also</span></span>

- [<span data-ttu-id="9d4c3-148">Liczniki wydajności</span><span class="sxs-lookup"><span data-stu-id="9d4c3-148">Performance Counters</span></span>](performance-counters.md)
