---
title: Pakowanie i wdrażanie zasobów w aplikacjach .NET
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- deploying applications [.NET Framework], resources
- resource files, deploying
- hub-and-spoke resource deployment model
- resource files, packaging
- application resources, packaging
- single resource assembly
- satellite assemblies
- default culture for applications
- names [.NET Framework], resources
- fallback process for resources
- grouping cultures
- application resources, deploying
- application resources, naming conventions
- culture, packaging and deploying resources
- resource files, naming conventions
- packaging application resources
- application resources, fallback processes
- resource files, fallback processes
- localizing resources
- neutral cultures
ms.assetid: b224d7c0-35f8-4e82-a705-dd76795e8d16
ms.openlocfilehash: 9c8d459195693e8eb084f7e87427a3ea37dd63ba
ms.sourcegitcommit: 559fcfbe4871636494870a8b716bf7325df34ac5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/30/2019
ms.locfileid: "73129929"
---
# <a name="packaging-and-deploying-resources-in-net-apps"></a><span data-ttu-id="5a284-102">Pakowanie i wdrażanie zasobów w aplikacjach .NET</span><span class="sxs-lookup"><span data-stu-id="5a284-102">Packaging and Deploying Resources in .NET Apps</span></span>

<span data-ttu-id="5a284-103">Aplikacje są zależne od .NET Framework Menedżer zasobów reprezentowane przez klasę <xref:System.Resources.ResourceManager> w celu pobrania zlokalizowanych zasobów.</span><span class="sxs-lookup"><span data-stu-id="5a284-103">Applications rely on the .NET Framework Resource Manager, represented by the <xref:System.Resources.ResourceManager> class, to retrieve localized resources.</span></span> <span data-ttu-id="5a284-104">Menedżer zasobów zakłada, że model gwiazdy jest używany do pakowania i wdrażania zasobów.</span><span class="sxs-lookup"><span data-stu-id="5a284-104">The Resource Manager assumes that a hub and spoke model is used to package and deploy resources.</span></span> <span data-ttu-id="5a284-105">Koncentrator jest głównym zestawem, który zawiera Niezlokalizowany kod wykonywalny i zasoby dla pojedynczej kultury, nazywane kulturą neutralną lub domyślną.</span><span class="sxs-lookup"><span data-stu-id="5a284-105">The hub is the main assembly that contains the nonlocalizable executable code and the resources for a single culture, called the neutral or default culture.</span></span> <span data-ttu-id="5a284-106">Domyślna kultura jest kulturą rezerwową dla aplikacji; jest kulturą, której zasoby są używane, jeśli nie można znaleźć zlokalizowanych zasobów.</span><span class="sxs-lookup"><span data-stu-id="5a284-106">The default culture is the fallback culture for the application; it is the culture whose resources are used if localized resources cannot be found.</span></span> <span data-ttu-id="5a284-107">Każdy szprych nawiązuje połączenie z zestawem satelickim zawierającym zasoby dla jednej kultury, ale nie zawiera kodu.</span><span class="sxs-lookup"><span data-stu-id="5a284-107">Each spoke connects to a satellite assembly that contains the resources for a single culture, but does not contain any code.</span></span>

<span data-ttu-id="5a284-108">Ten model ma kilka zalet:</span><span class="sxs-lookup"><span data-stu-id="5a284-108">There are several advantages to this model:</span></span>

- <span data-ttu-id="5a284-109">Po wdrożeniu aplikacji można stopniowo dodawać zasoby dla nowych kultur.</span><span class="sxs-lookup"><span data-stu-id="5a284-109">You can incrementally add resources for new cultures after you have deployed an application.</span></span> <span data-ttu-id="5a284-110">W związku z tym, że dalsze Programowanie zasobów specyficznych dla kultury może wymagać znacznego czasu, to pozwala na pierwsze wydanie głównej aplikacji oraz dostarczanie zasobów specyficznych dla kultury w późniejszym terminie.</span><span class="sxs-lookup"><span data-stu-id="5a284-110">Because subsequent development of culture-specific resources can require a significant amount of time, this allows you to release your main application first, and deliver culture-specific resources at a later date.</span></span>
- <span data-ttu-id="5a284-111">Można aktualizować i zmieniać zestawy satelickie aplikacji bez konieczności ponownego kompilowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-111">You can update and change an application's satellite assemblies without recompiling the application.</span></span>
- <span data-ttu-id="5a284-112">Aplikacja musi ładować tylko te zestawy satelickie, które zawierają zasoby wymagane dla określonej kultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-112">An application needs to load only those satellite assemblies that contain the resources needed for a particular culture.</span></span> <span data-ttu-id="5a284-113">Może to znacznie zmniejszyć wykorzystanie zasobów systemowych.</span><span class="sxs-lookup"><span data-stu-id="5a284-113">This can significantly reduce the use of system resources.</span></span>

 <span data-ttu-id="5a284-114">Jednak istnieją także wady tego modelu:</span><span class="sxs-lookup"><span data-stu-id="5a284-114">However, there are also disadvantages to this model:</span></span>

- <span data-ttu-id="5a284-115">Należy zarządzać wieloma zestawami zasobów.</span><span class="sxs-lookup"><span data-stu-id="5a284-115">You must manage multiple sets of resources.</span></span>
- <span data-ttu-id="5a284-116">Początkowy koszt testowania aplikacji wzrasta, ponieważ należy przetestować kilka konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="5a284-116">The initial cost of testing an application increases, because you must test several configurations.</span></span> <span data-ttu-id="5a284-117">Należy pamiętać, że w długim okresie będzie łatwiejsze i tańsze przetestowanie jednej podstawowej aplikacji z kilkoma satelitami, niż testowanie i obsługa kilku równoległych wersji międzynarodowych.</span><span class="sxs-lookup"><span data-stu-id="5a284-117">Note that in the long term it will be easier and less expensive to test one core application with several satellites, than to test and maintain several parallel international versions.</span></span>

## <a name="resource-naming-conventions"></a><span data-ttu-id="5a284-118">Konwencje nazewnictwa zasobów</span><span class="sxs-lookup"><span data-stu-id="5a284-118">Resource naming conventions</span></span>

<span data-ttu-id="5a284-119">Podczas pakowania zasobów aplikacji należy nadać im nazwy przy użyciu konwencji nazewnictwa zasobów, których oczekuje środowisko uruchomieniowe języka wspólnego.</span><span class="sxs-lookup"><span data-stu-id="5a284-119">When you package your application's resources, you must name them using the resource naming conventions that the common language runtime expects.</span></span> <span data-ttu-id="5a284-120">Środowisko uruchomieniowe identyfikuje zasób według jego nazwy kultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-120">The runtime identifies a resource by its culture name.</span></span> <span data-ttu-id="5a284-121">Każda kultura ma unikatową nazwę, która zwykle jest kombinacją dwuliterowej nazwy kultury, która jest skojarzona z językiem i, w razie potrzeby, z dwuliterową nazwą podkultury Wielkiej, skojarzoną z danym krajem lub regionem.</span><span class="sxs-lookup"><span data-stu-id="5a284-121">Each culture is given a unique name, which is usually a combination of a two-letter, lowercase culture name associated with a language and, if required, a two-letter, uppercase subculture name associated with a country or region.</span></span> <span data-ttu-id="5a284-122">Nazwa kultury jest zgodna z nazwą kultury, oddzieloną kreską (-).</span><span class="sxs-lookup"><span data-stu-id="5a284-122">The subculture name follows the culture name, separated by a dash (-).</span></span> <span data-ttu-id="5a284-123">Przykłady obejmują ja-JP dla języka japońskiego w Japonii, en-US dla języka angielskiego w Stany Zjednoczone, de-DE dla języka niemieckiego w Niemczech lub w odniesieniu do języka niemieckiego, który jest mówiony w Austrii.</span><span class="sxs-lookup"><span data-stu-id="5a284-123">Examples include ja-JP for Japanese as spoken in Japan, en-US for English as spoken in the United States, de-DE for German as spoken in Germany, or de-AT for German as spoken in Austria.</span></span> <span data-ttu-id="5a284-124">Zobacz kolumnę **tag języka** na [liście nazw języków/regionów obsługiwanych przez system Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span><span class="sxs-lookup"><span data-stu-id="5a284-124">See the **Language tag** column in the [list of language/region names supported by Windows](https://docs.microsoft.com/openspecs/windows_protocols/ms-lcid/a9eac961-e77d-41a6-90a5-ce1a8b0cdb9c).</span></span> <span data-ttu-id="5a284-125">Nazwy kultur są zgodne ze standardem zdefiniowanym przez [BCP 47](https://tools.ietf.org/html/bcp47).</span><span class="sxs-lookup"><span data-stu-id="5a284-125">Culture names follow the standard defined by [BCP 47](https://tools.ietf.org/html/bcp47).</span></span>

> [!NOTE]
> <span data-ttu-id="5a284-126">Istnieją pewne wyjątki dla nazw kultur dwuliterowych, takich jak `zh-Hans` for chiński (uproszczony).</span><span class="sxs-lookup"><span data-stu-id="5a284-126">There are some exceptions for the two-letter culture names, such as `zh-Hans` for Chinese (Simplified).</span></span>

> [!NOTE]
> <span data-ttu-id="5a284-127">Informacje o tworzeniu plików zasobów można znaleźć w temacie [Tworzenie plików zasobów](creating-resource-files-for-desktop-apps.md) i [Tworzenie zestawów satelickich](creating-satellite-assemblies-for-desktop-apps.md).</span><span class="sxs-lookup"><span data-stu-id="5a284-127">For information about creating resource files, see [Creating Resource Files](creating-resource-files-for-desktop-apps.md) and [Creating Satellite Assemblies](creating-satellite-assemblies-for-desktop-apps.md).</span></span>

<a name="cpconpackagingdeployingresourcesanchor1"></a>

## <a name="the-resource-fallback-process"></a><span data-ttu-id="5a284-128">Proces bazowy zasobu</span><span class="sxs-lookup"><span data-stu-id="5a284-128">The Resource Fallback Process</span></span>

<span data-ttu-id="5a284-129">Model gwiazdy do pakowania i wdrażania zasobów używa procesu rezerwowego do lokalizowania odpowiednich zasobów.</span><span class="sxs-lookup"><span data-stu-id="5a284-129">The hub and spoke model for packaging and deploying resources uses a fallback process to locate appropriate resources.</span></span> <span data-ttu-id="5a284-130">Jeśli aplikacja żąda zlokalizowanego zasobu, który jest niedostępny, środowisko uruchomieniowe języka wspólnego przeszukuje hierarchię kultur dla odpowiedniego zasobu rezerwowego, który najlepiej pasuje do żądania application's użytkownika i zgłasza wyjątek tylko jako Ostatni etap.</span><span class="sxs-lookup"><span data-stu-id="5a284-130">If an application requests a localized resource  that is unavailable, the common language runtime searches the hierarchy of cultures for an appropriate fallback resource that most closely matches the user's application's request, and throws an exception only as a last resort.</span></span> <span data-ttu-id="5a284-131">Na każdym poziomie hierarchii, jeśli zostanie znaleziony odpowiedni zasób, środowisko uruchomieniowe użyje go.</span><span class="sxs-lookup"><span data-stu-id="5a284-131">At each level of the hierarchy, if an appropriate resource is found, the runtime uses it.</span></span> <span data-ttu-id="5a284-132">Jeśli zasób nie zostanie znaleziony, wyszukiwanie będzie kontynuowane na następnym poziomie.</span><span class="sxs-lookup"><span data-stu-id="5a284-132">If the resource is not found, the search continues at the next level.</span></span>

<span data-ttu-id="5a284-133">Aby zwiększyć wydajność wyszukiwania, zastosuj atrybut <xref:System.Resources.NeutralResourcesLanguageAttribute> do głównego zestawu i przekaż mu nazwę języka neutralnego, który będzie współdziałać z Twoim głównym zestawem.</span><span class="sxs-lookup"><span data-stu-id="5a284-133">To improve lookup performance, apply the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to your main assembly, and pass it the name of the neutral language that will work with your main assembly.</span></span>

### <a name="net-framework-resource-fallback-process"></a><span data-ttu-id="5a284-134">Proces rezerwowy zasobów .NET Framework</span><span class="sxs-lookup"><span data-stu-id="5a284-134">.NET Framework resource fallback process</span></span>

<span data-ttu-id="5a284-135">Proces rezerwowy zasobów .NET Framework obejmuje następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="5a284-135">The .NET Framework resource fallback process involves the following steps:</span></span>

> [!TIP]
> <span data-ttu-id="5a284-136">Aby zoptymalizować proces rezerwowy zasobów i proces, w którym sondy środowiska uruchomieniowego dla zestawów zasobów, może być możliwe użycie elementu konfiguracji [\<relativeBindForResources](../configure-apps/file-schema/runtime/relativebindforresources-element.md) .</span><span class="sxs-lookup"><span data-stu-id="5a284-136">You may be able to use the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) configuration element to optimize the resource fallback process and the process by which the runtime probes for resource assemblies.</span></span> <span data-ttu-id="5a284-137">Aby uzyskać więcej informacji, zobacz sekcję [Optymalizacja procesu rezerwowego zasobów](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing) .</span><span class="sxs-lookup"><span data-stu-id="5a284-137">For more information, see the [Optimizing the Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#Optimizing) section.</span></span>

1. <span data-ttu-id="5a284-138">Środowisko uruchomieniowe najpierw sprawdza [globalną pamięć podręczną zestawów](../app-domains/gac.md) dla zestawu, który jest zgodny z żądaną kulturą dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-138">The runtime first checks the [global assembly cache](../app-domains/gac.md) for an assembly that matches the requested culture for your application.</span></span>

     <span data-ttu-id="5a284-139">Globalna pamięć podręczna zestawów może przechowywać zestawy zasobów, które są współużytkowane przez wiele aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-139">The global assembly cache can store resource assemblies that are shared by many applications.</span></span> <span data-ttu-id="5a284-140">Pozwala to na dołączenie określonych zestawów zasobów do struktury katalogów każdej utworzonej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-140">This frees you from having to include specific sets of resources in the directory structure of every application you create.</span></span> <span data-ttu-id="5a284-141">Jeśli środowisko uruchomieniowe odnajdzie odwołanie do zestawu, przeszukuje zestaw dla żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-141">If the runtime finds a reference to the assembly, it searches the assembly for the requested resource.</span></span> <span data-ttu-id="5a284-142">Jeśli odnajdzie wpis w zestawie, używa żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-142">If it finds the entry in the assembly, it uses the requested resource.</span></span> <span data-ttu-id="5a284-143">Jeśli nie znajdzie wpisu, kontynuuje wyszukiwanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-143">If it doesn't find the entry, it continues the search.</span></span>

2. <span data-ttu-id="5a284-144">Następnie środowisko uruchomieniowe sprawdza katalog aktualnie wykonywanego zestawu dla podkatalogu, który jest zgodny z żądaną kulturą.</span><span class="sxs-lookup"><span data-stu-id="5a284-144">The runtime next checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="5a284-145">Jeśli odnajdzie podkatalog, przeszukuje ten podkatalog dla prawidłowego zestawu satelickiego dla wymaganej kultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-145">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture.</span></span> <span data-ttu-id="5a284-146">Środowisko uruchomieniowe następnie przeszukuje zestaw satelicki dla żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-146">The runtime then searches the satellite assembly for the requested resource.</span></span> <span data-ttu-id="5a284-147">W przypadku znalezienia zasobu w zestawie zostanie on użyty.</span><span class="sxs-lookup"><span data-stu-id="5a284-147">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="5a284-148">Jeśli zasób nie zostanie znaleziony, będzie kontynuował wyszukiwanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-148">If it doesn't find the resource, it continues the search.</span></span>

3. <span data-ttu-id="5a284-149">Środowisko uruchomieniowe następnym zażąda Instalator Windows, aby określić, czy zestaw satelicki ma być zainstalowany na żądanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-149">The runtime next queries the Windows Installer to determine whether the satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="5a284-150">Jeśli tak, obsługuje instalację, ładuje zestaw i przeszukuje go lub żądany zasób.</span><span class="sxs-lookup"><span data-stu-id="5a284-150">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="5a284-151">W przypadku znalezienia zasobu w zestawie zostanie on użyty.</span><span class="sxs-lookup"><span data-stu-id="5a284-151">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="5a284-152">Jeśli zasób nie zostanie znaleziony, będzie kontynuował wyszukiwanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-152">If it doesn't find the resource, it continues the search.</span></span>

4. <span data-ttu-id="5a284-153">Środowisko uruchomieniowe wywołuje zdarzenie <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>, aby wskazać, że nie można znaleźć zestawu satelickiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-153">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="5a284-154">Jeśli zdecydujesz się obsłużyć zdarzenie, program obsługi zdarzeń może zwrócić odwołanie do zestawu satelickiego, którego zasoby będą używane do wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="5a284-154">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="5a284-155">W przeciwnym razie program obsługi zdarzeń zwraca `null` i wyszukiwanie będzie kontynuowane.</span><span class="sxs-lookup"><span data-stu-id="5a284-155">Otherwise, the event handler returns `null` and the search continues.</span></span>

5. <span data-ttu-id="5a284-156">Następnie środowisko uruchomieniowe ponownie przeszukuje globalną pamięć podręczną zestawów, tym razem dla zestawu nadrzędnego żądanej kultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-156">The runtime next searches the global assembly cache again, this time for the parent assembly of the requested culture.</span></span> <span data-ttu-id="5a284-157">Jeśli zestaw nadrzędny istnieje w globalnej pamięci podręcznej zestawów, środowisko uruchomieniowe przeszukuje zestaw dla żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-157">If the parent assembly exists in the global assembly cache, the runtime searches the assembly for the requested resource.</span></span>

     <span data-ttu-id="5a284-158">Kultura nadrzędna jest definiowana jako odpowiednia kultura rezerwowa.</span><span class="sxs-lookup"><span data-stu-id="5a284-158">The parent culture is defined as the appropriate fallback culture.</span></span> <span data-ttu-id="5a284-159">Rozważ użycie obiektów nadrzędnych jako kandydatów Fallback, ponieważ dostarczenie dowolnego zasobu jest preferowane do zgłaszania wyjątku.</span><span class="sxs-lookup"><span data-stu-id="5a284-159">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="5a284-160">Ten proces pozwala również ponownie wykorzystać zasoby.</span><span class="sxs-lookup"><span data-stu-id="5a284-160">This process also allows you to reuse resources.</span></span> <span data-ttu-id="5a284-161">Określony zasób powinien znajdować się na poziomie nadrzędnym tylko wtedy, gdy Kultura podrzędna nie musi lokalizować żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-161">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="5a284-162">Na przykład, jeśli dostarczasz zestawy satelickie dla `en` (neutralnego alfabetu angielskiego), `en-GB` (angielski jako mówiony w Zjednoczonym Królestwie) i `en-US` (angielski jako mówiony w Stany Zjednoczone), Satelita `en` będzie zawierać powszechną terminologię i @no __t_4_ `en-US` i satelity mogą zapewnić przesłonięcia tylko te warunki, które się różnią.</span><span class="sxs-lookup"><span data-stu-id="5a284-162">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite would contain the common terminology, and the `en-GB` and `en-US` satellites could provide overrides for only those terms that differ.</span></span>

6. <span data-ttu-id="5a284-163">Następnie środowisko uruchomieniowe sprawdza katalog aktualnie wykonywanego zestawu, aby zobaczyć, czy zawiera katalog nadrzędny.</span><span class="sxs-lookup"><span data-stu-id="5a284-163">The runtime next checks the directory of the currently executing assembly to see if it contains a parent directory.</span></span> <span data-ttu-id="5a284-164">Jeśli katalog nadrzędny istnieje, środowisko uruchomieniowe przeszukuje katalog pod kątem prawidłowego zestawu satelickiego dla kultury nadrzędnej.</span><span class="sxs-lookup"><span data-stu-id="5a284-164">If a parent directory exists, the runtime searches the directory for a valid satellite assembly for the parent culture.</span></span> <span data-ttu-id="5a284-165">Jeśli odnajdzie zestaw, środowisko uruchomieniowe przeszukuje zestaw dla żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-165">If it finds the assembly, the runtime searches the assembly for the requested resource.</span></span> <span data-ttu-id="5a284-166">W przypadku znalezienia zasobu zostanie on użyty.</span><span class="sxs-lookup"><span data-stu-id="5a284-166">If it finds the resource, it uses it.</span></span> <span data-ttu-id="5a284-167">Jeśli zasób nie zostanie znaleziony, będzie kontynuował wyszukiwanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-167">If it doesn't find the resource, it continues the search.</span></span>

7. <span data-ttu-id="5a284-168">Środowisko uruchomieniowe następnym zapytaniem Instalator Windows, aby określić, czy nadrzędny zestaw satelicki ma być zainstalowany na żądanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-168">The runtime next queries the Windows Installer to determine whether the parent satellite assembly is to be installed on demand.</span></span> <span data-ttu-id="5a284-169">Jeśli tak, obsługuje instalację, ładuje zestaw i przeszukuje go lub żądany zasób.</span><span class="sxs-lookup"><span data-stu-id="5a284-169">If so, it handles the installation, loads the assembly, and searches it or the requested resource.</span></span> <span data-ttu-id="5a284-170">W przypadku znalezienia zasobu w zestawie zostanie on użyty.</span><span class="sxs-lookup"><span data-stu-id="5a284-170">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="5a284-171">Jeśli zasób nie zostanie znaleziony, będzie kontynuował wyszukiwanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-171">If it doesn't find the resource, it continues the search.</span></span>

8. <span data-ttu-id="5a284-172">Środowisko uruchomieniowe wywołuje zdarzenie <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>, aby wskazać, że nie można znaleźć odpowiedniego zasobu rezerwowego.</span><span class="sxs-lookup"><span data-stu-id="5a284-172">The runtime raises the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find an appropriate fallback resource.</span></span> <span data-ttu-id="5a284-173">Jeśli zdecydujesz się obsłużyć zdarzenie, program obsługi zdarzeń może zwrócić odwołanie do zestawu satelickiego, którego zasoby będą używane do wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="5a284-173">If you choose to handle the event, your event handler can return a reference to the satellite assembly whose resources will be used for the lookup.</span></span> <span data-ttu-id="5a284-174">W przeciwnym razie program obsługi zdarzeń zwraca `null` i wyszukiwanie będzie kontynuowane.</span><span class="sxs-lookup"><span data-stu-id="5a284-174">Otherwise, the event handler returns `null` and the search continues.</span></span>

9. <span data-ttu-id="5a284-175">Środowisko uruchomieniowe następnym szuka zestawów nadrzędnych, jak w poprzednich trzech krokach, za pomocą wielu potencjalnych poziomów.</span><span class="sxs-lookup"><span data-stu-id="5a284-175">The runtime next searches parent assemblies, as in the previous three steps, through many potential levels.</span></span> <span data-ttu-id="5a284-176">Każda kultura ma tylko jeden element nadrzędny, który jest zdefiniowany przez właściwość <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, ale element nadrzędny może mieć własny element nadrzędny.</span><span class="sxs-lookup"><span data-stu-id="5a284-176">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="5a284-177">Wyszukiwanie kultur nadrzędnych jest przerywane, gdy właściwość <xref:System.Globalization.CultureInfo.Parent%2A> kultury zwraca <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>; w przypadku rezerwy zasobów Niezmienna kultura nie jest uważana za kulturę nadrzędną ani kulturę, która może mieć zasoby.</span><span class="sxs-lookup"><span data-stu-id="5a284-177">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>; for resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

10. <span data-ttu-id="5a284-178">Jeśli kultura, która była pierwotnie określona i wszystkie elementy nadrzędne zostały przeszukane, a zasób nadal nie został znaleziony, używana jest wartość domyślna kultury (Fallback).</span><span class="sxs-lookup"><span data-stu-id="5a284-178">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="5a284-179">Zazwyczaj zasoby dla kultury domyślnej są zawarte w głównym zestawie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-179">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="5a284-180">Można jednak określić wartość <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> dla właściwości <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> atrybutu <xref:System.Resources.NeutralResourcesLanguageAttribute>, aby wskazać, że ostateczna lokalizacja rezerwowa dla zasobów jest zestawem satelity, a nie głównym zestawem.</span><span class="sxs-lookup"><span data-stu-id="5a284-180">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property of the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the ultimate fallback location for resources is a satellite assembly, rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5a284-181">Domyślny zasób jest jedynym zasobem, który można skompilować przy użyciu głównego zestawu.</span><span class="sxs-lookup"><span data-stu-id="5a284-181">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="5a284-182">O ile nie określisz zestawu satelickiego przy użyciu atrybutu <xref:System.Resources.NeutralResourcesLanguageAttribute>, jest to ostateczna rezerwa (końcowy element nadrzędny).</span><span class="sxs-lookup"><span data-stu-id="5a284-182">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="5a284-183">Dlatego zaleca się, aby zawsze zawierać domyślny zestaw zasobów w zestawie głównym.</span><span class="sxs-lookup"><span data-stu-id="5a284-183">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="5a284-184">Pomaga to zapobiegać zgłaszaniu wyjątków.</span><span class="sxs-lookup"><span data-stu-id="5a284-184">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="5a284-185">Przez dołączenie zasobu domyślnego, plik dostarcza rezerwę dla wszystkich zasobów i gwarantuje, że co najmniej jeden zasób jest zawsze obecny dla użytkownika, nawet jeśli nie jest specyficzny dla kultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-185">By including a default resource, file you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

11. <span data-ttu-id="5a284-186">Na koniec Jeśli środowisko uruchomieniowe nie znajdzie zasobu dla kultury domyślnej (rezerwowej), zostanie zgłoszony wyjątek <xref:System.Resources.MissingManifestResourceException> lub <xref:System.Resources.MissingSatelliteAssemblyException>, aby wskazać, że nie można odnaleźć zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-186">Finally, if the runtime doesn't find a resource for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span>

<span data-ttu-id="5a284-187">Załóżmy na przykład, że aplikacja żąda zasobu zlokalizowanego w języku hiszpańskim (Meksyk) (kultura `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="5a284-187">For example, suppose the application requests a resource localized for Spanish (Mexico) (the `es-MX` culture).</span></span> <span data-ttu-id="5a284-188">Środowisko uruchomieniowe najpierw przeszukuje globalną pamięć podręczną zestawów dla zestawu, który jest zgodny `es-MX`, ale go nie znajdzie.</span><span class="sxs-lookup"><span data-stu-id="5a284-188">The runtime first searches the global assembly cache for the assembly that matches `es-MX`, but doesn't find it.</span></span> <span data-ttu-id="5a284-189">Środowisko uruchomieniowe następnie przeszukuje katalog aktualnie wykonywanego zestawu dla katalogu `es-MX`.</span><span class="sxs-lookup"><span data-stu-id="5a284-189">The runtime then searches the directory of the currently executing assembly for an `es-MX` directory.</span></span> <span data-ttu-id="5a284-190">Niepowodzenie oznacza, że środowisko uruchomieniowe ponownie przeszukuje globalną pamięć podręczną zestawów dla zestawu nadrzędnego, który odzwierciedla odpowiednią kulturę rezerwową — w tym przypadku `es` (hiszpański).</span><span class="sxs-lookup"><span data-stu-id="5a284-190">Failing that, the runtime searches the global assembly cache again for a parent assembly that reflects the appropriate fallback culture — in this case, `es` (Spanish).</span></span> <span data-ttu-id="5a284-191">Jeśli zestaw nadrzędny nie zostanie znaleziony, środowisko uruchomieniowe przeszukuje wszystkie potencjalne poziomy zestawów nadrzędnych dla kultury `es-MX`, dopóki nie znajdzie odpowiedniego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-191">If the parent assembly is not found, the runtime searches all potential levels of parent assemblies for the `es-MX` culture until it finds a corresponding resource.</span></span> <span data-ttu-id="5a284-192">Jeśli zasób nie zostanie znaleziony, środowisko uruchomieniowe użyje zasobu dla kultury domyślnej.</span><span class="sxs-lookup"><span data-stu-id="5a284-192">If a resource isn't found, the runtime uses the resource for the default culture.</span></span>

<a name="Optimizing"></a>

#### <a name="optimizing-the-net-framework-resource-fallback-process"></a><span data-ttu-id="5a284-193">Optymalizowanie procesu rezerwowego .NET Framework zasobów</span><span class="sxs-lookup"><span data-stu-id="5a284-193">Optimizing the .NET Framework Resource Fallback Process</span></span>

<span data-ttu-id="5a284-194">W następujących warunkach można zoptymalizować proces, za pomocą którego środowisko uruchomieniowe wyszukuje zasoby w zestawach satelickich</span><span class="sxs-lookup"><span data-stu-id="5a284-194">Under the following conditions, you can optimize the process by which the runtime searches for resources in satellite assemblies</span></span>

- <span data-ttu-id="5a284-195">Zestawy satelickie są wdrażane w tej samej lokalizacji co zestaw kodu.</span><span class="sxs-lookup"><span data-stu-id="5a284-195">Satellite assemblies are deployed in the same location as the code assembly.</span></span> <span data-ttu-id="5a284-196">Jeśli zestaw kodu jest zainstalowany w [globalnej pamięci podręcznej zestawów](../app-domains/gac.md), zestawy satelickie są również zainstalowane w globalnej pamięci podręcznej zestawów.</span><span class="sxs-lookup"><span data-stu-id="5a284-196">If the code assembly is installed in the [Global Assembly Cache](../app-domains/gac.md), satellite assemblies are also installed in the global assembly cache.</span></span> <span data-ttu-id="5a284-197">Jeśli zestaw kodu jest zainstalowany w katalogu, zestawy satelickie są instalowane w folderach specyficznych dla kultury tego katalogu.</span><span class="sxs-lookup"><span data-stu-id="5a284-197">If the code assembly is installed in a directory, satellite assemblies are installed in culture-specific folders of that directory.</span></span>

- <span data-ttu-id="5a284-198">Zestawy satelickie nie są zainstalowane na żądanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-198">Satellite assemblies are not installed on demand.</span></span>

- <span data-ttu-id="5a284-199">Kod aplikacji nie obsługuje zdarzenia <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="5a284-199">Application code does not handle the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

<span data-ttu-id="5a284-200">Możesz zoptymalizować sondę dla zestawów satelitarnych, dołączając [\<relativeBindForResources >](../configure-apps/file-schema/runtime/relativebindforresources-element.md) elementu i ustawiając jego atrybut `enabled` na `true` w pliku konfiguracyjnym aplikacji, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="5a284-200">You optimize the probe for satellite assemblies by including the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element and setting its `enabled` attribute to `true` in the application configuration file, as shown in the following example.</span></span>

```xml
<configuration>
   <runtime>
      <relativeBindForResources enabled="true" />
   </runtime>
</configuration>
```

<span data-ttu-id="5a284-201">Optymalizacja pod kątem zestawów satelitarnych to funkcja opcjonalna.</span><span class="sxs-lookup"><span data-stu-id="5a284-201">The optimized probe for satellite assemblies is an opt-in feature.</span></span> <span data-ttu-id="5a284-202">Oznacza to, że środowisko uruchomieniowe postępuje zgodnie z krokami opisanymi w [procesie rezerwowym zasobu](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) , chyba że element [\<relativeBindForResources >](../configure-apps/file-schema/runtime/relativebindforresources-element.md) jest obecny w pliku konfiguracji aplikacji, a jego atrybut `enabled` jest ustawiony na `true`.</span><span class="sxs-lookup"><span data-stu-id="5a284-202">That is, the runtime follows the steps documented in [The Resource Fallback Process](packaging-and-deploying-resources-in-desktop-apps.md#cpconpackagingdeployingresourcesanchor1) unless the [\<relativeBindForResources>](../configure-apps/file-schema/runtime/relativebindforresources-element.md) element is present in the application's configuration file and its `enabled` attribute is set to `true`.</span></span> <span data-ttu-id="5a284-203">W takim przypadku proces sondowania dla zestawu satelickiego jest modyfikowany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="5a284-203">If this is the case, the process of probing for a satellite assembly is modified as follows:</span></span>

- <span data-ttu-id="5a284-204">Środowisko uruchomieniowe używa lokalizacji zestawu kodu nadrzędnego do sondowania dla zestawu satelickiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-204">The runtime uses the location of the parent code assembly to probe for the satellite assembly.</span></span> <span data-ttu-id="5a284-205">Jeśli zestaw nadrzędny jest zainstalowany w globalnej pamięci podręcznej zestawów, sondy środowiska uruchomieniowego w pamięci podręcznej, ale nie w katalogu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-205">If the parent assembly is installed in the global assembly cache, the runtime probes in the cache but not in the application's directory.</span></span> <span data-ttu-id="5a284-206">Jeśli zestaw nadrzędny jest zainstalowany w katalogu aplikacji, sondy środowiska uruchomieniowego w katalogu aplikacji, ale nie w globalnej pamięci podręcznej zestawów.</span><span class="sxs-lookup"><span data-stu-id="5a284-206">If the parent assembly is installed in an application directory, the runtime probes in the application directory but not in the global assembly cache.</span></span>

- <span data-ttu-id="5a284-207">Środowisko uruchomieniowe nie wykonuje zapytania do Instalator Windows na potrzeby instalacji zestawów satelitarnych na żądanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-207">The runtime doesn't query the Windows Installer for on-demand installation of satellite assemblies.</span></span>

- <span data-ttu-id="5a284-208">Jeśli sonda dla określonego zestawu zasobów ulegnie awarii, środowisko uruchomieniowe nie zgłosi zdarzenia <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="5a284-208">If the probe for a particular resource assembly fails, the runtime does not raise the <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event.</span></span>

### <a name="net-core-resource-fallback-process"></a><span data-ttu-id="5a284-209">Proces rezerwowy zasobów platformy .NET Core</span><span class="sxs-lookup"><span data-stu-id="5a284-209">.NET Core resource fallback process</span></span>

<span data-ttu-id="5a284-210">Proces rezerwowy zasobów platformy .NET Core obejmuje następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="5a284-210">The .NET Core resource fallback process involves the following steps:</span></span>

1. <span data-ttu-id="5a284-211">Środowisko uruchomieniowe próbuje załadować zestaw satelicki dla wymaganej kultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-211">The runtime attempts to load a satellite assembly for the requested culture.</span></span>
     - <span data-ttu-id="5a284-212">Sprawdza katalog aktualnie wykonywanego zestawu dla podkatalogu, który jest zgodny z żądaną kulturą.</span><span class="sxs-lookup"><span data-stu-id="5a284-212">Checks the directory of the currently executing assembly for a subdirectory that matches the requested culture.</span></span> <span data-ttu-id="5a284-213">Jeśli odnajdzie podkatalog, przeszukuje ten podkatalog dla prawidłowego zestawu satelickiego dla wymaganej kultury i ładuje go.</span><span class="sxs-lookup"><span data-stu-id="5a284-213">If it finds the subdirectory, it searches that subdirectory for a valid satellite assembly for the requested culture and loads it.</span></span>

       > [!NOTE]
       > <span data-ttu-id="5a284-214">W systemach operacyjnych z systemami plików z uwzględnieniem wielkości liter (czyli Linux i macOS) Wyszukiwanie w podkatalogu nazw kultur jest rozróżniana wielkość liter.</span><span class="sxs-lookup"><span data-stu-id="5a284-214">On operating systems with case-sensitive file systems (that is, Linux and macOS), the culture name subdirectory search is case-sensitive.</span></span> <span data-ttu-id="5a284-215">Nazwa podkatalogu musi dokładnie pasować do wielkości liter <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (na przykład `es` lub `es-MX`).</span><span class="sxs-lookup"><span data-stu-id="5a284-215">The subdirectory name must exactly match the case of the <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType> (for example, `es` or `es-MX`).</span></span>

       > [!NOTE]
       > <span data-ttu-id="5a284-216">Jeśli programista poprowadził niestandardowy kontekst ładowania zestawu od <xref:System.Runtime.Loader.AssemblyLoadContext>, sytuacja jest skomplikowana.</span><span class="sxs-lookup"><span data-stu-id="5a284-216">If the programmer has derived a custom assembly load context from <xref:System.Runtime.Loader.AssemblyLoadContext>, the situation is complicated.</span></span> <span data-ttu-id="5a284-217">Jeśli zestaw wykonawczy został załadowany do kontekstu niestandardowego, środowisko uruchomieniowe ładuje zestaw satelicki do niestandardowego kontekstu.</span><span class="sxs-lookup"><span data-stu-id="5a284-217">If the executing assembly was loaded into the custom context, the runtime loads the satellite assembly into the custom context.</span></span> <span data-ttu-id="5a284-218">Szczegóły znajdują się poza zakresem tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="5a284-218">The details are out of scope for this document.</span></span> <span data-ttu-id="5a284-219">Zobacz <xref:System.Runtime.Loader.AssemblyLoadContext>.</span><span class="sxs-lookup"><span data-stu-id="5a284-219">See  <xref:System.Runtime.Loader.AssemblyLoadContext>.</span></span>

     - <span data-ttu-id="5a284-220">Jeśli nie można odnaleźć asemblera satelitarnego, <xref:System.Runtime.Loader.AssemblyLoadContext> wywołuje zdarzenie <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType>, aby wskazać, że nie można znaleźć zestawu satelickiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-220">If a satellite assemble has not been found, the <xref:System.Runtime.Loader.AssemblyLoadContext> raises the <xref:System.Runtime.Loader.AssemblyLoadContext.Resolving?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="5a284-221">Jeśli zdecydujesz się obsłużyć zdarzenie, program obsługi zdarzeń może załadować i zwrócić odwołanie do zestawu satelickiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-221">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>
     - <span data-ttu-id="5a284-222">Jeśli zestaw satelicki nadal nie został znaleziony, AssemblyLoadContext powoduje, że obiekt AppDomain wyzwala zdarzenie <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType>, aby wskazać, że nie można znaleźć zestawu satelickiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-222">If a satellite assembly still has not been found, the AssemblyLoadContext causes the AppDomain to trigger an <xref:System.AppDomain.AssemblyResolve?displayProperty=nameWithType> event to indicate that it is unable to find the satellite assembly.</span></span> <span data-ttu-id="5a284-223">Jeśli zdecydujesz się obsłużyć zdarzenie, program obsługi zdarzeń może załadować i zwrócić odwołanie do zestawu satelickiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-223">If you choose to handle the event, your event handler can load and return a reference to the satellite assembly.</span></span>

2. <span data-ttu-id="5a284-224">W przypadku znalezienia zestawu satelickiego środowisko uruchomieniowe przeszukuje go w poszukiwaniu żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-224">If a satellite assembly is found, the runtime searches it for the requested resource.</span></span> <span data-ttu-id="5a284-225">W przypadku znalezienia zasobu w zestawie zostanie on użyty.</span><span class="sxs-lookup"><span data-stu-id="5a284-225">If it finds the resource in the assembly, it uses it.</span></span> <span data-ttu-id="5a284-226">Jeśli zasób nie zostanie znaleziony, będzie kontynuował wyszukiwanie.</span><span class="sxs-lookup"><span data-stu-id="5a284-226">If it doesn't find the resource, it continues the search.</span></span>

     > [!NOTE]
     > <span data-ttu-id="5a284-227">Aby znaleźć zasób w ramach zestawu satelickiego, środowisko uruchomieniowe wyszukuje plik zasobów żądany przez <xref:System.Resources.ResourceManager> dla bieżącego <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="5a284-227">To find a resource within the satellite assembly, the runtime searches for the resource file requested by the <xref:System.Resources.ResourceManager> for the current <xref:System.Globalization.CultureInfo.Name?displayProperty=nameWithType>.</span></span> <span data-ttu-id="5a284-228">W pliku zasobów szuka żądanej nazwy zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-228">Within the resource file it searches for the requested resource name.</span></span> <span data-ttu-id="5a284-229">Jeśli nie zostanie znaleziony, zasób jest traktowany jako nieodnaleziony.</span><span class="sxs-lookup"><span data-stu-id="5a284-229">If either is not found, the resource is treated as not found.</span></span>

3. <span data-ttu-id="5a284-230">Środowisko uruchomieniowe następnym szuka zestawów kultur nadrzędnych za pomocą wielu możliwych poziomów, za każdym razem, gdy powtarzają się kroki 1 & 2.</span><span class="sxs-lookup"><span data-stu-id="5a284-230">The runtime next searches the parent culture assemblies through many potential levels, each time repeating steps 1 & 2.</span></span>

     <span data-ttu-id="5a284-231">Kultura nadrzędna jest definiowana jako odpowiednia kultura rezerwowa.</span><span class="sxs-lookup"><span data-stu-id="5a284-231">The parent culture is defined as an appropriate fallback culture.</span></span> <span data-ttu-id="5a284-232">Rozważ użycie obiektów nadrzędnych jako kandydatów Fallback, ponieważ dostarczenie dowolnego zasobu jest preferowane do zgłaszania wyjątku.</span><span class="sxs-lookup"><span data-stu-id="5a284-232">Consider parents as fallback candidates, because providing any resource is preferable to throwing an exception.</span></span> <span data-ttu-id="5a284-233">Ten proces pozwala również ponownie wykorzystać zasoby.</span><span class="sxs-lookup"><span data-stu-id="5a284-233">This process also allows you to reuse resources.</span></span> <span data-ttu-id="5a284-234">Określony zasób powinien znajdować się na poziomie nadrzędnym tylko wtedy, gdy Kultura podrzędna nie musi lokalizować żądanego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-234">You should include a particular resource at the parent level only if the child culture doesn't need to localize the requested resource.</span></span> <span data-ttu-id="5a284-235">Na przykład, jeśli dostarczasz zestawy satelickie dla `en` (neutralnego alfabetu angielskiego), `en-GB` (angielski jako mówiony w Zjednoczonym Królestwie) i `en-US` (angielski jako mówiony w Stany Zjednoczone), `en` Satelita zawiera wspólną terminologię i `en-GB` `en-US` i satelity udostępniają zastąpienia tylko dla tych warunków, które się różnią.</span><span class="sxs-lookup"><span data-stu-id="5a284-235">For example, if you supply satellite assemblies for `en` (neutral English), `en-GB` (English as spoken in the United Kingdom), and `en-US` (English as spoken in the United States), the `en` satellite contains the common terminology, and the `en-GB` and `en-US` satellites provides overrides for only those terms that differ.</span></span>

     <span data-ttu-id="5a284-236">Każda kultura ma tylko jeden element nadrzędny, który jest zdefiniowany przez właściwość <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType>, ale element nadrzędny może mieć własny element nadrzędny.</span><span class="sxs-lookup"><span data-stu-id="5a284-236">Each culture has only one parent, which is defined by the <xref:System.Globalization.CultureInfo.Parent%2A?displayProperty=nameWithType> property, but a parent might have its own parent.</span></span> <span data-ttu-id="5a284-237">Wyszukiwanie kultur nadrzędnych jest przerywane, gdy właściwość <xref:System.Globalization.CultureInfo.Parent%2A> kultury zwraca <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="5a284-237">The search for parent cultures stops when a culture's <xref:System.Globalization.CultureInfo.Parent%2A> property returns <xref:System.Globalization.CultureInfo.InvariantCulture%2A?displayProperty=nameWithType>.</span></span> <span data-ttu-id="5a284-238">W przypadku rezerwy zasobów Niezmienna kultura nie jest uważana za kulturę nadrzędną ani kulturę, która może mieć zasoby.</span><span class="sxs-lookup"><span data-stu-id="5a284-238">For resource fallback, the invariant culture is not considered a parent culture or a culture that can have resources.</span></span>

4. <span data-ttu-id="5a284-239">Jeśli kultura, która była pierwotnie określona i wszystkie elementy nadrzędne zostały przeszukane, a zasób nadal nie został znaleziony, używana jest wartość domyślna kultury (Fallback).</span><span class="sxs-lookup"><span data-stu-id="5a284-239">If the culture that was originally specified and all parents have been searched and the resource is still not found, the resource for the default (fallback) culture is used.</span></span> <span data-ttu-id="5a284-240">Zazwyczaj zasoby dla kultury domyślnej są zawarte w głównym zestawie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-240">Typically, the resources for the default culture are included in the main application assembly.</span></span> <span data-ttu-id="5a284-241">Można jednak określić wartość <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> właściwości <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A>, aby wskazać, że ostateczna lokalizacja rezerwowa dla zasobów jest zestawem satelity, a nie głównym zestawem.</span><span class="sxs-lookup"><span data-stu-id="5a284-241">However, you can specify a value of <xref:System.Resources.UltimateResourceFallbackLocation.Satellite?displayProperty.nameWithType> for the <xref:System.Resources.NeutralResourcesLanguageAttribute.Location%2A> property to indicate that the ultimate fallback location for resources is a satellite assembly rather than the main assembly.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5a284-242">Domyślny zasób jest jedynym zasobem, który można skompilować przy użyciu głównego zestawu.</span><span class="sxs-lookup"><span data-stu-id="5a284-242">The default resource is the only resource that can be compiled with the main assembly.</span></span> <span data-ttu-id="5a284-243">O ile nie określisz zestawu satelickiego przy użyciu atrybutu <xref:System.Resources.NeutralResourcesLanguageAttribute>, jest to ostateczna rezerwa (końcowy element nadrzędny).</span><span class="sxs-lookup"><span data-stu-id="5a284-243">Unless you specify a satellite assembly by using the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute, it is the ultimate fallback (final parent).</span></span> <span data-ttu-id="5a284-244">Dlatego zaleca się, aby zawsze zawierać domyślny zestaw zasobów w zestawie głównym.</span><span class="sxs-lookup"><span data-stu-id="5a284-244">Therefore, we recommend that you always include a default set of resources in your main assembly.</span></span> <span data-ttu-id="5a284-245">Pomaga to zapobiegać zgłaszaniu wyjątków.</span><span class="sxs-lookup"><span data-stu-id="5a284-245">This helps prevent exceptions from being thrown.</span></span> <span data-ttu-id="5a284-246">Dołączając domyślny plik zasobów, należy podać rezerwę dla wszystkich zasobów i upewnić się, że co najmniej jeden zasób jest zawsze obecny dla użytkownika, nawet jeśli nie jest specyficzny dla kultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-246">By including a default resource file, you provide a fallback for all resources and ensure that at least one resource is always present for the user, even if it is not culturally specific.</span></span>

5. <span data-ttu-id="5a284-247">Na koniec Jeśli środowisko uruchomieniowe nie odnajdzie pliku zasobów dla kultury domyślnej (rezerwowej), zostanie zgłoszony wyjątek <xref:System.Resources.MissingManifestResourceException> lub <xref:System.Resources.MissingSatelliteAssemblyException>, aby wskazać, że nie można odnaleźć zasobu.</span><span class="sxs-lookup"><span data-stu-id="5a284-247">Finally, if the runtime doesn't find a resource file for a default (fallback) culture, a <xref:System.Resources.MissingManifestResourceException> or <xref:System.Resources.MissingSatelliteAssemblyException> exception is thrown to indicate that the resource could not be found.</span></span> <span data-ttu-id="5a284-248">Jeśli plik zasobów zostanie znaleziony, ale żądany zasób nie jest obecny, żądanie zwróci `null`.</span><span class="sxs-lookup"><span data-stu-id="5a284-248">If the resource file is found but the requested resource is not present the request returns `null`.</span></span>

### <a name="ultimate-fallback-to-satellite-assembly"></a><span data-ttu-id="5a284-249">Ostateczny powrót do zestawu satelickiego</span><span class="sxs-lookup"><span data-stu-id="5a284-249">Ultimate Fallback to Satellite Assembly</span></span>

<span data-ttu-id="5a284-250">Opcjonalnie można usunąć zasoby z głównego zestawu i określić, że środowisko uruchomieniowe ma ładować ostateczne zasoby rezerwowe z zestawu satelitarnego, który odpowiada określonej kulturze.</span><span class="sxs-lookup"><span data-stu-id="5a284-250">You can optionally remove resources from the main assembly and specify that the runtime should load the ultimate fallback resources from a satellite assembly that corresponds to a specific culture.</span></span> <span data-ttu-id="5a284-251">Aby kontrolować proces rezerwowy, należy użyć konstruktora <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29?displayProperty=nameWithType> i podać wartość parametru <xref:System.Resources.UltimateResourceFallbackLocation>, który określa, czy Menedżer zasobów powinien wyodrębnić zasoby rezerwowe z zestawu głównego lub z zestawu satelickiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-251">To control the fallback process, you use the <xref:System.Resources.NeutralResourcesLanguageAttribute.%23ctor%28System.String%2CSystem.Resources.UltimateResourceFallbackLocation%29?displayProperty=nameWithType> constructor and supply a value for the <xref:System.Resources.UltimateResourceFallbackLocation> parameter that specifies whether Resource Manager should extract the fallback resources from the main assembly or from a satellite assembly.</span></span>

<span data-ttu-id="5a284-252">W poniższym przykładzie .NET Framework używany jest atrybut <xref:System.Resources.NeutralResourcesLanguageAttribute> do przechowywania rezerwowych zasobów aplikacji w zestawie satelitarnym dla języka francuskiego (`fr`).</span><span class="sxs-lookup"><span data-stu-id="5a284-252">The following .NET Framework example uses the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to store an application's fallback resources in a satellite assembly for the French (`fr`) language.</span></span> <span data-ttu-id="5a284-253">Przykład ma dwa pliki zasobów tekstowych, które definiują pojedynczy ciąg zasobów o nazwie `Greeting`.</span><span class="sxs-lookup"><span data-stu-id="5a284-253">The example has two text-based resource files that define a single string resource named `Greeting`.</span></span> <span data-ttu-id="5a284-254">Pierwszy z zasobów. fr. txt zawiera zasób języka francuskiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-254">The first, resources.fr.txt, contains a French language resource.</span></span>

```text
Greeting=Bon jour!
```

<span data-ttu-id="5a284-255">Drugi, zasoby, ru. txt, zawiera zasób języka rosyjskiego.</span><span class="sxs-lookup"><span data-stu-id="5a284-255">The second, resources,ru.txt, contains a Russian language resource.</span></span>

```text
Greeting=Добрый день
```

<span data-ttu-id="5a284-256">Te dwa pliki są kompilowane do plików Resources, uruchamiając [Generator plików zasobów (Resgen. exe)](../tools/resgen-exe-resource-file-generator.md) z wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="5a284-256">These two files are compiled to .resources files by running the [resource file generator (Resgen.exe)](../tools/resgen-exe-resource-file-generator.md) from the command line.</span></span> <span data-ttu-id="5a284-257">Dla zasobu języka francuskiego polecenie to:</span><span class="sxs-lookup"><span data-stu-id="5a284-257">For the French language resource, the command is:</span></span>

<span data-ttu-id="5a284-258">**Resgen. exe Resources. fr. txt**</span><span class="sxs-lookup"><span data-stu-id="5a284-258">**resgen.exe resources.fr.txt**</span></span>

<span data-ttu-id="5a284-259">Dla zasobu języka rosyjskiego polecenie to:</span><span class="sxs-lookup"><span data-stu-id="5a284-259">For the Russian language resource, the command is:</span></span>

<span data-ttu-id="5a284-260">**Resgen. exe Resources. ru. txt**</span><span class="sxs-lookup"><span data-stu-id="5a284-260">**resgen.exe resources.ru.txt**</span></span>

<span data-ttu-id="5a284-261">Pliki resources są osadzane w bibliotekach dołączanych dynamicznie przez uruchomienie [konsolidatora zestawu (Al. exe)](../tools/al-exe-assembly-linker.md) z wiersza polecenia dla zasobu języka francuskiego w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="5a284-261">The .resources files are embedded into dynamic link libraries by running [assembly linker (Al.exe)](../tools/al-exe-assembly-linker.md) from the command line for the French language resource as follows:</span></span>

<span data-ttu-id="5a284-262">**Al/t: lib/embed: Resources. fr. resources/Culture: fr/out: fr\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="5a284-262">**al /t:lib /embed:resources.fr.resources /culture:fr /out:fr\Example1.resources.dll**</span></span>

<span data-ttu-id="5a284-263">i dla zasobu języka rosyjskiego w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="5a284-263">and for the Russian language resource as follows:</span></span>

<span data-ttu-id="5a284-264">**Al/t: lib/embed: Resources. ru. resources/Culture: ru/out: ru\Example1.resources.dll**</span><span class="sxs-lookup"><span data-stu-id="5a284-264">**al /t:lib /embed:resources.ru.resources /culture:ru /out:ru\Example1.resources.dll**</span></span>

<span data-ttu-id="5a284-265">Kod źródłowy aplikacji znajduje się w pliku o nazwie Example1.cs lub example1. vb.</span><span class="sxs-lookup"><span data-stu-id="5a284-265">The application source code resides in a file named Example1.cs or Example1.vb.</span></span> <span data-ttu-id="5a284-266">Zawiera atrybut <xref:System.Resources.NeutralResourcesLanguageAttribute>, aby wskazać, że domyślny zasób aplikacji znajduje się w podkatalogu fr.</span><span class="sxs-lookup"><span data-stu-id="5a284-266">It includes the <xref:System.Resources.NeutralResourcesLanguageAttribute> attribute to indicate that the default application resource is in the fr subdirectory.</span></span> <span data-ttu-id="5a284-267">Tworzy wystąpienie Menedżer zasobów, pobiera wartość zasobu `Greeting` i wyświetla go w konsoli programu.</span><span class="sxs-lookup"><span data-stu-id="5a284-267">It instantiates the Resource Manager, retrieves the value of the `Greeting` resource, and displays it to the console.</span></span>

[!code-csharp[Conceptual.Resources.Packaging#1](~/samples/snippets/csharp/VS_Snippets_CLR/conceptual.resources.packaging/cs/example1.cs#1)]
[!code-vb[Conceptual.Resources.Packaging#1](~/samples/snippets/visualbasic/VS_Snippets_CLR/conceptual.resources.packaging/vb/example1.vb#1)]

<span data-ttu-id="5a284-268">Następnie można skompilować C# kod źródłowy z wiersza polecenia w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="5a284-268">You can then compile C# source code from the command line as follows:</span></span>

```console
csc Example1.cs
```

<span data-ttu-id="5a284-269">Polecenie dla kompilatora Visual Basic jest bardzo podobne:</span><span class="sxs-lookup"><span data-stu-id="5a284-269">The command for the Visual Basic compiler is very similar:</span></span>

```console
vbc Example1.vb
```

<span data-ttu-id="5a284-270">Ponieważ nie ma żadnych zasobów osadzonych w zestawie głównym, nie trzeba kompilować przy użyciu przełącznika `/resource`.</span><span class="sxs-lookup"><span data-stu-id="5a284-270">Because there are no resources embedded in the main assembly, you do not have to compile by using the `/resource` switch.</span></span>

<span data-ttu-id="5a284-271">Po uruchomieniu przykładu z systemu, którego język to coś innego niż rosyjski, wyświetla następujące dane wyjściowe:</span><span class="sxs-lookup"><span data-stu-id="5a284-271">When you run the example from a system whose language is anything other than Russian, it displays the following output:</span></span>

```output
Bon jour!
```

## <a name="suggested-packaging-alternative"></a><span data-ttu-id="5a284-272">Sugerowane alternatywne opakowanie</span><span class="sxs-lookup"><span data-stu-id="5a284-272">Suggested Packaging Alternative</span></span>

<span data-ttu-id="5a284-273">Ograniczenia czasu lub budżetu mogą uniemożliwiać utworzenie zestawu zasobów dla każdej podkultury obsługiwanej przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="5a284-273">Time or budget constraints might prevent you from creating a set of resources for every subculture that your application supports.</span></span> <span data-ttu-id="5a284-274">Zamiast tego można utworzyć pojedynczy zestaw satelicki dla kultury nadrzędnej, którego mogą używać wszystkie powiązane podkultury.</span><span class="sxs-lookup"><span data-stu-id="5a284-274">Instead, you can create a single satellite assembly for a parent culture that all related subcultures can use.</span></span> <span data-ttu-id="5a284-275">Można na przykład dostarczyć pojedynczy angielski zestaw satelicki (EN), który jest pobierany przez użytkowników, którzy żądają zasobów w języku angielskim specyficznym dla regionu, oraz jednego zestawu satelickiego dla Niemiec (de) dla użytkowników żądających zasobów niemieckich specyficznych dla regionu.</span><span class="sxs-lookup"><span data-stu-id="5a284-275">For example, you can provide a single English satellite assembly (en) that is retrieved by users who request region-specific English resources, and a single German satellite assembly (de) for users who request region-specific German resources.</span></span> <span data-ttu-id="5a284-276">Na przykład żądania dotyczące języka niemieckiego w Niemczech (de-DE), Austrii (de-AT) i Szwajcarii (de-CH) zostałyby przywrócone do niemieckiego zestawu satelickiego (de).</span><span class="sxs-lookup"><span data-stu-id="5a284-276">For example, requests for German as spoken in Germany (de-DE), Austria (de-AT), and Switzerland (de-CH) would fall back to the German satellite assembly (de).</span></span> <span data-ttu-id="5a284-277">Domyślne zasoby są końcową rezerwą i dlatego powinny być zasobami, które będą wymagane przez większość użytkowników aplikacji, dlatego należy starannie wybierać te zasoby.</span><span class="sxs-lookup"><span data-stu-id="5a284-277">The default resources are the final fallback and therefore should be the resources that will be requested by the majority of your application's users, so choose these resources carefully.</span></span> <span data-ttu-id="5a284-278">Takie podejście wdraża zasoby, które są mniej specyficzne dla kultury, ale znacznie zmniejsza koszty lokalizacji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5a284-278">This approach deploys resources that are less culturally specific, but can significantly reduce your application's localization costs.</span></span>

## <a name="see-also"></a><span data-ttu-id="5a284-279">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="5a284-279">See also</span></span>

- [<span data-ttu-id="5a284-280">Zasoby w aplikacjach klasycznych</span><span class="sxs-lookup"><span data-stu-id="5a284-280">Resources in Desktop Apps</span></span>](index.md)
- [<span data-ttu-id="5a284-281">Global Assembly Cache</span><span class="sxs-lookup"><span data-stu-id="5a284-281">Global Assembly Cache</span></span>](../app-domains/gac.md)
- [<span data-ttu-id="5a284-282">Tworzenie plików zasobów</span><span class="sxs-lookup"><span data-stu-id="5a284-282">Creating Resource Files</span></span>](creating-resource-files-for-desktop-apps.md)
- [<span data-ttu-id="5a284-283">Tworzenie zestawów satelickich</span><span class="sxs-lookup"><span data-stu-id="5a284-283">Creating Satellite Assemblies</span></span>](creating-satellite-assemblies-for-desktop-apps.md)
