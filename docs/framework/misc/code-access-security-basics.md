---
title: "Podstawy zabezpieczeń dostępu kodu"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords: security [.NET Framework], code access security
ms.assetid: 4eaa6535-d9fe-41a1-91d8-b437cfc16921
caps.latest.revision: "21"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 1fbeae8d01d9ef03c476679ea7fc59273b7a0a0b
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="code-access-security-basics"></a><span data-ttu-id="8d494-102">Podstawy zabezpieczeń dostępu kodu</span><span class="sxs-lookup"><span data-stu-id="8d494-102">Code Access Security Basics</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="8d494-103">Każda aplikacja, przeznaczonego dla środowiska CLR (oznacza to, co zarządzanych aplikacji) musi współdziałać z systemu zabezpieczeń środowiska uruchomieniowego.</span><span class="sxs-lookup"><span data-stu-id="8d494-103">Every application that targets the common language runtime (that is, every managed application) must interact with the runtime's security system.</span></span> <span data-ttu-id="8d494-104">Podczas ładowania zarządzanej aplikacji jej host automatycznie spowoduje przyznanie zestaw uprawnień.</span><span class="sxs-lookup"><span data-stu-id="8d494-104">When a managed application is loaded, its host automatically grants it a set of permissions.</span></span> <span data-ttu-id="8d494-105">Te uprawnienia są określane przez hosta ustawienia zabezpieczeń lokalnych lub aplikacji znajduje się w piaskownicy.</span><span class="sxs-lookup"><span data-stu-id="8d494-105">These permissions are determined by the host's local security settings or by the sandbox the application is in.</span></span> <span data-ttu-id="8d494-106">W zależności od tych uprawnień aplikacja działa prawidłowo lub generuje wyjątek zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8d494-106">Depending on these permissions, the application either runs properly or generates a security exception.</span></span>  
  
 <span data-ttu-id="8d494-107">Domyślnego hosta dla aplikacji klasycznych umożliwia uruchamianie kodu w trybie pełnego zaufania.</span><span class="sxs-lookup"><span data-stu-id="8d494-107">The default host for desktop applications allows code to run in full trust.</span></span> <span data-ttu-id="8d494-108">W związku z tym, jeśli aplikacja jest przeznaczony dla pulpitu, posiada nieograniczone uprawnienia ustawić.</span><span class="sxs-lookup"><span data-stu-id="8d494-108">Therefore, if your application targets the desktop, it has an unrestricted permission set.</span></span> <span data-ttu-id="8d494-109">Inne hosty lub piaskownic zapewnia ograniczone uprawnienia ustawione dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8d494-109">Other hosts or sandboxes provide a limited permission set for applications.</span></span> <span data-ttu-id="8d494-110">Zestaw uprawnień można zmieniać między hostami, należy zaprojektować aplikację do używania uprawnień umożliwiających dostęp do hosta docelowego.</span><span class="sxs-lookup"><span data-stu-id="8d494-110">Because the permission set can change from host to host, you must design your application to use only the permissions that your target host allows.</span></span>  
  
 <span data-ttu-id="8d494-111">Należy zapoznać się z następujących koncepcji zabezpieczeń dostępu kodu w celu zapisania obiektu docelowego środowisko uruchomieniowe języka wspólnego skuteczne aplikacji:</span><span class="sxs-lookup"><span data-stu-id="8d494-111">You must be familiar with the following code access security concepts in order to write effective applications that target the common language runtime:</span></span>  
  
-   <span data-ttu-id="8d494-112">**Bezpieczny kod**: kod, który uzyskuje dostęp do typów tylko w sposób wyraźnie określone, dozwolony jest bezpieczny kod.</span><span class="sxs-lookup"><span data-stu-id="8d494-112">**Type-safe code**: Type-safe code is code that accesses types only in well-defined, allowable ways.</span></span> <span data-ttu-id="8d494-113">Na przykład danego odwołania do prawidłowego obiektu, bezpieczny kod może uzyskiwać dostęp do pamięci w stałej przesunięcia, które odpowiadają elementy członkowskie rzeczywiste pola.</span><span class="sxs-lookup"><span data-stu-id="8d494-113">For example, given a valid object reference, type-safe code can access memory at fixed offsets that correspond to actual field members.</span></span> <span data-ttu-id="8d494-114">Jeśli kod uzyskuje dostęp do pamięci dowolnego przesunięcia poza zakres pamięci należy do tego obiektu publicznie udostępnione pola, nie jest bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="8d494-114">If the code accesses memory at arbitrary offsets outside the range of memory that belongs to that object's publicly exposed fields, it is not type-safe.</span></span> <span data-ttu-id="8d494-115">Aby włączyć kod, aby korzystać z zabezpieczeń dostępu kodu, należy użyć kompilatora, który generuje sprawdzalnie bezpieczny kod.</span><span class="sxs-lookup"><span data-stu-id="8d494-115">To enable code to benefit from code access security, you must use a compiler that generates verifiably type-safe code.</span></span> <span data-ttu-id="8d494-116">Aby uzyskać więcej informacji, zobacz [zapisu Sprawdzalnie bezpieczny kod](#typesafe_code) później w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="8d494-116">For more information, see the [Writing Verifiably Type-Safe Code](#typesafe_code) section later in this topic.</span></span>  
  
-   <span data-ttu-id="8d494-117">**Składni konieczne a declarative**: kod, którego celem jest środowisko uruchomieniowe języka wspólnego mogą prowadzić interakcję z systemu zabezpieczeń za pomocą żądania uprawnień wymagających, że obiekty wywołujące określony uprawnienia i zastępowanie niektórych (ustawienia zabezpieczeń Podana wystarczających uprawnień).</span><span class="sxs-lookup"><span data-stu-id="8d494-117">**Imperative and declarative syntax**: Code that targets the common language runtime can interact with the security system by requesting permissions, demanding that callers have specified permissions, and overriding certain security settings (given enough privileges).</span></span> <span data-ttu-id="8d494-118">Użycie dwóch metod składni programowo interakcję z systemu zabezpieczeń .NET Framework: składni deklaratywnej i składni konieczne.</span><span class="sxs-lookup"><span data-stu-id="8d494-118">You use two forms of syntax to programmatically interact with the .NET Framework security system: declarative syntax and imperative syntax.</span></span> <span data-ttu-id="8d494-119">Deklaracyjne wywołania są wykonywane przy użyciu atrybutów; wywołania konieczne są wykonywane przy użyciu nowych wystąpień klas w kodzie.</span><span class="sxs-lookup"><span data-stu-id="8d494-119">Declarative calls are performed using attributes; imperative calls are performed using new instances of classes within your code.</span></span> <span data-ttu-id="8d494-120">Niektóre połączenia, które mogą być wykonywane tylko imperatively, inne mogą być wykonywane tylko deklaratywnie i niektóre połączenia może być wykonane w sposób albo.</span><span class="sxs-lookup"><span data-stu-id="8d494-120">Some calls can be performed only imperatively, others can be performed only declaratively, and some calls can be performed in either manner.</span></span>  
  
-   <span data-ttu-id="8d494-121">**Zabezpieczanie bibliotek klas**: biblioteki klas bezpiecznego używa żądania kontroli zabezpieczeń do upewnij się, że wywoływania biblioteki ma uprawnienia dostępu do zasobów, które udostępnia biblioteki.</span><span class="sxs-lookup"><span data-stu-id="8d494-121">**Secure class libraries**: A secure class library uses security demands to ensure that the library's callers have permission to access the resources that the library exposes.</span></span> <span data-ttu-id="8d494-122">Na przykład biblioteki klas bezpiecznego może mieć metody tworzenia plików, które zażądać, że elementy wywołujące pod mają uprawnienia do tworzenia plików.</span><span class="sxs-lookup"><span data-stu-id="8d494-122">For example, a secure class library might have a method for creating files that would demand that its callers have permissions to create files.</span></span> <span data-ttu-id="8d494-123">.NET Framework składa się z bibliotek klas bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="8d494-123">The .NET Framework consists of secure class libraries.</span></span> <span data-ttu-id="8d494-124">Należy pamiętać o uprawnienia wymagane do uzyskania dostępu wszystkie biblioteki, który używa Twój kod.</span><span class="sxs-lookup"><span data-stu-id="8d494-124">You should be aware of the permissions required to access any library that your code uses.</span></span> <span data-ttu-id="8d494-125">Aby uzyskać więcej informacji, zobacz [przy użyciu bibliotek klas Secure](#secure_library) później w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="8d494-125">For more information, see the [Using Secure Class Libraries](#secure_library) section later in this topic.</span></span>  
  
-   <span data-ttu-id="8d494-126">**Kod o przezroczystym**: począwszy od [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], oprócz Identyfikacja określone uprawnienia, należy również określić, czy kod ma być uruchamiana jako przezroczystym poziomie bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="8d494-126">**Transparent code**: Starting with the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], in addition to identifying specific permissions, you must also determine whether your code should run as security-transparent.</span></span> <span data-ttu-id="8d494-127">Kod o przezroczystym poziomie bezpieczeństwa nie można wywołać typów albo elementów członkowskich, które zostały zidentyfikowane jako krytyczny dla zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8d494-127">Security-transparent code cannot call types or members that are identified as security-critical.</span></span> <span data-ttu-id="8d494-128">Ta reguła ma zastosowanie do pełnego zaufania aplikacji, a także częściowo zaufane aplikacje.</span><span class="sxs-lookup"><span data-stu-id="8d494-128">This rule applies to full-trust applications as well as partially trusted applications.</span></span> <span data-ttu-id="8d494-129">Aby uzyskać więcej informacji, zobacz [kod o przezroczystym poziomie bezpieczeństwa](../../../docs/framework/misc/security-transparent-code.md).</span><span class="sxs-lookup"><span data-stu-id="8d494-129">For more information, see [Security-Transparent Code](../../../docs/framework/misc/security-transparent-code.md).</span></span>  
  
<a name="typesafe_code"></a>   
## <a name="writing-verifiably-type-safe-code"></a><span data-ttu-id="8d494-130">Sprawdzalnie bezpieczny kod</span><span class="sxs-lookup"><span data-stu-id="8d494-130">Writing Verifiably Type-Safe Code</span></span>  
 <span data-ttu-id="8d494-131">Just-in-time (JIT) kompilacji wykonuje proces weryfikacji, który sprawdza kod i próbuje określić, czy kod jest bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="8d494-131">Just-in-time (JIT) compilation performs a verification process that examines code and tries to determine whether the code is type-safe.</span></span> <span data-ttu-id="8d494-132">Kodu, która jest podczas weryfikacji za bezpieczne jest nazywany *sprawdzalnie bezpieczny kod*.</span><span class="sxs-lookup"><span data-stu-id="8d494-132">Code that is proven during verification to be type-safe is called *verifiably type-safe code*.</span></span> <span data-ttu-id="8d494-133">Kod może być bezpieczne, jeszcze może nie być sprawdzalnie bezpieczny z powodu ograniczenia procesu weryfikacji lub kompilatora.</span><span class="sxs-lookup"><span data-stu-id="8d494-133">Code can be type-safe, yet might not be verifiably type-safe because of the limitations of the verification process or of the compiler.</span></span> <span data-ttu-id="8d494-134">Nie wszystkie języki są bezpieczne, a niektóre Kompilatory języka, takich jak Microsoft Visual C++ nie można wygenerować sprawdzalnie bezpieczny kod zarządzany.</span><span class="sxs-lookup"><span data-stu-id="8d494-134">Not all languages are type-safe, and some language compilers, such as Microsoft Visual C++, cannot generate verifiably type-safe managed code.</span></span> <span data-ttu-id="8d494-135">Aby ustalić, czy kompilator języka używanego generuje sprawdzalnie bezpieczny kod, zapoznaj się dokumentacją kompilatora.</span><span class="sxs-lookup"><span data-stu-id="8d494-135">To determine whether the language compiler you use generates verifiably type-safe code, consult the compiler's documentation.</span></span> <span data-ttu-id="8d494-136">Jeśli używasz kompilatora języka, który generuje sprawdzalnie bezpieczny kod tylko wtedy, gdy uniknąć pewnych konstrukcji języka, możesz chcieć użyć [narzędzie PEVerify](../../../docs/framework/tools/peverify-exe-peverify-tool.md) do ustalenia, czy kod jest sprawdzalnie bezpieczny.</span><span class="sxs-lookup"><span data-stu-id="8d494-136">If you use a language compiler that generates verifiably type-safe code only when you avoid certain language constructs, you might want to use the [PEVerify tool](../../../docs/framework/tools/peverify-exe-peverify-tool.md) to determine whether your code is verifiably type-safe.</span></span>  
  
 <span data-ttu-id="8d494-137">Kod, który nie jest sprawdzalnie bezpieczny można spróbować wykonać, jeśli zasady zabezpieczeń zezwala na kod, aby pominąć weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="8d494-137">Code that is not verifiably type-safe can attempt to execute if security policy allows the code to bypass verification.</span></span> <span data-ttu-id="8d494-138">Jednak ponieważ bezpieczeństwo typów jest integralną część mechanizm izolowanie zestawów środowiska uruchomieniowego, zabezpieczeń nie można niezawodnie wymusić Jeśli kod narusza zasady zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8d494-138">However, because type safety is an essential part of the runtime's mechanism for isolating assemblies, security cannot be reliably enforced if code violates the rules of type safety.</span></span> <span data-ttu-id="8d494-139">Domyślnie kod, który nie jest bezpieczne może działać tylko wtedy, gdy pochodzi z komputera lokalnego.</span><span class="sxs-lookup"><span data-stu-id="8d494-139">By default, code that is not type-safe is allowed to run only if it originates from the local computer.</span></span> <span data-ttu-id="8d494-140">W związku z tym przenośnych kod powinien być bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="8d494-140">Therefore, mobile code should be type-safe.</span></span>  
  
<a name="secure_library"></a>   
## <a name="using-secure-class-libraries"></a><span data-ttu-id="8d494-141">Przy użyciu bibliotek klas bezpieczne</span><span class="sxs-lookup"><span data-stu-id="8d494-141">Using Secure Class Libraries</span></span>  
 <span data-ttu-id="8d494-142">Jeśli żądanie kodu i przyznano uprawnienia wymagane przez biblioteki klas, będzie można było uzyskać dostępu do biblioteki i zasoby, które udostępnia biblioteki będą chronione przed nieautoryzowanym dostępem.</span><span class="sxs-lookup"><span data-stu-id="8d494-142">If your code requests and is granted the permissions required by the class library, it will be allowed to access the library and the resources that the library exposes will be protected from unauthorized access.</span></span> <span data-ttu-id="8d494-143">Jeśli w kodzie nie ma odpowiednich uprawnień, zostanie nie można było uzyskać dostępu do biblioteki klas, a złośliwy kod nie będzie mogła użyć kodu w celu pośredni dostęp do chronionych zasobów.</span><span class="sxs-lookup"><span data-stu-id="8d494-143">If your code does not have the appropriate permissions, it will not be allowed to access the class library, and malicious code will not be able to use your code to indirectly access protected resources.</span></span> <span data-ttu-id="8d494-144">Inny kod, który wywołuje kod musi mieć również uprawnienia dostępu do biblioteki.</span><span class="sxs-lookup"><span data-stu-id="8d494-144">Other code that calls your code must also have permission to access the library.</span></span> <span data-ttu-id="8d494-145">Jeśli nie, kod będzie dotyczyć również.</span><span class="sxs-lookup"><span data-stu-id="8d494-145">If it does not, your code will be restricted from running as well.</span></span>  
  
 <span data-ttu-id="8d494-146">Zabezpieczenia dostępu kodu nie eliminuje możliwości człowieka wystąpił błąd podczas zapisywania kodu.</span><span class="sxs-lookup"><span data-stu-id="8d494-146">Code access security does not eliminate the possibility of human error in writing code.</span></span> <span data-ttu-id="8d494-147">Jednak jeśli aplikacja używa biblioteki klas bezpieczny dostęp do chronionych zasobów, zagrożenie bezpieczeństwa dla kodu aplikacji jest obniżona, ponieważ bibliotek klas są ściśle kontroli dla potencjalnych problemów z zabezpieczeniami.</span><span class="sxs-lookup"><span data-stu-id="8d494-147">However, if your application uses secure class libraries to access protected resources, the security risk for application code is decreased, because class libraries are closely scrutinized for potential security problems.</span></span>  
  
## <a name="declarative-security"></a><span data-ttu-id="8d494-148">Zabezpieczenia deklaratywne</span><span class="sxs-lookup"><span data-stu-id="8d494-148">Declarative Security</span></span>  
 <span data-ttu-id="8d494-149">Używa składni zabezpieczenia deklaratywne [atrybuty](../../../docs/standard/attributes/index.md) można umieścić informacji o zabezpieczeniach do [metadanych](../../../docs/standard/metadata-and-self-describing-components.md) kodu.</span><span class="sxs-lookup"><span data-stu-id="8d494-149">Declarative security syntax uses [attributes](../../../docs/standard/attributes/index.md) to place security information into the [metadata](../../../docs/standard/metadata-and-self-describing-components.md) of your code.</span></span> <span data-ttu-id="8d494-150">Atrybuty można umieścić na poziomie zestawu, klasa lub element członkowski, aby wskazać typ żądania, żądanie lub zastąpienie, którego chcesz użyć.</span><span class="sxs-lookup"><span data-stu-id="8d494-150">Attributes can be placed at the assembly, class, or member level, to indicate the type of request, demand, or override you want to use.</span></span> <span data-ttu-id="8d494-151">Żądania są używane w aplikacjach, które odnoszą się do środowiska CLR do informuje system zabezpieczeń środowiska wykonawczego o uprawnieniach wymaganych aplikacji musi lub nie chce.</span><span class="sxs-lookup"><span data-stu-id="8d494-151">Requests are used in applications that target the common language runtime to inform the runtime security system about the permissions that your application needs or does not want.</span></span> <span data-ttu-id="8d494-152">Wymagania i zastąpienia są używane w bibliotekach w celu ochrony zasobów z wywołań lub zastąpienie domyślnego zachowania zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8d494-152">Demands and overrides are used in libraries to help protect resources from callers or to override default security behavior.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8d494-153">W [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], zostały ważne zmiany modelu zabezpieczeń .NET Framework i terminologię.</span><span class="sxs-lookup"><span data-stu-id="8d494-153">In the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], there have been important changes to the .NET Framework security model and terminology.</span></span> <span data-ttu-id="8d494-154">Aby uzyskać więcej informacji na temat tych zmian, zobacz [zmiany zabezpieczeń](../../../docs/framework/security/security-changes.md).</span><span class="sxs-lookup"><span data-stu-id="8d494-154">For more information about these changes, see [Security Changes](../../../docs/framework/security/security-changes.md).</span></span>  
  
 <span data-ttu-id="8d494-155">Aby można było używać wywołania zabezpieczenia deklaratywne, należy zainicjować obiektu uprawnienia do danych o stanie, aby reprezentuje danego formularza uprawnień, które są potrzebne.</span><span class="sxs-lookup"><span data-stu-id="8d494-155">In order to use declarative security calls, you must initialize the state data of the permission object so that it represents the particular form of permission you need.</span></span> <span data-ttu-id="8d494-156">Każdy wbudowanych uprawnień ma atrybut, który jest przekazywany <xref:System.Security.Permissions.SecurityAction> wyliczenie opisujący typ operacji zabezpieczeń, które chcesz wykonać.</span><span class="sxs-lookup"><span data-stu-id="8d494-156">Every built-in permission has an attribute that is passed a <xref:System.Security.Permissions.SecurityAction> enumeration to describe the type of security operation you want to perform.</span></span> <span data-ttu-id="8d494-157">Uprawnienia zaakceptować również własne parametry, które są na wyłączność dla nich.</span><span class="sxs-lookup"><span data-stu-id="8d494-157">However, permissions also accept their own parameters that are exclusive to them.</span></span>  
  
 <span data-ttu-id="8d494-158">Poniższy fragment kodu przedstawia składni deklaratywnej żądanych wywołań swój kod posiadania uprawnień niestandardowych o nazwie `MyPermission`.</span><span class="sxs-lookup"><span data-stu-id="8d494-158">The following code fragment shows declarative syntax for requesting that your code's callers have a custom permission called `MyPermission`.</span></span> <span data-ttu-id="8d494-159">To uprawnienie jest hipotetyczny uprawnień niestandardowych i nie istnieje w programie .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="8d494-159">This permission is a hypothetical custom permission and does not exist in the .NET Framework.</span></span> <span data-ttu-id="8d494-160">W tym przykładzie wywołanie deklaratywne znajduje się bezpośrednio przed definicją klasy, określania, czy to uprawnienie można zastosować na poziomie klasy.</span><span class="sxs-lookup"><span data-stu-id="8d494-160">In this example, the declarative call is placed directly before the class definition, specifying that this permission be applied to the class level.</span></span> <span data-ttu-id="8d494-161">Ten atrybut jest przekazywany **SecurityAction.Demand** struktury, aby określić, że obiekty wywołujące muszą mieć te uprawnienia, aby można było uruchomić.</span><span class="sxs-lookup"><span data-stu-id="8d494-161">The attribute is passed a **SecurityAction.Demand** structure to specify that callers must have this permission in order to run.</span></span>  
  
```vb  
<MyPermission(SecurityAction.Demand, Unrestricted = True)> Public Class MyClass1  
  
   Public Sub New()  
      'The constructor is protected by the security call.  
   End Sub  
  
   Public Sub MyMethod()  
      'This method is protected by the security call.  
   End Sub  
  
   Public Sub YourMethod()  
      'This method is protected by the security call.  
   End Sub  
End Class  
```  
  
```csharp  
[MyPermission(SecurityAction.Demand, Unrestricted = true)]  
public class MyClass  
{  
   public MyClass()  
   {  
      //The constructor is protected by the security call.  
   }  
  
   public void MyMethod()  
   {  
      //This method is protected by the security call.  
   }  
  
   public void YourMethod()  
   {  
      //This method is protected by the security call.  
   }  
}  
```  
  
## <a name="imperative-security"></a><span data-ttu-id="8d494-162">Zabezpieczenia imperatywne</span><span class="sxs-lookup"><span data-stu-id="8d494-162">Imperative Security</span></span>  
 <span data-ttu-id="8d494-163">Składnia zabezpieczenia imperatywne wystawia wywołania zabezpieczeń, tworząc nowe wystąpienie obiektu uprawnień, które chcesz wywołać.</span><span class="sxs-lookup"><span data-stu-id="8d494-163">Imperative security syntax issues a security call by creating a new instance of the permission object you want to invoke.</span></span> <span data-ttu-id="8d494-164">Za pomocą składni konieczne do wykonania żądania i zastąpienia, ale nie żądań.</span><span class="sxs-lookup"><span data-stu-id="8d494-164">You can use imperative syntax to perform demands and overrides, but not requests.</span></span>  
  
 <span data-ttu-id="8d494-165">Przed wprowadzeniem zabezpieczeń wywołań należy zainicjować obiektu uprawnienia do danych o stanie, aby reprezentuje danego formularza uprawnienia, które są potrzebne.</span><span class="sxs-lookup"><span data-stu-id="8d494-165">Before you make the security call, you must initialize the state data of the permission object so that it represents the particular form of the permission you need.</span></span> <span data-ttu-id="8d494-166">Na przykład podczas tworzenia <xref:System.Security.Permissions.FileIOPermission> obiekt, aby zainicjować można użyć konstruktora **FileIOPermission** obiekt, tak aby reprezentuje albo nieograniczony dostęp do wszystkich plików lub Brak dostępu do plików.</span><span class="sxs-lookup"><span data-stu-id="8d494-166">For example, when creating a <xref:System.Security.Permissions.FileIOPermission> object, you can use the constructor to initialize the **FileIOPermission** object so that it represents either unrestricted access to all files or no access to files.</span></span> <span data-ttu-id="8d494-167">Alternatywnie można użyć innego **FileIOPermission** przekazania parametrów, które wskazują na typ dostępu ma obiekt reprezentuje (to znaczy do odczytu, Dołącz lub napisz) i które pliki ma obiekt do ochrony obiektu.</span><span class="sxs-lookup"><span data-stu-id="8d494-167">Or, you can use a different **FileIOPermission** object, passing parameters that indicate the type of access you want the object to represent (that is, read, append, or write) and what files you want the object to protect.</span></span>  
  
 <span data-ttu-id="8d494-168">Oprócz przy użyciu składni zabezpieczenia imperatywne do wywołania obiektu pojedynczego zabezpieczeń, można go zainicjować grupy uprawnień w zestawie uprawnień.</span><span class="sxs-lookup"><span data-stu-id="8d494-168">In addition to using imperative security syntax to invoke a single security object, you can use it to initialize a group of permissions in a permission set.</span></span> <span data-ttu-id="8d494-169">Na przykład, ta metoda jest jedynym sposobem niezawodnie wykonać [assert](../../../docs/framework/misc/using-the-assert-method.md) wywołuje na wiele uprawnień w jednej metody.</span><span class="sxs-lookup"><span data-stu-id="8d494-169">For example, this technique is the only way to reliably perform [assert](../../../docs/framework/misc/using-the-assert-method.md) calls on multiple permissions in one method.</span></span> <span data-ttu-id="8d494-170">Użyj <xref:System.Security.PermissionSet> i <xref:System.Security.NamedPermissionSet> klasy, aby utworzyć grupę uprawnienia, a następnie wywołać odpowiedniej metody do wywołania wywołania wymaganymi.</span><span class="sxs-lookup"><span data-stu-id="8d494-170">Use the <xref:System.Security.PermissionSet> and <xref:System.Security.NamedPermissionSet> classes to create a group of permissions and then call the appropriate method to invoke the desired security call.</span></span>  
  
 <span data-ttu-id="8d494-171">Za pomocą składni konieczne do wykonania żądania i zastąpienia, ale nie żądań.</span><span class="sxs-lookup"><span data-stu-id="8d494-171">You can use imperative syntax to perform demands and overrides, but not requests.</span></span> <span data-ttu-id="8d494-172">Dla potrzeb może używać składni konieczne i zastępuje zamiast składni deklaratywnej, gdy informacje potrzebne, aby można było zainicjować stan uprawnień staje się znane tylko w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="8d494-172">You might use imperative syntax for demands and overrides instead of declarative syntax when information that you need in order to initialize the permission state becomes known only at run time.</span></span> <span data-ttu-id="8d494-173">Na przykład jeśli chcesz upewnić się, że wywołań ma uprawnienie do odczytu określonego pliku, ale nie znasz nazwę tego pliku do czasu wykonywania, należy użyć nadrzędnych żądanie.</span><span class="sxs-lookup"><span data-stu-id="8d494-173">For example, if you want to ensure that callers have permission to read a certain file, but you do not know the name of that file until run time, use an imperative demand.</span></span> <span data-ttu-id="8d494-174">Również można Użyj imperatywnych kontroli zamiast deklaratywne kontroli, gdy należy określić w czasie wykonywania, czy warunek jest i, na podstawie wyniku testu, żądanie zabezpieczeń (lub nie).</span><span class="sxs-lookup"><span data-stu-id="8d494-174">You might also choose to use imperative checks instead of declarative checks when you need to determine at run time whether a condition holds and, based on the result of the test, make a security demand (or not).</span></span>  
  
 <span data-ttu-id="8d494-175">Poniższy fragment kodu przedstawia składni konieczne żądanych wywołań swój kod posiadania uprawnień niestandardowych o nazwie `MyPermission`.</span><span class="sxs-lookup"><span data-stu-id="8d494-175">The following code fragment shows imperative syntax for requesting that your code's callers have a custom permission called `MyPermission`.</span></span> <span data-ttu-id="8d494-176">To uprawnienie jest hipotetyczny uprawnień niestandardowych i nie istnieje w programie .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="8d494-176">This permission is a hypothetical custom permission and does not exist in the .NET Framework.</span></span> <span data-ttu-id="8d494-177">Nowe wystąpienie klasy `MyPermision` jest tworzony w `MyMethod`, ochrona tylko tej metody za pomocą wywołania zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="8d494-177">A new instance of `MyPermision` is created in `MyMethod`, guarding only this method with the security call.</span></span>  
  
```vb  
Public Class MyClass1  
  
   Public Sub New()  
  
   End Sub  
  
   Public Sub MyMethod()  
      'MyPermission is demanded using imperative syntax.  
      Dim Perm As New MyPermission()  
      Perm.Demand()  
      'This method is protected by the security call.  
   End Sub  
  
   Public Sub YourMethod()  
      'YourMethod 'This method is not protected by the security call.  
   End Sub  
End Class  
```  
  
```csharp  
public class MyClass {  
   public MyClass(){  
  
   }  
  
   public void MyMethod() {  
       //MyPermission is demanded using imperative syntax.  
       MyPermission Perm = new MyPermission();  
       Perm.Demand();  
       //This method is protected by the security call.  
   }  
  
   public void YourMethod() {  
       //This method is not protected by the security call.  
   }  
}  
```  
  
## <a name="using-managed-wrapper-classes"></a><span data-ttu-id="8d494-178">Używanie zarządzanych klas otoki</span><span class="sxs-lookup"><span data-stu-id="8d494-178">Using Managed Wrapper Classes</span></span>  
 <span data-ttu-id="8d494-179">Większość aplikacji i składników (z wyjątkiem bezpiecznego bibliotek) nie należy bezpośrednio wywoływać kodu niezarządzanego.</span><span class="sxs-lookup"><span data-stu-id="8d494-179">Most applications and components (except secure libraries) should not directly call unmanaged code.</span></span> <span data-ttu-id="8d494-180">Istnieje kilka powodów.</span><span class="sxs-lookup"><span data-stu-id="8d494-180">There are several reasons for this.</span></span> <span data-ttu-id="8d494-181">Jeśli kod wywołuje bezpośrednio kodu niezarządzanego, nie będzie dozwolone do uruchamiania w wielu sytuacjach, ponieważ kod musi otrzymać wysokiego poziomu zaufania, aby wywoływać kod natywny.</span><span class="sxs-lookup"><span data-stu-id="8d494-181">If code calls unmanaged code directly, it will not be allowed to run in many circumstances because code must be granted a high level of trust to call native code.</span></span> <span data-ttu-id="8d494-182">Jeśli zasady są modyfikowane w celu zezwolić aplikacji do uruchomienia, znacznie można obniżyć poziom bezpieczeństwa systemu, pozostawiając aplikacji do niemal wszystkich operacji.</span><span class="sxs-lookup"><span data-stu-id="8d494-182">If policy is modified to allow such an application to run, it can significantly weaken the security of the system, leaving the application free to perform almost any operation.</span></span>  
  
 <span data-ttu-id="8d494-183">Ponadto kod, który ma uprawnienia umożliwiające dostęp do kodu niezarządzanego prawdopodobnie można wykonać operacji prawie każdego przez wywołanie do niezarządzanego API.</span><span class="sxs-lookup"><span data-stu-id="8d494-183">Additionally, code that has permission to access unmanaged code can probably perform almost any operation by calling into an unmanaged API.</span></span> <span data-ttu-id="8d494-184">Na przykład kod, który ma uprawnienia do wywoływania kodu niezarządzanego nie jest konieczne <xref:System.Security.Permissions.FileIOPermission> dostępu do pliku; ją po prostu Wywołaj niezarządzane (Win32) interfejsu API plików bezpośrednio, pomijanie pliku zarządzanego interfejsu API, która wymaga **FileIOPermission**.</span><span class="sxs-lookup"><span data-stu-id="8d494-184">For example, code that has permission to call unmanaged code does not need <xref:System.Security.Permissions.FileIOPermission> to access a file; it can just call an unmanaged (Win32) file API directly, bypassing the managed file API that requires **FileIOPermission**.</span></span> <span data-ttu-id="8d494-185">Zarządzany kod ma uprawnienie do wywołania do kodu niezarządzanego, wywołać bezpośrednio do kodu niezarządzanego systemu zabezpieczeń będzie mógł niezawodnie wymusić ograniczenia zabezpieczeń, ponieważ środowisko uruchomieniowe nie można wymusić takie ograniczenia dotyczące kodu niezarządzanego.</span><span class="sxs-lookup"><span data-stu-id="8d494-185">If managed code has permission to call into unmanaged code and does call directly into unmanaged code, the security system will be unable to reliably enforce security restrictions, since the runtime cannot enforce such restrictions on unmanaged code.</span></span>  
  
 <span data-ttu-id="8d494-186">Jeśli chcesz aplikacji do wykonywania określonej operacji, która wymaga dostępu do kodu niezarządzanego, go należy to zrobić za pośrednictwem zaufanych zarządzanej klasy, która opakowuje wymaganej funkcjonalności (jeśli istnieje taka klasa).</span><span class="sxs-lookup"><span data-stu-id="8d494-186">If you want your application to perform an operation that requires accessing unmanaged code, it should do so through a trusted managed class that wraps the required functionality (if such a class exists).</span></span> <span data-ttu-id="8d494-187">Nie należy tworzyć klasy otoki samodzielnie, jeśli istnieje już w bibliotece klas bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="8d494-187">Do not create a wrapper class yourself if one already exists in a secure class library.</span></span> <span data-ttu-id="8d494-188">Klasa otoki, które muszą być przyznane wysoki stopień zaufania, aby można było wykonać wywołanie do kodu niezarządzanego, jest odpowiedzialny za wymagających, że elementy wywołujące pod mają odpowiednie uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="8d494-188">The wrapper class, which must be granted a high degree of trust to be allowed to make the call into unmanaged code, is responsible for demanding that its callers have the appropriate permissions.</span></span> <span data-ttu-id="8d494-189">Użycie klasy otoki kodu musi tylko do żądania i przyznać uprawnienia, które wymaga klasy otoki.</span><span class="sxs-lookup"><span data-stu-id="8d494-189">If you use the wrapper class, your code only needs to request and be granted the permissions that the wrapper class demands.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8d494-190">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="8d494-190">See Also</span></span>  
 <xref:System.Security.PermissionSet>  
 <xref:System.Security.Permissions.FileIOPermission>  
 <xref:System.Security.NamedPermissionSet>  
 <xref:System.Security.Permissions.SecurityAction>  
 [<span data-ttu-id="8d494-191">Assert</span><span class="sxs-lookup"><span data-stu-id="8d494-191">Assert</span></span>](../../../docs/framework/misc/using-the-assert-method.md)  
 [<span data-ttu-id="8d494-192">Zabezpieczenia dostępu kodu</span><span class="sxs-lookup"><span data-stu-id="8d494-192">Code Access Security</span></span>](../../../docs/framework/misc/code-access-security.md)  
 [<span data-ttu-id="8d494-193">Podstawy zabezpieczeń dostępu kodu</span><span class="sxs-lookup"><span data-stu-id="8d494-193">Code Access Security Basics</span></span>](../../../docs/framework/misc/code-access-security-basics.md)  
 [<span data-ttu-id="8d494-194">Atrybuty</span><span class="sxs-lookup"><span data-stu-id="8d494-194">Attributes</span></span>](../../../docs/standard/attributes/index.md)  
 [<span data-ttu-id="8d494-195">Składniki samoopisujące się i metadane</span><span class="sxs-lookup"><span data-stu-id="8d494-195">Metadata and Self-Describing Components</span></span>](../../../docs/standard/metadata-and-self-describing-components.md)
