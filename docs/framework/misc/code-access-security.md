---
title: Zabezpieczenia dostępu kodu
description: Dowiedz się więcej o mechanizmie zabezpieczeń dostępu kodu w programie .NET, który pomaga chronić systemy komputerowe przed złośliwym kodem mobilnym.
ms.date: 03/30/2017
helpviewer_keywords:
- named permission sets, code access security
- call stacks
- malicious code
- stack walk
- security [.NET Framework], code access security
- permissions [.NET Framework], code access security
- trusted code
- mobile code security
- unmanaged code, code access security
- granting permissions, code access security
- user authentication, code access security
- code access security
ms.assetid: 859af632-c80d-4736-8d6f-1e01b09ce127
ms.openlocfilehash: 528824e2d1b5d854f9eef816d3f7b20ba0f2b7db
ms.sourcegitcommit: 67ebdb695fd017d79d9f1f7f35d145042d5a37f7
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/20/2020
ms.locfileid: "92224357"
---
# <a name="code-access-security"></a><span data-ttu-id="5fad2-103">Zabezpieczenia dostępu kodu</span><span class="sxs-lookup"><span data-stu-id="5fad2-103">Code Access Security</span></span>

[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  

> [!NOTE]
> <span data-ttu-id="5fad2-104">Ponieważ zabezpieczenia dostępu kodu są przestarzałe, Większość nowoczesnych kodów w ekosystemie .NET nie jest przeznaczona do działania w ramach częściowego środowiska zaufania.</span><span class="sxs-lookup"><span data-stu-id="5fad2-104">Because Code Access Security is deprecated, most modern code within the .NET ecosystem is not designed to operate within a partial trust environment.</span></span> <span data-ttu-id="5fad2-105">Aplikacje korzystające z urzędów certyfikacji nie powinny oczekiwać, że nowoczesne biblioteki działają poprawnie w tych środowiskach, chyba że deweloper biblioteki nie przeprowadził wyraźnych kroków w celu zapewnienia zgodności w piaskownicy urzędów certyfikacji.</span><span class="sxs-lookup"><span data-stu-id="5fad2-105">Applications that rely on CAS should not expect modern libraries to behave correctly within these environments, unless the library developer has taken explicit steps to ensure compatibility within the CAS sandbox.</span></span>  

 <span data-ttu-id="5fad2-106">Współczesne systemy komputerowe o wysokiej dostępności są często uwidaczniane dla kodu pochodzącego z różnych, prawdopodobnie nieznanych źródeł.</span><span class="sxs-lookup"><span data-stu-id="5fad2-106">Today's highly connected computer systems are frequently exposed to code originating from various, possibly unknown sources.</span></span> <span data-ttu-id="5fad2-107">Kod można dołączyć do poczty e-mail, zawartej w dokumentach lub pobranej przez Internet.</span><span class="sxs-lookup"><span data-stu-id="5fad2-107">Code can be attached to email, contained in documents, or downloaded over the Internet.</span></span> <span data-ttu-id="5fad2-108">Niestety wielu użytkowników komputerów ręki skutki złośliwego kodu mobilnego, w tym wirusów i robaków, które mogą uszkodzić lub niszczyć dane, a także zaoszczędzić czas i pieniądze.</span><span class="sxs-lookup"><span data-stu-id="5fad2-108">Unfortunately, many computer users have experienced firsthand the effects of malicious mobile code, including viruses and worms, which can damage or destroy data and cost time and money.</span></span>  
  
 <span data-ttu-id="5fad2-109">Większość typowych mechanizmów zabezpieczeń daje prawo użytkownikom na podstawie ich poświadczeń (zazwyczaj hasła) i ogranicza zasoby (często katalogi i pliki), do których użytkownik może uzyskać dostęp.</span><span class="sxs-lookup"><span data-stu-id="5fad2-109">Most common security mechanisms give rights to users based on their credentials (usually a password) and restrict resources (often directories and files) that the user is allowed to access.</span></span> <span data-ttu-id="5fad2-110">Niemniej jednak rozwiązanie nie rozwiąże się z kilkoma problemami: użytkownicy uzyskują kod z wielu źródeł, a niektóre z nich mogą być zawodne. kod może zawierać usterki lub luki w zabezpieczeniach, które umożliwiają wykorzystanie złośliwego kodu; a kod czasami robi, że użytkownik nie wie.</span><span class="sxs-lookup"><span data-stu-id="5fad2-110">However, this approach fails to address several issues: users obtain code from many sources, some of which might be unreliable; code can contain bugs or vulnerabilities that enable it to be exploited by malicious code; and code sometimes does things that the user does not know it will do.</span></span> <span data-ttu-id="5fad2-111">W związku z tym systemy komputerowe mogą być uszkodzone, a dane prywatne mogą być przeciekowe, gdy ostrożność i godna zaufania użytkownicy uruchamiają złośliwe lub wypełnione przez nie oprogramowanie.</span><span class="sxs-lookup"><span data-stu-id="5fad2-111">As a result, computer systems can be damaged and private data can be leaked when cautious and trustworthy users run malicious or error-filled software.</span></span> <span data-ttu-id="5fad2-112">Większość mechanizmów zabezpieczeń systemu operacyjnego wymaga, aby każdy fragment kodu musiał być zaufany w celu uruchomienia, z wyjątkiem skryptów na stronie sieci Web.</span><span class="sxs-lookup"><span data-stu-id="5fad2-112">Most operating system security mechanisms require that every piece of code must be trusted in order to run, except perhaps for scripts on a Web page.</span></span> <span data-ttu-id="5fad2-113">W związku z tym nadal konieczne jest stosowanie powszechnie stosowanego mechanizmu zabezpieczeń, który umożliwia wykonywanie kodu pochodzącego z jednego systemu komputerowego z ochroną w innym systemie nawet wtedy, gdy nie istnieje relacja zaufania między systemami.</span><span class="sxs-lookup"><span data-stu-id="5fad2-113">Therefore, there is still a need for a widely applicable security mechanism that allows code originating from one computer system to execute with protection on another system, even when there is no trust relationship between the systems.</span></span>  
  
 <span data-ttu-id="5fad2-114">.NET Framework zapewnia mechanizm zabezpieczeń o nazwie zabezpieczenia dostępu kodu, który pomaga chronić systemy komputerowe przed złośliwym kodem mobilnym, aby umożliwić uruchamianie kodu z nieznanych źródeł przy użyciu ochrony, a także zapobiegać celowemu lub przypadkowemu wystąpieniu naruszenia zabezpieczeń w zaufanym kodzie.</span><span class="sxs-lookup"><span data-stu-id="5fad2-114">The .NET Framework provides a security mechanism called code access security to help protect computer systems from malicious mobile code, to allow code from unknown origins to run with protection, and to help prevent trusted code from intentionally or accidentally compromising security.</span></span> <span data-ttu-id="5fad2-115">Zabezpieczenia dostępu kodu umożliwiają ufanie kodowi różnym stopom w zależności od tego, skąd pochodzi kod, oraz od innych aspektów tożsamości kodu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-115">Code access security enables code to be trusted to varying degrees depending on where the code originates and on other aspects of the code's identity.</span></span> <span data-ttu-id="5fad2-116">Zabezpieczenia dostępu kodu wymuszają również różne poziomy zaufania w kodzie, co minimalizuje ilość kodu, który musi być w pełni zaufany, aby można było go uruchomić.</span><span class="sxs-lookup"><span data-stu-id="5fad2-116">Code access security also enforces the varying levels of trust on code, which minimizes the amount of code that must be fully trusted in order to run.</span></span> <span data-ttu-id="5fad2-117">Użycie zabezpieczeń dostępu kodu może zmniejszyć prawdopodobieństwo, że kod będzie nieużywany przez złośliwy lub niewypełniony kod.</span><span class="sxs-lookup"><span data-stu-id="5fad2-117">Using code access security can reduce the likelihood that your code will be misused by malicious or error-filled code.</span></span> <span data-ttu-id="5fad2-118">Może to zmniejszyć odpowiedzialność, ponieważ można określić zestaw operacji, które kod powinien wykonać.</span><span class="sxs-lookup"><span data-stu-id="5fad2-118">It can reduce your liability, because you can specify the set of operations your code should be allowed to perform.</span></span> <span data-ttu-id="5fad2-119">Zabezpieczenia dostępu kodu mogą również zminimalizować szkody, które mogą wynikać z luk w zabezpieczeniach w kodzie.</span><span class="sxs-lookup"><span data-stu-id="5fad2-119">Code access security can also help minimize the damage that can result from security vulnerabilities in your code.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="5fad2-120">Wprowadzono istotne zmiany w zabezpieczeniach dostępu kodu w .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="5fad2-120">Major changes have been made to code access security in the .NET Framework 4.</span></span> <span data-ttu-id="5fad2-121">Najbardziej istotną zmianą jest [przejrzystość zabezpieczeń](security-transparent-code.md), ale istnieją również inne istotne zmiany, które wpływają na zabezpieczenia dostępu kodu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-121">The most notable change has been [security transparency](security-transparent-code.md), but there are also other significant changes that affect code access security.</span></span> <span data-ttu-id="5fad2-122">Aby uzyskać informacje o tych zmianach, zobacz [zmiany zabezpieczeń](/previous-versions/dotnet/framework/security/security-changes).</span><span class="sxs-lookup"><span data-stu-id="5fad2-122">For information about these changes, see [Security Changes](/previous-versions/dotnet/framework/security/security-changes).</span></span>  
  
 <span data-ttu-id="5fad2-123">Zabezpieczenia dostępu kodu mają głównie wpływ na kod biblioteki i częściowo zaufane aplikacje.</span><span class="sxs-lookup"><span data-stu-id="5fad2-123">Code access security primarily affects library code and partially trusted applications.</span></span> <span data-ttu-id="5fad2-124">Deweloperzy bibliotek muszą chronić swój kod przed nieautoryzowanym dostępem z częściowo zaufanych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5fad2-124">Library developers must protect their code from unauthorized access from partially trusted applications.</span></span> <span data-ttu-id="5fad2-125">Częściowo zaufane aplikacje są aplikacjami, które są ładowane ze źródeł zewnętrznych, takich jak Internet.</span><span class="sxs-lookup"><span data-stu-id="5fad2-125">Partially trusted applications are applications that are loaded from external sources such as the Internet.</span></span> <span data-ttu-id="5fad2-126">Aplikacje zainstalowane na pulpicie lub w lokalnym intranecie działają w trybie pełnego zaufania.</span><span class="sxs-lookup"><span data-stu-id="5fad2-126">Applications that are installed on your desktop or on the local intranet run in full trust.</span></span> <span data-ttu-id="5fad2-127">Zabezpieczenia dostępu kodu nie wpływają na aplikacje mające pełne zaufanie, chyba że są oznaczone jako [przezroczyste dla zabezpieczeń](security-transparent-code.md), ponieważ są w pełni zaufane.</span><span class="sxs-lookup"><span data-stu-id="5fad2-127">Full-trust applications are not affected by code access security unless they are marked as [security-transparent](security-transparent-code.md), because they are fully trusted.</span></span> <span data-ttu-id="5fad2-128">Jedynym ograniczeniem dla aplikacji w pełnym zaufaniu jest to, że aplikacje oznaczone <xref:System.Security.SecurityTransparentAttribute> atrybutem nie mogą wywołać kodu, który jest oznaczony za pomocą <xref:System.Security.SecurityCriticalAttribute> atrybutu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-128">The only limitation for full-trust applications is that applications that are marked with the <xref:System.Security.SecurityTransparentAttribute> attribute cannot call code that is marked with the <xref:System.Security.SecurityCriticalAttribute> attribute.</span></span> <span data-ttu-id="5fad2-129">Częściowo zaufane aplikacje muszą być uruchamiane w piaskownicy (na przykład w programie Internet Explorer), aby można było zastosować zabezpieczenia dostępu kodu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-129">Partially trusted applications must be run in a sandbox (for example, in Internet Explorer) so that code access security can be applied.</span></span> <span data-ttu-id="5fad2-130">Jeśli pobrano aplikację z Internetu i spróbujesz uruchomić ją z poziomu pulpitu, otrzymasz <xref:System.NotSupportedException> komunikat o błędzie: "podjęto próbę załadowania zestawu z lokalizacji sieciowej, która spowodowałaby, że zestaw został przetworzony w trybie piaskownicy we wcześniejszych wersjach .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5fad2-130">If you download an application from the Internet and try to run it from your desktop, you will get a <xref:System.NotSupportedException> with the message: "An attempt was made to load an assembly from a network location, which would have caused the assembly to be sandboxed in previous versions of the .NET Framework.</span></span> <span data-ttu-id="5fad2-131">Ta wersja .NET Framework nie domyślnie włącza zasad CAS, więc to obciążenie może być niebezpieczne.</span><span class="sxs-lookup"><span data-stu-id="5fad2-131">This release of the .NET Framework does not enable CAS policy by default, so this load may be dangerous."</span></span> <span data-ttu-id="5fad2-132">Jeśli masz pewność, że aplikacja może być zaufana, możesz ją uruchomić jako pełne zaufanie przy użyciu [ \<loadFromRemoteSources> elementu](../configure-apps/file-schema/runtime/loadfromremotesources-element.md).</span><span class="sxs-lookup"><span data-stu-id="5fad2-132">If you are sure that the application can be trusted, you can enable it to be run as full trust by using the [\<loadFromRemoteSources> element](../configure-apps/file-schema/runtime/loadfromremotesources-element.md).</span></span> <span data-ttu-id="5fad2-133">Aby uzyskać informacje na temat uruchamiania aplikacji w piaskownicy, zobacz [How to: Run a Untrusted Code w piaskownicy](how-to-run-partially-trusted-code-in-a-sandbox.md).</span><span class="sxs-lookup"><span data-stu-id="5fad2-133">For information about running an application in a sandbox, see [How to: Run Partially Trusted Code in a Sandbox](how-to-run-partially-trusted-code-in-a-sandbox.md).</span></span>  
  
 <span data-ttu-id="5fad2-134">Cały kod zarządzany, który jest przeznaczony dla środowiska uruchomieniowego języka wspólnego, otrzymuje zalety zabezpieczenia dostępu kodu, nawet jeśli ten kod nie nawiąże wywołania zabezpieczeń pojedynczego kodu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-134">All managed code that targets the common language runtime receives the benefits of code access security, even if that code does not make a single code access security call.</span></span> <span data-ttu-id="5fad2-135">Aby uzyskać więcej informacji, zobacz podstawowe informacje o [zabezpieczeniach dostępu kodu](code-access-security-basics.md).</span><span class="sxs-lookup"><span data-stu-id="5fad2-135">For more information, see [Code Access Security Basics](code-access-security-basics.md).</span></span>  
  
<a name="key_functions"></a>
## <a name="key-functions-of-code-access-security"></a><span data-ttu-id="5fad2-136">Najważniejsze funkcje zabezpieczeń dostępu kodu</span><span class="sxs-lookup"><span data-stu-id="5fad2-136">Key Functions of Code Access Security</span></span>  
 <span data-ttu-id="5fad2-137">Zabezpieczenia dostępu kodu pomagają ograniczyć dostęp tego kodu do chronionych zasobów i operacji.</span><span class="sxs-lookup"><span data-stu-id="5fad2-137">Code access security helps limit the access that code has to protected resources and operations.</span></span> <span data-ttu-id="5fad2-138">W .NET Framework zabezpieczenia dostępu kodu są wykonywane w następujących funkcjach:</span><span class="sxs-lookup"><span data-stu-id="5fad2-138">In the .NET Framework, code access security performs the following functions:</span></span>  
  
- <span data-ttu-id="5fad2-139">Definiuje uprawnienia i zestawy uprawnień, które reprezentują prawo dostępu do różnych zasobów systemu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-139">Defines permissions and permission sets that represent the right to access various system resources.</span></span>  
  
- <span data-ttu-id="5fad2-140">Włącza kod do żądania, że jego obiekty wywołujące mają określone uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="5fad2-140">Enables code to demand that its callers have specific permissions.</span></span>  
  
- <span data-ttu-id="5fad2-141">Umożliwia wykonywanie kodu na potrzeby żądania, że jego obiekty wywołujące mają podpis cyfrowy, co pozwala tylko wywołującym z danej organizacji lub lokacji wywoływanie chronionego kodu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-141">Enables code to demand that its callers possess a digital signature, thus allowing only callers from a particular organization or site to call the protected code.</span></span>  
  
- <span data-ttu-id="5fad2-142">Wymusza ograniczenia dotyczące kodu w czasie wykonywania, porównując przyznane uprawnienia każdego obiektu wywołującego na stosie wywołań z uprawnieniami, które są wymagane przez wywoływania.</span><span class="sxs-lookup"><span data-stu-id="5fad2-142">Enforces restrictions on code at run time by comparing the granted permissions of every caller on the call stack to the permissions that callers must have.</span></span>  
  
<a name="walking_the_call_stack"></a>
## <a name="walking-the-call-stack"></a><span data-ttu-id="5fad2-143">Instruktaż stosu wywołań</span><span class="sxs-lookup"><span data-stu-id="5fad2-143">Walking the Call Stack</span></span>  
 <span data-ttu-id="5fad2-144">Aby ustalić, czy kod jest autoryzowany do uzyskania dostępu do zasobu lub wykonywania operacji, system zabezpieczeń środowiska uruchomieniowego sprawdza stos wywołań, porównując przyznane uprawnienia każdego wywołującego z przyznanym uprawnieniem.</span><span class="sxs-lookup"><span data-stu-id="5fad2-144">To determine whether code is authorized to access a resource or perform an operation, the runtime's security system walks the call stack, comparing the granted permissions of each caller to the permission being demanded.</span></span> <span data-ttu-id="5fad2-145">Jeśli jakikolwiek obiekt wywołujący w stosie wywołań nie ma wymaganego uprawnienia, zgłaszany jest wyjątek zabezpieczeń i nastąpiła odmowa dostępu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-145">If any caller in the call stack does not have the demanded permission, a security exception is thrown and access is refused.</span></span> <span data-ttu-id="5fad2-146">Funkcja przeszukiwania stosu pomaga zapobiegać atakom luring, w którym kod mniej zaufany wywołuje wysoce zaufany kod i używa go do wykonywania nieautoryzowanych akcji.</span><span class="sxs-lookup"><span data-stu-id="5fad2-146">The stack walk is designed to help prevent luring attacks, in which less-trusted code calls highly trusted code and uses it to perform unauthorized actions.</span></span> <span data-ttu-id="5fad2-147">Wysokie uprawnienia wszystkich obiektów wywołujących w czasie wykonywania mają wpływ na wydajność, ale ważne jest, aby chronić kod przed atakami luring przez kod mniej zaufany.</span><span class="sxs-lookup"><span data-stu-id="5fad2-147">Demanding permissions of all callers at run time affects performance, but it is essential to help protect code from luring attacks by less-trusted code.</span></span> <span data-ttu-id="5fad2-148">Aby zoptymalizować wydajność, kod może wykonywać mniej przeszukiwań stosu.</span><span class="sxs-lookup"><span data-stu-id="5fad2-148">To optimize performance, you can have your code perform fewer stack walks.</span></span> <span data-ttu-id="5fad2-149">Należy jednak pamiętać, że nie ujawniamy luki w zabezpieczeniach w każdym przypadku.</span><span class="sxs-lookup"><span data-stu-id="5fad2-149">However, be sure that you don't expose a security weakness whenever you do this.</span></span>  
  
 <span data-ttu-id="5fad2-150">Na poniższej ilustracji przedstawiono przeszukiwanie stosu, które powstaje, gdy metoda w zestawie A4 wymaga, aby jej wywołania miały uprawnienie P.</span><span class="sxs-lookup"><span data-stu-id="5fad2-150">The following illustration shows the stack walk that results when a method in Assembly A4 demands that its callers have permission P.</span></span>  
  
 <span data-ttu-id="5fad2-151">![Przeszukiwanie stosu zabezpieczeń dostępu kodu](media/slide-10a.gif "slide_10a")</span><span class="sxs-lookup"><span data-stu-id="5fad2-151">![Code access security stack walk](media/slide-10a.gif "slide_10a")</span></span>
  
<a name="related_topics"></a>
## <a name="related-articles"></a><span data-ttu-id="5fad2-152">Pokrewne artykuły:</span><span class="sxs-lookup"><span data-stu-id="5fad2-152">Related articles</span></span>
  
|<span data-ttu-id="5fad2-153">Tytuł</span><span class="sxs-lookup"><span data-stu-id="5fad2-153">Title</span></span>|<span data-ttu-id="5fad2-154">Opis</span><span class="sxs-lookup"><span data-stu-id="5fad2-154">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="5fad2-155">Podstawy zabezpieczeń dostępu kodu</span><span class="sxs-lookup"><span data-stu-id="5fad2-155">Code Access Security Basics</span></span>](code-access-security-basics.md)|<span data-ttu-id="5fad2-156">Opisuje zabezpieczenia dostępu kodu i jego najczęstsze zastosowania.</span><span class="sxs-lookup"><span data-stu-id="5fad2-156">Describes code access security and its most common uses.</span></span>|  
|[<span data-ttu-id="5fad2-157">Kod o przezroczystym poziomie bezpieczeństwa, poziom 2</span><span class="sxs-lookup"><span data-stu-id="5fad2-157">Security-Transparent Code, Level 2</span></span>](security-transparent-code-level-2.md)|<span data-ttu-id="5fad2-158">Opisuje model przezroczystości zabezpieczeń w .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="5fad2-158">Describes the security transparency model in the .NET Framework 4.</span></span>|  
|[<span data-ttu-id="5fad2-159">Używanie bibliotek pochodzących z częściowo zaufanego kodu</span><span class="sxs-lookup"><span data-stu-id="5fad2-159">Using Libraries from Partially Trusted Code</span></span>](using-libraries-from-partially-trusted-code.md)|<span data-ttu-id="5fad2-160">Opisuje sposób włączania bibliotek do użycia z kodem niezarządzanym oraz jak używać bibliotek z kodu niezarządzanego.</span><span class="sxs-lookup"><span data-stu-id="5fad2-160">Describes how to enable libraries for use with unmanaged code and how to use libraries from unmanaged code.</span></span>|  
|[<span data-ttu-id="5fad2-161">Główne pojęcia dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="5fad2-161">Key Security Concepts</span></span>](../../standard/security/key-security-concepts.md)|<span data-ttu-id="5fad2-162">Zawiera przegląd wielu najważniejszych pojęć i koncepcji używanych w systemie zabezpieczeń .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5fad2-162">Provides an overview of many of the key terms and concepts used in the .NET Framework security system.</span></span>|  
|[<span data-ttu-id="5fad2-163">Zabezpieczenia oparte na rolach</span><span class="sxs-lookup"><span data-stu-id="5fad2-163">Role-Based Security</span></span>](../../standard/security/role-based-security.md)|<span data-ttu-id="5fad2-164">Opisuje sposób włączania zabezpieczeń na podstawie ról.</span><span class="sxs-lookup"><span data-stu-id="5fad2-164">Describes how to incorporate security based on roles.</span></span>|  
|[<span data-ttu-id="5fad2-165">Usługi kryptograficzne</span><span class="sxs-lookup"><span data-stu-id="5fad2-165">Cryptographic Services</span></span>](../../standard/security/cryptographic-services.md)|<span data-ttu-id="5fad2-166">Opisuje sposób włączania kryptografii do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5fad2-166">Describes how to incorporate cryptography into your applications.</span></span>|
