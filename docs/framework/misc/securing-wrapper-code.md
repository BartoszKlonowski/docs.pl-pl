---
title: Zabezpieczanie kodu otoki
ms.date: 03/30/2017
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
author: mairaw
ms.author: mairaw
ms.openlocfilehash: e4d8497d17e1a82791f4dd6ca8f91c9a012db167
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/08/2019
ms.locfileid: "59132785"
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="20f1d-102">Zabezpieczanie kodu otoki</span><span class="sxs-lookup"><span data-stu-id="20f1d-102">Securing Wrapper Code</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="20f1d-103">Kod otoki, szczególnie w przypadku gdy otoki ma zaufania wyższe niż kod, który korzysta z niego, można otworzyć unikatowy zestaw luk zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="20f1d-103">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="20f1d-104">Wszystko gotowe w imieniu obiekt wywołujący, gdzie wywołującego ograniczone uprawnienia nie są uwzględnione w wyboru odpowiednich zabezpieczeń, jest słabość potencjalne wykorzystanie.</span><span class="sxs-lookup"><span data-stu-id="20f1d-104">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="20f1d-105">Nigdy nie umożliwiają coś otok, który obiekt wywołujący nie może sam.</span><span class="sxs-lookup"><span data-stu-id="20f1d-105">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="20f1d-106">Jest to szczególne zagrożenie, gdy wykonuje określone operacje, które obejmuje sprawdzanie zabezpieczeń ograniczona, a nie żądanie przeszukiwania pełnego stosu.</span><span class="sxs-lookup"><span data-stu-id="20f1d-106">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="20f1d-107">W przypadku poziom kontroli interposing kod otoki między rzeczywistego obiektu wywołującego, a element interfejsu API w pytaniu mogą łatwo spowodować sprawdzania zabezpieczeń, aby pomyślnie wykonane po jego powinna nie, a tym samym osłabienia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="20f1d-107">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="20f1d-108">Delegaty</span><span class="sxs-lookup"><span data-stu-id="20f1d-108">Delegates</span></span>  
 <span data-ttu-id="20f1d-109">Delegat zabezpieczeń różni się między wersjami programu .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="20f1d-109">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="20f1d-110">W tej sekcji opisano zachowania różnych delegata i skojarzone zagadnienia dotyczące zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="20f1d-110">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="20f1d-111">W wersji 1.0 i 1.1 programu .NET Framework</span><span class="sxs-lookup"><span data-stu-id="20f1d-111">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="20f1d-112">Akcje zabezpieczeń wersja 1.0 i 1.1 programu .NET Framework, wykonaj następujące czynności przed twórcy delegata, jak i obiekt wywołujący delegata.</span><span class="sxs-lookup"><span data-stu-id="20f1d-112">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
-   <span data-ttu-id="20f1d-113">Podczas tworzenia delegata zabezpieczeń zapotrzebowania na łącza na metody delegata w docelowej są wykonywane względem zestaw uprawnień twórcy delegata.</span><span class="sxs-lookup"><span data-stu-id="20f1d-113">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="20f1d-114">Niespełnienie akcji zabezpieczeń powoduje <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="20f1d-114">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
-   <span data-ttu-id="20f1d-115">Gdy obiekt delegowany jest wywoływany, są wykonywane żadnych istniejących wymogów bezpieczeństwa na obiekcie wywołującym delegata.</span><span class="sxs-lookup"><span data-stu-id="20f1d-115">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="20f1d-116">Zawsze, gdy kod przyjmuje <xref:System.Delegate> kodu niższym poziomie zaufania, który może wywołać go, upewnij się, nie włączasz kod niższym poziomie zaufania, aby eskalować uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="20f1d-116">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="20f1d-117">Jeśli wykonać delegata i użyć go później, kod, który utworzony delegat nie znajduje się na stosie wywołań i jego uprawnienia nie zostaną przetestowane, jeśli kod w lub na podstawie obiektu delegowanego prób chronionej operacji.</span><span class="sxs-lookup"><span data-stu-id="20f1d-117">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="20f1d-118">Jeśli Twój kod i kod wywołujący ma uprawnienia wyższe niż twórca, twórca można organizować ścieżki wywołania nie są częścią stosu wywołań.</span><span class="sxs-lookup"><span data-stu-id="20f1d-118">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="20f1d-119">W wersji 2.0 i nowszych wersjach programu .NET Framework</span><span class="sxs-lookup"><span data-stu-id="20f1d-119">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="20f1d-120">W przeciwieństwie do poprzednich wersji wersji 2.0 i nowszych wersjach .NET Framework wykonuje akcję zabezpieczeń względem Autor delegowanego Jeśli delegat jest tworzony i o nazwie.</span><span class="sxs-lookup"><span data-stu-id="20f1d-120">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
-   <span data-ttu-id="20f1d-121">Podczas tworzenia delegata zabezpieczeń zapotrzebowania na łącza na metody delegata w docelowej są wykonywane względem zestaw uprawnień twórcy delegata.</span><span class="sxs-lookup"><span data-stu-id="20f1d-121">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="20f1d-122">Niespełnienie akcji zabezpieczeń powoduje <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="20f1d-122">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
-   <span data-ttu-id="20f1d-123">Zestaw uprawnień twórcy delegata jest również przechwycony podczas tworzenia delegata i przechowywane z obiektem delegowanym.</span><span class="sxs-lookup"><span data-stu-id="20f1d-123">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
-   <span data-ttu-id="20f1d-124">Gdy obiekt delegowany jest wywoływany, twórca delegata przechwyconych przydzielonym zestawie najpierw zostaną ocenione względem dowolnego żądania w bieżącym kontekście, jeśli twórca delegata i element wywołujący należą do różnych zestawów.</span><span class="sxs-lookup"><span data-stu-id="20f1d-124">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="20f1d-125">Następnie są wykonywane żadnych istniejących wymogów bezpieczeństwa na obiekcie wywołującym delegata.</span><span class="sxs-lookup"><span data-stu-id="20f1d-125">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="20f1d-126">Żądania połączeń i otoki</span><span class="sxs-lookup"><span data-stu-id="20f1d-126">Link demands and wrappers</span></span>  
 <span data-ttu-id="20f1d-127">Przypadek specjalny ochrony za pomocą zapotrzebowania na łącza została wzmocniona w ramach infrastruktury zabezpieczeń, ale nadal jest źródłem możliwe słabość w kodzie.</span><span class="sxs-lookup"><span data-stu-id="20f1d-127">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="20f1d-128">Jeśli w pełni zaufany kod wywołuje właściwości, zdarzenia lub metoda chronione przez [LinkDemand](../../../docs/framework/misc/link-demands.md), wywołanie zakończy się pomyślnie, jeśli **LinkDemand** sprawdzenie uprawnień do obiektu wywołującego jest spełniony.</span><span class="sxs-lookup"><span data-stu-id="20f1d-128">If fully trusted code calls a property, event, or method protected by a [LinkDemand](../../../docs/framework/misc/link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="20f1d-129">Ponadto, jeśli całkowicie zaufanego kodu udostępnia klasę, przyjmuje nazwę właściwości i wywołuje jego **uzyskać** przy użyciu odbicia, że wywołanie metody dostępu **uzyskać** dostępu zakończy się pomyślnie, nawet jeśli kod użytkownika realizuje nie ma uprawnień do dostępu do tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="20f1d-129">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="20f1d-130">Jest to spowodowane **LinkDemand** sprawdza tylko bezpośredniego wywołującego, która jest całkowicie zaufanego kodu.</span><span class="sxs-lookup"><span data-stu-id="20f1d-130">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="20f1d-131">W zasadzie w pełni zaufany kod wywołuje element uprzywilejowanych imieniu kod użytkownika bez upewniając się, że kod użytkownika ma uprawnienia do wykonania tego wywołania.</span><span class="sxs-lookup"><span data-stu-id="20f1d-131">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="20f1d-132">Aby uniknąć takich luk w zabezpieczeniach, środowisko uruchomieniowe języka wspólnego rozszerzenie wyboru do pełnej zalet stosu zapotrzebowanie na każde wywołanie pośrednie metoda, Konstruktor, właściwość lub zdarzenie chronione przez **LinkDemand**.</span><span class="sxs-lookup"><span data-stu-id="20f1d-132">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="20f1d-133">Ta ochrona jest naliczana pewne koszty wydajności i zmienia semantykę kontroli zabezpieczeń. żądanie przejście przez stos może przestać działać, gdzie będzie przeszły sprawdzania szybciej i jeden poziom.</span><span class="sxs-lookup"><span data-stu-id="20f1d-133">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="20f1d-134">Otoki ładowania zestawu</span><span class="sxs-lookup"><span data-stu-id="20f1d-134">Assembly loading wrappers</span></span>  
 <span data-ttu-id="20f1d-135">Kilka metod, używana do ładowania kodu zarządzanego, w tym <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, ładować zestawów z dowodem obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="20f1d-135">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="20f1d-136">Jeśli opakowaniem dowolnej z tych metod system zabezpieczeń za pomocą udzielenia uprawnień kodu, zamiast uprawnień obiekt wywołujący, aby Twoje otoki załadować zestawy.</span><span class="sxs-lookup"><span data-stu-id="20f1d-136">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="20f1d-137">Nie należy zezwalać na niższym poziomie zaufania kod, aby załadować kod, który otrzymuje wyższych uprawnień niż te, które obiekt wywołujący, aby Twoje otoki.</span><span class="sxs-lookup"><span data-stu-id="20f1d-137">You should not allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="20f1d-138">Wszelki kod, który ma pełnego zaufania lub zaufania znacznie wyższa niż obiekt wywołujący potencjalnych (w tym Internetu uprawnienia poziomu obiektu wywołującego) może obniżyć poziom zabezpieczeń w ten sposób.</span><span class="sxs-lookup"><span data-stu-id="20f1d-138">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="20f1d-139">Jeśli kod zawiera metodę publiczną, która przyjmuje tablicę bajtów i przekazuje go do **Assembly.Load**, a tym samym tworzenia zestawu w imieniu obiektu wywołującego, jego mogłyby spowodować przerwanie działania zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="20f1d-139">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="20f1d-140">Ten problem dotyczy następujących elementów interfejsu API:</span><span class="sxs-lookup"><span data-stu-id="20f1d-140">This issue applies to the following API elements:</span></span>  
  
-   <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
-   <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
-   <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
-   <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="20f1d-141">Żądanie programu vs. LinkDemand</span><span class="sxs-lookup"><span data-stu-id="20f1d-141">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="20f1d-142">Zabezpieczenia deklaratywne oferuje dwa rodzaje zabezpieczeń sprawdza, czy są podobne, ale kontrole bardzo różnią się.</span><span class="sxs-lookup"><span data-stu-id="20f1d-142">Declarative security offers two kinds of security checks that are similar but perform very different checks.</span></span> <span data-ttu-id="20f1d-143">Należy zrozumieć obie formy, ponieważ błędnego wyboru może spowodować utratę słabe zabezpieczeń i wydajności.</span><span class="sxs-lookup"><span data-stu-id="20f1d-143">You should understand both forms because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="20f1d-144">Zabezpieczenia deklaratywne oferuje następujące kontrole zabezpieczeń:</span><span class="sxs-lookup"><span data-stu-id="20f1d-144">Declarative security offers the following security checks:</span></span>  
  
-   <xref:System.Security.Permissions.SecurityAction.Demand> <span data-ttu-id="20f1d-145">Określa przeszukiwania stosu zabezpieczeń dostępu kodu.</span><span class="sxs-lookup"><span data-stu-id="20f1d-145">specifies the code access security stack walk.</span></span> <span data-ttu-id="20f1d-146">Wszystkie obiekty wywołujące w stosie musi mieć określone uprawnienie lub tożsamości w celu przekazania.</span><span class="sxs-lookup"><span data-stu-id="20f1d-146">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="20f1d-147">**Żądanie** występuje w przypadku każdego wywołania, ponieważ stos może zawierać różne obiekty wywołujące.</span><span class="sxs-lookup"><span data-stu-id="20f1d-147">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="20f1d-148">Tego sprawdzenia zabezpieczeń występuje zawsze, jeśli wielokrotne wywołania metody.</span><span class="sxs-lookup"><span data-stu-id="20f1d-148">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="20f1d-149">**Żądanie** jest dobrą ochronę przed atakami; zapewnienia nieautoryzowanego kodu próby uzyskania przez nią zostanie wykryty.</span><span class="sxs-lookup"><span data-stu-id="20f1d-149">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
-   <span data-ttu-id="20f1d-150">[Żądanie LinkDemand](../../../docs/framework/misc/link-demands.md) się dzieje w momencie kompilacji just-in-time (JIT) i sprawdza, czy tylko bezpośredniego wywołującego.</span><span class="sxs-lookup"><span data-stu-id="20f1d-150">[LinkDemand](../../../docs/framework/misc/link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="20f1d-151">Tego sprawdzenia zabezpieczeń nie sprawdza obiekt wywołujący obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="20f1d-151">This security check does not check the caller's caller.</span></span> <span data-ttu-id="20f1d-152">Po pomyślnej to sprawdzenie nie istnieje żadne dodatkowe zabezpieczenia, obciążenie niezależnie od tego, ile razy może wywołać obiekt wywołujący.</span><span class="sxs-lookup"><span data-stu-id="20f1d-152">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="20f1d-153">Istnieje jednak także nie ochrony przed atakami zapewnienia.</span><span class="sxs-lookup"><span data-stu-id="20f1d-153">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="20f1d-154">Za pomocą **LinkDemand**, umożliwiając złośliwego kodu do wywołania, przy użyciu kodu autoryzowanych wszelki kod, który przejdzie test i może przywoływać kod może potencjalnie uszkodzić zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="20f1d-154">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="20f1d-155">W związku z tym, nie używaj **LinkDemand** chyba, że wszystkie możliwe luki zabezpieczeń można uniknąć dokładnie.</span><span class="sxs-lookup"><span data-stu-id="20f1d-155">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="20f1d-156">W [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], zapotrzebowanie na łącza zostały zastąpione przez <xref:System.Security.SecurityCriticalAttribute> atrybutu w <xref:System.Security.SecurityRuleSet.Level2> zestawów.</span><span class="sxs-lookup"><span data-stu-id="20f1d-156">In the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="20f1d-157"><xref:System.Security.SecurityCriticalAttribute> Jest odpowiednikiem zapotrzebowania na łącza, aby uzyskać pełne zaufanie; jednak również wpływa na zasady dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="20f1d-157">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="20f1d-158">Aby uzyskać więcej informacji na temat tej zmiany, zobacz [kod o przezroczystym poziomie bezpieczeństwa, poziom 2](../../../docs/framework/misc/security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="20f1d-158">For more information about this change, see [Security-Transparent Code, Level 2](../../../docs/framework/misc/security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="20f1d-159">Dodatkowe środki ostrożności, wymagany, gdy za pomocą **LinkDemand** musi być zaprogramowany pojedynczo; może system zabezpieczeń, pomoc dotycząca wymuszania.</span><span class="sxs-lookup"><span data-stu-id="20f1d-159">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="20f1d-160">Wszelkie błędu zostanie otwarty do osłabienia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="20f1d-160">Any mistake opens a security weakness.</span></span> <span data-ttu-id="20f1d-161">Wszystkie autoryzowane kodu, że używa Twój kod musi być odpowiedzialne za wykonanie dodatkowe zabezpieczenia, wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="20f1d-161">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
-   <span data-ttu-id="20f1d-162">Ograniczanie dostępu do kodu wywołującego do klasy lub zestawu.</span><span class="sxs-lookup"><span data-stu-id="20f1d-162">Restricting the calling code's access to the class or assembly.</span></span>  
  
-   <span data-ttu-id="20f1d-163">Wprowadzenie do zabezpieczeń tego samego kontroli kodu wywołującego, wyświetlane na wywoływanego kodu i obligating wywołujące, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="20f1d-163">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="20f1d-164">Na przykład jeśli piszesz kod, który wywołuje metodę, która jest chroniona za pomocą **LinkDemand** dla <xref:System.Security.Permissions.SecurityPermission> z <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> określone flagi, metoda również powinny być **LinkDemand** (lub **Żądanie**, który jest silniejszy) tego uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="20f1d-164">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="20f1d-165">Wyjątkiem jest, jeśli kod używa **LinkDemand**— Metoda chroniona w sposób ograniczony, możesz zdecydować, jak są bezpieczne, biorąc pod uwagę innych mechanizmów ochrony zabezpieczeń (na przykład żądania) w kodzie.</span><span class="sxs-lookup"><span data-stu-id="20f1d-165">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="20f1d-166">W tym wyjątkowym przypadku obiekt wywołujący odpowiada w osłabienia ochrony zabezpieczeń na odpowiedni kod.</span><span class="sxs-lookup"><span data-stu-id="20f1d-166">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
-   <span data-ttu-id="20f1d-167">Zapewnienie wywołujących swój kod nie może wymuszać kod do wywoływania chronionego kodu w ich imieniu.</span><span class="sxs-lookup"><span data-stu-id="20f1d-167">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="20f1d-168">Innymi słowy obiekty wywołujące nie może wymusić autoryzowanego kodu przekazać określone parametry do chronionego kodu lub wrócić wyniki z niego.</span><span class="sxs-lookup"><span data-stu-id="20f1d-168">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="20f1d-169">Interfejsy i zapotrzebowania na łącza</span><span class="sxs-lookup"><span data-stu-id="20f1d-169">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="20f1d-170">Jeśli metoda wirtualna, właściwość lub zdarzenie z **LinkDemand** zastępuje metodę klasy bazowej, metody klasy bazowej również muszą mieć taką samą **LinkDemand** dla przeciążonej, aby były skuteczne.</span><span class="sxs-lookup"><span data-stu-id="20f1d-170">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="20f1d-171">Istnieje możliwość dla złośliwego kodu, można rzutować typu podstawowego i wywołać metodę klasy bazowej.</span><span class="sxs-lookup"><span data-stu-id="20f1d-171">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="20f1d-172">Ponadto należy pamiętać, że link żądania można dodać niejawnie do zestawów, które nie mają <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atrybut na poziomie zestawu.</span><span class="sxs-lookup"><span data-stu-id="20f1d-172">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="20f1d-173">Jest dobrą praktyką chronić implementacje metod za pomocą zapotrzebowania na łącza, gdy metody interfejsu muszą również zapotrzebowania na łącza.</span><span class="sxs-lookup"><span data-stu-id="20f1d-173">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="20f1d-174">Należy pamiętać o używaniu zapotrzebowania na łącza z interfejsów:</span><span class="sxs-lookup"><span data-stu-id="20f1d-174">Note the following about using link demands with interfaces:</span></span>  
  
-   <span data-ttu-id="20f1d-175">Jeśli umieścisz **LinkDemand** w publicznej metodzie klasy, która implementuje metodę interfejsu **LinkDemand** nie zostaną wymuszone, jeśli następnie rzutowane na interfejs i wywołać metodę.</span><span class="sxs-lookup"><span data-stu-id="20f1d-175">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="20f1d-176">W tym przypadku faktu, że połączone interfejsu tylko **LinkDemand** w interfejsie są uwzględniane.</span><span class="sxs-lookup"><span data-stu-id="20f1d-176">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="20f1d-177">Sprawdź następujące elementy związane z zabezpieczeniami:</span><span class="sxs-lookup"><span data-stu-id="20f1d-177">Review the following items for security issues:</span></span>  
  
-   <span data-ttu-id="20f1d-178">Zapotrzebowanie na łącza jawnych metod interfejsu.</span><span class="sxs-lookup"><span data-stu-id="20f1d-178">Explicit link demands on interface methods.</span></span> <span data-ttu-id="20f1d-179">Upewnij się, zapotrzebowanie na łącza zapewniają oczekiwanego ochronę.</span><span class="sxs-lookup"><span data-stu-id="20f1d-179">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="20f1d-180">Ustal, czy złośliwy kod może użyć rzutowania, aby obejść zapotrzebowania na łącza zgodnie z wcześniejszym opisem.</span><span class="sxs-lookup"><span data-stu-id="20f1d-180">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
-   <span data-ttu-id="20f1d-181">Metody wirtualne linkdemand stosowane.</span><span class="sxs-lookup"><span data-stu-id="20f1d-181">Virtual methods with link demands applied.</span></span>  
  
-   <span data-ttu-id="20f1d-182">Typy i interfejsy, które implementują.</span><span class="sxs-lookup"><span data-stu-id="20f1d-182">Types and the interfaces they implement.</span></span> <span data-ttu-id="20f1d-183">Te powinny używać żądań konsolidacji spójne.</span><span class="sxs-lookup"><span data-stu-id="20f1d-183">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="20f1d-184">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="20f1d-184">See also</span></span>

- [<span data-ttu-id="20f1d-185">Wytyczne dotyczące bezpiecznego programowania</span><span class="sxs-lookup"><span data-stu-id="20f1d-185">Secure Coding Guidelines</span></span>](../../../docs/standard/security/secure-coding-guidelines.md)
