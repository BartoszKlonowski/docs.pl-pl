---
title: Zabezpieczanie kodu otoki
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- security [.NET Framework], wrapper code
- wrapper code, securing
- secure coding, wrapper code
- code security, wrapper code
ms.assetid: 1df6c516-5bba-48bd-b450-1070e04b7389
caps.latest.revision: "11"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 5e29a2bdd0bfa338d0266c0841e11aa2ac366529
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="securing-wrapper-code"></a><span data-ttu-id="75efd-102">Zabezpieczanie kodu otoki</span><span class="sxs-lookup"><span data-stu-id="75efd-102">Securing Wrapper Code</span></span>
[!INCLUDE[net_security_note](../../../includes/net-security-note-md.md)]  
  
 <span data-ttu-id="75efd-103">Kod otoki, szczególnie gdy otoka ma zaufania wyższe niż kod, który korzysta z niego, można otworzyć unikatowy zestaw słabych zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="75efd-103">Wrapper code, especially where the wrapper has higher trust than code that uses it, can open a unique set of security weaknesses.</span></span> <span data-ttu-id="75efd-104">Wszystko gotowe imieniu obiekt wywołujący, gdzie ograniczone uprawnienia obiektu wywołującego nie znajdują się w wyboru odpowiednich ustawień zabezpieczeń, to potencjalne osłabienia wykorzystanie.</span><span class="sxs-lookup"><span data-stu-id="75efd-104">Anything done on behalf of a caller, where the caller's limited permissions are not included in the appropriate security check, is a potential weakness to be exploited.</span></span>  
  
 <span data-ttu-id="75efd-105">Nigdy nie włączyć coś otoki, który obiekt wywołujący nie może sam.</span><span class="sxs-lookup"><span data-stu-id="75efd-105">Never enable something through the wrapper that the caller could not do itself.</span></span> <span data-ttu-id="75efd-106">Jest to specjalne zagrożenie, gdy ten element, który obejmuje kontrolę ograniczonych zabezpieczeń, zamiast żądanie przeszukiwania pełnego stosu.</span><span class="sxs-lookup"><span data-stu-id="75efd-106">This is a special danger when doing something that involves a limited security check, as opposed to a full stack walk demand.</span></span> <span data-ttu-id="75efd-107">W przypadku poziom kontroli interposing kod otoki między rzeczywistych wywołującego i element interfejsu API w pytanie łatwo może spowodować sprawdzania zabezpieczeń, aby możliwe, gdy jest on powinien nie, a tym samym osłabienia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="75efd-107">When single-level checks are involved, interposing the wrapper code between the real caller and the API element in question can easily cause the security check to succeed when it should not, thereby weakening security.</span></span>  
  
## <a name="delegates"></a><span data-ttu-id="75efd-108">Delegaty</span><span class="sxs-lookup"><span data-stu-id="75efd-108">Delegates</span></span>  
 <span data-ttu-id="75efd-109">Delegat zabezpieczeń różni się od wersji programu .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="75efd-109">Delegate security differs between versions of the .NET Framework.</span></span>  <span data-ttu-id="75efd-110">W tej sekcji opisano zachowania innego obiektu delegowanego i skojarzone zagadnienia dotyczące zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="75efd-110">This section describes the different delegate behaviors and associated security considerations.</span></span>  
  
### <a name="in-version-10-and-11-of-the-net-framework"></a><span data-ttu-id="75efd-111">W wersji 1.0, 1.1 programu .NET Framework</span><span class="sxs-lookup"><span data-stu-id="75efd-111">In version 1.0 and 1.1 of the .NET Framework</span></span>  
 <span data-ttu-id="75efd-112">Akcje zabezpieczeń wersja 1.0 i 1.1 platformy .NET, wykonaj poniższe czynności przed twórcy delegata i obiekt wywołujący delegata.</span><span class="sxs-lookup"><span data-stu-id="75efd-112">Version 1.0 and 1.1 of the .NET Framework perform the following security actions against a delegate creator and a delegate caller.</span></span>  
  
-   <span data-ttu-id="75efd-113">Po utworzeniu delegata zabezpieczeń linkdemand dla metody docelowego delegata są wykonywane względem zestawu twórcy obiektu delegowanego.</span><span class="sxs-lookup"><span data-stu-id="75efd-113">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="75efd-114">Nieprzestrzeganie akcji zabezpieczeń powoduje <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="75efd-114">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
-   <span data-ttu-id="75efd-115">Po wywołaniu delegata są wykonywane wszystkie istniejące żądania kontroli zabezpieczeń na wywołującego delegata.</span><span class="sxs-lookup"><span data-stu-id="75efd-115">When the delegate is invoked, any existing security demands on the delegate caller are performed.</span></span>  
  
 <span data-ttu-id="75efd-116">Zawsze, gdy trwa kodu <xref:System.Delegate> z kodu niższym poziomie zaufania, które może wywołać ją, upewnij się, że nie włączasz kod zaufany mniej eskalować uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="75efd-116">Whenever your code takes a <xref:System.Delegate> from less-trusted code that might call it, make sure that you are not enabling the less-trusted code to escalate its permissions.</span></span> <span data-ttu-id="75efd-117">Przypadku trwać delegata i używać go później, kod utworzenia delegata nie jest w stosie wywołań, a jego uprawnienia nie zostanie sprawdzona, jeśli kod w lub na podstawie delegata prób chronionych operacji.</span><span class="sxs-lookup"><span data-stu-id="75efd-117">If you take a delegate and use it later, the code that created the delegate is not on the call stack and its permissions will not be tested if code in or under the delegate attempts a protected operation.</span></span> <span data-ttu-id="75efd-118">Jeśli kod i kod wywołujący uprawnień wyższe niż twórca, twórca można organizować ścieżki wywołania nie są częścią stosu wywołań.</span><span class="sxs-lookup"><span data-stu-id="75efd-118">If your code and the caller code have higher privileges than the creator, the creator can orchestrate the call path without being part of the call stack.</span></span>  
  
### <a name="in-version-20-and-later-versions-of-the-net-framework"></a><span data-ttu-id="75efd-119">W wersji 2.0 i nowszych wersji programu .NET Framework</span><span class="sxs-lookup"><span data-stu-id="75efd-119">In version 2.0 and later versions of the .NET Framework</span></span>  
 <span data-ttu-id="75efd-120">W przeciwieństwie do poprzednich wersji w wersji 2.0 i nowszych wersji programu .NET Framework wykonuje akcję zabezpieczeń przed twórca delegata podczas tworzenia i wywołuje delegata.</span><span class="sxs-lookup"><span data-stu-id="75efd-120">Unlike previous versions, version 2.0 and later versions of the .NET Framework performs security action against the delegate creator when the delegate is created and called.</span></span>  
  
-   <span data-ttu-id="75efd-121">Po utworzeniu delegata zabezpieczeń linkdemand dla metody docelowego delegata są wykonywane względem zestawu twórcy obiektu delegowanego.</span><span class="sxs-lookup"><span data-stu-id="75efd-121">When a delegate is created, security link demands on the delegate target method are performed against the grant set of the delegate creator.</span></span>  <span data-ttu-id="75efd-122">Nieprzestrzeganie akcji zabezpieczeń powoduje <xref:System.Security.SecurityException>.</span><span class="sxs-lookup"><span data-stu-id="75efd-122">Failure to satisfy the security action results in a <xref:System.Security.SecurityException>.</span></span>  
  
-   <span data-ttu-id="75efd-123">Zestaw uprawnień twórcy obiektu delegowanego jest również przechwycone podczas tworzenia obiektu delegowanego i przechowywane z obiektem delegowanym.</span><span class="sxs-lookup"><span data-stu-id="75efd-123">The delegate creator's grant set is also captured during delegate creation and stored with the delegate.</span></span>  
  
-   <span data-ttu-id="75efd-124">Po wywołaniu delegat przechwyconych zestawu twórcy delegata najpierw zostaną ocenione względem wszystkie żądania w bieżącym kontekście, jeśli delegat twórcę i wywołującego należą do różnych zestawów.</span><span class="sxs-lookup"><span data-stu-id="75efd-124">When the delegate is invoked, the delegate creator's captured grant set is first evaluated against any demands in the current context if the delegate creator and caller belong to different assemblies.</span></span>  <span data-ttu-id="75efd-125">Następnie wszystkie istniejące żądania kontroli zabezpieczeń na wywołującego delegata są wykonywane.</span><span class="sxs-lookup"><span data-stu-id="75efd-125">Next, any existing security demands on the delegate caller are performed.</span></span>  
  
## <a name="link-demands-and-wrappers"></a><span data-ttu-id="75efd-126">Żądania łączy i otoki</span><span class="sxs-lookup"><span data-stu-id="75efd-126">Link demands and wrappers</span></span>  
 <span data-ttu-id="75efd-127">W infrastrukturze zabezpieczeń została wzmocniona przypadku specjalnej ochrony z żądaniem linkdemand, ale nadal jest źródłem możliwe osłabienia w kodzie.</span><span class="sxs-lookup"><span data-stu-id="75efd-127">A special protection case with link demands has been strengthened in the security infrastructure, but it is still a source of possible weakness in your code.</span></span>  
  
 <span data-ttu-id="75efd-128">Jeśli pełni zaufany kod wywołuje właściwości, zdarzenia lub metoda chronione przez [LinkDemand](../../../docs/framework/misc/link-demands.md), wywołanie zakończy się pomyślnie, jeśli **LinkDemand** spełnieniu sprawdzenie uprawnień do obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="75efd-128">If fully trusted code calls a property, event, or method protected by a [LinkDemand](../../../docs/framework/misc/link-demands.md), the call succeeds if the **LinkDemand** permission check for the caller is satisfied.</span></span> <span data-ttu-id="75efd-129">Ponadto, jeśli pełni zaufanego kodu udostępnia klasę pobierającej nazwę właściwości i wywołania jego **uzyskać** dostępu za pomocą odbicia, które wywołanie **uzyskać** dostępu zakończy się powodzeniem, nawet jeśli kod użytkownika wykonuje nie ma prawa dostępu do tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="75efd-129">Additionally, if the fully trusted code exposes a class that takes the name of a property and calls its **get** accessor using reflection, that call to the **get** accessor succeeds even though the user code does not have the right to access this property.</span></span> <span data-ttu-id="75efd-130">Jest to spowodowane **LinkDemand** sprawdza tylko bezpośredniego obiektu wywołującego, który jest całkowicie zaufanego kodu.</span><span class="sxs-lookup"><span data-stu-id="75efd-130">This is because the **LinkDemand** checks only the immediate caller, which is the fully trusted code.</span></span> <span data-ttu-id="75efd-131">W zasadzie całkowicie zaufanego kodu jest wywołania uprzywilejowanych imieniu kod użytkownika bez upewnieniu się, że kod użytkownik ma prawo do wprowadzania tego wywołania.</span><span class="sxs-lookup"><span data-stu-id="75efd-131">In essence, the fully trusted code is making a privileged call on behalf of user code without making sure that the user code has the right to make that call.</span></span>  
  
 <span data-ttu-id="75efd-132">Aby zapobiec takiej luk w zabezpieczeniach, środowisko uruchomieniowe języka wspólnego rozszerza wyboru do pełnej przejście stosu zażąda na wszelkie pośrednie wywołanie do metody, konstruktora, właściwość lub zdarzenie chronione przez **LinkDemand**.</span><span class="sxs-lookup"><span data-stu-id="75efd-132">To help prevent such security holes, the common language runtime extends the check into a full stack-walking demand on any indirect call to a method, constructor, property, or event protected by a **LinkDemand**.</span></span> <span data-ttu-id="75efd-133">Ta ochrona ponosi pewne koszty wydajności i zmienia semantykę kontroli zabezpieczeń. żądanie pełnego przeszukiwana stosu mogą wystąpić błędy, gdzie będzie przekazanego wyboru szybsze, jeden poziom.</span><span class="sxs-lookup"><span data-stu-id="75efd-133">This protection incurs some performance costs and changes the semantics of the security check; the full stack-walk demand might fail where the faster, one-level check would have passed.</span></span>  
  
## <a name="assembly-loading-wrappers"></a><span data-ttu-id="75efd-134">Otoki ładowania zestawu</span><span class="sxs-lookup"><span data-stu-id="75efd-134">Assembly loading wrappers</span></span>  
 <span data-ttu-id="75efd-135">Kilka metod używana do załadowania kodu zarządzanego włącznie z <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, ładowanie zestawów dowody obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="75efd-135">Several methods used to load managed code, including <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>, load assemblies with the evidence of the caller.</span></span> <span data-ttu-id="75efd-136">Jeśli opakowaniem jednej z tych metod system zabezpieczeń można użyć udzielanie uprawnień swój kod, zamiast uprawnienia obiektu wywołującego do Twojej otoki załadować zestawów.</span><span class="sxs-lookup"><span data-stu-id="75efd-136">If you wrap any of these methods, the security system could use your code's permission grant, instead of the permissions of the caller to your wrapper, to load the assemblies.</span></span> <span data-ttu-id="75efd-137">Nie należy zezwalać na niższym poziomie zaufania kod, aby załadować kodu, który jest wyższy uprawnień niż obiekt wywołujący, aby Twoje otoki.</span><span class="sxs-lookup"><span data-stu-id="75efd-137">You should not allow less-trusted code to load code that is granted higher permissions than those of the caller to your wrapper.</span></span>  
  
 <span data-ttu-id="75efd-138">Wszelki kod, który ma pełne zaufanie lub zaufania znacznie wyższa niż obiekt wywołujący potencjalnych (w tym Internet uprawnienia obiektu wywołującego) może obniżyć poziom zabezpieczeń w ten sposób.</span><span class="sxs-lookup"><span data-stu-id="75efd-138">Any code that has full trust or significantly higher trust than a potential caller (including an Internet-permissions-level caller) could weaken security in this way.</span></span> <span data-ttu-id="75efd-139">Jeśli kod ma publicznej metody, która przyjmuje tablicę bajtów i przekazuje je do **metody Assembly.Load**, co umożliwia tworzenie zestawu w imieniu wywołującego, go może spowodować uszkodzenie zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="75efd-139">If your code has a public method that takes a byte array and passes it to **Assembly.Load**, thereby creating an assembly on the caller's behalf, it might break security.</span></span>  
  
 <span data-ttu-id="75efd-140">Ten problem dotyczy następujących elementów interfejsu API:</span><span class="sxs-lookup"><span data-stu-id="75efd-140">This issue applies to the following API elements:</span></span>  
  
-   <xref:System.AppDomain.DefineDynamicAssembly%2A?displayProperty=nameWithType>  
  
-   <xref:System.AppDomain.Load%2A?displayProperty=nameWithType>  
  
-   <xref:System.Reflection.Assembly.LoadFrom%2A?displayProperty=nameWithType>  
  
-   <xref:System.Reflection.Assembly.Load%2A?displayProperty=nameWithType>  
  
## <a name="demand-vs-linkdemand"></a><span data-ttu-id="75efd-141">Żądanie programu vs. Żądanie LinkDemand</span><span class="sxs-lookup"><span data-stu-id="75efd-141">Demand vs. LinkDemand</span></span>  
 <span data-ttu-id="75efd-142">Zabezpieczenia deklaracyjne oferuje dwa rodzaje kontroli zabezpieczeń, które są podobne, ale sprawdzana jest bardzo różnią się.</span><span class="sxs-lookup"><span data-stu-id="75efd-142">Declarative security offers two kinds of security checks that are similar but perform very different checks.</span></span> <span data-ttu-id="75efd-143">Zarówno formularzy należy poznać, ponieważ błędnego wyboru może spowodować utratę słabe zabezpieczeń lub wydajności.</span><span class="sxs-lookup"><span data-stu-id="75efd-143">You should understand both forms because the wrong choice can result in weak security or performance loss.</span></span>  
  
 <span data-ttu-id="75efd-144">Zabezpieczenia deklaracyjne oferuje następujące kontrole zabezpieczeń:</span><span class="sxs-lookup"><span data-stu-id="75efd-144">Declarative security offers the following security checks:</span></span>  
  
-   <span data-ttu-id="75efd-145"><xref:System.Security.Permissions.SecurityAction.Demand>Określa przeszukiwania stosu zabezpieczeń dostępu kodu.</span><span class="sxs-lookup"><span data-stu-id="75efd-145"><xref:System.Security.Permissions.SecurityAction.Demand> specifies the code access security stack walk.</span></span> <span data-ttu-id="75efd-146">Wszystkich obiektów wywołujących na stosie musi mieć określone uprawnienie lub tożsamości do przekazania.</span><span class="sxs-lookup"><span data-stu-id="75efd-146">All callers on the stack must have the specified permission or identity to pass.</span></span> <span data-ttu-id="75efd-147">**Żądanie** wykonywane przy każdym wywołaniu, ponieważ stos mogą zawierać różne elementy wywołujące.</span><span class="sxs-lookup"><span data-stu-id="75efd-147">**Demand** occurs on every call because the stack might contain different callers.</span></span> <span data-ttu-id="75efd-148">Jeśli wielokrotnie wywołania metody to sprawdzanie zabezpieczeń jest wykonywane zawsze.</span><span class="sxs-lookup"><span data-stu-id="75efd-148">If you call a method repeatedly, this security check occurs each time.</span></span> <span data-ttu-id="75efd-149">**Żądanie** dobrej ochrony przed atakami; zapewnienia zostanie wykryty nieautoryzowanego kodu próby pobrania za jego pośrednictwem.</span><span class="sxs-lookup"><span data-stu-id="75efd-149">**Demand** is good protection against luring attacks; unauthorized code trying to get through it will be detected.</span></span>  
  
-   <span data-ttu-id="75efd-150">[Żądanie LinkDemand](../../../docs/framework/misc/link-demands.md) odbywa się na czas kompilacji just in time (JIT) i sprawdza tylko bezpośredniego obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="75efd-150">[LinkDemand](../../../docs/framework/misc/link-demands.md) happens at just-in-time (JIT) compilation time and checks only the immediate caller.</span></span> <span data-ttu-id="75efd-151">Ta kontrola zabezpieczeń nie sprawdza obiekt wywołujący obiektu wywołującego.</span><span class="sxs-lookup"><span data-stu-id="75efd-151">This security check does not check the caller's caller.</span></span> <span data-ttu-id="75efd-152">Po pomyślnej ten test, nie istnieje żadne dodatkowe zabezpieczenia narzut niezależnie od tego, ile razy może wywołać obiekt wywołujący.</span><span class="sxs-lookup"><span data-stu-id="75efd-152">Once this check passes, there is no additional security overhead no matter how many times the caller might call.</span></span> <span data-ttu-id="75efd-153">Ponieważ nie ma również nie ochrona przed atakami zapewnienia.</span><span class="sxs-lookup"><span data-stu-id="75efd-153">However, there is also no protection from luring attacks.</span></span> <span data-ttu-id="75efd-154">Z **LinkDemand**, kodu, który przekazuje testu i może się odwoływać kod potencjalnie może uszkodzić zabezpieczeń przez złośliwy kod wywołać przy użyciu autoryzowanego kodu.</span><span class="sxs-lookup"><span data-stu-id="75efd-154">With **LinkDemand**, any code that passes the test and can reference your code can potentially break security by allowing malicious code to call using the authorized code.</span></span> <span data-ttu-id="75efd-155">W związku z tym nie należy używać **LinkDemand** chyba, że wszystkie możliwe słabe punkty można uniknąć dokładnie.</span><span class="sxs-lookup"><span data-stu-id="75efd-155">Therefore, do not use **LinkDemand** unless all the possible weaknesses can be thoroughly avoided.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="75efd-156">W [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], linkdemand zostały zastąpione przez <xref:System.Security.SecurityCriticalAttribute> atrybutu w <xref:System.Security.SecurityRuleSet.Level2> zestawów.</span><span class="sxs-lookup"><span data-stu-id="75efd-156">In the [!INCLUDE[net_v40_long](../../../includes/net-v40-long-md.md)], link demands have been replaced by the <xref:System.Security.SecurityCriticalAttribute> attribute in <xref:System.Security.SecurityRuleSet.Level2> assemblies.</span></span> <span data-ttu-id="75efd-157"><xref:System.Security.SecurityCriticalAttribute> Jest odpowiednikiem żądanie łącza dla pełnego zaufania, jednak również wpływa na zasady dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="75efd-157">The <xref:System.Security.SecurityCriticalAttribute> is equivalent to a link demand for full trust; however, it also affects inheritance rules.</span></span> <span data-ttu-id="75efd-158">Aby uzyskać więcej informacji na temat tej zmiany, zobacz [kod o przezroczystym poziomie bezpieczeństwa, poziom 2](../../../docs/framework/misc/security-transparent-code-level-2.md).</span><span class="sxs-lookup"><span data-stu-id="75efd-158">For more information about this change, see [Security-Transparent Code, Level 2](../../../docs/framework/misc/security-transparent-code-level-2.md).</span></span>  
  
 <span data-ttu-id="75efd-159">Dodatkowe środki ostrożności, wymagane, gdy usługa **LinkDemand** musi być programowane pojedynczo; może systemu zabezpieczeń, pomoc wymuszania.</span><span class="sxs-lookup"><span data-stu-id="75efd-159">The extra precautions required when using **LinkDemand** must be programmed individually; the security system can help with enforcement.</span></span> <span data-ttu-id="75efd-160">Wszelkie błędu otwiera osłabienia zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="75efd-160">Any mistake opens a security weakness.</span></span> <span data-ttu-id="75efd-161">Wszystkie autoryzowane kodu, że używa Twój kod musi być odpowiedzialny za zaimplementowanie dodatkowych zabezpieczeń w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="75efd-161">All authorized code that uses your code must be responsible for implementing additional security by doing the following:</span></span>  
  
-   <span data-ttu-id="75efd-162">Ograniczanie dostępu wywołującego kodu do klasy lub zestawu.</span><span class="sxs-lookup"><span data-stu-id="75efd-162">Restricting the calling code's access to the class or assembly.</span></span>  
  
-   <span data-ttu-id="75efd-163">Wprowadzenie do zabezpieczeń tego samego kontroli kodu wywołującego, który pojawia się na wywoływanego kodu i obligating jego wywołań, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="75efd-163">Placing the same security checks on the calling code that appear on the code being called and obligating its callers to do so.</span></span> <span data-ttu-id="75efd-164">Na przykład, jeśli pisania kodu, który wywołuje metodę, która jest chroniony za pomocą **LinkDemand** dla <xref:System.Security.Permissions.SecurityPermission> z <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> Flaga określona, również powinny być metodę **LinkDemand** (lub **Żądanie**, który jest mocniejszy) dla tego uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="75efd-164">For example, if you write code that calls a method that is protected with a **LinkDemand** for the <xref:System.Security.Permissions.SecurityPermission> with the <xref:System.Security.Permissions.SecurityPermissionFlag.UnmanagedCode> flag specified, your method should also make a **LinkDemand** (or **Demand**, which is stronger) for this permission.</span></span> <span data-ttu-id="75efd-165">Wyjątek stanowi, jeśli używa Twój kod **LinkDemand**-Metoda chroniona w sposób ograniczony, który ma jest bezpieczne, podane innych mechanizmów ochrony zabezpieczeń (na przykład wymagania) w kodzie.</span><span class="sxs-lookup"><span data-stu-id="75efd-165">The exception is if your code uses the **LinkDemand**-protected method in a limited way that you decide is safe, given other security protection mechanisms (such as demands) in your code.</span></span> <span data-ttu-id="75efd-166">W tym przypadku wyjątkowych wywołującego ma odpowiedzialność za osłabienia ochrony zabezpieczeń kodu źródłowego.</span><span class="sxs-lookup"><span data-stu-id="75efd-166">In this exceptional case, the caller takes responsibility in weakening the security protection on the underlying code.</span></span>  
  
-   <span data-ttu-id="75efd-167">Zapewnienie, że wywoływania z kodu nie można wymuszać kodu wywoływanie chronionych kodu w ich imieniu.</span><span class="sxs-lookup"><span data-stu-id="75efd-167">Ensuring that your code's callers cannot trick your code into calling the protected code on their behalf.</span></span> <span data-ttu-id="75efd-168">Innymi słowy wywołań nie może wymusić autoryzowanego kodu do przekazania parametrów określonych w kodzie chronionych lub uzyskiwać wyniki z powrotem od niego.</span><span class="sxs-lookup"><span data-stu-id="75efd-168">In other words, callers cannot force the authorized code to pass specific parameters to the protected code, or to get results back from it.</span></span>  
  
### <a name="interfaces-and-link-demands"></a><span data-ttu-id="75efd-169">Interfejsy i żądania łączy</span><span class="sxs-lookup"><span data-stu-id="75efd-169">Interfaces and Link Demands</span></span>  
 <span data-ttu-id="75efd-170">Jeśli wirtualny metoda, właściwość lub zdarzenie z **LinkDemand** zastępuje metodę klasy podstawowej metody klasy podstawowej również muszą mieć ten sam **LinkDemand** przesłoniętej metody w celu wprowadzenia.</span><span class="sxs-lookup"><span data-stu-id="75efd-170">If a virtual method, property, or event with **LinkDemand** overrides a base class method, the base class method must also have the same **LinkDemand** for the overridden method in order to be effective.</span></span> <span data-ttu-id="75efd-171">Istnieje możliwość złośliwego kodu można rzutować typu podstawowego i wywołanie metody klasy podstawowej.</span><span class="sxs-lookup"><span data-stu-id="75efd-171">It is possible for malicious code to cast back to the base type and call the base class method.</span></span> <span data-ttu-id="75efd-172">Również należy pamiętać, że link wymagań można dodać niejawnie do zestawów, które nie mają <xref:System.Security.AllowPartiallyTrustedCallersAttribute> atrybut na poziomie zestawu.</span><span class="sxs-lookup"><span data-stu-id="75efd-172">Also note that link demands can be added implicitly to assemblies that do not have the <xref:System.Security.AllowPartiallyTrustedCallersAttribute> assembly-level attribute.</span></span>  
  
 <span data-ttu-id="75efd-173">Dobrym rozwiązaniem do ochrony implementacje metod z żądaniem linkdemand, gdy metody interfejsu muszą również linkdemand jest.</span><span class="sxs-lookup"><span data-stu-id="75efd-173">It is a good practice to protect method implementations with link demands when interface methods also have link demands.</span></span> <span data-ttu-id="75efd-174">Należy pamiętać, że o korzystaniu z interfejsami linkdemand:</span><span class="sxs-lookup"><span data-stu-id="75efd-174">Note the following about using link demands with interfaces:</span></span>  
  
-   <span data-ttu-id="75efd-175">Jeśli umieścisz **LinkDemand** w publicznej metody klasy, która implementuje metody interfejsu **LinkDemand** nie będą wymuszane, jeśli następnie rzutowane na interfejs i wywołania metody.</span><span class="sxs-lookup"><span data-stu-id="75efd-175">If you place a **LinkDemand** on a public method of a class that implements an interface method, the **LinkDemand** will not be enforced if you then cast to the interface and call the method.</span></span> <span data-ttu-id="75efd-176">W takim przypadku ponieważ powiązane interfejsu tylko **LinkDemand** w interfejsie jest go uznać.</span><span class="sxs-lookup"><span data-stu-id="75efd-176">In this case, because you linked against the interface, only the **LinkDemand** on the interface is honored.</span></span>  
  
 <span data-ttu-id="75efd-177">Sprawdź następujące elementy związane z zabezpieczeniami:</span><span class="sxs-lookup"><span data-stu-id="75efd-177">Review the following items for security issues:</span></span>  
  
-   <span data-ttu-id="75efd-178">Jawne linkdemand dla metod interfejsu.</span><span class="sxs-lookup"><span data-stu-id="75efd-178">Explicit link demands on interface methods.</span></span> <span data-ttu-id="75efd-179">Upewnij się, te linkdemand zapewniają ochronę oczekiwanego.</span><span class="sxs-lookup"><span data-stu-id="75efd-179">Make sure these link demands offer the expected protection.</span></span> <span data-ttu-id="75efd-180">Ustal, czy złośliwy kod może używać rzutowanie uzyskanie wokół linkdemand opisanych powyżej.</span><span class="sxs-lookup"><span data-stu-id="75efd-180">Determine whether malicious code can use a cast to get around the link demands as described previously.</span></span>  
  
-   <span data-ttu-id="75efd-181">Metody wirtualne z żądaniem linkdemand zastosowane.</span><span class="sxs-lookup"><span data-stu-id="75efd-181">Virtual methods with link demands applied.</span></span>  
  
-   <span data-ttu-id="75efd-182">Typy i interfejsów, które miały zaimplementowane.</span><span class="sxs-lookup"><span data-stu-id="75efd-182">Types and the interfaces they implement.</span></span> <span data-ttu-id="75efd-183">Te należy używać linkdemand spójnie.</span><span class="sxs-lookup"><span data-stu-id="75efd-183">These should use link demands consistently.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="75efd-184">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="75efd-184">See Also</span></span>  
 [<span data-ttu-id="75efd-185">Wytyczne dotyczące bezpiecznego programowania</span><span class="sxs-lookup"><span data-stu-id="75efd-185">Secure Coding Guidelines</span></span>](../../../docs/standard/security/secure-coding-guidelines.md)
