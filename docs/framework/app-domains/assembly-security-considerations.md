---
title: Zagadnienia dotyczące zabezpieczeń zestawów
ms.date: 03/30/2017
helpviewer_keywords:
- assemblies [.NET Framework], security
- signcodes
- names [.NET Framework], assemblies
- strong-named assemblies, security considerations
- signing assemblies
- assemblies [.NET Framework], signing
- granting permissions, assemblies
- assemblies [.NET Framework], strong-named
- names [.NET Framework], strong names
- permissions [.NET Framework], assemblies
- security [.NET Framework], assemblies
- integrity with assemblies
ms.assetid: 1b5439c1-f3d5-4529-bd69-01814703d067
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: a4f791ea339c9188ac8fada525611fc68821351d
ms.sourcegitcommit: 11f11ca6cefe555972b3a5c99729d1a7523d8f50
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/03/2018
ms.locfileid: "32743423"
---
# <a name="assembly-security-considerations"></a><span data-ttu-id="df591-102">Zagadnienia dotyczące zabezpieczeń zestawów</span><span class="sxs-lookup"><span data-stu-id="df591-102">Assembly Security Considerations</span></span>
<a name="top"></a> <span data-ttu-id="df591-103">Podczas kompilowania zestawu można określić zestaw uprawnień wymaganych do uruchomienia zestawu.</span><span class="sxs-lookup"><span data-stu-id="df591-103">When you build an assembly, you can specify a set of permissions that the assembly requires to run.</span></span> <span data-ttu-id="df591-104">To, czy określone uprawnienia są przyznane do zestawu, czy nie, zależy od dowodów.</span><span class="sxs-lookup"><span data-stu-id="df591-104">Whether certain permissions are granted or not granted to an assembly is based on evidence.</span></span>  
  
 <span data-ttu-id="df591-105">Istnieją dwa wyraźnie różniące się sposoby używania dowodów:</span><span class="sxs-lookup"><span data-stu-id="df591-105">There are two distinct ways evidence is used:</span></span>  
  
-   <span data-ttu-id="df591-106">Dowód wejściowy jest scalany z dowodami zebranymi przez moduł ładujący w celu utworzenia ostatecznego zestawu dowodów stosowanego do rozpoznawania zasad.</span><span class="sxs-lookup"><span data-stu-id="df591-106">The input evidence is merged with the evidence gathered by the loader to create a final set of evidence used for policy resolution.</span></span> <span data-ttu-id="df591-107">Metody, korzystających z tym semantycznego obejmują **metody Assembly.Load**, **Assembly.LoadFrom**, i **metody Activator.CreateInstance**.</span><span class="sxs-lookup"><span data-stu-id="df591-107">The methods that use this semantic include **Assembly.Load**, **Assembly.LoadFrom**, and **Activator.CreateInstance**.</span></span>  
  
-   <span data-ttu-id="df591-108">Dowód wejściowy jest używany w niezmienionej formie jako ostateczny zestaw dowodów stosowanych do rozpoznawania zasad.</span><span class="sxs-lookup"><span data-stu-id="df591-108">The input evidence is used unaltered as the final set of evidence used for policy resolution.</span></span> <span data-ttu-id="df591-109">Metody, korzystających z tym semantycznego obejmują **Assembly.Load(byte[])** i **AppDomain.DefineDynamicAssembly()**.</span><span class="sxs-lookup"><span data-stu-id="df591-109">The methods that use this semantic include **Assembly.Load(byte[])** and **AppDomain.DefineDynamicAssembly()**.</span></span>  
  
 <span data-ttu-id="df591-110">Opcjonalnie można uprawnienia przez [zasady zabezpieczeń](../../../docs/framework/misc/code-access-security-basics.md) wartości na komputerze, w którym będzie uruchamiane zestawu.</span><span class="sxs-lookup"><span data-stu-id="df591-110">Optional permissions can be granted by the [security policy](../../../docs/framework/misc/code-access-security-basics.md) set on the computer where the assembly will run.</span></span> <span data-ttu-id="df591-111">Jeśli kod ma obsługiwać wszystkie potencjalne wyjątki zabezpieczeń, można wykonać jedną z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="df591-111">If you want your code to handle all potential security exceptions, you can do one of the following:</span></span>  
  
-   <span data-ttu-id="df591-112">Wstawić żądania o uprawnienia dla wszystkich uprawnień, których wymaga kod, oraz obsługiwać z wyprzedzeniem niepowodzenia w czasie ładowania, które występują w razie nieprzyznania uprawnień.</span><span class="sxs-lookup"><span data-stu-id="df591-112">Insert a permission request for all the permissions your code must have, and handle up front the load-time failure that occurs if the permissions are not granted.</span></span>  
  
-   <span data-ttu-id="df591-113">W celu uzyskania uprawnień wymaganych przez kod nie używać żądań o uprawnienia, ale przygotować się na obsługę wyjątków zabezpieczeń w razie nieprzyznania uprawnień.</span><span class="sxs-lookup"><span data-stu-id="df591-113">Do not use a permission request to obtain permissions your code might need, but be prepared to handle security exceptions if permissions are not granted.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="df591-114">Zabezpieczenia to skomplikowana dziedzina, w której istnieje wiele opcji do wyboru.</span><span class="sxs-lookup"><span data-stu-id="df591-114">Security is a complex area, and you have many options to choose from.</span></span> <span data-ttu-id="df591-115">Aby uzyskać więcej informacji, zobacz [podstawowe pojęcia dotyczące zabezpieczeń](../../../docs/standard/security/key-security-concepts.md).</span><span class="sxs-lookup"><span data-stu-id="df591-115">For more information, see [Key Security Concepts](../../../docs/standard/security/key-security-concepts.md).</span></span>  
  
 <span data-ttu-id="df591-116">Podczas ładowania dowód zestawu jest wykorzystywany jako dane wejściowe dla zasad zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="df591-116">At load time, the assembly's evidence is used as input to security policy.</span></span> <span data-ttu-id="df591-117">Zasady zabezpieczeń są ustalane przez przedsiębiorstwo i administratora komputera, a także przez ustawienia zasad użytkownika. Określają one zestaw uprawnień przydzielanych całemu zarządzanemu kodowi podczas wykonywania.</span><span class="sxs-lookup"><span data-stu-id="df591-117">Security policy is established by the enterprise and the computer's administrator as well as by user policy settings, and determines the set of permissions that is granted to all managed code when executed.</span></span> <span data-ttu-id="df591-118">Zasady zabezpieczeń można ustanowić dla wydawcy zestawu (jeśli ma on podpis wygenerowany przez narzędzie do podpisywania), dla witryny internetowej i strefy (w znaczeniu używanym w programie Internet Explorer), z której zestaw został pobrany, lub dla silnej nazwy zestawu.</span><span class="sxs-lookup"><span data-stu-id="df591-118">Security policy can be established for the publisher of the assembly (if it has a signing tool generated signature), for the Web site and zone (in Internet Explorer terms) the assembly was downloaded from, or for the assembly's strong name.</span></span> <span data-ttu-id="df591-119">Na przykład administrator komputera może ustanowić zasady zabezpieczeń, które pozwalają, aby kod pobrany z witryny internetowej i podpisany przez producenta danego oprogramowania miał dostęp do bazy danych na komputerze, ale nie przyznają dostępu umożliwiającego zapis na dysku komputera.</span><span class="sxs-lookup"><span data-stu-id="df591-119">For example, a computer's administrator can establish security policy that allows all code downloaded from a Web site and signed by a given software company to access a database on a computer, but does not grant access to write to the computer's disk.</span></span>  
  
## <a name="strong-named-assemblies-and-signing-tools"></a><span data-ttu-id="df591-120">Zestawy o silnej nazwie i narzędzia podpisywania</span><span class="sxs-lookup"><span data-stu-id="df591-120">Strong-Named Assemblies and Signing Tools</span></span>  
 <span data-ttu-id="df591-121">Można podpisać zestawu na dwa sposoby różne, ale uzupełniające: przy użyciu silnej nazwy lub za pomocą [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md).</span><span class="sxs-lookup"><span data-stu-id="df591-121">You can sign an assembly in two different but complementary ways: with a strong name or by using  [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md).</span></span> <span data-ttu-id="df591-122">Podpisywanie zestawu silną nazwą dodaje szyfrowanie klucza publicznego do pliku zawierającego manifest zestawu.</span><span class="sxs-lookup"><span data-stu-id="df591-122">Signing an assembly with a strong name adds public key encryption to the file containing the assembly manifest.</span></span> <span data-ttu-id="df591-123">Podpisywanie za pomocą silnej nazwy pomaga zweryfikować unikatowość nazwy, zapobiec podszywaniu się pod nazwę oraz dostarczyć obiektom wywołującym jakąś tożsamość podczas rozpoznawania odwołań.</span><span class="sxs-lookup"><span data-stu-id="df591-123">Strong name signing helps to verify name uniqueness, prevent name spoofing, and provide callers with some identity when a reference is resolved.</span></span>  
  
 <span data-ttu-id="df591-124">Jednak żaden poziom zaufania jest skojarzony z nazwą silną, dzięki czemu [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md) ważne.</span><span class="sxs-lookup"><span data-stu-id="df591-124">However, no level of trust is associated with a strong name, which makes [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) important.</span></span> <span data-ttu-id="df591-125">Te dwa narzędzia podpisywania wymagają, aby wydawca potwierdził swoją tożsamość wobec zewnętrznego urzędu i uzyskał certyfikat.</span><span class="sxs-lookup"><span data-stu-id="df591-125">The two signing tools require a publisher to prove its identity to a third-party authority and obtain a certificate.</span></span> <span data-ttu-id="df591-126">Certyfikat jest następnie osadzany w pliku i na jego podstawie administrator może decydować, czy ufa autentyczności kodu.</span><span class="sxs-lookup"><span data-stu-id="df591-126">This certificate is then embedded in your file and can be used by an administrator to decide whether to trust the code's authenticity.</span></span>  
  
 <span data-ttu-id="df591-127">Można podać zarówno silnej nazwy i podpisu cyfrowego utworzone za pomocą [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md) do zestawu, lub można użyć tylko.</span><span class="sxs-lookup"><span data-stu-id="df591-127">You can give both a strong name and a digital signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) to an assembly, or you can use either alone.</span></span> <span data-ttu-id="df591-128">Oba narzędzia podpisywania mogą podpisywać tylko jeden plik jednocześnie. W przypadku zestawu wieloplikowego podpisuje się plik zawierający manifest zestawu.</span><span class="sxs-lookup"><span data-stu-id="df591-128">The two signing tools can sign only one file at a time; for a multifile assembly, you sign the file that contains the assembly manifest.</span></span> <span data-ttu-id="df591-129">Silnej nazwy jest przechowywana w pliku manifestu zestawu zawierającego, ale podpisu utworzone za pomocą [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md) są przechowywane w gnieździe zastrzeżone przenośny plik wykonywalny (PE) zawierający manifest zestawu.</span><span class="sxs-lookup"><span data-stu-id="df591-129">A strong name is stored in the file containing the assembly manifest, but a signature created using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) is stored in a reserved slot in the portable executable (PE) file containing the assembly manifest.</span></span> <span data-ttu-id="df591-130">Podpisywanie zestawu za pomocą [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md) można używać (z lub bez silnej nazwy) Jeśli już masz hierarchia zaufania, który korzysta[SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md) wygenerowany podpisów lub gdy zasady używa tylko część klucza i nie sprawdza łańcuch zaufania.</span><span class="sxs-lookup"><span data-stu-id="df591-130">Signing of an assembly using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) can be used (with or without a strong name) when you already have a trust hierarchy that relies on[SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) generated signatures, or when your policy uses only the key portion and does not check a chain of trust.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="df591-131">Jeśli do zestawu ma być stosowana silna nazwa i podpis z narzędzia podpisywania, najpierw należy przypisać silną nazwę.</span><span class="sxs-lookup"><span data-stu-id="df591-131">When using both a strong name and a signing tool signature on an assembly, the strong name must be assigned first.</span></span>  
  
 <span data-ttu-id="df591-132">Środowisko uruchomieniowe języka wspólnego również dokonuje weryfikacji skrótu. Manifest zestawu zawiera listę wszystkich plików tworzących zestaw, a także skrót każdego pliku utworzony podczas kompilowania manifestu.</span><span class="sxs-lookup"><span data-stu-id="df591-132">The common language runtime also performs a hash verification; the assembly manifest contains a list of all files that make up the assembly, including a hash of each file as it existed when the manifest was built.</span></span> <span data-ttu-id="df591-133">Przy wczytywaniu każdego pliku jego wartość jest skracana i porównywana z wartością skrótu przechowywaną w manifeście.</span><span class="sxs-lookup"><span data-stu-id="df591-133">As each file is loaded, its contents are hashed and compared with the hash value stored in the manifest.</span></span> <span data-ttu-id="df591-134">Jeśli skróty różnią się od siebie, zestaw nie jest wczytywany.</span><span class="sxs-lookup"><span data-stu-id="df591-134">If the two hashes do not match, the assembly fails to load.</span></span>  
  
 <span data-ttu-id="df591-135">Ponieważ silne nazewnictwo i podpisywanie przy użyciu [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md) zagwarantowania spójności, można utworzyć zasad zabezpieczenia dostępu kodu na tych dwóch metod świadectwa zestawu.</span><span class="sxs-lookup"><span data-stu-id="df591-135">Because strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity, you can base code access security policy on these two forms of assembly evidence.</span></span> <span data-ttu-id="df591-136">Silne nazewnictwo i podpisywanie przy użyciu [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md) zagwarantować integralności za pomocą podpisów cyfrowych i certyfikatów.</span><span class="sxs-lookup"><span data-stu-id="df591-136">Strong naming and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md) guarantee integrity through digital signatures and certificates.</span></span> <span data-ttu-id="df591-137">Te technologie wymienionych — skrótów weryfikacji, silne nazwy i podpisywanie przy użyciu [SignTool.exe (narzędzie podpisu)](../../../docs/framework/tools/signtool-exe.md)— działają razem, upewnij się, że zestaw nie zostały zmienione w dowolny sposób.</span><span class="sxs-lookup"><span data-stu-id="df591-137">All the technologies mentioned—hash verification, strong naming, and signing using [SignTool.exe (Sign Tool)](../../../docs/framework/tools/signtool-exe.md)—work together to ensure that the assembly has not been altered in any way.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="df591-138">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="df591-138">See Also</span></span>  
 [<span data-ttu-id="df591-139">Zestawy o silnych nazwach</span><span class="sxs-lookup"><span data-stu-id="df591-139">Strong-Named Assemblies</span></span>](../../../docs/framework/app-domains/strong-named-assemblies.md)  
 [<span data-ttu-id="df591-140">Zestawy w środowisku uruchomieniowym CLR</span><span class="sxs-lookup"><span data-stu-id="df591-140">Assemblies in the Common Language Runtime</span></span>](../../../docs/framework/app-domains/assemblies-in-the-common-language-runtime.md)  
 [<span data-ttu-id="df591-141">SignTool.exe (narzędzie podpisywania)</span><span class="sxs-lookup"><span data-stu-id="df591-141">SignTool.exe (Sign Tool)</span></span>](../../../docs/framework/tools/signtool-exe.md)
