---
title: Marshaling danych w wywołaniu platformy
ms.custom: ''
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: ''
ms.suite: ''
ms.technology:
- dotnet-clr
ms.tgt_pltfrm: ''
ms.topic: article
dev_langs:
- cpp
helpviewer_keywords:
- platform invoke, marshaling data
- data marshaling, platform invoke
- marshaling, platform invoke
ms.assetid: dc5c76cf-7b12-406f-b79c-d1a023ec245d
caps.latest.revision: ''
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.workload:
- dotnet
ms.openlocfilehash: 24ae6da0b32cf15ee9104bd10ba5fe6bb03a9763
ms.sourcegitcommit: c883637b41ee028786edceece4fa872939d2e64c
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/26/2018
---
# <a name="marshaling-data-with-platform-invoke"></a><span data-ttu-id="50e77-102">Marshaling danych w wywołaniu platformy</span><span class="sxs-lookup"><span data-stu-id="50e77-102">Marshaling Data with Platform Invoke</span></span>
<span data-ttu-id="50e77-103">Aby wywoływać funkcje wyeksportowane z biblioteki niezarządzane, aplikacji programu .NET Framework wymaga prototypu funkcji w kodzie zarządzanym, który reprezentuje niezarządzanej funkcji.</span><span class="sxs-lookup"><span data-stu-id="50e77-103">To call functions exported from an unmanaged library, a .NET Framework application requires a function prototype in managed code that represents the unmanaged function.</span></span> <span data-ttu-id="50e77-104">Aby utworzyć prototyp, który umożliwia platformie wywołania do organizowania danych prawidłowo, należy wykonać następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="50e77-104">To create a prototype that enables platform invoke to marshal data correctly, you must do the following:</span></span>  
  
-   <span data-ttu-id="50e77-105">Zastosuj <xref:System.Runtime.InteropServices.DllImportAttribute> atrybutu statycznej funkcji lub metody w kodzie zarządzanym.</span><span class="sxs-lookup"><span data-stu-id="50e77-105">Apply the <xref:System.Runtime.InteropServices.DllImportAttribute> attribute to the static function or method in managed code.</span></span>  
  
-   <span data-ttu-id="50e77-106">Zastąp typy zarządzanych danych dla typów danych niezarządzane.</span><span class="sxs-lookup"><span data-stu-id="50e77-106">Substitute managed data types for unmanaged data types.</span></span>  
  
 <span data-ttu-id="50e77-107">Dokumentacja dostarczona z niezarządzanej funkcji służy do utworzenia równoważne prototypu zarządzanych przez zastosowanie atrybutu o swoich pól opcjonalnych i podstawiając typy zarządzanych danych dla typów niezarządzane.</span><span class="sxs-lookup"><span data-stu-id="50e77-107">You can use the documentation supplied with an unmanaged function to construct an equivalent managed prototype by applying the attribute with its optional fields and substituting managed data types for unmanaged types.</span></span> <span data-ttu-id="50e77-108">Aby uzyskać instrukcje dotyczące sposobu stosowania **elementu DllImportAttribute**, zobacz [wykorzystywanie niezarządzanych funkcji DLL](../../../docs/framework/interop/consuming-unmanaged-dll-functions.md).</span><span class="sxs-lookup"><span data-stu-id="50e77-108">For instructions about how to apply the **DllImportAttribute**, see [Consuming Unmanaged DLL Functions](../../../docs/framework/interop/consuming-unmanaged-dll-functions.md).</span></span>  
  
 <span data-ttu-id="50e77-109">Ta sekcja zawiera przykłady, które pokazują, jak utworzyć prototypy funkcji zarządzanego przekazywanie argumentów i odbierania wartości zwracanych z funkcje wyeksportowane przez niezarządzanych bibliotek.</span><span class="sxs-lookup"><span data-stu-id="50e77-109">This section provides samples that demonstrate how to create managed function prototypes for passing arguments to and receiving return values from functions exported by unmanaged libraries.</span></span> <span data-ttu-id="50e77-110">Przykłady pokazują także kiedy należy używać <xref:System.Runtime.InteropServices.MarshalAsAttribute> atrybutu i <xref:System.Runtime.InteropServices.Marshal> klasy do jawnie organizowania danych.</span><span class="sxs-lookup"><span data-stu-id="50e77-110">The samples also demonstrate when to use the <xref:System.Runtime.InteropServices.MarshalAsAttribute> attribute and the <xref:System.Runtime.InteropServices.Marshal> class to explicitly marshal data.</span></span>  
  
## <a name="platform-invoke-data-types"></a><span data-ttu-id="50e77-111">Typy danych wywołanie platformy</span><span class="sxs-lookup"><span data-stu-id="50e77-111">Platform invoke data types</span></span>  
 <span data-ttu-id="50e77-112">W poniższej tabeli wymieniono typy danych używanych do interfejsu API systemu Win32 (wymienione w Wtypes.h) i funkcje w stylu języka C.</span><span class="sxs-lookup"><span data-stu-id="50e77-112">The following table lists data types used in the Win32 API (listed in Wtypes.h) and C-style functions.</span></span> <span data-ttu-id="50e77-113">Wiele niezarządzanych bibliotek zawiera funkcje, które są przekazywane jako parametry te typy danych i wartości zwracane.</span><span class="sxs-lookup"><span data-stu-id="50e77-113">Many unmanaged libraries contain functions that pass these data types as parameters and return values.</span></span> <span data-ttu-id="50e77-114">Trzecia kolumna zawiera listę odpowiedni typ wartości wbudowanych .NET Framework lub klasy używanej w kodzie zarządzanym.</span><span class="sxs-lookup"><span data-stu-id="50e77-114">The third column lists the corresponding .NET Framework built-in value type or class that you use in managed code.</span></span> <span data-ttu-id="50e77-115">W niektórych przypadkach można zastąpić typu tego samego rozmiaru dla typu wymienione w tabeli.</span><span class="sxs-lookup"><span data-stu-id="50e77-115">In some cases, you can substitute a type of the same size for the type listed in the table.</span></span>  
  
|<span data-ttu-id="50e77-116">Typ niezarządzany w Wtypes.h</span><span class="sxs-lookup"><span data-stu-id="50e77-116">Unmanaged type in Wtypes.h</span></span>|<span data-ttu-id="50e77-117">Niezarządzany typ języka C</span><span class="sxs-lookup"><span data-stu-id="50e77-117">Unmanaged C language type</span></span>|<span data-ttu-id="50e77-118">Nazwa klasy zarządzane</span><span class="sxs-lookup"><span data-stu-id="50e77-118">Managed class name</span></span>|<span data-ttu-id="50e77-119">Opis</span><span class="sxs-lookup"><span data-stu-id="50e77-119">Description</span></span>|  
|--------------------------------|-------------------------------|------------------------|-----------------|  
|<span data-ttu-id="50e77-120">**DOJŚCIE**</span><span class="sxs-lookup"><span data-stu-id="50e77-120">**HANDLE**</span></span>|<span data-ttu-id="50e77-121">**Void\***</span><span class="sxs-lookup"><span data-stu-id="50e77-121">**void\***</span></span>|<xref:System.IntPtr?displayProperty=nameWithType>|<span data-ttu-id="50e77-122">32-bitowy na 32-bitowego systemu operacyjnego, 64-bitowy na 64-bitowych systemach operacyjnych Windows.</span><span class="sxs-lookup"><span data-stu-id="50e77-122">32 bits on 32-bit Windows operating systems, 64 bits on 64-bit Windows operating systems.</span></span>|  
|<span data-ttu-id="50e77-123">**BAJTÓW**</span><span class="sxs-lookup"><span data-stu-id="50e77-123">**BYTE**</span></span>|<span data-ttu-id="50e77-124">**char bez znaku**</span><span class="sxs-lookup"><span data-stu-id="50e77-124">**unsigned char**</span></span>|<xref:System.Byte?displayProperty=nameWithType>|<span data-ttu-id="50e77-125">8 bitów</span><span class="sxs-lookup"><span data-stu-id="50e77-125">8 bits</span></span>|  
|<span data-ttu-id="50e77-126">**KRÓTKI**</span><span class="sxs-lookup"><span data-stu-id="50e77-126">**SHORT**</span></span>|<span data-ttu-id="50e77-127">**short**</span><span class="sxs-lookup"><span data-stu-id="50e77-127">**short**</span></span>|<xref:System.Int16?displayProperty=nameWithType>|<span data-ttu-id="50e77-128">16 bitów</span><span class="sxs-lookup"><span data-stu-id="50e77-128">16 bits</span></span>|  
|<span data-ttu-id="50e77-129">**WORD**</span><span class="sxs-lookup"><span data-stu-id="50e77-129">**WORD**</span></span>|<span data-ttu-id="50e77-130">**short bez znaku**</span><span class="sxs-lookup"><span data-stu-id="50e77-130">**unsigned short**</span></span>|<xref:System.UInt16?displayProperty=nameWithType>|<span data-ttu-id="50e77-131">16 bitów</span><span class="sxs-lookup"><span data-stu-id="50e77-131">16 bits</span></span>|  
|<span data-ttu-id="50e77-132">**INT**</span><span class="sxs-lookup"><span data-stu-id="50e77-132">**INT**</span></span>|<span data-ttu-id="50e77-133">**int**</span><span class="sxs-lookup"><span data-stu-id="50e77-133">**int**</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="50e77-134">32-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-134">32 bits</span></span>|  
|<span data-ttu-id="50e77-135">**UINT**</span><span class="sxs-lookup"><span data-stu-id="50e77-135">**UINT**</span></span>|<span data-ttu-id="50e77-136">**unsigned int**</span><span class="sxs-lookup"><span data-stu-id="50e77-136">**unsigned int**</span></span>|<xref:System.UInt32?displayProperty=nameWithType>|<span data-ttu-id="50e77-137">32-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-137">32 bits</span></span>|  
|<span data-ttu-id="50e77-138">**DŁUGA**</span><span class="sxs-lookup"><span data-stu-id="50e77-138">**LONG**</span></span>|<span data-ttu-id="50e77-139">**long**</span><span class="sxs-lookup"><span data-stu-id="50e77-139">**long**</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="50e77-140">32-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-140">32 bits</span></span>|  
|<span data-ttu-id="50e77-141">**BOOL**</span><span class="sxs-lookup"><span data-stu-id="50e77-141">**BOOL**</span></span>|<span data-ttu-id="50e77-142">**long**</span><span class="sxs-lookup"><span data-stu-id="50e77-142">**long**</span></span>|<xref:System.Byte>|<span data-ttu-id="50e77-143">32-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-143">32 bits</span></span>|  
|<span data-ttu-id="50e77-144">**DWORD**</span><span class="sxs-lookup"><span data-stu-id="50e77-144">**DWORD**</span></span>|<span data-ttu-id="50e77-145">**unsigned long**</span><span class="sxs-lookup"><span data-stu-id="50e77-145">**unsigned long**</span></span>|<xref:System.UInt32?displayProperty=nameWithType>|<span data-ttu-id="50e77-146">32-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-146">32 bits</span></span>|  
|<span data-ttu-id="50e77-147">**ULONG**</span><span class="sxs-lookup"><span data-stu-id="50e77-147">**ULONG**</span></span>|<span data-ttu-id="50e77-148">**unsigned long**</span><span class="sxs-lookup"><span data-stu-id="50e77-148">**unsigned long**</span></span>|<xref:System.UInt32?displayProperty=nameWithType>|<span data-ttu-id="50e77-149">32-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-149">32 bits</span></span>|  
|<span data-ttu-id="50e77-150">**CHAR**</span><span class="sxs-lookup"><span data-stu-id="50e77-150">**CHAR**</span></span>|<span data-ttu-id="50e77-151">**char**</span><span class="sxs-lookup"><span data-stu-id="50e77-151">**char**</span></span>|<xref:System.Char?displayProperty=nameWithType>|<span data-ttu-id="50e77-152">Dekoracji z ANSI.</span><span class="sxs-lookup"><span data-stu-id="50e77-152">Decorate with ANSI.</span></span>|  
|<span data-ttu-id="50e77-153">**WCHAR**</span><span class="sxs-lookup"><span data-stu-id="50e77-153">**WCHAR**</span></span>|<span data-ttu-id="50e77-154">**wchar_t**</span><span class="sxs-lookup"><span data-stu-id="50e77-154">**wchar_t**</span></span>|<xref:System.Char?displayProperty=nameWithType>|<span data-ttu-id="50e77-155">Dekoracji ze standardem Unicode.</span><span class="sxs-lookup"><span data-stu-id="50e77-155">Decorate with Unicode.</span></span>|  
|<span data-ttu-id="50e77-156">**LPSTR**</span><span class="sxs-lookup"><span data-stu-id="50e77-156">**LPSTR**</span></span>|<span data-ttu-id="50e77-157">**char\***</span><span class="sxs-lookup"><span data-stu-id="50e77-157">**char\***</span></span>|<span data-ttu-id="50e77-158"><xref:System.String?displayProperty=nameWithType> lub <xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="50e77-158"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="50e77-159">Dekoracji z ANSI.</span><span class="sxs-lookup"><span data-stu-id="50e77-159">Decorate with ANSI.</span></span>|  
|<span data-ttu-id="50e77-160">**LPCSTR**</span><span class="sxs-lookup"><span data-stu-id="50e77-160">**LPCSTR**</span></span>|<span data-ttu-id="50e77-161">**Const char\***</span><span class="sxs-lookup"><span data-stu-id="50e77-161">**Const char\***</span></span>|<span data-ttu-id="50e77-162"><xref:System.String?displayProperty=nameWithType> lub <xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="50e77-162"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="50e77-163">Dekoracji z ANSI.</span><span class="sxs-lookup"><span data-stu-id="50e77-163">Decorate with ANSI.</span></span>|  
|<span data-ttu-id="50e77-164">**LPWSTR**</span><span class="sxs-lookup"><span data-stu-id="50e77-164">**LPWSTR**</span></span>|<span data-ttu-id="50e77-165">**wchar_t\***</span><span class="sxs-lookup"><span data-stu-id="50e77-165">**wchar_t\***</span></span>|<span data-ttu-id="50e77-166"><xref:System.String?displayProperty=nameWithType> lub <xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="50e77-166"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="50e77-167">Dekoracji ze standardem Unicode.</span><span class="sxs-lookup"><span data-stu-id="50e77-167">Decorate with Unicode.</span></span>|  
|<span data-ttu-id="50e77-168">**LPCWSTR**</span><span class="sxs-lookup"><span data-stu-id="50e77-168">**LPCWSTR**</span></span>|<span data-ttu-id="50e77-169">**Const wchar_t\***</span><span class="sxs-lookup"><span data-stu-id="50e77-169">**Const wchar_t\***</span></span>|<span data-ttu-id="50e77-170"><xref:System.String?displayProperty=nameWithType> lub <xref:System.Text.StringBuilder?displayProperty=nameWithType></span><span class="sxs-lookup"><span data-stu-id="50e77-170"><xref:System.String?displayProperty=nameWithType> or <xref:System.Text.StringBuilder?displayProperty=nameWithType></span></span>|<span data-ttu-id="50e77-171">Dekoracji ze standardem Unicode.</span><span class="sxs-lookup"><span data-stu-id="50e77-171">Decorate with Unicode.</span></span>|  
|<span data-ttu-id="50e77-172">**FLOAT**</span><span class="sxs-lookup"><span data-stu-id="50e77-172">**FLOAT**</span></span>|<span data-ttu-id="50e77-173">**Float**</span><span class="sxs-lookup"><span data-stu-id="50e77-173">**Float**</span></span>|<xref:System.Single?displayProperty=nameWithType>|<span data-ttu-id="50e77-174">32-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-174">32 bits</span></span>|  
|<span data-ttu-id="50e77-175">**DOUBLE**</span><span class="sxs-lookup"><span data-stu-id="50e77-175">**DOUBLE**</span></span>|<span data-ttu-id="50e77-176">**O podwójnej precyzji**</span><span class="sxs-lookup"><span data-stu-id="50e77-176">**Double**</span></span>|<xref:System.Double?displayProperty=nameWithType>|<span data-ttu-id="50e77-177">64-bitowy</span><span class="sxs-lookup"><span data-stu-id="50e77-177">64 bits</span></span>|  
  
 <span data-ttu-id="50e77-178">Dla odpowiednich typów w [!INCLUDE[vbprvblong](../../../includes/vbprvblong-md.md)], C# i C++, zobacz [wprowadzenie do Biblioteka klas programu .NET Framework](../../../docs/standard/class-library-overview.md).</span><span class="sxs-lookup"><span data-stu-id="50e77-178">For corresponding types in [!INCLUDE[vbprvblong](../../../includes/vbprvblong-md.md)], C#, and C++, see the [Introduction to the .NET Framework Class Library](../../../docs/standard/class-library-overview.md).</span></span>  
  
## <a name="pinvokelibdll"></a><span data-ttu-id="50e77-179">PinvokeLib.dll</span><span class="sxs-lookup"><span data-stu-id="50e77-179">PinvokeLib.dll</span></span>  
 <span data-ttu-id="50e77-180">Poniższy kod definiuje dostępne Pinvoke.dll funkcje biblioteki.</span><span class="sxs-lookup"><span data-stu-id="50e77-180">The following code defines the library functions provided by Pinvoke.dll.</span></span> <span data-ttu-id="50e77-181">Wiele próbek opisane w tej sekcji wywołania tej biblioteki.</span><span class="sxs-lookup"><span data-stu-id="50e77-181">Many samples described in this section call this library.</span></span>  
  
### <a name="example"></a><span data-ttu-id="50e77-182">Przykład</span><span class="sxs-lookup"><span data-stu-id="50e77-182">Example</span></span>  
 [!code-cpp[PInvokeLib#1](../../../samples/snippets/cpp/VS_Snippets_CLR/pinvokelib/cpp/pinvokelib.cpp#1)]  
  
 [!code-cpp[PInvokeLib#2](../../../samples/snippets/cpp/VS_Snippets_CLR/pinvokelib/cpp/pinvokelib.h#2)]
