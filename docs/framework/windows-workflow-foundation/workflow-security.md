---
title: Zabezpieczenia przepływu pracy
ms.date: 03/30/2017
helpviewer_keywords:
- programming [WF], workflow security
ms.assetid: d712a566-f435-44c0-b8c0-49298e84b114
ms.openlocfilehash: 2a9b26f8da7616480f69a6c4580b8d351833c9ee
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/20/2020
ms.locfileid: "81646321"
---
# <a name="workflow-security"></a><span data-ttu-id="08b0b-102">Zabezpieczenia przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="08b0b-102">Workflow Security</span></span>
<span data-ttu-id="08b0b-103">Windows Workflow Foundation (WF) jest zintegrowany z kilkoma różnymi technologiami, takimi jak Microsoft SQL Server i Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="08b0b-103">Windows Workflow Foundation (WF) is integrated with several different technologies, such as Microsoft SQL Server and Windows Communication Foundation (WCF).</span></span> <span data-ttu-id="08b0b-104">Interakcja z tymi technologiami może powodować problemy z zabezpieczeniami w przepływie pracy, jeśli zostanie wykonana nieprawidłowo.</span><span class="sxs-lookup"><span data-stu-id="08b0b-104">Interacting with these technologies may introduce security issues into your workflow if done improperly.</span></span>

## <a name="persistence-security-concerns"></a><span data-ttu-id="08b0b-105">Obawy dotyczące bezpieczeństwa trwałości</span><span class="sxs-lookup"><span data-stu-id="08b0b-105">Persistence Security Concerns</span></span>

1. <span data-ttu-id="08b0b-106">Przepływy pracy, <xref:System.Activities.Statements.Delay> które używają działania i trwałości muszą być ponownie aktywowane przez usługę.</span><span class="sxs-lookup"><span data-stu-id="08b0b-106">Workflows that use a <xref:System.Activities.Statements.Delay> activity and persistence need to be reactivated by a service.</span></span> <span data-ttu-id="08b0b-107">Usługa AppFabric systemu Windows używa usługi zarządzania przepływem pracy (WMS) do ponownego uaktywniania przepływów pracy przy użyciu wygasłych czasomierzy.</span><span class="sxs-lookup"><span data-stu-id="08b0b-107">Windows AppFabric uses the Workflow Management Service (WMS) to reactivate workflows with expired timers.</span></span> <span data-ttu-id="08b0b-108">Program WMS <xref:System.ServiceModel.WorkflowServiceHost> tworzy hosta ponownie uaktywnionego przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="08b0b-108">WMS creates a <xref:System.ServiceModel.WorkflowServiceHost> to host the reactivated workflow.</span></span> <span data-ttu-id="08b0b-109">Jeśli usługa WMS zostanie zatrzymana, utrwalone przepływy pracy nie zostaną ponownie aktywowane po wygaśnięciu czasomierzy.</span><span class="sxs-lookup"><span data-stu-id="08b0b-109">If the WMS service is stopped, persisted workflows will not be reactivated when their timers expire.</span></span>

2. <span data-ttu-id="08b0b-110">Dostęp do trwałego instancing powinny być chronione przed złośliwymi jednostkami zewnętrznymi domeny aplikacji.</span><span class="sxs-lookup"><span data-stu-id="08b0b-110">Access to durable instancing should be protected against malicious entities external to the application domain.</span></span> <span data-ttu-id="08b0b-111">Ponadto deweloperzy powinni upewnić się, że złośliwy kod nie może być wykonywany w tej samej domenie aplikacji, co kod trwały.</span><span class="sxs-lookup"><span data-stu-id="08b0b-111">In addition, developers should ensure that malicious code can't be executed in the same application domain as the durable instancing code.</span></span>

3. <span data-ttu-id="08b0b-112">Trwałe instancing nie powinny być uruchamiane z podwyższonym poziomem uprawnień (Administrator).</span><span class="sxs-lookup"><span data-stu-id="08b0b-112">Durable instancing should not be run with elevated (Administrator) permissions.</span></span>

4. <span data-ttu-id="08b0b-113">Dane przetwarzane poza domeną aplikacji powinny być chronione.</span><span class="sxs-lookup"><span data-stu-id="08b0b-113">Data being processed outside the application domain should be protected.</span></span>

5. <span data-ttu-id="08b0b-114">Aplikacje, które wymagają izolacji zabezpieczeń nie powinny współużytkuje tego samego wystąpienia abstrakcji schematu.</span><span class="sxs-lookup"><span data-stu-id="08b0b-114">Applications that require security isolation should not share the same instance of the schema abstraction.</span></span> <span data-ttu-id="08b0b-115">Takie aplikacje powinny używać różnych dostawców magazynu lub dostawców magazynu skonfigurowanych do używania różnych wystąpienia magazynu.</span><span class="sxs-lookup"><span data-stu-id="08b0b-115">Such applications should use different store providers, or store providers configured to use different store instantiations.</span></span>

## <a name="sql-server-security-concerns"></a><span data-ttu-id="08b0b-116">Problemy z zabezpieczeniami programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="08b0b-116">SQL Server Security Concerns</span></span>

- <span data-ttu-id="08b0b-117">Gdy używana jest duża liczba działań podrzędnych, lokalizacji, zakładek, rozszerzeń hosta lub zakresów lub gdy używane są zakładki z bardzo dużymi ładunkami, pamięć może zostać wyczerpana lub można przydzielić nadmierne ilości miejsca w bazie danych podczas trwałości.</span><span class="sxs-lookup"><span data-stu-id="08b0b-117">When large numbers of child activities, locations, bookmarks, host extensions, or scopes are used, or when bookmarks with very large payloads are used, memory can be exhausted, or undue amounts of database space can be allocated during persistence.</span></span> <span data-ttu-id="08b0b-118">Można to złagodzić przy użyciu zabezpieczeń na poziomie obiektu i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="08b0b-118">This can be mitigated by using object-level and database-level security.</span></span>

- <span data-ttu-id="08b0b-119">Podczas <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>korzystania magazyn wystąpień musi być zabezpieczony.</span><span class="sxs-lookup"><span data-stu-id="08b0b-119">When using <xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore>, the instance store must be secured.</span></span>

- <span data-ttu-id="08b0b-120">Poufne dane w magazynie wystąpień powinny być szyfrowane.</span><span class="sxs-lookup"><span data-stu-id="08b0b-120">Sensitive data in the instance store should be encrypted.</span></span> <span data-ttu-id="08b0b-121">Aby uzyskać więcej informacji, zobacz [SQL Server Encryption](/sql/relational-databases/security/encryption/sql-server-encryption).</span><span class="sxs-lookup"><span data-stu-id="08b0b-121">For more information, see [SQL Server Encryption](/sql/relational-databases/security/encryption/sql-server-encryption).</span></span>

- <span data-ttu-id="08b0b-122">Ponieważ parametry połączenia bazy danych są często zawarte w pliku konfiguracyjnym, zabezpieczenia na poziomie Windows (ACL) powinny być używane w celu zapewnienia, że plik konfiguracyjny (Web.Config zwykle) jest bezpieczny, a informacje o logowaniu i haśle nie są zawarte w ciągu połączenia.</span><span class="sxs-lookup"><span data-stu-id="08b0b-122">Since the database connection string is often included in a configuration file, windows-level security (ACL) should be used to ensure that the configuration file (Web.Config usually) is secure, and that login and password information are not included in the connection string.</span></span> <span data-ttu-id="08b0b-123">Zamiast tego należy używać uwierzytelniania systemu Windows między bazą danych a serwerem sieci web.</span><span class="sxs-lookup"><span data-stu-id="08b0b-123">Windows authentication should be used between the database and the web server instead.</span></span>

## <a name="considerations-for-workflowservicehost"></a><span data-ttu-id="08b0b-124">Zagadnienia dotyczące usługi WorkflowServiceHost</span><span class="sxs-lookup"><span data-stu-id="08b0b-124">Considerations for WorkflowServiceHost</span></span>

- <span data-ttu-id="08b0b-125">Punkty końcowe programu Windows Communication Foundation (WCF) używane w przepływach pracy powinny być zabezpieczone.</span><span class="sxs-lookup"><span data-stu-id="08b0b-125">Windows Communication Foundation (WCF) endpoints used in workflows should be secured.</span></span> <span data-ttu-id="08b0b-126">Aby uzyskać więcej informacji, zobacz [Omówienie zabezpieczeń WCF](../wcf/feature-details/security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="08b0b-126">For more information, see [WCF Security Overview](../wcf/feature-details/security-overview.md).</span></span>

- <span data-ttu-id="08b0b-127">Autoryzację na poziomie hosta <xref:System.ServiceModel.ServiceAuthorizationManager>można zaimplementować za pomocą programu .</span><span class="sxs-lookup"><span data-stu-id="08b0b-127">Host-level authorization can be implemented by using <xref:System.ServiceModel.ServiceAuthorizationManager>.</span></span> <span data-ttu-id="08b0b-128">Zobacz Jak: Aby uzyskać szczegółowe [informacje, zobacz Jak: Tworzenie menedżera autoryzacji niestandardowej dla usługi.](../wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md)</span><span class="sxs-lookup"><span data-stu-id="08b0b-128">See [How To: Create a Custom Authorization Manager for a Service](../wcf/extending/how-to-create-a-custom-authorization-manager-for-a-service.md) for details.</span></span>

- <span data-ttu-id="08b0b-129">ServiceSecurityContext dla wiadomości przychodzącej jest również dostępny z wewnątrz przepływu pracy przez dostęp OperationContext.</span><span class="sxs-lookup"><span data-stu-id="08b0b-129">The ServiceSecurityContext for the incoming message is also available from within workflow by accessing OperationContext.</span></span>

## <a name="wf-security-pack-ctp"></a><span data-ttu-id="08b0b-130">Pakiet zabezpieczeń WF CTP</span><span class="sxs-lookup"><span data-stu-id="08b0b-130">WF Security Pack CTP</span></span>
 <span data-ttu-id="08b0b-131">Microsoft WF Security Pack community technology preview (CTP) 1 to zestaw działań i ich implementacji w oparciu o [Windows Workflow Foundation](index.md) w [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) i [Windows Identity Foundation (WIF)](https://docs.microsoft.com/previous-versions/dotnet/framework/security/index).</span><span class="sxs-lookup"><span data-stu-id="08b0b-131">The Microsoft WF Security Pack community technology preview (CTP) 1 is a set of activities and their implementation based on [Windows Workflow Foundation](index.md) in [.NET Framework 4](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/w0x726c2(v=vs.100)) (WF 4) and [Windows Identity Foundation (WIF)](https://docs.microsoft.com/previous-versions/dotnet/framework/security/index).</span></span> <span data-ttu-id="08b0b-132">Pakiet zabezpieczeń Microsoft WF CTP 1 zawiera zarówno działania, jak i ich projektantów, które ilustrują, jak łatwo włączyć różne scenariusze związane z zabezpieczeniami przy użyciu przepływu pracy, w tym:</span><span class="sxs-lookup"><span data-stu-id="08b0b-132">The Microsoft WF Security Pack CTP 1 contains both activities and their designers which illustrate how to easily enable various security-related scenarios using workflow, including:</span></span>

1. <span data-ttu-id="08b0b-133">Personifikowanie tożsamości klienta w przepływie pracy</span><span class="sxs-lookup"><span data-stu-id="08b0b-133">Impersonating a client identity in the workflow</span></span>

2. <span data-ttu-id="08b0b-134">Autoryzacja przepływu w pracy, taka jak PrincipalPermission i sprawdzanie poprawności oświadczeń</span><span class="sxs-lookup"><span data-stu-id="08b0b-134">In-workflow authorization, such as PrincipalPermission and validation of Claims</span></span>

3. <span data-ttu-id="08b0b-135">Uwierzytelnione wiadomości przy użyciu clientcredentials określonych w przepływie pracy, takich jak nazwa użytkownika/hasło lub token pobrany z usługi tokenu zabezpieczającego (STS)</span><span class="sxs-lookup"><span data-stu-id="08b0b-135">Authenticated messaging using ClientCredentials specified in the workflow, such as username/password or a token retrieved from a Security Token Service (STS)</span></span>

4. <span data-ttu-id="08b0b-136">Przesyłanie tokenu zabezpieczającego klienta do usługi zaplecza (delegowanie oparte na oświadczeniach) przy użyciu actas zaufania WS</span><span class="sxs-lookup"><span data-stu-id="08b0b-136">Flowing a client security token to a back-end service (claims-based delegation) using WS-Trust ActAs</span></span>

<span data-ttu-id="08b0b-137">Aby uzyskać więcej informacji i pobrać pakiet WF Security Pack CTP, zobacz: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span><span class="sxs-lookup"><span data-stu-id="08b0b-137">For more information and to download the WF Security Pack CTP, see: [WF Security Pack CTP](https://archive.codeplex.com/?p=wf)</span></span>
