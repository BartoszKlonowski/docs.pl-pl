---
title: Magazyny wystąpień
ms.date: 03/30/2017
ms.assetid: f2629668-0923-4987-b943-67477131c1e0
ms.openlocfilehash: 69b50942c36406bd29147d243e0501b8048d56dc
ms.sourcegitcommit: 32a575bf4adccc901f00e264f92b759ced633379
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/04/2019
ms.locfileid: "74802560"
---
# <a name="instance-stores"></a><span data-ttu-id="70b9b-102">Magazyny wystąpień</span><span class="sxs-lookup"><span data-stu-id="70b9b-102">Instance Stores</span></span>
<span data-ttu-id="70b9b-103">Magazyn wystąpień jest logicznym kontenerem wystąpień.</span><span class="sxs-lookup"><span data-stu-id="70b9b-103">An instance store is a logical container of instances.</span></span> <span data-ttu-id="70b9b-104">Miejsce, w którym są przechowywane dane wystąpienia i metadane.</span><span class="sxs-lookup"><span data-stu-id="70b9b-104">It is the place where the instance data and metadata is stored.</span></span> <span data-ttu-id="70b9b-105">Magazyn wystąpień nie implikuje dedykowanego magazynu fizycznego.</span><span class="sxs-lookup"><span data-stu-id="70b9b-105">An instance store does not imply dedicated physical storage.</span></span> <span data-ttu-id="70b9b-106">Magazyn wystąpień może zawierać trwałe informacje w bazie danych SQL Server lub nietrwałe informacje o stanie w pamięci.</span><span class="sxs-lookup"><span data-stu-id="70b9b-106">An instance store could contain durable information in a SQL Server database or non-durable state information in a memory.</span></span> <span data-ttu-id="70b9b-107">[!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] jest dostarczany z magazynem wystąpień przepływu pracy SQL, który jest konkretną implementacją magazynu wystąpień, dzięki czemu przepływy pracy mogą utrwalać dane wystąpienia i metadane w bazie danych SQL Server 2005 lub SQL Server 2008.</span><span class="sxs-lookup"><span data-stu-id="70b9b-107">The [!INCLUDE[netfx_current_long](../../../includes/netfx-current-long-md.md)] ships with the SQL Workflow Instance Store, which is a concrete implementation of an instance store that allows workflows to persist instance data and metadata into a SQL Server 2005 or SQL Server 2008 database.</span></span> <span data-ttu-id="70b9b-108">Ponadto program Windows Server App Fabric oferuje konkretną implementację magazynu wystąpień.</span><span class="sxs-lookup"><span data-stu-id="70b9b-108">In addition Windows Server App Fabric also provides a concrete implementation of an instance store.</span></span> <span data-ttu-id="70b9b-109">Aby uzyskać więcej informacji, zobacz temat [Magazyn wystąpień, zapytanie i dostawcy kontroli usługi Windows Server App Fabric](https://docs.microsoft.com/previous-versions/appfabric/ff383417(v=azure.10)).</span><span class="sxs-lookup"><span data-stu-id="70b9b-109">For more information, see [Windows Server App Fabric Instance Store, Query, and Control Providers](https://docs.microsoft.com/previous-versions/appfabric/ff383417(v=azure.10)).</span></span>  
  
 <span data-ttu-id="70b9b-110">Trwałość interfejsu API to interfejs między hostem i magazynem wystąpień, który umożliwia hostowi wysyłanie żądań poleceń (na przykład <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> i <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) do magazynu wystąpień.</span><span class="sxs-lookup"><span data-stu-id="70b9b-110">The persistence API is the interface between a host and an instance store that allows the host to send command requests (for example, <xref:System.Activities.DurableInstancing.LoadWorkflowCommand> and <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>) to the instance store.</span></span> <span data-ttu-id="70b9b-111">Konkretna implementacja tego interfejsu API jest nazywana dostawcą trwałości.</span><span class="sxs-lookup"><span data-stu-id="70b9b-111">The concrete implementation of this API is called a persistence provider.</span></span> <span data-ttu-id="70b9b-112">Dostawca trwałości odbiera żądania od hosta i modyfikuje magazyn wystąpień.</span><span class="sxs-lookup"><span data-stu-id="70b9b-112">The persistence provider receives requests from a host and modifies the instance store.</span></span>  
  
 <span data-ttu-id="70b9b-113">Hosty i magazyny wystąpień są podłączane, dzięki czemu host może być używany z wieloma magazynami wystąpień, a magazyn wystąpień może być używany z wieloma hostami.</span><span class="sxs-lookup"><span data-stu-id="70b9b-113">Hosts and instance stores are pluggable so that a host can be used with many instance stores, and an instance store can be used with many hosts.</span></span> <span data-ttu-id="70b9b-114">Magazyn wystąpień jest zwykle zoptymalizowany pod kątem wzorców użycia określonego hosta, chociaż magazyn wystąpień i Host mogą się rozwijać w niezależnych cyklach życia.</span><span class="sxs-lookup"><span data-stu-id="70b9b-114">An instance store is typically optimized for the usage patterns of a particular host, although the instance store and host may evolve on independent life cycles.</span></span> <span data-ttu-id="70b9b-115">Na przykład obiekt **WorkflowServiceHost** i **obiekt SqlWorkflowInstanceStore** są zaprojektowane tak, aby dobrze współpracowały ze sobą.</span><span class="sxs-lookup"><span data-stu-id="70b9b-115">For example, the **WorkflowServiceHost** and the **SqlWorkflowInstanceStore** are designed to work well together.</span></span> <span data-ttu-id="70b9b-116">Możesz utworzyć własny magazyn wystąpień, aby zachować dane i metadane wystąpień usługi przepływu pracy i użyć tego magazynu wystąpień z obiektem **WorkflowServiceHost**.</span><span class="sxs-lookup"><span data-stu-id="70b9b-116">You can create your own instance store to persist data and metadata of workflow service instances and use that instance store with the **WorkflowServiceHost**.</span></span> <span data-ttu-id="70b9b-117">Można na przykład utworzyć element OracleWorkflowInstanceStore, który pozwala przepływom pracy utrzymywać informacje w bazie danych Oracle, zamiast zapisywać je w bazie danych SQL Server.</span><span class="sxs-lookup"><span data-stu-id="70b9b-117">For example, you can create an OracleWorkflowInstanceStore that lets workflows persist information into an Oracle database instead of saving them into a SQL Server database.</span></span>  
  
 <span data-ttu-id="70b9b-118">Często hosty są rozszerzone o dodatkowe funkcje, które modyfikują utrwalone obiekty.</span><span class="sxs-lookup"><span data-stu-id="70b9b-118">It is common for hosts to be extended with additional functionality that modifies the persisted objects.</span></span> <span data-ttu-id="70b9b-119">Na przykład system trwałości wystąpienia może mieć hosta przepływu pracy, rozszerzenie, które obsługuje operację "wstrzymania" i magazyn wystąpień SQL.</span><span class="sxs-lookup"><span data-stu-id="70b9b-119">For example, an instance persistence system may have a workflow host, an extension that supports the "Suspend" operation, and an SQL instance store.</span></span>  <span data-ttu-id="70b9b-120">Host przepływu pracy może wysyłać standardowe polecenie, takie jak Save lub Load, w celu zapisania lub załadowania przepływu pracy z magazynu wystąpień lub zapisania przepływu pracy w magazynie wystąpień.</span><span class="sxs-lookup"><span data-stu-id="70b9b-120">The workflow host might send a standard command such as Save or Load to save or load a workflow from an instance store or to save a workflow into an instance store.</span></span> <span data-ttu-id="70b9b-121">Rozszerzenie Suspend może dodać dodatkową semantykę do poleceń służących do zapisywania i ładowania wystąpień przepływu pracy, aby nie można było załadować wstrzymanego wystąpienia przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="70b9b-121">The suspend extension might add additional semantics to the commands for saving and loading workflow instances so that a suspended workflow instance cannot be loaded.</span></span> <span data-ttu-id="70b9b-122">Dostawca trwałości dla magazynu wystąpień SQL zawiera informacje o poleceniach służących do zapisywania i ładowania wystąpień przepływu pracy oraz implementuje polecenia, wywołując odpowiednie procedury składowane, które zmieniają tabele obiektów trwałych w bazie danych SQL Server.</span><span class="sxs-lookup"><span data-stu-id="70b9b-122">The persistence provider for the SQL instance store understands the commands for saving and loading workflow instances, and implements the commands by calling appropriate stored procedures that change the tables of persistent objects in an SQL Server database.</span></span>  
  
 <span data-ttu-id="70b9b-123">Host działa jako właściciel wystąpienia w magazynie wystąpień.</span><span class="sxs-lookup"><span data-stu-id="70b9b-123">A host acts as an instance owner within an instance store.</span></span> <span data-ttu-id="70b9b-124">Host może działać jako więcej niż jeden właściciel wystąpienia z więcej niż jednym magazynem wystąpień w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="70b9b-124">A host may act as more than one instance owner with more than one instance store at the same time.</span></span> <span data-ttu-id="70b9b-125">Host zawiera identyfikatory GUID dla kluczy wystąpienia skojarzonych z wystąpieniami.</span><span class="sxs-lookup"><span data-stu-id="70b9b-125">The host provides GUIDs for instance keys associated with the instances.</span></span> <span data-ttu-id="70b9b-126">Klucz wystąpienia jest unikatowym aliasem identyfikującym wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="70b9b-126">An instance key is a unique alias that identifies an instance.</span></span> <span data-ttu-id="70b9b-127">System trwałości tworzy, aktualizuje i usuwa informacje o właścicielu wystąpienia w miarę wykonywania poleceń zleconych przez hosty.</span><span class="sxs-lookup"><span data-stu-id="70b9b-127">The persistence system creates, updates, and deletes instance owner information as it executes commands requested by hosts.</span></span>  
  
 <span data-ttu-id="70b9b-128">Poniższa lista zawiera ważne czynności związane z interakcją hosta z magazynem wystąpień:</span><span class="sxs-lookup"><span data-stu-id="70b9b-128">The following list contains the important steps involved in the host’s interaction with the instance store:</span></span>  
  
1. <span data-ttu-id="70b9b-129">Uzyskaj obiekt **InstanceStore** od dostawcy trwałości.</span><span class="sxs-lookup"><span data-stu-id="70b9b-129">Obtain an **InstanceStore** from a persistence provider.</span></span>  

2. <span data-ttu-id="70b9b-130">Uzyskaj dojście do wystąpienia, wywołując metodę <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> na **obiekcie InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="70b9b-130">Obtain the handle to an instance by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.CreateInstanceHandle%2A> method on the **InstanceStore**.</span></span>  
  
3. <span data-ttu-id="70b9b-131">Wywoływanie poleceń względem dojścia wystąpienia, wywołując metodę <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> na **obiekcie InstanceStore**.</span><span class="sxs-lookup"><span data-stu-id="70b9b-131">Invoke commands against the instance handle by calling the <xref:System.Runtime.DurableInstancing.InstanceStore.Execute%2A> method on the **InstanceStore**.</span></span>  
  
4. <span data-ttu-id="70b9b-132">Sprawdź <xref:System.Runtime.DurableInstancing.InstanceView> zwrócone przez **obiektu InstanceStore. Execute** , aby określić wyniki poleceń.</span><span class="sxs-lookup"><span data-stu-id="70b9b-132">Examine the <xref:System.Runtime.DurableInstancing.InstanceView> returned by **InstanceStore.Execute** to determine the results of the commands.</span></span>
