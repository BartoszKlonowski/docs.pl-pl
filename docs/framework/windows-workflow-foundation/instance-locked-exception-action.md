---
title: Działanie zablokowanego wyjątku wystąpienia
ms.date: 03/30/2017
ms.assetid: 164a5419-315c-4987-ad72-54cbdb88d402
ms.openlocfilehash: d8fd2d1299a8563ae41b098c1cfb7a0ba30bb8f8
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/28/2019
ms.locfileid: "64662983"
---
# <a name="instance-locked-exception-action"></a>Działanie zablokowanego wyjątku wystąpienia
<xref:System.Activities.DurableInstancing.SqlWorkflowInstanceStore.InstanceLockedExceptionAction%2A> Właściwość Store wystąpienia przepływu pracy SQL pozwala określić, jaka akcja dostawcy stanów trwałych programu SQL powinna wykonać, gdy odbierze <xref:System.Runtime.DurableInstancing.InstanceLockedException>. Dostawcy stanów trwałych odbiera tego wyjątku, gdy próbuje zablokować wystąpienie usługi przepływu pracy, który jest zablokowany przez inny host usługi. Wartości dla tej właściwości to <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.NoRetry>, <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.BasicRetry>, i <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.AggressiveRetry>. Wartość domyślna to <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.NoRetry>. Na poniższej liście opisano trzy opcje:  
  
- <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.NoRetry>. Host usługi nie próbuje zablokować wystąpienie usługi przepływu pracy i przekazuje <xref:System.Runtime.DurableInstancing.InstanceLockedException> do obiektu wywołującego.  Jeśli przepływ pracy pozostaje w pamięci przez okres dłuższy niż 60 sekund, użyj <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.NoRetry> jako ponownych prób. Wartość domyślna to <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.NoRetry>.  
  
- <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.BasicRetry>. Host usługi reattempts do blokowania wystąpienie usługi przepływu pracy przy użyciu liniowego interwał między ponownymi próbami i przekazuje <xref:System.Runtime.DurableInstancing.InstanceLockedException> do obiektu wywołującego na końcu sekwencji. Jeśli przepływ pracy zostanie pozostaje w pamięci w przybliżeniu od 5 do 60 sekund, a nadejścia w partiach, gdzie jest bardziej prawdopodobne, aby komunikaty są wysyłane do tego samego wystąpienia na tym samym hoście można przetworzyć wszystkie komunikaty przed zwolnieniem przepływu pracy, użyj <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.BasicRetry> do osiągnięcia najlepszych opóźnienie bez marnowania zasobów.  
  
- <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.AggressiveRetry>. Host usługi reattempts do blokowania wystąpienie usługi przepływu pracy z interwałem wykładniczego wycofywania między ponownymi próbami i przekazuje wyjątek do obiektu wywołującego na końcu sekwencji. Jeśli przepływ pracy pozostaje w pamięci dla bardzo krótkim czasie (mniej niż 5 sekund) lub sieci Web farmy jest duży i nie jest bardzo duże ryzyko kolejną wiadomość dostarczona do tego samego hosta, należy użyć <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.AggressiveRetry> do osiągnięcia najlepszych opóźnienia.  
  
 Funkcja akcji wyjątek zablokowane wystąpienie obsługuje następujące scenariusze. We wszystkich scenariuszach, jeśli ustawiono właściwość instanceLockedExceptionAction SqlWorkflowInstanceStore <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.BasicRetry> lub <xref:System.Activities.DurableInstancing.InstanceLockedExceptionAction.AggressiveRetry>, sposób niewidoczny dla użytkownika można uzyskać blokady na wystąpieniach okresowo ponawia próbę hosta.  
  
1. **Włączanie bezpiecznego zamknięcia i nachodzące odtwarzania domen aplikacji.** Załóżmy, że **AppDomain** z hostem usługi uruchamiania wystąpień usługi przepływu pracy jest w trakcie odtwarzania i nowej **AppDomain** zostaną podwyższone do obsługi nowych żądań równolegle równocześnie z  **Obiekt AppDomain** jest obniżona bezpiecznie. Zamknięcie czeka, aż wystąpień usługi przepływu pracy jest bezczynny, a następnie będzie się powtarzać i zwalnia wystąpienia. Wszystkie próby ustalenia przez hosty w nowym **AppDomain** do blokowania wystąpienie spowoduje, że <xref:System.Runtime.DurableInstancing.InstanceLockedException>.  
  
2. **Skalowanych w poziomie na trwałe przepływy pracy jednorodnych farmie serwerów.** Załóżmy, że węzeł farmy serwerów, na którym działa wystąpienie przepływu pracy awarie i hosta przepływu pracy nie można usunąć blokady w wystąpieniu, w którym jest uruchomiona. Gdy hosta usługi uruchomionych w innym węźle farmy odbiera wiadomości dla tego wystąpienia przepływu pracy, próby uzyskania blokady w tych wystąpieniach, będzie ona otrzymywać <xref:System.Runtime.DurableInstancing.InstanceLockedException>. Blokady wygaśnie po pewnym czasie, ponieważ hosta, który miał odnowić blokady już nie istnieje.  
  
     **Skalowanych w poziomie na trwałe przepływy pracy jednorodnych farmie serwerów.**  Załóżmy, że chcesz skalować w poziomie trwałość przepływu pracy przy użyciu wielu hostach za modułem równoważenia obciążenia Sieciowego (moduł równoważenia obciążenia sieciowego), hosta przepływu pracy, uruchomiony w jednym z węzłów farmy ładuje wystąpienie przepływu pracy i przetwarza komunikat i następny komunikat do wystąpienia jest kierowany do host, który jest uruchomiony w innym węźle, ponieważ Równoważenie obciążenia Sieciowego nie ma algorytm routingu w celu dostarczenia komunikatu do hosta, który jest już uruchomione wystąpienie. Po odebraniu wiadomości, drugi host próbuje załadować wystąpienia przepływu pracy i odbiera <xref:System.Runtime.DurableInstancing.InstanceLockedException> ponieważ pierwszym hoście ma blokady w wystąpieniu. Pierwszym hoście odblokowuje wystąpienie, po zakończeniu przy użyciu przetwarzania pierwszy komunikat i drugim hoście uzyskuje blokadę podczas ponownych prób przy następnym, ładuje wystąpienie i przetwarza drugi komunikat.
