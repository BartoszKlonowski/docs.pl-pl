---
title: Używanie obiektu WorkflowInvoker i WorkflowApplication
description: W tym artykule opisano hosting przepływu pracy przy użyciu WorkflowInvoker i obiektu WorkflowApplication w Windows Workflow Foundation.
ms.date: 03/30/2017
ms.assetid: cd0e583c-a3f9-4fa2-b247-c7b3368c48a7
ms.openlocfilehash: 50ad291bc73818092e7a08d489d6860636f9c379
ms.sourcegitcommit: 9a4488a3625866335e83a20da5e9c5286b1f034c
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/15/2020
ms.locfileid: "83421322"
---
# <a name="using-workflowinvoker-and-workflowapplication"></a><span data-ttu-id="7e449-103">Używanie obiektu WorkflowInvoker i WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="7e449-103">Using WorkflowInvoker and WorkflowApplication</span></span>
<span data-ttu-id="7e449-104">Windows Workflow Foundation (WF) oferuje kilka metod hostingu przepływów pracy.</span><span class="sxs-lookup"><span data-stu-id="7e449-104">Windows Workflow Foundation (WF) provides several methods of hosting workflows.</span></span> <span data-ttu-id="7e449-105"><xref:System.Activities.WorkflowInvoker>zapewnia prostą metodę wywoływania przepływu pracy tak, jakby była wywołaniem metody i może być używana tylko dla przepływów pracy, które nie używają trwałości.</span><span class="sxs-lookup"><span data-stu-id="7e449-105"><xref:System.Activities.WorkflowInvoker> provides a simple way for invoking a workflow as if it were a method call and can be used only for workflows that do not use persistence.</span></span> <span data-ttu-id="7e449-106"><xref:System.Activities.WorkflowApplication>zapewnia bogatszy model służący do wykonywania przepływów pracy, które obejmują powiadomienia o zdarzeniach cyklu życia, kontroli wykonywania, wznawianiu zakładek i trwałości.</span><span class="sxs-lookup"><span data-stu-id="7e449-106"><xref:System.Activities.WorkflowApplication> provides a richer model for executing workflows that includes notification of lifecycle events, execution control, bookmark resumption, and persistence.</span></span> <span data-ttu-id="7e449-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost>zapewnia obsługę działań związanych z obsługą komunikatów i jest używany głównie z usługami Workflow Services.</span><span class="sxs-lookup"><span data-stu-id="7e449-107"><xref:System.ServiceModel.Activities.WorkflowServiceHost> provides support for messaging activities and is primarily used with workflow services.</span></span> <span data-ttu-id="7e449-108">Ten temat zawiera wprowadzenie do obsługi przepływu pracy w programie <xref:System.Activities.WorkflowInvoker> i <xref:System.Activities.WorkflowApplication> .</span><span class="sxs-lookup"><span data-stu-id="7e449-108">This topic introduces you to workflow hosting with <xref:System.Activities.WorkflowInvoker> and <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="7e449-109">Aby uzyskać więcej informacji na temat hostingu przepływów pracy za pomocą programu <xref:System.ServiceModel.Activities.WorkflowServiceHost> , zobacz temat [usługi przepływu pracy](../wcf/feature-details/workflow-services.md) i [hostowanie usług przepływu pracy](../wcf/feature-details/hosting-workflow-services-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7e449-109">For more information about hosting workflows with <xref:System.ServiceModel.Activities.WorkflowServiceHost>, see [Workflow Services](../wcf/feature-details/workflow-services.md) and [Hosting Workflow Services Overview](../wcf/feature-details/hosting-workflow-services-overview.md).</span></span>  
  
## <a name="using-workflowinvoker"></a><span data-ttu-id="7e449-110">Korzystanie z WorkflowInvoker</span><span class="sxs-lookup"><span data-stu-id="7e449-110">Using WorkflowInvoker</span></span>  
 <span data-ttu-id="7e449-111"><xref:System.Activities.WorkflowInvoker>udostępnia model do wykonywania przepływu pracy tak, jakby był wywołaniem metody.</span><span class="sxs-lookup"><span data-stu-id="7e449-111"><xref:System.Activities.WorkflowInvoker> provides a model for executing a workflow as if it were a method call.</span></span> <span data-ttu-id="7e449-112">Aby wywołać przepływ pracy za pomocą polecenia <xref:System.Activities.WorkflowInvoker> , wywołaj <xref:System.Activities.WorkflowInvoker.Invoke%2A> metodę i przekaż definicję przepływu pracy do wywołania.</span><span class="sxs-lookup"><span data-stu-id="7e449-112">To invoke a workflow using <xref:System.Activities.WorkflowInvoker>, call the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method and pass in the workflow definition of the workflow to invoke.</span></span> <span data-ttu-id="7e449-113">W tym przykładzie <xref:System.Activities.Statements.WriteLine> działanie jest wywoływane przy użyciu <xref:System.Activities.WorkflowInvoker> .</span><span class="sxs-lookup"><span data-stu-id="7e449-113">In this example, a <xref:System.Activities.Statements.WriteLine> activity is invoked using <xref:System.Activities.WorkflowInvoker>.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#1)]  
  
 <span data-ttu-id="7e449-114">Gdy przepływ pracy jest wywoływany przy użyciu <xref:System.Activities.WorkflowInvoker> , przepływ pracy jest wykonywany w wątku wywołującym i <xref:System.Activities.WorkflowInvoker.Invoke%2A> bloków metody do momentu zakończenia przepływu pracy, w tym dowolnego czasu bezczynności.</span><span class="sxs-lookup"><span data-stu-id="7e449-114">When a workflow is invoked using <xref:System.Activities.WorkflowInvoker>, the workflow executes on the calling thread and the <xref:System.Activities.WorkflowInvoker.Invoke%2A> method blocks until the workflow is complete, including any idle time.</span></span> <span data-ttu-id="7e449-115">Aby skonfigurować interwał przekroczenia limitu czasu, w którym przepływ pracy musi być zakończony, użyj jednego z <xref:System.Activities.WorkflowInvoker.Invoke%2A> przeciążeń, które pobiera <xref:System.TimeSpan> parametr.</span><span class="sxs-lookup"><span data-stu-id="7e449-115">To configure a time-out interval in which the workflow must complete, use one of the <xref:System.Activities.WorkflowInvoker.Invoke%2A> overloads that takes a <xref:System.TimeSpan> parameter.</span></span> <span data-ttu-id="7e449-116">W tym przykładzie przepływ pracy jest wywoływany dwa razy z dwoma różnymi interwałami limitu czasu.</span><span class="sxs-lookup"><span data-stu-id="7e449-116">In this example, a workflow is invoked twice with two different time-out intervals.</span></span> <span data-ttu-id="7e449-117">Pierwszy przepływ pracy zakończeniu, ale drugi nie.</span><span class="sxs-lookup"><span data-stu-id="7e449-117">The first workflow complets, but the second does not.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#50](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#50)]  
  
> [!NOTE]
> <span data-ttu-id="7e449-118"><xref:System.TimeoutException>Jest generowany tylko wtedy, gdy upłynie limit czasu, a przepływ pracy stanie się nieczynny podczas wykonywania.</span><span class="sxs-lookup"><span data-stu-id="7e449-118">The <xref:System.TimeoutException> is only thrown if the time-out interval elapses and the workflow becomes idle during execution.</span></span> <span data-ttu-id="7e449-119">Przepływ pracy, który trwa dłużej niż określony limit czasu, zostanie zakończony pomyślnie, jeśli przepływ pracy nie stanie się bezczynny.</span><span class="sxs-lookup"><span data-stu-id="7e449-119">A workflow that takes longer than the specified time-out interval to complete completes successfully if the workflow does not become idle.</span></span>  
  
 <span data-ttu-id="7e449-120"><xref:System.Activities.WorkflowInvoker>zapewnia także asynchroniczne wersje metody Invoke.</span><span class="sxs-lookup"><span data-stu-id="7e449-120"><xref:System.Activities.WorkflowInvoker> also provides asynchronous versions of the invoke method.</span></span> <span data-ttu-id="7e449-121">Aby uzyskać więcej informacji, zobacz <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> i <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span><span class="sxs-lookup"><span data-stu-id="7e449-121">For more information, see <xref:System.Activities.WorkflowInvoker.InvokeAsync%2A> and <xref:System.Activities.WorkflowInvoker.BeginInvoke%2A>.</span></span>  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="7e449-122">Ustawianie argumentów wejściowych przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="7e449-122">Setting Input Arguments of a Workflow</span></span>  
 <span data-ttu-id="7e449-123">Dane można przekazywać do przepływu pracy przy użyciu słownika parametrów wejściowych, który jest określany przez nazwę argumentu, który jest mapowany do argumentów wejściowych przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7e449-123">Data can be passed into a workflow using a dictionary of input parameters, keyed by argument name, that map to the input arguments of the workflow.</span></span> <span data-ttu-id="7e449-124">W tym przykładzie <xref:System.Activities.Statements.WriteLine> jest wywoływana i wartość <xref:System.Activities.Statements.WriteLine.Text%2A> argumentu jest określona przy użyciu słownika parametrów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="7e449-124">In this example, a <xref:System.Activities.Statements.WriteLine> is invoked and the value for its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#3](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#3)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="7e449-125">Pobieranie argumentów wyjściowych przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="7e449-125">Retrieving Output Arguments of a Workflow</span></span>  
 <span data-ttu-id="7e449-126">Parametry wyjściowe przepływu pracy można uzyskać przy użyciu słownika danych wyjściowych zwracanego z wywołania metody <xref:System.Activities.WorkflowInvoker.Invoke%2A> .</span><span class="sxs-lookup"><span data-stu-id="7e449-126">The output parameters of a workflow can be obtained using the outputs dictionary that is returned from the call to <xref:System.Activities.WorkflowInvoker.Invoke%2A>.</span></span> <span data-ttu-id="7e449-127">Poniższy przykład wywołuje przepływ pracy składający się z pojedynczego `Divide` działania, które ma dwa argumenty wejściowe i dwa argumenty wyjściowe.</span><span class="sxs-lookup"><span data-stu-id="7e449-127">The following example invokes a workflow consisting of a single `Divide` activity that has two input arguments and two output arguments.</span></span> <span data-ttu-id="7e449-128">Gdy przepływ pracy jest wywoływany, `arguments` jest przesyłany słownik zawierający wartości dla każdego argumentu wejściowego, który jest określany przez nazwę argumentu.</span><span class="sxs-lookup"><span data-stu-id="7e449-128">When the workflow is invoked, the `arguments` dictionary is passed which contains the values for each input argument, keyed by argument name.</span></span> <span data-ttu-id="7e449-129">Gdy wywołanie `Invoke` zwrotne zwraca, każdy argument wyjściowy jest zwracany w `outputs` słowniku, również przy użyciu nazwy argumentu.</span><span class="sxs-lookup"><span data-stu-id="7e449-129">When the call to `Invoke` returns, each output argument is returned in the `outputs` dictionary, also keyed by argument name.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#120](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#120)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#20](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#20)]  
  
 <span data-ttu-id="7e449-130">Jeśli przepływ pracy pochodzi z <xref:System.Activities.ActivityWithResult> , takich jak `CodeActivity<TResult>` lub `Activity<TResult>` , i istnieją argumenty wyjściowe oprócz dobrze zdefiniowanego <xref:System.Activities.Activity%601.Result%2A> argumentu wyjściowego, `Invoke` do pobrania dodatkowych argumentów musi być używany nieogólne Przeciążenie elementu.</span><span class="sxs-lookup"><span data-stu-id="7e449-130">If the workflow derives from <xref:System.Activities.ActivityWithResult>, such as `CodeActivity<TResult>` or `Activity<TResult>`, and there are output arguments in addition to the well-defined <xref:System.Activities.Activity%601.Result%2A> output argument, a non-generic overload of `Invoke` must be used in order to retrieve the additional arguments.</span></span> <span data-ttu-id="7e449-131">W tym celu przekazana definicja przepływu pracy `Invoke` musi być typu <xref:System.Activities.Activity> .</span><span class="sxs-lookup"><span data-stu-id="7e449-131">To do this, the workflow definition passed into `Invoke` must be of type <xref:System.Activities.Activity>.</span></span> <span data-ttu-id="7e449-132">W tym przykładzie `Divide` działanie pochodzi z `CodeActivity<int>` , ale jest zadeklarowane jako <xref:System.Activities.Activity> tak, że używane jest nieogólne Przeciążenie elementu, `Invoke` które zwraca słownik argumentów zamiast pojedynczej wartości zwracanej.</span><span class="sxs-lookup"><span data-stu-id="7e449-132">In this example the `Divide` activity derives from `CodeActivity<int>`, but is declared as <xref:System.Activities.Activity> so that a non-generic overload of `Invoke` is used which returns a dictionary of arguments instead of a single return value.</span></span>  
  
 [!code-csharp[CFX_WorkflowInvokerExample#121](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#121)]  
  
 [!code-csharp[CFX_WorkflowInvokerExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowinvokerexample/cs/program.cs#21)]  
  
## <a name="using-workflowapplication"></a><span data-ttu-id="7e449-133">Używanie obiektu WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="7e449-133">Using WorkflowApplication</span></span>  
 <span data-ttu-id="7e449-134"><xref:System.Activities.WorkflowApplication>oferuje bogaty zestaw funkcji zarządzania wystąpieniami przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7e449-134"><xref:System.Activities.WorkflowApplication> provides a rich set of features for workflow instance management.</span></span> <span data-ttu-id="7e449-135"><xref:System.Activities.WorkflowApplication>działa jako bezpieczny dla wątku serwer proxy do rzeczywistego <xref:System.Activities.Hosting.WorkflowInstance> , który hermetyzuje środowisko uruchomieniowe i zapewnia metody tworzenia i ładowania wystąpień przepływu pracy, wstrzymywanie i wznawianie, kończenie i powiadamianie o zdarzeniach cyklu życia.</span><span class="sxs-lookup"><span data-stu-id="7e449-135"><xref:System.Activities.WorkflowApplication> acts as a thread safe proxy to the actual  <xref:System.Activities.Hosting.WorkflowInstance>, which encapsulates the runtime, and provides methods for creating and loading workflow instances, pausing and resuming, terminating, and notification of lifecycle events.</span></span> <span data-ttu-id="7e449-136">Aby uruchomić przepływ pracy za pomocą <xref:System.Activities.WorkflowApplication> tworzenia <xref:System.Activities.WorkflowApplication> , zasubskrybować wszystkie zdarzenia cyklu życia, uruchomić przepływ pracy, a następnie zaczekaj na jego zakończenie.</span><span class="sxs-lookup"><span data-stu-id="7e449-136">To run a workflow using <xref:System.Activities.WorkflowApplication> you create the <xref:System.Activities.WorkflowApplication>, subscribe to any desired lifecycle events, start the workflow, and then wait for it to finish.</span></span> <span data-ttu-id="7e449-137">W tym przykładzie zostanie utworzona definicja przepływu pracy, która składa się z <xref:System.Activities.Statements.WriteLine> działania i <xref:System.Activities.WorkflowApplication> jest tworzona przy użyciu określonej definicji przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7e449-137">In this example, a workflow definition that consists of a <xref:System.Activities.Statements.WriteLine> activity is created and a <xref:System.Activities.WorkflowApplication> is created using the specified workflow definition.</span></span> <span data-ttu-id="7e449-138"><xref:System.Activities.WorkflowApplication.Completed%2A>jest obsługiwane, aby Host był powiadamiany po zakończeniu przepływu pracy, przepływ pracy jest uruchamiany z wywołaniem <xref:System.Activities.WorkflowApplication.Run%2A> , a następnie Host czeka na zakończenie przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7e449-138"><xref:System.Activities.WorkflowApplication.Completed%2A> is handled so the host is notified when the workflow completes, the workflow is started with a call to <xref:System.Activities.WorkflowApplication.Run%2A>, and then the host waits for the workflow to complete.</span></span> <span data-ttu-id="7e449-139">Po zakończeniu przepływu pracy <xref:System.Threading.AutoResetEvent> jest ustawiony i aplikacja hosta może wznowić wykonywanie, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="7e449-139">When the workflow completes, the <xref:System.Threading.AutoResetEvent> is set and the host application can resume execution, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#31](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#31)]  
  
### <a name="workflowapplication-lifecycle-events"></a><span data-ttu-id="7e449-140">Zdarzenia cyklu życia obiektu WorkflowApplication</span><span class="sxs-lookup"><span data-stu-id="7e449-140">WorkflowApplication Lifecycle Events</span></span>  
 <span data-ttu-id="7e449-141">Oprócz <xref:System.Activities.WorkflowApplication.Completed%2A> tego można powiadamiać autorów, gdy przepływ pracy zostanie zwolniony ( <xref:System.Activities.WorkflowApplication.Unloaded%2A> ), przerwany ( <xref:System.Activities.WorkflowApplication.Aborted%2A> ), stanie się bezczynny ( <xref:System.Activities.WorkflowApplication.Idle%2A> i <xref:System.Activities.WorkflowApplication.PersistableIdle%2A> ) lub wystąpił nieobsługiwany wyjątek ( <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> ).</span><span class="sxs-lookup"><span data-stu-id="7e449-141">In addition to <xref:System.Activities.WorkflowApplication.Completed%2A>, host authors can be notified when a workflow is unloaded (<xref:System.Activities.WorkflowApplication.Unloaded%2A>), aborted (<xref:System.Activities.WorkflowApplication.Aborted%2A>), becomes idle (<xref:System.Activities.WorkflowApplication.Idle%2A> and <xref:System.Activities.WorkflowApplication.PersistableIdle%2A>), or an unhandled exception occurs (<xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>).</span></span> <span data-ttu-id="7e449-142">Deweloperzy aplikacji przepływu pracy mogą obsługiwać te powiadomienia i podejmować odpowiednie działania, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="7e449-142">Workflow application developers can handle these notifications and take appropriate action, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#32](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#32)]  
  
### <a name="setting-input-arguments-of-a-workflow"></a><span data-ttu-id="7e449-143">Ustawianie argumentów wejściowych przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="7e449-143">Setting Input Arguments of a Workflow</span></span>  
 <span data-ttu-id="7e449-144">Dane można przekazywać do przepływu pracy, ponieważ jest on uruchamiany przy użyciu słownika parametrów, podobnie jak dane są przesyłane podczas korzystania z programu <xref:System.Activities.WorkflowInvoker> .</span><span class="sxs-lookup"><span data-stu-id="7e449-144">Data can be passed into a workflow as it is started using a dictionary of parameters, similar to the way data is passed in when using <xref:System.Activities.WorkflowInvoker>.</span></span> <span data-ttu-id="7e449-145">Każdy element w słowniku jest mapowany na argument wejściowy określonego przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7e449-145">Each item in the dictionary maps to an input argument of the specified workflow.</span></span> <span data-ttu-id="7e449-146">W tym przykładzie jest wywoływany przepływ pracy, który składa się z <xref:System.Activities.Statements.WriteLine> działania, a jego <xref:System.Activities.Statements.WriteLine.Text%2A> argument jest określony przy użyciu słownika parametrów wejściowych.</span><span class="sxs-lookup"><span data-stu-id="7e449-146">In this example, a workflow that consists of a <xref:System.Activities.Statements.WriteLine> activity is invoked and its <xref:System.Activities.Statements.WriteLine.Text%2A> argument is specified using the dictionary of input parameters.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#30](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#30)]  
  
### <a name="retrieving-output-arguments-of-a-workflow"></a><span data-ttu-id="7e449-147">Pobieranie argumentów wyjściowych przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="7e449-147">Retrieving Output Arguments of a Workflow</span></span>  
 <span data-ttu-id="7e449-148">Po zakończeniu przepływu pracy wszystkie argumenty wyjściowe można pobrać w programie obsługi, <xref:System.Activities.WorkflowApplication.Completed%2A> uzyskując dostęp do <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType> słownika.</span><span class="sxs-lookup"><span data-stu-id="7e449-148">When a workflow completes, any output arguments can be retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler by accessing the <xref:System.Activities.WorkflowApplicationCompletedEventArgs.Outputs%2A?displayProperty=nameWithType> dictionary.</span></span> <span data-ttu-id="7e449-149">Poniższy przykład umożliwia hostowanie przepływu pracy przy użyciu polecenia <xref:System.Activities.WorkflowApplication> .</span><span class="sxs-lookup"><span data-stu-id="7e449-149">The following example hosts a workflow using <xref:System.Activities.WorkflowApplication>.</span></span> <span data-ttu-id="7e449-150"><xref:System.Activities.WorkflowApplication>Wystąpienie jest zbudowane przy użyciu definicji przepływu pracy składającej się z pojedynczego `DiceRoll` działania.</span><span class="sxs-lookup"><span data-stu-id="7e449-150">A <xref:System.Activities.WorkflowApplication> instance is constructed using a workflow definition consisting of a single `DiceRoll` activity.</span></span> <span data-ttu-id="7e449-151">`DiceRoll`Działanie ma dwa argumenty wyjściowe, które reprezentują wyniki operacji rzutowania indeksu.</span><span class="sxs-lookup"><span data-stu-id="7e449-151">The `DiceRoll` activity has two output arguments that represent the results of the dice roll operation.</span></span> <span data-ttu-id="7e449-152">Po zakończeniu przepływu pracy dane wyjściowe są pobierane w programie <xref:System.Activities.WorkflowApplication.Completed%2A> obsługi.</span><span class="sxs-lookup"><span data-stu-id="7e449-152">When the workflow completes, the outputs are retrieved in the <xref:System.Activities.WorkflowApplication.Completed%2A> handler.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#130](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#130)]  
  
 [!code-csharp[CFX_WorkflowApplicationExample#21](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#21)]  
  
> [!NOTE]
> <span data-ttu-id="7e449-153"><xref:System.Activities.WorkflowApplication>i <xref:System.Activities.WorkflowInvoker> Wypełnij słownik argumentów wejściowych i zwracają słownik `out` argumentów.</span><span class="sxs-lookup"><span data-stu-id="7e449-153"><xref:System.Activities.WorkflowApplication> and <xref:System.Activities.WorkflowInvoker> take a dictionary of input arguments and return a dictionary of `out` arguments.</span></span> <span data-ttu-id="7e449-154">Te parametry słownika, właściwości i wartości zwracane są typu `IDictionary<string, object>` .</span><span class="sxs-lookup"><span data-stu-id="7e449-154">These dictionary parameters, properties, and return values are of type `IDictionary<string, object>`.</span></span> <span data-ttu-id="7e449-155">Rzeczywiste wystąpienie klasy słownika, która jest przenoszona, może być dowolną klasą implementującą `IDictionary<string, object>` .</span><span class="sxs-lookup"><span data-stu-id="7e449-155">The actual instance of the dictionary class that is passed in can be any class that implements `IDictionary<string, object>`.</span></span> <span data-ttu-id="7e449-156">W tych przykładach `Dictionary<string, object>` jest używana.</span><span class="sxs-lookup"><span data-stu-id="7e449-156">In these examples, `Dictionary<string, object>` is used.</span></span> <span data-ttu-id="7e449-157">Aby uzyskać więcej informacji na temat słowników, zobacz <xref:System.Collections.Generic.IDictionary%602> i <xref:System.Collections.Generic.Dictionary%602> .</span><span class="sxs-lookup"><span data-stu-id="7e449-157">For more information about dictionaries, see <xref:System.Collections.Generic.IDictionary%602> and <xref:System.Collections.Generic.Dictionary%602>.</span></span>  
  
### <a name="passing-data-into-a-running-workflow-using-bookmarks"></a><span data-ttu-id="7e449-158">Przekazywanie danych do działającego przepływu pracy przy użyciu zakładek</span><span class="sxs-lookup"><span data-stu-id="7e449-158">Passing Data into a Running Workflow Using Bookmarks</span></span>  
 <span data-ttu-id="7e449-159">Zakładki to mechanizm, za pomocą którego działanie może pasywnie oczekiwać na wznowienie i jest mechanizmem przekazywania danych do uruchomionego wystąpienia przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="7e449-159">Bookmarks are the mechanism by which an activity can passively wait to be resumed and are a mechanism for passing data into a running workflow instance.</span></span> <span data-ttu-id="7e449-160">Jeśli działanie oczekuje na dane, może utworzyć <xref:System.Activities.Bookmark> i zarejestrować metodę wywołania zwrotnego, która ma być wywoływana po <xref:System.Activities.Bookmark> wznowieniu, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="7e449-160">If an activity is waiting for data, it can create a <xref:System.Activities.Bookmark> and register a callback method to be called when the <xref:System.Activities.Bookmark> is resumed, as shown in the following example.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#15](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#15)]  
  
 <span data-ttu-id="7e449-161">Po wykonaniu `ReadLine` działanie tworzy <xref:System.Activities.Bookmark> , rejestruje wywołanie zwrotne, a następnie czeka na <xref:System.Activities.Bookmark> wznowienie.</span><span class="sxs-lookup"><span data-stu-id="7e449-161">When executed, the `ReadLine` activity creates a <xref:System.Activities.Bookmark>, registers a callback, and then waits for the <xref:System.Activities.Bookmark> to be resumed.</span></span> <span data-ttu-id="7e449-162">Gdy zostanie ono wznowione, `ReadLine` działanie przypisze dane, które zostały przesłane z <xref:System.Activities.Bookmark> do tego <xref:System.Activities.Activity%601.Result%2A> argumentu.</span><span class="sxs-lookup"><span data-stu-id="7e449-162">When it is resumed, the `ReadLine` activity assigns the data that was passed with the <xref:System.Activities.Bookmark> to its <xref:System.Activities.Activity%601.Result%2A> argument.</span></span> <span data-ttu-id="7e449-163">W tym przykładzie zostanie utworzony przepływ pracy, który używa `ReadLine` działania do zbierania nazwy użytkownika i wyświetlania go w oknie konsoli.</span><span class="sxs-lookup"><span data-stu-id="7e449-163">In this example, a workflow is created that uses the `ReadLine` activity to gather the user’s name and display it to the console window.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#22](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#22)]  
  
 <span data-ttu-id="7e449-164">Gdy `ReadLine` działanie jest wykonywane, tworzy <xref:System.Activities.Bookmark> nazwę, `UserName` a następnie czeka na wznowienie zakładki.</span><span class="sxs-lookup"><span data-stu-id="7e449-164">When the `ReadLine` activity is executed, it creates a <xref:System.Activities.Bookmark> named `UserName` and then waits for the bookmark to be resumed.</span></span> <span data-ttu-id="7e449-165">Host zbiera wymagane dane, a następnie wznawia działanie <xref:System.Activities.Bookmark> .</span><span class="sxs-lookup"><span data-stu-id="7e449-165">The host collects the desired data and then resumes the <xref:System.Activities.Bookmark>.</span></span> <span data-ttu-id="7e449-166">Przepływ pracy zostanie wznowiony, zostanie wyświetlona nazwa, a następnie zostanie zakończona.</span><span class="sxs-lookup"><span data-stu-id="7e449-166">The workflow resumes, displays the name, and then completes.</span></span>  
  
 <span data-ttu-id="7e449-167">Aplikacja hosta może przeprowadzić inspekcję przepływu pracy w celu ustalenia, czy istnieją aktywne zakładki.</span><span class="sxs-lookup"><span data-stu-id="7e449-167">The host application can inspect the workflow to determine if there are any active bookmarks.</span></span> <span data-ttu-id="7e449-168">Można to zrobić <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> , wywołując metodę <xref:System.Activities.WorkflowApplication> wystąpienia lub sprawdzając je <xref:System.Activities.WorkflowApplicationIdleEventArgs> w programie <xref:System.Activities.WorkflowApplication.Idle%2A> obsługi.</span><span class="sxs-lookup"><span data-stu-id="7e449-168">It can do this by calling the <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> method of a <xref:System.Activities.WorkflowApplication> instance, or by inspecting the <xref:System.Activities.WorkflowApplicationIdleEventArgs> in the <xref:System.Activities.WorkflowApplication.Idle%2A> handler.</span></span>  
  
 <span data-ttu-id="7e449-169">Poniższy przykład kodu jest podobny do poprzedniego, z tą różnicą, że zakładki aktywne są wyliczane przed wznowieniem zakładki.</span><span class="sxs-lookup"><span data-stu-id="7e449-169">The following code example is like the previous example except that the active bookmarks are enumerated before the bookmark is resumed.</span></span> <span data-ttu-id="7e449-170">Przepływ pracy jest uruchamiany, a gdy <xref:System.Activities.Bookmark> zostanie utworzony, a przepływ pracy jest bezczynny, <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> jest wywoływany.</span><span class="sxs-lookup"><span data-stu-id="7e449-170">The workflow is started, and once the <xref:System.Activities.Bookmark> is created and the workflow goes idle, <xref:System.Activities.WorkflowApplication.GetBookmarks%2A> is called.</span></span> <span data-ttu-id="7e449-171">Po zakończeniu przepływu pracy następujące dane wyjściowe są wyświetlane w konsoli programu.</span><span class="sxs-lookup"><span data-stu-id="7e449-171">When the workflow is completed, the following output is displayed to the console.</span></span>  
  
 <span data-ttu-id="7e449-172">**Jak się nazywasz?**</span><span class="sxs-lookup"><span data-stu-id="7e449-172">**What is your name?**</span></span>  
<span data-ttu-id="7e449-173">**Zakładkaname: username-OwnerDisplayName: ReadLine** 
 **Steve** 
 **Witaj, Steve**</span><span class="sxs-lookup"><span data-stu-id="7e449-173">**BookmarkName: UserName - OwnerDisplayName: ReadLine**
**Steve**
**Hello, Steve**</span></span>

[!code-csharp[CFX_WorkflowApplicationExample#14](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#14)]  
  
 <span data-ttu-id="7e449-174">Poniższy przykład kodu sprawdza, czy <xref:System.Activities.WorkflowApplicationIdleEventArgs> przeszedł do <xref:System.Activities.WorkflowApplication.Idle%2A> procedury obsługi <xref:System.Activities.WorkflowApplication> wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="7e449-174">The following code example inspects the <xref:System.Activities.WorkflowApplicationIdleEventArgs> passed into the <xref:System.Activities.WorkflowApplication.Idle%2A> handler of a <xref:System.Activities.WorkflowApplication> instance.</span></span> <span data-ttu-id="7e449-175">W tym przykładzie przepływ pracy, który przejdzie do bezczynności, ma jedną <xref:System.Activities.Bookmark> z nazwami `EnterGuess` , należącymi do działania o nazwie `ReadInt` .</span><span class="sxs-lookup"><span data-stu-id="7e449-175">In this example the workflow going idle has one <xref:System.Activities.Bookmark> with a name of `EnterGuess`, owned by an activity named `ReadInt`.</span></span> <span data-ttu-id="7e449-176">Ten przykład kodu jest oparty na [sposobie: uruchamianie przepływu pracy](how-to-run-a-workflow.md), który jest częścią [samouczka Wprowadzenie](getting-started-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="7e449-176">This code example is based off of [How to: Run a Workflow](how-to-run-a-workflow.md), which is part of the [Getting Started Tutorial](getting-started-tutorial.md).</span></span> <span data-ttu-id="7e449-177">Jeśli <xref:System.Activities.WorkflowApplication.Idle%2A> program obsługi w tym kroku jest modyfikowany tak, aby zawierał kod z tego przykładu, wyświetlane są następujące dane wyjściowe.</span><span class="sxs-lookup"><span data-stu-id="7e449-177">If the <xref:System.Activities.WorkflowApplication.Idle%2A> handler in that step is modified to contain the code from this example, the following output is displayed.</span></span>  
  
 <span data-ttu-id="7e449-178">**Zakładkaname: EnterGuess-OwnerDisplayName: ReadInt**</span><span class="sxs-lookup"><span data-stu-id="7e449-178">**BookmarkName: EnterGuess - OwnerDisplayName: ReadInt**</span></span>

 [!code-csharp[CFX_WorkflowApplicationExample#2](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#2)]  
  
## <a name="summary"></a><span data-ttu-id="7e449-179">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="7e449-179">Summary</span></span>  
 <span data-ttu-id="7e449-180"><xref:System.Activities.WorkflowInvoker>zapewnia lekki sposób wywoływania przepływów pracy, a chociaż udostępnia metody przekazywania danych na początku przepływu pracy i wyodrębniania danych z ukończonego przepływu pracy, nie zapewnia bardziej złożonych scenariuszy, których <xref:System.Activities.WorkflowApplication> można użyć.</span><span class="sxs-lookup"><span data-stu-id="7e449-180"><xref:System.Activities.WorkflowInvoker> provides a lightweight way to invoke workflows, and although it provides methods for passing data in at the start of a workflow and extracting data from a completed workflow, it does not provide for more complex scenarios which is where <xref:System.Activities.WorkflowApplication> can be used.</span></span>
