---
title: Działania kontroli drzewa
ms.date: 03/30/2017
ms.assetid: 100d00e4-8c1d-4233-8fbb-dd443a01155d
ms.openlocfilehash: 4f2ca6bff27cfe0e3362e2a3b95cd08a0f8d5297
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
ms.locfileid: "33516844"
---
# <a name="activity-tree-inspection"></a><span data-ttu-id="2f927-102">Działania kontroli drzewa</span><span class="sxs-lookup"><span data-stu-id="2f927-102">Activity Tree Inspection</span></span>
<span data-ttu-id="2f927-103">Działanie drzewa kontroli jest używany przez autorów aplikacji przepływu pracy do zbadania przepływów pracy obsługiwanych przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="2f927-103">Activity tree inspection is used by workflow application authors to inspect the workflows hosted by the application.</span></span> <span data-ttu-id="2f927-104">Za pomocą <xref:System.Activities.WorkflowInspectionServices>, przepływy pracy mogą być wyszukiwane działań podrzędnych określonych, poszczególne działania mogą być wyliczane ich właściwości i mogą być buforowane metadane środowiska wykonawczego działań w określonym czasie.</span><span class="sxs-lookup"><span data-stu-id="2f927-104">By using <xref:System.Activities.WorkflowInspectionServices>, workflows can be searched for specific child activities, individual activities and their properties can be enumerated, and runtime metadata of the activities can be cached at a specific time.</span></span> <span data-ttu-id="2f927-105">Ten temat zawiera omówienie <xref:System.Activities.WorkflowInspectionServices> i jak z niego korzystać do zbadania drzewem działań.</span><span class="sxs-lookup"><span data-stu-id="2f927-105">This topic provides an overview of <xref:System.Activities.WorkflowInspectionServices> and how to use it to inspect an activity tree.</span></span>  
  
## <a name="using-workflowinspectionservices"></a><span data-ttu-id="2f927-106">Przy użyciu WorkflowInspectionServices</span><span class="sxs-lookup"><span data-stu-id="2f927-106">Using WorkflowInspectionServices</span></span>  
 <span data-ttu-id="2f927-107"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> Metoda jest używana do wszystkich działań w drzewie określonego działania.</span><span class="sxs-lookup"><span data-stu-id="2f927-107">The <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> method is used to enumerate all of the activities in the specified activity tree.</span></span> <span data-ttu-id="2f927-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> Zwraca moduł wyliczający, który go dotyka wszystkie działania w obrębie drzewa, w tym elementy podrzędne, obsługi delegata, zmiennej wartości domyślne i wyrażenia argumentów.</span><span class="sxs-lookup"><span data-stu-id="2f927-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> returns an enumerable that touches all activities within the tree including children, delegate handlers, variable defaults, and argument expressions.</span></span> <span data-ttu-id="2f927-109">W poniższym przykładzie definicji przepływu pracy jest tworzona przy użyciu <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>i wyrażenia.</span><span class="sxs-lookup"><span data-stu-id="2f927-109">In the following example, a workflow definition is created by using a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, and expressions.</span></span> <span data-ttu-id="2f927-110">Po utworzeniu definicji przepływu pracy jest wywoływana, a następnie `InspectActivity` metoda jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="2f927-110">After the workflow definition is created, it is invoked and then the `InspectActivity` method is called.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#45](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#45)]  
  
 <span data-ttu-id="2f927-111">Aby wyliczyć działań, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> jest wywoływana na działanie główne i ponownie rekursywnie na każde działanie zwrócony.</span><span class="sxs-lookup"><span data-stu-id="2f927-111">To enumerate the activities, the <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is called on the root activity, and again recursively on each returned activity.</span></span> <span data-ttu-id="2f927-112">W poniższym przykładzie <xref:System.Activities.Activity.DisplayName%2A> każdego działania i wyrażenia w działaniu drzewa jest wyświetlony w konsoli.</span><span class="sxs-lookup"><span data-stu-id="2f927-112">In the following example, the <xref:System.Activities.Activity.DisplayName%2A> of each activity and expression in the activity tree is written to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#46](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#46)]  
  
 <span data-ttu-id="2f927-113">Ten przykładowy kod zawiera następujące dane wyjściowe.</span><span class="sxs-lookup"><span data-stu-id="2f927-113">This sample code provides the following output.</span></span>  
  
 <span data-ttu-id="2f927-114">**Element listy 1**</span><span class="sxs-lookup"><span data-stu-id="2f927-114">**List Item 1**</span></span>  
<span data-ttu-id="2f927-115">**Element listy 2** </span><span class="sxs-lookup"><span data-stu-id="2f927-115">**List Item 2** </span></span>  
<span data-ttu-id="2f927-116">**Element listy 3** </span><span class="sxs-lookup"><span data-stu-id="2f927-116">**List Item 3** </span></span>  
<span data-ttu-id="2f927-117">**Element listy 4** </span><span class="sxs-lookup"><span data-stu-id="2f927-117">**List Item 4** </span></span>  
<span data-ttu-id="2f927-118">**Element listy 5** </span><span class="sxs-lookup"><span data-stu-id="2f927-118">**List Item 5** </span></span>  
<span data-ttu-id="2f927-119">**Elementy dodane do kolekcji.** </span><span class="sxs-lookup"><span data-stu-id="2f927-119">**Items added to collection.** </span></span>  
<span data-ttu-id="2f927-120">**Sekwencja** </span><span class="sxs-lookup"><span data-stu-id="2f927-120">**Sequence** </span></span>  
 <span data-ttu-id="2f927-121">**Literał < lista\<ciąg >>**</span><span class="sxs-lookup"><span data-stu-id="2f927-121">**Literal<List\<String>>**</span></span>  
 <span data-ttu-id="2f927-122">**Podczas**</span><span class="sxs-lookup"><span data-stu-id="2f927-122">**While**</span></span>  
 <span data-ttu-id="2f927-123">**AddToCollection\<ciąg >**</span><span class="sxs-lookup"><span data-stu-id="2f927-123">**AddToCollection\<String>**</span></span>  
 <span data-ttu-id="2f927-124">**VariableValue < ICollection\<ciąg >>**</span><span class="sxs-lookup"><span data-stu-id="2f927-124">**VariableValue<ICollection\<String>>**</span></span>  
 <span data-ttu-id="2f927-125">**LambdaValue\<ciąg >**</span><span class="sxs-lookup"><span data-stu-id="2f927-125">**LambdaValue\<String>**</span></span>  
 <span data-ttu-id="2f927-126">**LocationReferenceValue < lista\<ciąg >>**</span><span class="sxs-lookup"><span data-stu-id="2f927-126">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="2f927-127">**LambdaValue\<wartość logiczna >**</span><span class="sxs-lookup"><span data-stu-id="2f927-127">**LambdaValue\<Boolean>**</span></span>  
 <span data-ttu-id="2f927-128">**LocationReferenceValue < lista\<ciąg >>**</span><span class="sxs-lookup"><span data-stu-id="2f927-128">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="2f927-129">**Instrukcja ForEach\<ciąg >**</span><span class="sxs-lookup"><span data-stu-id="2f927-129">**ForEach\<String>**</span></span>  
 <span data-ttu-id="2f927-130">**VariableValue < IEnumerable\<ciąg >>**</span><span class="sxs-lookup"><span data-stu-id="2f927-130">**VariableValue<IEnumerable\<String>>**</span></span>  
 <span data-ttu-id="2f927-131">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="2f927-131">**WriteLine**</span></span>  
 <span data-ttu-id="2f927-132">**DelegateArgumentValue\<ciąg >**</span><span class="sxs-lookup"><span data-stu-id="2f927-132">**DelegateArgumentValue\<String>**</span></span>  
 <span data-ttu-id="2f927-133">**Sekwencja**</span><span class="sxs-lookup"><span data-stu-id="2f927-133">**Sequence**</span></span>  
 <span data-ttu-id="2f927-134">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="2f927-134">**WriteLine**</span></span>  
 <span data-ttu-id="2f927-135">**Literał\<ciąg >** można pobrać określonego działania zamiast wyliczania wszystkie działania, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> jest używany.</span><span class="sxs-lookup"><span data-stu-id="2f927-135">**Literal\<String>**  To retrieve a specific activity instead of enumerating all of the activities, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> is used.</span></span> <span data-ttu-id="2f927-136">Zarówno <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> i <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> wykonania, jeśli buforowanie metadanych `WorkflowInspectionServices.CacheMetadata` nie została wcześniej wywołana.</span><span class="sxs-lookup"><span data-stu-id="2f927-136">Both <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> and <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> perform metadata caching if `WorkflowInspectionServices.CacheMetadata` has not been previously called.</span></span> <span data-ttu-id="2f927-137">Jeśli <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> została wywołana następnie <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> opiera się na istniejącą metadanych.</span><span class="sxs-lookup"><span data-stu-id="2f927-137">If <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> has been called then <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is based on the existing metadata.</span></span> <span data-ttu-id="2f927-138">W związku z tym jeśli drzewa zostały zmienione od czasu ostatniego wywołania <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> może dać nieoczekiwane wyniki.</span><span class="sxs-lookup"><span data-stu-id="2f927-138">Therefore, if tree changes have been made since the last call to <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> might give unexpected results.</span></span> <span data-ttu-id="2f927-139">Jeśli wprowadzono zmiany w przepływie pracy po wywołaniu <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadane mogą być buforowane ponownie przez wywołanie metody <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="2f927-139">If changes have been made to the workflow after calling <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata can be re-cached by calling the <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method.</span></span> <span data-ttu-id="2f927-140">Buforowanie metadanych jest omówiona w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="2f927-140">Caching metadata is discussed in the next section.</span></span>  
  
### <a name="caching-metadata"></a><span data-ttu-id="2f927-141">Buforowanie metadanych</span><span class="sxs-lookup"><span data-stu-id="2f927-141">Caching Metadata</span></span>  
 <span data-ttu-id="2f927-142">Buforowanie metadanych dla działania kompilacje i weryfikuje opis argumentów działania, zmienne, działania podrzędne i delegatów działania.</span><span class="sxs-lookup"><span data-stu-id="2f927-142">Caching the metadata for an activity builds and validates a description of the activity’s arguments, variables, child activities, and activity delegates.</span></span> <span data-ttu-id="2f927-143">Metadane, domyślnie jest buforowany przez środowisko uruchomieniowe podczas działania jest gotowa do wykonania.</span><span class="sxs-lookup"><span data-stu-id="2f927-143">Metadata, by default, is cached by the runtime when an activity is prepared for execution.</span></span> <span data-ttu-id="2f927-144">Jeśli autor hosta przepływu pracy chce pamięci podręcznej metadanych dla obiekt activity lub drzewo działań przed tym, na przykład do podejmowania wszelkich kosztów wiedzieli, następnie <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> może służyć do pamięci podręcznej metadanych na żądany czas.</span><span class="sxs-lookup"><span data-stu-id="2f927-144">If a workflow host author wants to cache the metadata for an activity or activity tree before this, for example to take all of the cost upfront, then <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> can be used to cache the metadata at the desired time.</span></span>
