---
title: Kontrola drzewa działań
ms.date: 03/30/2017
ms.assetid: 100d00e4-8c1d-4233-8fbb-dd443a01155d
ms.openlocfilehash: 692f36d993c3f9c27839122b388a24d0698a2b59
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/12/2020
ms.locfileid: "79183039"
---
# <a name="activity-tree-inspection"></a><span data-ttu-id="2043d-102">Kontrola drzewa działań</span><span class="sxs-lookup"><span data-stu-id="2043d-102">Activity Tree Inspection</span></span>
<span data-ttu-id="2043d-103">Inspekcja drzewa działań jest używana przez autorów aplikacji przepływu pracy do sprawdzania przepływów pracy hostowanych przez aplikację.</span><span class="sxs-lookup"><span data-stu-id="2043d-103">Activity tree inspection is used by workflow application authors to inspect the workflows hosted by the application.</span></span> <span data-ttu-id="2043d-104">Za <xref:System.Activities.WorkflowInspectionServices>pomocą , przepływy pracy można wyszukiwać dla określonych działań podrzędnych, poszczególne działania i ich właściwości mogą być wyliczane, a metadane środowiska wykonawczego działań mogą być buforowane w określonym czasie.</span><span class="sxs-lookup"><span data-stu-id="2043d-104">By using <xref:System.Activities.WorkflowInspectionServices>, workflows can be searched for specific child activities, individual activities and their properties can be enumerated, and runtime metadata of the activities can be cached at a specific time.</span></span> <span data-ttu-id="2043d-105">Ten temat zawiera <xref:System.Activities.WorkflowInspectionServices> omówienie i jak go używać do sprawdzania drzewa działań.</span><span class="sxs-lookup"><span data-stu-id="2043d-105">This topic provides an overview of <xref:System.Activities.WorkflowInspectionServices> and how to use it to inspect an activity tree.</span></span>  
  
## <a name="using-workflowinspectionservices"></a><span data-ttu-id="2043d-106">Korzystanie z usług inspection przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="2043d-106">Using WorkflowInspectionServices</span></span>  
 <span data-ttu-id="2043d-107">Metoda <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> jest używana do wyliczenia wszystkich działań w określonym drzewie działań.</span><span class="sxs-lookup"><span data-stu-id="2043d-107">The <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> method is used to enumerate all of the activities in the specified activity tree.</span></span> <span data-ttu-id="2043d-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>zwraca wyliczalne, który dotyka wszystkich działań w drzewie, w tym obrażeń podrzędnych, obsługi delegata, zmiennych domyślnych i wyrażeń argumentów.</span><span class="sxs-lookup"><span data-stu-id="2043d-108"><xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> returns an enumerable that touches all activities within the tree including children, delegate handlers, variable defaults, and argument expressions.</span></span> <span data-ttu-id="2043d-109">W poniższym przykładzie definicja przepływu pracy <xref:System.Activities.Statements.Sequence> <xref:System.Activities.Statements.While>jest <xref:System.Activities.Statements.ForEach%601> <xref:System.Activities.Statements.WriteLine>tworzona przy użyciu , , , i wyrażeń.</span><span class="sxs-lookup"><span data-stu-id="2043d-109">In the following example, a workflow definition is created by using a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.While>, <xref:System.Activities.Statements.ForEach%601>, <xref:System.Activities.Statements.WriteLine>, and expressions.</span></span> <span data-ttu-id="2043d-110">Po utworzeniu definicji przepływu pracy jest wywoływana, a następnie `InspectActivity` wywoływana jest metoda.</span><span class="sxs-lookup"><span data-stu-id="2043d-110">After the workflow definition is created, it is invoked and then the `InspectActivity` method is called.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#45](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#45)]  
  
 <span data-ttu-id="2043d-111">Aby wyliczyć działania, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> jest wywoływana na działanie główne i ponownie cyklicznie na każde zwrócone działanie.</span><span class="sxs-lookup"><span data-stu-id="2043d-111">To enumerate the activities, the <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is called on the root activity, and again recursively on each returned activity.</span></span> <span data-ttu-id="2043d-112">W poniższym przykładzie <xref:System.Activities.Activity.DisplayName%2A> każdego działania i wyrażenia w drzewie działań jest zapisywany w konsoli.</span><span class="sxs-lookup"><span data-stu-id="2043d-112">In the following example, the <xref:System.Activities.Activity.DisplayName%2A> of each activity and expression in the activity tree is written to the console.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#46](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#46)]  
  
 <span data-ttu-id="2043d-113">Ten przykładowy kod zawiera następujące dane wyjściowe.</span><span class="sxs-lookup"><span data-stu-id="2043d-113">This sample code provides the following output.</span></span>  
  
 <span data-ttu-id="2043d-114">**Pozycja 1 wykazu**</span><span class="sxs-lookup"><span data-stu-id="2043d-114">**List Item 1**</span></span>  
<span data-ttu-id="2043d-115">**Pozycja 2**
**Lista Pozycja 3**
Pozycja lista**4**
**Pozycja lista 5**
Przedmioty dodane do**kolekcji.** 
 **Sekwencja** **literalnej\<<>>listy**</span><span class="sxs-lookup"><span data-stu-id="2043d-115">**List Item 2**
**List Item 3**
**List Item 4**
**List Item 5**
**Items added to collection.**
**Sequence** **Literal<List\<String>>**</span></span>  
 <span data-ttu-id="2043d-116">**Podczas**</span><span class="sxs-lookup"><span data-stu-id="2043d-116">**While**</span></span>  
 <span data-ttu-id="2043d-117">**>ciągu addtocollection\<**</span><span class="sxs-lookup"><span data-stu-id="2043d-117">**AddToCollection\<String>**</span></span>  
 <span data-ttu-id="2043d-118">**>><ICollection\<String VariableValue**</span><span class="sxs-lookup"><span data-stu-id="2043d-118">**VariableValue<ICollection\<String>>**</span></span>  
 <span data-ttu-id="2043d-119">**LambdaValue\<string>**</span><span class="sxs-lookup"><span data-stu-id="2043d-119">**LambdaValue\<String>**</span></span>  
 <span data-ttu-id="2043d-120">**>>>>ciągu listy locationreferenceValue<List\<**</span><span class="sxs-lookup"><span data-stu-id="2043d-120">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="2043d-121">**LambdaValue\<>logiczne**</span><span class="sxs-lookup"><span data-stu-id="2043d-121">**LambdaValue\<Boolean>**</span></span>  
 <span data-ttu-id="2043d-122">**>>>>ciągu listy locationreferenceValue<List\<**</span><span class="sxs-lookup"><span data-stu-id="2043d-122">**LocationReferenceValue<List\<String>>**</span></span>  
 <span data-ttu-id="2043d-123">**ForEach\<>smyczkowy**</span><span class="sxs-lookup"><span data-stu-id="2043d-123">**ForEach\<String>**</span></span>  
 <span data-ttu-id="2043d-124">**VariableValue<IEnumerable\<String>>**</span><span class="sxs-lookup"><span data-stu-id="2043d-124">**VariableValue<IEnumerable\<String>>**</span></span>  
 <span data-ttu-id="2043d-125">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="2043d-125">**WriteLine**</span></span>  
 <span data-ttu-id="2043d-126">**DelegateArgumentValue\<String>**</span><span class="sxs-lookup"><span data-stu-id="2043d-126">**DelegateArgumentValue\<String>**</span></span>  
 <span data-ttu-id="2043d-127">**Sequence**</span><span class="sxs-lookup"><span data-stu-id="2043d-127">**Sequence**</span></span>  
 <span data-ttu-id="2043d-128">**WriteLine**</span><span class="sxs-lookup"><span data-stu-id="2043d-128">**WriteLine**</span></span>  
 <span data-ttu-id="2043d-129">**Literał\<string>** Aby pobrać określone działanie zamiast wyliczania wszystkich działań, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> jest używany.</span><span class="sxs-lookup"><span data-stu-id="2043d-129">**Literal\<String>**  To retrieve a specific activity instead of enumerating all of the activities, <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> is used.</span></span> <span data-ttu-id="2043d-130">Zarówno <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> i wykonać buforowanie `WorkflowInspectionServices.CacheMetadata` metadanych, jeśli nie został wcześniej wywołany.</span><span class="sxs-lookup"><span data-stu-id="2043d-130">Both <xref:System.Activities.WorkflowInspectionServices.Resolve%2A> and <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> perform metadata caching if `WorkflowInspectionServices.CacheMetadata` has not been previously called.</span></span> <span data-ttu-id="2043d-131">Jeśli <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> został wywołany następnie <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> opiera się na istniejących metadanych.</span><span class="sxs-lookup"><span data-stu-id="2043d-131">If <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> has been called then <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> is based on the existing metadata.</span></span> <span data-ttu-id="2043d-132">W związku z tym jeśli zmiany drzewa <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>zostały <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> wprowadzone od ostatniego wywołania do , może dać nieoczekiwane wyniki.</span><span class="sxs-lookup"><span data-stu-id="2043d-132">Therefore, if tree changes have been made since the last call to <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A>, <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A> might give unexpected results.</span></span> <span data-ttu-id="2043d-133">Jeśli po wywołaniu <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>wprowadzono zmiany w przepływie pracy, metadane <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> można ponownie buforować, wywołując metodę.</span><span class="sxs-lookup"><span data-stu-id="2043d-133">If changes have been made to the workflow after calling <xref:System.Activities.WorkflowInspectionServices.GetActivities%2A>, metadata can be re-cached by calling the <xref:System.Activities.Validation.ActivityValidationServices> <xref:System.Activities.Validation.ActivityValidationServices.Validate%2A> method.</span></span> <span data-ttu-id="2043d-134">Buforowanie metadanych jest omówione w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="2043d-134">Caching metadata is discussed in the next section.</span></span>  
  
### <a name="caching-metadata"></a><span data-ttu-id="2043d-135">Buforowanie metadanych</span><span class="sxs-lookup"><span data-stu-id="2043d-135">Caching Metadata</span></span>  
 <span data-ttu-id="2043d-136">Buforowanie metadanych dla działania tworzy i sprawdza poprawność opisu działania argumenty, zmienne, działania podrzędne i delegatów działania.</span><span class="sxs-lookup"><span data-stu-id="2043d-136">Caching the metadata for an activity builds and validates a description of the activity’s arguments, variables, child activities, and activity delegates.</span></span> <span data-ttu-id="2043d-137">Metadane, domyślnie, jest buforowany przez środowisko wykonawcze, gdy działanie jest przygotowane do wykonania.</span><span class="sxs-lookup"><span data-stu-id="2043d-137">Metadata, by default, is cached by the runtime when an activity is prepared for execution.</span></span> <span data-ttu-id="2043d-138">Jeśli autor hosta przepływu pracy chce buforować metadane dla drzewa działań lub działań przed <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> tym, na przykład do podjęcia wszystkich kosztów z góry, a następnie może służyć do buforowania metadanych w żądanym czasie.</span><span class="sxs-lookup"><span data-stu-id="2043d-138">If a workflow host author wants to cache the metadata for an activity or activity tree before this, for example to take all of the cost upfront, then <xref:System.Activities.WorkflowInspectionServices.CacheMetadata%2A> can be used to cache the metadata at the desired time.</span></span>
