---
title: Tworzenie przepływu niestandardowych działań sterowania
ms.date: 03/30/2017
ms.assetid: 27f409f6-2d1d-4cfb-9765-93eb2ad667d5
ms.openlocfilehash: 2be47281335066def5c1d267cd709db5a8ff1187
ms.sourcegitcommit: 69bf8b719d4c289eec7b45336d0b933dd7927841
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/14/2019
ms.locfileid: "57847014"
---
# <a name="creating-custom-flow-control-activities"></a><span data-ttu-id="6ab1f-102">Tworzenie przepływu niestandardowych działań sterowania</span><span class="sxs-lookup"><span data-stu-id="6ab1f-102">Creating custom flow control activities</span></span>
<span data-ttu-id="6ab1f-103">.NET Framework zawiera szereg działań przepływu sterowania, które działają podobnie do abstrakcyjnej struktur programowania (takich jak <xref:System.Activities.Statements.Flowchart>) lub standardowy instrukcji programowania (takich jak <xref:System.Activities.Statements.If>).</span><span class="sxs-lookup"><span data-stu-id="6ab1f-103">The .NET Framework contains a variety of flow-control activities that function similarly to abstract programming structures (such as <xref:System.Activities.Statements.Flowchart>)   or to standard programming statements (such as <xref:System.Activities.Statements.If>).</span></span> <span data-ttu-id="6ab1f-104">W tym temacie omówiono architekturę jednego z przykładowych projektów, [ForEach Nieuniwersalne](./samples/non-generic-foreach.md).</span><span class="sxs-lookup"><span data-stu-id="6ab1f-104">This topic discusses the architecture of one of the sample projects, [Non-Generic ForEach](./samples/non-generic-foreach.md).</span></span>  
  
## <a name="creating-the-custom-class"></a><span data-ttu-id="6ab1f-105">Tworzenie niestandardowej klasy</span><span class="sxs-lookup"><span data-stu-id="6ab1f-105">Creating the custom class</span></span>  
 <span data-ttu-id="6ab1f-106">Ponieważ klasa ForEach Nieuniwersalne należy zaplanować działania podrzędne, trzeba będzie ją dziedziczyć <xref:System.Activities.NativeActivity>, od działań, które wynikają z <xref:System.Workflow.Activities.CodeActivity> nie korzystać z tej funkcji.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-106">Since the Non-Generic ForEach class will need to schedule child activities, it will need to derive from <xref:System.Activities.NativeActivity>, since activities that derive from <xref:System.Workflow.Activities.CodeActivity> do not have this functionality.</span></span>  
  
```  
public sealed class ForEach : NativeActivity  
    {  
```  
  
 <span data-ttu-id="6ab1f-107">Klasa niestandardowa wymaga kilku członków do przechowywania danych używane przez działanie i umożliwiają korzystanie z funkcji do wykonania działania podrzędne działania.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-107">The custom class requires several members to store data being used by the activity, and to provide functionality to execute the activity’s child activities.</span></span> <span data-ttu-id="6ab1f-108">Te elementy członkowskie obejmują:</span><span class="sxs-lookup"><span data-stu-id="6ab1f-108">These members include:</span></span>  
  
-   <span data-ttu-id="6ab1f-109">`valueEnumerator`: Bez publicznego <xref:System.Activities.Variable%601> typu <xref:System.Collections.IEnumerator> używana do iteracji w kolekcji elementów.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-109">`valueEnumerator`: The non-public <xref:System.Activities.Variable%601> of type <xref:System.Collections.IEnumerator> used to iterate over the collection of items.</span></span> <span data-ttu-id="6ab1f-110">Ten element jest typu <xref:System.Activities.Variable%601> , ponieważ jest używana wewnętrznie w działania, a nie argument lub właściwości publicznej, która będzie używana, gdyby zostały pochodzi spoza działania tego obiektu.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-110">This member is of type <xref:System.Activities.Variable%601> because it is used internally in the activity, rather than an argument or public property, which would be used if this object were to have an origin outside the activity.</span></span>  
  
-   <span data-ttu-id="6ab1f-111">`OnChildComplete`: Publicznie <xref:System.Activities.CompletionCallback> właściwość, która wykonuje podczas każdego elementu podrzędnego kończy wykonywanie.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-111">`OnChildComplete`: The public <xref:System.Activities.CompletionCallback> property that executes when each child completes execution.</span></span> <span data-ttu-id="6ab1f-112">Ten element członkowski jest zdefiniowany jako właściwość CLR, ponieważ różne wystąpienia działanie nie ulegnie zmianie jego wartość.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-112">This member is defined as a CLR property, since its value will not change for different instances of the activity.</span></span>  
  
-   <span data-ttu-id="6ab1f-113">`Values`: Kolekcja używana dla iteracji działanie podrzędne w danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-113">`Values`: The collection of inputs used for the iterations of the child activity.</span></span> <span data-ttu-id="6ab1f-114">Ten element jest typu <xref:System.Activities.InArgument%601>, ponieważ źródło danych znajduje się poza działania, ale zawartość kolekcji nie powinna się zmieniać podczas wykonywania działania.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-114">This member is of type <xref:System.Activities.InArgument%601>, since the origin of the data is outside the activity, but the contents of the collection is not expected to change during the execution of the activity.</span></span> <span data-ttu-id="6ab1f-115">W razie potrzeby działanie funkcji, aby zmienić zawartość tej kolekcji, podczas wykonywania działania (w celu dodania lub usunięcia działania, na przykład), ten element członkowski będzie zostały zdefiniowane jako <xref:System.Activities.ActivityAction>, który następnie może być ocenione każdym razem, gdy jego została otwarta, tak aby zmiany będą dostępne do działania.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-115">If the activity needed the functionality to change the contents of this collection while the activity was executing (to add or remove activities, for instance), this member would have been defined as an <xref:System.Activities.ActivityAction>, which then would have been evaluated every time it was accessed, so that changes would be available to the activity.</span></span>  
  
-   <span data-ttu-id="6ab1f-116">`Body`: Ten element definiuje działania do wykonania dla każdego elementu w `Values` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-116">`Body`: This member defines the activity to be executed for each item in the `Values` collection.</span></span> <span data-ttu-id="6ab1f-117">Ta składowa jest zdefiniowana jako <xref:System.Activities.ActivityAction> tak, że zostanie ono ocenione za każdym razem, gdy jest on dostępny.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-117">This member is defined as an <xref:System.Activities.ActivityAction> so that it is evaluated every time it is accessed.</span></span>  
  
-   <span data-ttu-id="6ab1f-118">`Execute`: Ta metoda używa `InternalExecute`, `OnForEachComplete`, i `GetStateAndExecute` elementów członkowskich niepublicznych, aby zaplanować wykonywanie i przypisać procedury obsługi zakończenia działania podrzędnego, zdefiniowane w elemencie członkowskim treści.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-118">`Execute`: This method uses the `InternalExecute`, `OnForEachComplete`, and `GetStateAndExecute` non-public members to schedule the execution and assign the completion handler of the child activity defined in the Body member.</span></span>  
  
-   <span data-ttu-id="6ab1f-119">`CacheMetadata`: Ten element członkowski udostępnia środowisko uruchomieniowe informacje potrzebne do wykonania działania.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-119">`CacheMetadata`: This member provides the runtime with the information it needs to execute the activity.</span></span> <span data-ttu-id="6ab1f-120">Domyślnie działania firmy `CacheMetadata` metodę poinformuje środowiska uruchomieniowego wszystkie publiczne elementy członkowskie działania, ale ponieważ to działanie używane prywatnych elementów członkowskich dla niektórych funkcji, należy go poinformowania środowiska wykonawczego o ich istnieniu aby środowisko uruchomieniowe może mieć świadomość je.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-120">By default, an activity’s `CacheMetadata` method will inform the runtime of all public members of the activity, but since this activity uses private members for some functionality, it needs to inform the runtime of their existence so that the runtime can be aware of them.</span></span> <span data-ttu-id="6ab1f-121">W tym przypadku `CacheMetadata` funkcji zostanie zastąpiona, aby prywatna `valueEnumerator` elementu członkowskiego jest możliwy.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-121">In this case, the `CacheMetadata` function is overridden so that the private `valueEnumerator` member can be accessed.</span></span> <span data-ttu-id="6ab1f-122">Ten element członkowski tworzy również argument dla wartości dla działania, aby ich mogą być przekazane do działania podczas wykonywania.</span><span class="sxs-lookup"><span data-stu-id="6ab1f-122">This member also creates an argument for the values for the activity so that they can be passed in to the activity during execution.</span></span>
