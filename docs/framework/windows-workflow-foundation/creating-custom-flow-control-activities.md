---
title: Tworzenie niestandardowego przepływu sterowania działań
ms.date: 03/30/2017
ms.assetid: 27f409f6-2d1d-4cfb-9765-93eb2ad667d5
ms.openlocfilehash: 124ecd23ca2a856b6efd0e75f816c6f188c9425f
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
ms.locfileid: "33513217"
---
# <a name="creating-custom-flow-control-activities"></a><span data-ttu-id="2b390-102">Tworzenie niestandardowego przepływu sterowania działań</span><span class="sxs-lookup"><span data-stu-id="2b390-102">Creating custom flow control activities</span></span>
<span data-ttu-id="2b390-103">.Net Framework zawiera szereg działań przepływu sterowania, które działają podobnie abstrakcyjnej struktury programowania (takich jak <xref:System.Activities.Statements.Flowchart>) lub standardowy instrukcje programowania (takich jak <xref:System.Activities.Statements.If>).</span><span class="sxs-lookup"><span data-stu-id="2b390-103">The .Net Framework contains a variety of flow-control activities that function similarly to abstract programming structures (such as <xref:System.Activities.Statements.Flowchart>)   or to standard programming statements (such as <xref:System.Activities.Statements.If>).</span></span> <span data-ttu-id="2b390-104">W tym temacie omówiono architekturę jednego z przykładowych projektów [ForEach Nieogólny](../../../docs/framework/windows-workflow-foundation/samples/non-generic-foreach.md).</span><span class="sxs-lookup"><span data-stu-id="2b390-104">This topic discusses the architecture of one of the sample projects, [Non-Generic ForEach](../../../docs/framework/windows-workflow-foundation/samples/non-generic-foreach.md).</span></span>  
  
## <a name="creating-the-custom-class"></a><span data-ttu-id="2b390-105">Tworzenie niestandardowej klasy</span><span class="sxs-lookup"><span data-stu-id="2b390-105">Creating the custom class</span></span>  
 <span data-ttu-id="2b390-106">Ponieważ klasa ForEach inne niż ogólne należy zaplanować działania podrzędne, trzeba będzie dziedziczyć <xref:System.Activities.NativeActivity>, ponieważ działaniach pochodzących z <xref:System.Workflow.Activities.CodeActivity> nie korzystać z tej funkcji.</span><span class="sxs-lookup"><span data-stu-id="2b390-106">Since the Non-Generic ForEach class will need to schedule child activities, it will need to derive from <xref:System.Activities.NativeActivity>, since activities that derive from <xref:System.Workflow.Activities.CodeActivity> do not have this functionality.</span></span>  
  
```  
public sealed class ForEach : NativeActivity  
    {  
```  
  
 <span data-ttu-id="2b390-107">Klasy niestandardowej wymaga kilka elementów członkowskich do przechowywania danych używany przez działanie i zapewniać funkcje do wykonywania działań podrzędnych działania.</span><span class="sxs-lookup"><span data-stu-id="2b390-107">The custom class requires several members to store data being used by the activity, and to provide functionality to execute the activity’s child activities.</span></span> <span data-ttu-id="2b390-108">Elementy te obejmują:</span><span class="sxs-lookup"><span data-stu-id="2b390-108">These members include:</span></span>  
  
-   <span data-ttu-id="2b390-109">`valueEnumerator`Niepublicznych <xref:System.Activities.Variable%601> typu <xref:System.Collections.IEnumerator> używanej do wykonywania iteracji w kolekcji elementów.</span><span class="sxs-lookup"><span data-stu-id="2b390-109">`valueEnumerator`: The non-public <xref:System.Activities.Variable%601> of type <xref:System.Collections.IEnumerator> used to iterate over the collection of items.</span></span> <span data-ttu-id="2b390-110">Ten element jest typu <xref:System.Activities.Variable%601> , ponieważ jest używana wewnętrznie w działania, a nie argument lub właściwość publiczna, które mają być używane, jeśli ten obiekt mieć początek poza danym działaniem.</span><span class="sxs-lookup"><span data-stu-id="2b390-110">This member is of type <xref:System.Activities.Variable%601> because it is used internally in the activity, rather than an argument or public property, which would be used if this object were to have an origin outside the activity.</span></span>  
  
-   <span data-ttu-id="2b390-111">`OnChildComplete`: Publicznego <xref:System.Activities.CompletionCallback> właściwość, która wykonuje podczas każdego elementu podrzędnego zakończeniem wykonywania.</span><span class="sxs-lookup"><span data-stu-id="2b390-111">`OnChildComplete`: The public <xref:System.Activities.CompletionCallback> property that executes when each child completes execution.</span></span> <span data-ttu-id="2b390-112">Ten element członkowski jest zdefiniowany jako właściwość CLR, ponieważ jej wartość nie zmieni się w różnych wystąpieniach działania.</span><span class="sxs-lookup"><span data-stu-id="2b390-112">This member is defined as a CLR property, since its value will not change for different instances of the activity.</span></span>  
  
-   <span data-ttu-id="2b390-113">`Values`: Kolekcja dane wejściowe, używane do iteracji działania podrzędnego.</span><span class="sxs-lookup"><span data-stu-id="2b390-113">`Values`: The collection of inputs used for the iterations of the child activity.</span></span> <span data-ttu-id="2b390-114">Ten element jest typu <xref:System.Activities.InArgument%601>, ponieważ źródło danych jest poza danym działaniem, ale nie oczekiwano zawartości kolekcji można zmienić podczas wykonywania działania.</span><span class="sxs-lookup"><span data-stu-id="2b390-114">This member is of type <xref:System.Activities.InArgument%601>, since the origin of the data is outside the activity, but the contents of the collection is not expected to change during the execution of the activity.</span></span> <span data-ttu-id="2b390-115">W razie potrzeby działania funkcji, aby zmienić zawartość tej kolekcji, podczas wykonywania działania (w celu dodania lub usunięcia działania, na przykład) tego elementu członkowskiego czy zostały zdefiniowane jako <xref:System.Activities.ActivityAction>, który następnie może być ocenione zawsze został dostęp do niej, dzięki czemu zmiany będą dostępne do działania.</span><span class="sxs-lookup"><span data-stu-id="2b390-115">If the activity needed the functionality to change the contents of this collection while the activity was executing (to add or remove activities, for instance), this member would have been defined as an <xref:System.Activities.ActivityAction>, which then would have been evaluated every time it was accessed, so that changes would be available to the activity.</span></span>  
  
-   <span data-ttu-id="2b390-116">`Body`: Ten element definiuje działanie do wykonania dla każdego elementu w `Values` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="2b390-116">`Body`: This member defines the activity to be executed for each item in the `Values` collection.</span></span> <span data-ttu-id="2b390-117">Ten element członkowski jest zdefiniowany jako <xref:System.Activities.ActivityAction> tak, aby była ona sprawdzana za każdym razem, gdy jest on dostępny.</span><span class="sxs-lookup"><span data-stu-id="2b390-117">This member is defined as an <xref:System.Activities.ActivityAction> so that it is evaluated every time it is accessed.</span></span>  
  
-   <span data-ttu-id="2b390-118">`Execute`: Ta metoda używa `InternalExecute`, `OnForEachComplete`, i `GetStateAndExecute` niepubliczne elementy członkowskie, aby zaplanować wykonanie i przypisać obsługi ukończenie działania podrzędnego zdefiniowane w elemencie członkowskim treści.</span><span class="sxs-lookup"><span data-stu-id="2b390-118">`Execute`: This method uses the `InternalExecute`, `OnForEachComplete`, and `GetStateAndExecute` non-public members to schedule the execution and assign the completion handler of the child activity defined in the Body member.</span></span>  
  
-   <span data-ttu-id="2b390-119">`CacheMetadata`: Ten element członkowski zapewnia środowisko uruchomieniowe informacje potrzebne do wykonania działania.</span><span class="sxs-lookup"><span data-stu-id="2b390-119">`CacheMetadata`: This member provides the runtime with the information it needs to execute the activity.</span></span> <span data-ttu-id="2b390-120">Domyślnie działania w `CacheMetadata` metody poinformuje środowiska uruchomieniowego wszystkich publicznych elementów członkowskich działania, ale ponieważ tego działania używa prywatne elementy członkowskie dla niektórych funkcji, należy go poinformować środowiska wykonawczego o ich istnienia środowiska uruchomieniowego można mieć świadomość je.</span><span class="sxs-lookup"><span data-stu-id="2b390-120">By default, an activity’s `CacheMetadata` method will inform the runtime of all public members of the activity, but since this activity uses private members for some functionality, it needs to inform the runtime of their existence so that the runtime can be aware of them.</span></span> <span data-ttu-id="2b390-121">W takim przypadku `CacheMetadata` funkcja jest wyłączona, aby prywatna `valueEnumerator` można można uzyskać dostępu do elementu członkowskiego.</span><span class="sxs-lookup"><span data-stu-id="2b390-121">In this case, the `CacheMetadata` function is overridden so that the private `valueEnumerator` member can be accessed.</span></span> <span data-ttu-id="2b390-122">Ten element członkowski tworzy również argument wartości dla działania, aby ich można przekazać do działania podczas wykonywania.</span><span class="sxs-lookup"><span data-stu-id="2b390-122">This member also creates an argument for the values for the activity so that they can be passed in to the activity during execution.</span></span>
