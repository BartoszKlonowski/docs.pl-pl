---
title: Aktywacja wystąpienia
ms.date: 03/30/2017
ms.assetid: 134c3f70-5d4e-46d0-9d49-469a6643edd8
ms.openlocfilehash: 088722ba19a1f38e8a341e34a8344963021f1113
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/28/2019
ms.locfileid: "64584921"
---
# <a name="instance-activation"></a><span data-ttu-id="289d5-102">Aktywacja wystąpienia</span><span class="sxs-lookup"><span data-stu-id="289d5-102">Instance Activation</span></span>
<span data-ttu-id="289d5-103">Store wystąpienia przepływu pracy SQL uruchamia zadania wewnętrzne, okresowo budzi się i wykrywa wystąpienia przepływu pracy możliwy do uruchomienia lub aktywowalnej w bazie danych trwałości.</span><span class="sxs-lookup"><span data-stu-id="289d5-103">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects runnable or activatable workflow instances in the persistence database.</span></span> <span data-ttu-id="289d5-104">Jeśli zostaną znalezione wystąpienia możliwy do uruchomienia przepływu pracy, powiadamia hosta przepływu pracy, który jest w stanie aktywacji wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="289d5-104">If it finds a runnable workflow instance, it notifies the workflow host that is capable of activating the instance.</span></span> <span data-ttu-id="289d5-105">Jeśli Magazyn wystąpienia wykryje wystąpienia przepływu pracy aktywowalnej, powiadamia ogólnego hosta, który aktywuje hosta przepływu pracy, który z kolei uruchamia wystąpienie przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="289d5-105">If the instance store finds an activatable workflow instance, it notifies a generic host that activates a workflow host, which in turn runs the workflow instance.</span></span> <span data-ttu-id="289d5-106">W poniższych sekcjach w tym temacie opisano proces aktywacji wystąpienia szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="289d5-106">The following sections in this topic explain the instance activation process in detail.</span></span>  
  
## <a name="RunnableSection"></a> <span data-ttu-id="289d5-107">Wykrywanie i aktywowanie wystąpienia możliwy do uruchomienia przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="289d5-107">Detecting and Activating Runnable Workflow Instances</span></span>  
 <span data-ttu-id="289d5-108">Store wystąpienia przepływu pracy SQL traktuje wystąpienie przepływu pracy *możliwy do uruchomienia* Jeśli wystąpienie nie jest w stanie wstrzymania lub stanu ukończenia, a także spełnia następujące warunki:</span><span class="sxs-lookup"><span data-stu-id="289d5-108">The SQL Workflow Instance Store considers a workflow instance *runnable* if the instance is not in the suspended state or the completed state and satisfies the following conditions:</span></span>  
  
- <span data-ttu-id="289d5-109">Wystąpienie jest odblokowana i ma oczekujące czasomierza, który wygasł.</span><span class="sxs-lookup"><span data-stu-id="289d5-109">The instance is unlocked and has a pending timer that has expired.</span></span>  
  
- <span data-ttu-id="289d5-110">Wystąpienie ma blokadę wygasła.</span><span class="sxs-lookup"><span data-stu-id="289d5-110">The instance has an expired lock on it.</span></span>  
  
- <span data-ttu-id="289d5-111">Wystąpienie jest odblokowana i jego stan to **Executing**.</span><span class="sxs-lookup"><span data-stu-id="289d5-111">The instance is unlocked and its status is **Executing**.</span></span>  
  
 <span data-ttu-id="289d5-112">Wywołuje Store wystąpienia przepływu pracy SQL <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> gdy znajdzie możliwe do uruchomienia wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="289d5-112">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> when it finds a runnable instance.</span></span> <span data-ttu-id="289d5-113">Po tym SqlWorkflowInstanceStore Zatrzymuje monitorowanie aż do momentu <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> jest wywoływana jeden raz w sklepie.</span><span class="sxs-lookup"><span data-stu-id="289d5-113">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="289d5-114">Hosta przepływu pracy, które zostały zasubskrybowane przez dla <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> i możliwością ładowania uruchamia wystąpienie <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> względem magazynu wystąpienia, aby załadować wystąpienia do pamięci.</span><span class="sxs-lookup"><span data-stu-id="289d5-114">A workflow host that has subscribed for the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> and capable of loading the instance executes the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> against the instance store to load the instance into memory.</span></span> <span data-ttu-id="289d5-115">Hosta przepływu pracy jest uznawany za stanie ładowanie wystąpienia przepływu pracy, jeśli host i wystąpienia ma właściwość metadanych **WorkflowServiceType** ustawić taką samą wartość.</span><span class="sxs-lookup"><span data-stu-id="289d5-115">A workflow host is considered capable of loading a workflow instance if the host and the instance have metadata property **WorkflowServiceType** set to the same value.</span></span>  
  
## <a name="detecting-and-activating-activatable-workflow-instances"></a><span data-ttu-id="289d5-116">Wykrywanie i aktywowanie wystąpienia Aktywowalnej przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="289d5-116">Detecting and Activating Activatable Workflow Instances</span></span>  
 <span data-ttu-id="289d5-117">Wystąpienie przepływu pracy jest uważany za *aktywowalnej* wystąpienie jest możliwy do uruchomienia, jeśli ma nie hosta przepływu pracy, który jest w stanie ładowanie wystąpienia jest uruchomiona na komputerze.</span><span class="sxs-lookup"><span data-stu-id="289d5-117">A workflow instance is considered *activatable* if the instance is runnable and there is no workflow host that is capable of loading the instance is running on the computer.</span></span> <span data-ttu-id="289d5-118">Znajdują się wykrywanie i aktywowanie wystąpień możliwych do uruchomienia przepływu pracy nad definicją wystąpienia możliwy do uruchomienia przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="289d5-118">See Detecting and Activating Runnable Workflow Instances above for the definition of a runnable workflow instance.</span></span>  
  
 <span data-ttu-id="289d5-119">Wywołuje Store wystąpienia przepływu pracy SQL <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> gdy znajdzie wystąpienie aktywowalnej przepływu pracy w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="289d5-119">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> when it finds an activatable workflow instance in the database.</span></span> <span data-ttu-id="289d5-120">Po tym SqlWorkflowInstanceStore Zatrzymuje monitorowanie aż do momentu <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> jest wywoływana jeden raz w sklepie.</span><span class="sxs-lookup"><span data-stu-id="289d5-120">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="289d5-121">Gdy ogólny hosta, który ma subskrypcję dla <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> odbiera zdarzenia, wykonuje <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> względem magazynu wystąpienia, aby uzyskać parametry aktywacji wymagane do utworzenia hosta przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="289d5-121">When a generic host that has subscribed for the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> receives the event, it executes the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> against the instance store to obtain activation parameters required to create a workflow host.</span></span> <span data-ttu-id="289d5-122">Ogólny hosta korzysta z tych parametrów aktywacji w celu utworzenia hosta przepływu pracy, który z kolei ładuje i uruchamia wystąpienie możliwy do uruchomienia usługi.</span><span class="sxs-lookup"><span data-stu-id="289d5-122">The generic host uses these activation parameters to create a workflow host, which in turn loads and runs the runnable service instance.</span></span>  
  
## <a name="generic-hosts"></a><span data-ttu-id="289d5-123">Ogólny hostów</span><span class="sxs-lookup"><span data-stu-id="289d5-123">Generic Hosts</span></span>  
 <span data-ttu-id="289d5-124">Ogólny host jest hostem z wartością właściwości metadanych **WorkflowServiceType** ogólnego hostów jest równa **WorkflowServiceType.Any** do wskazania, że może obsługiwać dowolny typ przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="289d5-124">A generic host is a host with the value of the metadata property **WorkflowServiceType** for generic hosts is set to **WorkflowServiceType.Any** to indicate that it can handle any workflow type.</span></span> <span data-ttu-id="289d5-125">Host ogólnego ma parametr XName o nazwie **ActivationType**.</span><span class="sxs-lookup"><span data-stu-id="289d5-125">A generic host has an XName parameter named **ActivationType**.</span></span>  
  
 <span data-ttu-id="289d5-126">Obecnie usługa Store wystąpienia przepływu pracy SQL obsługuje ogólny hostów przy użyciu wartości parametru ActivationType równa **WAS**.</span><span class="sxs-lookup"><span data-stu-id="289d5-126">Currently, the SQL Workflow Instance Store supports generic hosts with value of the ActivationType parameter set to **WAS**.</span></span> <span data-ttu-id="289d5-127">Jeśli nie ustawiono ActivationType WAS, zgłasza Store wystąpienia przepływu pracy SQL <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span><span class="sxs-lookup"><span data-stu-id="289d5-127">If the ActivationType is not set to WAS, the SQL Workflow Instance Store throws an <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span></span> <span data-ttu-id="289d5-128">Usługa zarządzania przepływu pracy, który jest dostarczany z [!INCLUDE[dublin](../../../includes/dublin-md.md)] jest ogólny hosta, który ma ustawiony typ aktywacji **WAS**.</span><span class="sxs-lookup"><span data-stu-id="289d5-128">The Workflow Management Service that ships with the [!INCLUDE[dublin](../../../includes/dublin-md.md)] is a generic host that has the activation type set to **WAS**.</span></span>  
  
 <span data-ttu-id="289d5-129">W celu aktywacji WAS ogólnego hosta wymaga zestawu parametrów aktywacji w celu uzyskania adresu punktu końcowego, w którym można aktywować nowe hosty.</span><span class="sxs-lookup"><span data-stu-id="289d5-129">For WAS activation, a generic host requires a set of activation parameters to derive the endpoint address at which new hosts can be activated.</span></span> <span data-ttu-id="289d5-130">Parametry aktywacji WAS aktywacji są nazwę lokacji, ścieżka do aplikacji względem lokacji oraz ścieżkę usługi względem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="289d5-130">The activation parameters for WAS activation are name of the site, path to the application relative to the site, and path to the service relative to the application.</span></span> <span data-ttu-id="289d5-131">Store wystąpienia przepływu pracy SQL przechowuje te parametry aktywacji podczas wykonywania <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span><span class="sxs-lookup"><span data-stu-id="289d5-131">The SQL Workflow Instance Store stores these activation parameters during the execution of the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span></span>  
  
## <a name="runnable-instances-detection-period"></a><span data-ttu-id="289d5-132">Okres wykrywania wystąpień możliwych do uruchomienia</span><span class="sxs-lookup"><span data-stu-id="289d5-132">Runnable Instances Detection Period</span></span>  
 <span data-ttu-id="289d5-133">**Możliwy do uruchomienia okres wykrywania wystąpień** właściwość Store wystąpienia przepływu pracy SQL określa okres czasu, po upływie którego Store wystąpienia przepływu pracy SQL uruchamia zadanie wykrywania, aby wykrywać wszelkie możliwe do uruchomienia lub aktywowalnej przepływu pracy wystąpień w bazie danych trwałości od poprzedniego cyklu wykrywania.</span><span class="sxs-lookup"><span data-stu-id="289d5-133">The **Runnable Instances Detection Period** property of the SQL Workflow Instance Store specifies the time period after which the SQL Workflow Instance Store runs a detection task to detect any runnable or activatable workflow instances in the persistence database after the previous detection cycle.</span></span> <span data-ttu-id="289d5-134">Zobacz [możliwy do uruchomienia okres wykrywania wystąpień](runnable-instances-detection-period.md) Aby uzyskać więcej informacji na temat tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="289d5-134">See [Runnable Instances Detection Period](runnable-instances-detection-period.md) for more details on this property.</span></span>
