---
title: Aktywacja wystąpienia
ms.date: 03/30/2017
ms.assetid: 134c3f70-5d4e-46d0-9d49-469a6643edd8
ms.openlocfilehash: 1fd30d9d440c06c03e726ed1f1ddbebb0d5f7e8c
ms.sourcegitcommit: bc293b14af795e0e999e3304dd40c0222cf2ffe4
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/26/2020
ms.locfileid: "96279938"
---
# <a name="instance-activation"></a><span data-ttu-id="40cd1-102">Aktywacja wystąpienia</span><span class="sxs-lookup"><span data-stu-id="40cd1-102">Instance Activation</span></span>

<span data-ttu-id="40cd1-103">Magazyn wystąpień przepływu pracy SQL uruchamia zadanie wewnętrzne, które okresowo wznawia i wykrywa wystąpienia przepływu pracy możliwy do uruchomienia lub aktywowalnej w bazie danych trwałości.</span><span class="sxs-lookup"><span data-stu-id="40cd1-103">The SQL Workflow Instance Store runs an internal task that periodically wakes up and detects runnable or activatable workflow instances in the persistence database.</span></span> <span data-ttu-id="40cd1-104">Jeśli odnajdzie wystąpienie przepływu pracy możliwy do uruchomienia, powiadamia hosta przepływu pracy, który może aktywować wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="40cd1-104">If it finds a runnable workflow instance, it notifies the workflow host that is capable of activating the instance.</span></span> <span data-ttu-id="40cd1-105">Jeśli magazyn wystąpień znajdzie wystąpienie przepływu pracy aktywowalnej, powiadamia hosta ogólnego, który aktywuje hosta przepływu pracy, który z kolei uruchamia wystąpienie przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="40cd1-105">If the instance store finds an activatable workflow instance, it notifies a generic host that activates a workflow host, which in turn runs the workflow instance.</span></span> <span data-ttu-id="40cd1-106">Poniższe sekcje w tym temacie wyjaśniają proces aktywacji wystąpienia szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="40cd1-106">The following sections in this topic explain the instance activation process in detail.</span></span>  
  
## <a name="detecting-and-activating-runnable-workflow-instances"></a><a name="RunnableSection"></a> <span data-ttu-id="40cd1-107">Wykrywanie i aktywowanie wystąpień przepływu pracy możliwy do uruchomienia</span><span class="sxs-lookup"><span data-stu-id="40cd1-107">Detecting and Activating Runnable Workflow Instances</span></span>  

 <span data-ttu-id="40cd1-108">Magazyn wystąpień przepływu pracy SQL traktuje wystąpienie przepływu pracy *możliwy do uruchomienia* , jeśli wystąpienie nie jest w stanie wstrzymania lub ukończone, i spełnia następujące warunki:</span><span class="sxs-lookup"><span data-stu-id="40cd1-108">The SQL Workflow Instance Store considers a workflow instance *runnable* if the instance is not in the suspended state or the completed state and satisfies the following conditions:</span></span>  
  
- <span data-ttu-id="40cd1-109">Wystąpienie jest odblokowane i ma oczekujący czasomierz, który wygasł.</span><span class="sxs-lookup"><span data-stu-id="40cd1-109">The instance is unlocked and has a pending timer that has expired.</span></span>  
  
- <span data-ttu-id="40cd1-110">Wystąpienie ma wygasłą blokadę.</span><span class="sxs-lookup"><span data-stu-id="40cd1-110">The instance has an expired lock on it.</span></span>  
  
- <span data-ttu-id="40cd1-111">Wystąpienie jest odblokowane i jego stan jest **wykonywany**.</span><span class="sxs-lookup"><span data-stu-id="40cd1-111">The instance is unlocked and its status is **Executing**.</span></span>  
  
 <span data-ttu-id="40cd1-112">Magazyn wystąpień programu SQL Workflow podnosi wartość <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> podczas znajdowania wystąpienia możliwy do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="40cd1-112">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> when it finds a runnable instance.</span></span> <span data-ttu-id="40cd1-113">Po wykonaniu tej obiekt SqlWorkflowInstanceStore monitorowanie zostanie zatrzymane do momentu <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> wywołania programu w sklepie.</span><span class="sxs-lookup"><span data-stu-id="40cd1-113">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="40cd1-114">Host przepływu pracy, który subskrybuje dla <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> i może załadować wystąpienie, wykonuje <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> względem magazynu wystąpień, aby załadować wystąpienie do pamięci.</span><span class="sxs-lookup"><span data-stu-id="40cd1-114">A workflow host that has subscribed for the <xref:System.Activities.DurableInstancing.HasRunnableWorkflowEvent> and capable of loading the instance executes the <xref:System.Activities.DurableInstancing.TryLoadRunnableWorkflowCommand> against the instance store to load the instance into memory.</span></span> <span data-ttu-id="40cd1-115">Host przepływu pracy jest uznawany za możliwy do załadowania wystąpienia przepływu pracy, Jeśli host i wystąpienie mają właściwość metadanych **WorkflowServiceType** ustawioną na tę samą wartość.</span><span class="sxs-lookup"><span data-stu-id="40cd1-115">A workflow host is considered capable of loading a workflow instance if the host and the instance have metadata property **WorkflowServiceType** set to the same value.</span></span>  
  
## <a name="detecting-and-activating-activatable-workflow-instances"></a><span data-ttu-id="40cd1-116">Wykrywanie i aktywowanie wystąpień przepływu pracy Aktywowalnej</span><span class="sxs-lookup"><span data-stu-id="40cd1-116">Detecting and Activating Activatable Workflow Instances</span></span>  

 <span data-ttu-id="40cd1-117">Wystąpienie przepływu pracy jest uznawane za *aktywowalnej* , jeśli wystąpienie jest możliwy do uruchomienia i nie ma hosta przepływu pracy, który jest w stanie załadować wystąpienie na komputerze.</span><span class="sxs-lookup"><span data-stu-id="40cd1-117">A workflow instance is considered *activatable* if the instance is runnable and there is no workflow host that is capable of loading the instance is running on the computer.</span></span> <span data-ttu-id="40cd1-118">Zobacz wykrywanie i aktywowanie wystąpień przepływu pracy możliwy do uruchomienia powyżej dla definicji wystąpienia przepływu pracy możliwy do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="40cd1-118">See Detecting and Activating Runnable Workflow Instances above for the definition of a runnable workflow instance.</span></span>  
  
 <span data-ttu-id="40cd1-119">Magazyn wystąpień programu SQL Workflow podnosi <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> czas, gdy odnajdzie wystąpienie przepływu pracy aktywowalnej w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="40cd1-119">The SQL Workflow Instance Store raises the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> when it finds an activatable workflow instance in the database.</span></span> <span data-ttu-id="40cd1-120">Po wykonaniu tej obiekt SqlWorkflowInstanceStore monitorowanie zostanie zatrzymane do momentu <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> wywołania programu w sklepie.</span><span class="sxs-lookup"><span data-stu-id="40cd1-120">After this, the SqlWorkflowInstanceStore stops monitoring until the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> is called once on the store.</span></span>  
  
 <span data-ttu-id="40cd1-121">Gdy host ogólny, który ma subskrypcję dla <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> odbiera zdarzenia, wykonuje <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> względem magazynu wystąpienia, aby uzyskać parametry aktywacji wymagane do utworzenia hosta przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="40cd1-121">When a generic host that has subscribed for the <xref:System.Activities.DurableInstancing.HasActivatableWorkflowEvent> receives the event, it executes the <xref:System.Activities.DurableInstancing.QueryActivatableWorkflowsCommand> against the instance store to obtain activation parameters required to create a workflow host.</span></span> <span data-ttu-id="40cd1-122">Host ogólny używa tych parametrów aktywacji do utworzenia hosta przepływu pracy, który z kolei ładuje i uruchamia wystąpienie usługi możliwy do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="40cd1-122">The generic host uses these activation parameters to create a workflow host, which in turn loads and runs the runnable service instance.</span></span>  
  
## <a name="generic-hosts"></a><span data-ttu-id="40cd1-123">Hosty ogólne</span><span class="sxs-lookup"><span data-stu-id="40cd1-123">Generic Hosts</span></span>  

 <span data-ttu-id="40cd1-124">Host generyczny jest hostem o wartości właściwości metadanych **WorkflowServiceType** dla hostów ogólnych jest ustawiony na **WorkflowServiceType. any** , aby wskazać, że może obsługiwać dowolny typ przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="40cd1-124">A generic host is a host with the value of the metadata property **WorkflowServiceType** for generic hosts is set to **WorkflowServiceType.Any** to indicate that it can handle any workflow type.</span></span> <span data-ttu-id="40cd1-125">Host ogólny ma parametr XName o nazwie **ActivationType**.</span><span class="sxs-lookup"><span data-stu-id="40cd1-125">A generic host has an XName parameter named **ActivationType**.</span></span>  
  
 <span data-ttu-id="40cd1-126">Obecnie magazyn wystąpień programu SQL Workflow obsługuje hosty ogólne z wartością parametru ActivationType ustawionego na wartość **was**.</span><span class="sxs-lookup"><span data-stu-id="40cd1-126">Currently, the SQL Workflow Instance Store supports generic hosts with value of the ActivationType parameter set to **WAS**.</span></span> <span data-ttu-id="40cd1-127">Jeśli wartość ActivationType nie jest ustawiona na WAS, magazyn wystąpień programu SQL Workflow zgłasza <xref:System.Runtime.DurableInstancing.InstancePersistenceException> .</span><span class="sxs-lookup"><span data-stu-id="40cd1-127">If the ActivationType is not set to WAS, the SQL Workflow Instance Store throws an <xref:System.Runtime.DurableInstancing.InstancePersistenceException>.</span></span> <span data-ttu-id="40cd1-128">Usługa zarządzania przepływami pracy dostarczana z funkcjami hostingu systemu Windows Server AppFabric jest hostem ogólnym z ustawionym typem aktywacji **was**.</span><span class="sxs-lookup"><span data-stu-id="40cd1-128">The Workflow Management Service that ships with the hosting features of Windows Server AppFabric is a generic host that has the activation type set to **WAS**.</span></span>  
  
 <span data-ttu-id="40cd1-129">W przypadku aktywacji programu Host ogólny wymaga zestawu parametrów aktywacji do uzyskania adresu punktu końcowego, na którym można aktywować nowe hosty.</span><span class="sxs-lookup"><span data-stu-id="40cd1-129">For WAS activation, a generic host requires a set of activation parameters to derive the endpoint address at which new hosts can be activated.</span></span> <span data-ttu-id="40cd1-130">Parametry aktywacji dla usługi WAS są nazwami lokacji, ścieżką do aplikacji względem lokacji oraz ścieżką do usługi względem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="40cd1-130">The activation parameters for WAS activation are name of the site, path to the application relative to the site, and path to the service relative to the application.</span></span> <span data-ttu-id="40cd1-131">Magazyn wystąpień przepływu pracy SQL przechowuje te parametry aktywacji podczas wykonywania <xref:System.Activities.DurableInstancing.SaveWorkflowCommand> .</span><span class="sxs-lookup"><span data-stu-id="40cd1-131">The SQL Workflow Instance Store stores these activation parameters during the execution of the <xref:System.Activities.DurableInstancing.SaveWorkflowCommand>.</span></span>  
  
## <a name="runnable-instances-detection-period"></a><span data-ttu-id="40cd1-132">Okres wykrywania wystąpień możliwych do uruchomienia</span><span class="sxs-lookup"><span data-stu-id="40cd1-132">Runnable Instances Detection Period</span></span>  

 <span data-ttu-id="40cd1-133">Właściwość **okres wykrywania wystąpień możliwy do uruchomienia** magazynu wystąpień przepływu pracy SQL określa czas, po upływie którego magazyn wystąpień przepływu pracy SQL uruchamia zadanie wykrywania w celu wykrycia dowolnego wystąpienia przepływu pracy możliwy do uruchomienia lub aktywowalnej w bazie danych trwałości po poprzednim cyklu wykrywania.</span><span class="sxs-lookup"><span data-stu-id="40cd1-133">The **Runnable Instances Detection Period** property of the SQL Workflow Instance Store specifies the time period after which the SQL Workflow Instance Store runs a detection task to detect any runnable or activatable workflow instances in the persistence database after the previous detection cycle.</span></span> <span data-ttu-id="40cd1-134">Zobacz [okres wykrywania wystąpień możliwy do uruchomienia](runnable-instances-detection-period.md) , aby uzyskać więcej informacji na temat tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="40cd1-134">See [Runnable Instances Detection Period](runnable-instances-detection-period.md) for more details on this property.</span></span>
