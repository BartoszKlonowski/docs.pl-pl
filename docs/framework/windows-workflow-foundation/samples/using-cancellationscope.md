---
title: Używanie działania CancellationScope
ms.date: 03/30/2017
ms.assetid: 39c5c338-b316-43d6-b7fe-a543281dd1ec
ms.openlocfilehash: 82d44fff869f207c09dc7685fc3470630e001a59
ms.sourcegitcommit: 2eceb05f1a5bb261291a1f6a91c5153727ac1c19
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/05/2018
ms.locfileid: "43731524"
---
# <a name="using-cancellationscope"></a><span data-ttu-id="8b72c-102">Używanie działania CancellationScope</span><span class="sxs-lookup"><span data-stu-id="8b72c-102">Using CancellationScope</span></span>
<span data-ttu-id="8b72c-103">W tym przykładzie przedstawiono sposób użycia <xref:System.Activities.Statements.CancellationScope> działania można anulować pracy w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8b72c-103">This sample demonstrates how to use the <xref:System.Activities.Statements.CancellationScope> activity to cancel work in an application.</span></span>  
  
 <span data-ttu-id="8b72c-104">Wiele składniki warstwy środkowej i usługi zależą od dobrze znanych konstrukcji programowania transakcji w celu obsługi anulowania dla nich.</span><span class="sxs-lookup"><span data-stu-id="8b72c-104">Many middle tier components and services rely on the well-known programming construct of transactions to handle cancellation for them.</span></span>  <span data-ttu-id="8b72c-105">Jednak istnieje wiele sytuacji, w których nie można wykonać w ramach transakcji pracy musi zostać anulowana.</span><span class="sxs-lookup"><span data-stu-id="8b72c-105">However, there are many situations in which work that cannot be done in a transaction must be canceled.</span></span>  <span data-ttu-id="8b72c-106">Za pomocą anulowania jest trudniejsze niż za pomocą transakcji, ponieważ najpierw musi być śledzona pracy, która musi zostać anulowana.</span><span class="sxs-lookup"><span data-stu-id="8b72c-106">Using cancellation is more difficult than using transactions, because work that must be canceled must first be tracked.</span></span> [!INCLUDE[netfx_current_short](../../../../includes/netfx-current-short-md.md)]<span data-ttu-id="8b72c-107"> ułatwia to, zapewniając <xref:System.Activities.Statements.CancellationScope> działania.</span><span class="sxs-lookup"><span data-stu-id="8b72c-107"> helps you with this by providing a <xref:System.Activities.Statements.CancellationScope> activity.</span></span>  
  
 <span data-ttu-id="8b72c-108">Anulowanie mogą być wyzwalane, lub z w ramach działania z elementu nadrzędnego tego działania.</span><span class="sxs-lookup"><span data-stu-id="8b72c-108">Cancellation can be triggered either from within an activity or from the activity's parent.</span></span>  <span data-ttu-id="8b72c-109">Działania podrzędne odbywa się przy ich działania nadrzędnego (takie jak <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.Parallel>, <xref:System.Activities.Statements.Flowchart>, lub niestandardowych działań złożonych).</span><span class="sxs-lookup"><span data-stu-id="8b72c-109">Child activities are scheduled by their parent activity (such as a <xref:System.Activities.Statements.Sequence>, <xref:System.Activities.Statements.Parallel>, <xref:System.Activities.Statements.Flowchart>, or a custom composite activity).</span></span>  <span data-ttu-id="8b72c-110">Działania nadrzędnego może anulować działania podrzędne jakiegokolwiek powodu.</span><span class="sxs-lookup"><span data-stu-id="8b72c-110">The parent activity can cancel child activities for any reason.</span></span>  <span data-ttu-id="8b72c-111">Na przykład <xref:System.Activities.Statements.Parallel> działania o trzy gałęzie podrzędne spowoduje anulowanie pozostałych gałęzie podrzędne w każdym przypadku, gdy zostanie zakończona gałęzi i <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> wyrażenie daje w wyniku `true`.</span><span class="sxs-lookup"><span data-stu-id="8b72c-111">For example, a <xref:System.Activities.Statements.Parallel> activity with three child branches will cancel the remaining child branches whenever it completes a branch and the <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> expression evaluates to `true`.</span></span> <span data-ttu-id="8b72c-112">Przepływ pracy może być anulowane zewnętrznie przez aplikację hosta przez wywołanie metody <xref:System.Activities.WorkflowApplication.Cancel%2A>.</span><span class="sxs-lookup"><span data-stu-id="8b72c-112">The workflow can also be canceled externally by the host application by calling <xref:System.Activities.WorkflowApplication.Cancel%2A>.</span></span>  
  
 <span data-ttu-id="8b72c-113">Do użycia <xref:System.Activities.Statements.CancellationScope> działania, umieść pracy, którą musi zostać anulowane w <xref:System.Activities.Statements.CancellationScope.Body%2A> właściwość i umieść pracy, która jest wykonywana po anulowaniu do <xref:System.Activities.Statements.CancellationScope.CancellationHandler%2A> właściwości.</span><span class="sxs-lookup"><span data-stu-id="8b72c-113">To use the <xref:System.Activities.Statements.CancellationScope> activity, put the work that needs to be canceled into the <xref:System.Activities.Statements.CancellationScope.Body%2A> property, and put the work that is performed after cancellation into the <xref:System.Activities.Statements.CancellationScope.CancellationHandler%2A> property.</span></span>  
  
 <span data-ttu-id="8b72c-114">Niniejszy przykład pokazuje, anulowanie działania z w ramach działania.</span><span class="sxs-lookup"><span data-stu-id="8b72c-114">This sample demonstrates cancelling an activity from within the activity itself.</span></span>  
  
 <span data-ttu-id="8b72c-115">Scenariusz, w którym w przykładzie użyto w celu zademonstrowania <xref:System.Activities.Statements.CancellationScope> działania jest klientem, chce kupić biletu do Miami tak szybko, jak to możliwe.</span><span class="sxs-lookup"><span data-stu-id="8b72c-115">The scenario that the sample uses to demonstrate the <xref:System.Activities.Statements.CancellationScope> activity is a client wanting to buy a ticket to Miami as soon as possible.</span></span> <span data-ttu-id="8b72c-116">Istnieją dwa biura w podróży, które firmy.</span><span class="sxs-lookup"><span data-stu-id="8b72c-116">There are two travel agencies that want the business.</span></span> <span data-ttu-id="8b72c-117">W przykładzie użyto dwóch <xref:System.Activities.Statements.CancellationScope> w ramach <xref:System.Activities.Statements.Parallel> działania do modelowania tej logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="8b72c-117">The sample uses two <xref:System.Activities.Statements.CancellationScope> within a <xref:System.Activities.Statements.Parallel> activity to model this business logic.</span></span> <span data-ttu-id="8b72c-118"><xref:System.Activities.Statements.Parallel.CompletionCondition%2A> z <xref:System.Activities.Statements.Parallel> działania jest ustawiona na `true`; od <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> jest zaznaczone, po zakończeniu dowolnej innej gałęzi, spowoduje to pozostałych gałęzi zostaną anulowane po zakończeniu pierwszej gałęzi.</span><span class="sxs-lookup"><span data-stu-id="8b72c-118">The <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> of the <xref:System.Activities.Statements.Parallel> activity is set to `true`; since the <xref:System.Activities.Statements.Parallel.CompletionCondition%2A> is checked after any branch completes, this will cause the remaining branch to be canceled after the first branch completes.</span></span> <span data-ttu-id="8b72c-119">Aplikacja kliencka żąda zarówno agencje kupić--ticket, a gdy pierwsza z nich potwierdzi zakupionych--ticket, aplikacji spowoduje anulowanie zamówienia w innych agencji.</span><span class="sxs-lookup"><span data-stu-id="8b72c-119">The client application asks both agencies to buy the ticket, and when the first one confirms that the ticket has been bought, the application cancels the order at the other agency.</span></span>  
  
## <a name="to-use-this-sample"></a><span data-ttu-id="8b72c-120">Aby użyć tego przykładu</span><span class="sxs-lookup"><span data-stu-id="8b72c-120">To use this sample</span></span>  
  
1.  <span data-ttu-id="8b72c-121">Za pomocą [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], otwórz plik rozwiązania CancelationScopeXAML.sln.</span><span class="sxs-lookup"><span data-stu-id="8b72c-121">Using [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)], open the CancelationScopeXAML.sln solution file.</span></span>  
  
2.  <span data-ttu-id="8b72c-122">Aby skompilować rozwiązanie, naciśnij klawisze CTRL + SHIFT + B.</span><span class="sxs-lookup"><span data-stu-id="8b72c-122">To build the solution, press CTRL+SHIFT+B.</span></span>  
  
3.  <span data-ttu-id="8b72c-123">Aby uruchomić rozwiązanie, naciśnij kombinację klawiszy CTRL + F5.</span><span class="sxs-lookup"><span data-stu-id="8b72c-123">To run the solution, press CTRL+F5.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="8b72c-124">Przykłady może już być zainstalowany na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="8b72c-124">The samples may already be installed on your machine.</span></span> <span data-ttu-id="8b72c-125">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="8b72c-125">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="8b72c-126">Jeśli ten katalog nie istnieje, przejdź do strony [Windows Communication Foundation (WCF) i przykłady Windows Workflow Foundation (WF) dla platformy .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) do pobierania wszystkich Windows Communication Foundation (WCF) i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] przykładów.</span><span class="sxs-lookup"><span data-stu-id="8b72c-126">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="8b72c-127">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="8b72c-127">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Built-InActivities\CancellationScope`