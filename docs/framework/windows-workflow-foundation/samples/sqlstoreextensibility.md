---
title: SQLStoreExtensibility
ms.date: 03/30/2017
ms.assetid: 5da1b5a3-f144-41ba-b9c4-02818b28b15d
ms.openlocfilehash: f49d05244cf9f65a8e06f39c7e40391aaebd9f77
ms.sourcegitcommit: 76a304c79a32aa13889ebcf4b9789a4542b48e3e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/13/2018
ms.locfileid: "45517349"
---
# <a name="sqlstoreextensibility"></a><span data-ttu-id="5dd2d-102">SQLStoreExtensibility</span><span class="sxs-lookup"><span data-stu-id="5dd2d-102">SQLStoreExtensibility</span></span>
<span data-ttu-id="5dd2d-103">Niniejszy przykład pokazuje, używania i konfigurowania o podwyższonym poziomie właściwości magazynu wystąpień przepływu pracy SQL.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-103">This sample demonstrates the use and configuration of promoted properties in the SQL workflow instance store.</span></span> <span data-ttu-id="5dd2d-104">Magazyn wystąpień przepływu pracy SQL stanowi implementację oparte na SQL magazynu wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-104">The SQL workflow instance store is a SQL-based implementation of an instance store.</span></span> <span data-ttu-id="5dd2d-105">Umożliwia to wystąpienie zapisać swój stan i załadować stanu z bazy danych programu SQL Server lub SQL Server Express i.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-105">It allows an instance to save its state and load its state to and from a SQL Server or SQL Server Express database.</span></span> <span data-ttu-id="5dd2d-106">Funkcja rozszerzalność magazynu zezwala użytkownikowi na definiowanie właściwości, które są przechowywane w magazynie wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-106">The store extensibility feature allows the user to define properties that are stored in the instance store.</span></span> <span data-ttu-id="5dd2d-107">Te właściwości są wyświetlane w widoku właściwości o podwyższonym poziomie, który umożliwia użytkownikowi zapytania dla nich.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-107">These properties are displayed in a promoted properties view that allows the user to query for them.</span></span>  
  
 <span data-ttu-id="5dd2d-108">W tym przykładzie składa się z przepływu pracy, który implementuje usługę zliczania.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-108">This sample consists of a workflow that implements a counting service.</span></span> <span data-ttu-id="5dd2d-109">Po wywołaniu metody uruchamiania usługi, ta usługa liczy się od 0 do 29.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-109">Once the service's start method is invoked, the service counts from 0 to 29.</span></span> <span data-ttu-id="5dd2d-110">Licznik jest zwiększany co 2 sekundy.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-110">The counter is incremented once every 2 seconds.</span></span> <span data-ttu-id="5dd2d-111">Przepływ pracy po każdym liczba będzie się powtarzać.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-111">After each count, the workflow persists.</span></span> <span data-ttu-id="5dd2d-112">Bieżąca wartość licznika jest przechowywane w magazynie wystąpienia jako właściwość o podwyższonym poziomie.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-112">The current counter value is stored in the instance store as a promoted property.</span></span>  
  
 <span data-ttu-id="5dd2d-113">Zliczanie przepływu pracy jest może być samodzielnie hostowane przez hosta usługi przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-113">The Counting Workflow is self-hosted by a Workflow Service Host.</span></span> <span data-ttu-id="5dd2d-114">Program `Main` metoda wykonuje następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="5dd2d-114">The program's `Main` method performs the following actions:</span></span>  
  
-   <span data-ttu-id="5dd2d-115">Tworzy wystąpienie hosta usługi przepływu pracy, który obsługuje zliczania przepływu pracy i definiuje punktów końcowych, zgodnie z którymi zliczanie przepływu pracy można z Tobą skontaktować.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-115">Creates an instance of the Workflow Service Host that hosts the Counting Workflow and defines the endpoints under which the Counting Workflow can be reached.</span></span>  
  
-   <span data-ttu-id="5dd2d-116">Definiuje SQL przepływu pracy wystąpienie magazynu zachowanie, które służy do konfigurowania magazynu wystąpień przepływu pracy SQL.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-116">Defines a SQL workflow instance store behavior, which is used to configure the SQL workflow instance store.</span></span> <span data-ttu-id="5dd2d-117">Magazyn jest zobowiązany do traktowania `CountStatus` jako właściwość o podwyższonym poziomie.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-117">The store is instructed to treat `CountStatus` as a promoted property.</span></span>  
  
-   <span data-ttu-id="5dd2d-118">Tworzy klienta, który wywołuje metodę uruchamiania zliczania przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-118">Creates a client that calls the start method of the counting workflow.</span></span>  
  
 <span data-ttu-id="5dd2d-119">Po uruchomieniu programu wartość licznika automatycznie rozpoczyna się zliczania.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-119">Once the program is started, the counter automatically starts counting.</span></span> <span data-ttu-id="5dd2d-120">Należy pamiętać, że może to potrwać kilka sekund, aby załadować wystąpienia i skonfigurować Magazyn wystąpień przepływu pracy SQL.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-120">Note that it might take a few seconds to load the instance and configure the SQL workflow instance store.</span></span>  
  
 <span data-ttu-id="5dd2d-121">Aby promować wartość licznika, jako właściwość niestandardową, należy podjąć następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="5dd2d-121">To promote the counter value as a custom property, the following steps must be taken:</span></span>  
  
1.  <span data-ttu-id="5dd2d-122">Klasy `CounterStatus` definiuje rozszerzenie typu <xref:System.Activities.Persistence.PersistenceParticipant>, który jest używany przez działania umożliwiają określanie wartości zmienne stanu.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-122">The class `CounterStatus` defines an instance extension of type <xref:System.Activities.Persistence.PersistenceParticipant>, which is used by activities to supply the state variables.</span></span> <span data-ttu-id="5dd2d-123">`Count` jest zdefiniowany jako wartość tylko do zapisu.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-123">`Count` is defined as a write-only value.</span></span> <span data-ttu-id="5dd2d-124">Gdy wystąpienie przepływu pracy do punktu stanu trwałego, rozszerzenie wystąpienia zapisuje `Count` właściwości do zbierania danych trwałości.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-124">When a workflow instance comes to a persistence point, the instance extension saves the `Count` property into the persistence data collection.</span></span>  
  
2.  <span data-ttu-id="5dd2d-125">Podczas tworzenia instance store nową właściwość `CountStatus`, jest zdefiniowana za pomocą `store.Promote()` metody.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-125">When creating the instance store, a new property, `CountStatus`, is defined through the `store.Promote()` method.</span></span>  
  
3.  <span data-ttu-id="5dd2d-126">Przepływ pracy `SaveCounter` działania przypisuje bieżącą wartość licznika `Count` pola stan.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-126">The workflow's `SaveCounter` activity assigns the current counter value to the `Count` status field.</span></span>  
  
### <a name="to-use-this-sample"></a><span data-ttu-id="5dd2d-127">Aby użyć tego przykładu</span><span class="sxs-lookup"><span data-stu-id="5dd2d-127">To use this sample</span></span>  
  
1.  <span data-ttu-id="5dd2d-128">Utwórz wystąpienie bazy danych magazynu.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-128">Create the instance store database.</span></span>  
  
    1.  <span data-ttu-id="5dd2d-129">Otwórz [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-129">Open a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt.</span></span>  
  
    2.  <span data-ttu-id="5dd2d-130">Przejdź do katalogu próbki (\WF\Basic\Persistence\SqlStoreExtensibility\CS), a następnie uruchom CreateInstanceStore.cmd w [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-130">Navigate to the sample directory (\WF\Basic\Persistence\SqlStoreExtensibility\CS) and run CreateInstanceStore.cmd in the [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt.</span></span>  
  
        > [!WARNING]
        >  <span data-ttu-id="5dd2d-131">Skrypt CreateInstanceStore.cmd próbuje utworzyć bazę danych w domyślnym wystąpieniu programu SQL Server 2008 Express.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-131">The CreateInstanceStore.cmd script attempts to create the database on the default instance of SQL Server 2008 Express.</span></span> <span data-ttu-id="5dd2d-132">Jeśli chcesz zainstalować bazę danych w innym wystąpieniu, należy zmodyfikować skrypt, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-132">If you want to install the database on a different instance, modify the script to do so.</span></span>  
  
2.  <span data-ttu-id="5dd2d-133">Otwórz [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] załadować rozwiązanie SqlStoreExtensibility.sln i skompiluj go, naciskając klawisze CTRL + SHIFT + B.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-133">Open [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] and load the SqlStoreExtensibility.sln solution and build it by pressing CTRL+SHIFT+B.</span></span>  
  
    > [!WARNING]
    >  <span data-ttu-id="5dd2d-134">Jeśli baza danych jest zainstalowana na innych niż domyślne wystąpienie programu SQL Server, należy zaktualizować parametry połączenia w kodzie przed kompilowania rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-134">If you installed the database on a non-default instance of SQL Server, update the connection string in the code prior to building the solution.</span></span>  
  
3.  <span data-ttu-id="5dd2d-135">Uruchom aplikację przykładową z uprawnieniami administratora, przejdź do katalogu bin projektu (\WF\Basic\Persistence\SqlStoreExtensibility\bin\Debug) w [!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)], klikając prawym przyciskiem myszy SqlStoreExtensibility.exe i wybierając opcję **Uruchom jako Administrator**.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-135">Run the sample with administrator privileges by navigating to the project’s bin directory (\WF\Basic\Persistence\SqlStoreExtensibility\bin\Debug) in [!INCLUDE[fileExplorer](../../../../includes/fileexplorer-md.md)], right-clicking SqlStoreExtensibility.exe and selecting **Run as Administrator**.</span></span>  
  
### <a name="to-verify-the-sample-is-working-correctly"></a><span data-ttu-id="5dd2d-136">Aby zweryfikować próbki działa prawidłowo</span><span class="sxs-lookup"><span data-stu-id="5dd2d-136">To verify the sample is working correctly</span></span>  
  
1.  <span data-ttu-id="5dd2d-137">Użyj programu SQL Server Management Studio do wyświetlenia zawartości tabeli wystąpienia, wybierając **baz danych**, **objekt InstanceStore**, a następnie  **System.ServiceModel.Activities.DurableInstancing.InstanceTable** w Eksploratorze obiektów kliknij prawym przyciskiem myszy **System.ServiceModel.Activities.DurableInstancing.InstanceTable** i wybierz  **Zaznacz 1000 pierwszych wierszy**.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-137">Use SQL Server Management Studio to view the contents of the instance table by selecting **Databases**, **InstanceStore**, and then **System.ServiceModel.Activities.DurableInstancing.InstanceTable** in the Object Explorer, right-click **System.ServiceModel.Activities.DurableInstancing.InstanceTable** and select **Select Top 1000 Rows**.</span></span> <span data-ttu-id="5dd2d-138">Aby uzyskać więcej informacji na temat programu SQL Server Management Studio, zobacz [wprowadzenie do programu SQL Server Management Studio](https://go.microsoft.com/fwlink/?LinkId=165645)</span><span class="sxs-lookup"><span data-stu-id="5dd2d-138">For more information about SQL Server Management Studio, see [Introducing SQL Server Management Studio](https://go.microsoft.com/fwlink/?LinkId=165645)</span></span>  
  
2.  <span data-ttu-id="5dd2d-139">Obserwuj wystąpienia przepływu pracy, na liście.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-139">Observe the workflow instances listed.</span></span>  
  
3.  <span data-ttu-id="5dd2d-140">W [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] wiersza polecenia, uruchom skrypt QueryInstanceStore.cmd znajduje się w katalogu próbki (\WF\Basic\Persistence\SqlStoreExtensibility).</span><span class="sxs-lookup"><span data-stu-id="5dd2d-140">In a [!INCLUDE[vs2010](../../../../includes/vs2010-md.md)] command prompt, run the QueryInstanceStore.cmd script located in the sample directory (\WF\Basic\Persistence\SqlStoreExtensibility).</span></span>  
  
4.  <span data-ttu-id="5dd2d-141">Sprawdź wartość licznika jest wyświetlany w obszarze **CountStatus**.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-141">Observe the counter value displayed under **CountStatus**.</span></span>  
  
5.  <span data-ttu-id="5dd2d-142">Uruchom skrypt kilka razy się **CountStats** wartość zmiany.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-142">Run the script a few times to see the **CountStats** value change.</span></span>  
  
6.  <span data-ttu-id="5dd2d-143">Naciśnij klawisz ENTER, aby zakończyć działanie aplikacji przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-143">Press ENTER to terminate the workflow application.</span></span>  
  
### <a name="to-uninstall-the-sample"></a><span data-ttu-id="5dd2d-144">Aby odinstalować próbki</span><span class="sxs-lookup"><span data-stu-id="5dd2d-144">To uninstall the sample</span></span>  
  
1.  <span data-ttu-id="5dd2d-145">Usuń wystąpienie bazy danych magazynu, uruchamiając skrypt RemoveInstanceStore.cmd znajduje się w katalogu próbki (\WF\Basic\Persistence\SqlStoreExtensibility).</span><span class="sxs-lookup"><span data-stu-id="5dd2d-145">Remove the instance store database by running the RemoveInstanceStore.cmd script located in the sample directory (\WF\Basic\Persistence\SqlStoreExtensibility).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="5dd2d-146">Przykłady może już być zainstalowany na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-146">The samples may already be installed on your machine.</span></span> <span data-ttu-id="5dd2d-147">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="5dd2d-147">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="5dd2d-148">Jeśli ten katalog nie istnieje, przejdź do strony [Windows Communication Foundation (WCF) i przykłady Windows Workflow Foundation (WF) dla platformy .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) do pobierania wszystkich Windows Communication Foundation (WCF) i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] przykładów.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-148">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](https://go.microsoft.com/fwlink/?LinkId=150780) to download all Windows Communication Foundation (WCF) and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="5dd2d-149">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="5dd2d-149">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Basic\Persistence\SQLStoreExtensibility`  
  
## <a name="see-also"></a><span data-ttu-id="5dd2d-150">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="5dd2d-150">See Also</span></span>  
 [<span data-ttu-id="5dd2d-151">Trwałość przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="5dd2d-151">Workflow Persistence</span></span>](../../../../docs/framework/windows-workflow-foundation/workflow-persistence.md)  
 [<span data-ttu-id="5dd2d-152">Usługi przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="5dd2d-152">Workflow Services</span></span>](../../../../docs/framework/wcf/feature-details/workflow-services.md)  
 [<span data-ttu-id="5dd2d-153">Przykłady trwałości i hostingu AppFabric</span><span class="sxs-lookup"><span data-stu-id="5dd2d-153">AppFabric Hosting and Persistence Samples</span></span>](https://go.microsoft.com/fwlink/?LinkId=193961)
