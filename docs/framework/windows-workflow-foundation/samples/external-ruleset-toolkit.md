---
title: "Zewnętrzne Toolkit zestaw reguł"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: a306d283-a031-475e-aa01-9ae86e7adcb0
caps.latest.revision: "7"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 6e3ec30edc65fd136fff56b1469664a6ba3b44f3
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/18/2017
---
# <a name="external-ruleset-toolkit"></a><span data-ttu-id="a737e-102">Zewnętrzne Toolkit zestaw reguł</span><span class="sxs-lookup"><span data-stu-id="a737e-102">External Ruleset Toolkit</span></span>
<span data-ttu-id="a737e-103">Zwykle podczas stosowania reguł aplikacji przepływu pracy, reguły są częścią zestawu.</span><span class="sxs-lookup"><span data-stu-id="a737e-103">Normally when rules are used within a workflow application, the rules are part of the assembly.</span></span> <span data-ttu-id="a737e-104">W niektórych scenariuszach można zachować zestawów reguł, niezależnie od zestawu, dzięki czemu mogą być aktualizowane bez ponowne tworzenie i wdrażanie zestawu przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-104">In some scenarios, you may want to maintain the RuleSets separately from the assembly so that they can be updated without rebuilding and deploying the workflow assembly.</span></span> <span data-ttu-id="a737e-105">W tym przykładzie pozwala na zarządzanie i edytować zestawów reguł w bazie danych oraz uzyskać dostęp do tych zestawów reguł z przepływu pracy w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="a737e-105">This sample allows you to manage and edit RuleSets in a database and access those RuleSets from a workflow at runtime.</span></span> <span data-ttu-id="a737e-106">Dzięki temu uruchomionych wystąpień przepływu pracy automatycznie zastosować zmian zestaw reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-106">This enables running workflow instances to automatically incorporate RuleSet changes.</span></span>  
  
 <span data-ttu-id="a737e-107">Przykład zewnętrznych narzędzi zestaw reguł zawiera narzędzie oparte na formularzach systemu Windows, które służy do zarządzania i Edytuj zestaw reguł wersji w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="a737e-107">The External RuleSet Toolkit sample contains a Windows Forms-based tool that you can use to manage and edit RuleSet versions in a database.</span></span> <span data-ttu-id="a737e-108">Zawiera także działania i usługa hosta do wykonywania tych zasad.</span><span class="sxs-lookup"><span data-stu-id="a737e-108">It also includes an activity and a host service for executing those rules.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a737e-109">W tym przykładzie wymaga [programu Microsoft SQL Server](http://go.microsoft.com/fwlink/?LinkId=96181).</span><span class="sxs-lookup"><span data-stu-id="a737e-109">This sample requires [Microsoft SQL Server](http://go.microsoft.com/fwlink/?LinkId=96181).</span></span>  
  
 [!INCLUDE[vsprvsext](../../../../includes/vsprvsext-md.md)]<span data-ttu-id="a737e-110">zawiera Edytor zestaw reguł, w ramach programu Windows Workflow Foundation (WF).</span><span class="sxs-lookup"><span data-stu-id="a737e-110"> provides a RuleSet editor as part of the Windows Workflow Foundation (WF).</span></span> <span data-ttu-id="a737e-111">Ten edytor można uruchomić przez dwukrotne kliknięcie `Policy` działania w przepływie pracy; go serializuje zdefiniowanych Obiekt RuleSet w pliku Rules skojarzonego z przepływem pracy ( `Policy` działanie jest uruchomione wystąpienie zestaw reguł dla przepływu pracy).</span><span class="sxs-lookup"><span data-stu-id="a737e-111">You can start this editor by double-clicking the `Policy` activity in a workflow; it serializes the defined RuleSet object to the .rules file associated with the workflow (a `Policy` activity runs a RuleSet instance against the workflow).</span></span> <span data-ttu-id="a737e-112">Plik Rules jest kompilowany do zestawu jako zasób podczas kompilowania projektu przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-112">The .rules file is compiled into the assembly as a resource when you build the workflow project.</span></span>  
  
 <span data-ttu-id="a737e-113">Składniki następujące przykładowe:</span><span class="sxs-lookup"><span data-stu-id="a737e-113">The components of this sample include:</span></span>  
  
-   <span data-ttu-id="a737e-114">Zestaw reguł graficzne narzędzie interfejsu użytkownika służącego do edycji i zarządzanie wersjami zestaw reguł w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="a737e-114">A RuleSet graphical user interface tool that you can use to edit and manage RuleSet versions in the database.</span></span>  
  
-   <span data-ttu-id="a737e-115">Usługa zestaw reguł, jest skonfigurowana w aplikacji hosta, który uzyskuje dostęp do zestawów reguł z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="a737e-115">A RuleSet service that is configured on the host application and accesses RuleSets from the database.</span></span>  
  
-   <span data-ttu-id="a737e-116">`ExternalPolicy` Działanie, które żądania zestaw reguł z usługi zestaw reguł i jest uruchamiana zestaw reguł dla przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-116">An `ExternalPolicy` activity that requests a RuleSet from the RuleSet service and runs the RuleSet against the workflow.</span></span>  
  
 <span data-ttu-id="a737e-117">Interakcja składników jest pokazany na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="a737e-117">The interaction of the components is shown in Figure 1.</span></span> <span data-ttu-id="a737e-118">W kolejnych sekcjach opisano każdego składnika.</span><span class="sxs-lookup"><span data-stu-id="a737e-118">The sections that follow describe each component.</span></span>  
  
 <span data-ttu-id="a737e-119">![Omówienie pojęć zewnętrznych Przykładowy zestaw reguł](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesettoolkitsampleoverview.gif "RuleSetToolkitSampleOverview")</span><span class="sxs-lookup"><span data-stu-id="a737e-119">![External RuleSet Sample Conceptual Overview](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesettoolkitsampleoverview.gif "RuleSetToolkitSampleOverview")</span></span>  
  
 <span data-ttu-id="a737e-120">Rysunek 1: Omówienie przykładowej</span><span class="sxs-lookup"><span data-stu-id="a737e-120">Figure 1: Sample Overview</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="a737e-121">Próbki mogą być zainstalowane na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="a737e-121">The samples may already be installed on your machine.</span></span> <span data-ttu-id="a737e-122">Przed kontynuowaniem sprawdź, czy są dostępne dla następującego katalogu (ustawienie domyślne).</span><span class="sxs-lookup"><span data-stu-id="a737e-122">Check for the following (default) directory before continuing.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples`  
>   
>  <span data-ttu-id="a737e-123">Jeśli ten katalog nie istnieje, przejdź do [Windows Communication Foundation (WCF) i Windows Workflow Foundation (WF) przykłady dla programu .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) pobrać wszystkie [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] i [!INCLUDE[wf1](../../../../includes/wf1-md.md)] próbek.</span><span class="sxs-lookup"><span data-stu-id="a737e-123">If this directory does not exist, go to [Windows Communication Foundation (WCF) and Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://go.microsoft.com/fwlink/?LinkId=150780) to download all [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] and [!INCLUDE[wf1](../../../../includes/wf1-md.md)] samples.</span></span> <span data-ttu-id="a737e-124">W tym przykładzie znajduje się w następującym katalogu.</span><span class="sxs-lookup"><span data-stu-id="a737e-124">This sample is located in the following directory.</span></span>  
>   
>  `<InstallDrive>:\WF_WCF_Samples\WF\Scenario\ExternalRuleSetToolKit`  
  
## <a name="ruleset-tool"></a><span data-ttu-id="a737e-125">Narzędzie zestaw reguł</span><span class="sxs-lookup"><span data-stu-id="a737e-125">RuleSet Tool</span></span>  
 <span data-ttu-id="a737e-126">Zrzut ekranu narzędzia zestaw reguł jest pokazany na rysunku 2.</span><span class="sxs-lookup"><span data-stu-id="a737e-126">A screen shot of the RuleSet tool is shown in Figure 2.</span></span> <span data-ttu-id="a737e-127">Z **magazynu reguły** menu można załadować dostępnych zestawów reguł z bazy danych i zapisać zmodyfikowanych zestawów reguł w magazynie.</span><span class="sxs-lookup"><span data-stu-id="a737e-127">From the **Rule Store** menu, you can load the available RuleSets from the database and save modified RuleSets back to the store.</span></span> <span data-ttu-id="a737e-128">Plik konfiguracji aplikacji zawiera parametry połączenia bazy danych dla bazy danych zestaw reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-128">An application configuration file provides a database connection string for the RuleSet database.</span></span> <span data-ttu-id="a737e-129">Po uruchomieniu narzędzia automatycznie ładuje zestawów reguł z bazy danych skonfigurowane.</span><span class="sxs-lookup"><span data-stu-id="a737e-129">When you start the tool, it automatically loads the RuleSets from the configured database.</span></span>  
  
 <span data-ttu-id="a737e-130">![Zewnętrzne RuleSet Toolket przykładowe dane wyjściowe](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetbrowser.gif "RuleSetBrowser")</span><span class="sxs-lookup"><span data-stu-id="a737e-130">![External RuleSet Toolket Sample output](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetbrowser.gif "RuleSetBrowser")</span></span>  
  
 <span data-ttu-id="a737e-131">Rysunek 2: Przeglądarki zestaw reguł</span><span class="sxs-lookup"><span data-stu-id="a737e-131">Figure 2: RuleSet Browser</span></span>  
  
 <span data-ttu-id="a737e-132">Narzędzie RuleSet dotyczy numery wersji głównej i pomocniczej zestawów reguł, umożliwiając jednocześnie Obsługa i przechowywać wiele wersji (Narzędzie konfiguracji blokowania lub innych zapewnia funkcje zarządzania, oprócz możliwości przechowywania wersji).</span><span class="sxs-lookup"><span data-stu-id="a737e-132">The RuleSet tool applies major and minor version numbers to the RuleSets, allowing you to simultaneously maintain and store multiple versions (the tool provides no locking or other configuration management features in addition to the versioning capability).</span></span> <span data-ttu-id="a737e-133">Za pomocą narzędzia, możesz utworzyć nowe wersje RuleSet lub usunąć istniejące wersje.</span><span class="sxs-lookup"><span data-stu-id="a737e-133">Using the tool, you can create new RuleSet versions or delete existing versions.</span></span> <span data-ttu-id="a737e-134">Po kliknięciu **nowy**, narzędzie tworzy nową nazwę zestaw reguł i ma zastosowanie w wersji 1.0.</span><span class="sxs-lookup"><span data-stu-id="a737e-134">When you click **New**, the tool creates a new RuleSet name and applies version 1.0.</span></span> <span data-ttu-id="a737e-135">Po skopiowaniu wersji narzędzie tworzy kopię wybranej wersji zestaw reguł, reguły zawarte w tym i przypisuje numery wersji nowy, unikatowy.</span><span class="sxs-lookup"><span data-stu-id="a737e-135">When you copy a version, the tool creates a copy of the selected RuleSet version, including the contained rules, and assigns new, unique version numbers.</span></span> <span data-ttu-id="a737e-136">Numery wersji te są oparte na numery wersji istniejących zestawów reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-136">These version numbers are based on the version numbers of existing RuleSets.</span></span> <span data-ttu-id="a737e-137">Można zmienić liczby nazwa i wersja zestaw reguł przy użyciu skojarzonymi polami w formularzu.</span><span class="sxs-lookup"><span data-stu-id="a737e-137">You can change the RuleSet name and version numbers using the associated fields on the form.</span></span>  
  
 <span data-ttu-id="a737e-138">Po kliknięciu **Edycja reguł**, zostanie uruchomiony Edytor zestaw reguł, jak pokazano na rysunku 3.</span><span class="sxs-lookup"><span data-stu-id="a737e-138">When you click **Edit Rules**, the RuleSet editor starts, as shown in Figure 3.</span></span>  
  
 <span data-ttu-id="a737e-139">![Zewnętrzne RuleSet Toolkit przykładowe dane wyjściowe](../../../../docs/framework/windows-workflow-foundation/samples/media/ruleseteditor.gif "RuleSetEditor")</span><span class="sxs-lookup"><span data-stu-id="a737e-139">![External RuleSet Toolkit Sample Output](../../../../docs/framework/windows-workflow-foundation/samples/media/ruleseteditor.gif "RuleSetEditor")</span></span>  
  
 <span data-ttu-id="a737e-140">Rysunek 3: Zestaw reguł edytora</span><span class="sxs-lookup"><span data-stu-id="a737e-140">Figure 3: RuleSet Editor</span></span>  
  
 <span data-ttu-id="a737e-141">To jest ponownie hosting okno dialogowe Edytor, który jest częścią programu Windows Workflow Foundation [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] dodatku.</span><span class="sxs-lookup"><span data-stu-id="a737e-141">This is a re-hosting of the editor dialog that is part of the Windows Workflow Foundation [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] add-in.</span></span> <span data-ttu-id="a737e-142">Zapewnia te same funkcje, w tym obsługę funkcji Intellisense.</span><span class="sxs-lookup"><span data-stu-id="a737e-142">It provides the same functionality, including Intellisense support.</span></span> <span data-ttu-id="a737e-143">Reguły są tworzone na typ docelowy (takich jak przepływ pracy), który jest skojarzony z RuleSet w narzędziu; Po kliknięciu **Przeglądaj** w oknie dialogowym Narzędzia główne, **selektor typu przepływupracy/** zostanie wyświetlone okno dialogowe, jak pokazano na rysunku 4.</span><span class="sxs-lookup"><span data-stu-id="a737e-143">The rules are authored against a target type (such as a workflow) that is associated with the RuleSet in the tool; when you click **Browse** in the main tool dialog, the **Workflow/Type Selector** dialog appears, as shown in Figure 4.</span></span>  
  
 <span data-ttu-id="a737e-144">![Przepływ pracy &#47; Typ zaznaczenia](../../../../docs/framework/windows-workflow-foundation/samples/media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span><span class="sxs-lookup"><span data-stu-id="a737e-144">![Workflow &#47;Type Selection](../../../../docs/framework/windows-workflow-foundation/samples/media/71f08d57-e8f2-499e-8151-ece2cbdcabfd.gif "71f08d57-e8f2-499e-8151-ece2cbdcabfd")</span></span>  
  
 <span data-ttu-id="a737e-145">Rysunek 4: Selektor typu/przepływu pracy</span><span class="sxs-lookup"><span data-stu-id="a737e-145">Figure 4: Workflow/Type Selector</span></span>  
  
 <span data-ttu-id="a737e-146">Można użyć **selektor typu przepływupracy/** okna dialogowego, aby określić zestaw i określonego typu w tym zestawie.</span><span class="sxs-lookup"><span data-stu-id="a737e-146">You can use the **Workflow/Type Selector** dialog to specify an assembly and a specific type within that assembly.</span></span> <span data-ttu-id="a737e-147">Ten typ jest typem docelowym, względem którego zasady zostały utworzone (i uruchom).</span><span class="sxs-lookup"><span data-stu-id="a737e-147">This type is the target type against which the rules are authored (and run).</span></span> <span data-ttu-id="a737e-148">W wielu przypadkach typ docelowy jest przepływu pracy lub innego typu działania.</span><span class="sxs-lookup"><span data-stu-id="a737e-148">In many cases, the target type is a workflow or some other activity type.</span></span> <span data-ttu-id="a737e-149">Można jednak uruchomić zestaw reguł dla dowolnego typu .NET.</span><span class="sxs-lookup"><span data-stu-id="a737e-149">However, you can run a RuleSet against any .NET type.</span></span>  
  
 <span data-ttu-id="a737e-150">Ścieżka do pliku zestawu i typ `name are stored with the` zestaw reguł w bazie danych, dzięki czemu przy zestaw reguł są pobierane z bazy danych, narzędzie próbuje automatycznie załadować typ docelowy.</span><span class="sxs-lookup"><span data-stu-id="a737e-150">The path to the assembly file and the type `name are stored with the` RuleSet in the database, so that when the RuleSet is retrieved from the database, the tool attempts to automatically load the target type.</span></span>  
  
 <span data-ttu-id="a737e-151">Po kliknięciu **OK** w **selektor typu przepływupracy/** okna dialogowego i sprawdza poprawność wybranego typu przed zestaw reguł, aby upewnić się, że typ docelowy ma wszystkie elementy członkowskie przywoływany przez zasady.</span><span class="sxs-lookup"><span data-stu-id="a737e-151">When you click **OK** in the **Workflow/Type Selector** dialog, it validates the selected type against the RuleSet, to ensure that the target type has all the members referenced by the rules.</span></span> <span data-ttu-id="a737e-152">Błędy są wyświetlane w **błędy sprawdzania poprawności** okna dialogowego (patrz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="a737e-152">Errors are shown in a **Validation Errors** dialog (see Figure 5).</span></span> <span data-ttu-id="a737e-153">Możesz kontynuować zmiany, pomimo błędy, lub kliknij przycisk **anulować**.</span><span class="sxs-lookup"><span data-stu-id="a737e-153">You can choose to continue with the change despite the errors, or click **Cancel**.</span></span> <span data-ttu-id="a737e-154">Z **narzędzia** menu w oknie dialogowym Narzędzia główne, można kliknąć **weryfikacji** ponownego sprawdzania poprawności wersji RuleSet przed działania docelowego.</span><span class="sxs-lookup"><span data-stu-id="a737e-154">From the **Tools** menu in the main tool dialog, you can click **Validate** to re-validate the RuleSet version against the target activity.</span></span>  
  
 <span data-ttu-id="a737e-155">![Błędy sprawdzania poprawności z zewnętrznego próbki RuleSet](../../../../docs/framework/windows-workflow-foundation/samples/media/validationerrorsruleset.png "ValidationErrorsRuleSet")</span><span class="sxs-lookup"><span data-stu-id="a737e-155">![Validation Errors from External RuleSet Sample](../../../../docs/framework/windows-workflow-foundation/samples/media/validationerrorsruleset.png "ValidationErrorsRuleSet")</span></span>  
  
 <span data-ttu-id="a737e-156">Rysunek 5: Błędy sprawdzania poprawności</span><span class="sxs-lookup"><span data-stu-id="a737e-156">Figure 5: Validation Errors</span></span>  
  
 <span data-ttu-id="a737e-157">Z **danych** menu Narzędzia, można importować i eksportować zestawów reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-157">From the **Data** menu in the tool, you can import and export RuleSets.</span></span> <span data-ttu-id="a737e-158">Po kliknięciu **importu**, pojawi się okno dialogowe selektor plików, w którym można wybrać plik rules.</span><span class="sxs-lookup"><span data-stu-id="a737e-158">When you click **Import**, a file-chooser dialog appears, from which you can select a .rules file.</span></span> <span data-ttu-id="a737e-159">Może to być lub może nie być plik początkowo utworzony w [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a737e-159">This may or may not be a file initially created in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].</span></span> <span data-ttu-id="a737e-160">Plik Rules powinien zawierać serializacji `RuleDefinitions` wystąpienia, które zawiera kolekcję warunków i kolekcję zestawów reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-160">The .rules file should contain a serialized `RuleDefinitions` instance that contains a collection of conditions and a collection of RuleSets.</span></span> <span data-ttu-id="a737e-161">Narzędzie nie używa Kolekcja warunków, ale używa `RuleDefinitions` format Rules, aby zezwolić na interakcję z [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] środowiska.</span><span class="sxs-lookup"><span data-stu-id="a737e-161">The tool does not use the conditions collection, but it does use the `RuleDefinitions` .rules format to allow interaction with the [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] environment.</span></span>  
  
 <span data-ttu-id="a737e-162">Po wybraniu pliku Rules **selektora RuleSet** zostanie wyświetlone okno dialogowe (patrz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="a737e-162">After selecting a .rules file, a **RuleSet Selector** dialog appears (see Figure 6).</span></span> <span data-ttu-id="a737e-163">Okno dialogowe umożliwia Wybierz zestawy reguł z pliku, który chcesz zaimportować (wartość domyślna Określa wszystkie zestawy reguł).</span><span class="sxs-lookup"><span data-stu-id="a737e-163">You can use the dialog to select the RuleSets from the file that you want to import (the default specifies all RuleSets).</span></span> <span data-ttu-id="a737e-164">Zestawy reguł w pliku Rules nie mają numery wersji, ponieważ ich wersji w ramach projektu WF jest taka sama jak wersja zestawu.</span><span class="sxs-lookup"><span data-stu-id="a737e-164">RuleSets in the .rules file do not have version numbers, because their versioning within a WF project is the same as the version of the assembly.</span></span> <span data-ttu-id="a737e-165">Podczas procesu importowania narzędzie automatycznie przypisuje dalej dostępne główny numer wersji (które można zmienić po zaimportowaniu); można wyświetlić numery wersji przypisanej **selektora RuleSet** listy.</span><span class="sxs-lookup"><span data-stu-id="a737e-165">During the importing process, the tool automatically assigns the next available major version number (which you can change after importing); you can see the assigned version numbers in the **RuleSet Selector** list.</span></span>  
  
 <span data-ttu-id="a737e-166">Dla każdego zestaw reguł, który importuje narzędzie próbował zlokalizować skojarzony typ z folderu bin\Debug znajdujące się w lokalizacji pliku Rules (jeśli istnieje), na podstawie elementów członkowskich używane w zestaw reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-166">For each RuleSet it imports, the tool attempts to locate the associated type from the bin\Debug folder under the location of the .rules file (if it exists), based on the members used in the RuleSet.</span></span> <span data-ttu-id="a737e-167">Jeśli narzędzie wykryje wiele typów zgodnych, próbuje wybrać typ na podstawie dopasowania między Rules nazwę pliku i nazwy typu (na przykład `Workflow1` typ odpowiada Workflow1.rules).</span><span class="sxs-lookup"><span data-stu-id="a737e-167">If the tool finds multiple matching types, it attempts to choose a type based on a match between the .rules file name and the type name (for example, the `Workflow1` type corresponds to Workflow1.rules).</span></span> <span data-ttu-id="a737e-168">Istnieje wiele dopasowań, monit o wybranie typu.</span><span class="sxs-lookup"><span data-stu-id="a737e-168">If multiple matches exist, you are prompted to select the type.</span></span> <span data-ttu-id="a737e-169">Jeśli ten mechanizm automatycznej identyfikacji nie powiedzie się, można znaleźć zgodnego zestawu lub typu, a następnie po zaimportowaniu można kliknąć **Przeglądaj** w oknie dialogowym Narzędzia główne, aby przejść do skojarzonego typu.</span><span class="sxs-lookup"><span data-stu-id="a737e-169">If this auto-identification mechanism fails to locate a matching assembly or type, then after importing you can click **Browse** on the main tool dialog to navigate to the associated type.</span></span>  
  
 <span data-ttu-id="a737e-170">![Zestaw reguł selektora](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetselector.gif "RuleSetSelector")</span><span class="sxs-lookup"><span data-stu-id="a737e-170">![Ruleset selector](../../../../docs/framework/windows-workflow-foundation/samples/media/rulesetselector.gif "RuleSetSelector")</span></span>  
  
 <span data-ttu-id="a737e-171">Rysunek 6: Selektor RuleSet</span><span class="sxs-lookup"><span data-stu-id="a737e-171">Figure 6: RuleSet Selector</span></span>  
  
 <span data-ttu-id="a737e-172">Po kliknięciu **eksportu danych** menu głównego narzędzia **selektora RuleSet** zostanie wyświetlone okno dialogowe, w którym można określić zestawów reguł z bazy danych, która powinna być wyeksportowane.</span><span class="sxs-lookup"><span data-stu-id="a737e-172">When you click **Data-Export** from the main tool menu, the **RuleSet Selector** dialog appears again, from which you can determine the RuleSets from the database that should be exported.</span></span> <span data-ttu-id="a737e-173">Po kliknięciu **OK**, **Zapisz plik** zostanie wyświetlone okno dialogowe, w którym można określić nazwę i lokalizację pliku wynikowego rules.</span><span class="sxs-lookup"><span data-stu-id="a737e-173">When you click **OK**, a **Save File** dialog appears, in which you can specify the name and location of the resulting .rules file.</span></span> <span data-ttu-id="a737e-174">Ponieważ plik Rules nie zawiera informacje o wersji, można wybrać tylko jedną wersję RuleSet o danej nazwie zestaw reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-174">Because the .rules file does not contain version information, you can only select one RuleSet version with a given RuleSet name.</span></span>  
  
## <a name="policyfromservice-activity"></a><span data-ttu-id="a737e-175">Działanie PolicyFromService</span><span class="sxs-lookup"><span data-stu-id="a737e-175">PolicyFromService Activity</span></span>  
 <span data-ttu-id="a737e-176">Kod `PolicyFromService` działania jest prosta.</span><span class="sxs-lookup"><span data-stu-id="a737e-176">The code for the `PolicyFromService` activity is straightforward.</span></span> <span data-ttu-id="a737e-177">Podobne jak w przypadku działa `Policy` działanie dostępne z WF, ale zamiast pobierania docelowy zestaw reguł z pliku Rules, wywołuje usługi hosta do uzyskania wystąpienia zestaw reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-177">It works much like the `Policy` activity provided with WF, but instead of retrieving the target RuleSet from the .rules file, it calls a host service to obtain the RuleSet instance.</span></span> <span data-ttu-id="a737e-178">Następnie uruchamia zestaw reguł przed wystąpienia działania głównego przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-178">It then runs the RuleSet against the root workflow activity instance.</span></span>  
  
 <span data-ttu-id="a737e-179">Aby użyć działania w przepływie pracy, Dodaj odwołanie do `PolicyActivities` i `RuleSetService` zestawy z projektu przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-179">To use the activity in a workflow, add a reference to the `PolicyActivities` and `RuleSetService` assemblies from your workflow project.</span></span> <span data-ttu-id="a737e-180">Zapoznaj się z procedurą na końcu tego tematu, aby uzyskać informacje dotyczące sposobu dodawania działań do przybornika.</span><span class="sxs-lookup"><span data-stu-id="a737e-180">See the procedure at the end of this topic for a discussion of how to add the activity to the toolbox.</span></span>  
  
 <span data-ttu-id="a737e-181">Po umieszczeniu działanie w przepływie pracy, należy podać nazwę zestaw reguł do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="a737e-181">After placing the activity in your workflow, you must provide the name of the RuleSet to be run.</span></span> <span data-ttu-id="a737e-182">Wprowadź nazwę jako wartość literału lub powiązać zmiennej przepływu pracy lub właściwość innego działania.</span><span class="sxs-lookup"><span data-stu-id="a737e-182">You can enter the name as a literal value, or bind to a workflow variable or property of another activity.</span></span> <span data-ttu-id="a737e-183">Opcjonalnie można wprowadzić numery wersji określonego zestaw reguł, które powinny być uruchamiane.</span><span class="sxs-lookup"><span data-stu-id="a737e-183">Optionally, you can enter version numbers for the specific RuleSet that should be run.</span></span> <span data-ttu-id="a737e-184">Pozostawienie wartość domyślna 0 dla numerów wersji głównej i pomocniczej numer najnowszej wersji w bazie danych jest teraz udostępniana automatycznie dla działania.</span><span class="sxs-lookup"><span data-stu-id="a737e-184">If you leave the default value of 0 for the major and minor version numbers, the latest version number in the database is automatically provided for the activity.</span></span>  
  
## <a name="ruleset-service"></a><span data-ttu-id="a737e-185">Zestaw reguł usługi</span><span class="sxs-lookup"><span data-stu-id="a737e-185">RuleSet Service</span></span>  
 <span data-ttu-id="a737e-186">Usługa jest odpowiedzialna za pobieranie określonych wersji zestaw reguł z bazy danych i przywróceniem go do wywoływania działania.</span><span class="sxs-lookup"><span data-stu-id="a737e-186">The service is responsible for retrieving the specified RuleSet version from the database and returning it to the calling activity.</span></span> <span data-ttu-id="a737e-187">Wspomnianej wcześniej, jeśli wartości wersji głównej i pomocniczej przekazano `GetRuleSet` wywołania są obie 0, usługa pobiera najnowsza wersja.</span><span class="sxs-lookup"><span data-stu-id="a737e-187">As previously discussed, if the major and minor version values passed in the `GetRuleSet` call are both 0, the service retrieves the latest version.</span></span> <span data-ttu-id="a737e-188">W tym momencie jest bez buforowania definicje RuleSet lub wystąpień; Podobnie jest Brak funkcji do oznaczenia wersji RuleSet jako "wdrożone", aby odróżnić je od zestawów reguł w toku.</span><span class="sxs-lookup"><span data-stu-id="a737e-188">At this point, there is no caching of RuleSet definitions or instances; similarly, there are no features for marking RuleSet versions as "deployed" to differentiate them from in-progress RuleSets.</span></span>  
  
 <span data-ttu-id="a737e-189">Usługa dostępu do bazy danych należy skonfigurować na hoście przy użyciu pliku konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a737e-189">The database to be accessed by the service should be configured on the host using an application configuration file.</span></span>  
  
#### <a name="to-run-the-tool"></a><span data-ttu-id="a737e-190">Aby uruchomić narzędzie</span><span class="sxs-lookup"><span data-stu-id="a737e-190">To run the tool</span></span>  
  
1.  <span data-ttu-id="a737e-191">Folder, który konfiguruje tabeli zestaw reguł używany przez usługę i przez narzędzie znajduje się plik Setup.sql.</span><span class="sxs-lookup"><span data-stu-id="a737e-191">The folder that sets up the RuleSet table used by the tool and the service contains a Setup.sql file.</span></span> <span data-ttu-id="a737e-192">Możesz uruchomić plik wsadowy Setup.cmd do tworzenia bazy danych reguły na SQL Express i zdefiniować tabelę zestaw reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-192">You can run the Setup.cmd batch file to create the Rules database on SQL Express and to set up the RuleSet table.</span></span>  
  
2.  <span data-ttu-id="a737e-193">Jeśli edycja pliku wsadowego lub Setup.sql i określ nie należy używać programu SQL Express lub można umieścić w tabeli w bazie danych o nazwie coś innego niż `Rules`, pliki konfiguracji aplikacji w narzędziu zestaw reguł i `UsageSample` projekty powinny być edytowane o takim samym informacje.</span><span class="sxs-lookup"><span data-stu-id="a737e-193">If you edit the batch file or Setup.sql and specify not to use SQL Express or to place the table in a database named something other than `Rules`, the application configuration files in the RuleSet tool and `UsageSample` projects should be edited with the same information.</span></span>  
  
3.  <span data-ttu-id="a737e-194">Po uruchomieniu skryptu Setup.sql można tworzyć `ExternalRuleSetToolkit` rozwiązania, a następnie uruchom zestaw reguł narzędzia z projektu ExternalRuleSetTool.</span><span class="sxs-lookup"><span data-stu-id="a737e-194">After you run the Setup.sql script, you can build the `ExternalRuleSetToolkit` solution and then launch the RuleSet tool from the ExternalRuleSetTool project.</span></span>  
  
4.  <span data-ttu-id="a737e-195">`RuleSetToolkitUsageSample` Rozwiązanie sekwencyjnych Aplikacja konsoli przepływu pracy zawiera przykładowy przepływ pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-195">The `RuleSetToolkitUsageSample` Sequential Workflow Console Application solution includes a sample workflow.</span></span> <span data-ttu-id="a737e-196">Przepływ pracy składa się z `PolicyFromService` działania i dwie zmienne `orderValue` i `discount`, względem którego element docelowy zestaw reguł jest uruchamiana.</span><span class="sxs-lookup"><span data-stu-id="a737e-196">The workflow consists of a `PolicyFromService` activity and two variables, `orderValue` and `discount`, against which the target RuleSet runs.</span></span>  
  
5.  <span data-ttu-id="a737e-197">Aby użyć przykładowego, kompilacji `RuleSetToolkitUsageSample` rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="a737e-197">To use the sample, build the `RuleSetToolkitUsageSample` solution.</span></span> <span data-ttu-id="a737e-198">Następnie z menu głównego narzędzia zestaw reguł, kliknij przycisk **importowania danych** i wskaż plik DiscountRuleSet.rules w folderze RuleSetToolkitUsageSample.</span><span class="sxs-lookup"><span data-stu-id="a737e-198">Then from the RuleSet tool main menu, click **Data-Import** and point to the DiscountRuleSet.rules file in the RuleSetToolkitUsageSample folder.</span></span> <span data-ttu-id="a737e-199">Kliknij przycisk **zapisem magazynu reguły** menu opcję, aby zapisać zaimportowany zestaw reguł do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="a737e-199">Click the **Rule Store-Save** menu option to save the imported RuleSet to the database.</span></span>  
  
6.  <span data-ttu-id="a737e-200">Ponieważ `PolicyActivities` odwołuje się do zestawu z przykładowy projekt przepływu pracy `PolicyFromService` działania zostanie wyświetlony w przepływie pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-200">Because the `PolicyActivities` assembly is referenced from the sample workflow project, the `PolicyFromService` activity appears in the workflow.</span></span> <span data-ttu-id="a737e-201">Nie, ale ma w przyborniku domyślnie.</span><span class="sxs-lookup"><span data-stu-id="a737e-201">It does not, however, appear in the toolbox by default.</span></span> <span data-ttu-id="a737e-202">Aby dodać go do przybornika, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="a737e-202">To add it to the toolbox, do the following:</span></span>  
  
    -   <span data-ttu-id="a737e-203">Kliknij prawym przyciskiem myszy przybornika i wybierz **wybierz elementy** (może to potrwać kilka minut).</span><span class="sxs-lookup"><span data-stu-id="a737e-203">Right-click the toolbox and select **Choose Items** (this may take a while).</span></span>  
  
    -   <span data-ttu-id="a737e-204">Gdy **wybierz elementy przybornika** zostanie wyświetlone okno dialogowe, kliknij przycisk **działania** kartę.</span><span class="sxs-lookup"><span data-stu-id="a737e-204">When the **Choose Toolbox Items** dialog appears, click the **Activities** tab.</span></span>  
  
    -   <span data-ttu-id="a737e-205">Przejdź do `PolicyActivities` zestawu w `ExternalRuleSetToolkit` rozwiązanie i kliknij przycisk **Otwórz**.</span><span class="sxs-lookup"><span data-stu-id="a737e-205">Browse to the `PolicyActivities` assembly in the `ExternalRuleSetToolkit` solution and click **Open**.</span></span>  
  
    -   <span data-ttu-id="a737e-206">Upewnij się, że `PolicyFromService` działania jest zaznaczona w **wybierz elementy przybornika** okna dialogowego, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="a737e-206">Ensure that the `PolicyFromService` activity is selected in the **Choose Toolbox Items** dialog and then click **OK**.</span></span>  
  
    -   <span data-ttu-id="a737e-207">Działanie powinien zostać wyświetlony w przyborniku w **składniki RuleSetToolkitUsageSample** kategorii.</span><span class="sxs-lookup"><span data-stu-id="a737e-207">The activity should now appear in the toolbox in the **RuleSetToolkitUsageSample Components** category.</span></span>  
  
7.  <span data-ttu-id="a737e-208">Usługa zestaw reguł jest już skonfigurowana na hoście aplikacji konsoli przy użyciu następujących instrukcji w pliku Program.cs.</span><span class="sxs-lookup"><span data-stu-id="a737e-208">The RuleSet service is already configured on the console application host using the following statement in Program.cs.</span></span>  
  
    ```  
    workflowRuntime.AddService(new RuleSetService());  
    ```  
  
8.  <span data-ttu-id="a737e-209">Można również skonfigurować usługę na hoście przy użyciu pliku konfiguracji; Zobacz szczegółowe informacje można znaleźć w dokumentacji zestawu SDK.</span><span class="sxs-lookup"><span data-stu-id="a737e-209">You can also configure the service on the host using a configuration file; see the SDK documentation for details.</span></span>  
  
9. <span data-ttu-id="a737e-210">Plik konfiguracji aplikacji jest dodawane do projektu przepływu pracy, aby określić parametry połączenia dla bazy danych mają być używane przez usługę.</span><span class="sxs-lookup"><span data-stu-id="a737e-210">An application configuration file is added to the workflow project to specify the connection string for the database to be used by the service.</span></span> <span data-ttu-id="a737e-211">Powinno to być te same parametry połączenia używane przez narzędzie zestaw reguł, które bazy danych, która zawiera tabelę zestaw reguł.</span><span class="sxs-lookup"><span data-stu-id="a737e-211">This should be the same connection string used by the RuleSet tool, which points to the database that contains the RuleSet table.</span></span>  
  
10. <span data-ttu-id="a737e-212">Teraz możesz uruchomić `RuleSetToolkitUsageSample` projektu, jak w przypadku innych aplikacji konsolowej przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="a737e-212">You can now run the `RuleSetToolkitUsageSample` project as you would any other workflow console application.</span></span> <span data-ttu-id="a737e-213">Naciśnij klawisz F5 lub Ctrl + F5 w [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] lub uruchom plik RuleSetToolkitUsageSample.exe bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="a737e-213">Press F5 or Ctrl+F5 within [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] or run the RuleSetToolkitUsageSample.exe file directly.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="a737e-214">Należy zamknąć narzędzie zestaw reguł, aby ponownie skompilować próbki użycia, ponieważ narzędzie ładuje zestaw próbki użycia.</span><span class="sxs-lookup"><span data-stu-id="a737e-214">You must close the RuleSet tool to recompile the usage sample, because the tool loads the usage sample assembly.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a737e-215">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="a737e-215">See Also</span></span>
