---
title: Wyjątki
ms.date: 03/30/2017
ms.assetid: 065205cc-52dd-4f30-9578-b17d8d113136
ms.openlocfilehash: 94a0a2430ffe7db47152517c742aed1c18a39e64
ms.sourcegitcommit: 160a88c8087b0e63606e6e35f9bd57fa5f69c168
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/09/2019
ms.locfileid: "57717274"
---
# <a name="exceptions"></a><span data-ttu-id="5718f-102">Wyjątki</span><span class="sxs-lookup"><span data-stu-id="5718f-102">Exceptions</span></span>
<span data-ttu-id="5718f-103">Przepływy pracy można użyć <xref:System.Activities.Statements.TryCatch> działania, aby obsłużyć wyjątki, które są wywoływane podczas wykonywania przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="5718f-103">Workflows can use the <xref:System.Activities.Statements.TryCatch> activity to handle exceptions that are raised during the execution of a workflow.</span></span> <span data-ttu-id="5718f-104">Wyjątki te mogą być obsługiwane lub ich może zostać zgłoszony ponownie przy użyciu <xref:System.Activities.Statements.Rethrow> działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-104">These exceptions can be handled or they can be re-thrown using the <xref:System.Activities.Statements.Rethrow> activity.</span></span> <span data-ttu-id="5718f-105">Działania w <xref:System.Activities.Statements.TryCatch.Finally%2A> sekcji są wykonywane, kiedy albo <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji lub <xref:System.Activities.Statements.TryCatch.Catches%2A> kończy sekcji.</span><span class="sxs-lookup"><span data-stu-id="5718f-105">Activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section are executed when either the <xref:System.Activities.Statements.TryCatch.Try%2A> section or the <xref:System.Activities.Statements.TryCatch.Catches%2A> section completes.</span></span> <span data-ttu-id="5718f-106">Przepływy pracy pracujących <xref:System.Activities.WorkflowApplication> wystąpienia można również użyć <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> programu obsługi zdarzeń, aby obsłużyć wyjątki, które nie są obsługiwane przez <xref:System.Activities.Statements.TryCatch> działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-106">Workflows hosted by a <xref:System.Activities.WorkflowApplication> instance can also use the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> event handler to handle exceptions that are not handled by a <xref:System.Activities.Statements.TryCatch> activity.</span></span>  
  
## <a name="causes-of-exceptions"></a><span data-ttu-id="5718f-107">Przyczyn wyjątków</span><span class="sxs-lookup"><span data-stu-id="5718f-107">Causes of Exceptions</span></span>  
 <span data-ttu-id="5718f-108">W przepływie pracy wyjątki mogą być generowane w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="5718f-108">In a workflow, exceptions can be generated in the following ways:</span></span>  
  
-   <span data-ttu-id="5718f-109">Limit czasu transakcji w <xref:System.Activities.Statements.TransactionScope>.</span><span class="sxs-lookup"><span data-stu-id="5718f-109">A time-out of transactions in <xref:System.Activities.Statements.TransactionScope>.</span></span>  
  
-   <span data-ttu-id="5718f-110">Jawne wyjątek przy użyciu przepływu pracy <xref:System.Activities.Statements.Throw> działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-110">An explicit exception thrown by the workflow using the <xref:System.Activities.Statements.Throw> activity.</span></span>  
  
-   <span data-ttu-id="5718f-111">A [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] wyjątek z działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-111">A [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] exception thrown from an activity.</span></span>  
  
-   <span data-ttu-id="5718f-112">Wyjątek zgłoszony z kodu zewnętrznego, takie jak biblioteki, składników lub usług, które są używane w przepływie pracy.</span><span class="sxs-lookup"><span data-stu-id="5718f-112">An exception thrown from external code, such as libraries, components, or services that are used in the workflow.</span></span>  
  
## <a name="handling-exceptions"></a><span data-ttu-id="5718f-113">Obsługa wyjątków</span><span class="sxs-lookup"><span data-stu-id="5718f-113">Handling Exceptions</span></span>  
 <span data-ttu-id="5718f-114">Jeśli wyjątek jest generowany przez działanie i jest nieobsługiwany, zachowanie domyślne jest zakończenie wystąpienia przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="5718f-114">If an exception is thrown by an activity and is unhandled, the default behavior is to terminate the workflow instance.</span></span> <span data-ttu-id="5718f-115">Jeśli niestandardowa <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> program obsługi, można je zastąpić to zachowanie domyślne.</span><span class="sxs-lookup"><span data-stu-id="5718f-115">If a custom <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is present, it can override this default behavior.</span></span> <span data-ttu-id="5718f-116">Ten program obsługi umożliwia Autor hosta przepływu pracy, aby zapewnić odpowiednią obsługę, takie jak niestandardowe rejestrowania, przerywanie przepływu pracy, anulowanie przepływu pracy lub zakończenie przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="5718f-116">This handler gives the workflow host author an opportunity to provide the appropriate handling, such as custom logging, aborting the workflow, canceling the workflow, or terminating the workflow.</span></span>  <span data-ttu-id="5718f-117">Jeśli przepływ pracy zgłasza wyjątek, który nie jest obsługiwany, <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> zostanie wywołana procedura obsługi.</span><span class="sxs-lookup"><span data-stu-id="5718f-117">If a workflow raises an exception that is not handled, the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is invoked.</span></span> <span data-ttu-id="5718f-118">Istnieją trzy możliwe akcje zwróciło <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> który ustalenia końcowego wyniku przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="5718f-118">There are three possible actions returned from <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> which determine the final outcome of the workflow.</span></span>  
  
-   <span data-ttu-id="5718f-119">**Anuluj** — wystąpienie anulowane przepływu pracy jest Łagodne wyjście działania gałęzi.</span><span class="sxs-lookup"><span data-stu-id="5718f-119">**Cancel** - A cancelled workflow instance is a graceful exit of a branch execution.</span></span> <span data-ttu-id="5718f-120">Model zachowanie anulowania, (na przykład za pomocą działania CancellationScope).</span><span class="sxs-lookup"><span data-stu-id="5718f-120">You can model cancelation behavior (for example, by using a CancellationScope activity).</span></span> <span data-ttu-id="5718f-121">Po zakończeniu procesu anulowania, zostanie wywołany uchwytu ukończone.</span><span class="sxs-lookup"><span data-stu-id="5718f-121">The Completed handler is invoked when the cancellation process completes.</span></span> <span data-ttu-id="5718f-122">Anulowano przepływu pracy jest w stanie odwołania.</span><span class="sxs-lookup"><span data-stu-id="5718f-122">A cancelled workflow is in the Cancelled state.</span></span>  
  
-   <span data-ttu-id="5718f-123">**Zakończenie** — wystąpienie przepływu pracy zakończonych nie może zostać wznowione lub ponownego uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="5718f-123">**Terminate** - A terminated workflow instance cannot be resumed or restarted.</span></span>  <span data-ttu-id="5718f-124">Spowoduje to wyzwolenie zdarzenia zakończony, w którym można podać wyjątek jako powodów, dla którego została przerwana.</span><span class="sxs-lookup"><span data-stu-id="5718f-124">This triggers the Completed event in which you can provide an exception as the reason it was terminated.</span></span> <span data-ttu-id="5718f-125">Program obsługi zwolniony jest wywoływana po zakończeniu procesu zakończenia.</span><span class="sxs-lookup"><span data-stu-id="5718f-125">The Terminated handler is invoked when the termination process completes.</span></span> <span data-ttu-id="5718f-126">Zakończone przepływu pracy jest w stanie Faulted.</span><span class="sxs-lookup"><span data-stu-id="5718f-126">A terminated workflow is in the Faulted state.</span></span>  
  
-   <span data-ttu-id="5718f-127">**Przerwij** — może być wznowione wystąpienia przepływu pracy zostało przerwane, tylko wtedy, gdy został skonfigurowany jako trwałe.</span><span class="sxs-lookup"><span data-stu-id="5718f-127">**Abort** - An aborted workflow instances can be resumed only if it has been configured to be persistent.</span></span>  <span data-ttu-id="5718f-128">Bez stanu trwałego nie można wznowić przepływ pracy.</span><span class="sxs-lookup"><span data-stu-id="5718f-128">Without persistence, a workflow cannot be resumed.</span></span>  <span data-ttu-id="5718f-129">W punkcie przepływu pracy zostało przerwane, pracę wykonaną (w pamięci), od ostatniego punktu trwałości zostaną utracone.</span><span class="sxs-lookup"><span data-stu-id="5718f-129">At the point a workflow is aborted, any work done (in memory) since the last persistence point will be lost.</span></span> <span data-ttu-id="5718f-130">Przerwanie przepływu pracy obsługi Aborted jest wywoływana przy użyciu wyjątek jako przyczynę, po zakończeniu procesu przerwania.</span><span class="sxs-lookup"><span data-stu-id="5718f-130">For an aborted workflow, the Aborted handler is invoked using the exception as the reason when the abort process completes.</span></span> <span data-ttu-id="5718f-131">Jednak w przeciwieństwie do odwołania i zwolniony, ukończono program obsługi nie jest wywoływany.</span><span class="sxs-lookup"><span data-stu-id="5718f-131">However, unlike Cancelled and Terminated, the Completed handler is not invoked.</span></span> <span data-ttu-id="5718f-132">Przerwanie przepływu pracy jest w stanie Przerwano.</span><span class="sxs-lookup"><span data-stu-id="5718f-132">An aborted workflow is in an Aborted state.</span></span>  
  
 <span data-ttu-id="5718f-133">Poniższy przykład przedstawia wywoływanie przepływu pracy, która zgłosiła wyjątek.</span><span class="sxs-lookup"><span data-stu-id="5718f-133">The following example invokes a workflow that throws an exception.</span></span> <span data-ttu-id="5718f-134">Wyjątek jest nieobsługiwany przez przepływ pracy i <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> zostanie wywołana procedura obsługi.</span><span class="sxs-lookup"><span data-stu-id="5718f-134">The exception is unhandled by the workflow and the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is invoked.</span></span> <span data-ttu-id="5718f-135"><xref:System.Activities.WorkflowApplicationUnhandledExceptionEventArgs> Są kontrolowane w celu dostarczenia informacji o wyjątku, a przepływ pracy zostanie zakończony.</span><span class="sxs-lookup"><span data-stu-id="5718f-135">The <xref:System.Activities.WorkflowApplicationUnhandledExceptionEventArgs> are inspected to provide information about the exception, and the workflow is terminated.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#1](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#1)]  
  
### <a name="handling-exceptions-with-the-trycatch-activity"></a><span data-ttu-id="5718f-136">Obsługa wyjątków za pomocą działania TryCatch</span><span class="sxs-lookup"><span data-stu-id="5718f-136">Handling Exceptions with the TryCatch Activity</span></span>  
 <span data-ttu-id="5718f-137">Obsługa wyjątków w przepływie pracy odbywa się za pomocą <xref:System.Activities.Statements.TryCatch> działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-137">Handling exceptions inside a workflow is performed with the <xref:System.Activities.Statements.TryCatch> activity.</span></span> <span data-ttu-id="5718f-138"><xref:System.Activities.Statements.TryCatch> Działanie ma <xref:System.Activities.Statements.TryCatch.Catches%2A> zbiór <xref:System.Activities.Statements.Catch> działania, których każde skojarzone z określonym <xref:System.Exception> typu.</span><span class="sxs-lookup"><span data-stu-id="5718f-138">The <xref:System.Activities.Statements.TryCatch> activity has a <xref:System.Activities.Statements.TryCatch.Catches%2A> collection of <xref:System.Activities.Statements.Catch> activities that are each associated with a specific <xref:System.Exception> type.</span></span> <span data-ttu-id="5718f-139">Jeśli wyjątek zgłoszony przez działanie, które są zawarte w <xref:System.Activities.Statements.TryCatch.Try%2A> części <xref:System.Activities.Statements.TryCatch> działania odpowiada wyjątek <xref:System.Activities.Statements.Catch%601> działania w <xref:System.Activities.Statements.TryCatch.Catches%2A> kolekcji, a następnie wyjątek jest obsługiwany.</span><span class="sxs-lookup"><span data-stu-id="5718f-139">If the exception thrown by an activity that is contained in the <xref:System.Activities.Statements.TryCatch.Try%2A> section of a <xref:System.Activities.Statements.TryCatch> activity matches the exception of a <xref:System.Activities.Statements.Catch%601> activity in the <xref:System.Activities.Statements.TryCatch.Catches%2A> collection, then the exception is handled.</span></span> <span data-ttu-id="5718f-140">Jeśli jawnie ponownie zgłoszony wyjątek lub nowy wyjątek następnie ten wyjątek przekazuje do działania nadrzędnego.</span><span class="sxs-lookup"><span data-stu-id="5718f-140">If the exception is explicitly re-thrown or a new exception is thrown then this exception passes up to the parent activity.</span></span> <span data-ttu-id="5718f-141">Poniższy kod przedstawia przykład <xref:System.Activities.Statements.TryCatch> działanie obsługujące <xref:System.ApplicationException> , jest zgłaszany w <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji przez <xref:System.Activities.Statements.Throw> działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-141">The following code example shows a <xref:System.Activities.Statements.TryCatch> activity that handles an <xref:System.ApplicationException> that is thrown in the <xref:System.Activities.Statements.TryCatch.Try%2A> section by a <xref:System.Activities.Statements.Throw> activity.</span></span> <span data-ttu-id="5718f-142">Komunikat o wyjątku są zapisywane do konsoli przez <xref:System.Activities.Statements.Catch%601> działania, a następnie wiadomości są zapisywane do konsoli w <xref:System.Activities.Statements.TryCatch.Finally%2A> sekcji.</span><span class="sxs-lookup"><span data-stu-id="5718f-142">The exception's message is written to the console by the <xref:System.Activities.Statements.Catch%601> activity, and then a message is written to the console in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#33](~/samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]  
  
 <span data-ttu-id="5718f-143">Działania w <xref:System.Activities.Statements.TryCatch.Finally%2A> sekcji są wykonywane, kiedy albo <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji lub <xref:System.Activities.Statements.TryCatch.Catches%2A> sekcji pomyślnym ukończeniu.</span><span class="sxs-lookup"><span data-stu-id="5718f-143">The activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section are executed when either the <xref:System.Activities.Statements.TryCatch.Try%2A> section or the <xref:System.Activities.Statements.TryCatch.Catches%2A> section successfully completes.</span></span> <span data-ttu-id="5718f-144"><xref:System.Activities.Statements.TryCatch.Try%2A> Sekcji pomyślnym ukończeniu, jeśli żadne wyjątki są zgłaszane z niego i <xref:System.Activities.Statements.TryCatch.Catches%2A> sekcji pomyślnym ukończeniu, jeśli żadne wyjątki są zgłaszane lub zgłaszany ponownie z niego.</span><span class="sxs-lookup"><span data-stu-id="5718f-144">The <xref:System.Activities.Statements.TryCatch.Try%2A> section successfully completes if no exceptions are thrown from it, and the <xref:System.Activities.Statements.TryCatch.Catches%2A> section successfully completes if no exceptions are thrown or rethrown from it.</span></span> <span data-ttu-id="5718f-145">Jeśli wyjątek jest zgłaszany w <xref:System.Activities.Statements.TryCatch.Try%2A> części <xref:System.Activities.Statements.TryCatch> i albo nie jest obsługiwany przez <xref:System.Activities.Statements.Catch%601> w <xref:System.Activities.Statements.TryCatch.Catches%2A> sekcji w przeciwnym razie jest zgłaszany ponownie z <xref:System.Activities.Statements.TryCatch.Catches%2A>, działania w <xref:System.Activities.Statements.TryCatch.Finally%2A> nie zostaną wykonane, chyba że wystąpi jedno z następujących czynności.</span><span class="sxs-lookup"><span data-stu-id="5718f-145">If an exception is thrown in the <xref:System.Activities.Statements.TryCatch.Try%2A> section of a <xref:System.Activities.Statements.TryCatch> and is either not handled by a <xref:System.Activities.Statements.Catch%601> in the <xref:System.Activities.Statements.TryCatch.Catches%2A> section, or is rethrown from the <xref:System.Activities.Statements.TryCatch.Catches%2A>, the activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> will not be executed unless the one of the following occurs.</span></span>  
  
-   <span data-ttu-id="5718f-146">Wyjątek wyższym poziomem <xref:System.Activities.Statements.TryCatch> działanie w przepływie pracy, niezależnie od tego, czy jest on zgłaszany ponownie z tego wyższego poziomu <xref:System.Activities.Statements.TryCatch>.</span><span class="sxs-lookup"><span data-stu-id="5718f-146">The exception is caught by a higher level <xref:System.Activities.Statements.TryCatch> activity in the workflow, regardless of whether it is rethrown from that higher level <xref:System.Activities.Statements.TryCatch>.</span></span>  
  
-   <span data-ttu-id="5718f-147">Wyjątek nie jest obsługiwany przez wyższego poziomu <xref:System.Activities.Statements.TryCatch>, wyprowadza głównego przepływu pracy i przepływu pracy jest skonfigurowany do anulowania zamiast zakończenia lub przerwania.</span><span class="sxs-lookup"><span data-stu-id="5718f-147">The exception is not handled by a higher level <xref:System.Activities.Statements.TryCatch>, escapes the root of the workflow, and the workflow is configured to cancel instead of terminate or abort.</span></span> <span data-ttu-id="5718f-148">Hostowane przy użyciu przepływów pracy <xref:System.Activities.WorkflowApplication> konfigurację można określić obsługi <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> i zwracanie <xref:System.Activities.UnhandledExceptionAction.Cancel>.</span><span class="sxs-lookup"><span data-stu-id="5718f-148">Workflows hosted using <xref:System.Activities.WorkflowApplication> can configure this by handling <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> and returning <xref:System.Activities.UnhandledExceptionAction.Cancel>.</span></span> <span data-ttu-id="5718f-149">Przykład obsługi <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> znajduje się wcześniej w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="5718f-149">An example of handling <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> is provided previously in this topic.</span></span> <span data-ttu-id="5718f-150">Konfigurowanie dla usługi przepływu pracy przy użyciu <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> i określając <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel>.</span><span class="sxs-lookup"><span data-stu-id="5718f-150">Workflow services can configure this by using <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> and specifying <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel>.</span></span> <span data-ttu-id="5718f-151">Aby uzyskać przykład konfigurowania <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, zobacz [rozszerzalność hosta usługi przepływu pracy](../wcf/feature-details/workflow-service-host-extensibility.md).</span><span class="sxs-lookup"><span data-stu-id="5718f-151">For an example of configuring <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, see [Workflow Service Host Extensibility](../wcf/feature-details/workflow-service-host-extensibility.md).</span></span>  
  
## <a name="exception-handling-versus-compensation"></a><span data-ttu-id="5718f-152">Obsługa i rekompensaty wyjątków</span><span class="sxs-lookup"><span data-stu-id="5718f-152">Exception Handling versus Compensation</span></span>  
 <span data-ttu-id="5718f-153">Różnica między obsługą wyjątków i Kompensacja jest występowanie wyjątków podczas wykonywania działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-153">The difference between exception handling and compensation is that exception handling occurs during the execution of an activity.</span></span> <span data-ttu-id="5718f-154">Kompensacja występuje po pomyślnym ukończeniu działania.</span><span class="sxs-lookup"><span data-stu-id="5718f-154">Compensation occurs after an activity has successfully completed.</span></span> <span data-ttu-id="5718f-155">Obsługa wyjątków umożliwia czyszczenie po działanie zgłasza wyjątek, wynagrodzenie stanowi mechanizm, za pomocą którego pomyślnie ukończono pracę wcześniej zakończonego działania może być cofnięte.</span><span class="sxs-lookup"><span data-stu-id="5718f-155">Exception handling provides an opportunity to clean up after the activity raises the exception, whereas compensation provides a mechanism by which the successfully completed work of a previously completed activity can be undone.</span></span> <span data-ttu-id="5718f-156">Aby uzyskać więcej informacji, zobacz [wynagrodzenie](compensation.md).</span><span class="sxs-lookup"><span data-stu-id="5718f-156">For more information, see [Compensation](compensation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="5718f-157">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="5718f-157">See also</span></span>
- <xref:System.Activities.Statements.TryCatch>
- <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>
- <xref:System.Activities.Statements.CompensableActivity>
