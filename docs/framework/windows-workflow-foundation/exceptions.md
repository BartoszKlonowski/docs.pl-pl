---
title: "Wyjątki"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 065205cc-52dd-4f30-9578-b17d8d113136
caps.latest.revision: "26"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: bf2c6e12dac2130a26aa01efc21b8f58f509294a
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/22/2017
---
# <a name="exceptions"></a><span data-ttu-id="be98d-102">Wyjątki</span><span class="sxs-lookup"><span data-stu-id="be98d-102">Exceptions</span></span>
<span data-ttu-id="be98d-103">Przepływy pracy można użyć <xref:System.Activities.Statements.TryCatch> działanie obsługi wyjątków, które są wywoływane podczas wykonywania przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="be98d-103">Workflows can use the <xref:System.Activities.Statements.TryCatch> activity to handle exceptions that are raised during the execution of a workflow.</span></span> <span data-ttu-id="be98d-104">Wyjątki te mogą być obsługiwane lub ich może zostać zgłoszony ponownie przy użyciu <xref:System.Activities.Statements.Rethrow> działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-104">These exceptions can be handled or they can be re-thrown using the <xref:System.Activities.Statements.Rethrow> activity.</span></span> <span data-ttu-id="be98d-105">Działania w <xref:System.Activities.Statements.TryCatch.Finally%2A> sekcji są wykonywane, kiedy albo <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji lub <xref:System.Activities.Statements.TryCatch.Catches%2A> zakończeniu sekcji.</span><span class="sxs-lookup"><span data-stu-id="be98d-105">Activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section are executed when either the <xref:System.Activities.Statements.TryCatch.Try%2A> section or the <xref:System.Activities.Statements.TryCatch.Catches%2A> section completes.</span></span> <span data-ttu-id="be98d-106">Przepływy pracy na użytek <xref:System.Activities.WorkflowApplication> wystąpienia można również użyć <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> program obsługi zdarzeń do obsługi wyjątków, które nie są obsługiwane przez <xref:System.Activities.Statements.TryCatch> działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-106">Workflows hosted by a <xref:System.Activities.WorkflowApplication> instance can also use the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> event handler to handle exceptions that are not handled by a <xref:System.Activities.Statements.TryCatch> activity.</span></span>  
  
## <a name="causes-of-exceptions"></a><span data-ttu-id="be98d-107">Przyczyny wyjątków</span><span class="sxs-lookup"><span data-stu-id="be98d-107">Causes of Exceptions</span></span>  
 <span data-ttu-id="be98d-108">W przepływie pracy wyjątki mogą być generowane w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="be98d-108">In a workflow, exceptions can be generated in the following ways:</span></span>  
  
-   <span data-ttu-id="be98d-109">Limit czasu transakcji w <xref:System.Activities.Statements.TransactionScope>.</span><span class="sxs-lookup"><span data-stu-id="be98d-109">A time-out of transactions in <xref:System.Activities.Statements.TransactionScope>.</span></span>  
  
-   <span data-ttu-id="be98d-110">Jawne wyjątek przy użyciu przepływu pracy <xref:System.Activities.Statements.Throw> działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-110">An explicit exception thrown by the workflow using the <xref:System.Activities.Statements.Throw> activity.</span></span>  
  
-   <span data-ttu-id="be98d-111">A [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] wyjątek z działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-111">A [!INCLUDE[netfx_current_short](../../../includes/netfx-current-short-md.md)] exception thrown from an activity.</span></span>  
  
-   <span data-ttu-id="be98d-112">Wyjątek zgłoszony z kodu zewnętrznego, takich jak biblioteki, składników i usług, które są używane w przepływie pracy.</span><span class="sxs-lookup"><span data-stu-id="be98d-112">An exception thrown from external code, such as libraries, components, or services that are used in the workflow.</span></span>  
  
## <a name="handling-exceptions"></a><span data-ttu-id="be98d-113">Obsługa wyjątków</span><span class="sxs-lookup"><span data-stu-id="be98d-113">Handling Exceptions</span></span>  
 <span data-ttu-id="be98d-114">Jeśli wyjątek jest zgłaszany przez działanie i nie jest obsługiwany, domyślne zachowanie jest przerwanie wystąpienia przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="be98d-114">If an exception is thrown by an activity and is unhandled, the default behavior is to terminate the workflow instance.</span></span> <span data-ttu-id="be98d-115">Jeśli niestandardowego <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> obsługi, można zastąpić to zachowanie domyślne.</span><span class="sxs-lookup"><span data-stu-id="be98d-115">If a custom <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is present, it can override this default behavior.</span></span> <span data-ttu-id="be98d-116">Ten program obsługi zapewnia Autor hosta przepływu pracy zapewnić odpowiednią obsługę, takich jak niestandardowe rejestrowania, przerwanie przepływu pracy, anulowanie przepływu pracy lub zakończenie przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="be98d-116">This handler gives the workflow host author an opportunity to provide the appropriate handling, such as custom logging, aborting the workflow, canceling the workflow, or terminating the workflow.</span></span>  <span data-ttu-id="be98d-117">Jeśli przepływ pracy zgłasza wyjątek, który nie jest obsługiwana, <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> program obsługi jest wywoływany.</span><span class="sxs-lookup"><span data-stu-id="be98d-117">If a workflow raises an exception that is not handled, the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is invoked.</span></span> <span data-ttu-id="be98d-118">Istnieją trzy możliwe działania zwrócony z <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> określają końcowego wyniku przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="be98d-118">There are three possible actions returned from <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> which determine the final outcome of the workflow.</span></span>  
  
-   <span data-ttu-id="be98d-119">**Anuluj** -łagodne zakończenia wykonywania gałęzi jest wystąpienia przepływu pracy zostało anulowane.</span><span class="sxs-lookup"><span data-stu-id="be98d-119">**Cancel** - A cancelled workflow instance is a graceful exit of a branch execution.</span></span> <span data-ttu-id="be98d-120">Zachowanie anulowania można modelu (na przykład za pomocą działania CancellationScope).</span><span class="sxs-lookup"><span data-stu-id="be98d-120">You can model cancelation behavior (for example, by using a CancellationScope activity).</span></span> <span data-ttu-id="be98d-121">Programu obsługi zdarzeń Completed jest wywoływana po zakończeniu procesu anulowania.</span><span class="sxs-lookup"><span data-stu-id="be98d-121">The Completed handler is invoked when the cancellation process completes.</span></span> <span data-ttu-id="be98d-122">Anulowane przepływu pracy jest w stanie odwołania.</span><span class="sxs-lookup"><span data-stu-id="be98d-122">A cancelled workflow is in the Cancelled state.</span></span>  
  
-   <span data-ttu-id="be98d-123">**Przerwanie** — wystąpienia zakończone przepływu pracy nie można wznowić lub ponownego uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="be98d-123">**Terminate** - A terminated workflow instance cannot be resumed or restarted.</span></span>  <span data-ttu-id="be98d-124">Spowoduje to zainicjowanie zdarzenia zakończony, w którym można podać wyjątek jako przyczyny, dla której została przerwana.</span><span class="sxs-lookup"><span data-stu-id="be98d-124">This triggers the Completed event in which you can provide an exception as the reason it was terminated.</span></span> <span data-ttu-id="be98d-125">Program obsługi zwolniony jest wywoływana po zakończeniu procesu zakończenia.</span><span class="sxs-lookup"><span data-stu-id="be98d-125">The Terminated handler is invoked when the termination process completes.</span></span> <span data-ttu-id="be98d-126">Zakończone przepływu pracy jest w stanie Faulted.</span><span class="sxs-lookup"><span data-stu-id="be98d-126">A terminated workflow is in the Faulted state.</span></span>  
  
-   <span data-ttu-id="be98d-127">**Przerwij** -wystąpień przerwanych przepływów pracy można wznawiać tylko, jeśli został on skonfigurowany jako trwałe.</span><span class="sxs-lookup"><span data-stu-id="be98d-127">**Abort** - An aborted workflow instances can be resumed only if it has been configured to be persistent.</span></span>  <span data-ttu-id="be98d-128">Bez trwałości nie można wznowić przepływ pracy.</span><span class="sxs-lookup"><span data-stu-id="be98d-128">Without persistence, a workflow cannot be resumed.</span></span>  <span data-ttu-id="be98d-129">W punkcie przepływ pracy został przerwany, pracy wykonanej (w pamięci), od ostatniego punktu trwałości zostaną utracone.</span><span class="sxs-lookup"><span data-stu-id="be98d-129">At the point a workflow is aborted, any work done (in memory) since the last persistence point will be lost.</span></span> <span data-ttu-id="be98d-130">Przerwane przepływu pracy obsługi przerwania jest wywoływana przy użyciu wyjątek jako przyczynę po zakończeniu procesu przerwania.</span><span class="sxs-lookup"><span data-stu-id="be98d-130">For an aborted workflow, the Aborted handler is invoked using the exception as the reason when the abort process completes.</span></span> <span data-ttu-id="be98d-131">Jednak w przeciwieństwie do odwołania i zwolniony programu obsługi zdarzeń Completed nie jest wywoływany.</span><span class="sxs-lookup"><span data-stu-id="be98d-131">However, unlike Cancelled and Terminated, the Completed handler is not invoked.</span></span> <span data-ttu-id="be98d-132">Przepływ pracy przerwanych jest w stanie przerwania.</span><span class="sxs-lookup"><span data-stu-id="be98d-132">An aborted workflow is in an Aborted state.</span></span>  
  
 <span data-ttu-id="be98d-133">Poniższy przykład przedstawia wywoływanie przepływu pracy, który zgłasza wyjątek.</span><span class="sxs-lookup"><span data-stu-id="be98d-133">The following example invokes a workflow that throws an exception.</span></span> <span data-ttu-id="be98d-134">Wyjątek jest nieobsługiwany przez przepływ pracy i <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> obsługi jest wywoływany.</span><span class="sxs-lookup"><span data-stu-id="be98d-134">The exception is unhandled by the workflow and the <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> handler is invoked.</span></span> <span data-ttu-id="be98d-135"><xref:System.Activities.WorkflowApplicationUnhandledExceptionEventArgs> Są kontrolowane w celu podania informacji o wyjątku, a przepływ pracy zostanie zakończony.</span><span class="sxs-lookup"><span data-stu-id="be98d-135">The <xref:System.Activities.WorkflowApplicationUnhandledExceptionEventArgs> are inspected to provide information about the exception, and the workflow is terminated.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#1](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#1)]  
  
### <a name="handling-exceptions-with-the-trycatch-activity"></a><span data-ttu-id="be98d-136">Obsługa wyjątków z działaniem Trycatch</span><span class="sxs-lookup"><span data-stu-id="be98d-136">Handling Exceptions with the TryCatch Activity</span></span>  
 <span data-ttu-id="be98d-137">Obsługa wyjątków w przepływie pracy jest wykonywane z <xref:System.Activities.Statements.TryCatch> działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-137">Handling exceptions inside a workflow is performed with the <xref:System.Activities.Statements.TryCatch> activity.</span></span> <span data-ttu-id="be98d-138"><xref:System.Activities.Statements.TryCatch> Działanie ma <xref:System.Activities.Statements.TryCatch.Catches%2A> Kolekcja <xref:System.Activities.Statements.Catch> działań, których każde skojarzone z określonym <xref:System.Exception> typu.</span><span class="sxs-lookup"><span data-stu-id="be98d-138">The <xref:System.Activities.Statements.TryCatch> activity has a <xref:System.Activities.Statements.TryCatch.Catches%2A> collection of <xref:System.Activities.Statements.Catch> activities that are each associated with a specific <xref:System.Exception> type.</span></span> <span data-ttu-id="be98d-139">Jeśli wyjątek zgłoszony przez działanie zawarte w <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji <xref:System.Activities.Statements.TryCatch> działania odpowiada wyjątek <xref:System.Activities.Statements.Catch%601> działania w <xref:System.Activities.Statements.TryCatch.Catches%2A> kolekcji, a następnie wyjątek jest obsługiwany.</span><span class="sxs-lookup"><span data-stu-id="be98d-139">If the exception thrown by an activity that is contained in the <xref:System.Activities.Statements.TryCatch.Try%2A> section of a <xref:System.Activities.Statements.TryCatch> activity matches the exception of a <xref:System.Activities.Statements.Catch%601> activity in the <xref:System.Activities.Statements.TryCatch.Catches%2A> collection, then the exception is handled.</span></span> <span data-ttu-id="be98d-140">Jeśli wyjątek jest jawnie zgłoszony ponownie lub nowy wyjątek następnie tego wyjątku przekazuje do działania nadrzędnego.</span><span class="sxs-lookup"><span data-stu-id="be98d-140">If the exception is explicitly re-thrown or a new exception is thrown then this exception passes up to the parent activity.</span></span> <span data-ttu-id="be98d-141">Poniższy kod przedstawia przykład <xref:System.Activities.Statements.TryCatch> działania, która obsługuje <xref:System.ApplicationException> który jest zgłaszany <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji przez <xref:System.Activities.Statements.Throw> działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-141">The following code example shows a <xref:System.Activities.Statements.TryCatch> activity that handles an <xref:System.ApplicationException> that is thrown in the <xref:System.Activities.Statements.TryCatch.Try%2A> section by a <xref:System.Activities.Statements.Throw> activity.</span></span> <span data-ttu-id="be98d-142">Komunikat o wyjątku jest wyświetlony w konsoli przez <xref:System.Activities.Statements.Catch%601> działania, a następnie wiadomości są zapisywane do konsoli w <xref:System.Activities.Statements.TryCatch.Finally%2A> sekcji.</span><span class="sxs-lookup"><span data-stu-id="be98d-142">The exception's message is written to the console by the <xref:System.Activities.Statements.Catch%601> activity, and then a message is written to the console in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section.</span></span>  
  
 [!code-csharp[CFX_WorkflowApplicationExample#33](../../../samples/snippets/csharp/VS_Snippets_CFX/cfx_workflowapplicationexample/cs/program.cs#33)]  
  
 <span data-ttu-id="be98d-143">Działania w <xref:System.Activities.Statements.TryCatch.Finally%2A> sekcji są wykonywane, kiedy albo <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji lub <xref:System.Activities.Statements.TryCatch.Catches%2A> pomyślnie ukończy sekcji.</span><span class="sxs-lookup"><span data-stu-id="be98d-143">The activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> section are executed when either the <xref:System.Activities.Statements.TryCatch.Try%2A> section or the <xref:System.Activities.Statements.TryCatch.Catches%2A> section successfully completes.</span></span> <span data-ttu-id="be98d-144"><xref:System.Activities.Statements.TryCatch.Try%2A> Sekcji pomyślnie ukończy, jeśli żadne wyjątki są zgłaszane z niego oraz <xref:System.Activities.Statements.TryCatch.Catches%2A> sekcji pomyślnie ukończy, jeśli żadne wyjątki są zgłaszane lub zgłoszony z niego.</span><span class="sxs-lookup"><span data-stu-id="be98d-144">The <xref:System.Activities.Statements.TryCatch.Try%2A> section successfully completes if no exceptions are thrown from it, and the <xref:System.Activities.Statements.TryCatch.Catches%2A> section successfully completes if no exceptions are thrown or rethrown from it.</span></span> <span data-ttu-id="be98d-145">Jeśli wyjątek <xref:System.Activities.Statements.TryCatch.Try%2A> sekcji <xref:System.Activities.Statements.TryCatch> i albo nie jest obsługiwany przez <xref:System.Activities.Statements.Catch%601> w <xref:System.Activities.Statements.TryCatch.Catches%2A> sekcji lub jest zgłoszony z <xref:System.Activities.Statements.TryCatch.Catches%2A>, działania w <xref:System.Activities.Statements.TryCatch.Finally%2A> nie zostanie wykonany, chyba że wystąpi jedno z następujących czynności.</span><span class="sxs-lookup"><span data-stu-id="be98d-145">If an exception is thrown in the <xref:System.Activities.Statements.TryCatch.Try%2A> section of a <xref:System.Activities.Statements.TryCatch> and is either not handled by a <xref:System.Activities.Statements.Catch%601> in the <xref:System.Activities.Statements.TryCatch.Catches%2A> section, or is rethrown from the <xref:System.Activities.Statements.TryCatch.Catches%2A>, the activities in the <xref:System.Activities.Statements.TryCatch.Finally%2A> will not be executed unless the one of the following occurs.</span></span>  
  
-   <span data-ttu-id="be98d-146">Wyjątek wyższym poziomem <xref:System.Activities.Statements.TryCatch> działania w przepływie pracy, niezależnie od tego, czy jest zgłoszony z tego wyższego poziomu <xref:System.Activities.Statements.TryCatch>.</span><span class="sxs-lookup"><span data-stu-id="be98d-146">The exception is caught by a higher level <xref:System.Activities.Statements.TryCatch> activity in the workflow, regardless of whether it is rethrown from that higher level <xref:System.Activities.Statements.TryCatch>.</span></span>  
  
-   <span data-ttu-id="be98d-147">Wyjątek nie jest obsługiwany przez wyższego poziomu <xref:System.Activities.Statements.TryCatch>, specjalne głównego przepływu pracy i przepływ pracy jest skonfigurowany do anulowania zamiast przerwania lub przerwania.</span><span class="sxs-lookup"><span data-stu-id="be98d-147">The exception is not handled by a higher level <xref:System.Activities.Statements.TryCatch>, escapes the root of the workflow, and the workflow is configured to cancel instead of terminate or abort.</span></span> <span data-ttu-id="be98d-148">Przepływy pracy hostowane przy użyciu <xref:System.Activities.WorkflowApplication> można skonfigurować to obsługa <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> i zwracanie <xref:System.Activities.UnhandledExceptionAction.Cancel>.</span><span class="sxs-lookup"><span data-stu-id="be98d-148">Workflows hosted using <xref:System.Activities.WorkflowApplication> can configure this by handling <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> and returning <xref:System.Activities.UnhandledExceptionAction.Cancel>.</span></span> <span data-ttu-id="be98d-149">Przykład obsługa <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> znajduje się wcześniej w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="be98d-149">An example of handling <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A> is provided previously in this topic.</span></span> <span data-ttu-id="be98d-150">Konfigurowanie dla usługi przepływu pracy przy użyciu <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> i określając <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel>.</span><span class="sxs-lookup"><span data-stu-id="be98d-150">Workflow services can configure this by using <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior> and specifying <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionAction.Cancel>.</span></span> <span data-ttu-id="be98d-151">Aby uzyskać przykład konfigurowania <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, zobacz [rozszerzalność hosta usługi przepływu pracy](../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md).</span><span class="sxs-lookup"><span data-stu-id="be98d-151">For an example of configuring <xref:System.ServiceModel.Activities.Description.WorkflowUnhandledExceptionBehavior>, see [Workflow Service Host Extensibility](../../../docs/framework/wcf/feature-details/workflow-service-host-extensibility.md).</span></span>  
  
## <a name="exception-handling-versus-compensation"></a><span data-ttu-id="be98d-152">Obsługa i kompensacji wyjątków</span><span class="sxs-lookup"><span data-stu-id="be98d-152">Exception Handling versus Compensation</span></span>  
 <span data-ttu-id="be98d-153">Różnica między wyjątków i kompensacji jest, że obsługa wyjątków odbywa się podczas wykonywania działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-153">The difference between exception handling and compensation is that exception handling occurs during the execution of an activity.</span></span> <span data-ttu-id="be98d-154">Kompensacji występuje, gdy działanie zostało zakończone pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="be98d-154">Compensation occurs after an activity has successfully completed.</span></span> <span data-ttu-id="be98d-155">Obsługa wyjątków umożliwia czyszczenie po działania zgłasza wyjątek, kompensacji stanowi mechanizm, za pomocą którego można cofnąć pomyślnie ukończona Praca poprzednio ukończoną działania.</span><span class="sxs-lookup"><span data-stu-id="be98d-155">Exception handling provides an opportunity to clean up after the activity raises the exception, whereas compensation provides a mechanism by which the successfully completed work of a previously completed activity can be undone.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="be98d-156">[Kompensacji](../../../docs/framework/windows-workflow-foundation/compensation.md).</span><span class="sxs-lookup"><span data-stu-id="be98d-156"> [Compensation](../../../docs/framework/windows-workflow-foundation/compensation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="be98d-157">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="be98d-157">See Also</span></span>  
 <xref:System.Activities.Statements.TryCatch>  
 <xref:System.Activities.WorkflowApplication.OnUnhandledException%2A>  
 <xref:System.Activities.Statements.CompensableActivity>
