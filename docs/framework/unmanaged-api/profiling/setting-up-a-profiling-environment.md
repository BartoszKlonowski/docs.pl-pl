---
title: Konfigurowanie środowiska profilowania
ms.date: 03/30/2017
helpviewer_keywords:
- environment variables, profiling API
- profiling API [.NET Framework], setting up environment
- COR_PROFILER environment variable
- Windows Service applications, profiling
- profiling API [.NET Framework], Windows Service applications
- COR_ENABLE_PROFILING environment variable
- profiling API [.NET Framework], enabling
ms.assetid: fefca07f-7555-4e77-be86-3c542e928312
author: mairaw
ms.author: mairaw
ms.openlocfilehash: d329b811e0c1377cb2d7555b3e7e30b52071eca8
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/23/2019
ms.locfileid: "54682031"
---
# <a name="setting-up-a-profiling-environment"></a><span data-ttu-id="a5e5a-102">Konfigurowanie środowiska profilowania</span><span class="sxs-lookup"><span data-stu-id="a5e5a-102">Setting Up a Profiling Environment</span></span>
> [!NOTE]
>  <span data-ttu-id="a5e5a-103">Były istotne zmiany do profilowania w [!INCLUDE[net_v40_long](../../../../includes/net-v40-long-md.md)].</span><span class="sxs-lookup"><span data-stu-id="a5e5a-103">There have been substantial changes to profiling in the [!INCLUDE[net_v40_long](../../../../includes/net-v40-long-md.md)].</span></span>  
  
 <span data-ttu-id="a5e5a-104">Po rozpoczęciu procesu zarządzanego (aplikacji lub usługi), ładuje środowisko uruchomieniowe języka wspólnego (CLR).</span><span class="sxs-lookup"><span data-stu-id="a5e5a-104">When a managed process (application or service) starts, it loads the common language runtime (CLR).</span></span> <span data-ttu-id="a5e5a-105">Po zainicjowaniu środowiska CLR, ocenia ono następujące dwie zmienne środowiskowe do określania, czy proces należy się połączyć program profilujący:</span><span class="sxs-lookup"><span data-stu-id="a5e5a-105">When the CLR is initialized, it evaluates the following two environmental variables to decide whether the process should connect to a profiler:</span></span>  
  
-   <span data-ttu-id="a5e5a-106">COR_ENABLE_PROFILING: Środowisko CLR łączy do profilera tylko wtedy, gdy ta zmienna środowiskowa istnieje i jest ustawiona na 1.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-106">COR_ENABLE_PROFILING: The CLR connects to a profiler only if this environment variable exists and is set to 1.</span></span>  
  
-   <span data-ttu-id="a5e5a-107">COR_PROFILER: Jeśli COR_ENABLE_PROFILING sprawdzać przebiegów, CLR łączy się z programem profilującym, które ma identyfikator CLSID lub ProgID, które muszą być uprzednio przechowywane w rejestrze.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-107">COR_PROFILER: If the COR_ENABLE_PROFILING check passes, the CLR connects to the profiler that has this CLSID or ProgID, which must have been stored previously in the registry.</span></span> <span data-ttu-id="a5e5a-108">Zmienna środowiskowa COR_PROFILER jest zdefiniowana jako ciąg znaków, jak pokazano w poniższych dwóch przykładach.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-108">The COR_PROFILER environment variable is defined as a string, as shown in the following two examples.</span></span>  
  
    ```  
    set COR_PROFILER={32E2F4DA-1BEA-47ea-88F9-C5DAF691C94A}  
    set COR_PROFILER="MyProfiler"  
    ```  
  
 <span data-ttu-id="a5e5a-109">Aby profilować aplikację CLR, należy ustawić zmienne środowiskowe COR_ENABLE_PROFILING i COR_PROFILER przed uruchomieniem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-109">To profile a CLR application, you must set the COR_ENABLE_PROFILING and COR_PROFILER environment variables before you run the application.</span></span> <span data-ttu-id="a5e5a-110">Również należy się upewnić, że profiler DLL jest zarejestrowany.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-110">You must also make sure that the profiler DLL is registered.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a5e5a-111">Począwszy od [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)], profilowania nie muszą być zarejestrowane.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-111">Starting with the [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)], profilers do not have to be registered.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="a5e5a-112">Aby używać .NET Framework w wersji 2.0, 3.0 i 3.5 profilowania w [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] i nowsze wersje, należy ustawić zmiennej środowiskowej COMPLUS_ProfAPI_ProfilerCompatibilitySetting.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-112">To use .NET Framework versions 2.0, 3.0, and 3.5 profilers in the [!INCLUDE[net_v40_short](../../../../includes/net-v40-short-md.md)] and later versions, you must set the COMPLUS_ProfAPI_ProfilerCompatibilitySetting environment variable.</span></span>  
  
## <a name="environment-variable-scope"></a><span data-ttu-id="a5e5a-113">Zakres zmiennej środowiskowej.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-113">Environment Variable Scope</span></span>  
 <span data-ttu-id="a5e5a-114">Jak ustawić zmienne środowiskowe COR_ENABLE_PROFILING i COR_PROFILER określa zakres wpływu.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-114">How you set the COR_ENABLE_PROFILING and COR_PROFILER environment variables will determine their scope of influence.</span></span> <span data-ttu-id="a5e5a-115">Można ustawić te zmienne na jeden z następujących sposobów:</span><span class="sxs-lookup"><span data-stu-id="a5e5a-115">You can set these variables in one of the following ways:</span></span>  
  
-   <span data-ttu-id="a5e5a-116">Jeśli ustawisz zmienne w [icordebug::CreateProcess —](../../../../docs/framework/unmanaged-api/debugging/icordebug-createprocess-method.md) wywołanie, będą one dotyczyć tylko aplikacji, które są uruchomione w czasie.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-116">If you set the variables in an [ICorDebug::CreateProcess](../../../../docs/framework/unmanaged-api/debugging/icordebug-createprocess-method.md) call, they will apply only to the application that you are running at the time.</span></span> <span data-ttu-id="a5e5a-117">(Będą one również dotyczyć innych aplikacji, uruchomione przez tę aplikację, dziedziczy środowisko.)</span><span class="sxs-lookup"><span data-stu-id="a5e5a-117">(They will also apply to other applications started by that application that inherit the environment.)</span></span>  
  
-   <span data-ttu-id="a5e5a-118">Jeśli ustawisz zmienne w oknie wiersza polecenia, będą one dotyczyć wszystkich aplikacji, które są uruchamiane z tego okna.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-118">If you set the variables in a Command Prompt window, they will apply to all applications that are started from that window.</span></span>  
  
-   <span data-ttu-id="a5e5a-119">Jeśli ustawisz zmienne na poziomie użytkownika, będą one dotyczyć wszystkich aplikacji, które są uruchamiane przy użyciu Eksploratora plików.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-119">If you set the variables at the user level, they will apply to all applications that you start with File Explorer.</span></span> <span data-ttu-id="a5e5a-120">Okno wiersza polecenia otwarte po ustawieniu zmiennych będzie miało te właściwości środowiska i dlatego będzie każda aplikacja uruchamiana z tego okna.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-120">A Command Prompt window that you open after you set the variables will have these environment settings, and so will any application that you start from that window.</span></span> <span data-ttu-id="a5e5a-121">Aby ustawić zmienne środowiskowe na poziomie użytkownika, kliknij prawym przyciskiem myszy **Mój komputer**, kliknij przycisk **właściwości**, kliknij przycisk **zaawansowane** kliknij pozycję **środowiska Zmienne**i Dodaj zmienne do **zmienne użytkownika** listy.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-121">To set environment variables at the user level, right-click **My Computer**, click **Properties**, click the **Advanced** tab, click **Environment Variables**, and add the variables to the **User variables** list.</span></span>  
  
-   <span data-ttu-id="a5e5a-122">Jeśli ustawisz zmienne na poziomie komputera, będą one dotyczyć wszystkich aplikacji, które są uruchomione na tym komputerze.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-122">If you set the variables at the computer level, they will apply to all applications that are started on that computer.</span></span> <span data-ttu-id="a5e5a-123">Okno wiersza polecenia, które można otworzyć na tym komputerze będzie miało te właściwości środowiska i będzie więc każda aplikacja uruchamiana z tego okna.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-123">A Command Prompt window that you open on that computer will have these environment settings, and so will any application that you start from that window.</span></span> <span data-ttu-id="a5e5a-124">Oznacza to, że każdy proces zarządzany na tym komputerze rozpoczyna się od swojego programu profilującego.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-124">This means that every managed process on that computer will start with your profiler.</span></span> <span data-ttu-id="a5e5a-125">Aby ustawić zmienne środowiskowe na poziomie komputera, kliknij prawym przyciskiem myszy **Mój komputer**, kliknij przycisk **właściwości**, kliknij przycisk **zaawansowane** kliknij pozycję **środowiska Zmienne**, Dodaj zmienne do **zmiennych systemowych** listy, a następnie ponownie uruchom komputer.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-125">To set environment variables at the computer level, right-click **My Computer**, click **Properties**, click the **Advanced** tab, click **Environment Variables**, add the variables to the **System variables** list, and then restart your computer.</span></span> <span data-ttu-id="a5e5a-126">Po ponownym uruchomieniu komputera, zmienne będą dostępne systemowo.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-126">After restarting, the variables will be available system-wide.</span></span>  
  
 <span data-ttu-id="a5e5a-127">Czy profilowanie usługi Windows, należy ponownie uruchomić komputer po ustawieniu zmiennych środowiskowych i zarejestrowaniu programu profilującego DLL.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-127">If you are profiling a Windows Service, you must restart your computer after you set the environment variables and register the profiler DLL.</span></span> <span data-ttu-id="a5e5a-128">Aby uzyskać więcej informacji dotyczących tych rozważań, zobacz sekcję [profilowanie usługi Windows](#windows_service).</span><span class="sxs-lookup"><span data-stu-id="a5e5a-128">For more information about these considerations, see the section [Profiling a Windows Service](#windows_service).</span></span>  
  
## <a name="additional-considerations"></a><span data-ttu-id="a5e5a-129">Dodatkowe zagadnienia</span><span class="sxs-lookup"><span data-stu-id="a5e5a-129">Additional Considerations</span></span>  
  
-   <span data-ttu-id="a5e5a-130">Implementuje klasy programu profilującego [ICorProfilerCallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) i [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) interfejsów.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-130">The profiler class implements the [ICorProfilerCallback](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-interface.md) and [ICorProfilerCallback2](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback2-interface.md) interfaces.</span></span> <span data-ttu-id="a5e5a-131">W programie .NET Framework 2.0, program profilujący musi zaimplementować `ICorProfilerCallback2`.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-131">In the .NET Framework version 2.0, a profiler must implement `ICorProfilerCallback2`.</span></span> <span data-ttu-id="a5e5a-132">Jeśli nie, `ICorProfilerCallback2` nie zostanie załadowany.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-132">If it does not, `ICorProfilerCallback2` will not be loaded.</span></span>  
  
-   <span data-ttu-id="a5e5a-133">Tylko jeden profiler można profilować proces w tym samym czasie w danym środowisku.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-133">Only one profiler can profile a process at one time in a given environment.</span></span> <span data-ttu-id="a5e5a-134">Można zarejestrować dwa różne profilowania w różnych środowiskach, ale każdy musi profilować oddzielnych procesach.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-134">You can register two different profilers in different environments, but each must profile separate processes.</span></span> <span data-ttu-id="a5e5a-135">Program profilujący musi zostać wdrożony jako serwera COM DLL, która jest mapowana do tej samej przestrzeni adresowej jako proces, która jest profilowana w procesie.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-135">The profiler must be implemented as an in-process COM server DLL, which is mapped into the same address space as the process that is being profiled.</span></span> <span data-ttu-id="a5e5a-136">Oznacza to, że profiler jest uruchamiany w procesie.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-136">This means that the profiler runs in-process.</span></span> <span data-ttu-id="a5e5a-137">.NET Framework nie obsługuje żadnego rodzaju serwera COM.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-137">The .NET Framework does not support any other type of COM server.</span></span> <span data-ttu-id="a5e5a-138">Na przykład jeśli program profilujący chce monitorować aplikacje z komputera zdalnego, jego musi implementować agentów kolektora na każdym komputerze.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-138">For example, if a profiler wants to monitor applications from a remote computer, it must implement collector agents on each computer.</span></span> <span data-ttu-id="a5e5a-139">Agenci będą grupowały wyniki i przekazywały je do centralnego komputera zbierania danych.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-139">These agents will batch results and communicate them to the central data collection computer.</span></span>  
  
-   <span data-ttu-id="a5e5a-140">Ponieważ program profilujący jest obiektem COM, który jest tworzony w procesie, każda profilowana aplikacja posiada własną kopię programu profilującego.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-140">Because the profiler is a COM object that is instantiated in-process, each profiled application will have its own copy of the profiler.</span></span> <span data-ttu-id="a5e5a-141">Dlatego wystąpienie pojedynczego profilera nie ma obsługi danych z wielu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-141">Therefore, a single profiler instance does not have to handle data from multiple applications.</span></span> <span data-ttu-id="a5e5a-142">Jednak trzeba będzie dodać logikę do programu profilującego rejestrowania kodu, aby zapobiec pliku dziennika zastępuje z innych aplikacji profilowanych.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-142">However, you will have to add logic to the profiler's logging code to prevent log file overwrites from other profiled applications.</span></span>  
  
## <a name="initializing-the-profiler"></a><span data-ttu-id="a5e5a-143">Inicjowanie Profiler</span><span class="sxs-lookup"><span data-stu-id="a5e5a-143">Initializing the Profiler</span></span>  
 <span data-ttu-id="a5e5a-144">Gdy oba zmiennej środowiskowej zostały wykryte, CLR tworzy instancję programu profilującego w sposób podobny do COM `CoCreateInstance` funkcji.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-144">When both environment variable checks pass, the CLR creates an instance of the profiler in a similar manner to the COM `CoCreateInstance` function.</span></span> <span data-ttu-id="a5e5a-145">Program profilujący nie jest załadowany poprzez bezpośrednie wywołanie `CoCreateInstance`.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-145">The profiler is not loaded through a direct call to `CoCreateInstance`.</span></span> <span data-ttu-id="a5e5a-146">W związku z tym, wywołanie `CoInitialize`, które wymaga utworzenia modelu wątku, jest unikane.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-146">Therefore, a call to `CoInitialize`, which requires setting the threading model, is avoided.</span></span> <span data-ttu-id="a5e5a-147">Środowisko CLR następnie wywołuje [ICorProfilerCallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) metodę w programie profiler.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-147">The CLR then calls the [ICorProfilerCallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) method in the profiler.</span></span> <span data-ttu-id="a5e5a-148">Podpis tej metody jest następujący.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-148">The signature of this method is as follows.</span></span>  
  
```  
HRESULT Initialize(IUnknown *pICorProfilerInfoUnk)  
```  
  
 <span data-ttu-id="a5e5a-149">Program profilujący musi wykonać zapytanie `pICorProfilerInfoUnk` dla [ICorProfilerInfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) lub [ICorProfilerInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) interfejsu wskaźnika i zapisać go tak, aby go zażądać więcej informacji później podczas profilowania.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-149">The profiler must query `pICorProfilerInfoUnk` for an [ICorProfilerInfo](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-interface.md) or [ICorProfilerInfo2](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo2-interface.md) interface pointer and save it so that it can request more information later during profiling.</span></span>  
  
## <a name="setting-event-notifications"></a><span data-ttu-id="a5e5a-150">Ustawianie powiadomień o zdarzeniach</span><span class="sxs-lookup"><span data-stu-id="a5e5a-150">Setting Event Notifications</span></span>  
 <span data-ttu-id="a5e5a-151">Następnie program profilujący wywołuje [ICorProfilerInfo::SetEventMask](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-seteventmask-method.md) metodę, aby określić, którymi kategoriami powiadomień jest zainteresowany.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-151">The profiler then calls the [ICorProfilerInfo::SetEventMask](../../../../docs/framework/unmanaged-api/profiling/icorprofilerinfo-seteventmask-method.md) method to specify which categories of notifications it is interested in.</span></span> <span data-ttu-id="a5e5a-152">Na przykład jeśli program profilujący zajmuje się tylko wprowadzeniem funkcji i pozostawia powiadomienia i powiadomienia dotyczące odzyskiwania pamięci, określa poniższe.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-152">For example, if the profiler is interested only in function enter and leave notifications and garbage collection notifications, it specifies the following.</span></span>  
  
```  
ICorProfilerInfo* pInfo;  
pICorProfilerInfoUnk->QueryInterface(IID_ICorProfilerInfo, (void**)&pInfo);  
pInfo->SetEventMask(COR_PRF_MONITOR_ENTERLEAVE | COR_PRF_MONITOR_GC)  
```  
  
 <span data-ttu-id="a5e5a-153">Ustawiając maskę powiadomień w ten sposób, program profilujący może ograniczyć powiadomienia, które otrzyma.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-153">By setting the notifications mask in this manner, the profiler can limit which notifications it receives.</span></span> <span data-ttu-id="a5e5a-154">To podejście pozwala użytkownikowi na tworzenie prostego lub specjalnego narzędzia profiler.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-154">This approach helps the user build a simple or special-purpose profiler.</span></span> <span data-ttu-id="a5e5a-155">Zmniejsza to także czas CPU, który zostałby zmarnowany na wysyłanie powiadomień, które program profilujący po prostu zignoruje.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-155">It also reduces CPU time that would be wasted sending notifications that the profiler would just ignore.</span></span>  
  
 <span data-ttu-id="a5e5a-156">Niektóre zdarzenia programu profilującego są niezmienne.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-156">Certain profiler events are immutable.</span></span> <span data-ttu-id="a5e5a-157">Oznacza to, że jak tylko te zdarzenia zostaną ustawione `ICorProfilerCallback::Initialize` wywołanie zwrotne, nie można jej wyłączyć i nowe zdarzenia nie może być włączona.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-157">This means that as soon as these events are set in the `ICorProfilerCallback::Initialize` callback, they cannot be turned off and new events cannot be turned on.</span></span> <span data-ttu-id="a5e5a-158">Próby zmiany niezmiennego zdarzenia będą skutkować `ICorProfilerInfo::SetEventMask` zwracanie HRESULT nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-158">Attempts to change an immutable event will result in `ICorProfilerInfo::SetEventMask` returning a failed HRESULT.</span></span>  
  
<a name="windows_service"></a>   
## <a name="profiling-a-windows-service"></a><span data-ttu-id="a5e5a-159">Profilowanie usługi Windows</span><span class="sxs-lookup"><span data-stu-id="a5e5a-159">Profiling a Windows Service</span></span>  
 <span data-ttu-id="a5e5a-160">Profilowanie usługi Windows jest podobne do profilowania typowych aplikacji środowiska wykonawczego języka.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-160">Profiling a Windows Service is like profiling a common language runtime application.</span></span> <span data-ttu-id="a5e5a-161">Obie operacje profilowania są włączone za pomocą zmiennych środowiskowych.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-161">Both profiling operations are enabled through environment variables.</span></span> <span data-ttu-id="a5e5a-162">Ponieważ usługa Windows jest uruchamiana, gdy system operacyjny zostanie uruchomiony, zmienne środowiskowe omówione wcześniej w tym temacie muszą już być obecne i ustawione na wartości wymagane przed uruchomieniem systemu.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-162">Because a Windows Service is started when the operating system starts, the environment variables discussed previously in this topic must already be present and set to the required values before the system starts.</span></span> <span data-ttu-id="a5e5a-163">Ponadto profilowanie DLL musi być już zarejestrowany w systemie.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-163">In addition, the profiling DLL must already be registered on the system.</span></span>  
  
 <span data-ttu-id="a5e5a-164">Po ustawieniu zmiennych środowiskowych COR_ENABLE_PROFILING i COR_PROFILER i zarejestrowaniu programu profilującego DLL, dzięki czemu usługa Windows mogła wykryć te zmiany należy ponownie uruchomić komputer docelowy.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-164">After you set the COR_ENABLE_PROFILING and COR_PROFILER environment variables and register the profiler DLL, you should restart the target computer so that the Windows Service can detect those changes.</span></span>  
  
 <span data-ttu-id="a5e5a-165">Należy pamiętać, że zmiany te umożliwią profilowanie na podstawie całego systemu.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-165">Note that these changes will enable profiling on a system-wide basis.</span></span> <span data-ttu-id="a5e5a-166">Aby zapobiec każda zarządzana aplikacja kolejno poddawanego profilowaniu unika, należy usunąć zmienne środowiskowe systemu po ponownym uruchomieniu komputera docelowego.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-166">To prevent every managed application that subsequently runs from being profiled, you should delete the system environment variables after you restart the target computer.</span></span>  
  
 <span data-ttu-id="a5e5a-167">Technika ta prowadzi do każdego procesu CLR profilowany.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-167">This technique also leads to every CLR process getting profiled.</span></span> <span data-ttu-id="a5e5a-168">Program profilujący powinien dodać logikę do jej [ICorProfilerCallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) wywołania zwrotnego do wykrywania, czy bieżący proces jest przedmiotem zainteresowania.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-168">The profiler should add logic to its [ICorProfilerCallback::Initialize](../../../../docs/framework/unmanaged-api/profiling/icorprofilercallback-initialize-method.md) callback to detect whether the current process is of interest.</span></span> <span data-ttu-id="a5e5a-169">Jeśli nie jest dostępne, program profilujący może zawieść wywołanie zwrotne bez przeprowadzenia inicjalizacji.</span><span class="sxs-lookup"><span data-stu-id="a5e5a-169">If it is not, the profiler can fail the callback without performing the initialization.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a5e5a-170">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="a5e5a-170">See also</span></span>
- [<span data-ttu-id="a5e5a-171">Omówienie profilowania</span><span class="sxs-lookup"><span data-stu-id="a5e5a-171">Profiling Overview</span></span>](../../../../docs/framework/unmanaged-api/profiling/profiling-overview.md)
