---
title: Architektura ustawień aplikacji
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- application settings [Windows Forms], architecture
ms.assetid: c8eb2ad0-fac6-4ea2-9140-675a4a44d562
ms.openlocfilehash: 769077ddbe42d4d774d359de75417bdca6bcaeb5
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/04/2018
---
# <a name="application-settings-architecture"></a><span data-ttu-id="4ee27-102">Architektura ustawień aplikacji</span><span class="sxs-lookup"><span data-stu-id="4ee27-102">Application Settings Architecture</span></span>
<span data-ttu-id="4ee27-103">W tym temacie opisano, jak działa Architektura ustawień aplikacji i Eksploruje zaawansowanych funkcji architektury, takie jak ustawienia grupowanych i ustawienia kluczy.</span><span class="sxs-lookup"><span data-stu-id="4ee27-103">This topic describes how the Application Settings architecture works, and explores advanced features of the architecture, such as grouped settings and settings keys.</span></span>  
  
 <span data-ttu-id="4ee27-104">Architektura ustawień aplikacji obsługuje definiującego jednoznacznie ustawienia za pomocą aplikacji lub zakresu użytkownika i przechowywanie ustawienia między sesjami aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-104">The application settings architecture supports defining strongly typed settings with either application or user scope, and persisting the settings between application sessions.</span></span> <span data-ttu-id="4ee27-105">Architektura udostępnia domyślny aparat trwałości, który zapisywania ustawienia i ładuje je z lokalnego systemu plików.</span><span class="sxs-lookup"><span data-stu-id="4ee27-105">The architecture provides a default persistence engine for saving settings to and loading them from the local file system.</span></span> <span data-ttu-id="4ee27-106">Architektura definiuje również interfejsy dostarczanie aparatu niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="4ee27-106">The architecture also defines interfaces for supplying a custom persistence engine.</span></span>  
  
 <span data-ttu-id="4ee27-107">Interfejsy są dostarczane umożliwiających niestandardowych składników utrwalić własne ustawienia, jeśli są one hostowane w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-107">Interfaces are provided that enable custom components to persist their own settings when they are hosted in an application.</span></span> <span data-ttu-id="4ee27-108">Przy użyciu ustawienia kluczy, składniki ustawienia można zachować wiele wystąpień składnika oddzielne.</span><span class="sxs-lookup"><span data-stu-id="4ee27-108">By using settings keys, components can keep settings for multiple instances of the component separate.</span></span>  
  
## <a name="defining-settings"></a><span data-ttu-id="4ee27-109">Definiowanie ustawień</span><span class="sxs-lookup"><span data-stu-id="4ee27-109">Defining Settings</span></span>  
 <span data-ttu-id="4ee27-110">Architektura ustawień aplikacji jest używany w obu [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] i formularze systemu Windows który zawiera wiele klas podstawowych, które są udostępniane w obu środowiskach.</span><span class="sxs-lookup"><span data-stu-id="4ee27-110">The application settings architecture is used within both [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] and Windows Forms, and it contains a number of base classes that are shared across both environments.</span></span> <span data-ttu-id="4ee27-111">Najważniejsze jest <xref:System.Configuration.SettingsBase>, który zapewnia dostęp do ustawień za pomocą kolekcji i udostępnia metody niskiego poziomu do ładowania i zapisywania ustawień.</span><span class="sxs-lookup"><span data-stu-id="4ee27-111">The most important is <xref:System.Configuration.SettingsBase>, which provides access to settings through a collection, and provides low-level methods for loading and saving settings.</span></span> <span data-ttu-id="4ee27-112">Każde środowisko implementuje własnej pochodzi od klasy <xref:System.Configuration.SettingsBase> umożliwiają korzystanie z funkcji dodatkowych ustawień dla tego środowiska.</span><span class="sxs-lookup"><span data-stu-id="4ee27-112">Each environment implements its own class derived from <xref:System.Configuration.SettingsBase> to provide additional settings functionality for that environment.</span></span> <span data-ttu-id="4ee27-113">W aplikacji formularzy systemu Windows, wszystkie ustawienia aplikacji musi być zdefiniowana w klasy pochodzącej od <xref:System.Configuration.ApplicationSettingsBase> klasy, która dodaje do klasy podstawowej następujące funkcje:</span><span class="sxs-lookup"><span data-stu-id="4ee27-113">In a Windows Forms-based application, all application settings must be defined on a class derived from the <xref:System.Configuration.ApplicationSettingsBase> class, which adds the following functionality to the base class:</span></span>  
  
-   <span data-ttu-id="4ee27-114">Ładowanie wyższego poziomu i zapisywanie operacji</span><span class="sxs-lookup"><span data-stu-id="4ee27-114">Higher-level loading and saving operations</span></span>  
  
-   <span data-ttu-id="4ee27-115">Obsługa ustawień z zakresu użytkownika</span><span class="sxs-lookup"><span data-stu-id="4ee27-115">Support for user-scoped settings</span></span>  
  
-   <span data-ttu-id="4ee27-116">Przywracanie ustawień użytkownika do wstępnie zdefiniowanych ustawień domyślnych</span><span class="sxs-lookup"><span data-stu-id="4ee27-116">Reverting a user's settings to the predefined defaults</span></span>  
  
-   <span data-ttu-id="4ee27-117">Uaktualnianie ustawień z poprzedniej wersji aplikacji</span><span class="sxs-lookup"><span data-stu-id="4ee27-117">Upgrading settings from a previous application version</span></span>  
  
-   <span data-ttu-id="4ee27-118">Sprawdzanie poprawności ustawień, zanim zostaną one zmienione lub przed ich zapisaniem</span><span class="sxs-lookup"><span data-stu-id="4ee27-118">Validating settings, either before they are changed or before they are saved</span></span>  
  
 <span data-ttu-id="4ee27-119">Ustawienia można również opisać za pomocą numeru atrybuty zdefiniowane w ramach <xref:System.Configuration> przestrzeni nazw; opisano je w [atrybuty ustawień aplikacji](../../../../docs/framework/winforms/advanced/application-settings-attributes.md).</span><span class="sxs-lookup"><span data-stu-id="4ee27-119">The settings can be described using a number of attributes defined within the <xref:System.Configuration> namespace; these are described in [Application Settings Attributes](../../../../docs/framework/winforms/advanced/application-settings-attributes.md).</span></span> <span data-ttu-id="4ee27-120">Po zdefiniowaniu ustawienia, należy najpierw zastosować go przy użyciu jednej <xref:System.Configuration.ApplicationScopedSettingAttribute> lub <xref:System.Configuration.UserScopedSettingAttribute>, która opisuje, czy ustawienie ma zastosowanie do całej aplikacji lub tylko do bieżącego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4ee27-120">When you define a setting, you must apply it with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>, which describes whether the setting applies to the entire application or just to the current user.</span></span>  
  
 <span data-ttu-id="4ee27-121">Poniższy przykładowy kod definiuje klasę ustawień niestandardowych przy użyciu jednego ustawienia `BackgroundColor`.</span><span class="sxs-lookup"><span data-stu-id="4ee27-121">The following code example defines a custom settings class with a single setting, `BackgroundColor`.</span></span>  
  
 [!code-csharp[ApplicationSettings.Create#1](../../../../samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Create/CS/MyAppSettings.cs#1)]
 [!code-vb[ApplicationSettings.Create#1](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Create/VB/MyAppSettings.vb#1)]  
  
## <a name="settings-persistence"></a><span data-ttu-id="4ee27-122">Ustawienia trwałości</span><span class="sxs-lookup"><span data-stu-id="4ee27-122">Settings Persistence</span></span>  
 <span data-ttu-id="4ee27-123"><xref:System.Configuration.ApplicationSettingsBase> Klasy nie sam utrwalić lub załadować ustawień; tego zadania znajduje się do ustawień dostawcy, klasy, która jest pochodną <xref:System.Configuration.SettingsProvider>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-123">The <xref:System.Configuration.ApplicationSettingsBase> class does not itself persist or load settings; this job falls to the settings provider, a class that derives from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="4ee27-124">Jeśli klasa pochodna z <xref:System.Configuration.ApplicationSettingsBase> nie określono ustawień dostawcy za pośrednictwem <xref:System.Configuration.SettingsProviderAttribute>, domyślny dostawca, a następnie <xref:System.Configuration.LocalFileSettingsProvider>, jest używany.</span><span class="sxs-lookup"><span data-stu-id="4ee27-124">If a derived class of <xref:System.Configuration.ApplicationSettingsBase> does not specify a settings provider through the <xref:System.Configuration.SettingsProviderAttribute>, then the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span>  
  
 <span data-ttu-id="4ee27-125">System konfiguracji, który pierwotnie został wydany z [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] obsługuje dostarcza dane konfiguracji statycznej aplikacji za pomocą komputera lokalnego pliku machine.config lub w `app.`pliku exe.config, który można wdrożyć z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-125">The configuration system that was originally released with the [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] supports providing static application configuration data through either the local computer's machine.config file or within an `app.`exe.config file that you deploy with your application.</span></span> <span data-ttu-id="4ee27-126"><xref:System.Configuration.LocalFileSettingsProvider> Klasa rozszerza Natywna obsługa w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="4ee27-126">The <xref:System.Configuration.LocalFileSettingsProvider> class expands this native support in the following ways:</span></span>  
  
-   <span data-ttu-id="4ee27-127">Ustawienia zakresu aplikacji mogą być przechowywane w każdym pliku machine.config lub `app.`exe.config plików.</span><span class="sxs-lookup"><span data-stu-id="4ee27-127">Application-scoped settings can be stored in either the machine.config or `app.`exe.config files.</span></span> <span data-ttu-id="4ee27-128">Machine.config jest zawsze tylko do odczytu, podczas `app`. exe.config jest ograniczony przez zagadnienia dotyczące zabezpieczeń tylko do odczytu dla większości aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-128">Machine.config is always read-only, while `app`.exe.config is restricted by security considerations to read-only for most applications.</span></span>  
  
-   <span data-ttu-id="4ee27-129">Ustawienia zakresu użytkownika mogą być przechowywane w `app`. exe.config plików, w tym przypadku są traktowane jako statyczne ustawienia domyślne.</span><span class="sxs-lookup"><span data-stu-id="4ee27-129">User-scoped settings can be stored in `app`.exe.config files, in which case they are treated as static defaults.</span></span>  
  
-   <span data-ttu-id="4ee27-130">Inne niż domyślne ustawienia zakresu użytkownika są przechowywane w nowym pliku *użytkownika*.config, gdzie *użytkownika* jest nazwą użytkownika osoby aktualnie wykonywanych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-130">Non-default user-scoped settings are stored in a new file, *user*.config, where *user* is the user name of the person currently executing the application.</span></span> <span data-ttu-id="4ee27-131">Można określić domyślnego ustawienia zakresu użytkownika z <xref:System.Configuration.DefaultSettingValueAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-131">You can specify a default for a user-scoped setting with <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="4ee27-132">Ponieważ ustawień z zakresu użytkownika często się zmieniają podczas wykonywania aplikacji `user`.config jest zawsze odczytu/zapisu.</span><span class="sxs-lookup"><span data-stu-id="4ee27-132">Because user-scoped settings often change during application execution, `user`.config is always read/write.</span></span>  
  
 <span data-ttu-id="4ee27-133">Wszystkie pliki konfiguracji trzy ustawienia są przechowywane w formacie XML.</span><span class="sxs-lookup"><span data-stu-id="4ee27-133">All three configuration files store settings in XML format.</span></span> <span data-ttu-id="4ee27-134">Element XML najwyższego poziomu dla ustawień z zakresu aplikacji jest `<appSettings>`, podczas gdy `<userSettings>` jest używana do ustawienia zakresu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="4ee27-134">The top-level XML element for application-scoped settings is `<appSettings>`, while `<userSettings>` is used for user-scoped settings.</span></span> <span data-ttu-id="4ee27-135">`app`. Exe.config pliku, który zawiera zarówno zakresu aplikacji i domyślne ustawienia dla ustawień z zakresu użytkownika będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="4ee27-135">An `app`.exe.config file which contains both application-scoped settings and defaults for user-scoped settings would look like this:</span></span>  
  
```xml  
<?xml version="1.0" encoding="utf-8" ?>  
<configuration>  
    <configSections>  
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >  
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />  
        </sectionGroup>  
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >  
            <section name="WindowsApplication1.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" />  
        </sectionGroup>  
    </configSections>  
    <applicationSettings>  
        <WindowsApplication1.Properties.Settings>  
            <setting name="Cursor" serializeAs="String">  
                <value>Default</value>  
            </setting>  
            <setting name="DoubleBuffering" serializeAs="String">  
                <value>False</value>  
            </setting>  
        </WindowsApplication1.Properties.Settings>  
    </applicationSettings>  
    <userSettings>  
        <WindowsApplication1.Properties.Settings>  
            <setting name="FormTitle" serializeAs="String">  
                <value>Form1</value>  
            </setting>  
            <setting name="FormSize" serializeAs="String">  
                <value>595, 536</value>  
            </setting>  
        </WindowsApplication1.Properties.Settings>  
    </userSettings>  
</configuration>  
```  
  
 <span data-ttu-id="4ee27-136">Dla definicji elementów w sekcji Ustawienia aplikacji w pliku konfiguracji, zobacz [schemat ustawień aplikacji](../../../../docs/framework/configure-apps/file-schema/application-settings-schema.md).</span><span class="sxs-lookup"><span data-stu-id="4ee27-136">For a definition of the elements within the application settings section of a configuration file, see [Application Settings Schema](../../../../docs/framework/configure-apps/file-schema/application-settings-schema.md).</span></span>  
  
### <a name="settings-bindings"></a><span data-ttu-id="4ee27-137">Ustawienia powiązań</span><span class="sxs-lookup"><span data-stu-id="4ee27-137">Settings Bindings</span></span>  
 <span data-ttu-id="4ee27-138">Ustawienia aplikacji używa architektura powiązanie danych formularzy systemu Windows w celu zapewnienia dwukierunkowej komunikacji aktualizacji ustawienia między obiekt ustawień i składniki.</span><span class="sxs-lookup"><span data-stu-id="4ee27-138">Application settings uses the Windows Forms data binding architecture to provide two-way communication of settings updates between the settings object and components.</span></span> <span data-ttu-id="4ee27-139">Jeśli używasz programu Visual Studio do tworzenia ustawienia aplikacji i przypisać je do właściwości składnika tych powiązań są generowane automatycznie.</span><span class="sxs-lookup"><span data-stu-id="4ee27-139">If you use Visual Studio to create application settings and assign them to component properties, these bindings are generated automatically.</span></span>  
  
 <span data-ttu-id="4ee27-140">Ustawienie aplikacji można powiązać tylko z składnika obsługującego <xref:System.Windows.Forms.IBindableComponent> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4ee27-140">You can only bind an application setting to a component that supports the <xref:System.Windows.Forms.IBindableComponent> interface.</span></span> <span data-ttu-id="4ee27-141">Ponadto składnik musi implementować zdarzenia zmiany dla określonego powiązane właściwości lub powiadomić ustawienia aplikacji, które właściwości została zmieniona przez <xref:System.ComponentModel.INotifyPropertyChanged> interfejsu.</span><span class="sxs-lookup"><span data-stu-id="4ee27-141">Also, the component must implement a change event for a specific bound property, or notify application settings that the property has changed through the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="4ee27-142">Jeśli składnik nie implementuje <xref:System.Windows.Forms.IBindableComponent> i są powiązania za pomocą programu Visual Studio, powiązane właściwości można ustawić po raz pierwszy, ale nie będzie aktualizowana.</span><span class="sxs-lookup"><span data-stu-id="4ee27-142">If the component does not implement <xref:System.Windows.Forms.IBindableComponent> and you are binding through Visual Studio, the bound properties will be set the first time, but will not update.</span></span> <span data-ttu-id="4ee27-143">Jeśli zaimplementowano składnik <xref:System.Windows.Forms.IBindableComponent> , ale nie Obsługa właściwości zmienia powiadomienia, po zmianie właściwości powiązania nie będzie aktualizowana w pliku ustawień.</span><span class="sxs-lookup"><span data-stu-id="4ee27-143">If the component implements <xref:System.Windows.Forms.IBindableComponent> but does not support property change notifications, the binding will not update in the settings file when the property is changed.</span></span>  
  
 <span data-ttu-id="4ee27-144">Niektóre składniki formularzy systemu Windows, takich jak <xref:System.Windows.Forms.ToolStripItem>, nie obsługuje ustawienia powiązania.</span><span class="sxs-lookup"><span data-stu-id="4ee27-144">Some Windows Forms components, such as <xref:System.Windows.Forms.ToolStripItem>, do not support settings bindings.</span></span>  
  
### <a name="settings-serialization"></a><span data-ttu-id="4ee27-145">Ustawienia serializacji</span><span class="sxs-lookup"><span data-stu-id="4ee27-145">Settings Serialization</span></span>  
 <span data-ttu-id="4ee27-146">Gdy <xref:System.Configuration.LocalFileSettingsProvider> należy zapisać ustawienia, dysku wykonuje następujące akcje:</span><span class="sxs-lookup"><span data-stu-id="4ee27-146">When <xref:System.Configuration.LocalFileSettingsProvider> must save settings to disk, it performs the following actions:</span></span>  
  
1.  <span data-ttu-id="4ee27-147">Używa odbicia w celu zbadania wszystkich właściwości zdefiniowane w Twojej <xref:System.Configuration.ApplicationSettingsBase> klasy znajdowania tych, które są stosowane przy użyciu jednej <xref:System.Configuration.ApplicationScopedSettingAttribute> lub <xref:System.Configuration.UserScopedSettingAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-147">Uses reflection to examine all of the properties defined on your <xref:System.Configuration.ApplicationSettingsBase> derived class, finding those that are applied with either <xref:System.Configuration.ApplicationScopedSettingAttribute> or <xref:System.Configuration.UserScopedSettingAttribute>.</span></span>  
  
2.  <span data-ttu-id="4ee27-148">Serializuje właściwości na dysku.</span><span class="sxs-lookup"><span data-stu-id="4ee27-148">Serializes the property to disk.</span></span> <span data-ttu-id="4ee27-149">Najpierw próbuje wywołać <xref:System.ComponentModel.TypeConverter.ConvertToString%2A> lub <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> na skojarzonym typ <xref:System.ComponentModel.TypeConverter>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-149">It first attempts to call the <xref:System.ComponentModel.TypeConverter.ConvertToString%2A> or <xref:System.ComponentModel.TypeConverter.ConvertFromString%2A> on the type's associated <xref:System.ComponentModel.TypeConverter>.</span></span> <span data-ttu-id="4ee27-150">Jeśli to się nie powiedzie, nastąpi serializacji XML zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="4ee27-150">If this does not succeed, it uses XML serialization instead.</span></span>  
  
3.  <span data-ttu-id="4ee27-151">Określa ustawienia, które są umieszczone w plikach, w którym na podstawie atrybutu tego ustawienia.</span><span class="sxs-lookup"><span data-stu-id="4ee27-151">Determines which settings go in which files, based on the setting's attribute.</span></span>  
  
 <span data-ttu-id="4ee27-152">Implementuje klasy ustawienia, można użyć <xref:System.Configuration.SettingsSerializeAsAttribute> do oznaczania ustawienie albo za pomocą serializacji binarnej lub niestandardowych <xref:System.Configuration.SettingsSerializeAs> wyliczenia.</span><span class="sxs-lookup"><span data-stu-id="4ee27-152">If you implement your own settings class, you can use the <xref:System.Configuration.SettingsSerializeAsAttribute> to mark a setting for either binary or custom serialization using the <xref:System.Configuration.SettingsSerializeAs> enumeration.</span></span> <span data-ttu-id="4ee27-153">Aby uzyskać więcej informacji na temat tworzenia własnych klas ustawienia w kodzie, zobacz [porady: Tworzenie ustawień aplikacji](../../../../docs/framework/winforms/advanced/how-to-create-application-settings.md).</span><span class="sxs-lookup"><span data-stu-id="4ee27-153">For more information on creating your own settings class in code, see [How to: Create Application Settings](../../../../docs/framework/winforms/advanced/how-to-create-application-settings.md).</span></span>  
  
### <a name="settings-file-locations"></a><span data-ttu-id="4ee27-154">Ustawienia lokalizacji plików</span><span class="sxs-lookup"><span data-stu-id="4ee27-154">Settings File Locations</span></span>  
 <span data-ttu-id="4ee27-155">Lokalizacja `app`. exe.config i *użytkownika*plikach .config będą różne w zależności od sposobu instalowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-155">The location of the `app`.exe.config and *user*.config files will differ based on how the application is installed.</span></span> <span data-ttu-id="4ee27-156">Dla aplikacji opartych na formularzach systemu Windows skopiowany na komputer lokalny `app`. exe.config będą znajdować się w tym samym katalogu co katalogu podstawowego aplikacji głównego pliku wykonywalnego, a *użytkownika*.config będą znajdować się w lokalizacji określonej przez <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> właściwości.</span><span class="sxs-lookup"><span data-stu-id="4ee27-156">For a Windows Forms-based application copied onto the local computer, `app`.exe.config will reside in the same directory as the base directory of the application's main executable file, and *user*.config will reside in the location specified by the <xref:System.Windows.Forms.Application.LocalUserAppDataPath%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="4ee27-157">Dla aplikacji zainstalowane za pomocą klasy [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)], oba te pliki będą znajdować się w [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] katalog danych poniżej %InstallRoot%\Documents i ustawienia\\*username*\Local ustawienia.</span><span class="sxs-lookup"><span data-stu-id="4ee27-157">For an application installed by means of [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)], both of these files will reside in the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] Data Directory underneath %InstallRoot%\Documents and Settings\\*username*\Local Settings.</span></span>  
  
 <span data-ttu-id="4ee27-158">Lokalizacja przechowywania tych plików różni się nieznacznie, jeśli użytkownik włączył profilów mobilnych, co umożliwia użytkownikowi na definiowanie różnych systemu Windows i ustawienia aplikacji, jeśli użytkownik korzysta z innych komputerów w domenie.</span><span class="sxs-lookup"><span data-stu-id="4ee27-158">The storage location of these files is slightly different if a user has enabled roaming profiles, which enables a user to define different Windows and application settings when he or she is using other computers within a domain.</span></span> <span data-ttu-id="4ee27-159">W takim przypadku zarówno [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] aplikacji i nie-[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] aplikacji będą miały ich `app`. exe.config i *użytkownika*.config pliki przechowywane w obszarze Ustawienia i %InstallRoot%\Documents\\ *username*\Application danych.</span><span class="sxs-lookup"><span data-stu-id="4ee27-159">In that case, both [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] applications and non-[!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] applications will have their `app`.exe.config and *user*.config files stored under %InstallRoot%\Documents and Settings\\*username*\Application Data.</span></span>  
  
 <span data-ttu-id="4ee27-160">Aby uzyskać więcej informacji na temat działania funkcji ustawień aplikacji z nowej technologii wdrażania, zobacz [ClickOnce i ustawienia aplikacji](/visualstudio/deployment/clickonce-and-application-settings).</span><span class="sxs-lookup"><span data-stu-id="4ee27-160">For more information about how the Application Settings feature works with the new deployment technology, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span> <span data-ttu-id="4ee27-161">Aby uzyskać więcej informacji na temat [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] katalog danych, zobacz [dostęp do lokalnych i zdalnych danych w aplikacjach ClickOnce](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications).</span><span class="sxs-lookup"><span data-stu-id="4ee27-161">For more information about the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] Data Directory, see [Accessing Local and Remote Data in ClickOnce Applications](/visualstudio/deployment/accessing-local-and-remote-data-in-clickonce-applications).</span></span>  
  
## <a name="application-settings-and-security"></a><span data-ttu-id="4ee27-162">Ustawienia aplikacji i zabezpieczenia</span><span class="sxs-lookup"><span data-stu-id="4ee27-162">Application Settings and Security</span></span>  
 <span data-ttu-id="4ee27-163">Ustawienia aplikacji są przeznaczone do pracy w częściowej relacji zaufania, środowisko z ograniczeniami, które jest ustawieniem domyślnym dla aplikacji Windows Forms hostowanej w Internecie lub intranecie.</span><span class="sxs-lookup"><span data-stu-id="4ee27-163">Application settings are designed to work in partial trust, a restricted environment that is the default for Windows Forms applications hosted over the Internet or an intranet.</span></span> <span data-ttu-id="4ee27-164">Żadne specjalne uprawnienia, które wykraczają poza częściowej relacji zaufania są niezbędne do używania ustawienia aplikacji z ustawienia domyślnego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="4ee27-164">No special permissions beyond partial trust are needed to use application settings with the default settings provider.</span></span>  
  
 <span data-ttu-id="4ee27-165">Gdy aplikacja, ustawienia są używane w [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] aplikacji, `user`pliku .config są przechowywane w [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] katalog danych.</span><span class="sxs-lookup"><span data-stu-id="4ee27-165">When application settings are used in a [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] application, the `user`.config file is stored in the [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)] data directory.</span></span> <span data-ttu-id="4ee27-166">Rozmiar aplikacji `user`pliku .config nie może przekraczać limit przydziału katalogu ustawione przez [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)].</span><span class="sxs-lookup"><span data-stu-id="4ee27-166">The size of the application's `user`.config file cannot exceed the data directory quota set by [!INCLUDE[ndptecclick](../../../../includes/ndptecclick-md.md)].</span></span> <span data-ttu-id="4ee27-167">Aby uzyskać więcej informacji, zobacz [ClickOnce i ustawienia aplikacji](/visualstudio/deployment/clickonce-and-application-settings).</span><span class="sxs-lookup"><span data-stu-id="4ee27-167">For more information, see [ClickOnce and Application Settings](/visualstudio/deployment/clickonce-and-application-settings).</span></span>  
  
## <a name="custom-settings-providers"></a><span data-ttu-id="4ee27-168">Niestandardowe ustawienia dostawcy</span><span class="sxs-lookup"><span data-stu-id="4ee27-168">Custom Settings Providers</span></span>  
 <span data-ttu-id="4ee27-169">Architektura ustawień aplikacji ma luźne powiązanie między ustawień aplikacji pochodzi od klasy otoki <xref:System.Configuration.ApplicationSettingsBase>, i powiązane ustawienia dostawcy lub dostawców, pochodnych <xref:System.Configuration.SettingsProvider>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-169">In the Application Settings architecture, there is a loose coupling between the applications settings wrapper class, derived from <xref:System.Configuration.ApplicationSettingsBase>, and the associated settings provider or providers, derived from <xref:System.Configuration.SettingsProvider>.</span></span> <span data-ttu-id="4ee27-170">To skojarzenie jest zdefiniowana tylko przez <xref:System.Configuration.SettingsProviderAttribute> stosowane do klasy otoki lub jego poszczególnych właściwości.</span><span class="sxs-lookup"><span data-stu-id="4ee27-170">This association is defined only by the <xref:System.Configuration.SettingsProviderAttribute> applied to the wrapper class or its individual properties.</span></span> <span data-ttu-id="4ee27-171">Jeśli ustawienia dostawcy nie jest jawnie określić domyślnego dostawcę <xref:System.Configuration.LocalFileSettingsProvider>, jest używany.</span><span class="sxs-lookup"><span data-stu-id="4ee27-171">If a settings provider is not explicitly specified, the default provider, <xref:System.Configuration.LocalFileSettingsProvider>, is used.</span></span> <span data-ttu-id="4ee27-172">W związku z tym tej architektury obsługuje tworzenie i korzystanie z ustawień niestandardowych dostawców.</span><span class="sxs-lookup"><span data-stu-id="4ee27-172">As a result, this architecture supports creating and using custom settings providers.</span></span>  
  
 <span data-ttu-id="4ee27-173">Na przykład załóżmy, że chcesz opracowanie i wykorzystanie `SqlSettingsProvider`, dostawcy, w którym będą przechowywane wszystkie ustawienia danych w bazie danych programu Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="4ee27-173">For example, suppose that you want to develop and use `SqlSettingsProvider`, a provider that will store all settings data in a Microsoft SQL Server database.</span></span> <span data-ttu-id="4ee27-174">Twoje <xref:System.Configuration.SettingsProvider>— Klasa pochodna może pobrać te informacje w jego `Initialize` metody jako parametr typu <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-174">Your <xref:System.Configuration.SettingsProvider>-derived class would receive this information in its `Initialize` method as a parameter of type <xref:System.Collections.Specialized.NameValueCollection?displayProperty=nameWithType>.</span></span> <span data-ttu-id="4ee27-175">Czy można następnie wdrożyć <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> metodę, aby pobrać ustawienia z magazynu danych i <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> ich zapisanie.</span><span class="sxs-lookup"><span data-stu-id="4ee27-175">You would then implement the <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> method to retrieve your settings from the data store, and <xref:System.Configuration.SettingsProvider.SetPropertyValues%2A> to save them.</span></span> <span data-ttu-id="4ee27-176">Można użyć dostawcy <xref:System.Configuration.SettingsPropertyCollection> dostarczonych <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> Aby określić nazwę, typ i zakresu właściwości, oraz wszelkie inne atrybuty ustawienia zdefiniowane dla tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="4ee27-176">Your provider can use the <xref:System.Configuration.SettingsPropertyCollection> supplied to <xref:System.Configuration.SettingsProvider.GetPropertyValues%2A> to determine the property's name, type, and scope, as well as any other settings attributes defined for that property.</span></span>  
  
 <span data-ttu-id="4ee27-177">Twój dostawca należy zaimplementować jedną właściwość i jedną metodę, której implementacje może nie być widoczne.</span><span class="sxs-lookup"><span data-stu-id="4ee27-177">Your provider will need to implement one property and one method whose implementations may not be obvious.</span></span> <span data-ttu-id="4ee27-178"><xref:System.Configuration.SettingsProvider.ApplicationName%2A> Właściwość jest abstrakcyjny właściwość <xref:System.Configuration.SettingsProvider>; zostanie powinna zwracać następujące:</span><span class="sxs-lookup"><span data-stu-id="4ee27-178">The <xref:System.Configuration.SettingsProvider.ApplicationName%2A> property is an abstract property of <xref:System.Configuration.SettingsProvider>; you should program it to return the following:</span></span>  
  
 [!code-csharp[ApplicationSettings.Architecture#2](../../../../samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#2)]
 [!code-vb[ApplicationSettings.Architecture#2](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#2)]  
  
 <span data-ttu-id="4ee27-179">Klasy pochodne musi implementować też `Initialize` metodę, która nie przyjmuje żadnych argumentów i nie zwraca żadnej wartości.</span><span class="sxs-lookup"><span data-stu-id="4ee27-179">Your derived class must also implement an `Initialize` method that takes no arguments and returns no value.</span></span> <span data-ttu-id="4ee27-180">Ta metoda nie jest zdefiniowany przez <xref:System.Configuration.SettingsProvider>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-180">This method is not defined by <xref:System.Configuration.SettingsProvider>.</span></span>  
  
 <span data-ttu-id="4ee27-181">Ponadto wdrożenie <xref:System.Configuration.IApplicationSettingsProvider> na Twój dostawca zapewnia obsługę odświeżanie ustawień przywrócenie ustawień domyślnych i uaktualniania ustawienia wersji jedną aplikację do innego.</span><span class="sxs-lookup"><span data-stu-id="4ee27-181">Finally, you implement <xref:System.Configuration.IApplicationSettingsProvider> on your provider to provide support for refreshing settings, reverting settings to their defaults, and upgrading settings from one application version to another.</span></span>  
  
 <span data-ttu-id="4ee27-182">Po zaimplementowane i kompilowane dostawcy należy poinstruować klasy ustawień można użyć tego dostawcy, zamiast domyślnej.</span><span class="sxs-lookup"><span data-stu-id="4ee27-182">Once you have implemented and compiled your provider, you need to instruct your settings class to use this provider instead of the default.</span></span> <span data-ttu-id="4ee27-183">Można dodać za pomocą <xref:System.Configuration.SettingsProviderAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-183">You accomplish this through the <xref:System.Configuration.SettingsProviderAttribute>.</span></span> <span data-ttu-id="4ee27-184">Zastosowanie do całej klasy ustawienia dostawcy jest używany dla każdego ustawienia, który definiuje klasę; Jeśli stosowane do poszczególnych ustawień, używa tego dostawcy dla tych ustawień tylko Architektura ustawień aplikacji, a używa <xref:System.Configuration.LocalFileSettingsProvider> dla pozostałej.</span><span class="sxs-lookup"><span data-stu-id="4ee27-184">If applied to an entire settings class, the provider is used for each setting that the class defines; if applied to individual settings, Application Settings architecture uses that provider for those settings only, and uses <xref:System.Configuration.LocalFileSettingsProvider> for the rest.</span></span> <span data-ttu-id="4ee27-185">Poniższy przykład kodu pokazuje, jak nakazać klasy ustawienia do użycia niestandardowego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="4ee27-185">The following code example shows how to instruct the settings class to use your custom provider.</span></span>  
  
 [!code-csharp[ApplicationSettings.Architecture#1](../../../../samples/snippets/csharp/VS_Snippets_Winforms/ApplicationSettings.Architecture/CS/DummyClass.cs#1)]
 [!code-vb[ApplicationSettings.Architecture#1](../../../../samples/snippets/visualbasic/VS_Snippets_Winforms/ApplicationSettings.Architecture/VB/DummyProviderClass.vb#1)]  
  
 <span data-ttu-id="4ee27-186">Dostawca może być wywoływana z wiele wątków jednocześnie, ale zawsze będą zapisywane w tej samej lokalizacji magazynu; w związku z tym Architektura ustawień aplikacji będą tylko wystąpienia pojedynczego wystąpienia klasy dostawcy.</span><span class="sxs-lookup"><span data-stu-id="4ee27-186">A provider may be called from multiple threads simultaneously, but it will always write to the same storage location; therefore, the Application Settings architecture will only ever instantiate a single instance of your provider class.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="4ee27-187">Należy upewnić się czy Twój dostawca wątkowo a zezwala na tylko jeden wątek w momencie można zapisać plików konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-187">You should ensure that your provider is thread-safe, and only allows one thread at a time to write to the configuration files.</span></span>  
  
 <span data-ttu-id="4ee27-188">Twój dostawca musi obsługiwać wszystkie ustawienia atrybutów zdefiniowanych w <xref:System.Configuration?displayProperty=nameWithType> przestrzeni nazw, chociaż musi się ona na minimalnej obsługi <xref:System.Configuration.ApplicationScopedSettingAttribute> i <xref:System.Configuration.UserScopedSettingAttribute>i powinna obsługiwać <xref:System.Configuration.DefaultSettingValueAttribute>.</span><span class="sxs-lookup"><span data-stu-id="4ee27-188">Your provider does not need to support all of the settings attributes defined in the <xref:System.Configuration?displayProperty=nameWithType> namespace, though it must at a minimum support <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute>, and should also support <xref:System.Configuration.DefaultSettingValueAttribute>.</span></span> <span data-ttu-id="4ee27-189">Dla tych atrybutów, które nie obsługują dostawcy ulegnie awarii po prostu bez powiadomienia; należy zgłosiła wyjątek.</span><span class="sxs-lookup"><span data-stu-id="4ee27-189">For those attributes that it does not support, your provider should just fail without notification; it should not throw an exception.</span></span> <span data-ttu-id="4ee27-190">Jeśli klasa ustawienia używa nieprawidłowej kombinacji atrybutów, jednak — takie jak stosowanie <xref:System.Configuration.ApplicationScopedSettingAttribute> i <xref:System.Configuration.UserScopedSettingAttribute> takie samo ustawienie — dostawcy należy zgłosić wyjątek i zaprzestanie operacji.</span><span class="sxs-lookup"><span data-stu-id="4ee27-190">If the settings class uses an invalid combination of attributes, however — such as applying <xref:System.Configuration.ApplicationScopedSettingAttribute> and <xref:System.Configuration.UserScopedSettingAttribute> to the same setting — your provider should throw an exception and cease operation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4ee27-191">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="4ee27-191">See Also</span></span>  
 <xref:System.Configuration.ApplicationSettingsBase>  
 <xref:System.Configuration.SettingsProvider>  
 <xref:System.Configuration.LocalFileSettingsProvider>  
 [<span data-ttu-id="4ee27-192">Przegląd ustawień aplikacji</span><span class="sxs-lookup"><span data-stu-id="4ee27-192">Application Settings Overview</span></span>](../../../../docs/framework/winforms/advanced/application-settings-overview.md)  
 [<span data-ttu-id="4ee27-193">Ustawienia aplikacji dotyczące kontrolek niestandardowych</span><span class="sxs-lookup"><span data-stu-id="4ee27-193">Application Settings for Custom Controls</span></span>](../../../../docs/framework/winforms/advanced/application-settings-for-custom-controls.md)  
 [<span data-ttu-id="4ee27-194">ClickOnce i ustawienia aplikacji</span><span class="sxs-lookup"><span data-stu-id="4ee27-194">ClickOnce and Application Settings</span></span>](/visualstudio/deployment/clickonce-and-application-settings)  
 [<span data-ttu-id="4ee27-195">Schemat ustawień aplikacji</span><span class="sxs-lookup"><span data-stu-id="4ee27-195">Application Settings Schema</span></span>](../../../../docs/framework/configure-apps/file-schema/application-settings-schema.md)
