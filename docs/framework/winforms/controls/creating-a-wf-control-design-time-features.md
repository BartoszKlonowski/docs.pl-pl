---
title: 'Przewodnik: tworzenie kontrolki formularzy systemu Windows wykorzystującego funkcje czasu projektowania Visual Studio'
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- Windows Forms controls, creating
- design-time functionality [Windows Forms], Windows Forms
- DocumentDesigner class [Windows Forms]
- walkthroughs [Windows Forms], controls
ms.assetid: 6f487c59-cb38-4afa-ad2e-95edacb1d626
ms.openlocfilehash: 733f22c122dd6acdad41371419375e55e977c016
ms.sourcegitcommit: cf9515122fce716bcfb6618ba366e39b5a2eb81e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 08/15/2019
ms.locfileid: "69039929"
---
# <a name="walkthrough-creating-a-windows-forms-control-that-takes-advantage-of-visual-studio-design-time-features"></a><span data-ttu-id="262ca-102">Przewodnik: tworzenie kontrolki formularzy systemu Windows wykorzystującego funkcje czasu projektowania Visual Studio</span><span class="sxs-lookup"><span data-stu-id="262ca-102">Walkthrough: Creating a Windows Forms Control That Takes Advantage of Visual Studio Design-Time Features</span></span>

<span data-ttu-id="262ca-103">Środowisko czasu projektowania dla kontrolki niestandardowej można rozszerzyć przez tworzenie skojarzonego projektanta niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="262ca-103">The design-time experience for a custom control can be enhanced by authoring an associated custom designer.</span></span>

<span data-ttu-id="262ca-104">W tym instruktażu przedstawiono sposób tworzenia niestandardowego projektanta dla kontrolki niestandardowej.</span><span class="sxs-lookup"><span data-stu-id="262ca-104">This walkthrough illustrates how to create a custom designer for a custom control.</span></span> <span data-ttu-id="262ca-105">Zostanie wdrożony `MarqueeControl` typ i skojarzona Klasa projektanta, wywołana `MarqueeControlRootDesigner`.</span><span class="sxs-lookup"><span data-stu-id="262ca-105">You will implement a `MarqueeControl` type and an associated designer class, called `MarqueeControlRootDesigner`.</span></span>

<span data-ttu-id="262ca-106">`MarqueeControl` Typ implementuje ekran podobny do neonu, z animowanymi sygnalizatorami i migającym tekstem.</span><span class="sxs-lookup"><span data-stu-id="262ca-106">The `MarqueeControl` type implements a display similar to a theater marquee, with animated lights and flashing text.</span></span>

<span data-ttu-id="262ca-107">Projektant tej kontrolki współdziała z środowiskiem projektowym w celu zapewnienia niestandardowego środowiska czasu projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-107">The designer for this control interacts with the design environment to provide a custom design-time experience.</span></span> <span data-ttu-id="262ca-108">Za pomocą projektanta niestandardowego można złożyć implementację niestandardową `MarqueeControl` z animowanymi sygnalizatorami i migającym tekstem w wielu kombinacjach.</span><span class="sxs-lookup"><span data-stu-id="262ca-108">With the custom designer, you can assemble a custom `MarqueeControl` implementation with animated lights and flashing text in many combinations.</span></span> <span data-ttu-id="262ca-109">Możesz użyć asemblera kontrolki na formularzu podobnym do innego formantu Windows Forms.</span><span class="sxs-lookup"><span data-stu-id="262ca-109">You can use the assembled control on a form like any other Windows Forms control.</span></span>

<span data-ttu-id="262ca-110">Zadania przedstawione w tym instruktażu obejmują:</span><span class="sxs-lookup"><span data-stu-id="262ca-110">Tasks illustrated in this walkthrough include:</span></span>

- <span data-ttu-id="262ca-111">Tworzenie projektu</span><span class="sxs-lookup"><span data-stu-id="262ca-111">Creating the Project</span></span>

- <span data-ttu-id="262ca-112">Tworzenie projektu biblioteki kontrolek</span><span class="sxs-lookup"><span data-stu-id="262ca-112">Creating a Control Library Project</span></span>

- <span data-ttu-id="262ca-113">Odwoływanie się do projektu kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-113">Referencing the Custom Control Project</span></span>

- <span data-ttu-id="262ca-114">Definiowanie kontrolki niestandardowej i jej niestandardowego projektanta</span><span class="sxs-lookup"><span data-stu-id="262ca-114">Defining a Custom Control and Its Custom Designer</span></span>

- <span data-ttu-id="262ca-115">Tworzenie wystąpienia kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-115">Creating an Instance of Your Custom Control</span></span>

- <span data-ttu-id="262ca-116">Konfigurowanie projektu na potrzeby debugowania w czasie projektowania</span><span class="sxs-lookup"><span data-stu-id="262ca-116">Setting Up the Project for Design-Time Debugging</span></span>

- <span data-ttu-id="262ca-117">Implementowanie kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-117">Implementing Your Custom Control</span></span>

- <span data-ttu-id="262ca-118">Tworzenie kontrolki podrzędnej dla kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-118">Creating a Child Control for Your Custom Control</span></span>

- <span data-ttu-id="262ca-119">Utwórz formant podrzędny MarqueeBorder</span><span class="sxs-lookup"><span data-stu-id="262ca-119">Create the MarqueeBorder Child Control</span></span>

- <span data-ttu-id="262ca-120">Tworzenie projektanta niestandardowego dla właściwości cieni i filtru</span><span class="sxs-lookup"><span data-stu-id="262ca-120">Creating a Custom Designer to Shadow and Filter Properties</span></span>

- <span data-ttu-id="262ca-121">Obsługa zmian składników</span><span class="sxs-lookup"><span data-stu-id="262ca-121">Handling Component Changes</span></span>

- <span data-ttu-id="262ca-122">Dodawanie zleceń projektanta do projektanta niestandardowego</span><span class="sxs-lookup"><span data-stu-id="262ca-122">Adding Designer Verbs to your Custom Designer</span></span>

- <span data-ttu-id="262ca-123">Tworzenie niestandardowego UITypeEditor</span><span class="sxs-lookup"><span data-stu-id="262ca-123">Creating a Custom UITypeEditor</span></span>

- <span data-ttu-id="262ca-124">Testowanie kontrolki niestandardowej w projektancie</span><span class="sxs-lookup"><span data-stu-id="262ca-124">Testing your Custom Control in the Designer</span></span>

<span data-ttu-id="262ca-125">Po zakończeniu formant niestandardowy będzie wyglądać podobnie do poniższego:</span><span class="sxs-lookup"><span data-stu-id="262ca-125">When you are finished, your custom control will look something like the following:</span></span>

![Aplikacja wyświetlająca Neon z tekstem i przyciskami uruchamiania i zatrzymywania.](./media/creating-a-wf-control-design-time-features/demo-marquee-control.gif)

<span data-ttu-id="262ca-127">Aby zapoznać się z pełną listą [kodu, zobacz How to: Utwórz formant Windows Forms, który korzysta z funkcji](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/307hck25(v=vs.120))czasu projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-127">For the complete code listing, see [How to: Create a Windows Forms Control That Takes Advantage of Design-Time Features](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/307hck25(v=vs.120)).</span></span>


## <a name="prerequisites"></a><span data-ttu-id="262ca-128">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="262ca-128">Prerequisites</span></span>

<span data-ttu-id="262ca-129">Aby ukończyć ten przewodnik, musisz mieć program Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="262ca-129">In order to complete this walkthrough, you'll need Visual Studio.</span></span>

## <a name="creating-the-project"></a><span data-ttu-id="262ca-130">Tworzenie projektu</span><span class="sxs-lookup"><span data-stu-id="262ca-130">Creating the Project</span></span>

<span data-ttu-id="262ca-131">Pierwszym krokiem jest utworzenie projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="262ca-131">The first step is to create the application project.</span></span> <span data-ttu-id="262ca-132">Ten projekt będzie używany do kompilowania aplikacji, która hostuje kontrolkę niestandardową.</span><span class="sxs-lookup"><span data-stu-id="262ca-132">You will use this project to build the application that hosts the custom control.</span></span>

<span data-ttu-id="262ca-133">Otwórz program Visual Studio i Utwórz projekt Windows Forms aplikacji o nazwie "MarqueeControlTest" (**plik** > **Nowy** > **projekt** > **Visual C#**  lub **Visual Basic**  >  **Klasyczny pulpit** **Windows Forms aplikacji).**  > </span><span class="sxs-lookup"><span data-stu-id="262ca-133">Open Visual Studio and create a Windows Forms Application project called "MarqueeControlTest" (**File** > **New** > **Project** > **Visual C#** or **Visual Basic** > **Classic Desktop** > **Windows Forms Application**).</span></span>

## <a name="creating-a-control-library-project"></a><span data-ttu-id="262ca-134">Tworzenie projektu biblioteki kontrolek</span><span class="sxs-lookup"><span data-stu-id="262ca-134">Creating a Control Library Project</span></span>

<span data-ttu-id="262ca-135">Następnym krokiem jest utworzenie projektu biblioteki kontrolek.</span><span class="sxs-lookup"><span data-stu-id="262ca-135">The next step is to create the control library project.</span></span> <span data-ttu-id="262ca-136">Utworzysz nową kontrolkę niestandardową i odpowiadający jej projektant niestandardowy.</span><span class="sxs-lookup"><span data-stu-id="262ca-136">You will create a new custom control and its corresponding custom designer.</span></span>

### <a name="to-create-the-control-library-project"></a><span data-ttu-id="262ca-137">Aby utworzyć projekt biblioteki formantów</span><span class="sxs-lookup"><span data-stu-id="262ca-137">To create the control library project</span></span>

1. <span data-ttu-id="262ca-138">Dodaj projekt biblioteki formantów Windows Forms do rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="262ca-138">Add a Windows Forms Control Library project to the solution.</span></span> <span data-ttu-id="262ca-139">Nadaj projektowi nazwę "MarqueeControlLibrary".</span><span class="sxs-lookup"><span data-stu-id="262ca-139">Name the project "MarqueeControlLibrary."</span></span>

2. <span data-ttu-id="262ca-140">Korzystając z **Eksplorator rozwiązań**, usuń domyślną kontrolkę projektu, usuwając plik źródłowy o nazwie "UserControl1.cs" lub "UserControl1. vb", w zależności od wybranego języka.</span><span class="sxs-lookup"><span data-stu-id="262ca-140">Using **Solution Explorer**, delete the project's default control by deleting the source file named "UserControl1.cs" or "UserControl1.vb", depending on your language of choice.</span></span> <span data-ttu-id="262ca-141">Aby uzyskać więcej informacji, zobacz [jak: Usuwanie, usuwanie i wykluczanie](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/0ebzhwsk(v=vs.100))elementów.</span><span class="sxs-lookup"><span data-stu-id="262ca-141">For more information, see [How to: Remove, Delete, and Exclude Items](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/0ebzhwsk(v=vs.100)).</span></span>

3. <span data-ttu-id="262ca-142">Dodaj nowy <xref:System.Windows.Forms.UserControl> element `MarqueeControlLibrary` do projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-142">Add a new <xref:System.Windows.Forms.UserControl> item to the `MarqueeControlLibrary` project.</span></span> <span data-ttu-id="262ca-143">Nadaj nowemu plikowi źródłowej nazwę podstawową "MarqueeControl".</span><span class="sxs-lookup"><span data-stu-id="262ca-143">Give the new source file a base name of "MarqueeControl."</span></span>

4. <span data-ttu-id="262ca-144">Za pomocą **Eksplorator rozwiązań**, Utwórz nowy folder w `MarqueeControlLibrary` projekcie.</span><span class="sxs-lookup"><span data-stu-id="262ca-144">Using **Solution Explorer**, create a new folder in the `MarqueeControlLibrary` project.</span></span> <span data-ttu-id="262ca-145">Aby uzyskać więcej informacji, zobacz [jak: Dodaj nowe elementy](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/w0572c5b(v=vs.100))projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-145">For more information, see [How to: Add New Project Items](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2010/w0572c5b(v=vs.100)).</span></span> <span data-ttu-id="262ca-146">Nazwij nowy folder "Design" (projektowanie).</span><span class="sxs-lookup"><span data-stu-id="262ca-146">Name the new folder "Design."</span></span>

5. <span data-ttu-id="262ca-147">Kliknij prawym przyciskiem myszy folder **projekt** i Dodaj nową klasę.</span><span class="sxs-lookup"><span data-stu-id="262ca-147">Right-click the **Design** folder and add a new class.</span></span> <span data-ttu-id="262ca-148">Nadaj plikowi źródłowej nazwę podstawową "MarqueeControlRootDesigner".</span><span class="sxs-lookup"><span data-stu-id="262ca-148">Give the source file a base name of "MarqueeControlRootDesigner."</span></span>

6. <span data-ttu-id="262ca-149">Musisz użyć typów z zestawu System. Design, więc Dodaj to odwołanie do `MarqueeControlLibrary` projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-149">You will need to use types from the System.Design assembly, so add this reference to the `MarqueeControlLibrary` project.</span></span>

    > [!NOTE]
    > <span data-ttu-id="262ca-150">Aby można było użyć zestawu System. Design, projekt musi być przeznaczony dla pełnej wersji .NET Framework, a nie do .NET Framework profilu klienta.</span><span class="sxs-lookup"><span data-stu-id="262ca-150">To use the System.Design assembly, your project must target the full version of the .NET Framework, not the .NET Framework Client Profile.</span></span> <span data-ttu-id="262ca-151">Aby zmienić platformę docelową [, zobacz How to: Docelowa wersja .NET Framework](/visualstudio/ide/how-to-target-a-version-of-the-dotnet-framework).</span><span class="sxs-lookup"><span data-stu-id="262ca-151">To change the target framework, see [How to: Target a Version of the .NET Framework](/visualstudio/ide/how-to-target-a-version-of-the-dotnet-framework).</span></span>

## <a name="referencing-the-custom-control-project"></a><span data-ttu-id="262ca-152">Odwoływanie się do projektu kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-152">Referencing the Custom Control Project</span></span>

<span data-ttu-id="262ca-153">Ten `MarqueeControlTest` projekt zostanie użyty do przetestowania kontrolki niestandardowej.</span><span class="sxs-lookup"><span data-stu-id="262ca-153">You will use the `MarqueeControlTest` project to test the custom control.</span></span> <span data-ttu-id="262ca-154">Projekt testowy zostanie powiadomiony o kontrolce niestandardowej po dodaniu odwołania do projektu do `MarqueeControlLibrary` zestawu.</span><span class="sxs-lookup"><span data-stu-id="262ca-154">The test project will become aware of the custom control when you add a project reference to the `MarqueeControlLibrary` assembly.</span></span>

### <a name="to-reference-the-custom-control-project"></a><span data-ttu-id="262ca-155">Aby odwołać się do projektu kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-155">To reference the custom control project</span></span>

- <span data-ttu-id="262ca-156">W projekcie Dodaj odwołanie do projektu do `MarqueeControlLibrary` zestawu. `MarqueeControlTest`</span><span class="sxs-lookup"><span data-stu-id="262ca-156">In the `MarqueeControlTest` project, add a project reference to the `MarqueeControlLibrary` assembly.</span></span> <span data-ttu-id="262ca-157">Upewnij się, że korzystasz z karty **projekty** w oknie dialogowym **Dodaj odwołanie** zamiast bezpośrednio odwoływać się do `MarqueeControlLibrary` zestawu.</span><span class="sxs-lookup"><span data-stu-id="262ca-157">Be sure to use the **Projects** tab in the **Add Reference** dialog box instead of referencing the `MarqueeControlLibrary` assembly directly.</span></span>

## <a name="defining-a-custom-control-and-its-custom-designer"></a><span data-ttu-id="262ca-158">Definiowanie kontrolki niestandardowej i jej niestandardowego projektanta</span><span class="sxs-lookup"><span data-stu-id="262ca-158">Defining a Custom Control and Its Custom Designer</span></span>
 <span data-ttu-id="262ca-159">Kontrolka niestandardowa będzie pochodną <xref:System.Windows.Forms.UserControl> klasy.</span><span class="sxs-lookup"><span data-stu-id="262ca-159">Your custom control will derive from the <xref:System.Windows.Forms.UserControl> class.</span></span> <span data-ttu-id="262ca-160">Dzięki temu formant może zawierać inne kontrolki i zapewnia kontrolę w dużej objęcie funkcją domyślną.</span><span class="sxs-lookup"><span data-stu-id="262ca-160">This allows your control to contain other controls, and it gives your control a great deal of default functionality.</span></span>

 <span data-ttu-id="262ca-161">Kontrolka niestandardowa będzie dysponować skojarzonym projektantem niestandardowym.</span><span class="sxs-lookup"><span data-stu-id="262ca-161">Your custom control will have an associated custom designer.</span></span> <span data-ttu-id="262ca-162">Pozwala to na utworzenie unikatowego środowiska projektowego dopasowanego specjalnie do kontrolki niestandardowej.</span><span class="sxs-lookup"><span data-stu-id="262ca-162">This allows you to create a unique design experience tailored specifically for your custom control.</span></span>

 <span data-ttu-id="262ca-163">Formant można skojarzyć z jego projektantem za pomocą <xref:System.ComponentModel.DesignerAttribute> klasy.</span><span class="sxs-lookup"><span data-stu-id="262ca-163">You associate the control with its designer by using the <xref:System.ComponentModel.DesignerAttribute> class.</span></span> <span data-ttu-id="262ca-164">Ponieważ opracowujesz całe zachowanie w czasie projektowania niestandardowej kontrolki, Projektant niestandardowy Zaimplementuj <xref:System.ComponentModel.Design.IRootDesigner> interfejs.</span><span class="sxs-lookup"><span data-stu-id="262ca-164">Because you are developing the entire design-time behavior of your custom control, the custom designer will implement the <xref:System.ComponentModel.Design.IRootDesigner> interface.</span></span>

### <a name="to-define-a-custom-control-and-its-custom-designer"></a><span data-ttu-id="262ca-165">Aby zdefiniować kontrolkę niestandardową i jej projektanta niestandardowego</span><span class="sxs-lookup"><span data-stu-id="262ca-165">To define a custom control and its custom designer</span></span>

1. <span data-ttu-id="262ca-166">Otwórz plik źródłowy w **edytorze kodu.** `MarqueeControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-166">Open the `MarqueeControl` source file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-167">W górnej części pliku Zaimportuj następujące przestrzenie nazw:</span><span class="sxs-lookup"><span data-stu-id="262ca-167">At the top of the file, import the following namespaces:</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#220](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrol.cs#220)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#220](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrol.vb#220)]

2. <span data-ttu-id="262ca-168"><xref:System.ComponentModel.DesignerAttribute> Dodaj`MarqueeControl` do deklaracji klasy.</span><span class="sxs-lookup"><span data-stu-id="262ca-168">Add the <xref:System.ComponentModel.DesignerAttribute> to the `MarqueeControl` class declaration.</span></span> <span data-ttu-id="262ca-169">Powoduje to skojarzenie kontrolki niestandardowej z jej projektantem.</span><span class="sxs-lookup"><span data-stu-id="262ca-169">This associates the custom control with its designer.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#240](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrol.cs#240)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#240](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrol.vb#240)]

3. <span data-ttu-id="262ca-170">Otwórz plik źródłowy w **edytorze kodu.** `MarqueeControlRootDesigner`</span><span class="sxs-lookup"><span data-stu-id="262ca-170">Open the `MarqueeControlRootDesigner` source file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-171">W górnej części pliku Zaimportuj następujące przestrzenie nazw:</span><span class="sxs-lookup"><span data-stu-id="262ca-171">At the top of the file, import the following namespaces:</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#520](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrolrootdesigner.cs#520)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#520](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrolrootdesigner.vb#520)]

4. <span data-ttu-id="262ca-172">Zmień deklarację elementu `MarqueeControlRootDesigner` , aby dziedziczyć <xref:System.Windows.Forms.Design.DocumentDesigner> z klasy.</span><span class="sxs-lookup"><span data-stu-id="262ca-172">Change the declaration of `MarqueeControlRootDesigner` to inherit from the <xref:System.Windows.Forms.Design.DocumentDesigner> class.</span></span> <span data-ttu-id="262ca-173">Zastosuj, <xref:System.ComponentModel.ToolboxItemFilterAttribute> aby określić interakcję projektanta z **przybornikiem**.</span><span class="sxs-lookup"><span data-stu-id="262ca-173">Apply the <xref:System.ComponentModel.ToolboxItemFilterAttribute> to specify the designer interaction with the **Toolbox**.</span></span>

     <span data-ttu-id="262ca-174">**Uwaga** Definicja `MarqueeControlRootDesigner` klasy została ujęta w przestrzeń nazw o nazwie "MarqueeControlLibrary. Design".</span><span class="sxs-lookup"><span data-stu-id="262ca-174">**Note** The definition for the `MarqueeControlRootDesigner` class has been enclosed in a namespace called "MarqueeControlLibrary.Design."</span></span> <span data-ttu-id="262ca-175">Ta deklaracja umieszcza projektanta w specjalnej przestrzeni nazw zarezerwowanej dla typów związanych z projektem.</span><span class="sxs-lookup"><span data-stu-id="262ca-175">This declaration places the designer in a special namespace reserved for design-related types.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#530](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrolrootdesigner.cs#530)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#530](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrolrootdesigner.vb#530)]

5. <span data-ttu-id="262ca-176">Zdefiniuj konstruktora dla `MarqueeControlRootDesigner` klasy.</span><span class="sxs-lookup"><span data-stu-id="262ca-176">Define the constructor for the `MarqueeControlRootDesigner` class.</span></span> <span data-ttu-id="262ca-177"><xref:System.Diagnostics.Trace.WriteLine%2A> Wstaw instrukcję w treści konstruktora.</span><span class="sxs-lookup"><span data-stu-id="262ca-177">Insert a <xref:System.Diagnostics.Trace.WriteLine%2A> statement in the constructor body.</span></span> <span data-ttu-id="262ca-178">Będzie to przydatne w celach debugowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-178">This will be useful for debugging purposes.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#540](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrolrootdesigner.cs#540)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#540](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrolrootdesigner.vb#540)]

## <a name="creating-an-instance-of-your-custom-control"></a><span data-ttu-id="262ca-179">Tworzenie wystąpienia kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-179">Creating an Instance of Your Custom Control</span></span>
 <span data-ttu-id="262ca-180">Aby obserwować niestandardowe zachowanie w czasie projektowania formantu, należy umieścić wystąpienie kontrolki w formularzu w `MarqueeControlTest` programie Project.</span><span class="sxs-lookup"><span data-stu-id="262ca-180">To observe the custom design-time behavior of your control, you will place an instance of your control on the form in `MarqueeControlTest` project.</span></span>

### <a name="to-create-an-instance-of-your-custom-control"></a><span data-ttu-id="262ca-181">Aby utworzyć wystąpienie kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-181">To create an instance of your custom control</span></span>

1. <span data-ttu-id="262ca-182">Dodaj nowy <xref:System.Windows.Forms.UserControl> element `MarqueeControlTest` do projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-182">Add a new <xref:System.Windows.Forms.UserControl> item to the `MarqueeControlTest` project.</span></span> <span data-ttu-id="262ca-183">Nadaj nowemu plikowi źródłowej nazwę podstawową "DemoMarqueeControl".</span><span class="sxs-lookup"><span data-stu-id="262ca-183">Give the new source file a base name of "DemoMarqueeControl."</span></span>

2. <span data-ttu-id="262ca-184">Otwórz plik w **edytorze kodu.** `DemoMarqueeControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-184">Open the `DemoMarqueeControl` file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-185">W górnej części pliku zaimportuj `MarqueeControlLibrary` przestrzeń nazw:</span><span class="sxs-lookup"><span data-stu-id="262ca-185">At the top of the file, import the `MarqueeControlLibrary` namespace:</span></span>

```vb
Imports MarqueeControlLibrary
```

```csharp
using MarqueeControlLibrary;
```

1. <span data-ttu-id="262ca-186">Zmień deklarację elementu `DemoMarqueeControl` , aby dziedziczyć `MarqueeControl` z klasy.</span><span class="sxs-lookup"><span data-stu-id="262ca-186">Change the declaration of `DemoMarqueeControl` to inherit from the `MarqueeControl` class.</span></span>

2. <span data-ttu-id="262ca-187">Skompiluj projekt.</span><span class="sxs-lookup"><span data-stu-id="262ca-187">Build the project.</span></span>

3. <span data-ttu-id="262ca-188">Otwórz `Form1` w Projektant formularzy systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="262ca-188">Open `Form1` in the Windows Forms Designer.</span></span>

4. <span data-ttu-id="262ca-189">Znajdź kartę **składniki MarqueeControlTest** w przyborniku i otwórz ją.</span><span class="sxs-lookup"><span data-stu-id="262ca-189">Find the **MarqueeControlTest Components** tab in the **Toolbox** and open it.</span></span> <span data-ttu-id="262ca-190">Przeciągnij z `DemoMarqueeControl` przybornika do formularza.</span><span class="sxs-lookup"><span data-stu-id="262ca-190">Drag a `DemoMarqueeControl` from the **Toolbox** onto your form.</span></span>

5. <span data-ttu-id="262ca-191">Skompiluj projekt.</span><span class="sxs-lookup"><span data-stu-id="262ca-191">Build the project.</span></span>

## <a name="setting-up-the-project-for-design-time-debugging"></a><span data-ttu-id="262ca-192">Konfigurowanie projektu na potrzeby debugowania w czasie projektowania</span><span class="sxs-lookup"><span data-stu-id="262ca-192">Setting Up the Project for Design-Time Debugging</span></span>

<span data-ttu-id="262ca-193">Podczas opracowywania niestandardowego środowiska czasu projektowania konieczne będzie Debugowanie formantów i składników.</span><span class="sxs-lookup"><span data-stu-id="262ca-193">When you are developing a custom design-time experience, it will be necessary to debug your controls and components.</span></span> <span data-ttu-id="262ca-194">Istnieje prosty sposób skonfigurowania projektu w taki sposób, aby zezwalał na Debugowanie w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-194">There is a simple way to set up your project to allow debugging at design time.</span></span> <span data-ttu-id="262ca-195">Aby uzyskać więcej informacji, [zobacz Przewodnik: Debugowanie niestandardowych kontrolek Windows Forms w czasie](walkthrough-debugging-custom-windows-forms-controls-at-design-time.md)projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-195">For more information, see [Walkthrough: Debugging Custom Windows Forms Controls at Design Time](walkthrough-debugging-custom-windows-forms-controls-at-design-time.md).</span></span>

### <a name="to-set-up-the-project-for-design-time-debugging"></a><span data-ttu-id="262ca-196">Aby skonfigurować projekt do debugowania w czasie projektowania</span><span class="sxs-lookup"><span data-stu-id="262ca-196">To set up the project for design-time debugging</span></span>

1. <span data-ttu-id="262ca-197">Kliknij prawym przyciskiem `MarqueeControlLibrary` myszy projekt i wybierz polecenie **Właściwości**.</span><span class="sxs-lookup"><span data-stu-id="262ca-197">Right-click the `MarqueeControlLibrary` project and select **Properties**.</span></span>

2. <span data-ttu-id="262ca-198">W oknie dialogowym "strony właściwości MarqueeControlLibrary" Wybierz stronę **Debuguj** .</span><span class="sxs-lookup"><span data-stu-id="262ca-198">In the "MarqueeControlLibrary Property Pages" dialog box, select the **Debug** page.</span></span>

3. <span data-ttu-id="262ca-199">W sekcji **Akcja początkowa** wybierz pozycję **Uruchom program zewnętrzny**.</span><span class="sxs-lookup"><span data-stu-id="262ca-199">In the **Start Action** section, select **Start External Program**.</span></span> <span data-ttu-id="262ca-200">Debugujesz osobne wystąpienie programu Visual Studio, więc kliknij![przycisk wielokropka (...) w okno właściwości programu Visual Studio.](./media/visual-studio-ellipsis-button.png)), aby wyszukać środowisko IDE programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="262ca-200">You will be debugging a separate instance of Visual Studio, so click the ellipsis (![The Ellipsis button (...) in the Properties window of Visual Studio.](./media/visual-studio-ellipsis-button.png)) button to browse for the Visual Studio IDE.</span></span> <span data-ttu-id="262ca-201">Nazwa pliku wykonywalnego to devenv. exe, a jeśli została zainstalowana w lokalizacji domyślnej, jego ścieżka to%programfiles%\Microsoft Visual Studio 9.0 \ Common7\IDE\devenv.exe.</span><span class="sxs-lookup"><span data-stu-id="262ca-201">The name of the executable file is devenv.exe, and if you installed to the default location, its path is %programfiles%\Microsoft Visual Studio 9.0\Common7\IDE\devenv.exe.</span></span>

4. <span data-ttu-id="262ca-202">Kliknij przycisk OK, aby zamknąć okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="262ca-202">Click OK to close the dialog box.</span></span>

5. <span data-ttu-id="262ca-203">Kliknij prawym przyciskiem `MarqueeControlLibrary` myszy projekt i wybierz polecenie "Ustaw jako projekt startowy", aby włączyć tę konfigurację debugowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-203">Right-click the `MarqueeControlLibrary` project and select "Set as StartUp Project" to enable this debugging configuration.</span></span>

## <a name="checkpoint"></a><span data-ttu-id="262ca-204">Punkt kontrolny</span><span class="sxs-lookup"><span data-stu-id="262ca-204">Checkpoint</span></span>

<span data-ttu-id="262ca-205">Teraz można przystąpić do debugowania zachowania niestandardowej kontrolki czasu projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-205">You are now ready to debug the design-time behavior of your custom control.</span></span> <span data-ttu-id="262ca-206">Po ustaleniu, że środowisko debugowania jest prawidłowo skonfigurowane, należy przetestować skojarzenie między kontrolką niestandardową a projektantem niestandardowym.</span><span class="sxs-lookup"><span data-stu-id="262ca-206">Once you have determined that the debugging environment is set up correctly, you will test the association between the custom control and the custom designer.</span></span>

### <a name="to-test-the-debugging-environment-and-the-designer-association"></a><span data-ttu-id="262ca-207">Aby przetestować środowisko debugowania i skojarzenie projektanta</span><span class="sxs-lookup"><span data-stu-id="262ca-207">To test the debugging environment and the designer association</span></span>

1. <span data-ttu-id="262ca-208">Otwórz plik <xref:System.Diagnostics.Trace.WriteLine%2A> źródłowy w edytorze kodu i umieść punkt przerwania w instrukcji. `MarqueeControlRootDesigner`</span><span class="sxs-lookup"><span data-stu-id="262ca-208">Open the `MarqueeControlRootDesigner` source file in the **Code Editor** and place a breakpoint on the <xref:System.Diagnostics.Trace.WriteLine%2A> statement.</span></span>

2. <span data-ttu-id="262ca-209">Naciśnij klawisz F5, aby rozpocząć sesję debugowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-209">Press F5 to start the debugging session.</span></span> <span data-ttu-id="262ca-210">Zwróć uwagę, że tworzone jest nowe wystąpienie programu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="262ca-210">Note that a new instance of Visual Studio is created.</span></span>

3. <span data-ttu-id="262ca-211">W nowym wystąpieniu programu Visual Studio Otwórz rozwiązanie "MarqueeControlTest".</span><span class="sxs-lookup"><span data-stu-id="262ca-211">In the new instance of Visual Studio, open the "MarqueeControlTest" solution.</span></span> <span data-ttu-id="262ca-212">Możesz łatwo znaleźć rozwiązanie, wybierając pozycję **ostatnie projekty** z menu **plik** .</span><span class="sxs-lookup"><span data-stu-id="262ca-212">You can easily find the solution by selecting **Recent Projects** from the **File** menu.</span></span> <span data-ttu-id="262ca-213">Plik rozwiązania "MarqueeControlTest. sln" będzie wyświetlany jako ostatnio używany plik.</span><span class="sxs-lookup"><span data-stu-id="262ca-213">The "MarqueeControlTest.sln" solution file will be listed as the most recently used file.</span></span>

4. <span data-ttu-id="262ca-214">`DemoMarqueeControl` Otwórz w projektancie.</span><span class="sxs-lookup"><span data-stu-id="262ca-214">Open the `DemoMarqueeControl` in the designer.</span></span> <span data-ttu-id="262ca-215">Należy zauważyć, że wystąpienie debugowania programu Visual Studio uzyskuje fokus i wykonywanie w punkcie przerwania.</span><span class="sxs-lookup"><span data-stu-id="262ca-215">Note that the debugging instance of Visual Studio acquires focus and execution stops at your breakpoint.</span></span> <span data-ttu-id="262ca-216">Naciśnij klawisz F5, aby kontynuować sesję debugowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-216">Press F5 to continue the debugging session.</span></span>

<span data-ttu-id="262ca-217">W tym momencie wszystko jest używane do tworzenia i debugowania formantu niestandardowego oraz skojarzonego z nim projektanta niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="262ca-217">At this point, everything is in place for you to develop and debug your custom control and its associated custom designer.</span></span> <span data-ttu-id="262ca-218">Pozostała część tego instruktażu koncentruje się na szczegółach implementacji funkcji formantu i projektanta.</span><span class="sxs-lookup"><span data-stu-id="262ca-218">The remainder of this walkthrough will concentrate on the details of implementing features of the control and the designer.</span></span>

## <a name="implementing-your-custom-control"></a><span data-ttu-id="262ca-219">Implementowanie kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-219">Implementing Your Custom Control</span></span>

<span data-ttu-id="262ca-220">`MarqueeControl` Jestto<xref:System.Windows.Forms.UserControl> bardzo mały bit dostosowywania.</span><span class="sxs-lookup"><span data-stu-id="262ca-220">The `MarqueeControl` is a <xref:System.Windows.Forms.UserControl> with a little bit of customization.</span></span> <span data-ttu-id="262ca-221">Przedstawia dwie metody: `Start`, która uruchamia animację neonu i `Stop`, która powoduje zatrzymanie animacji.</span><span class="sxs-lookup"><span data-stu-id="262ca-221">It exposes two methods: `Start`, which starts the marquee animation, and `Stop`, which stops the animation.</span></span> <span data-ttu-id="262ca-222">`StartMarquee` `IMarqueeWidget` `StopMarquee` `Stop` `Start` Ponieważ zawiera kontrolki podrzędne, które implementują interfejs, i wylicza każdą kontrolkę podrzędną i wywołuje odpowiednio metody i, w każdej kontrolce podrzędnej `MarqueeControl` który implementuje `IMarqueeWidget`.</span><span class="sxs-lookup"><span data-stu-id="262ca-222">Because the `MarqueeControl` contains child controls that implement the `IMarqueeWidget` interface, `Start` and `Stop` enumerate each child control and call the `StartMarquee` and `StopMarquee` methods, respectively, on each child control that implements `IMarqueeWidget`.</span></span>

<span data-ttu-id="262ca-223">`MarqueeBorder` Wygląd formantów i `MarqueeText` jest zależny od `MarqueeControl` <xref:System.Windows.Forms.Control.PerformLayout%2A> układu, dlatego zastępuje metodęiwywołaniaformantówpodrzędnychtegotypu.<xref:System.Windows.Forms.Control.OnLayout%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-223">The appearance of the `MarqueeBorder` and `MarqueeText` controls is dependent on the layout, so `MarqueeControl` overrides the <xref:System.Windows.Forms.Control.OnLayout%2A> method and calls <xref:System.Windows.Forms.Control.PerformLayout%2A> on child controls of this type.</span></span>

<span data-ttu-id="262ca-224">Jest to zakres `MarqueeControl` dostosowań.</span><span class="sxs-lookup"><span data-stu-id="262ca-224">This is the extent of the `MarqueeControl` customizations.</span></span> <span data-ttu-id="262ca-225">Funkcje czasu wykonywania `MarqueeBorder` są implementowane przez i `MarqueeText` kontrolki, a `MarqueeBorderDesigner` funkcje czasu projektowania są implementowane przez klasy i `MarqueeControlRootDesigner` .</span><span class="sxs-lookup"><span data-stu-id="262ca-225">The run-time features are implemented by the `MarqueeBorder` and `MarqueeText` controls, and the design-time features are implemented by the `MarqueeBorderDesigner` and `MarqueeControlRootDesigner` classes.</span></span>

### <a name="to-implement-your-custom-control"></a><span data-ttu-id="262ca-226">Aby zaimplementować kontrolkę niestandardową</span><span class="sxs-lookup"><span data-stu-id="262ca-226">To implement your custom control</span></span>

1. <span data-ttu-id="262ca-227">Otwórz plik źródłowy w **edytorze kodu.** `MarqueeControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-227">Open the `MarqueeControl` source file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-228">Zaimplementuj metody `Stop`i. `Start`</span><span class="sxs-lookup"><span data-stu-id="262ca-228">Implement the `Start` and `Stop` methods.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#260](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrol.cs#260)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#260](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrol.vb#260)]

2. <span data-ttu-id="262ca-229">Zastąp <xref:System.Windows.Forms.Control.OnLayout%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="262ca-229">Override the <xref:System.Windows.Forms.Control.OnLayout%2A> method.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#270](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrol.cs#270)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#270](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrol.vb#270)]

## <a name="creating-a-child-control-for-your-custom-control"></a><span data-ttu-id="262ca-230">Tworzenie kontrolki podrzędnej dla kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-230">Creating a Child Control for Your Custom Control</span></span>

<span data-ttu-id="262ca-231">Program będzie hostować dwa rodzaje kontrolki podrzędnej `MarqueeBorder` : formant i `MarqueeText` formant. `MarqueeControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-231">The `MarqueeControl` will host two kinds of child control: the `MarqueeBorder` control and the `MarqueeText` control.</span></span>

- <span data-ttu-id="262ca-232">`MarqueeBorder`: Ta kontrolka maluje obramowanie "świateł" wokół jego krawędzi.</span><span class="sxs-lookup"><span data-stu-id="262ca-232">`MarqueeBorder`: This control paints a border of "lights" around its edges.</span></span> <span data-ttu-id="262ca-233">Lampki są błyskowe, aby były widoczne wokół krawędzi.</span><span class="sxs-lookup"><span data-stu-id="262ca-233">The lights flash in sequence, so they appear to be moving around the border.</span></span> <span data-ttu-id="262ca-234">Szybkość, z jaką lampy błyskowe są kontrolowane przez właściwość o `UpdatePeriod`nazwie.</span><span class="sxs-lookup"><span data-stu-id="262ca-234">The speed at which the lights flash is controlled by a property called `UpdatePeriod`.</span></span> <span data-ttu-id="262ca-235">Kilka innych właściwości niestandardowych określa inne aspekty wyglądu kontrolki.</span><span class="sxs-lookup"><span data-stu-id="262ca-235">Several other custom properties determine other aspects of the control's appearance.</span></span> <span data-ttu-id="262ca-236">Dwie metody, nazywane `StartMarquee` i `StopMarquee`, kontrolują, kiedy animacja zaczyna się i kończy.</span><span class="sxs-lookup"><span data-stu-id="262ca-236">Two methods, called `StartMarquee` and `StopMarquee`, control when the animation starts and stops.</span></span>

- <span data-ttu-id="262ca-237">`MarqueeText`: Ta kontrolka maluje migający ciąg.</span><span class="sxs-lookup"><span data-stu-id="262ca-237">`MarqueeText`: This control paints a flashing string.</span></span> <span data-ttu-id="262ca-238">Podobnie jak `MarqueeBorder` w przypadku kontrolki, szybkość, z jaką błysk tekstu jest kontrolowana `UpdatePeriod` przez właściwość.</span><span class="sxs-lookup"><span data-stu-id="262ca-238">Like the `MarqueeBorder` control, the speed at which the text flashes is controlled by the `UpdatePeriod` property.</span></span> <span data-ttu-id="262ca-239">Formant zawiera również `MarqueeBorder` metody `StopMarquee` i, które są wspólne z kontrolką. `StartMarquee` `MarqueeText`</span><span class="sxs-lookup"><span data-stu-id="262ca-239">The `MarqueeText` control also has the `StartMarquee` and `StopMarquee` methods in common with the `MarqueeBorder` control.</span></span>

<span data-ttu-id="262ca-240">W czasie projektowania, `MarqueeControlRootDesigner` umożliwia dodanie tych dwóch typów kontrolek `MarqueeControl` do dowolnej kombinacji.</span><span class="sxs-lookup"><span data-stu-id="262ca-240">At design time, the `MarqueeControlRootDesigner` allows these two control types to be added to a `MarqueeControl` in any combination.</span></span>

<span data-ttu-id="262ca-241">Typowe funkcje obu formantów są uwzględniane w interfejsie o nazwie `IMarqueeWidget`.</span><span class="sxs-lookup"><span data-stu-id="262ca-241">Common features of the two controls are factored into an interface called `IMarqueeWidget`.</span></span> <span data-ttu-id="262ca-242">Umożliwia `MarqueeControl` to odnajdywanie wszelkich kontrolek podrzędnych związanych z neonem i nadawanie im specjalnej obróbki.</span><span class="sxs-lookup"><span data-stu-id="262ca-242">This allows the `MarqueeControl` to discover any Marquee-related child controls and give them special treatment.</span></span>

<span data-ttu-id="262ca-243">Aby zaimplementować funkcję okresowej animacji, użyjesz <xref:System.ComponentModel.BackgroundWorker> obiektów <xref:System.ComponentModel?displayProperty=nameWithType> z przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="262ca-243">To implement the periodic animation feature, you will use <xref:System.ComponentModel.BackgroundWorker> objects from the <xref:System.ComponentModel?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="262ca-244">Można używać <xref:System.Windows.Forms.Timer> obiektów, ale gdy istnieje wiele `IMarqueeWidget` obiektów, wątek pojedynczego interfejsu użytkownika może nie być w stanie zachować animacji.</span><span class="sxs-lookup"><span data-stu-id="262ca-244">You could use <xref:System.Windows.Forms.Timer> objects, but when many `IMarqueeWidget` objects are present, the single UI thread may be unable to keep up with the animation.</span></span>

### <a name="to-create-a-child-control-for-your-custom-control"></a><span data-ttu-id="262ca-245">Aby utworzyć kontrolkę podrzędną dla kontrolki niestandardowej</span><span class="sxs-lookup"><span data-stu-id="262ca-245">To create a child control for your custom control</span></span>

1. <span data-ttu-id="262ca-246">Dodaj nowy element klasy do `MarqueeControlLibrary` projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-246">Add a new class item to the `MarqueeControlLibrary` project.</span></span> <span data-ttu-id="262ca-247">Nadaj nowemu plikowi źródłowej nazwę podstawową "IMarqueeWidget".</span><span class="sxs-lookup"><span data-stu-id="262ca-247">Give the new source file a base name of "IMarqueeWidget."</span></span>

2. <span data-ttu-id="262ca-248">Otwórz plik `class` `interface`źródłowy w **edytorze kodu** i zmień deklarację z na: `IMarqueeWidget`</span><span class="sxs-lookup"><span data-stu-id="262ca-248">Open the `IMarqueeWidget` source file in the **Code Editor** and change the declaration from `class` to `interface`:</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#2](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/imarqueewidget.cs#2)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#2](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/imarqueewidget.vb#2)]

3. <span data-ttu-id="262ca-249">Dodaj następujący kod do `IMarqueeWidget` interfejsu, aby uwidocznić dwie metody i właściwość, która manipuluje animacją neonu:</span><span class="sxs-lookup"><span data-stu-id="262ca-249">Add the following code to the `IMarqueeWidget` interface to expose two methods and a property that manipulate the marquee animation:</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#3](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/imarqueewidget.cs#3)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#3](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/imarqueewidget.vb#3)]

4. <span data-ttu-id="262ca-250">Dodaj nowy element **kontrolki niestandardowej** do `MarqueeControlLibrary` projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-250">Add a new **Custom Control** item to the `MarqueeControlLibrary` project.</span></span> <span data-ttu-id="262ca-251">Nadaj nowemu plikowi źródłowej nazwę podstawową "MarqueeText".</span><span class="sxs-lookup"><span data-stu-id="262ca-251">Give the new source file a base name of "MarqueeText."</span></span>

5. <span data-ttu-id="262ca-252">Przeciągnij składnik z **przybornika** na kontrolkę.`MarqueeText` <xref:System.ComponentModel.BackgroundWorker></span><span class="sxs-lookup"><span data-stu-id="262ca-252">Drag a <xref:System.ComponentModel.BackgroundWorker> component from the **Toolbox** onto your `MarqueeText` control.</span></span> <span data-ttu-id="262ca-253">Ten składnik umożliwi `MarqueeText` formantowi aktualizację siebie asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="262ca-253">This component will allow the `MarqueeText` control to update itself asynchronously.</span></span>

6. <span data-ttu-id="262ca-254"><xref:System.ComponentModel.BackgroundWorker> W okno właściwości ustaw wartość `WorkerReportsProgress` i <xref:System.ComponentModel.BackgroundWorker.WorkerSupportsCancellation%2A> właściwości `true`składnika.</span><span class="sxs-lookup"><span data-stu-id="262ca-254">In the Properties window, set the <xref:System.ComponentModel.BackgroundWorker> component's `WorkerReportsProgress` and <xref:System.ComponentModel.BackgroundWorker.WorkerSupportsCancellation%2A> properties to `true`.</span></span> <span data-ttu-id="262ca-255">Te ustawienia umożliwiają <xref:System.ComponentModel.BackgroundWorker> składnikowi okresowe <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> zgłaszanie zdarzenia i anulowanie aktualizacji asynchronicznych.</span><span class="sxs-lookup"><span data-stu-id="262ca-255">These settings allow the <xref:System.ComponentModel.BackgroundWorker> component to periodically raise the <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event and to cancel asynchronous updates.</span></span> <span data-ttu-id="262ca-256">Aby uzyskać więcej informacji, zobacz [składnik BackgroundWorker](backgroundworker-component.md).</span><span class="sxs-lookup"><span data-stu-id="262ca-256">For more information, see [BackgroundWorker Component](backgroundworker-component.md).</span></span>

7. <span data-ttu-id="262ca-257">Otwórz plik źródłowy w **edytorze kodu.** `MarqueeText`</span><span class="sxs-lookup"><span data-stu-id="262ca-257">Open the `MarqueeText` source file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-258">W górnej części pliku Zaimportuj następujące przestrzenie nazw:</span><span class="sxs-lookup"><span data-stu-id="262ca-258">At the top of the file, import the following namespaces:</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#120](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueetext.cs#120)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#120](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueetext.vb#120)]

8. <span data-ttu-id="262ca-259">Zmień deklarację `MarqueeText` , aby dziedziczyć <xref:System.Windows.Forms.Label> z i aby zaimplementować `IMarqueeWidget` interfejs:</span><span class="sxs-lookup"><span data-stu-id="262ca-259">Change the declaration of `MarqueeText` to inherit from <xref:System.Windows.Forms.Label> and to implement the `IMarqueeWidget` interface:</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#130](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueetext.cs#130)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#130](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueetext.vb#130)]

9. <span data-ttu-id="262ca-260">Zadeklaruj zmienne wystąpienia, które odpowiadają uwidocznionym właściwościom, i zainicjuj je w konstruktorze.</span><span class="sxs-lookup"><span data-stu-id="262ca-260">Declare the instance variables that correspond to the exposed properties, and initialize them in the constructor.</span></span> <span data-ttu-id="262ca-261">Pole określa, czy tekst ma być malowany w kolorze podanym `LightColor` przez właściwość. `isLit`</span><span class="sxs-lookup"><span data-stu-id="262ca-261">The `isLit` field determines if the text is to be painted in the color given by the `LightColor` property.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#140](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueetext.cs#140)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#140](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueetext.vb#140)]

10. <span data-ttu-id="262ca-262">Implementowanie `IMarqueeWidget` interfejsu.</span><span class="sxs-lookup"><span data-stu-id="262ca-262">Implement the `IMarqueeWidget` interface.</span></span>

    <span data-ttu-id="262ca-263">`StartMarquee` Metodyi`StopMarquee` wywołują<xref:System.ComponentModel.BackgroundWorker> składnik i<xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A>metody , aby uruchomić i zatrzymać animację. <xref:System.ComponentModel.BackgroundWorker.RunWorkerAsync%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-263">The `StartMarquee` and `StopMarquee` methods invoke the <xref:System.ComponentModel.BackgroundWorker> component's <xref:System.ComponentModel.BackgroundWorker.RunWorkerAsync%2A> and <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A> methods to start and stop the animation.</span></span>

    <span data-ttu-id="262ca-264">Atrybuty i są<xref:System.ComponentModel.BrowsableAttribute.Browsable%2A> stosowane do właściwości,takabypojawiłysięwsekcjiniestandardowejoknowłaściwościonazwie"neon".`UpdatePeriod` <xref:System.ComponentModel.CategoryAttribute.Category%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-264">The <xref:System.ComponentModel.CategoryAttribute.Category%2A> and <xref:System.ComponentModel.BrowsableAttribute.Browsable%2A> attributes are applied to the `UpdatePeriod` property so it appears in a custom section of the Properties window called "Marquee."</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#150](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueetext.cs#150)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#150](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueetext.vb#150)]

11. <span data-ttu-id="262ca-265">Zaimplementuj metody dostępu do właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-265">Implement the property accessors.</span></span> <span data-ttu-id="262ca-266">Udostępnimy dwie właściwości klientom: `LightColor` i. `DarkColor`</span><span class="sxs-lookup"><span data-stu-id="262ca-266">You will expose two properties to clients: `LightColor` and `DarkColor`.</span></span> <span data-ttu-id="262ca-267">Atrybuty <xref:System.ComponentModel.CategoryAttribute.Category%2A> i<xref:System.ComponentModel.BrowsableAttribute.Browsable%2A> są stosowane do tych właściwości, więc właściwości są wyświetlane w sekcji niestandardowej okno właściwości o nazwie "neon".</span><span class="sxs-lookup"><span data-stu-id="262ca-267">The <xref:System.ComponentModel.CategoryAttribute.Category%2A> and <xref:System.ComponentModel.BrowsableAttribute.Browsable%2A> attributes are applied to these properties, so the properties appear in a custom section of the Properties window called "Marquee."</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#160](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueetext.cs#160)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#160](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueetext.vb#160)]

12. <span data-ttu-id="262ca-268">Zaimplementuj procedury obsługi dla <xref:System.ComponentModel.BackgroundWorker> <xref:System.ComponentModel.BackgroundWorker.DoWork> składników i <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="262ca-268">Implement the handlers for the <xref:System.ComponentModel.BackgroundWorker> component's <xref:System.ComponentModel.BackgroundWorker.DoWork> and <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> events.</span></span>

    <span data-ttu-id="262ca-269">Procedura obsługi `UpdatePeriod` <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A>zdarzeń w stanie uśpienia przez liczbę milisekund określoną przez następnie wywołuje zdarzenie, dopóki kod nie zatrzyma animacji przez wywołanie. <xref:System.ComponentModel.BackgroundWorker.DoWork></span><span class="sxs-lookup"><span data-stu-id="262ca-269">The <xref:System.ComponentModel.BackgroundWorker.DoWork> event handler sleeps for the number of milliseconds specified by `UpdatePeriod` then raises the <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event, until your code stops the animation by calling <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A>.</span></span>

    <span data-ttu-id="262ca-270">Program <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> obsługi zdarzeń przełącza tekst między jasnym i ciemnym stanem, aby dać migający wygląd.</span><span class="sxs-lookup"><span data-stu-id="262ca-270">The <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event handler toggles the text between its light and dark state to give the appearance of flashing.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#180](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueetext.cs#180)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#180](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueetext.vb#180)]

13. <span data-ttu-id="262ca-271">Zastąp <xref:System.Windows.Forms.Control.OnPaint%2A> metodę, aby włączyć animację.</span><span class="sxs-lookup"><span data-stu-id="262ca-271">Override the <xref:System.Windows.Forms.Control.OnPaint%2A> method to enable the animation.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#170](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueetext.cs#170)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#170](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueetext.vb#170)]

14. <span data-ttu-id="262ca-272">Naciśnij klawisz F6, aby skompilować rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="262ca-272">Press F6 to build the solution.</span></span>

## <a name="create-the-marqueeborder-child-control"></a><span data-ttu-id="262ca-273">Utwórz formant podrzędny MarqueeBorder</span><span class="sxs-lookup"><span data-stu-id="262ca-273">Create the MarqueeBorder Child Control</span></span>

<span data-ttu-id="262ca-274">Kontrolka jest nieco bardziej zaawansowana `MarqueeText` niż kontrolka. `MarqueeBorder`</span><span class="sxs-lookup"><span data-stu-id="262ca-274">The `MarqueeBorder` control is slightly more sophisticated than the `MarqueeText` control.</span></span> <span data-ttu-id="262ca-275">Ma więcej właściwości, a animacja w <xref:System.Windows.Forms.Control.OnPaint%2A> metodzie jest większa.</span><span class="sxs-lookup"><span data-stu-id="262ca-275">It has more properties and the animation in the <xref:System.Windows.Forms.Control.OnPaint%2A> method is more involved.</span></span> <span data-ttu-id="262ca-276">Zasadniczo jest to bardzo podobne do `MarqueeText` kontrolki.</span><span class="sxs-lookup"><span data-stu-id="262ca-276">In principle, it is quite similar to the `MarqueeText` control.</span></span>

<span data-ttu-id="262ca-277">Ponieważ kontrolka może mieć kontrolki podrzędne, musi mieć <xref:System.Windows.Forms.Control.Layout> świadomość zdarzeń. `MarqueeBorder`</span><span class="sxs-lookup"><span data-stu-id="262ca-277">Because the `MarqueeBorder` control can have child controls, it needs to be aware of <xref:System.Windows.Forms.Control.Layout> events.</span></span>

### <a name="to-create-the-marqueeborder-control"></a><span data-ttu-id="262ca-278">Aby utworzyć formant MarqueeBorder</span><span class="sxs-lookup"><span data-stu-id="262ca-278">To create the MarqueeBorder control</span></span>

1. <span data-ttu-id="262ca-279">Dodaj nowy element **kontrolki niestandardowej** do `MarqueeControlLibrary` projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-279">Add a new **Custom Control** item to the `MarqueeControlLibrary` project.</span></span> <span data-ttu-id="262ca-280">Nadaj nowemu plikowi źródłowej nazwę podstawową "MarqueeBorder".</span><span class="sxs-lookup"><span data-stu-id="262ca-280">Give the new source file a base name of "MarqueeBorder."</span></span>

2. <span data-ttu-id="262ca-281">Przeciągnij składnik z **przybornika** na kontrolkę.`MarqueeBorder` <xref:System.ComponentModel.BackgroundWorker></span><span class="sxs-lookup"><span data-stu-id="262ca-281">Drag a <xref:System.ComponentModel.BackgroundWorker> component from the **Toolbox** onto your `MarqueeBorder` control.</span></span> <span data-ttu-id="262ca-282">Ten składnik umożliwi `MarqueeBorder` formantowi aktualizację siebie asynchronicznie.</span><span class="sxs-lookup"><span data-stu-id="262ca-282">This component will allow the `MarqueeBorder` control to update itself asynchronously.</span></span>

3. <span data-ttu-id="262ca-283"><xref:System.ComponentModel.BackgroundWorker> W okno właściwości ustaw wartość `WorkerReportsProgress` i <xref:System.ComponentModel.BackgroundWorker.WorkerSupportsCancellation%2A> właściwości `true`składnika.</span><span class="sxs-lookup"><span data-stu-id="262ca-283">In the Properties window, set the <xref:System.ComponentModel.BackgroundWorker> component's `WorkerReportsProgress` and <xref:System.ComponentModel.BackgroundWorker.WorkerSupportsCancellation%2A> properties to `true`.</span></span> <span data-ttu-id="262ca-284">Te ustawienia umożliwiają <xref:System.ComponentModel.BackgroundWorker> składnikowi okresowe <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> zgłaszanie zdarzenia i anulowanie aktualizacji asynchronicznych.</span><span class="sxs-lookup"><span data-stu-id="262ca-284">These settings allow the <xref:System.ComponentModel.BackgroundWorker> component to periodically raise the <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event and to cancel asynchronous updates.</span></span> <span data-ttu-id="262ca-285">Aby uzyskać więcej informacji, zobacz [składnik BackgroundWorker](backgroundworker-component.md).</span><span class="sxs-lookup"><span data-stu-id="262ca-285">For more information, see [BackgroundWorker Component](backgroundworker-component.md).</span></span>

4. <span data-ttu-id="262ca-286">W okno Właściwości kliknij przycisk zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="262ca-286">In the Properties window, click the Events button.</span></span> <span data-ttu-id="262ca-287">Dołącz programy obsługi dla <xref:System.ComponentModel.BackgroundWorker.DoWork> zdarzeń i. <xref:System.ComponentModel.BackgroundWorker.ProgressChanged></span><span class="sxs-lookup"><span data-stu-id="262ca-287">Attach handlers for the <xref:System.ComponentModel.BackgroundWorker.DoWork> and <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> events.</span></span>

5. <span data-ttu-id="262ca-288">Otwórz plik źródłowy w **edytorze kodu.** `MarqueeBorder`</span><span class="sxs-lookup"><span data-stu-id="262ca-288">Open the `MarqueeBorder` source file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-289">W górnej części pliku Zaimportuj następujące przestrzenie nazw:</span><span class="sxs-lookup"><span data-stu-id="262ca-289">At the top of the file, import the following namespaces:</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#20](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#20)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#20](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#20)]

6. <span data-ttu-id="262ca-290">Zmień deklarację `MarqueeBorder` , aby dziedziczyć <xref:System.Windows.Forms.Panel> z i aby zaimplementować `IMarqueeWidget` interfejs.</span><span class="sxs-lookup"><span data-stu-id="262ca-290">Change the declaration of `MarqueeBorder` to inherit from <xref:System.Windows.Forms.Panel> and to implement the `IMarqueeWidget` interface.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#30](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#30)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#30](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#30)]

7. <span data-ttu-id="262ca-291">Zadeklaruj dwa wyliczenia do zarządzania `MarqueeBorder` stanem formantu: `MarqueeSpinDirection`, który określa kierunek, w którym sygnalizatory "pokrętła" dookoła obramowania, i `MarqueeLightShape`, który określa kształt świateł (kwadrat lub okrągły).</span><span class="sxs-lookup"><span data-stu-id="262ca-291">Declare two enumerations for managing the `MarqueeBorder` control's state: `MarqueeSpinDirection`, which determines the direction in which the lights "spin" around the border, and `MarqueeLightShape`, which determines the shape of the lights (square or circular).</span></span> <span data-ttu-id="262ca-292">Należy `MarqueeBorder` umieścić te deklaracje przed deklaracją klasy.</span><span class="sxs-lookup"><span data-stu-id="262ca-292">Place these declarations before the `MarqueeBorder` class declaration.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#97](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#97)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#97](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#97)]

8. <span data-ttu-id="262ca-293">Zadeklaruj zmienne wystąpienia, które odpowiadają uwidocznionym właściwościom, i zainicjuj je w konstruktorze.</span><span class="sxs-lookup"><span data-stu-id="262ca-293">Declare the instance variables that correspond to the exposed properties, and initialize them in the constructor.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#40](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#40)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#40](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#40)]

9. <span data-ttu-id="262ca-294">Implementowanie `IMarqueeWidget` interfejsu.</span><span class="sxs-lookup"><span data-stu-id="262ca-294">Implement the `IMarqueeWidget` interface.</span></span>

    <span data-ttu-id="262ca-295">`StartMarquee` Metodyi`StopMarquee` wywołują<xref:System.ComponentModel.BackgroundWorker> składnik i<xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A>metody , aby uruchomić i zatrzymać animację. <xref:System.ComponentModel.BackgroundWorker.RunWorkerAsync%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-295">The `StartMarquee` and `StopMarquee` methods invoke the <xref:System.ComponentModel.BackgroundWorker> component's <xref:System.ComponentModel.BackgroundWorker.RunWorkerAsync%2A> and <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A> methods to start and stop the animation.</span></span>

    <span data-ttu-id="262ca-296">Ponieważ kontrolka może zawierać kontrolki podrzędne `StartMarquee` , Metoda wylicza wszystkie kontrolki podrzędne i wywołuje `StartMarquee` te, które implementują `IMarqueeWidget`. `MarqueeBorder`</span><span class="sxs-lookup"><span data-stu-id="262ca-296">Because the `MarqueeBorder` control can contain child controls, the `StartMarquee` method enumerates all child controls and calls `StartMarquee` on those that implement `IMarqueeWidget`.</span></span> <span data-ttu-id="262ca-297">`StopMarquee` Metoda ma podobną implementację.</span><span class="sxs-lookup"><span data-stu-id="262ca-297">The `StopMarquee` method has a similar implementation.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#50](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#50)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#50](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#50)]

10. <span data-ttu-id="262ca-298">Zaimplementuj metody dostępu do właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-298">Implement the property accessors.</span></span> <span data-ttu-id="262ca-299">`MarqueeBorder` Kontrolka ma kilka właściwości do kontrolowania jej wyglądu.</span><span class="sxs-lookup"><span data-stu-id="262ca-299">The `MarqueeBorder` control has several properties for controlling its appearance.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#60](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#60)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#60](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#60)]

11. <span data-ttu-id="262ca-300">Zaimplementuj procedury obsługi dla <xref:System.ComponentModel.BackgroundWorker> <xref:System.ComponentModel.BackgroundWorker.DoWork> składników i <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="262ca-300">Implement the handlers for the <xref:System.ComponentModel.BackgroundWorker> component's <xref:System.ComponentModel.BackgroundWorker.DoWork> and <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> events.</span></span>

    <span data-ttu-id="262ca-301">Procedura obsługi `UpdatePeriod` <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A>zdarzeń w stanie uśpienia przez liczbę milisekund określoną przez następnie wywołuje zdarzenie, dopóki kod nie zatrzyma animacji przez wywołanie. <xref:System.ComponentModel.BackgroundWorker.DoWork></span><span class="sxs-lookup"><span data-stu-id="262ca-301">The <xref:System.ComponentModel.BackgroundWorker.DoWork> event handler sleeps for the number of milliseconds specified by `UpdatePeriod` then raises the <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event, until your code stops the animation by calling <xref:System.ComponentModel.BackgroundWorker.CancelAsync%2A>.</span></span>

    <span data-ttu-id="262ca-302">Program obsługi <xref:System.Windows.Forms.Control.Refresh%2A> zdarzeń zwiększa położenie światła "podstawowe", z którego jest określany stan światła i ciemny innych sygnalizatorów, i wywołuje metodę, aby spowodować, że formant będzie odświeżał sam siebie. <xref:System.ComponentModel.BackgroundWorker.ProgressChanged></span><span class="sxs-lookup"><span data-stu-id="262ca-302">The <xref:System.ComponentModel.BackgroundWorker.ProgressChanged> event handler increments the position of the "base" light, from which the light/dark state of the other lights is determined, and calls the <xref:System.Windows.Forms.Control.Refresh%2A> method to cause the control to repaint itself.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#90](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#90)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#90](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#90)]

12. <span data-ttu-id="262ca-303">Zaimplementuj metody `IsLit` pomocnika i `DrawLight`.</span><span class="sxs-lookup"><span data-stu-id="262ca-303">Implement the helper methods, `IsLit` and `DrawLight`.</span></span>

    <span data-ttu-id="262ca-304">`IsLit` Metoda określa kolor światła w danym położeniu.</span><span class="sxs-lookup"><span data-stu-id="262ca-304">The `IsLit` method determines the color of a light at a given position.</span></span> <span data-ttu-id="262ca-305">Światła "zapala się" są rysowane w kolorze podanym przez `LightColor` właściwość, a te, które są "ciemne" są rysowane w kolorze podanym `DarkColor` przez właściwość.</span><span class="sxs-lookup"><span data-stu-id="262ca-305">Lights that are "lit" are drawn in the color given by the `LightColor` property, and those that are "dark" are drawn in the color given by the `DarkColor` property.</span></span>

    <span data-ttu-id="262ca-306">`DrawLight` Metoda rysuje światło przy użyciu odpowiedniego koloru, kształtu i pozycji.</span><span class="sxs-lookup"><span data-stu-id="262ca-306">The `DrawLight` method draws a light using the appropriate color, shape, and position.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#80](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#80)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#80](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#80)]

13. <span data-ttu-id="262ca-307">Zastąp metody <xref:System.Windows.Forms.Control.OnPaint%2A>i. <xref:System.Windows.Forms.Control.OnLayout%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-307">Override the <xref:System.Windows.Forms.Control.OnLayout%2A> and <xref:System.Windows.Forms.Control.OnPaint%2A> methods.</span></span>

    <span data-ttu-id="262ca-308">Metoda rysuje sygnalizatory wzdłuż krawędzi `MarqueeBorder` formantu. <xref:System.Windows.Forms.Control.OnPaint%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-308">The <xref:System.Windows.Forms.Control.OnPaint%2A> method draws the lights along the edges of the `MarqueeBorder` control.</span></span>

    <span data-ttu-id="262ca-309">Ponieważ metoda zależy od wymiarów `MarqueeBorder` kontrolki, należy wywołać ją za każdym razem, gdy zmieni się układ. <xref:System.Windows.Forms.Control.OnPaint%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-309">Because the <xref:System.Windows.Forms.Control.OnPaint%2A> method depends on the dimensions of the `MarqueeBorder` control, you need to call it whenever the layout changes.</span></span> <span data-ttu-id="262ca-310">Aby to osiągnąć, Przesłoń <xref:System.Windows.Forms.Control.OnLayout%2A> i Wywołaj. <xref:System.Windows.Forms.Control.Refresh%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-310">To achieve this, override <xref:System.Windows.Forms.Control.OnLayout%2A> and call <xref:System.Windows.Forms.Control.Refresh%2A>.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#70](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#70)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#70](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#70)]

## <a name="creating-a-custom-designer-to-shadow-and-filter-properties"></a><span data-ttu-id="262ca-311">Tworzenie projektanta niestandardowego dla właściwości cieni i filtru</span><span class="sxs-lookup"><span data-stu-id="262ca-311">Creating a Custom Designer to Shadow and Filter Properties</span></span>

<span data-ttu-id="262ca-312">`MarqueeControlRootDesigner` Klasa zawiera implementację głównego projektanta.</span><span class="sxs-lookup"><span data-stu-id="262ca-312">The `MarqueeControlRootDesigner` class provides the implementation for the root designer.</span></span> <span data-ttu-id="262ca-313">Oprócz tego projektanta, który działa na `MarqueeControl`, będzie potrzebny Projektant niestandardowy, który jest skojarzony `MarqueeBorder` z formantem.</span><span class="sxs-lookup"><span data-stu-id="262ca-313">In addition to this designer, which operates on the `MarqueeControl`, you will need a custom designer that is specifically associated with the `MarqueeBorder` control.</span></span> <span data-ttu-id="262ca-314">Ten Projektant udostępnia niestandardowe zachowanie odpowiednie w kontekście niestandardowego projektanta głównego.</span><span class="sxs-lookup"><span data-stu-id="262ca-314">This designer provides custom behavior that is appropriate in the context of the custom root designer.</span></span>

<span data-ttu-id="262ca-315">W konkretnym `MarqueeBorderDesigner` przypadku będzie to "cień" i filtruje pewne `MarqueeBorder` właściwości kontrolki, zmieniając ich interakcje ze środowiskiem projektowym.</span><span class="sxs-lookup"><span data-stu-id="262ca-315">Specifically, the `MarqueeBorderDesigner` will "shadow" and filter certain properties on the `MarqueeBorder` control, changing their interaction with the design environment.</span></span>

<span data-ttu-id="262ca-316">Przechwycenie wywołań metody dostępu do właściwości jest znane jako "przesłanianie".</span><span class="sxs-lookup"><span data-stu-id="262ca-316">Intercepting calls to a component's property accessor is known as "shadowing."</span></span> <span data-ttu-id="262ca-317">Umożliwia projektantowi śledzenie wartości ustawionej przez użytkownika i opcjonalne przekazywanie tej wartości do zaprojektowanego składnika.</span><span class="sxs-lookup"><span data-stu-id="262ca-317">It allows a designer to track the value set by the user and optionally pass that value to the component being designed.</span></span>

<span data-ttu-id="262ca-318">Na potrzeby tego przykładu <xref:System.Windows.Forms.Control.Visible%2A> właściwości <xref:System.Windows.Forms.Control.Enabled%2A> i zostaną obsłonięte przez `MarqueeBorderDesigner` `MarqueeBorder` , co uniemożliwi użytkownikowi nieukrywanie lub wyłączenie kontrolki w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-318">For this example, the <xref:System.Windows.Forms.Control.Visible%2A> and <xref:System.Windows.Forms.Control.Enabled%2A> properties will be shadowed by the `MarqueeBorderDesigner`, which prevents the user from making the `MarqueeBorder` control invisible or disabled during design time.</span></span>

<span data-ttu-id="262ca-319">Projektanci mogą również dodawać i usuwać właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-319">Designers can also add and remove properties.</span></span> <span data-ttu-id="262ca-320">W tym przykładzie <xref:System.Windows.Forms.Control.Padding%2A> właściwość zostanie usunięta w czasie projektowania, `MarqueeBorder` ponieważ kontrolka programowo ustawia uzupełnienie na podstawie rozmiaru świateł określonych przez `LightSize` właściwość.</span><span class="sxs-lookup"><span data-stu-id="262ca-320">For this example, the <xref:System.Windows.Forms.Control.Padding%2A> property will be removed at design time, because the `MarqueeBorder` control programmatically sets the padding based on the size of the lights specified by the `LightSize` property.</span></span>

<span data-ttu-id="262ca-321">Klasa bazowa dla `MarqueeBorderDesigner` to <xref:System.ComponentModel.Design.ComponentDesigner>, która ma metody, które mogą zmieniać atrybuty, właściwości i zdarzenia udostępniane przez formant w czasie projektowania:</span><span class="sxs-lookup"><span data-stu-id="262ca-321">The base class for `MarqueeBorderDesigner` is <xref:System.ComponentModel.Design.ComponentDesigner>, which has methods that can change the attributes, properties, and events exposed by a control at design time:</span></span>

- <xref:System.ComponentModel.Design.ComponentDesigner.PreFilterProperties%2A>

- <xref:System.ComponentModel.Design.ComponentDesigner.PostFilterProperties%2A>

- <xref:System.ComponentModel.Design.ComponentDesigner.PreFilterAttributes%2A>

- <xref:System.ComponentModel.Design.ComponentDesigner.PostFilterAttributes%2A>

- <xref:System.ComponentModel.Design.ComponentDesigner.PreFilterEvents%2A>

- <xref:System.ComponentModel.Design.ComponentDesigner.PostFilterEvents%2A>

<span data-ttu-id="262ca-322">Podczas zmiany interfejsu publicznego składnika przy użyciu tych metod należy wykonać następujące reguły:</span><span class="sxs-lookup"><span data-stu-id="262ca-322">When changing the public interface of a component using these methods, you must follow these rules:</span></span>

- <span data-ttu-id="262ca-323">Dodaj lub Usuń elementy tylko w `PreFilter` metodach</span><span class="sxs-lookup"><span data-stu-id="262ca-323">Add or remove items in the `PreFilter` methods only</span></span>

- <span data-ttu-id="262ca-324">Modyfikuj istniejące elementy tylko w `PostFilter` metodach</span><span class="sxs-lookup"><span data-stu-id="262ca-324">Modify existing items in the `PostFilter` methods only</span></span>

- <span data-ttu-id="262ca-325">Zawsze Wywołaj implementację bazową najpierw `PreFilter` w metodach</span><span class="sxs-lookup"><span data-stu-id="262ca-325">Always call the base implementation first in the `PreFilter` methods</span></span>

- <span data-ttu-id="262ca-326">Zawsze Wywołaj implementację podstawową ostatnio w `PostFilter` metodach</span><span class="sxs-lookup"><span data-stu-id="262ca-326">Always call the base implementation last in the `PostFilter` methods</span></span>

<span data-ttu-id="262ca-327">Przestrzeganie tych reguł zapewnia, że wszystkie projektanci w środowisku czasu projektowania mają spójny widok wszystkich składników, które są zaprojektowane.</span><span class="sxs-lookup"><span data-stu-id="262ca-327">Adhering to these rules ensures that all designers in the design-time environment have a consistent view of all components being designed.</span></span>

<span data-ttu-id="262ca-328"><xref:System.ComponentModel.Design.ComponentDesigner> Klasa zawiera słownik służący do zarządzania wartościami właściwości cieniowanych, co zwalnia konieczność tworzenia określonych zmiennych wystąpień.</span><span class="sxs-lookup"><span data-stu-id="262ca-328">The <xref:System.ComponentModel.Design.ComponentDesigner> class provides a dictionary for managing the values of shadowed properties, which relieves you of the need to create specific instance variables.</span></span>

### <a name="to-create-a-custom-designer-to-shadow-and-filter-properties"></a><span data-ttu-id="262ca-329">Aby utworzyć projektanta niestandardowego dla właściwości cieni i filtru</span><span class="sxs-lookup"><span data-stu-id="262ca-329">To create a custom designer to shadow and filter properties</span></span>

1. <span data-ttu-id="262ca-330">Kliknij prawym przyciskiem myszy folder **projekt** i Dodaj nową klasę.</span><span class="sxs-lookup"><span data-stu-id="262ca-330">Right-click the **Design** folder and add a new class.</span></span> <span data-ttu-id="262ca-331">Nadaj plikowi źródłowej nazwę podstawową "MarqueeBorderDesigner".</span><span class="sxs-lookup"><span data-stu-id="262ca-331">Give the source file a base name of "MarqueeBorderDesigner."</span></span>

2. <span data-ttu-id="262ca-332">Otwórz plik źródłowy w **edytorze kodu.** `MarqueeBorderDesigner`</span><span class="sxs-lookup"><span data-stu-id="262ca-332">Open the `MarqueeBorderDesigner` source file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-333">W górnej części pliku Zaimportuj następujące przestrzenie nazw:</span><span class="sxs-lookup"><span data-stu-id="262ca-333">At the top of the file, import the following namespaces:</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#420](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborderdesigner.cs#420)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#420](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborderdesigner.vb#420)]

3. <span data-ttu-id="262ca-334">Zmień deklarację elementu `MarqueeBorderDesigner` , aby <xref:System.Windows.Forms.Design.ParentControlDesigner>dziedziczyć.</span><span class="sxs-lookup"><span data-stu-id="262ca-334">Change the declaration of `MarqueeBorderDesigner` to inherit from <xref:System.Windows.Forms.Design.ParentControlDesigner>.</span></span>

    <span data-ttu-id="262ca-335">Ponieważ kontrolka może zawierać kontrolki podrzędne `MarqueeBorderDesigner` , dziedziczy <xref:System.Windows.Forms.Design.ParentControlDesigner>po, która obsługuje interakcję nadrzędny-podrzędny. `MarqueeBorder`</span><span class="sxs-lookup"><span data-stu-id="262ca-335">Because the `MarqueeBorder` control can contain child controls, `MarqueeBorderDesigner` inherits from <xref:System.Windows.Forms.Design.ParentControlDesigner>, which handles the parent-child interaction.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#430](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborderdesigner.cs#430)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#430](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborderdesigner.vb#430)]

4. <span data-ttu-id="262ca-336">Zastąp podstawową implementację <xref:System.ComponentModel.Design.ComponentDesigner.PreFilterProperties%2A>programu.</span><span class="sxs-lookup"><span data-stu-id="262ca-336">Override the base implementation of <xref:System.ComponentModel.Design.ComponentDesigner.PreFilterProperties%2A>.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#450](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborderdesigner.cs#450)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#450](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborderdesigner.vb#450)]

5. <span data-ttu-id="262ca-337">Zaimplementuj właściwości <xref:System.Windows.Forms.Control.Visible%2A>i. <xref:System.Windows.Forms.Control.Enabled%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-337">Implement the <xref:System.Windows.Forms.Control.Enabled%2A> and <xref:System.Windows.Forms.Control.Visible%2A> properties.</span></span> <span data-ttu-id="262ca-338">Te implementacje zasłaniają właściwości kontrolki.</span><span class="sxs-lookup"><span data-stu-id="262ca-338">These implementations shadow the control's properties.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#440](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborderdesigner.cs#440)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#440](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborderdesigner.vb#440)]

## <a name="handling-component-changes"></a><span data-ttu-id="262ca-339">Obsługa zmian składników</span><span class="sxs-lookup"><span data-stu-id="262ca-339">Handling Component Changes</span></span>
 <span data-ttu-id="262ca-340">Klasa udostępnia niestandardowe środowisko czasu projektowania `MarqueeControl` dla wystąpień. `MarqueeControlRootDesigner`</span><span class="sxs-lookup"><span data-stu-id="262ca-340">The `MarqueeControlRootDesigner` class provides the custom design-time experience for your `MarqueeControl` instances.</span></span> <span data-ttu-id="262ca-341">Większość funkcji czasu projektowania jest dziedziczona z <xref:System.Windows.Forms.Design.DocumentDesigner> klasy; Twój kod Zaimplementuj dwa specyficzne dostosowania: obsługa zmian składników i Dodawanie zleceń projektanta.</span><span class="sxs-lookup"><span data-stu-id="262ca-341">Most of the design-time functionality is inherited from the <xref:System.Windows.Forms.Design.DocumentDesigner> class; your code will implement two specific customizations: handling component changes, and adding designer verbs.</span></span>

 <span data-ttu-id="262ca-342">Gdy użytkownicy zaprojektowają swoje `MarqueeControl` wystąpienia, Projektant główny będzie śledził zmiany `MarqueeControl` w i jego kontrolkach podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="262ca-342">As users design their `MarqueeControl` instances, your root designer will track changes to the `MarqueeControl` and its child controls.</span></span> <span data-ttu-id="262ca-343">Środowisko czasu projektowania oferuje wygodną usługę <xref:System.ComponentModel.Design.IComponentChangeService>, umożliwiając śledzenie zmian stanu składnika.</span><span class="sxs-lookup"><span data-stu-id="262ca-343">The design-time environment offers a convenient service, <xref:System.ComponentModel.Design.IComponentChangeService>, for tracking changes to component state.</span></span>

 <span data-ttu-id="262ca-344">Uzyskujesz odwołanie do tej usługi, badając środowisko przy użyciu <xref:System.ComponentModel.Design.ComponentDesigner.GetService%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="262ca-344">You acquire a reference to this service by querying the environment with the <xref:System.ComponentModel.Design.ComponentDesigner.GetService%2A> method.</span></span> <span data-ttu-id="262ca-345">Jeśli zapytanie zakończyło się pomyślnie, Projektant może dołączyć procedurę obsługi dla <xref:System.ComponentModel.Design.IComponentChangeService.ComponentChanged> zdarzenia i wykonać wszelkie zadania wymagane do zapewnienia spójnego stanu w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-345">If the query is successful, your designer can attach a handler for the <xref:System.ComponentModel.Design.IComponentChangeService.ComponentChanged> event and perform whatever tasks are required to maintain a consistent state at design time.</span></span>

 <span data-ttu-id="262ca-346">W przypadku `MarqueeControlRootDesigner` klasy, <xref:System.Windows.Forms.Control.Refresh%2A> Metoda zostanie wywołana dla `MarqueeControl`każdego `IMarqueeWidget` obiektu zawartego w.</span><span class="sxs-lookup"><span data-stu-id="262ca-346">In the case of the `MarqueeControlRootDesigner` class, you will call the <xref:System.Windows.Forms.Control.Refresh%2A> method on each `IMarqueeWidget` object contained by the `MarqueeControl`.</span></span> <span data-ttu-id="262ca-347">Spowoduje to, że `IMarqueeWidget` obiekt jest odpowiednio odświeżany, gdy właściwości, takie jak jego <xref:System.Windows.Forms.Control.Size%2A> element nadrzędny, zostaną zmienione.</span><span class="sxs-lookup"><span data-stu-id="262ca-347">This will cause the `IMarqueeWidget` object to repaint itself appropriately when properties like its parent's <xref:System.Windows.Forms.Control.Size%2A> are changed.</span></span>

### <a name="to-handle-component-changes"></a><span data-ttu-id="262ca-348">Aby obsłużyć zmiany składników</span><span class="sxs-lookup"><span data-stu-id="262ca-348">To handle component changes</span></span>

1. <span data-ttu-id="262ca-349">Otwórz plik <xref:System.Windows.Forms.Design.DocumentDesigner.Initialize%2A> źródłowy w edytorze kodu i Zastąp metodę. `MarqueeControlRootDesigner`</span><span class="sxs-lookup"><span data-stu-id="262ca-349">Open the `MarqueeControlRootDesigner` source file in the **Code Editor** and override the <xref:System.Windows.Forms.Design.DocumentDesigner.Initialize%2A> method.</span></span> <span data-ttu-id="262ca-350">Wywołaj podstawową implementację <xref:System.Windows.Forms.Design.DocumentDesigner.Initialize%2A> i zapytaj <xref:System.ComponentModel.Design.IComponentChangeService>o.</span><span class="sxs-lookup"><span data-stu-id="262ca-350">Call the base implementation of <xref:System.Windows.Forms.Design.DocumentDesigner.Initialize%2A> and query for the <xref:System.ComponentModel.Design.IComponentChangeService>.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#580](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrolrootdesigner.cs#580)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#580](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrolrootdesigner.vb#580)]

2. <span data-ttu-id="262ca-351">Zaimplementuj procedurę obsługi zdarzeń. <xref:System.ComponentModel.Design.IComponentChangeService.OnComponentChanged%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-351">Implement the <xref:System.ComponentModel.Design.IComponentChangeService.OnComponentChanged%2A> event handler.</span></span> <span data-ttu-id="262ca-352">Przetestuj typ składnika wysyłającego, a jeśli jest `IMarqueeWidget`, wywołaj jego <xref:System.Windows.Forms.Control.Refresh%2A> metodę.</span><span class="sxs-lookup"><span data-stu-id="262ca-352">Test the sending component's type, and if it is an `IMarqueeWidget`, call its <xref:System.Windows.Forms.Control.Refresh%2A> method.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#560](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrolrootdesigner.cs#560)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#560](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrolrootdesigner.vb#560)]

## <a name="adding-designer-verbs-to-your-custom-designer"></a><span data-ttu-id="262ca-353">Dodawanie zleceń projektanta do projektanta niestandardowego</span><span class="sxs-lookup"><span data-stu-id="262ca-353">Adding Designer Verbs to your Custom Designer</span></span>

<span data-ttu-id="262ca-354">Zlecenie projektanta jest poleceniem menu połączonym z programem obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="262ca-354">A designer verb is a menu command linked to an event handler.</span></span> <span data-ttu-id="262ca-355">Zlecenia projektanta są dodawane do menu skrótów składnika w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-355">Designer verbs are added to a component's shortcut menu at design time.</span></span> <span data-ttu-id="262ca-356">Aby uzyskać więcej informacji, zobacz <xref:System.ComponentModel.Design.DesignerVerb>.</span><span class="sxs-lookup"><span data-stu-id="262ca-356">For more information, see <xref:System.ComponentModel.Design.DesignerVerb>.</span></span>

<span data-ttu-id="262ca-357">Do projektantów są dodawane dwa zlecenia projektanta: **Uruchom test** i **Zatrzymaj test**.</span><span class="sxs-lookup"><span data-stu-id="262ca-357">You will add two designer verbs to your designers: **Run Test** and **Stop Test**.</span></span> <span data-ttu-id="262ca-358">Te czasowniki umożliwią wyświetlenie zachowania `MarqueeControl` w czasie wykonywania w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-358">These verbs will allow you to view the run-time behavior of the `MarqueeControl` at design time.</span></span> <span data-ttu-id="262ca-359">Te zlecenia zostaną dodane do `MarqueeControlRootDesigner`.</span><span class="sxs-lookup"><span data-stu-id="262ca-359">These verbs will be added to the `MarqueeControlRootDesigner`.</span></span>

<span data-ttu-id="262ca-360">Gdy jest wywoływany **Test Run** , program obsługi zdarzeń zlecenia wywoła `StartMarquee` metodę w. `MarqueeControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-360">When **Run Test** is invoked, the verb event handler will call the `StartMarquee` method on the `MarqueeControl`.</span></span> <span data-ttu-id="262ca-361">Po wywołaniu **testu zatrzymania** program obsługi zdarzeń zlecenia wywoła `StopMarquee` metodę w. `MarqueeControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-361">When **Stop Test** is invoked, the verb event handler will call the `StopMarquee` method on the `MarqueeControl`.</span></span> <span data-ttu-id="262ca-362">Implementacja `StartMarquee` metod i `StopMarquee` wywołuje te metody na zawartych kontrolkach, które implementują `IMarqueeWidget`, tak aby wszystkie `IMarqueeWidget` zawarte kontrolki również uczestniczyły w teście.</span><span class="sxs-lookup"><span data-stu-id="262ca-362">The implementation of the `StartMarquee` and `StopMarquee` methods call these methods on contained controls that implement `IMarqueeWidget`, so any contained `IMarqueeWidget` controls will also participate in the test.</span></span>

### <a name="to-add-designer-verbs-to-your-custom-designers"></a><span data-ttu-id="262ca-363">Aby dodać czasowniki projektanta do niestandardowych projektantów</span><span class="sxs-lookup"><span data-stu-id="262ca-363">To add designer verbs to your custom designers</span></span>

1. <span data-ttu-id="262ca-364">W klasie Dodaj programy obsługi zdarzeń o nazwach `OnVerbRunTest` i `OnVerbStopTest`. `MarqueeControlRootDesigner`</span><span class="sxs-lookup"><span data-stu-id="262ca-364">In the `MarqueeControlRootDesigner` class, add event handlers named `OnVerbRunTest` and `OnVerbStopTest`.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#570](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrolrootdesigner.cs#570)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#570](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrolrootdesigner.vb#570)]

2. <span data-ttu-id="262ca-365">Połącz te programy obsługi zdarzeń z odpowiednimi zleceniami projektanta.</span><span class="sxs-lookup"><span data-stu-id="262ca-365">Connect these event handlers to their corresponding designer verbs.</span></span> <span data-ttu-id="262ca-366">`MarqueeControlRootDesigner`<xref:System.ComponentModel.Design.DesignerVerbCollection> dziedziczy z klasy bazowej.</span><span class="sxs-lookup"><span data-stu-id="262ca-366">`MarqueeControlRootDesigner` inherits a <xref:System.ComponentModel.Design.DesignerVerbCollection> from its base class.</span></span> <span data-ttu-id="262ca-367">Utworzysz dwa nowe <xref:System.ComponentModel.Design.DesignerVerb> obiekty i dodasz je do tej kolekcji <xref:System.Windows.Forms.Design.DocumentDesigner.Initialize%2A> w metodzie.</span><span class="sxs-lookup"><span data-stu-id="262ca-367">You will create two new <xref:System.ComponentModel.Design.DesignerVerb> objects and add them to this collection in the <xref:System.Windows.Forms.Design.DocumentDesigner.Initialize%2A> method.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#590](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueecontrolrootdesigner.cs#590)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#590](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueecontrolrootdesigner.vb#590)]

## <a name="creating-a-custom-uitypeeditor"></a><span data-ttu-id="262ca-368">Tworzenie niestandardowego UITypeEditor</span><span class="sxs-lookup"><span data-stu-id="262ca-368">Creating a Custom UITypeEditor</span></span>

<span data-ttu-id="262ca-369">Podczas tworzenia niestandardowego środowiska czasu projektowania dla użytkowników często pożądane jest utworzenie interakcji niestandardowej z okno Właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-369">When you create a custom design-time experience for users, it is often desirable to create a custom interaction with the Properties window.</span></span> <span data-ttu-id="262ca-370">Można to zrobić, tworząc <xref:System.Drawing.Design.UITypeEditor>.</span><span class="sxs-lookup"><span data-stu-id="262ca-370">You can accomplish this by creating a <xref:System.Drawing.Design.UITypeEditor>.</span></span> <span data-ttu-id="262ca-371">Aby uzyskać więcej informacji, zobacz [jak: Utwórz Edytor](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/fd3kt7d5(v=vs.120))typów interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="262ca-371">For more information, see [How to: Create a UI Type Editor](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/fd3kt7d5(v=vs.120)).</span></span>

<span data-ttu-id="262ca-372">`MarqueeBorder` Formant uwidacznia kilka właściwości w okno właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-372">The `MarqueeBorder` control exposes several properties in the Properties window.</span></span> <span data-ttu-id="262ca-373">Dwie z tych właściwości `MarqueeSpinDirection` i `MarqueeLightShape` są reprezentowane przez wyliczenia.</span><span class="sxs-lookup"><span data-stu-id="262ca-373">Two of these properties, `MarqueeSpinDirection` and `MarqueeLightShape` are represented by enumerations.</span></span> <span data-ttu-id="262ca-374">Aby zilustrować użycie edytora typów interfejsu użytkownika, `MarqueeLightShape` właściwość będzie miała skojarzoną <xref:System.Drawing.Design.UITypeEditor> klasę.</span><span class="sxs-lookup"><span data-stu-id="262ca-374">To illustrate the use of a UI type editor, the `MarqueeLightShape` property will have an associated <xref:System.Drawing.Design.UITypeEditor> class.</span></span>

### <a name="to-create-a-custom-ui-type-editor"></a><span data-ttu-id="262ca-375">Aby utworzyć niestandardowy Edytor typów interfejsu użytkownika</span><span class="sxs-lookup"><span data-stu-id="262ca-375">To create a custom UI type editor</span></span>

1. <span data-ttu-id="262ca-376">Otwórz plik źródłowy w **edytorze kodu.** `MarqueeBorder`</span><span class="sxs-lookup"><span data-stu-id="262ca-376">Open the `MarqueeBorder` source file in the **Code Editor**.</span></span>

2. <span data-ttu-id="262ca-377">W definicji `MarqueeBorder` klasy deklaruj klasę o nazwie `LightShapeEditor` , która dziedziczy z <xref:System.Drawing.Design.UITypeEditor>.</span><span class="sxs-lookup"><span data-stu-id="262ca-377">In the definition of the `MarqueeBorder` class, declare a class called `LightShapeEditor` that derives from <xref:System.Drawing.Design.UITypeEditor>.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#96](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#96)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#96](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#96)]

3. <span data-ttu-id="262ca-378">Zadeklaruj zmienną `editorService` <xref:System.Windows.Forms.Design.IWindowsFormsEditorService> wystąpienia o nazwie.</span><span class="sxs-lookup"><span data-stu-id="262ca-378">Declare an <xref:System.Windows.Forms.Design.IWindowsFormsEditorService> instance variable called `editorService`.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#92](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#92)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#92](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#92)]

4. <span data-ttu-id="262ca-379">Zastąp <xref:System.Drawing.Design.UITypeEditor.GetEditStyle%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="262ca-379">Override the <xref:System.Drawing.Design.UITypeEditor.GetEditStyle%2A> method.</span></span> <span data-ttu-id="262ca-380">Ta implementacja zwraca <xref:System.Drawing.Design.UITypeEditorEditStyle.DropDown>, która informuje środowisko projektowe o sposobie `LightShapeEditor`wyświetlania.</span><span class="sxs-lookup"><span data-stu-id="262ca-380">This implementation returns <xref:System.Drawing.Design.UITypeEditorEditStyle.DropDown>, which tells the design environment how to display the `LightShapeEditor`.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#93](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#93)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#93](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#93)]

5. <span data-ttu-id="262ca-381">Zastąp <xref:System.Drawing.Design.UITypeEditor.EditValue%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="262ca-381">Override the <xref:System.Drawing.Design.UITypeEditor.EditValue%2A> method.</span></span> <span data-ttu-id="262ca-382">Ta implementacja wysyła zapytanie do środowiska projektowego <xref:System.Windows.Forms.Design.IWindowsFormsEditorService> dla obiektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-382">This implementation queries the design environment for an <xref:System.Windows.Forms.Design.IWindowsFormsEditorService> object.</span></span> <span data-ttu-id="262ca-383">Po pomyślnym utworzeniu `LightShapeSelectionControl`.</span><span class="sxs-lookup"><span data-stu-id="262ca-383">If successful, it creates a `LightShapeSelectionControl`.</span></span> <span data-ttu-id="262ca-384">Metoda jest wywoływana w celu `LightShapeEditor`uruchomienia. <xref:System.Windows.Forms.Design.IWindowsFormsEditorService.DropDownControl%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-384">The <xref:System.Windows.Forms.Design.IWindowsFormsEditorService.DropDownControl%2A> method is invoked to start the `LightShapeEditor`.</span></span> <span data-ttu-id="262ca-385">Wartość zwracana z tego wywołania jest zwracana do środowiska projektowego.</span><span class="sxs-lookup"><span data-stu-id="262ca-385">The return value from this invocation is returned to the design environment.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#94](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/marqueeborder.cs#94)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#94](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/marqueeborder.vb#94)]

## <a name="creating-a-view-control-for-your-custom-uitypeeditor"></a><span data-ttu-id="262ca-386">Tworzenie kontrolki widoku dla niestandardowego UITypeEditor</span><span class="sxs-lookup"><span data-stu-id="262ca-386">Creating a View Control for your Custom UITypeEditor</span></span>

1. <span data-ttu-id="262ca-387">Właściwość obsługuje dwa typy jasnych kształtów: `Square` i `Circle`. `MarqueeLightShape`</span><span class="sxs-lookup"><span data-stu-id="262ca-387">The `MarqueeLightShape` property supports two types of light shapes: `Square` and `Circle`.</span></span> <span data-ttu-id="262ca-388">Utworzysz kontrolkę niestandardową używaną wyłącznie na potrzeby graficznego wyświetlania tych wartości w okno Właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-388">You will create a custom control used solely for the purpose of graphically displaying these values in the Properties window.</span></span> <span data-ttu-id="262ca-389">Ta kontrolka niestandardowa będzie używana <xref:System.Drawing.Design.UITypeEditor> przez użytkownika do korzystania z okno właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-389">This custom control will be used by your <xref:System.Drawing.Design.UITypeEditor> to interact with the Properties window.</span></span>

### <a name="to-create-a-view-control-for-your-custom-ui-type-editor"></a><span data-ttu-id="262ca-390">Aby utworzyć kontrolkę widoku dla niestandardowego edytora typów interfejsu użytkownika</span><span class="sxs-lookup"><span data-stu-id="262ca-390">To create a view control for your custom UI type editor</span></span>

1. <span data-ttu-id="262ca-391">Dodaj nowy <xref:System.Windows.Forms.UserControl> element `MarqueeControlLibrary` do projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-391">Add a new <xref:System.Windows.Forms.UserControl> item to the `MarqueeControlLibrary` project.</span></span> <span data-ttu-id="262ca-392">Nadaj nowemu plikowi źródłowej nazwę podstawową "LightShapeSelectionControl".</span><span class="sxs-lookup"><span data-stu-id="262ca-392">Give the new source file a base name of "LightShapeSelectionControl."</span></span>

2. <span data-ttu-id="262ca-393">Przeciągnij dwie <xref:System.Windows.Forms.Panel> kontrolki z `LightShapeSelectionControl`przybornika na.</span><span class="sxs-lookup"><span data-stu-id="262ca-393">Drag two <xref:System.Windows.Forms.Panel> controls from the **Toolbox** onto the `LightShapeSelectionControl`.</span></span> <span data-ttu-id="262ca-394">Nadaj mu `squarePanel` nazwę `circlePanel`i.</span><span class="sxs-lookup"><span data-stu-id="262ca-394">Name them `squarePanel` and `circlePanel`.</span></span> <span data-ttu-id="262ca-395">Rozmieść je obok siebie.</span><span class="sxs-lookup"><span data-stu-id="262ca-395">Arrange them side by side.</span></span> <span data-ttu-id="262ca-396">Ustaw właściwość obu <xref:System.Windows.Forms.Panel> kontrolek na (60, 60). <xref:System.Windows.Forms.Control.Size%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-396">Set the <xref:System.Windows.Forms.Control.Size%2A> property of both <xref:System.Windows.Forms.Panel> controls to (60, 60).</span></span> <span data-ttu-id="262ca-397"><xref:System.Windows.Forms.Control.Location%2A> Ustaw właściwość `squarePanel` kontrolki na (8, 10).</span><span class="sxs-lookup"><span data-stu-id="262ca-397">Set the <xref:System.Windows.Forms.Control.Location%2A> property of the `squarePanel` control to (8, 10).</span></span> <span data-ttu-id="262ca-398"><xref:System.Windows.Forms.Control.Location%2A> Ustaw właściwość `circlePanel` kontrolki na (80, 10).</span><span class="sxs-lookup"><span data-stu-id="262ca-398">Set the <xref:System.Windows.Forms.Control.Location%2A> property of the `circlePanel` control to (80, 10).</span></span> <span data-ttu-id="262ca-399">Na koniec Ustaw <xref:System.Windows.Forms.Control.Size%2A> Właściwość `LightShapeSelectionControl` na (150, 80).</span><span class="sxs-lookup"><span data-stu-id="262ca-399">Finally, set the <xref:System.Windows.Forms.Control.Size%2A> property of the `LightShapeSelectionControl` to (150, 80).</span></span>

3. <span data-ttu-id="262ca-400">Otwórz plik źródłowy w **edytorze kodu.** `LightShapeSelectionControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-400">Open the `LightShapeSelectionControl` source file in the **Code Editor**.</span></span> <span data-ttu-id="262ca-401">W górnej części pliku zaimportuj <xref:System.Windows.Forms.Design?displayProperty=nameWithType> przestrzeń nazw:</span><span class="sxs-lookup"><span data-stu-id="262ca-401">At the top of the file, import the <xref:System.Windows.Forms.Design?displayProperty=nameWithType> namespace:</span></span>

```vb
Imports System.Windows.Forms.Design
```

```csharp
using System.Windows.Forms.Design;
```

1. <span data-ttu-id="262ca-402">Implementuj <xref:System.Windows.Forms.Control.Click> procedury obsługi zdarzeń `squarePanel` dla formantów i `circlePanel` .</span><span class="sxs-lookup"><span data-stu-id="262ca-402">Implement <xref:System.Windows.Forms.Control.Click> event handlers for the `squarePanel` and `circlePanel` controls.</span></span> <span data-ttu-id="262ca-403">Te metody są <xref:System.Windows.Forms.Design.IWindowsFormsEditorService.CloseDropDown%2A> wywoływane, aby zakończyć <xref:System.Drawing.Design.UITypeEditor> sesję edycji niestandardowej.</span><span class="sxs-lookup"><span data-stu-id="262ca-403">These methods invoke <xref:System.Windows.Forms.Design.IWindowsFormsEditorService.CloseDropDown%2A> to end the custom <xref:System.Drawing.Design.UITypeEditor> editing session.</span></span>

    [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#390](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/lightshapeselectioncontrol.cs#390)]
    [!code-vb[System.Windows.Forms.Design.DocumentDesigner#390](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/lightshapeselectioncontrol.vb#390)]

2. <span data-ttu-id="262ca-404">Zadeklaruj zmienną `editorService` <xref:System.Windows.Forms.Design.IWindowsFormsEditorService> wystąpienia o nazwie.</span><span class="sxs-lookup"><span data-stu-id="262ca-404">Declare an <xref:System.Windows.Forms.Design.IWindowsFormsEditorService> instance variable called `editorService`.</span></span>

```vb
Private editorService As IWindowsFormsEditorService
```

```csharp
private IWindowsFormsEditorService editorService;
```

1. <span data-ttu-id="262ca-405">Zadeklaruj zmienną `lightShapeValue` `MarqueeLightShape` wystąpienia o nazwie.</span><span class="sxs-lookup"><span data-stu-id="262ca-405">Declare a `MarqueeLightShape` instance variable called `lightShapeValue`.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#330](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/lightshapeselectioncontrol.cs#330)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#330](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/lightshapeselectioncontrol.vb#330)]

2. <span data-ttu-id="262ca-406"><xref:System.Windows.Forms.Control.Click> `squarePanel` `circlePanel` W konstruktorze Dołącz obsługę zdarzeń<xref:System.Windows.Forms.Control.Click> do zdarzeń i kontrolek. `LightShapeSelectionControl`</span><span class="sxs-lookup"><span data-stu-id="262ca-406">In the `LightShapeSelectionControl` constructor, attach the <xref:System.Windows.Forms.Control.Click> event handlers to the `squarePanel` and `circlePanel` controls' <xref:System.Windows.Forms.Control.Click> events.</span></span> <span data-ttu-id="262ca-407">Ponadto Zdefiniuj przeciążenie konstruktora, które przypisuje `MarqueeLightShape` wartość ze środowiska projektowego `lightShapeValue` do pola.</span><span class="sxs-lookup"><span data-stu-id="262ca-407">Also, define a constructor overload that assigns the `MarqueeLightShape` value from the design environment to the `lightShapeValue` field.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#340](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/lightshapeselectioncontrol.cs#340)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#340](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/lightshapeselectioncontrol.vb#340)]

3. <span data-ttu-id="262ca-408">W metodzie Odłącz procedury obsługi <xref:System.Windows.Forms.Control.Click> zdarzeń. <xref:System.ComponentModel.Component.Dispose%2A></span><span class="sxs-lookup"><span data-stu-id="262ca-408">In the <xref:System.ComponentModel.Component.Dispose%2A> method, detach the <xref:System.Windows.Forms.Control.Click> event handlers.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#350](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/lightshapeselectioncontrol.cs#350)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#350](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/lightshapeselectioncontrol.vb#350)]

4. <span data-ttu-id="262ca-409">W **Eksplorator rozwiązań**kliknij przycisk **Pokaż wszystkie pliki** .</span><span class="sxs-lookup"><span data-stu-id="262ca-409">In **Solution Explorer**, click the **Show All Files** button.</span></span> <span data-ttu-id="262ca-410">Otwórz plik LightShapeSelectionControl.Designer.cs lub LightShapeSelectionControl. Designer. vb i usuń definicję <xref:System.ComponentModel.Component.Dispose%2A> domyślną metody.</span><span class="sxs-lookup"><span data-stu-id="262ca-410">Open the LightShapeSelectionControl.Designer.cs or LightShapeSelectionControl.Designer.vb file, and remove the default definition of the <xref:System.ComponentModel.Component.Dispose%2A> method.</span></span>

5. <span data-ttu-id="262ca-411">Zaimplementuj `LightShape` właściwość.</span><span class="sxs-lookup"><span data-stu-id="262ca-411">Implement the `LightShape` property.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#360](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/lightshapeselectioncontrol.cs#360)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#360](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/lightshapeselectioncontrol.vb#360)]

6. <span data-ttu-id="262ca-412">Zastąp <xref:System.Windows.Forms.Control.OnPaint%2A> metody.</span><span class="sxs-lookup"><span data-stu-id="262ca-412">Override the <xref:System.Windows.Forms.Control.OnPaint%2A> method.</span></span> <span data-ttu-id="262ca-413">Ta implementacja spowoduje narysowanie wypełnionego kwadratu i okręgu.</span><span class="sxs-lookup"><span data-stu-id="262ca-413">This implementation will draw a filled square and circle.</span></span> <span data-ttu-id="262ca-414">Zostanie również wyświetlona wybrana wartość przez narysowanie obramowania wokół jednego kształtu lub drugiego.</span><span class="sxs-lookup"><span data-stu-id="262ca-414">It will also highlight the selected value by drawing a border around one shape or the other.</span></span>

     [!code-csharp[System.Windows.Forms.Design.DocumentDesigner#380](~/samples/snippets/csharp/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/CS/lightshapeselectioncontrol.cs#380)]
     [!code-vb[System.Windows.Forms.Design.DocumentDesigner#380](~/samples/snippets/visualbasic/VS_Snippets_Winforms/System.Windows.Forms.Design.DocumentDesigner/VB/lightshapeselectioncontrol.vb#380)]

## <a name="testing-your-custom-control-in-the-designer"></a><span data-ttu-id="262ca-415">Testowanie kontrolki niestandardowej w projektancie</span><span class="sxs-lookup"><span data-stu-id="262ca-415">Testing your Custom Control in the Designer</span></span>

<span data-ttu-id="262ca-416">W tym momencie można skompilować `MarqueeControlLibrary` projekt.</span><span class="sxs-lookup"><span data-stu-id="262ca-416">At this point, you can build the `MarqueeControlLibrary` project.</span></span> <span data-ttu-id="262ca-417">Przetestuj swoją implementację, tworząc kontrolkę, która dziedziczy `MarqueeControl` z klasy i korzystając z niej w formularzu.</span><span class="sxs-lookup"><span data-stu-id="262ca-417">Test your implementation by creating a control that inherits from the `MarqueeControl` class and using it on a form.</span></span>

### <a name="to-create-a-custom-marqueecontrol-implementation"></a><span data-ttu-id="262ca-418">Aby utworzyć niestandardową implementację MarqueeControl</span><span class="sxs-lookup"><span data-stu-id="262ca-418">To create a custom MarqueeControl implementation</span></span>

1. <span data-ttu-id="262ca-419">Otwórz `DemoMarqueeControl` w Projektant formularzy systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="262ca-419">Open `DemoMarqueeControl` in the Windows Forms Designer.</span></span> <span data-ttu-id="262ca-420">Spowoduje to utworzenie wystąpienia `DemoMarqueeControl` typu i wyświetlenie go w wystąpieniu `MarqueeControlRootDesigner` typu.</span><span class="sxs-lookup"><span data-stu-id="262ca-420">This creates an instance of the `DemoMarqueeControl` type and displays it in an instance of the `MarqueeControlRootDesigner` type.</span></span>

2. <span data-ttu-id="262ca-421">W **przyborniku**Otwórz kartę **składniki MarqueeControlLibrary** . Zobaczysz kontrolki `MarqueeText`idostępne do wyboru. `MarqueeBorder`</span><span class="sxs-lookup"><span data-stu-id="262ca-421">In the **Toolbox**, open the **MarqueeControlLibrary Components** tab. You will see the `MarqueeBorder` and `MarqueeText` controls available for selection.</span></span>

3. <span data-ttu-id="262ca-422">Przeciągnij wystąpienie `MarqueeBorder` kontrolki `DemoMarqueeControl` na powierzchnię projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-422">Drag an instance of the `MarqueeBorder` control onto the `DemoMarqueeControl` design surface.</span></span> <span data-ttu-id="262ca-423">Zadokuj tę `MarqueeBorder` kontrolkę z kontrolką nadrzędną.</span><span class="sxs-lookup"><span data-stu-id="262ca-423">Dock this `MarqueeBorder` control to the parent control.</span></span>

4. <span data-ttu-id="262ca-424">Przeciągnij wystąpienie `MarqueeText` kontrolki `DemoMarqueeControl` na powierzchnię projektu.</span><span class="sxs-lookup"><span data-stu-id="262ca-424">Drag an instance of the `MarqueeText` control onto the `DemoMarqueeControl` design surface.</span></span>

5. <span data-ttu-id="262ca-425">Skompiluj rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="262ca-425">Build the solution.</span></span>

6. <span data-ttu-id="262ca-426">Kliknij prawym przyciskiem `DemoMarqueeControl` myszy i z menu skrótów wybierz opcję **Uruchom test** , aby rozpocząć animację.</span><span class="sxs-lookup"><span data-stu-id="262ca-426">Right-click the `DemoMarqueeControl` and from the shortcut menu select the **Run Test** option to start the animation.</span></span> <span data-ttu-id="262ca-427">Kliknij przycisk **Zatrzymaj test** , aby zatrzymać animację.</span><span class="sxs-lookup"><span data-stu-id="262ca-427">Click **Stop Test** to stop the animation.</span></span>

7. <span data-ttu-id="262ca-428">Otwórz **formularz Form1** w widok Projekt.</span><span class="sxs-lookup"><span data-stu-id="262ca-428">Open **Form1** in Design view.</span></span>

8. <span data-ttu-id="262ca-429">Umieść dwie <xref:System.Windows.Forms.Button> kontrolki w formularzu.</span><span class="sxs-lookup"><span data-stu-id="262ca-429">Place two <xref:System.Windows.Forms.Button> controls on the form.</span></span> <span data-ttu-id="262ca-430">Nadaj mu `startButton` nazwę `stopButton`i i Zmień <xref:System.Windows.Forms.Control.Text%2A> wartości właściwości, aby odpowiednio **uruchomić** i **zatrzymać**.</span><span class="sxs-lookup"><span data-stu-id="262ca-430">Name them `startButton` and `stopButton`, and change the <xref:System.Windows.Forms.Control.Text%2A> property values to **Start** and **Stop**, respectively.</span></span>

9. <span data-ttu-id="262ca-431">Implementuj <xref:System.Windows.Forms.Control.Click> procedury obsługi zdarzeń dla obu <xref:System.Windows.Forms.Button> formantów.</span><span class="sxs-lookup"><span data-stu-id="262ca-431">Implement <xref:System.Windows.Forms.Control.Click> event handlers for both <xref:System.Windows.Forms.Button> controls.</span></span>

10. <span data-ttu-id="262ca-432">W **przyborniku**Otwórz kartę **składniki MarqueeControlTest** . Zobaczysz `DemoMarqueeControl` dostępne do wyboru.</span><span class="sxs-lookup"><span data-stu-id="262ca-432">In the **Toolbox**, open the **MarqueeControlTest Components** tab. You will see the `DemoMarqueeControl` available for selection.</span></span>

11. <span data-ttu-id="262ca-433">Przeciągnij wystąpienie `DemoMarqueeControl` na powierzchnię projektu **Form1** .</span><span class="sxs-lookup"><span data-stu-id="262ca-433">Drag an instance of `DemoMarqueeControl` onto the **Form1** design surface.</span></span>

12. <span data-ttu-id="262ca-434">W programach obsługi `Start` `Stop` `DemoMarqueeControl`zdarzeń wywołaj metody i w. <xref:System.Windows.Forms.Control.Click></span><span class="sxs-lookup"><span data-stu-id="262ca-434">In the <xref:System.Windows.Forms.Control.Click> event handlers, invoke the `Start` and `Stop` methods on the `DemoMarqueeControl`.</span></span>

```vb
Private Sub startButton_Click(sender As Object, e As System.EventArgs)
    Me.demoMarqueeControl1.Start()
End Sub 'startButton_Click

Private Sub stopButton_Click(sender As Object, e As System.EventArgs)
Me.demoMarqueeControl1.Stop()
End Sub 'stopButton_Click
```

```csharp
private void startButton_Click(object sender, System.EventArgs e)
{
    this.demoMarqueeControl1.Start();
}

private void stopButton_Click(object sender, System.EventArgs e)
{
    this.demoMarqueeControl1.Stop();
}
```

1. <span data-ttu-id="262ca-435">`MarqueeControlTest` Ustaw projekt jako projekt startowy i uruchom go.</span><span class="sxs-lookup"><span data-stu-id="262ca-435">Set the `MarqueeControlTest` project as the startup project and run it.</span></span> <span data-ttu-id="262ca-436">Zobaczysz formularz `DemoMarqueeControl`z.</span><span class="sxs-lookup"><span data-stu-id="262ca-436">You will see the form displaying your `DemoMarqueeControl`.</span></span> <span data-ttu-id="262ca-437">Kliknij przycisk **Uruchom** , aby rozpocząć animację.</span><span class="sxs-lookup"><span data-stu-id="262ca-437">Click the **Start** button to start the animation.</span></span> <span data-ttu-id="262ca-438">Powinieneś zobaczyć migający tekst i sygnalizatory poruszające się wokół obramowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-438">You should see the text flashing and the lights moving around the border.</span></span>

## <a name="next-steps"></a><span data-ttu-id="262ca-439">Następne kroki</span><span class="sxs-lookup"><span data-stu-id="262ca-439">Next Steps</span></span>

<span data-ttu-id="262ca-440">`MarqueeControlLibrary` Pokazuje prostą implementację formantów niestandardowych i skojarzonych projektantów.</span><span class="sxs-lookup"><span data-stu-id="262ca-440">The `MarqueeControlLibrary` demonstrates a simple implementation of custom controls and associated designers.</span></span> <span data-ttu-id="262ca-441">Ten przykład można zwiększyć na kilka sposobów:</span><span class="sxs-lookup"><span data-stu-id="262ca-441">You can make this sample more sophisticated in several ways:</span></span>

- <span data-ttu-id="262ca-442">Zmień wartości `DemoMarqueeControl` właściwości w projektancie.</span><span class="sxs-lookup"><span data-stu-id="262ca-442">Change the property values for the `DemoMarqueeControl` in the designer.</span></span> <span data-ttu-id="262ca-443">Dodaj więcej `MarqueBorder` kontrolek i Zadokuj je w wystąpieniach nadrzędnych, aby utworzyć zagnieżdżony efekt.</span><span class="sxs-lookup"><span data-stu-id="262ca-443">Add more `MarqueBorder` controls and dock them within their parent instances to create a nested effect.</span></span> <span data-ttu-id="262ca-444">Eksperymentuj z różnymi ustawieniami `UpdatePeriod` i właściwościami ze światłami.</span><span class="sxs-lookup"><span data-stu-id="262ca-444">Experiment with different settings for the `UpdatePeriod` and the light-related properties.</span></span>

- <span data-ttu-id="262ca-445">Twórz własne implementacje programu `IMarqueeWidget`.</span><span class="sxs-lookup"><span data-stu-id="262ca-445">Author your own implementations of `IMarqueeWidget`.</span></span> <span data-ttu-id="262ca-446">Można na przykład utworzyć migający znak "neon" lub animowany znak z wieloma obrazami.</span><span class="sxs-lookup"><span data-stu-id="262ca-446">You could, for example, create a flashing "neon sign" or an animated sign with multiple images.</span></span>

- <span data-ttu-id="262ca-447">Dalsze dostosowywanie środowiska czasu projektowania.</span><span class="sxs-lookup"><span data-stu-id="262ca-447">Further customize the design-time experience.</span></span> <span data-ttu-id="262ca-448">Można wypróbować więcej właściwości niż <xref:System.Windows.Forms.Control.Enabled%2A> i <xref:System.Windows.Forms.Control.Visible%2A>i dodać nowe właściwości.</span><span class="sxs-lookup"><span data-stu-id="262ca-448">You could try shadowing more properties than <xref:System.Windows.Forms.Control.Enabled%2A> and <xref:System.Windows.Forms.Control.Visible%2A>, and you could add new properties.</span></span> <span data-ttu-id="262ca-449">Dodaj nowe czasowniki projektanta, aby uprościć typowe zadania, takie jak dokowanie formantów podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="262ca-449">Add new designer verbs to simplify common tasks like docking child controls.</span></span>

- <span data-ttu-id="262ca-450">Licencjonowanie `MarqueeControl`.</span><span class="sxs-lookup"><span data-stu-id="262ca-450">License the `MarqueeControl`.</span></span> <span data-ttu-id="262ca-451">Aby uzyskać więcej informacji, zobacz [jak: Składniki i kontrolki](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/fe8b1eh9(v=vs.120))licencji.</span><span class="sxs-lookup"><span data-stu-id="262ca-451">For more information, see [How to: License Components and Controls](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/fe8b1eh9(v=vs.120)).</span></span>

- <span data-ttu-id="262ca-452">Kontroluj sposób serializacji formantów i sposób generowania kodu.</span><span class="sxs-lookup"><span data-stu-id="262ca-452">Control how your controls are serialized and how code is generated for them.</span></span> <span data-ttu-id="262ca-453">Aby uzyskać więcej informacji, zobacz [dynamiczne generowanie kodu źródłowego i kompilacja](../../reflection-and-codedom/dynamic-source-code-generation-and-compilation.md).</span><span class="sxs-lookup"><span data-stu-id="262ca-453">For more information, see [Dynamic Source Code Generation and Compilation](../../reflection-and-codedom/dynamic-source-code-generation-and-compilation.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="262ca-454">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="262ca-454">See also</span></span>

- <xref:System.Windows.Forms.UserControl>
- <xref:System.Windows.Forms.Design.ParentControlDesigner>
- <xref:System.Windows.Forms.Design.DocumentDesigner>
- <xref:System.ComponentModel.Design.IRootDesigner>
- <xref:System.ComponentModel.Design.DesignerVerb>
- <xref:System.Drawing.Design.UITypeEditor>
- <xref:System.ComponentModel.BackgroundWorker>
- <span data-ttu-id="262ca-455">[Instrukcje: Utwórz formant Windows Forms, który korzysta z funkcji czasu projektowania](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/307hck25(v=vs.120))</span><span class="sxs-lookup"><span data-stu-id="262ca-455">[How to: Create a Windows Forms Control That Takes Advantage of Design-Time Features](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/307hck25(v=vs.120))</span></span>
- <span data-ttu-id="262ca-456">[Rozszerzanie obsługi czasu projektowania](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/37899azc(v=vs.120))</span><span class="sxs-lookup"><span data-stu-id="262ca-456">[Extending Design-Time Support](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/37899azc(v=vs.120))</span></span>
- <span data-ttu-id="262ca-457">[Projektanci niestandardowi](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/h51z5c0x(v=vs.120))</span><span class="sxs-lookup"><span data-stu-id="262ca-457">[Custom Designers](https://docs.microsoft.com/previous-versions/visualstudio/visual-studio-2013/h51z5c0x(v=vs.120))</span></span>
