---
title: Zabezpieczenia LINQ to XML (Visual Basic)
ms.date: 07/20/2015
ms.assetid: d99b4af2-d447-4a3b-991b-6da0231a8637
ms.openlocfilehash: 5d15c6f88f0fb511e401a0896f92c894e3742061
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/23/2019
ms.locfileid: "54505828"
---
# <a name="linq-to-xml-security-visual-basic"></a><span data-ttu-id="e7487-102">Zabezpieczenia LINQ to XML (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="e7487-102">LINQ to XML Security (Visual Basic)</span></span>
<span data-ttu-id="e7487-103">W tym temacie opisano problemy dotyczące zabezpieczeń skojarzonych z LINQ to XML.</span><span class="sxs-lookup"><span data-stu-id="e7487-103">This topic describes security issues associated with LINQ to XML.</span></span> <span data-ttu-id="e7487-104">Ponadto zawiera pewne wskazówki łagodzenia zagrożenie bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="e7487-104">In addition, it provides some guidance for mitigating security exposure.</span></span>  
  
## <a name="linq-to-xml-security-overview"></a><span data-ttu-id="e7487-105">LINQ do XML-Przegląd zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="e7487-105">LINQ to XML Security Overview</span></span>  
 <span data-ttu-id="e7487-106">LINQ to XML zaprojektowano bardziej programowania wygody niż dla aplikacji po stronie serwera, z wymaganiami bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="e7487-106">LINQ to XML is designed more for programming convenience than for server-side applications with stringent security requirements.</span></span> <span data-ttu-id="e7487-107">Większość scenariuszy XML składają się z przetwarzania zaufanych dokumentów XML, a nie przetwarzania niezaufanych dokumentów XML, które są przekazywane do serwera.</span><span class="sxs-lookup"><span data-stu-id="e7487-107">Most XML scenarios consist of processing trusted XML documents, rather than processing untrusted XML documents that are uploaded to a server.</span></span> <span data-ttu-id="e7487-108">LINQ to XML jest zoptymalizowany pod kątem tych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="e7487-108">LINQ to XML is optimized for these scenarios.</span></span>  
  
 <span data-ttu-id="e7487-109">Jeśli musisz przetworzyć niezaufane dane z nieznanych źródeł, firma Microsoft zaleca użycie wystąpienia <xref:System.Xml.XmlReader> klasy, który został skonfigurowany tak, aby odfiltrować znanych XML atakom typu odmowa usługi (DoS).</span><span class="sxs-lookup"><span data-stu-id="e7487-109">If you must process untrusted data from unknown sources, Microsoft recommends that you use an instance of the <xref:System.Xml.XmlReader> class that has been configured to filter out known XML denial of service (DoS) attacks.</span></span>  
  
 <span data-ttu-id="e7487-110">Jeśli skonfigurowano <xref:System.Xml.XmlReader> uniknąć atakom typu odmowa usługi, umożliwia ten czytnik do wypełniania LINQ do drzewa XML i nadal korzystać z udoskonaleń dotyczących produktywności programisty LINQ to XML.</span><span class="sxs-lookup"><span data-stu-id="e7487-110">If you have configured an <xref:System.Xml.XmlReader> to mitigate denial of service attacks, you can use that reader to populate a LINQ to XML tree and still benefit from the programmer productivity enhancements of LINQ to XML.</span></span> <span data-ttu-id="e7487-111">Wiele technik środki zaradcze obejmują tworzenie czytelnicy skonfigurowanych w taki sposób, aby rozwiązać problem z zabezpieczeniami i następnie utworzenie wystąpienia drzewa XML przy użyciu skonfigurowanego czytnika.</span><span class="sxs-lookup"><span data-stu-id="e7487-111">Many mitigation techniques involve creating readers that are configured to mitigate the security issue, and then instantiating an XML tree through the configured reader.</span></span>  
  
 <span data-ttu-id="e7487-112">XML jest wewnętrznie narażony na ataki, ponieważ jest nieograniczona rozmiaru, głębi, rozmiar nazwy elementu i dokumentów.</span><span class="sxs-lookup"><span data-stu-id="e7487-112">XML is intrinsically vulnerable to denial of service attacks because documents are unbounded in size, depth, element name size, and more.</span></span> <span data-ttu-id="e7487-113">Niezależnie od tego, składnik, który umożliwia procesu XML możesz powinna zawsze być przygotowana do Kosza domeny aplikacji, jeśli używa zasobów.</span><span class="sxs-lookup"><span data-stu-id="e7487-113">Regardless of the component that you use to process XML, you should always be prepared to recycle the application domain if it uses excessive resources.</span></span>  
  
## <a name="mitigation-of-xml-xsd-xpath-and-xslt-attacks"></a><span data-ttu-id="e7487-114">Środki zaradcze, XML, XSD, XPath i ataki XSLT</span><span class="sxs-lookup"><span data-stu-id="e7487-114">Mitigation of XML, XSD, XPath, and XSLT Attacks</span></span>  
 <span data-ttu-id="e7487-115">LINQ to XML jest oparty na <xref:System.Xml.XmlReader> i <xref:System.Xml.XmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="e7487-115">LINQ to XML is built upon <xref:System.Xml.XmlReader> and <xref:System.Xml.XmlWriter>.</span></span> <span data-ttu-id="e7487-116">LINQ to XML obsługuje XSD i XPath za pośrednictwem metody rozszerzające w <xref:System.Xml.Schema?displayProperty=nameWithType> i <xref:System.Xml.XPath?displayProperty=nameWithType> przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="e7487-116">LINQ to XML supports XSD and XPath through extension methods in the <xref:System.Xml.Schema?displayProperty=nameWithType> and <xref:System.Xml.XPath?displayProperty=nameWithType> namespaces.</span></span> <span data-ttu-id="e7487-117">Za pomocą <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, i <xref:System.Xml.XmlWriter> klas w połączeniu z LINQ to XML, można wywołać XSLT do przekształcania drzew XML.</span><span class="sxs-lookup"><span data-stu-id="e7487-117">Using the <xref:System.Xml.XmlReader>, <xref:System.Xml.XPath.XPathNavigator>, and <xref:System.Xml.XmlWriter> classes in conjunction with LINQ to XML, you can invoke XSLT to transform XML trees.</span></span>  
  
 <span data-ttu-id="e7487-118">Jeśli pracujesz w środowisku mniej bezpieczna opcja, istnieje szereg problemów z zabezpieczeniami, które są skojarzone z danymi XML i korzystanie z klas w <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, i <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e7487-118">If you are operating in a less secure environment, there are a number of security issues that are associated with XML and the use of the classes in <xref:System.Xml?displayProperty=nameWithType>, <xref:System.Xml.Schema?displayProperty=nameWithType>, <xref:System.Xml.XPath?displayProperty=nameWithType>, and <xref:System.Xml.Xsl?displayProperty=nameWithType>.</span></span> <span data-ttu-id="e7487-119">Te problemy obejmują, ale nie są ograniczone do następujących:</span><span class="sxs-lookup"><span data-stu-id="e7487-119">These issues include, but are not limited to, the following:</span></span>  
  
-   <span data-ttu-id="e7487-120">XSD, XPath i XSLT są oparte na ciągach języków, w których można określić operacji, które to zajmować dużo czasu i pamięci.</span><span class="sxs-lookup"><span data-stu-id="e7487-120">XSD, XPath, and XSLT are string-based languages in which you can specify operations that consume a lot of time or memory.</span></span> <span data-ttu-id="e7487-121">Jest odpowiedzialny za programistów aplikacji, którzy pobierają ciągi XSD, XPath lub XSLT ze źródeł niezaufanych, aby sprawdzić, czy ciągi nie są złośliwe, lub do monitorowania i ograniczyć możliwość, że ocena te ciągi doprowadzi do nadmiernego systemu użycie zasobów.</span><span class="sxs-lookup"><span data-stu-id="e7487-121">It is the responsibility of application programmers who take XSD, XPath, or XSLT strings from untrusted sources to validate that the strings are not malicious, or to monitor and mitigate the possibility that evaluating these strings will lead to excessive system resource consumption.</span></span>  
  
-   <span data-ttu-id="e7487-122">Schematy XSD (w tym wbudowane schematy) są założenia podatne na ataki; nie należy zaakceptować schematów z niezaufanego źródła.</span><span class="sxs-lookup"><span data-stu-id="e7487-122">XSD schemas (including inline schemas) are inherently vulnerable to denial of service attacks; you should not accept schemas from untrusted sources.</span></span>  
  
-   <span data-ttu-id="e7487-123">XSD i XSLT może zawierać odwołania do innych plików, a tych odwołań może spowodować ataków międzystrefowego i między domenami.</span><span class="sxs-lookup"><span data-stu-id="e7487-123">XSD and XSLT can include references to other files, and such references can result in cross-zone and cross-domain attacks.</span></span>  
  
-   <span data-ttu-id="e7487-124">Podmiotów zewnętrznych w definicji DTD może spowodować ataków międzystrefowego i między domenami.</span><span class="sxs-lookup"><span data-stu-id="e7487-124">External entities in DTDs can result in cross-zone and cross-domain attacks.</span></span>  
  
-   <span data-ttu-id="e7487-125">Pliki DTD są narażone na ataki.</span><span class="sxs-lookup"><span data-stu-id="e7487-125">DTDs are vulnerable to denial of service attacks.</span></span>  
  
-   <span data-ttu-id="e7487-126">Wyjątkowo głębokiego dokumentów XML może stwarzać typu "odmowa" problemy z usługą; Możesz chcieć ograniczyć głębię dokumentów XML.</span><span class="sxs-lookup"><span data-stu-id="e7487-126">Exceptionally deep XML documents can pose denial of service issues; you might want to limit the depth of XML documents.</span></span>  
  
-   <span data-ttu-id="e7487-127">Nie są akceptowane składniki pomocnicze, takie jak <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, i <xref:System.Xml.XmlResolver> obiektów z niezaufanych zestawów.</span><span class="sxs-lookup"><span data-stu-id="e7487-127">Do not accept supporting components, such as <xref:System.Xml.NameTable>, <xref:System.Xml.XmlNamespaceManager>, and <xref:System.Xml.XmlResolver> objects, from untrusted assemblies.</span></span>  
  
-   <span data-ttu-id="e7487-128">Dane odczytu we fragmentach, aby uniknąć dużych dokumentów ataków.</span><span class="sxs-lookup"><span data-stu-id="e7487-128">Read data in chunks to mitigate large document attacks.</span></span>  
  
-   <span data-ttu-id="e7487-129">Bloki skryptów w arkuszy stylów XSLT może narazić liczby ataków.</span><span class="sxs-lookup"><span data-stu-id="e7487-129">Script blocks in XSLT style sheets can expose a number of attacks.</span></span>  
  
-   <span data-ttu-id="e7487-130">Sprawdź dokładnie, przed konstruowanie dynamiczne wyrażenia XPath.</span><span class="sxs-lookup"><span data-stu-id="e7487-130">Validate carefully before constructing dynamic XPath expressions.</span></span>  
  
## <a name="linq-to-xml-security-issues"></a><span data-ttu-id="e7487-131">LINQ do XML-problemy dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="e7487-131">LINQ to XML Security Issues</span></span>  
 <span data-ttu-id="e7487-132">Problemy z zabezpieczeniami, w tym temacie nie są prezentowane w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="e7487-132">The security issues in this topic are not presented in any particular order.</span></span> <span data-ttu-id="e7487-133">Wszystkie problemy są ważne i powinny być kierowane odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="e7487-133">All issues are important and should be addressed as appropriate.</span></span>  
  
 <span data-ttu-id="e7487-134">Pomyślne podniesienie poziomu uprawnień zapewnia złośliwemu zestawowi większą kontrolę nad jego środowiska.</span><span class="sxs-lookup"><span data-stu-id="e7487-134">A successful elevation of privilege attack gives a malicious assembly more control over its environment.</span></span> <span data-ttu-id="e7487-135">Pomyślne podniesienie poziomu uprawnień może spowodować ujawnienie danych, odmowę usługi i inne.</span><span class="sxs-lookup"><span data-stu-id="e7487-135">A successful elevation of privilege attack can result in disclosure of data, denial of service, and more.</span></span>  
  
 <span data-ttu-id="e7487-136">Aplikacje nie powinny ujawniać dane dla użytkowników, którzy nie jest uprawniony do wyświetlenia tych danych.</span><span class="sxs-lookup"><span data-stu-id="e7487-136">Applications should not disclose data to users who are not authorized to see that data.</span></span>  
  
 <span data-ttu-id="e7487-137">Atakom typu odmowa usługi spowodować, że XML parser lub programu LINQ do pliku XML z nadmiernej ilości pamięci lub czasu procesora CPU.</span><span class="sxs-lookup"><span data-stu-id="e7487-137">Denial of service attacks cause the XML parser or LINQ to XML to consume excessive amounts of memory or CPU time.</span></span> <span data-ttu-id="e7487-138">Atakom typu odmowa usługi są uważane za mniej poważne niż atakom powodującym podniesienie uprawnień lub ujawnieniem danych ataków.</span><span class="sxs-lookup"><span data-stu-id="e7487-138">Denial of service attacks are considered to be less severe than elevation of privilege attacks or disclosure of data attacks.</span></span> <span data-ttu-id="e7487-139">Są ważne w scenariuszu, w których serwer wymaga przetwarzania dokumentów XML ze źródeł niezaufanych.</span><span class="sxs-lookup"><span data-stu-id="e7487-139">However, they are important in a scenario where a server needs to process XML documents from untrusted sources.</span></span>  
  
### <a name="exceptions-and-error-messages-might-reveal-data"></a><span data-ttu-id="e7487-140">Wyjątki i komunikaty o błędach może spowodować ujawnienie danych</span><span class="sxs-lookup"><span data-stu-id="e7487-140">Exceptions and Error Messages Might Reveal Data</span></span>  
 <span data-ttu-id="e7487-141">Opis błędu może spowodować ujawnienie danych, takich jak dane przekształcanego, plików, nazwy lub szczegółów implementacji.</span><span class="sxs-lookup"><span data-stu-id="e7487-141">The description of an error might reveal data, such as the data being transformed, file names, or implementation details.</span></span> <span data-ttu-id="e7487-142">Nie należy uwidaczniać komunikaty o błędach dotyczące obiektów wywołujących, które nie są zaufane.</span><span class="sxs-lookup"><span data-stu-id="e7487-142">Error messages should not be exposed to callers that are not trusted.</span></span> <span data-ttu-id="e7487-143">Należy przechwytywać wszystkie błędy i raportowanie błędów przy użyciu własnych niestandardowych komunikatów o błędach.</span><span class="sxs-lookup"><span data-stu-id="e7487-143">You should catch all errors and report errors with your own custom error messages.</span></span>  
  
### <a name="do-not-call-codeaccesspermissionsassert-in-an-event-handler"></a><span data-ttu-id="e7487-144">Nie wywołuj CodeAccessPermissions.Assert w obsłudze zdarzeń</span><span class="sxs-lookup"><span data-stu-id="e7487-144">Do Not Call CodeAccessPermissions.Assert in an Event Handler</span></span>  
 <span data-ttu-id="e7487-145">Zestaw może mieć mniejsze lub większe uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="e7487-145">An assembly can have lesser or greater permissions.</span></span> <span data-ttu-id="e7487-146">Zestaw, który ma większe uprawnienia ma większą kontrolę nad komputerem i jego środowiska.</span><span class="sxs-lookup"><span data-stu-id="e7487-146">An assembly that has greater permissions has greater control over the computer and its environments.</span></span>  
  
 <span data-ttu-id="e7487-147">Jeśli kod w zestawie przy użyciu większe uprawnienia wywołuje <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> w program obsługi zdarzeń, a następnie XML drzewa jest przekazywany do złośliwemu zestawowi, ma ograniczone uprawnienia, mogą złośliwemu zestawowi spowodować, że zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="e7487-147">If code in an assembly with greater permissions calls <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler, and then the XML tree is passed to a malicious assembly that has restricted permissions, the malicious assembly can cause an event to be raised.</span></span> <span data-ttu-id="e7487-148">Ponieważ zdarzenia działa kod, który znajduje się w zestawie przy użyciu większe uprawnienia, to złośliwemu zestawowi może następnie działających z podwyższonym poziomem uprawnień.</span><span class="sxs-lookup"><span data-stu-id="e7487-148">Because the event runs code that is in the assembly with greater permissions, the malicious assembly would then be operating with elevated privileges.</span></span>  
  
 <span data-ttu-id="e7487-149">Firma Microsoft zaleca się, że użytkownik nigdy nie wywołują metody <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> w obsłudze zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="e7487-149">Microsoft recommends that you never call <xref:System.Security.CodeAccessPermission.Assert%2A?displayProperty=nameWithType> in an event handler.</span></span>  
  
### <a name="dtds-are-not-secure"></a><span data-ttu-id="e7487-150">Pliki DTD są, nie jest bezpieczny</span><span class="sxs-lookup"><span data-stu-id="e7487-150">DTDs are Not Secure</span></span>  
 <span data-ttu-id="e7487-151">Jednostki w definicji DTD natury nie są bezpieczne.</span><span class="sxs-lookup"><span data-stu-id="e7487-151">Entities in DTDs are inherently not secure.</span></span> <span data-ttu-id="e7487-152">Istnieje możliwość złośliwego dokumentu XML, który zawiera DTD, aby spowodować, że analizator składni do użycia wszystkich pamięci i czasu procesora CPU, co doprowadzi do odmowy usługi.</span><span class="sxs-lookup"><span data-stu-id="e7487-152">It is possible for a malicious XML document that contains a DTD to cause the parser to use all memory and CPU time, causing a denial of service attack.</span></span> <span data-ttu-id="e7487-153">W związku z tym w składniku LINQ to XML, przetwarzanie elementu DTD jest domyślnie wyłączona.</span><span class="sxs-lookup"><span data-stu-id="e7487-153">Therefore, in LINQ to XML, DTD processing is turned off by default.</span></span> <span data-ttu-id="e7487-154">Nie powinna obsługiwać pliki DTD ze źródeł niezaufanych.</span><span class="sxs-lookup"><span data-stu-id="e7487-154">You should not accept DTDs from untrusted sources.</span></span>  
  
 <span data-ttu-id="e7487-155">Przykładem zaakceptowania elementów DTD ze źródeł niezaufanych jest aplikacją sieci Web, który umożliwia użytkownikom w sieci Web można przekazać pliku XML, który odwołuje się do DTD i DTD pliku.</span><span class="sxs-lookup"><span data-stu-id="e7487-155">One example of accepting DTDs from untrusted sources is a Web application that allows Web users to upload an XML file that references a DTD and a DTD file.</span></span> <span data-ttu-id="e7487-156">Po rozpatrzeniu pliku złośliwy DTD można wykonać "odmowa usługi" na serwerze.</span><span class="sxs-lookup"><span data-stu-id="e7487-156">Upon validation of the file, a malicious DTD could execute a denial of service attack on your server.</span></span> <span data-ttu-id="e7487-157">Inny przykład akceptować pliki DTD ze źródeł niezaufanych to do odwołania DTD w udziale sieciowym, umożliwiającą dostęp anonimowy FTP.</span><span class="sxs-lookup"><span data-stu-id="e7487-157">Another example of accepting DTDs from untrusted sources is to reference a DTD on a network share that also allows anonymous FTP access.</span></span>  
  
### <a name="avoid-excessive-buffer-allocation"></a><span data-ttu-id="e7487-158">Unikaj nadmiernego buforu alokacji</span><span class="sxs-lookup"><span data-stu-id="e7487-158">Avoid Excessive Buffer Allocation</span></span>  
 <span data-ttu-id="e7487-159">Deweloperzy aplikacji należy pamiętać, że bardzo duże źródła danych może prowadzić do wyczerpania zasobów i ataki.</span><span class="sxs-lookup"><span data-stu-id="e7487-159">Application developers should be aware that extremely large data sources can lead to resource exhaustion and denial of service attacks.</span></span>  
  
 <span data-ttu-id="e7487-160">Jeśli złośliwy użytkownik przesyła lub przekazuje bardzo dużych dokumentów XML, może spowodować LINQ do pliku XML, korzystanie z zasobów systemowych nadmierne.</span><span class="sxs-lookup"><span data-stu-id="e7487-160">If a malicious user submits or uploads a very large XML document, it could cause LINQ to XML to consume excessive system resources.</span></span> <span data-ttu-id="e7487-161">Może to stanowić "odmowa usługi".</span><span class="sxs-lookup"><span data-stu-id="e7487-161">This can constitute a denial of service attack.</span></span> <span data-ttu-id="e7487-162">Aby tego uniknąć, można ustawić <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> właściwości i tworzenie czytnika, który następnie jest ograniczony do rozmiaru dokumentu, który można załadować.</span><span class="sxs-lookup"><span data-stu-id="e7487-162">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the size of document that it can load.</span></span> <span data-ttu-id="e7487-163">Czytnik jest następnie użyć do utworzenia drzewa XML.</span><span class="sxs-lookup"><span data-stu-id="e7487-163">You then use the reader to create the XML tree.</span></span>  
  
 <span data-ttu-id="e7487-164">Na przykład, jeśli wiesz, że maksymalny oczekiwany rozmiar dokumentów XML pochodzące z niezaufanego źródła będą mieć mniej niż 50 KB, ustaw <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> do 100 000.</span><span class="sxs-lookup"><span data-stu-id="e7487-164">For example, if you know that the maximum expected size of your XML documents coming from an untrusted source will be less than 50K bytes, set <xref:System.Xml.XmlReaderSettings.MaxCharactersInDocument%2A?displayProperty=nameWithType> to 100,000.</span></span> <span data-ttu-id="e7487-165">To nie będzie obciążać przetwarzanie dokumentów XML, a w tym samym czasie ograniczą typu "odmowa", gdzie może przekazać dokumenty zagrożeń usługi używające dużej ilości pamięci.</span><span class="sxs-lookup"><span data-stu-id="e7487-165">This will not encumber your processing of XML documents, and at the same time it will mitigate denial of service threats where documents might be uploaded that would consume large amounts of memory.</span></span>  
  
### <a name="avoid-excess-entity-expansion"></a><span data-ttu-id="e7487-166">Należy unikać rozszerzania jednostki nadmiarowe</span><span class="sxs-lookup"><span data-stu-id="e7487-166">Avoid Excess Entity Expansion</span></span>  
 <span data-ttu-id="e7487-167">Jednym z znanych atakom typu odmowa usługi podczas korzystania z DTD jest dokument, który powoduje, że rozszerzenie nadmierne jednostki.</span><span class="sxs-lookup"><span data-stu-id="e7487-167">One of the known denial of service attacks when using a DTD is a document that causes excessive entity expansion.</span></span> <span data-ttu-id="e7487-168">Aby tego uniknąć, można ustawić <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> właściwości i tworzenie czytnika, który następnie jest ograniczona w liczbę znaków, które wynikają z rozszerzania jednostki.</span><span class="sxs-lookup"><span data-stu-id="e7487-168">To prevent this, you can set the <xref:System.Xml.XmlReaderSettings.MaxCharactersFromEntities%2A?displayProperty=nameWithType> property, and create a reader that is then limited in the number of characters that result from entity expansion.</span></span> <span data-ttu-id="e7487-169">Czytnik jest następnie użyć do utworzenia drzewa XML.</span><span class="sxs-lookup"><span data-stu-id="e7487-169">You then use the reader to create the XML tree.</span></span>  
  
### <a name="limit-the-depth-of-the-xml-hierarchy"></a><span data-ttu-id="e7487-170">Limit głębokość hierarchii XML</span><span class="sxs-lookup"><span data-stu-id="e7487-170">Limit the Depth of the XML Hierarchy</span></span>  
 <span data-ttu-id="e7487-171">Jeden możliwe "odmowa usługi" jest w przypadku przesłania dokumentu, który ma nadmierną głębokość hierarchii.</span><span class="sxs-lookup"><span data-stu-id="e7487-171">One possible denial of service attack is when a document is submitted that has excessive depth of hierarchy.</span></span> <span data-ttu-id="e7487-172">Aby tego uniknąć, można opakować <xref:System.Xml.XmlReader> własne klasy, który zlicza głębokość elementów.</span><span class="sxs-lookup"><span data-stu-id="e7487-172">To prevent this, you can wrap a <xref:System.Xml.XmlReader> in your own class that counts the depth of elements.</span></span> <span data-ttu-id="e7487-173">Głębokość przekracza wstępnie rozsądny poziom, po zakończeniu przetwarzania złośliwy dokument.</span><span class="sxs-lookup"><span data-stu-id="e7487-173">If the depth exceeds a predetermined reasonable level, you can terminate the processing of the malicious document.</span></span>  
  
### <a name="protect-against-untrusted-xmlreader-or-xmlwriter-implementations"></a><span data-ttu-id="e7487-174">Ochronę przed niezaufanych, XmlReader lub implementacji XmlWriter</span><span class="sxs-lookup"><span data-stu-id="e7487-174">Protect Against Untrusted XmlReader or XmlWriter Implementations</span></span>  
 <span data-ttu-id="e7487-175">Administratorzy powinni sprawdzić, czy wszelkie zewnętrznie podane <xref:System.Xml.XmlReader> lub <xref:System.Xml.XmlWriter> implementacje mieć silne nazwy i został zarejestrowany w konfiguracji maszyny.</span><span class="sxs-lookup"><span data-stu-id="e7487-175">Administrators should verify that any externally supplied <xref:System.Xml.XmlReader> or <xref:System.Xml.XmlWriter> implementations have strong names and have been registered in the machine configuration.</span></span> <span data-ttu-id="e7487-176">Zapobiega to złośliwy kod udający odczytywania lub zapisywania wczytanie.</span><span class="sxs-lookup"><span data-stu-id="e7487-176">This prevents malicious code masquerading as a reader or writer from being loaded.</span></span>  
  
### <a name="periodically-free-objects-that-reference-xname"></a><span data-ttu-id="e7487-177">Okresowo zwalniać obiekty XName tego odwołania</span><span class="sxs-lookup"><span data-stu-id="e7487-177">Periodically Free Objects that Reference XName</span></span>  
 <span data-ttu-id="e7487-178">Aby chronić przed niektórych rodzajów ataków, programistom powinna zwolnić wszystkie obiekty, które odwołują się <xref:System.Xml.Linq.XName> obiektu w domenie aplikacji w regularnych odstępach czasu.</span><span class="sxs-lookup"><span data-stu-id="e7487-178">To protect against certain kinds of attacks, application programmers should free all objects that reference an <xref:System.Xml.Linq.XName> object in the application domain on a regular basis.</span></span>  
  
### <a name="protect-against-random-xml-names"></a><span data-ttu-id="e7487-179">Ochrona przed XML losowych nazw</span><span class="sxs-lookup"><span data-stu-id="e7487-179">Protect Against Random XML Names</span></span>  
 <span data-ttu-id="e7487-180">Aplikacje, które pobierają dane ze źródeł niezaufanych należy wziąć pod uwagę przy użyciu <xref:System.Xml.XmlReader> oznacza to otoczone niestandardowe kod, aby sprawdzić możliwość losowych nazw XML i przestrzenie nazw.</span><span class="sxs-lookup"><span data-stu-id="e7487-180">Applications that take data from untrusted sources should consider using an <xref:System.Xml.XmlReader> that is wrapped in custom code to inspect for the possibility of random XML names and namespaces.</span></span> <span data-ttu-id="e7487-181">W przypadku wykrycia tych losowych nazw XML i przestrzenie nazw aplikacji może następnie Zakończ działanie przetwarzania złośliwy dokument.</span><span class="sxs-lookup"><span data-stu-id="e7487-181">If such random XML names and namespaces are detected, the application can then terminate the processing of the malicious document.</span></span>  
  
 <span data-ttu-id="e7487-182">Można ograniczyć liczbę nazw w dowolnym danym nazw (w tym nazwy w żadnej przestrzeni nazw) limitowi uzasadnione.</span><span class="sxs-lookup"><span data-stu-id="e7487-182">You might want to limit the number of names in any given namespace (including names in no namespace) to a reasonable limit.</span></span>  
  
### <a name="annotations-are-accessible-by-software-components-that-share-a-linq-to-xml-tree"></a><span data-ttu-id="e7487-183">Adnotacje są dostępne dla składników oprogramowania, mających LINQ do drzewa XML</span><span class="sxs-lookup"><span data-stu-id="e7487-183">Annotations Are Accessible by Software Components that Share a LINQ to XML Tree</span></span>  
 <span data-ttu-id="e7487-184">LINQ to XML może służyć do tworzenia potoków przetwarzania, w których składników innej aplikacji obciążenia, sprawdź poprawność, zapytania, przekształcania, aktualizacji i zapisać dane XML, który jest przekazywany między składnikami jako drzew XML.</span><span class="sxs-lookup"><span data-stu-id="e7487-184">LINQ to XML could be used to build processing pipelines in which different application components load, validate, query, transform, update, and save XML data that is passed between components as XML trees.</span></span> <span data-ttu-id="e7487-185">Może to pomóc zoptymalizować wydajność, ponieważ obciążenie, ładowanie i wykonywanie serializacji obiektów do tekstu XML jest wykonywane tylko na końcu potoku.</span><span class="sxs-lookup"><span data-stu-id="e7487-185">This can help optimize performance, because the overhead of loading and serializing objects to XML text is done only at the ends of the pipeline.</span></span> <span data-ttu-id="e7487-186">Deweloperzy muszą należy jednak pamiętać, że wszystkie adnotacje i procedury obsługi zdarzeń utworzonych przez jeden składnik są dostępne dla innych składników.</span><span class="sxs-lookup"><span data-stu-id="e7487-186">Developers must be aware, however, that all annotations and event handlers created by one component are accessible to other components.</span></span> <span data-ttu-id="e7487-187">Można utworzyć szereg luk w zabezpieczeniach, jeśli składniki mają różne poziomy zaufania.</span><span class="sxs-lookup"><span data-stu-id="e7487-187">This can create a number of vulnerabilities if the components have different levels of trust.</span></span> <span data-ttu-id="e7487-188">Do tworzenia bezpiecznego potoki na mniej zaufanym składnikom, możesz serializować LINQ do obiektów XML do tekstu XML przed przekazaniem ich do niezaufany składnik.</span><span class="sxs-lookup"><span data-stu-id="e7487-188">To build secure pipelines across less trusted components, you must serialize LINQ to XML objects to XML text before passing the data to an untrusted component.</span></span>  
  
 <span data-ttu-id="e7487-189">Niektóre zabezpieczeń są udostępniane przez środowisko uruchomieniowe języka wspólnego (CLR).</span><span class="sxs-lookup"><span data-stu-id="e7487-189">Some security is provided by the common language runtime (CLR).</span></span> <span data-ttu-id="e7487-190">Na przykład składnik, który nie zawiera klasę prywatną nie może uzyskać dostępu adnotacje kluczach tej klasy.</span><span class="sxs-lookup"><span data-stu-id="e7487-190">For example, a component that does not include a private class cannot access annotations keyed by that class.</span></span> <span data-ttu-id="e7487-191">Jednak można usunąć adnotacji przez składniki, które nie mogą ich odczytać.</span><span class="sxs-lookup"><span data-stu-id="e7487-191">However, annotations can be deleted by components that cannot read them.</span></span> <span data-ttu-id="e7487-192">To może być używany jako manipulacją ataku.</span><span class="sxs-lookup"><span data-stu-id="e7487-192">This could be used as a tampering attack.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="e7487-193">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="e7487-193">See also</span></span>
- [<span data-ttu-id="e7487-194">Przewodnik programowania (LINQ to XML) (Visual Basic)</span><span class="sxs-lookup"><span data-stu-id="e7487-194">Programming Guide (LINQ to XML) (Visual Basic)</span></span>](../../../../visual-basic/programming-guide/concepts/linq/programming-guide-linq-to-xml.md)
