---
ms.openlocfilehash: 190bca720504535cb54e498ca8da23fbb6634ad4
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/23/2019
ms.locfileid: "61758430"
---
### <a name="currentculture-is-not-preserved-across-wpf-dispatcher-operations"></a><span data-ttu-id="0541e-101">CurrentCulture nie są zachowywane w operacji dyspozytora WPF</span><span class="sxs-lookup"><span data-stu-id="0541e-101">CurrentCulture is not preserved across WPF Dispatcher operations</span></span>

|   |   |
|---|---|
|<span data-ttu-id="0541e-102">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="0541e-102">Details</span></span>|<span data-ttu-id="0541e-103">Począwszy od programu .NET Framework 4.6, zmienia się na <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> lub <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> w ramach <xref:System.Windows.Threading.Dispatcher?displayProperty=name> zostaną utracone na końcu tej operacji dyspozytora.</span><span class="sxs-lookup"><span data-stu-id="0541e-103">Beginning in the .NET Framework 4.6, changes to <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> or <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> made within a <xref:System.Windows.Threading.Dispatcher?displayProperty=name> will be lost at the end of that dispatcher operation.</span></span> <span data-ttu-id="0541e-104">Podobnie, zmiany <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> lub <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> wprowadzone poza dyspozytora operacji nie zostaną odzwierciedlone po będzie działał. Praktycznie wypowiedzi, oznacza to, że <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> i <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> zmiany mogą nie przepływ między WPF UI wywołania zwrotne i inny kod w aplikacji WPF. Jest to spowodowane zmianę <xref:System.Threading.ExecutionContext?displayProperty=name> , dzięki któremu <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> i <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> mają być przechowywane na początku kontekstu wykonania za pomocą aplikacji przeznaczonych dla platformy .NET Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="0541e-104">Similarly, changes to <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> or <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> made outside of a Dispatcher operation may not be reflected when that operation executes.Practically speaking, this means that <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> changes may not flow between WPF UI callbacks and other code in a WPF application.This is due to a change in <xref:System.Threading.ExecutionContext?displayProperty=name> that causes <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> to be stored in the execution context beginning with apps targeting the .NET Framework 4.6.</span></span> <span data-ttu-id="0541e-105">Operacje dyspozytora WPF przechowywać kontekstu wykonania pozwala rozpocząć operację i przywrócić poprzedni kontekst, po zakończeniu operacji.</span><span class="sxs-lookup"><span data-stu-id="0541e-105">WPF dispatcher operations store the execution context used to begin the operation and restore the previous context when the operation is completed.</span></span> <span data-ttu-id="0541e-106">Ponieważ <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> i <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> są teraz częścią tego kontekstu, zmiany do nich w ramach operacji Dyspozytor nie są utrwalane poza wykonać operację.</span><span class="sxs-lookup"><span data-stu-id="0541e-106">Because <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> are now part of that context, changes to them within a dispatcher operation are not persisted outside of the operation.</span></span>|
|<span data-ttu-id="0541e-107">Sugestia</span><span class="sxs-lookup"><span data-stu-id="0541e-107">Suggestion</span></span>|<span data-ttu-id="0541e-108">Aplikacje, których obejmie ta zmiana może go obejść, przechowując żądaną <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> lub <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> w polu i ewidencjonowanie wszystkich dyspozytora operacji treści (w tym obsługi wywołania zwrotnego zdarzenia interfejsu użytkownika), poprawny <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> i <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> są ustawione.</span><span class="sxs-lookup"><span data-stu-id="0541e-108">Apps affected by this change may work around it by storing the desired <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> or <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> in a field and checking in all Dispatcher operation bodies (including UI event callback handlers) that the correct <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> and <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name> are set.</span></span> <span data-ttu-id="0541e-109">Alternatywnie kontekście wykonywania zmienić podstawowy ta zmiana WPF ma wpływ tylko na aplikacje przeznaczone dla .NET Framework 4.6 lub nowszej, stosując 4.5.2.Apps .NET Framework, którego platformą docelową jest program .NET Framework 4.6 lub nowszym może również współpracować można uniknąć tego podziału wokół tego, ustawiając następujące zgodności przełącznika:</span><span class="sxs-lookup"><span data-stu-id="0541e-109">Alternatively, because the ExecutionContext change underlying this WPF change only affects apps targeting the .NET Framework 4.6 or newer, this break can be avoided by targeting the .NET Framework 4.5.2.Apps that target .NET Framework 4.6 or later can also work around this by setting the following compatibility switch:</span></span><pre><code class="lang-csharp">AppContext.SetSwitch(&quot;Switch.System.Globalization.NoAsyncCurrentCulture&quot;, true);&#13;&#10;</code></pre><span data-ttu-id="0541e-110">Ten problem został rozwiązany przez WPF w programie .NET Framework 4.6.2.</span><span class="sxs-lookup"><span data-stu-id="0541e-110">This issue has been fixed by WPF in .NET Framework 4.6.2.</span></span> <span data-ttu-id="0541e-111">Również został rozwiązany w platform .NET, 4.6, 4.6.1 za pośrednictwem [KB 3139549](https://support.microsoft.com/kb/3139549).</span><span class="sxs-lookup"><span data-stu-id="0541e-111">It has also been fixed in .NET Frameworks 4.6, 4.6.1 through [KB 3139549](https://support.microsoft.com/kb/3139549).</span></span> <span data-ttu-id="0541e-112">Aplikacje przeznaczone dla .NET Framework 4.6 lub nowszy zostanie automatycznie pobrana właściwe zachowania w aplikacjach WPF — <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name> / <xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) będą zachowywane przez operacje dyspozytora.</span><span class="sxs-lookup"><span data-stu-id="0541e-112">Applications targeting .NET Framework 4.6 or later will automatically get the right behavior in WPF applications - <xref:System.Globalization.CultureInfo.CurrentCulture?displayProperty=name>/<xref:System.Globalization.CultureInfo.CurrentUICulture?displayProperty=name>) would be preserved across Dispatcher operations.</span></span>|
|<span data-ttu-id="0541e-113">Zakres</span><span class="sxs-lookup"><span data-stu-id="0541e-113">Scope</span></span>|<span data-ttu-id="0541e-114">Mały</span><span class="sxs-lookup"><span data-stu-id="0541e-114">Minor</span></span>|
|<span data-ttu-id="0541e-115">Wersja</span><span class="sxs-lookup"><span data-stu-id="0541e-115">Version</span></span>|<span data-ttu-id="0541e-116">4.6</span><span class="sxs-lookup"><span data-stu-id="0541e-116">4.6</span></span>|
|<span data-ttu-id="0541e-117">Typ</span><span class="sxs-lookup"><span data-stu-id="0541e-117">Type</span></span>|<span data-ttu-id="0541e-118">Przekierowanie</span><span class="sxs-lookup"><span data-stu-id="0541e-118">Retargeting</span></span>|
