---
ms.openlocfilehash: 3709b9e694011666cebcb0ae09fbc838f65967af
ms.sourcegitcommit: e02d17b2cf9c1258dadda4810a5e6072a0089aee
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/01/2020
ms.locfileid: "85614866"
---
### <a name="wpf-grid-allocation-of-space-to-star-columns"></a><span data-ttu-id="8580c-101">Alokacja siatki w usłudze WPF do kolumn w postaci gwiazdek</span><span class="sxs-lookup"><span data-stu-id="8580c-101">WPF Grid allocation of space to star-columns</span></span>

#### <a name="details"></a><span data-ttu-id="8580c-102">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="8580c-102">Details</span></span>

<span data-ttu-id="8580c-103">Począwszy od .NET Framework 4,7, WPF zastępuje algorytm <xref:System.Windows.Controls.Grid> używany do przydzielania przestrzeni do \* kolumn.</span><span class="sxs-lookup"><span data-stu-id="8580c-103">Starting with the .NET Framework 4.7, WPF replaces the algorithm that <xref:System.Windows.Controls.Grid> uses to allocate space to \*-columns.</span></span> <span data-ttu-id="8580c-104">Spowoduje to zmianę rzeczywistej szerokości przypisanej do \* kolumn w kilku przypadkach:</span><span class="sxs-lookup"><span data-stu-id="8580c-104">This will change the actual width assigned to \*-columns in a number of cases:</span></span>

- <span data-ttu-id="8580c-105">Gdy co najmniej jedna \* kolumna ma także minimalną lub maksymalną szerokość, która zastępuje proporcjonalną alokację dla tego kolum.</span><span class="sxs-lookup"><span data-stu-id="8580c-105">When one or more \*-columns also have a minimum or maximum width that overrides the proportional allocation for that colum.</span></span> <span data-ttu-id="8580c-106">(Minimalna szerokość może pochodzić od jawnej deklaracji MinWidth lub z niejawnego minimum uzyskanego z zawartości kolumny.</span><span class="sxs-lookup"><span data-stu-id="8580c-106">(The minimum width can derive from an explicit MinWidth declaration, or from an implicit minimum obtained from the column's content.</span></span> <span data-ttu-id="8580c-107">Maksymalną szerokość można zdefiniować jawnie, z deklaracji MaxWidth.)</span><span class="sxs-lookup"><span data-stu-id="8580c-107">The maximum width can only be defined explicitly, from a MaxWidth declaration.)</span></span>
- <span data-ttu-id="8580c-108">Gdy co najmniej jedna \* kolumna deklaruje bardzo dużą \* wagę, większą niż 10 ^ Karat.</span><span class="sxs-lookup"><span data-stu-id="8580c-108">When one or more \*-columns declare an extremely large \*-weight, greater than 10^298.</span></span>
- <span data-ttu-id="8580c-109">Gdy \* wagi są wystarczająco różne, aby napotkać niestabilność zmiennoprzecinkową (przepełnienie, niedomiarowe, utrata dokładności).</span><span class="sxs-lookup"><span data-stu-id="8580c-109">When the \*-weights are sufficiently different to encounter floating-point instability (overflow, underflow, loss of precision).</span></span>
- <span data-ttu-id="8580c-110">Gdy jest włączone zaokrąglenie układu, a efektywne wyświetlanie DPI jest wystarczająco wysokie.</span><span class="sxs-lookup"><span data-stu-id="8580c-110">When layout rounding is enabled, and the effective display DPI is sufficiently high.</span></span>
<span data-ttu-id="8580c-111">W pierwszych dwóch przypadkach szerokość wyprodukowanych przez nowy algorytm może być znacząco różna od tych, które zostały utworzone przez stary algorytm; w ostatnim przypadku różnica będzie wynosić co najwyżej jeden lub dwa piksele.</span><span class="sxs-lookup"><span data-stu-id="8580c-111">In the first two cases, the widths produced by the new algorithm can be significantly different from those produced by the old algorithm; in the last case, the difference will be at most one or two pixels.</span></span><p/><span data-ttu-id="8580c-112">Nowy algorytm naprawia kilka usterek obecnych w starym algorytmie:</span><span class="sxs-lookup"><span data-stu-id="8580c-112">The new algorithm fixes several bugs present in the old algorithm:</span></span>

- <span data-ttu-id="8580c-113">Całkowita alokacja do kolumn może przekroczyć szerokość siatki.</span><span class="sxs-lookup"><span data-stu-id="8580c-113">Total allocation to columns can exceed the Grid's width.</span></span> <span data-ttu-id="8580c-114">Taka sytuacja może wystąpić, gdy przydzielasz miejsce do kolumny, której udział proporcjonalny jest mniejszy niż rozmiar minimalny.</span><span class="sxs-lookup"><span data-stu-id="8580c-114">This can occur when allocating space to a column whose proportional share is less than its minimum size.</span></span> <span data-ttu-id="8580c-115">Algorytm przydziela minimalny rozmiar, co zmniejsza ilość miejsca dostępnego dla innych kolumn.</span><span class="sxs-lookup"><span data-stu-id="8580c-115">The algorithm allocates the minimum size, which decreases the space available to other columns.</span></span> <span data-ttu-id="8580c-116">Jeśli nie ma \* kolumn do przydzielenia, całkowita alokacja będzie zbyt duża.</span><span class="sxs-lookup"><span data-stu-id="8580c-116">If there are no \*-columns left to allocate, the total allocation will be too large.</span></span>
- <span data-ttu-id="8580c-117">Całkowita Alokacja może być krótsza od szerokości siatki.</span><span class="sxs-lookup"><span data-stu-id="8580c-117">Total allocation can fall short of the Grid's width.</span></span> <span data-ttu-id="8580c-118">Jest to podwójny problem, który należy #1, powstały podczas alokowania do kolumny, której udział proporcjonalny jest większy niż jego maksymalny rozmiar, bez \* kolumn pozostały do wykonania zapasu.</span><span class="sxs-lookup"><span data-stu-id="8580c-118">This is the dual problem to #1, arising when allocating to a column whose proportional share is greater than its maximum size, with no \*-columns left to take up the slack.</span></span>
- <span data-ttu-id="8580c-119">Dwie \* kolumny mogą otrzymywać alokacje nieproporcjonalne do ich \* wag.</span><span class="sxs-lookup"><span data-stu-id="8580c-119">Two \*-columns can receive allocations not proportional to their \*-weights.</span></span> <span data-ttu-id="8580c-120">Jest to łagodniejsza wersja #1/#2, powstała podczas przydzielania do \* kolumn a, b i C (w tej kolejności), gdzie udział proporcjonalny B narusza jego minimalne (lub maks.) ograniczenie.</span><span class="sxs-lookup"><span data-stu-id="8580c-120">This is a milder version of #1/#2, arising when allocating to \*-columns A, B, and C (in that order), where B's proportional share violates its min (or max) constraint.</span></span> <span data-ttu-id="8580c-121">Jak wspomniano powyżej, spowoduje to zmianę dostępnego miejsca na kolumnę C, która jest mniej (lub większa) proporcjonalną alokacją od,</span><span class="sxs-lookup"><span data-stu-id="8580c-121">As above, this changes the space available to column C, who gets less (or more) proportional allocation than A did,</span></span>
- <span data-ttu-id="8580c-122">Kolumny mające bardzo duże wagi ( &gt; 10 ^ Karat) są traktowane jak w przypadku wagi 10 ^.</span><span class="sxs-lookup"><span data-stu-id="8580c-122">Columns with extremely large weights (&gt; 10^298) are all treated as if they had weight 10^298.</span></span> <span data-ttu-id="8580c-123">Proporcjonalne różnice między nimi (i między kolumnami o nieco mniejszych wagach) nie są honorowane.</span><span class="sxs-lookup"><span data-stu-id="8580c-123">Proportional differences between them (and between columns with slightly smaller weights) are not honored.</span></span>
- <span data-ttu-id="8580c-124">Kolumny z inifinte wag nie są poprawnie obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="8580c-124">Columns with inifinte weights are not handled correctly.</span></span> <span data-ttu-id="8580c-125">[W rzeczywistości nie można ustawić wagi na nieskończoność, ale jest to sztuczne ograniczenie.</span><span class="sxs-lookup"><span data-stu-id="8580c-125">[Actually you can't set a weight to Infinity, but this is an artificial restriction.</span></span> <span data-ttu-id="8580c-126">Kod alokacji próbował go obsłużyć, ale wykonuje złe zadanie.]</span><span class="sxs-lookup"><span data-stu-id="8580c-126">The allocation code was trying to handle it, but doing a bad job.]</span></span>
- <span data-ttu-id="8580c-127">Kilka drobnych problemów podczas unikania przepełnienia, pośrednika, utraty dokładności i podobnych problemów zmiennoprzecinkowych.</span><span class="sxs-lookup"><span data-stu-id="8580c-127">Several minor problems while avoiding overflow, underflow, loss of precision and similar floating-point issues.</span></span>
- <span data-ttu-id="8580c-128">Korekty dotyczące zaokrąglania układu są nieprawidłowe przy wystarczająco wysokiej rozdzielczości DPI.</span><span class="sxs-lookup"><span data-stu-id="8580c-128">Adjustments for layout rounding are incorrect at sufficiently high DPI.</span></span>
<span data-ttu-id="8580c-129">Nowy algorytm daje wyniki, które spełniają następujące kryteria:</span><span class="sxs-lookup"><span data-stu-id="8580c-129">The new algorithm produces results that meet the following criteria:</span></span><p/><span data-ttu-id="8580c-130">A.</span><span class="sxs-lookup"><span data-stu-id="8580c-130">A.</span></span> <span data-ttu-id="8580c-131">Rzeczywista szerokość przypisana do kolumny \*-nigdy nie jest mniejsza niż jej minimalna szerokość ani większa niż jej maksymalna szerokość.</span><span class="sxs-lookup"><span data-stu-id="8580c-131">The actual width assigned to a \*-column is never less than its minimum width nor greater than its maximum width.</span></span><br/><span data-ttu-id="8580c-132">B.</span><span class="sxs-lookup"><span data-stu-id="8580c-132">B.</span></span> <span data-ttu-id="8580c-133">Każda <em>kolumna, która nie ma przypisanej minimalnej lub maksymalnej szerokości, ma przypisaną szerokość proporcjonalną do jej <em>wagi. Aby były precyzyjne, jeśli dwie kolumny są zadeklarowane z szerokością x</em> i y</em> odpowiednio, a żadna kolumna nie otrzymuje minimalnej lub maksymalnej szerokości, rzeczywiste szerokości v i w są przypisane do kolumn są w tej samej proporcji: v/w = = x/y.</span><span class="sxs-lookup"><span data-stu-id="8580c-133">Each <em>-column that is not assigned its minimum or maximum width is assigned a width proportional to its <em>-weight. To be precise, if two columns are declared with width x</em> and y</em> respectively, and if neither column receives its minimum or maximum width, the actual widths v and w assigned to the columns are in the same proportion: v / w == x / y.</span></span><br/><span data-ttu-id="8580c-134">C.</span><span class="sxs-lookup"><span data-stu-id="8580c-134">C.</span></span> <span data-ttu-id="8580c-135">Łączna szerokość przypisana do &quot; kolumn proporcjonalnych &quot; \* jest równa ilości dostępnego miejsca po przydzieleniu do ograniczonych kolumn (stałych, autoi \* -kolumn, które mają przydzieloną minimalną lub maksymalną szerokość).</span><span class="sxs-lookup"><span data-stu-id="8580c-135">The total width allocated to &quot;proportional&quot; \*-columns is equal to the space available after allocating to the constrained columns (fixed, auto, and \*-columns that are allocated their min or max width).</span></span> <span data-ttu-id="8580c-136">Może to być zero, na przykład jeśli suma minimalnej szerokości przekracza szerokość availbable siatki.</span><span class="sxs-lookup"><span data-stu-id="8580c-136">This might be zero, for instance if the sum of the minimum widths exceeds the Grid's availbable width.</span></span><br/><span data-ttu-id="8580c-137">D.</span><span class="sxs-lookup"><span data-stu-id="8580c-137">D.</span></span> <span data-ttu-id="8580c-138">Wszystkie te instrukcje mają być interpretowane w odniesieniu do &quot; idealnego &quot; układu.</span><span class="sxs-lookup"><span data-stu-id="8580c-138">All these statements are to be interpreted with respect to the &quot;ideal&quot; layout.</span></span> <span data-ttu-id="8580c-139">Gdy zaokrąglanie układu jest stosowane, rzeczywiste szerokości mogą różnić się od idealnej szerokości o jeden piksel.</span><span class="sxs-lookup"><span data-stu-id="8580c-139">When layout rounding is in effect, the actual widths can differ from the ideal widths by as much as one pixel.</span></span><br/><span data-ttu-id="8580c-140">Stary algorytm honoruje (A), ale nie mógł przestrzegać innych kryteriów w przypadkach przedstawionych powyżej.</span><span class="sxs-lookup"><span data-stu-id="8580c-140">The old algorithm honored (A) but failed to honor the other criteria in the cases outlined above.</span></span><p/><span data-ttu-id="8580c-141">Wszystkie informacje dotyczące kolumn i szerokości w tym artykule mają zastosowanie również do wierszy i wysokości.</span><span class="sxs-lookup"><span data-stu-id="8580c-141">Everything said about columns and widths in this article applies as well to rows and heights.</span></span>

#### <a name="suggestion"></a><span data-ttu-id="8580c-142">Sugestia</span><span class="sxs-lookup"><span data-stu-id="8580c-142">Suggestion</span></span>

<span data-ttu-id="8580c-143">Domyślnie aplikacje przeznaczone dla wersji .NET Framework rozpoczynające się od .NET Framework 4,7 będą widziały nowy algorytm, natomiast aplikacje przeznaczone dla .NET Framework 4.6.2 lub starszych wersji będą widzieć stary algorytm.</span><span class="sxs-lookup"><span data-stu-id="8580c-143">By default, apps that target versions of the .NET Framework starting with the .NET Framework 4.7 will see the new algorithm, while apps that target the .NET Framework 4.6.2 or earlier versions will see the old algorithm.</span></span><p/><span data-ttu-id="8580c-144">Aby zastąpić wartość domyślną, użyj następującego ustawienia konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="8580c-144">To override the default, use the following configuration setting:</span></span>

<pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>

<span data-ttu-id="8580c-145">Wartość `true` wybiera stary algorytm, `false` wybiera nowy algorytm.</span><span class="sxs-lookup"><span data-stu-id="8580c-145">The value `true` selects the old algorithm, `false` selects the new algorithm.</span></span>

| <span data-ttu-id="8580c-146">Nazwa</span><span class="sxs-lookup"><span data-stu-id="8580c-146">Name</span></span>    | <span data-ttu-id="8580c-147">Wartość</span><span class="sxs-lookup"><span data-stu-id="8580c-147">Value</span></span>       |
|:--------|:------------|
| <span data-ttu-id="8580c-148">Zakres</span><span class="sxs-lookup"><span data-stu-id="8580c-148">Scope</span></span>   | <span data-ttu-id="8580c-149">Mały</span><span class="sxs-lookup"><span data-stu-id="8580c-149">Minor</span></span>       |
| <span data-ttu-id="8580c-150">Wersja</span><span class="sxs-lookup"><span data-stu-id="8580c-150">Version</span></span> | <span data-ttu-id="8580c-151">4,7</span><span class="sxs-lookup"><span data-stu-id="8580c-151">4.7</span></span>         |
| <span data-ttu-id="8580c-152">Typ</span><span class="sxs-lookup"><span data-stu-id="8580c-152">Type</span></span>    | <span data-ttu-id="8580c-153">Przekierowanie</span><span class="sxs-lookup"><span data-stu-id="8580c-153">Retargeting</span></span> |
