---
ms.openlocfilehash: 79a251f3d08a253db2e1a805113f46f83c6a9410
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/15/2020
ms.locfileid: "68235541"
---
### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>WPF Grid alokacji miejsca do kolumn gwiazd

|   |   |
|---|---|
|Szczegóły|Począwszy od .NET Framework 4.7, WPF <xref:System.Windows.Controls.Grid> WPF zastępuje algorytm, który używa do przydzielania miejsca do *-kolumny. Spowoduje to zmianę rzeczywistej szerokości przypisanej do *-kolumn w wielu przypadkach:<ul><li>Gdy jedna lub więcej *-kolumn ma również minimalną lub maksymalną szerokość, która zastępuje proporcjonalną alokację dla tego colum. (Minimalna szerokość może wynikać z jawnej deklaracji MinWidth lub z niejawnego minimum uzyskanego z zawartości kolumny. Maksymalna szerokość może być zdefiniowana tylko jawnie, z deklaracji MaxWidth.)</li><li>Gdy jedna lub więcej *-kolumn deklaruje bardzo dużą *-wagę, większą niż 10^298.</li><li>Gdy *-wagi są wystarczająco różne, aby napotkać zmiennoprzecinkowy niestabilność (przepełnienie, niedopełnienie, utrata precyzji).</li><li>Gdy zaokrąglanie układu jest włączone, a efektywny wyświetlacz DPI jest wystarczająco wysoki.</li></ul>W pierwszych dwóch przypadkach szerokości wytwarzane przez nowy algorytm mogą znacznie różnić się od tych produkowanych przez stary algorytm; w ostatnim przypadku różnica będzie wynosić co najwyżej jeden lub dwa piksele.<p/>Nowy algorytm naprawia kilka błędów obecnych w starym algorytmie:<ol><li>Całkowita alokacja do kolumn może przekroczyć szerokość siatki. Może to wystąpić podczas przydzielania miejsca do kolumny, której udział proporcjonalny jest mniejszy niż jego minimalny rozmiar. Algorytm przydziela minimalny rozmiar, co zmniejsza miejsce dostępne dla innych kolumn. Jeśli nie ma żadnych *-kolumn do przydzielenia, całkowita alokacja będzie zbyt duża.</li><li>Całkowita alokacja może być niesadna szerokości siatki. Jest to podwójny problem do #1, powstające podczas przydzielania do kolumny, której udział proporcjonalny jest większy niż jego maksymalny rozmiar, bez *-kolumn w lewo do podjęcia luzu.</li><li>Dwie *-kolumny mogą odbierać alokacje nie proporcjonalne do ich *-wagi. Jest to łagodniejsza wersja #1/#2, powstająca podczas przydzielania do *-kolumn A, B i C (w tej kolejności), gdzie proporcjonalna część B narusza jego minimalne (lub max) ograniczenie. Jak wyżej, zmienia to miejsce dostępne dla kolumny C, która otrzymuje mniej (lub więcej) proporcjonalnej alokacji niż A,</li><li>Kolumny o bardzo dużych&gt; ciężarach ( 10^298) są traktowane tak, jakby miały wagę 10^298. Proporcjonalne różnice między nimi (i między kolumnami o nieco mniejszych wagach) nie są honorowane.</li><li>Kolumny z obciążami inifinte nie są obsługiwane poprawnie. [W rzeczywistości nie można ustawić wagi na Nieskończoność, ale jest to sztuczne ograniczenie. Kod alokacji próbował go obsłużyć, ale wykonuje złą robotę.]</li><li>Kilka drobnych problemów przy jednoczesnym unikaniu przepełnienia, niedopełnienia, utraty precyzji i podobnych problemów zmiennoprzecinkowych.</li><li>Korekty zaokrąglania układu są niepoprawne przy wystarczająco wysokiej rozdzielczości DPI.</li></ol>Nowy algorytm daje wyniki, które spełniają następujące kryteria:<p/>A. Rzeczywista szerokość przypisana do *-kolumny nigdy nie jest mniejsza niż jej minimalna szerokość ani większa niż jej maksymalna szerokość.<br/>B. Każdej <em>kolumnie, która nie jest przypisana jej minimalna lub maksymalna szerokość jest przypisana szerokość proporcjonalna do jego <em>wagi. Aby być precyzyjnym, jeśli dwie kolumny są zadeklarowane</em> odpowiednio z szerokością x i y,</em> a żadna kolumna nie otrzyma swojej minimalnej lub maksymalnej szerokości, rzeczywiste szerokości v i w przypisane do kolumn są w tej samej proporcji: v / w == x / y.<br/>C. Całkowita szerokość przydzielona&quot; proporcjonalnym &quot;*-kolumnom jest równa przestrzeni dostępnej po przydzieleniu do kolumn umocowanych (kolumn stałych, automatycznych i *, które są alokowane ich minimalną lub maksymalną szerokością). Może to być zero, na przykład jeśli suma minimalnych szerokości przekracza szerokość dostępne grid.<br/>D. Wszystkie te stwierdzenia należy interpretować w &quot;&quot; odniesieniu do idealnego układu. Gdy zaokrąglanie układu jest w mocy, rzeczywiste szerokości mogą różnić się od idealnych szerokości nawet o jeden piksel.<br/>Stary algorytm honorowane (A), ale nie do przestrzegania innych kryteriów w przypadkach opisanych powyżej.<p/>Wszystko, co powiedziano o kolumnach i szerokościach w tym artykule, dotyczy również wierszy i wysokości.|
|Sugestia|Domyślnie aplikacje, które docelowe wersje programu .NET Framework, począwszy od .NET Framework 4.7 zobaczy nowy algorytm, podczas gdy aplikacje, które są przeznaczone dla .NET Framework 4.6.2 lub wcześniejszych wersji zobaczą stary algorytm.<p/>Aby zastąpić wartość domyślną, użyj następującego ustawienia konfiguracji:<pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Wartość <code>true</code> wybiera stary algorytm, <code>false</code> wybiera nowy algorytm.|
|Zakres|Mały|
|Wersja|4.7|
|Typ|Przekierowanie|
