### <a name="wpf-grid-allocation-of-space-to-star-columns"></a>Alokacja miejsca na gwiazdkę kolumny siatki WPF

|   |   |
|---|---|
|Szczegóły|Począwszy od .NET Framework 4.7 WPF zastępuje algorytm który <xref:System.Windows.Controls.Grid> użyje do przydzielenia miejsca na *-kolumn. Spowoduje to zmiany rzeczywistej szerokość przypisane do *-kolumn w niektórych przypadkach:<ul><li>Jeśli co najmniej jeden *-kolumny również mają minimalną lub maksymalną szerokość zastępujący proporcjonalne alokacji dla tej kolumny. (Minimalna szerokość może pochodzić z jawnej deklaracji wartości elementu MinWidth lub niejawne minimum uzyskane z zawartości kolumny. Maksymalna szerokość można zdefiniować tylko jawnie, z deklaracji MaxWidth.)</li><li>Gdy co najmniej jeden *-kolumn zadeklarować bardzo dużą *-wagi większe niż 10 ^ 298.</li><li>Gdy *-wag różnią się wystarczająco wystąpić niestabilność liczb zmiennoprzecinkowych (przepełnienie, niedopełnienie, zmniejszenie precyzji).</li><li>Po włączeniu zaokrąglania układu, i jest wystarczająco duża zmiana rozdzielczości DPI wyświetlacza skuteczne.</li></ul>W przypadku dwóch pierwszych szerokości utworzonego przez nowy algorytm może być znacznie różni się od wyprodukowane przez algorytm starego; w ostatnim przypadku różnica będzie co najwyżej jeden lub dwa pikseli.<p/>Nowy algorytm rozwiązuje kilka usterek w starego algorytmu:<ol><li>Suma alokacji kolumny może być dłuższa niż szerokość siatki. Taka sytuacja może wystąpić, gdy przydzielania miejsca do kolumny, których proporcjonalny udział jest mniejsza niż rozmiar minimalny. Algorytm przydziela minimalny rozmiar, co obniża miejsce dostępne dla innych kolumn. Jeśli istnieją nie *-kolumny w lewo do przydzielenia, całkowitej alokacji będzie zbyt duży.</li><li>Całkowita liczba alokacji można spełniają szerokość siatki. Jest to problem podwójną # 1, powstające po przydzieleniu z kolumną których proporcjonalny udział jest większy niż maksymalny rozmiar, których nie *-kolumny w lewo do podjęcia zapas czasu.</li><li>Dwa *-kolumny może odbierać alokacje nie była proporcjonalna do ich *-wagi. Jest to wersja łagodniejsze z #1 / #2, powstałe podczas przydzielania do *-kolumn A, B i C (w tej kolejności), gdzie proporcjonalny udział B narusza ograniczenie min (lub max). Jako powyżej, spowoduje to zmianę miejsca do kolumny C, który pobiera mniej (lub więcej) alokacji proporcjonalne niż A,</li><li>Kolumny o wagach bardzo duże (&gt; 10 ^ 298) są traktowane wszystkie jak gdyby wagę 10 ^ 298. Nie są uznawane proporcjonalne różnice między nimi (i między kolumnami o wagach nieco mniejsze).</li><li>Kolumny o wagach inifinte nie są prawidłowo obsługiwane. [Faktycznie nie można ustawić wagę do nieskończoności, ale jest to ograniczenie sztuczne. Kod alokacji próbował obsługi, ale wykonanie zły pracy.]</li><li>Kilka drobne problemy podczas uniknięcia przepełnienia, niedopełnienie, utrata dokładności i podobne problemy liczb zmiennoprzecinkowych.</li><li>Dostosowania układu zaokrąglania są nieprawidłowe w wystarczającym stopniu wysokiej rozdzielczości DPI.</li></ol>Nowy algorytm tworzy wyniki, które spełniają następujące kryteria:<p/>A. Rzeczywista szerokość przypisane do *-kolumny nigdy nie jest mniejsza niż minimalna szerokość ani większa niż maksymalna szerokość.<br/>B. Każdy <em>-kolumny, która nie jest przypisany jego minimalnej lub maksymalnej szerokości jest przypisany szerokości proporcjonalny do jego <em>-wagi. Aby była precyzyjna, jeśli dwie kolumny są deklarowane jako szerokość x</em> i y</em> odpowiednio i jeśli żadna kolumny odbiera minimalnej lub maksymalnej szerokości, v rzeczywiste szerokości i przypisane do kolumn w są w tej samej proporcji: v / w == x / y.<br/>C. Łączna szerokość przydzielone do &quot;proporcjonalny&quot; *-kolumn jest taki sam, jak dostępne miejsce po przydzieleniu do ograniczonego kolumn (stałej, auto, i *-kolumn, które są przydzielane ich szerokość min lub max). Może to być wartość zero, na przykład jeśli sumę minimalnej szerokości przekracza szerokość availbable siatki.<br/>D. Te instrukcje są interpretowane w odniesieniu do &quot;idealne&quot; układu. Gdy zaokrąglania układ jest włączone, rzeczywiste szerokości może się różnić od szerokości idealne jak jeden piksel.<br/>Starego algorytmu honorowane (A), ale nie można uwzględnić innych kryteriów w przypadkach opisanych powyżej.<p/>Wszystko, co powiedzieć o kolumn i szerokości, w tym artykule dotyczą również wierszy i wysokości.|
|Sugestia|Domyślnie aplikacje, które wersji docelowej platformy .NET w programie .NET Framework 4.7 zobaczą nowego algorytmu podczas aplikacje, które docelowej platformy .NET Framework 4.6.2 i jego wcześniejsze wersje zobaczą starego algorytmu.<p/>Aby zastąpić domyślne, należy użyć następującego ustawienia konfiguracji:<pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Controls.Grid.StarDefinitionsCanExceedAvailableSpace=true&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre>Wartość <code>true</code> wybiera algorytm starego <code>false</code> wybiera nowy algorytm.|
|Zakres|Pomocnicza|
|Wersja|4.7|
|Typ|Przekierowania|

