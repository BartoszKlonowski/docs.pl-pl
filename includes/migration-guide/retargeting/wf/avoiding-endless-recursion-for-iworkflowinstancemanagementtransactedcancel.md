### <a name="avoiding-endless-recursion-for-iworkflowinstancemanagementtransactedcancel-and-iworkflowinstancemanagementtransactedterminate"></a>Unikanie nieskończonej rekursji IWorkflowInstanceManagement.TransactedCancel i IWorkflowInstanceManagement.TransactedTerminate

|   |   |
|---|---|
|Szczegóły|W pewnych okolicznościach, gdy za pomocą <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement.TransactedCancel%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement.TransactedTerminate%2A?displayProperty=nameWithType> wystąpienia usługi interfejsów API, aby anulować lub przerwanie przepływu pracy, wystąpienie przepływu pracy mogą wystąpić z powodu nieskończonej rekursji przepełnienie stosu podczas <code>Workflow</code> próbuje zachować środowiska wykonawczego wystąpienie usługi w ramach przetwarzania żądania. Problem występuje, jeśli wystąpienie przepływu pracy jest w stanie, w którym oczekuje na niektóre inne oczekujące WCF żądanie do innej usługi do wykonania. <code>TransactedCancel</code> i <code>TransactedTerminate</code> operacji tworzenia elementów roboczych, które są umieszczone w kolejce dla wystąpienia usługi przepływu pracy. Pracy, te elementy nie są wykonywane w ramach przetwarzania <code>TransactedCancel/TransactedTerminate</code> żądania. Ponieważ wystąpienie usługi przepływu pracy jest zajęty, oczekiwanie na inne oczekujące żądanie WCF zakończyć, pracy utworzony element pozostaje w kolejce. <code>TransactedCancel/TransactedTerminate</code> Zakończeniu operacji i kontrolka jest zwracana do klienta. Gdy skojarzona transakcja <code>TransactedCancel/TransactedTerminate</code> próba przekazania operacji, należy zachować stan wystąpienia usługi przepływu pracy. Jednak ponieważ istnieje oczekujące <code>WCF</code> żądania dla tego wystąpienia środowiska uruchomieniowego przepływu pracy nie można utrwalić wystąpienia usługi przepływu pracy, a Pętla nieskończona rekursja prowadzi do przepełnienia stosu. Ponieważ <code>TransactedCancel</code> i <code>TransactedTerminate</code> tylko Tworzenie elementu roboczego w pamięci, fakt, że istnieje jakaś transakcja nie ma żadnego efektu. Wycofanie transakcji nie odrzuca elementu roboczego. Aby rozwiązać ten problem w programie .NET Framework 4.7.2, zostały wprowadzone <code>AppSetting</code> mogą być dodawane do <code>web.config/app.config</code> usługi przepływu pracy, która informuje, aby zignorować transakcji dla <code>TransactedCancel</code> i <code>TransactedTerminate</code>. Dzięki temu zatwierdzenie bez oczekiwania na wystąpienie przepływu pracy utrwalić transakcji. Ustawienie dla tej funkcji ma nazwę <code>microsoft:WorkflowServices:IgnoreTransactionsForTransactedCancelAndTransactedTerminate</code>. Wartość <code>true</code> wskazuje, że transakcja powinny być ignorowane, co umożliwia uniknięcie przepełnienia stosu. Wartość domyślna to ustawienie jest <code>false</code>, więc nie ma wpływu na istniejące wystąpienie usługi przepływu pracy.|
|Sugestia|Jeśli używasz AppFabric lub innym <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> klienta i czy wystąpią przepełnienie stosu w wystąpieniu usługi przepływu pracy, podczas próby anulowania lub zakończenia wystąpienia przepływu pracy, można dodać następujące polecenie, aby <code>&lt;appSettings&gt;</code> sekcji web.config/ Plik App.config dla usługi przepływu pracy:<pre><code class="lang-xml">&lt;add key=&quot;microsoft:WorkflowServices:IgnoreTransactionsForTransactedCancelAndTransactedTerminate&quot; value=&quot;true&quot;/&gt;&#13;&#10;</code></pre>Jeśli nie napotkano problem, nie trzeba w tym celu.|
|Zakres|Krawędź|
|Wersja|4.7.2|
|Typ|Przekierowania|

