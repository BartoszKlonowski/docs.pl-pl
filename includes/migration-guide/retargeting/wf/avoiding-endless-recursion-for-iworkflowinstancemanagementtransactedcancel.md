---
ms.openlocfilehash: 5850e3359dab6503d5745a2266c7bf77780e5cc0
ms.sourcegitcommit: 0aca6c5d166d7961a1e354c248495645b97a1dc5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/01/2019
ms.locfileid: "58760885"
---
### <a name="avoiding-endless-recursion-for-iworkflowinstancemanagementtransactedcancel-and-iworkflowinstancemanagementtransactedterminate"></a>Unikanie nieskończoną rekursję IWorkflowInstanceManagement.TransactedCancel i IWorkflowInstanceManagement.TransactedTerminate

|   |   |
|---|---|
|Szczegóły|W pewnych okolicznościach, w przypadku korzystania z <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement.TransactedCancel%2A?displayProperty=nameWithType> lub <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement.TransactedTerminate%2A?displayProperty=nameWithType> interfejsy API w celu anulowania lub zakończenia przepływu pracy usługi wystąpienie, wystąpienie przepływu pracy, może wystąpić przepełnienie stosu, z powodu nieskończonej rekursji podczas <code>Workflow</code> runtime próbuje zachować wystąpienie usługi w ramach przetwarzania żądania. Ten problem występuje, jeśli wystąpienie przepływu pracy jest w stanie, w której oczekuje na niektórych innych oczekujące WCF żądanie do innej usługi zakończyć. <code>TransactedCancel</code> i <code>TransactedTerminate</code> operacje tworzenia elementów roboczych, które są umieszczane w kolejce dla wystąpienia usługi przepływu pracy. Pracy, te elementy nie są wykonywane w ramach przetwarzania <code>TransactedCancel/TransactedTerminate</code> żądania. Ponieważ wystąpienia usługi przepływu pracy jest zajęty, oczekiwanie na inne oczekujące żądanie WCF zakończyć, pracy utworzony element pozostaje w kolejce. <code>TransactedCancel/TransactedTerminate</code> Kończy działanie i kontrolka jest zwracana do klienta. Gdy transakcja jest skojarzony z <code>TransactedCancel/TransactedTerminate</code> operacji próbuje zatwierdzić, musi ona utrwalanie stanu wystąpienia przepływu pracy usługi. Ale ponieważ istnieje oczekujące <code>WCF</code> żądania dla tego wystąpienia środowiska wykonawczego przepływów pracy nie można utrwalić wystąpienia usługi przepływu pracy i pętlę nieskończoną rekursję prowadzą do przepełnienia stosu. Ponieważ <code>TransactedCancel</code> i <code>TransactedTerminate</code> tylko utworzyć element roboczy w pamięci, fakt, że istnieje transakcja nie ma żadnego skutku. Wycofywanie transakcji nie odrzuca elementu roboczego. Aby rozwiązać ten problem, począwszy od .NET Framework 4.7.2, firma Microsoft wprowadza <code>AppSetting</code> mogą być dodawane do <code>web.config/app.config</code> usługi przepływu pracy, która informuje, aby zignorować transakcji dla <code>TransactedCancel</code> i <code>TransactedTerminate</code>. Dzięki temu zatwierdzenie bez oczekiwania na wystąpienie przepływu pracy utrwalić transakcji. Ustawienie dla tej funkcji ma nazwę <code>microsoft:WorkflowServices:IgnoreTransactionsForTransactedCancelAndTransactedTerminate</code>. Wartość <code>true</code> wskazuje, że transakcja mają być ignorowane, unikając w ten sposób witryna stack overflow. Wartość domyślna to ustawienie jest <code>false</code>, więc nie wpływają na istniejących wystąpień usługi przepływu pracy.|
|Sugestia|Jeśli używasz rozwiązania AppFabric lub innym <xref:System.ServiceModel.Activities.IWorkflowInstanceManagement> klienta i czy wystąpią przepełnienia stosu w wystąpieniu usługi przepływu pracy, podczas próby anulowania lub zakończenia wystąpienia przepływu pracy, można dodać następujące polecenie, aby <code>&lt;appSettings&gt;</code> sekcji web.config/ Plik App.config dla usługi przepływu pracy:<pre><code class="lang-xml">&lt;add key=&quot;microsoft:WorkflowServices:IgnoreTransactionsForTransactedCancelAndTransactedTerminate&quot; value=&quot;true&quot;/&gt;&#13;&#10;</code></pre>Jeśli nie napotkasz ten problem, nie musisz to zrobić.|
|Zakres|Krawędź|
|Wersja|4.7.2|
|Typ|Przekierowanie|

