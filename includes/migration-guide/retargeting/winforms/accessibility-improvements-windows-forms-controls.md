---
ms.openlocfilehash: 8c031198a1faad58ac5c5f5d5f042a1d9a35e8d5
ms.sourcegitcommit: 337bdc5a463875daf2cc6883e5a2da97d56f5000
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/24/2019
ms.locfileid: "72887814"
---
### <a name="accessibility-improvements-in-windows-forms-controls"></a>Ulepszenia ułatwień dostępu w kontrolkach Windows Forms

|   |   |
|---|---|
|Szczegóły|Windows Forms ulepsza sposób działania z technologiami ułatwień dostępu w celu lepszego wsparcia Windows Forms klientów. Obejmują one następujące zmiany, zaczynając od .NET Framework 4.7.1:<ul><li>Zmiany w celu usprawnienia wyświetlania w trybie duży kontrast.</li><li>Zmiany w celu ulepszenia środowiska przeglądarki właściwości. Ulepszenia przeglądarki właściwości obejmują:</li><li>Lepsza Nawigacja przy użyciu klawiatury w różnych oknach menu rozwijanego.</li><li>Zredukowanie zbędnych tabulatorów.</li><li>Lepsze raportowanie typów kontroli.</li><li>Ulepszone zachowanie narratora.</li><li>Zmiany w celu zaimplementowania brakujących wzorców dostępności interfejsu użytkownika w kontrolkach.</li></ul>|
|Sugestia|**Jak wybrać lub wycofać te zmiany**<br>Aby aplikacja mogła korzystać z tych zmian, musi ona działać na .NET Framework 4.7.1 lub nowszym. Aplikacja może korzystać z tych zmian w jeden z następujących sposobów:<ul><li>Zostanie ponownie skompilowana w celu przekierowania .NET Framework 4.7.1. Te zmiany ułatwień dostępu są domyślnie włączone w Windows Forms aplikacjach przeznaczonych dla .NET Framework 4.7.1 lub nowszych.</li><li>Przed zainstalowaniem w tym celu starszych zachowań ułatwień dostępu należy dodać następujący [przełącznik AppContext](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) do sekcji <code>&lt;runtime&gt;</code> pliku App. config i ustawić go na <code>false</code>, jak pokazano w poniższym przykładzie.</li></ul><pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;startup&gt;&#13;&#10;&lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.7&quot;/&gt;&#13;&#10;&lt;/startup&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;!-- AppContextSwitchOverrides value attribute is in the form of &#39;key1=true/false;key2=true/false  --&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre><br>Aplikacje ukierunkowane na .NET Framework 4.7.1 lub nowsze i chcą zachować starsze zachowanie ułatwień dostępu mogą zrezygnować z używania starszych funkcji ułatwień dostępu przez jawne ustawienie tego przełącznika AppContext na <code>true</code>.<p/>Aby zapoznać się z omówieniem automatyzacji interfejsu użytkownika, zobacz [Omówienie automatyzacji interfejsu użytkownika](~/docs/framework/ui-automation/ui-automation-overview.md).<p/>**Dodano obsługę wzorców i właściwości automatyzacji interfejsu użytkownika**<br/>Klienci dostępności mogą korzystać z nowych funkcji ułatwień dostępu narzędzi WinForms za pomocą wspólnych, publicznie opisanych wzorców wywołań. Wzorce te nie są specyficzne dla WinForms. Na przykład klienci dostępności mogą wywołać metodę QueryInterface w interfejsie IAccessible (MAAS) w celu uzyskania interfejsu IServiceProvider. Jeśli ten interfejs jest dostępny, klienci mogą użyć metody QueryService, aby zażądać interfejsu IAccessibleEx. Aby uzyskać więcej informacji, zobacz [Używanie IAccessibleEx z poziomu klienta](https://docs.microsoft.com/windows/desktop/WinAuto/using-iaccessibleex-from-a-client). Począwszy od .NET Framework 4.7.1, IServiceProvider i [IAccessibleEx](https://docs.microsoft.com/windows/desktop/WinAuto/iaccessibleex) (jeśli dotyczy) są dostępne dla obiektów ułatwień dostępu dla narzędzi WinForms.<p/>.NET Framework 4.7.1 dodaje obsługę następujących wzorców automatyzacji interfejsu użytkownika i właściwości:<ul><li>Kontrolki <xref:System.Windows.Forms.ToolStripSplitButton> i <xref:System.Windows.Forms.ComboBox> obsługują [wzorzec rozwijania/zwijania](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Kontrolka <xref:System.Windows.Forms.ToolStripMenuItem> ma wartość właściwości [controltype](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>Formant <xref:System.Windows.Forms.ToolStripItem> obsługuje Właściwość <xref:System.Windows.Automation.AutomationElement.NameProperty> i[wzorzec Rozwiń/Zwiń](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Formant <xref:System.Windows.Forms.ToolStripDropDownItem> obsługuje <xref:System.Windows.Forms.AccessibleEvents> wskazujące StateChange i NameChange —, gdy lista rozwijana zostanie rozwinięta lub zwinięte.</li><li>Kontrolka <xref:System.Windows.Forms.ToolStripDropDownButton> ma właściwość [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) o wartości <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>Formant <xref:System.Windows.Forms.DataGridViewCheckBoxCell> obsługuje <xref:System.Windows.Automation.TogglePattern>.</li><li>Kontrolki <xref:System.Windows.Forms.NumericUpDown> i <xref:System.Windows.Forms.DomainUpDown> obsługują Właściwość <xref:System.Windows.Automation.AutomationElement.NameProperty> i mają element [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-spinner-control-type.md) z <xref:System.Windows.Automation.ControlType.Spinner?displayProperty=nameWithType>.</p></li></ul>**Ulepszenia kontrolki PropertyGrid**<br>.NET Framework 4.7.1 dodaje następujące usprawnienia do kontrolki przeglądarka właściwości:<ul><li>Przycisk **szczegóły** w oknie dialogowym błędu, który jest wyświetlany, gdy użytkownik wprowadza niepoprawną wartość w kontrolce <xref:System.Windows.Forms.PropertyGrid> obsługuje [wzorzec rozwijania/zwijania](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md)oraz powiadomienia o zmianie stanu i nazwy oraz Właściwość [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) z wartość <xref:System.Windows.Automation.ControlType.MenuItem?displayProperty=nameWithType>.</li><li>Okienko komunikatu wyświetlane po rozwinięciu przycisku **szczegóły** okna dialogowego błędu jest teraz dostępne z klawiatury i umożliwia programowi Narrator ogłaszanie zawartości komunikatu o błędzie.</li><li><xref:System.Windows.Forms.AccessibleRole> wierszy w kontrolce <xref:System.Windows.Forms.PropertyGrid> zostały zmienione z &quot;&quot; wierszy, aby &quot;komórki&quot;. Komórka mapuje do UIA ControlType &quot;elementu&quot;, co umożliwia działowi IT obsługę odpowiednich skrótów klawiaturowych i anonsów narracji.</li><li><xref:System.Windows.Forms.PropertyGrid> wierszy formantów, które reprezentują elementy nagłówka, gdy kontrolka <xref:System.Windows.Forms.PropertyGrid> ma właściwość <xref:System.Windows.Forms.PropertyGrid.PropertySort> ustawioną na <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> mają wartość właściwości [ControlType](~/docs/framework/ui-automation/ui-automation-support-for-the-menubar-control-type.md) równą <xref:System.Windows.Automation.ControlType.Button?displayProperty=nameWithType>.</li><li><xref:System.Windows.Forms.PropertyGrid> wierszy formantów, które reprezentują elementy nagłówka, gdy kontrolka <xref:System.Windows.Forms.PropertyGrid> ma właściwość <xref:System.Windows.Forms.PropertyGrid.PropertySort> ustawioną na <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> obsługę [wzorca rozwijania/zwijania](~/docs/framework/ui-automation/implementing-the-ui-automation-expandcollapse-control-pattern.md).</li><li>Ulepszona nawigacja klawiatury między siatką i paskiem narzędzi nad nią. Naciśnięcie &quot;Shift-Tab&quot; teraz wybiera pierwszy przycisk paska narzędzi, a nie cały pasek narzędzi.</li><li>kontrolki <xref:System.Windows.Forms.PropertyGrid> wyświetlane w trybie duży kontrast teraz rysują prostokąt fokusu wokół przycisku paska narzędzi, który odpowiada bieżącej wartości właściwości <xref:System.Windows.Forms.PropertyGrid.PropertySort>.</li><li><xref:System.Windows.Forms.PropertyGrid> kontrolki wyświetlane w trybie duży kontrast i Właściwość <xref:System.Windows.Forms.PropertyGrid.PropertySort> ustawiona na <xref:System.Windows.Forms.PropertySort.Categorized?displayProperty=nameWithType> będzie teraz wyświetlać tło nagłówków kategorii w kolorze o wysokim kontraście.</li><li><xref:System.Windows.Forms.PropertyGrid> formanty lepiej odróżniają elementy paska narzędzi z fokusem i elementami paska narzędzi, które wskazują bieżącą wartość właściwości <xref:System.Windows.Forms.PropertyGrid.PropertySort>. Ta poprawka obejmuje zmianę duży kontrast i zmianę w scenariuszach nieduży kontrastowych.</li><li>elementy paska narzędzi formantów <xref:System.Windows.Forms.PropertyGrid>, które wskazują bieżącą wartość właściwości <xref:System.Windows.Forms.PropertyGrid.PropertySort>, obsługują <xref:System.Windows.Automation.TogglePattern>.</li><li>Ulepszono obsługę Narratora w celu odróżnienia zaznaczonego wyrównania w selektorze wyrównania.</li><li>Gdy w formularzu zostanie wyświetlona pusta kontrolka <xref:System.Windows.Forms.PropertyGrid>, będzie ona teraz się skupić, gdy wcześniej nie byłoby.</p></li></ul>**Używanie kolorów zdefiniowanych w systemie operacyjnym w duży kontrast motywach**<br><ul><li>Kontrolki <xref:System.Windows.Forms.Button> i <xref:System.Windows.Forms.CheckBox> z właściwością <xref:System.Windows.Forms.ButtonBase.FlatStyle> ustawioną na <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>, która jest stylem domyślnym, teraz w przypadku wybrania opcji Zastosuj kolory zdefiniowane przez system operacyjny w motywie duży kontrast. Wcześniej kolory tekstu i tła nie były kontrastowe i trudno je odczytać.</li><li>Kontrolki <xref:System.Windows.Forms.Button>, <xref:System.Windows.Forms.CheckBox>, <xref:System.Windows.Forms.RadioButton>, <xref:System.Windows.Forms.Label>, <xref:System.Windows.Forms.LinkLabel>i <xref:System.Windows.Forms.GroupBox> z właściwością <xref:System.Windows.Forms.Control.Enabled> ustawione na **wartość false** używają kolor cieniowania w celu renderowania tekstu w duży kontrast motywach, co skutkuje niskim kontrastem w tle. Teraz te kontrolki używają koloru &quot;wyłączone&quot; tekstu zdefiniowanego przez system operacyjny. Ta poprawka ma zastosowanie do kontrolek z właściwością <code>FlatStyle</code> ustawioną na wartość inną niż <xref:System.Windows.Forms.FlatStyle.System?displayProperty=nameWithType>. Te ostatnie kontrolki są renderowane przez system operacyjny.</li><li><xref:System.Windows.Forms.DataGridView> teraz renderuje widoczny prostokąt wokół zawartości komórki, która ma bieżący fokus. Wcześniej nie było to widoczne w niektórych duży kontrast motywów.</li><li><xref:System.Windows.Forms.ToolStripMenuItem> kontrolki z właściwością <xref:System.Windows.Forms.ToolStripMenuItem.Enabled> ustawione na **wartość false** teraz używają &quot;wyłączonego tekstu&quot; koloru zdefiniowanego przez system operacyjny.</li><li><xref:System.Windows.Forms.ToolStripMenuItem> kontrolki z właściwością <xref:System.Windows.Forms.ToolStripMenuItem.Checked> ustawioną na **wartość true** teraz renderuje skojarzony znacznik wyboru w kolorze systemu kontrastowego.  Wcześniej kolor znacznika wyboru nie był wystarczająco kontrastowy i nie jest widoczny w motywach duży kontrast.</li></ul>Uwaga: system Windows 10 zmienił wartości dla niektórych kolorów systemu o dużym kontraście. Platforma Windows Forms Framework jest oparta na platformie Win32. Aby uzyskać najlepsze środowisko, uruchom polecenie w najnowszej wersji systemu Windows i zapoznaj się z najnowszymi zmianami systemu operacyjnego przez dodanie pliku App. manifest do aplikacji testowej i usunięcie komentarza z następującego kodu:<pre><code class="lang-xml">&lt;!-- Windows 10 --&gt;&#13;&#10;&lt;supportedOS Id=&quot;{8e0f7a12-bfb3-4fe8-b9a5-48fd50a15a9a}&quot; /&gt;&#13;&#10;</code></pre><br>**Ulepszone nawigowanie po klawiaturze**<ul><li>Gdy kontrolka <xref:System.Windows.Forms.ComboBox> ma właściwość <xref:System.Windows.Forms.ComboBox.DropDownStyle> ustawioną na <xref:System.Windows.Forms.ComboBoxStyle.DropDownList?displayProperty=nameWithType> i jest pierwszą kontrolką w kolejności tabulacji w formularzu, teraz wyświetla prostokąt fokusu, gdy formularz nadrzędny zostanie otwarty przy użyciu klawiatury. Przed wprowadzeniem tej zmiany fokus klawiatury był na tym formancie, ale wskaźnik fokusu nie został renderowany.</li></ul>**Ulepszona obsługa Narratora**<ul><li>Kontrolka <xref:System.Windows.Forms.MonthCalendar> dodała obsługę technologii pomocniczych w celu uzyskania dostępu do kontrolki, w tym możliwość odczytywania przez program Narrator wartości kontrolki, gdy wcześniej nie było to możliwe.</li><li>Kontrolka <xref:System.Windows.Forms.CheckedListBox> teraz powiadamia program Narrator, gdy właściwość <xref:System.Windows.Forms.CheckBox.CheckState?displayProperty=nameWithType> została zmieniona. Wcześniej program Narrator nie otrzymał powiadomienia i w związku z tym użytkownicy nie otrzymali informacji o aktualizacji właściwości <xref:System.Windows.Forms.CheckBox.CheckState>.</li><li>Formant <xref:System.Windows.Forms.LinkLabel> zmienił sposób powiadamiania Narratora o tekście w kontrolce. Wcześniej program Narrator ogłosił ten tekst dwukrotnie i odczytuje &quot;&amp;&quot; symbole jako prawdziwy tekst, mimo że nie są widoczne dla użytkownika. Zduplikowany tekst został usunięty z anonsów programu Narrator, a także niepotrzebne &quot;&amp;&quot; symbole.</li><li>Typy kontrolek <xref:System.Windows.Forms.DataGridViewCell> teraz poprawnie zgłaszają stan tylko do odczytu do programu Narrator i innych technologii pomocniczych.</li><li>Program Narrator może teraz odczytać menu systemowe okien podrzędnych w temacie [wiele dokumentów interfejsu] ~/docs/Framework/WinForms/Advanced/Multiple-Document-Interface-MDI-Applications.MD).</li><li>Program Narrator może teraz odczytać kontrolki <xref:System.Windows.Forms.ToolStripMenuItem> z właściwością <xref:System.Windows.Forms.ToolStripItem.Enabled?displayProperty=nameWithType> ustawioną na **wartość false**. Wcześniej program Narrator nie mógł skoncentrować się na wyłączonych elementach menu w celu odczytania zawartości.</li></ul>|
|Zakres|Duży|
|Wersja|4.7.1|
|Typ|Przekierowanie|
|Dotyczy interfejsów API|<ul><li><xref:System.Windows.Forms.ToolStripDropDownButton.CreateAccessibilityInstance?displayProperty=nameWithType></li><li><xref:System.Windows.Forms.DomainUpDown.DomainUpDownAccessibleObject.Name?displayProperty=nameWithType></li><li>[MonthCalendar. AccessibilityObject](xref:System.Windows.Forms.Control.AccessibilityObject)</li></ul>|
