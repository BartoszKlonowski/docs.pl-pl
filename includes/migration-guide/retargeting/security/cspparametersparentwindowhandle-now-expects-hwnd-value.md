---
ms.openlocfilehash: 47406da0e916451f5941f1acce7a3c46f5ed0df5
ms.sourcegitcommit: 0aca6c5d166d7961a1e354c248495645b97a1dc5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/01/2019
ms.locfileid: "58760253"
---
### <a name="cspparametersparentwindowhandle-now-expects-hwnd-value"></a><span data-ttu-id="40ee3-101">CspParameters.ParentWindowHandle teraz oczekuje wartości HWND</span><span class="sxs-lookup"><span data-stu-id="40ee3-101">CspParameters.ParentWindowHandle now expects HWND value</span></span>

|   |   |
|---|---|
|<span data-ttu-id="40ee3-102">Szczegóły</span><span class="sxs-lookup"><span data-stu-id="40ee3-102">Details</span></span>|<span data-ttu-id="40ee3-103"><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> Wartość wprowadzona w programie .NET Framework 2.0 umożliwia aplikacji do zarejestrowania wartość uchwyt okna nadrzędnego w taki sposób, że wszelkich elementów interfejsu użytkownika wymagane do uzyskania dostępu do klucza (takie jak numer PIN Monituj lub okna dialogowego zgody) otwiera się jako modalne podrzędne do określonego okna. Począwszy od aplikacji przeznaczonych dla programu .NET Framework 4.7 aplikacji Windows Forms można ustawić <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> właściwości z kodem, podobnie do poniższego:</span><span class="sxs-lookup"><span data-stu-id="40ee3-103">The <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> value, introduced in .NET Framework 2.0, allows an application to register a parent window handle value such that any UI required to access the key (such as a PIN prompt or consent dialog) opens as a modal child to the specified window.Starting with apps that target the .NET Framework 4.7, a Windows Forms application can set the <xref:System.Security.Cryptography.CspParameters.ParentWindowHandle> property with code like the following:</span></span><pre><code class="lang-csharp">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="40ee3-104">W poprzednich wersjach programu .NET Framework, wartość Oczekiwano <xref:System.IntPtr?displayProperty=name> reprezentujący lokalizacja w pamięci, gdzie [HWND](https://docs.microsoft.com/windows/desktop/WinProg/windows-data-types#HWND) wartości znajdowały się.</span><span class="sxs-lookup"><span data-stu-id="40ee3-104">In previous versions of the .NET Framework, the value was expected to be an <xref:System.IntPtr?displayProperty=name> representing a location in memory where the [HWND](https://docs.microsoft.com/windows/desktop/WinProg/windows-data-types#HWND) value resided.</span></span> <span data-ttu-id="40ee3-105">Ustawianie właściwości formularza. Obsługi w systemie Windows 7 i wcześniejsze wersje nie miało wpływu, ale w systemie Windows 8 i nowszych wersjach powoduje ona &quot; <xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: Parametr jest nieprawidłowy.&quot;</span><span class="sxs-lookup"><span data-stu-id="40ee3-105">Setting the property to form.Handle on Windows 7 and earlier versions had no effect, but on Windows 8 and later versions, it results in a &quot;<xref:System.Security.Cryptography.CryptographicException?displayProperty=name>: The parameter is incorrect.&quot;</span></span>|
|<span data-ttu-id="40ee3-106">Sugestia</span><span class="sxs-lookup"><span data-stu-id="40ee3-106">Suggestion</span></span>|<span data-ttu-id="40ee3-107">Aplikacje przeznaczone dla .NET Framework 4.7 lub nowszej pragnący zarejestrować relacji okna nadrzędnego, zaleca się używać Uproszczona forma:</span><span class="sxs-lookup"><span data-stu-id="40ee3-107">Applications targeting .NET Framework 4.7 or higher wishing to register a parent window relationship are encouraged to use the simplified form:</span></span><pre><code class="lang-csharp">cspParameters.ParentWindowHandle = form.Handle;&#13;&#10;</code></pre><span data-ttu-id="40ee3-108">Użytkownicy, którzy miał identyfikowane, że poprawną wartość do przekazania był adres lokalizacji pamięci, w której przechowywane wartości <code>form.Handle</code> można zrezygnować z Zmiana zachowania, ustawiając przełącznik AppContext <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> do <code>true</code>.</span><span class="sxs-lookup"><span data-stu-id="40ee3-108">Users who had identified that the correct value to pass was the address of a memory location which held the value <code>form.Handle</code> can opt out of the behavior change by setting the AppContext switch <code>Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle</code> to <code>true</code>.</span></span><ol><li><span data-ttu-id="40ee3-109">Programowe ustawiając compat przełącza się na AppContext, zgodnie z objaśnieniem [tutaj](https://devblogs.microsoft.com/dotnet/net-announcements-at-build-2015/#dotnet46)</span><span class="sxs-lookup"><span data-stu-id="40ee3-109">By programmatically setting compat switches on the AppContext, as explained [here](https://devblogs.microsoft.com/dotnet/net-announcements-at-build-2015/#dotnet46)</span></span></li><li><span data-ttu-id="40ee3-110">Dodając następujący wiersz do <code>&lt;runtime&gt;</code> sekcji w pliku app.config:</span><span class="sxs-lookup"><span data-stu-id="40ee3-110">By adding the following line to the <code>&lt;runtime&gt;</code> section of the app.config file:</span></span></li></ol><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Security.Cryptography.DoNotAddrOfCspParentWindowHandle=true&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="40ee3-111">Z drugiej strony, użytkownicy, którzy chcą zgadzaj się na nowe zachowanie w środowisku uruchomieniowym .NET Framework 4.7, gdy obciążenie aplikacji w starszej wersji programu .NET Framework można ustawić AppContext przełączyć się do <code>false</code>.</span><span class="sxs-lookup"><span data-stu-id="40ee3-111">Conversely, users who wish to opt in to the new behavior on the .NET Framework 4.7 runtime when the application loads under older .NET Framework versions can set the AppContext switch to <code>false</code>.</span></span>|
|<span data-ttu-id="40ee3-112">Zakres</span><span class="sxs-lookup"><span data-stu-id="40ee3-112">Scope</span></span>|<span data-ttu-id="40ee3-113">Mały</span><span class="sxs-lookup"><span data-stu-id="40ee3-113">Minor</span></span>|
|<span data-ttu-id="40ee3-114">Wersja</span><span class="sxs-lookup"><span data-stu-id="40ee3-114">Version</span></span>|<span data-ttu-id="40ee3-115">4.7</span><span class="sxs-lookup"><span data-stu-id="40ee3-115">4.7</span></span>|
|<span data-ttu-id="40ee3-116">Typ</span><span class="sxs-lookup"><span data-stu-id="40ee3-116">Type</span></span>|<span data-ttu-id="40ee3-117">Przekierowanie</span><span class="sxs-lookup"><span data-stu-id="40ee3-117">Retargeting</span></span>|
|<span data-ttu-id="40ee3-118">Dotyczy interfejsów API</span><span class="sxs-lookup"><span data-stu-id="40ee3-118">Affected APIs</span></span>|<ul><li><xref:System.Security.Cryptography.CspParameters.ParentWindowHandle?displayProperty=nameWithType></li></ul>|

